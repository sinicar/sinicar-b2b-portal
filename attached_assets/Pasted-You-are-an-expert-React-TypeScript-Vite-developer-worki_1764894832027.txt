You are an expert React + TypeScript + Vite developer working inside an existing project for “SINI CAR – B2B Wholesale Customer Portal”.

IMPORTANT RULES (DO NOT BREAK THESE):
- Do NOT delete or rename any existing files.
- Do NOT rewrite the project from scratch.
- Do NOT change the core layout, routing structure, or business logic.
- Do NOT remove or change existing Arabic texts, translations, or i18n keys.
- Only ADD new code or make SMALL, SAFE extensions to existing code where explicitly requested.
- The project currently uses mockApi + LocalStorage. Do NOT switch it to real API mode.

Your task is to ADD a new “Marketing Center” feature in the admin panel + support for marketing campaigns/notifications in the customer portal.

Please work STEP BY STEP. Finish each step before moving to the next one. If a filename I mention is slightly different in the project, find the closest matching file and use that.

============================================================
STEP 0 – QUICK PROJECT SCAN (READ-ONLY)
============================================================

1. Inspect the project structure:
   - Find: App.tsx (or main App component)
   - Find: Admin layout / admin routes (e.g. AdminDashboard, Admin pages)
   - Find: services/mockApi.ts (or similar)
   - Find: types.ts (central types/interfaces file)
   - Find: any existing notification/alert components (e.g. NotificationsBell, Toast, etc.)
   - Find: Language/i18n setup (for reference only, do not change).

Do NOT modify anything in this step. Just understand the structure so you can plug into it.

============================================================
STEP 1 – DEFINE TYPES FOR MARKETING CAMPAIGNS
============================================================

Goal: create a strong TypeScript type for marketing campaigns and, if needed, for per-user campaign dismissal state.

1. Open types.ts (or the main shared types file).
2. ADD a new type for MarketingCampaign, for example:

export type CampaignDisplayType = 'POPUP' | 'BANNER' | 'BELL' | 'DASHBOARD_CARD';

export type CampaignContentType = 'TEXT' | 'IMAGE' | 'VIDEO' | 'HTML';

export interface MarketingCampaign {
  id: string;
  title: string;
  message: string;
  displayType: CampaignDisplayType;
  skippable: boolean; // true = can be dismissed, false = non-skippable
  contentType: CampaignContentType;
  mediaUrl?: string;     // for image/video
  htmlContent?: string;  // for rich HTML content if needed
  ctaLabel?: string;     // e.g. "اطلب الآن"
  ctaUrl?: string;       // optional link
  audienceType: 'ALL' | 'SPARE_PARTS_SHOP' | 'RENTAL_COMPANY' | 'WORKSHOP' | 'INSURANCE_COMPANY';
  status: 'DRAFT' | 'ACTIVE' | 'PAUSED' | 'EXPIRED';
  priority: number;      // higher number = higher priority
  createdAt: string;
  startsAt?: string;
  expiresAt?: string;
}

3. Extend existing user/customer/profile type(s) to track which campaigns they dismissed, for example:

// For a business profile or user, add:
dismissedCampaignIds?: string[];

Make sure this is optional so it does not break existing data.

============================================================
STEP 2 – EXTEND mockApi STORAGE FOR CAMPAIGNS
============================================================

Goal: store campaigns and user dismissals in LocalStorage, using the existing mockApi pattern.

1. Open services/mockApi.ts.
2. Add a new STORAGE_KEY for campaigns at the top where STORAGE_KEYS are defined, e.g.:

CAMPAIGNS: 'sini_marketing_campaigns',

3. Implement helper functions for campaigns inside mockApi:

- getAllCampaigns(): Promise<MarketingCampaign[]>
- createCampaign(campaignInput: Partial<MarketingCampaign>): Promise<MarketingCampaign>
- updateCampaignStatus(id: string, status: MarketingCampaign['status']): Promise<MarketingCampaign>
- deleteCampaign(id: string): Promise<void>

Implementation details:
- Use LocalStorage (consistent with the rest of mockApi).
- Generate id with something like Date.now().toString() or similar.
- When reading from LocalStorage, use the same safe parsing pattern you already used elsewhere (if safeParse exists, use it).
- Respect createdAt, startsAt, expiresAt when returning ACTIVE campaigns.
- Do NOT break any existing mockApi functions.

4. In the same file, add functions to mark a campaign as dismissed for a user/business profile, for example:

- dismissCampaignForUser(userId: string, campaignId: string): Promise<void>
- getDismissedCampaignIds(userId: string): Promise<string[]>

Update LocalStorage accordingly, integrating with the existing data model for users/profiles.

============================================================
STEP 3 – ADMIN MARKETING PAGE (UI + LOGIC)
============================================================

Goal: Add a new admin page: “Marketing Center” to manage campaigns.

1. Create a new component file:
   - components/AdminMarketingCenter.tsx
   (If there is an existing admin pages folder, use that convention instead, for example pages/admin/AdminMarketingCenter.tsx.)

2. In this component, implement:
   - A header/title in Arabic: "مركز التسويق"
   - A section to CREATE a new campaign with a form:
     - title (input text)
     - message (textarea)
     - displayType (select: POPUP, BANNER, BELL, DASHBOARD_CARD)
     - skippable (checkbox: "إشعار قابل للتخطي" / "غير قابل للتخطي")
     - contentType (select: TEXT, IMAGE, VIDEO, HTML)
     - mediaUrl (text input for now – in the future this could be a file upload)
     - ctaLabel, ctaUrl (optional inputs)
     - audienceType (select: "كل العملاء" + specific types used in the system)
     - startsAt / expiresAt (date/time inputs or simple text input)
     - status (DRAFT or ACTIVE initially)
   - A “Save campaign” button that calls mockApi.createCampaign and refreshes the campaign list.

3. Add a table or list below the form showing existing campaigns:

Columns:
- Title
- Type (displayType)
- Status
- Audience
- CreatedAt
- Actions: [Activate/Pause], [Delete]

Actions should call:
- updateCampaignStatus
- deleteCampaign

4. Add basic validation:
   - title and message required.
   - If contentType is IMAGE or VIDEO, show a small helper text saying the mediaUrl is required.

5. Use the existing styling system: Tailwind classes and your current admin layout patterns. Do NOT introduce new design systems.

============================================================
STEP 4 – WIRE ADMIN MARKETING PAGE INTO ROUTES & SIDEBAR
============================================================

Goal: Add the new page to the admin navigation so that an administrator can access it.

1. Find where admin routes are defined:
   - This is likely inside App.tsx or a dedicated routes file, near AdminDashboard and other admin pages.

2. Add a new route for the marketing center, for example:
   - Path: /admin/marketing
   - Component: AdminMarketingCenter

3. Find the admin sidebar/menu component (for example in components/Layout or AdminSidebar).
4. Add a new menu item:
   - Label: "مركز التسويق"
   - Icon: reuse an existing marketing/megaphone/bell icon from lucide-react if available.
   - Link: /admin/marketing
   - Protect it so that only admin/owner roles can see this item (respect the existing permission system).

Do NOT change any other existing routes.

============================================================
STEP 5 – SHOW CAMPAIGNS TO CUSTOMERS (PORTAL SIDE)
============================================================

Goal: display marketing campaigns in the customer portal as:
- Popup (center of the screen)
- Notification bell (badge + list)
- Optional banner on top of the dashboard

Use the new MarketingCampaign data, targeted to the logged-in user’s audience type.

1. Find the main customer dashboard component, likely components/Dashboard.tsx (or similar).
2. Create a small hook or helper function to load ACTIVE campaigns for the current user:
   - It should:
     - Call getAllCampaigns()
     - Filter by:
       - status === 'ACTIVE'
       - audienceType === 'ALL' OR matches the current customer type
       - Date is within startsAt/expiresAt if defined
       - campaignId not in dismissedCampaignIds for this user
   - Return a list of campaigns for display.

3. Create a new UI component for the popup and banner, for example:
   - components/MarketingPopup.tsx
   - components/MarketingBanner.tsx
   Or a single component that switches layout based on campaign.displayType.

4. For POPUP campaigns:
   - Show a modal in the center of the screen.
   - Display title + message + optional image/video.
   - If skippable === true → show a close (X) button to dismiss.
   - If skippable === false → hide the close button; show only a "موافق" button.
   - On dismiss, call dismissCampaignForUser and remove it from the UI.

5. For BANNER campaigns:
   - Render a horizontal banner at the top of the dashboard content, with:
     - Short text (title or message)
     - Optional CTA button.
   - Allow dismiss if skippable is true (X button).
   - On dismiss, call dismissCampaignForUser.

============================================================
STEP 6 – INTEGRATE WITH NOTIFICATIONS BELL
============================================================

Goal: show campaigns in the notification bell (جرس الإشعارات).

1. Find the existing notifications bell component (e.g. NotificationsBell.tsx or similar). If none exists, find where user notifications are displayed and re-use that pattern.
2. Extend the bell data source to also include ACTIVE campaigns with displayType === 'BELL', filtered as in STEP 5.
3. Display them as notification items with:
   - Title
   - Short message
   - Optional CTA link
4. When user opens or dismisses such a notification, mark that campaign as dismissed via dismissCampaignForUser so it does not keep reappearing.

============================================================
STEP 7 – SAFETY & STABILITY
============================================================

- When adding new LocalStorage access for campaigns or dismissedCampaignIds, always use safe parsing (try/catch) to avoid crashing the app.
- Keep all new code strongly typed (TypeScript).
- Do NOT break any existing mockApi behavior.
- Do NOT change API mode. The system must remain in mock/local mode.

============================================================
STEP 8 – FINAL CHECK
============================================================

1. Run TypeScript checks and the Vite build:
   - npm install (if needed)
   - npm run build
2. Fix any TypeScript or compile errors you introduced.
3. Make sure:
   - The admin can open “مركز التسويق”.
   - The admin can create/edit/activate/pause/delete campaigns.
   - The customer portal shows campaigns properly (popup/banner/bell) according to displayType and skippable.
   - Dismissed campaigns do NOT re-appear for that same user.

APPLY ALL THESE STEPS NOW, CAREFULLY AND IN ORDER.
