IMPORTANT — This expands the existing SINI CAR system.
Do NOT delete any previous tools (VIN, PDF→Excel, Price Comparison, Alternatives).
We are adding a full TRADER TOOLS CENTER with:
- Complete logging system
- Centralized history per customer
- Data export
- File management
- Admin panel for reviewing and downloading all tool usage

GOAL:
Create a unified system for managing all trader tools:
1) VIN Extraction
2) PDF → Excel Conversion
3) Price Comparison
4) Alternatives Upload
5) Product Search Requests
6) Excel Uploads for Quotation

Each action performed by a customer must be captured, logged, stored, and visible in the admin panel with download options.

────────────────────────────────
1) Backend — TraderToolAction Model
────────────────────────────────

Create a new table to track all tool activities:

TraderToolAction:
- id
- customerId (FK to User)
- toolType (VIN, PDF_EXCEL, COMPARISON, ALTERNATIVES, SEARCH, EXCEL_QUOTE)
- inputData (JSON or text)       // input values, search terms, VIN number, etc.
- outputData (JSON)              // returned results summary
- inputFileUrl (string?)         // optional uploaded file
- outputFileUrl (string?)        // optional generated file
- createdAt
- createdFromIp
- deviceType (WEB / MOBILE)
- status (SUCCESS / FAILED)

Do NOT delete any existing tables. This is an extension.

────────────────────────────────
2) Backend — Logging Logic (Critical)
────────────────────────────────

Every time a customer uses a trader tool:

A) Insert new TraderToolAction record:
- customerId
- toolType
- inputData
- outputData (summary only, not full data)
- inputFileUrl/outputFileUrl (if any)
- createdAt = now
- createdFromIp = req.ip
- deviceType = detect user agent

B) Fire events:
- Log to ActivityLog (Command 10)
- Trigger Admin notification for critical actions (optional)
- Update customer completeness percentage (if tool usage increases profile)

────────────────────────────────
3) Backend — Admin APIs
────────────────────────────────

A) GET /api/admin/trader-tools
   Filters:
   - customerId
   - toolType
   - dateFrom/dateTo
   - status
   - hasFiles (true/false)
   Pagination required.

Return:
- list of actions
- summary: count per toolType

B) GET /api/admin/trader-tools/:id
   - Return full record details including file URLs.

C) DELETE /api/admin/trader-tools/:id
   - Soft delete (isDeleted = true).

D) GET /api/admin/trader-tools/export
   - Export data to Excel/CSV
   - Filters same as above
   - Fields exported:
     • id
     • customerId
     • toolType
     • input summary
     • output summary
     • timestamp

────────────────────────────────
4) Backend — Customer Panel APIs
────────────────────────────────

A) GET /api/customer/trader-tools/history
   - Fetch paginated history of customer’s own actions.
   - Filters:
     • toolType
     • date
     • status

B) GET /api/customer/trader-tools/:id
   - Details page for that tool action.

C) Allow re-download of previous outputFileUrl.

────────────────────────────────
5) Frontend — Customer Tools History Page
────────────────────────────────

Add new page in customer portal:
**"My Tools History" / "سجل خدمات التاجر"**

Sections:
- Filter tools (VIN / PDF→Excel / Comparison / Alternatives / Uploads)
- List of all tool actions with:
  • Tool type icon
  • Summary of result
  • Date/time
  • Status
  • View button
  • Download button (if available)

────────────────────────────────
6) Frontend — Admin Trader Tools Center
────────────────────────────────

In Admin Panel add menu:
**“Trader Tools Center” / “مركز خدمات التاجر”**

Includes:

### A) Filters Panel
- Customer
- Tool Type
- Date range
- Status
- Has files?
- Devices (web/mobile)
- Search by VIN or filename or keyword in inputData

### B) Main Table
Columns:
- Customer
- Tool type
- Summary
- Input details (click to expand)
- Output summary
- File icons (downloadable)
- Date
- Status
- View button
- Delete button

### C) Detail Drawer
Shows:
- Customer info (name/phone)
- Tool type
- Full inputData
- Full outputData
- Files (download/view)
- IP & device info
- Activity timeline linked to Command 10

### D) Export Button
Exports filtered results to Excel.

────────────────────────────────
7) Tool Categories (to register in the system)
────────────────────────────────

Register these tool types globally:

- VIN
- PDF_EXCEL
- COMPARISON
- ALTERNATIVES
- SEARCH
- EXCEL_QUOTE

Allow adding more tools in future without breaking system.

────────────────────────────────
8) Integration with Other Commands
────────────────────────────────

A) Activity Log (Command 10)
- Add entry:
  • "Customer used VIN tool"
  • "Customer uploaded PDF for conversion"
  • "Customer ran price comparison"
  • etc.

B) Reports Center (Command 9)
- Add new report:
  “Trader Tool Usage Report”
  Filters:
    • toolType
    • date range
    • customer
    • customerType
  Charts:
    • Most used tool
    • Tool usage per customer type
    • Monthly usage graph

C) Notifications (Command 11)
Optional triggers for admin:
- New Excel upload
- Abnormal usage
- Frequent errors

D) Settings (Command 12)
Add settings:
- Enable/disable specific tools per customer type
- Daily usage limit (optional future)
- Allow/disallow PDF uploads from new customers

────────────────────────────────
9) Data Storage & Performance (IMPORTANT)
────────────────────────────────

- Store files using external storage (Cloudflare R2 or S3).
- DO NOT store PDFs or Excel files inside Replit local filesystem.
- For each log record:
  • inputData/outputData should be summarized, not full.
- Pagination is mandatory for all tables.
- No real-time AI calls inside loops.

────────────────────────────────
10) Scope of this command
────────────────────────────────

This command includes:
- TraderToolAction model
- Logging for all tools
- Admin center with filters, table, detail drawer, export
- Customer tool history
- Full integration with:
  • Activity log
  • Reports center
  • Notifications
  • Settings

It does NOT:
- Replace the tools themselves
- Modify existing business workflows
- Change product or order logic
