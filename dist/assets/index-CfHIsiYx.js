function vq(e,s){for(var a=0;a<s.length;a++){const r=s[a];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ra(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qy={exports:{}},hm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r4;function yq(){if(r4)return hm;r4=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function a(r,n,i){var l=null;if(i!==void 0&&(l=""+i),n.key!==void 0&&(l=""+n.key),"key"in n){i={};for(var o in n)o!=="key"&&(i[o]=n[o])}else i=n;return n=i.ref,{$$typeof:e,type:r,key:l,ref:n!==void 0?n:null,props:i}}return hm.Fragment=s,hm.jsx=a,hm.jsxs=a,hm}var n4;function Nq(){return n4||(n4=1,qy.exports=yq()),qy.exports}var t=Nq(),Hy={exports:{}},Zt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i4;function jq(){if(i4)return Zt;i4=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),x=Symbol.iterator;function p(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function j(H,M,X){this.props=H,this.context=M,this.refs=y,this.updater=X||v}j.prototype.isReactComponent={},j.prototype.setState=function(H,M){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,M,"setState")},j.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function w(){}w.prototype=j.prototype;function S(H,M,X){this.props=H,this.context=M,this.refs=y,this.updater=X||v}var O=S.prototype=new w;O.constructor=S,b(O,j.prototype),O.isPureReactComponent=!0;var _=Array.isArray;function E(){}var A={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function L(H,M,X){var K=X.ref;return{$$typeof:e,type:H,key:M,ref:K!==void 0?K:null,props:X}}function B(H,M){return L(H.type,M,H.props)}function I(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function T(H){var M={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(X){return M[X]})}var z=/\/+/g;function k(H,M){return typeof H=="object"&&H!==null&&H.key!=null?T(""+H.key):M.toString(36)}function F(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(E,E):(H.status="pending",H.then(function(M){H.status==="pending"&&(H.status="fulfilled",H.value=M)},function(M){H.status==="pending"&&(H.status="rejected",H.reason=M)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function P(H,M,X,K,Q){var se=typeof H;(se==="undefined"||se==="boolean")&&(H=null);var V=!1;if(H===null)V=!0;else switch(se){case"bigint":case"string":case"number":V=!0;break;case"object":switch(H.$$typeof){case e:case s:V=!0;break;case h:return V=H._init,P(V(H._payload),M,X,K,Q)}}if(V)return Q=Q(H),V=K===""?"."+k(H,0):K,_(Q)?(X="",V!=null&&(X=V.replace(z,"$&/")+"/"),P(Q,M,X,"",function(ue){return ue})):Q!=null&&(I(Q)&&(Q=B(Q,X+(Q.key==null||H&&H.key===Q.key?"":(""+Q.key).replace(z,"$&/")+"/")+V)),M.push(Q)),1;V=0;var te=K===""?".":K+":";if(_(H))for(var Z=0;Z<H.length;Z++)K=H[Z],se=te+k(K,Z),V+=P(K,M,X,se,Q);else if(Z=p(H),typeof Z=="function")for(H=Z.call(H),Z=0;!(K=H.next()).done;)K=K.value,se=te+k(K,Z++),V+=P(K,M,X,se,Q);else if(se==="object"){if(typeof H.then=="function")return P(F(H),M,X,K,Q);throw M=String(H),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return V}function G(H,M,X){if(H==null)return H;var K=[],Q=0;return P(H,K,"","",function(se){return M.call(X,se,Q++)}),K}function Y(H){if(H._status===-1){var M=H._result;M=M(),M.then(function(X){(H._status===0||H._status===-1)&&(H._status=1,H._result=X)},function(X){(H._status===0||H._status===-1)&&(H._status=2,H._result=X)}),H._status===-1&&(H._status=0,H._result=M)}if(H._status===1)return H._result.default;throw H._result}var W=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ee={map:G,forEach:function(H,M,X){G(H,function(){M.apply(this,arguments)},X)},count:function(H){var M=0;return G(H,function(){M++}),M},toArray:function(H){return G(H,function(M){return M})||[]},only:function(H){if(!I(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Zt.Activity=f,Zt.Children=ee,Zt.Component=j,Zt.Fragment=a,Zt.Profiler=n,Zt.PureComponent=S,Zt.StrictMode=r,Zt.Suspense=d,Zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Zt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return A.H.useMemoCache(H)}},Zt.cache=function(H){return function(){return H.apply(null,arguments)}},Zt.cacheSignal=function(){return null},Zt.cloneElement=function(H,M,X){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var K=b({},H.props),Q=H.key;if(M!=null)for(se in M.key!==void 0&&(Q=""+M.key),M)!D.call(M,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&M.ref===void 0||(K[se]=M[se]);var se=arguments.length-2;if(se===1)K.children=X;else if(1<se){for(var V=Array(se),te=0;te<se;te++)V[te]=arguments[te+2];K.children=V}return L(H.type,Q,K)},Zt.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:i,_context:H},H},Zt.createElement=function(H,M,X){var K,Q={},se=null;if(M!=null)for(K in M.key!==void 0&&(se=""+M.key),M)D.call(M,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Q[K]=M[K]);var V=arguments.length-2;if(V===1)Q.children=X;else if(1<V){for(var te=Array(V),Z=0;Z<V;Z++)te[Z]=arguments[Z+2];Q.children=te}if(H&&H.defaultProps)for(K in V=H.defaultProps,V)Q[K]===void 0&&(Q[K]=V[K]);return L(H,se,Q)},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(H){return{$$typeof:o,render:H}},Zt.isValidElement=I,Zt.lazy=function(H){return{$$typeof:h,_payload:{_status:-1,_result:H},_init:Y}},Zt.memo=function(H,M){return{$$typeof:u,type:H,compare:M===void 0?null:M}},Zt.startTransition=function(H){var M=A.T,X={};A.T=X;try{var K=H(),Q=A.S;Q!==null&&Q(X,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(E,W)}catch(se){W(se)}finally{M!==null&&X.types!==null&&(M.types=X.types),A.T=M}},Zt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Zt.use=function(H){return A.H.use(H)},Zt.useActionState=function(H,M,X){return A.H.useActionState(H,M,X)},Zt.useCallback=function(H,M){return A.H.useCallback(H,M)},Zt.useContext=function(H){return A.H.useContext(H)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(H,M){return A.H.useDeferredValue(H,M)},Zt.useEffect=function(H,M){return A.H.useEffect(H,M)},Zt.useEffectEvent=function(H){return A.H.useEffectEvent(H)},Zt.useId=function(){return A.H.useId()},Zt.useImperativeHandle=function(H,M,X){return A.H.useImperativeHandle(H,M,X)},Zt.useInsertionEffect=function(H,M){return A.H.useInsertionEffect(H,M)},Zt.useLayoutEffect=function(H,M){return A.H.useLayoutEffect(H,M)},Zt.useMemo=function(H,M){return A.H.useMemo(H,M)},Zt.useOptimistic=function(H,M){return A.H.useOptimistic(H,M)},Zt.useReducer=function(H,M,X){return A.H.useReducer(H,M,X)},Zt.useRef=function(H){return A.H.useRef(H)},Zt.useState=function(H){return A.H.useState(H)},Zt.useSyncExternalStore=function(H,M,X){return A.H.useSyncExternalStore(H,M,X)},Zt.useTransition=function(){return A.H.useTransition()},Zt.version="19.2.0",Zt}var l4;function Vg(){return l4||(l4=1,Hy.exports=jq()),Hy.exports}var C=Vg();const ke=ra(C),wq=vq({__proto__:null,default:ke},[C]);var Vy={exports:{}},xm={},Gy={exports:{}},Wy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4;function Sq(){return o4||(o4=1,(function(e){function s(P,G){var Y=P.length;P.push(G);e:for(;0<Y;){var W=Y-1>>>1,ee=P[W];if(0<n(ee,G))P[W]=G,P[Y]=ee,Y=W;else break e}}function a(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var G=P[0],Y=P.pop();if(Y!==G){P[0]=Y;e:for(var W=0,ee=P.length,H=ee>>>1;W<H;){var M=2*(W+1)-1,X=P[M],K=M+1,Q=P[K];if(0>n(X,Y))K<ee&&0>n(Q,X)?(P[W]=Q,P[K]=Y,W=K):(P[W]=X,P[M]=Y,W=M);else if(K<ee&&0>n(Q,Y))P[W]=Q,P[K]=Y,W=K;else break e}}return G}function n(P,G){var Y=P.sortIndex-G.sortIndex;return Y!==0?Y:P.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],u=[],h=1,f=null,x=3,p=!1,v=!1,b=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function O(P){for(var G=a(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=P)r(u),G.sortIndex=G.expirationTime,s(d,G);else break;G=a(u)}}function _(P){if(b=!1,O(P),!v)if(a(d)!==null)v=!0,E||(E=!0,T());else{var G=a(u);G!==null&&F(_,G.startTime-P)}}var E=!1,A=-1,D=5,L=-1;function B(){return y?!0:!(e.unstable_now()-L<D)}function I(){if(y=!1,E){var P=e.unstable_now();L=P;var G=!0;try{e:{v=!1,b&&(b=!1,w(A),A=-1),p=!0;var Y=x;try{t:{for(O(P),f=a(d);f!==null&&!(f.expirationTime>P&&B());){var W=f.callback;if(typeof W=="function"){f.callback=null,x=f.priorityLevel;var ee=W(f.expirationTime<=P);if(P=e.unstable_now(),typeof ee=="function"){f.callback=ee,O(P),G=!0;break t}f===a(d)&&r(d),O(P)}else r(d);f=a(d)}if(f!==null)G=!0;else{var H=a(u);H!==null&&F(_,H.startTime-P),G=!1}}break e}finally{f=null,x=Y,p=!1}G=void 0}}finally{G?T():E=!1}}}var T;if(typeof S=="function")T=function(){S(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,k=z.port2;z.port1.onmessage=I,T=function(){k.postMessage(null)}}else T=function(){j(I,0)};function F(P,G){A=j(function(){P(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(P){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var Y=x;x=G;try{return P()}finally{x=Y}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Y=x;x=P;try{return G()}finally{x=Y}},e.unstable_scheduleCallback=function(P,G,Y){var W=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,P){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Y+ee,P={id:h++,callback:G,priorityLevel:P,startTime:Y,expirationTime:ee,sortIndex:-1},Y>W?(P.sortIndex=Y,s(u,P),a(d)===null&&P===a(u)&&(b?(w(A),A=-1):b=!0,F(_,Y-W))):(P.sortIndex=ee,s(d,P),v||p||(v=!0,E||(E=!0,T()))),P},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(P){var G=x;return function(){var Y=x;x=G;try{return P.apply(this,arguments)}finally{x=Y}}}})(Wy)),Wy}var c4;function Aq(){return c4||(c4=1,Gy.exports=Sq()),Gy.exports}var Qy={exports:{}},Fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d4;function Eq(){if(d4)return Fr;d4=1;var e=Vg();function s(d){var u="https://react.dev/errors/"+d;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+d+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(d,u,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:d,containerInfo:u,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(d,u){if(d==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fr.createPortal=function(d,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(s(299));return i(d,u,null,h)},Fr.flushSync=function(d){var u=l.T,h=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=u,r.p=h,r.d.f()}},Fr.preconnect=function(d,u){typeof d=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(d,u))},Fr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Fr.preinit=function(d,u){if(typeof d=="string"&&u&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin),x=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?r.d.S(d,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:x,fetchPriority:p}):h==="script"&&r.d.X(d,{crossOrigin:f,integrity:x,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Fr.preinitModule=function(d,u){if(typeof d=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);r.d.M(d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(d)},Fr.preload=function(d,u){if(typeof d=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin);r.d.L(d,h,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Fr.preloadModule=function(d,u){if(typeof d=="string")if(u){var h=o(u.as,u.crossOrigin);r.d.m(d,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(d)},Fr.requestFormReset=function(d){r.d.r(d)},Fr.unstable_batchedUpdates=function(d,u){return d(u)},Fr.useFormState=function(d,u,h){return l.H.useFormState(d,u,h)},Fr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Fr.version="19.2.0",Fr}var u4;function qM(){if(u4)return Qy.exports;u4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Qy.exports=Eq(),Qy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4;function Cq(){if(m4)return xm;m4=1;var e=Aq(),s=Vg(),a=qM();function r(c){var m="https://react.dev/errors/"+c;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var m=c,g=c;if(c.alternate)for(;m.return;)m=m.return;else{c=m;do m=c,(m.flags&4098)!==0&&(g=m.return),c=m.return;while(c)}return m.tag===3?g:null}function l(c){if(c.tag===13){var m=c.memoizedState;if(m===null&&(c=c.alternate,c!==null&&(m=c.memoizedState)),m!==null)return m.dehydrated}return null}function o(c){if(c.tag===31){var m=c.memoizedState;if(m===null&&(c=c.alternate,c!==null&&(m=c.memoizedState)),m!==null)return m.dehydrated}return null}function d(c){if(i(c)!==c)throw Error(r(188))}function u(c){var m=c.alternate;if(!m){if(m=i(c),m===null)throw Error(r(188));return m!==c?null:c}for(var g=c,N=m;;){var R=g.return;if(R===null)break;var U=R.alternate;if(U===null){if(N=R.return,N!==null){g=N;continue}break}if(R.child===U.child){for(U=R.child;U;){if(U===g)return d(R),c;if(U===N)return d(R),m;U=U.sibling}throw Error(r(188))}if(g.return!==N.return)g=R,N=U;else{for(var ae=!1,me=R.child;me;){if(me===g){ae=!0,g=R,N=U;break}if(me===N){ae=!0,N=R,g=U;break}me=me.sibling}if(!ae){for(me=U.child;me;){if(me===g){ae=!0,g=U,N=R;break}if(me===N){ae=!0,N=U,g=R;break}me=me.sibling}if(!ae)throw Error(r(189))}}if(g.alternate!==N)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:m}function h(c){var m=c.tag;if(m===5||m===26||m===27||m===6)return c;for(c=c.child;c!==null;){if(m=h(c),m!==null)return m;c=c.sibling}return null}var f=Object.assign,x=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function T(c){return c===null||typeof c!="object"?null:(c=I&&c[I]||c["@@iterator"],typeof c=="function"?c:null)}var z=Symbol.for("react.client.reference");function k(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===z?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case b:return"Fragment";case j:return"Profiler";case y:return"StrictMode";case _:return"Suspense";case E:return"SuspenseList";case L:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case S:return c.displayName||"Context";case w:return(c._context.displayName||"Context")+".Consumer";case O:var m=c.render;return c=c.displayName,c||(c=m.displayName||m.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case A:return m=c.displayName||null,m!==null?m:k(c.type)||"Memo";case D:m=c._payload,c=c._init;try{return k(c(m))}catch{}}return null}var F=Array.isArray,P=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},W=[],ee=-1;function H(c){return{current:c}}function M(c){0>ee||(c.current=W[ee],W[ee]=null,ee--)}function X(c,m){ee++,W[ee]=c.current,c.current=m}var K=H(null),Q=H(null),se=H(null),V=H(null);function te(c,m){switch(X(se,m),X(Q,c),X(K,null),m.nodeType){case 9:case 11:c=(c=m.documentElement)&&(c=c.namespaceURI)?Ck(c):0;break;default:if(c=m.tagName,m=m.namespaceURI)m=Ck(m),c=Tk(m,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}M(K),X(K,c)}function Z(){M(K),M(Q),M(se)}function ue(c){c.memoizedState!==null&&X(V,c);var m=K.current,g=Tk(m,c.type);m!==g&&(X(Q,c),X(K,g))}function re(c){Q.current===c&&(M(K),M(Q)),V.current===c&&(M(V),dm._currentValue=Y)}var J,Ne;function q(c){if(J===void 0)try{throw Error()}catch(g){var m=g.stack.trim().match(/\n( *(at )?)/);J=m&&m[1]||"",Ne=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+c+Ne}var ce=!1;function fe(c,m){if(!c||ce)return"";ce=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(m){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(We){var He=We}Reflect.construct(c,[],st)}else{try{st.call()}catch(We){He=We}c.call(st.prototype)}}else{try{throw Error()}catch(We){He=We}(st=c())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(We){if(We&&He&&typeof We.stack=="string")return[We.stack,He.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=N.DetermineComponentFrameRoot(),ae=U[0],me=U[1];if(ae&&me){var Te=ae.split(`
`),Be=me.split(`
`);for(R=N=0;N<Te.length&&!Te[N].includes("DetermineComponentFrameRoot");)N++;for(;R<Be.length&&!Be[R].includes("DetermineComponentFrameRoot");)R++;if(N===Te.length||R===Be.length)for(N=Te.length-1,R=Be.length-1;1<=N&&0<=R&&Te[N]!==Be[R];)R--;for(;1<=N&&0<=R;N--,R--)if(Te[N]!==Be[R]){if(N!==1||R!==1)do if(N--,R--,0>R||Te[N]!==Be[R]){var Xe=`
`+Te[N].replace(" at new "," at ");return c.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",c.displayName)),Xe}while(1<=N&&0<=R);break}}}finally{ce=!1,Error.prepareStackTrace=g}return(g=c?c.displayName||c.name:"")?q(g):""}function ie(c,m){switch(c.tag){case 26:case 27:case 5:return q(c.type);case 16:return q("Lazy");case 13:return c.child!==m&&m!==null?q("Suspense Fallback"):q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return fe(c.type,!1);case 11:return fe(c.type.render,!1);case 1:return fe(c.type,!0);case 31:return q("Activity");default:return""}}function ne(c){try{var m="",g=null;do m+=ie(c,g),g=c,c=c.return;while(c);return m}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}var pe=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,Ie=e.unstable_cancelCallback,_e=e.unstable_shouldYield,Ge=e.unstable_requestPaint,Ae=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,Qe=e.unstable_ImmediatePriority,_t=e.unstable_UserBlockingPriority,lt=e.unstable_NormalPriority,Nt=e.unstable_LowPriority,jt=e.unstable_IdlePriority,Ft=e.log,Ce=e.unstable_setDisableYieldValue,ve=null,Ve=null;function ot(c){if(typeof Ft=="function"&&Ce(c),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(ve,c)}catch{}}var le=Math.clz32?Math.clz32:pt,Ke=Math.log,nt=Math.LN2;function pt(c){return c>>>=0,c===0?32:31-(Ke(c)/nt|0)|0}var Ut=256,Ts=262144,Rt=4194304;function Re(c){var m=c&42;if(m!==0)return m;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ft(c,m,g){var N=c.pendingLanes;if(N===0)return 0;var R=0,U=c.suspendedLanes,ae=c.pingedLanes;c=c.warmLanes;var me=N&134217727;return me!==0?(N=me&~U,N!==0?R=Re(N):(ae&=me,ae!==0?R=Re(ae):g||(g=me&~c,g!==0&&(R=Re(g))))):(me=N&~U,me!==0?R=Re(me):ae!==0?R=Re(ae):g||(g=N&~c,g!==0&&(R=Re(g)))),R===0?0:m!==0&&m!==R&&(m&U)===0&&(U=R&-R,g=m&-m,U>=g||U===32&&(g&4194048)!==0)?m:R}function Xt(c,m){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&m)===0}function As(c,m){switch(c){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function we(){var c=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),c}function Pt(c){for(var m=[],g=0;31>g;g++)m.push(c);return m}function ss(c,m){c.pendingLanes|=m,m!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function gs(c,m,g,N,R,U){var ae=c.pendingLanes;c.pendingLanes=g,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=g,c.entangledLanes&=g,c.errorRecoveryDisabledLanes&=g,c.shellSuspendCounter=0;var me=c.entanglements,Te=c.expirationTimes,Be=c.hiddenUpdates;for(g=ae&~g;0<g;){var Xe=31-le(g),st=1<<Xe;me[Xe]=0,Te[Xe]=-1;var He=Be[Xe];if(He!==null)for(Be[Xe]=null,Xe=0;Xe<He.length;Xe++){var We=He[Xe];We!==null&&(We.lane&=-536870913)}g&=~st}N!==0&&Ps(c,N,0),U!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=U&~(ae&~m))}function Ps(c,m,g){c.pendingLanes|=m,c.suspendedLanes&=~m;var N=31-le(m);c.entangledLanes|=m,c.entanglements[N]=c.entanglements[N]|1073741824|g&261930}function Ca(c,m){var g=c.entangledLanes|=m;for(c=c.entanglements;g;){var N=31-le(g),R=1<<N;R&m|c[N]&m&&(c[N]|=m),g&=~R}}function ar(c,m){var g=m&-m;return g=(g&42)!==0?1:rr(g),(g&(c.suspendedLanes|m))!==0?0:g}function rr(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function et(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function de(){var c=G.p;return c!==0?c:(c=window.event,c===void 0?32:Yk(c.type))}function ye(c,m){var g=G.p;try{return G.p=c,m()}finally{G.p=g}}var xe=Math.random().toString(36).slice(2),ge="__reactFiber$"+xe,je="__reactProps$"+xe,Se="__reactContainer$"+xe,Le="__reactEvents$"+xe,Je="__reactListeners$"+xe,Fe="__reactHandles$"+xe,$e="__reactResources$"+xe,qe="__reactMarker$"+xe;function rt(c){delete c[ge],delete c[je],delete c[Le],delete c[Je],delete c[Fe]}function ct(c){var m=c[ge];if(m)return m;for(var g=c.parentNode;g;){if(m=g[Se]||g[ge]){if(g=m.alternate,m.child!==null||g!==null&&g.child!==null)for(c=Dk(c);c!==null;){if(g=c[ge])return g;c=Dk(c)}return m}c=g,g=c.parentNode}return null}function gt(c){if(c=c[ge]||c[Se]){var m=c.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return c}return null}function it(c){var m=c.tag;if(m===5||m===26||m===27||m===6)return c.stateNode;throw Error(r(33))}function ht(c){var m=c[$e];return m||(m=c[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function wt(c){c[qe]=!0}var na=new Set,Vs={};function Ds(c,m){wr(c,m),wr(c+"Capture",m)}function wr(c,m){for(Vs[c]=m,c=0;c<m.length;c++)na.add(m[c])}var Ui=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),be={},Me={};function Tt(c){return pe.call(Me,c)?!0:pe.call(be,c)?!1:Ui.test(c)?Me[c]=!0:(be[c]=!0,!1)}function Et(c,m,g){if(Tt(m))if(g===null)c.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":c.removeAttribute(m);return;case"boolean":var N=m.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){c.removeAttribute(m);return}}c.setAttribute(m,""+g)}}function Ms(c,m,g){if(g===null)c.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttribute(m,""+g)}}function Ua(c,m,g,N){if(N===null)c.removeAttribute(g);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(g);return}c.setAttributeNS(m,g,""+N)}}function Zr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function E0(c){var m=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Db(c,m,g){var N=Object.getOwnPropertyDescriptor(c.constructor.prototype,m);if(!c.hasOwnProperty(m)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var R=N.get,U=N.set;return Object.defineProperty(c,m,{configurable:!0,get:function(){return R.call(this)},set:function(ae){g=""+ae,U.call(this,ae)}}),Object.defineProperty(c,m,{enumerable:N.enumerable}),{getValue:function(){return g},setValue:function(ae){g=""+ae},stopTracking:function(){c._valueTracker=null,delete c[m]}}}}function Mb(c){if(!c._valueTracker){var m=E0(c)?"checked":"value";c._valueTracker=Db(c,m,""+c[m])}}function yC(c){if(!c)return!1;var m=c._valueTracker;if(!m)return!0;var g=m.getValue(),N="";return c&&(N=E0(c)?c.checked?"true":"false":c.value),c=N,c!==g?(m.setValue(c),!0):!1}function Eh(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var fB=/[\n"\\]/g;function $n(c){return c.replace(fB,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Lb(c,m,g,N,R,U,ae,me){c.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?c.type=ae:c.removeAttribute("type"),m!=null?ae==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+Zr(m)):c.value!==""+Zr(m)&&(c.value=""+Zr(m)):ae!=="submit"&&ae!=="reset"||c.removeAttribute("value"),m!=null?Fb(c,ae,Zr(m)):g!=null?Fb(c,ae,Zr(g)):N!=null&&c.removeAttribute("value"),R==null&&U!=null&&(c.defaultChecked=!!U),R!=null&&(c.checked=R&&typeof R!="function"&&typeof R!="symbol"),me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?c.name=""+Zr(me):c.removeAttribute("name")}function NC(c,m,g,N,R,U,ae,me){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(c.type=U),m!=null||g!=null){if(!(U!=="submit"&&U!=="reset"||m!=null)){Mb(c);return}g=g!=null?""+Zr(g):"",m=m!=null?""+Zr(m):g,me||m===c.value||(c.value=m),c.defaultValue=m}N=N??R,N=typeof N!="function"&&typeof N!="symbol"&&!!N,c.checked=me?c.checked:!!N,c.defaultChecked=!!N,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(c.name=ae),Mb(c)}function Fb(c,m,g){m==="number"&&Eh(c.ownerDocument)===c||c.defaultValue===""+g||(c.defaultValue=""+g)}function Sd(c,m,g,N){if(c=c.options,m){m={};for(var R=0;R<g.length;R++)m["$"+g[R]]=!0;for(g=0;g<c.length;g++)R=m.hasOwnProperty("$"+c[g].value),c[g].selected!==R&&(c[g].selected=R),R&&N&&(c[g].defaultSelected=!0)}else{for(g=""+Zr(g),m=null,R=0;R<c.length;R++){if(c[R].value===g){c[R].selected=!0,N&&(c[R].defaultSelected=!0);return}m!==null||c[R].disabled||(m=c[R])}m!==null&&(m.selected=!0)}}function jC(c,m,g){if(m!=null&&(m=""+Zr(m),m!==c.value&&(c.value=m),g==null)){c.defaultValue!==m&&(c.defaultValue=m);return}c.defaultValue=g!=null?""+Zr(g):""}function wC(c,m,g,N){if(m==null){if(N!=null){if(g!=null)throw Error(r(92));if(F(N)){if(1<N.length)throw Error(r(93));N=N[0]}g=N}g==null&&(g=""),m=g}g=Zr(m),c.defaultValue=g,N=c.textContent,N===g&&N!==""&&N!==null&&(c.value=N),Mb(c)}function Ad(c,m){if(m){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=m;return}}c.textContent=m}var hB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function SC(c,m,g){var N=m.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?N?c.setProperty(m,""):m==="float"?c.cssFloat="":c[m]="":N?c.setProperty(m,g):typeof g!="number"||g===0||hB.has(m)?m==="float"?c.cssFloat=g:c[m]=(""+g).trim():c[m]=g+"px"}function AC(c,m,g){if(m!=null&&typeof m!="object")throw Error(r(62));if(c=c.style,g!=null){for(var N in g)!g.hasOwnProperty(N)||m!=null&&m.hasOwnProperty(N)||(N.indexOf("--")===0?c.setProperty(N,""):N==="float"?c.cssFloat="":c[N]="");for(var R in m)N=m[R],m.hasOwnProperty(R)&&g[R]!==N&&SC(c,R,N)}else for(var U in m)m.hasOwnProperty(U)&&SC(c,U,m[U])}function Ub(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ch(c){return pB.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function cl(){}var zb=null;function Bb(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ed=null,Cd=null;function EC(c){var m=gt(c);if(m&&(c=m.stateNode)){var g=c[je]||null;e:switch(c=m.stateNode,m.type){case"input":if(Lb(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),m=g.name,g.type==="radio"&&m!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+$n(""+m)+'"][type="radio"]'),m=0;m<g.length;m++){var N=g[m];if(N!==c&&N.form===c.form){var R=N[je]||null;if(!R)throw Error(r(90));Lb(N,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(m=0;m<g.length;m++)N=g[m],N.form===c.form&&yC(N)}break e;case"textarea":jC(c,g.value,g.defaultValue);break e;case"select":m=g.value,m!=null&&Sd(c,!!g.multiple,m,!1)}}}var $b=!1;function CC(c,m,g){if($b)return c(m,g);$b=!0;try{var N=c(m);return N}finally{if($b=!1,(Ed!==null||Cd!==null)&&(hx(),Ed&&(m=Ed,c=Cd,Cd=Ed=null,EC(m),c)))for(m=0;m<c.length;m++)EC(c[m])}}function C0(c,m){var g=c.stateNode;if(g===null)return null;var N=g[je]||null;if(N===null)return null;g=N[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(c=c.type,N=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!N;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,m,typeof g));return g}var dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qb=!1;if(dl)try{var T0={};Object.defineProperty(T0,"passive",{get:function(){qb=!0}}),window.addEventListener("test",T0,T0),window.removeEventListener("test",T0,T0)}catch{qb=!1}var eo=null,Hb=null,Th=null;function TC(){if(Th)return Th;var c,m=Hb,g=m.length,N,R="value"in eo?eo.value:eo.textContent,U=R.length;for(c=0;c<g&&m[c]===R[c];c++);var ae=g-c;for(N=1;N<=ae&&m[g-N]===R[U-N];N++);return Th=R.slice(c,1<N?1-N:void 0)}function _h(c){var m=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&m===13&&(c=13)):c=m,c===10&&(c=13),32<=c||c===13?c:0}function kh(){return!0}function _C(){return!1}function ln(c){function m(g,N,R,U,ae){this._reactName=g,this._targetInst=R,this.type=N,this.nativeEvent=U,this.target=ae,this.currentTarget=null;for(var me in c)c.hasOwnProperty(me)&&(g=c[me],this[me]=g?g(U):U[me]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?kh:_C,this.isPropagationStopped=_C,this}return f(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=kh)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=kh)},persist:function(){},isPersistent:kh}),m}var dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oh=ln(dc),_0=f({},dc,{view:0,detail:0}),gB=ln(_0),Vb,Gb,k0,Ih=f({},_0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qb,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==k0&&(k0&&c.type==="mousemove"?(Vb=c.screenX-k0.screenX,Gb=c.screenY-k0.screenY):Gb=Vb=0,k0=c),Vb)},movementY:function(c){return"movementY"in c?c.movementY:Gb}}),kC=ln(Ih),bB=f({},Ih,{dataTransfer:0}),vB=ln(bB),yB=f({},_0,{relatedTarget:0}),Wb=ln(yB),NB=f({},dc,{animationName:0,elapsedTime:0,pseudoElement:0}),jB=ln(NB),wB=f({},dc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),SB=ln(wB),AB=f({},dc,{data:0}),OC=ln(AB),EB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _B(c){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(c):(c=TB[c])?!!m[c]:!1}function Qb(){return _B}var kB=f({},_0,{key:function(c){if(c.key){var m=EB[c.key]||c.key;if(m!=="Unidentified")return m}return c.type==="keypress"?(c=_h(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?CB[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qb,charCode:function(c){return c.type==="keypress"?_h(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?_h(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),OB=ln(kB),IB=f({},Ih,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IC=ln(IB),RB=f({},_0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qb}),PB=ln(RB),DB=f({},dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),MB=ln(DB),LB=f({},Ih,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),FB=ln(LB),UB=f({},dc,{newState:0,oldState:0}),zB=ln(UB),BB=[9,13,27,32],Kb=dl&&"CompositionEvent"in window,O0=null;dl&&"documentMode"in document&&(O0=document.documentMode);var $B=dl&&"TextEvent"in window&&!O0,RC=dl&&(!Kb||O0&&8<O0&&11>=O0),PC=" ",DC=!1;function MC(c,m){switch(c){case"keyup":return BB.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Td=!1;function qB(c,m){switch(c){case"compositionend":return LC(m);case"keypress":return m.which!==32?null:(DC=!0,PC);case"textInput":return c=m.data,c===PC&&DC?null:c;default:return null}}function HB(c,m){if(Td)return c==="compositionend"||!Kb&&MC(c,m)?(c=TC(),Th=Hb=eo=null,Td=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return RC&&m.locale!=="ko"?null:m.data;default:return null}}var VB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FC(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m==="input"?!!VB[c.type]:m==="textarea"}function UC(c,m,g,N){Ed?Cd?Cd.push(N):Cd=[N]:Ed=N,m=Nx(m,"onChange"),0<m.length&&(g=new Oh("onChange","change",null,g,N),c.push({event:g,listeners:m}))}var I0=null,R0=null;function GB(c){Nk(c,0)}function Rh(c){var m=it(c);if(yC(m))return c}function zC(c,m){if(c==="change")return m}var BC=!1;if(dl){var Jb;if(dl){var Yb="oninput"in document;if(!Yb){var $C=document.createElement("div");$C.setAttribute("oninput","return;"),Yb=typeof $C.oninput=="function"}Jb=Yb}else Jb=!1;BC=Jb&&(!document.documentMode||9<document.documentMode)}function qC(){I0&&(I0.detachEvent("onpropertychange",HC),R0=I0=null)}function HC(c){if(c.propertyName==="value"&&Rh(R0)){var m=[];UC(m,R0,c,Bb(c)),CC(GB,m)}}function WB(c,m,g){c==="focusin"?(qC(),I0=m,R0=g,I0.attachEvent("onpropertychange",HC)):c==="focusout"&&qC()}function QB(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Rh(R0)}function KB(c,m){if(c==="click")return Rh(m)}function JB(c,m){if(c==="input"||c==="change")return Rh(m)}function YB(c,m){return c===m&&(c!==0||1/c===1/m)||c!==c&&m!==m}var jn=typeof Object.is=="function"?Object.is:YB;function P0(c,m){if(jn(c,m))return!0;if(typeof c!="object"||c===null||typeof m!="object"||m===null)return!1;var g=Object.keys(c),N=Object.keys(m);if(g.length!==N.length)return!1;for(N=0;N<g.length;N++){var R=g[N];if(!pe.call(m,R)||!jn(c[R],m[R]))return!1}return!0}function VC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function GC(c,m){var g=VC(c);c=0;for(var N;g;){if(g.nodeType===3){if(N=c+g.textContent.length,c<=m&&N>=m)return{node:g,offset:m-c};c=N}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=VC(g)}}function WC(c,m){return c&&m?c===m?!0:c&&c.nodeType===3?!1:m&&m.nodeType===3?WC(c,m.parentNode):"contains"in c?c.contains(m):c.compareDocumentPosition?!!(c.compareDocumentPosition(m)&16):!1:!1}function QC(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var m=Eh(c.document);m instanceof c.HTMLIFrameElement;){try{var g=typeof m.contentWindow.location.href=="string"}catch{g=!1}if(g)c=m.contentWindow;else break;m=Eh(c.document)}return m}function Xb(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m&&(m==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||m==="textarea"||c.contentEditable==="true")}var XB=dl&&"documentMode"in document&&11>=document.documentMode,_d=null,Zb=null,D0=null,ev=!1;function KC(c,m,g){var N=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;ev||_d==null||_d!==Eh(N)||(N=_d,"selectionStart"in N&&Xb(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),D0&&P0(D0,N)||(D0=N,N=Nx(Zb,"onSelect"),0<N.length&&(m=new Oh("onSelect","select",null,m,g),c.push({event:m,listeners:N}),m.target=_d)))}function uc(c,m){var g={};return g[c.toLowerCase()]=m.toLowerCase(),g["Webkit"+c]="webkit"+m,g["Moz"+c]="moz"+m,g}var kd={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionrun:uc("Transition","TransitionRun"),transitionstart:uc("Transition","TransitionStart"),transitioncancel:uc("Transition","TransitionCancel"),transitionend:uc("Transition","TransitionEnd")},tv={},JC={};dl&&(JC=document.createElement("div").style,"AnimationEvent"in window||(delete kd.animationend.animation,delete kd.animationiteration.animation,delete kd.animationstart.animation),"TransitionEvent"in window||delete kd.transitionend.transition);function mc(c){if(tv[c])return tv[c];if(!kd[c])return c;var m=kd[c],g;for(g in m)if(m.hasOwnProperty(g)&&g in JC)return tv[c]=m[g];return c}var YC=mc("animationend"),XC=mc("animationiteration"),ZC=mc("animationstart"),ZB=mc("transitionrun"),e$=mc("transitionstart"),t$=mc("transitioncancel"),eT=mc("transitionend"),tT=new Map,sv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sv.push("scrollEnd");function Ni(c,m){tT.set(c,m),Ds(m,[c])}var Ph=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},qn=[],Od=0,av=0;function Dh(){for(var c=Od,m=av=Od=0;m<c;){var g=qn[m];qn[m++]=null;var N=qn[m];qn[m++]=null;var R=qn[m];qn[m++]=null;var U=qn[m];if(qn[m++]=null,N!==null&&R!==null){var ae=N.pending;ae===null?R.next=R:(R.next=ae.next,ae.next=R),N.pending=R}U!==0&&sT(g,R,U)}}function Mh(c,m,g,N){qn[Od++]=c,qn[Od++]=m,qn[Od++]=g,qn[Od++]=N,av|=N,c.lanes|=N,c=c.alternate,c!==null&&(c.lanes|=N)}function rv(c,m,g,N){return Mh(c,m,g,N),Lh(c)}function fc(c,m){return Mh(c,null,null,m),Lh(c)}function sT(c,m,g){c.lanes|=g;var N=c.alternate;N!==null&&(N.lanes|=g);for(var R=!1,U=c.return;U!==null;)U.childLanes|=g,N=U.alternate,N!==null&&(N.childLanes|=g),U.tag===22&&(c=U.stateNode,c===null||c._visibility&1||(R=!0)),c=U,U=U.return;return c.tag===3?(U=c.stateNode,R&&m!==null&&(R=31-le(g),c=U.hiddenUpdates,N=c[R],N===null?c[R]=[m]:N.push(m),m.lane=g|536870912),U):null}function Lh(c){if(50<am)throw am=0,fy=null,Error(r(185));for(var m=c.return;m!==null;)c=m,m=c.return;return c.tag===3?c.stateNode:null}var Id={};function s$(c,m,g,N){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(c,m,g,N){return new s$(c,m,g,N)}function nv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ul(c,m){var g=c.alternate;return g===null?(g=wn(c.tag,m,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=m,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&65011712,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,m=c.dependencies,g.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g.refCleanup=c.refCleanup,g}function aT(c,m){c.flags&=65011714;var g=c.alternate;return g===null?(c.childLanes=0,c.lanes=m,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,m=g.dependencies,c.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),c}function Fh(c,m,g,N,R,U){var ae=0;if(N=c,typeof c=="function")nv(c)&&(ae=1);else if(typeof c=="string")ae=lq(c,g,K.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case L:return c=wn(31,g,m,R),c.elementType=L,c.lanes=U,c;case b:return hc(g.children,R,U,m);case y:ae=8,R|=24;break;case j:return c=wn(12,g,m,R|2),c.elementType=j,c.lanes=U,c;case _:return c=wn(13,g,m,R),c.elementType=_,c.lanes=U,c;case E:return c=wn(19,g,m,R),c.elementType=E,c.lanes=U,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case S:ae=10;break e;case w:ae=9;break e;case O:ae=11;break e;case A:ae=14;break e;case D:ae=16,N=null;break e}ae=29,g=Error(r(130,c===null?"null":typeof c,"")),N=null}return m=wn(ae,g,m,R),m.elementType=c,m.type=N,m.lanes=U,m}function hc(c,m,g,N){return c=wn(7,c,N,m),c.lanes=g,c}function iv(c,m,g){return c=wn(6,c,null,m),c.lanes=g,c}function rT(c){var m=wn(18,null,null,0);return m.stateNode=c,m}function lv(c,m,g){return m=wn(4,c.children!==null?c.children:[],c.key,m),m.lanes=g,m.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},m}var nT=new WeakMap;function Hn(c,m){if(typeof c=="object"&&c!==null){var g=nT.get(c);return g!==void 0?g:(m={value:c,source:m,stack:ne(m)},nT.set(c,m),m)}return{value:c,source:m,stack:ne(m)}}var Rd=[],Pd=0,Uh=null,M0=0,Vn=[],Gn=0,to=null,zi=1,Bi="";function ml(c,m){Rd[Pd++]=M0,Rd[Pd++]=Uh,Uh=c,M0=m}function iT(c,m,g){Vn[Gn++]=zi,Vn[Gn++]=Bi,Vn[Gn++]=to,to=c;var N=zi;c=Bi;var R=32-le(N)-1;N&=~(1<<R),g+=1;var U=32-le(m)+R;if(30<U){var ae=R-R%5;U=(N&(1<<ae)-1).toString(32),N>>=ae,R-=ae,zi=1<<32-le(m)+R|g<<R|N,Bi=U+c}else zi=1<<U|g<<R|N,Bi=c}function ov(c){c.return!==null&&(ml(c,1),iT(c,1,0))}function cv(c){for(;c===Uh;)Uh=Rd[--Pd],Rd[Pd]=null,M0=Rd[--Pd],Rd[Pd]=null;for(;c===to;)to=Vn[--Gn],Vn[Gn]=null,Bi=Vn[--Gn],Vn[Gn]=null,zi=Vn[--Gn],Vn[Gn]=null}function lT(c,m){Vn[Gn++]=zi,Vn[Gn++]=Bi,Vn[Gn++]=to,zi=m.id,Bi=m.overflow,to=c}var Sr=null,xa=null,Es=!1,so=null,Wn=!1,dv=Error(r(519));function ao(c){var m=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw L0(Hn(m,c)),dv}function oT(c){var m=c.stateNode,g=c.type,N=c.memoizedProps;switch(m[ge]=c,m[je]=N,g){case"dialog":vs("cancel",m),vs("close",m);break;case"iframe":case"object":case"embed":vs("load",m);break;case"video":case"audio":for(g=0;g<nm.length;g++)vs(nm[g],m);break;case"source":vs("error",m);break;case"img":case"image":case"link":vs("error",m),vs("load",m);break;case"details":vs("toggle",m);break;case"input":vs("invalid",m),NC(m,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0);break;case"select":vs("invalid",m);break;case"textarea":vs("invalid",m),wC(m,N.value,N.defaultValue,N.children)}g=N.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||m.textContent===""+g||N.suppressHydrationWarning===!0||Ak(m.textContent,g)?(N.popover!=null&&(vs("beforetoggle",m),vs("toggle",m)),N.onScroll!=null&&vs("scroll",m),N.onScrollEnd!=null&&vs("scrollend",m),N.onClick!=null&&(m.onclick=cl),m=!0):m=!1,m||ao(c,!0)}function cT(c){for(Sr=c.return;Sr;)switch(Sr.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Sr=Sr.return}}function Dd(c){if(c!==Sr)return!1;if(!Es)return cT(c),Es=!0,!1;var m=c.tag,g;if((g=m!==3&&m!==27)&&((g=m===5)&&(g=c.type,g=!(g!=="form"&&g!=="button")||Ty(c.type,c.memoizedProps)),g=!g),g&&xa&&ao(c),cT(c),m===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));xa=Pk(c)}else if(m===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));xa=Pk(c)}else m===27?(m=xa,bo(c.type)?(c=Ry,Ry=null,xa=c):xa=m):xa=Sr?Kn(c.stateNode.nextSibling):null;return!0}function xc(){xa=Sr=null,Es=!1}function uv(){var c=so;return c!==null&&(un===null?un=c:un.push.apply(un,c),so=null),c}function L0(c){so===null?so=[c]:so.push(c)}var mv=H(null),pc=null,fl=null;function ro(c,m,g){X(mv,m._currentValue),m._currentValue=g}function hl(c){c._currentValue=mv.current,M(mv)}function fv(c,m,g){for(;c!==null;){var N=c.alternate;if((c.childLanes&m)!==m?(c.childLanes|=m,N!==null&&(N.childLanes|=m)):N!==null&&(N.childLanes&m)!==m&&(N.childLanes|=m),c===g)break;c=c.return}}function hv(c,m,g,N){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var U=R.dependencies;if(U!==null){var ae=R.child;U=U.firstContext;e:for(;U!==null;){var me=U;U=R;for(var Te=0;Te<m.length;Te++)if(me.context===m[Te]){U.lanes|=g,me=U.alternate,me!==null&&(me.lanes|=g),fv(U.return,g,c),N||(ae=null);break e}U=me.next}}else if(R.tag===18){if(ae=R.return,ae===null)throw Error(r(341));ae.lanes|=g,U=ae.alternate,U!==null&&(U.lanes|=g),fv(ae,g,c),ae=null}else ae=R.child;if(ae!==null)ae.return=R;else for(ae=R;ae!==null;){if(ae===c){ae=null;break}if(R=ae.sibling,R!==null){R.return=ae.return,ae=R;break}ae=ae.return}R=ae}}function Md(c,m,g,N){c=null;for(var R=m,U=!1;R!==null;){if(!U){if((R.flags&524288)!==0)U=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var ae=R.alternate;if(ae===null)throw Error(r(387));if(ae=ae.memoizedProps,ae!==null){var me=R.type;jn(R.pendingProps.value,ae.value)||(c!==null?c.push(me):c=[me])}}else if(R===V.current){if(ae=R.alternate,ae===null)throw Error(r(387));ae.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(dm):c=[dm])}R=R.return}c!==null&&hv(m,c,g,N),m.flags|=262144}function zh(c){for(c=c.firstContext;c!==null;){if(!jn(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function gc(c){pc=c,fl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Ar(c){return dT(pc,c)}function Bh(c,m){return pc===null&&gc(c),dT(c,m)}function dT(c,m){var g=m._currentValue;if(m={context:m,memoizedValue:g,next:null},fl===null){if(c===null)throw Error(r(308));fl=m,c.dependencies={lanes:0,firstContext:m},c.flags|=524288}else fl=fl.next=m;return g}var a$=typeof AbortController<"u"?AbortController:function(){var c=[],m=this.signal={aborted:!1,addEventListener:function(g,N){c.push(N)}};this.abort=function(){m.aborted=!0,c.forEach(function(g){return g()})}},r$=e.unstable_scheduleCallback,n$=e.unstable_NormalPriority,Ga={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xv(){return{controller:new a$,data:new Map,refCount:0}}function F0(c){c.refCount--,c.refCount===0&&r$(n$,function(){c.controller.abort()})}var U0=null,pv=0,Ld=0,Fd=null;function i$(c,m){if(U0===null){var g=U0=[];pv=0,Ld=vy(),Fd={status:"pending",value:void 0,then:function(N){g.push(N)}}}return pv++,m.then(uT,uT),m}function uT(){if(--pv===0&&U0!==null){Fd!==null&&(Fd.status="fulfilled");var c=U0;U0=null,Ld=0,Fd=null;for(var m=0;m<c.length;m++)(0,c[m])()}}function l$(c,m){var g=[],N={status:"pending",value:null,reason:null,then:function(R){g.push(R)}};return c.then(function(){N.status="fulfilled",N.value=m;for(var R=0;R<g.length;R++)(0,g[R])(m)},function(R){for(N.status="rejected",N.reason=R,R=0;R<g.length;R++)(0,g[R])(void 0)}),N}var mT=P.S;P.S=function(c,m){K_=Ae(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&i$(c,m),mT!==null&&mT(c,m)};var bc=H(null);function gv(){var c=bc.current;return c!==null?c:ua.pooledCache}function $h(c,m){m===null?X(bc,bc.current):X(bc,m.pool)}function fT(){var c=gv();return c===null?null:{parent:Ga._currentValue,pool:c}}var Ud=Error(r(460)),bv=Error(r(474)),qh=Error(r(542)),Hh={then:function(){}};function hT(c){return c=c.status,c==="fulfilled"||c==="rejected"}function xT(c,m,g){switch(g=c[g],g===void 0?c.push(m):g!==m&&(m.then(cl,cl),m=g),m.status){case"fulfilled":return m.value;case"rejected":throw c=m.reason,gT(c),c;default:if(typeof m.status=="string")m.then(cl,cl);else{if(c=ua,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=m,c.status="pending",c.then(function(N){if(m.status==="pending"){var R=m;R.status="fulfilled",R.value=N}},function(N){if(m.status==="pending"){var R=m;R.status="rejected",R.reason=N}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw c=m.reason,gT(c),c}throw yc=m,Ud}}function vc(c){try{var m=c._init;return m(c._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(yc=g,Ud):g}}var yc=null;function pT(){if(yc===null)throw Error(r(459));var c=yc;return yc=null,c}function gT(c){if(c===Ud||c===qh)throw Error(r(483))}var zd=null,z0=0;function Vh(c){var m=z0;return z0+=1,zd===null&&(zd=[]),xT(zd,c,m)}function B0(c,m){m=m.props.ref,c.ref=m!==void 0?m:null}function Gh(c,m){throw m.$$typeof===x?Error(r(525)):(c=Object.prototype.toString.call(m),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":c)))}function bT(c){function m(Pe,Oe){if(c){var ze=Pe.deletions;ze===null?(Pe.deletions=[Oe],Pe.flags|=16):ze.push(Oe)}}function g(Pe,Oe){if(!c)return null;for(;Oe!==null;)m(Pe,Oe),Oe=Oe.sibling;return null}function N(Pe){for(var Oe=new Map;Pe!==null;)Pe.key!==null?Oe.set(Pe.key,Pe):Oe.set(Pe.index,Pe),Pe=Pe.sibling;return Oe}function R(Pe,Oe){return Pe=ul(Pe,Oe),Pe.index=0,Pe.sibling=null,Pe}function U(Pe,Oe,ze){return Pe.index=ze,c?(ze=Pe.alternate,ze!==null?(ze=ze.index,ze<Oe?(Pe.flags|=67108866,Oe):ze):(Pe.flags|=67108866,Oe)):(Pe.flags|=1048576,Oe)}function ae(Pe){return c&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function me(Pe,Oe,ze,tt){return Oe===null||Oe.tag!==6?(Oe=iv(ze,Pe.mode,tt),Oe.return=Pe,Oe):(Oe=R(Oe,ze),Oe.return=Pe,Oe)}function Te(Pe,Oe,ze,tt){var Dt=ze.type;return Dt===b?Xe(Pe,Oe,ze.props.children,tt,ze.key):Oe!==null&&(Oe.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===D&&vc(Dt)===Oe.type)?(Oe=R(Oe,ze.props),B0(Oe,ze),Oe.return=Pe,Oe):(Oe=Fh(ze.type,ze.key,ze.props,null,Pe.mode,tt),B0(Oe,ze),Oe.return=Pe,Oe)}function Be(Pe,Oe,ze,tt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==ze.containerInfo||Oe.stateNode.implementation!==ze.implementation?(Oe=lv(ze,Pe.mode,tt),Oe.return=Pe,Oe):(Oe=R(Oe,ze.children||[]),Oe.return=Pe,Oe)}function Xe(Pe,Oe,ze,tt,Dt){return Oe===null||Oe.tag!==7?(Oe=hc(ze,Pe.mode,tt,Dt),Oe.return=Pe,Oe):(Oe=R(Oe,ze),Oe.return=Pe,Oe)}function st(Pe,Oe,ze){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=iv(""+Oe,Pe.mode,ze),Oe.return=Pe,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case p:return ze=Fh(Oe.type,Oe.key,Oe.props,null,Pe.mode,ze),B0(ze,Oe),ze.return=Pe,ze;case v:return Oe=lv(Oe,Pe.mode,ze),Oe.return=Pe,Oe;case D:return Oe=vc(Oe),st(Pe,Oe,ze)}if(F(Oe)||T(Oe))return Oe=hc(Oe,Pe.mode,ze,null),Oe.return=Pe,Oe;if(typeof Oe.then=="function")return st(Pe,Vh(Oe),ze);if(Oe.$$typeof===S)return st(Pe,Bh(Pe,Oe),ze);Gh(Pe,Oe)}return null}function He(Pe,Oe,ze,tt){var Dt=Oe!==null?Oe.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return Dt!==null?null:me(Pe,Oe,""+ze,tt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case p:return ze.key===Dt?Te(Pe,Oe,ze,tt):null;case v:return ze.key===Dt?Be(Pe,Oe,ze,tt):null;case D:return ze=vc(ze),He(Pe,Oe,ze,tt)}if(F(ze)||T(ze))return Dt!==null?null:Xe(Pe,Oe,ze,tt,null);if(typeof ze.then=="function")return He(Pe,Oe,Vh(ze),tt);if(ze.$$typeof===S)return He(Pe,Oe,Bh(Pe,ze),tt);Gh(Pe,ze)}return null}function We(Pe,Oe,ze,tt,Dt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Pe=Pe.get(ze)||null,me(Oe,Pe,""+tt,Dt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case p:return Pe=Pe.get(tt.key===null?ze:tt.key)||null,Te(Oe,Pe,tt,Dt);case v:return Pe=Pe.get(tt.key===null?ze:tt.key)||null,Be(Oe,Pe,tt,Dt);case D:return tt=vc(tt),We(Pe,Oe,ze,tt,Dt)}if(F(tt)||T(tt))return Pe=Pe.get(ze)||null,Xe(Oe,Pe,tt,Dt,null);if(typeof tt.then=="function")return We(Pe,Oe,ze,Vh(tt),Dt);if(tt.$$typeof===S)return We(Pe,Oe,ze,Bh(Oe,tt),Dt);Gh(Oe,tt)}return null}function St(Pe,Oe,ze,tt){for(var Dt=null,Ls=null,Ct=Oe,ls=Oe=0,ws=null;Ct!==null&&ls<ze.length;ls++){Ct.index>ls?(ws=Ct,Ct=null):ws=Ct.sibling;var Fs=He(Pe,Ct,ze[ls],tt);if(Fs===null){Ct===null&&(Ct=ws);break}c&&Ct&&Fs.alternate===null&&m(Pe,Ct),Oe=U(Fs,Oe,ls),Ls===null?Dt=Fs:Ls.sibling=Fs,Ls=Fs,Ct=ws}if(ls===ze.length)return g(Pe,Ct),Es&&ml(Pe,ls),Dt;if(Ct===null){for(;ls<ze.length;ls++)Ct=st(Pe,ze[ls],tt),Ct!==null&&(Oe=U(Ct,Oe,ls),Ls===null?Dt=Ct:Ls.sibling=Ct,Ls=Ct);return Es&&ml(Pe,ls),Dt}for(Ct=N(Ct);ls<ze.length;ls++)ws=We(Ct,Pe,ls,ze[ls],tt),ws!==null&&(c&&ws.alternate!==null&&Ct.delete(ws.key===null?ls:ws.key),Oe=U(ws,Oe,ls),Ls===null?Dt=ws:Ls.sibling=ws,Ls=ws);return c&&Ct.forEach(function(wo){return m(Pe,wo)}),Es&&ml(Pe,ls),Dt}function $t(Pe,Oe,ze,tt){if(ze==null)throw Error(r(151));for(var Dt=null,Ls=null,Ct=Oe,ls=Oe=0,ws=null,Fs=ze.next();Ct!==null&&!Fs.done;ls++,Fs=ze.next()){Ct.index>ls?(ws=Ct,Ct=null):ws=Ct.sibling;var wo=He(Pe,Ct,Fs.value,tt);if(wo===null){Ct===null&&(Ct=ws);break}c&&Ct&&wo.alternate===null&&m(Pe,Ct),Oe=U(wo,Oe,ls),Ls===null?Dt=wo:Ls.sibling=wo,Ls=wo,Ct=ws}if(Fs.done)return g(Pe,Ct),Es&&ml(Pe,ls),Dt;if(Ct===null){for(;!Fs.done;ls++,Fs=ze.next())Fs=st(Pe,Fs.value,tt),Fs!==null&&(Oe=U(Fs,Oe,ls),Ls===null?Dt=Fs:Ls.sibling=Fs,Ls=Fs);return Es&&ml(Pe,ls),Dt}for(Ct=N(Ct);!Fs.done;ls++,Fs=ze.next())Fs=We(Ct,Pe,ls,Fs.value,tt),Fs!==null&&(c&&Fs.alternate!==null&&Ct.delete(Fs.key===null?ls:Fs.key),Oe=U(Fs,Oe,ls),Ls===null?Dt=Fs:Ls.sibling=Fs,Ls=Fs);return c&&Ct.forEach(function(bq){return m(Pe,bq)}),Es&&ml(Pe,ls),Dt}function oa(Pe,Oe,ze,tt){if(typeof ze=="object"&&ze!==null&&ze.type===b&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case p:e:{for(var Dt=ze.key;Oe!==null;){if(Oe.key===Dt){if(Dt=ze.type,Dt===b){if(Oe.tag===7){g(Pe,Oe.sibling),tt=R(Oe,ze.props.children),tt.return=Pe,Pe=tt;break e}}else if(Oe.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===D&&vc(Dt)===Oe.type){g(Pe,Oe.sibling),tt=R(Oe,ze.props),B0(tt,ze),tt.return=Pe,Pe=tt;break e}g(Pe,Oe);break}else m(Pe,Oe);Oe=Oe.sibling}ze.type===b?(tt=hc(ze.props.children,Pe.mode,tt,ze.key),tt.return=Pe,Pe=tt):(tt=Fh(ze.type,ze.key,ze.props,null,Pe.mode,tt),B0(tt,ze),tt.return=Pe,Pe=tt)}return ae(Pe);case v:e:{for(Dt=ze.key;Oe!==null;){if(Oe.key===Dt)if(Oe.tag===4&&Oe.stateNode.containerInfo===ze.containerInfo&&Oe.stateNode.implementation===ze.implementation){g(Pe,Oe.sibling),tt=R(Oe,ze.children||[]),tt.return=Pe,Pe=tt;break e}else{g(Pe,Oe);break}else m(Pe,Oe);Oe=Oe.sibling}tt=lv(ze,Pe.mode,tt),tt.return=Pe,Pe=tt}return ae(Pe);case D:return ze=vc(ze),oa(Pe,Oe,ze,tt)}if(F(ze))return St(Pe,Oe,ze,tt);if(T(ze)){if(Dt=T(ze),typeof Dt!="function")throw Error(r(150));return ze=Dt.call(ze),$t(Pe,Oe,ze,tt)}if(typeof ze.then=="function")return oa(Pe,Oe,Vh(ze),tt);if(ze.$$typeof===S)return oa(Pe,Oe,Bh(Pe,ze),tt);Gh(Pe,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Oe!==null&&Oe.tag===6?(g(Pe,Oe.sibling),tt=R(Oe,ze),tt.return=Pe,Pe=tt):(g(Pe,Oe),tt=iv(ze,Pe.mode,tt),tt.return=Pe,Pe=tt),ae(Pe)):g(Pe,Oe)}return function(Pe,Oe,ze,tt){try{z0=0;var Dt=oa(Pe,Oe,ze,tt);return zd=null,Dt}catch(Ct){if(Ct===Ud||Ct===qh)throw Ct;var Ls=wn(29,Ct,null,Pe.mode);return Ls.lanes=tt,Ls.return=Pe,Ls}finally{}}}var Nc=bT(!0),vT=bT(!1),no=!1;function vv(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yv(c,m){c=c.updateQueue,m.updateQueue===c&&(m.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function io(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function lo(c,m,g){var N=c.updateQueue;if(N===null)return null;if(N=N.shared,(qs&2)!==0){var R=N.pending;return R===null?m.next=m:(m.next=R.next,R.next=m),N.pending=m,m=Lh(c),sT(c,null,g),m}return Mh(c,N,m,g),Lh(c)}function $0(c,m,g){if(m=m.updateQueue,m!==null&&(m=m.shared,(g&4194048)!==0)){var N=m.lanes;N&=c.pendingLanes,g|=N,m.lanes=g,Ca(c,g)}}function Nv(c,m){var g=c.updateQueue,N=c.alternate;if(N!==null&&(N=N.updateQueue,g===N)){var R=null,U=null;if(g=g.firstBaseUpdate,g!==null){do{var ae={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};U===null?R=U=ae:U=U.next=ae,g=g.next}while(g!==null);U===null?R=U=m:U=U.next=m}else R=U=m;g={baseState:N.baseState,firstBaseUpdate:R,lastBaseUpdate:U,shared:N.shared,callbacks:N.callbacks},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=m:c.next=m,g.lastBaseUpdate=m}var jv=!1;function q0(){if(jv){var c=Fd;if(c!==null)throw c}}function H0(c,m,g,N){jv=!1;var R=c.updateQueue;no=!1;var U=R.firstBaseUpdate,ae=R.lastBaseUpdate,me=R.shared.pending;if(me!==null){R.shared.pending=null;var Te=me,Be=Te.next;Te.next=null,ae===null?U=Be:ae.next=Be,ae=Te;var Xe=c.alternate;Xe!==null&&(Xe=Xe.updateQueue,me=Xe.lastBaseUpdate,me!==ae&&(me===null?Xe.firstBaseUpdate=Be:me.next=Be,Xe.lastBaseUpdate=Te))}if(U!==null){var st=R.baseState;ae=0,Xe=Be=Te=null,me=U;do{var He=me.lane&-536870913,We=He!==me.lane;if(We?(js&He)===He:(N&He)===He){He!==0&&He===Ld&&(jv=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var St=c,$t=me;He=m;var oa=g;switch($t.tag){case 1:if(St=$t.payload,typeof St=="function"){st=St.call(oa,st,He);break e}st=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=$t.payload,He=typeof St=="function"?St.call(oa,st,He):St,He==null)break e;st=f({},st,He);break e;case 2:no=!0}}He=me.callback,He!==null&&(c.flags|=64,We&&(c.flags|=8192),We=R.callbacks,We===null?R.callbacks=[He]:We.push(He))}else We={lane:He,tag:me.tag,payload:me.payload,callback:me.callback,next:null},Xe===null?(Be=Xe=We,Te=st):Xe=Xe.next=We,ae|=He;if(me=me.next,me===null){if(me=R.shared.pending,me===null)break;We=me,me=We.next,We.next=null,R.lastBaseUpdate=We,R.shared.pending=null}}while(!0);Xe===null&&(Te=st),R.baseState=Te,R.firstBaseUpdate=Be,R.lastBaseUpdate=Xe,U===null&&(R.shared.lanes=0),fo|=ae,c.lanes=ae,c.memoizedState=st}}function yT(c,m){if(typeof c!="function")throw Error(r(191,c));c.call(m)}function NT(c,m){var g=c.callbacks;if(g!==null)for(c.callbacks=null,c=0;c<g.length;c++)yT(g[c],m)}var Bd=H(null),Wh=H(0);function jT(c,m){c=wl,X(Wh,c),X(Bd,m),wl=c|m.baseLanes}function wv(){X(Wh,wl),X(Bd,Bd.current)}function Sv(){wl=Wh.current,M(Bd),M(Wh)}var Sn=H(null),Qn=null;function oo(c){var m=c.alternate;X(za,za.current&1),X(Sn,c),Qn===null&&(m===null||Bd.current!==null||m.memoizedState!==null)&&(Qn=c)}function Av(c){X(za,za.current),X(Sn,c),Qn===null&&(Qn=c)}function wT(c){c.tag===22?(X(za,za.current),X(Sn,c),Qn===null&&(Qn=c)):co()}function co(){X(za,za.current),X(Sn,Sn.current)}function An(c){M(Sn),Qn===c&&(Qn=null),M(za)}var za=H(0);function Qh(c){for(var m=c;m!==null;){if(m.tag===13){var g=m.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Oy(g)||Iy(g)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var xl=0,as=null,ia=null,Wa=null,Kh=!1,$d=!1,jc=!1,Jh=0,V0=0,qd=null,o$=0;function Ia(){throw Error(r(321))}function Ev(c,m){if(m===null)return!1;for(var g=0;g<m.length&&g<c.length;g++)if(!jn(c[g],m[g]))return!1;return!0}function Cv(c,m,g,N,R,U){return xl=U,as=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,P.H=c===null||c.memoizedState===null?i_:$v,jc=!1,U=g(N,R),jc=!1,$d&&(U=AT(m,g,N,R)),ST(c),U}function ST(c){P.H=Q0;var m=ia!==null&&ia.next!==null;if(xl=0,Wa=ia=as=null,Kh=!1,V0=0,qd=null,m)throw Error(r(300));c===null||Qa||(c=c.dependencies,c!==null&&zh(c)&&(Qa=!0))}function AT(c,m,g,N){as=c;var R=0;do{if($d&&(qd=null),V0=0,$d=!1,25<=R)throw Error(r(301));if(R+=1,Wa=ia=null,c.updateQueue!=null){var U=c.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}P.H=l_,U=m(g,N)}while($d);return U}function c$(){var c=P.H,m=c.useState()[0];return m=typeof m.then=="function"?G0(m):m,c=c.useState()[0],(ia!==null?ia.memoizedState:null)!==c&&(as.flags|=1024),m}function Tv(){var c=Jh!==0;return Jh=0,c}function _v(c,m,g){m.updateQueue=c.updateQueue,m.flags&=-2053,c.lanes&=~g}function kv(c){if(Kh){for(c=c.memoizedState;c!==null;){var m=c.queue;m!==null&&(m.pending=null),c=c.next}Kh=!1}xl=0,Wa=ia=as=null,$d=!1,V0=Jh=0,qd=null}function en(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wa===null?as.memoizedState=Wa=c:Wa=Wa.next=c,Wa}function Ba(){if(ia===null){var c=as.alternate;c=c!==null?c.memoizedState:null}else c=ia.next;var m=Wa===null?as.memoizedState:Wa.next;if(m!==null)Wa=m,ia=c;else{if(c===null)throw as.alternate===null?Error(r(467)):Error(r(310));ia=c,c={memoizedState:ia.memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},Wa===null?as.memoizedState=Wa=c:Wa=Wa.next=c}return Wa}function Yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function G0(c){var m=V0;return V0+=1,qd===null&&(qd=[]),c=xT(qd,c,m),m=as,(Wa===null?m.memoizedState:Wa.next)===null&&(m=m.alternate,P.H=m===null||m.memoizedState===null?i_:$v),c}function Xh(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return G0(c);if(c.$$typeof===S)return Ar(c)}throw Error(r(438,String(c)))}function Ov(c){var m=null,g=as.updateQueue;if(g!==null&&(m=g.memoCache),m==null){var N=as.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(m={data:N.data.map(function(R){return R.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),g===null&&(g=Yh(),as.updateQueue=g),g.memoCache=m,g=m.data[m.index],g===void 0)for(g=m.data[m.index]=Array(c),N=0;N<c;N++)g[N]=B;return m.index++,g}function pl(c,m){return typeof m=="function"?m(c):m}function Zh(c){var m=Ba();return Iv(m,ia,c)}function Iv(c,m,g){var N=c.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=g;var R=c.baseQueue,U=N.pending;if(U!==null){if(R!==null){var ae=R.next;R.next=U.next,U.next=ae}m.baseQueue=R=U,N.pending=null}if(U=c.baseState,R===null)c.memoizedState=U;else{m=R.next;var me=ae=null,Te=null,Be=m,Xe=!1;do{var st=Be.lane&-536870913;if(st!==Be.lane?(js&st)===st:(xl&st)===st){var He=Be.revertLane;if(He===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),st===Ld&&(Xe=!0);else if((xl&He)===He){Be=Be.next,He===Ld&&(Xe=!0);continue}else st={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Te===null?(me=Te=st,ae=U):Te=Te.next=st,as.lanes|=He,fo|=He;st=Be.action,jc&&g(U,st),U=Be.hasEagerState?Be.eagerState:g(U,st)}else He={lane:st,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Te===null?(me=Te=He,ae=U):Te=Te.next=He,as.lanes|=st,fo|=st;Be=Be.next}while(Be!==null&&Be!==m);if(Te===null?ae=U:Te.next=me,!jn(U,c.memoizedState)&&(Qa=!0,Xe&&(g=Fd,g!==null)))throw g;c.memoizedState=U,c.baseState=ae,c.baseQueue=Te,N.lastRenderedState=U}return R===null&&(N.lanes=0),[c.memoizedState,N.dispatch]}function Rv(c){var m=Ba(),g=m.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var N=g.dispatch,R=g.pending,U=m.memoizedState;if(R!==null){g.pending=null;var ae=R=R.next;do U=c(U,ae.action),ae=ae.next;while(ae!==R);jn(U,m.memoizedState)||(Qa=!0),m.memoizedState=U,m.baseQueue===null&&(m.baseState=U),g.lastRenderedState=U}return[U,N]}function ET(c,m,g){var N=as,R=Ba(),U=Es;if(U){if(g===void 0)throw Error(r(407));g=g()}else g=m();var ae=!jn((ia||R).memoizedState,g);if(ae&&(R.memoizedState=g,Qa=!0),R=R.queue,Mv(_T.bind(null,N,R,c),[c]),R.getSnapshot!==m||ae||Wa!==null&&Wa.memoizedState.tag&1){if(N.flags|=2048,Hd(9,{destroy:void 0},TT.bind(null,N,R,g,m),null),ua===null)throw Error(r(349));U||(xl&127)!==0||CT(N,m,g)}return g}function CT(c,m,g){c.flags|=16384,c={getSnapshot:m,value:g},m=as.updateQueue,m===null?(m=Yh(),as.updateQueue=m,m.stores=[c]):(g=m.stores,g===null?m.stores=[c]:g.push(c))}function TT(c,m,g,N){m.value=g,m.getSnapshot=N,kT(m)&&OT(c)}function _T(c,m,g){return g(function(){kT(m)&&OT(c)})}function kT(c){var m=c.getSnapshot;c=c.value;try{var g=m();return!jn(c,g)}catch{return!0}}function OT(c){var m=fc(c,2);m!==null&&mn(m,c,2)}function Pv(c){var m=en();if(typeof c=="function"){var g=c;if(c=g(),jc){ot(!0);try{g()}finally{ot(!1)}}}return m.memoizedState=m.baseState=c,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:c},m}function IT(c,m,g,N){return c.baseState=g,Iv(c,ia,typeof N=="function"?N:pl)}function d$(c,m,g,N,R){if(sx(c))throw Error(r(485));if(c=m.action,c!==null){var U={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){U.listeners.push(ae)}};P.T!==null?g(!0):U.isTransition=!1,N(U),g=m.pending,g===null?(U.next=m.pending=U,RT(m,U)):(U.next=g.next,m.pending=g.next=U)}}function RT(c,m){var g=m.action,N=m.payload,R=c.state;if(m.isTransition){var U=P.T,ae={};P.T=ae;try{var me=g(R,N),Te=P.S;Te!==null&&Te(ae,me),PT(c,m,me)}catch(Be){Dv(c,m,Be)}finally{U!==null&&ae.types!==null&&(U.types=ae.types),P.T=U}}else try{U=g(R,N),PT(c,m,U)}catch(Be){Dv(c,m,Be)}}function PT(c,m,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(N){DT(c,m,N)},function(N){return Dv(c,m,N)}):DT(c,m,g)}function DT(c,m,g){m.status="fulfilled",m.value=g,MT(m),c.state=g,m=c.pending,m!==null&&(g=m.next,g===m?c.pending=null:(g=g.next,m.next=g,RT(c,g)))}function Dv(c,m,g){var N=c.pending;if(c.pending=null,N!==null){N=N.next;do m.status="rejected",m.reason=g,MT(m),m=m.next;while(m!==N)}c.action=null}function MT(c){c=c.listeners;for(var m=0;m<c.length;m++)(0,c[m])()}function LT(c,m){return m}function FT(c,m){if(Es){var g=ua.formState;if(g!==null){e:{var N=as;if(Es){if(xa){t:{for(var R=xa,U=Wn;R.nodeType!==8;){if(!U){R=null;break t}if(R=Kn(R.nextSibling),R===null){R=null;break t}}U=R.data,R=U==="F!"||U==="F"?R:null}if(R){xa=Kn(R.nextSibling),N=R.data==="F!";break e}}ao(N)}N=!1}N&&(m=g[0])}}return g=en(),g.memoizedState=g.baseState=m,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:LT,lastRenderedState:m},g.queue=N,g=a_.bind(null,as,N),N.dispatch=g,N=Pv(!1),U=Bv.bind(null,as,!1,N.queue),N=en(),R={state:m,dispatch:null,action:c,pending:null},N.queue=R,g=d$.bind(null,as,R,U,g),R.dispatch=g,N.memoizedState=c,[m,g,!1]}function UT(c){var m=Ba();return zT(m,ia,c)}function zT(c,m,g){if(m=Iv(c,m,LT)[0],c=Zh(pl)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var N=G0(m)}catch(ae){throw ae===Ud?qh:ae}else N=m;m=Ba();var R=m.queue,U=R.dispatch;return g!==m.memoizedState&&(as.flags|=2048,Hd(9,{destroy:void 0},u$.bind(null,R,g),null)),[N,U,c]}function u$(c,m){c.action=m}function BT(c){var m=Ba(),g=ia;if(g!==null)return zT(m,g,c);Ba(),m=m.memoizedState,g=Ba();var N=g.queue.dispatch;return g.memoizedState=c,[m,N,!1]}function Hd(c,m,g,N){return c={tag:c,create:g,deps:N,inst:m,next:null},m=as.updateQueue,m===null&&(m=Yh(),as.updateQueue=m),g=m.lastEffect,g===null?m.lastEffect=c.next=c:(N=g.next,g.next=c,c.next=N,m.lastEffect=c),c}function $T(){return Ba().memoizedState}function ex(c,m,g,N){var R=en();as.flags|=c,R.memoizedState=Hd(1|m,{destroy:void 0},g,N===void 0?null:N)}function tx(c,m,g,N){var R=Ba();N=N===void 0?null:N;var U=R.memoizedState.inst;ia!==null&&N!==null&&Ev(N,ia.memoizedState.deps)?R.memoizedState=Hd(m,U,g,N):(as.flags|=c,R.memoizedState=Hd(1|m,U,g,N))}function qT(c,m){ex(8390656,8,c,m)}function Mv(c,m){tx(2048,8,c,m)}function m$(c){as.flags|=4;var m=as.updateQueue;if(m===null)m=Yh(),as.updateQueue=m,m.events=[c];else{var g=m.events;g===null?m.events=[c]:g.push(c)}}function HT(c){var m=Ba().memoizedState;return m$({ref:m,nextImpl:c}),function(){if((qs&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}function VT(c,m){return tx(4,2,c,m)}function GT(c,m){return tx(4,4,c,m)}function WT(c,m){if(typeof m=="function"){c=c();var g=m(c);return function(){typeof g=="function"?g():m(null)}}if(m!=null)return c=c(),m.current=c,function(){m.current=null}}function QT(c,m,g){g=g!=null?g.concat([c]):null,tx(4,4,WT.bind(null,m,c),g)}function Lv(){}function KT(c,m){var g=Ba();m=m===void 0?null:m;var N=g.memoizedState;return m!==null&&Ev(m,N[1])?N[0]:(g.memoizedState=[c,m],c)}function JT(c,m){var g=Ba();m=m===void 0?null:m;var N=g.memoizedState;if(m!==null&&Ev(m,N[1]))return N[0];if(N=c(),jc){ot(!0);try{c()}finally{ot(!1)}}return g.memoizedState=[N,m],N}function Fv(c,m,g){return g===void 0||(xl&1073741824)!==0&&(js&261930)===0?c.memoizedState=m:(c.memoizedState=g,c=Y_(),as.lanes|=c,fo|=c,g)}function YT(c,m,g,N){return jn(g,m)?g:Bd.current!==null?(c=Fv(c,g,N),jn(c,m)||(Qa=!0),c):(xl&42)===0||(xl&1073741824)!==0&&(js&261930)===0?(Qa=!0,c.memoizedState=g):(c=Y_(),as.lanes|=c,fo|=c,m)}function XT(c,m,g,N,R){var U=G.p;G.p=U!==0&&8>U?U:8;var ae=P.T,me={};P.T=me,Bv(c,!1,m,g);try{var Te=R(),Be=P.S;if(Be!==null&&Be(me,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Xe=l$(Te,N);W0(c,m,Xe,Tn(c))}else W0(c,m,N,Tn(c))}catch(st){W0(c,m,{then:function(){},status:"rejected",reason:st},Tn())}finally{G.p=U,ae!==null&&me.types!==null&&(ae.types=me.types),P.T=ae}}function f$(){}function Uv(c,m,g,N){if(c.tag!==5)throw Error(r(476));var R=ZT(c).queue;XT(c,R,m,Y,g===null?f$:function(){return e_(c),g(N)})}function ZT(c){var m=c.memoizedState;if(m!==null)return m;m={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:Y},next:null};var g={};return m.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:g},next:null},c.memoizedState=m,c=c.alternate,c!==null&&(c.memoizedState=m),m}function e_(c){var m=ZT(c);m.next===null&&(m=c.alternate.memoizedState),W0(c,m.next.queue,{},Tn())}function zv(){return Ar(dm)}function t_(){return Ba().memoizedState}function s_(){return Ba().memoizedState}function h$(c){for(var m=c.return;m!==null;){switch(m.tag){case 24:case 3:var g=Tn();c=io(g);var N=lo(m,c,g);N!==null&&(mn(N,m,g),$0(N,m,g)),m={cache:xv()},c.payload=m;return}m=m.return}}function x$(c,m,g){var N=Tn();g={lane:N,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},sx(c)?r_(m,g):(g=rv(c,m,g,N),g!==null&&(mn(g,c,N),n_(g,m,N)))}function a_(c,m,g){var N=Tn();W0(c,m,g,N)}function W0(c,m,g,N){var R={lane:N,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(sx(c))r_(m,R);else{var U=c.alternate;if(c.lanes===0&&(U===null||U.lanes===0)&&(U=m.lastRenderedReducer,U!==null))try{var ae=m.lastRenderedState,me=U(ae,g);if(R.hasEagerState=!0,R.eagerState=me,jn(me,ae))return Mh(c,m,R,0),ua===null&&Dh(),!1}catch{}finally{}if(g=rv(c,m,R,N),g!==null)return mn(g,c,N),n_(g,m,N),!0}return!1}function Bv(c,m,g,N){if(N={lane:2,revertLane:vy(),gesture:null,action:N,hasEagerState:!1,eagerState:null,next:null},sx(c)){if(m)throw Error(r(479))}else m=rv(c,g,N,2),m!==null&&mn(m,c,2)}function sx(c){var m=c.alternate;return c===as||m!==null&&m===as}function r_(c,m){$d=Kh=!0;var g=c.pending;g===null?m.next=m:(m.next=g.next,g.next=m),c.pending=m}function n_(c,m,g){if((g&4194048)!==0){var N=m.lanes;N&=c.pendingLanes,g|=N,m.lanes=g,Ca(c,g)}}var Q0={readContext:Ar,use:Xh,useCallback:Ia,useContext:Ia,useEffect:Ia,useImperativeHandle:Ia,useLayoutEffect:Ia,useInsertionEffect:Ia,useMemo:Ia,useReducer:Ia,useRef:Ia,useState:Ia,useDebugValue:Ia,useDeferredValue:Ia,useTransition:Ia,useSyncExternalStore:Ia,useId:Ia,useHostTransitionStatus:Ia,useFormState:Ia,useActionState:Ia,useOptimistic:Ia,useMemoCache:Ia,useCacheRefresh:Ia};Q0.useEffectEvent=Ia;var i_={readContext:Ar,use:Xh,useCallback:function(c,m){return en().memoizedState=[c,m===void 0?null:m],c},useContext:Ar,useEffect:qT,useImperativeHandle:function(c,m,g){g=g!=null?g.concat([c]):null,ex(4194308,4,WT.bind(null,m,c),g)},useLayoutEffect:function(c,m){return ex(4194308,4,c,m)},useInsertionEffect:function(c,m){ex(4,2,c,m)},useMemo:function(c,m){var g=en();m=m===void 0?null:m;var N=c();if(jc){ot(!0);try{c()}finally{ot(!1)}}return g.memoizedState=[N,m],N},useReducer:function(c,m,g){var N=en();if(g!==void 0){var R=g(m);if(jc){ot(!0);try{g(m)}finally{ot(!1)}}}else R=m;return N.memoizedState=N.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},N.queue=c,c=c.dispatch=x$.bind(null,as,c),[N.memoizedState,c]},useRef:function(c){var m=en();return c={current:c},m.memoizedState=c},useState:function(c){c=Pv(c);var m=c.queue,g=a_.bind(null,as,m);return m.dispatch=g,[c.memoizedState,g]},useDebugValue:Lv,useDeferredValue:function(c,m){var g=en();return Fv(g,c,m)},useTransition:function(){var c=Pv(!1);return c=XT.bind(null,as,c.queue,!0,!1),en().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,m,g){var N=as,R=en();if(Es){if(g===void 0)throw Error(r(407));g=g()}else{if(g=m(),ua===null)throw Error(r(349));(js&127)!==0||CT(N,m,g)}R.memoizedState=g;var U={value:g,getSnapshot:m};return R.queue=U,qT(_T.bind(null,N,U,c),[c]),N.flags|=2048,Hd(9,{destroy:void 0},TT.bind(null,N,U,g,m),null),g},useId:function(){var c=en(),m=ua.identifierPrefix;if(Es){var g=Bi,N=zi;g=(N&~(1<<32-le(N)-1)).toString(32)+g,m="_"+m+"R_"+g,g=Jh++,0<g&&(m+="H"+g.toString(32)),m+="_"}else g=o$++,m="_"+m+"r_"+g.toString(32)+"_";return c.memoizedState=m},useHostTransitionStatus:zv,useFormState:FT,useActionState:FT,useOptimistic:function(c){var m=en();m.memoizedState=m.baseState=c;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=g,m=Bv.bind(null,as,!0,g),g.dispatch=m,[c,m]},useMemoCache:Ov,useCacheRefresh:function(){return en().memoizedState=h$.bind(null,as)},useEffectEvent:function(c){var m=en(),g={impl:c};return m.memoizedState=g,function(){if((qs&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}},$v={readContext:Ar,use:Xh,useCallback:KT,useContext:Ar,useEffect:Mv,useImperativeHandle:QT,useInsertionEffect:VT,useLayoutEffect:GT,useMemo:JT,useReducer:Zh,useRef:$T,useState:function(){return Zh(pl)},useDebugValue:Lv,useDeferredValue:function(c,m){var g=Ba();return YT(g,ia.memoizedState,c,m)},useTransition:function(){var c=Zh(pl)[0],m=Ba().memoizedState;return[typeof c=="boolean"?c:G0(c),m]},useSyncExternalStore:ET,useId:t_,useHostTransitionStatus:zv,useFormState:UT,useActionState:UT,useOptimistic:function(c,m){var g=Ba();return IT(g,ia,c,m)},useMemoCache:Ov,useCacheRefresh:s_};$v.useEffectEvent=HT;var l_={readContext:Ar,use:Xh,useCallback:KT,useContext:Ar,useEffect:Mv,useImperativeHandle:QT,useInsertionEffect:VT,useLayoutEffect:GT,useMemo:JT,useReducer:Rv,useRef:$T,useState:function(){return Rv(pl)},useDebugValue:Lv,useDeferredValue:function(c,m){var g=Ba();return ia===null?Fv(g,c,m):YT(g,ia.memoizedState,c,m)},useTransition:function(){var c=Rv(pl)[0],m=Ba().memoizedState;return[typeof c=="boolean"?c:G0(c),m]},useSyncExternalStore:ET,useId:t_,useHostTransitionStatus:zv,useFormState:BT,useActionState:BT,useOptimistic:function(c,m){var g=Ba();return ia!==null?IT(g,ia,c,m):(g.baseState=c,[c,g.queue.dispatch])},useMemoCache:Ov,useCacheRefresh:s_};l_.useEffectEvent=HT;function qv(c,m,g,N){m=c.memoizedState,g=g(N,m),g=g==null?m:f({},m,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var Hv={enqueueSetState:function(c,m,g){c=c._reactInternals;var N=Tn(),R=io(N);R.payload=m,g!=null&&(R.callback=g),m=lo(c,R,N),m!==null&&(mn(m,c,N),$0(m,c,N))},enqueueReplaceState:function(c,m,g){c=c._reactInternals;var N=Tn(),R=io(N);R.tag=1,R.payload=m,g!=null&&(R.callback=g),m=lo(c,R,N),m!==null&&(mn(m,c,N),$0(m,c,N))},enqueueForceUpdate:function(c,m){c=c._reactInternals;var g=Tn(),N=io(g);N.tag=2,m!=null&&(N.callback=m),m=lo(c,N,g),m!==null&&(mn(m,c,g),$0(m,c,g))}};function o_(c,m,g,N,R,U,ae){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(N,U,ae):m.prototype&&m.prototype.isPureReactComponent?!P0(g,N)||!P0(R,U):!0}function c_(c,m,g,N){c=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(g,N),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(g,N),m.state!==c&&Hv.enqueueReplaceState(m,m.state,null)}function wc(c,m){var g=m;if("ref"in m){g={};for(var N in m)N!=="ref"&&(g[N]=m[N])}if(c=c.defaultProps){g===m&&(g=f({},g));for(var R in c)g[R]===void 0&&(g[R]=c[R])}return g}function d_(c){Ph(c)}function u_(c){console.error(c)}function m_(c){Ph(c)}function ax(c,m){try{var g=c.onUncaughtError;g(m.value,{componentStack:m.stack})}catch(N){setTimeout(function(){throw N})}}function f_(c,m,g){try{var N=c.onCaughtError;N(g.value,{componentStack:g.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Vv(c,m,g){return g=io(g),g.tag=3,g.payload={element:null},g.callback=function(){ax(c,m)},g}function h_(c){return c=io(c),c.tag=3,c}function x_(c,m,g,N){var R=g.type.getDerivedStateFromError;if(typeof R=="function"){var U=N.value;c.payload=function(){return R(U)},c.callback=function(){f_(m,g,N)}}var ae=g.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(c.callback=function(){f_(m,g,N),typeof R!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var me=N.stack;this.componentDidCatch(N.value,{componentStack:me!==null?me:""})})}function p$(c,m,g,N,R){if(g.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(m=g.alternate,m!==null&&Md(m,g,R,!0),g=Sn.current,g!==null){switch(g.tag){case 31:case 13:return Qn===null?xx():g.alternate===null&&Ra===0&&(Ra=3),g.flags&=-257,g.flags|=65536,g.lanes=R,N===Hh?g.flags|=16384:(m=g.updateQueue,m===null?g.updateQueue=new Set([N]):m.add(N),py(c,N,R)),!1;case 22:return g.flags|=65536,N===Hh?g.flags|=16384:(m=g.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([N])},g.updateQueue=m):(g=m.retryQueue,g===null?m.retryQueue=new Set([N]):g.add(N)),py(c,N,R)),!1}throw Error(r(435,g.tag))}return py(c,N,R),xx(),!1}if(Es)return m=Sn.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=R,N!==dv&&(c=Error(r(422),{cause:N}),L0(Hn(c,g)))):(N!==dv&&(m=Error(r(423),{cause:N}),L0(Hn(m,g))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,N=Hn(N,g),R=Vv(c.stateNode,N,R),Nv(c,R),Ra!==4&&(Ra=2)),!1;var U=Error(r(520),{cause:N});if(U=Hn(U,g),sm===null?sm=[U]:sm.push(U),Ra!==4&&(Ra=2),m===null)return!0;N=Hn(N,g),g=m;do{switch(g.tag){case 3:return g.flags|=65536,c=R&-R,g.lanes|=c,c=Vv(g.stateNode,N,c),Nv(g,c),!1;case 1:if(m=g.type,U=g.stateNode,(g.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ho===null||!ho.has(U))))return g.flags|=65536,R&=-R,g.lanes|=R,R=h_(R),x_(R,c,g,N),Nv(g,R),!1}g=g.return}while(g!==null);return!1}var Gv=Error(r(461)),Qa=!1;function Er(c,m,g,N){m.child=c===null?vT(m,null,g,N):Nc(m,c.child,g,N)}function p_(c,m,g,N,R){g=g.render;var U=m.ref;if("ref"in N){var ae={};for(var me in N)me!=="ref"&&(ae[me]=N[me])}else ae=N;return gc(m),N=Cv(c,m,g,ae,U,R),me=Tv(),c!==null&&!Qa?(_v(c,m,R),gl(c,m,R)):(Es&&me&&ov(m),m.flags|=1,Er(c,m,N,R),m.child)}function g_(c,m,g,N,R){if(c===null){var U=g.type;return typeof U=="function"&&!nv(U)&&U.defaultProps===void 0&&g.compare===null?(m.tag=15,m.type=U,b_(c,m,U,N,R)):(c=Fh(g.type,null,N,m,m.mode,R),c.ref=m.ref,c.return=m,m.child=c)}if(U=c.child,!ey(c,R)){var ae=U.memoizedProps;if(g=g.compare,g=g!==null?g:P0,g(ae,N)&&c.ref===m.ref)return gl(c,m,R)}return m.flags|=1,c=ul(U,N),c.ref=m.ref,c.return=m,m.child=c}function b_(c,m,g,N,R){if(c!==null){var U=c.memoizedProps;if(P0(U,N)&&c.ref===m.ref)if(Qa=!1,m.pendingProps=N=U,ey(c,R))(c.flags&131072)!==0&&(Qa=!0);else return m.lanes=c.lanes,gl(c,m,R)}return Wv(c,m,g,N,R)}function v_(c,m,g,N){var R=N.children,U=c!==null?c.memoizedState:null;if(c===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),N.mode==="hidden"){if((m.flags&128)!==0){if(U=U!==null?U.baseLanes|g:g,c!==null){for(N=m.child=c.child,R=0;N!==null;)R=R|N.lanes|N.childLanes,N=N.sibling;N=R&~U}else N=0,m.child=null;return y_(c,m,U,g,N)}if((g&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},c!==null&&$h(m,U!==null?U.cachePool:null),U!==null?jT(m,U):wv(),wT(m);else return N=m.lanes=536870912,y_(c,m,U!==null?U.baseLanes|g:g,g,N)}else U!==null?($h(m,U.cachePool),jT(m,U),co(),m.memoizedState=null):(c!==null&&$h(m,null),wv(),co());return Er(c,m,R,g),m.child}function K0(c,m){return c!==null&&c.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function y_(c,m,g,N,R){var U=gv();return U=U===null?null:{parent:Ga._currentValue,pool:U},m.memoizedState={baseLanes:g,cachePool:U},c!==null&&$h(m,null),wv(),wT(m),c!==null&&Md(c,m,N,!0),m.childLanes=R,null}function rx(c,m){return m=ix({mode:m.mode,children:m.children},c.mode),m.ref=c.ref,c.child=m,m.return=c,m}function N_(c,m,g){return Nc(m,c.child,null,g),c=rx(m,m.pendingProps),c.flags|=2,An(m),m.memoizedState=null,c}function g$(c,m,g){var N=m.pendingProps,R=(m.flags&128)!==0;if(m.flags&=-129,c===null){if(Es){if(N.mode==="hidden")return c=rx(m,N),m.lanes=536870912,K0(null,c);if(Av(m),(c=xa)?(c=Rk(c,Wn),c=c!==null&&c.data==="&"?c:null,c!==null&&(m.memoizedState={dehydrated:c,treeContext:to!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},g=rT(c),g.return=m,m.child=g,Sr=m,xa=null)):c=null,c===null)throw ao(m);return m.lanes=536870912,null}return rx(m,N)}var U=c.memoizedState;if(U!==null){var ae=U.dehydrated;if(Av(m),R)if(m.flags&256)m.flags&=-257,m=N_(c,m,g);else if(m.memoizedState!==null)m.child=c.child,m.flags|=128,m=null;else throw Error(r(558));else if(Qa||Md(c,m,g,!1),R=(g&c.childLanes)!==0,Qa||R){if(N=ua,N!==null&&(ae=ar(N,g),ae!==0&&ae!==U.retryLane))throw U.retryLane=ae,fc(c,ae),mn(N,c,ae),Gv;xx(),m=N_(c,m,g)}else c=U.treeContext,xa=Kn(ae.nextSibling),Sr=m,Es=!0,so=null,Wn=!1,c!==null&&lT(m,c),m=rx(m,N),m.flags|=4096;return m}return c=ul(c.child,{mode:N.mode,children:N.children}),c.ref=m.ref,m.child=c,c.return=m,c}function nx(c,m){var g=m.ref;if(g===null)c!==null&&c.ref!==null&&(m.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(c===null||c.ref!==g)&&(m.flags|=4194816)}}function Wv(c,m,g,N,R){return gc(m),g=Cv(c,m,g,N,void 0,R),N=Tv(),c!==null&&!Qa?(_v(c,m,R),gl(c,m,R)):(Es&&N&&ov(m),m.flags|=1,Er(c,m,g,R),m.child)}function j_(c,m,g,N,R,U){return gc(m),m.updateQueue=null,g=AT(m,N,g,R),ST(c),N=Tv(),c!==null&&!Qa?(_v(c,m,U),gl(c,m,U)):(Es&&N&&ov(m),m.flags|=1,Er(c,m,g,U),m.child)}function w_(c,m,g,N,R){if(gc(m),m.stateNode===null){var U=Id,ae=g.contextType;typeof ae=="object"&&ae!==null&&(U=Ar(ae)),U=new g(N,U),m.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Hv,m.stateNode=U,U._reactInternals=m,U=m.stateNode,U.props=N,U.state=m.memoizedState,U.refs={},vv(m),ae=g.contextType,U.context=typeof ae=="object"&&ae!==null?Ar(ae):Id,U.state=m.memoizedState,ae=g.getDerivedStateFromProps,typeof ae=="function"&&(qv(m,g,ae,N),U.state=m.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(ae=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),ae!==U.state&&Hv.enqueueReplaceState(U,U.state,null),H0(m,N,U,R),q0(),U.state=m.memoizedState),typeof U.componentDidMount=="function"&&(m.flags|=4194308),N=!0}else if(c===null){U=m.stateNode;var me=m.memoizedProps,Te=wc(g,me);U.props=Te;var Be=U.context,Xe=g.contextType;ae=Id,typeof Xe=="object"&&Xe!==null&&(ae=Ar(Xe));var st=g.getDerivedStateFromProps;Xe=typeof st=="function"||typeof U.getSnapshotBeforeUpdate=="function",me=m.pendingProps!==me,Xe||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(me||Be!==ae)&&c_(m,U,N,ae),no=!1;var He=m.memoizedState;U.state=He,H0(m,N,U,R),q0(),Be=m.memoizedState,me||He!==Be||no?(typeof st=="function"&&(qv(m,g,st,N),Be=m.memoizedState),(Te=no||o_(m,g,Te,N,He,Be,ae))?(Xe||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(m.flags|=4194308)):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=N,m.memoizedState=Be),U.props=N,U.state=Be,U.context=ae,N=Te):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),N=!1)}else{U=m.stateNode,yv(c,m),ae=m.memoizedProps,Xe=wc(g,ae),U.props=Xe,st=m.pendingProps,He=U.context,Be=g.contextType,Te=Id,typeof Be=="object"&&Be!==null&&(Te=Ar(Be)),me=g.getDerivedStateFromProps,(Be=typeof me=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ae!==st||He!==Te)&&c_(m,U,N,Te),no=!1,He=m.memoizedState,U.state=He,H0(m,N,U,R),q0();var We=m.memoizedState;ae!==st||He!==We||no||c!==null&&c.dependencies!==null&&zh(c.dependencies)?(typeof me=="function"&&(qv(m,g,me,N),We=m.memoizedState),(Xe=no||o_(m,g,Xe,N,He,We,Te)||c!==null&&c.dependencies!==null&&zh(c.dependencies))?(Be||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(N,We,Te),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(N,We,Te)),typeof U.componentDidUpdate=="function"&&(m.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof U.componentDidUpdate!="function"||ae===c.memoizedProps&&He===c.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&He===c.memoizedState||(m.flags|=1024),m.memoizedProps=N,m.memoizedState=We),U.props=N,U.state=We,U.context=Te,N=Xe):(typeof U.componentDidUpdate!="function"||ae===c.memoizedProps&&He===c.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&He===c.memoizedState||(m.flags|=1024),N=!1)}return U=N,nx(c,m),N=(m.flags&128)!==0,U||N?(U=m.stateNode,g=N&&typeof g.getDerivedStateFromError!="function"?null:U.render(),m.flags|=1,c!==null&&N?(m.child=Nc(m,c.child,null,R),m.child=Nc(m,null,g,R)):Er(c,m,g,R),m.memoizedState=U.state,c=m.child):c=gl(c,m,R),c}function S_(c,m,g,N){return xc(),m.flags|=256,Er(c,m,g,N),m.child}var Qv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kv(c){return{baseLanes:c,cachePool:fT()}}function Jv(c,m,g){return c=c!==null?c.childLanes&~g:0,m&&(c|=Cn),c}function A_(c,m,g){var N=m.pendingProps,R=!1,U=(m.flags&128)!==0,ae;if((ae=U)||(ae=c!==null&&c.memoizedState===null?!1:(za.current&2)!==0),ae&&(R=!0,m.flags&=-129),ae=(m.flags&32)!==0,m.flags&=-33,c===null){if(Es){if(R?oo(m):co(),(c=xa)?(c=Rk(c,Wn),c=c!==null&&c.data!=="&"?c:null,c!==null&&(m.memoizedState={dehydrated:c,treeContext:to!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},g=rT(c),g.return=m,m.child=g,Sr=m,xa=null)):c=null,c===null)throw ao(m);return Iy(c)?m.lanes=32:m.lanes=536870912,null}var me=N.children;return N=N.fallback,R?(co(),R=m.mode,me=ix({mode:"hidden",children:me},R),N=hc(N,R,g,null),me.return=m,N.return=m,me.sibling=N,m.child=me,N=m.child,N.memoizedState=Kv(g),N.childLanes=Jv(c,ae,g),m.memoizedState=Qv,K0(null,N)):(oo(m),Yv(m,me))}var Te=c.memoizedState;if(Te!==null&&(me=Te.dehydrated,me!==null)){if(U)m.flags&256?(oo(m),m.flags&=-257,m=Xv(c,m,g)):m.memoizedState!==null?(co(),m.child=c.child,m.flags|=128,m=null):(co(),me=N.fallback,R=m.mode,N=ix({mode:"visible",children:N.children},R),me=hc(me,R,g,null),me.flags|=2,N.return=m,me.return=m,N.sibling=me,m.child=N,Nc(m,c.child,null,g),N=m.child,N.memoizedState=Kv(g),N.childLanes=Jv(c,ae,g),m.memoizedState=Qv,m=K0(null,N));else if(oo(m),Iy(me)){if(ae=me.nextSibling&&me.nextSibling.dataset,ae)var Be=ae.dgst;ae=Be,N=Error(r(419)),N.stack="",N.digest=ae,L0({value:N,source:null,stack:null}),m=Xv(c,m,g)}else if(Qa||Md(c,m,g,!1),ae=(g&c.childLanes)!==0,Qa||ae){if(ae=ua,ae!==null&&(N=ar(ae,g),N!==0&&N!==Te.retryLane))throw Te.retryLane=N,fc(c,N),mn(ae,c,N),Gv;Oy(me)||xx(),m=Xv(c,m,g)}else Oy(me)?(m.flags|=192,m.child=c.child,m=null):(c=Te.treeContext,xa=Kn(me.nextSibling),Sr=m,Es=!0,so=null,Wn=!1,c!==null&&lT(m,c),m=Yv(m,N.children),m.flags|=4096);return m}return R?(co(),me=N.fallback,R=m.mode,Te=c.child,Be=Te.sibling,N=ul(Te,{mode:"hidden",children:N.children}),N.subtreeFlags=Te.subtreeFlags&65011712,Be!==null?me=ul(Be,me):(me=hc(me,R,g,null),me.flags|=2),me.return=m,N.return=m,N.sibling=me,m.child=N,K0(null,N),N=m.child,me=c.child.memoizedState,me===null?me=Kv(g):(R=me.cachePool,R!==null?(Te=Ga._currentValue,R=R.parent!==Te?{parent:Te,pool:Te}:R):R=fT(),me={baseLanes:me.baseLanes|g,cachePool:R}),N.memoizedState=me,N.childLanes=Jv(c,ae,g),m.memoizedState=Qv,K0(c.child,N)):(oo(m),g=c.child,c=g.sibling,g=ul(g,{mode:"visible",children:N.children}),g.return=m,g.sibling=null,c!==null&&(ae=m.deletions,ae===null?(m.deletions=[c],m.flags|=16):ae.push(c)),m.child=g,m.memoizedState=null,g)}function Yv(c,m){return m=ix({mode:"visible",children:m},c.mode),m.return=c,c.child=m}function ix(c,m){return c=wn(22,c,null,m),c.lanes=0,c}function Xv(c,m,g){return Nc(m,c.child,null,g),c=Yv(m,m.pendingProps.children),c.flags|=2,m.memoizedState=null,c}function E_(c,m,g){c.lanes|=m;var N=c.alternate;N!==null&&(N.lanes|=m),fv(c.return,m,g)}function Zv(c,m,g,N,R,U){var ae=c.memoizedState;ae===null?c.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:N,tail:g,tailMode:R,treeForkCount:U}:(ae.isBackwards=m,ae.rendering=null,ae.renderingStartTime=0,ae.last=N,ae.tail=g,ae.tailMode=R,ae.treeForkCount=U)}function C_(c,m,g){var N=m.pendingProps,R=N.revealOrder,U=N.tail;N=N.children;var ae=za.current,me=(ae&2)!==0;if(me?(ae=ae&1|2,m.flags|=128):ae&=1,X(za,ae),Er(c,m,N,g),N=Es?M0:0,!me&&c!==null&&(c.flags&128)!==0)e:for(c=m.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&E_(c,g,m);else if(c.tag===19)E_(c,g,m);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===m)break e;for(;c.sibling===null;){if(c.return===null||c.return===m)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(R){case"forwards":for(g=m.child,R=null;g!==null;)c=g.alternate,c!==null&&Qh(c)===null&&(R=g),g=g.sibling;g=R,g===null?(R=m.child,m.child=null):(R=g.sibling,g.sibling=null),Zv(m,!1,R,g,U,N);break;case"backwards":case"unstable_legacy-backwards":for(g=null,R=m.child,m.child=null;R!==null;){if(c=R.alternate,c!==null&&Qh(c)===null){m.child=R;break}c=R.sibling,R.sibling=g,g=R,R=c}Zv(m,!0,g,null,U,N);break;case"together":Zv(m,!1,null,null,void 0,N);break;default:m.memoizedState=null}return m.child}function gl(c,m,g){if(c!==null&&(m.dependencies=c.dependencies),fo|=m.lanes,(g&m.childLanes)===0)if(c!==null){if(Md(c,m,g,!1),(g&m.childLanes)===0)return null}else return null;if(c!==null&&m.child!==c.child)throw Error(r(153));if(m.child!==null){for(c=m.child,g=ul(c,c.pendingProps),m.child=g,g.return=m;c.sibling!==null;)c=c.sibling,g=g.sibling=ul(c,c.pendingProps),g.return=m;g.sibling=null}return m.child}function ey(c,m){return(c.lanes&m)!==0?!0:(c=c.dependencies,!!(c!==null&&zh(c)))}function b$(c,m,g){switch(m.tag){case 3:te(m,m.stateNode.containerInfo),ro(m,Ga,c.memoizedState.cache),xc();break;case 27:case 5:ue(m);break;case 4:te(m,m.stateNode.containerInfo);break;case 10:ro(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Av(m),null;break;case 13:var N=m.memoizedState;if(N!==null)return N.dehydrated!==null?(oo(m),m.flags|=128,null):(g&m.child.childLanes)!==0?A_(c,m,g):(oo(m),c=gl(c,m,g),c!==null?c.sibling:null);oo(m);break;case 19:var R=(c.flags&128)!==0;if(N=(g&m.childLanes)!==0,N||(Md(c,m,g,!1),N=(g&m.childLanes)!==0),R){if(N)return C_(c,m,g);m.flags|=128}if(R=m.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),X(za,za.current),N)break;return null;case 22:return m.lanes=0,v_(c,m,g,m.pendingProps);case 24:ro(m,Ga,c.memoizedState.cache)}return gl(c,m,g)}function T_(c,m,g){if(c!==null)if(c.memoizedProps!==m.pendingProps)Qa=!0;else{if(!ey(c,g)&&(m.flags&128)===0)return Qa=!1,b$(c,m,g);Qa=(c.flags&131072)!==0}else Qa=!1,Es&&(m.flags&1048576)!==0&&iT(m,M0,m.index);switch(m.lanes=0,m.tag){case 16:e:{var N=m.pendingProps;if(c=vc(m.elementType),m.type=c,typeof c=="function")nv(c)?(N=wc(c,N),m.tag=1,m=w_(null,m,c,N,g)):(m.tag=0,m=Wv(null,m,c,N,g));else{if(c!=null){var R=c.$$typeof;if(R===O){m.tag=11,m=p_(null,m,c,N,g);break e}else if(R===A){m.tag=14,m=g_(null,m,c,N,g);break e}}throw m=k(c)||c,Error(r(306,m,""))}}return m;case 0:return Wv(c,m,m.type,m.pendingProps,g);case 1:return N=m.type,R=wc(N,m.pendingProps),w_(c,m,N,R,g);case 3:e:{if(te(m,m.stateNode.containerInfo),c===null)throw Error(r(387));N=m.pendingProps;var U=m.memoizedState;R=U.element,yv(c,m),H0(m,N,null,g);var ae=m.memoizedState;if(N=ae.cache,ro(m,Ga,N),N!==U.cache&&hv(m,[Ga],g,!0),q0(),N=ae.element,U.isDehydrated)if(U={element:N,isDehydrated:!1,cache:ae.cache},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){m=S_(c,m,N,g);break e}else if(N!==R){R=Hn(Error(r(424)),m),L0(R),m=S_(c,m,N,g);break e}else{switch(c=m.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(xa=Kn(c.firstChild),Sr=m,Es=!0,so=null,Wn=!0,g=vT(m,null,N,g),m.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(xc(),N===R){m=gl(c,m,g);break e}Er(c,m,N,g)}m=m.child}return m;case 26:return nx(c,m),c===null?(g=Uk(m.type,null,m.pendingProps,null))?m.memoizedState=g:Es||(g=m.type,c=m.pendingProps,N=jx(se.current).createElement(g),N[ge]=m,N[je]=c,Cr(N,g,c),wt(N),m.stateNode=N):m.memoizedState=Uk(m.type,c.memoizedProps,m.pendingProps,c.memoizedState),null;case 27:return ue(m),c===null&&Es&&(N=m.stateNode=Mk(m.type,m.pendingProps,se.current),Sr=m,Wn=!0,R=xa,bo(m.type)?(Ry=R,xa=Kn(N.firstChild)):xa=R),Er(c,m,m.pendingProps.children,g),nx(c,m),c===null&&(m.flags|=4194304),m.child;case 5:return c===null&&Es&&((R=N=xa)&&(N=Q$(N,m.type,m.pendingProps,Wn),N!==null?(m.stateNode=N,Sr=m,xa=Kn(N.firstChild),Wn=!1,R=!0):R=!1),R||ao(m)),ue(m),R=m.type,U=m.pendingProps,ae=c!==null?c.memoizedProps:null,N=U.children,Ty(R,U)?N=null:ae!==null&&Ty(R,ae)&&(m.flags|=32),m.memoizedState!==null&&(R=Cv(c,m,c$,null,null,g),dm._currentValue=R),nx(c,m),Er(c,m,N,g),m.child;case 6:return c===null&&Es&&((c=g=xa)&&(g=K$(g,m.pendingProps,Wn),g!==null?(m.stateNode=g,Sr=m,xa=null,c=!0):c=!1),c||ao(m)),null;case 13:return A_(c,m,g);case 4:return te(m,m.stateNode.containerInfo),N=m.pendingProps,c===null?m.child=Nc(m,null,N,g):Er(c,m,N,g),m.child;case 11:return p_(c,m,m.type,m.pendingProps,g);case 7:return Er(c,m,m.pendingProps,g),m.child;case 8:return Er(c,m,m.pendingProps.children,g),m.child;case 12:return Er(c,m,m.pendingProps.children,g),m.child;case 10:return N=m.pendingProps,ro(m,m.type,N.value),Er(c,m,N.children,g),m.child;case 9:return R=m.type._context,N=m.pendingProps.children,gc(m),R=Ar(R),N=N(R),m.flags|=1,Er(c,m,N,g),m.child;case 14:return g_(c,m,m.type,m.pendingProps,g);case 15:return b_(c,m,m.type,m.pendingProps,g);case 19:return C_(c,m,g);case 31:return g$(c,m,g);case 22:return v_(c,m,g,m.pendingProps);case 24:return gc(m),N=Ar(Ga),c===null?(R=gv(),R===null&&(R=ua,U=xv(),R.pooledCache=U,U.refCount++,U!==null&&(R.pooledCacheLanes|=g),R=U),m.memoizedState={parent:N,cache:R},vv(m),ro(m,Ga,R)):((c.lanes&g)!==0&&(yv(c,m),H0(m,null,null,g),q0()),R=c.memoizedState,U=m.memoizedState,R.parent!==N?(R={parent:N,cache:N},m.memoizedState=R,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=R),ro(m,Ga,N)):(N=U.cache,ro(m,Ga,N),N!==R.cache&&hv(m,[Ga],g,!0))),Er(c,m,m.pendingProps.children,g),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function bl(c){c.flags|=4}function ty(c,m,g,N,R){if((m=(c.mode&32)!==0)&&(m=!1),m){if(c.flags|=16777216,(R&335544128)===R)if(c.stateNode.complete)c.flags|=8192;else if(tk())c.flags|=8192;else throw yc=Hh,bv}else c.flags&=-16777217}function __(c,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Hk(m))if(tk())c.flags|=8192;else throw yc=Hh,bv}function lx(c,m){m!==null&&(c.flags|=4),c.flags&16384&&(m=c.tag!==22?we():536870912,c.lanes|=m,Qd|=m)}function J0(c,m){if(!Es)switch(c.tailMode){case"hidden":m=c.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var N=null;g!==null;)g.alternate!==null&&(N=g),g=g.sibling;N===null?m||c.tail===null?c.tail=null:c.tail.sibling=null:N.sibling=null}}function pa(c){var m=c.alternate!==null&&c.alternate.child===c.child,g=0,N=0;if(m)for(var R=c.child;R!==null;)g|=R.lanes|R.childLanes,N|=R.subtreeFlags&65011712,N|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)g|=R.lanes|R.childLanes,N|=R.subtreeFlags,N|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=N,c.childLanes=g,m}function v$(c,m,g){var N=m.pendingProps;switch(cv(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pa(m),null;case 1:return pa(m),null;case 3:return g=m.stateNode,N=null,c!==null&&(N=c.memoizedState.cache),m.memoizedState.cache!==N&&(m.flags|=2048),hl(Ga),Z(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(c===null||c.child===null)&&(Dd(m)?bl(m):c===null||c.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,uv())),pa(m),null;case 26:var R=m.type,U=m.memoizedState;return c===null?(bl(m),U!==null?(pa(m),__(m,U)):(pa(m),ty(m,R,null,N,g))):U?U!==c.memoizedState?(bl(m),pa(m),__(m,U)):(pa(m),m.flags&=-16777217):(c=c.memoizedProps,c!==N&&bl(m),pa(m),ty(m,R,c,N,g)),null;case 27:if(re(m),g=se.current,R=m.type,c!==null&&m.stateNode!=null)c.memoizedProps!==N&&bl(m);else{if(!N){if(m.stateNode===null)throw Error(r(166));return pa(m),null}c=K.current,Dd(m)?oT(m):(c=Mk(R,N,g),m.stateNode=c,bl(m))}return pa(m),null;case 5:if(re(m),R=m.type,c!==null&&m.stateNode!=null)c.memoizedProps!==N&&bl(m);else{if(!N){if(m.stateNode===null)throw Error(r(166));return pa(m),null}if(U=K.current,Dd(m))oT(m);else{var ae=jx(se.current);switch(U){case 1:U=ae.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:U=ae.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":U=ae.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":U=ae.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":U=ae.createElement("div"),U.innerHTML="<script><\/script>",U=U.removeChild(U.firstChild);break;case"select":U=typeof N.is=="string"?ae.createElement("select",{is:N.is}):ae.createElement("select"),N.multiple?U.multiple=!0:N.size&&(U.size=N.size);break;default:U=typeof N.is=="string"?ae.createElement(R,{is:N.is}):ae.createElement(R)}}U[ge]=m,U[je]=N;e:for(ae=m.child;ae!==null;){if(ae.tag===5||ae.tag===6)U.appendChild(ae.stateNode);else if(ae.tag!==4&&ae.tag!==27&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===m)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===m)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}m.stateNode=U;e:switch(Cr(U,R,N),R){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}N&&bl(m)}}return pa(m),ty(m,m.type,c===null?null:c.memoizedProps,m.pendingProps,g),null;case 6:if(c&&m.stateNode!=null)c.memoizedProps!==N&&bl(m);else{if(typeof N!="string"&&m.stateNode===null)throw Error(r(166));if(c=se.current,Dd(m)){if(c=m.stateNode,g=m.memoizedProps,N=null,R=Sr,R!==null)switch(R.tag){case 27:case 5:N=R.memoizedProps}c[ge]=m,c=!!(c.nodeValue===g||N!==null&&N.suppressHydrationWarning===!0||Ak(c.nodeValue,g)),c||ao(m,!0)}else c=jx(c).createTextNode(N),c[ge]=m,m.stateNode=c}return pa(m),null;case 31:if(g=m.memoizedState,c===null||c.memoizedState!==null){if(N=Dd(m),g!==null){if(c===null){if(!N)throw Error(r(318));if(c=m.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(557));c[ge]=m}else xc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;pa(m),c=!1}else g=uv(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=g),c=!0;if(!c)return m.flags&256?(An(m),m):(An(m),null);if((m.flags&128)!==0)throw Error(r(558))}return pa(m),null;case 13:if(N=m.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=Dd(m),N!==null&&N.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=m.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[ge]=m}else xc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;pa(m),R=!1}else R=uv(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return m.flags&256?(An(m),m):(An(m),null)}return An(m),(m.flags&128)!==0?(m.lanes=g,m):(g=N!==null,c=c!==null&&c.memoizedState!==null,g&&(N=m.child,R=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(R=N.alternate.memoizedState.cachePool.pool),U=null,N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(U=N.memoizedState.cachePool.pool),U!==R&&(N.flags|=2048)),g!==c&&g&&(m.child.flags|=8192),lx(m,m.updateQueue),pa(m),null);case 4:return Z(),c===null&&wy(m.stateNode.containerInfo),pa(m),null;case 10:return hl(m.type),pa(m),null;case 19:if(M(za),N=m.memoizedState,N===null)return pa(m),null;if(R=(m.flags&128)!==0,U=N.rendering,U===null)if(R)J0(N,!1);else{if(Ra!==0||c!==null&&(c.flags&128)!==0)for(c=m.child;c!==null;){if(U=Qh(c),U!==null){for(m.flags|=128,J0(N,!1),c=U.updateQueue,m.updateQueue=c,lx(m,c),m.subtreeFlags=0,c=g,g=m.child;g!==null;)aT(g,c),g=g.sibling;return X(za,za.current&1|2),Es&&ml(m,N.treeForkCount),m.child}c=c.sibling}N.tail!==null&&Ae()>mx&&(m.flags|=128,R=!0,J0(N,!1),m.lanes=4194304)}else{if(!R)if(c=Qh(U),c!==null){if(m.flags|=128,R=!0,c=c.updateQueue,m.updateQueue=c,lx(m,c),J0(N,!0),N.tail===null&&N.tailMode==="hidden"&&!U.alternate&&!Es)return pa(m),null}else 2*Ae()-N.renderingStartTime>mx&&g!==536870912&&(m.flags|=128,R=!0,J0(N,!1),m.lanes=4194304);N.isBackwards?(U.sibling=m.child,m.child=U):(c=N.last,c!==null?c.sibling=U:m.child=U,N.last=U)}return N.tail!==null?(c=N.tail,N.rendering=c,N.tail=c.sibling,N.renderingStartTime=Ae(),c.sibling=null,g=za.current,X(za,R?g&1|2:g&1),Es&&ml(m,N.treeForkCount),c):(pa(m),null);case 22:case 23:return An(m),Sv(),N=m.memoizedState!==null,c!==null?c.memoizedState!==null!==N&&(m.flags|=8192):N&&(m.flags|=8192),N?(g&536870912)!==0&&(m.flags&128)===0&&(pa(m),m.subtreeFlags&6&&(m.flags|=8192)):pa(m),g=m.updateQueue,g!==null&&lx(m,g.retryQueue),g=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),N=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),N!==g&&(m.flags|=2048),c!==null&&M(bc),null;case 24:return g=null,c!==null&&(g=c.memoizedState.cache),m.memoizedState.cache!==g&&(m.flags|=2048),hl(Ga),pa(m),null;case 25:return null;case 30:return null}throw Error(r(156,m.tag))}function y$(c,m){switch(cv(m),m.tag){case 1:return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 3:return hl(Ga),Z(),c=m.flags,(c&65536)!==0&&(c&128)===0?(m.flags=c&-65537|128,m):null;case 26:case 27:case 5:return re(m),null;case 31:if(m.memoizedState!==null){if(An(m),m.alternate===null)throw Error(r(340));xc()}return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 13:if(An(m),c=m.memoizedState,c!==null&&c.dehydrated!==null){if(m.alternate===null)throw Error(r(340));xc()}return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 19:return M(za),null;case 4:return Z(),null;case 10:return hl(m.type),null;case 22:case 23:return An(m),Sv(),c!==null&&M(bc),c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 24:return hl(Ga),null;case 25:return null;default:return null}}function k_(c,m){switch(cv(m),m.tag){case 3:hl(Ga),Z();break;case 26:case 27:case 5:re(m);break;case 4:Z();break;case 31:m.memoizedState!==null&&An(m);break;case 13:An(m);break;case 19:M(za);break;case 10:hl(m.type);break;case 22:case 23:An(m),Sv(),c!==null&&M(bc);break;case 24:hl(Ga)}}function Y0(c,m){try{var g=m.updateQueue,N=g!==null?g.lastEffect:null;if(N!==null){var R=N.next;g=R;do{if((g.tag&c)===c){N=void 0;var U=g.create,ae=g.inst;N=U(),ae.destroy=N}g=g.next}while(g!==R)}}catch(me){Ys(m,m.return,me)}}function uo(c,m,g){try{var N=m.updateQueue,R=N!==null?N.lastEffect:null;if(R!==null){var U=R.next;N=U;do{if((N.tag&c)===c){var ae=N.inst,me=ae.destroy;if(me!==void 0){ae.destroy=void 0,R=m;var Te=g,Be=me;try{Be()}catch(Xe){Ys(R,Te,Xe)}}}N=N.next}while(N!==U)}}catch(Xe){Ys(m,m.return,Xe)}}function O_(c){var m=c.updateQueue;if(m!==null){var g=c.stateNode;try{NT(m,g)}catch(N){Ys(c,c.return,N)}}}function I_(c,m,g){g.props=wc(c.type,c.memoizedProps),g.state=c.memoizedState;try{g.componentWillUnmount()}catch(N){Ys(c,m,N)}}function X0(c,m){try{var g=c.ref;if(g!==null){switch(c.tag){case 26:case 27:case 5:var N=c.stateNode;break;case 30:N=c.stateNode;break;default:N=c.stateNode}typeof g=="function"?c.refCleanup=g(N):g.current=N}}catch(R){Ys(c,m,R)}}function $i(c,m){var g=c.ref,N=c.refCleanup;if(g!==null)if(typeof N=="function")try{N()}catch(R){Ys(c,m,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(R){Ys(c,m,R)}else g.current=null}function R_(c){var m=c.type,g=c.memoizedProps,N=c.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":g.autoFocus&&N.focus();break e;case"img":g.src?N.src=g.src:g.srcSet&&(N.srcset=g.srcSet)}}catch(R){Ys(c,c.return,R)}}function sy(c,m,g){try{var N=c.stateNode;$$(N,c.type,g,m),N[je]=m}catch(R){Ys(c,c.return,R)}}function P_(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&bo(c.type)||c.tag===4}function ay(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||P_(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&bo(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ry(c,m,g){var N=c.tag;if(N===5||N===6)c=c.stateNode,m?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(c,m):(m=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,m.appendChild(c),g=g._reactRootContainer,g!=null||m.onclick!==null||(m.onclick=cl));else if(N!==4&&(N===27&&bo(c.type)&&(g=c.stateNode,m=null),c=c.child,c!==null))for(ry(c,m,g),c=c.sibling;c!==null;)ry(c,m,g),c=c.sibling}function ox(c,m,g){var N=c.tag;if(N===5||N===6)c=c.stateNode,m?g.insertBefore(c,m):g.appendChild(c);else if(N!==4&&(N===27&&bo(c.type)&&(g=c.stateNode),c=c.child,c!==null))for(ox(c,m,g),c=c.sibling;c!==null;)ox(c,m,g),c=c.sibling}function D_(c){var m=c.stateNode,g=c.memoizedProps;try{for(var N=c.type,R=m.attributes;R.length;)m.removeAttributeNode(R[0]);Cr(m,N,g),m[ge]=c,m[je]=g}catch(U){Ys(c,c.return,U)}}var vl=!1,Ka=!1,ny=!1,M_=typeof WeakSet=="function"?WeakSet:Set,pr=null;function N$(c,m){if(c=c.containerInfo,Ey=_x,c=QC(c),Xb(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var N=g.getSelection&&g.getSelection();if(N&&N.rangeCount!==0){g=N.anchorNode;var R=N.anchorOffset,U=N.focusNode;N=N.focusOffset;try{g.nodeType,U.nodeType}catch{g=null;break e}var ae=0,me=-1,Te=-1,Be=0,Xe=0,st=c,He=null;t:for(;;){for(var We;st!==g||R!==0&&st.nodeType!==3||(me=ae+R),st!==U||N!==0&&st.nodeType!==3||(Te=ae+N),st.nodeType===3&&(ae+=st.nodeValue.length),(We=st.firstChild)!==null;)He=st,st=We;for(;;){if(st===c)break t;if(He===g&&++Be===R&&(me=ae),He===U&&++Xe===N&&(Te=ae),(We=st.nextSibling)!==null)break;st=He,He=st.parentNode}st=We}g=me===-1||Te===-1?null:{start:me,end:Te}}else g=null}g=g||{start:0,end:0}}else g=null;for(Cy={focusedElem:c,selectionRange:g},_x=!1,pr=m;pr!==null;)if(m=pr,c=m.child,(m.subtreeFlags&1028)!==0&&c!==null)c.return=m,pr=c;else for(;pr!==null;){switch(m=pr,U=m.alternate,c=m.flags,m.tag){case 0:if((c&4)!==0&&(c=m.updateQueue,c=c!==null?c.events:null,c!==null))for(g=0;g<c.length;g++)R=c[g],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&U!==null){c=void 0,g=m,R=U.memoizedProps,U=U.memoizedState,N=g.stateNode;try{var St=wc(g.type,R);c=N.getSnapshotBeforeUpdate(St,U),N.__reactInternalSnapshotBeforeUpdate=c}catch($t){Ys(g,g.return,$t)}}break;case 3:if((c&1024)!==0){if(c=m.stateNode.containerInfo,g=c.nodeType,g===9)ky(c);else if(g===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":ky(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=m.sibling,c!==null){c.return=m.return,pr=c;break}pr=m.return}}function L_(c,m,g){var N=g.flags;switch(g.tag){case 0:case 11:case 15:Nl(c,g),N&4&&Y0(5,g);break;case 1:if(Nl(c,g),N&4)if(c=g.stateNode,m===null)try{c.componentDidMount()}catch(ae){Ys(g,g.return,ae)}else{var R=wc(g.type,m.memoizedProps);m=m.memoizedState;try{c.componentDidUpdate(R,m,c.__reactInternalSnapshotBeforeUpdate)}catch(ae){Ys(g,g.return,ae)}}N&64&&O_(g),N&512&&X0(g,g.return);break;case 3:if(Nl(c,g),N&64&&(c=g.updateQueue,c!==null)){if(m=null,g.child!==null)switch(g.child.tag){case 27:case 5:m=g.child.stateNode;break;case 1:m=g.child.stateNode}try{NT(c,m)}catch(ae){Ys(g,g.return,ae)}}break;case 27:m===null&&N&4&&D_(g);case 26:case 5:Nl(c,g),m===null&&N&4&&R_(g),N&512&&X0(g,g.return);break;case 12:Nl(c,g);break;case 31:Nl(c,g),N&4&&z_(c,g);break;case 13:Nl(c,g),N&4&&B_(c,g),N&64&&(c=g.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(g=k$.bind(null,g),J$(c,g))));break;case 22:if(N=g.memoizedState!==null||vl,!N){m=m!==null&&m.memoizedState!==null||Ka,R=vl;var U=Ka;vl=N,(Ka=m)&&!U?jl(c,g,(g.subtreeFlags&8772)!==0):Nl(c,g),vl=R,Ka=U}break;case 30:break;default:Nl(c,g)}}function F_(c){var m=c.alternate;m!==null&&(c.alternate=null,F_(m)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(m=c.stateNode,m!==null&&rt(m)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var wa=null,on=!1;function yl(c,m,g){for(g=g.child;g!==null;)U_(c,m,g),g=g.sibling}function U_(c,m,g){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(ve,g)}catch{}switch(g.tag){case 26:Ka||$i(g,m),yl(c,m,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Ka||$i(g,m);var N=wa,R=on;bo(g.type)&&(wa=g.stateNode,on=!1),yl(c,m,g),lm(g.stateNode),wa=N,on=R;break;case 5:Ka||$i(g,m);case 6:if(N=wa,R=on,wa=null,yl(c,m,g),wa=N,on=R,wa!==null)if(on)try{(wa.nodeType===9?wa.body:wa.nodeName==="HTML"?wa.ownerDocument.body:wa).removeChild(g.stateNode)}catch(U){Ys(g,m,U)}else try{wa.removeChild(g.stateNode)}catch(U){Ys(g,m,U)}break;case 18:wa!==null&&(on?(c=wa,Ok(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,g.stateNode),su(c)):Ok(wa,g.stateNode));break;case 4:N=wa,R=on,wa=g.stateNode.containerInfo,on=!0,yl(c,m,g),wa=N,on=R;break;case 0:case 11:case 14:case 15:uo(2,g,m),Ka||uo(4,g,m),yl(c,m,g);break;case 1:Ka||($i(g,m),N=g.stateNode,typeof N.componentWillUnmount=="function"&&I_(g,m,N)),yl(c,m,g);break;case 21:yl(c,m,g);break;case 22:Ka=(N=Ka)||g.memoizedState!==null,yl(c,m,g),Ka=N;break;default:yl(c,m,g)}}function z_(c,m){if(m.memoizedState===null&&(c=m.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{su(c)}catch(g){Ys(m,m.return,g)}}}function B_(c,m){if(m.memoizedState===null&&(c=m.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{su(c)}catch(g){Ys(m,m.return,g)}}function j$(c){switch(c.tag){case 31:case 13:case 19:var m=c.stateNode;return m===null&&(m=c.stateNode=new M_),m;case 22:return c=c.stateNode,m=c._retryCache,m===null&&(m=c._retryCache=new M_),m;default:throw Error(r(435,c.tag))}}function cx(c,m){var g=j$(c);m.forEach(function(N){if(!g.has(N)){g.add(N);var R=O$.bind(null,c,N);N.then(R,R)}})}function cn(c,m){var g=m.deletions;if(g!==null)for(var N=0;N<g.length;N++){var R=g[N],U=c,ae=m,me=ae;e:for(;me!==null;){switch(me.tag){case 27:if(bo(me.type)){wa=me.stateNode,on=!1;break e}break;case 5:wa=me.stateNode,on=!1;break e;case 3:case 4:wa=me.stateNode.containerInfo,on=!0;break e}me=me.return}if(wa===null)throw Error(r(160));U_(U,ae,R),wa=null,on=!1,U=R.alternate,U!==null&&(U.return=null),R.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)$_(m,c),m=m.sibling}var ji=null;function $_(c,m){var g=c.alternate,N=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:cn(m,c),dn(c),N&4&&(uo(3,c,c.return),Y0(3,c),uo(5,c,c.return));break;case 1:cn(m,c),dn(c),N&512&&(Ka||g===null||$i(g,g.return)),N&64&&vl&&(c=c.updateQueue,c!==null&&(N=c.callbacks,N!==null&&(g=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=g===null?N:g.concat(N))));break;case 26:var R=ji;if(cn(m,c),dn(c),N&512&&(Ka||g===null||$i(g,g.return)),N&4){var U=g!==null?g.memoizedState:null;if(N=c.memoizedState,g===null)if(N===null)if(c.stateNode===null){e:{N=c.type,g=c.memoizedProps,R=R.ownerDocument||R;t:switch(N){case"title":U=R.getElementsByTagName("title")[0],(!U||U[qe]||U[ge]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=R.createElement(N),R.head.insertBefore(U,R.querySelector("head > title"))),Cr(U,N,g),U[ge]=c,wt(U),N=U;break e;case"link":var ae=$k("link","href",R).get(N+(g.href||""));if(ae){for(var me=0;me<ae.length;me++)if(U=ae[me],U.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&U.getAttribute("rel")===(g.rel==null?null:g.rel)&&U.getAttribute("title")===(g.title==null?null:g.title)&&U.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){ae.splice(me,1);break t}}U=R.createElement(N),Cr(U,N,g),R.head.appendChild(U);break;case"meta":if(ae=$k("meta","content",R).get(N+(g.content||""))){for(me=0;me<ae.length;me++)if(U=ae[me],U.getAttribute("content")===(g.content==null?null:""+g.content)&&U.getAttribute("name")===(g.name==null?null:g.name)&&U.getAttribute("property")===(g.property==null?null:g.property)&&U.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&U.getAttribute("charset")===(g.charSet==null?null:g.charSet)){ae.splice(me,1);break t}}U=R.createElement(N),Cr(U,N,g),R.head.appendChild(U);break;default:throw Error(r(468,N))}U[ge]=c,wt(U),N=U}c.stateNode=N}else qk(R,c.type,c.stateNode);else c.stateNode=Bk(R,N,c.memoizedProps);else U!==N?(U===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):U.count--,N===null?qk(R,c.type,c.stateNode):Bk(R,N,c.memoizedProps)):N===null&&c.stateNode!==null&&sy(c,c.memoizedProps,g.memoizedProps)}break;case 27:cn(m,c),dn(c),N&512&&(Ka||g===null||$i(g,g.return)),g!==null&&N&4&&sy(c,c.memoizedProps,g.memoizedProps);break;case 5:if(cn(m,c),dn(c),N&512&&(Ka||g===null||$i(g,g.return)),c.flags&32){R=c.stateNode;try{Ad(R,"")}catch(St){Ys(c,c.return,St)}}N&4&&c.stateNode!=null&&(R=c.memoizedProps,sy(c,R,g!==null?g.memoizedProps:R)),N&1024&&(ny=!0);break;case 6:if(cn(m,c),dn(c),N&4){if(c.stateNode===null)throw Error(r(162));N=c.memoizedProps,g=c.stateNode;try{g.nodeValue=N}catch(St){Ys(c,c.return,St)}}break;case 3:if(Ax=null,R=ji,ji=wx(m.containerInfo),cn(m,c),ji=R,dn(c),N&4&&g!==null&&g.memoizedState.isDehydrated)try{su(m.containerInfo)}catch(St){Ys(c,c.return,St)}ny&&(ny=!1,q_(c));break;case 4:N=ji,ji=wx(c.stateNode.containerInfo),cn(m,c),dn(c),ji=N;break;case 12:cn(m,c),dn(c);break;case 31:cn(m,c),dn(c),N&4&&(N=c.updateQueue,N!==null&&(c.updateQueue=null,cx(c,N)));break;case 13:cn(m,c),dn(c),c.child.flags&8192&&c.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(ux=Ae()),N&4&&(N=c.updateQueue,N!==null&&(c.updateQueue=null,cx(c,N)));break;case 22:R=c.memoizedState!==null;var Te=g!==null&&g.memoizedState!==null,Be=vl,Xe=Ka;if(vl=Be||R,Ka=Xe||Te,cn(m,c),Ka=Xe,vl=Be,dn(c),N&8192)e:for(m=c.stateNode,m._visibility=R?m._visibility&-2:m._visibility|1,R&&(g===null||Te||vl||Ka||Sc(c)),g=null,m=c;;){if(m.tag===5||m.tag===26){if(g===null){Te=g=m;try{if(U=Te.stateNode,R)ae=U.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{me=Te.stateNode;var st=Te.memoizedProps.style,He=st!=null&&st.hasOwnProperty("display")?st.display:null;me.style.display=He==null||typeof He=="boolean"?"":(""+He).trim()}}catch(St){Ys(Te,Te.return,St)}}}else if(m.tag===6){if(g===null){Te=m;try{Te.stateNode.nodeValue=R?"":Te.memoizedProps}catch(St){Ys(Te,Te.return,St)}}}else if(m.tag===18){if(g===null){Te=m;try{var We=Te.stateNode;R?Ik(We,!0):Ik(Te.stateNode,!1)}catch(St){Ys(Te,Te.return,St)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===c)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break e;for(;m.sibling===null;){if(m.return===null||m.return===c)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}N&4&&(N=c.updateQueue,N!==null&&(g=N.retryQueue,g!==null&&(N.retryQueue=null,cx(c,g))));break;case 19:cn(m,c),dn(c),N&4&&(N=c.updateQueue,N!==null&&(c.updateQueue=null,cx(c,N)));break;case 30:break;case 21:break;default:cn(m,c),dn(c)}}function dn(c){var m=c.flags;if(m&2){try{for(var g,N=c.return;N!==null;){if(P_(N)){g=N;break}N=N.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var R=g.stateNode,U=ay(c);ox(c,U,R);break;case 5:var ae=g.stateNode;g.flags&32&&(Ad(ae,""),g.flags&=-33);var me=ay(c);ox(c,me,ae);break;case 3:case 4:var Te=g.stateNode.containerInfo,Be=ay(c);ry(c,Be,Te);break;default:throw Error(r(161))}}catch(Xe){Ys(c,c.return,Xe)}c.flags&=-3}m&4096&&(c.flags&=-4097)}function q_(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var m=c;q_(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),c=c.sibling}}function Nl(c,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)L_(c,m.alternate,m),m=m.sibling}function Sc(c){for(c=c.child;c!==null;){var m=c;switch(m.tag){case 0:case 11:case 14:case 15:uo(4,m,m.return),Sc(m);break;case 1:$i(m,m.return);var g=m.stateNode;typeof g.componentWillUnmount=="function"&&I_(m,m.return,g),Sc(m);break;case 27:lm(m.stateNode);case 26:case 5:$i(m,m.return),Sc(m);break;case 22:m.memoizedState===null&&Sc(m);break;case 30:Sc(m);break;default:Sc(m)}c=c.sibling}}function jl(c,m,g){for(g=g&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var N=m.alternate,R=c,U=m,ae=U.flags;switch(U.tag){case 0:case 11:case 15:jl(R,U,g),Y0(4,U);break;case 1:if(jl(R,U,g),N=U,R=N.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Be){Ys(N,N.return,Be)}if(N=U,R=N.updateQueue,R!==null){var me=N.stateNode;try{var Te=R.shared.hiddenCallbacks;if(Te!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Te.length;R++)yT(Te[R],me)}catch(Be){Ys(N,N.return,Be)}}g&&ae&64&&O_(U),X0(U,U.return);break;case 27:D_(U);case 26:case 5:jl(R,U,g),g&&N===null&&ae&4&&R_(U),X0(U,U.return);break;case 12:jl(R,U,g);break;case 31:jl(R,U,g),g&&ae&4&&z_(R,U);break;case 13:jl(R,U,g),g&&ae&4&&B_(R,U);break;case 22:U.memoizedState===null&&jl(R,U,g),X0(U,U.return);break;case 30:break;default:jl(R,U,g)}m=m.sibling}}function iy(c,m){var g=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),c=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(c=m.memoizedState.cachePool.pool),c!==g&&(c!=null&&c.refCount++,g!=null&&F0(g))}function ly(c,m){c=null,m.alternate!==null&&(c=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==c&&(m.refCount++,c!=null&&F0(c))}function wi(c,m,g,N){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)H_(c,m,g,N),m=m.sibling}function H_(c,m,g,N){var R=m.flags;switch(m.tag){case 0:case 11:case 15:wi(c,m,g,N),R&2048&&Y0(9,m);break;case 1:wi(c,m,g,N);break;case 3:wi(c,m,g,N),R&2048&&(c=null,m.alternate!==null&&(c=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==c&&(m.refCount++,c!=null&&F0(c)));break;case 12:if(R&2048){wi(c,m,g,N),c=m.stateNode;try{var U=m.memoizedProps,ae=U.id,me=U.onPostCommit;typeof me=="function"&&me(ae,m.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Te){Ys(m,m.return,Te)}}else wi(c,m,g,N);break;case 31:wi(c,m,g,N);break;case 13:wi(c,m,g,N);break;case 23:break;case 22:U=m.stateNode,ae=m.alternate,m.memoizedState!==null?U._visibility&2?wi(c,m,g,N):Z0(c,m):U._visibility&2?wi(c,m,g,N):(U._visibility|=2,Vd(c,m,g,N,(m.subtreeFlags&10256)!==0||!1)),R&2048&&iy(ae,m);break;case 24:wi(c,m,g,N),R&2048&&ly(m.alternate,m);break;default:wi(c,m,g,N)}}function Vd(c,m,g,N,R){for(R=R&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var U=c,ae=m,me=g,Te=N,Be=ae.flags;switch(ae.tag){case 0:case 11:case 15:Vd(U,ae,me,Te,R),Y0(8,ae);break;case 23:break;case 22:var Xe=ae.stateNode;ae.memoizedState!==null?Xe._visibility&2?Vd(U,ae,me,Te,R):Z0(U,ae):(Xe._visibility|=2,Vd(U,ae,me,Te,R)),R&&Be&2048&&iy(ae.alternate,ae);break;case 24:Vd(U,ae,me,Te,R),R&&Be&2048&&ly(ae.alternate,ae);break;default:Vd(U,ae,me,Te,R)}m=m.sibling}}function Z0(c,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var g=c,N=m,R=N.flags;switch(N.tag){case 22:Z0(g,N),R&2048&&iy(N.alternate,N);break;case 24:Z0(g,N),R&2048&&ly(N.alternate,N);break;default:Z0(g,N)}m=m.sibling}}var em=8192;function Gd(c,m,g){if(c.subtreeFlags&em)for(c=c.child;c!==null;)V_(c,m,g),c=c.sibling}function V_(c,m,g){switch(c.tag){case 26:Gd(c,m,g),c.flags&em&&c.memoizedState!==null&&oq(g,ji,c.memoizedState,c.memoizedProps);break;case 5:Gd(c,m,g);break;case 3:case 4:var N=ji;ji=wx(c.stateNode.containerInfo),Gd(c,m,g),ji=N;break;case 22:c.memoizedState===null&&(N=c.alternate,N!==null&&N.memoizedState!==null?(N=em,em=16777216,Gd(c,m,g),em=N):Gd(c,m,g));break;default:Gd(c,m,g)}}function G_(c){var m=c.alternate;if(m!==null&&(c=m.child,c!==null)){m.child=null;do m=c.sibling,c.sibling=null,c=m;while(c!==null)}}function tm(c){var m=c.deletions;if((c.flags&16)!==0){if(m!==null)for(var g=0;g<m.length;g++){var N=m[g];pr=N,Q_(N,c)}G_(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)W_(c),c=c.sibling}function W_(c){switch(c.tag){case 0:case 11:case 15:tm(c),c.flags&2048&&uo(9,c,c.return);break;case 3:tm(c);break;case 12:tm(c);break;case 22:var m=c.stateNode;c.memoizedState!==null&&m._visibility&2&&(c.return===null||c.return.tag!==13)?(m._visibility&=-3,dx(c)):tm(c);break;default:tm(c)}}function dx(c){var m=c.deletions;if((c.flags&16)!==0){if(m!==null)for(var g=0;g<m.length;g++){var N=m[g];pr=N,Q_(N,c)}G_(c)}for(c=c.child;c!==null;){switch(m=c,m.tag){case 0:case 11:case 15:uo(8,m,m.return),dx(m);break;case 22:g=m.stateNode,g._visibility&2&&(g._visibility&=-3,dx(m));break;default:dx(m)}c=c.sibling}}function Q_(c,m){for(;pr!==null;){var g=pr;switch(g.tag){case 0:case 11:case 15:uo(8,g,m);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var N=g.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:F0(g.memoizedState.cache)}if(N=g.child,N!==null)N.return=g,pr=N;else e:for(g=c;pr!==null;){N=pr;var R=N.sibling,U=N.return;if(F_(N),N===g){pr=null;break e}if(R!==null){R.return=U,pr=R;break e}pr=U}}}var w$={getCacheForType:function(c){var m=Ar(Ga),g=m.data.get(c);return g===void 0&&(g=c(),m.data.set(c,g)),g},cacheSignal:function(){return Ar(Ga).controller.signal}},S$=typeof WeakMap=="function"?WeakMap:Map,qs=0,ua=null,bs=null,js=0,Js=0,En=null,mo=!1,Wd=!1,oy=!1,wl=0,Ra=0,fo=0,Ac=0,cy=0,Cn=0,Qd=0,sm=null,un=null,dy=!1,ux=0,K_=0,mx=1/0,fx=null,ho=null,nr=0,xo=null,Kd=null,Sl=0,uy=0,my=null,J_=null,am=0,fy=null;function Tn(){return(qs&2)!==0&&js!==0?js&-js:P.T!==null?vy():de()}function Y_(){if(Cn===0)if((js&536870912)===0||Es){var c=Ts;Ts<<=1,(Ts&3932160)===0&&(Ts=262144),Cn=c}else Cn=536870912;return c=Sn.current,c!==null&&(c.flags|=32),Cn}function mn(c,m,g){(c===ua&&(Js===2||Js===9)||c.cancelPendingCommit!==null)&&(Jd(c,0),po(c,js,Cn,!1)),ss(c,g),((qs&2)===0||c!==ua)&&(c===ua&&((qs&2)===0&&(Ac|=g),Ra===4&&po(c,js,Cn,!1)),qi(c))}function X_(c,m,g){if((qs&6)!==0)throw Error(r(327));var N=!g&&(m&127)===0&&(m&c.expiredLanes)===0||Xt(c,m),R=N?C$(c,m):xy(c,m,!0),U=N;do{if(R===0){Wd&&!N&&po(c,m,0,!1);break}else{if(g=c.current.alternate,U&&!A$(g)){R=xy(c,m,!1),U=!1;continue}if(R===2){if(U=m,c.errorRecoveryDisabledLanes&U)var ae=0;else ae=c.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){m=ae;e:{var me=c;R=sm;var Te=me.current.memoizedState.isDehydrated;if(Te&&(Jd(me,ae).flags|=256),ae=xy(me,ae,!1),ae!==2){if(oy&&!Te){me.errorRecoveryDisabledLanes|=U,Ac|=U,R=4;break e}U=un,un=R,U!==null&&(un===null?un=U:un.push.apply(un,U))}R=ae}if(U=!1,R!==2)continue}}if(R===1){Jd(c,0),po(c,m,0,!0);break}e:{switch(N=c,U=R,U){case 0:case 1:throw Error(r(345));case 4:if((m&4194048)!==m)break;case 6:po(N,m,Cn,!mo);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if((m&62914560)===m&&(R=ux+300-Ae(),10<R)){if(po(N,m,Cn,!mo),ft(N,0,!0)!==0)break e;Sl=m,N.timeoutHandle=_k(Z_.bind(null,N,g,un,fx,dy,m,Cn,Ac,Qd,mo,U,"Throttled",-0,0),R);break e}Z_(N,g,un,fx,dy,m,Cn,Ac,Qd,mo,U,null,-0,0)}}break}while(!0);qi(c)}function Z_(c,m,g,N,R,U,ae,me,Te,Be,Xe,st,He,We){if(c.timeoutHandle=-1,st=m.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cl},V_(m,U,st);var St=(U&62914560)===U?ux-Ae():(U&4194048)===U?K_-Ae():0;if(St=cq(st,St),St!==null){Sl=U,c.cancelPendingCommit=St(lk.bind(null,c,m,U,g,N,R,ae,me,Te,Xe,st,null,He,We)),po(c,U,ae,!Be);return}}lk(c,m,U,g,N,R,ae,me,Te)}function A$(c){for(var m=c;;){var g=m.tag;if((g===0||g===11||g===15)&&m.flags&16384&&(g=m.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var N=0;N<g.length;N++){var R=g[N],U=R.getSnapshot;R=R.value;try{if(!jn(U(),R))return!1}catch{return!1}}if(g=m.child,m.subtreeFlags&16384&&g!==null)g.return=m,m=g;else{if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function po(c,m,g,N){m&=~cy,m&=~Ac,c.suspendedLanes|=m,c.pingedLanes&=~m,N&&(c.warmLanes|=m),N=c.expirationTimes;for(var R=m;0<R;){var U=31-le(R),ae=1<<U;N[U]=-1,R&=~ae}g!==0&&Ps(c,g,m)}function hx(){return(qs&6)===0?(rm(0),!1):!0}function hy(){if(bs!==null){if(Js===0)var c=bs.return;else c=bs,fl=pc=null,kv(c),zd=null,z0=0,c=bs;for(;c!==null;)k_(c.alternate,c),c=c.return;bs=null}}function Jd(c,m){var g=c.timeoutHandle;g!==-1&&(c.timeoutHandle=-1,V$(g)),g=c.cancelPendingCommit,g!==null&&(c.cancelPendingCommit=null,g()),Sl=0,hy(),ua=c,bs=g=ul(c.current,null),js=m,Js=0,En=null,mo=!1,Wd=Xt(c,m),oy=!1,Qd=Cn=cy=Ac=fo=Ra=0,un=sm=null,dy=!1,(m&8)!==0&&(m|=m&32);var N=c.entangledLanes;if(N!==0)for(c=c.entanglements,N&=m;0<N;){var R=31-le(N),U=1<<R;m|=c[R],N&=~U}return wl=m,Dh(),g}function ek(c,m){as=null,P.H=Q0,m===Ud||m===qh?(m=pT(),Js=3):m===bv?(m=pT(),Js=4):Js=m===Gv?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,En=m,bs===null&&(Ra=1,ax(c,Hn(m,c.current)))}function tk(){var c=Sn.current;return c===null?!0:(js&4194048)===js?Qn===null:(js&62914560)===js||(js&536870912)!==0?c===Qn:!1}function sk(){var c=P.H;return P.H=Q0,c===null?Q0:c}function ak(){var c=P.A;return P.A=w$,c}function xx(){Ra=4,mo||(js&4194048)!==js&&Sn.current!==null||(Wd=!0),(fo&134217727)===0&&(Ac&134217727)===0||ua===null||po(ua,js,Cn,!1)}function xy(c,m,g){var N=qs;qs|=2;var R=sk(),U=ak();(ua!==c||js!==m)&&(fx=null,Jd(c,m)),m=!1;var ae=Ra;e:do try{if(Js!==0&&bs!==null){var me=bs,Te=En;switch(Js){case 8:hy(),ae=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(m=!0);var Be=Js;if(Js=0,En=null,Yd(c,me,Te,Be),g&&Wd){ae=0;break e}break;default:Be=Js,Js=0,En=null,Yd(c,me,Te,Be)}}E$(),ae=Ra;break}catch(Xe){ek(c,Xe)}while(!0);return m&&c.shellSuspendCounter++,fl=pc=null,qs=N,P.H=R,P.A=U,bs===null&&(ua=null,js=0,Dh()),ae}function E$(){for(;bs!==null;)rk(bs)}function C$(c,m){var g=qs;qs|=2;var N=sk(),R=ak();ua!==c||js!==m?(fx=null,mx=Ae()+500,Jd(c,m)):Wd=Xt(c,m);e:do try{if(Js!==0&&bs!==null){m=bs;var U=En;t:switch(Js){case 1:Js=0,En=null,Yd(c,m,U,1);break;case 2:case 9:if(hT(U)){Js=0,En=null,nk(m);break}m=function(){Js!==2&&Js!==9||ua!==c||(Js=7),qi(c)},U.then(m,m);break e;case 3:Js=7;break e;case 4:Js=5;break e;case 7:hT(U)?(Js=0,En=null,nk(m)):(Js=0,En=null,Yd(c,m,U,7));break;case 5:var ae=null;switch(bs.tag){case 26:ae=bs.memoizedState;case 5:case 27:var me=bs;if(ae?Hk(ae):me.stateNode.complete){Js=0,En=null;var Te=me.sibling;if(Te!==null)bs=Te;else{var Be=me.return;Be!==null?(bs=Be,px(Be)):bs=null}break t}}Js=0,En=null,Yd(c,m,U,5);break;case 6:Js=0,En=null,Yd(c,m,U,6);break;case 8:hy(),Ra=6;break e;default:throw Error(r(462))}}T$();break}catch(Xe){ek(c,Xe)}while(!0);return fl=pc=null,P.H=N,P.A=R,qs=g,bs!==null?0:(ua=null,js=0,Dh(),Ra)}function T$(){for(;bs!==null&&!_e();)rk(bs)}function rk(c){var m=T_(c.alternate,c,wl);c.memoizedProps=c.pendingProps,m===null?px(c):bs=m}function nk(c){var m=c,g=m.alternate;switch(m.tag){case 15:case 0:m=j_(g,m,m.pendingProps,m.type,void 0,js);break;case 11:m=j_(g,m,m.pendingProps,m.type.render,m.ref,js);break;case 5:kv(m);default:k_(g,m),m=bs=aT(m,wl),m=T_(g,m,wl)}c.memoizedProps=c.pendingProps,m===null?px(c):bs=m}function Yd(c,m,g,N){fl=pc=null,kv(m),zd=null,z0=0;var R=m.return;try{if(p$(c,R,m,g,js)){Ra=1,ax(c,Hn(g,c.current)),bs=null;return}}catch(U){if(R!==null)throw bs=R,U;Ra=1,ax(c,Hn(g,c.current)),bs=null;return}m.flags&32768?(Es||N===1?c=!0:Wd||(js&536870912)!==0?c=!1:(mo=c=!0,(N===2||N===9||N===3||N===6)&&(N=Sn.current,N!==null&&N.tag===13&&(N.flags|=16384))),ik(m,c)):px(m)}function px(c){var m=c;do{if((m.flags&32768)!==0){ik(m,mo);return}c=m.return;var g=v$(m.alternate,m,wl);if(g!==null){bs=g;return}if(m=m.sibling,m!==null){bs=m;return}bs=m=c}while(m!==null);Ra===0&&(Ra=5)}function ik(c,m){do{var g=y$(c.alternate,c);if(g!==null){g.flags&=32767,bs=g;return}if(g=c.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!m&&(c=c.sibling,c!==null)){bs=c;return}bs=c=g}while(c!==null);Ra=6,bs=null}function lk(c,m,g,N,R,U,ae,me,Te){c.cancelPendingCommit=null;do gx();while(nr!==0);if((qs&6)!==0)throw Error(r(327));if(m!==null){if(m===c.current)throw Error(r(177));if(U=m.lanes|m.childLanes,U|=av,gs(c,g,U,ae,me,Te),c===ua&&(bs=ua=null,js=0),Kd=m,xo=c,Sl=g,uy=U,my=R,J_=N,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,I$(lt,function(){return mk(),null})):(c.callbackNode=null,c.callbackPriority=0),N=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||N){N=P.T,P.T=null,R=G.p,G.p=2,ae=qs,qs|=4;try{N$(c,m,g)}finally{qs=ae,G.p=R,P.T=N}}nr=1,ok(),ck(),dk()}}function ok(){if(nr===1){nr=0;var c=xo,m=Kd,g=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||g){g=P.T,P.T=null;var N=G.p;G.p=2;var R=qs;qs|=4;try{$_(m,c);var U=Cy,ae=QC(c.containerInfo),me=U.focusedElem,Te=U.selectionRange;if(ae!==me&&me&&me.ownerDocument&&WC(me.ownerDocument.documentElement,me)){if(Te!==null&&Xb(me)){var Be=Te.start,Xe=Te.end;if(Xe===void 0&&(Xe=Be),"selectionStart"in me)me.selectionStart=Be,me.selectionEnd=Math.min(Xe,me.value.length);else{var st=me.ownerDocument||document,He=st&&st.defaultView||window;if(He.getSelection){var We=He.getSelection(),St=me.textContent.length,$t=Math.min(Te.start,St),oa=Te.end===void 0?$t:Math.min(Te.end,St);!We.extend&&$t>oa&&(ae=oa,oa=$t,$t=ae);var Pe=GC(me,$t),Oe=GC(me,oa);if(Pe&&Oe&&(We.rangeCount!==1||We.anchorNode!==Pe.node||We.anchorOffset!==Pe.offset||We.focusNode!==Oe.node||We.focusOffset!==Oe.offset)){var ze=st.createRange();ze.setStart(Pe.node,Pe.offset),We.removeAllRanges(),$t>oa?(We.addRange(ze),We.extend(Oe.node,Oe.offset)):(ze.setEnd(Oe.node,Oe.offset),We.addRange(ze))}}}}for(st=[],We=me;We=We.parentNode;)We.nodeType===1&&st.push({element:We,left:We.scrollLeft,top:We.scrollTop});for(typeof me.focus=="function"&&me.focus(),me=0;me<st.length;me++){var tt=st[me];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}_x=!!Ey,Cy=Ey=null}finally{qs=R,G.p=N,P.T=g}}c.current=m,nr=2}}function ck(){if(nr===2){nr=0;var c=xo,m=Kd,g=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||g){g=P.T,P.T=null;var N=G.p;G.p=2;var R=qs;qs|=4;try{L_(c,m.alternate,m)}finally{qs=R,G.p=N,P.T=g}}nr=3}}function dk(){if(nr===4||nr===3){nr=0,Ge();var c=xo,m=Kd,g=Sl,N=J_;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?nr=5:(nr=0,Kd=xo=null,uk(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(ho=null),et(g),m=m.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(ve,m,void 0,(m.current.flags&128)===128)}catch{}if(N!==null){m=P.T,R=G.p,G.p=2,P.T=null;try{for(var U=c.onRecoverableError,ae=0;ae<N.length;ae++){var me=N[ae];U(me.value,{componentStack:me.stack})}}finally{P.T=m,G.p=R}}(Sl&3)!==0&&gx(),qi(c),R=c.pendingLanes,(g&261930)!==0&&(R&42)!==0?c===fy?am++:(am=0,fy=c):am=0,rm(0)}}function uk(c,m){(c.pooledCacheLanes&=m)===0&&(m=c.pooledCache,m!=null&&(c.pooledCache=null,F0(m)))}function gx(){return ok(),ck(),dk(),mk()}function mk(){if(nr!==5)return!1;var c=xo,m=uy;uy=0;var g=et(Sl),N=P.T,R=G.p;try{G.p=32>g?32:g,P.T=null,g=my,my=null;var U=xo,ae=Sl;if(nr=0,Kd=xo=null,Sl=0,(qs&6)!==0)throw Error(r(331));var me=qs;if(qs|=4,W_(U.current),H_(U,U.current,ae,g),qs=me,rm(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(ve,U)}catch{}return!0}finally{G.p=R,P.T=N,uk(c,m)}}function fk(c,m,g){m=Hn(g,m),m=Vv(c.stateNode,m,2),c=lo(c,m,2),c!==null&&(ss(c,2),qi(c))}function Ys(c,m,g){if(c.tag===3)fk(c,c,g);else for(;m!==null;){if(m.tag===3){fk(m,c,g);break}else if(m.tag===1){var N=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(ho===null||!ho.has(N))){c=Hn(g,c),g=h_(2),N=lo(m,g,2),N!==null&&(x_(g,N,m,c),ss(N,2),qi(N));break}}m=m.return}}function py(c,m,g){var N=c.pingCache;if(N===null){N=c.pingCache=new S$;var R=new Set;N.set(m,R)}else R=N.get(m),R===void 0&&(R=new Set,N.set(m,R));R.has(g)||(oy=!0,R.add(g),c=_$.bind(null,c,m,g),m.then(c,c))}function _$(c,m,g){var N=c.pingCache;N!==null&&N.delete(m),c.pingedLanes|=c.suspendedLanes&g,c.warmLanes&=~g,ua===c&&(js&g)===g&&(Ra===4||Ra===3&&(js&62914560)===js&&300>Ae()-ux?(qs&2)===0&&Jd(c,0):cy|=g,Qd===js&&(Qd=0)),qi(c)}function hk(c,m){m===0&&(m=we()),c=fc(c,m),c!==null&&(ss(c,m),qi(c))}function k$(c){var m=c.memoizedState,g=0;m!==null&&(g=m.retryLane),hk(c,g)}function O$(c,m){var g=0;switch(c.tag){case 31:case 13:var N=c.stateNode,R=c.memoizedState;R!==null&&(g=R.retryLane);break;case 19:N=c.stateNode;break;case 22:N=c.stateNode._retryCache;break;default:throw Error(r(314))}N!==null&&N.delete(m),hk(c,g)}function I$(c,m){return Ee(c,m)}var bx=null,Xd=null,gy=!1,vx=!1,by=!1,go=0;function qi(c){c!==Xd&&c.next===null&&(Xd===null?bx=Xd=c:Xd=Xd.next=c),vx=!0,gy||(gy=!0,P$())}function rm(c,m){if(!by&&vx){by=!0;do for(var g=!1,N=bx;N!==null;){if(c!==0){var R=N.pendingLanes;if(R===0)var U=0;else{var ae=N.suspendedLanes,me=N.pingedLanes;U=(1<<31-le(42|c)+1)-1,U&=R&~(ae&~me),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(g=!0,bk(N,U))}else U=js,U=ft(N,N===ua?U:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(U&3)===0||Xt(N,U)||(g=!0,bk(N,U));N=N.next}while(g);by=!1}}function R$(){xk()}function xk(){vx=gy=!1;var c=0;go!==0&&H$()&&(c=go);for(var m=Ae(),g=null,N=bx;N!==null;){var R=N.next,U=pk(N,m);U===0?(N.next=null,g===null?bx=R:g.next=R,R===null&&(Xd=g)):(g=N,(c!==0||(U&3)!==0)&&(vx=!0)),N=R}nr!==0&&nr!==5||rm(c),go!==0&&(go=0)}function pk(c,m){for(var g=c.suspendedLanes,N=c.pingedLanes,R=c.expirationTimes,U=c.pendingLanes&-62914561;0<U;){var ae=31-le(U),me=1<<ae,Te=R[ae];Te===-1?((me&g)===0||(me&N)!==0)&&(R[ae]=As(me,m)):Te<=m&&(c.expiredLanes|=me),U&=~me}if(m=ua,g=js,g=ft(c,c===m?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),N=c.callbackNode,g===0||c===m&&(Js===2||Js===9)||c.cancelPendingCommit!==null)return N!==null&&N!==null&&Ie(N),c.callbackNode=null,c.callbackPriority=0;if((g&3)===0||Xt(c,g)){if(m=g&-g,m===c.callbackPriority)return m;switch(N!==null&&Ie(N),et(g)){case 2:case 8:g=_t;break;case 32:g=lt;break;case 268435456:g=jt;break;default:g=lt}return N=gk.bind(null,c),g=Ee(g,N),c.callbackPriority=m,c.callbackNode=g,m}return N!==null&&N!==null&&Ie(N),c.callbackPriority=2,c.callbackNode=null,2}function gk(c,m){if(nr!==0&&nr!==5)return c.callbackNode=null,c.callbackPriority=0,null;var g=c.callbackNode;if(gx()&&c.callbackNode!==g)return null;var N=js;return N=ft(c,c===ua?N:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),N===0?null:(X_(c,N,m),pk(c,Ae()),c.callbackNode!=null&&c.callbackNode===g?gk.bind(null,c):null)}function bk(c,m){if(gx())return null;X_(c,m,!0)}function P$(){G$(function(){(qs&6)!==0?Ee(Qe,R$):xk()})}function vy(){if(go===0){var c=Ld;c===0&&(c=Ut,Ut<<=1,(Ut&261888)===0&&(Ut=256)),go=c}return go}function vk(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Ch(""+c)}function yk(c,m){var g=m.ownerDocument.createElement("input");return g.name=m.name,g.value=m.value,c.id&&g.setAttribute("form",c.id),m.parentNode.insertBefore(g,m),c=new FormData(c),g.parentNode.removeChild(g),c}function D$(c,m,g,N,R){if(m==="submit"&&g&&g.stateNode===R){var U=vk((R[je]||null).action),ae=N.submitter;ae&&(m=(m=ae[je]||null)?vk(m.formAction):ae.getAttribute("formAction"),m!==null&&(U=m,ae=null));var me=new Oh("action","action",null,N,R);c.push({event:me,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(go!==0){var Te=ae?yk(R,ae):new FormData(R);Uv(g,{pending:!0,data:Te,method:R.method,action:U},null,Te)}}else typeof U=="function"&&(me.preventDefault(),Te=ae?yk(R,ae):new FormData(R),Uv(g,{pending:!0,data:Te,method:R.method,action:U},U,Te))},currentTarget:R}]})}}for(var yy=0;yy<sv.length;yy++){var Ny=sv[yy],M$=Ny.toLowerCase(),L$=Ny[0].toUpperCase()+Ny.slice(1);Ni(M$,"on"+L$)}Ni(YC,"onAnimationEnd"),Ni(XC,"onAnimationIteration"),Ni(ZC,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(ZB,"onTransitionRun"),Ni(e$,"onTransitionStart"),Ni(t$,"onTransitionCancel"),Ni(eT,"onTransitionEnd"),wr("onMouseEnter",["mouseout","mouseover"]),wr("onMouseLeave",["mouseout","mouseover"]),wr("onPointerEnter",["pointerout","pointerover"]),wr("onPointerLeave",["pointerout","pointerover"]),Ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nm));function Nk(c,m){m=(m&4)!==0;for(var g=0;g<c.length;g++){var N=c[g],R=N.event;N=N.listeners;e:{var U=void 0;if(m)for(var ae=N.length-1;0<=ae;ae--){var me=N[ae],Te=me.instance,Be=me.currentTarget;if(me=me.listener,Te!==U&&R.isPropagationStopped())break e;U=me,R.currentTarget=Be;try{U(R)}catch(Xe){Ph(Xe)}R.currentTarget=null,U=Te}else for(ae=0;ae<N.length;ae++){if(me=N[ae],Te=me.instance,Be=me.currentTarget,me=me.listener,Te!==U&&R.isPropagationStopped())break e;U=me,R.currentTarget=Be;try{U(R)}catch(Xe){Ph(Xe)}R.currentTarget=null,U=Te}}}}function vs(c,m){var g=m[Le];g===void 0&&(g=m[Le]=new Set);var N=c+"__bubble";g.has(N)||(jk(m,c,2,!1),g.add(N))}function jy(c,m,g){var N=0;m&&(N|=4),jk(g,c,N,m)}var yx="_reactListening"+Math.random().toString(36).slice(2);function wy(c){if(!c[yx]){c[yx]=!0,na.forEach(function(g){g!=="selectionchange"&&(F$.has(g)||jy(g,!1,c),jy(g,!0,c))});var m=c.nodeType===9?c:c.ownerDocument;m===null||m[yx]||(m[yx]=!0,jy("selectionchange",!1,m))}}function jk(c,m,g,N){switch(Yk(m)){case 2:var R=mq;break;case 8:R=fq;break;default:R=Fy}g=R.bind(null,m,g,c),R=void 0,!qb||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(R=!0),N?R!==void 0?c.addEventListener(m,g,{capture:!0,passive:R}):c.addEventListener(m,g,!0):R!==void 0?c.addEventListener(m,g,{passive:R}):c.addEventListener(m,g,!1)}function Sy(c,m,g,N,R){var U=N;if((m&1)===0&&(m&2)===0&&N!==null)e:for(;;){if(N===null)return;var ae=N.tag;if(ae===3||ae===4){var me=N.stateNode.containerInfo;if(me===R)break;if(ae===4)for(ae=N.return;ae!==null;){var Te=ae.tag;if((Te===3||Te===4)&&ae.stateNode.containerInfo===R)return;ae=ae.return}for(;me!==null;){if(ae=ct(me),ae===null)return;if(Te=ae.tag,Te===5||Te===6||Te===26||Te===27){N=U=ae;continue e}me=me.parentNode}}N=N.return}CC(function(){var Be=U,Xe=Bb(g),st=[];e:{var He=tT.get(c);if(He!==void 0){var We=Oh,St=c;switch(c){case"keypress":if(_h(g)===0)break e;case"keydown":case"keyup":We=OB;break;case"focusin":St="focus",We=Wb;break;case"focusout":St="blur",We=Wb;break;case"beforeblur":case"afterblur":We=Wb;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=kC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=vB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=PB;break;case YC:case XC:case ZC:We=jB;break;case eT:We=MB;break;case"scroll":case"scrollend":We=gB;break;case"wheel":We=FB;break;case"copy":case"cut":case"paste":We=SB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=IC;break;case"toggle":case"beforetoggle":We=zB}var $t=(m&4)!==0,oa=!$t&&(c==="scroll"||c==="scrollend"),Pe=$t?He!==null?He+"Capture":null:He;$t=[];for(var Oe=Be,ze;Oe!==null;){var tt=Oe;if(ze=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||ze===null||Pe===null||(tt=C0(Oe,Pe),tt!=null&&$t.push(im(Oe,tt,ze))),oa)break;Oe=Oe.return}0<$t.length&&(He=new We(He,St,null,g,Xe),st.push({event:He,listeners:$t}))}}if((m&7)===0){e:{if(He=c==="mouseover"||c==="pointerover",We=c==="mouseout"||c==="pointerout",He&&g!==zb&&(St=g.relatedTarget||g.fromElement)&&(ct(St)||St[Se]))break e;if((We||He)&&(He=Xe.window===Xe?Xe:(He=Xe.ownerDocument)?He.defaultView||He.parentWindow:window,We?(St=g.relatedTarget||g.toElement,We=Be,St=St?ct(St):null,St!==null&&(oa=i(St),$t=St.tag,St!==oa||$t!==5&&$t!==27&&$t!==6)&&(St=null)):(We=null,St=Be),We!==St)){if($t=kC,tt="onMouseLeave",Pe="onMouseEnter",Oe="mouse",(c==="pointerout"||c==="pointerover")&&($t=IC,tt="onPointerLeave",Pe="onPointerEnter",Oe="pointer"),oa=We==null?He:it(We),ze=St==null?He:it(St),He=new $t(tt,Oe+"leave",We,g,Xe),He.target=oa,He.relatedTarget=ze,tt=null,ct(Xe)===Be&&($t=new $t(Pe,Oe+"enter",St,g,Xe),$t.target=ze,$t.relatedTarget=oa,tt=$t),oa=tt,We&&St)t:{for($t=U$,Pe=We,Oe=St,ze=0,tt=Pe;tt;tt=$t(tt))ze++;tt=0;for(var Dt=Oe;Dt;Dt=$t(Dt))tt++;for(;0<ze-tt;)Pe=$t(Pe),ze--;for(;0<tt-ze;)Oe=$t(Oe),tt--;for(;ze--;){if(Pe===Oe||Oe!==null&&Pe===Oe.alternate){$t=Pe;break t}Pe=$t(Pe),Oe=$t(Oe)}$t=null}else $t=null;We!==null&&wk(st,He,We,$t,!1),St!==null&&oa!==null&&wk(st,oa,St,$t,!0)}}e:{if(He=Be?it(Be):window,We=He.nodeName&&He.nodeName.toLowerCase(),We==="select"||We==="input"&&He.type==="file")var Ls=zC;else if(FC(He))if(BC)Ls=JB;else{Ls=QB;var Ct=WB}else We=He.nodeName,!We||We.toLowerCase()!=="input"||He.type!=="checkbox"&&He.type!=="radio"?Be&&Ub(Be.elementType)&&(Ls=zC):Ls=KB;if(Ls&&(Ls=Ls(c,Be))){UC(st,Ls,g,Xe);break e}Ct&&Ct(c,He,Be),c==="focusout"&&Be&&He.type==="number"&&Be.memoizedProps.value!=null&&Fb(He,"number",He.value)}switch(Ct=Be?it(Be):window,c){case"focusin":(FC(Ct)||Ct.contentEditable==="true")&&(_d=Ct,Zb=Be,D0=null);break;case"focusout":D0=Zb=_d=null;break;case"mousedown":ev=!0;break;case"contextmenu":case"mouseup":case"dragend":ev=!1,KC(st,g,Xe);break;case"selectionchange":if(XB)break;case"keydown":case"keyup":KC(st,g,Xe)}var ls;if(Kb)e:{switch(c){case"compositionstart":var ws="onCompositionStart";break e;case"compositionend":ws="onCompositionEnd";break e;case"compositionupdate":ws="onCompositionUpdate";break e}ws=void 0}else Td?MC(c,g)&&(ws="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(ws="onCompositionStart");ws&&(RC&&g.locale!=="ko"&&(Td||ws!=="onCompositionStart"?ws==="onCompositionEnd"&&Td&&(ls=TC()):(eo=Xe,Hb="value"in eo?eo.value:eo.textContent,Td=!0)),Ct=Nx(Be,ws),0<Ct.length&&(ws=new OC(ws,c,null,g,Xe),st.push({event:ws,listeners:Ct}),ls?ws.data=ls:(ls=LC(g),ls!==null&&(ws.data=ls)))),(ls=$B?qB(c,g):HB(c,g))&&(ws=Nx(Be,"onBeforeInput"),0<ws.length&&(Ct=new OC("onBeforeInput","beforeinput",null,g,Xe),st.push({event:Ct,listeners:ws}),Ct.data=ls)),D$(st,c,Be,g,Xe)}Nk(st,m)})}function im(c,m,g){return{instance:c,listener:m,currentTarget:g}}function Nx(c,m){for(var g=m+"Capture",N=[];c!==null;){var R=c,U=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||U===null||(R=C0(c,g),R!=null&&N.unshift(im(c,R,U)),R=C0(c,m),R!=null&&N.push(im(c,R,U))),c.tag===3)return N;c=c.return}return[]}function U$(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function wk(c,m,g,N,R){for(var U=m._reactName,ae=[];g!==null&&g!==N;){var me=g,Te=me.alternate,Be=me.stateNode;if(me=me.tag,Te!==null&&Te===N)break;me!==5&&me!==26&&me!==27||Be===null||(Te=Be,R?(Be=C0(g,U),Be!=null&&ae.unshift(im(g,Be,Te))):R||(Be=C0(g,U),Be!=null&&ae.push(im(g,Be,Te)))),g=g.return}ae.length!==0&&c.push({event:m,listeners:ae})}var z$=/\r\n?/g,B$=/\u0000|\uFFFD/g;function Sk(c){return(typeof c=="string"?c:""+c).replace(z$,`
`).replace(B$,"")}function Ak(c,m){return m=Sk(m),Sk(c)===m}function la(c,m,g,N,R,U){switch(g){case"children":typeof N=="string"?m==="body"||m==="textarea"&&N===""||Ad(c,N):(typeof N=="number"||typeof N=="bigint")&&m!=="body"&&Ad(c,""+N);break;case"className":Ms(c,"class",N);break;case"tabIndex":Ms(c,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":Ms(c,g,N);break;case"style":AC(c,N,U);break;case"data":if(m!=="object"){Ms(c,"data",N);break}case"src":case"href":if(N===""&&(m!=="a"||g!=="href")){c.removeAttribute(g);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){c.removeAttribute(g);break}N=Ch(""+N),c.setAttribute(g,N);break;case"action":case"formAction":if(typeof N=="function"){c.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(g==="formAction"?(m!=="input"&&la(c,m,"name",R.name,R,null),la(c,m,"formEncType",R.formEncType,R,null),la(c,m,"formMethod",R.formMethod,R,null),la(c,m,"formTarget",R.formTarget,R,null)):(la(c,m,"encType",R.encType,R,null),la(c,m,"method",R.method,R,null),la(c,m,"target",R.target,R,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){c.removeAttribute(g);break}N=Ch(""+N),c.setAttribute(g,N);break;case"onClick":N!=null&&(c.onclick=cl);break;case"onScroll":N!=null&&vs("scroll",c);break;case"onScrollEnd":N!=null&&vs("scrollend",c);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(g=N.__html,g!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"multiple":c.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":c.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){c.removeAttribute("xlink:href");break}g=Ch(""+N),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?c.setAttribute(g,""+N):c.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?c.setAttribute(g,""):c.removeAttribute(g);break;case"capture":case"download":N===!0?c.setAttribute(g,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?c.setAttribute(g,N):c.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?c.setAttribute(g,N):c.removeAttribute(g);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?c.removeAttribute(g):c.setAttribute(g,N);break;case"popover":vs("beforetoggle",c),vs("toggle",c),Et(c,"popover",N);break;case"xlinkActuate":Ua(c,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Ua(c,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Ua(c,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Ua(c,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Ua(c,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Ua(c,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Ua(c,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Ua(c,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Ua(c,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Et(c,"is",N);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=xB.get(g)||g,Et(c,g,N))}}function Ay(c,m,g,N,R,U){switch(g){case"style":AC(c,N,U);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(g=N.__html,g!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"children":typeof N=="string"?Ad(c,N):(typeof N=="number"||typeof N=="bigint")&&Ad(c,""+N);break;case"onScroll":N!=null&&vs("scroll",c);break;case"onScrollEnd":N!=null&&vs("scrollend",c);break;case"onClick":N!=null&&(c.onclick=cl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vs.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(R=g.endsWith("Capture"),m=g.slice(2,R?g.length-7:void 0),U=c[je]||null,U=U!=null?U[g]:null,typeof U=="function"&&c.removeEventListener(m,U,R),typeof N=="function")){typeof U!="function"&&U!==null&&(g in c?c[g]=null:c.hasAttribute(g)&&c.removeAttribute(g)),c.addEventListener(m,N,R);break e}g in c?c[g]=N:N===!0?c.setAttribute(g,""):Et(c,g,N)}}}function Cr(c,m,g){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vs("error",c),vs("load",c);var N=!1,R=!1,U;for(U in g)if(g.hasOwnProperty(U)){var ae=g[U];if(ae!=null)switch(U){case"src":N=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:la(c,m,U,ae,g,null)}}R&&la(c,m,"srcSet",g.srcSet,g,null),N&&la(c,m,"src",g.src,g,null);return;case"input":vs("invalid",c);var me=U=ae=R=null,Te=null,Be=null;for(N in g)if(g.hasOwnProperty(N)){var Xe=g[N];if(Xe!=null)switch(N){case"name":R=Xe;break;case"type":ae=Xe;break;case"checked":Te=Xe;break;case"defaultChecked":Be=Xe;break;case"value":U=Xe;break;case"defaultValue":me=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(r(137,m));break;default:la(c,m,N,Xe,g,null)}}NC(c,U,me,Te,Be,ae,R,!1);return;case"select":vs("invalid",c),N=ae=U=null;for(R in g)if(g.hasOwnProperty(R)&&(me=g[R],me!=null))switch(R){case"value":U=me;break;case"defaultValue":ae=me;break;case"multiple":N=me;default:la(c,m,R,me,g,null)}m=U,g=ae,c.multiple=!!N,m!=null?Sd(c,!!N,m,!1):g!=null&&Sd(c,!!N,g,!0);return;case"textarea":vs("invalid",c),U=R=N=null;for(ae in g)if(g.hasOwnProperty(ae)&&(me=g[ae],me!=null))switch(ae){case"value":N=me;break;case"defaultValue":R=me;break;case"children":U=me;break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(91));break;default:la(c,m,ae,me,g,null)}wC(c,N,R,U);return;case"option":for(Te in g)if(g.hasOwnProperty(Te)&&(N=g[Te],N!=null))switch(Te){case"selected":c.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:la(c,m,Te,N,g,null)}return;case"dialog":vs("beforetoggle",c),vs("toggle",c),vs("cancel",c),vs("close",c);break;case"iframe":case"object":vs("load",c);break;case"video":case"audio":for(N=0;N<nm.length;N++)vs(nm[N],c);break;case"image":vs("error",c),vs("load",c);break;case"details":vs("toggle",c);break;case"embed":case"source":case"link":vs("error",c),vs("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in g)if(g.hasOwnProperty(Be)&&(N=g[Be],N!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:la(c,m,Be,N,g,null)}return;default:if(Ub(m)){for(Xe in g)g.hasOwnProperty(Xe)&&(N=g[Xe],N!==void 0&&Ay(c,m,Xe,N,g,void 0));return}}for(me in g)g.hasOwnProperty(me)&&(N=g[me],N!=null&&la(c,m,me,N,g,null))}function $$(c,m,g,N){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,U=null,ae=null,me=null,Te=null,Be=null,Xe=null;for(We in g){var st=g[We];if(g.hasOwnProperty(We)&&st!=null)switch(We){case"checked":break;case"value":break;case"defaultValue":Te=st;default:N.hasOwnProperty(We)||la(c,m,We,null,N,st)}}for(var He in N){var We=N[He];if(st=g[He],N.hasOwnProperty(He)&&(We!=null||st!=null))switch(He){case"type":U=We;break;case"name":R=We;break;case"checked":Be=We;break;case"defaultChecked":Xe=We;break;case"value":ae=We;break;case"defaultValue":me=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(r(137,m));break;default:We!==st&&la(c,m,He,We,N,st)}}Lb(c,ae,me,Te,Be,Xe,U,R);return;case"select":We=ae=me=He=null;for(U in g)if(Te=g[U],g.hasOwnProperty(U)&&Te!=null)switch(U){case"value":break;case"multiple":We=Te;default:N.hasOwnProperty(U)||la(c,m,U,null,N,Te)}for(R in N)if(U=N[R],Te=g[R],N.hasOwnProperty(R)&&(U!=null||Te!=null))switch(R){case"value":He=U;break;case"defaultValue":me=U;break;case"multiple":ae=U;default:U!==Te&&la(c,m,R,U,N,Te)}m=me,g=ae,N=We,He!=null?Sd(c,!!g,He,!1):!!N!=!!g&&(m!=null?Sd(c,!!g,m,!0):Sd(c,!!g,g?[]:"",!1));return;case"textarea":We=He=null;for(me in g)if(R=g[me],g.hasOwnProperty(me)&&R!=null&&!N.hasOwnProperty(me))switch(me){case"value":break;case"children":break;default:la(c,m,me,null,N,R)}for(ae in N)if(R=N[ae],U=g[ae],N.hasOwnProperty(ae)&&(R!=null||U!=null))switch(ae){case"value":He=R;break;case"defaultValue":We=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==U&&la(c,m,ae,R,N,U)}jC(c,He,We);return;case"option":for(var St in g)if(He=g[St],g.hasOwnProperty(St)&&He!=null&&!N.hasOwnProperty(St))switch(St){case"selected":c.selected=!1;break;default:la(c,m,St,null,N,He)}for(Te in N)if(He=N[Te],We=g[Te],N.hasOwnProperty(Te)&&He!==We&&(He!=null||We!=null))switch(Te){case"selected":c.selected=He&&typeof He!="function"&&typeof He!="symbol";break;default:la(c,m,Te,He,N,We)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in g)He=g[$t],g.hasOwnProperty($t)&&He!=null&&!N.hasOwnProperty($t)&&la(c,m,$t,null,N,He);for(Be in N)if(He=N[Be],We=g[Be],N.hasOwnProperty(Be)&&He!==We&&(He!=null||We!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,m));break;default:la(c,m,Be,He,N,We)}return;default:if(Ub(m)){for(var oa in g)He=g[oa],g.hasOwnProperty(oa)&&He!==void 0&&!N.hasOwnProperty(oa)&&Ay(c,m,oa,void 0,N,He);for(Xe in N)He=N[Xe],We=g[Xe],!N.hasOwnProperty(Xe)||He===We||He===void 0&&We===void 0||Ay(c,m,Xe,He,N,We);return}}for(var Pe in g)He=g[Pe],g.hasOwnProperty(Pe)&&He!=null&&!N.hasOwnProperty(Pe)&&la(c,m,Pe,null,N,He);for(st in N)He=N[st],We=g[st],!N.hasOwnProperty(st)||He===We||He==null&&We==null||la(c,m,st,He,N,We)}function Ek(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function q$(){if(typeof performance.getEntriesByType=="function"){for(var c=0,m=0,g=performance.getEntriesByType("resource"),N=0;N<g.length;N++){var R=g[N],U=R.transferSize,ae=R.initiatorType,me=R.duration;if(U&&me&&Ek(ae)){for(ae=0,me=R.responseEnd,N+=1;N<g.length;N++){var Te=g[N],Be=Te.startTime;if(Be>me)break;var Xe=Te.transferSize,st=Te.initiatorType;Xe&&Ek(st)&&(Te=Te.responseEnd,ae+=Xe*(Te<me?1:(me-Be)/(Te-Be)))}if(--N,m+=8*(U+ae)/(R.duration/1e3),c++,10<c)break}}if(0<c)return m/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var Ey=null,Cy=null;function jx(c){return c.nodeType===9?c:c.ownerDocument}function Ck(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tk(c,m){if(c===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&m==="foreignObject"?0:c}function Ty(c,m){return c==="textarea"||c==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var _y=null;function H$(){var c=window.event;return c&&c.type==="popstate"?c===_y?!1:(_y=c,!0):(_y=null,!1)}var _k=typeof setTimeout=="function"?setTimeout:void 0,V$=typeof clearTimeout=="function"?clearTimeout:void 0,kk=typeof Promise=="function"?Promise:void 0,G$=typeof queueMicrotask=="function"?queueMicrotask:typeof kk<"u"?function(c){return kk.resolve(null).then(c).catch(W$)}:_k;function W$(c){setTimeout(function(){throw c})}function bo(c){return c==="head"}function Ok(c,m){var g=m,N=0;do{var R=g.nextSibling;if(c.removeChild(g),R&&R.nodeType===8)if(g=R.data,g==="/$"||g==="/&"){if(N===0){c.removeChild(R),su(m);return}N--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")N++;else if(g==="html")lm(c.ownerDocument.documentElement);else if(g==="head"){g=c.ownerDocument.head,lm(g);for(var U=g.firstChild;U;){var ae=U.nextSibling,me=U.nodeName;U[qe]||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&U.rel.toLowerCase()==="stylesheet"||g.removeChild(U),U=ae}}else g==="body"&&lm(c.ownerDocument.body);g=R}while(g);su(m)}function Ik(c,m){var g=c;c=0;do{var N=g.nextSibling;if(g.nodeType===1?m?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(m?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),N&&N.nodeType===8)if(g=N.data,g==="/$"){if(c===0)break;c--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||c++;g=N}while(g)}function ky(c){var m=c.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var g=m;switch(m=m.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":ky(g),rt(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}c.removeChild(g)}}function Q$(c,m,g,N){for(;c.nodeType===1;){var R=g;if(c.nodeName.toLowerCase()!==m.toLowerCase()){if(!N&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(N){if(!c[qe])switch(m){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(U=c.getAttribute("rel"),U==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(U!==R.rel||c.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||c.getAttribute("title")!==(R.title==null?null:R.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(U=c.getAttribute("src"),(U!==(R.src==null?null:R.src)||c.getAttribute("type")!==(R.type==null?null:R.type)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&U&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(m==="input"&&c.type==="hidden"){var U=R.name==null?null:""+R.name;if(R.type==="hidden"&&c.getAttribute("name")===U)return c}else return c;if(c=Kn(c.nextSibling),c===null)break}return null}function K$(c,m,g){if(m==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!g||(c=Kn(c.nextSibling),c===null))return null;return c}function Rk(c,m){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Kn(c.nextSibling),c===null))return null;return c}function Oy(c){return c.data==="$?"||c.data==="$~"}function Iy(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function J$(c,m){var g=c.ownerDocument;if(c.data==="$~")c._reactRetry=m;else if(c.data!=="$?"||g.readyState!=="loading")m();else{var N=function(){m(),g.removeEventListener("DOMContentLoaded",N)};g.addEventListener("DOMContentLoaded",N),c._reactRetry=N}}function Kn(c){for(;c!=null;c=c.nextSibling){var m=c.nodeType;if(m===1||m===3)break;if(m===8){if(m=c.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return c}var Ry=null;function Pk(c){c=c.nextSibling;for(var m=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"||g==="/&"){if(m===0)return Kn(c.nextSibling);m--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||m++}c=c.nextSibling}return null}function Dk(c){c=c.previousSibling;for(var m=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(m===0)return c;m--}else g!=="/$"&&g!=="/&"||m++}c=c.previousSibling}return null}function Mk(c,m,g){switch(m=jx(g),c){case"html":if(c=m.documentElement,!c)throw Error(r(452));return c;case"head":if(c=m.head,!c)throw Error(r(453));return c;case"body":if(c=m.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function lm(c){for(var m=c.attributes;m.length;)c.removeAttributeNode(m[0]);rt(c)}var Jn=new Map,Lk=new Set;function wx(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Al=G.d;G.d={f:Y$,r:X$,D:Z$,C:eq,L:tq,m:sq,X:rq,S:aq,M:nq};function Y$(){var c=Al.f(),m=hx();return c||m}function X$(c){var m=gt(c);m!==null&&m.tag===5&&m.type==="form"?e_(m):Al.r(c)}var Zd=typeof document>"u"?null:document;function Fk(c,m,g){var N=Zd;if(N&&typeof m=="string"&&m){var R=$n(m);R='link[rel="'+c+'"][href="'+R+'"]',typeof g=="string"&&(R+='[crossorigin="'+g+'"]'),Lk.has(R)||(Lk.add(R),c={rel:c,crossOrigin:g,href:m},N.querySelector(R)===null&&(m=N.createElement("link"),Cr(m,"link",c),wt(m),N.head.appendChild(m)))}}function Z$(c){Al.D(c),Fk("dns-prefetch",c,null)}function eq(c,m){Al.C(c,m),Fk("preconnect",c,m)}function tq(c,m,g){Al.L(c,m,g);var N=Zd;if(N&&c&&m){var R='link[rel="preload"][as="'+$n(m)+'"]';m==="image"&&g&&g.imageSrcSet?(R+='[imagesrcset="'+$n(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(R+='[imagesizes="'+$n(g.imageSizes)+'"]')):R+='[href="'+$n(c)+'"]';var U=R;switch(m){case"style":U=eu(c);break;case"script":U=tu(c)}Jn.has(U)||(c=f({rel:"preload",href:m==="image"&&g&&g.imageSrcSet?void 0:c,as:m},g),Jn.set(U,c),N.querySelector(R)!==null||m==="style"&&N.querySelector(om(U))||m==="script"&&N.querySelector(cm(U))||(m=N.createElement("link"),Cr(m,"link",c),wt(m),N.head.appendChild(m)))}}function sq(c,m){Al.m(c,m);var g=Zd;if(g&&c){var N=m&&typeof m.as=="string"?m.as:"script",R='link[rel="modulepreload"][as="'+$n(N)+'"][href="'+$n(c)+'"]',U=R;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=tu(c)}if(!Jn.has(U)&&(c=f({rel:"modulepreload",href:c},m),Jn.set(U,c),g.querySelector(R)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(cm(U)))return}N=g.createElement("link"),Cr(N,"link",c),wt(N),g.head.appendChild(N)}}}function aq(c,m,g){Al.S(c,m,g);var N=Zd;if(N&&c){var R=ht(N).hoistableStyles,U=eu(c);m=m||"default";var ae=R.get(U);if(!ae){var me={loading:0,preload:null};if(ae=N.querySelector(om(U)))me.loading=5;else{c=f({rel:"stylesheet",href:c,"data-precedence":m},g),(g=Jn.get(U))&&Py(c,g);var Te=ae=N.createElement("link");wt(Te),Cr(Te,"link",c),Te._p=new Promise(function(Be,Xe){Te.onload=Be,Te.onerror=Xe}),Te.addEventListener("load",function(){me.loading|=1}),Te.addEventListener("error",function(){me.loading|=2}),me.loading|=4,Sx(ae,m,N)}ae={type:"stylesheet",instance:ae,count:1,state:me},R.set(U,ae)}}}function rq(c,m){Al.X(c,m);var g=Zd;if(g&&c){var N=ht(g).hoistableScripts,R=tu(c),U=N.get(R);U||(U=g.querySelector(cm(R)),U||(c=f({src:c,async:!0},m),(m=Jn.get(R))&&Dy(c,m),U=g.createElement("script"),wt(U),Cr(U,"link",c),g.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},N.set(R,U))}}function nq(c,m){Al.M(c,m);var g=Zd;if(g&&c){var N=ht(g).hoistableScripts,R=tu(c),U=N.get(R);U||(U=g.querySelector(cm(R)),U||(c=f({src:c,async:!0,type:"module"},m),(m=Jn.get(R))&&Dy(c,m),U=g.createElement("script"),wt(U),Cr(U,"link",c),g.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},N.set(R,U))}}function Uk(c,m,g,N){var R=(R=se.current)?wx(R):null;if(!R)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(m=eu(g.href),g=ht(R).hoistableStyles,N=g.get(m),N||(N={type:"style",instance:null,count:0,state:null},g.set(m,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){c=eu(g.href);var U=ht(R).hoistableStyles,ae=U.get(c);if(ae||(R=R.ownerDocument||R,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(c,ae),(U=R.querySelector(om(c)))&&!U._p&&(ae.instance=U,ae.state.loading=5),Jn.has(c)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Jn.set(c,g),U||iq(R,c,g,ae.state))),m&&N===null)throw Error(r(528,""));return ae}if(m&&N!==null)throw Error(r(529,""));return null;case"script":return m=g.async,g=g.src,typeof g=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=tu(g),g=ht(R).hoistableScripts,N=g.get(m),N||(N={type:"script",instance:null,count:0,state:null},g.set(m,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function eu(c){return'href="'+$n(c)+'"'}function om(c){return'link[rel="stylesheet"]['+c+"]"}function zk(c){return f({},c,{"data-precedence":c.precedence,precedence:null})}function iq(c,m,g,N){c.querySelector('link[rel="preload"][as="style"]['+m+"]")?N.loading=1:(m=c.createElement("link"),N.preload=m,m.addEventListener("load",function(){return N.loading|=1}),m.addEventListener("error",function(){return N.loading|=2}),Cr(m,"link",g),wt(m),c.head.appendChild(m))}function tu(c){return'[src="'+$n(c)+'"]'}function cm(c){return"script[async]"+c}function Bk(c,m,g){if(m.count++,m.instance===null)switch(m.type){case"style":var N=c.querySelector('style[data-href~="'+$n(g.href)+'"]');if(N)return m.instance=N,wt(N),N;var R=f({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return N=(c.ownerDocument||c).createElement("style"),wt(N),Cr(N,"style",R),Sx(N,g.precedence,c),m.instance=N;case"stylesheet":R=eu(g.href);var U=c.querySelector(om(R));if(U)return m.state.loading|=4,m.instance=U,wt(U),U;N=zk(g),(R=Jn.get(R))&&Py(N,R),U=(c.ownerDocument||c).createElement("link"),wt(U);var ae=U;return ae._p=new Promise(function(me,Te){ae.onload=me,ae.onerror=Te}),Cr(U,"link",N),m.state.loading|=4,Sx(U,g.precedence,c),m.instance=U;case"script":return U=tu(g.src),(R=c.querySelector(cm(U)))?(m.instance=R,wt(R),R):(N=g,(R=Jn.get(U))&&(N=f({},g),Dy(N,R)),c=c.ownerDocument||c,R=c.createElement("script"),wt(R),Cr(R,"link",N),c.head.appendChild(R),m.instance=R);case"void":return null;default:throw Error(r(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(N=m.instance,m.state.loading|=4,Sx(N,g.precedence,c));return m.instance}function Sx(c,m,g){for(var N=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=N.length?N[N.length-1]:null,U=R,ae=0;ae<N.length;ae++){var me=N[ae];if(me.dataset.precedence===m)U=me;else if(U!==R)break}U?U.parentNode.insertBefore(c,U.nextSibling):(m=g.nodeType===9?g.head:g,m.insertBefore(c,m.firstChild))}function Py(c,m){c.crossOrigin==null&&(c.crossOrigin=m.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=m.referrerPolicy),c.title==null&&(c.title=m.title)}function Dy(c,m){c.crossOrigin==null&&(c.crossOrigin=m.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=m.referrerPolicy),c.integrity==null&&(c.integrity=m.integrity)}var Ax=null;function $k(c,m,g){if(Ax===null){var N=new Map,R=Ax=new Map;R.set(g,N)}else R=Ax,N=R.get(g),N||(N=new Map,R.set(g,N));if(N.has(c))return N;for(N.set(c,null),g=g.getElementsByTagName(c),R=0;R<g.length;R++){var U=g[R];if(!(U[qe]||U[ge]||c==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=U.getAttribute(m)||"";ae=c+ae;var me=N.get(ae);me?me.push(U):N.set(ae,[U])}}return N}function qk(c,m,g){c=c.ownerDocument||c,c.head.insertBefore(g,m==="title"?c.querySelector("head > title"):null)}function lq(c,m,g){if(g===1||m.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return c=m.disabled,typeof m.precedence=="string"&&c==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function Hk(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function oq(c,m,g,N){if(g.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var R=eu(N.href),U=m.querySelector(om(R));if(U){m=U._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(c.count++,c=Ex.bind(c),m.then(c,c)),g.state.loading|=4,g.instance=U,wt(U);return}U=m.ownerDocument||m,N=zk(N),(R=Jn.get(R))&&Py(N,R),U=U.createElement("link"),wt(U);var ae=U;ae._p=new Promise(function(me,Te){ae.onload=me,ae.onerror=Te}),Cr(U,"link",N),g.instance=U}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(g,m),(m=g.state.preload)&&(g.state.loading&3)===0&&(c.count++,g=Ex.bind(c),m.addEventListener("load",g),m.addEventListener("error",g))}}var My=0;function cq(c,m){return c.stylesheets&&c.count===0&&Tx(c,c.stylesheets),0<c.count||0<c.imgCount?function(g){var N=setTimeout(function(){if(c.stylesheets&&Tx(c,c.stylesheets),c.unsuspend){var U=c.unsuspend;c.unsuspend=null,U()}},6e4+m);0<c.imgBytes&&My===0&&(My=62500*q$());var R=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&Tx(c,c.stylesheets),c.unsuspend)){var U=c.unsuspend;c.unsuspend=null,U()}},(c.imgBytes>My?50:800)+m);return c.unsuspend=g,function(){c.unsuspend=null,clearTimeout(N),clearTimeout(R)}}:null}function Ex(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tx(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Cx=null;function Tx(c,m){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Cx=new Map,m.forEach(dq,c),Cx=null,Ex.call(c))}function dq(c,m){if(!(m.state.loading&4)){var g=Cx.get(c);if(g)var N=g.get(null);else{g=new Map,Cx.set(c,g);for(var R=c.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<R.length;U++){var ae=R[U];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(g.set(ae.dataset.precedence,ae),N=ae)}N&&g.set(null,N)}R=m.instance,ae=R.getAttribute("data-precedence"),U=g.get(ae)||N,U===N&&g.set(null,R),g.set(ae,R),this.count++,N=Ex.bind(this),R.addEventListener("load",N),R.addEventListener("error",N),U?U.parentNode.insertBefore(R,U.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(R,c.firstChild)),m.state.loading|=4}}var dm={$$typeof:S,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function uq(c,m,g,N,R,U,ae,me,Te){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.hiddenUpdates=Pt(null),this.identifierPrefix=N,this.onUncaughtError=R,this.onCaughtError=U,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function Vk(c,m,g,N,R,U,ae,me,Te,Be,Xe,st){return c=new uq(c,m,g,ae,Te,Be,Xe,st,me),m=1,U===!0&&(m|=24),U=wn(3,null,null,m),c.current=U,U.stateNode=c,m=xv(),m.refCount++,c.pooledCache=m,m.refCount++,U.memoizedState={element:N,isDehydrated:g,cache:m},vv(U),c}function Gk(c){return c?(c=Id,c):Id}function Wk(c,m,g,N,R,U){R=Gk(R),N.context===null?N.context=R:N.pendingContext=R,N=io(m),N.payload={element:g},U=U===void 0?null:U,U!==null&&(N.callback=U),g=lo(c,N,m),g!==null&&(mn(g,c,m),$0(g,c,m))}function Qk(c,m){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<m?g:m}}function Ly(c,m){Qk(c,m),(c=c.alternate)&&Qk(c,m)}function Kk(c){if(c.tag===13||c.tag===31){var m=fc(c,67108864);m!==null&&mn(m,c,67108864),Ly(c,67108864)}}function Jk(c){if(c.tag===13||c.tag===31){var m=Tn();m=rr(m);var g=fc(c,m);g!==null&&mn(g,c,m),Ly(c,m)}}var _x=!0;function mq(c,m,g,N){var R=P.T;P.T=null;var U=G.p;try{G.p=2,Fy(c,m,g,N)}finally{G.p=U,P.T=R}}function fq(c,m,g,N){var R=P.T;P.T=null;var U=G.p;try{G.p=8,Fy(c,m,g,N)}finally{G.p=U,P.T=R}}function Fy(c,m,g,N){if(_x){var R=Uy(N);if(R===null)Sy(c,m,N,kx,g),Xk(c,N);else if(xq(R,c,m,g,N))N.stopPropagation();else if(Xk(c,N),m&4&&-1<hq.indexOf(c)){for(;R!==null;){var U=gt(R);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var ae=Re(U.pendingLanes);if(ae!==0){var me=U;for(me.pendingLanes|=2,me.entangledLanes|=2;ae;){var Te=1<<31-le(ae);me.entanglements[1]|=Te,ae&=~Te}qi(U),(qs&6)===0&&(mx=Ae()+500,rm(0))}}break;case 31:case 13:me=fc(U,2),me!==null&&mn(me,U,2),hx(),Ly(U,2)}if(U=Uy(N),U===null&&Sy(c,m,N,kx,g),U===R)break;R=U}R!==null&&N.stopPropagation()}else Sy(c,m,N,null,g)}}function Uy(c){return c=Bb(c),zy(c)}var kx=null;function zy(c){if(kx=null,c=ct(c),c!==null){var m=i(c);if(m===null)c=null;else{var g=m.tag;if(g===13){if(c=l(m),c!==null)return c;c=null}else if(g===31){if(c=o(m),c!==null)return c;c=null}else if(g===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;c=null}else m!==c&&(c=null)}}return kx=c,null}function Yk(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case Qe:return 2;case _t:return 8;case lt:case Nt:return 32;case jt:return 268435456;default:return 32}default:return 32}}var By=!1,vo=null,yo=null,No=null,um=new Map,mm=new Map,jo=[],hq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xk(c,m){switch(c){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":yo=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":um.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":mm.delete(m.pointerId)}}function fm(c,m,g,N,R,U){return c===null||c.nativeEvent!==U?(c={blockedOn:m,domEventName:g,eventSystemFlags:N,nativeEvent:U,targetContainers:[R]},m!==null&&(m=gt(m),m!==null&&Kk(m)),c):(c.eventSystemFlags|=N,m=c.targetContainers,R!==null&&m.indexOf(R)===-1&&m.push(R),c)}function xq(c,m,g,N,R){switch(m){case"focusin":return vo=fm(vo,c,m,g,N,R),!0;case"dragenter":return yo=fm(yo,c,m,g,N,R),!0;case"mouseover":return No=fm(No,c,m,g,N,R),!0;case"pointerover":var U=R.pointerId;return um.set(U,fm(um.get(U)||null,c,m,g,N,R)),!0;case"gotpointercapture":return U=R.pointerId,mm.set(U,fm(mm.get(U)||null,c,m,g,N,R)),!0}return!1}function Zk(c){var m=ct(c.target);if(m!==null){var g=i(m);if(g!==null){if(m=g.tag,m===13){if(m=l(g),m!==null){c.blockedOn=m,ye(c.priority,function(){Jk(g)});return}}else if(m===31){if(m=o(g),m!==null){c.blockedOn=m,ye(c.priority,function(){Jk(g)});return}}else if(m===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Ox(c){if(c.blockedOn!==null)return!1;for(var m=c.targetContainers;0<m.length;){var g=Uy(c.nativeEvent);if(g===null){g=c.nativeEvent;var N=new g.constructor(g.type,g);zb=N,g.target.dispatchEvent(N),zb=null}else return m=gt(g),m!==null&&Kk(m),c.blockedOn=g,!1;m.shift()}return!0}function e4(c,m,g){Ox(c)&&g.delete(m)}function pq(){By=!1,vo!==null&&Ox(vo)&&(vo=null),yo!==null&&Ox(yo)&&(yo=null),No!==null&&Ox(No)&&(No=null),um.forEach(e4),mm.forEach(e4)}function Ix(c,m){c.blockedOn===m&&(c.blockedOn=null,By||(By=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pq)))}var Rx=null;function t4(c){Rx!==c&&(Rx=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rx===c&&(Rx=null);for(var m=0;m<c.length;m+=3){var g=c[m],N=c[m+1],R=c[m+2];if(typeof N!="function"){if(zy(N||g)===null)continue;break}var U=gt(g);U!==null&&(c.splice(m,3),m-=3,Uv(U,{pending:!0,data:R,method:g.method,action:N},N,R))}}))}function su(c){function m(Te){return Ix(Te,c)}vo!==null&&Ix(vo,c),yo!==null&&Ix(yo,c),No!==null&&Ix(No,c),um.forEach(m),mm.forEach(m);for(var g=0;g<jo.length;g++){var N=jo[g];N.blockedOn===c&&(N.blockedOn=null)}for(;0<jo.length&&(g=jo[0],g.blockedOn===null);)Zk(g),g.blockedOn===null&&jo.shift();if(g=(c.ownerDocument||c).$$reactFormReplay,g!=null)for(N=0;N<g.length;N+=3){var R=g[N],U=g[N+1],ae=R[je]||null;if(typeof U=="function")ae||t4(g);else if(ae){var me=null;if(U&&U.hasAttribute("formAction")){if(R=U,ae=U[je]||null)me=ae.formAction;else if(zy(R)!==null)continue}else me=ae.action;typeof me=="function"?g[N+1]=me:(g.splice(N,3),N-=3),t4(g)}}}function s4(){function c(U){U.canIntercept&&U.info==="react-transition"&&U.intercept({handler:function(){return new Promise(function(ae){return R=ae})},focusReset:"manual",scroll:"manual"})}function m(){R!==null&&(R(),R=null),N||setTimeout(g,20)}function g(){if(!N&&!navigation.transition){var U=navigation.currentEntry;U&&U.url!=null&&navigation.navigate(U.url,{state:U.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var N=!1,R=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(g,100),function(){N=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),R!==null&&(R(),R=null)}}}function $y(c){this._internalRoot=c}Px.prototype.render=$y.prototype.render=function(c){var m=this._internalRoot;if(m===null)throw Error(r(409));var g=m.current,N=Tn();Wk(g,N,c,m,null,null)},Px.prototype.unmount=$y.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var m=c.containerInfo;Wk(c.current,2,null,c,null,null),hx(),m[Se]=null}};function Px(c){this._internalRoot=c}Px.prototype.unstable_scheduleHydration=function(c){if(c){var m=de();c={blockedOn:null,target:c,priority:m};for(var g=0;g<jo.length&&m!==0&&m<jo[g].priority;g++);jo.splice(g,0,c),g===0&&Zk(c)}};var a4=s.version;if(a4!=="19.2.0")throw Error(r(527,a4,"19.2.0"));G.findDOMNode=function(c){var m=c._reactInternals;if(m===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(m),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var gq={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dx.isDisabled&&Dx.supportsFiber)try{ve=Dx.inject(gq),Ve=Dx}catch{}}return xm.createRoot=function(c,m){if(!n(c))throw Error(r(299));var g=!1,N="",R=d_,U=u_,ae=m_;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(U=m.onCaughtError),m.onRecoverableError!==void 0&&(ae=m.onRecoverableError)),m=Vk(c,1,!1,null,null,g,N,null,R,U,ae,s4),c[Se]=m.current,wy(c),new $y(m)},xm.hydrateRoot=function(c,m,g){if(!n(c))throw Error(r(299));var N=!1,R="",U=d_,ae=u_,me=m_,Te=null;return g!=null&&(g.unstable_strictMode===!0&&(N=!0),g.identifierPrefix!==void 0&&(R=g.identifierPrefix),g.onUncaughtError!==void 0&&(U=g.onUncaughtError),g.onCaughtError!==void 0&&(ae=g.onCaughtError),g.onRecoverableError!==void 0&&(me=g.onRecoverableError),g.formState!==void 0&&(Te=g.formState)),m=Vk(c,1,!0,m,g??null,N,R,Te,U,ae,me,s4),m.context=Gk(null),g=m.current,N=Tn(),N=rr(N),R=io(N),R.callback=null,lo(g,R,N),g=N,m.current.lanes=g,ss(m,g),qi(m),c[Se]=m.current,wy(c),new Px(m)},xm.version="19.2.0",xm}var f4;function Tq(){if(f4)return Vy.exports;f4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Vy.exports=Cq(),Vy.exports}var _q=Tq();const kq=ra(_q),Jt=e=>typeof e=="string",pm=()=>{let e,s;const a=new Promise((r,n)=>{e=r,s=n});return a.resolve=e,a.reject=s,a},h4=e=>e==null?"":""+e,Oq=(e,s,a)=>{e.forEach(r=>{s[r]&&(a[r]=s[r])})},Iq=/###/g,x4=e=>e&&e.indexOf("###")>-1?e.replace(Iq,"."):e,p4=e=>!e||Jt(e),zm=(e,s,a)=>{const r=Jt(s)?s.split("."):s;let n=0;for(;n<r.length-1;){if(p4(e))return{};const i=x4(r[n]);!e[i]&&a&&(e[i]=new a),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++n}return p4(e)?{}:{obj:e,k:x4(r[n])}},g4=(e,s,a)=>{const{obj:r,k:n}=zm(e,s,Object);if(r!==void 0||s.length===1){r[n]=a;return}let i=s[s.length-1],l=s.slice(0,s.length-1),o=zm(e,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=zm(e,l,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=a},Rq=(e,s,a,r)=>{const{obj:n,k:i}=zm(e,s,Object);n[i]=n[i]||[],n[i].push(a)},Ep=(e,s)=>{const{obj:a,k:r}=zm(e,s);if(a&&Object.prototype.hasOwnProperty.call(a,r))return a[r]},Pq=(e,s,a)=>{const r=Ep(e,a);return r!==void 0?r:Ep(s,a)},HM=(e,s,a)=>{for(const r in s)r!=="__proto__"&&r!=="constructor"&&(r in e?Jt(e[r])||e[r]instanceof String||Jt(s[r])||s[r]instanceof String?a&&(e[r]=s[r]):HM(e[r],s[r],a):e[r]=s[r]);return e},au=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Dq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Mq=e=>Jt(e)?e.replace(/[&<>"'\/]/g,s=>Dq[s]):e;class Lq{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const a=this.regExpMap.get(s);if(a!==void 0)return a;const r=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,r),this.regExpQueue.push(s),r}}const Fq=[" ",",","?","!",";"],Uq=new Lq(20),zq=(e,s,a)=>{s=s||"",a=a||"";const r=Fq.filter(l=>s.indexOf(l)<0&&a.indexOf(l)<0);if(r.length===0)return!0;const n=Uq.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!n.test(e);if(!i){const l=e.indexOf(a);l>0&&!n.test(e.substring(0,l))&&(i=!0)}return i},AS=(e,s,a=".")=>{if(!e)return;if(e[s])return Object.prototype.hasOwnProperty.call(e,s)?e[s]:void 0;const r=s.split(a);let n=e;for(let i=0;i<r.length;){if(!n||typeof n!="object")return;let l,o="";for(let d=i;d<r.length;++d)if(d!==i&&(o+=a),o+=r[d],l=n[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<r.length-1)continue;i+=d-i+1;break}n=l}return n},af=e=>e==null?void 0:e.replace("_","-"),Bq={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,s){var a,r;(r=(a=console==null?void 0:console[e])==null?void 0:a.apply)==null||r.call(a,console,s)}};class Cp{constructor(s,a={}){this.init(s,a)}init(s,a={}){this.prefix=a.prefix||"i18next:",this.logger=s||Bq,this.options=a,this.debug=a.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,a,r,n){return n&&!this.debug?null:(Jt(s[0])&&(s[0]=`${r}${this.prefix} ${s[0]}`),this.logger[a](s))}create(s){return new Cp(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new Cp(this.logger,s)}}var Ki=new Cp;let Gg=class{constructor(){this.observers={}}on(s,a){return s.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const n=this.observers[r].get(a)||0;this.observers[r].set(a,n+1)}),this}off(s,a){if(this.observers[s]){if(!a){delete this.observers[s];return}this.observers[s].delete(a)}}emit(s,...a){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([n,i])=>{for(let l=0;l<i;l++)n(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,i])=>{for(let l=0;l<i;l++)n.apply(n,[s,...a])})}};class b4 extends Gg{constructor(s,a={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const a=this.options.ns.indexOf(s);a>-1&&this.options.ns.splice(a,1)}getResource(s,a,r,n={}){var u,h;const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,l=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;s.indexOf(".")>-1?o=s.split("."):(o=[s,a],r&&(Array.isArray(r)?o.push(...r):Jt(r)&&i?o.push(...r.split(i)):o.push(r)));const d=Ep(this.data,o);return!d&&!a&&!r&&s.indexOf(".")>-1&&(s=o[0],a=o[1],r=o.slice(2).join(".")),d||!l||!Jt(r)?d:AS((h=(u=this.data)==null?void 0:u[s])==null?void 0:h[a],r,i)}addResource(s,a,r,n,i={silent:!1}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[s,a];r&&(o=o.concat(l?r.split(l):r)),s.indexOf(".")>-1&&(o=s.split("."),n=a,a=o[1]),this.addNamespaces(a),g4(this.data,o,n),i.silent||this.emit("added",s,a,r,n)}addResources(s,a,r,n={silent:!1}){for(const i in r)(Jt(r[i])||Array.isArray(r[i]))&&this.addResource(s,a,i,r[i],{silent:!0});n.silent||this.emit("added",s,a,r)}addResourceBundle(s,a,r,n,i,l={silent:!1,skipCopy:!1}){let o=[s,a];s.indexOf(".")>-1&&(o=s.split("."),n=r,r=a,a=o[1]),this.addNamespaces(a);let d=Ep(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?HM(d,r,i):d={...d,...r},g4(this.data,o,d),l.silent||this.emit("added",s,a,r)}removeResourceBundle(s,a){this.hasResourceBundle(s,a)&&delete this.data[s][a],this.removeNamespaces(a),this.emit("removed",s,a)}hasResourceBundle(s,a){return this.getResource(s,a)!==void 0}getResourceBundle(s,a){return a||(a=this.options.defaultNS),this.getResource(s,a)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const a=this.getDataByLanguage(s);return!!(a&&Object.keys(a)||[]).find(n=>a[n]&&Object.keys(a[n]).length>0)}toJSON(){return this.data}}var VM={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,s,a,r,n){return e.forEach(i=>{var l;s=((l=this.processors[i])==null?void 0:l.process(s,a,r,n))??s}),s}};const GM=Symbol("i18next/PATH_KEY");function $q(){const e=[],s=Object.create(null);let a;return s.get=(r,n)=>{var i;return(i=a==null?void 0:a.revoke)==null||i.call(a),n===GM?e:(e.push(n),a=Proxy.revocable(r,s),a.proxy)},Proxy.revocable(Object.create(null),s).proxy}function ES(e,s){const{[GM]:a}=e($q());return a.join((s==null?void 0:s.keySeparator)??".")}const v4={},Ky=e=>!Jt(e)&&typeof e!="boolean"&&typeof e!="number";class Tp extends Gg{constructor(s,a={}){super(),Oq(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ki.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,a={interpolation:{}}){const r={...a};if(s==null)return!1;const n=this.resolve(s,r);if((n==null?void 0:n.res)===void 0)return!1;const i=Ky(n.res);return!(r.returnObjects===!1&&i)}extractFromKey(s,a){let r=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const n=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let i=a.ns||this.options.defaultNS||[];const l=r&&s.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!zq(s,r,n);if(l&&!o){const d=s.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:s,namespaces:Jt(i)?[i]:i};const u=s.split(r);(r!==n||r===n&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),s=u.join(n)}return{key:s,namespaces:Jt(i)?[i]:i}}translate(s,a,r){let n=typeof a=="object"?{...a}:a;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),s==null)return"";typeof s=="function"&&(s=ES(s,{...this.options,...n})),Array.isArray(s)||(s=[String(s)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:d}=this.extractFromKey(s[s.length-1],n),u=d[d.length-1];let h=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const f=n.lng||this.language,x=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode")return x?i?{res:`${u}${h}${o}`,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:`${u}${h}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:o;const p=this.resolve(s,n);let v=p==null?void 0:p.res;const b=(p==null?void 0:p.usedKey)||o,y=(p==null?void 0:p.exactUsedKey)||o,j=["[object Number]","[object Function]","[object RegExp]"],w=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,O=n.count!==void 0&&!Jt(n.count),_=Tp.hasDefaultValue(n),E=O?this.pluralResolver.getSuffix(f,n.count,n):"",A=n.ordinal&&O?this.pluralResolver.getSuffix(f,n.count,{ordinal:!1}):"",D=O&&!n.ordinal&&n.count===0,L=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${E}`]||n[`defaultValue${A}`]||n.defaultValue;let B=v;S&&!v&&_&&(B=L);const I=Ky(B),T=Object.prototype.toString.apply(B);if(S&&B&&I&&j.indexOf(T)<0&&!(Jt(w)&&Array.isArray(B))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,B,{...n,ns:d}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(p.res=z,p.usedParams=this.getUsedParamsDetails(n),p):z}if(l){const z=Array.isArray(B),k=z?[]:{},F=z?y:b;for(const P in B)if(Object.prototype.hasOwnProperty.call(B,P)){const G=`${F}${l}${P}`;_&&!v?k[P]=this.translate(G,{...n,defaultValue:Ky(L)?L[P]:void 0,joinArrays:!1,ns:d}):k[P]=this.translate(G,{...n,joinArrays:!1,ns:d}),k[P]===G&&(k[P]=B[P])}v=k}}else if(S&&Jt(w)&&Array.isArray(v))v=v.join(w),v&&(v=this.extendTranslation(v,s,n,r));else{let z=!1,k=!1;!this.isValidLookup(v)&&_&&(z=!0,v=L),this.isValidLookup(v)||(k=!0,v=o);const P=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:v,G=_&&L!==v&&this.options.updateMissing;if(k||z||G){if(this.logger.log(G?"updateKey":"missingKey",f,u,o,G?L:v),l){const H=this.resolve(o,{...n,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Y=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let H=0;H<W.length;H++)Y.push(W[H]);else this.options.saveMissingTo==="all"?Y=this.languageUtils.toResolveHierarchy(n.lng||this.language):Y.push(n.lng||this.language);const ee=(H,M,X)=>{var Q;const K=_&&X!==v?X:P;this.options.missingKeyHandler?this.options.missingKeyHandler(H,u,M,K,G,n):(Q=this.backendConnector)!=null&&Q.saveMissing&&this.backendConnector.saveMissing(H,u,M,K,G,n),this.emit("missingKey",H,u,M,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?Y.forEach(H=>{const M=this.pluralResolver.getSuffixes(H,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&M.indexOf(`${this.options.pluralSeparator}zero`)<0&&M.push(`${this.options.pluralSeparator}zero`),M.forEach(X=>{ee([H],o+X,n[`defaultValue${X}`]||L)})}):ee(Y,o,L))}v=this.extendTranslation(v,s,n,p,r),k&&v===o&&this.options.appendNamespaceToMissingKey&&(v=`${u}${h}${o}`),(k||z)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${h}${o}`:o,z?v:void 0,n))}return i?(p.res=v,p.usedParams=this.getUsedParamsDetails(n),p):v}extendTranslation(s,a,r,n,i){var d,u;if((d=this.i18nFormat)!=null&&d.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=Jt(s)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(h){const p=s.match(this.interpolator.nestingRegexp);f=p&&p.length}let x=r.replace&&!Jt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),s=this.interpolator.interpolate(s,x,r.lng||this.language||n.usedLng,r),h){const p=s.match(this.interpolator.nestingRegexp),v=p&&p.length;f<v&&(r.nest=!1)}!r.lng&&n&&n.res&&(r.lng=this.language||n.usedLng),r.nest!==!1&&(s=this.interpolator.nest(s,(...p)=>(i==null?void 0:i[0])===p[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${a[0]}`),null):this.translate(...p,a),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,o=Jt(l)?[l]:l;return s!=null&&(o!=null&&o.length)&&r.applyPostProcessor!==!1&&(s=VM.handle(o,s,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),s}resolve(s,a={}){let r,n,i,l,o;return Jt(s)&&(s=[s]),s.forEach(d=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(d,a),h=u.key;n=h;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const x=a.count!==void 0&&!Jt(a.count),p=x&&!a.ordinal&&a.count===0,v=a.context!==void 0&&(Jt(a.context)||typeof a.context=="number")&&a.context!=="",b=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);f.forEach(y=>{var j,w;this.isValidLookup(r)||(o=y,!v4[`${b[0]}-${y}`]&&((j=this.utils)!=null&&j.hasLoadedNamespace)&&!((w=this.utils)!=null&&w.hasLoadedNamespace(o))&&(v4[`${b[0]}-${y}`]=!0,this.logger.warn(`key "${n}" for languages "${b.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(S=>{var E;if(this.isValidLookup(r))return;l=S;const O=[h];if((E=this.i18nFormat)!=null&&E.addLookupKeys)this.i18nFormat.addLookupKeys(O,h,S,y,a);else{let A;x&&(A=this.pluralResolver.getSuffix(S,a.count,a));const D=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(a.ordinal&&A.indexOf(L)===0&&O.push(h+A.replace(L,this.options.pluralSeparator)),O.push(h+A),p&&O.push(h+D)),v){const B=`${h}${this.options.contextSeparator||"_"}${a.context}`;O.push(B),x&&(a.ordinal&&A.indexOf(L)===0&&O.push(B+A.replace(L,this.options.pluralSeparator)),O.push(B+A),p&&O.push(B+D))}}let _;for(;_=O.pop();)this.isValidLookup(r)||(i=_,r=this.getResource(S,y,_,a))}))})}),{res:r,usedKey:n,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,a,r,n={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(s,a,r,n):this.resourceStore.getResource(s,a,r,n)}getUsedParamsDetails(s={}){const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=s.replace&&!Jt(s.replace);let n=r?s.replace:s;if(r&&typeof s.count<"u"&&(n.count=s.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const i of a)delete n[i]}return n}static hasDefaultValue(s){const a="defaultValue";for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&a===r.substring(0,a.length)&&s[r]!==void 0)return!0;return!1}}class y4{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ki.create("languageUtils")}getScriptPartFromCode(s){if(s=af(s),!s||s.indexOf("-")<0)return null;const a=s.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(s){if(s=af(s),!s||s.indexOf("-")<0)return s;const a=s.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(s){if(Jt(s)&&s.indexOf("-")>-1){let a;try{a=Intl.getCanonicalLocales(s)[0]}catch{}return a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let a;return s.forEach(r=>{if(a)return;const n=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(n))&&(a=n)}),!a&&this.options.supportedLngs&&s.forEach(r=>{if(a)return;const n=this.getScriptPartFromCode(r);if(this.isSupportedCode(n))return a=n;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return a=i;a=this.options.supportedLngs.find(l=>{if(l===i)return l;if(!(l.indexOf("-")<0&&i.indexOf("-")<0)&&(l.indexOf("-")>0&&i.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===i||l.indexOf(i)===0&&i.length>1))return l})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(s,a){if(!s)return[];if(typeof s=="function"&&(s=s(a)),Jt(s)&&(s=[s]),Array.isArray(s))return s;if(!a)return s.default||[];let r=s[a];return r||(r=s[this.getScriptPartFromCode(a)]),r||(r=s[this.formatLanguageCode(a)]),r||(r=s[this.getLanguagePartFromCode(a)]),r||(r=s.default),r||[]}toResolveHierarchy(s,a){const r=this.getFallbackCodes((a===!1?[]:a)||this.options.fallbackLng||[],s),n=[],i=l=>{l&&(this.isSupportedCode(l)?n.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Jt(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(s))):Jt(s)&&i(this.formatLanguageCode(s)),r.forEach(l=>{n.indexOf(l)<0&&i(this.formatLanguageCode(l))}),n}}const N4={zero:0,one:1,two:2,few:3,many:4,other:5},j4={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class qq{constructor(s,a={}){this.languageUtils=s,this.options=a,this.logger=Ki.create("pluralResolver"),this.pluralRulesCache={}}addRule(s,a){this.rules[s]=a}clearCache(){this.pluralRulesCache={}}getRule(s,a={}){const r=af(s==="dev"?"en":s),n=a.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(r,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),j4;if(!s.match(/-|_/))return j4;const d=this.languageUtils.getLanguagePartFromCode(s);l=this.getRule(d,a)}return this.pluralRulesCache[i]=l,l}needsPlural(s,a={}){let r=this.getRule(s,a);return r||(r=this.getRule("dev",a)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(s,a,r={}){return this.getSuffixes(s,r).map(n=>`${a}${n}`)}getSuffixes(s,a={}){let r=this.getRule(s,a);return r||(r=this.getRule("dev",a)),r?r.resolvedOptions().pluralCategories.sort((n,i)=>N4[n]-N4[i]).map(n=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(s,a,r={}){const n=this.getRule(s,r);return n?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(a)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",a,r))}}const w4=(e,s,a,r=".",n=!0)=>{let i=Pq(e,s,a);return!i&&n&&Jt(a)&&(i=AS(e,a,r),i===void 0&&(i=AS(s,a,r))),i},Jy=e=>e.replace(/\$/g,"$$$$");class S4{constructor(s={}){var a;this.logger=Ki.create("interpolator"),this.options=s,this.format=((a=s==null?void 0:s.interpolation)==null?void 0:a.format)||(r=>r),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:a,escapeValue:r,useRawValueToEscape:n,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:d,formatSeparator:u,unescapeSuffix:h,unescapePrefix:f,nestingPrefix:x,nestingPrefixEscaped:p,nestingSuffix:v,nestingSuffixEscaped:b,nestingOptionsSeparator:y,maxReplaces:j,alwaysFormat:w}=s.interpolation;this.escape=a!==void 0?a:Mq,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?au(i):l||"{{",this.suffix=o?au(o):d||"}}",this.formatSeparator=u||",",this.unescapePrefix=h?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=x?au(x):p||au("$t("),this.nestingSuffix=v?au(v):b||au(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=j||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(a,r)=>(a==null?void 0:a.source)===r?(a.lastIndex=0,a):new RegExp(r,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(s,a,r,n){var p;let i,l,o;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=v=>{if(v.indexOf(this.formatSeparator)<0){const w=w4(a,d,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...n,...a,interpolationkey:v}):w}const b=v.split(this.formatSeparator),y=b.shift().trim(),j=b.join(this.formatSeparator).trim();return this.format(w4(a,d,y,this.options.keySeparator,this.options.ignoreJSONStructure),j,r,{...n,...a,interpolationkey:y})};this.resetRegExp();const h=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,f=((p=n==null?void 0:n.interpolation)==null?void 0:p.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>Jy(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?Jy(this.escape(v)):Jy(v)}].forEach(v=>{for(o=0;i=v.regex.exec(s);){const b=i[1].trim();if(l=u(b),l===void 0)if(typeof h=="function"){const j=h(s,i,n);l=Jt(j)?j:""}else if(n&&Object.prototype.hasOwnProperty.call(n,b))l="";else if(f){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${s}`),l="";else!Jt(l)&&!this.useRawValueToEscape&&(l=h4(l));const y=v.safeValue(l);if(s=s.replace(i[0],y),f?(v.regex.lastIndex+=l.length,v.regex.lastIndex-=i[0].length):v.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),s}nest(s,a,r={}){let n,i,l;const o=(d,u)=>{const h=this.nestingOptionsSeparator;if(d.indexOf(h)<0)return d;const f=d.split(new RegExp(`${h}[ ]*{`));let x=`{${f[1]}`;d=f[0],x=this.interpolate(x,l);const p=x.match(/'/g),v=x.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!v||v.length%2!==0)&&(x=x.replace(/'/g,'"'));try{l=JSON.parse(x),u&&(l={...u,...l})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,b),`${d}${h}${x}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;n=this.nestingRegexp.exec(s);){let d=[];l={...r},l=l.replace&&!Jt(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const u=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(u!==-1&&(d=n[1].slice(u).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),n[1]=n[1].slice(0,u)),i=a(o.call(this,n[1].trim(),l),l),i&&n[0]===s&&!Jt(i))return i;Jt(i)||(i=h4(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${s}`),i=""),d.length&&(i=d.reduce((h,f)=>this.format(h,f,r.lng,{...r,interpolationkey:n[1].trim()}),i.trim())),s=s.replace(n[0],i),this.regexp.lastIndex=0}return s}}const Hq=e=>{let s=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const r=e.split("(");s=r[0].toLowerCase().trim();const n=r[1].substring(0,r[1].length-1);s==="currency"&&n.indexOf(":")<0?a.currency||(a.currency=n.trim()):s==="relativetime"&&n.indexOf(":")<0?a.range||(a.range=n.trim()):n.split(";").forEach(l=>{if(l){const[o,...d]=l.split(":"),u=d.join(":").trim().replace(/^'+|'+$/g,""),h=o.trim();a[h]||(a[h]=u),u==="false"&&(a[h]=!1),u==="true"&&(a[h]=!0),isNaN(u)||(a[h]=parseInt(u,10))}})}return{formatName:s,formatOptions:a}},A4=e=>{const s={};return(a,r,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const l=r+JSON.stringify(i);let o=s[l];return o||(o=e(af(r),n),s[l]=o),o(a)}},Vq=e=>(s,a,r)=>e(af(a),r)(s);class Gq{constructor(s={}){this.logger=Ki.create("formatter"),this.options=s,this.init(s)}init(s,a={interpolation:{}}){this.formatSeparator=a.interpolation.formatSeparator||",";const r=a.cacheInBuiltFormats?A4:Vq;this.formats={number:r((n,i)=>{const l=new Intl.NumberFormat(n,{...i});return o=>l.format(o)}),currency:r((n,i)=>{const l=new Intl.NumberFormat(n,{...i,style:"currency"});return o=>l.format(o)}),datetime:r((n,i)=>{const l=new Intl.DateTimeFormat(n,{...i});return o=>l.format(o)}),relativetime:r((n,i)=>{const l=new Intl.RelativeTimeFormat(n,{...i});return o=>l.format(o,i.range||"day")}),list:r((n,i)=>{const l=new Intl.ListFormat(n,{...i});return o=>l.format(o)})}}add(s,a){this.formats[s.toLowerCase().trim()]=a}addCached(s,a){this.formats[s.toLowerCase().trim()]=A4(a)}format(s,a,r,n={}){const i=a.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(d=>d.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,d)=>{var f;const{formatName:u,formatOptions:h}=Hq(d);if(this.formats[u]){let x=o;try{const p=((f=n==null?void 0:n.formatParams)==null?void 0:f[n.interpolationkey])||{},v=p.locale||p.lng||n.locale||n.lng||r;x=this.formats[u](o,v,{...h,...n,...p})}catch(p){this.logger.warn(p)}return x}else this.logger.warn(`there was no format function for ${u}`);return o},s)}}const Wq=(e,s)=>{e.pending[s]!==void 0&&(delete e.pending[s],e.pendingCount--)};class Qq extends Gg{constructor(s,a,r,n={}){var i,l;super(),this.backend=s,this.store=a,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=Ki.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(l=(i=this.backend)==null?void 0:i.init)==null||l.call(i,r,n.backend,n)}queueLoad(s,a,r,n){const i={},l={},o={},d={};return s.forEach(u=>{let h=!0;a.forEach(f=>{const x=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?l[x]===void 0&&(l[x]=!0):(this.state[x]=1,h=!1,l[x]===void 0&&(l[x]=!0),i[x]===void 0&&(i[x]=!0),d[f]===void 0&&(d[f]=!0)))}),h||(o[u]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(d)}}loaded(s,a,r){const n=s.split("|"),i=n[0],l=n[1];a&&this.emit("failedLoading",i,l,a),!a&&r&&this.store.addResourceBundle(i,l,r,void 0,void 0,{skipCopy:!0}),this.state[s]=a?-1:2,a&&r&&(this.state[s]=0);const o={};this.queue.forEach(d=>{Rq(d.loaded,[i],l),Wq(d,s),a&&d.errors.push(a),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(u=>{o[u]||(o[u]={});const h=d.loaded[u];h.length&&h.forEach(f=>{o[u][f]===void 0&&(o[u][f]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(d=>!d.done)}read(s,a,r,n=0,i=this.retryTimeout,l){if(!s.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:a,fcName:r,tried:n,wait:i,callback:l});return}this.readingCalls++;const o=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&h&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,s,a,r,n+1,i*2,l)},i);return}l(u,h)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const u=d(s,a);u&&typeof u.then=="function"?u.then(h=>o(null,h)).catch(o):o(null,u)}catch(u){o(u)}return}return d(s,a,o)}prepareLoading(s,a,r={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();Jt(s)&&(s=this.languageUtils.toResolveHierarchy(s)),Jt(a)&&(a=[a]);const i=this.queueLoad(s,a,r,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(s,a,r){this.prepareLoading(s,a,{},r)}reload(s,a,r){this.prepareLoading(s,a,{reload:!0},r)}loadOne(s,a=""){const r=s.split("|"),n=r[0],i=r[1];this.read(n,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${a}loading namespace ${i} for language ${n} failed`,l),!l&&o&&this.logger.log(`${a}loaded namespace ${i} for language ${n}`,o),this.loaded(s,l,o)})}saveMissing(s,a,r,n,i,l={},o=()=>{}){var d,u,h,f,x;if((u=(d=this.services)==null?void 0:d.utils)!=null&&u.hasLoadedNamespace&&!((f=(h=this.services)==null?void 0:h.utils)!=null&&f.hasLoadedNamespace(a))){this.logger.warn(`did not save key "${r}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((x=this.backend)!=null&&x.create){const p={...l,isUpdate:i},v=this.backend.create.bind(this.backend);if(v.length<6)try{let b;v.length===5?b=v(s,a,r,n,p):b=v(s,a,r,n),b&&typeof b.then=="function"?b.then(y=>o(null,y)).catch(o):o(null,b)}catch(b){o(b)}else v(s,a,r,n,o,p)}!s||!s[0]||this.store.addResource(s[0],a,r,n)}}}const E4=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let s={};if(typeof e[1]=="object"&&(s=e[1]),Jt(e[1])&&(s.defaultValue=e[1]),Jt(e[2])&&(s.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const a=e[3]||e[2];Object.keys(a).forEach(r=>{s[r]=a[r]})}return s},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),C4=e=>{var s,a;return Jt(e.ns)&&(e.ns=[e.ns]),Jt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Jt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((a=(s=e.supportedLngs)==null?void 0:s.indexOf)==null?void 0:a.call(s,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},Mx=()=>{},Kq=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(a=>{typeof e[a]=="function"&&(e[a]=e[a].bind(e))})};class Bm extends Gg{constructor(s={},a){if(super(),this.options=C4(s),this.services={},this.logger=Ki,this.modules={external:[]},Kq(this),a&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,a),this;setTimeout(()=>{this.init(s,a)},0)}}init(s={},a){this.isInitializing=!0,typeof s=="function"&&(a=s,s={}),s.defaultNS==null&&s.ns&&(Jt(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const r=E4();this.options={...r,...this.options,...C4(s)},this.options.interpolation={...r.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const n=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Ki.init(n(this.modules.logger),this.options):Ki.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Gq;const h=new y4(this.options);this.store=new b4(this.options.resources,this.options);const f=this.services;f.logger=Ki,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new qq(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=n(u),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new S4(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Qq(n(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.languageDetector&&(f.languageDetector=n(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=n(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Tp(this.services,this.options),this.translator.on("*",(p,...v)=>{this.emit(p,...v)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Mx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...h)=>this.store[u](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...h)=>(this.store[u](...h),this)});const o=pm(),d=()=>{const u=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(f),a(h,f)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),o}loadResources(s,a=Mx){var i,l;let r=a;const n=Jt(s)?s:this.language;if(typeof s=="function"&&(r=s),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],d=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};n?d(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>d(h)),(l=(i=this.options.preload)==null?void 0:i.forEach)==null||l.call(i,u=>d(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(s,a,r){const n=pm();return typeof s=="function"&&(r=s,s=void 0),typeof a=="function"&&(r=a,a=void 0),s||(s=this.languages),a||(a=this.options.ns),r||(r=Mx),this.services.backendConnector.reload(s,a,i=>{n.resolve(),r(i)}),n}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&VM.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let a=0;a<this.languages.length;a++){const r=this.languages[a];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,a){this.isLanguageChangingTo=s;const r=pm();this.emit("languageChanging",s);const n=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,d)=>{d?this.isLanguageChangingTo===s&&(n(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),a&&a(o,(...u)=>this.t(...u))},l=o=>{var h,f;!s&&!o&&this.services.languageDetector&&(o=[]);const d=Jt(o)?o:o&&o[0],u=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Jt(o)?[o]:o);u&&(this.language||n(u),this.translator.language||this.translator.changeLanguage(u),(f=(h=this.services.languageDetector)==null?void 0:h.cacheUserLanguage)==null||f.call(h,u)),this.loadResources(u,x=>{i(x,u)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(s),r}getFixedT(s,a,r){const n=(i,l,...o)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([i,l].concat(o)):d={...l},d.lng=d.lng||n.lng,d.lngs=d.lngs||n.lngs,d.ns=d.ns||n.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||n.keyPrefix);const u=this.options.keySeparator||".";let h;return d.keyPrefix&&Array.isArray(i)?h=i.map(f=>(typeof f=="function"&&(f=ES(f,{...this.options,...l})),`${d.keyPrefix}${u}${f}`)):(typeof i=="function"&&(i=ES(i,{...this.options,...l})),h=d.keyPrefix?`${d.keyPrefix}${u}${i}`:i),this.t(h,d)};return Jt(s)?n.lng=s:n.lngs=s,n.ns=a,n.keyPrefix=r,n}t(...s){var a;return(a=this.translator)==null?void 0:a.translate(...s)}exists(...s){var a;return(a=this.translator)==null?void 0:a.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,a={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=a.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,d)=>{const u=this.services.backendConnector.state[`${o}|${d}`];return u===-1||u===0||u===2};if(a.precheck){const o=a.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,s)&&(!n||l(i,s)))}loadNamespaces(s,a){const r=pm();return this.options.ns?(Jt(s)&&(s=[s]),s.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{r.resolve(),a&&a(n)}),r):(a&&a(),Promise.resolve())}loadLanguages(s,a){const r=pm();Jt(s)&&(s=[s]);const n=this.options.preload||[],i=s.filter(l=>n.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=n.concat(i),this.loadResources(l=>{r.resolve(),a&&a(l)}),r):(a&&a(),Promise.resolve())}dir(s){var n,i;if(s||(s=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!s)return"rtl";try{const l=new Intl.Locale(s);if(l&&l.getTextInfo){const o=l.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new y4(E4());return s.toLowerCase().indexOf("-latn")>1?"ltr":a.indexOf(r.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},a){const r=new Bm(s,a);return r.createInstance=Bm.createInstance,r}cloneInstance(s={},a=Mx){const r=s.forkResourceStore;r&&delete s.forkResourceStore;const n={...this.options,...s,isClone:!0},i=new Bm(n);if((s.debug!==void 0||s.prefix!==void 0)&&(i.logger=i.logger.clone(s)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const o=Object.keys(this.store.data).reduce((d,u)=>(d[u]={...this.store.data[u]},d[u]=Object.keys(d[u]).reduce((h,f)=>(h[f]={...d[u][f]},h),d[u]),d),{});i.store=new b4(o,n),i.services.resourceStore=i.store}return s.interpolation&&(i.services.interpolator=new S4(n)),i.translator=new Tp(i.services,n),i.translator.on("*",(o,...d)=>{i.emit(o,...d)}),i.init(n,a),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Lr=Bm.createInstance();Lr.createInstance;Lr.dir;Lr.init;Lr.loadResources;Lr.reloadResources;Lr.use;Lr.changeLanguage;Lr.getFixedT;Lr.t;Lr.exists;Lr.setDefaultNamespace;Lr.hasLoadedNamespace;Lr.loadNamespaces;Lr.loadLanguages;const Jq=(e,s,a,r)=>{var i,l,o,d;const n=[a,{code:s,...r||{}}];if((l=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&l.forward)return e.services.logger.forward(n,"warn","react-i18next::",!0);Yc(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),(d=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&d.warn?e.services.logger.warn(...n):console!=null&&console.warn&&console.warn(...n)},T4={},WM=(e,s,a,r)=>{Yc(a)&&T4[a]||(Yc(a)&&(T4[a]=new Date),Jq(e,s,a,r))},QM=(e,s)=>()=>{if(e.isInitialized)s();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),s()};e.on("initialized",a)}},CS=(e,s,a)=>{e.loadNamespaces(s,QM(e,a))},_4=(e,s,a,r)=>{if(Yc(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(s)>-1)return CS(e,a,r);a.forEach(n=>{e.options.ns.indexOf(n)<0&&e.options.ns.push(n)}),e.loadLanguages(s,QM(e,r))},Yq=(e,s,a={})=>!s.languages||!s.languages.length?(WM(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(e,{lng:a.lng,precheck:(r,n)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!n(r.isLanguageChangingTo,e))return!1}}),Yc=e=>typeof e=="string",Xq=e=>typeof e=="object"&&e!==null,Zq=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,e9={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},t9=e=>e9[e],s9=e=>e.replace(Zq,t9);let TS={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:s9};const a9=(e={})=>{TS={...TS,...e}},r9=()=>TS;let KM;const n9=e=>{KM=e},i9=()=>KM,l9={type:"3rdParty",init(e){a9(e.options.react),n9(e)}},o9=C.createContext();class c9{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Yy={exports:{}},Xy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k4;function d9(){if(k4)return Xy;k4=1;var e=Vg();function s(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var a=typeof Object.is=="function"?Object.is:s,r=e.useState,n=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function o(f,x){var p=x(),v=r({inst:{value:p,getSnapshot:x}}),b=v[0].inst,y=v[1];return i(function(){b.value=p,b.getSnapshot=x,d(b)&&y({inst:b})},[f,p,x]),n(function(){return d(b)&&y({inst:b}),f(function(){d(b)&&y({inst:b})})},[f]),l(p),p}function d(f){var x=f.getSnapshot;f=f.value;try{var p=x();return!a(f,p)}catch{return!0}}function u(f,x){return x()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Xy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Xy}var O4;function u9(){return O4||(O4=1,Yy.exports=d9()),Yy.exports}var JM=u9();const m9=(e,s)=>Yc(s)?s:Xq(s)&&Yc(s.defaultValue)?s.defaultValue:Array.isArray(e)?e[e.length-1]:e,f9={t:m9,ready:!1},h9=()=>()=>{},Kt=(e,s={})=>{var L,B,I;const{i18n:a}=s,{i18n:r,defaultNS:n}=C.useContext(o9)||{},i=a||r||i9();i&&!i.reportNamespaces&&(i.reportNamespaces=new c9),i||WM(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=C.useMemo(()=>{var T;return{...r9(),...(T=i==null?void 0:i.options)==null?void 0:T.react,...s}},[i,s]),{useSuspense:o,keyPrefix:d}=l,u=n||((L=i==null?void 0:i.options)==null?void 0:L.defaultNS),h=Yc(u)?[u]:u||["translation"],f=C.useMemo(()=>h,h);(I=(B=i==null?void 0:i.reportNamespaces)==null?void 0:B.addUsedNamespaces)==null||I.call(B,f);const x=C.useRef(0),p=C.useCallback(T=>{if(!i)return h9;const{bindI18n:z,bindI18nStore:k}=l,F=()=>{x.current+=1,T()};return z&&i.on(z,F),k&&i.store.on(k,F),()=>{z&&z.split(" ").forEach(P=>i.off(P,F)),k&&k.split(" ").forEach(P=>i.store.off(P,F))}},[i,l]),v=C.useRef(),b=C.useCallback(()=>{if(!i)return f9;const T=!!(i.isInitialized||i.initializedStoreOnce)&&f.every(Y=>Yq(Y,i,l)),z=s.lng||i.language,k=x.current,F=v.current;if(F&&F.ready===T&&F.lng===z&&F.keyPrefix===d&&F.revision===k)return F;const G={t:i.getFixedT(z,l.nsMode==="fallback"?f:f[0],d),ready:T,lng:z,keyPrefix:d,revision:k};return v.current=G,G},[i,f,d,l,s.lng]),[y,j]=C.useState(0),{t:w,ready:S}=JM.useSyncExternalStore(p,b,b);C.useEffect(()=>{if(i&&!S&&!o){const T=()=>j(z=>z+1);s.lng?_4(i,s.lng,f,T):CS(i,f,T)}},[i,s.lng,f,S,o,y]);const O=i||{},_=C.useRef(null),E=C.useRef(),A=T=>{const z=Object.getOwnPropertyDescriptors(T);z.__original&&delete z.__original;const k=Object.create(Object.getPrototypeOf(T),z);if(!Object.prototype.hasOwnProperty.call(k,"__original"))try{Object.defineProperty(k,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return k},D=C.useMemo(()=>{const T=O,z=T==null?void 0:T.language;let k=T;T&&(_.current&&_.current.__original===T?E.current!==z?(k=A(T),_.current=k,E.current=z):k=_.current:(k=A(T),_.current=k,E.current=z));const F=[w,k,S];return F.t=w,F.i18n=k,F.ready=S,F},[w,O,S,O.resolvedLanguage,O.language,O.languages]);if(i&&o&&!S)throw new Promise(T=>{const z=()=>T();s.lng?_4(i,s.lng,f,z):CS(i,f,z)});return D};var _n=(e=>(e.MANAGER="MANAGER",e.BUYER="BUYER",e))(_n||{}),YM=(e=>(e.SPARE_PARTS_SHOP="  ",e.RENTAL_COMPANY="  ",e.SALES_REP=" ",e.MAINTENANCE_CENTER=" ",e.INSURANCE_COMPANY=" ",e))(YM||{}),xt=(e=>(e.PENDING=" ",e.APPROVED=" ",e.REJECTED="",e.SHIPPED=" ",e.DELIVERED=" ",e.CANCELLED=" ",e))(xt||{});const Lx=[{key:"partNumber",label:" ",required:!0},{key:"name",label:" ",required:!0},{key:"brand",label:"",required:!1},{key:"qtyTotal",label:"",required:!0},{key:"priceWholesale",label:" ",required:!1},{key:"priceRetail",label:" ",required:!1},{key:"priceWholeWholesale",label:"  ",required:!1},{key:"priceEcommerce",label:"  ",required:!1},{key:"qtyStore103",label:"  103",required:!1},{key:"qtyStore105",label:"  105",required:!1},{key:"rack103",label:"  103",required:!1},{key:"rack105",label:"  105",required:!1},{key:"carName",label:" ",required:!1},{key:"description",label:"",required:!1},{key:"manufacturerPartNumber",label:" ",required:!1},{key:"globalCategory",label:" ",required:!1},{key:"modelYear",label:" ",required:!1},{key:"quality",label:"",required:!1}],Zy={dashboard:" ",products:"",customers:"",customer_requests:" ",account_requests:"  ",quotes:" ",orders:"",imports:" ",missing:"",crm:" ",activity_log:" ",notifications:"",settings_general:" ",settings_status_labels:" ",settings_api:" API",settings_backup:" ",settings_security:" ",users:"",roles:" ",export_center:" ",content_management:" ",other:""},I4={view:"",create:"",edit:"",delete:"",approve:"",reject:"",export:"",import:"",configure:"",manage_status:" ",manage_users:" ",manage_roles:" ",run_backup:"  ",manage_api:" API",other:""},R4={dashboard:["view"],products:["view","create","edit","delete","export","import"],customers:["view","create","edit","delete","export","manage_status"],customer_requests:["view","edit","approve","reject","export"],account_requests:["view","approve","reject","export"],quotes:["view","create","edit","delete","approve","reject","export"],orders:["view","create","edit","delete","approve","reject","export","manage_status"],imports:["view","create","edit","delete","approve","reject","export","manage_status"],missing:["view","create","edit","delete","export","manage_status"],crm:["view","create","edit","delete","export"],activity_log:["view","export"],notifications:["view","create","delete"],settings_general:["view","configure"],settings_status_labels:["view","create","edit","delete"],settings_api:["view","configure","manage_api"],settings_backup:["view","run_backup"],settings_security:["view","configure"],users:["view","create","edit","delete","manage_users"],roles:["view","create","edit","delete","manage_roles"],export_center:["view","export"],content_management:["view","create","edit","delete"],other:["view","other"]};function x9(e){return e.replace(/[-]/g,s=>String("".indexOf(s)))}function Zi(e){if(!e)return"";let s=x9(e);return s=s.toUpperCase(),s=s.replace(/[^A-Z0-9]/g,""),s}function rf(e){return Zi(e).replace(/[^0-9]/g,"")}function p9(e){return{clean:Zi(e),numericCore:rf(e)}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var _p={};_p.version="0.18.5";var XM=1252,g9=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],gA={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},bA=function(e){g9.indexOf(e)!=-1&&(XM=gA[0]=e)};function b9(){bA(1252)}var ki=function(e){bA(e)};function vA(){ki(1200),b9()}function P4(e){for(var s=[],a=0,r=e.length;a<r;++a)s[a]=e.charCodeAt(a);return s}function v9(e){for(var s=[],a=0;a<e.length>>1;++a)s[a]=String.fromCharCode(e.charCodeAt(2*a)+(e.charCodeAt(2*a+1)<<8));return s.join("")}function ZM(e){for(var s=[],a=0;a<e.length>>1;++a)s[a]=String.fromCharCode(e.charCodeAt(2*a+1)+(e.charCodeAt(2*a)<<8));return s.join("")}var Im=function(e){var s=e.charCodeAt(0),a=e.charCodeAt(1);return s==255&&a==254?v9(e.slice(2)):s==254&&a==255?ZM(e.slice(2)):s==65279?e.slice(1):e},Fx=function(s){return String.fromCharCode(s)},D4=function(s){return String.fromCharCode(s)},nf,Io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function lf(e){for(var s="",a=0,r=0,n=0,i=0,l=0,o=0,d=0,u=0;u<e.length;)a=e.charCodeAt(u++),i=a>>2,r=e.charCodeAt(u++),l=(a&3)<<4|r>>4,n=e.charCodeAt(u++),o=(r&15)<<2|n>>6,d=n&63,isNaN(r)?o=d=64:isNaN(n)&&(d=64),s+=Io.charAt(i)+Io.charAt(l)+Io.charAt(o)+Io.charAt(d);return s}function zn(e){var s="",a=0,r=0,n=0,i=0,l=0,o=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Io.indexOf(e.charAt(u++)),l=Io.indexOf(e.charAt(u++)),a=i<<2|l>>4,s+=String.fromCharCode(a),o=Io.indexOf(e.charAt(u++)),r=(l&15)<<4|o>>2,o!==64&&(s+=String.fromCharCode(r)),d=Io.indexOf(e.charAt(u++)),n=(o&3)<<6|d,d!==64&&(s+=String.fromCharCode(n));return s}var fs=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Ql=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(s,a){return a?new Buffer(s,a):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}})();function qo(e){return fs?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function M4(e){return fs?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Pn=function(s){return fs?Ql(s,"binary"):s.split("").map(function(a){return a.charCodeAt(0)&255})};function Wg(e){if(typeof ArrayBuffer>"u")return Pn(e);for(var s=new ArrayBuffer(e.length),a=new Uint8Array(s),r=0;r!=e.length;++r)a[r]=e.charCodeAt(r)&255;return s}function Zo(e){if(Array.isArray(e))return e.map(function(r){return String.fromCharCode(r)}).join("");for(var s=[],a=0;a<e.length;++a)s[a]=String.fromCharCode(e[a]);return s.join("")}function y9(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function yA(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return yA(new Uint8Array(e));for(var s=new Array(e.length),a=0;a<e.length;++a)s[a]=e[a];return s}var vr=fs?function(e){return Buffer.concat(e.map(function(s){return Buffer.isBuffer(s)?s:Ql(s)}))}:function(e){if(typeof Uint8Array<"u"){var s=0,a=0;for(s=0;s<e.length;++s)a+=e[s].length;var r=new Uint8Array(a),n=0;for(s=0,a=0;s<e.length;a+=n,++s)if(n=e[s].length,e[s]instanceof Uint8Array)r.set(e[s],a);else{if(typeof e[s]=="string")throw"wtf";r.set(new Uint8Array(e[s]),a)}return r}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function N9(e){for(var s=[],a=0,r=e.length+250,n=qo(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)n[a++]=l;else if(l<2048)n[a++]=192|l>>6&31,n[a++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;n[a++]=240|l>>8&7,n[a++]=128|l>>2&63,n[a++]=128|o>>6&15|(l&3)<<4,n[a++]=128|o&63}else n[a++]=224|l>>12&15,n[a++]=128|l>>6&63,n[a++]=128|l&63;a>r&&(s.push(n.slice(0,a)),a=0,n=qo(65535),r=65530)}return s.push(n.slice(0,a)),vr(s)}var rn=/\u0000/g,Rm=/[\u0001-\u0006]/g;function Su(e){for(var s="",a=e.length-1;a>=0;)s+=e.charAt(a--);return s}function Oi(e,s){var a=""+e;return a.length>=s?a:Pa("0",s-a.length)+a}function NA(e,s){var a=""+e;return a.length>=s?a:Pa(" ",s-a.length)+a}function kp(e,s){var a=""+e;return a.length>=s?a:a+Pa(" ",s-a.length)}function j9(e,s){var a=""+Math.round(e);return a.length>=s?a:Pa("0",s-a.length)+a}function w9(e,s){var a=""+e;return a.length>=s?a:Pa("0",s-a.length)+a}var L4=Math.pow(2,32);function ru(e,s){if(e>L4||e<-L4)return j9(e,s);var a=Math.round(e);return w9(a,s)}function Op(e,s){return s=s||0,e.length>=7+s&&(e.charCodeAt(s)|32)===103&&(e.charCodeAt(s+1)|32)===101&&(e.charCodeAt(s+2)|32)===110&&(e.charCodeAt(s+3)|32)===101&&(e.charCodeAt(s+4)|32)===114&&(e.charCodeAt(s+5)|32)===97&&(e.charCodeAt(s+6)|32)===108}var F4=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],e1=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function S9(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Ht={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},U4={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},A9={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Ip(e,s,a){for(var r=e<0?-1:1,n=e*r,i=0,l=1,o=0,d=1,u=0,h=0,f=Math.floor(n);u<s&&(f=Math.floor(n),o=f*l+i,h=f*u+d,!(n-f<5e-8));)n=1/(n-f),i=l,l=o,d=u,u=h;if(h>s&&(u>s?(h=d,o=i):(h=u,o=l)),!a)return[0,r*o,h];var x=Math.floor(r*o/h);return[x,r*o-x*h,h]}function Dc(e,s,a){if(e>2958465||e<0)return null;var r=e|0,n=Math.floor(86400*(e-r)),i=0,l=[],o={D:r,T:n,u:86400*(e-r)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),s&&s.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++r,++o.D)),r===60)l=a?[1317,10,29]:[1900,2,29],i=3;else if(r===0)l=a?[1317,8,29]:[1900,1,0],i=6;else{r>60&&--r;var d=new Date(1900,0,1);d.setDate(d.getDate()+r-1),l=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),r<60&&(i=(i+6)%7),a&&(i=O9(d,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=i,o}var e8=new Date(1899,11,31,0,0,0),E9=e8.getTime(),C9=new Date(1900,2,1,0,0,0);function t8(e,s){var a=e.getTime();return s?a-=1461*24*60*60*1e3:e>=C9&&(a+=1440*60*1e3),(a-(E9+(e.getTimezoneOffset()-e8.getTimezoneOffset())*6e4))/(1440*60*1e3)}function jA(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function T9(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function _9(e){var s=e<0?12:11,a=jA(e.toFixed(12));return a.length<=s||(a=e.toPrecision(10),a.length<=s)?a:e.toExponential(5)}function k9(e){var s=jA(e.toFixed(11));return s.length>(e<0?12:11)||s==="0"||s==="-0"?e.toPrecision(6):s}function of(e){var s=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),a;return s>=-4&&s<=-1?a=e.toPrecision(10+s):Math.abs(s)<=9?a=_9(e):s===10?a=e.toFixed(10).substr(0,12):a=k9(e),jA(T9(a.toUpperCase()))}function Xc(e,s){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):of(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return hi(14,t8(e,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+e)}function O9(e,s){s[0]-=581;var a=e.getDay();return e<60&&(a=(a+6)%7),a}function I9(e,s,a,r){var n="",i=0,l=0,o=a.y,d,u=0;switch(e){case 98:o=a.y+543;case 121:switch(s.length){case 1:case 2:d=o%100,u=2;break;default:d=o%1e4,u=4;break}break;case 109:switch(s.length){case 1:case 2:d=a.m,u=s.length;break;case 3:return e1[a.m-1][1];case 5:return e1[a.m-1][0];default:return e1[a.m-1][2]}break;case 100:switch(s.length){case 1:case 2:d=a.d,u=s.length;break;case 3:return F4[a.q][0];default:return F4[a.q][1]}break;case 104:switch(s.length){case 1:case 2:d=1+(a.H+11)%12,u=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:d=a.H,u=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:d=a.M,u=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return a.u===0&&(s=="s"||s=="ss")?Oi(a.S,s.length):(r>=2?l=r===3?1e3:100:l=r===1?10:1,i=Math.round(l*(a.S+a.u)),i>=60*l&&(i=0),s==="s"?i===0?"0":""+i/l:(n=Oi(i,2+r),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":d=a.D*24+a.H;break;case"[m]":case"[mm]":d=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":d=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+s}u=s.length===3?1:2;break;case 101:d=o,u=1;break}var h=u>0?Oi(d,u):"";return h}function Ro(e){var s=3;if(e.length<=s)return e;for(var a=e.length%s,r=e.substr(0,a);a!=e.length;a+=s)r+=(r.length>0?",":"")+e.substr(a,s);return r}var s8=/%/g;function R9(e,s,a){var r=s.replace(s8,""),n=s.length-r.length;return Pl(e,r,a*Math.pow(10,2*n))+Pa("%",n)}function P9(e,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Pl(e,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function a8(e,s){var a,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+a8(e,-s);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),a=(s/Math.pow(10,i)).toPrecision(r+1+(n+i)%n),a.indexOf("e")===-1){var l=Math.floor(Math.log(s)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(l-a.length+i):a+="E+"+(l-i);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,n)+"."+a.substr(2+n),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,d,u,h){return d+u+h.substr(0,(n+i)%n)+"."+h.substr(i)+"E"})}else a=s.toExponential(r);return e.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),e.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var r8=/# (\?+)( ?)\/( ?)(\d+)/;function D9(e,s,a){var r=parseInt(e[4],10),n=Math.round(s*r),i=Math.floor(n/r),l=n-i*r,o=r;return a+(i===0?"":""+i)+" "+(l===0?Pa(" ",e[1].length+1+e[4].length):NA(l,e[1].length)+e[2]+"/"+e[3]+Oi(o,e[4].length))}function M9(e,s,a){return a+(s===0?"":""+s)+Pa(" ",e[1].length+2+e[4].length)}var n8=/^#*0*\.([0#]+)/,i8=/\).*[0#]/,l8=/\(###\) ###\\?-####/;function tn(e){for(var s="",a,r=0;r!=e.length;++r)switch(a=e.charCodeAt(r)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(a)}return s}function z4(e,s){var a=Math.pow(10,s);return""+Math.round(e*a)/a}function B4(e,s){var a=e-Math.floor(e),r=Math.pow(10,s);return s<(""+Math.round(a*r)).length?0:Math.round(a*r)}function L9(e,s){return s<(""+Math.round((e-Math.floor(e))*Math.pow(10,s))).length?1:0}function F9(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function si(e,s,a){if(e.charCodeAt(0)===40&&!s.match(i8)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?si("n",r,a):"("+si("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return P9(e,s,a);if(s.indexOf("%")!==-1)return R9(e,s,a);if(s.indexOf("E")!==-1)return a8(s,a);if(s.charCodeAt(0)===36)return"$"+si(e,s.substr(s.charAt(1)==" "?2:1),a);var n,i,l,o,d=Math.abs(a),u=a<0?"-":"";if(s.match(/^00+$/))return u+ru(d,s.length);if(s.match(/^[#?]+$/))return n=ru(a,0),n==="0"&&(n=""),n.length>s.length?n:tn(s.substr(0,s.length-n.length))+n;if(i=s.match(r8))return D9(i,d,u);if(s.match(/^#+0+$/))return u+ru(d,s.length-s.indexOf("0"));if(i=s.match(n8))return n=z4(a,i[1].length).replace(/^([^\.]+)$/,"$1."+tn(i[1])).replace(/\.$/,"."+tn(i[1])).replace(/\.(\d*)$/,function(v,b){return"."+b+Pa("0",tn(i[1]).length-b.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return u+z4(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return u+Ro(ru(d,0));if(i=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+si(e,s,-a):Ro(""+(Math.floor(a)+L9(a,i[1].length)))+"."+Oi(B4(a,i[1].length),i[1].length);if(i=s.match(/^#,#*,#0/))return si(e,s.replace(/^#,#*,/,""),a);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Su(si(e,s.replace(/[\\-]/g,""),a)),l=0,Su(Su(s.replace(/\\/g,"")).replace(/[0#]/g,function(v){return l<n.length?n.charAt(l++):v==="0"?"0":""}));if(s.match(l8))return n=si(e,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var h="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Ip(d,Math.pow(10,l)-1,!1),n=""+u,h=Pl("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),n+=h+i[2]+"/"+i[3],h=kp(o[2],l),h.length<i[4].length&&(h=tn(i[4].substr(i[4].length-h.length))+h),n+=h,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Ip(d,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?NA(o[1],l)+i[2]+"/"+i[3]+kp(o[2],l):Pa(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=ru(a,0),s.length<=n.length?n:tn(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var f=s.indexOf(".")-l,x=s.length-n.length-f;return tn(s.substr(0,f)+n+s.substr(s.length-x))}if(i=s.match(/^00,000\.([#0]*0)$/))return l=B4(a,i[1].length),a<0?"-"+si(e,s,-a):Ro(F9(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Oi(0,3-v.length):"")+v})+"."+Oi(l,i[1].length);switch(s){case"###,##0.00":return si(e,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var p=Ro(ru(d,0));return p!=="0"?u+p:"";case"###,###.00":return si(e,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return si(e,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function U9(e,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Pl(e,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function z9(e,s,a){var r=s.replace(s8,""),n=s.length-r.length;return Pl(e,r,a*Math.pow(10,2*n))+Pa("%",n)}function o8(e,s){var a,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+o8(e,-s);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),a=(s/Math.pow(10,i)).toPrecision(r+1+(n+i)%n),!a.match(/[Ee]/)){var l=Math.floor(Math.log(s)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(l-a.length+i):a+="E+"+(l-i),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,d,u,h){return d+u+h.substr(0,(n+i)%n)+"."+h.substr(i)+"E"})}else a=s.toExponential(r);return e.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),e.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function Gi(e,s,a){if(e.charCodeAt(0)===40&&!s.match(i8)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?Gi("n",r,a):"("+Gi("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return U9(e,s,a);if(s.indexOf("%")!==-1)return z9(e,s,a);if(s.indexOf("E")!==-1)return o8(s,a);if(s.charCodeAt(0)===36)return"$"+Gi(e,s.substr(s.charAt(1)==" "?2:1),a);var n,i,l,o,d=Math.abs(a),u=a<0?"-":"";if(s.match(/^00+$/))return u+Oi(d,s.length);if(s.match(/^[#?]+$/))return n=""+a,a===0&&(n=""),n.length>s.length?n:tn(s.substr(0,s.length-n.length))+n;if(i=s.match(r8))return M9(i,d,u);if(s.match(/^#+0+$/))return u+Oi(d,s.length-s.indexOf("0"));if(i=s.match(n8))return n=(""+a).replace(/^([^\.]+)$/,"$1."+tn(i[1])).replace(/\.$/,"."+tn(i[1])),n=n.replace(/\.(\d*)$/,function(v,b){return"."+b+Pa("0",tn(i[1]).length-b.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return u+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return u+Ro(""+d);if(i=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+Gi(e,s,-a):Ro(""+a)+"."+Pa("0",i[1].length);if(i=s.match(/^#,#*,#0/))return Gi(e,s.replace(/^#,#*,/,""),a);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Su(Gi(e,s.replace(/[\\-]/g,""),a)),l=0,Su(Su(s.replace(/\\/g,"")).replace(/[0#]/g,function(v){return l<n.length?n.charAt(l++):v==="0"?"0":""}));if(s.match(l8))return n=Gi(e,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var h="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Ip(d,Math.pow(10,l)-1,!1),n=""+u,h=Pl("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),n+=h+i[2]+"/"+i[3],h=kp(o[2],l),h.length<i[4].length&&(h=tn(i[4].substr(i[4].length-h.length))+h),n+=h,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Ip(d,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?NA(o[1],l)+i[2]+"/"+i[3]+kp(o[2],l):Pa(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=""+a,s.length<=n.length?n:tn(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var f=s.indexOf(".")-l,x=s.length-n.length-f;return tn(s.substr(0,f)+n+s.substr(s.length-x))}if(i=s.match(/^00,000\.([#0]*0)$/))return a<0?"-"+Gi(e,s,-a):Ro(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Oi(0,3-v.length):"")+v})+"."+Oi(0,i[1].length);switch(s){case"###,###":case"##,###":case"#,###":var p=Ro(""+d);return p!=="0"?u+p:"";default:if(s.match(/\.[0#?]*$/))return Gi(e,s.slice(0,s.lastIndexOf(".")),a)+tn(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Pl(e,s,a){return(a|0)===a?Gi(e,s,a):si(e,s,a)}function B9(e){for(var s=[],a=!1,r=0,n=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:a=!a;break;case 95:case 42:case 92:++r;break;case 59:s[s.length]=e.substr(n,r-n),n=r+1}if(s[s.length]=e.substr(n),a===!0)throw new Error("Format |"+e+"| unterminated string ");return s}var c8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function d0(e){for(var s=0,a="",r="";s<e.length;)switch(a=e.charAt(s)){case"G":Op(e,s)&&(s+=6),s++;break;case'"':for(;e.charCodeAt(++s)!==34&&s<e.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(s,3).toUpperCase()==="A/P"||e.substr(s,5).toUpperCase()==="AM/PM"||e.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(r=a;e.charAt(s++)!=="]"&&s<e.length;)r+=e.charAt(s);if(r.match(c8))return!0;break;case".":case"0":case"#":for(;s<e.length&&("0#?.,E+-%".indexOf(a=e.charAt(++s))>-1||a=="\\"&&e.charAt(s+1)=="-"&&"0#".indexOf(e.charAt(s+2))>-1););break;case"?":for(;e.charAt(++s)===a;);break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function $9(e,s,a,r){for(var n=[],i="",l=0,o="",d="t",u,h,f,x="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!Op(e,l))throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(f=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(f);n[n.length]={t:"t",v:i},++l;break;case"\\":var p=e.charAt(++l),v=p==="("||p===")"?p:"t";n[n.length]={t:v,v:p},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:s},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(u==null&&(u=Dc(s,a,e.charAt(l+1)==="2"),u==null))return"";n[n.length]={t:"X",v:e.substr(l,2)},d=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||u==null&&(u=Dc(s,a),u==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&d.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=x),n[n.length]={t:o,v:i},d=o;break;case"A":case"a":case"":var b={t:o,v:o};if(u==null&&(u=Dc(s,a)),e.substr(l,3).toUpperCase()==="A/P"?(u!=null&&(b.v=u.H>=12?"P":"A"),b.t="T",x="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(u!=null&&(b.v=u.H>=12?"PM":"AM"),b.t="T",l+=5,x="h"):e.substr(l,5).toUpperCase()==="/"?(u!=null&&(b.v=u.H>=12?"":""),b.t="T",l+=5,x="h"):(b.t="t",++l),u==null&&b.t==="T")return"";n[n.length]=b,d=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(c8)){if(u==null&&(u=Dc(s,a),u==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",d0(e)||(n[n.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;n[n.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;n[n.length]={t:o,v:i},d=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:r===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:o,v:o},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"t",v:o},++l;break}var y=0,j=0,w;for(l=n.length-1,d="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=x,d="h",y<1&&(y=1);break;case"s":(w=n[l].v.match(/\.0+$/))&&(j=Math.max(j,w[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":d=n[l].t;break;case"m":d==="s"&&(n[l].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&n[l].v.match(/[Hh]/)&&(y=1),y<2&&n[l].v.match(/[Mm]/)&&(y=2),y<3&&n[l].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var S="",O;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=I9(n[l].t.charCodeAt(0),n[l].v,u,j),n[l].t="t";break;case"n":case"?":for(O=l+1;n[O]!=null&&((o=n[O].t)==="?"||o==="D"||(o===" "||o==="t")&&n[O+1]!=null&&(n[O+1].t==="?"||n[O+1].t==="t"&&n[O+1].v==="/")||n[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[O].v==="/"||n[O].v===" "&&n[O+1]!=null&&n[O+1].t=="?"));)n[l].v+=n[O].v,n[O]={v:"",t:";"},++O;S+=n[l].v,l=O-1;break;case"G":n[l].t="t",n[l].v=Xc(s,a);break}var _="",E,A;if(S.length>0){S.charCodeAt(0)==40?(E=s<0&&S.charCodeAt(0)===45?-s:s,A=Pl("n",S,E)):(E=s<0&&r>1?-s:s,A=Pl("n",S,E),E<0&&n[0]&&n[0].t=="t"&&(A=A.substr(1),n[0].v="-"+n[0].v)),O=A.length-1;var D=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){D=l;break}var L=n.length;if(D===n.length&&A.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(O>=n[l].v.length-1?(O-=n[l].v.length,n[l].v=A.substr(O+1,n[l].v.length)):O<0?n[l].v="":(n[l].v=A.substr(0,O+1),O=-1),n[l].t="t",L=l);O>=0&&L<n.length&&(n[L].v=A.substr(0,O+1)+n[L].v)}else if(D!==n.length&&A.indexOf("E")===-1){for(O=A.indexOf(".")-1,l=D;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(h=n[l].v.indexOf(".")>-1&&l===D?n[l].v.indexOf(".")-1:n[l].v.length-1,_=n[l].v.substr(h+1);h>=0;--h)O>=0&&(n[l].v.charAt(h)==="0"||n[l].v.charAt(h)==="#")&&(_=A.charAt(O--)+_);n[l].v=_,n[l].t="t",L=l}for(O>=0&&L<n.length&&(n[L].v=A.substr(0,O+1)+n[L].v),O=A.indexOf(".")+1,l=D;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==D)){for(h=n[l].v.indexOf(".")>-1&&l===D?n[l].v.indexOf(".")+1:0,_=n[l].v.substr(0,h);h<n[l].v.length;++h)O<A.length&&(_+=A.charAt(O++));n[l].v=_,n[l].t="t",L=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(E=r>1&&s<0&&l>0&&n[l-1].v==="-"?-s:s,n[l].v=Pl(n[l].t,n[l].v,E),n[l].t="t");var B="";for(l=0;l!==n.length;++l)n[l]!=null&&(B+=n[l].v);return B}var $4=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function q4(e,s){if(s==null)return!1;var a=parseFloat(s[2]);switch(s[1]){case"=":if(e==a)return!0;break;case">":if(e>a)return!0;break;case"<":if(e<a)return!0;break;case"<>":if(e!=a)return!0;break;case">=":if(e>=a)return!0;break;case"<=":if(e<=a)return!0;break}return!1}function q9(e,s){var a=B9(e),r=a.length,n=a[r-1].indexOf("@");if(r<4&&n>-1&&--r,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof s!="number")return[4,a.length===4||n>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=n>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=n>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=n>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var i=s>0?a[0]:s<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[r,i];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var l=a[0].match($4),o=a[1].match($4);return q4(s,l)?[r,a[0]]:q4(s,o)?[r,a[1]]:[r,a[l!=null&&o!=null?2:1]]}return[r,i]}function hi(e,s,a){a==null&&(a={});var r="";switch(typeof e){case"string":e=="m/d/yy"&&a.dateNF?r=a.dateNF:r=e;break;case"number":e==14&&a.dateNF?r=a.dateNF:r=(a.table!=null?a.table:Ht)[e],r==null&&(r=a.table&&a.table[U4[e]]||Ht[U4[e]]),r==null&&(r=A9[e]||"General");break}if(Op(r,0))return Xc(s,a);s instanceof Date&&(s=t8(s,a.date1904));var n=q9(r,s);if(Op(n[1]))return Xc(s,a);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return $9(n[1],s,a,n[0])}function Dl(e,s){if(typeof s!="number"){s=+s||-1;for(var a=0;a<392;++a){if(Ht[a]==null){s<0&&(s=a);continue}if(Ht[a]==e){s=a;break}}s<0&&(s=391)}return Ht[s]=e,s}function Qg(e){for(var s=0;s!=392;++s)e[s]!==void 0&&Dl(e[s],s)}function u0(){Ht=S9()}var H9={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},d8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function V9(e){var s=typeof e=="number"?Ht[e]:e;return s=s.replace(d8,"(\\d+)"),new RegExp("^"+s+"$")}function G9(e,s,a){var r=-1,n=-1,i=-1,l=-1,o=-1,d=-1;(s.match(d8)||[]).forEach(function(f,x){var p=parseInt(a[x+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=p;break;case"d":i=p;break;case"h":l=p;break;case"s":d=p;break;case"m":l>=0?o=p:n=p;break}}),d>=0&&o==-1&&n>=0&&(o=n,n=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var h=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return l==-1&&o==-1&&d==-1?u:r==-1&&n==-1&&i==-1?h:u+"T"+h}var W9=(function(){var e={};e.version="1.2.0";function s(){for(var A=0,D=new Array(256),L=0;L!=256;++L)A=L,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,D[L]=A;return typeof Int32Array<"u"?new Int32Array(D):D}var a=s();function r(A){var D=0,L=0,B=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)I[B]=A[B];for(B=0;B!=256;++B)for(L=A[B],D=256+B;D<4096;D+=256)L=I[D]=L>>>8^A[L&255];var T=[];for(B=1;B!=16;++B)T[B-1]=typeof Int32Array<"u"?I.subarray(B*256,B*256+256):I.slice(B*256,B*256+256);return T}var n=r(a),i=n[0],l=n[1],o=n[2],d=n[3],u=n[4],h=n[5],f=n[6],x=n[7],p=n[8],v=n[9],b=n[10],y=n[11],j=n[12],w=n[13],S=n[14];function O(A,D){for(var L=D^-1,B=0,I=A.length;B<I;)L=L>>>8^a[(L^A.charCodeAt(B++))&255];return~L}function _(A,D){for(var L=D^-1,B=A.length-15,I=0;I<B;)L=S[A[I++]^L&255]^w[A[I++]^L>>8&255]^j[A[I++]^L>>16&255]^y[A[I++]^L>>>24]^b[A[I++]]^v[A[I++]]^p[A[I++]]^x[A[I++]]^f[A[I++]]^h[A[I++]]^u[A[I++]]^d[A[I++]]^o[A[I++]]^l[A[I++]]^i[A[I++]]^a[A[I++]];for(B+=15;I<B;)L=L>>>8^a[(L^A[I++])&255];return~L}function E(A,D){for(var L=D^-1,B=0,I=A.length,T=0,z=0;B<I;)T=A.charCodeAt(B++),T<128?L=L>>>8^a[(L^T)&255]:T<2048?(L=L>>>8^a[(L^(192|T>>6&31))&255],L=L>>>8^a[(L^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,z=A.charCodeAt(B++)&1023,L=L>>>8^a[(L^(240|T>>8&7))&255],L=L>>>8^a[(L^(128|T>>2&63))&255],L=L>>>8^a[(L^(128|z>>6&15|(T&3)<<4))&255],L=L>>>8^a[(L^(128|z&63))&255]):(L=L>>>8^a[(L^(224|T>>12&15))&255],L=L>>>8^a[(L^(128|T>>6&63))&255],L=L>>>8^a[(L^(128|T&63))&255]);return~L}return e.table=a,e.bstr=O,e.buf=_,e.str=E,e})(),Ot=(function(){var s={};s.version="1.2.1";function a(de,ye){for(var xe=de.split("/"),ge=ye.split("/"),je=0,Se=0,Le=Math.min(xe.length,ge.length);je<Le;++je){if(Se=xe[je].length-ge[je].length)return Se;if(xe[je]!=ge[je])return xe[je]<ge[je]?-1:1}return xe.length-ge.length}function r(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:r(de.slice(0,-1));var ye=de.lastIndexOf("/");return ye===-1?de:de.slice(0,ye+1)}function n(de){if(de.charAt(de.length-1)=="/")return n(de.slice(0,-1));var ye=de.lastIndexOf("/");return ye===-1?de:de.slice(ye+1)}function i(de,ye){typeof ye=="string"&&(ye=new Date(ye));var xe=ye.getHours();xe=xe<<6|ye.getMinutes(),xe=xe<<5|ye.getSeconds()>>>1,de.write_shift(2,xe);var ge=ye.getFullYear()-1980;ge=ge<<4|ye.getMonth()+1,ge=ge<<5|ye.getDate(),de.write_shift(2,ge)}function l(de){var ye=de.read_shift(2)&65535,xe=de.read_shift(2)&65535,ge=new Date,je=xe&31;xe>>>=5;var Se=xe&15;xe>>>=4,ge.setMilliseconds(0),ge.setFullYear(xe+1980),ge.setMonth(Se-1),ge.setDate(je);var Le=ye&31;ye>>>=5;var Je=ye&63;return ye>>>=6,ge.setHours(ye),ge.setMinutes(Je),ge.setSeconds(Le<<1),ge}function o(de){kr(de,0);for(var ye={},xe=0;de.l<=de.length-4;){var ge=de.read_shift(2),je=de.read_shift(2),Se=de.l+je,Le={};switch(ge){case 21589:xe=de.read_shift(1),xe&1&&(Le.mtime=de.read_shift(4)),je>5&&(xe&2&&(Le.atime=de.read_shift(4)),xe&4&&(Le.ctime=de.read_shift(4))),Le.mtime&&(Le.mt=new Date(Le.mtime*1e3));break}de.l=Se,ye[ge]=Le}return ye}var d;function u(){return d||(d={})}function h(de,ye){if(de[0]==80&&de[1]==75)return Ut(de,ye);if((de[0]|32)==109&&(de[1]|32)==105)return ss(de,ye);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var xe=3,ge=512,je=0,Se=0,Le=0,Je=0,Fe=0,$e=[],qe=de.slice(0,512);kr(qe,0);var rt=f(qe);switch(xe=rt[0],xe){case 3:ge=512;break;case 4:ge=4096;break;case 0:if(rt[1]==0)return Ut(de,ye);default:throw new Error("Major Version: Expected 3 or 4 saw "+xe)}ge!==512&&(qe=de.slice(0,ge),kr(qe,28));var ct=de.slice(0,ge);x(qe,xe);var gt=qe.read_shift(4,"i");if(xe===3&&gt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+gt);qe.l+=4,Le=qe.read_shift(4,"i"),qe.l+=4,qe.chk("00100000","Mini Stream Cutoff Size: "),Je=qe.read_shift(4,"i"),je=qe.read_shift(4,"i"),Fe=qe.read_shift(4,"i"),Se=qe.read_shift(4,"i");for(var it=-1,ht=0;ht<109&&(it=qe.read_shift(4,"i"),!(it<0));++ht)$e[ht]=it;var wt=p(de,ge);y(Fe,Se,wt,ge,$e);var na=w(wt,Le,$e,ge);na[Le].name="!Directory",je>0&&Je!==z&&(na[Je].name="!MiniFAT"),na[$e[0]].name="!FAT",na.fat_addrs=$e,na.ssz=ge;var Vs={},Ds=[],wr=[],Ui=[];S(Le,na,wt,Ds,je,Vs,wr,Je),v(wr,Ui,Ds),Ds.shift();var be={FileIndex:wr,FullPaths:Ui};return ye&&ye.raw&&(be.raw={header:ct,sectors:wt}),be}function f(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(k,"Header Signature: "),de.l+=16;var ye=de.read_shift(2,"u");return[de.read_shift(2,"u"),ye]}function x(de,ye){var xe=9;switch(de.l+=2,xe=de.read_shift(2)){case 9:if(ye!=3)throw new Error("Sector Shift: Expected 9 saw "+xe);break;case 12:if(ye!=4)throw new Error("Sector Shift: Expected 12 saw "+xe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+xe)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function p(de,ye){for(var xe=Math.ceil(de.length/ye)-1,ge=[],je=1;je<xe;++je)ge[je-1]=de.slice(je*ye,(je+1)*ye);return ge[xe-1]=de.slice(xe*ye),ge}function v(de,ye,xe){for(var ge=0,je=0,Se=0,Le=0,Je=0,Fe=xe.length,$e=[],qe=[];ge<Fe;++ge)$e[ge]=qe[ge]=ge,ye[ge]=xe[ge];for(;Je<qe.length;++Je)ge=qe[Je],je=de[ge].L,Se=de[ge].R,Le=de[ge].C,$e[ge]===ge&&(je!==-1&&$e[je]!==je&&($e[ge]=$e[je]),Se!==-1&&$e[Se]!==Se&&($e[ge]=$e[Se])),Le!==-1&&($e[Le]=ge),je!==-1&&ge!=$e[ge]&&($e[je]=$e[ge],qe.lastIndexOf(je)<Je&&qe.push(je)),Se!==-1&&ge!=$e[ge]&&($e[Se]=$e[ge],qe.lastIndexOf(Se)<Je&&qe.push(Se));for(ge=1;ge<Fe;++ge)$e[ge]===ge&&(Se!==-1&&$e[Se]!==Se?$e[ge]=$e[Se]:je!==-1&&$e[je]!==je&&($e[ge]=$e[je]));for(ge=1;ge<Fe;++ge)if(de[ge].type!==0){if(Je=ge,Je!=$e[Je])do Je=$e[Je],ye[ge]=ye[Je]+"/"+ye[ge];while(Je!==0&&$e[Je]!==-1&&Je!=$e[Je]);$e[ge]=-1}for(ye[0]+="/",ge=1;ge<Fe;++ge)de[ge].type!==2&&(ye[ge]+="/")}function b(de,ye,xe){for(var ge=de.start,je=de.size,Se=[],Le=ge;xe&&je>0&&Le>=0;)Se.push(ye.slice(Le*T,Le*T+T)),je-=T,Le=Pc(xe,Le*4);return Se.length===0?Ye(0):vr(Se).slice(0,de.size)}function y(de,ye,xe,ge,je){var Se=z;if(de===z){if(ye!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var Le=xe[de],Je=(ge>>>2)-1;if(!Le)return;for(var Fe=0;Fe<Je&&(Se=Pc(Le,Fe*4))!==z;++Fe)je.push(Se);y(Pc(Le,ge-4),ye-1,xe,ge,je)}}function j(de,ye,xe,ge,je){var Se=[],Le=[];je||(je=[]);var Je=ge-1,Fe=0,$e=0;for(Fe=ye;Fe>=0;){je[Fe]=!0,Se[Se.length]=Fe,Le.push(de[Fe]);var qe=xe[Math.floor(Fe*4/ge)];if($e=Fe*4&Je,ge<4+$e)throw new Error("FAT boundary crossed: "+Fe+" 4 "+ge);if(!de[qe])break;Fe=Pc(de[qe],$e)}return{nodes:Se,data:tO([Le])}}function w(de,ye,xe,ge){var je=de.length,Se=[],Le=[],Je=[],Fe=[],$e=ge-1,qe=0,rt=0,ct=0,gt=0;for(qe=0;qe<je;++qe)if(Je=[],ct=qe+ye,ct>=je&&(ct-=je),!Le[ct]){Fe=[];var it=[];for(rt=ct;rt>=0;){it[rt]=!0,Le[rt]=!0,Je[Je.length]=rt,Fe.push(de[rt]);var ht=xe[Math.floor(rt*4/ge)];if(gt=rt*4&$e,ge<4+gt)throw new Error("FAT boundary crossed: "+rt+" 4 "+ge);if(!de[ht]||(rt=Pc(de[ht],gt),it[rt]))break}Se[ct]={nodes:Je,data:tO([Fe])}}return Se}function S(de,ye,xe,ge,je,Se,Le,Je){for(var Fe=0,$e=ge.length?2:0,qe=ye[de].data,rt=0,ct=0,gt;rt<qe.length;rt+=128){var it=qe.slice(rt,rt+128);kr(it,64),ct=it.read_shift(2),gt=_A(it,0,ct-$e),ge.push(gt);var ht={name:gt,type:it.read_shift(1),color:it.read_shift(1),L:it.read_shift(4,"i"),R:it.read_shift(4,"i"),C:it.read_shift(4,"i"),clsid:it.read_shift(16),state:it.read_shift(4,"i"),start:0,size:0},wt=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);wt!==0&&(ht.ct=O(it,it.l-8));var na=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);na!==0&&(ht.mt=O(it,it.l-8)),ht.start=it.read_shift(4,"i"),ht.size=it.read_shift(4,"i"),ht.size<0&&ht.start<0&&(ht.size=ht.type=0,ht.start=z,ht.name=""),ht.type===5?(Fe=ht.start,je>0&&Fe!==z&&(ye[Fe].name="!StreamData")):ht.size>=4096?(ht.storage="fat",ye[ht.start]===void 0&&(ye[ht.start]=j(xe,ht.start,ye.fat_addrs,ye.ssz)),ye[ht.start].name=ht.name,ht.content=ye[ht.start].data.slice(0,ht.size)):(ht.storage="minifat",ht.size<0?ht.size=0:Fe!==z&&ht.start!==z&&ye[Fe]&&(ht.content=b(ht,ye[Fe].data,(ye[Je]||{}).data))),ht.content&&kr(ht.content,0),Se[gt]=ht,Le.push(ht)}}function O(de,ye){return new Date((Rn(de,ye+4)/1e7*Math.pow(2,32)+Rn(de,ye)/1e7-11644473600)*1e3)}function _(de,ye){return u(),h(d.readFileSync(de),ye)}function E(de,ye){var xe=ye&&ye.type;switch(xe||fs&&Buffer.isBuffer(de)&&(xe="buffer"),xe||"base64"){case"file":return _(de,ye);case"base64":return h(Pn(zn(de)),ye);case"binary":return h(Pn(de),ye)}return h(de,ye)}function A(de,ye){var xe=ye||{},ge=xe.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=ge+"/",de.FileIndex[0]={name:ge,type:5}),xe.CLSID&&(de.FileIndex[0].clsid=xe.CLSID),D(de)}function D(de){var ye="Sh33tJ5";if(!Ot.find(de,"/"+ye)){var xe=Ye(4);xe[0]=55,xe[1]=xe[3]=50,xe[2]=54,de.FileIndex.push({name:ye,type:2,content:xe,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+ye),L(de)}}function L(de,ye){A(de);for(var xe=!1,ge=!1,je=de.FullPaths.length-1;je>=0;--je){var Se=de.FileIndex[je];switch(Se.type){case 0:ge?xe=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:ge=!0,isNaN(Se.R*Se.L*Se.C)&&(xe=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(xe=!0);break;default:xe=!0;break}}if(!(!xe&&!ye)){var Le=new Date(1987,1,19),Je=0,Fe=Object.create?Object.create(null):{},$e=[];for(je=0;je<de.FullPaths.length;++je)Fe[de.FullPaths[je]]=!0,de.FileIndex[je].type!==0&&$e.push([de.FullPaths[je],de.FileIndex[je]]);for(je=0;je<$e.length;++je){var qe=r($e[je][0]);ge=Fe[qe],ge||($e.push([qe,{name:n(qe).replace("/",""),type:1,clsid:P,ct:Le,mt:Le,content:null}]),Fe[qe]=!0)}for($e.sort(function(gt,it){return a(gt[0],it[0])}),de.FullPaths=[],de.FileIndex=[],je=0;je<$e.length;++je)de.FullPaths[je]=$e[je][0],de.FileIndex[je]=$e[je][1];for(je=0;je<$e.length;++je){var rt=de.FileIndex[je],ct=de.FullPaths[je];if(rt.name=n(ct).replace("/",""),rt.L=rt.R=rt.C=-(rt.color=1),rt.size=rt.content?rt.content.length:0,rt.start=0,rt.clsid=rt.clsid||P,je===0)rt.C=$e.length>1?1:-1,rt.size=0,rt.type=5;else if(ct.slice(-1)=="/"){for(Je=je+1;Je<$e.length&&r(de.FullPaths[Je])!=ct;++Je);for(rt.C=Je>=$e.length?-1:Je,Je=je+1;Je<$e.length&&r(de.FullPaths[Je])!=r(ct);++Je);rt.R=Je>=$e.length?-1:Je,rt.type=1}else r(de.FullPaths[je+1]||"")==r(ct)&&(rt.R=je+1),rt.type=2}}}function B(de,ye){var xe=ye||{};if(xe.fileType=="mad")return gs(de,xe);switch(L(de),xe.fileType){case"zip":return Rt(de,xe)}var ge=(function(gt){for(var it=0,ht=0,wt=0;wt<gt.FileIndex.length;++wt){var na=gt.FileIndex[wt];if(na.content){var Vs=na.content.length;Vs>0&&(Vs<4096?it+=Vs+63>>6:ht+=Vs+511>>9)}}for(var Ds=gt.FullPaths.length+3>>2,wr=it+7>>3,Ui=it+127>>7,be=wr+ht+Ds+Ui,Me=be+127>>7,Tt=Me<=109?0:Math.ceil((Me-109)/127);be+Me+Tt+127>>7>Me;)Tt=++Me<=109?0:Math.ceil((Me-109)/127);var Et=[1,Tt,Me,Ui,Ds,ht,it,0];return gt.FileIndex[0].size=it<<6,Et[7]=(gt.FileIndex[0].start=Et[0]+Et[1]+Et[2]+Et[3]+Et[4]+Et[5])+(Et[6]+7>>3),Et})(de),je=Ye(ge[7]<<9),Se=0,Le=0;{for(Se=0;Se<8;++Se)je.write_shift(1,F[Se]);for(Se=0;Se<8;++Se)je.write_shift(2,0);for(je.write_shift(2,62),je.write_shift(2,3),je.write_shift(2,65534),je.write_shift(2,9),je.write_shift(2,6),Se=0;Se<3;++Se)je.write_shift(2,0);for(je.write_shift(4,0),je.write_shift(4,ge[2]),je.write_shift(4,ge[0]+ge[1]+ge[2]+ge[3]-1),je.write_shift(4,0),je.write_shift(4,4096),je.write_shift(4,ge[3]?ge[0]+ge[1]+ge[2]-1:z),je.write_shift(4,ge[3]),je.write_shift(-4,ge[1]?ge[0]-1:z),je.write_shift(4,ge[1]),Se=0;Se<109;++Se)je.write_shift(-4,Se<ge[2]?ge[1]+Se:-1)}if(ge[1])for(Le=0;Le<ge[1];++Le){for(;Se<236+Le*127;++Se)je.write_shift(-4,Se<ge[2]?ge[1]+Se:-1);je.write_shift(-4,Le===ge[1]-1?z:Le+1)}var Je=function(gt){for(Le+=gt;Se<Le-1;++Se)je.write_shift(-4,Se+1);gt&&(++Se,je.write_shift(-4,z))};for(Le=Se=0,Le+=ge[1];Se<Le;++Se)je.write_shift(-4,G.DIFSECT);for(Le+=ge[2];Se<Le;++Se)je.write_shift(-4,G.FATSECT);Je(ge[3]),Je(ge[4]);for(var Fe=0,$e=0,qe=de.FileIndex[0];Fe<de.FileIndex.length;++Fe)qe=de.FileIndex[Fe],qe.content&&($e=qe.content.length,!($e<4096)&&(qe.start=Le,Je($e+511>>9)));for(Je(ge[6]+7>>3);je.l&511;)je.write_shift(-4,G.ENDOFCHAIN);for(Le=Se=0,Fe=0;Fe<de.FileIndex.length;++Fe)qe=de.FileIndex[Fe],qe.content&&($e=qe.content.length,!(!$e||$e>=4096)&&(qe.start=Le,Je($e+63>>6)));for(;je.l&511;)je.write_shift(-4,G.ENDOFCHAIN);for(Se=0;Se<ge[4]<<2;++Se){var rt=de.FullPaths[Se];if(!rt||rt.length===0){for(Fe=0;Fe<17;++Fe)je.write_shift(4,0);for(Fe=0;Fe<3;++Fe)je.write_shift(4,-1);for(Fe=0;Fe<12;++Fe)je.write_shift(4,0);continue}qe=de.FileIndex[Se],Se===0&&(qe.start=qe.size?qe.start-1:z);var ct=Se===0&&xe.root||qe.name;if($e=2*(ct.length+1),je.write_shift(64,ct,"utf16le"),je.write_shift(2,$e),je.write_shift(1,qe.type),je.write_shift(1,qe.color),je.write_shift(-4,qe.L),je.write_shift(-4,qe.R),je.write_shift(-4,qe.C),qe.clsid)je.write_shift(16,qe.clsid,"hex");else for(Fe=0;Fe<4;++Fe)je.write_shift(4,0);je.write_shift(4,qe.state||0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,0),je.write_shift(4,qe.start),je.write_shift(4,qe.size),je.write_shift(4,0)}for(Se=1;Se<de.FileIndex.length;++Se)if(qe=de.FileIndex[Se],qe.size>=4096)if(je.l=qe.start+1<<9,fs&&Buffer.isBuffer(qe.content))qe.content.copy(je,je.l,0,qe.size),je.l+=qe.size+511&-512;else{for(Fe=0;Fe<qe.size;++Fe)je.write_shift(1,qe.content[Fe]);for(;Fe&511;++Fe)je.write_shift(1,0)}for(Se=1;Se<de.FileIndex.length;++Se)if(qe=de.FileIndex[Se],qe.size>0&&qe.size<4096)if(fs&&Buffer.isBuffer(qe.content))qe.content.copy(je,je.l,0,qe.size),je.l+=qe.size+63&-64;else{for(Fe=0;Fe<qe.size;++Fe)je.write_shift(1,qe.content[Fe]);for(;Fe&63;++Fe)je.write_shift(1,0)}if(fs)je.l=je.length;else for(;je.l<je.length;)je.write_shift(1,0);return je}function I(de,ye){var xe=de.FullPaths.map(function(Fe){return Fe.toUpperCase()}),ge=xe.map(function(Fe){var $e=Fe.split("/");return $e[$e.length-(Fe.slice(-1)=="/"?2:1)]}),je=!1;ye.charCodeAt(0)===47?(je=!0,ye=xe[0].slice(0,-1)+ye):je=ye.indexOf("/")!==-1;var Se=ye.toUpperCase(),Le=je===!0?xe.indexOf(Se):ge.indexOf(Se);if(Le!==-1)return de.FileIndex[Le];var Je=!Se.match(Rm);for(Se=Se.replace(rn,""),Je&&(Se=Se.replace(Rm,"!")),Le=0;Le<xe.length;++Le)if((Je?xe[Le].replace(Rm,"!"):xe[Le]).replace(rn,"")==Se||(Je?ge[Le].replace(Rm,"!"):ge[Le]).replace(rn,"")==Se)return de.FileIndex[Le];return null}var T=64,z=-2,k="d0cf11e0a1b11ae1",F=[208,207,17,224,161,177,26,225],P="00000000000000000000000000000000",G={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:z,FREESECT:-1,HEADER_SIGNATURE:k,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:P,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Y(de,ye,xe){u();var ge=B(de,xe);d.writeFileSync(ye,ge)}function W(de){for(var ye=new Array(de.length),xe=0;xe<de.length;++xe)ye[xe]=String.fromCharCode(de[xe]);return ye.join("")}function ee(de,ye){var xe=B(de,ye);switch(ye&&ye.type||"buffer"){case"file":return u(),d.writeFileSync(ye.filename,xe),xe;case"binary":return typeof xe=="string"?xe:W(xe);case"base64":return lf(typeof xe=="string"?xe:W(xe));case"buffer":if(fs)return Buffer.isBuffer(xe)?xe:Ql(xe);case"array":return typeof xe=="string"?Pn(xe):xe}return xe}var H;function M(de){try{var ye=de.InflateRaw,xe=new ye;if(xe._processChunk(new Uint8Array([3,0]),xe._finishFlushFlag),xe.bytesRead)H=de;else throw new Error("zlib does not expose bytesRead")}catch(ge){console.error("cannot use native zlib: "+(ge.message||ge))}}function X(de,ye){if(!H)return nt(de,ye);var xe=H.InflateRaw,ge=new xe,je=ge._processChunk(de.slice(de.l),ge._finishFlushFlag);return de.l+=ge.bytesRead,je}function K(de){return H?H.deflateRawSync(de):jt(de)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],V=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function te(de){var ye=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(ye>>16|ye>>8|ye)&255}for(var Z=typeof Uint8Array<"u",ue=Z?new Uint8Array(256):[],re=0;re<256;++re)ue[re]=te(re);function J(de,ye){var xe=ue[de&255];return ye<=8?xe>>>8-ye:(xe=xe<<8|ue[de>>8&255],ye<=16?xe>>>16-ye:(xe=xe<<8|ue[de>>16&255],xe>>>24-ye))}function Ne(de,ye){var xe=ye&7,ge=ye>>>3;return(de[ge]|(xe<=6?0:de[ge+1]<<8))>>>xe&3}function q(de,ye){var xe=ye&7,ge=ye>>>3;return(de[ge]|(xe<=5?0:de[ge+1]<<8))>>>xe&7}function ce(de,ye){var xe=ye&7,ge=ye>>>3;return(de[ge]|(xe<=4?0:de[ge+1]<<8))>>>xe&15}function fe(de,ye){var xe=ye&7,ge=ye>>>3;return(de[ge]|(xe<=3?0:de[ge+1]<<8))>>>xe&31}function ie(de,ye){var xe=ye&7,ge=ye>>>3;return(de[ge]|(xe<=1?0:de[ge+1]<<8))>>>xe&127}function ne(de,ye,xe){var ge=ye&7,je=ye>>>3,Se=(1<<xe)-1,Le=de[je]>>>ge;return xe<8-ge||(Le|=de[je+1]<<8-ge,xe<16-ge)||(Le|=de[je+2]<<16-ge,xe<24-ge)||(Le|=de[je+3]<<24-ge),Le&Se}function pe(de,ye,xe){var ge=ye&7,je=ye>>>3;return ge<=5?de[je]|=(xe&7)<<ge:(de[je]|=xe<<ge&255,de[je+1]=(xe&7)>>8-ge),ye+3}function Ee(de,ye,xe){var ge=ye&7,je=ye>>>3;return xe=(xe&1)<<ge,de[je]|=xe,ye+1}function Ie(de,ye,xe){var ge=ye&7,je=ye>>>3;return xe<<=ge,de[je]|=xe&255,xe>>>=8,de[je+1]=xe,ye+8}function _e(de,ye,xe){var ge=ye&7,je=ye>>>3;return xe<<=ge,de[je]|=xe&255,xe>>>=8,de[je+1]=xe&255,de[je+2]=xe>>>8,ye+16}function Ge(de,ye){var xe=de.length,ge=2*xe>ye?2*xe:ye+5,je=0;if(xe>=ye)return de;if(fs){var Se=M4(ge);if(de.copy)de.copy(Se);else for(;je<de.length;++je)Se[je]=de[je];return Se}else if(Z){var Le=new Uint8Array(ge);if(Le.set)Le.set(de);else for(;je<xe;++je)Le[je]=de[je];return Le}return de.length=ge,de}function Ae(de){for(var ye=new Array(de),xe=0;xe<de;++xe)ye[xe]=0;return ye}function Ue(de,ye,xe){var ge=1,je=0,Se=0,Le=0,Je=0,Fe=de.length,$e=Z?new Uint16Array(32):Ae(32);for(Se=0;Se<32;++Se)$e[Se]=0;for(Se=Fe;Se<xe;++Se)de[Se]=0;Fe=de.length;var qe=Z?new Uint16Array(Fe):Ae(Fe);for(Se=0;Se<Fe;++Se)$e[je=de[Se]]++,ge<je&&(ge=je),qe[Se]=0;for($e[0]=0,Se=1;Se<=ge;++Se)$e[Se+16]=Je=Je+$e[Se-1]<<1;for(Se=0;Se<Fe;++Se)Je=de[Se],Je!=0&&(qe[Se]=$e[Je+16]++);var rt=0;for(Se=0;Se<Fe;++Se)if(rt=de[Se],rt!=0)for(Je=J(qe[Se],ge)>>ge-rt,Le=(1<<ge+4-rt)-1;Le>=0;--Le)ye[Je|Le<<rt]=rt&15|Se<<4;return ge}var Qe=Z?new Uint16Array(512):Ae(512),_t=Z?new Uint16Array(32):Ae(32);if(!Z){for(var lt=0;lt<512;++lt)Qe[lt]=0;for(lt=0;lt<32;++lt)_t[lt]=0}(function(){for(var de=[],ye=0;ye<32;ye++)de.push(5);Ue(de,_t,32);var xe=[];for(ye=0;ye<=143;ye++)xe.push(8);for(;ye<=255;ye++)xe.push(9);for(;ye<=279;ye++)xe.push(7);for(;ye<=287;ye++)xe.push(8);Ue(xe,Qe,288)})();var Nt=(function(){for(var ye=Z?new Uint8Array(32768):[],xe=0,ge=0;xe<V.length-1;++xe)for(;ge<V[xe+1];++ge)ye[ge]=xe;for(;ge<32768;++ge)ye[ge]=29;var je=Z?new Uint8Array(259):[];for(xe=0,ge=0;xe<se.length-1;++xe)for(;ge<se[xe+1];++ge)je[ge]=xe;function Se(Je,Fe){for(var $e=0;$e<Je.length;){var qe=Math.min(65535,Je.length-$e),rt=$e+qe==Je.length;for(Fe.write_shift(1,+rt),Fe.write_shift(2,qe),Fe.write_shift(2,~qe&65535);qe-- >0;)Fe[Fe.l++]=Je[$e++]}return Fe.l}function Le(Je,Fe){for(var $e=0,qe=0,rt=Z?new Uint16Array(32768):[];qe<Je.length;){var ct=Math.min(65535,Je.length-qe);if(ct<10){for($e=pe(Fe,$e,+(qe+ct==Je.length)),$e&7&&($e+=8-($e&7)),Fe.l=$e/8|0,Fe.write_shift(2,ct),Fe.write_shift(2,~ct&65535);ct-- >0;)Fe[Fe.l++]=Je[qe++];$e=Fe.l*8;continue}$e=pe(Fe,$e,+(qe+ct==Je.length)+2);for(var gt=0;ct-- >0;){var it=Je[qe];gt=(gt<<5^it)&32767;var ht=-1,wt=0;if((ht=rt[gt])&&(ht|=qe&-32768,ht>qe&&(ht-=32768),ht<qe))for(;Je[ht+wt]==Je[qe+wt]&&wt<250;)++wt;if(wt>2){it=je[wt],it<=22?$e=Ie(Fe,$e,ue[it+1]>>1)-1:(Ie(Fe,$e,3),$e+=5,Ie(Fe,$e,ue[it-23]>>5),$e+=3);var na=it<8?0:it-4>>2;na>0&&(_e(Fe,$e,wt-se[it]),$e+=na),it=ye[qe-ht],$e=Ie(Fe,$e,ue[it]>>3),$e-=3;var Vs=it<4?0:it-2>>1;Vs>0&&(_e(Fe,$e,qe-ht-V[it]),$e+=Vs);for(var Ds=0;Ds<wt;++Ds)rt[gt]=qe&32767,gt=(gt<<5^Je[qe])&32767,++qe;ct-=wt-1}else it<=143?it=it+48:$e=Ee(Fe,$e,1),$e=Ie(Fe,$e,ue[it]),rt[gt]=qe&32767,++qe}$e=Ie(Fe,$e,0)-1}return Fe.l=($e+7)/8|0,Fe.l}return function(Fe,$e){return Fe.length<8?Se(Fe,$e):Le(Fe,$e)}})();function jt(de){var ye=Ye(50+Math.floor(de.length*1.1)),xe=Nt(de,ye);return ye.slice(0,xe)}var Ft=Z?new Uint16Array(32768):Ae(32768),Ce=Z?new Uint16Array(32768):Ae(32768),ve=Z?new Uint16Array(128):Ae(128),Ve=1,ot=1;function le(de,ye){var xe=fe(de,ye)+257;ye+=5;var ge=fe(de,ye)+1;ye+=5;var je=ce(de,ye)+4;ye+=4;for(var Se=0,Le=Z?new Uint8Array(19):Ae(19),Je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Fe=1,$e=Z?new Uint8Array(8):Ae(8),qe=Z?new Uint8Array(8):Ae(8),rt=Le.length,ct=0;ct<je;++ct)Le[Q[ct]]=Se=q(de,ye),Fe<Se&&(Fe=Se),$e[Se]++,ye+=3;var gt=0;for($e[0]=0,ct=1;ct<=Fe;++ct)qe[ct]=gt=gt+$e[ct-1]<<1;for(ct=0;ct<rt;++ct)(gt=Le[ct])!=0&&(Je[ct]=qe[gt]++);var it=0;for(ct=0;ct<rt;++ct)if(it=Le[ct],it!=0){gt=ue[Je[ct]]>>8-it;for(var ht=(1<<7-it)-1;ht>=0;--ht)ve[gt|ht<<it]=it&7|ct<<3}var wt=[];for(Fe=1;wt.length<xe+ge;)switch(gt=ve[ie(de,ye)],ye+=gt&7,gt>>>=3){case 16:for(Se=3+Ne(de,ye),ye+=2,gt=wt[wt.length-1];Se-- >0;)wt.push(gt);break;case 17:for(Se=3+q(de,ye),ye+=3;Se-- >0;)wt.push(0);break;case 18:for(Se=11+ie(de,ye),ye+=7;Se-- >0;)wt.push(0);break;default:wt.push(gt),Fe<gt&&(Fe=gt);break}var na=wt.slice(0,xe),Vs=wt.slice(xe);for(ct=xe;ct<286;++ct)na[ct]=0;for(ct=ge;ct<30;++ct)Vs[ct]=0;return Ve=Ue(na,Ft,286),ot=Ue(Vs,Ce,30),ye}function Ke(de,ye){if(de[0]==3&&!(de[1]&3))return[qo(ye),2];for(var xe=0,ge=0,je=M4(ye||1<<18),Se=0,Le=je.length>>>0,Je=0,Fe=0;(ge&1)==0;){if(ge=q(de,xe),xe+=3,ge>>>1)ge>>1==1?(Je=9,Fe=5):(xe=le(de,xe),Je=Ve,Fe=ot);else{xe&7&&(xe+=8-(xe&7));var $e=de[xe>>>3]|de[(xe>>>3)+1]<<8;if(xe+=32,$e>0)for(!ye&&Le<Se+$e&&(je=Ge(je,Se+$e),Le=je.length);$e-- >0;)je[Se++]=de[xe>>>3],xe+=8;continue}for(;;){!ye&&Le<Se+32767&&(je=Ge(je,Se+32767),Le=je.length);var qe=ne(de,xe,Je),rt=ge>>>1==1?Qe[qe]:Ft[qe];if(xe+=rt&15,rt>>>=4,(rt>>>8&255)===0)je[Se++]=rt;else{if(rt==256)break;rt-=257;var ct=rt<8?0:rt-4>>2;ct>5&&(ct=0);var gt=Se+se[rt];ct>0&&(gt+=ne(de,xe,ct),xe+=ct),qe=ne(de,xe,Fe),rt=ge>>>1==1?_t[qe]:Ce[qe],xe+=rt&15,rt>>>=4;var it=rt<4?0:rt-2>>1,ht=V[rt];for(it>0&&(ht+=ne(de,xe,it),xe+=it),!ye&&Le<gt&&(je=Ge(je,gt+100),Le=je.length);Se<gt;)je[Se]=je[Se-ht],++Se}}}return ye?[je,xe+7>>>3]:[je.slice(0,Se),xe+7>>>3]}function nt(de,ye){var xe=de.slice(de.l||0),ge=Ke(xe,ye);return de.l+=ge[1],ge[0]}function pt(de,ye){if(de)typeof console<"u"&&console.error(ye);else throw new Error(ye)}function Ut(de,ye){var xe=de;kr(xe,0);var ge=[],je=[],Se={FileIndex:ge,FullPaths:je};A(Se,{root:ye.root});for(var Le=xe.length-4;(xe[Le]!=80||xe[Le+1]!=75||xe[Le+2]!=5||xe[Le+3]!=6)&&Le>=0;)--Le;xe.l=Le+4,xe.l+=4;var Je=xe.read_shift(2);xe.l+=6;var Fe=xe.read_shift(4);for(xe.l=Fe,Le=0;Le<Je;++Le){xe.l+=20;var $e=xe.read_shift(4),qe=xe.read_shift(4),rt=xe.read_shift(2),ct=xe.read_shift(2),gt=xe.read_shift(2);xe.l+=8;var it=xe.read_shift(4),ht=o(xe.slice(xe.l+rt,xe.l+rt+ct));xe.l+=rt+ct+gt;var wt=xe.l;xe.l=it+4,Ts(xe,$e,qe,Se,ht),xe.l=wt}return Se}function Ts(de,ye,xe,ge,je){de.l+=2;var Se=de.read_shift(2),Le=de.read_shift(2),Je=l(de);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var Fe=de.read_shift(4),$e=de.read_shift(4),qe=de.read_shift(4),rt=de.read_shift(2),ct=de.read_shift(2),gt="",it=0;it<rt;++it)gt+=String.fromCharCode(de[de.l++]);if(ct){var ht=o(de.slice(de.l,de.l+ct));(ht[21589]||{}).mt&&(Je=ht[21589].mt),((je||{})[21589]||{}).mt&&(Je=je[21589].mt)}de.l+=ct;var wt=de.slice(de.l,de.l+$e);switch(Le){case 8:wt=X(de,qe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Le)}var na=!1;Se&8&&(Fe=de.read_shift(4),Fe==134695760&&(Fe=de.read_shift(4),na=!0),$e=de.read_shift(4),qe=de.read_shift(4)),$e!=ye&&pt(na,"Bad compressed size: "+ye+" != "+$e),qe!=xe&&pt(na,"Bad uncompressed size: "+xe+" != "+qe),Ca(ge,gt,wt,{unsafe:!0,mt:Je})}function Rt(de,ye){var xe=ye||{},ge=[],je=[],Se=Ye(1),Le=xe.compression?8:0,Je=0,Fe=0,$e=0,qe=0,rt=0,ct=de.FullPaths[0],gt=ct,it=de.FileIndex[0],ht=[],wt=0;for(Fe=1;Fe<de.FullPaths.length;++Fe)if(gt=de.FullPaths[Fe].slice(ct.length),it=de.FileIndex[Fe],!(!it.size||!it.content||gt=="Sh33tJ5")){var na=qe,Vs=Ye(gt.length);for($e=0;$e<gt.length;++$e)Vs.write_shift(1,gt.charCodeAt($e)&127);Vs=Vs.slice(0,Vs.l),ht[rt]=W9.buf(it.content,0);var Ds=it.content;Le==8&&(Ds=K(Ds)),Se=Ye(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,Je),Se.write_shift(2,Le),it.mt?i(Se,it.mt):Se.write_shift(4,0),Se.write_shift(-4,ht[rt]),Se.write_shift(4,Ds.length),Se.write_shift(4,it.content.length),Se.write_shift(2,Vs.length),Se.write_shift(2,0),qe+=Se.length,ge.push(Se),qe+=Vs.length,ge.push(Vs),qe+=Ds.length,ge.push(Ds),Se=Ye(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,Je),Se.write_shift(2,Le),Se.write_shift(4,0),Se.write_shift(-4,ht[rt]),Se.write_shift(4,Ds.length),Se.write_shift(4,it.content.length),Se.write_shift(2,Vs.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,na),wt+=Se.l,je.push(Se),wt+=Vs.length,je.push(Vs),++rt}return Se=Ye(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,rt),Se.write_shift(2,rt),Se.write_shift(4,wt),Se.write_shift(4,qe),Se.write_shift(2,0),vr([vr(ge),vr(je),Se])}var Re={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ft(de,ye){if(de.ctype)return de.ctype;var xe=de.name||"",ge=xe.match(/\.([^\.]+)$/);return ge&&Re[ge[1]]||ye&&(ge=(xe=ye).match(/[\.\\]([^\.\\])+$/),ge&&Re[ge[1]])?Re[ge[1]]:"application/octet-stream"}function Xt(de){for(var ye=lf(de),xe=[],ge=0;ge<ye.length;ge+=76)xe.push(ye.slice(ge,ge+76));return xe.join(`\r
`)+`\r
`}function As(de){var ye=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function($e){var qe=$e.charCodeAt(0).toString(16).toUpperCase();return"="+(qe.length==1?"0"+qe:qe)});ye=ye.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ye.charAt(0)==`
`&&(ye="=0D"+ye.slice(1)),ye=ye.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var xe=[],ge=ye.split(`\r
`),je=0;je<ge.length;++je){var Se=ge[je];if(Se.length==0){xe.push("");continue}for(var Le=0;Le<Se.length;){var Je=76,Fe=Se.slice(Le,Le+Je);Fe.charAt(Je-1)=="="?Je--:Fe.charAt(Je-2)=="="?Je-=2:Fe.charAt(Je-3)=="="&&(Je-=3),Fe=Se.slice(Le,Le+Je),Le+=Je,Le<Se.length&&(Fe+="="),xe.push(Fe)}}return xe.join(`\r
`)}function we(de){for(var ye=[],xe=0;xe<de.length;++xe){for(var ge=de[xe];xe<=de.length&&ge.charAt(ge.length-1)=="=";)ge=ge.slice(0,ge.length-1)+de[++xe];ye.push(ge)}for(var je=0;je<ye.length;++je)ye[je]=ye[je].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return Pn(ye.join(`\r
`))}function Pt(de,ye,xe){for(var ge="",je="",Se="",Le,Je=0;Je<10;++Je){var Fe=ye[Je];if(!Fe||Fe.match(/^\s*$/))break;var $e=Fe.match(/^(.*?):\s*([^\s].*)$/);if($e)switch($e[1].toLowerCase()){case"content-location":ge=$e[2].trim();break;case"content-type":Se=$e[2].trim();break;case"content-transfer-encoding":je=$e[2].trim();break}}switch(++Je,je.toLowerCase()){case"base64":Le=Pn(zn(ye.slice(Je).join("")));break;case"quoted-printable":Le=we(ye.slice(Je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+je)}var qe=Ca(de,ge.slice(xe.length),Le,{unsafe:!0});Se&&(qe.ctype=Se)}function ss(de,ye){if(W(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var xe=ye&&ye.root||"",ge=(fs&&Buffer.isBuffer(de)?de.toString("binary"):W(de)).split(`\r
`),je=0,Se="";for(je=0;je<ge.length;++je)if(Se=ge[je],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),xe||(xe=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,xe.length)!=xe))for(;xe.length>0&&(xe=xe.slice(0,xe.length-1),xe=xe.slice(0,xe.lastIndexOf("/")+1),Se.slice(0,xe.length)!=xe););var Le=(ge[1]||"").match(/boundary="(.*?)"/);if(!Le)throw new Error("MAD cannot find boundary");var Je="--"+(Le[1]||""),Fe=[],$e=[],qe={FileIndex:Fe,FullPaths:$e};A(qe);var rt,ct=0;for(je=0;je<ge.length;++je){var gt=ge[je];gt!==Je&&gt!==Je+"--"||(ct++&&Pt(qe,ge.slice(rt,je),xe),rt=je)}return qe}function gs(de,ye){var xe=ye||{},ge=xe.boundary||"SheetJS";ge="------="+ge;for(var je=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ge.slice(2)+'"',"","",""],Se=de.FullPaths[0],Le=Se,Je=de.FileIndex[0],Fe=1;Fe<de.FullPaths.length;++Fe)if(Le=de.FullPaths[Fe].slice(Se.length),Je=de.FileIndex[Fe],!(!Je.size||!Je.content||Le=="Sh33tJ5")){Le=Le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(wt){return"_x"+wt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(wt){return"_u"+wt.charCodeAt(0).toString(16)+"_"});for(var $e=Je.content,qe=fs&&Buffer.isBuffer($e)?$e.toString("binary"):W($e),rt=0,ct=Math.min(1024,qe.length),gt=0,it=0;it<=ct;++it)(gt=qe.charCodeAt(it))>=32&&gt<128&&++rt;var ht=rt>=ct*4/5;je.push(ge),je.push("Content-Location: "+(xe.root||"file:///C:/SheetJS/")+Le),je.push("Content-Transfer-Encoding: "+(ht?"quoted-printable":"base64")),je.push("Content-Type: "+ft(Je,Le)),je.push(""),je.push(ht?As(qe):Xt(qe))}return je.push(ge+`--\r
`),je.join(`\r
`)}function Ps(de){var ye={};return A(ye,de),ye}function Ca(de,ye,xe,ge){var je=ge&&ge.unsafe;je||A(de);var Se=!je&&Ot.find(de,ye);if(!Se){var Le=de.FullPaths[0];ye.slice(0,Le.length)==Le?Le=ye:(Le.slice(-1)!="/"&&(Le+="/"),Le=(Le+ye).replace("//","/")),Se={name:n(ye),type:2},de.FileIndex.push(Se),de.FullPaths.push(Le),je||Ot.utils.cfb_gc(de)}return Se.content=xe,Se.size=xe?xe.length:0,ge&&(ge.CLSID&&(Se.clsid=ge.CLSID),ge.mt&&(Se.mt=ge.mt),ge.ct&&(Se.ct=ge.ct)),Se}function ar(de,ye){A(de);var xe=Ot.find(de,ye);if(xe){for(var ge=0;ge<de.FileIndex.length;++ge)if(de.FileIndex[ge]==xe)return de.FileIndex.splice(ge,1),de.FullPaths.splice(ge,1),!0}return!1}function rr(de,ye,xe){A(de);var ge=Ot.find(de,ye);if(ge){for(var je=0;je<de.FileIndex.length;++je)if(de.FileIndex[je]==ge)return de.FileIndex[je].name=n(xe),de.FullPaths[je]=xe,!0}return!1}function et(de){L(de,!0)}return s.find=I,s.read=E,s.parse=h,s.write=ee,s.writeFile=Y,s.utils={cfb_new:Ps,cfb_add:Ca,cfb_del:ar,cfb_mov:rr,cfb_gc:et,ReadShift:$m,CheckField:I8,prep_blob:kr,bconcat:vr,use_zlib:M,_deflateRaw:jt,_inflateRaw:nt,consts:G},s})();function Q9(e){return typeof e=="string"?Wg(e):Array.isArray(e)?y9(e):e}function ih(e,s,a){if(typeof Deno<"u"){if(a&&typeof s=="string")switch(a){case"utf8":s=new TextEncoder(a).encode(s);break;case"binary":s=Wg(s);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(e,s)}var r=a=="utf8"?Ji(s):s;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,e);if(typeof Blob<"u"){var n=new Blob([Q9(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,e);if(typeof saveAs<"u")return saveAs(n,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(s)&&(s=Zo(s)),o.write(s),o.close(),s}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+e)}function K9(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(e);s.open("r"),s.encoding="binary";var a=s.read();return s.close(),a}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+e)}function Fa(e){for(var s=Object.keys(e),a=[],r=0;r<s.length;++r)Object.prototype.hasOwnProperty.call(e,s[r])&&a.push(s[r]);return a}function H4(e,s){for(var a=[],r=Fa(e),n=0;n!==r.length;++n)a[e[r[n]][s]]==null&&(a[e[r[n]][s]]=r[n]);return a}function Kg(e){for(var s=[],a=Fa(e),r=0;r!==a.length;++r)s[e[a[r]]]=a[r];return s}function Jg(e){for(var s=[],a=Fa(e),r=0;r!==a.length;++r)s[e[a[r]]]=parseInt(a[r],10);return s}function J9(e){for(var s=[],a=Fa(e),r=0;r!==a.length;++r)s[e[a[r]]]==null&&(s[e[a[r]]]=[]),s[e[a[r]]].push(a[r]);return s}var Rp=new Date(1899,11,30,0,0,0);function hr(e,s){var a=e.getTime(),r=Rp.getTime()+(e.getTimezoneOffset()-Rp.getTimezoneOffset())*6e4;return(a-r)/(1440*60*1e3)}var u8=new Date,Y9=Rp.getTime()+(u8.getTimezoneOffset()-Rp.getTimezoneOffset())*6e4,V4=u8.getTimezoneOffset();function Yg(e){var s=new Date;return s.setTime(e*24*60*60*1e3+Y9),s.getTimezoneOffset()!==V4&&s.setTime(s.getTime()+(s.getTimezoneOffset()-V4)*6e4),s}function X9(e){var s=0,a=0,r=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(a=1,i>3&&(r=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":a*=24;case"H":a*=60;case"M":if(r)a*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=a*parseInt(n[i],10)}return s}var G4=new Date("2017-02-19T19:06:09.000Z"),m8=isNaN(G4.getFullYear())?new Date("2/19/17"):G4,Z9=m8.getFullYear()==2017;function ya(e,s){var a=new Date(e);if(Z9)return s>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):s<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(e instanceof Date)return e;if(m8.getFullYear()==1917&&!isNaN(a.getFullYear())){var r=a.getFullYear();return e.indexOf(""+r)>-1||a.setFullYear(a.getFullYear()+100),a}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Zc(e,s){if(fs&&Buffer.isBuffer(e)){if(s){if(e[0]==255&&e[1]==254)return Ji(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Ji(ZM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(e[0]==255&&e[1]==254)return Ji(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Ji(new TextDecoder("utf-16be").decode(e.slice(2)))}var a={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return a[i]||i})}catch{}for(var r=[],n=0;n!=e.length;++n)r.push(String.fromCharCode(e[n]));return r.join("")}function Na(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=Na(e[a]));return s}function Pa(e,s){for(var a="";a.length<s;)a+=e;return a}function Ri(e){var s=Number(e);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(e))return s;var a=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(s=Number(r))||(r=r.replace(/[(](.*)[)]/,function(n,i){return a=-a,i}),!isNaN(s=Number(r)))?s/a:s}var eH=["january","february","march","april","may","june","july","august","september","october","november","december"];function Du(e){var s=new Date(e),a=new Date(NaN),r=s.getYear(),n=s.getMonth(),i=s.getDate();if(isNaN(i))return a;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&eH.indexOf(l)==-1)return a}else if(l.match(/[a-z]/))return a;return r<0||r>8099?a:(n>0||i>1)&&r!=101?s:e.match(/[^-0-9:,\/\\]/)?a:s}var tH=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(a,r,n){if(e||typeof r=="string")return a.split(r);for(var i=a.split(r),l=[i[0]],o=1;o<i.length;++o)l.push(n),l.push(i[o]);return l}})();function f8(e){return e?e.content&&e.type?Zc(e.content,!0):e.data?Im(e.data):e.asNodeBuffer&&fs?Im(e.asNodeBuffer().toString("binary")):e.asBinary?Im(e.asBinary()):e._data&&e._data.getContent?Im(Zc(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function h8(e){if(!e)return null;if(e.data)return P4(e.data);if(e.asNodeBuffer&&fs)return e.asNodeBuffer();if(e._data&&e._data.getContent){var s=e._data.getContent();return typeof s=="string"?P4(s):Array.prototype.slice.call(s)}return e.content&&e.type?e.content:null}function sH(e){return e&&e.name.slice(-4)===".bin"?h8(e):f8(e)}function ii(e,s){for(var a=e.FullPaths||Fa(e.files),r=s.toLowerCase().replace(/[\/]/g,"\\"),n=r.replace(/\\/g,"/"),i=0;i<a.length;++i){var l=a[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==l||n==l)return e.files?e.files[a[i]]:e.FileIndex[i]}return null}function wA(e,s){var a=ii(e,s);if(a==null)throw new Error("Cannot find file "+s+" in zip");return a}function Xa(e,s,a){if(!a)return sH(wA(e,s));if(!s)return null;try{return Xa(e,s)}catch{return null}}function Dn(e,s,a){if(!a)return f8(wA(e,s));if(!s)return null;try{return Dn(e,s)}catch{return null}}function aH(e,s,a){return h8(wA(e,s))}function W4(e){for(var s=e.FullPaths||Fa(e.files),a=[],r=0;r<s.length;++r)s[r].slice(-1)!="/"&&a.push(s[r].replace(/^Root Entry[\/]/,""));return a.sort()}function os(e,s,a){if(e.FullPaths){if(typeof a=="string"){var r;return fs?r=Ql(a):r=N9(a),Ot.utils.cfb_add(e,s,r)}Ot.utils.cfb_add(e,s,a)}else e.file(s,a)}function SA(){return Ot.utils.cfb_new()}function x8(e,s){switch(s.type){case"base64":return Ot.read(e,{type:"base64"});case"binary":return Ot.read(e,{type:"binary"});case"buffer":case"array":return Ot.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Pm(e,s){if(e.charAt(0)=="/")return e.slice(1);var a=s.split("/");s.slice(-1)!="/"&&a.pop();for(var r=e.split("/");r.length!==0;){var n=r.shift();n===".."?a.pop():n!=="."&&a.push(n)}return a.join("/")}var Va=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,rH=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Q4=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,nH=/<[^>]*>/g,Xr=Va.match(Q4)?Q4:nH,iH=/<\w*:/,lH=/<(\/?)\w+:/;function Qt(e,s,a){for(var r={},n=0,i=0;n!==e.length&&!((i=e.charCodeAt(n))===32||i===10||i===13);++n);if(s||(r[0]=e.slice(0,n)),n===e.length)return r;var l=e.match(rH),o=0,d="",u=0,h="",f="",x=1;if(l)for(u=0;u!=l.length;++u){for(f=l[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(h=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(x=(n=f.charCodeAt(i+1))==34||n==39?1:0,d=f.slice(i+1+x,f.length-x),o=0;o!=h.length&&h.charCodeAt(o)!==58;++o);if(o===h.length)h.indexOf("_")>0&&(h=h.slice(0,h.indexOf("_"))),r[h]=d,r[h.toLowerCase()]=d;else{var p=(o===5&&h.slice(0,5)==="xmlns"?"xmlns":"")+h.slice(o+1);if(r[p]&&h.slice(o-3,o)=="ext")continue;r[p]=d,r[p.toLowerCase()]=d}}return r}function il(e){return e.replace(lH,"<$1")}var p8={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},AA=Kg(p8),Os=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function a(r){var n=r+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(e,function(o,d){return p8[o]||String.fromCharCode(parseInt(d,o.indexOf("x")>-1?16:10))||o}).replace(s,function(o,d){return String.fromCharCode(parseInt(d,16))});var l=n.indexOf("]]>");return a(n.slice(0,i))+n.slice(i+9,l)+a(n.slice(l+3))}})(),EA=/[&<>'"]/g,oH=/[\u0000-\u0008\u000b-\u001f]/g;function ea(e){var s=e+"";return s.replace(EA,function(a){return AA[a]}).replace(oH,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function K4(e){return ea(e).replace(/ /g,"_x0020_")}var g8=/[\u0000-\u001f]/g;function CA(e){var s=e+"";return s.replace(EA,function(a){return AA[a]}).replace(/\n/g,"<br/>").replace(g8,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function cH(e){var s=e+"";return s.replace(EA,function(a){return AA[a]}).replace(g8,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}var J4=(function(){var e=/&#(\d+);/g;function s(a,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(e,s)}})();function dH(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ba(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function t1(e){for(var s="",a=0,r=0,n=0,i=0,l=0,o=0;a<e.length;){if(r=e.charCodeAt(a++),r<128){s+=String.fromCharCode(r);continue}if(n=e.charCodeAt(a++),r>191&&r<224){l=(r&31)<<6,l|=n&63,s+=String.fromCharCode(l);continue}if(i=e.charCodeAt(a++),r<240){s+=String.fromCharCode((r&15)<<12|(n&63)<<6|i&63);continue}l=e.charCodeAt(a++),o=((r&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,s+=String.fromCharCode(55296+(o>>>10&1023)),s+=String.fromCharCode(56320+(o&1023))}return s}function Y4(e){var s=qo(2*e.length),a,r,n=1,i=0,l=0,o;for(r=0;r<e.length;r+=n)n=1,(o=e.charCodeAt(r))<128?a=o:o<224?(a=(o&31)*64+(e.charCodeAt(r+1)&63),n=2):o<240?(a=(o&15)*4096+(e.charCodeAt(r+1)&63)*64+(e.charCodeAt(r+2)&63),n=3):(n=4,a=(o&7)*262144+(e.charCodeAt(r+1)&63)*4096+(e.charCodeAt(r+2)&63)*64+(e.charCodeAt(r+3)&63),a-=65536,l=55296+(a>>>10&1023),a=56320+(a&1023)),l!==0&&(s[i++]=l&255,s[i++]=l>>>8,l=0),s[i++]=a%256,s[i++]=a>>>8;return s.slice(0,i).toString("ucs2")}function X4(e){return Ql(e,"binary").toString("utf8")}var Ux="foo bar baz",da=fs&&(X4(Ux)==t1(Ux)&&X4||Y4(Ux)==t1(Ux)&&Y4)||t1,Ji=fs?function(e){return Ql(e,"utf8").toString("binary")}:function(e){for(var s=[],a=0,r=0,n=0;a<e.length;)switch(r=e.charCodeAt(a++),!0){case r<128:s.push(String.fromCharCode(r));break;case r<2048:s.push(String.fromCharCode(192+(r>>6))),s.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,n=e.charCodeAt(a++)-56320+(r<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(r>>12))),s.push(String.fromCharCode(128+(r>>6&63))),s.push(String.fromCharCode(128+(r&63)))}return s.join("")},cf=(function(){var e={};return function(a,r){var n=a+"|"+(r||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+a+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+a+">",r||"")}})(),b8=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(a){for(var r=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}})(),uH=(function(){var e={};return function(a){return e[a]!==void 0?e[a]:e[a]=new RegExp("<(?:vt:)?"+a+">([\\s\\S]*?)</(?:vt:)?"+a+">","g")}})(),mH=/<\/?(?:vt:)?variant>/g,fH=/<(?:vt:)([^>]*)>([\s\S]*)</;function Z4(e,s){var a=Qt(e),r=e.match(uH(a.baseType))||[],n=[];if(r.length!=a.size){if(s.WTF)throw new Error("unexpected vector length "+r.length+" != "+a.size);return n}return r.forEach(function(i){var l=i.replace(mH,"").match(fH);l&&n.push({v:da(l[2]),t:l[1]})}),n}var v8=/(^\s|\s$|\n)/;function Or(e,s){return"<"+e+(s.match(v8)?' xml:space="preserve"':"")+">"+s+"</"+e+">"}function df(e){return Fa(e).map(function(s){return" "+s+'="'+e[s]+'"'}).join("")}function ut(e,s,a){return"<"+e+(a!=null?df(a):"")+(s!=null?(s.match(v8)?' xml:space="preserve"':"")+">"+s+"</"+e:"/")+">"}function _S(e,s){try{return e.toISOString().replace(/\.\d*/,"")}catch(a){if(s)throw a}return""}function hH(e,s){switch(typeof e){case"string":var a=ut("vt:lpwstr",ea(e));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return ut((e|0)==e?"vt:i4":"vt:r8",ea(String(e)));case"boolean":return ut("vt:bool",e?"true":"false")}if(e instanceof Date)return ut("vt:filetime",_S(e));throw new Error("Unable to serialize "+e)}function TA(e){if(fs&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return da(Zo(yA(e)));throw new Error("Bad input format: expected Buffer or string")}var uf=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,cr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},fd=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],In={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function xH(e,s){for(var a=1-2*(e[s+7]>>>7),r=((e[s+7]&127)<<4)+(e[s+6]>>>4&15),n=e[s+6]&15,i=5;i>=0;--i)n=n*256+e[s+i];return r==2047?n==0?a*(1/0):NaN:(r==0?r=-1022:(r-=1023,n+=Math.pow(2,52)),a*Math.pow(2,r-52)*n)}function pH(e,s,a){var r=(s<0||1/s==-1/0?1:0)<<7,n=0,i=0,l=r?-s:s;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(s)?26985:0);for(var o=0;o<=5;++o,i/=256)e[a+o]=i&255;e[a+6]=(n&15)<<4|i&15,e[a+7]=n>>4|r}var eO=function(e){for(var s=[],a=10240,r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,i=e[0][r].length;n<i;n+=a)s.push.apply(s,e[0][r].slice(n,n+a));return s},tO=fs?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(s){return Buffer.isBuffer(s)?s:Ql(s)})):eO(e)}:eO,sO=function(e,s,a){for(var r=[],n=s;n<a;n+=2)r.push(String.fromCharCode(kl(e,n)));return r.join("").replace(rn,"")},_A=fs?function(e,s,a){return Buffer.isBuffer(e)?e.toString("utf16le",s,a).replace(rn,""):sO(e,s,a)}:sO,aO=function(e,s,a){for(var r=[],n=s;n<s+a;++n)r.push(("0"+e[n].toString(16)).slice(-2));return r.join("")},y8=fs?function(e,s,a){return Buffer.isBuffer(e)?e.toString("hex",s,s+a):aO(e,s,a)}:aO,rO=function(e,s,a){for(var r=[],n=s;n<a;n++)r.push(String.fromCharCode(gu(e,n)));return r.join("")},lh=fs?function(s,a,r){return Buffer.isBuffer(s)?s.toString("utf8",a,r):rO(s,a,r)}:rO,N8=function(e,s){var a=Rn(e,s);return a>0?lh(e,s+4,s+4+a-1):""},j8=N8,w8=function(e,s){var a=Rn(e,s);return a>0?lh(e,s+4,s+4+a-1):""},S8=w8,A8=function(e,s){var a=2*Rn(e,s);return a>0?lh(e,s+4,s+4+a-1):""},E8=A8,C8=function(s,a){var r=Rn(s,a);return r>0?_A(s,a+4,a+4+r):""},T8=C8,_8=function(e,s){var a=Rn(e,s);return a>0?lh(e,s+4,s+4+a):""},k8=_8,O8=function(e,s){return xH(e,s)},Pp=O8,kA=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};fs&&(j8=function(s,a){if(!Buffer.isBuffer(s))return N8(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},S8=function(s,a){if(!Buffer.isBuffer(s))return w8(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},E8=function(s,a){if(!Buffer.isBuffer(s))return A8(s,a);var r=2*s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r-1)},T8=function(s,a){if(!Buffer.isBuffer(s))return C8(s,a);var r=s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r)},k8=function(s,a){if(!Buffer.isBuffer(s))return _8(s,a);var r=s.readUInt32LE(a);return s.toString("utf8",a+4,a+4+r)},Pp=function(s,a){return Buffer.isBuffer(s)?s.readDoubleLE(a):O8(s,a)},kA=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var gu=function(e,s){return e[s]},kl=function(e,s){return e[s+1]*256+e[s]},gH=function(e,s){var a=e[s+1]*256+e[s];return a<32768?a:(65535-a+1)*-1},Rn=function(e,s){return e[s+3]*(1<<24)+(e[s+2]<<16)+(e[s+1]<<8)+e[s]},Pc=function(e,s){return e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]},bH=function(e,s){return e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]};function $m(e,s){var a="",r,n,i=[],l,o,d,u;switch(s){case"dbcs":if(u=this.l,fs&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)a+=String.fromCharCode(kl(this,u)),u+=2;e*=2;break;case"utf8":a=lh(this,this.l,this.l+e);break;case"utf16le":e*=2,a=_A(this,this.l,this.l+e);break;case"wstr":return $m.call(this,e,"dbcs");case"lpstr-ansi":a=j8(this,this.l),e=4+Rn(this,this.l);break;case"lpstr-cp":a=S8(this,this.l),e=4+Rn(this,this.l);break;case"lpwstr":a=E8(this,this.l),e=4+2*Rn(this,this.l);break;case"lpp4":e=4+Rn(this,this.l),a=T8(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Rn(this,this.l),a=k8(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,a="";(l=gu(this,this.l+e++))!==0;)i.push(Fx(l));a=i.join("");break;case"_wstr":for(e=0,a="";(l=kl(this,this.l+e))!==0;)i.push(Fx(l)),e+=2;e+=2,a=i.join("");break;case"dbcs-cont":for(a="",u=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return l=gu(this,u),this.l=u+1,o=$m.call(this,e-d,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Fx(kl(this,u))),u+=2}a=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(a="",u=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return l=gu(this,u),this.l=u+1,o=$m.call(this,e-d,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Fx(gu(this,u))),u+=1}a=i.join("");break;default:switch(e){case 1:return r=gu(this,this.l),this.l++,r;case 2:return r=(s==="i"?gH:kl)(this,this.l),this.l+=2,r;case 4:case-4:return s==="i"||(this[this.l+3]&128)===0?(r=(e>0?Pc:bH)(this,this.l),this.l+=4,r):(n=Rn(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return e==8?n=Pp(this,this.l):n=Pp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:a=y8(this,this.l,e);break}}return this.l+=e,a}var vH=function(e,s,a){e[a]=s&255,e[a+1]=s>>>8&255,e[a+2]=s>>>16&255,e[a+3]=s>>>24&255},yH=function(e,s,a){e[a]=s&255,e[a+1]=s>>8&255,e[a+2]=s>>16&255,e[a+3]=s>>24&255},NH=function(e,s,a){e[a]=s&255,e[a+1]=s>>>8&255};function jH(e,s,a){var r=0,n=0;if(a==="dbcs"){for(n=0;n!=s.length;++n)NH(this,s.charCodeAt(n),this.l+2*n);r=2*s.length}else if(a==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;r=s.length}else if(a==="hex"){for(;n<e;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(a==="utf16le"){var i=Math.min(this.l+e,this.length);for(n=0;n<Math.min(s.length,e);++n){var l=s.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:r=1,this[this.l]=s&255;break;case 2:r=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:r=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:r=4,vH(this,s,this.l);break;case 8:if(r=8,a==="f"){pH(this,s,this.l);break}case 16:break;case-4:r=4,yH(this,s,this.l);break}return this.l+=r,this}function I8(e,s){var a=y8(this,this.l,e.length>>1);if(a!==e)throw new Error(s+"Expected "+e+" saw "+a);this.l+=e.length>>1}function kr(e,s){e.l=s,e.read_shift=$m,e.chk=I8,e.write_shift=jH}function Jr(e,s){e.l+=s}function Ye(e){var s=qo(e);return kr(s,0),s}function Kl(e,s,a){if(e){var r,n,i;kr(e,e.l||0);for(var l=e.length,o=0,d=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=gf[o]||gf[65535];for(r=e.read_shift(1),i=r&127,n=1;n<4&&r&128;++n)i+=((r=e.read_shift(1))&127)<<7*n;d=e.l+i;var h=u.f&&u.f(e,i,a);if(e.l=d,s(h,u,o))return}}}function pn(){var e=[],s=fs?256:2048,a=function(u){var h=Ye(u);return kr(h,0),h},r=a(s),n=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&e.push(r),r=null)},i=function(u){return r&&u<r.length-r.l?r:(n(),r=a(Math.max(u+1,s)))},l=function(){return n(),vr(e)},o=function(u){n(),r=u,r.l==null&&(r.l=r.length),i(s)};return{next:i,push:o,end:l,_bufs:e}}function at(e,s,a,r){var n=+s,i;if(!isNaN(n)){r||(r=gf[n].p||(a||[]).length||0),i=1+(n>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var l=e.next(i);n<=127?l.write_shift(1,n):(l.write_shift(1,(n&127)+128),l.write_shift(1,n>>7));for(var o=0;o!=4;++o)if(r>=128)l.write_shift(1,(r&127)+128),r>>=7;else{l.write_shift(1,r);break}r>0&&kA(a)&&e.push(a)}}function qm(e,s,a){var r=Na(e);if(s.s?(r.cRel&&(r.c+=s.s.c),r.rRel&&(r.r+=s.s.r)):(r.cRel&&(r.c+=s.c),r.rRel&&(r.r+=s.r)),!a||a.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function nO(e,s,a){var r=Na(e);return r.s=qm(r.s,s.s,a),r.e=qm(r.e,s.s,a),r}function Hm(e,s){if(e.cRel&&e.c<0)for(e=Na(e);e.c<0;)e.c+=s>8?16384:256;if(e.rRel&&e.r<0)for(e=Na(e);e.r<0;)e.r+=s>8?1048576:s>5?65536:16384;var a=Vt(e);return!e.cRel&&e.cRel!=null&&(a=AH(a)),!e.rRel&&e.rRel!=null&&(a=wH(a)),a}function s1(e,s){return e.s.r==0&&!e.s.rRel&&e.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ka(e.s.c)+":"+(e.e.cRel?"":"$")+ka(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(s.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ha(e.s.r)+":"+(e.e.rRel?"":"$")+Ha(e.e.r):Hm(e.s,s.biff)+":"+Hm(e.e,s.biff)}function OA(e){return parseInt(SH(e),10)-1}function Ha(e){return""+(e+1)}function wH(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function SH(e){return e.replace(/\$(\d+)$/,"$1")}function IA(e){for(var s=EH(e),a=0,r=0;r!==s.length;++r)a=26*a+s.charCodeAt(r)-64;return a-1}function ka(e){if(e<0)throw new Error("invalid column "+e);var s="";for(++e;e;e=Math.floor((e-1)/26))s=String.fromCharCode((e-1)%26+65)+s;return s}function AH(e){return e.replace(/^([A-Z])/,"$$$1")}function EH(e){return e.replace(/^\$([A-Z])/,"$1")}function CH(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Oa(e){for(var s=0,a=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(a=26*a+(n-64))}return{c:a-1,r:s-1}}function Vt(e){for(var s=e.c+1,a="";s;s=(s-1)/26|0)a=String.fromCharCode((s-1)%26+65)+a;return a+(e.r+1)}function vn(e){var s=e.indexOf(":");return s==-1?{s:Oa(e),e:Oa(e)}:{s:Oa(e.slice(0,s)),e:Oa(e.slice(s+1))}}function rs(e,s){return typeof s>"u"||typeof s=="number"?rs(e.s,e.e):(typeof e!="string"&&(e=Vt(e)),typeof s!="string"&&(s=Vt(s)),e==s?e:e+":"+s)}function Rs(e){var s={s:{c:0,r:0},e:{c:0,r:0}},a=0,r=0,n=0,i=e.length;for(a=0;r<i&&!((n=e.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.s.c=--a,a=0;r<i&&!((n=e.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;if(s.s.r=--a,r===i||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++r,a=0;r!=i&&!((n=e.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.e.c=--a,a=0;r!=i&&!((n=e.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;return s.e.r=--a,s}function iO(e,s){var a=e.t=="d"&&s instanceof Date;if(e.z!=null)try{return e.w=hi(e.z,a?hr(s):s)}catch{}try{return e.w=hi((e.XF||{}).numFmtId||(a?14:0),a?hr(s):s)}catch{return""+s}}function $l(e,s,a){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&a&&a.dateNF&&(e.z=a.dateNF),e.t=="e"?Jl[e.v]||e.v:s==null?iO(e,e.v):iO(e,s))}function ec(e,s){var a=s&&s.sheet?s.sheet:"Sheet1",r={};return r[a]=e,{SheetNames:[a],Sheets:r}}function R8(e,s,a){var r=a||{},n=e?Array.isArray(e):r.dense,i=e||(n?[]:{}),l=0,o=0;if(i&&r.origin!=null){if(typeof r.origin=="number")l=r.origin;else{var d=typeof r.origin=="string"?Oa(r.origin):r.origin;l=d.r,o=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var h=Rs(i["!ref"]);u.s.c=h.s.c,u.s.r=h.s.r,u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),l==-1&&(u.e.r=l=h.e.r+1)}for(var f=0;f!=s.length;++f)if(s[f]){if(!Array.isArray(s[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=s[f].length;++x)if(!(typeof s[f][x]>"u")){var p={v:s[f][x]},v=l+f,b=o+x;if(u.s.r>v&&(u.s.r=v),u.s.c>b&&(u.s.c=b),u.e.r<v&&(u.e.r=v),u.e.c<b&&(u.e.c=b),s[f][x]&&typeof s[f][x]=="object"&&!Array.isArray(s[f][x])&&!(s[f][x]instanceof Date))p=s[f][x];else if(Array.isArray(p.v)&&(p.f=s[f][x][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||Ht[14],r.cellDates?(p.t="d",p.w=hi(p.z,hr(p.v))):(p.t="n",p.v=hr(p.v),p.w=hi(p.z,p.v))):p.t="s";if(n)i[v]||(i[v]=[]),i[v][b]&&i[v][b].z&&(p.z=i[v][b].z),i[v][b]=p;else{var y=Vt({c:b,r:v});i[y]&&i[y].z&&(p.z=i[y].z),i[y]=p}}}return u.s.c<1e7&&(i["!ref"]=rs(u)),i}function m0(e,s){return R8(null,e,s)}function TH(e){return e.read_shift(4,"i")}function Pi(e,s){return s||(s=Ye(4)),s.write_shift(4,e),s}function Kr(e){var s=e.read_shift(4);return s===0?"":e.read_shift(s,"dbcs")}function yr(e,s){var a=!1;return s==null&&(a=!0,s=Ye(4+2*e.length)),s.write_shift(4,e.length),e.length>0&&s.write_shift(0,e,"dbcs"),a?s.slice(0,s.l):s}function _H(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function kH(e,s){return s||(s=Ye(4)),s.write_shift(2,0),s.write_shift(2,0),s}function RA(e,s){var a=e.l,r=e.read_shift(1),n=Kr(e),i=[],l={t:n,h:n};if((r&1)!==0){for(var o=e.read_shift(4),d=0;d!=o;++d)i.push(_H(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=a+s,l}function OH(e,s){var a=!1;return s==null&&(a=!0,s=Ye(15+4*e.t.length)),s.write_shift(1,0),yr(e.t,s),a?s.slice(0,s.l):s}var IH=RA;function RH(e,s){var a=!1;return s==null&&(a=!0,s=Ye(23+4*e.t.length)),s.write_shift(1,1),yr(e.t,s),s.write_shift(4,1),kH({},s),a?s.slice(0,s.l):s}function vi(e){var s=e.read_shift(4),a=e.read_shift(2);return a+=e.read_shift(1)<<16,e.l++,{c:s,iStyleRef:a}}function hd(e,s){return s==null&&(s=Ye(8)),s.write_shift(-4,e.c),s.write_shift(3,e.iStyleRef||e.s),s.write_shift(1,0),s}function xd(e){var s=e.read_shift(2);return s+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:s}}function pd(e,s){return s==null&&(s=Ye(4)),s.write_shift(3,e.iStyleRef||e.s),s.write_shift(1,0),s}var PH=Kr,P8=yr;function PA(e){var s=e.read_shift(4);return s===0||s===4294967295?"":e.read_shift(s,"dbcs")}function Dp(e,s){var a=!1;return s==null&&(a=!0,s=Ye(127)),s.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&s.write_shift(0,e,"dbcs"),a?s.slice(0,s.l):s}var DH=Kr,kS=PA,DA=Dp;function MA(e){var s=e.slice(e.l,e.l+4),a=s[0]&1,r=s[0]&2;e.l+=4;var n=r===0?Pp([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):Pc(s,0)>>2;return a?n/100:n}function D8(e,s){s==null&&(s=Ye(4));var a=0,r=0,n=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?r=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(r=1,a=1),r)s.write_shift(-4,((a?n:e)<<2)+(a+2));else throw new Error("unsupported RkNumber "+e)}function M8(e){var s={s:{},e:{}};return s.s.r=e.read_shift(4),s.e.r=e.read_shift(4),s.s.c=e.read_shift(4),s.e.c=e.read_shift(4),s}function MH(e,s){return s||(s=Ye(16)),s.write_shift(4,e.s.r),s.write_shift(4,e.e.r),s.write_shift(4,e.s.c),s.write_shift(4,e.e.c),s}var gd=M8,f0=MH;function Gr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function ed(e,s){return(s||Ye(8)).write_shift(8,e,"f")}function LH(e){var s={},a=e.read_shift(1),r=a>>>1,n=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),d=e.read_shift(1);switch(e.l++,r){case 0:s.auto=1;break;case 1:s.index=n;var u=Bc[n];u&&(s.rgb=ff(u));break;case 2:s.rgb=ff([l,o,d]);break;case 3:s.theme=n;break}return i!=0&&(s.tint=i>0?i/32767:i/32768),s}function Mp(e,s){if(s||(s=Ye(8)),!e||e.auto)return s.write_shift(4,0),s.write_shift(4,0),s;e.index!=null?(s.write_shift(1,2),s.write_shift(1,e.index)):e.theme!=null?(s.write_shift(1,6),s.write_shift(1,e.theme)):(s.write_shift(1,5),s.write_shift(1,0));var a=e.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),s.write_shift(2,a),!e.rgb||e.theme!=null)s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);else{var r=e.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),s.write_shift(1,parseInt(r.slice(0,2),16)),s.write_shift(1,parseInt(r.slice(2,4),16)),s.write_shift(1,parseInt(r.slice(4,6),16)),s.write_shift(1,255)}return s}function FH(e){var s=e.read_shift(1);e.l++;var a={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return a}function UH(e,s){s||(s=Ye(2));var a=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return s.write_shift(1,a),s.write_shift(1,0),s}function L8(e,s){var a={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return a[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,s==1?"lpstr":"lpwstr")}function zH(e){return L8(e,1)}function BH(e){return L8(e,2)}var LA=2,hn=3,zx=11,lO=12,Lp=19,Bx=64,$H=65,qH=71,HH=4108,VH=4126,gr=80,F8=81,GH=[gr,F8],OS={1:{n:"CodePage",t:LA},2:{n:"Category",t:gr},3:{n:"PresentationFormat",t:gr},4:{n:"ByteCount",t:hn},5:{n:"LineCount",t:hn},6:{n:"ParagraphCount",t:hn},7:{n:"SlideCount",t:hn},8:{n:"NoteCount",t:hn},9:{n:"HiddenCount",t:hn},10:{n:"MultimediaClipCount",t:hn},11:{n:"ScaleCrop",t:zx},12:{n:"HeadingPairs",t:HH},13:{n:"TitlesOfParts",t:VH},14:{n:"Manager",t:gr},15:{n:"Company",t:gr},16:{n:"LinksUpToDate",t:zx},17:{n:"CharacterCount",t:hn},19:{n:"SharedDoc",t:zx},22:{n:"HyperlinksChanged",t:zx},23:{n:"AppVersion",t:hn,p:"version"},24:{n:"DigSig",t:$H},26:{n:"ContentType",t:gr},27:{n:"ContentStatus",t:gr},28:{n:"Language",t:gr},29:{n:"Version",t:gr},255:{},2147483648:{n:"Locale",t:Lp},2147483651:{n:"Behavior",t:Lp},1919054434:{}},IS={1:{n:"CodePage",t:LA},2:{n:"Title",t:gr},3:{n:"Subject",t:gr},4:{n:"Author",t:gr},5:{n:"Keywords",t:gr},6:{n:"Comments",t:gr},7:{n:"Template",t:gr},8:{n:"LastAuthor",t:gr},9:{n:"RevNumber",t:gr},10:{n:"EditTime",t:Bx},11:{n:"LastPrinted",t:Bx},12:{n:"CreatedDate",t:Bx},13:{n:"ModifiedDate",t:Bx},14:{n:"PageCount",t:hn},15:{n:"WordCount",t:hn},16:{n:"CharCount",t:hn},17:{n:"Thumbnail",t:qH},18:{n:"Application",t:gr},19:{n:"DocSecurity",t:hn},255:{},2147483648:{n:"Locale",t:Lp},2147483651:{n:"Behavior",t:Lp},1919054434:{}},oO={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},WH=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function QH(e){return e.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var KH=QH([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Bc=Na(KH),Jl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},U8={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},RS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},$x={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function FA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function JH(e){var s=FA();if(!e||!e.match)return s;var a={};if((e.match(Xr)||[]).forEach(function(r){var n=Qt(r);switch(n[0].replace(iH,"<")){case"<?xml":break;case"<Types":s.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":a[n.Extension]=n.ContentType;break;case"<Override":s[RS[n.ContentType]]!==void 0&&s[RS[n.ContentType]].push(n.PartName);break}}),s.xmlns!==cr.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=a,delete s.calcchains,s}function z8(e,s){var a=J9(RS),r=[],n;r[r.length]=Va,r[r.length]=ut("Types",null,{xmlns:cr.CT,"xmlns:xsd":cr.xsd,"xmlns:xsi":cr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(d){return ut("Default",null,{Extension:d[0],ContentType:d[1]})}));var i=function(d){e[d]&&e[d].length>0&&(n=e[d][0],r[r.length]=ut("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:$x[d][s.bookType]||$x[d].xlsx}))},l=function(d){(e[d]||[]).forEach(function(u){r[r.length]=ut("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:$x[d][s.bookType]||$x[d].xlsx})})},o=function(d){(e[d]||[]).forEach(function(u){r[r.length]=ut("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:a[d][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var ps={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function mf(e){var s=e.lastIndexOf("/");return e.slice(0,s+1)+"_rels/"+e.slice(s+1)+".rels"}function Vm(e,s){var a={"!id":{}};if(!e)return a;s.charAt(0)!=="/"&&(s="/"+s);var r={};return(e.match(Xr)||[]).forEach(function(n){var i=Qt(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Pm(i.Target,s);a[o]=l,r[i.Id]=l}}),a["!id"]=r,a}function Au(e){var s=[Va,ut("Relationships",null,{xmlns:cr.RELS})];return Fa(e["!id"]).forEach(function(a){s[s.length]=ut("Relationship",null,e["!id"][a])}),s.length>2&&(s[s.length]="</Relationships>",s[1]=s[1].replace("/>",">")),s.join("")}function Zs(e,s,a,r,n,i){if(n||(n={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),s<0)for(s=e["!idx"];e["!id"]["rId"+s];++s);if(e["!idx"]=s+1,n.Id="rId"+s,n.Type=r,n.Target=a,[ps.HLINK,ps.XPATH,ps.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),e["!id"][n.Id])throw new Error("Cannot rewrite rId "+s);return e["!id"][n.Id]=n,e[("/"+n.Target).replace("//","/")]=n,s}var YH="application/vnd.oasis.opendocument.spreadsheet";function XH(e,s){for(var a=TA(e),r,n;r=uf.exec(a);)switch(r[3]){case"manifest":break;case"file-entry":if(n=Qt(r[0],!1),n.path=="/"&&n.type!==YH)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw r}}function ZH(e){var s=[Va];s.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),s.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<e.length;++a)s.push('  <manifest:file-entry manifest:full-path="'+e[a][0]+'" manifest:media-type="'+e[a][1]+`"/>
`);return s.push("</manifest:manifest>"),s.join("")}function cO(e,s,a){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+s+`"/>
`,`  </rdf:Description>
`].join("")}function eV(e,s){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+s+`"/>
`,`  </rdf:Description>
`].join("")}function tV(e){var s=[Va];s.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=e.length;++a)s.push(cO(e[a][0],e[a][1])),s.push(eV("",e[a][0]));return s.push(cO("","Document","pkg")),s.push("</rdf:RDF>"),s.join("")}function B8(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+_p.version+"</meta:generator></office:meta></office:document-meta>"}var ui=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],sV=(function(){for(var e=new Array(ui.length),s=0;s<ui.length;++s){var a=ui[s],r="(?:"+a[0].slice(0,a[0].indexOf(":"))+":)"+a[0].slice(a[0].indexOf(":")+1);e[s]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return e})();function $8(e){var s={};e=da(e);for(var a=0;a<ui.length;++a){var r=ui[a],n=e.match(sV[a]);n!=null&&n.length>0&&(s[r[1]]=Os(n[1])),r[2]==="date"&&s[r[1]]&&(s[r[1]]=ya(s[r[1]]))}return s}function a1(e,s,a,r,n){n[e]!=null||s==null||s===""||(n[e]=s,s=ea(s),r[r.length]=a?ut(e,s,a):Or(e,s))}function q8(e,s){var a=s||{},r=[Va,ut("cp:coreProperties",null,{"xmlns:cp":cr.CORE_PROPS,"xmlns:dc":cr.dc,"xmlns:dcterms":cr.dcterms,"xmlns:dcmitype":cr.dcmitype,"xmlns:xsi":cr.xsi})],n={};if(!e&&!a.Props)return r.join("");e&&(e.CreatedDate!=null&&a1("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:_S(e.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,n),e.ModifiedDate!=null&&a1("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:_S(e.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,n));for(var i=0;i!=ui.length;++i){var l=ui[i],o=a.Props&&a.Props[l[1]]!=null?a.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&a1(l[0],o,null,r,n)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var $c=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],H8=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function V8(e,s,a,r){var n=[];if(typeof e=="string")n=Z4(e,r);else for(var i=0;i<e.length;++i)n=n.concat(e[i].map(function(h){return{v:h}}));var l=typeof s=="string"?Z4(s,r).map(function(h){return h.v}):s,o=0,d=0;if(l.length>0)for(var u=0;u!==n.length;u+=2){switch(d=+n[u+1].v,n[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":a.Worksheets=d,a.SheetNames=l.slice(o,o+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":a.NamedRanges=d,a.DefinedNames=l.slice(o,o+d);break;case"Charts":case"Diagramme":a.Chartsheets=d,a.ChartNames=l.slice(o,o+d);break}o+=d}}function aV(e,s,a){var r={};return s||(s={}),e=da(e),$c.forEach(function(n){var i=(e.match(cf(n[0]))||[])[1];switch(n[2]){case"string":i&&(s[n[1]]=Os(i));break;case"bool":s[n[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(r[n[1]]=l[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&V8(r.HeadingPairs,r.TitlesOfParts,s,a),s}function G8(e){var s=[],a=ut;return e||(e={}),e.Application="SheetJS",s[s.length]=Va,s[s.length]=ut("Properties",null,{xmlns:cr.EXT_PROPS,"xmlns:vt":cr.vt}),$c.forEach(function(r){if(e[r[1]]!==void 0){var n;switch(r[2]){case"string":n=ea(String(e[r[1]]));break;case"bool":n=e[r[1]]?"true":"false";break}n!==void 0&&(s[s.length]=a(r[0],n))}}),s[s.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),s[s.length]=a("TitlesOfParts",a("vt:vector",e.SheetNames.map(function(r){return"<vt:lpstr>"+ea(r)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var rV=/<[^>]+>[^<]*/g;function nV(e,s){var a={},r="",n=e.match(rV);if(n)for(var i=0;i!=n.length;++i){var l=n[i],o=Qt(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=Os(o.name);break;case"</property>":r=null;break;default:if(l.indexOf("<vt:")===0){var d=l.split(">"),u=d[0].slice(4),h=d[1];switch(u){case"lpstr":case"bstr":case"lpwstr":a[r]=Os(h);break;case"bool":a[r]=ba(h);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":a[r]=parseInt(h,10);break;case"r4":case"r8":case"decimal":a[r]=parseFloat(h);break;case"filetime":case"date":a[r]=ya(h);break;case"cy":case"error":a[r]=Os(h);break;default:if(u.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",l,u,d)}}else if(l.slice(0,2)!=="</"){if(s.WTF)throw new Error(l)}}}return a}function W8(e){var s=[Va,ut("Properties",null,{xmlns:cr.CUST_PROPS,"xmlns:vt":cr.vt})];if(!e)return s.join("");var a=1;return Fa(e).forEach(function(n){++a,s[s.length]=ut("property",hH(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:ea(n)})}),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var PS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},r1;function iV(e,s,a){r1||(r1=Kg(PS)),s=r1[s]||s,e[s]=a}function lV(e,s){var a=[];return Fa(PS).map(function(r){for(var n=0;n<ui.length;++n)if(ui[n][1]==r)return ui[n];for(n=0;n<$c.length;++n)if($c[n][1]==r)return $c[n];throw r}).forEach(function(r){if(e[r[1]]!=null){var n=s&&s.Props&&s.Props[r[1]]!=null?s.Props[r[1]]:e[r[1]];switch(r[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),a.push(Or(PS[r[1]]||r[1],n))}}),ut("DocumentProperties",a.join(""),{xmlns:In.o})}function oV(e,s){var a=["Worksheets","SheetNames"],r="CustomDocumentProperties",n=[];return e&&Fa(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<ui.length;++l)if(i==ui[l][1])return;for(l=0;l<$c.length;++l)if(i==$c[l][1])return;for(l=0;l<a.length;++l)if(i==a[l])return;var o=e[i],d="string";typeof o=="number"?(d="float",o=String(o)):o===!0||o===!1?(d="boolean",o=o?"1":"0"):o=String(o),n.push(ut(K4(i),o,{"dt:dt":d}))}}),s&&Fa(s).forEach(function(i){if(Object.prototype.hasOwnProperty.call(s,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=s[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),n.push(ut(K4(i),l,{"dt:dt":o}))}}),"<"+r+' xmlns="'+In.o+'">'+n.join("")+"</"+r+">"}function UA(e){var s=e.read_shift(4),a=e.read_shift(4);return new Date((a/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function cV(e){var s=typeof e=="string"?new Date(Date.parse(e)):e,a=s.getTime()/1e3+11644473600,r=a%Math.pow(2,32),n=(a-r)/Math.pow(2,32);r*=1e7,n*=1e7;var i=r/Math.pow(2,32)|0;i>0&&(r=r%Math.pow(2,32),n+=i);var l=Ye(8);return l.write_shift(4,r),l.write_shift(4,n),l}function Q8(e,s,a){var r=e.l,n=e.read_shift(0,"lpstr-cp");if(a)for(;e.l-r&3;)++e.l;return n}function K8(e,s,a){var r=e.read_shift(0,"lpwstr");return r}function J8(e,s,a){return s===31?K8(e):Q8(e,s,a)}function DS(e,s,a){return J8(e,s,a===!1?0:4)}function dV(e,s){if(!s)throw new Error("VtUnalignedString must have positive length");return J8(e,s,0)}function uV(e){for(var s=e.read_shift(4),a=[],r=0;r!=s;++r){var n=e.l;a[r]=e.read_shift(0,"lpwstr").replace(rn,""),e.l-n&2&&(e.l+=2)}return a}function mV(e){for(var s=e.read_shift(4),a=[],r=0;r!=s;++r)a[r]=e.read_shift(0,"lpstr-cp").replace(rn,"");return a}function fV(e){var s=e.l,a=Fp(e,F8);e[e.l]==0&&e[e.l+1]==0&&e.l-s&2&&(e.l+=2);var r=Fp(e,hn);return[a,r]}function hV(e){for(var s=e.read_shift(4),a=[],r=0;r<s/2;++r)a.push(fV(e));return a}function dO(e,s){for(var a=e.read_shift(4),r={},n=0;n!=a;++n){var i=e.read_shift(4),l=e.read_shift(4);r[i]=e.read_shift(l,s===1200?"utf16le":"utf8").replace(rn,"").replace(Rm,"!"),s===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),r}function Y8(e){var s=e.read_shift(4),a=e.slice(e.l,e.l+s);return e.l+=s,(s&3)>0&&(e.l+=4-(s&3)&3),a}function xV(e){var s={};return s.Size=e.read_shift(4),e.l+=s.Size+3-(s.Size-1)%4,s}function Fp(e,s,a){var r=e.read_shift(2),n,i=a||{};if(e.l+=2,s!==lO&&r!==s&&GH.indexOf(s)===-1&&!((s&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+s+" saw "+r);switch(s===lO?r:s){case 2:return n=e.read_shift(2,"i"),i.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return Q8(e,r,4).replace(rn,"");case 31:return K8(e);case 64:return UA(e);case 65:return Y8(e);case 71:return xV(e);case 80:return DS(e,r,!i.raw).replace(rn,"");case 81:return dV(e,r).replace(rn,"");case 4108:return hV(e);case 4126:case 4127:return r==4127?uV(e):mV(e);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+r)}}function uO(e,s){var a=Ye(4),r=Ye(4);switch(a.write_shift(4,e==80?31:e),e){case 3:r.write_shift(-4,s);break;case 5:r=Ye(8),r.write_shift(8,s,"f");break;case 11:r.write_shift(4,s?1:0);break;case 64:r=cV(s);break;case 31:case 80:for(r=Ye(4+2*(s.length+1)+(s.length%2?0:2)),r.write_shift(4,s.length+1),r.write_shift(0,s,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+s)}return vr([a,r])}function mO(e,s){var a=e.l,r=e.read_shift(4),n=e.read_shift(4),i=[],l=0,o=0,d=-1,u={};for(l=0;l!=n;++l){var h=e.read_shift(4),f=e.read_shift(4);i[l]=[h,f+a]}i.sort(function(w,S){return w[1]-S[1]});var x={};for(l=0;l!=n;++l){if(e.l!==i[l][1]){var p=!0;if(l>0&&s)switch(s[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],p=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],p=!1);break}if((!s||l==0)&&e.l<=i[l][1]&&(p=!1,e.l=i[l][1]),p)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(s){var v=s[i[l][0]];if(x[v.n]=Fp(e,v.t,{raw:!0}),v.p==="version"&&(x[v.n]=String(x[v.n]>>16)+"."+("0000"+String(x[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(x[v.n]){case 0:x[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ki(o=x[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+x[v.n])}}else if(i[l][0]===1){if(o=x.CodePage=Fp(e,LA),ki(o),d!==-1){var b=e.l;e.l=i[d][1],u=dO(e,o),e.l=b}}else if(i[l][0]===0){if(o===0){d=l,e.l=i[l+1][1];continue}u=dO(e,o)}else{var y=u[i[l][0]],j;switch(e[e.l]){case 65:e.l+=4,j=Y8(e);break;case 30:e.l+=4,j=DS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,j=DS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,j=e.read_shift(4,"i");break;case 19:e.l+=4,j=e.read_shift(4);break;case 5:e.l+=4,j=e.read_shift(8,"f");break;case 11:e.l+=4,j=$a(e,4);break;case 64:e.l+=4,j=ya(UA(e));break;default:throw new Error("unparsed value: "+e[e.l])}x[y]=j}}return e.l=a+r,x}var X8=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function pV(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function fO(e,s,a){var r=Ye(8),n=[],i=[],l=8,o=0,d=Ye(8),u=Ye(8);if(d.write_shift(4,2),d.write_shift(4,1200),u.write_shift(4,1),i.push(d),n.push(u),l+=8+d.length,!s){u=Ye(8),u.write_shift(4,0),n.unshift(u);var h=[Ye(4)];for(h[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(d=Ye(8+2*(f.length+1)+(f.length%2?0:2)),d.write_shift(4,o+2),d.write_shift(4,f.length+1),d.write_shift(0,f,"dbcs");d.l!=d.length;)d.write_shift(1,0);h.push(d)}d=vr(h),i.unshift(d),l+=8+d.length}for(o=0;o<e.length;++o)if(!(s&&!s[e[o][0]])&&!(X8.indexOf(e[o][0])>-1||H8.indexOf(e[o][0])>-1)&&e[o][1]!=null){var x=e[o][1],p=0;if(s){p=+s[e[o][0]];var v=a[p];if(v.p=="version"&&typeof x=="string"){var b=x.split(".");x=(+b[0]<<16)+(+b[1]||0)}d=uO(v.t,x)}else{var y=pV(x);y==-1&&(y=31,x=String(x)),d=uO(y,x)}i.push(d),u=Ye(8),u.write_shift(4,s?p:2+o),n.push(u),l+=8+d.length}var j=8*(i.length+1);for(o=0;o<i.length;++o)n[o].write_shift(4,j),j+=i[o].length;return r.write_shift(4,l),r.write_shift(4,i.length),vr([r].concat(n).concat(i))}function hO(e,s,a){var r=e.content;if(!r)return{};kr(r,0);var n,i,l,o,d=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),h=r.read_shift(16);if(h!==Ot.utils.consts.HEADER_CLSID&&h!==a)throw new Error("Bad PropertySet CLSID "+h);if(n=r.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=r.read_shift(16),o=r.read_shift(4),n===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);n===2&&(l=r.read_shift(16),d=r.read_shift(4));var f=mO(r,s),x={SystemIdentifier:u};for(var p in f)x[p]=f[p];if(x.FMTID=i,n===1)return x;if(d-r.l==2&&(r.l+=2),r.l!==d)throw new Error("Length mismatch 2: "+r.l+" !== "+d);var v;try{v=mO(r,null)}catch{}for(p in v)x[p]=v[p];return x.FMTID=[i,l],x}function xO(e,s,a,r,n,i){var l=Ye(n?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,Ot.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,n?2:1),l.write_shift(16,s,"hex"),l.write_shift(4,n?68:48);var d=fO(e,a,r);if(o.push(d),n){var u=fO(n,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+d.length),o.push(u)}return vr(o)}function So(e,s){return e.read_shift(s),null}function gV(e,s){s||(s=Ye(e));for(var a=0;a<e;++a)s.write_shift(1,0);return s}function bV(e,s,a){for(var r=[],n=e.l+s;e.l<n;)r.push(a(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return r}function $a(e,s){return e.read_shift(s)===1}function sn(e,s){return s||(s=Ye(2)),s.write_shift(2,+!!e),s}function Za(e){return e.read_shift(2,"u")}function li(e,s){return s||(s=Ye(2)),s.write_shift(2,e),s}function Z8(e,s){return bV(e,s,Za)}function vV(e){var s=e.read_shift(1),a=e.read_shift(1);return a===1?s:s===1}function eL(e,s,a){return a||(a=Ye(2)),a.write_shift(1,s=="e"?+e:+!!e),a.write_shift(1,s=="e"?1:0),a}function oh(e,s,a){var r=e.read_shift(a&&a.biff>=12?2:1),n="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var i=e.read_shift(1);i&&(n="dbcs-cont")}else a.biff==12&&(n="wstr");a.biff>=2&&a.biff<=5&&(n="cpstr");var l=r?e.read_shift(r,n):"";return l}function yV(e){var s=e.read_shift(2),a=e.read_shift(1),r=a&4,n=a&8,i=1+(a&1),l=0,o,d={};n&&(l=e.read_shift(2)),r&&(o=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",h=s===0?"":e.read_shift(s,u);return n&&(e.l+=4*l),r&&(e.l+=o),d.t=h,n||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function NV(e){var s=e.t||"",a=Ye(3);a.write_shift(2,s.length),a.write_shift(1,1);var r=Ye(2*s.length);r.write_shift(2*s.length,s,"utf16le");var n=[a,r];return vr(n)}function td(e,s,a){var r;if(a){if(a.biff>=2&&a.biff<=5)return e.read_shift(s,"cpstr");if(a.biff>=12)return e.read_shift(s,"dbcs-cont")}var n=e.read_shift(1);return n===0?r=e.read_shift(s,"sbcs-cont"):r=e.read_shift(s,"dbcs-cont"),r}function ch(e,s,a){var r=e.read_shift(a&&a.biff==2?1:2);return r===0?(e.l++,""):td(e,r,a)}function bd(e,s,a){if(a.biff>5)return ch(e,s,a);var r=e.read_shift(1);return r===0?(e.l++,""):e.read_shift(r,a.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function tL(e,s,a){return a||(a=Ye(3+2*e.length)),a.write_shift(2,e.length),a.write_shift(1,1),a.write_shift(31,e,"utf16le"),a}function jV(e){var s=e.read_shift(1);e.l++;var a=e.read_shift(2);return e.l+=2,[s,a]}function wV(e){var s=e.read_shift(4),a=e.l,r=!1;s>24&&(e.l+=s-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),e.l=a);var n=e.read_shift((r?s-24:s)>>1,"utf16le").replace(rn,"");return r&&(e.l+=24),n}function SV(e){for(var s=e.read_shift(2),a="";s-- >0;)a+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return a+r.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(rn,"");return a+l}function AV(e,s){var a=e.read_shift(16);switch(a){case"e0c9ea79f9bace118c8200aa004ba90b":return wV(e);case"0303000000000000c000000000000046":return SV(e);default:throw new Error("Unsupported Moniker "+a)}}function qx(e){var s=e.read_shift(4),a=s>0?e.read_shift(s,"utf16le").replace(rn,""):"";return a}function pO(e,s){s||(s=Ye(6+e.length*2)),s.write_shift(4,1+e.length);for(var a=0;a<e.length;++a)s.write_shift(2,e.charCodeAt(a));return s.write_shift(2,0),s}function EV(e,s){var a=e.l+s,r=e.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var n=e.read_shift(2);e.l+=2;var i,l,o,d,u="",h,f;n&16&&(i=qx(e,a-e.l)),n&128&&(l=qx(e,a-e.l)),(n&257)===257&&(o=qx(e,a-e.l)),(n&257)===1&&(d=AV(e,a-e.l)),n&8&&(u=qx(e,a-e.l)),n&32&&(h=e.read_shift(16)),n&64&&(f=UA(e)),e.l=a;var x=l||o||d||"";x&&u&&(x+="#"+u),x||(x="#"+u),n&2&&x.charAt(0)=="/"&&x.charAt(1)!="/"&&(x="file://"+x);var p={Target:x};return h&&(p.guid=h),f&&(p.time=f),i&&(p.Tooltip=i),p}function CV(e){var s=Ye(512),a=0,r=e.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var n=r.indexOf("#"),i=n>-1?31:23;switch(r.charAt(0)){case"#":i=28;break;case".":i&=-3;break}s.write_shift(4,2),s.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(a=0;a<l.length;++a)s.write_shift(4,l[a]);if(i==28)r=r.slice(1),pO(r,s);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<l.length;++a)s.write_shift(1,parseInt(l[a],16));var o=n>-1?r.slice(0,n):r;for(s.write_shift(4,2*(o.length+1)),a=0;a<o.length;++a)s.write_shift(2,o.charCodeAt(a));s.write_shift(2,0),i&8&&pO(n>-1?r.slice(n+1):"",s)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<l.length;++a)s.write_shift(1,parseInt(l[a],16));for(var d=0;r.slice(d*3,d*3+3)=="../"||r.slice(d*3,d*3+3)=="..\\";)++d;for(s.write_shift(2,d),s.write_shift(4,r.length-3*d+1),a=0;a<r.length-3*d;++a)s.write_shift(1,r.charCodeAt(a+3*d)&255);for(s.write_shift(1,0),s.write_shift(2,65535),s.write_shift(2,57005),a=0;a<6;++a)s.write_shift(4,0)}return s.slice(0,s.l)}function sL(e){var s=e.read_shift(1),a=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1);return[s,a,r,n]}function aL(e,s){var a=sL(e);return a[3]=0,a}function ll(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return{r:s,c:a,ixfe:r}}function sd(e,s,a,r){return r||(r=Ye(6)),r.write_shift(2,e),r.write_shift(2,s),r.write_shift(2,a||0),r}function TV(e){var s=e.read_shift(2),a=e.read_shift(2);return e.l+=8,{type:s,flags:a}}function _V(e,s,a){return s===0?"":bd(e,s,a)}function kV(e,s,a){var r=a.biff>8?4:2,n=e.read_shift(r),i=e.read_shift(r,"i"),l=e.read_shift(r,"i");return[n,i,l]}function rL(e){var s=e.read_shift(2),a=MA(e);return[s,a]}function OV(e,s,a){e.l+=4,s-=4;var r=e.l+s,n=oh(e,s,a),i=e.read_shift(2);if(r-=e.l,i!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+i);return e.l+=i,n}function Xg(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{s:{c:r,r:s},e:{c:n,r:a}}}function nL(e,s){return s||(s=Ye(8)),s.write_shift(2,e.s.r),s.write_shift(2,e.e.r),s.write_shift(2,e.s.c),s.write_shift(2,e.e.c),s}function iL(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(1),n=e.read_shift(1);return{s:{c:r,r:s},e:{c:n,r:a}}}var IV=iL;function lL(e){e.l+=4;var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[a,s,r]}function RV(e){var s={};return e.l+=4,e.l+=16,s.fSharedNote=e.read_shift(2),e.l+=4,s}function PV(e){var s={};return e.l+=4,e.cf=e.read_shift(2),s}function Ur(e){e.l+=2,e.l+=e.read_shift(2)}var DV={0:Ur,4:Ur,5:Ur,6:Ur,7:PV,8:Ur,9:Ur,10:Ur,11:Ur,12:Ur,13:RV,14:Ur,15:Ur,16:Ur,17:Ur,18:Ur,19:Ur,20:Ur,21:lL};function MV(e,s){for(var a=e.l+s,r=[];e.l<a;){var n=e.read_shift(2);e.l-=2;try{r.push(DV[n](e,a-e.l))}catch{return e.l=a,r}}return e.l!=a&&(e.l=a),r}function Hx(e,s){var a={BIFFVer:0,dt:0};switch(a.BIFFVer=e.read_shift(2),s-=2,s>=2&&(a.dt=e.read_shift(2),e.l-=2),a.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+a.BIFFVer)}return e.read_shift(s),a}function zA(e,s,a){var r=1536,n=16;switch(a.bookType){case"biff8":break;case"biff5":r=1280,n=8;break;case"biff4":r=4,n=6;break;case"biff3":r=3,n=6;break;case"biff2":r=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ye(n);return i.write_shift(2,r),i.write_shift(2,s),n>4&&i.write_shift(2,29282),n>6&&i.write_shift(2,1997),n>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function LV(e,s){return s===0||e.read_shift(2),1200}function FV(e,s,a){if(a.enc)return e.l+=s,"";var r=e.l,n=bd(e,0,a);return e.read_shift(s+r-e.l),n}function UV(e,s){var a=!s||s.biff==8,r=Ye(a?112:54);for(r.write_shift(s.biff==8?2:1,7),a&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(a?0:536870912));r.l<r.length;)r.write_shift(1,a?0:32);return r}function zV(e,s,a){var r=a&&a.biff==8||s==2?e.read_shift(2):(e.l+=s,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function BV(e,s,a){var r=e.read_shift(4),n=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=oh(e,0,a);return l.length===0&&(l="Sheet1"),{pos:r,hs:n,dt:i,name:l}}function $V(e,s){var a=!s||s.biff>=8?2:1,r=Ye(8+a*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),s.biff>=8&&r.write_shift(1,1),r.write_shift(a*e.name.length,e.name,s.biff<8?"sbcs":"utf16le");var n=r.slice(0,r.l);return n.l=r.l,n}function qV(e,s){for(var a=e.l+s,r=e.read_shift(4),n=e.read_shift(4),i=[],l=0;l!=n&&e.l<a;++l)i.push(yV(e));return i.Count=r,i.Unique=n,i}function HV(e,s){var a=Ye(8);a.write_shift(4,e.Count),a.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=NV(e[n]);var i=vr([a].concat(r));return i.parts=[a.length].concat(r.map(function(l){return l.length})),i}function VV(e,s){var a={};return a.dsst=e.read_shift(2),e.l+=s-2,a}function GV(e){var s={};s.r=e.read_shift(2),s.c=e.read_shift(2),s.cnt=e.read_shift(2)-s.c;var a=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,r&7&&(s.level=r&7),r&32&&(s.hidden=!0),r&64&&(s.hpt=a/20),s}function WV(e){var s=TV(e);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var a=e.read_shift(4);return a!==0}function QV(e){return e.read_shift(2),e.read_shift(4)}function gO(e,s,a){var r=0;a&&a.biff==2||(r=e.read_shift(2));var n=e.read_shift(2);a&&a.biff==2&&(r=1-(n>>15),n&=32767);var i={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[i,n]}function KV(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),d=e.read_shift(2),u=e.read_shift(2);return{Pos:[s,a],Dim:[r,n],Flags:i,CurTab:l,FirstTab:o,Selected:d,TabRatio:u}}function JV(){var e=Ye(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function YV(e,s,a){if(a&&a.biff>=2&&a.biff<5)return{};var r=e.read_shift(2);return{RTL:r&64}}function XV(e){var s=Ye(18),a=1718;return e&&e.RTL&&(a|=64),s.write_shift(2,a),s.write_shift(4,0),s.write_shift(4,64),s.write_shift(4,0),s.write_shift(4,0),s}function ZV(){}function eG(e,s,a){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(a&&a.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return r.name=oh(e,0,a),r}function tG(e,s){var a=e.name||"Arial",r=s&&s.biff==5,n=r?15+a.length:16+2*a.length,i=Ye(n);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,a.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*a.length,a,r?"sbcs":"utf16le"),i}function sG(e){var s=ll(e);return s.isst=e.read_shift(4),s}function aG(e,s,a,r){var n=Ye(10);return sd(e,s,r,n),n.write_shift(4,a),n}function rG(e,s,a){a.biffguess&&a.biff==2&&(a.biff=5);var r=e.l+s,n=ll(e);a.biff==2&&e.l++;var i=ch(e,r-e.l,a);return n.val=i,n}function nG(e,s,a,r,n){var i=!n||n.biff==8,l=Ye(8+ +i+(1+i)*a.length);return sd(e,s,r,l),l.write_shift(2,a.length),i&&l.write_shift(1,1),l.write_shift((1+i)*a.length,a,i?"utf16le":"sbcs"),l}function iG(e,s,a){var r=e.read_shift(2),n=bd(e,0,a);return[r,n]}function lG(e,s,a,r){var n=a&&a.biff==5;r||(r=Ye(n?3+s.length:5+2*s.length)),r.write_shift(2,e),r.write_shift(n?1:2,s.length),n||r.write_shift(1,1),r.write_shift((n?1:2)*s.length,s,n?"sbcs":"utf16le");var i=r.length>r.l?r.slice(0,r.l):r;return i.l==null&&(i.l=i.length),i}var oG=bd;function bO(e,s,a){var r=e.l+s,n=a.biff==8||!a.biff?4:2,i=e.read_shift(n),l=e.read_shift(n),o=e.read_shift(2),d=e.read_shift(2);return e.l=r,{s:{r:i,c:o},e:{r:l,c:d}}}function cG(e,s){var a=s.biff==8||!s.biff?4:2,r=Ye(2*a+6);return r.write_shift(a,e.s.r),r.write_shift(a,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}function dG(e){var s=e.read_shift(2),a=e.read_shift(2),r=rL(e);return{r:s,c:a,ixfe:r[0],rknum:r[1]}}function uG(e,s){for(var a=e.l+s-2,r=e.read_shift(2),n=e.read_shift(2),i=[];e.l<a;)i.push(rL(e));if(e.l!==a)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r,c:n,C:l,rkrec:i}}function mG(e,s){for(var a=e.l+s-2,r=e.read_shift(2),n=e.read_shift(2),i=[];e.l<a;)i.push(e.read_shift(2));if(e.l!==a)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r,c:n,C:l,ixfe:i}}function fG(e,s,a,r){var n={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),d=e.read_shift(2);return n.patternType=WH[o>>26],r.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=o&127,n.icvBottom=o>>7&127,n.icvDiag=o>>14&127,n.dgDiag=o>>21&15,n.icvFore=d&127,n.icvBack=d>>7&127,n.fsxButton=d>>14&1),n}function hG(e,s,a){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,s-=6,r.data=fG(e,s,r.fStyle,a),r}function vO(e,s,a,r){var n=a&&a.biff==5;r||(r=Ye(n?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,s<<4));var i=0;return e.numFmtId>0&&n&&(i|=1024),r.write_shift(4,i),r.write_shift(4,0),n||r.write_shift(4,0),r.write_shift(2,0),r}function xG(e){e.l+=4;var s=[e.read_shift(2),e.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function pG(e){var s=Ye(8);return s.write_shift(4,0),s.write_shift(2,0),s.write_shift(2,0),s}function yO(e,s,a){var r=ll(e);(a.biff==2||s==9)&&++e.l;var n=vV(e);return r.val=n,r.t=n===!0||n===!1?"b":"e",r}function gG(e,s,a,r,n,i){var l=Ye(8);return sd(e,s,r,l),eL(a,i,l),l}function bG(e,s,a){a.biffguess&&a.biff==2&&(a.biff=5);var r=ll(e),n=Gr(e);return r.val=n,r}function vG(e,s,a,r){var n=Ye(14);return sd(e,s,r,n),ed(a,n),n}var NO=_V;function yG(e,s,a){var r=e.l+s,n=e.read_shift(2),i=e.read_shift(2);if(a.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=td(e,i),o=[];r>e.l;)o.push(ch(e));return[i,n,l,o]}function jO(e,s,a){var r=e.read_shift(2),n,i={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return a.sbcch===14849&&(n=OV(e,s-2,a)),i.body=n||e.read_shift(s-2),typeof n=="string"&&(i.Name=n),i}var NG=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function wO(e,s,a){var r=e.l+s,n=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(a&&a.biff==2?1:2),d=0;(!a||a.biff>=5)&&(a.biff!=5&&(e.l+=2),d=e.read_shift(2),a.biff==5&&(e.l+=2),e.l+=4);var u=td(e,l,a);n&32&&(u=NG[u.charCodeAt(0)]);var h=r-e.l;a&&a.biff==2&&--h;var f=r==e.l||o===0||!(h>0)?[]:MJ(e,h,a,o);return{chKey:i,Name:u,itab:d,rgce:f}}function oL(e,s,a){if(a.biff<8)return jG(e,s,a);for(var r=[],n=e.l+s,i=e.read_shift(a.biff>8?4:2);i--!==0;)r.push(kV(e,a.biff>8?12:6,a));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return r}function jG(e,s,a){e[e.l+1]==3&&e[e.l]++;var r=oh(e,s,a);return r.charCodeAt(0)==3?r.slice(1):r}function wG(e,s,a){if(a.biff<8){e.l+=s;return}var r=e.read_shift(2),n=e.read_shift(2),i=td(e,r,a),l=td(e,n,a);return[i,l]}function SG(e,s,a){var r=iL(e);e.l++;var n=e.read_shift(1);return s-=8,[LJ(e,s,a),n,r]}function SO(e,s,a){var r=IV(e);switch(a.biff){case 2:e.l++,s-=7;break;case 3:case 4:e.l+=2,s-=8;break;default:e.l+=6,s-=12}return[r,PJ(e,s,a)]}function AG(e){var s=e.read_shift(4)!==0,a=e.read_shift(4)!==0,r=e.read_shift(4);return[s,a,r]}function EG(e,s,a){if(!(a.biff<8)){var r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=bd(e,0,a);return a.biff<8&&e.read_shift(1),[{r,c:n},o,l,i]}}function CG(e,s,a){return EG(e,s,a)}function TG(e,s){for(var a=[],r=e.read_shift(2);r--;)a.push(Xg(e));return a}function _G(e){var s=Ye(2+e.length*8);s.write_shift(2,e.length);for(var a=0;a<e.length;++a)nL(e[a],s);return s}function kG(e,s,a){if(a&&a.biff<8)return IG(e,s,a);var r=lL(e),n=MV(e,s-22,r[1]);return{cmo:r,ft:n}}var OG={8:function(e,s){var a=e.l+s;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=a,{fmt:r}}};function IG(e,s,a){e.l+=4;var r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,s-=36;var l=[];return l.push((OG[r]||Jr)(e,s,a)),{cmo:[n,r,i],ft:l}}function RG(e,s,a){var r=e.l,n="";try{e.l+=4;var i=(a.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=jV(e,6,a);var o=e.read_shift(2);e.read_shift(2),Za(e,2);var d=e.read_shift(2);e.l+=d;for(var u=1;u<e.lens.length-1;++u){if(e.l-r!=e.lens[u])throw new Error("TxO: bad continue record");var h=e[e.l],f=td(e,e.lens[u+1]-e.lens[u]-1);if(n+=f,n.length>=(h?o:2*o))break}if(n.length!==o&&n.length!==o*2)throw new Error("cchText: "+o+" != "+n.length);return e.l=r+s,{t:n}}catch{return e.l=r+s,{t:n}}}function PG(e,s){var a=Xg(e);e.l+=16;var r=EV(e,s-24);return[a,r]}function DG(e){var s=Ye(24),a=Oa(e[0]);s.write_shift(2,a.r),s.write_shift(2,a.r),s.write_shift(2,a.c),s.write_shift(2,a.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)s.write_shift(1,parseInt(r[n],16));return vr([s,CV(e[1])])}function MG(e,s){e.read_shift(2);var a=Xg(e),r=e.read_shift((s-10)/2,"dbcs-cont");return r=r.replace(rn,""),[a,r]}function LG(e){var s=e[1].Tooltip,a=Ye(10+2*(s.length+1));a.write_shift(2,2048);var r=Oa(e[0]);a.write_shift(2,r.r),a.write_shift(2,r.r),a.write_shift(2,r.c),a.write_shift(2,r.c);for(var n=0;n<s.length;++n)a.write_shift(2,s.charCodeAt(n));return a.write_shift(2,0),a}function FG(e){var s=[0,0],a;return a=e.read_shift(2),s[0]=oO[a]||a,a=e.read_shift(2),s[1]=oO[a]||a,s}function UG(e){return e||(e=Ye(4)),e.write_shift(2,1),e.write_shift(2,1),e}function zG(e){for(var s=e.read_shift(2),a=[];s-- >0;)a.push(aL(e));return a}function BG(e){for(var s=e.read_shift(2),a=[];s-- >0;)a.push(aL(e));return a}function $G(e){e.l+=2;var s={cxfs:0,crc:0};return s.cxfs=e.read_shift(2),s.crc=e.read_shift(4),s}function cL(e,s,a){if(!a.cellStyles)return Jr(e,s);var r=a&&a.biff>=12?4:2,n=e.read_shift(r),i=e.read_shift(r),l=e.read_shift(r),o=e.read_shift(r),d=e.read_shift(2);r==2&&(e.l+=2);var u={s:n,e:i,w:l,ixfe:o,flags:d};return(a.biff>=5||!a.biff)&&(u.level=d>>8&7),u}function qG(e,s){var a=Ye(12);a.write_shift(2,s),a.write_shift(2,s),a.write_shift(2,e.width*256),a.write_shift(2,0);var r=0;return e.hidden&&(r|=1),a.write_shift(1,r),r=e.level||0,a.write_shift(1,r),a.write_shift(2,0),a}function HG(e,s){var a={};return s<32||(e.l+=16,a.header=Gr(e),a.footer=Gr(e),e.l+=2),a}function VG(e,s,a){var r={area:!1};if(a.biff!=5)return e.l+=s,r;var n=e.read_shift(1);return e.l+=3,n&16&&(r.area=!0),r}function GG(e){for(var s=Ye(2*e),a=0;a<e;++a)s.write_shift(2,a+1);return s}var WG=ll,QG=Z8,KG=ch;function JG(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(4),n={fmt:s,env:a,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,n}function YG(e,s,a){a.biffguess&&a.biff==5&&(a.biff=2);var r=ll(e);++e.l;var n=bd(e,s-7,a);return r.t="str",r.val=n,r}function XG(e){var s=ll(e);++e.l;var a=Gr(e);return s.t="n",s.val=a,s}function ZG(e,s,a){var r=Ye(15);return fh(r,e,s),r.write_shift(8,a,"f"),r}function eW(e){var s=ll(e);++e.l;var a=e.read_shift(2);return s.t="n",s.val=a,s}function tW(e,s,a){var r=Ye(9);return fh(r,e,s),r.write_shift(2,a),r}function sW(e){var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,"sbcs-cont")}function aW(e,s){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=s-13}function rW(e,s,a){var r=e.l+s,n=ll(e),i=e.read_shift(2),l=td(e,i,a);return e.l=r,n.t="str",n.val=l,n}var nW=[2,3,48,49,131,139,140,245],MS=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=Kg({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(o,d){var u=[],h=qo(1);switch(d.type){case"base64":h=Pn(zn(o));break;case"binary":h=Pn(o);break;case"buffer":case"array":h=o;break}kr(h,0);var f=h.read_shift(1),x=!!(f&136),p=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,x=!0;break;case 49:p=!0,x=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var b=0,y=521;f==2&&(b=h.read_shift(2)),h.l+=3,f!=2&&(b=h.read_shift(4)),b>1048576&&(b=1e6),f!=2&&(y=h.read_shift(2));var j=h.read_shift(2),w=d.codepage||1252;f!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(w=e[h[h.l]]),h.l+=1,h.l+=2),v&&(h.l+=36);for(var S=[],O={},_=Math.min(h.length,f==2?521:y-10-(p?264:0)),E=v?32:11;h.l<_&&h[h.l]!=13;)switch(O={},O.name=nf.utils.decode(w,h.slice(h.l,h.l+E)).replace(/[\u0000\r\n].*$/g,""),h.l+=E,O.type=String.fromCharCode(h.read_shift(1)),f!=2&&!v&&(O.offset=h.read_shift(4)),O.len=h.read_shift(1),f==2&&(O.offset=h.read_shift(2)),O.dec=h.read_shift(1),O.name.length&&S.push(O),f!=2&&(h.l+=v?13:14),O.type){case"B":(!p||O.len!=8)&&d.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+O.type)}if(h[h.l]!==13&&(h.l=y-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=y;var A=0,D=0;for(u[0]=[],D=0;D!=S.length;++D)u[0][D]=S[D].name;for(;b-- >0;){if(h[h.l]===42){h.l+=j;continue}for(++h.l,u[++A]=[],D=0,D=0;D!=S.length;++D){var L=h.slice(h.l,h.l+S[D].len);h.l+=S[D].len,kr(L,0);var B=nf.utils.decode(w,L);switch(S[D].type){case"C":B.trim().length&&(u[A][D]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[A][D]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[A][D]=B;break;case"F":u[A][D]=parseFloat(B.trim());break;case"+":case"I":u[A][D]=v?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[A][D]=!0;break;case"N":case"F":u[A][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[A][D]="##MEMO##"+(v?parseInt(B.trim(),10):L.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[A][D]=+B||0);break;case"@":u[A][D]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":u[A][D]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":u[A][D]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[A][D]=-L.read_shift(-8,"f");break;case"B":if(p&&S[D].len==8){u[A][D]=L.read_shift(8,"f");break}case"G":case"P":L.l+=S[D].len;break;case"0":if(S[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+S[D].type)}}}if(f!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return d&&d.sheetRows&&(u=u.slice(0,d.sheetRows)),d.DBF=S,u}function r(o,d){var u=d||{};u.dateNF||(u.dateNF="yyyymmdd");var h=m0(a(o,u),u);return h["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,h}function n(o,d){try{return ec(r(o,d),d)}catch(u){if(d&&d.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,d){var u=d||{};if(+u.codepage>=0&&ki(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var h=pn(),f=Bp(o,{header:1,raw:!0,cellDates:!0}),x=f[0],p=f.slice(1),v=o["!cols"]||[],b=0,y=0,j=0,w=1;for(b=0;b<x.length;++b){if(((v[b]||{}).DBF||{}).name){x[b]=v[b].DBF.name,++j;continue}if(x[b]!=null){if(++j,typeof x[b]=="number"&&(x[b]=x[b].toString(10)),typeof x[b]!="string")throw new Error("DBF Invalid column name "+x[b]+" |"+typeof x[b]+"|");if(x.indexOf(x[b])!==b){for(y=0;y<1024;++y)if(x.indexOf(x[b]+"_"+y)==-1){x[b]+="_"+y;break}}}}var S=Rs(o["!ref"]),O=[],_=[],E=[];for(b=0;b<=S.e.c-S.s.c;++b){var A="",D="",L=0,B=[];for(y=0;y<p.length;++y)p[y][b]!=null&&B.push(p[y][b]);if(B.length==0||x[b]==null){O[b]="?";continue}for(y=0;y<B.length;++y){switch(typeof B[y]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=B[y]instanceof Date?"D":"C";break;default:D="C"}L=Math.max(L,String(B[y]).length),A=A&&A!=D?"C":D}L>250&&(L=250),D=((v[b]||{}).DBF||{}).type,D=="C"&&v[b].DBF.len>L&&(L=v[b].DBF.len),A=="B"&&D=="N"&&(A="N",E[b]=v[b].DBF.dec,L=v[b].DBF.len),_[b]=A=="C"||D=="N"?L:i[A]||0,w+=_[b],O[b]=A}var I=h.next(32);for(I.write_shift(4,318902576),I.write_shift(4,p.length),I.write_shift(2,296+32*j),I.write_shift(2,w),b=0;b<4;++b)I.write_shift(4,0);for(I.write_shift(4,0|(+s[XM]||3)<<8),b=0,y=0;b<x.length;++b)if(x[b]!=null){var T=h.next(32),z=(x[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,z,"sbcs"),T.write_shift(1,O[b]=="?"?"C":O[b],"sbcs"),T.write_shift(4,y),T.write_shift(1,_[b]||i[O[b]]||0),T.write_shift(1,E[b]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),y+=_[b]||i[O[b]]||0}var k=h.next(264);for(k.write_shift(4,13),b=0;b<65;++b)k.write_shift(4,0);for(b=0;b<p.length;++b){var F=h.next(w);for(F.write_shift(1,0),y=0;y<x.length;++y)if(x[y]!=null)switch(O[y]){case"L":F.write_shift(1,p[b][y]==null?63:p[b][y]?84:70);break;case"B":F.write_shift(8,p[b][y]||0,"f");break;case"N":var P="0";for(typeof p[b][y]=="number"&&(P=p[b][y].toFixed(E[y]||0)),j=0;j<_[y]-P.length;++j)F.write_shift(1,32);F.write_shift(1,P,"sbcs");break;case"D":p[b][y]?(F.write_shift(4,("0000"+p[b][y].getFullYear()).slice(-4),"sbcs"),F.write_shift(2,("00"+(p[b][y].getMonth()+1)).slice(-2),"sbcs"),F.write_shift(2,("00"+p[b][y].getDate()).slice(-2),"sbcs")):F.write_shift(8,"00000000","sbcs");break;case"C":var G=String(p[b][y]!=null?p[b][y]:"").slice(0,_[y]);for(F.write_shift(1,G,"sbcs"),j=0;j<_[y]-G.length;++j)F.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:n,to_sheet:r,from_sheet:l}})(),dL=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+Fa(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(x,p){var v=e[p];return typeof v=="number"?D4(v):v},r=function(x,p,v){var b=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return b==59?x:D4(b)};e["|"]=254;function n(x,p){switch(p.type){case"base64":return i(zn(x),p);case"binary":return i(x,p);case"buffer":return i(fs&&Buffer.isBuffer(x)?x.toString("binary"):Zo(x),p);case"array":return i(Zc(x),p)}throw new Error("Unrecognized type "+p.type)}function i(x,p){var v=x.split(/[\n\r]+/),b=-1,y=-1,j=0,w=0,S=[],O=[],_=null,E={},A=[],D=[],L=[],B=0,I;for(+p.codepage>=0&&ki(+p.codepage);j!==v.length;++j){B=0;var T=v[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(s,a),z=T.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),k=z[0],F;if(T.length>0)switch(k){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":z[1].charAt(0)=="P"&&O.push(T.slice(3).replace(/;;/g,";"));break;case"C":var P=!1,G=!1,Y=!1,W=!1,ee=-1,H=-1;for(w=1;w<z.length;++w)switch(z[w].charAt(0)){case"A":break;case"X":y=parseInt(z[w].slice(1))-1,G=!0;break;case"Y":for(b=parseInt(z[w].slice(1))-1,G||(y=0),I=S.length;I<=b;++I)S[I]=[];break;case"K":F=z[w].slice(1),F.charAt(0)==='"'?F=F.slice(1,F.length-1):F==="TRUE"?F=!0:F==="FALSE"?F=!1:isNaN(Ri(F))?isNaN(Du(F).getDate())||(F=ya(F)):(F=Ri(F),_!==null&&d0(_)&&(F=Yg(F))),P=!0;break;case"E":W=!0;var M=Eu(z[w].slice(1),{r:b,c:y});S[b][y]=[S[b][y],M];break;case"S":Y=!0,S[b][y]=[S[b][y],"S5S"];break;case"G":break;case"R":ee=parseInt(z[w].slice(1))-1;break;case"C":H=parseInt(z[w].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+T)}if(P&&(S[b][y]&&S[b][y].length==2?S[b][y][0]=F:S[b][y]=F,_=null),Y){if(W)throw new Error("SYLK shared formula cannot have own formula");var X=ee>-1&&S[ee][H];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");S[b][y][1]=TL(X[1],{r:b-ee,c:y-H})}break;case"F":var K=0;for(w=1;w<z.length;++w)switch(z[w].charAt(0)){case"X":y=parseInt(z[w].slice(1))-1,++K;break;case"Y":for(b=parseInt(z[w].slice(1))-1,I=S.length;I<=b;++I)S[I]=[];break;case"M":B=parseInt(z[w].slice(1))/20;break;case"F":break;case"G":break;case"P":_=O[parseInt(z[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=z[w].slice(1).split(" "),I=parseInt(L[0],10);I<=parseInt(L[1],10);++I)B=parseInt(L[2],10),D[I-1]=B===0?{hidden:!0}:{wch:B},Ho(D[I-1]);break;case"C":y=parseInt(z[w].slice(1))-1,D[y]||(D[y]={});break;case"R":b=parseInt(z[w].slice(1))-1,A[b]||(A[b]={}),B>0?(A[b].hpt=B,A[b].hpx=Lu(B)):B===0&&(A[b].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+T)}K<1&&(_=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+T)}}return A.length>0&&(E["!rows"]=A),D.length>0&&(E["!cols"]=D),p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),[S,E]}function l(x,p){var v=n(x,p),b=v[0],y=v[1],j=m0(b,p);return Fa(y).forEach(function(w){j[w]=y[w]}),j}function o(x,p){return ec(l(x,p),p)}function d(x,p,v,b){var y="C;Y"+(v+1)+";X"+(b+1)+";K";switch(x.t){case"n":y+=x.v||0,x.f&&!x.F&&(y+=";E"+GA(x.f,{r:v,c:b}));break;case"b":y+=x.v?"TRUE":"FALSE";break;case"e":y+=x.w||x.v;break;case"d":y+='"'+(x.w||x.v)+'"';break;case"s":y+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(x,p){p.forEach(function(v,b){var y="F;W"+(b+1)+" "+(b+1)+" ";v.hidden?y+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=hf(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=xf(v.wpx)),typeof v.wch=="number"&&(y+=Math.round(v.wch))),y.charAt(y.length-1)!=" "&&x.push(y)})}function h(x,p){p.forEach(function(v,b){var y="F;";v.hidden?y+="M0;":v.hpt?y+="M"+20*v.hpt+";":v.hpx&&(y+="M"+20*pf(v.hpx)+";"),y.length>2&&x.push(y+"R"+(b+1))})}function f(x,p){var v=["ID;PWXL;N;E"],b=[],y=Rs(x["!ref"]),j,w=Array.isArray(x),S=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),x["!cols"]&&u(v,x["!cols"]),x["!rows"]&&h(v,x["!rows"]),v.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var O=y.s.r;O<=y.e.r;++O)for(var _=y.s.c;_<=y.e.c;++_){var E=Vt({r:O,c:_});j=w?(x[O]||[])[_]:x[E],!(!j||j.v==null&&(!j.f||j.F))&&b.push(d(j,x,O,_))}return v.join(S)+S+b.join(S)+S+"E"+S}return{to_workbook:o,to_sheet:l,from_sheet:f}})(),uL=(function(){function e(i,l){switch(l.type){case"base64":return s(zn(i),l);case"binary":return s(i,l);case"buffer":return s(fs&&Buffer.isBuffer(i)?i.toString("binary"):Zo(i),l);case"array":return s(Zc(i),l)}throw new Error("Unrecognized type "+l.type)}function s(i,l){for(var o=i.split(`
`),d=-1,u=-1,h=0,f=[];h!==o.length;++h){if(o[h].trim()==="BOT"){f[++d]=[],u=0;continue}if(!(d<0)){var x=o[h].trim().split(","),p=x[0],v=x[1];++h;for(var b=o[h]||"";(b.match(/["]/g)||[]).length&1&&h<o.length-1;)b+=`
`+o[++h];switch(b=b.trim(),+p){case-1:if(b==="BOT"){f[++d]=[],u=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?f[d][u]=!0:b==="FALSE"?f[d][u]=!1:isNaN(Ri(v))?isNaN(Du(v).getDate())?f[d][u]=v:f[d][u]=ya(v):f[d][u]=Ri(v),++u;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),f[d][u++]=b!==""?b:null;break}if(b==="EOD")break}}return l&&l.sheetRows&&(f=f.slice(0,l.sheetRows)),f}function a(i,l){return m0(e(i,l),l)}function r(i,l){return ec(a(i,l),l)}var n=(function(){var i=function(d,u,h,f,x){d.push(u),d.push(h+","+f),d.push('"'+x.replace(/"/g,'""')+'"')},l=function(d,u,h,f){d.push(u+","+h),d.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(d){var u=[],h=Rs(d["!ref"]),f,x=Array.isArray(d);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,h.e.r-h.s.r+1,""),i(u,"TUPLES",0,h.e.c-h.s.c+1,""),i(u,"DATA",0,0,"");for(var p=h.s.r;p<=h.e.r;++p){l(u,-1,0,"BOT");for(var v=h.s.c;v<=h.e.c;++v){var b=Vt({r:p,c:v});if(f=x?(d[p]||[])[v]:d[b],!f){l(u,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?l(u,1,0,"="+f.f):l(u,1,0,""):l(u,0,y,"V");break;case"b":l(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":l(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=hi(f.z||Ht[14],hr(ya(f.v)))),l(u,0,f.w,"V");break;default:l(u,1,0,"")}}}l(u,-1,0,"EOD");var j=`\r
`,w=u.join(j);return w}})();return{to_workbook:r,to_sheet:a,from_sheet:n}})(),mL=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(f,x){for(var p=f.split(`
`),v=-1,b=-1,y=0,j=[];y!==p.length;++y){var w=p[y].trim().split(":");if(w[0]==="cell"){var S=Oa(w[1]);if(j.length<=S.r)for(v=j.length;v<=S.r;++v)j[v]||(j[v]=[]);switch(v=S.r,b=S.c,w[2]){case"t":j[v][b]=e(w[3]);break;case"v":j[v][b]=+w[3];break;case"vtf":var O=w[w.length-1];case"vtc":switch(w[3]){case"nl":j[v][b]=!!+w[4];break;default:j[v][b]=+w[4];break}w[2]=="vtf"&&(j[v][b]=[j[v][b],O])}}}return x&&x.sheetRows&&(j=j.slice(0,x.sheetRows)),j}function r(f,x){return m0(a(f,x),x)}function n(f,x){return ec(r(f,x),x)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var x=[],p=[],v,b="",y=vn(f["!ref"]),j=Array.isArray(f),w=y.s.r;w<=y.e.r;++w)for(var S=y.s.c;S<=y.e.c;++S)if(b=Vt({r:w,c:S}),v=j?(f[w]||[])[S]:f[b],!(!v||v.v==null||v.t==="z")){switch(p=["cell",b,"t"],v.t){case"s":case"str":p.push(s(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=s(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=s(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var O=hr(ya(v.v));p[2]="vtc",p[3]="nd",p[4]=""+O,p[5]=v.w||hi(v.z||Ht[14],O);break;case"e":continue}x.push(p.join(":"))}return x.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function h(f){return[i,l,o,l,u(f),d].join(`
`)}return{to_workbook:n,to_sheet:r,from_sheet:h}})(),Mu=(function(){function e(h,f,x,p,v){v.raw?f[x][p]=h:h===""||(h==="TRUE"?f[x][p]=!0:h==="FALSE"?f[x][p]=!1:isNaN(Ri(h))?isNaN(Du(h).getDate())?f[x][p]=h:f[x][p]=ya(h):f[x][p]=Ri(h))}function s(h,f){var x=f||{},p=[];if(!h||h.length===0)return p;for(var v=h.split(/[\r\n]/),b=v.length-1;b>=0&&v[b].length===0;)--b;for(var y=10,j=0,w=0;w<=b;++w)j=v[w].indexOf(" "),j==-1?j=v[w].length:j++,y=Math.max(y,j);for(w=0;w<=b;++w){p[w]=[];var S=0;for(e(v[w].slice(0,y).trim(),p,w,S,x),S=1;S<=(v[w].length-y)/10+1;++S)e(v[w].slice(y+(S-1)*10,y+S*10).trim(),p,w,S,x)}return x.sheetRows&&(p=p.slice(0,x.sheetRows)),p}var a={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(h){for(var f={},x=!1,p=0,v=0;p<h.length;++p)(v=h.charCodeAt(p))==34?x=!x:!x&&v in a&&(f[v]=(f[v]||0)+1);v=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p]);if(!v.length){f=r;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&v.push([f[p],p])}return v.sort(function(b,y){return b[0]-y[0]||r[b[1]]-r[y[1]]}),a[v.pop()[1]]||44}function i(h,f){var x=f||{},p="",v=x.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(p=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(p=h.charAt(4),h=h.slice(6)):p=n(h.slice(0,1024)):x&&x.FS?p=x.FS:p=n(h.slice(0,1024));var y=0,j=0,w=0,S=0,O=0,_=p.charCodeAt(0),E=!1,A=0,D=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var L=x.dateNF!=null?V9(x.dateNF):null;function B(){var I=h.slice(S,O),T={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)T.t="z";else if(x.raw)T.t="s",T.v=I;else if(I.trim().length===0)T.t="s",T.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(T.t="s",T.v=I.slice(2,-1).replace(/""/g,'"')):yK(I)?(T.t="n",T.f=I.slice(1)):(T.t="s",T.v=I);else if(I=="TRUE")T.t="b",T.v=!0;else if(I=="FALSE")T.t="b",T.v=!1;else if(!isNaN(w=Ri(I)))T.t="n",x.cellText!==!1&&(T.w=I),T.v=w;else if(!isNaN(Du(I).getDate())||L&&I.match(L)){T.z=x.dateNF||Ht[14];var z=0;L&&I.match(L)&&(I=G9(I,x.dateNF,I.match(L)||[]),z=1),x.cellDates?(T.t="d",T.v=ya(I,z)):(T.t="n",T.v=hr(ya(I,z))),x.cellText!==!1&&(T.w=hi(T.z,T.v instanceof Date?hr(T.v):T.v)),x.cellNF||delete T.z}else T.t="s",T.v=I;if(T.t=="z"||(x.dense?(v[y]||(v[y]=[]),v[y][j]=T):v[Vt({c:j,r:y})]=T),S=O+1,D=h.charCodeAt(S),b.e.c<j&&(b.e.c=j),b.e.r<y&&(b.e.r=y),A==_)++j;else if(j=0,++y,x.sheetRows&&x.sheetRows<=y)return!0}e:for(;O<h.length;++O)switch(A=h.charCodeAt(O)){case 34:D===34&&(E=!E);break;case _:case 10:case 13:if(!E&&B())break e;break}return O-S>0&&B(),v["!ref"]=rs(b),v}function l(h,f){return!(f&&f.PRN)||f.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?i(h,f):m0(s(h,f),f)}function o(h,f){var x="",p=f.type=="string"?[0,0,0,0]:tE(h,f);switch(f.type){case"base64":x=zn(h);break;case"binary":x=h;break;case"buffer":f.codepage==65001?x=h.toString("utf8"):f.codepage&&typeof nf<"u"||(x=fs&&Buffer.isBuffer(h)?h.toString("binary"):Zo(h));break;case"array":x=Zc(h);break;case"string":x=h;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?x=da(x.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?x=da(x):f.type=="binary"&&typeof nf<"u",x.slice(0,19)=="socialcalc:version:"?mL.to_sheet(f.type=="string"?x:da(x),f):l(x,f)}function d(h,f){return ec(o(h,f),f)}function u(h){for(var f=[],x=Rs(h["!ref"]),p,v=Array.isArray(h),b=x.s.r;b<=x.e.r;++b){for(var y=[],j=x.s.c;j<=x.e.c;++j){var w=Vt({r:b,c:j});if(p=v?(h[b]||[])[j]:h[w],!p||p.v==null){y.push("          ");continue}for(var S=(p.w||($l(p),p.w)||"").slice(0,10);S.length<10;)S+=" ";y.push(S+(j===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:d,to_sheet:o,from_sheet:u}})();function iW(e,s){var a=s||{},r=!!a.WTF;a.WTF=!0;try{var n=dL.to_workbook(e,a);return a.WTF=r,n}catch(i){if(a.WTF=r,!i.message.match(/SYLK bad record ID/)&&r)throw i;return Mu.to_workbook(e,s)}}var qc=(function(){function e(M,X,K){if(M){kr(M,M.l||0);for(var Q=K.Enum||ee;M.l<M.length;){var se=M.read_shift(2),V=Q[se]||Q[65535],te=M.read_shift(2),Z=M.l+te,ue=V.f&&V.f(M,te,K);if(M.l=Z,X(ue,V,se))return}}}function s(M,X){switch(X.type){case"base64":return a(Pn(zn(M)),X);case"binary":return a(Pn(M),X);case"buffer":case"array":return a(M,X)}throw"Unsupported type "+X.type}function a(M,X){if(!M)return M;var K=X||{},Q=K.dense?[]:{},se="Sheet1",V="",te=0,Z={},ue=[],re=[],J={s:{r:0,c:0},e:{r:0,c:0}},Ne=K.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)K.Enum=ee,e(M,function(ie,ne,pe){switch(pe){case 0:K.vers=ie,ie>=4096&&(K.qpro=!0);break;case 6:J=ie;break;case 204:ie&&(V=ie);break;case 222:V=ie;break;case 15:case 51:K.qpro||(ie[1].v=ie[1].v.slice(1));case 13:case 14:case 16:pe==14&&(ie[2]&112)==112&&(ie[2]&15)>1&&(ie[2]&15)<15&&(ie[1].z=K.dateNF||Ht[14],K.cellDates&&(ie[1].t="d",ie[1].v=Yg(ie[1].v))),K.qpro&&ie[3]>te&&(Q["!ref"]=rs(J),Z[se]=Q,ue.push(se),Q=K.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},te=ie[3],se=V||"Sheet"+(te+1),V="");var Ee=K.dense?(Q[ie[0].r]||[])[ie[0].c]:Q[Vt(ie[0])];if(Ee){Ee.t=ie[1].t,Ee.v=ie[1].v,ie[1].z!=null&&(Ee.z=ie[1].z),ie[1].f!=null&&(Ee.f=ie[1].f);break}K.dense?(Q[ie[0].r]||(Q[ie[0].r]=[]),Q[ie[0].r][ie[0].c]=ie[1]):Q[Vt(ie[0])]=ie[1];break}},K);else if(M[2]==26||M[2]==14)K.Enum=H,M[2]==14&&(K.qpro=!0,M.l=0),e(M,function(ie,ne,pe){switch(pe){case 204:se=ie;break;case 22:ie[1].v=ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ie[3]>te&&(Q["!ref"]=rs(J),Z[se]=Q,ue.push(se),Q=K.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},te=ie[3],se="Sheet"+(te+1)),Ne>0&&ie[0].r>=Ne)break;K.dense?(Q[ie[0].r]||(Q[ie[0].r]=[]),Q[ie[0].r][ie[0].c]=ie[1]):Q[Vt(ie[0])]=ie[1],J.e.c<ie[0].c&&(J.e.c=ie[0].c),J.e.r<ie[0].r&&(J.e.r=ie[0].r);break;case 27:ie[14e3]&&(re[ie[14e3][0]]=ie[14e3][1]);break;case 1537:re[ie[0]]=ie[1],ie[0]==te&&(se=ie[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(Q["!ref"]=rs(J),Z[V||se]=Q,ue.push(V||se),!re.length)return{SheetNames:ue,Sheets:Z};for(var q={},ce=[],fe=0;fe<re.length;++fe)Z[ue[fe]]?(ce.push(re[fe]||ue[fe]),q[re[fe]]=Z[re[fe]]||Z[ue[fe]]):(ce.push(re[fe]),q[re[fe]]={"!ref":"A1"});return{SheetNames:ce,Sheets:q}}function r(M,X){var K=X||{};if(+K.codepage>=0&&ki(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=pn(),se=Rs(M["!ref"]),V=Array.isArray(M),te=[];mt(Q,0,i(1030)),mt(Q,6,d(se));for(var Z=Math.min(se.e.r,8191),ue=se.s.r;ue<=Z;++ue)for(var re=Ha(ue),J=se.s.c;J<=se.e.c;++J){ue===se.s.r&&(te[J]=ka(J));var Ne=te[J]+re,q=V?(M[ue]||[])[J]:M[Ne];if(!(!q||q.t=="z"))if(q.t=="n")(q.v|0)==q.v&&q.v>=-32768&&q.v<=32767?mt(Q,13,p(ue,J,q.v)):mt(Q,14,b(ue,J,q.v));else{var ce=$l(q);mt(Q,15,f(ue,J,ce.slice(0,239)))}}return mt(Q,1),Q.end()}function n(M,X){var K=X||{};if(+K.codepage>=0&&ki(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=pn();mt(Q,0,l(M));for(var se=0,V=0;se<M.SheetNames.length;++se)(M.Sheets[M.SheetNames[se]]||{})["!ref"]&&mt(Q,27,W(M.SheetNames[se],V++));var te=0;for(se=0;se<M.SheetNames.length;++se){var Z=M.Sheets[M.SheetNames[se]];if(!(!Z||!Z["!ref"])){for(var ue=Rs(Z["!ref"]),re=Array.isArray(Z),J=[],Ne=Math.min(ue.e.r,8191),q=ue.s.r;q<=Ne;++q)for(var ce=Ha(q),fe=ue.s.c;fe<=ue.e.c;++fe){q===ue.s.r&&(J[fe]=ka(fe));var ie=J[fe]+ce,ne=re?(Z[q]||[])[fe]:Z[ie];if(!(!ne||ne.t=="z"))if(ne.t=="n")mt(Q,23,B(q,fe,te,ne.v));else{var pe=$l(ne);mt(Q,22,A(q,fe,te,pe.slice(0,239)))}}++te}}return mt(Q,1),Q.end()}function i(M){var X=Ye(2);return X.write_shift(2,M),X}function l(M){var X=Ye(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var K=0,Q=0,se=0,V=0;V<M.SheetNames.length;++V){var te=M.SheetNames[V],Z=M.Sheets[te];if(!(!Z||!Z["!ref"])){++se;var ue=vn(Z["!ref"]);K<ue.e.r&&(K=ue.e.r),Q<ue.e.c&&(Q=ue.e.c)}}return K>8191&&(K=8191),X.write_shift(2,K),X.write_shift(1,se),X.write_shift(1,Q),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function o(M,X,K){var Q={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&K.qpro?(Q.s.c=M.read_shift(1),M.l++,Q.s.r=M.read_shift(2),Q.e.c=M.read_shift(1),M.l++,Q.e.r=M.read_shift(2),Q):(Q.s.c=M.read_shift(2),Q.s.r=M.read_shift(2),X==12&&K.qpro&&(M.l+=2),Q.e.c=M.read_shift(2),Q.e.r=M.read_shift(2),X==12&&K.qpro&&(M.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function d(M){var X=Ye(8);return X.write_shift(2,M.s.c),X.write_shift(2,M.s.r),X.write_shift(2,M.e.c),X.write_shift(2,M.e.r),X}function u(M,X,K){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(Q[0].c=M.read_shift(1),Q[3]=M.read_shift(1),Q[0].r=M.read_shift(2),M.l+=2):(Q[2]=M.read_shift(1),Q[0].c=M.read_shift(2),Q[0].r=M.read_shift(2)),Q}function h(M,X,K){var Q=M.l+X,se=u(M,X,K);if(se[1].t="s",K.vers==20768){M.l++;var V=M.read_shift(1);return se[1].v=M.read_shift(V,"utf8"),se}return K.qpro&&M.l++,se[1].v=M.read_shift(Q-M.l,"cstr"),se}function f(M,X,K){var Q=Ye(7+K.length);Q.write_shift(1,255),Q.write_shift(2,X),Q.write_shift(2,M),Q.write_shift(1,39);for(var se=0;se<Q.length;++se){var V=K.charCodeAt(se);Q.write_shift(1,V>=128?95:V)}return Q.write_shift(1,0),Q}function x(M,X,K){var Q=u(M,X,K);return Q[1].v=M.read_shift(2,"i"),Q}function p(M,X,K){var Q=Ye(7);return Q.write_shift(1,255),Q.write_shift(2,X),Q.write_shift(2,M),Q.write_shift(2,K,"i"),Q}function v(M,X,K){var Q=u(M,X,K);return Q[1].v=M.read_shift(8,"f"),Q}function b(M,X,K){var Q=Ye(13);return Q.write_shift(1,255),Q.write_shift(2,X),Q.write_shift(2,M),Q.write_shift(8,K,"f"),Q}function y(M,X,K){var Q=M.l+X,se=u(M,X,K);if(se[1].v=M.read_shift(8,"f"),K.qpro)M.l=Q;else{var V=M.read_shift(2);O(M.slice(M.l,M.l+V),se),M.l+=V}return se}function j(M,X,K){var Q=X&32768;return X&=-32769,X=(Q?M:0)+(X>=8192?X-16384:X),(Q?"":"$")+(K?ka(X):Ha(X))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},S=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function O(M,X){kr(M,0);for(var K=[],Q=0,se="",V="",te="",Z="";M.l<M.length;){var ue=M[M.l++];switch(ue){case 0:K.push(M.read_shift(8,"f"));break;case 1:V=j(X[0].c,M.read_shift(2),!0),se=j(X[0].r,M.read_shift(2),!1),K.push(V+se);break;case 2:{var re=j(X[0].c,M.read_shift(2),!0),J=j(X[0].r,M.read_shift(2),!1);V=j(X[0].c,M.read_shift(2),!0),se=j(X[0].r,M.read_shift(2),!1),K.push(re+J+":"+V+se)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(M.read_shift(2));break;case 6:{for(var Ne="";ue=M[M.l++];)Ne+=String.fromCharCode(ue);K.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:Z=K.pop(),te=K.pop(),K.push(["AND","OR"][ue-20]+"("+te+","+Z+")");break;default:if(ue<32&&S[ue])Z=K.pop(),te=K.pop(),K.push(te+S[ue]+Z);else if(w[ue]){if(Q=w[ue][1],Q==69&&(Q=M[M.l++]),Q>K.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+K.join("|")+"|");return}var q=K.slice(-Q);K.length-=Q,K.push(w[ue][0]+"("+q.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}K.length==1?X[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function _(M){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=M.read_shift(2),X[3]=M[M.l++],X[0].c=M[M.l++],X}function E(M,X){var K=_(M);return K[1].t="s",K[1].v=M.read_shift(X-4,"cstr"),K}function A(M,X,K,Q){var se=Ye(6+Q.length);se.write_shift(2,M),se.write_shift(1,K),se.write_shift(1,X),se.write_shift(1,39);for(var V=0;V<Q.length;++V){var te=Q.charCodeAt(V);se.write_shift(1,te>=128?95:te)}return se.write_shift(1,0),se}function D(M,X){var K=_(M);K[1].v=M.read_shift(2);var Q=K[1].v>>1;if(K[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return K[1].v=Q,K}function L(M,X){var K=_(M),Q=M.read_shift(4),se=M.read_shift(4),V=M.read_shift(2);if(V==65535)return Q===0&&se===3221225472?(K[1].t="e",K[1].v=15):Q===0&&se===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var te=V&32768;return V=(V&32767)-16446,K[1].v=(1-te*2)*(se*Math.pow(2,V+32)+Q*Math.pow(2,V)),K}function B(M,X,K,Q){var se=Ye(14);if(se.write_shift(2,M),se.write_shift(1,K),se.write_shift(1,X),Q==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var V=0,te=0,Z=0,ue=0;return Q<0&&(V=1,Q=-Q),te=Math.log2(Q)|0,Q/=Math.pow(2,te-31),ue=Q>>>0,(ue&2147483648)==0&&(Q/=2,++te,ue=Q>>>0),Q-=ue,ue|=2147483648,ue>>>=0,Q*=Math.pow(2,32),Z=Q>>>0,se.write_shift(4,Z),se.write_shift(4,ue),te+=16383+(V?32768:0),se.write_shift(2,te),se}function I(M,X){var K=L(M);return M.l+=X-14,K}function T(M,X){var K=_(M),Q=M.read_shift(4);return K[1].v=Q>>6,K}function z(M,X){var K=_(M),Q=M.read_shift(8,"f");return K[1].v=Q,K}function k(M,X){var K=z(M);return M.l+=X-10,K}function F(M,X){return M[M.l+X-1]==0?M.read_shift(X,"cstr"):""}function P(M,X){var K=M[M.l++];K>X-1&&(K=X-1);for(var Q="";Q.length<K;)Q+=String.fromCharCode(M[M.l++]);return Q}function G(M,X,K){if(!(!K.qpro||X<21)){var Q=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var se=M.read_shift(X-21,"cstr");return[Q,se]}}function Y(M,X){for(var K={},Q=M.l+X;M.l<Q;){var se=M.read_shift(2);if(se==14e3){for(K[se]=[0,""],K[se][0]=M.read_shift(2);M[M.l];)K[se][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return K}function W(M,X){var K=Ye(5+M.length);K.write_shift(2,14e3),K.write_shift(2,X);for(var Q=0;Q<M.length;++Q){var se=M.charCodeAt(Q);K[K.l++]=se>127?95:se}return K[K.l++]=0,K}var ee={0:{n:"BOF",f:Za},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:F},222:{n:"SHEETNAMELP",f:P},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Y},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:z},40:{n:"FORMULA28",f:k},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:F},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:G},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:n,to_workbook:s}})();function lW(e){var s={},a=e.match(Xr),r=0,n=!1;if(a)for(;r!=a.length;++r){var i=Qt(a[r]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;s.cp=gA[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=i.val;break;case"<sz":s.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":i.rgb&&(s.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return s}var oW=(function(){var e=cf("t"),s=cf("rPr");function a(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:Os(l[1])},d=i.match(s);return d&&(o.s=lW(d[1])),o}var r=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(r,"").split(n).map(a).filter(function(o){return o.v})}})(),cW=(function(){var s=/(\r\n|\n)/g;function a(n,i,l){var o=[];n.u&&o.push("text-decoration: underline;"),n.uval&&o.push("text-underline-style:"+n.uval+";"),n.sz&&o.push("font-size:"+n.sz+"pt;"),n.outline&&o.push("text-effect: outline;"),n.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var d=n.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(i.push("<"+d+">"),l.push("</"+d+">")),l.push("</span>"),n}function r(n){var i=[[],n.v,[]];return n.v?(n.s&&a(n.s,i[0],i[2]),i[0].join("")+i[1].replace(s,"<br/>")+i[2].join("")):""}return function(i){return i.map(r).join("")}})(),dW=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,uW=/<(?:\w+:)?r>/,mW=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function BA(e,s){var a=s?s.cellHTML:!0,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=Os(da(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=da(e),a&&(r.h=CA(r.t))):e.match(uW)&&(r.r=da(e),r.t=Os(da((e.replace(mW,"").match(dW)||[]).join("").replace(Xr,""))),a&&(r.h=cW(oW(r.r)))),r):{t:""}}var fW=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,hW=/<(?:\w+:)?(?:si|sstItem)>/g,xW=/<\/(?:\w+:)?(?:si|sstItem)>/;function pW(e,s){var a=[],r="";if(!e)return a;var n=e.match(fW);if(n){r=n[2].replace(hW,"").split(xW);for(var i=0;i!=r.length;++i){var l=BA(r[i].trim(),s);l!=null&&(a[a.length]=l)}n=Qt(n[1]),a.Count=n.count,a.Unique=n.uniqueCount}return a}var gW=/^\s|\s$|[\t\n\r]/;function fL(e,s){if(!s.bookSST)return"";var a=[Va];a[a.length]=ut("sst",null,{xmlns:fd[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(e[r]!=null){var n=e[r],i="<si>";n.r?i+=n.r:(i+="<t",n.t||(n.t=""),n.t.match(gW)&&(i+=' xml:space="preserve"'),i+=">"+ea(n.t)+"</t>"),i+="</si>",a[a.length]=i}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function bW(e){return[e.read_shift(4),e.read_shift(4)]}function vW(e,s){var a=[],r=!1;return Kl(e,function(i,l,o){switch(o){case 159:a.Count=i[0],a.Unique=i[1];break;case 19:a.push(i);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(l.T,!r||s.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function yW(e,s){return s||(s=Ye(8)),s.write_shift(4,e.Count),s.write_shift(4,e.Unique),s}var NW=OH;function jW(e){var s=pn();at(s,159,yW(e));for(var a=0;a<e.length;++a)at(s,19,NW(e[a]));return at(s,160),s.end()}function hL(e){for(var s=[],a=e.split(""),r=0;r<a.length;++r)s[r]=a[r].charCodeAt(0);return s}function Ml(e,s){var a={};return a.Major=e.read_shift(2),a.Minor=e.read_shift(2),s>=4&&(e.l+=s-4),a}function wW(e){var s={};return s.id=e.read_shift(0,"lpp4"),s.R=Ml(e,4),s.U=Ml(e,4),s.W=Ml(e,4),s}function SW(e){for(var s=e.read_shift(4),a=e.l+s-4,r={},n=e.read_shift(4),i=[];n-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=i,e.l!=a)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+a);return r}function AW(e){var s=[];e.l+=4;for(var a=e.read_shift(4);a-- >0;)s.push(SW(e));return s}function EW(e){var s=[];e.l+=4;for(var a=e.read_shift(4);a-- >0;)s.push(e.read_shift(0,"lpp4"));return s}function CW(e){var s={};return e.read_shift(4),e.l+=4,s.id=e.read_shift(0,"lpp4"),s.name=e.read_shift(0,"lpp4"),s.R=Ml(e,4),s.U=Ml(e,4),s.W=Ml(e,4),s}function TW(e){var s=CW(e);if(s.ename=e.read_shift(0,"8lpp4"),s.blksz=e.read_shift(4),s.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function xL(e,s){var a=e.l+s,r={};r.Flags=e.read_shift(4)&63,e.l+=4,r.AlgID=e.read_shift(4);var n=!1;switch(r.AlgID){case 26126:case 26127:case 26128:n=r.Flags==36;break;case 26625:n=r.Flags==4;break;case 0:n=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(a-e.l>>1,"utf16le"),e.l=a,r}function pL(e,s){var a={},r=e.l+s;return e.l+=4,a.Salt=e.slice(e.l,e.l+16),e.l+=16,a.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),a.VerifierHash=e.slice(e.l,r),e.l=r,a}function _W(e){var s=Ml(e);switch(s.Minor){case 2:return[s.Minor,kW(e)];case 3:return[s.Minor,OW()];case 4:return[s.Minor,IW(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function kW(e){var s=e.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var a=e.read_shift(4),r=xL(e,a),n=pL(e,e.length-e.l);return{t:"Std",h:r,v:n}}function OW(){throw new Error("File is password-protected: ECMA-376 Extensible")}function IW(e){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var a=e.read_shift(e.length-e.l,"utf8"),r={};return a.replace(Xr,function(i){var l=Qt(i);switch(il(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(o){r[o]=l[o]});break;case"<dataIntegrity":r.encryptedHmacKey=l.encryptedHmacKey,r.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(l);break;default:throw l[0]}}),r}function RW(e,s){var a={},r=a.EncryptionVersionInfo=Ml(e,4);if(s-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);a.Flags=e.read_shift(4),s-=4;var n=e.read_shift(4);return s-=4,a.EncryptionHeader=xL(e,n),s-=n,a.EncryptionVerifier=pL(e,s),a}function PW(e){var s={},a=s.EncryptionVersionInfo=Ml(e,4);if(a.Major!=1||a.Minor!=1)throw"unrecognized version code "+a.Major+" : "+a.Minor;return s.Salt=e.read_shift(16),s.EncryptedVerifier=e.read_shift(16),s.EncryptedVerifierHash=e.read_shift(16),s}function $A(e){var s=0,a,r=hL(e),n=r.length+1,i,l,o,d,u;for(a=qo(n),a[0]=r.length,i=1;i!=n;++i)a[i]=r[i-1];for(i=n-1;i>=0;--i)l=a[i],o=(s&16384)===0?0:1,d=s<<1&32767,u=o|d,s=u^l;return s^52811}var gL=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],a=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(l){return(l/2|l*128)&255},n=function(l,o){return r(l^o)},i=function(l){for(var o=s[l.length-1],d=104,u=l.length-1;u>=0;--u)for(var h=l[u],f=0;f!=7;++f)h&64&&(o^=a[d]),h*=2,--d;return o};return function(l){for(var o=hL(l),d=i(o),u=o.length,h=qo(16),f=0;f!=16;++f)h[f]=0;var x,p,v;for((u&1)===1&&(x=d>>8,h[u]=n(e[0],x),--u,x=d&255,p=o[o.length-1],h[u]=n(p,x));u>0;)--u,x=d>>8,h[u]=n(o[u],x),--u,x=d&255,h[u]=n(o[u],x);for(u=15,v=15-o.length;v>0;)x=d>>8,h[u]=n(e[v],x),--u,--v,x=d&255,h[u]=n(o[u],x),--u,--v;return h}})(),DW=function(e,s,a,r,n){n||(n=s),r||(r=gL(e));var i,l;for(i=0;i!=s.length;++i)l=s[i],l^=r[a],l=(l>>5|l<<3)&255,n[i]=l,++a;return[n,a,r]},MW=function(e){var s=0,a=gL(e);return function(r){var n=DW("",r,s,a);return s=n[1],n[0]}};function LW(e,s,a,r){var n={key:Za(e),verificationBytes:Za(e)};return a.password&&(n.verifier=$A(a.password)),r.valid=n.verificationBytes===n.verifier,r.valid&&(r.insitu=MW(a.password)),n}function FW(e,s,a){var r=a||{};return r.Info=e.read_shift(2),e.l-=2,r.Info===1?r.Data=PW(e):r.Data=RW(e,s),r}function UW(e,s,a){var r={Type:a.biff>=8?e.read_shift(2):0};return r.Type?FW(e,s-2,r):LW(e,a.biff>=8?s:s-2,a,r),r}var bL=(function(){function e(n,i){switch(i.type){case"base64":return s(zn(n),i);case"binary":return s(n,i);case"buffer":return s(fs&&Buffer.isBuffer(n)?n.toString("binary"):Zo(n),i);case"array":return s(Zc(n),i)}throw new Error("Unrecognized type "+i.type)}function s(n,i){var l=i||{},o=l.dense?[]:{},d=n.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(h,f){Array.isArray(o)&&(o[f]=[]);for(var x=/\\\w+\b/g,p=0,v,b=-1;v=x.exec(h);){switch(v[0]){case"\\cell":var y=h.slice(p,x.lastIndex-v[0].length);if(y[0]==" "&&(y=y.slice(1)),++b,y.length){var j={v:y,t:"s"};Array.isArray(o)?o[f][b]=j:o[Vt({r:f,c:b})]=j}break}p=x.lastIndex}b>u.e.c&&(u.e.c=b)}),o["!ref"]=rs(u),o}function a(n,i){return ec(e(n,i),i)}function r(n){for(var i=["{\\rtf1\\ansi"],l=Rs(n["!ref"]),o,d=Array.isArray(n),u=l.s.r;u<=l.e.r;++u){i.push("\\trowd\\trautofit1");for(var h=l.s.c;h<=l.e.c;++h)i.push("\\cellx"+(h+1));for(i.push("\\pard\\intbl"),h=l.s.c;h<=l.e.c;++h){var f=Vt({r:u,c:h});o=d?(n[u]||[])[h]:n[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||($l(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:a,to_sheet:e,from_sheet:r}})();function zW(e){var s=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function ff(e){for(var s=0,a=1;s!=3;++s)a=a*256+(e[s]>255?255:e[s]<0?0:e[s]);return a.toString(16).toUpperCase().slice(1)}function BW(e){var s=e[0]/255,a=e[1]/255,r=e[2]/255,n=Math.max(s,a,r),i=Math.min(s,a,r),l=n-i;if(l===0)return[0,0,s];var o=0,d=0,u=n+i;switch(d=l/(u>1?2-u:u),n){case s:o=((a-r)/l+6)%6;break;case a:o=(r-s)/l+2;break;case r:o=(s-a)/l+4;break}return[o/6,d,u/2]}function $W(e){var s=e[0],a=e[1],r=e[2],n=a*2*(r<.5?r:1-r),i=r-n/2,l=[i,i,i],o=6*s,d;if(a!==0)switch(o|0){case 0:case 6:d=n*o,l[0]+=n,l[1]+=d;break;case 1:d=n*(2-o),l[0]+=d,l[1]+=n;break;case 2:d=n*(o-2),l[1]+=n,l[2]+=d;break;case 3:d=n*(4-o),l[1]+=d,l[2]+=n;break;case 4:d=n*(o-4),l[2]+=n,l[0]+=d;break;case 5:d=n*(6-o),l[2]+=d,l[0]+=n;break}for(var u=0;u!=3;++u)l[u]=Math.round(l[u]*255);return l}function Up(e,s){if(s===0)return e;var a=BW(zW(e));return s<0?a[2]=a[2]*(1+s):a[2]=1-(1-a[2])*(1-s),ff($W(a))}var vL=6,qW=15,HW=1,qr=vL;function hf(e){return Math.floor((e+Math.round(128/qr)/256)*qr)}function xf(e){return Math.floor((e-5)/qr*100+.5)/100}function zp(e){return Math.round((e*qr+5)/qr*256)/256}function n1(e){return zp(xf(hf(e)))}function qA(e){var s=Math.abs(e-n1(e)),a=qr;if(s>.005)for(qr=HW;qr<qW;++qr)Math.abs(e-n1(e))<=s&&(s=Math.abs(e-n1(e)),a=qr);qr=a}function Ho(e){e.width?(e.wpx=hf(e.width),e.wch=xf(e.wpx),e.MDW=qr):e.wpx?(e.wch=xf(e.wpx),e.width=zp(e.wch),e.MDW=qr):typeof e.wch=="number"&&(e.width=zp(e.wch),e.wpx=hf(e.width),e.MDW=qr),e.customWidth&&delete e.customWidth}var VW=96,yL=VW;function pf(e){return e*96/yL}function Lu(e){return e*yL/96}var GW={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function WW(e,s,a,r){s.Borders=[];var n={},i=!1;(e[0].match(Xr)||[]).forEach(function(l){var o=Qt(l);switch(il(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},o.diagonalUp&&(n.diagonalUp=ba(o.diagonalUp)),o.diagonalDown&&(n.diagonalDown=ba(o.diagonalDown)),s.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function QW(e,s,a,r){s.Fills=[];var n={},i=!1;(e[0].match(Xr)||[]).forEach(function(l){var o=Qt(l);switch(il(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},s.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":o.patternType&&(n.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),o.indexed&&(n.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(n.bgColor.theme=parseInt(o.theme,10)),o.tint&&(n.bgColor.tint=parseFloat(o.tint)),o.rgb&&(n.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),o.theme&&(n.fgColor.theme=parseInt(o.theme,10)),o.tint&&(n.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(n.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function KW(e,s,a,r){s.Fonts=[];var n={},i=!1;(e[0].match(Xr)||[]).forEach(function(l){var o=Qt(l);switch(il(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(n),n={};break;case"<name":o.val&&(n.name=da(o.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=o.val?ba(o.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=o.val?ba(o.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(o.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=o.val?ba(o.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=o.val?ba(o.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=o.val?ba(o.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=o.val?ba(o.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=o.val?ba(o.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":o.val&&(n.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(n.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(n.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(n.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=gA[parseInt(o.val,10)];break;case"<color":if(n.color||(n.color={}),o.auto&&(n.color.auto=ba(o.auto)),o.rgb)n.color.rgb=o.rgb.slice(-6);else if(o.indexed){n.color.index=parseInt(o.indexed,10);var d=Bc[n.color.index];n.color.index==81&&(d=Bc[1]),d||(d=Bc[1]),n.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else o.theme&&(n.color.theme=parseInt(o.theme,10),o.tint&&(n.color.tint=parseFloat(o.tint)),o.theme&&a.themeElements&&a.themeElements.clrScheme&&(n.color.rgb=Up(a.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function JW(e,s,a){s.NumberFmt=[];for(var r=Fa(Ht),n=0;n<r.length;++n)s.NumberFmt[r[n]]=Ht[r[n]];var i=e[0].match(Xr);if(i)for(n=0;n<i.length;++n){var l=Qt(i[n]);switch(il(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Os(da(l.formatCode)),d=parseInt(l.numFmtId,10);if(s.NumberFmt[d]=o,d>0){if(d>392){for(d=392;d>60&&s.NumberFmt[d]!=null;--d);s.NumberFmt[d]=o}Dl(o,d)}}break;case"</numFmt>":break;default:if(a.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function YW(e){var s=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var r=a[0];r<=a[1];++r)e[r]!=null&&(s[s.length]=ut("numFmt",null,{numFmtId:r,formatCode:ea(e[r])}))}),s.length===1?"":(s[s.length]="</numFmts>",s[0]=ut("numFmts",null,{count:s.length-2}).replace("/>",">"),s.join(""))}var Vx=["numFmtId","fillId","fontId","borderId","xfId"],Gx=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function XW(e,s,a){s.CellXf=[];var r,n=!1;(e[0].match(Xr)||[]).forEach(function(i){var l=Qt(i),o=0;switch(il(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=l,delete r[0],o=0;o<Vx.length;++o)r[Vx[o]]&&(r[Vx[o]]=parseInt(r[Vx[o]],10));for(o=0;o<Gx.length;++o)r[Gx[o]]&&(r[Gx[o]]=ba(r[Gx[o]]));if(s.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(s.NumberFmt[r.numFmtId]==s.NumberFmt[o]){r.numFmtId=o;break}}s.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};l.vertical&&(d.vertical=l.vertical),l.horizontal&&(d.horizontal=l.horizontal),l.textRotation!=null&&(d.textRotation=l.textRotation),l.indent&&(d.indent=l.indent),l.wrapText&&(d.wrapText=ba(l.wrapText)),r.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(a&&a.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function ZW(e){var s=[];return s[s.length]=ut("cellXfs",null),e.forEach(function(a){s[s.length]=ut("xf",null,a)}),s[s.length]="</cellXfs>",s.length===2?"":(s[0]=ut("cellXfs",null,{count:s.length-2}).replace("/>",">"),s.join(""))}var eQ=(function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,a=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,d,u){var h={};if(!o)return h;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(s))&&JW(f,h,u),(f=o.match(n))&&KW(f,h,d,u),(f=o.match(r))&&QW(f,h,d,u),(f=o.match(i))&&WW(f,h,d,u),(f=o.match(a))&&XW(f,h,u),h}})();function NL(e,s){var a=[Va,ut("styleSheet",null,{xmlns:fd[0],"xmlns:vt":cr.vt})],r;return e.SSF&&(r=YW(e.SSF))!=null&&(a[a.length]=r),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=ZW(s.cellXfs))&&(a[a.length]=r),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function tQ(e,s){var a=e.read_shift(2),r=Kr(e);return[a,r]}function sQ(e,s,a){a||(a=Ye(6+4*s.length)),a.write_shift(2,e),yr(s,a);var r=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),r}function aQ(e,s,a){var r={};r.sz=e.read_shift(2)/20;var n=FH(e);n.fItalic&&(r.italic=1),n.fCondense&&(r.condense=1),n.fExtend&&(r.extend=1),n.fShadow&&(r.shadow=1),n.fOutline&&(r.outline=1),n.fStrikeout&&(r.strike=1);var i=e.read_shift(2);switch(i===700&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(r.underline=l);var o=e.read_shift(1);o>0&&(r.family=o);var d=e.read_shift(1);switch(d>0&&(r.charset=d),e.l++,r.color=LH(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Kr(e),r}function rQ(e,s){s||(s=Ye(153)),s.write_shift(2,e.sz*20),UH(e,s),s.write_shift(2,e.bold?700:400);var a=0;e.vertAlign=="superscript"?a=1:e.vertAlign=="subscript"&&(a=2),s.write_shift(2,a),s.write_shift(1,e.underline||0),s.write_shift(1,e.family||0),s.write_shift(1,e.charset||0),s.write_shift(1,0),Mp(e.color,s);var r=0;return r=2,s.write_shift(1,r),yr(e.name,s),s.length>s.l?s.slice(0,s.l):s}var nQ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],i1,iQ=Jr;function AO(e,s){s||(s=Ye(84)),i1||(i1=Kg(nQ));var a=i1[e.patternType];a==null&&(a=40),s.write_shift(4,a);var r=0;if(a!=40)for(Mp({auto:1},s),Mp({auto:1},s);r<12;++r)s.write_shift(4,0);else{for(;r<4;++r)s.write_shift(4,0);for(;r<12;++r)s.write_shift(4,0)}return s.length>s.l?s.slice(0,s.l):s}function lQ(e,s){var a=e.l+s,r=e.read_shift(2),n=e.read_shift(2);return e.l=a,{ixfe:r,numFmtId:n}}function jL(e,s,a){a||(a=Ye(16)),a.write_shift(2,s||0),a.write_shift(2,e.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var r=0;return a.write_shift(1,r),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function gm(e,s){return s||(s=Ye(10)),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(4,0),s}var oQ=Jr;function cQ(e,s){return s||(s=Ye(51)),s.write_shift(1,0),gm(null,s),gm(null,s),gm(null,s),gm(null,s),gm(null,s),s.length>s.l?s.slice(0,s.l):s}function dQ(e,s){return s||(s=Ye(52)),s.write_shift(4,e.xfId),s.write_shift(2,1),s.write_shift(1,0),s.write_shift(1,0),Dp(e.name||"",s),s.length>s.l?s.slice(0,s.l):s}function uQ(e,s,a){var r=Ye(2052);return r.write_shift(4,e),Dp(s,r),Dp(a,r),r.length>r.l?r.slice(0,r.l):r}function mQ(e,s,a){var r={};r.NumberFmt=[];for(var n in Ht)r.NumberFmt[n]=Ht[n];r.CellXf=[],r.Fonts=[];var i=[],l=!1;return Kl(e,function(d,u,h){switch(h){case 44:r.NumberFmt[d[0]]=d[1],Dl(d[1],d[0]);break;case 43:r.Fonts.push(d),d.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(d.color.rgb=Up(s.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&r.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(h),l=!0;break;case 38:i.pop(),l=!1;break;default:if(u.T>0)i.push(h);else if(u.T<0)i.pop();else if(!l||a.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function fQ(e,s){if(s){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&++a}),a!=0&&(at(e,615,Pi(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&at(e,44,sQ(n,s[n]))}),at(e,616))}}function hQ(e){var s=1;at(e,611,Pi(s)),at(e,43,rQ({sz:12,color:{theme:1},name:"Calibri",family:2})),at(e,612)}function xQ(e){var s=2;at(e,603,Pi(s)),at(e,45,AO({patternType:"none"})),at(e,45,AO({patternType:"gray125"})),at(e,604)}function pQ(e){var s=1;at(e,613,Pi(s)),at(e,46,cQ()),at(e,614)}function gQ(e){var s=1;at(e,626,Pi(s)),at(e,47,jL({numFmtId:0},65535)),at(e,627)}function bQ(e,s){at(e,617,Pi(s.length)),s.forEach(function(a){at(e,47,jL(a,0))}),at(e,618)}function vQ(e){var s=1;at(e,619,Pi(s)),at(e,48,dQ({xfId:0,name:"Normal"})),at(e,620)}function yQ(e){var s=0;at(e,505,Pi(s)),at(e,506)}function NQ(e){var s=0;at(e,508,uQ(s,"TableStyleMedium9","PivotStyleMedium4")),at(e,509)}function jQ(e,s){var a=pn();return at(a,278),fQ(a,e.SSF),hQ(a),xQ(a),pQ(a),gQ(a),bQ(a,s.cellXfs),vQ(a),yQ(a),NQ(a),at(a,279),a.end()}var wQ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function SQ(e,s,a){s.themeElements.clrScheme=[];var r={};(e[0].match(Xr)||[]).forEach(function(n){var i=Qt(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=i.val;break;case"<a:sysClr":r.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(s.themeElements.clrScheme[wQ.indexOf(i[0])]=r,r={}):r.name=i[0].slice(3,i[0].length-1);break;default:if(a&&a.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function AQ(){}function EQ(){}var CQ=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,TQ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,_Q=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function kQ(e,s,a){s.themeElements={};var r;[["clrScheme",CQ,SQ],["fontScheme",TQ,AQ],["fmtScheme",_Q,EQ]].forEach(function(n){if(!(r=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](r,s,a)})}var OQ=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function wL(e,s){(!e||e.length===0)&&(e=HA());var a,r={};if(!(a=e.match(OQ)))throw new Error("themeElements not found in theme");return kQ(a[0],r,s),r.raw=e,r}function HA(e,s){if(s&&s.themeXLSX)return s.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var a=[Va];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function IQ(e,s,a){var r=e.l+s,n=e.read_shift(4);if(n!==124226){if(!a.cellStyles){e.l=r;return}var i=e.slice(e.l);e.l=r;var l;try{l=x8(i,{type:"array"})}catch{return}var o=Dn(l,"theme/theme/theme1.xml",!0);if(o)return wL(o,a)}}function RQ(e){return e.read_shift(4)}function PQ(e){var s={};switch(s.xclrType=e.read_shift(2),s.nTintShade=e.read_shift(2),s.xclrType){case 0:e.l+=4;break;case 1:s.xclrValue=DQ(e,4);break;case 2:s.xclrValue=sL(e);break;case 3:s.xclrValue=RQ(e);break;case 4:e.l+=4;break}return e.l+=8,s}function DQ(e,s){return Jr(e,s)}function MQ(e,s){return Jr(e,s)}function LQ(e){var s=e.read_shift(2),a=e.read_shift(2)-4,r=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=PQ(e);break;case 6:r[1]=MQ(e,a);break;case 14:case 15:r[1]=e.read_shift(a===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+a)}return r}function FQ(e,s){var a=e.l+s;e.l+=2;var r=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),i=[];n-- >0;)i.push(LQ(e,a-e.l));return{ixfe:r,ext:i}}function UQ(e,s){s.forEach(function(a){a[0]})}function zQ(e,s){return{flags:e.read_shift(4),version:e.read_shift(4),name:Kr(e)}}function BQ(e){var s=Ye(12+2*e.name.length);return s.write_shift(4,e.flags),s.write_shift(4,e.version),yr(e.name,s),s.slice(0,s.l)}function $Q(e){for(var s=[],a=e.read_shift(4);a-- >0;)s.push([e.read_shift(4),e.read_shift(4)]);return s}function qQ(e){var s=Ye(4+8*e.length);s.write_shift(4,e.length);for(var a=0;a<e.length;++a)s.write_shift(4,e[a][0]),s.write_shift(4,e[a][1]);return s}function HQ(e,s){var a=Ye(8+2*s.length);return a.write_shift(4,e),yr(s,a),a.slice(0,a.l)}function VQ(e){return e.l+=4,e.read_shift(4)!=0}function GQ(e,s){var a=Ye(8);return a.write_shift(4,e),a.write_shift(4,1),a}function WQ(e,s,a){var r={Types:[],Cell:[],Value:[]},n=a||{},i=[],l=!1,o=2;return Kl(e,function(d,u,h){switch(h){case 335:r.Types.push({name:d.name});break;case 51:d.forEach(function(f){o==1?r.Cell.push({type:r.Types[f[0]-1].name,index:f[1]}):o==0&&r.Value.push({type:r.Types[f[0]-1].name,index:f[1]})});break;case 337:o=d?1:0;break;case 338:o=2;break;case 35:i.push(h),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!u.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+h.toString(16))}}}),r}function QQ(){var e=pn();return at(e,332),at(e,334,Pi(1)),at(e,335,BQ({name:"XLDAPR",version:12e4,flags:3496657072})),at(e,336),at(e,339,HQ(1,"XLDAPR")),at(e,52),at(e,35,Pi(514)),at(e,4096,Pi(0)),at(e,4097,li(1)),at(e,36),at(e,53),at(e,340),at(e,337,GQ(1)),at(e,51,qQ([[1,0]])),at(e,338),at(e,333),e.end()}function KQ(e,s,a){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var n=!1,i=2,l;return e.replace(Xr,function(o){var d=Qt(o);switch(il(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<r.Types.length;++u)r.Types[u].name==d.name&&(l=r.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?r.Cell.push({type:r.Types[d.t-1].name,index:+d.v}):i==0&&r.Value.push({type:r.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+d.i);break;default:if(!n&&a.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return o}),r}function SL(){var e=[Va];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function JQ(e){var s=[];if(!e)return s;var a=1;return(e.match(Xr)||[]).forEach(function(r){var n=Qt(r);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?a=n.i:n.i=a,s.push(n);break}}),s}function YQ(e){var s={};s.i=e.read_shift(4);var a={};a.r=e.read_shift(4),a.c=e.read_shift(4),s.r=Vt(a);var r=e.read_shift(1);return r&2&&(s.l="1"),r&8&&(s.a="1"),s}function XQ(e,s,a){var r=[];return Kl(e,function(i,l,o){switch(o){case 63:r.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function ZQ(e,s,a,r){if(!e)return e;var n=r||{},i=!1;Kl(e,function(o,d,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!d.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},n)}function eK(e,s){if(!e)return"??";var a=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][a].Target}var bu=1024;function AL(e,s){for(var a=[21600,21600],r=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),n=[ut("xml",null,{"xmlns:v":In.v,"xmlns:o":In.o,"xmlns:x":In.x,"xmlns:mv":In.mv}).replace(/\/>/,">"),ut("o:shapelayout",ut("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ut("v:shapetype",[ut("v:stroke",null,{joinstyle:"miter"}),ut("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:r})];bu<e*1e3;)bu+=1e3;return s.forEach(function(i){var l=Oa(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var d=o.type=="gradient"?ut("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ut("v:fill",d,o),h={on:"t",obscured:"t"};++bu,n=n.concat(["<v:shape"+df({id:"_x0000_s"+bu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ut("v:shadow",null,h),ut("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Or("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),Or("x:AutoFill","False"),Or("x:Row",String(l.r)),Or("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function EO(e,s,a,r){var n=Array.isArray(e),i;s.forEach(function(l){var o=Oa(l.ref);if(n?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},n?e[o.r][o.c]=i:e[l.ref]=i;var d=Rs(e["!ref"]||"BDWGO1000001:A1");d.s.r>o.r&&(d.s.r=o.r),d.e.r<o.r&&(d.e.r=o.r),d.s.c>o.c&&(d.s.c=o.c),d.e.c<o.c&&(d.e.c=o.c);var u=rs(d);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var h={a:l.author,t:l.t,r:l.r,T:a};l.h&&(h.h=l.h);for(var f=i.c.length-1;f>=0;--f){if(!a&&i.c[f].T)return;a&&!i.c[f].T&&i.c.splice(f,1)}if(a&&r){for(f=0;f<r.length;++f)if(h.a==r[f].id){h.a=r[f].name||h.a;break}}i.c.push(h)})}function tK(e,s){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var a=[],r=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&a.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var d=Qt(o[0]),u={author:d.authorId&&a[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},h=Oa(d.ref);if(!(s.sheetRows&&s.sheetRows<=h.r)){var f=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),x=!!f&&!!f[1]&&BA(f[1])||{r:"",t:"",h:""};u.r=x.r,x.r=="<t></t>"&&(x.t=x.h=""),u.t=(x.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(u.h=x.h),r.push(u)}}}}),r}function EL(e){var s=[Va,ut("comments",null,{xmlns:fd[0]})],a=[];return s.push("<authors>"),e.forEach(function(r){r[1].forEach(function(n){var i=ea(n.a);a.indexOf(i)==-1&&(a.push(i),s.push("<author>"+i+"</author>")),n.T&&n.ID&&a.indexOf("tc="+n.ID)==-1&&(a.push("tc="+n.ID),s.push("<author>tc="+n.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),s.push("<author>SheetJ5</author>")),s.push("</authors>"),s.push("<commentList>"),e.forEach(function(r){var n=0,i=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?n=a.indexOf("tc="+r[1][0].ID):r[1].forEach(function(d){d.a&&(n=a.indexOf(ea(d.a))),i.push(d.t||"")}),s.push('<comment ref="'+r[0]+'" authorId="'+n+'"><text>'),i.length<=1)s.push(Or("t",ea(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;s.push(Or("t",ea(l)))}s.push("</text></comment>")}),s.push("</commentList>"),s.length>2&&(s[s.length]="</comments>",s[1]=s[1].replace("/>",">")),s.join("")}function sK(e,s){var a=[],r=!1,n={},i=0;return e.replace(Xr,function(o,d){var u=Qt(o);switch(il(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":n.t!=null&&a.push(n);break;case"<text>":case"<text":i=d+o.length;break;case"</text>":n.t=e.slice(i,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&s.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),a}function aK(e,s,a){var r=[Va,ut("ThreadedComments",null,{xmlns:cr.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(n){var i="";(n[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&s.indexOf(l.a)==-1&&s.push(l.a);var d={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};o==0?i=d.id:d.parentId=i,l.ID=d.id,l.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+s.indexOf(l.a)).slice(-12)+"}"),r.push(ut("threadedComment",Or("text",l.t||""),d))})}),r.push("</ThreadedComments>"),r.join("")}function rK(e,s){var a=[],r=!1;return e.replace(Xr,function(i){var l=Qt(i);switch(il(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":a.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&s.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),a}function nK(e){var s=[Va,ut("personList",null,{xmlns:cr.TCMNT,"xmlns:x":fd[0]}).replace(/[\/]>/,">")];return e.forEach(function(a,r){s.push(ut("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:a,providerId:"None"}))}),s.push("</personList>"),s.join("")}function iK(e){var s={};s.iauthor=e.read_shift(4);var a=gd(e);return s.rfx=a.s,s.ref=Vt(a.s),e.l+=16,s}function lK(e,s){return s==null&&(s=Ye(36)),s.write_shift(4,e[1].iauthor),f0(e[0],s),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s}var oK=Kr;function cK(e){return yr(e.slice(0,54))}function dK(e,s){var a=[],r=[],n={},i=!1;return Kl(e,function(o,d,u){switch(u){case 632:r.push(o);break;case 635:n=o;break;case 637:n.t=o.t,n.h=o.h,n.r=o.r;break;case 636:if(n.author=r[n.iauthor],delete n.iauthor,s.sheetRows&&n.rfx&&s.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,a.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function uK(e){var s=pn(),a=[];return at(s,628),at(s,630),e.forEach(function(r){r[1].forEach(function(n){a.indexOf(n.a)>-1||(a.push(n.a.slice(0,54)),at(s,632,cK(n.a)))})}),at(s,631),at(s,633),e.forEach(function(r){r[1].forEach(function(n){n.iauthor=a.indexOf(n.a);var i={s:Oa(r[0]),e:Oa(r[0])};at(s,635,lK([i,n])),n.t&&n.t.length>0&&at(s,637,RH(n)),at(s,636),delete n.iauthor})}),at(s,634),at(s,629),s.end()}var mK="application/vnd.ms-office.vbaProject";function fK(e){var s=Ot.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(a,r){if(!(a.slice(-1)==="/"||!a.match(/_VBA_PROJECT_CUR/))){var n=a.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ot.utils.cfb_add(s,n,e.FileIndex[r].content)}}),Ot.write(s)}function hK(e,s){s.FullPaths.forEach(function(a,r){if(r!=0){var n=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&Ot.utils.cfb_add(e,n,s.FileIndex[r].content)}})}var CL=["xlsb","xlsm","xlam","biff8","xla"];function xK(){return{"!type":"dialog"}}function pK(){return{"!type":"dialog"}}function gK(){return{"!type":"macro"}}function bK(){return{"!type":"macro"}}var Eu=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function a(r,n,i,l){var o=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,h=l.length>0?parseInt(l,10)|0:0;return o?h+=s.c:--h,d?u+=s.r:--u,n+(o?"":"$")+ka(h)+(d?"":"$")+Ha(u)}return function(n,i){return s=i,n.replace(e,a)}})(),VA=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,GA=(function(){return function(s,a){return s.replace(VA,function(r,n,i,l,o,d){var u=IA(l)-(i?0:a.c),h=OA(d)-(o?0:a.r),f=h==0?"":o?h+1:"["+h+"]",x=u==0?"":i?u+1:"["+u+"]";return n+"R"+f+"C"+x})}})();function TL(e,s){return e.replace(VA,function(a,r,n,i,l,o){return r+(n=="$"?n+i:ka(IA(i)+s.c))+(l=="$"?l+o:Ha(OA(o)+s.r))})}function vK(e,s,a){var r=vn(s),n=r.s,i=Oa(a),l={r:i.r-n.r,c:i.c-n.c};return TL(e,l)}function yK(e){return e.length!=1}function CO(e){return e.replace(/_xlfn\./g,"")}function Ja(e){e.l+=1}function Vo(e,s){var a=e.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function _L(e,s,a){var r=2;if(a){if(a.biff>=2&&a.biff<=5)return kL(e);a.biff==12&&(r=4)}var n=e.read_shift(r),i=e.read_shift(r),l=Vo(e),o=Vo(e);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function kL(e){var s=Vo(e),a=Vo(e),r=e.read_shift(1),n=e.read_shift(1);return{s:{r:s[0],c:r,cRel:s[1],rRel:s[2]},e:{r:a[0],c:n,cRel:a[1],rRel:a[2]}}}function NK(e,s,a){if(a.biff<8)return kL(e);var r=e.read_shift(a.biff==12?4:2),n=e.read_shift(a.biff==12?4:2),i=Vo(e),l=Vo(e);return{s:{r,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function OL(e,s,a){if(a&&a.biff>=2&&a.biff<=5)return jK(e);var r=e.read_shift(a&&a.biff==12?4:2),n=Vo(e);return{r,c:n[0],cRel:n[1],rRel:n[2]}}function jK(e){var s=Vo(e),a=e.read_shift(1);return{r:s[0],c:a,cRel:s[1],rRel:s[2]}}function wK(e){var s=e.read_shift(2),a=e.read_shift(2);return{r:s,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function SK(e,s,a){var r=a&&a.biff?a.biff:8;if(r>=2&&r<=5)return AK(e);var n=e.read_shift(r>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:o}}function AK(e){var s=e.read_shift(2),a=e.read_shift(1),r=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,r==1&&s>=8192&&(s=s-16384),n==1&&a>=128&&(a=a-256),{r:s,c:a,cRel:n,rRel:r}}function EK(e,s,a){var r=(e[e.l++]&96)>>5,n=_L(e,a.biff>=2&&a.biff<=5?6:8,a);return[r,n]}function CK(e,s,a){var r=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),i=8;if(a)switch(a.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=_L(e,i,a);return[r,n,l]}function TK(e,s,a){var r=(e[e.l++]&96)>>5;return e.l+=a&&a.biff>8?12:a.biff<8?6:8,[r]}function _K(e,s,a){var r=(e[e.l++]&96)>>5,n=e.read_shift(2),i=8;if(a)switch(a.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[r,n]}function kK(e,s,a){var r=(e[e.l++]&96)>>5,n=NK(e,s-1,a);return[r,n]}function OK(e,s,a){var r=(e[e.l++]&96)>>5;return e.l+=a.biff==2?6:a.biff==12?14:7,[r]}function TO(e){var s=e[e.l+1]&1,a=1;return e.l+=4,[s,a]}function IK(e,s,a){e.l+=2;for(var r=e.read_shift(a&&a.biff==2?1:2),n=[],i=0;i<=r;++i)n.push(e.read_shift(a&&a.biff==2?1:2));return n}function RK(e,s,a){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(a&&a.biff==2?1:2)]}function PK(e,s,a){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(a&&a.biff==2?1:2)]}function DK(e){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(2)]}function MK(e,s,a){var r=e[e.l+1]&255?1:0;return e.l+=a&&a.biff==2?3:4,[r]}function IL(e){var s=e.read_shift(1),a=e.read_shift(1);return[s,a]}function LK(e){return e.read_shift(2),IL(e)}function FK(e){return e.read_shift(2),IL(e)}function UK(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=OL(e,0,a);return[r,n]}function zK(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=SK(e,0,a);return[r,n]}function BK(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);a&&a.biff==5&&(e.l+=12);var i=OL(e,0,a);return[r,n,i]}function $K(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(a&&a.biff<=3?1:2);return[VJ[n],DL[n],r]}function qK(e,s,a){var r=e[e.l++],n=e.read_shift(1),i=a&&a.biff<=3?[r==88?-1:0,e.read_shift(1)]:HK(e);return[n,(i[0]===0?DL:HJ)[i[1]]]}function HK(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function VK(e,s,a){e.l+=a&&a.biff==2?3:4}function GK(e,s,a){if(e.l++,a&&a.biff==12)return[e.read_shift(4,"i"),0];var r=e.read_shift(2),n=e.read_shift(a&&a.biff==2?1:2);return[r,n]}function WK(e){return e.l++,Jl[e.read_shift(1)]}function QK(e){return e.l++,e.read_shift(2)}function KK(e){return e.l++,e.read_shift(1)!==0}function JK(e){return e.l++,Gr(e)}function YK(e,s,a){return e.l++,oh(e,s-1,a)}function XK(e,s){var a=[e.read_shift(1)];if(s==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=$a(e,1)?"TRUE":"FALSE",s!=12&&(e.l+=7);break;case 37:case 16:a[1]=Jl[e[e.l]],e.l+=s==12?4:8;break;case 0:e.l+=8;break;case 1:a[1]=Gr(e);break;case 2:a[1]=bd(e,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function ZK(e,s,a){for(var r=e.read_shift(a.biff==12?4:2),n=[],i=0;i!=r;++i)n.push((a.biff==12?gd:Xg)(e));return n}function eJ(e,s,a){var r=0,n=0;a.biff==12?(r=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),r=1+e.read_shift(2)),a.biff>=2&&a.biff<8&&(--r,--n==0&&(n=256));for(var i=0,l=[];i!=r&&(l[i]=[]);++i)for(var o=0;o!=n;++o)l[i][o]=XK(e,a.biff);return l}function tJ(e,s,a){var r=e.read_shift(1)>>>5&3,n=!a||a.biff>=8?4:2,i=e.read_shift(n);switch(a.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[r,0,i]}function sJ(e,s,a){if(a.biff==5)return aJ(e);var r=e.read_shift(1)>>>5&3,n=e.read_shift(2),i=e.read_shift(4);return[r,n,i]}function aJ(e){var s=e.read_shift(1)>>>5&3,a=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[s,a,r]}function rJ(e,s,a){var r=e.read_shift(1)>>>5&3;e.l+=a&&a.biff==2?3:4;var n=e.read_shift(a&&a.biff==2?1:2);return[r,n]}function nJ(e,s,a){var r=e.read_shift(1)>>>5&3,n=e.read_shift(a&&a.biff==2?1:2);return[r,n]}function iJ(e,s,a){var r=e.read_shift(1)>>>5&3;return e.l+=4,a.biff<8&&e.l--,a.biff==12&&(e.l+=2),[r]}function lJ(e,s,a){var r=(e[e.l++]&96)>>5,n=e.read_shift(2),i=4;if(a)switch(a.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[r,n]}var oJ=Jr,cJ=Jr,dJ=Jr;function dh(e,s,a){return e.l+=2,[wK(e)]}function WA(e){return e.l+=6,[]}var uJ=dh,mJ=WA,fJ=WA,hJ=dh;function RL(e){return e.l+=2,[Za(e),e.read_shift(2)&1]}var xJ=dh,pJ=RL,gJ=WA,bJ=dh,vJ=dh,yJ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function NJ(e){e.l+=2;var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(4),n=e.read_shift(2),i=e.read_shift(2),l=yJ[a>>2&31];return{ixti:s,coltype:a&3,rt:l,idx:r,c:n,C:i}}function jJ(e){return e.l+=2,[e.read_shift(4)]}function wJ(e,s,a){return e.l+=5,e.l+=2,e.l+=a.biff==2?1:4,["PTGSHEET"]}function SJ(e,s,a){return e.l+=a.biff==2?4:5,["PTGENDSHEET"]}function AJ(e){var s=e.read_shift(1)>>>5&3,a=e.read_shift(2);return[s,a]}function EJ(e){var s=e.read_shift(1)>>>5&3,a=e.read_shift(2);return[s,a]}function CJ(e){return e.l+=4,[0,0]}var _O={1:{n:"PtgExp",f:GK},2:{n:"PtgTbl",f:dJ},3:{n:"PtgAdd",f:Ja},4:{n:"PtgSub",f:Ja},5:{n:"PtgMul",f:Ja},6:{n:"PtgDiv",f:Ja},7:{n:"PtgPower",f:Ja},8:{n:"PtgConcat",f:Ja},9:{n:"PtgLt",f:Ja},10:{n:"PtgLe",f:Ja},11:{n:"PtgEq",f:Ja},12:{n:"PtgGe",f:Ja},13:{n:"PtgGt",f:Ja},14:{n:"PtgNe",f:Ja},15:{n:"PtgIsect",f:Ja},16:{n:"PtgUnion",f:Ja},17:{n:"PtgRange",f:Ja},18:{n:"PtgUplus",f:Ja},19:{n:"PtgUminus",f:Ja},20:{n:"PtgPercent",f:Ja},21:{n:"PtgParen",f:Ja},22:{n:"PtgMissArg",f:Ja},23:{n:"PtgStr",f:YK},26:{n:"PtgSheet",f:wJ},27:{n:"PtgEndSheet",f:SJ},28:{n:"PtgErr",f:WK},29:{n:"PtgBool",f:KK},30:{n:"PtgInt",f:QK},31:{n:"PtgNum",f:JK},32:{n:"PtgArray",f:OK},33:{n:"PtgFunc",f:$K},34:{n:"PtgFuncVar",f:qK},35:{n:"PtgName",f:tJ},36:{n:"PtgRef",f:UK},37:{n:"PtgArea",f:EK},38:{n:"PtgMemArea",f:rJ},39:{n:"PtgMemErr",f:oJ},40:{n:"PtgMemNoMem",f:cJ},41:{n:"PtgMemFunc",f:nJ},42:{n:"PtgRefErr",f:iJ},43:{n:"PtgAreaErr",f:TK},44:{n:"PtgRefN",f:zK},45:{n:"PtgAreaN",f:kK},46:{n:"PtgMemAreaN",f:AJ},47:{n:"PtgMemNoMemN",f:EJ},57:{n:"PtgNameX",f:sJ},58:{n:"PtgRef3d",f:BK},59:{n:"PtgArea3d",f:CK},60:{n:"PtgRefErr3d",f:lJ},61:{n:"PtgAreaErr3d",f:_K},255:{}},TJ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},_J={1:{n:"PtgElfLel",f:RL},2:{n:"PtgElfRw",f:bJ},3:{n:"PtgElfCol",f:uJ},6:{n:"PtgElfRwV",f:vJ},7:{n:"PtgElfColV",f:hJ},10:{n:"PtgElfRadical",f:xJ},11:{n:"PtgElfRadicalS",f:gJ},13:{n:"PtgElfColS",f:mJ},15:{n:"PtgElfColSV",f:fJ},16:{n:"PtgElfRadicalLel",f:pJ},25:{n:"PtgList",f:NJ},29:{n:"PtgSxName",f:jJ},255:{}},kJ={0:{n:"PtgAttrNoop",f:CJ},1:{n:"PtgAttrSemi",f:MK},2:{n:"PtgAttrIf",f:PK},4:{n:"PtgAttrChoose",f:IK},8:{n:"PtgAttrGoto",f:RK},16:{n:"PtgAttrSum",f:VK},32:{n:"PtgAttrBaxcel",f:TO},33:{n:"PtgAttrBaxcel",f:TO},64:{n:"PtgAttrSpace",f:LK},65:{n:"PtgAttrSpaceSemi",f:FK},128:{n:"PtgAttrIfError",f:DK},255:{}};function uh(e,s,a,r){if(r.biff<8)return Jr(e,s);for(var n=e.l+s,i=[],l=0;l!==a.length;++l)switch(a[l][0]){case"PtgArray":a[l][1]=eJ(e,0,r),i.push(a[l][1]);break;case"PtgMemArea":a[l][2]=ZK(e,a[l][1],r),i.push(a[l][2]);break;case"PtgExp":r&&r.biff==12&&(a[l][1][1]=e.read_shift(4),i.push(a[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[l][0]}return s=n-e.l,s!==0&&i.push(Jr(e,s)),i}function mh(e,s,a){for(var r=e.l+s,n,i,l=[];r!=e.l;)s=r-e.l,i=e[e.l],n=_O[i]||_O[TJ[i]],(i===24||i===25)&&(n=(i===24?_J:kJ)[e[e.l+1]]),!n||!n.f?Jr(e,s):l.push([n.n,n.f(e,s,a)]);return l}function OJ(e){for(var s=[],a=0;a<e.length;++a){for(var r=e[a],n=[],i=0;i<r.length;++i){var l=r[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var IJ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function RJ(e,s){if(!e&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function PL(e,s,a){if(!e)return"SH33TJSERR0";if(a.biff>8&&(!e.XTI||!e.XTI[s]))return e.SheetNames[s];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[s];if(a.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":e.XTI[s-1];if(!r)return"SH33TJSERR1";var n="";if(a.biff>8)switch(e[r[0]][0]){case 357:return n=r[1]==-1?"#REF":e.SheetNames[r[1]],r[1]==r[2]?n:n+":"+e.SheetNames[r[2]];case 358:return a.SID!=null?e.SheetNames[a.SID]:"SH33TJSSAME"+e[r[0]][0];case 355:default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return n=r[1]==-1?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?n:n+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[r[0]][0][3]?(n=r[1]==-1?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?n:n+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function kO(e,s,a){var r=PL(e,s,a);return r=="#REF"?r:RJ(r,a)}function $r(e,s,a,r,n){var i=n&&n.biff||8,l={s:{c:0,r:0}},o=[],d,u,h,f=0,x=0,p,v="";if(!e[0]||!e[0][0])return"";for(var b=-1,y="",j=0,w=e[0].length;j<w;++j){var S=e[0][j];switch(S[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=o.pop(),u=o.pop(),b>=0){switch(e[0][b][1][0]){case 0:y=Pa(" ",e[0][b][1][1]);break;case 1:y=Pa("\r",e[0][b][1][1]);break;default:if(y="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}u=u+y,b=-1}o.push(u+IJ[S[0]]+d);break;case"PtgIsect":d=o.pop(),u=o.pop(),o.push(u+" "+d);break;case"PtgUnion":d=o.pop(),u=o.pop(),o.push(u+","+d);break;case"PtgRange":d=o.pop(),u=o.pop(),o.push(u+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=qm(S[1][1],l,n),o.push(Hm(h,i));break;case"PtgRefN":h=a?qm(S[1][1],a,n):S[1][1],o.push(Hm(h,i));break;case"PtgRef3d":f=S[1][1],h=qm(S[1][2],l,n),v=kO(r,f,n),o.push(v+"!"+Hm(h,i));break;case"PtgFunc":case"PtgFuncVar":var O=S[1][0],_=S[1][1];O||(O=0),O&=127;var E=O==0?[]:o.slice(-O);o.length-=O,_==="User"&&(_=E.shift()),o.push(_+"("+E.join(",")+")");break;case"PtgBool":o.push(S[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(S[1]);break;case"PtgNum":o.push(String(S[1]));break;case"PtgStr":o.push('"'+S[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(S[1]);break;case"PtgAreaN":p=nO(S[1][1],a?{s:a}:l,n),o.push(s1(p,n));break;case"PtgArea":p=nO(S[1][1],l,n),o.push(s1(p,n));break;case"PtgArea3d":f=S[1][1],p=S[1][2],v=kO(r,f,n),o.push(v+"!"+s1(p,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=S[1][2];var A=(r.names||[])[x-1]||(r[0]||[])[x],D=A?A.Name:"SH33TJSNAME"+String(x);D&&D.slice(0,6)=="_xlfn."&&!n.xlfn&&(D=D.slice(6)),o.push(D);break;case"PtgNameX":var L=S[1][1];x=S[1][2];var B;if(n.biff<=5)L<0&&(L=-L),r[L]&&(B=r[L][x]);else{var I="";if(((r[L]||[])[0]||[])[0]==14849||(((r[L]||[])[0]||[])[0]==1025?r[L][x]&&r[L][x].itab>0&&(I=r.SheetNames[r[L][x].itab-1]+"!"):I=r.SheetNames[x-1]+"!"),r[L]&&r[L][x])I+=r[L][x].Name;else if(r[0]&&r[0][x])I+=r[0][x].Name;else{var T=(PL(r,L,n)||"").split(";;");T[x-1]?I=T[x-1]:I+="SH33TJSERRX"}o.push(I);break}B||(B={Name:"SH33TJSERRY"}),o.push(B.Name);break;case"PtgParen":var z="(",k=")";if(b>=0){switch(y="",e[0][b][1][0]){case 2:z=Pa(" ",e[0][b][1][1])+z;break;case 3:z=Pa("\r",e[0][b][1][1])+z;break;case 4:k=Pa(" ",e[0][b][1][1])+k;break;case 5:k=Pa("\r",e[0][b][1][1])+k;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}b=-1}o.push(z+o.pop()+k);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:S[1][1],r:S[1][0]};var F={c:a.c,r:a.r};if(r.sharedf[Vt(h)]){var P=r.sharedf[Vt(h)];o.push($r(P,l,F,r,n))}else{var G=!1;for(d=0;d!=r.arrayf.length;++d)if(u=r.arrayf[d],!(h.c<u[0].s.c||h.c>u[0].e.c)&&!(h.r<u[0].s.r||h.r>u[0].e.r)){o.push($r(u[1],l,F,r,n)),G=!0;break}G||o.push(S[1])}break;case"PtgArray":o.push("{"+OJ(S[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+S[1].idx+"[#"+S[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(S));default:throw new Error("Unrecognized Formula Token: "+String(S))}var Y=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&b>=0&&Y.indexOf(e[0][j][0])==-1){S=e[0][b];var W=!0;switch(S[1][0]){case 4:W=!1;case 0:y=Pa(" ",S[1][1]);break;case 5:W=!1;case 1:y=Pa("\r",S[1][1]);break;default:if(y="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+S[1][0])}o.push((W?y:"")+o.pop()+(W?"":y)),b=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function PJ(e,s,a){var r=e.l+s,n=a.biff==2?1:2,i,l=e.read_shift(n);if(l==65535)return[[],Jr(e,s-2)];var o=mh(e,l,a);return s!==l+n&&(i=uh(e,s-l-n,o,a)),e.l=r,[o,i]}function DJ(e,s,a){var r=e.l+s,n=a.biff==2?1:2,i,l=e.read_shift(n);if(l==65535)return[[],Jr(e,s-2)];var o=mh(e,l,a);return s!==l+n&&(i=uh(e,s-l-n,o,a)),e.l=r,[o,i]}function MJ(e,s,a,r){var n=e.l+s,i=mh(e,r,a),l;return n!==e.l&&(l=uh(e,n-e.l,i,a)),[i,l]}function LJ(e,s,a){var r=e.l+s,n,i=e.read_shift(2),l=mh(e,i,a);return i==65535?[[],Jr(e,s-2)]:(s!==i+2&&(n=uh(e,r-i-2,l,a)),[l,n])}function FJ(e){var s;if(kl(e,e.l+6)!==65535)return[Gr(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return s=e[e.l+2]===1,e.l+=8,[s,"b"];case 2:return s=e[e.l+2],e.l+=8,[s,"e"];case 3:return e.l+=8,["","s"]}return[]}function UJ(e){if(e==null){var s=Ye(8);return s.write_shift(1,3),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,65535),s}else if(typeof e=="number")return ed(e);return ed(0)}function l1(e,s,a){var r=e.l+s,n=ll(e);a.biff==2&&++e.l;var i=FJ(e),l=e.read_shift(1);a.biff!=2&&(e.read_shift(1),a.biff>=5&&e.read_shift(4));var o=DJ(e,r-e.l,a);return{cell:n,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function zJ(e,s,a,r,n){var i=sd(s,a,n),l=UJ(e.v),o=Ye(6),d=33;o.write_shift(2,d),o.write_shift(4,0);for(var u=Ye(e.bf.length),h=0;h<e.bf.length;++h)u[h]=e.bf[h];var f=vr([i,l,o,u]);return f}function Zg(e,s,a){var r=e.read_shift(4),n=mh(e,r,a),i=e.read_shift(4),l=i>0?uh(e,i,n,a):null;return[n,l]}var BJ=Zg,eb=Zg,$J=Zg,qJ=Zg,HJ={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},DL={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},VJ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function OO(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,a){return a.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function GJ(e){var s="of:="+e.replace(VA,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return s.replace(/;/g,"|").replace(/,/g,";")}function o1(e){var s=e.split(":"),a=s[0].split(".")[0];return[a,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}function WJ(e){return e.replace(/\./,"!")}var Gm={},Cu={},Wm=typeof Map<"u";function QA(e,s,a){var r=0,n=e.length;if(a){if(Wm?a.has(s):Object.prototype.hasOwnProperty.call(a,s)){for(var i=Wm?a.get(s):a[s];r<i.length;++r)if(e[i[r]].t===s)return e.Count++,i[r]}}else for(;r<n;++r)if(e[r].t===s)return e.Count++,r;return e[n]={t:s},e.Count++,e.Unique++,a&&(Wm?(a.has(s)||a.set(s,[]),a.get(s).push(n)):(Object.prototype.hasOwnProperty.call(a,s)||(a[s]=[]),a[s].push(n))),n}function tb(e,s){var a={min:e+1,max:e+1},r=-1;return s.MDW&&(qr=s.MDW),s.width!=null?a.customWidth=1:s.wpx!=null?r=xf(s.wpx):s.wch!=null&&(r=s.wch),r>-1?(a.width=zp(r),a.customWidth=1):s.width!=null&&(a.width=s.width),s.hidden&&(a.hidden=!0),s.level!=null&&(a.outlineLevel=a.level=s.level),a}function Hc(e,s){if(e){var a=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(a=[1,1,1,1,.5,.5]),e.left==null&&(e.left=a[0]),e.right==null&&(e.right=a[1]),e.top==null&&(e.top=a[2]),e.bottom==null&&(e.bottom=a[3]),e.header==null&&(e.header=a[4]),e.footer==null&&(e.footer=a[5])}}function tc(e,s,a){var r=a.revssf[s.z!=null?s.z:"General"],n=60,i=e.length;if(r==null&&a.ssf){for(;n<392;++n)if(a.ssf[n]==null){Dl(s.z,n),a.ssf[n]=s.z,a.revssf[s.z]=r=n;break}}for(n=0;n!=i;++n)if(e[n].numFmtId===r)return n;return e[i]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function ML(e,s,a,r,n,i){try{r.cellNF&&(e.z=Ht[s])}catch(o){if(r.WTF)throw o}if(!(e.t==="z"&&!r.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ya(e.v)),(!r||r.cellText!==!1)&&e.t!=="z")try{if(Ht[s]==null&&Dl(H9[s]||"General",s),e.t==="e")e.w=e.w||Jl[e.v];else if(s===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=of(e.v);else if(e.t==="d"){var l=hr(e.v);(l|0)===l?e.w=l.toString(10):e.w=of(l)}else{if(e.v===void 0)return"";e.w=Xc(e.v,Cu)}else e.t==="d"?e.w=hi(s,hr(e.v),Cu):e.w=hi(s,e.v,Cu)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&a!=null)try{e.s=i.Fills[a],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Up(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Up(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&i.Fills)throw o}}}function QJ(e,s,a){if(e&&e["!ref"]){var r=Rs(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+a+"): "+e["!ref"])}}function KJ(e,s){var a=Rs(s);a.s.r<=a.e.r&&a.s.c<=a.e.c&&a.s.r>=0&&a.s.c>=0&&(e["!ref"]=rs(a))}var JJ=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,YJ=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,XJ=/<(?:\w:)?hyperlink [^>]*>/mg,ZJ=/"(\w*:\w*)"/,eY=/<(?:\w:)?col\b[^>]*[\/]?>/g,tY=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,sY=/<(?:\w:)?pageMargins[^>]*\/>/g,LL=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,aY=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,rY=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function nY(e,s,a,r,n,i,l){if(!e)return e;r||(r={"!id":{}});var o=s.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",h="",f=e.match(YJ);f?(u=e.slice(0,f.index),h=e.slice(f.index+f[0].length)):u=h=e;var x=u.match(LL);x?KA(x[0],o,n,a):(x=u.match(aY))&&lY(x[0],x[1]||"",o,n,a);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var v=u.slice(p,p+50).match(ZJ);v&&KJ(o,v[1])}var b=u.match(rY);b&&b[1]&&yY(b[1],n);var y=[];if(s.cellStyles){var j=u.match(eY);j&&xY(y,j)}f&&wY(f[1],o,s,d,i,l);var w=h.match(tY);w&&(o["!autofilter"]=gY(w[0]));var S=[],O=h.match(JJ);if(O)for(p=0;p!=O.length;++p)S[p]=Rs(O[p].slice(O[p].indexOf('"')+1));var _=h.match(XJ);_&&mY(o,_,r);var E=h.match(sY);if(E&&(o["!margins"]=fY(Qt(E[0]))),!o["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(o["!ref"]=rs(d)),s.sheetRows>0&&o["!ref"]){var A=Rs(o["!ref"]);s.sheetRows<=+A.e.r&&(A.e.r=s.sheetRows-1,A.e.r>d.e.r&&(A.e.r=d.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>d.e.c&&(A.e.c=d.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),o["!fullref"]=o["!ref"],o["!ref"]=rs(A))}return y.length>0&&(o["!cols"]=y),S.length>0&&(o["!merges"]=S),o}function iY(e){if(e.length===0)return"";for(var s='<mergeCells count="'+e.length+'">',a=0;a!=e.length;++a)s+='<mergeCell ref="'+rs(e[a])+'"/>';return s+"</mergeCells>"}function KA(e,s,a,r){var n=Qt(e);a.Sheets[r]||(a.Sheets[r]={}),n.codeName&&(a.Sheets[r].CodeName=Os(da(n.codeName)))}function lY(e,s,a,r,n){KA(e.slice(0,e.indexOf(">")),a,r,n)}function oY(e,s,a,r,n){var i=!1,l={},o=null;if(r.bookType!=="xlsx"&&s.vbaraw){var d=s.SheetNames[a];try{s.Workbook&&(d=s.Workbook.Sheets[a].CodeName||d)}catch{}i=!0,l.codeName=Ji(ea(d))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+ut("outlinePr",null,u)}!i&&!o||(n[n.length]=ut("sheetPr",o,l))}var cY=["objects","scenarios","selectLockedCells","selectUnlockedCells"],dY=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function uY(e){var s={sheet:1};return cY.forEach(function(a){e[a]!=null&&e[a]&&(s[a]="1")}),dY.forEach(function(a){e[a]!=null&&!e[a]&&(s[a]="0")}),e.password&&(s.password=$A(e.password).toString(16).toUpperCase()),ut("sheetProtection",null,s)}function mY(e,s,a){for(var r=Array.isArray(e),n=0;n!=s.length;++n){var i=Qt(da(s[n]),!0);if(!i.ref)return;var l=((a||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+Os(i.location))):(i.Target="#"+Os(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Rs(i.ref),d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var h=Vt({c:u,r:d});r?(e[d]||(e[d]=[]),e[d][u]||(e[d][u]={t:"z",v:void 0}),e[d][u].l=i):(e[h]||(e[h]={t:"z",v:void 0}),e[h].l=i)}}}function fY(e){var s={};return["left","right","top","bottom","header","footer"].forEach(function(a){e[a]&&(s[a]=parseFloat(e[a]))}),s}function hY(e){return Hc(e),ut("pageMargins",null,e)}function xY(e,s){for(var a=!1,r=0;r!=s.length;++r){var n=Qt(s[r],!0);n.hidden&&(n.hidden=ba(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!a&&n.width&&(a=!0,qA(n.width)),Ho(n);i<=l;)e[i++]=Na(n)}}function pY(e,s){for(var a=["<cols>"],r,n=0;n!=s.length;++n)(r=s[n])&&(a[a.length]=ut("col",null,tb(n,r)));return a[a.length]="</cols>",a.join("")}function gY(e){var s={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return s}function bY(e,s,a,r){var n=typeof e.ref=="string"?e.ref:rs(e.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var i=a.Workbook.Names,l=vn(n);l.s.r==l.e.r&&(l.e.r=vn(s["!ref"]).e.r,n=rs(l));for(var o=0;o<i.length;++o){var d=i[o];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==r){d.Ref="'"+a.SheetNames[r]+"'!"+n;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+n}),ut("autoFilter",null,{ref:n})}var vY=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function yY(e,s){s.Views||(s.Views=[{}]),(e.match(vY)||[]).forEach(function(a,r){var n=Qt(a);s.Views[r]||(s.Views[r]={}),+n.zoomScale&&(s.Views[r].zoom=+n.zoomScale),ba(n.rightToLeft)&&(s.Views[r].RTL=!0)})}function NY(e,s,a,r){var n={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),ut("sheetViews",ut("sheetView",null,n),{})}function jY(e,s,a,r){if(e.c&&a["!comments"].push([s,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var n="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=Jl[e.v];break;case"d":r&&r.cellDates?n=ya(e.v,-1).toISOString():(e=Na(e),e.t="n",n=""+(e.v=hr(ya(e.v)))),typeof e.z>"u"&&(e.z=Ht[14]);break;default:n=e.v;break}var o=Or("v",ea(n)),d={r:s},u=tc(r.cellXfs,e,r);switch(u!==0&&(d.s=u),e.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Or("v",""+QA(r.Strings,e.v,r.revStrings)),d.t="s";break}d.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var h=e.F&&e.F.slice(0,s.length)==s?{t:"array",ref:e.F}:null;o=ut("f",ea(e.f),h)+(e.v!=null?o:"")}return e.l&&a["!links"].push([s,e.l]),e.D&&(d.cm=1),ut("c",o,d)}var wY=(function(){var e=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,a=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=cf("v"),l=cf("f");return function(d,u,h,f,x,p){for(var v=0,b="",y=[],j=[],w=0,S=0,O=0,_="",E,A,D=0,L=0,B,I,T=0,z=0,k=Array.isArray(p.CellXf),F,P=[],G=[],Y=Array.isArray(u),W=[],ee={},H=!1,M=!!h.sheetStubs,X=d.split(s),K=0,Q=X.length;K!=Q;++K){b=X[K].trim();var se=b.length;if(se!==0){var V=0;e:for(v=0;v<se;++v)switch(b[v]){case">":if(b[v-1]!="/"){++v;break e}if(h&&h.cellStyles){if(A=Qt(b.slice(V,v),!0),D=A.r!=null?parseInt(A.r,10):D+1,L=-1,h.sheetRows&&h.sheetRows<D)continue;ee={},H=!1,A.ht&&(H=!0,ee.hpt=parseFloat(A.ht),ee.hpx=Lu(ee.hpt)),A.hidden=="1"&&(H=!0,ee.hidden=!0),A.outlineLevel!=null&&(H=!0,ee.level=+A.outlineLevel),H&&(W[D-1]=ee)}break;case"<":V=v;break}if(V>=v)break;if(A=Qt(b.slice(V,v),!0),D=A.r!=null?parseInt(A.r,10):D+1,L=-1,!(h.sheetRows&&h.sheetRows<D)){f.s.r>D-1&&(f.s.r=D-1),f.e.r<D-1&&(f.e.r=D-1),h&&h.cellStyles&&(ee={},H=!1,A.ht&&(H=!0,ee.hpt=parseFloat(A.ht),ee.hpx=Lu(ee.hpt)),A.hidden=="1"&&(H=!0,ee.hidden=!0),A.outlineLevel!=null&&(H=!0,ee.level=+A.outlineLevel),H&&(W[D-1]=ee)),y=b.slice(v).split(e);for(var te=0;te!=y.length&&y[te].trim().charAt(0)=="<";++te);for(y=y.slice(te),v=0;v!=y.length;++v)if(b=y[v].trim(),b.length!==0){if(j=b.match(a),w=v,S=0,O=0,b="<c "+(b.slice(0,1)=="<"?">":"")+b,j!=null&&j.length===2){for(w=0,_=j[1],S=0;S!=_.length&&!((O=_.charCodeAt(S)-64)<1||O>26);++S)w=26*w+O;--w,L=w}else++L;for(S=0;S!=b.length&&b.charCodeAt(S)!==62;++S);if(++S,A=Qt(b.slice(0,S),!0),A.r||(A.r=Vt({r:D-1,c:L})),_=b.slice(S),E={t:""},(j=_.match(i))!=null&&j[1]!==""&&(E.v=Os(j[1])),h.cellFormula){if((j=_.match(l))!=null&&j[1]!==""){if(E.f=Os(da(j[1])).replace(/\r\n/g,`
`),h.xlfn||(E.f=CO(E.f)),j[0].indexOf('t="array"')>-1)E.F=(_.match(n)||[])[1],E.F.indexOf(":")>-1&&P.push([Rs(E.F),E.F]);else if(j[0].indexOf('t="shared"')>-1){I=Qt(j[0]);var Z=Os(da(j[1]));h.xlfn||(Z=CO(Z)),G[parseInt(I.si,10)]=[I,Z,A.r]}}else(j=_.match(/<f[^>]*\/>/))&&(I=Qt(j[0]),G[I.si]&&(E.f=vK(G[I.si][1],G[I.si][2],A.r)));var ue=Oa(A.r);for(S=0;S<P.length;++S)ue.r>=P[S][0].s.r&&ue.r<=P[S][0].e.r&&ue.c>=P[S][0].s.c&&ue.c<=P[S][0].e.c&&(E.F=P[S][1])}if(A.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(M)E.t="z";else continue;else E.t=A.t||"n";switch(f.s.c>L&&(f.s.c=L),f.e.c<L&&(f.e.c=L),E.t){case"n":if(E.v==""||E.v==null){if(!M)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!M)continue;E.t="z"}else B=Gm[parseInt(E.v,10)],E.v=B.t,E.r=B.r,h.cellHTML&&(E.h=B.h);break;case"str":E.t="s",E.v=E.v!=null?da(E.v):"",h.cellHTML&&(E.h=CA(E.v));break;case"inlineStr":j=_.match(r),E.t="s",j!=null&&(B=BA(j[1]))?(E.v=B.t,h.cellHTML&&(E.h=B.h)):E.v="";break;case"b":E.v=ba(E.v);break;case"d":h.cellDates?E.v=ya(E.v,1):(E.v=hr(ya(E.v,1)),E.t="n");break;case"e":(!h||h.cellText!==!1)&&(E.w=E.v),E.v=U8[E.v];break}if(T=z=0,F=null,k&&A.s!==void 0&&(F=p.CellXf[A.s],F!=null&&(F.numFmtId!=null&&(T=F.numFmtId),h.cellStyles&&F.fillId!=null&&(z=F.fillId))),ML(E,T,z,h,x,p),h.cellDates&&k&&E.t=="n"&&d0(Ht[T])&&(E.t="d",E.v=Yg(E.v)),A.cm&&h.xlmeta){var re=(h.xlmeta.Cell||[])[+A.cm-1];re&&re.type=="XLDAPR"&&(E.D=!0)}if(Y){var J=Oa(A.r);u[J.r]||(u[J.r]=[]),u[J.r][J.c]=E}else u[A.r]=E}}}}W.length>0&&(u["!rows"]=W)}})();function SY(e,s,a,r){var n=[],i=[],l=Rs(e["!ref"]),o="",d,u="",h=[],f=0,x=0,p=e["!rows"],v=Array.isArray(e),b={r:u},y,j=-1;for(x=l.s.c;x<=l.e.c;++x)h[x]=ka(x);for(f=l.s.r;f<=l.e.r;++f){for(i=[],u=Ha(f),x=l.s.c;x<=l.e.c;++x){d=h[x]+u;var w=v?(e[f]||[])[x]:e[d];w!==void 0&&(o=jY(w,d,e,s))!=null&&i.push(o)}(i.length>0||p&&p[f])&&(b={r:u},p&&p[f]&&(y=p[f],y.hidden&&(b.hidden=1),j=-1,y.hpx?j=pf(y.hpx):y.hpt&&(j=y.hpt),j>-1&&(b.ht=j,b.customHeight=1),y.level&&(b.outlineLevel=y.level)),n[n.length]=ut("row",i.join(""),b))}if(p)for(;f<p.length;++f)p&&p[f]&&(b={r:f+1},y=p[f],y.hidden&&(b.hidden=1),j=-1,y.hpx?j=pf(y.hpx):y.hpt&&(j=y.hpt),j>-1&&(b.ht=j,b.customHeight=1),y.level&&(b.outlineLevel=y.level),n[n.length]=ut("row","",b));return n.join("")}function FL(e,s,a,r){var n=[Va,ut("worksheet",null,{xmlns:fd[0],"xmlns:r":cr.r})],i=a.SheetNames[e],l=0,o="",d=a.Sheets[i];d==null&&(d={});var u=d["!ref"]||"A1",h=Rs(u);if(h.e.c>16383||h.e.r>1048575){if(s.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),u=rs(h)}r||(r={}),d["!comments"]=[];var f=[];oY(d,a,e,s,n),n[n.length]=ut("dimension",null,{ref:u}),n[n.length]=NY(d,s,e,a),s.sheetFormat&&(n[n.length]=ut("sheetFormatPr",null,{defaultRowHeight:s.sheetFormat.defaultRowHeight||"16",baseColWidth:s.sheetFormat.baseColWidth||"10",outlineLevelRow:s.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(n[n.length]=pY(d,d["!cols"])),n[l=n.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(o=SY(d,s),o.length>0&&(n[n.length]=o)),n.length>l+1&&(n[n.length]="</sheetData>",n[l]=n[l].replace("/>",">")),d["!protect"]&&(n[n.length]=uY(d["!protect"])),d["!autofilter"]!=null&&(n[n.length]=bY(d["!autofilter"],d,a,e)),d["!merges"]!=null&&d["!merges"].length>0&&(n[n.length]=iY(d["!merges"]));var x=-1,p,v=-1;return d["!links"].length>0&&(n[n.length]="<hyperlinks>",d["!links"].forEach(function(b){b[1].Target&&(p={ref:b[0]},b[1].Target.charAt(0)!="#"&&(v=Zs(r,-1,ea(b[1].Target).replace(/#.*$/,""),ps.HLINK),p["r:id"]="rId"+v),(x=b[1].Target.indexOf("#"))>-1&&(p.location=ea(b[1].Target.slice(x+1))),b[1].Tooltip&&(p.tooltip=ea(b[1].Tooltip)),n[n.length]=ut("hyperlink",null,p))}),n[n.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(n[n.length]=hY(d["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&(n[n.length]=Or("ignoredErrors",ut("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(v=Zs(r,-1,"../drawings/drawing"+(e+1)+".xml",ps.DRAW),n[n.length]=ut("drawing",null,{"r:id":"rId"+v}),d["!drawing"]=f),d["!comments"].length>0&&(v=Zs(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ps.VML),n[n.length]=ut("legacyDrawing",null,{"r:id":"rId"+v}),d["!legacy"]=v),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function AY(e,s){var a={},r=e.l+s;a.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=r,i&7&&(a.level=i&7),i&16&&(a.hidden=!0),i&32&&(a.hpt=n/20),a}function EY(e,s,a){var r=Ye(145),n=(a["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var i=320;n.hpx?i=pf(n.hpx)*20:n.hpt&&(i=n.hpt*20),r.write_shift(2,i),r.write_shift(1,0);var l=0;n.level&&(l|=n.level),n.hidden&&(l|=16),(n.hpx||n.hpt)&&(l|=32),r.write_shift(1,l),r.write_shift(1,0);var o=0,d=r.l;r.l+=4;for(var u={r:e,c:0},h=0;h<16;++h)if(!(s.s.c>h+1<<10||s.e.c<h<<10)){for(var f=-1,x=-1,p=h<<10;p<h+1<<10;++p){u.c=p;var v=Array.isArray(a)?(a[u.r]||[])[u.c]:a[Vt(u)];v&&(f<0&&(f=p),x=p)}f<0||(++o,r.write_shift(4,f),r.write_shift(4,x))}var b=r.l;return r.l=d,r.write_shift(4,o),r.l=b,r.length>r.l?r.slice(0,r.l):r}function CY(e,s,a,r){var n=EY(r,a,s);(n.length>17||(s["!rows"]||[])[r])&&at(e,0,n)}var TY=gd,_Y=f0;function kY(){}function OY(e,s){var a={},r=e[e.l];return++e.l,a.above=!(r&64),a.left=!(r&128),e.l+=18,a.name=PH(e),a}function IY(e,s,a){a==null&&(a=Ye(84+4*e.length));var r=192;s&&(s.above&&(r&=-65),s.left&&(r&=-129)),a.write_shift(1,r);for(var n=1;n<3;++n)a.write_shift(1,0);return Mp({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),P8(e,a),a.slice(0,a.l)}function RY(e){var s=vi(e);return[s]}function PY(e,s,a){return a==null&&(a=Ye(8)),hd(s,a)}function DY(e){var s=xd(e);return[s]}function MY(e,s,a){return a==null&&(a=Ye(4)),pd(s,a)}function LY(e){var s=vi(e),a=e.read_shift(1);return[s,a,"b"]}function FY(e,s,a){return a==null&&(a=Ye(9)),hd(s,a),a.write_shift(1,e.v?1:0),a}function UY(e){var s=xd(e),a=e.read_shift(1);return[s,a,"b"]}function zY(e,s,a){return a==null&&(a=Ye(5)),pd(s,a),a.write_shift(1,e.v?1:0),a}function BY(e){var s=vi(e),a=e.read_shift(1);return[s,a,"e"]}function $Y(e,s,a){return a==null&&(a=Ye(9)),hd(s,a),a.write_shift(1,e.v),a}function qY(e){var s=xd(e),a=e.read_shift(1);return[s,a,"e"]}function HY(e,s,a){return a==null&&(a=Ye(8)),pd(s,a),a.write_shift(1,e.v),a.write_shift(2,0),a.write_shift(1,0),a}function VY(e){var s=vi(e),a=e.read_shift(4);return[s,a,"s"]}function GY(e,s,a){return a==null&&(a=Ye(12)),hd(s,a),a.write_shift(4,s.v),a}function WY(e){var s=xd(e),a=e.read_shift(4);return[s,a,"s"]}function QY(e,s,a){return a==null&&(a=Ye(8)),pd(s,a),a.write_shift(4,s.v),a}function KY(e){var s=vi(e),a=Gr(e);return[s,a,"n"]}function JY(e,s,a){return a==null&&(a=Ye(16)),hd(s,a),ed(e.v,a),a}function UL(e){var s=xd(e),a=Gr(e);return[s,a,"n"]}function YY(e,s,a){return a==null&&(a=Ye(12)),pd(s,a),ed(e.v,a),a}function XY(e){var s=vi(e),a=MA(e);return[s,a,"n"]}function ZY(e,s,a){return a==null&&(a=Ye(12)),hd(s,a),D8(e.v,a),a}function eX(e){var s=xd(e),a=MA(e);return[s,a,"n"]}function tX(e,s,a){return a==null&&(a=Ye(8)),pd(s,a),D8(e.v,a),a}function sX(e){var s=vi(e),a=RA(e);return[s,a,"is"]}function aX(e){var s=vi(e),a=Kr(e);return[s,a,"str"]}function rX(e,s,a){return a==null&&(a=Ye(12+4*e.v.length)),hd(s,a),yr(e.v,a),a.length>a.l?a.slice(0,a.l):a}function nX(e){var s=xd(e),a=Kr(e);return[s,a,"str"]}function iX(e,s,a){return a==null&&(a=Ye(8+4*e.v.length)),pd(s,a),yr(e.v,a),a.length>a.l?a.slice(0,a.l):a}function lX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=e.read_shift(1),l=[n,i,"b"];if(a.cellFormula){e.l+=2;var o=eb(e,r-e.l,a);l[3]=$r(o,null,n,a.supbooks,a)}else e.l=r;return l}function oX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=e.read_shift(1),l=[n,i,"e"];if(a.cellFormula){e.l+=2;var o=eb(e,r-e.l,a);l[3]=$r(o,null,n,a.supbooks,a)}else e.l=r;return l}function cX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=Gr(e),l=[n,i,"n"];if(a.cellFormula){e.l+=2;var o=eb(e,r-e.l,a);l[3]=$r(o,null,n,a.supbooks,a)}else e.l=r;return l}function dX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=Kr(e),l=[n,i,"str"];if(a.cellFormula){e.l+=2;var o=eb(e,r-e.l,a);l[3]=$r(o,null,n,a.supbooks,a)}else e.l=r;return l}var uX=gd,mX=f0;function fX(e,s){return s==null&&(s=Ye(4)),s.write_shift(4,e),s}function hX(e,s){var a=e.l+s,r=gd(e),n=PA(e),i=Kr(e),l=Kr(e),o=Kr(e);e.l=a;var d={rfx:r,relId:n,loc:i,display:o};return l&&(d.Tooltip=l),d}function xX(e,s){var a=Ye(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));f0({s:Oa(e[0]),e:Oa(e[0])},a),DA("rId"+s,a);var r=e[1].Target.indexOf("#"),n=r==-1?"":e[1].Target.slice(r+1);return yr(n||"",a),yr(e[1].Tooltip||"",a),yr("",a),a.slice(0,a.l)}function pX(){}function gX(e,s,a){var r=e.l+s,n=M8(e),i=e.read_shift(1),l=[n];if(l[2]=i,a.cellFormula){var o=BJ(e,r-e.l,a);l[1]=o}else e.l=r;return l}function bX(e,s,a){var r=e.l+s,n=gd(e),i=[n];if(a.cellFormula){var l=qJ(e,r-e.l,a);i[1]=l,e.l=r}else e.l=r;return i}function vX(e,s,a){a==null&&(a=Ye(18));var r=tb(e,s);a.write_shift(-4,e),a.write_shift(-4,e),a.write_shift(4,(r.width||10)*256),a.write_shift(4,0);var n=0;return s.hidden&&(n|=1),typeof r.width=="number"&&(n|=2),s.level&&(n|=s.level<<8),a.write_shift(2,n),a}var zL=["left","right","top","bottom","header","footer"];function yX(e){var s={};return zL.forEach(function(a){s[a]=Gr(e)}),s}function NX(e,s){return s==null&&(s=Ye(48)),Hc(e),zL.forEach(function(a){ed(e[a],s)}),s}function jX(e){var s=e.read_shift(2);return e.l+=28,{RTL:s&32}}function wX(e,s,a){a==null&&(a=Ye(30));var r=924;return(((s||{}).Views||[])[0]||{}).RTL&&(r|=32),a.write_shift(2,r),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function SX(e){var s=Ye(24);return s.write_shift(4,4),s.write_shift(4,1),f0(e,s),s}function AX(e,s){return s==null&&(s=Ye(66)),s.write_shift(2,e.password?$A(e.password):0),s.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?s.write_shift(4,e[a[0]]!=null&&!e[a[0]]?1:0):s.write_shift(4,e[a[0]]!=null&&e[a[0]]?0:1)}),s}function EX(){}function CX(){}function TX(e,s,a,r,n,i,l){if(!e)return e;var o=s||{};r||(r={"!id":{}});var d=o.dense?[]:{},u,h={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,x=!1,p,v,b,y,j,w,S,O,_,E=[];o.biff=12,o["!row"]=0;var A=0,D=!1,L=[],B={},I=o.supbooks||n.supbooks||[[]];if(I.sharedf=B,I.arrayf=L,I.SheetNames=n.SheetNames||n.Sheets.map(function(Y){return Y.name}),!o.supbooks&&(o.supbooks=I,n.Names))for(var T=0;T<n.Names.length;++T)I[0][T+1]=n.Names[T];var z=[],k=[],F=!1;gf[16]={n:"BrtShortReal",f:UL};var P;if(Kl(e,function(W,ee,H){if(!x)switch(H){case 148:u=W;break;case 0:p=W,o.sheetRows&&o.sheetRows<=p.r&&(x=!0),O=Ha(y=p.r),o["!row"]=p.r,(W.hidden||W.hpt||W.level!=null)&&(W.hpt&&(W.hpx=Lu(W.hpt)),k[W.r]=W);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:W[2]},W[2]){case"n":v.v=W[1];break;case"s":S=Gm[W[1]],v.v=S.t,v.r=S.r;break;case"b":v.v=!!W[1];break;case"e":v.v=W[1],o.cellText!==!1&&(v.w=Jl[v.v]);break;case"str":v.t="s",v.v=W[1];break;case"is":v.t="s",v.v=W[1].t;break}if((b=l.CellXf[W[0].iStyleRef])&&ML(v,b.numFmtId,null,o,i,l),j=W[0].c==-1?j+1:W[0].c,o.dense?(d[y]||(d[y]=[]),d[y][j]=v):d[ka(j)+O]=v,o.cellFormula){for(D=!1,A=0;A<L.length;++A){var M=L[A];p.r>=M[0].s.r&&p.r<=M[0].e.r&&j>=M[0].s.c&&j<=M[0].e.c&&(v.F=rs(M[0]),D=!0)}!D&&W.length>3&&(v.f=W[3])}if(h.s.r>p.r&&(h.s.r=p.r),h.s.c>j&&(h.s.c=j),h.e.r<p.r&&(h.e.r=p.r),h.e.c<j&&(h.e.c=j),o.cellDates&&b&&v.t=="n"&&d0(Ht[b.numFmtId])){var X=Dc(v.v);X&&(v.t="d",v.v=new Date(X.y,X.m-1,X.d,X.H,X.M,X.S,X.u))}P&&(P.type=="XLDAPR"&&(v.D=!0),P=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;v={t:"z",v:void 0},j=W[0].c==-1?j+1:W[0].c,o.dense?(d[y]||(d[y]=[]),d[y][j]=v):d[ka(j)+O]=v,h.s.r>p.r&&(h.s.r=p.r),h.s.c>j&&(h.s.c=j),h.e.r<p.r&&(h.e.r=p.r),h.e.c<j&&(h.e.c=j),P&&(P.type=="XLDAPR"&&(v.D=!0),P=void 0);break;case 176:E.push(W);break;case 49:P=((o.xlmeta||{}).Cell||[])[W-1];break;case 494:var K=r["!id"][W.relId];for(K?(W.Target=K.Target,W.loc&&(W.Target+="#"+W.loc),W.Rel=K):W.relId==""&&(W.Target="#"+W.loc),y=W.rfx.s.r;y<=W.rfx.e.r;++y)for(j=W.rfx.s.c;j<=W.rfx.e.c;++j)o.dense?(d[y]||(d[y]=[]),d[y][j]||(d[y][j]={t:"z",v:void 0}),d[y][j].l=W):(w=Vt({c:j,r:y}),d[w]||(d[w]={t:"z",v:void 0}),d[w].l=W);break;case 426:if(!o.cellFormula)break;L.push(W),_=o.dense?d[y][j]:d[ka(j)+O],_.f=$r(W[1],h,{r:p.r,c:j},I,o),_.F=rs(W[0]);break;case 427:if(!o.cellFormula)break;B[Vt(W[0].s)]=W[1],_=o.dense?d[y][j]:d[ka(j)+O],_.f=$r(W[1],h,{r:p.r,c:j},I,o);break;case 60:if(!o.cellStyles)break;for(;W.e>=W.s;)z[W.e--]={width:W.w/256,hidden:!!(W.flags&1),level:W.level},F||(F=!0,qA(W.w/256)),Ho(z[W.e+1]);break;case 161:d["!autofilter"]={ref:rs(W)};break;case 476:d["!margins"]=W;break;case 147:n.Sheets[a]||(n.Sheets[a]={}),W.name&&(n.Sheets[a].CodeName=W.name),(W.above||W.left)&&(d["!outline"]={above:W.above,left:W.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),W.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+H.toString(16))}}},o),delete o.supbooks,delete o["!row"],!d["!ref"]&&(h.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(d["!ref"]=rs(u||h)),o.sheetRows&&d["!ref"]){var G=Rs(d["!ref"]);o.sheetRows<=+G.e.r&&(G.e.r=o.sheetRows-1,G.e.r>h.e.r&&(G.e.r=h.e.r),G.e.r<G.s.r&&(G.s.r=G.e.r),G.e.c>h.e.c&&(G.e.c=h.e.c),G.e.c<G.s.c&&(G.s.c=G.e.c),d["!fullref"]=d["!ref"],d["!ref"]=rs(G))}return E.length>0&&(d["!merges"]=E),z.length>0&&(d["!cols"]=z),k.length>0&&(d["!rows"]=k),d}function _X(e,s,a,r,n,i,l){if(s.v===void 0)return!1;var o="";switch(s.t){case"b":o=s.v?"1":"0";break;case"d":s=Na(s),s.z=s.z||Ht[14],s.v=hr(ya(s.v)),s.t="n";break;case"n":case"e":o=""+s.v;break;default:o=s.v;break}var d={r:a,c:r};switch(d.s=tc(n.cellXfs,s,n),s.l&&i["!links"].push([Vt(d),s.l]),s.c&&i["!comments"].push([Vt(d),s.c]),s.t){case"s":case"str":return n.bookSST?(o=QA(n.Strings,s.v,n.revStrings),d.t="s",d.v=o,l?at(e,18,QY(s,d)):at(e,7,GY(s,d))):(d.t="str",l?at(e,17,iX(s,d)):at(e,6,rX(s,d))),!0;case"n":return s.v==(s.v|0)&&s.v>-1e3&&s.v<1e3?l?at(e,13,tX(s,d)):at(e,2,ZY(s,d)):l?at(e,16,YY(s,d)):at(e,5,JY(s,d)),!0;case"b":return d.t="b",l?at(e,15,zY(s,d)):at(e,4,FY(s,d)),!0;case"e":return d.t="e",l?at(e,14,HY(s,d)):at(e,3,$Y(s,d)),!0}return l?at(e,12,MY(s,d)):at(e,1,PY(s,d)),!0}function kX(e,s,a,r){var n=Rs(s["!ref"]||"A1"),i,l="",o=[];at(e,145);var d=Array.isArray(s),u=n.e.r;s["!rows"]&&(u=Math.max(n.e.r,s["!rows"].length-1));for(var h=n.s.r;h<=u;++h){l=Ha(h),CY(e,s,n,h);var f=!1;if(h<=n.e.r)for(var x=n.s.c;x<=n.e.c;++x){h===n.s.r&&(o[x]=ka(x)),i=o[x]+l;var p=d?(s[h]||[])[x]:s[i];if(!p){f=!1;continue}f=_X(e,p,h,x,r,s,f)}}at(e,146)}function OX(e,s){!s||!s["!merges"]||(at(e,177,fX(s["!merges"].length)),s["!merges"].forEach(function(a){at(e,176,mX(a))}),at(e,178))}function IX(e,s){!s||!s["!cols"]||(at(e,390),s["!cols"].forEach(function(a,r){a&&at(e,60,vX(r,a))}),at(e,391))}function RX(e,s){!s||!s["!ref"]||(at(e,648),at(e,649,SX(Rs(s["!ref"]))),at(e,650))}function PX(e,s,a){s["!links"].forEach(function(r){if(r[1].Target){var n=Zs(a,-1,r[1].Target.replace(/#.*$/,""),ps.HLINK);at(e,494,xX(r,n))}}),delete s["!links"]}function DX(e,s,a,r){if(s["!comments"].length>0){var n=Zs(r,-1,"../drawings/vmlDrawing"+(a+1)+".vml",ps.VML);at(e,551,DA("rId"+n)),s["!legacy"]=n}}function MX(e,s,a,r){if(s["!autofilter"]){var n=s["!autofilter"],i=typeof n.ref=="string"?n.ref:rs(n.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var l=a.Workbook.Names,o=vn(i);o.s.r==o.e.r&&(o.e.r=vn(s["!ref"]).e.r,i=rs(o));for(var d=0;d<l.length;++d){var u=l[d];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+a.SheetNames[r]+"'!"+i;break}}d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+i}),at(e,161,f0(Rs(i))),at(e,162)}}function LX(e,s,a){at(e,133),at(e,137,wX(s,a)),at(e,138),at(e,134)}function FX(e,s){s["!protect"]&&at(e,535,AX(s["!protect"]))}function UX(e,s,a,r){var n=pn(),i=a.SheetNames[e],l=a.Sheets[i]||{},o=i;try{a&&a.Workbook&&(o=a.Workbook.Sheets[e].CodeName||o)}catch{}var d=Rs(l["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(s.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],at(n,129),(a.vbaraw||l["!outline"])&&at(n,147,IY(o,l["!outline"])),at(n,148,_Y(d)),LX(n,l,a.Workbook),IX(n,l),kX(n,l,e,s),FX(n,l),MX(n,l,a,e),OX(n,l),PX(n,l,r),l["!margins"]&&at(n,476,NX(l["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&RX(n,l),DX(n,l,e,r),at(n,130),n.end()}function zX(e){var s=[],a=e.match(/^<c:numCache>/),r;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(s[+l[1]]=a?+l[2]:l[2])});var n=Os((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){r=i.replace(/<.*?>/g,"")}),[s,n,r]}function BX(e,s,a,r,n,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,d=0,u="A",h={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var x=zX(f);h.s.r=h.s.c=0,h.e.c=o,u=ka(o),x[0].forEach(function(p,v){l[u+Ha(v)]={t:"n",v:p,z:x[1]},d=v}),h.e.r<d&&(h.e.r=d),++o}),o>0&&(l["!ref"]=rs(h)),l}function $X(e,s,a,r,n){if(!e)return e;r||(r={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(LL);return o&&KA(o[0],i,n,a),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}function qX(e,s){e.l+=10;var a=Kr(e);return{name:a}}function HX(e,s,a,r,n){if(!e)return e;r||(r={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Kl(e,function(d,u,h){switch(h){case 550:i["!rel"]=d;break;case 651:n.Sheets[a]||(n.Sheets[a]={}),d.name&&(n.Sheets[a].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!l||s.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}}},s),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}var JA=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],VX=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],GX=[],WX=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function IO(e,s){for(var a=0;a!=e.length;++a)for(var r=e[a],n=0;n!=s.length;++n){var i=s[n];if(r[i[0]]==null)r[i[0]]=i[1];else switch(i[2]){case"bool":typeof r[i[0]]=="string"&&(r[i[0]]=ba(r[i[0]]));break;case"int":typeof r[i[0]]=="string"&&(r[i[0]]=parseInt(r[i[0]],10));break}}}function RO(e,s){for(var a=0;a!=s.length;++a){var r=s[a];if(e[r[0]]==null)e[r[0]]=r[1];else switch(r[2]){case"bool":typeof e[r[0]]=="string"&&(e[r[0]]=ba(e[r[0]]));break;case"int":typeof e[r[0]]=="string"&&(e[r[0]]=parseInt(e[r[0]],10));break}}}function BL(e){RO(e.WBProps,JA),RO(e.CalcPr,WX),IO(e.WBView,VX),IO(e.Sheets,GX),Cu.date1904=ba(e.WBProps.date1904)}function QX(e){return!e.Workbook||!e.Workbook.WBProps?"false":ba(e.Workbook.WBProps.date1904)?"true":"false"}var KX="][*?/\\".split("");function $L(e,s){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return KX.forEach(function(r){if(e.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function JX(e,s,a){e.forEach(function(r,n){$L(r);for(var i=0;i<n;++i)if(r==e[i])throw new Error("Duplicate Sheet Name: "+r);if(a){var l=s&&s[n]&&s[n].CodeName||r;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function YX(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var s=e.Workbook&&e.Workbook.Sheets||[];JX(e.SheetNames,s,!!e.vbaraw);for(var a=0;a<e.SheetNames.length;++a)QJ(e.Sheets[e.SheetNames[a]],e.SheetNames[a],a)}var XX=/<\w+:workbook/;function ZX(e,s){if(!e)throw new Error("Could not find file");var a={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,n="xmlns",i={},l=0;if(e.replace(Xr,function(d,u){var h=Qt(d);switch(il(h[0])){case"<?xml":break;case"<workbook":d.match(XX)&&(n="xmlns"+d.match(/<(\w+):/)[1]),a.xmlns=h[n];break;case"</workbook>":break;case"<fileVersion":delete h[0],a.AppVersion=h;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":JA.forEach(function(f){if(h[f[0]]!=null)switch(f[2]){case"bool":a.WBProps[f[0]]=ba(h[f[0]]);break;case"int":a.WBProps[f[0]]=parseInt(h[f[0]],10);break;default:a.WBProps[f[0]]=h[f[0]]}}),h.codeName&&(a.WBProps.CodeName=da(h.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete h[0],a.WBView.push(h);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(h.state){case"hidden":h.Hidden=1;break;case"veryHidden":h.Hidden=2;break;default:h.Hidden=0}delete h.state,h.name=Os(da(h.name)),delete h[0],a.Sheets.push(h);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":i={},i.Name=da(h.name),h.comment&&(i.Comment=h.comment),h.localSheetId&&(i.Sheet=+h.localSheetId),ba(h.hidden||"0")&&(i.Hidden=!0),l=u+d.length;break;case"</definedName>":i.Ref=Os(da(e.slice(l,u))),a.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete h[0],a.CalcPr=h;break;case"<calcPr/>":delete h[0],a.CalcPr=h;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&s.WTF)throw new Error("unrecognized "+h[0]+" in workbook")}return d}),fd.indexOf(a.xmlns)===-1)throw new Error("Unknown Namespace: "+a.xmlns);return BL(a),a}function qL(e){var s=[Va];s[s.length]=ut("workbook",null,{xmlns:fd[0],"xmlns:r":cr.r});var a=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(JA.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),s[s.length]=ut("workbookPr",null,r);var n=e.Workbook&&e.Workbook.Sheets||[],i=0;if(n&&n[0]&&n[0].Hidden){for(s[s.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!n[i]||!n[i].Hidden);++i);i==e.SheetNames.length&&(i=0),s[s.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',s[s.length]="</bookViews>"}for(s[s.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:ea(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),n[i])switch(n[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}s[s.length]=ut("sheet",null,l)}return s[s.length]="</sheets>",a&&(s[s.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var d={name:o.Name};o.Comment&&(d.comment=o.Comment),o.Sheet!=null&&(d.localSheetId=""+o.Sheet),o.Hidden&&(d.hidden="1"),o.Ref&&(s[s.length]=ut("definedName",ea(o.Ref),d))}),s[s.length]="</definedNames>"),s.length>2&&(s[s.length]="</workbook>",s[1]=s[1].replace("/>",">")),s.join("")}function eZ(e,s){var a={};return a.Hidden=e.read_shift(4),a.iTabID=e.read_shift(4),a.strRelID=kS(e),a.name=Kr(e),a}function tZ(e,s){return s||(s=Ye(127)),s.write_shift(4,e.Hidden),s.write_shift(4,e.iTabID),DA(e.strRelID,s),yr(e.name.slice(0,31),s),s.length>s.l?s.slice(0,s.l):s}function sZ(e,s){var a={},r=e.read_shift(4);a.defaultThemeVersion=e.read_shift(4);var n=s>8?Kr(e):"";return n.length>0&&(a.CodeName=n),a.autoCompressPictures=!!(r&65536),a.backupFile=!!(r&64),a.checkCompatibility=!!(r&4096),a.date1904=!!(r&1),a.filterPrivacy=!!(r&8),a.hidePivotFieldList=!!(r&1024),a.promptedSolutions=!!(r&16),a.publishItems=!!(r&2048),a.refreshAllConnections=!!(r&262144),a.saveExternalLinkValues=!!(r&128),a.showBorderUnselectedTables=!!(r&4),a.showInkAnnotation=!!(r&32),a.showObjects=["all","placeholders","none"][r>>13&3],a.showPivotChartFilter=!!(r&32768),a.updateLinks=["userSet","never","always"][r>>8&3],a}function aZ(e,s){s||(s=Ye(72));var a=0;return e&&e.filterPrivacy&&(a|=8),s.write_shift(4,a),s.write_shift(4,0),P8(e&&e.CodeName||"ThisWorkbook",s),s.slice(0,s.l)}function rZ(e,s){var a={};return e.read_shift(4),a.ArchID=e.read_shift(4),e.l+=s-8,a}function nZ(e,s,a){var r=e.l+s;e.l+=4,e.l+=1;var n=e.read_shift(4),i=DH(e),l=$J(e,0,a),o=PA(e);e.l=r;var d={Name:i,Ptg:l};return n<268435455&&(d.Sheet=n),o&&(d.Comment=o),d}function iZ(e,s){var a={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],n=!1;s||(s={}),s.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],gf[16]={n:"BrtFRTArchID$",f:rZ},Kl(e,function(d,u,h){switch(h){case 156:l.SheetNames.push(d.name),a.Sheets.push(d);break;case 153:a.WBProps=d;break;case 39:d.Sheet!=null&&(s.SID=d.Sheet),d.Ref=$r(d.Ptg,null,null,l,s),delete s.SID,delete d.Ptg,i.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([h,d]):l[0]=[h,d],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(d),l.XTI=l.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(h),n=!0;break;case 36:r.pop(),n=!1;break;case 37:r.push(h),n=!0;break;case 38:r.pop(),n=!1;break;case 16:break;default:if(!u.T){if(!n||s.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+h.toString(16))}}},s),BL(a),a.Names=i,a.supbooks=l,a}function lZ(e,s){at(e,143);for(var a=0;a!=s.SheetNames.length;++a){var r=s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a]&&s.Workbook.Sheets[a].Hidden||0,n={Hidden:r,iTabID:a+1,strRelID:"rId"+(a+1),name:s.SheetNames[a]};at(e,156,tZ(n))}at(e,144)}function oZ(e,s){s||(s=Ye(127));for(var a=0;a!=4;++a)s.write_shift(4,0);return yr("SheetJS",s),yr(_p.version,s),yr(_p.version,s),yr("7262",s),s.length>s.l?s.slice(0,s.l):s}function cZ(e,s){s||(s=Ye(29)),s.write_shift(-4,0),s.write_shift(-4,460),s.write_shift(4,28800),s.write_shift(4,17600),s.write_shift(4,500),s.write_shift(4,e),s.write_shift(4,e);var a=120;return s.write_shift(1,a),s.length>s.l?s.slice(0,s.l):s}function dZ(e,s){if(!(!s.Workbook||!s.Workbook.Sheets)){for(var a=s.Workbook.Sheets,r=0,n=-1,i=-1;r<a.length;++r)!a[r]||!a[r].Hidden&&n==-1?n=r:a[r].Hidden==1&&i==-1&&(i=r);i>n||(at(e,135),at(e,158,cZ(n)),at(e,136))}}function uZ(e,s){var a=pn();return at(a,131),at(a,128,oZ()),at(a,153,aZ(e.Workbook&&e.Workbook.WBProps||null)),dZ(a,e),lZ(a,e),at(a,132),a.end()}function mZ(e,s,a){return s.slice(-4)===".bin"?iZ(e,a):ZX(e,a)}function fZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?TX(e,r,a,n,i,l,o):nY(e,r,a,n,i,l,o)}function hZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?HX(e,r,a,n,i):$X(e,r,a,n,i)}function xZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?gK():bK()}function pZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?xK():pK()}function gZ(e,s,a,r){return s.slice(-4)===".bin"?mQ(e,a,r):eQ(e,a,r)}function bZ(e,s,a){return wL(e,a)}function vZ(e,s,a){return s.slice(-4)===".bin"?vW(e,a):pW(e,a)}function yZ(e,s,a){return s.slice(-4)===".bin"?dK(e,a):tK(e,a)}function NZ(e,s,a){return s.slice(-4)===".bin"?XQ(e):JQ(e)}function jZ(e,s,a,r){return a.slice(-4)===".bin"?ZQ(e,s,a,r):void 0}function wZ(e,s,a){return s.slice(-4)===".bin"?WQ(e,s,a):KQ(e,s,a)}function SZ(e,s,a){return(s.slice(-4)===".bin"?uZ:qL)(e)}function AZ(e,s,a,r,n){return(s.slice(-4)===".bin"?UX:FL)(e,a,r,n)}function EZ(e,s,a){return(s.slice(-4)===".bin"?jQ:NL)(e,a)}function CZ(e,s,a){return(s.slice(-4)===".bin"?jW:fL)(e,a)}function TZ(e,s,a){return(s.slice(-4)===".bin"?uK:EL)(e)}function _Z(e){return(e.slice(-4)===".bin"?QQ:SL)()}var HL=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,VL=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Si(e,s){var a=e.split(/\s+/),r=[];if(r[0]=a[0],a.length===1)return r;var n=e.match(HL),i,l,o,d;if(n)for(d=0;d!=n.length;++d)i=n[d].match(VL),(l=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),r[o]=i[2].slice(1,i[2].length-1));return r}function kZ(e){var s=e.split(/\s+/),a={};if(s.length===1)return a;var r=e.match(HL),n,i,l,o;if(r)for(o=0;o!=r.length;++o)n=r[o].match(VL),(i=n[1].indexOf(":"))===-1?a[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),a[l]=n[2].slice(1,n[2].length-1));return a}var Qm;function OZ(e,s){var a=Qm[e]||Os(e);return a==="General"?Xc(s):hi(a,s)}function IZ(e,s,a,r){var n=r;switch((a[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=ba(r);break;case"i2":case"int":n=parseInt(r,10);break;case"r4":case"float":n=parseFloat(r);break;case"date":case"dateTime.tz":n=ya(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+a[0])}e[Os(s)]=n}function RZ(e,s,a){if(e.t!=="z"){if(!a||a.cellText!==!1)try{e.t==="e"?e.w=e.w||Jl[e.v]:s==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=of(e.v):e.w=Xc(e.v):e.w=OZ(s||"General",e.v)}catch(i){if(a.WTF)throw i}try{var r=Qm[s]||s||"General";if(a.cellNF&&(e.z=r),a.cellDates&&e.t=="n"&&d0(r)){var n=Dc(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(a.WTF)throw i}}}function PZ(e,s,a){if(a.cellStyles&&s.Interior){var r=s.Interior;r.Pattern&&(r.patternType=GW[r.Pattern]||r.Pattern)}e[s.ID]=s}function DZ(e,s,a,r,n,i,l,o,d,u){var h="General",f=r.StyleID,x={};u=u||{};var p=[],v=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&l&&(f=l.StyleID);i[f]!==void 0&&(i[f].nf&&(h=i[f].nf),i[f].Interior&&p.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(a.Type){case"Boolean":r.t="b",r.v=ba(e);break;case"String":r.t="s",r.r=J4(Os(e)),r.v=e.indexOf("<")>-1?Os(s||e).replace(/<.*?>/g,""):r.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),r.v=(ya(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=Os(e):r.v<60&&(r.v=r.v-1),(!h||h=="General")&&(h="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=U8[e],u.cellText!==!1&&(r.w=e);break;default:e==""&&s==""?r.t="z":(r.t="s",r.v=J4(s||e));break}if(RZ(r,h,u),u.cellFormula!==!1)if(r.Formula){var b=Os(r.Formula);b.charCodeAt(0)==61&&(b=b.slice(1)),r.f=Eu(b,n),delete r.Formula,r.ArrayRange=="RC"?r.F=Eu("RC:RC",n):r.ArrayRange&&(r.F=Eu(r.ArrayRange,n),d.push([Rs(r.F),r.F]))}else for(v=0;v<d.length;++v)n.r>=d[v][0].s.r&&n.r<=d[v][0].e.r&&n.c>=d[v][0].s.c&&n.c<=d[v][0].e.c&&(r.F=d[v][1]);u.cellStyles&&(p.forEach(function(y){!x.patternType&&y.patternType&&(x.patternType=y.patternType)}),r.s=x),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function MZ(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function c1(e,s){var a=s||{};u0();var r=Im(TA(e));(a.type=="binary"||a.type=="array"||a.type=="base64")&&(r=da(r));var n=r.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=Na(a);return l.type="string",Mu.to_workbook(r,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ne){n.indexOf("<"+ne)>=0&&(i=!0)}),i)return Nee(r,a);Qm={"General Number":"General","General Date":Ht[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ht[15],"Short Date":Ht[14],"Long Time":Ht[19],"Medium Time":Ht[18],"Short Time":Ht[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ht[2],Standard:Ht[4],Percent:Ht[10],Scientific:Ht[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,d=[],u,h={},f=[],x=a.dense?[]:{},p="",v={},b={},y=Si('<Data ss:Type="String">'),j=0,w=0,S=0,O={s:{r:2e6,c:2e6},e:{r:0,c:0}},_={},E={},A="",D=0,L=[],B={},I={},T=0,z=[],k=[],F={},P=[],G,Y=!1,W=[],ee=[],H={},M=0,X=0,K={Sheets:[],WBProps:{date1904:!1}},Q={};uf.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var se="";o=uf.exec(r);)switch(o[3]=(se=o[3]).toLowerCase()){case"data":if(se=="data"){if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break}if(d[d.length-1][1])break;o[1]==="/"?DZ(r.slice(j,o.index),A,y,d[d.length-1][0]=="comment"?F:v,{c:w,r:S},_,P[w],b,W,a):(A="",y=Si(o[0]),j=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(k.length>0&&(v.c=k),(!a.sheetRows||a.sheetRows>S)&&v.v!==void 0&&(a.dense?(x[S]||(x[S]=[]),x[S][w]=v):x[ka(w)+Ha(S)]=v),v.HRef&&(v.l={Target:Os(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(M=w+(parseInt(v.MergeAcross,10)|0),X=S+(parseInt(v.MergeDown,10)|0),L.push({s:{c:w,r:S},e:{c:M,r:X}})),!a.sheetStubs)v.MergeAcross?w=M+1:++w;else if(v.MergeAcross||v.MergeDown){for(var V=w;V<=M;++V)for(var te=S;te<=X;++te)(V>w||te>S)&&(a.dense?(x[te]||(x[te]=[]),x[te][V]={t:"z"}):x[ka(V)+Ha(te)]={t:"z"});w=M+1}else++w;else v=kZ(o[0]),v.Index&&(w=+v.Index-1),w<O.s.c&&(O.s.c=w),w>O.e.c&&(O.e.c=w),o[0].slice(-2)==="/>"&&++w,k=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(S<O.s.r&&(O.s.r=S),S>O.e.r&&(O.e.r=S),o[0].slice(-2)==="/>"&&(b=Si(o[0]),b.Index&&(S=+b.Index-1)),w=0,++S):(b=Si(o[0]),b.Index&&(S=+b.Index-1),H={},(b.AutoFitHeight=="0"||b.Height)&&(H.hpx=parseInt(b.Height,10),H.hpt=pf(H.hpx),ee[S]=H),b.Hidden=="1"&&(H.hidden=!0,ee[S]=H));break;case"worksheet":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),O.s.r<=O.e.r&&O.s.c<=O.e.c&&(x["!ref"]=rs(O),a.sheetRows&&a.sheetRows<=O.e.r&&(x["!fullref"]=x["!ref"],O.e.r=a.sheetRows-1,x["!ref"]=rs(O))),L.length&&(x["!merges"]=L),P.length>0&&(x["!cols"]=P),ee.length>0&&(x["!rows"]=ee),h[p]=x}else O={s:{r:2e6,c:2e6},e:{r:0,c:0}},S=w=0,d.push([o[3],!1]),u=Si(o[0]),p=Os(u.Name),x=a.dense?[]:{},L=[],W=[],ee=[],Q={name:p,Hidden:0},K.Sheets.push(Q);break;case"table":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;d.push([o[3],!1]),P=[],Y=!1}break;case"style":o[1]==="/"?PZ(_,E,a):E=Si(o[0]);break;case"numberformat":E.nf=Os(Si(o[0]).Format||"General"),Qm[E.nf]&&(E.nf=Qm[E.nf]);for(var Z=0;Z!=392&&Ht[Z]!=E.nf;++Z);if(Z==392){for(Z=57;Z!=392;++Z)if(Ht[Z]==null){Dl(E.nf,Z);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(G=Si(o[0]),G.Hidden&&(G.hidden=!0,delete G.Hidden),G.Width&&(G.wpx=parseInt(G.Width,10)),!Y&&G.wpx>10){Y=!0,qr=vL;for(var ue=0;ue<P.length;++ue)P[ue]&&Ho(P[ue])}Y&&Ho(G),P[G.Index-1||P.length]=G;for(var re=0;re<+G.Span;++re)P[P.length]=Na(G);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var J=Qt(o[0]),Ne={Name:J.Name,Ref:Eu(J.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(Ne.Sheet=K.Sheets.length-1),K.Names.push(Ne);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?A+=r.slice(D,o.index):D=o.index+o[0].length;break;case"interior":if(!a.cellStyles)break;E.Interior=Si(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?iV(B,se,r.slice(T,o.index)):T=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else d.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));MZ(F),k.push(F)}else d.push([o[3],!1]),u=Si(o[0]),F={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var q=Si(o[0]);x["!autofilter"]={ref:Eu(q.Range).replace(/\$/g,"")},d.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break;case"null":break;default:if(d.length==0&&o[3]=="document"||d.length==0&&o[3]=="uof")return FO(r,a);var ce=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ce=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ce=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ce=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ce=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(T,o.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else T=o.index+o[0].length;break;case"header":x["!margins"]||Hc(x["!margins"]={},"xlml"),isNaN(+Qt(o[0]).Margin)||(x["!margins"].header=+Qt(o[0]).Margin);break;case"footer":x["!margins"]||Hc(x["!margins"]={},"xlml"),isNaN(+Qt(o[0]).Margin)||(x["!margins"].footer=+Qt(o[0]).Margin);break;case"pagemargins":var fe=Qt(o[0]);x["!margins"]||Hc(x["!margins"]={},"xlml"),isNaN(+fe.Top)||(x["!margins"].top=+fe.Top),isNaN(+fe.Left)||(x["!margins"].left=+fe.Left),isNaN(+fe.Right)||(x["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(x["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ce=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ce=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ce=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ce=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ce=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ce=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ce=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ce=!1}break;case"smarttags":break;default:ce=!1;break}if(ce||o[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?IZ(I,se,z,r.slice(T,o.index)):(z=o,T=o.index+o[0].length);break}if(a.WTF)throw"Unrecognized tag: "+o[3]+"|"+d.join("|")}var ie={};return!a.bookSheets&&!a.bookProps&&(ie.Sheets=h),ie.SheetNames=f,ie.Workbook=K,ie.SSF=Na(Ht),ie.Props=B,ie.Custprops=I,ie}function LS(e,s){switch(ZA(s=s||{}),s.type||"base64"){case"base64":return c1(zn(e),s);case"binary":case"buffer":case"file":return c1(e,s);case"array":return c1(Zo(e),s)}}function LZ(e,s){var a=[];return e.Props&&a.push(lV(e.Props,s)),e.Custprops&&a.push(oV(e.Props,e.Custprops)),a.join("")}function FZ(){return""}function UZ(e,s){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return s.cellXfs.forEach(function(r,n){var i=[];i.push(ut("NumberFormat",null,{"ss:Format":ea(Ht[r.numFmtId])}));var l={"ss:ID":"s"+(21+n)};a.push(ut("Style",i.join(""),l))}),ut("Styles",a.join(""))}function GL(e){return ut("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+GA(e.Ref,{r:0,c:0})})}function zZ(e){if(!((e||{}).Workbook||{}).Names)return"";for(var s=e.Workbook.Names,a=[],r=0;r<s.length;++r){var n=s[r];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||a.push(GL(n)))}return ut("Names",a.join(""))}function BZ(e,s,a,r){if(!e||!((r||{}).Workbook||{}).Names)return"";for(var n=r.Workbook.Names,i=[],l=0;l<n.length;++l){var o=n[l];o.Sheet==a&&(o.Name.match(/^_xlfn\./)||i.push(GL(o)))}return i.join("")}function $Z(e,s,a,r){if(!e)return"";var n=[];if(e["!margins"]&&(n.push("<PageSetup>"),e["!margins"].header&&n.push(ut("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&n.push(ut("Footer",null,{"x:Margin":e["!margins"].footer})),n.push(ut("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),n.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[a])if(r.Workbook.Sheets[a].Hidden)n.push(ut("Visible",r.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<a&&!(r.Workbook.Sheets[i]&&!r.Workbook.Sheets[i].Hidden);++i);i==a&&n.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),e["!protect"]&&(n.push(Or("ProtectContents","True")),e["!protect"].objects&&n.push(Or("ProtectObjects","True")),e["!protect"].scenarios&&n.push(Or("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?n.push(Or("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&n.push(Or("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&n.push("<"+l[1]+"/>")})),n.length==0?"":ut("WorksheetOptions",n.join(""),{xmlns:In.x})}function qZ(e){return e.map(function(s){var a=dH(s.t||""),r=ut("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return ut("Comment",r,{"ss:Author":s.a})}).join("")}function HZ(e,s,a,r,n,i,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ea(GA(e.f,l))),e.F&&e.F.slice(0,s.length)==s){var d=Oa(e.F.slice(s.length+1));o["ss:ArrayRange"]="RC:R"+(d.r==l.r?"":"["+(d.r-l.r)+"]")+"C"+(d.c==l.c?"":"["+(d.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ea(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ea(e.l.Tooltip))),a["!merges"])for(var u=a["!merges"],h=0;h!=u.length;++h)u[h].s.c!=l.c||u[h].s.r!=l.r||(u[h].e.c>u[h].s.c&&(o["ss:MergeAcross"]=u[h].e.c-u[h].s.c),u[h].e.r>u[h].s.r&&(o["ss:MergeDown"]=u[h].e.r-u[h].s.r));var f="",x="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":f="Number",x=String(e.v);break;case"b":f="Boolean",x=e.v?"1":"0";break;case"e":f="Error",x=Jl[e.v];break;case"d":f="DateTime",x=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Ht[14]);break;case"s":f="String",x=cH(e.v||"");break}var p=tc(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=l.c+1;var v=e.v!=null?x:"",b=e.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(e.c||[]).length>0&&(b+=qZ(e.c)),ut("Cell",b,o)}function VZ(e,s){var a='<Row ss:Index="'+(e+1)+'"';return s&&(s.hpt&&!s.hpx&&(s.hpx=Lu(s.hpt)),s.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+s.hpx+'"'),s.hidden&&(a+=' ss:Hidden="1"')),a+">"}function GZ(e,s,a,r){if(!e["!ref"])return"";var n=Rs(e["!ref"]),i=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(y,j){Ho(y);var w=!!y.width,S=tb(j,y),O={"ss:Index":j+1};w&&(O["ss:Width"]=hf(S.width)),y.hidden&&(O["ss:Hidden"]="1"),o.push(ut("Column",null,O))});for(var d=Array.isArray(e),u=n.s.r;u<=n.e.r;++u){for(var h=[VZ(u,(e["!rows"]||[])[u])],f=n.s.c;f<=n.e.c;++f){var x=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>f)&&!(i[l].s.r>u)&&!(i[l].e.c<f)&&!(i[l].e.r<u)){(i[l].s.c!=f||i[l].s.r!=u)&&(x=!0);break}if(!x){var p={r:u,c:f},v=Vt(p),b=d?(e[u]||[])[f]:e[v];h.push(HZ(b,v,e,s,a,r,p))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function WZ(e,s,a){var r=[],n=a.SheetNames[e],i=a.Sheets[n],l=i?BZ(i,s,e,a):"";return l.length>0&&r.push("<Names>"+l+"</Names>"),l=i?GZ(i,s,e,a):"",l.length>0&&r.push("<Table>"+l+"</Table>"),r.push($Z(i,s,e,a)),r.join("")}function QZ(e,s){s||(s={}),e.SSF||(e.SSF=Na(Ht)),e.SSF&&(u0(),Qg(e.SSF),s.revssf=Jg(e.SSF),s.revssf[e.SSF[65535]]=0,s.ssf=e.SSF,s.cellXfs=[],tc(s.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(LZ(e,s)),a.push(FZ()),a.push(""),a.push("");for(var r=0;r<e.SheetNames.length;++r)a.push(ut("Worksheet",WZ(r,s,e),{"ss:Name":ea(e.SheetNames[r])}));return a[2]=UZ(e,s),a[3]=zZ(e),Va+ut("Workbook",a.join(""),{xmlns:In.ss,"xmlns:o":In.o,"xmlns:x":In.x,"xmlns:ss":In.ss,"xmlns:dt":In.dt,"xmlns:html":In.html})}function KZ(e){var s={},a=e.content;if(a.l=28,s.AnsiUserType=a.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=zH(a),a.length-a.l<=4)return s;var r=a.read_shift(4);if(r==0||r>40||(a.l-=4,s.Reserved1=a.read_shift(0,"lpstr-ansi"),a.length-a.l<=4)||(r=a.read_shift(4),r!==1907505652)||(s.UnicodeClipboardFormat=BH(a),r=a.read_shift(4),r==0||r>40))return s;a.l-=4,s.Reserved2=a.read_shift(0,"lpwstr")}var JZ=[60,1084,2066,2165,2175];function YZ(e,s,a,r,n){var i=r,l=[],o=a.slice(a.l,a.l+i);if(n&&n.enc&&n.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(o)}l.push(o),a.l+=i;for(var d=kl(a,a.l),u=FS[d],h=0;u!=null&&JZ.indexOf(d)>-1;)i=kl(a,a.l+2),h=a.l+4,d==2066?h+=4:(d==2165||d==2175)&&(h+=12),o=a.slice(h,a.l+4+i),l.push(o),a.l+=4+i,u=FS[d=kl(a,a.l)];var f=vr(l);kr(f,0);var x=0;f.lens=[];for(var p=0;p<l.length;++p)f.lens.push(x),x+=l[p].length;if(f.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+r;return s.f(f,f.length,n)}function Hi(e,s,a){if(e.t!=="z"&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,s.cellNF&&(e.z=Ht[r])}catch(i){if(s.WTF)throw i}if(!s||s.cellText!==!1)try{e.t==="e"?e.w=e.w||Jl[e.v]:r===0||r=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=of(e.v):e.w=Xc(e.v):e.w=hi(r,e.v,{date1904:!!a,dateNF:s&&s.dateNF})}catch(i){if(s.WTF)throw i}if(s.cellDates&&r&&e.t=="n"&&d0(Ht[r]||String(r))){var n=Dc(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function Wx(e,s,a){return{v:e,ixfe:s,t:a}}function XZ(e,s){var a={opts:{}},r={},n=s.dense?[]:{},i={},l={},o=null,d=[],u="",h={},f,x="",p,v,b,y,j={},w=[],S,O,_=[],E=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},D={},L=function(jt){return jt<8?Bc[jt]:jt<64&&E[jt-8]||Bc[jt]},B=function(jt,Ft,Ce){var ve=Ft.XF.data;if(!(!ve||!ve.patternType||!Ce||!Ce.cellStyles)){Ft.s={},Ft.s.patternType=ve.patternType;var Ve;(Ve=ff(L(ve.icvFore)))&&(Ft.s.fgColor={rgb:Ve}),(Ve=ff(L(ve.icvBack)))&&(Ft.s.bgColor={rgb:Ve})}},I=function(jt,Ft,Ce){if(!(H>1)&&!(Ce.sheetRows&&jt.r>=Ce.sheetRows)){if(Ce.cellStyles&&Ft.XF&&Ft.XF.data&&B(jt,Ft,Ce),delete Ft.ixfe,delete Ft.XF,f=jt,x=Vt(jt),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),jt.r<l.s.r&&(l.s.r=jt.r),jt.c<l.s.c&&(l.s.c=jt.c),jt.r+1>l.e.r&&(l.e.r=jt.r+1),jt.c+1>l.e.c&&(l.e.c=jt.c+1),Ce.cellFormula&&Ft.f){for(var ve=0;ve<w.length;++ve)if(!(w[ve][0].s.c>jt.c||w[ve][0].s.r>jt.r)&&!(w[ve][0].e.c<jt.c||w[ve][0].e.r<jt.r)){Ft.F=rs(w[ve][0]),(w[ve][0].s.c!=jt.c||w[ve][0].s.r!=jt.r)&&delete Ft.f,Ft.f&&(Ft.f=""+$r(w[ve][1],l,jt,W,T));break}}Ce.dense?(n[jt.r]||(n[jt.r]=[]),n[jt.r][jt.c]=Ft):n[x]=Ft}},T={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(T.password=s.password);var z,k=[],F=[],P=[],G=[],Y=!1,W=[];W.SheetNames=T.snames,W.sharedf=T.sharedf,W.arrayf=T.arrayf,W.names=[],W.XTI=[];var ee=0,H=0,M=0,X=[],K=[],Q;T.codepage=1200,ki(1200);for(var se=!1;e.l<e.length-1;){var V=e.l,te=e.read_shift(2);if(te===0&&ee===10)break;var Z=e.l===e.length?0:e.read_shift(2),ue=FS[te];if(ue&&ue.f){if(s.bookSheets&&ee===133&&te!==133)break;if(ee=te,ue.r===2||ue.r==12){var re=e.read_shift(2);if(Z-=2,!T.enc&&re!==te&&((re&255)<<8|re>>8)!==te)throw new Error("rt mismatch: "+re+"!="+te);ue.r==12&&(e.l+=10,Z-=10)}var J={};if(te===10?J=ue.f(e,Z,T):J=YZ(te,ue,e,Z,T),H==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(te){case 34:a.opts.Date1904=A.WBProps.date1904=J;break;case 134:a.opts.WriteProtect=!0;break;case 47:if(T.enc||(e.l=0),T.enc=J,!s.password)throw new Error("File is password-protected");if(J.valid==null)throw new Error("Encryption scheme unsupported");if(!J.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=J;break;case 66:var Ne=Number(J);switch(Ne){case 21010:Ne=1200;break;case 32768:Ne=1e4;break;case 32769:Ne=1252;break}ki(T.codepage=Ne),se=!0;break;case 317:T.rrtabid=J;break;case 25:T.winlocked=J;break;case 439:a.opts.RefreshAll=J;break;case 12:a.opts.CalcCount=J;break;case 16:a.opts.CalcDelta=J;break;case 17:a.opts.CalcIter=J;break;case 13:a.opts.CalcMode=J;break;case 14:a.opts.CalcPrecision=J;break;case 95:a.opts.CalcSaveRecalc=J;break;case 15:T.CalcRefMode=J;break;case 2211:a.opts.FullCalc=J;break;case 129:J.fDialog&&(n["!type"]="dialog"),J.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),J.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:_.push(J);break;case 430:W.push([J]),W[W.length-1].XTI=[];break;case 35:case 547:W[W.length-1].push(J);break;case 24:case 536:Q={Name:J.Name,Ref:$r(J.rgce,l,null,W,T)},J.itab>0&&(Q.Sheet=J.itab-1),W.names.push(Q),W[0]||(W[0]=[],W[0].XTI=[]),W[W.length-1].push(J),J.Name=="_xlnm._FilterDatabase"&&J.itab>0&&J.rgce&&J.rgce[0]&&J.rgce[0][0]&&J.rgce[0][0][0]=="PtgArea3d"&&(K[J.itab-1]={ref:rs(J.rgce[0][0][1][2])});break;case 22:T.ExternCount=J;break;case 23:W.length==0&&(W[0]=[],W[0].XTI=[]),W[W.length-1].XTI=W[W.length-1].XTI.concat(J),W.XTI=W.XTI.concat(J);break;case 2196:if(T.biff<8)break;Q!=null&&(Q.Comment=J[1]);break;case 18:n["!protect"]=J;break;case 19:J!==0&&T.WTF&&console.error("Password verifier: "+J);break;case 133:i[J.pos]=J,T.snames.push(J.name);break;case 10:{if(--H)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=rs(l),s.sheetRows&&s.sheetRows<=l.e.r){var q=l.e.r;l.e.r=s.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=rs(l),l.e.r=q}l.e.r++,l.e.c++}k.length>0&&(n["!merges"]=k),F.length>0&&(n["!objects"]=F),P.length>0&&(n["!cols"]=P),G.length>0&&(n["!rows"]=G),A.Sheets.push(D)}u===""?h=n:r[u]=n,n=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[te]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[J.BIFFVer]||8),T.biffguess=J.BIFFVer==0,J.BIFFVer==0&&J.dt==4096&&(T.biff=5,se=!0,ki(T.codepage=28591)),T.biff==8&&J.BIFFVer==0&&J.dt==16&&(T.biff=2),H++)break;if(n=s.dense?[]:{},T.biff<8&&!se&&(se=!0,ki(T.codepage=s.codepage||1252)),T.biff<5||J.BIFFVer==0&&J.dt==4096){u===""&&(u="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var ce={pos:e.l-Z,name:u};i[ce.pos]=ce,T.snames.push(u)}else u=(i[V]||{name:""}).name;J.dt==32&&(n["!type"]="chart"),J.dt==64&&(n["!type"]="macro"),k=[],F=[],T.arrayf=w=[],P=[],G=[],Y=!1,D={Hidden:(i[V]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(s.dense?(n[J.r]||[])[J.c]:n[Vt({c:J.c,r:J.r})])&&++J.c,S={ixfe:J.ixfe,XF:_[J.ixfe]||{},v:J.val,t:"n"},M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:J.c,r:J.r},S,s);break;case 5:case 517:S={ixfe:J.ixfe,XF:_[J.ixfe],v:J.val,t:J.t},M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:J.c,r:J.r},S,s);break;case 638:S={ixfe:J.ixfe,XF:_[J.ixfe],v:J.rknum,t:"n"},M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:J.c,r:J.r},S,s);break;case 189:for(var fe=J.c;fe<=J.C;++fe){var ie=J.rkrec[fe-J.c][0];S={ixfe:ie,XF:_[ie],v:J.rkrec[fe-J.c][1],t:"n"},M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:fe,r:J.r},S,s)}break;case 6:case 518:case 1030:{if(J.val=="String"){o=J;break}if(S=Wx(J.val,J.cell.ixfe,J.tt),S.XF=_[S.ixfe],s.cellFormula){var ne=J.formula;if(ne&&ne[0]&&ne[0][0]&&ne[0][0][0]=="PtgExp"){var pe=ne[0][0][1][0],Ee=ne[0][0][1][1],Ie=Vt({r:pe,c:Ee});j[Ie]?S.f=""+$r(J.formula,l,J.cell,W,T):S.F=((s.dense?(n[pe]||[])[Ee]:n[Ie])||{}).F}else S.f=""+$r(J.formula,l,J.cell,W,T)}M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I(J.cell,S,s),o=J}break;case 7:case 519:if(o)o.val=J,S=Wx(J,o.cell.ixfe,"s"),S.XF=_[S.ixfe],s.cellFormula&&(S.f=""+$r(o.formula,l,o.cell,W,T)),M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I(o.cell,S,s),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(J);var _e=Vt(J[0].s);if(p=s.dense?(n[J[0].s.r]||[])[J[0].s.c]:n[_e],s.cellFormula&&p){if(!o||!_e||!p)break;p.f=""+$r(J[1],l,J[0],W,T),p.F=rs(J[0])}}break;case 1212:{if(!s.cellFormula)break;if(x){if(!o)break;j[Vt(o.cell)]=J[0],p=s.dense?(n[o.cell.r]||[])[o.cell.c]:n[Vt(o.cell)],(p||{}).f=""+$r(J[0],l,f,W,T)}}break;case 253:S=Wx(d[J.isst].t,J.ixfe,"s"),d[J.isst].h&&(S.h=d[J.isst].h),S.XF=_[S.ixfe],M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:J.c,r:J.r},S,s);break;case 513:s.sheetStubs&&(S={ixfe:J.ixfe,XF:_[J.ixfe],t:"z"},M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:J.c,r:J.r},S,s));break;case 190:if(s.sheetStubs)for(var Ge=J.c;Ge<=J.C;++Ge){var Ae=J.ixfe[Ge-J.c];S={ixfe:Ae,XF:_[Ae],t:"z"},M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:Ge,r:J.r},S,s)}break;case 214:case 516:case 4:S=Wx(J.val,J.ixfe,"s"),S.XF=_[S.ixfe],M>0&&(S.z=X[S.ixfe>>8&63]),Hi(S,s,a.opts.Date1904),I({c:J.c,r:J.r},S,s);break;case 0:case 512:H===1&&(l=J);break;case 252:d=J;break;case 1054:if(T.biff==4){X[M++]=J[1];for(var Ue=0;Ue<M+163&&Ht[Ue]!=J[1];++Ue);Ue>=163&&Dl(J[1],M+163)}else Dl(J[1],J[0]);break;case 30:{X[M++]=J;for(var Qe=0;Qe<M+163&&Ht[Qe]!=J;++Qe);Qe>=163&&Dl(J,M+163)}break;case 229:k=k.concat(J);break;case 93:F[J.cmo[0]]=T.lastobj=J;break;case 438:T.lastobj.TxO=J;break;case 127:T.lastobj.ImData=J;break;case 440:for(y=J[0].s.r;y<=J[0].e.r;++y)for(b=J[0].s.c;b<=J[0].e.c;++b)p=s.dense?(n[y]||[])[b]:n[Vt({c:b,r:y})],p&&(p.l=J[1]);break;case 2048:for(y=J[0].s.r;y<=J[0].e.r;++y)for(b=J[0].s.c;b<=J[0].e.c;++b)p=s.dense?(n[y]||[])[b]:n[Vt({c:b,r:y})],p&&p.l&&(p.l.Tooltip=J[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;p=s.dense?(n[J[0].r]||[])[J[0].c]:n[Vt(J[0])];var _t=F[J[2]];p||(s.dense?(n[J[0].r]||(n[J[0].r]=[]),p=n[J[0].r][J[0].c]={t:"z"}):p=n[Vt(J[0])]={t:"z"},l.e.r=Math.max(l.e.r,J[0].r),l.s.r=Math.min(l.s.r,J[0].r),l.e.c=Math.max(l.e.c,J[0].c),l.s.c=Math.min(l.s.c,J[0].c)),p.c||(p.c=[]),v={a:J[1],t:_t.TxO.t},p.c.push(v)}break;case 2173:UQ(_[J.ixfe],J.ext);break;case 125:{if(!T.cellStyles)break;for(;J.e>=J.s;)P[J.e--]={width:J.w/256,level:J.level||0,hidden:!!(J.flags&1)},Y||(Y=!0,qA(J.w/256)),Ho(P[J.e+1])}break;case 520:{var lt={};J.level!=null&&(G[J.r]=lt,lt.level=J.level),J.hidden&&(G[J.r]=lt,lt.hidden=!0),J.hpt&&(G[J.r]=lt,lt.hpt=J.hpt,lt.hpx=Lu(J.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||Hc(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[te]]=J;break;case 161:n["!margins"]||Hc(n["!margins"]={}),n["!margins"].header=J.header,n["!margins"].footer=J.footer;break;case 574:J.RTL&&(A.Views[0].RTL=!0);break;case 146:E=J;break;case 2198:z=J;break;case 140:O=J;break;case 442:u?D.CodeName=J||D.name:A.WBProps.CodeName=J||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+te.toString(16)),e.l+=Z}return a.SheetNames=Fa(i).sort(function(Nt,jt){return Number(Nt)-Number(jt)}).map(function(Nt){return i[Nt].name}),s.bookSheets||(a.Sheets=r),!a.SheetNames.length&&h["!ref"]?(a.SheetNames.push("Sheet1"),a.Sheets&&(a.Sheets.Sheet1=h)):a.Preamble=h,a.Sheets&&K.forEach(function(Nt,jt){a.Sheets[a.SheetNames[jt]]["!autofilter"]=Nt}),a.Strings=d,a.SSF=Na(Ht),T.enc&&(a.Encryption=T.enc),z&&(a.Themes=z),a.Metadata={},O!==void 0&&(a.Metadata.Country=O),W.names.length>0&&(A.Names=W.names),a.Workbook=A,a}var Km={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ZZ(e,s,a){var r=Ot.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var n=hO(r,OS,Km.DSI);for(var i in n)s[i]=n[i]}catch(u){if(a.WTF)throw u}var l=Ot.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=hO(l,IS,Km.SI);for(var d in o)s[d]==null&&(s[d]=o[d])}catch(u){if(a.WTF)throw u}s.HeadingPairs&&s.TitlesOfParts&&(V8(s.HeadingPairs,s.TitlesOfParts,s,a),delete s.HeadingPairs,delete s.TitlesOfParts)}function eee(e,s){var a=[],r=[],n=[],i=0,l,o=H4(OS,"n"),d=H4(IS,"n");if(e.Props)for(l=Fa(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?a:Object.prototype.hasOwnProperty.call(d,l[i])?r:n).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=Fa(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?a:Object.prototype.hasOwnProperty.call(d,l[i])?r:n).push([l[i],e.Custprops[l[i]]]);var u=[];for(i=0;i<n.length;++i)X8.indexOf(n[i][0])>-1||H8.indexOf(n[i][0])>-1||n[i][1]!=null&&u.push(n[i]);r.length&&Ot.utils.cfb_add(s,"/SummaryInformation",xO(r,Km.SI,d,IS)),(a.length||u.length)&&Ot.utils.cfb_add(s,"/DocumentSummaryInformation",xO(a,Km.DSI,o,OS,u.length?u:null,Km.UDI))}function YA(e,s){s||(s={}),ZA(s),vA(),s.codepage&&bA(s.codepage);var a,r;if(e.FullPaths){if(Ot.find(e,"/encryption"))throw new Error("File is password-protected");a=Ot.find(e,"!CompObj"),r=Ot.find(e,"/Workbook")||Ot.find(e,"/Book")}else{switch(s.type){case"base64":e=Pn(zn(e));break;case"binary":e=Pn(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}kr(e,0),r={content:e}}var n,i;if(a&&KZ(a),s.bookProps&&!s.bookSheets)n={};else{var l=fs?"buffer":"array";if(r&&r.content)n=XZ(r.content,s);else if((i=Ot.find(e,"PerfectOffice_MAIN"))&&i.content)n=qc.to_workbook(i.content,(s.type=l,s));else if((i=Ot.find(e,"NativeContent_MAIN"))&&i.content)n=qc.to_workbook(i.content,(s.type=l,s));else throw(i=Ot.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&e.FullPaths&&Ot.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=fK(e))}var o={};return e.FullPaths&&ZZ(e,o,s),n.Props=n.Custprops=o,s.bookFiles&&(n.cfb=e),n}function tee(e,s){var a=s||{},r=Ot.utils.cfb_new({root:"R"}),n="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":n="/Workbook",a.biff=8;break;case"biff5":n="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return Ot.utils.cfb_add(r,n,WL(e,a)),a.biff==8&&(e.Props||e.Custprops)&&eee(e,r),a.biff==8&&e.vbaraw&&hK(r,Ot.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),r}var gf={0:{f:AY},1:{f:RY},2:{f:XY},3:{f:BY},4:{f:LY},5:{f:KY},6:{f:aX},7:{f:VY},8:{f:dX},9:{f:cX},10:{f:lX},11:{f:oX},12:{f:DY},13:{f:eX},14:{f:qY},15:{f:UY},16:{f:UL},17:{f:nX},18:{f:WY},19:{f:RA},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:nZ},40:{},42:{},43:{f:aQ},44:{f:tQ},45:{f:iQ},46:{f:oQ},47:{f:lQ},48:{},49:{f:TH},50:{},51:{f:$Q},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:cL},62:{f:sX},63:{f:YQ},64:{f:EX},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Jr,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:jX},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:OY},148:{f:TY,p:16},151:{f:pX},152:{},153:{f:sZ},154:{},155:{},156:{f:eZ},157:{},158:{},159:{T:1,f:bW},160:{T:-1},161:{T:1,f:gd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:uX},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:zQ},336:{T:-1},337:{f:VQ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:kS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:oL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:gX},427:{f:bX},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:yX},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:kY},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hX},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:kS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:oK},633:{T:1},634:{T:-1},635:{T:1,f:iK},636:{T:-1},637:{f:IH},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:qX},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:CX},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},FS={6:{f:l1},10:{f:So},12:{f:Za},13:{f:Za},14:{f:$a},15:{f:$a},16:{f:Gr},17:{f:$a},18:{f:$a},19:{f:Za},20:{f:NO},21:{f:NO},23:{f:oL},24:{f:wO},25:{f:$a},26:{},27:{},28:{f:CG},29:{},34:{f:$a},35:{f:jO},38:{f:Gr},39:{f:Gr},40:{f:Gr},41:{f:Gr},42:{f:$a},43:{f:$a},47:{f:UW},49:{f:eG},51:{f:Za},60:{},61:{f:KV},64:{f:$a},65:{f:ZV},66:{f:Za},77:{},80:{},81:{},82:{},85:{f:Za},89:{},90:{},91:{},92:{f:FV},93:{f:kG},94:{},95:{f:$a},96:{},97:{},99:{f:$a},125:{f:cL},128:{f:xG},129:{f:zV},130:{f:Za},131:{f:$a},132:{f:$a},133:{f:BV},134:{},140:{f:FG},141:{f:Za},144:{},146:{f:BG},151:{},152:{},153:{},154:{},155:{},156:{f:Za},157:{},158:{},160:{f:QG},161:{f:HG},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:uG},190:{f:mG},193:{f:So},197:{},198:{},199:{},200:{},201:{},202:{f:$a},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Za},220:{},221:{f:$a},222:{},224:{f:hG},225:{f:LV},226:{f:So},227:{},229:{f:TG},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:qV},253:{f:sG},255:{f:VV},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Z8},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:$a},353:{f:So},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:yG},431:{f:$a},432:{},433:{},434:{},437:{},438:{f:RG},439:{f:$a},440:{f:PG},441:{},442:{f:ch},443:{},444:{f:Za},445:{},446:{},448:{f:So},449:{f:QV,r:2},450:{f:So},512:{f:bO},513:{f:WG},515:{f:bG},516:{f:rG},517:{f:yO},519:{f:KG},520:{f:GV},523:{},545:{f:SO},549:{f:gO},566:{},574:{f:YV},638:{f:dG},659:{},1048:{},1054:{f:iG},1084:{},1212:{f:SG},2048:{f:MG},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Hx},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:So},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:$G,r:12},2173:{f:FQ,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:$a,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:wG,r:12},2197:{},2198:{f:IQ,r:12},2199:{},2200:{},2201:{},2202:{f:AG,r:12},2203:{f:So},2204:{},2205:{},2206:{},2207:{},2211:{f:WV},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Za},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:VG},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:zG},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:bO},1:{},2:{f:eW},3:{f:XG},4:{f:YG},5:{f:yO},7:{f:sW},8:{},9:{f:Hx},11:{},22:{f:Za},30:{f:oG},31:{},32:{},33:{f:SO},36:{},37:{f:gO},50:{f:aW},62:{},52:{},67:{},68:{f:Za},69:{},86:{},126:{},127:{f:JG},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:rW},223:{},234:{},354:{},421:{},518:{f:l1},521:{f:Hx},536:{f:wO},547:{f:jO},561:{},579:{},1030:{f:l1},1033:{f:Hx},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function mt(e,s,a,r){var n=s;if(!isNaN(n)){var i=r||(a||[]).length||0,l=e.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&kA(a)&&e.push(a)}}function see(e,s,a,r){var n=(a||[]).length||0;if(n<=8224)return mt(e,s,a,n);var i=s;if(!isNaN(i)){for(var l=a.parts||[],o=0,d=0,u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;var h=e.next(4);for(h.write_shift(2,i),h.write_shift(2,u),e.push(a.slice(d,d+u)),d+=u;d<n;){for(h=e.next(4),h.write_shift(2,60),u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;h.write_shift(2,u),e.push(a.slice(d,d+u)),d+=u}}}function fh(e,s,a){return e||(e=Ye(7)),e.write_shift(2,s),e.write_shift(2,a),e.write_shift(2,0),e.write_shift(1,0),e}function aee(e,s,a,r){var n=Ye(9);return fh(n,e,s),eL(a,r||"b",n),n}function ree(e,s,a){var r=Ye(8+2*a.length);return fh(r,e,s),r.write_shift(1,a.length),r.write_shift(a.length,a,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function nee(e,s,a,r){if(s.v!=null)switch(s.t){case"d":case"n":var n=s.t=="d"?hr(ya(s.v)):s.v;n==(n|0)&&n>=0&&n<65536?mt(e,2,tW(a,r,n)):mt(e,3,ZG(a,r,n));return;case"b":case"e":mt(e,5,aee(a,r,s.v,s.t));return;case"s":case"str":mt(e,4,ree(a,r,(s.v||"").slice(0,255)));return}mt(e,1,fh(null,a,r))}function iee(e,s,a,r){var n=Array.isArray(s),i=Rs(s["!ref"]||"A1"),l,o="",d=[];if(i.e.c>255||i.e.r>16383){if(r.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=rs(i)}for(var u=i.s.r;u<=i.e.r;++u){o=Ha(u);for(var h=i.s.c;h<=i.e.c;++h){u===i.s.r&&(d[h]=ka(h)),l=d[h]+o;var f=n?(s[u]||[])[h]:s[l];f&&nee(e,f,u,h)}}}function lee(e,s){for(var a=s||{},r=pn(),n=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==a.sheet&&(n=i);if(n==0&&a.sheet&&e.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return mt(r,a.biff==4?1033:a.biff==3?521:9,zA(e,16,a)),iee(r,e.Sheets[e.SheetNames[n]],n,a),mt(r,10),r.end()}function oee(e,s,a){mt(e,49,tG({sz:12,name:"Arial"},a))}function cee(e,s,a){s&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&mt(e,1054,lG(n,s[n],a))})}function dee(e,s){var a=Ye(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),mt(e,2151,a),a=Ye(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),nL(Rs(s["!ref"]||"A1"),a),a.write_shift(4,4),mt(e,2152,a)}function uee(e,s){for(var a=0;a<16;++a)mt(e,224,vO({numFmtId:0,style:!0},0,s));s.cellXfs.forEach(function(r){mt(e,224,vO(r,0,s))})}function mee(e,s){for(var a=0;a<s["!links"].length;++a){var r=s["!links"][a];mt(e,440,DG(r)),r[1].Tooltip&&mt(e,2048,LG(r))}delete s["!links"]}function fee(e,s){if(s){var a=0;s.forEach(function(r,n){++a<=256&&r&&mt(e,125,qG(tb(n,r),n))})}}function hee(e,s,a,r,n){var i=16+tc(n.cellXfs,s,n);if(s.v==null&&!s.bf){mt(e,513,sd(a,r,i));return}if(s.bf)mt(e,6,zJ(s,a,r,n,i));else switch(s.t){case"d":case"n":var l=s.t=="d"?hr(ya(s.v)):s.v;mt(e,515,vG(a,r,l,i));break;case"b":case"e":mt(e,517,gG(a,r,s.v,i,n,s.t));break;case"s":case"str":if(n.bookSST){var o=QA(n.Strings,s.v,n.revStrings);mt(e,253,aG(a,r,o,i))}else mt(e,516,nG(a,r,(s.v||"").slice(0,255),i,n));break;default:mt(e,513,sd(a,r,i))}}function xee(e,s,a){var r=pn(),n=a.SheetNames[e],i=a.Sheets[n]||{},l=(a||{}).Workbook||{},o=(l.Sheets||[])[e]||{},d=Array.isArray(i),u=s.biff==8,h,f="",x=[],p=Rs(i["!ref"]||"A1"),v=u?65536:16384;if(p.e.c>255||p.e.r>=v){if(s.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}mt(r,2057,zA(a,16,s)),mt(r,13,li(1)),mt(r,12,li(100)),mt(r,15,sn(!0)),mt(r,17,sn(!1)),mt(r,16,ed(.001)),mt(r,95,sn(!0)),mt(r,42,sn(!1)),mt(r,43,sn(!1)),mt(r,130,li(1)),mt(r,128,pG()),mt(r,131,sn(!1)),mt(r,132,sn(!1)),u&&fee(r,i["!cols"]),mt(r,512,cG(p,s)),u&&(i["!links"]=[]);for(var b=p.s.r;b<=p.e.r;++b){f=Ha(b);for(var y=p.s.c;y<=p.e.c;++y){b===p.s.r&&(x[y]=ka(y)),h=x[y]+f;var j=d?(i[b]||[])[y]:i[h];j&&(hee(r,j,b,y,s),u&&j.l&&i["!links"].push([h,j.l]))}}var w=o.CodeName||o.name||n;return u&&mt(r,574,XV((l.Views||[])[0])),u&&(i["!merges"]||[]).length&&mt(r,229,_G(i["!merges"])),u&&mee(r,i),mt(r,442,tL(w)),u&&dee(r,i),mt(r,10),r.end()}function pee(e,s,a){var r=pn(),n=(e||{}).Workbook||{},i=n.Sheets||[],l=n.WBProps||{},o=a.biff==8,d=a.biff==5;if(mt(r,2057,zA(e,5,a)),a.bookType=="xla"&&mt(r,135),mt(r,225,o?li(1200):null),mt(r,193,gV(2)),d&&mt(r,191),d&&mt(r,192),mt(r,226),mt(r,92,UV("SheetJS",a)),mt(r,66,li(o?1200:1252)),o&&mt(r,353,li(0)),o&&mt(r,448),mt(r,317,GG(e.SheetNames.length)),o&&e.vbaraw&&mt(r,211),o&&e.vbaraw){var u=l.CodeName||"ThisWorkbook";mt(r,442,tL(u))}mt(r,156,li(17)),mt(r,25,sn(!1)),mt(r,18,sn(!1)),mt(r,19,li(0)),o&&mt(r,431,sn(!1)),o&&mt(r,444,li(0)),mt(r,61,JV()),mt(r,64,sn(!1)),mt(r,141,li(0)),mt(r,34,sn(QX(e)=="true")),mt(r,14,sn(!0)),o&&mt(r,439,sn(!1)),mt(r,218,li(0)),oee(r,e,a),cee(r,e.SSF,a),uee(r,a),o&&mt(r,352,sn(!1));var h=r.end(),f=pn();o&&mt(f,140,UG()),o&&a.Strings&&see(f,252,HV(a.Strings)),mt(f,10);var x=f.end(),p=pn(),v=0,b=0;for(b=0;b<e.SheetNames.length;++b)v+=(o?12:11)+(o?2:1)*e.SheetNames[b].length;var y=h.length+v+x.length;for(b=0;b<e.SheetNames.length;++b){var j=i[b]||{};mt(p,133,$V({pos:y,hs:j.Hidden||0,dt:0,name:e.SheetNames[b]},a)),y+=s[b].length}var w=p.end();if(v!=w.length)throw new Error("BS8 "+v+" != "+w.length);var S=[];return h.length&&S.push(h),w.length&&S.push(w),x.length&&S.push(x),vr(S)}function gee(e,s){var a=s||{},r=[];e&&!e.SSF&&(e.SSF=Na(Ht)),e&&e.SSF&&(u0(),Qg(e.SSF),a.revssf=Jg(e.SSF),a.revssf[e.SSF[65535]]=0,a.ssf=e.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,eE(a),a.cellXfs=[],tc(a.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var n=0;n<e.SheetNames.length;++n)r[r.length]=xee(n,a,e);return r.unshift(pee(e,r,a)),vr(r)}function WL(e,s){for(var a=0;a<=e.SheetNames.length;++a){var r=e.Sheets[e.SheetNames[a]];if(!(!r||!r["!ref"])){var n=vn(r["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var i=s||{};switch(i.biff||2){case 8:case 5:return gee(e,s);case 4:case 3:case 2:return lee(e,s)}throw new Error("invalid type "+i.bookType+" for BIFF")}function PO(e,s){var a=s||{},r=a.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=n.index,o=i&&i.index||e.length,d=tH(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,h=0,f=0,x=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(l=0;l<d.length;++l){var b=d[l].trim(),y=b.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,a.sheetRows&&a.sheetRows<=u){--u;break}h=0;continue}if(!(y!="<td"&&y!="<th")){var j=b.split(/<\/t[dh]>/i);for(o=0;o<j.length;++o){var w=j[o].trim();if(w.match(/<t[dh]/i)){for(var S=w,O=0;S.charAt(0)=="<"&&(O=S.indexOf(">"))>-1;)S=S.slice(O+1);for(var _=0;_<v.length;++_){var E=v[_];E.s.c==h&&E.s.r<u&&u<=E.e.r&&(h=E.e.c+1,_=-1)}var A=Qt(w.slice(0,w.indexOf(">")));x=A.colspan?+A.colspan:1,((f=+A.rowspan)>1||x>1)&&v.push({s:{r:u,c:h},e:{r:u+(f||1)-1,c:h+x-1}});var D=A.t||A["data-t"]||"";if(!S.length){h+=x;continue}if(S=b8(S),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>h&&(p.s.c=h),p.e.c<h&&(p.e.c=h),!S.length){h+=x;continue}var L={t:"s",v:S};a.raw||!S.trim().length||D=="s"||(S==="TRUE"?L={t:"b",v:!0}:S==="FALSE"?L={t:"b",v:!1}:isNaN(Ri(S))?isNaN(Du(S).getDate())||(L={t:"d",v:ya(S)},a.cellDates||(L={t:"n",v:hr(L.v)}),L.z=a.dateNF||Ht[14]):L={t:"n",v:Ri(S)}),a.dense?(r[u]||(r[u]=[]),r[u][h]=L):r[Vt({r:u,c:h})]=L,h+=x}}}}return r["!ref"]=rs(p),v.length&&(r["!merges"]=v),r}function bee(e,s,a,r){for(var n=e["!merges"]||[],i=[],l=s.s.c;l<=s.e.c;++l){for(var o=0,d=0,u=0;u<n.length;++u)if(!(n[u].s.r>a||n[u].s.c>l)&&!(n[u].e.r<a||n[u].e.c<l)){if(n[u].s.r<a||n[u].s.c<l){o=-1;break}o=n[u].e.r-n[u].s.r+1,d=n[u].e.c-n[u].s.c+1;break}if(!(o<0)){var h=Vt({r:a,c:l}),f=r.dense?(e[a]||[])[l]:e[h],x=f&&f.v!=null&&(f.h||CA(f.w||($l(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),d>1&&(p.colspan=d),r.editable?x='<span contenteditable="true">'+x+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+f.l.Target+'">'+x+"</a>")),p.id=(r.id||"sjs")+"-"+h,i.push(ut("td",x,p))}}var v="<tr>";return v+i.join("")+"</tr>"}var vee='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',yee="</body></html>";function Nee(e,s){var a=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!a||a.length==0)throw new Error("Invalid HTML: could not find <table>");if(a.length==1)return ec(PO(a[0],s),s);var r=aE();return a.forEach(function(n,i){rE(r,PO(n,s),"Sheet"+(i+1))}),r}function jee(e,s,a){var r=[];return r.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function QL(e,s){var a=s||{},r=a.header!=null?a.header:vee,n=a.footer!=null?a.footer:yee,i=[r],l=vn(e["!ref"]);a.dense=Array.isArray(e),i.push(jee(e,l,a));for(var o=l.s.r;o<=l.e.r;++o)i.push(bee(e,l,o,a));return i.push("</table>"+n),i.join("")}function KL(e,s,a){var r=a||{},n=0,i=0;if(r.origin!=null)if(typeof r.origin=="number")n=r.origin;else{var l=typeof r.origin=="string"?Oa(r.origin):r.origin;n=l.r,i=l.c}var o=s.getElementsByTagName("tr"),d=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:n,c:i}};if(e["!ref"]){var h=vn(e["!ref"]);u.s.r=Math.min(u.s.r,h.s.r),u.s.c=Math.min(u.s.c,h.s.c),u.e.r=Math.max(u.e.r,h.e.r),u.e.c=Math.max(u.e.c,h.e.c),n==-1&&(u.e.r=n=h.e.r+1)}var f=[],x=0,p=e["!rows"]||(e["!rows"]=[]),v=0,b=0,y=0,j=0,w=0,S=0;for(e["!cols"]||(e["!cols"]=[]);v<o.length&&b<d;++v){var O=o[v];if(DO(O)){if(r.display)continue;p[b]={hidden:!0}}var _=O.children;for(y=j=0;y<_.length;++y){var E=_[y];if(!(r.display&&DO(E))){var A=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):b8(E.innerHTML),D=E.getAttribute("data-z")||E.getAttribute("z");for(x=0;x<f.length;++x){var L=f[x];L.s.c==j+i&&L.s.r<b+n&&b+n<=L.e.r&&(j=L.e.c+1-i,x=-1)}S=+E.getAttribute("colspan")||1,((w=+E.getAttribute("rowspan")||1)>1||S>1)&&f.push({s:{r:b+n,c:j+i},e:{r:b+n+(w||1)-1,c:j+i+(S||1)-1}});var B={t:"s",v:A},I=E.getAttribute("data-t")||E.getAttribute("t")||"";A!=null&&(A.length==0?B.t=I||"z":r.raw||A.trim().length==0||I=="s"||(A==="TRUE"?B={t:"b",v:!0}:A==="FALSE"?B={t:"b",v:!1}:isNaN(Ri(A))?isNaN(Du(A).getDate())||(B={t:"d",v:ya(A)},r.cellDates||(B={t:"n",v:hr(B.v)}),B.z=r.dateNF||Ht[14]):B={t:"n",v:Ri(A)})),B.z===void 0&&D!=null&&(B.z=D);var T="",z=E.getElementsByTagName("A");if(z&&z.length)for(var k=0;k<z.length&&!(z[k].hasAttribute("href")&&(T=z[k].getAttribute("href"),T.charAt(0)!="#"));++k);T&&T.charAt(0)!="#"&&(B.l={Target:T}),r.dense?(e[b+n]||(e[b+n]=[]),e[b+n][j+i]=B):e[Vt({c:j+i,r:b+n})]=B,u.e.c<j+i&&(u.e.c=j+i),j+=S}}++b}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,b-1+n),e["!ref"]=rs(u),b>=d&&(e["!fullref"]=rs((u.e.r=o.length-v+b-1+n,u))),e}function JL(e,s){var a=s||{},r=a.dense?[]:{};return KL(r,e,s)}function wee(e,s){return ec(JL(e,s),s)}function DO(e){var s="",a=See(e);return a&&(s=a(e).getPropertyValue("display")),s||(s=e.style&&e.style.display),s==="none"}function See(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Aee(e){var s=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),a=Os(s.replace(/<[^>]*>/g,""));return[a]}var MO={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function YL(e,s){var a=s||{},r=TA(e),n=[],i,l,o={name:""},d="",u=0,h,f,x={},p=[],v=a.dense?[]:{},b,y,j={value:""},w="",S=0,O=[],_=-1,E=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},D=0,L={},B=[],I={},T=0,z=0,k=[],F=1,P=1,G=[],Y={Names:[]},W={},ee=["",""],H=[],M={},X="",K=0,Q=!1,se=!1,V=0;for(uf.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");b=uf.exec(r);)switch(b[3]=b[3].replace(/_.*$/,"")){case"table":case"":b[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?v["!ref"]=rs(A):v["!ref"]="A1:A1",a.sheetRows>0&&a.sheetRows<=A.e.r&&(v["!fullref"]=v["!ref"],A.e.r=a.sheetRows-1,v["!ref"]=rs(A)),B.length&&(v["!merges"]=B),k.length&&(v["!rows"]=k),h.name=h.||h.name,typeof JSON<"u"&&JSON.stringify(h),p.push(h.name),x[h.name]=v,se=!1):b[0].charAt(b[0].length-2)!=="/"&&(h=Qt(b[0],!1),_=E=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,v=a.dense?[]:{},B=[],k=[],se=!0);break;case"table-row-group":b[1]==="/"?--D:++D;break;case"table-row":case"":if(b[1]==="/"){_+=F,F=1;break}if(f=Qt(b[0],!1),f.?_=f.-1:_==-1&&(_=0),F=+f["number-rows-repeated"]||1,F<10)for(V=0;V<F;++V)D>0&&(k[_+V]={level:D});E=-1;break;case"covered-table-cell":b[1]!=="/"&&++E,a.sheetStubs&&(a.dense?(v[_]||(v[_]=[]),v[_][E]={t:"z"}):v[Vt({r:_,c:E})]={t:"z"}),w="",O=[];break;case"table-cell":case"":if(b[0].charAt(b[0].length-2)==="/")++E,j=Qt(b[0],!1),P=parseInt(j["number-columns-repeated"]||"1",10),y={t:"z",v:null},j.formula&&a.cellFormula!=!1&&(y.f=OO(Os(j.formula))),(j.||j["value-type"])=="string"&&(y.t="s",y.v=Os(j["string-value"]||""),a.dense?(v[_]||(v[_]=[]),v[_][E]=y):v[Vt({r:_,c:E})]=y),E+=P-1;else if(b[1]!=="/"){++E,w="",S=0,O=[],P=1;var te=F?_+F-1:_;if(E>A.e.c&&(A.e.c=E),E<A.s.c&&(A.s.c=E),_<A.s.r&&(A.s.r=_),te>A.e.r&&(A.e.r=te),j=Qt(b[0],!1),H=[],M={},y={t:j.||j["value-type"],v:null},a.cellFormula)if(j.formula&&(j.formula=Os(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(T=parseInt(j["number-matrix-rows-spanned"],10)||0,z=parseInt(j["number-matrix-columns-spanned"],10)||0,I={s:{r:_,c:E},e:{r:_+T-1,c:E+z-1}},y.F=rs(I),G.push([I,y.F])),j.formula)y.f=OO(j.formula);else for(V=0;V<G.length;++V)_>=G[V][0].s.r&&_<=G[V][0].e.r&&E>=G[V][0].s.c&&E<=G[V][0].e.c&&(y.F=G[V][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(T=parseInt(j["number-rows-spanned"],10)||0,z=parseInt(j["number-columns-spanned"],10)||0,I={s:{r:_,c:E},e:{r:_+T-1,c:E+z-1}},B.push(I)),j["number-columns-repeated"]&&(P=parseInt(j["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=ba(j["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(j.value);break;case"percentage":y.t="n",y.v=parseFloat(j.value);break;case"currency":y.t="n",y.v=parseFloat(j.value);break;case"date":y.t="d",y.v=ya(j["date-value"]),a.cellDates||(y.t="n",y.v=hr(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=X9(j["time-value"])/86400,a.cellDates&&(y.t="d",y.v=Yg(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(j.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",j["string-value"]!=null&&(w=Os(j["string-value"]),O=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(Q=!1,y.t==="s"&&(y.v=w||"",O.length&&(y.R=O),Q=S==0),W.Target&&(y.l=W),H.length>0&&(y.c=H,H=[]),w&&a.cellText!==!1&&(y.w=w),Q&&(y.t="z",delete y.v),(!Q||a.sheetStubs)&&!(a.sheetRows&&a.sheetRows<=_))for(var Z=0;Z<F;++Z){if(P=parseInt(j["number-columns-repeated"]||"1",10),a.dense)for(v[_+Z]||(v[_+Z]=[]),v[_+Z][E]=Z==0?y:Na(y);--P>0;)v[_+Z][E+P]=Na(y);else for(v[Vt({r:_+Z,c:E})]=y;--P>0;)v[Vt({r:_+Z,c:E+P})]=Na(y);A.e.c<=E&&(A.e.c=E)}P=parseInt(j["number-columns-repeated"]||"1",10),E+=P-1,P=0,y={},w="",O=[]}W={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(b[1]==="/"){if((i=n.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&n.push([b[3],!0]);break;case"annotation":if(b[1]==="/"){if((i=n.pop())[0]!==b[3])throw"Bad state: "+i;M.t=w,O.length&&(M.R=O),M.a=X,H.push(M)}else b[0].charAt(b[0].length-2)!=="/"&&n.push([b[3],!1]);X="",K=0,w="",S=0,O=[];break;case"creator":b[1]==="/"?X=r.slice(K,b.index):K=b.index+b[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(b[1]==="/"){if((i=n.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&n.push([b[3],!1]);w="",S=0,O=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(b[1]==="/"){if(L[o.name]=d,(i=n.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&(d="",o=Qt(b[0],!1),n.push([b[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Qt(b[0],!1),d+=MO[b[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Qt(b[0],!1),d+=MO[b[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(b[0].slice(-2)==="/>")break;if(b[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":d+=r.slice(u,b.index);break}else u=b.index+b[0].length;break;case"named-range":l=Qt(b[0],!1),ee=o1(l["cell-range-address"]);var ue={Name:l.name,Ref:ee[0]+"!"+ee[1]};se&&(ue.Sheet=p.length),Y.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(b[1]==="/"&&(!j||!j["string-value"])){var re=Aee(r.slice(S,b.index));w=(w.length>0?w+`
`:"")+re[0]}else Qt(b[0],!1),S=b.index+b[0].length;break;case"s":break;case"database-range":if(b[1]==="/")break;try{ee=o1(Qt(b[0])["target-range-address"]),x[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(b[1]!=="/"){if(W=Qt(b[0],!1),!W.href)break;W.Target=Os(W.href),delete W.href,W.Target.charAt(0)=="#"&&W.Target.indexOf(".")>-1?(ee=o1(W.Target.slice(1)),W.Target="#"+ee[0]+"!"+ee[1]):W.Target.match(/^\.\.[\\\/]/)&&(W.Target=W.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(b[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(a.WTF)throw new Error(b)}}var J={Sheets:x,SheetNames:p,Workbook:Y};return a.bookSheets&&delete J.Sheets,J}function LO(e,s){s=s||{},ii(e,"META-INF/manifest.xml")&&XH(Xa(e,"META-INF/manifest.xml"),s);var a=Dn(e,"content.xml");if(!a)throw new Error("Missing content.xml in ODS / UOF file");var r=YL(da(a),s);return ii(e,"meta.xml")&&(r.Props=$8(Xa(e,"meta.xml"))),r}function FO(e,s){return YL(e,s)}var Eee=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),s="<office:document-styles "+df({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Va+s}})(),UO=(function(){var e=function(i){return ea(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},s=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,r=function(i,l,o){var d=[];d.push('      <table:table table:name="'+ea(l.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,h=0,f=vn(i["!ref"]||"A1"),x=i["!merges"]||[],p=0,v=Array.isArray(i);if(i["!cols"])for(h=0;h<=f.e.c;++h)d.push("        <table:table-column"+(i["!cols"][h]?' table:style-name="co'+i["!cols"][h].ods+'"':"")+`></table:table-column>
`);var b="",y=i["!rows"]||[];for(u=0;u<f.s.r;++u)b=y[u]?' table:style-name="ro'+y[u].ods+'"':"",d.push("        <table:table-row"+b+`></table:table-row>
`);for(;u<=f.e.r;++u){for(b=y[u]?' table:style-name="ro'+y[u].ods+'"':"",d.push("        <table:table-row"+b+`>
`),h=0;h<f.s.c;++h)d.push(s);for(;h<=f.e.c;++h){var j=!1,w={},S="";for(p=0;p!=x.length;++p)if(!(x[p].s.c>h)&&!(x[p].s.r>u)&&!(x[p].e.c<h)&&!(x[p].e.r<u)){(x[p].s.c!=h||x[p].s.r!=u)&&(j=!0),w["table:number-columns-spanned"]=x[p].e.c-x[p].s.c+1,w["table:number-rows-spanned"]=x[p].e.r-x[p].s.r+1;break}if(j){d.push(a);continue}var O=Vt({r:u,c:h}),_=v?(i[u]||[])[h]:i[O];if(_&&_.f&&(w["table:formula"]=ea(GJ(_.f)),_.F&&_.F.slice(0,O.length)==O)){var E=vn(_.F);w["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,w["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!_){d.push(s);continue}switch(_.t){case"b":S=_.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=_.v?"true":"false";break;case"n":S=_.w||String(_.v||0),w["office:value-type"]="float",w["office:value"]=_.v||0;break;case"s":case"str":S=_.v==null?"":_.v,w["office:value-type"]="string";break;case"d":S=_.w||ya(_.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=ya(_.v).toISOString(),w["table:style-name"]="ce1";break;default:d.push(s);continue}var A=e(S);if(_.l&&_.l.Target){var D=_.l.Target;D=D.charAt(0)=="#"?"#"+WJ(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),A=ut("text:a",A,{"xlink:href":D.replace(/&/g,"&amp;")})}d.push("          "+ut("table:table-cell",ut("text:p",A,{}),w)+`
`)}d.push(`        </table:table-row>
`)}return d.push(`      </table:table>
`),d.join("")},n=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var h=0;h<u["!cols"].length;++h)if(u["!cols"][h]){var f=u["!cols"][h];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Ho(f),f.ods=o;var x=u["!cols"][h].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),i.push(`  </style:style>
`),++o}}});var d=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var h=0;h<u["!rows"].length;++h)if(u["!rows"][h]){u["!rows"][h].ods=d;var f=u["!rows"][h].hpx+"px";i.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++d}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var d=[Va],u=df({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=df({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(d.push("<office:document"+u+h+`>
`),d.push(B8().replace(/office:document-meta/g,"office:meta"))):d.push("<office:document-content"+u+`>
`),n(d,l),d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`);for(var f=0;f!=l.SheetNames.length;++f)d.push(r(l.Sheets[l.SheetNames[f]],l,f));return d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),o.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}})();function XL(e,s){if(s.bookType=="fods")return UO(e,s);var a=SA(),r="",n=[],i=[];return r="mimetype",os(a,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",os(a,r,UO(e,s)),n.push([r,"text/xml"]),i.push([r,"ContentFile"]),r="styles.xml",os(a,r,Eee(e,s)),n.push([r,"text/xml"]),i.push([r,"StylesFile"]),r="meta.xml",os(a,r,Va+B8()),n.push([r,"text/xml"]),i.push([r,"MetadataFile"]),r="manifest.rdf",os(a,r,tV(i)),n.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",os(a,r,ZH(n)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ad(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function US(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):da(Zo(e))}function Cee(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Pn(Ji(e))}function Tee(e,s){e:for(var a=0;a<=e.length-s.length;++a){for(var r=0;r<s.length;++r)if(e[a+r]!=s[r])continue e;return!0}return!1}function Go(e){var s=e.reduce(function(n,i){return n+i.length},0),a=new Uint8Array(s),r=0;return e.forEach(function(n){a.set(n,r),r+=n.length}),a}function zO(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function _ee(e,s){for(var a=(e[s+15]&127)<<7|e[s+14]>>1,r=e[s+14]&1,n=s+13;n>=s;--n)r=r*256+e[n];return(e[s+15]&128?-r:r)*Math.pow(10,a-6176)}function kee(e,s,a){var r=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,n=a/Math.pow(10,r-6176);e[s+15]|=r>>7,e[s+14]|=(r&127)<<1;for(var i=0;n>=1;++i,n/=256)e[s+i]=n&255;e[s+15]|=a>=0?0:128}function bf(e,s){var a=s?s[0]:0,r=e[a]&127;e:if(e[a++]>=128&&(r|=(e[a]&127)<<7,e[a++]<128||(r|=(e[a]&127)<<14,e[a++]<128)||(r|=(e[a]&127)<<21,e[a++]<128)||(r+=(e[a]&127)*Math.pow(2,28),++a,e[a++]<128)||(r+=(e[a]&127)*Math.pow(2,35),++a,e[a++]<128)||(r+=(e[a]&127)*Math.pow(2,42),++a,e[a++]<128)))break e;return s&&(s[0]=a),r}function Xs(e){var s=new Uint8Array(7);s[0]=e&127;var a=1;e:if(e>127){if(s[a-1]|=128,s[a]=e>>7&127,++a,e<=16383||(s[a-1]|=128,s[a]=e>>14&127,++a,e<=2097151)||(s[a-1]|=128,s[a]=e>>21&127,++a,e<=268435455)||(s[a-1]|=128,s[a]=e/256>>>21&127,++a,e<=34359738367)||(s[a-1]|=128,s[a]=e/65536>>>21&127,++a,e<=4398046511103))break e;s[a-1]|=128,s[a]=e/16777216>>>21&127,++a}return s.slice(0,a)}function La(e){var s=0,a=e[s]&127;e:if(e[s++]>=128){if(a|=(e[s]&127)<<7,e[s++]<128||(a|=(e[s]&127)<<14,e[s++]<128)||(a|=(e[s]&127)<<21,e[s++]<128))break e;a|=(e[s]&127)<<28}return a}function zs(e){for(var s=[],a=[0];a[0]<e.length;){var r=a[0],n=bf(e,a),i=n&7;n=Math.floor(n/8);var l=0,o;if(n==0)break;switch(i){case 0:{for(var d=a[0];e[a[0]++]>=128;);o=e.slice(d,a[0])}break;case 5:l=4,o=e.slice(a[0],a[0]+l),a[0]+=l;break;case 1:l=8,o=e.slice(a[0],a[0]+l),a[0]+=l;break;case 2:l=bf(e,a),o=e.slice(a[0],a[0]+l),a[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(r))}var u={data:o,type:i};s[n]==null?s[n]=[u]:s[n].push(u)}return s}function Tr(e){var s=[];return e.forEach(function(a,r){a.forEach(function(n){n.data&&(s.push(Xs(r*8+n.type)),n.type==2&&s.push(Xs(n.data.length)),s.push(n.data))})}),Go(s)}function XA(e,s){return(e==null?void 0:e.map(function(a){return s(a.data)}))||[]}function ai(e){for(var s,a=[],r=[0];r[0]<e.length;){var n=bf(e,r),i=zs(e.slice(r[0],r[0]+n));r[0]+=n;var l={id:La(i[1][0].data),messages:[]};i[2].forEach(function(o){var d=zs(o.data),u=La(d[3][0].data);l.messages.push({meta:d,data:e.slice(r[0],r[0]+u)}),r[0]+=u}),(s=i[3])!=null&&s[0]&&(l.merge=La(i[3][0].data)>>>0>0),a.push(l)}return a}function nu(e){var s=[];return e.forEach(function(a){var r=[];r[1]=[{data:Xs(a.id),type:0}],r[2]=[],a.merge!=null&&(r[3]=[{data:Xs(+!!a.merge),type:0}]);var n=[];a.messages.forEach(function(l){n.push(l.data),l.meta[3]=[{type:0,data:Xs(l.data.length)}],r[2].push({data:Tr(l.meta),type:2})});var i=Tr(r);s.push(Xs(i.length)),s.push(i),n.forEach(function(l){return s.push(l)})}),Go(s)}function Oee(e,s){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var a=[0],r=bf(s,a),n=[];a[0]<s.length;){var i=s[a[0]]&3;if(i==0){var l=s[a[0]++]>>2;if(l<60)++l;else{var o=l-59;l=s[a[0]],o>1&&(l|=s[a[0]+1]<<8),o>2&&(l|=s[a[0]+2]<<16),o>3&&(l|=s[a[0]+3]<<24),l>>>=0,l++,a[0]+=o}n.push(s.slice(a[0],a[0]+l)),a[0]+=l;continue}else{var d=0,u=0;if(i==1?(u=(s[a[0]]>>2&7)+4,d=(s[a[0]++]&224)<<3,d|=s[a[0]++]):(u=(s[a[0]++]>>2)+1,i==2?(d=s[a[0]]|s[a[0]+1]<<8,a[0]+=2):(d=(s[a[0]]|s[a[0]+1]<<8|s[a[0]+2]<<16|s[a[0]+3]<<24)>>>0,a[0]+=4)),n=[Go(n)],d==0)throw new Error("Invalid offset 0");if(d>n[0].length)throw new Error("Invalid offset beyond length");if(u>=d)for(n.push(n[0].slice(-d)),u-=d;u>=n[n.length-1].length;)n.push(n[n.length-1]),u-=n[n.length-1].length;n.push(n[0].slice(-d,-d+u))}}var h=Go(n);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function ri(e){for(var s=[],a=0;a<e.length;){var r=e[a++],n=e[a]|e[a+1]<<8|e[a+2]<<16;a+=3,s.push(Oee(r,e.slice(a,a+n))),a+=n}if(a!==e.length)throw new Error("data is not a valid framed stream!");return Go(s)}function iu(e){for(var s=[],a=0;a<e.length;){var r=Math.min(e.length-a,268435455),n=new Uint8Array(4);s.push(n);var i=Xs(r),l=i.length;s.push(i),r<=60?(l++,s.push(new Uint8Array([r-1<<2]))):r<=256?(l+=2,s.push(new Uint8Array([240,r-1&255]))):r<=65536?(l+=3,s.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(l+=4,s.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(l+=5,s.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),s.push(e.slice(a,a+r)),l+=r,n[0]=0,n[1]=l&255,n[2]=l>>8&255,n[3]=l>>16&255,a+=r}return Go(s)}function Iee(e,s,a,r){var n=ad(e),i=n.getUint32(4,!0),l=(r>1?12:8)+zO(i&(r>1?3470:398))*4,o=-1,d=-1,u=NaN,h=new Date(2001,0,1);i&512&&(o=n.getUint32(l,!0),l+=4),l+=zO(i&(r>1?12288:4096))*4,i&16&&(d=n.getUint32(l,!0),l+=4),i&32&&(u=n.getFloat64(l,!0),l+=8),i&64&&(h.setTime(h.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:s[d]};break;case 5:f={t:"d",v:h};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:a[o]};else if(d>-1)f={t:"s",v:s[d]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Ree(e,s,a){var r=ad(e),n=r.getUint32(8,!0),i=12,l=-1,o=-1,d=NaN,u=NaN,h=new Date(2001,0,1);n&1&&(d=_ee(e,i),i+=16),n&2&&(u=r.getFloat64(i,!0),i+=8),n&4&&(h.setTime(h.getTime()+r.getFloat64(i,!0)*1e3),i+=8),n&8&&(o=r.getUint32(i,!0),i+=4),n&16&&(l=r.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:s[o]};break;case 5:f={t:"d",v:h};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:a[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return f}function d1(e,s){var a=new Uint8Array(32),r=ad(a),n=12,i=0;switch(a[0]=5,e.t){case"n":a[1]=2,kee(a,n,e.v),i|=1,n+=16;break;case"b":a[1]=6,r.setFloat64(n,e.v?1:0,!0),i|=2,n+=8;break;case"s":if(s.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));a[1]=3,r.setUint32(n,s.indexOf(e.v),!0),i|=8,n+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,i,!0),a.slice(0,n)}function u1(e,s){var a=new Uint8Array(32),r=ad(a),n=12,i=0;switch(a[0]=3,e.t){case"n":a[2]=2,r.setFloat64(n,e.v,!0),i|=32,n+=8;break;case"b":a[2]=6,r.setFloat64(n,e.v?1:0,!0),i|=32,n+=8;break;case"s":if(s.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));a[2]=3,r.setUint32(n,s.indexOf(e.v),!0),i|=16,n+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,i,!0),a.slice(0,n)}function Pee(e,s,a){switch(e[0]){case 0:case 1:case 2:case 3:return Iee(e,s,a,e[0]);case 5:return Ree(e,s,a);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Br(e){var s=zs(e);return bf(s[1][0].data)}function BO(e,s){var a=zs(s.data),r=La(a[1][0].data),n=a[3],i=[];return(n||[]).forEach(function(l){var o=zs(l.data),d=La(o[1][0].data)>>>0;switch(r){case 1:i[d]=US(o[3][0].data);break;case 8:{var u=e[Br(o[9][0].data)][0],h=zs(u.data),f=e[Br(h[1][0].data)][0],x=La(f.meta[1][0].data);if(x!=2001)throw new Error("2000 unexpected reference to ".concat(x));var p=zs(f.data);i[d]=p[3].map(function(v){return US(v.data)}).join("")}break}}),i}function Dee(e,s){var a,r,n,i,l,o,d,u,h,f,x,p,v,b,y=zs(e),j=La(y[1][0].data)>>>0,w=La(y[2][0].data)>>>0,S=((r=(a=y[8])==null?void 0:a[0])==null?void 0:r.data)&&La(y[8][0].data)>0||!1,O,_;if((i=(n=y[7])==null?void 0:n[0])!=null&&i.data&&s!=0)O=(o=(l=y[7])==null?void 0:l[0])==null?void 0:o.data,_=(u=(d=y[6])==null?void 0:d[0])==null?void 0:u.data;else if((f=(h=y[4])==null?void 0:h[0])!=null&&f.data&&s!=1)O=(p=(x=y[4])==null?void 0:x[0])==null?void 0:p.data,_=(b=(v=y[3])==null?void 0:v[0])==null?void 0:b.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var E=S?4:1,A=ad(O),D=[],L=0;L<O.length/2;++L){var B=A.getUint16(L*2,!0);B<65535&&D.push([L,B])}if(D.length!=w)throw"Expected ".concat(w," cells, found ").concat(D.length);var I=[];for(L=0;L<D.length-1;++L)I[D[L][0]]=_.subarray(D[L][1]*E,D[L+1][1]*E);return D.length>=1&&(I[D[D.length-1][0]]=_.subarray(D[D.length-1][1]*E)),{R:j,cells:I}}function Mee(e,s){var a,r=zs(s.data),n=(a=r==null?void 0:r[7])!=null&&a[0]?La(r[7][0].data)>>>0>0?1:0:-1,i=XA(r[5],function(l){return Dee(l,n)});return{nrows:La(r[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(d,u){if(l[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));l[o.R][u]=d}),l},[])}}function Lee(e,s,a){var r,n=zs(s.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(La(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(La(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));a["!ref"]=rs(i);var l=zs(n[4][0].data),o=BO(e,e[Br(l[4][0].data)][0]),d=(r=l[17])!=null&&r[0]?BO(e,e[Br(l[17][0].data)][0]):[],u=zs(l[3][0].data),h=0;u[1].forEach(function(f){var x=zs(f.data),p=e[Br(x[2][0].data)][0],v=La(p.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var b=Mee(e,p);b.data.forEach(function(y,j){y.forEach(function(w,S){var O=Vt({r:h+j,c:S}),_=Pee(w,o,d);_&&(a[O]=_)})}),h+=b.nrows})}function Fee(e,s){var a=zs(s.data),r={"!ref":"A1"},n=e[Br(a[2][0].data)],i=La(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Lee(e,n[0],r),r}function Uee(e,s){var a,r=zs(s.data),n={name:(a=r[1])!=null&&a[0]?US(r[1][0].data):"",sheets:[]},i=XA(r[2],Br);return i.forEach(function(l){e[l].forEach(function(o){var d=La(o.meta[1][0].data);d==6e3&&n.sheets.push(Fee(e,o))})}),n}function zee(e,s){var a=aE(),r=zs(s.data),n=XA(r[1],Br);if(n.forEach(function(i){e[i].forEach(function(l){var o=La(l.meta[1][0].data);if(o==2){var d=Uee(e,l);d.sheets.forEach(function(u,h){rE(a,u,h==0?d.name:d.name+"_"+h,!0)})}})}),a.SheetNames.length==0)throw new Error("Empty NUMBERS file");return a}function m1(e){var s,a,r,n,i={},l=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var u;try{u=ri(d.content)}catch(f){return console.log("?? "+d.content.length+" "+(f.message||f))}var h;try{h=ai(u)}catch(f){return console.log("## "+(f.message||f))}h.forEach(function(f){i[f.id]=f.messages,l.push(f.id)})}}),!l.length)throw new Error("File has no messages");var o=((n=(r=(a=(s=i==null?void 0:i[1])==null?void 0:s[0])==null?void 0:a.meta)==null?void 0:r[1])==null?void 0:n[0].data)&&La(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(d){i[d].forEach(function(u){var h=La(u.meta[1][0].data)>>>0;if(h==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return zee(i,o)}function Bee(e,s,a){var r,n,i,l;if(!((r=e[6])!=null&&r[0])||!((n=e[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&La(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var d=0,u=ad(e[7][0].data),h=0,f=[],x=ad(e[4][0].data),p=0,v=[],b=0;b<s.length;++b){if(s[b]==null){u.setUint16(b*2,65535,!0),x.setUint16(b*2,65535);continue}u.setUint16(b*2,h,!0),x.setUint16(b*2,p,!0);var y,j;switch(typeof s[b]){case"string":y=d1({t:"s",v:s[b]},a),j=u1({t:"s",v:s[b]},a);break;case"number":y=d1({t:"n",v:s[b]},a),j=u1({t:"n",v:s[b]},a);break;case"boolean":y=d1({t:"b",v:s[b]},a),j=u1({t:"b",v:s[b]},a);break;default:throw new Error("Unsupported value "+s[b])}f.push(y),h+=y.length,v.push(j),p+=j.length,++d}for(e[2][0].data=Xs(d);b<e[7][0].data.length/2;++b)u.setUint16(b*2,65535,!0),x.setUint16(b*2,65535,!0);return e[6][0].data=Go(f),e[3][0].data=Go(v),d}function $ee(e,s){if(!s||!s.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=vn(a["!ref"]);r.s.r=r.s.c=0;var n=!1;r.e.c>9&&(n=!0,r.e.c=9),r.e.r>49&&(n=!0,r.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(rs(r)));var i=Bp(a,{range:r,header:1}),l=["~Sh33tJ5~"];i.forEach(function(X){return X.forEach(function(K){typeof K=="string"&&l.push(K)})});var o={},d=[],u=Ot.read(s.numbers,{type:"base64"});u.FileIndex.map(function(X,K){return[X,u.FullPaths[K]]}).forEach(function(X){var K=X[0],Q=X[1];if(K.type==2&&K.name.match(/\.iwa/)){var se=K.content,V=ri(se),te=ai(V);te.forEach(function(Z){d.push(Z.id),o[Z.id]={deps:[],location:Q,type:La(Z.messages[0].meta[1][0].data)}})}}),d.sort(function(X,K){return X-K});var h=d.filter(function(X){return X>1}).map(function(X){return[X,Xs(X)]});u.FileIndex.map(function(X,K){return[X,u.FullPaths[K]]}).forEach(function(X){var K=X[0];if(X[1],!!K.name.match(/\.iwa/)){var Q=ai(ri(K.content));Q.forEach(function(se){se.messages.forEach(function(V){h.forEach(function(te){se.messages.some(function(Z){return La(Z.meta[1][0].data)!=11006&&Tee(Z.data,te[1])})&&o[te[0]].deps.push(se.id)})})})}});for(var f=Ot.find(u,o[1].location),x=ai(ri(f.content)),p,v=0;v<x.length;++v){var b=x[v];b.id==1&&(p=b)}var y=Br(zs(p.messages[0].data)[1][0].data);for(f=Ot.find(u,o[y].location),x=ai(ri(f.content)),v=0;v<x.length;++v)b=x[v],b.id==y&&(p=b);for(y=Br(zs(p.messages[0].data)[2][0].data),f=Ot.find(u,o[y].location),x=ai(ri(f.content)),v=0;v<x.length;++v)b=x[v],b.id==y&&(p=b);for(y=Br(zs(p.messages[0].data)[2][0].data),f=Ot.find(u,o[y].location),x=ai(ri(f.content)),v=0;v<x.length;++v)b=x[v],b.id==y&&(p=b);var j=zs(p.messages[0].data);{j[6][0].data=Xs(r.e.r+1),j[7][0].data=Xs(r.e.c+1);var w=Br(j[46][0].data),S=Ot.find(u,o[w].location),O=ai(ri(S.content));{for(var _=0;_<O.length&&O[_].id!=w;++_);if(O[_].id!=w)throw"Bad ColumnRowUIDMapArchive";var E=zs(O[_].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var A=0;A<=r.e.c;++A){var D=[];D[1]=D[2]=[{type:0,data:Xs(A+420690)}],E[1].push({type:2,data:Tr(D)}),E[2].push({type:0,data:Xs(A)}),E[3].push({type:0,data:Xs(A)})}E[4]=[],E[5]=[],E[6]=[];for(var L=0;L<=r.e.r;++L)D=[],D[1]=D[2]=[{type:0,data:Xs(L+726270)}],E[4].push({type:2,data:Tr(D)}),E[5].push({type:0,data:Xs(L)}),E[6].push({type:0,data:Xs(L)});O[_].messages[0].data=Tr(E)}S.content=iu(nu(O)),S.size=S.content.length,delete j[46];var B=zs(j[4][0].data);{B[7][0].data=Xs(r.e.r+1);var I=zs(B[1][0].data),T=Br(I[2][0].data);S=Ot.find(u,o[T].location),O=ai(ri(S.content));{if(O[0].id!=T)throw"Bad HeaderStorageBucket";var z=zs(O[0].messages[0].data);for(L=0;L<i.length;++L){var k=zs(z[2][0].data);k[1][0].data=Xs(L),k[4][0].data=Xs(i[L].length),z[2][L]={type:z[2][0].type,data:Tr(k)}}O[0].messages[0].data=Tr(z)}S.content=iu(nu(O)),S.size=S.content.length;var F=Br(B[2][0].data);S=Ot.find(u,o[F].location),O=ai(ri(S.content));{if(O[0].id!=F)throw"Bad HeaderStorageBucket";for(z=zs(O[0].messages[0].data),A=0;A<=r.e.c;++A)k=zs(z[2][0].data),k[1][0].data=Xs(A),k[4][0].data=Xs(r.e.r+1),z[2][A]={type:z[2][0].type,data:Tr(k)};O[0].messages[0].data=Tr(z)}S.content=iu(nu(O)),S.size=S.content.length;var P=Br(B[4][0].data);(function(){for(var X=Ot.find(u,o[P].location),K=ai(ri(X.content)),Q,se=0;se<K.length;++se){var V=K[se];V.id==P&&(Q=V)}var te=zs(Q.messages[0].data);{te[3]=[];var Z=[];l.forEach(function(J,Ne){Z[1]=[{type:0,data:Xs(Ne)}],Z[2]=[{type:0,data:Xs(1)}],Z[3]=[{type:2,data:Cee(J)}],te[3].push({type:2,data:Tr(Z)})})}Q.messages[0].data=Tr(te);var ue=nu(K),re=iu(ue);X.content=re,X.size=X.content.length})();var G=zs(B[3][0].data);{var Y=G[1][0];delete G[2];var W=zs(Y.data);{var ee=Br(W[2][0].data);(function(){for(var X=Ot.find(u,o[ee].location),K=ai(ri(X.content)),Q,se=0;se<K.length;++se){var V=K[se];V.id==ee&&(Q=V)}var te=zs(Q.messages[0].data);{delete te[6],delete G[7];var Z=new Uint8Array(te[5][0].data);te[5]=[];for(var ue=0,re=0;re<=r.e.r;++re){var J=zs(Z);ue+=Bee(J,i[re],l),J[1][0].data=Xs(re),te[5].push({data:Tr(J),type:2})}te[1]=[{type:0,data:Xs(r.e.c+1)}],te[2]=[{type:0,data:Xs(r.e.r+1)}],te[3]=[{type:0,data:Xs(ue)}],te[4]=[{type:0,data:Xs(r.e.r+1)}]}Q.messages[0].data=Tr(te);var Ne=nu(K),q=iu(Ne);X.content=q,X.size=X.content.length})()}Y.data=Tr(W)}B[3][0].data=Tr(G)}j[4][0].data=Tr(B)}p.messages[0].data=Tr(j);var H=nu(x),M=iu(H);return f.content=M,f.size=f.content.length,u}function ZL(e){return function(a){for(var r=0;r!=e.length;++r){var n=e[r];a[n[0]]===void 0&&(a[n[0]]=n[1]),n[2]==="n"&&(a[n[0]]=Number(a[n[0]]))}}}function ZA(e){ZL([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function eE(e){ZL([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function qee(e){return ps.WS.indexOf(e)>-1?"sheet":e==ps.CS?"chart":e==ps.DS?"dialog":e==ps.MS?"macro":e&&e.length?e:"sheet"}function Hee(e,s){if(!e)return 0;try{e=s.map(function(r){return r.id||(r.id=r.strRelID),[r.name,e["!id"][r.id].Target,qee(e["!id"][r.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Vee(e,s,a,r,n,i,l,o,d,u,h,f){try{i[r]=Vm(Dn(e,a,!0),s);var x=Xa(e,s),p;switch(o){case"sheet":p=fZ(x,s,n,d,i[r],u,h,f);break;case"chart":if(p=hZ(x,s,n,d,i[r],u,h,f),!p||!p["!drawel"])break;var v=Pm(p["!drawel"].Target,s),b=mf(v),y=eK(Dn(e,v,!0),Vm(Dn(e,b,!0),v)),j=Pm(y,v),w=mf(j);p=BX(Dn(e,j,!0),j,d,Vm(Dn(e,w,!0),j),u,p);break;case"macro":p=xZ(x,s,n,d,i[r],u,h,f);break;case"dialog":p=pZ(x,s,n,d,i[r],u,h,f);break;default:throw new Error("Unrecognized sheet type "+o)}l[r]=p;var S=[];i&&i[r]&&Fa(i[r]).forEach(function(O){var _="";if(i[r][O].Type==ps.CMNT){_=Pm(i[r][O].Target,s);var E=yZ(Xa(e,_,!0),_,d);if(!E||!E.length)return;EO(p,E,!1)}i[r][O].Type==ps.TCMNT&&(_=Pm(i[r][O].Target,s),S=S.concat(sK(Xa(e,_,!0),d)))}),S&&S.length&&EO(p,S,!0,d.people||[])}catch(O){if(d.WTF)throw O}}function Yn(e){return e.charAt(0)=="/"?e.slice(1):e}function eF(e,s){if(u0(),s=s||{},ZA(s),ii(e,"META-INF/manifest.xml")||ii(e,"objectdata.xml"))return LO(e,s);if(ii(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof m1<"u"){if(e.FileIndex)return m1(e);var a=Ot.utils.cfb_new();return W4(e).forEach(function(k){os(a,k,aH(e,k))}),m1(a)}throw new Error("Unsupported NUMBERS file")}if(!ii(e,"[Content_Types].xml"))throw ii(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):ii(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=W4(e),n=JH(Dn(e,"[Content_Types].xml")),i=!1,l,o;if(n.workbooks.length===0&&(o="xl/workbook.xml",Xa(e,o,!0)&&n.workbooks.push(o)),n.workbooks.length===0){if(o="xl/workbook.bin",!Xa(e,o,!0))throw new Error("Could not find workbook");n.workbooks.push(o),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var d={},u={};if(!s.bookSheets&&!s.bookProps){if(Gm=[],n.sst)try{Gm=vZ(Xa(e,Yn(n.sst)),n.sst,s)}catch(k){if(s.WTF)throw k}s.cellStyles&&n.themes.length&&(d=bZ(Dn(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],s)),n.style&&(u=gZ(Xa(e,Yn(n.style)),n.style,d,s))}n.links.map(function(k){try{var F=Vm(Dn(e,mf(Yn(k))),k);return jZ(Xa(e,Yn(k)),F,k,s)}catch{}});var h=mZ(Xa(e,Yn(n.workbooks[0])),n.workbooks[0],s),f={},x="";n.coreprops.length&&(x=Xa(e,Yn(n.coreprops[0]),!0),x&&(f=$8(x)),n.extprops.length!==0&&(x=Xa(e,Yn(n.extprops[0]),!0),x&&aV(x,f,s)));var p={};(!s.bookSheets||s.bookProps)&&n.custprops.length!==0&&(x=Dn(e,Yn(n.custprops[0]),!0),x&&(p=nV(x,s)));var v={};if((s.bookSheets||s.bookProps)&&(h.Sheets?l=h.Sheets.map(function(F){return F.name}):f.Worksheets&&f.SheetNames.length>0&&(l=f.SheetNames),s.bookProps&&(v.Props=f,v.Custprops=p),s.bookSheets&&typeof l<"u"&&(v.SheetNames=l),s.bookSheets?v.SheetNames:s.bookProps))return v;l={};var b={};s.bookDeps&&n.calcchain&&(b=NZ(Xa(e,Yn(n.calcchain)),n.calcchain));var y=0,j={},w,S;{var O=h.Sheets;f.Worksheets=O.length,f.SheetNames=[];for(var _=0;_!=O.length;++_)f.SheetNames[_]=O[_].name}var E=i?"bin":"xml",A=n.workbooks[0].lastIndexOf("/"),D=(n.workbooks[0].slice(0,A+1)+"_rels/"+n.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");ii(e,D)||(D="xl/_rels/workbook."+E+".rels");var L=Vm(Dn(e,D,!0),D.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(s.xlmeta=wZ(Xa(e,Yn(n.metadata[0])),n.metadata[0],s)),(n.people||[]).length>=1&&(s.people=rK(Xa(e,Yn(n.people[0])),s)),L&&(L=Hee(L,h.Sheets));var B=Xa(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var I="sheet";if(L&&L[y]?(w="xl/"+L[y][1].replace(/[\/]?xl\//,""),ii(e,w)||(w=L[y][1]),ii(e,w)||(w=D.replace(/_rels\/.*$/,"")+L[y][1]),I=L[y][2]):(w="xl/worksheets/sheet"+(y+1-B)+"."+E,w=w.replace(/sheet0\./,"sheet.")),S=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(y!=s.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var T=!1,z=0;z!=s.sheets.length;++z)typeof s.sheets[z]=="number"&&s.sheets[z]==y&&(T=1),typeof s.sheets[z]=="string"&&s.sheets[z].toLowerCase()==f.SheetNames[y].toLowerCase()&&(T=1);if(!T)continue e}}Vee(e,w,S,f.SheetNames[y],y,j,l,I,s,h,d,u)}return v={Directory:n,Workbook:h,Props:f,Custprops:p,Deps:b,Sheets:l,SheetNames:f.SheetNames,Strings:Gm,Styles:u,Themes:d,SSF:Na(Ht)},s&&s.bookFiles&&(e.files?(v.keys=r,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(k,F){k=k.replace(/^Root Entry[\/]/,""),v.keys.push(k),v.files[k]=e.FileIndex[F]}))),s&&s.bookVBA&&(n.vba.length>0?v.vbaraw=Xa(e,Yn(n.vba[0]),!0):n.defaults&&n.defaults.bin===mK&&(v.vbaraw=Xa(e,"xl/vbaProject.bin",!0))),v}function Gee(e,s){var a=s||{},r="Workbook",n=Ot.find(e,r);try{if(r="/!DataSpaces/Version",n=Ot.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(wW(n.content),r="/!DataSpaces/DataSpaceMap",n=Ot.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=AW(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=Ot.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var l=EW(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=Ot.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);TW(n.content)}catch{}if(r="/EncryptionInfo",n=Ot.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=_W(n.content);if(r="/EncryptedPackage",n=Ot.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],n.content,a.password||"",a);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],n.content,a.password||"",a);throw new Error("File is password-protected")}function Wee(e,s){return s.bookType=="ods"?XL(e,s):s.bookType=="numbers"?$ee(e,s):s.bookType=="xlsb"?Qee(e,s):Kee(e,s)}function Qee(e,s){bu=1024,e&&!e.SSF&&(e.SSF=Na(Ht)),e&&e.SSF&&(u0(),Qg(e.SSF),s.revssf=Jg(e.SSF),s.revssf[e.SSF[65535]]=0,s.ssf=e.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Wm?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a=s.bookType=="xlsb"?"bin":"xml",r=CL.indexOf(s.bookType)>-1,n=FA();eE(s=s||{});var i=SA(),l="",o=0;if(s.cellXfs=[],tc(s.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",os(i,l,q8(e.Props,s)),n.coreprops.push(l),Zs(s.rels,2,l,ps.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&d.push(e.SheetNames[u]);e.Props.SheetNames=d}for(e.Props.Worksheets=e.Props.SheetNames.length,os(i,l,G8(e.Props)),n.extprops.push(l),Zs(s.rels,3,l,ps.EXT_PROPS),e.Custprops!==e.Props&&Fa(e.Custprops||{}).length>0&&(l="docProps/custom.xml",os(i,l,W8(e.Custprops)),n.custprops.push(l),Zs(s.rels,4,l,ps.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var h={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],x=(f||{})["!type"]||"sheet";switch(x){case"chart":default:l="xl/worksheets/sheet"+o+"."+a,os(i,l,AZ(o-1,l,s,e,h)),n.sheets.push(l),Zs(s.wbrels,-1,"worksheets/sheet"+o+"."+a,ps.WS[0])}if(f){var p=f["!comments"],v=!1,b="";p&&p.length>0&&(b="xl/comments"+o+"."+a,os(i,b,TZ(p,b)),n.comments.push(b),Zs(h,-1,"../comments"+o+"."+a,ps.CMNT),v=!0),f["!legacy"]&&v&&os(i,"xl/drawings/vmlDrawing"+o+".vml",AL(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&os(i,mf(l),Au(h))}return s.Strings!=null&&s.Strings.length>0&&(l="xl/sharedStrings."+a,os(i,l,CZ(s.Strings,l,s)),n.strs.push(l),Zs(s.wbrels,-1,"sharedStrings."+a,ps.SST)),l="xl/workbook."+a,os(i,l,SZ(e,l)),n.workbooks.push(l),Zs(s.rels,1,l,ps.WB),l="xl/theme/theme1.xml",os(i,l,HA(e.Themes,s)),n.themes.push(l),Zs(s.wbrels,-1,"theme/theme1.xml",ps.THEME),l="xl/styles."+a,os(i,l,EZ(e,l,s)),n.styles.push(l),Zs(s.wbrels,-1,"styles."+a,ps.STY),e.vbaraw&&r&&(l="xl/vbaProject.bin",os(i,l,e.vbaraw),n.vba.push(l),Zs(s.wbrels,-1,"vbaProject.bin",ps.VBA)),l="xl/metadata."+a,os(i,l,_Z(l)),n.metadata.push(l),Zs(s.wbrels,-1,"metadata."+a,ps.XLMETA),os(i,"[Content_Types].xml",z8(n,s)),os(i,"_rels/.rels",Au(s.rels)),os(i,"xl/_rels/workbook."+a+".rels",Au(s.wbrels)),delete s.revssf,delete s.ssf,i}function Kee(e,s){bu=1024,e&&!e.SSF&&(e.SSF=Na(Ht)),e&&e.SSF&&(u0(),Qg(e.SSF),s.revssf=Jg(e.SSF),s.revssf[e.SSF[65535]]=0,s.ssf=e.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Wm?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a="xml",r=CL.indexOf(s.bookType)>-1,n=FA();eE(s=s||{});var i=SA(),l="",o=0;if(s.cellXfs=[],tc(s.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",os(i,l,q8(e.Props,s)),n.coreprops.push(l),Zs(s.rels,2,l,ps.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&d.push(e.SheetNames[u]);e.Props.SheetNames=d}e.Props.Worksheets=e.Props.SheetNames.length,os(i,l,G8(e.Props)),n.extprops.push(l),Zs(s.rels,3,l,ps.EXT_PROPS),e.Custprops!==e.Props&&Fa(e.Custprops||{}).length>0&&(l="docProps/custom.xml",os(i,l,W8(e.Custprops)),n.custprops.push(l),Zs(s.rels,4,l,ps.CUST_PROPS));var h=["SheetJ5"];for(s.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},x=e.Sheets[e.SheetNames[o-1]],p=(x||{})["!type"]||"sheet";switch(p){case"chart":default:l="xl/worksheets/sheet"+o+"."+a,os(i,l,FL(o-1,s,e,f)),n.sheets.push(l),Zs(s.wbrels,-1,"worksheets/sheet"+o+"."+a,ps.WS[0])}if(x){var v=x["!comments"],b=!1,y="";if(v&&v.length>0){var j=!1;v.forEach(function(w){w[1].forEach(function(S){S.T==!0&&(j=!0)})}),j&&(y="xl/threadedComments/threadedComment"+o+"."+a,os(i,y,aK(v,h,s)),n.threadedcomments.push(y),Zs(f,-1,"../threadedComments/threadedComment"+o+"."+a,ps.TCMNT)),y="xl/comments"+o+"."+a,os(i,y,EL(v)),n.comments.push(y),Zs(f,-1,"../comments"+o+"."+a,ps.CMNT),b=!0}x["!legacy"]&&b&&os(i,"xl/drawings/vmlDrawing"+o+".vml",AL(o,x["!comments"])),delete x["!comments"],delete x["!legacy"]}f["!id"].rId1&&os(i,mf(l),Au(f))}return s.Strings!=null&&s.Strings.length>0&&(l="xl/sharedStrings."+a,os(i,l,fL(s.Strings,s)),n.strs.push(l),Zs(s.wbrels,-1,"sharedStrings."+a,ps.SST)),l="xl/workbook."+a,os(i,l,qL(e)),n.workbooks.push(l),Zs(s.rels,1,l,ps.WB),l="xl/theme/theme1.xml",os(i,l,HA(e.Themes,s)),n.themes.push(l),Zs(s.wbrels,-1,"theme/theme1.xml",ps.THEME),l="xl/styles."+a,os(i,l,NL(e,s)),n.styles.push(l),Zs(s.wbrels,-1,"styles."+a,ps.STY),e.vbaraw&&r&&(l="xl/vbaProject.bin",os(i,l,e.vbaraw),n.vba.push(l),Zs(s.wbrels,-1,"vbaProject.bin",ps.VBA)),l="xl/metadata."+a,os(i,l,SL()),n.metadata.push(l),Zs(s.wbrels,-1,"metadata."+a,ps.XLMETA),h.length>1&&(l="xl/persons/person.xml",os(i,l,nK(h)),n.people.push(l),Zs(s.wbrels,-1,"persons/person.xml",ps.PEOPLE)),os(i,"[Content_Types].xml",z8(n,s)),os(i,"_rels/.rels",Au(s.rels)),os(i,"xl/_rels/workbook."+a+".rels",Au(s.wbrels)),delete s.revssf,delete s.ssf,i}function tE(e,s){var a="";switch((s||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":a=zn(e.slice(0,12));break;case"binary":a=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function Jee(e,s){return Ot.find(e,"EncryptedPackage")?Gee(e,s):YA(e,s)}function Yee(e,s){var a,r=e,n=s||{};return n.type||(n.type=fs&&Buffer.isBuffer(e)?"buffer":"base64"),a=x8(r,n),eF(a,n)}function tF(e,s){var a=0;e:for(;a<e.length;)switch(e.charCodeAt(a)){case 10:case 13:case 32:++a;break;case 60:return LS(e.slice(a),s);default:break e}return Mu.to_workbook(e,s)}function Xee(e,s){var a="",r=tE(e,s);switch(s.type){case"base64":a=zn(e);break;case"binary":a=e;break;case"buffer":a=e.toString("binary");break;case"array":a=Zc(e);break;default:throw new Error("Unrecognized type "+s.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(a=da(a)),s.type="binary",tF(a,s)}function Zee(e,s){var a=e;return s.type=="base64"&&(a=zn(a)),a=nf.utils.decode(1200,a.slice(2),"str"),s.type="binary",tF(a,s)}function ete(e){return e.match(/[^\x00-\x7F]/)?Ji(e):e}function f1(e,s,a,r){return r?(a.type="string",Mu.to_workbook(e,a)):Mu.to_workbook(s,a)}function rd(e,s){vA();var a=s||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return rd(new Uint8Array(e),(a=Na(a),a.type="array",a));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!a.type&&(a.type=typeof Deno<"u"?"buffer":"array");var r=e,n=[0,0,0,0],i=!1;if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),Cu={},a.dateNF&&(Cu.dateNF=a.dateNF),a.type||(a.type=fs&&Buffer.isBuffer(e)?"buffer":"base64"),a.type=="file"&&(a.type=fs?"buffer":"binary",r=K9(e),typeof Uint8Array<"u"&&!fs&&(a.type="array")),a.type=="string"&&(i=!0,a.type="binary",a.codepage=65001,r=ete(e)),a.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return a=Na(a),a.type="array",rd(yA(r),a)}switch((n=tE(r,a))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return Jee(Ot.read(r,a),a);break;case 9:if(n[1]<=8)return YA(r,a);break;case 60:return LS(r,a);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return iW(r,a);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return uL.to_workbook(r,a);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?Yee(r,a):f1(e,r,a,i);case 239:return n[3]===60?LS(r,a):f1(e,r,a,i);case 255:if(n[1]===254)return Zee(r,a);if(n[1]===0&&n[2]===2&&n[3]===0)return qc.to_workbook(r,a);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return qc.to_workbook(r,a);break;case 3:case 131:case 139:case 140:return MS.to_workbook(r,a);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return bL.to_workbook(r,a);break;case 10:case 13:case 32:return Xee(r,a);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return nW.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?MS.to_workbook(r,a):f1(e,r,a,i)}function sF(e,s){switch(s.type){case"base64":case"binary":break;case"buffer":case"array":s.type="";break;case"file":return ih(s.file,Ot.write(e,{type:fs?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");default:throw new Error("Unrecognized type "+s.type)}return Ot.write(e,s)}function tte(e,s){var a=Na(s||{}),r=Wee(e,a);return ste(r,a)}function ste(e,s){var a={},r=fs?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(s.compression&&(a.compression="DEFLATE"),s.password)a.type=r;else switch(s.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");case"buffer":case"file":a.type=r;break;default:throw new Error("Unrecognized type "+s.type)}var n=e.FullPaths?Ot.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!s.compression}):e.generate(a);if(typeof Deno<"u"&&typeof n=="string"){if(s.type=="binary"||s.type=="base64")return n;n=new Uint8Array(Wg(n))}return s.password&&typeof encrypt_agile<"u"?sF(encrypt_agile(n,s.password),s):s.type==="file"?ih(s.file,n):s.type=="string"?da(n):n}function ate(e,s){var a=s||{},r=tee(e,a);return sF(r,a)}function Wi(e,s,a){a||(a="");var r=a+e;switch(s.type){case"base64":return lf(Ji(r));case"binary":return Ji(r);case"string":return e;case"file":return ih(s.file,r,"utf8");case"buffer":return fs?Ql(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Wi(r,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function rte(e,s){switch(s.type){case"base64":return lf(e);case"binary":return e;case"string":return e;case"file":return ih(s.file,e,"binary");case"buffer":return fs?Ql(e,"binary"):e.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function Qx(e,s){switch(s.type){case"string":case"base64":case"binary":for(var a="",r=0;r<e.length;++r)a+=String.fromCharCode(e[r]);return s.type=="base64"?lf(a):s.type=="string"?da(a):a;case"file":return ih(s.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+s.type)}}function sb(e,s){vA(),YX(e);var a=Na(s||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var r=sb(e,a);return a.type="array",Wg(r)}var n=0;if(a.sheet&&(typeof a.sheet=="number"?n=a.sheet:n=e.SheetNames.indexOf(a.sheet),!e.SheetNames[n]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return Wi(QZ(e,a),a);case"slk":case"sylk":return Wi(dL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"htm":case"html":return Wi(QL(e.Sheets[e.SheetNames[n]],a),a);case"txt":return rte(aF(e.Sheets[e.SheetNames[n]],a),a);case"csv":return Wi(sE(e.Sheets[e.SheetNames[n]],a),a,"\uFEFF");case"dif":return Wi(uL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"dbf":return Qx(MS.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"prn":return Wi(Mu.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"rtf":return Wi(bL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"eth":return Wi(mL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"fods":return Wi(XL(e,a),a);case"wk1":return Qx(qc.sheet_to_wk1(e.Sheets[e.SheetNames[n]],a),a);case"wk3":return Qx(qc.book_to_wk3(e,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),Qx(WL(e,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),ate(e,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return tte(e,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function nte(e){if(!e.bookType){var s={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},a=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();a.match(/^\.[a-z]+$/)&&(e.bookType=a.slice(1)),e.bookType=s[e.bookType]||e.bookType}}function nd(e,s,a){var r=a||{};return r.type="file",r.file=s,nte(r),sb(e,r)}function ite(e,s,a,r,n,i,l,o){var d=Ha(a),u=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,x=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:a,enumerable:!1})}catch{x.__rowNum__=a}else x.__rowNum__=a;if(!l||e[a])for(var p=s.s.c;p<=s.e.c;++p){var v=l?e[a][p]:e[r[p]+d];if(v===void 0||v.t===void 0){if(u===void 0)continue;i[p]!=null&&(x[i[p]]=u);continue}var b=v.v;switch(v.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(b==null)if(v.t=="e"&&b===null)x[i[p]]=null;else if(u!==void 0)x[i[p]]=u;else if(h&&b===null)x[i[p]]=null;else continue;else x[i[p]]=h&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?b:$l(v,b,o);b!=null&&(f=!1)}}return{row:x,isempty:f}}function Bp(e,s){if(e==null||e["!ref"]==null)return[];var a={t:"n",v:0},r=0,n=1,i=[],l=0,o="",d={s:{r:0,c:0},e:{r:0,c:0}},u=s||{},h=u.range!=null?u.range:e["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof h){case"string":d=Rs(h);break;case"number":d=Rs(e["!ref"]),d.s.r=h;break;default:d=h}r>0&&(n=0);var f=Ha(d.s.r),x=[],p=[],v=0,b=0,y=Array.isArray(e),j=d.s.r,w=0,S={};y&&!e[j]&&(e[j]=[]);var O=u.skipHidden&&e["!cols"]||[],_=u.skipHidden&&e["!rows"]||[];for(w=d.s.c;w<=d.e.c;++w)if(!(O[w]||{}).hidden)switch(x[w]=ka(w),a=y?e[j][w]:e[x[w]+f],r){case 1:i[w]=w-d.s.c;break;case 2:i[w]=x[w];break;case 3:i[w]=u.header[w-d.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),o=l=$l(a,null,u),b=S[l]||0,!b)S[l]=1;else{do o=l+"_"+b++;while(S[o]);S[l]=b,S[o]=1}i[w]=o}for(j=d.s.r+n;j<=d.e.r;++j)if(!(_[j]||{}).hidden){var E=ite(e,d,j,x,r,i,y,u);(E.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[v++]=E.row)}return p.length=v,p}var $O=/"/g;function lte(e,s,a,r,n,i,l,o){for(var d=!0,u=[],h="",f=Ha(a),x=s.s.c;x<=s.e.c;++x)if(r[x]){var p=o.dense?(e[a]||[])[x]:e[r[x]+f];if(p==null)h="";else if(p.v!=null){d=!1,h=""+(o.rawNumbers&&p.t=="n"?p.v:$l(p,null,o));for(var v=0,b=0;v!==h.length;++v)if((b=h.charCodeAt(v))===n||b===i||b===34||o.forceQuotes){h='"'+h.replace($O,'""')+'"';break}h=="ID"&&(h='"ID"')}else p.f!=null&&!p.F?(d=!1,h="="+p.f,h.indexOf(",")>=0&&(h='"'+h.replace($O,'""')+'"')):h="";u.push(h)}return o.blankrows===!1&&d?null:u.join(l)}function sE(e,s){var a=[],r=s??{};if(e==null||e["!ref"]==null)return"";var n=Rs(e["!ref"]),i=r.FS!==void 0?r.FS:",",l=i.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,d=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),h="",f=[];r.dense=Array.isArray(e);for(var x=r.skipHidden&&e["!cols"]||[],p=r.skipHidden&&e["!rows"]||[],v=n.s.c;v<=n.e.c;++v)(x[v]||{}).hidden||(f[v]=ka(v));for(var b=0,y=n.s.r;y<=n.e.r;++y)(p[y]||{}).hidden||(h=lte(e,n,y,f,l,d,i,r),h!=null&&(r.strip&&(h=h.replace(u,"")),(h||r.blankrows!==!1)&&a.push((b++?o:"")+h)));return delete r.dense,a.join("")}function aF(e,s){s||(s={}),s.FS="	",s.RS=`
`;var a=sE(e,s);return a}function ote(e){var s="",a,r="";if(e==null||e["!ref"]==null)return[];var n=Rs(e["!ref"]),i="",l=[],o,d=[],u=Array.isArray(e);for(o=n.s.c;o<=n.e.c;++o)l[o]=ka(o);for(var h=n.s.r;h<=n.e.r;++h)for(i=Ha(h),o=n.s.c;o<=n.e.c;++o)if(s=l[o]+i,a=u?(e[h]||[])[o]:e[s],r="",a!==void 0){if(a.F!=null){if(s=a.F,!a.f)continue;r=a.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(a.f!=null)r=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)r=""+a.v;else if(a.t=="b")r=a.v?"TRUE":"FALSE";else if(a.w!==void 0)r="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?r="'"+a.v:r=""+a.v}}d[d.length]=s+"="+r}return d}function rF(e,s,a){var r=a||{},n=+!r.skipHeader,i=e||{},l=0,o=0;if(i&&r.origin!=null)if(typeof r.origin=="number")l=r.origin;else{var d=typeof r.origin=="string"?Oa(r.origin):r.origin;l=d.r,o=d.c}var u,h={s:{c:0,r:0},e:{c:o,r:l+s.length-1+n}};if(i["!ref"]){var f=Rs(i["!ref"]);h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),l==-1&&(l=f.e.r+1,h.e.r=l+s.length-1+n)}else l==-1&&(l=0,h.e.r=s.length-1+n);var x=r.header||[],p=0;s.forEach(function(b,y){Fa(b).forEach(function(j){(p=x.indexOf(j))==-1&&(x[p=x.length]=j);var w=b[j],S="z",O="",_=Vt({c:o+p,r:l+y+n});u=vf(i,_),w&&typeof w=="object"&&!(w instanceof Date)?i[_]=w:(typeof w=="number"?S="n":typeof w=="boolean"?S="b":typeof w=="string"?S="s":w instanceof Date?(S="d",r.cellDates||(S="n",w=hr(w)),O=r.dateNF||Ht[14]):w===null&&r.nullError&&(S="e",w=0),u?(u.t=S,u.v=w,delete u.w,delete u.R,O&&(u.z=O)):i[_]=u={t:S,v:w},O&&(u.z=O))})}),h.e.c=Math.max(h.e.c,o+x.length-1);var v=Ha(l);if(n)for(p=0;p<x.length;++p)i[ka(p+o)+v]={t:"s",v:x[p]};return i["!ref"]=rs(h),i}function cte(e,s){return rF(null,e,s)}function vf(e,s,a){if(typeof s=="string"){if(Array.isArray(e)){var r=Oa(s);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[s]||(e[s]={t:"z"})}return typeof s!="number"?vf(e,Vt(s)):vf(e,Vt({r:s,c:a||0}))}function dte(e,s){if(typeof s=="number"){if(s>=0&&e.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var a=e.SheetNames.indexOf(s);if(a>-1)return a;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function aE(){return{SheetNames:[],Sheets:{}}}function rE(e,s,a,r){var n=1;if(!a)for(;n<=65535&&e.SheetNames.indexOf(a="Sheet"+n)!=-1;++n,a=void 0);if(!a||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(a)>=0){var i=a.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||a;for(++n;n<=65535&&e.SheetNames.indexOf(a=l+n)!=-1;++n);}if($L(a),e.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return e.SheetNames.push(a),e.Sheets[a]=s,a}function ute(e,s,a){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=dte(e,s);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}e.Workbook.Sheets[r].Hidden=a}function mte(e,s){return e.z=s,e}function nF(e,s,a){return s?(e.l={Target:s},a&&(e.l.Tooltip=a)):delete e.l,e}function fte(e,s,a){return nF(e,"#"+s,a)}function hte(e,s,a){e.c||(e.c=[]),e.c.push({t:s,a:a||"SheetJS"})}function xte(e,s,a,r){for(var n=typeof s!="string"?s:Rs(s),i=typeof s=="string"?s:rs(s),l=n.s.r;l<=n.e.r;++l)for(var o=n.s.c;o<=n.e.c;++o){var d=vf(e,l,o);d.t="n",d.F=i,delete d.v,l==n.s.r&&o==n.s.c&&(d.f=a,r&&(d.D=!0))}return e}var Ta={encode_col:ka,encode_row:Ha,encode_cell:Vt,encode_range:rs,decode_col:IA,decode_row:OA,split_cell:CH,decode_cell:Oa,decode_range:vn,format_cell:$l,sheet_add_aoa:R8,sheet_add_json:rF,sheet_add_dom:KL,aoa_to_sheet:m0,json_to_sheet:cte,table_to_sheet:JL,table_to_book:wee,sheet_to_csv:sE,sheet_to_txt:aF,sheet_to_json:Bp,sheet_to_html:QL,sheet_to_formulae:ote,sheet_to_row_object_array:Bp,sheet_get_cell:vf,book_new:aE,book_append_sheet:rE,book_set_sheet_visibility:ute,cell_set_number_format:mte,cell_set_hyperlink:nF,cell_set_internal_link:fte,cell_add_comment:hte,sheet_set_array_formula:xte,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Tu=Object.freeze(Object.defineProperty({__proto__:null,CFB:Ot,parse_xlscfb:YA,parse_zip:eF,read:rd,utils:Ta,write:sb,writeFile:nd,writeFileSync:nd},Symbol.toStringTag,{value:"Module"})),oe={USERS:"b2b_users_sini_v2",PROFILES:"b2b_profiles_sini_v2",ORDERS:"b2b_orders_sini_v2",QUOTE_REQUESTS:"b2b_quotes_sini_v2",SESSION:"b2b_session_sini_v2",SETTINGS:"b2b_settings_sini_v2",PRODUCTS:"b2b_products_sini_v2",BANNERS:"b2b_banners_sini_v2",NEWS:"b2b_news_sini_v2",LOGS:"b2b_logs_sini_v2",SEARCH_HISTORY:"b2b_search_history_sini_v2",MISSING_REQUESTS:"b2b_missing_requests_sini_v2",IMPORT_REQUESTS:"b2b_import_requests_sini_v2",ACCOUNT_REQUESTS:"siniCar_account_opening_requests",NOTIFICATIONS:"siniCar_notifications_v2",ACTIVITY_LOGS:"siniCar_activity_logs",EXCEL_COLUMN_PRESETS:"siniCar_excel_column_presets",STATUS_LABELS:"siniCar_status_labels_v1",ADMIN_USERS:"siniCar_admin_users_v2",ADMIN_ROLES:"siniCar_admin_roles_v1",CAMPAIGNS:"siniCar_marketing_campaigns",PRICE_LEVELS:"sini_price_levels",PRODUCT_PRICE_MATRIX:"sini_price_matrix",GLOBAL_PRICING_SETTINGS:"sini_global_pricing_settings",CUSTOMER_PRICING_PROFILES:"sini_customer_pricing_profiles",PRICING_AUDIT_LOG:"sini_pricing_audit_log",TOOL_CONFIGS:"sini_tool_configs",CUSTOMER_TOOLS_OVERRIDES:"sini_customer_tools_overrides",TOOL_USAGE_RECORDS:"sini_tool_usage_records",SUPPLIER_PRICE_RECORDS:"sini_supplier_price_records",VIN_EXTRACTIONS:"sini_vin_extractions",PRICE_COMPARISON_SESSIONS:"sini_price_comparison_sessions",SUPPLIER_CATALOG_ITEMS:"sini_supplier_catalog_items",SUPPLIER_MARKETPLACE_SETTINGS:"sini_supplier_marketplace_settings",SUPPLIER_PROFILES:"sini_supplier_profiles",MARKETERS:"sini_marketers",CUSTOMER_REFERRALS:"sini_customer_referrals",MARKETER_COMMISSIONS:"sini_marketer_commissions",MARKETER_SETTINGS:"sini_marketer_settings",ADVERTISERS:"sini_advertisers",AD_CAMPAIGNS:"sini_ad_campaigns",AD_SLOTS:"sini_ad_slots",AD_SLOT_ROTATIONS:"sini_ad_slot_rotations",INSTALLMENT_REQUESTS:"sini_installment_requests",INSTALLMENT_OFFERS:"sini_installment_offers",CUSTOMER_CREDIT_PROFILES:"sini_customer_credit_profiles",INSTALLMENT_SETTINGS:"sini_installment_settings",ORGANIZATIONS:"sini_organizations",ORGANIZATION_USERS:"sini_organization_users",ORGANIZATION_SETTINGS:"sini_organization_settings",ORGANIZATION_ACTIVITY_LOGS:"sini_organization_activity_logs",TEAM_INVITATIONS:"sini_team_invitations",ABANDONED_CARTS:"sini_abandoned_carts",ALTERNATIVE_PARTS:"sini_alternative_parts",PURCHASE_REQUESTS:"sini_purchase_requests",SUPPLIER_PORTAL_PRODUCTS:"sini_supplier_portal_products",SUPPLIER_PORTAL_REQUESTS:"sini_supplier_portal_requests",SUPPLIER_PORTAL_SETTINGS:"sini_supplier_portal_settings",TRADER_TOOL_ACTIONS:"sini_trader_tool_actions",FEEDBACK:"sini_feedback",FEEDBACK_REPLIES:"sini_feedback_replies",FEEDBACK_SETTINGS:"sini_feedback_settings",ORDER_SHORTAGES:"sini_order_shortages"},pte={"dashboard.hero.title":"  ","dashboard.hero.subtitle":"   ","dashboard.search.placeholder":"    ...","sidebar.home":"","sidebar.orders":" ","sidebar.quotes":" ","sidebar.history":" ","sidebar.import":"  ","sidebar.organization":" ","sidebar.support":" ","cart.title":" ","cart.empty":"  ","cart.checkout":" ","features.card1.title":"  ","features.card1.desc":"        .","features.card2.title":"  ","features.card2.desc":"  24     .","features.card3.title":"  ","features.card3.desc":"      ."},ma={siteName:"Sini Pro -  ",description:"     ",supportPhone:"920000000",supportWhatsapp:"0500000000",supportEmail:"support@sinipro.com",announcementBarColor:"bg-primary-900",fontFamily:"Cairo",maintenanceMode:!1,primaryColor:"#2563eb",logoUrl:"",uiTexts:pte,tickerEnabled:!0,tickerText:"      -      .     5000 .",tickerSpeed:4,tickerBgColor:"#0f172a",tickerTextColor:"#fb923c",apiConfig:{baseUrl:"https://api.sini-pro-erp.com/v1",authToken:"",enableLiveSync:!0,endpoints:{products:"/inventory/products",orders:"/sales/orders",customers:"/crm/customers"},webhookSecret:"",environment:"PRODUCTION",syncInterval:"REALTIME",syncEntities:{products:!0,inventory:!0,prices:!0,customers:!0,orders:!0},webhooks:[],fieldMapping:`{
  "sku": "item_code",
  "price": "unit_price",
  "stock": "qty_on_hand"
}`,debugMode:!1,rateLimit:"120"},statusLabels:{orderStatus:{PENDING:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,isDefault:!0,sortOrder:1},APPROVED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:2},REJECTED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3},SHIPPED:{label:" ",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:4},DELIVERED:{label:" ",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:5},CANCELLED:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:6}},orderInternalStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},SENT_TO_WAREHOUSE:{label:"  ",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:2},WAITING_PAYMENT:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:3},PAYMENT_CONFIRMED:{label:"  ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:4},SALES_INVOICE_CREATED:{label:"  ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:5},READY_FOR_SHIPMENT:{label:" ",color:"#0ea5e9",bgColor:"#e0f2fe",isSystem:!0,sortOrder:6},COMPLETED_INTERNAL:{label:" ",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:7},CANCELLED_INTERNAL:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:8}},accountRequestStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},APPROVED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:3},REJECTED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:4},ON_HOLD:{label:"",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:5}},quoteRequestStatus:{NEW:{label:"",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},PARTIALLY_APPROVED:{label:" ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:3},APPROVED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:4},QUOTED:{label:" ",color:"#10b981",bgColor:"#d1fae5",sortOrder:5},PROCESSED:{label:" ",color:"#059669",bgColor:"#a7f3d0",sortOrder:6},REJECTED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:7}},quoteItemStatus:{PENDING:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,isDefault:!0,sortOrder:1},MATCHED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:2},NOT_FOUND:{label:" ",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3},APPROVED:{label:"",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:4},REJECTED:{label:"",color:"#dc2626",bgColor:"#fecaca",isSystem:!0,sortOrder:5},MISSING:{label:"",color:"#ea580c",bgColor:"#ffedd5",isSystem:!0,sortOrder:6}},missingStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},ORDER_PLANNED:{label:"  ",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:3},ORDERED:{label:" ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:4},ADDED_TO_STOCK:{label:"  ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:5},IGNORED:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:6}},importRequestStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},WAITING_CUSTOMER_EXCEL:{label:"  Excel",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:3},PRICING_IN_PROGRESS:{label:" ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:4},PRICING_SENT:{label:"  ",color:"#0ea5e9",bgColor:"#e0f2fe",isSystem:!0,sortOrder:5},WAITING_CUSTOMER_APPROVAL:{label:"  ",color:"#a855f7",bgColor:"#f3e8ff",isSystem:!0,sortOrder:6},APPROVED_BY_CUSTOMER:{label:"  ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:7},IN_FACTORY:{label:" ",color:"#f97316",bgColor:"#ffedd5",isSystem:!0,sortOrder:8},SHIPMENT_BOOKED:{label:"  ",color:"#0284c7",bgColor:"#e0f2fe",isSystem:!0,sortOrder:9},ON_THE_SEA:{label:"  ",color:"#0369a1",bgColor:"#bae6fd",isSystem:!0,sortOrder:10},IN_PORT:{label:" ",color:"#0891b2",bgColor:"#cffafe",isSystem:!0,sortOrder:11},CUSTOMS_CLEARED:{label:"  ",color:"#059669",bgColor:"#d1fae5",isSystem:!0,sortOrder:12},ON_THE_WAY:{label:"  ",color:"#16a34a",bgColor:"#bbf7d0",isSystem:!0,sortOrder:13},DELIVERED:{label:" ",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:14},CANCELLED:{label:"",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:15}},customerStatus:{ACTIVE:{label:"",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,isDefault:!0,sortOrder:1},SUSPENDED:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},BLOCKED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3},PENDING:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,sortOrder:4},INACTIVE:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:5}},staffStatus:{ACTIVE:{label:"",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,isDefault:!0,sortOrder:1},SUSPENDED:{label:"",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},BLOCKED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3}}},guestModeEnabled:!0,guestSettings:{showBusinessTypes:!0,showMainServices:!0,showHowItWorks:!0,showWhySiniCar:!0,showCart:!1,showMarketingCards:!0,blurIntensity:"medium",showBlurOverlay:!0,allowedPages:[],allowSearch:!0,showSearchResults:!0},orderStatusPointsConfig:{enabled:!0,pointsPerStatus:{DELIVERED:5,APPROVED:2,SHIPPED:1}}},_l=[{id:"1",partNumber:"CN-102030",name:"    -  CS95",brand:"Changan",price:150,oldPrice:180,isOnSale:!0,stock:50,isNew:!1,category:"",description:"         2020-2023"},{id:"2",partNumber:"CN-550011",name:"  -   2022",brand:"Changan",price:850,stock:10,isNew:!0,category:"",description:"       100%"},{id:"3",partNumber:"CN-CS85-09",name:"   - CS85",brand:"Changan",price:420,stock:15,category:" "},{id:"4",partNumber:"CN-UNIK-FILT",name:"   (++) -  ",brand:"Changan",price:180,stock:40,category:""},{id:"5",partNumber:"CN-ALT-95",name:"  -  CS95",brand:"Changan",price:1200,stock:5,category:""},{id:"6",partNumber:"CN-RAD-75",name:"  -  CS75",brand:"Changan",price:550,stock:8,category:""},{id:"7",partNumber:"MG-998877",name:"    - MG All Models",brand:"MG",price:35,stock:200,category:"",description:"         "},{id:"8",partNumber:"MG-RX5-01",name:"   LED - MG RX5",brand:"MG",price:1800,oldPrice:2100,isOnSale:!0,stock:5,category:""},{id:"9",partNumber:"MG-GT-SPOILER",name:"    - MG GT",brand:"MG",price:600,stock:3,isNew:!0,category:""},{id:"10",partNumber:"MG-ZS-BUMP",name:"  - MG ZS 2021",brand:"MG",price:450,stock:12,category:""},{id:"11",partNumber:"MG-HS-PADS",name:"  - MG HS",brand:"MG",price:140,stock:60,category:""},{id:"12",partNumber:"MG-ENG-MNT",name:"   - MG 6",brand:"MG",price:900,stock:4,category:""},{id:"13",partNumber:"GL-COOL-01",name:"   -  ",brand:"Geely",price:650,stock:8,category:"",isNew:!0},{id:"14",partNumber:"GL-MON-BUMP",name:"    -  ",brand:"Geely",price:1100,stock:4,category:"",isNew:!0},{id:"15",partNumber:"GL-TUG-HL",name:"   -  ",brand:"Geely",price:2200,stock:2,category:""},{id:"16",partNumber:"GL-EMG-BRK",name:"  ABS -  ",brand:"Geely",price:180,stock:25,category:""},{id:"17",partNumber:"GL-OKA-FDR",name:"   -  ",brand:"Geely",price:700,stock:6,category:""},{id:"18",partNumber:"HV-H6-BRK",name:"  -  H6",brand:"Haval",price:120,stock:80,category:""},{id:"19",partNumber:"HV-JOLION-LGT",name:"   -  ",brand:"Haval",price:750,oldPrice:900,isOnSale:!0,stock:6,category:""},{id:"20",partNumber:"HV-H9-TURBO",name:"  -  H9",brand:"Haval",price:3500,stock:2,category:""},{id:"21",partNumber:"HV-DARGO-MAT",name:"   -  ",brand:"Haval",price:250,stock:15,category:""},{id:"22",partNumber:"CH-TIGGO-OIL",name:"  CVT -   8",brand:"Chery",price:60,stock:100,category:""},{id:"23",partNumber:"CH-ARRIZO-DR",name:"   -   6",brand:"Chery",price:85,stock:30,category:""},{id:"24",partNumber:"GW-POER-FLT",name:"  -   ",brand:"Great Wall",price:55,stock:45,category:""},{id:"25",partNumber:"GEN-SPK-PLG",name:"   - ",brand:"Generic",price:45,stock:500,category:""},{id:"26",partNumber:"GEN-BAT-70",name:" 70  - ",brand:"Generic",price:350,stock:20,category:""},{id:"27",partNumber:"CN-EADO-MIR",name:"   () - ",brand:"Changan",price:650,stock:12,category:""},{id:"28",partNumber:"MG-5-CVT",name:"  - MG 5",brand:"MG",price:320,stock:8,category:""},{id:"29",partNumber:"HV-JUL-SEN",name:"    - ",brand:"Haval",price:120,stock:50,category:""},{id:"30",partNumber:"GL-COOL-PMP",name:"  - ",brand:"Geely",price:280,stock:14,category:""}],gte=[{id:"1",title:" ..  ",subtitle:"     MG      ",colorClass:"from-primary-700 to-primary-900",buttonText:"  ",isActive:!0},{id:"2",title:" :   ",subtitle:"      H6 ",colorClass:"from-slate-700 to-slate-900",buttonText:" ",isActive:!0},{id:"3",title:"  ",subtitle:"      ",colorClass:"from-secondary-600 to-secondary-800",buttonText:" ",isActive:!0},{id:"4",title:"   ",subtitle:"       5000 ",colorClass:"from-green-600 to-green-800",buttonText:" ",isActive:!0}],qO=[":      MG     "," :       2024   "," :        ( )"," :  10%      ",":      8   8 "],lu=[{id:"ORD-99201",userId:"demo-user-id",businessId:"demo-user-id",items:[{..._l[0],quantity:10},{..._l[6],quantity:20}],totalAmount:2200,status:xt.SHIPPED,date:"2023-10-15T10:30:00Z",branchId:"b1",internalStatus:"READY_FOR_SHIPMENT",internalStatusHistory:[{status:"NEW",changedAt:"2023-10-15T10:30:00Z",changedBy:"system"},{status:"READY_FOR_SHIPMENT",changedAt:"2023-10-16T09:00:00Z",changedBy:"Ahmed"}]},{id:"ORD-99255",userId:"demo-user-id",businessId:"demo-user-id",items:[{..._l[1],quantity:1}],totalAmount:850,status:xt.APPROVED,date:"2023-10-20T14:15:00Z",branchId:"b1",internalStatus:"PAYMENT_CONFIRMED",internalStatusHistory:[{status:"NEW",changedAt:"2023-10-20T14:15:00Z",changedBy:"system"},{status:"PAYMENT_CONFIRMED",changedAt:"2023-10-20T15:30:00Z",changedBy:"Finance"}]},{id:"ORD-99310",userId:"demo-user-id",businessId:"demo-user-id",items:[{..._l[2],quantity:5},{..._l[7],quantity:2}],totalAmount:5700,status:xt.PENDING,date:new Date().toISOString(),branchId:"b1",internalStatus:"NEW",internalStatusHistory:[{status:"NEW",changedAt:new Date().toISOString(),changedBy:"system"}]}],h1=[{id:"Q-5001",userId:"demo-user-id",userName:"  ()",companyName:"   ",date:"2023-09-01T09:00:00Z",status:"PROCESSED",priceType:"BOTH",items:[{partNumber:"CN-102030",partName:" ",requestedQty:100,matchedPrice:140,status:"MATCHED",approvalStatus:"APPROVED",matchedProductName:"  ",isAvailable:!0},{partNumber:"UNK-999",partName:"  ",requestedQty:10,status:"NOT_FOUND",approvalStatus:"MISSING",notes:"    "}],totalQuotedAmount:14e3,resultReady:!0}],Bt=(e=0)=>e===0?Promise.resolve():new Promise(s=>setTimeout(s,e)),bte=()=>"C-"+Math.floor(1e4+Math.random()*9e4),vte=()=>Math.floor(1e5+Math.random()*9e5).toString(),bt=e=>{try{const s=JSON.parse(localStorage.getItem(oe.ACTIVITY_LOGS)||"[]");let a=e.userName,r=e.role;if(!a||!r){const l=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(o=>o.id===e.userId);l?(a||(a=l.name),r||(r=l.role)):e.userId==="super-admin"&&(a=" ",r="SUPER_ADMIN")}const n={id:`LOG-${Date.now()}-${Math.floor(Math.random()*1e3)}`,createdAt:new Date().toISOString(),userId:e.userId,userName:a,role:r,eventType:e.eventType,description:e.description,page:e.page,metadata:e.metadata};s.unshift(n),s.length>1e3&&(s.length=1e3),localStorage.setItem(oe.ACTIVITY_LOGS,JSON.stringify(s))}catch(s){console.error("Failed to record activity",s)}},ou=(e,s)=>{try{const a=JSON.parse(localStorage.getItem(oe.LOGS)||"[]");a.push({type:e,data:s,timestamp:new Date().toISOString()}),a.length>100&&a.shift(),localStorage.setItem(oe.LOGS,JSON.stringify(a))}catch(a){console.error("Failed to log activity",a)}},lr=(e,s,a,r,n,i,l)=>{const o=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]"),d={id:`NOTIF-${Date.now()}-${Math.floor(Math.random()*1e3)}`,userId:e,type:s,title:a,message:r,createdAt:new Date().toISOString(),isRead:!1,relatedType:n,relatedId:i,link:l};return o.unshift(d),o.length>500&&(o.length=500),localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(o)),d},HO=e=>lr(e.userId,e.type,e.title,e.message,e.relatedType,e.relatedId,e.link),cu=()=>JSON.parse(localStorage.getItem(oe.USERS)||"[]").filter(s=>{const a=s.role;return a==="SUPER_ADMIN"||a==="ADMIN"||a==="EMPLOYEE"}).map(s=>s.id),VO=e=>{const s=new Date().toISOString().split("T")[0];return e.status,e.lastSearchDate!==s&&(e.searchUsed=0,e.lastSearchDate=s),e},Ai=e=>{const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=s.findIndex(r=>r.id===e.id);a!==-1&&(s[a]=e,localStorage.setItem(oe.USERS,JSON.stringify(s)),JSON.parse(localStorage.getItem(oe.SESSION)||"{}").id===e.id&&localStorage.setItem(oe.SESSION,JSON.stringify(e)))},he={async checkHealth(){const e=performance.now();await new Promise(a=>setTimeout(a,Math.random()*50));const s=performance.now();return{status:"ok",latency:Math.round(s-e)}},async recordActivity(e){bt(e)},async getActivityLogs(){return JSON.parse(localStorage.getItem(oe.ACTIVITY_LOGS)||"[]")},async getCustomerActivityLogs(e){return(await this.getActivityLogs()).filter(a=>{var r;return a.userId===e||((r=a.metadata)==null?void 0:r.targetUserId)===e})},async recordHeartbeat(e){const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=s.findIndex(r=>r.id===e);a!==-1&&(s[a].lastActiveAt=new Date().toISOString(),localStorage.setItem(oe.USERS,JSON.stringify(s)))},async getOnlineUsers(e=5){const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=new Date().getTime(),r=e*60*1e3;return s.filter(n=>{if(!n.lastActiveAt||n.role==="SUPER_ADMIN")return!1;const i=new Date(n.lastActiveAt).getTime();return a-i<=r})},async getSettings(){var r,n,i,l,o,d,u,h,f;const e=localStorage.getItem(oe.SETTINGS);if(!e)return localStorage.setItem(oe.SETTINGS,JSON.stringify(ma)),ma;const s=JSON.parse(e),a=ma.statusLabels?{orderStatus:{...ma.statusLabels.orderStatus,...((r=s.statusLabels)==null?void 0:r.orderStatus)||{}},orderInternalStatus:{...ma.statusLabels.orderInternalStatus,...((n=s.statusLabels)==null?void 0:n.orderInternalStatus)||{}},accountRequestStatus:{...ma.statusLabels.accountRequestStatus,...((i=s.statusLabels)==null?void 0:i.accountRequestStatus)||{}},quoteRequestStatus:{...ma.statusLabels.quoteRequestStatus,...((l=s.statusLabels)==null?void 0:l.quoteRequestStatus)||{}},quoteItemStatus:{...ma.statusLabels.quoteItemStatus,...((o=s.statusLabels)==null?void 0:o.quoteItemStatus)||{}},missingStatus:{...ma.statusLabels.missingStatus,...((d=s.statusLabels)==null?void 0:d.missingStatus)||{}},importRequestStatus:{...ma.statusLabels.importRequestStatus,...((u=s.statusLabels)==null?void 0:u.importRequestStatus)||{}},customerStatus:{...ma.statusLabels.customerStatus,...((h=s.statusLabels)==null?void 0:h.customerStatus)||{}},staffStatus:{...ma.statusLabels.staffStatus,...((f=s.statusLabels)==null?void 0:f.staffStatus)||{}}}:s.statusLabels;return{...ma,...s,apiConfig:{...ma.apiConfig,...s.apiConfig},uiTexts:{...ma.uiTexts,...s.uiTexts||{}},statusLabels:a}},async updateSettings(e){localStorage.setItem(oe.SETTINGS,JSON.stringify(e))},async updateBanners(e){localStorage.setItem(oe.BANNERS,JSON.stringify(e))},async updateNews(e){localStorage.setItem(oe.NEWS,JSON.stringify(e))},async getStatusLabels(){const e=localStorage.getItem(oe.STATUS_LABELS);if(!e)return localStorage.setItem(oe.STATUS_LABELS,JSON.stringify(ma.statusLabels)),ma.statusLabels;const s=JSON.parse(e);return{orderStatus:{...ma.statusLabels.orderStatus,...s.orderStatus},orderInternalStatus:{...ma.statusLabels.orderInternalStatus,...s.orderInternalStatus},accountRequestStatus:{...ma.statusLabels.accountRequestStatus,...s.accountRequestStatus},quoteRequestStatus:{...ma.statusLabels.quoteRequestStatus,...s.quoteRequestStatus},quoteItemStatus:{...ma.statusLabels.quoteItemStatus,...s.quoteItemStatus},missingStatus:{...ma.statusLabels.missingStatus,...s.missingStatus},importRequestStatus:{...ma.statusLabels.importRequestStatus,...s.importRequestStatus},customerStatus:{...ma.statusLabels.customerStatus,...s.customerStatus},staffStatus:{...ma.statusLabels.staffStatus,...s.staffStatus}}},async updateStatusLabels(e){localStorage.setItem(oe.STATUS_LABELS,JSON.stringify(e));const s=await this.getSettings();s.statusLabels=e,await this.updateSettings(s)},async addStatusLabel(e,s,a){const r=await this.getStatusLabels();if(r[e][s])return{success:!1,error:"     "};const i=Object.values(r[e]).reduce((l,o)=>Math.max(l,o.sortOrder||0),0);return r[e][s]={...a,sortOrder:a.sortOrder||i+1,isSystem:!1},a.isDefault&&Object.keys(r[e]).forEach(l=>{l!==s&&(r[e][l].isDefault=!1)}),await this.updateStatusLabels(r),{success:!0}},async updateStatusLabel(e,s,a){const r=await this.getStatusLabels();if(!r[e][s])return{success:!1,error:"  "};const n=r[e][s];return r[e][s]={...n,label:a.label,color:a.color,bgColor:a.bgColor,icon:a.icon,sortOrder:a.sortOrder??n.sortOrder},a.isDefault&&(Object.keys(r[e]).forEach(i=>{i!==s&&(r[e][i].isDefault=!1)}),r[e][s].isDefault=!0),await this.updateStatusLabels(r),{success:!0}},async deleteStatusLabel(e,s){const a=await this.getStatusLabels();if(!a[e][s])return{success:!1,error:"  "};if(a[e][s].isSystem)return{success:!1,error:"    "};const r=await this.checkStatusUsage(e,s);return r>0?{success:!1,error:`    ${r}    `}:(delete a[e][s],await this.updateStatusLabels(a),{success:!0})},async checkStatusUsage(e,s){let a=0;switch(e){case"orderStatus":a=(await this.getAllOrders()).filter(f=>f.status===s||f.status===xt[s]).length;break;case"orderInternalStatus":a=(await this.getAllOrders()).filter(f=>f.internalStatus===s).length;break;case"accountRequestStatus":a=(await this.getAccountOpeningRequests()).filter(f=>f.status===s).length;break;case"quoteRequestStatus":a=(await this.getAllQuoteRequests()).filter(f=>f.status===s).length;break;case"importRequestStatus":a=(await this.getImportRequests()).filter(f=>f.status===s).length;break;case"missingStatus":a=(await this.getMissingProductRequests()).filter(f=>f.status===s).length;break;case"customerStatus":a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]").filter(f=>f.status===s).length;break;case"staffStatus":a=JSON.parse(localStorage.getItem(oe.USERS)||"[]").filter(f=>f.role==="CUSTOMER_STAFF"&&f.status===s).length;break}return a},async getAdminStats(){const e=await this.getAllOrders(),s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=await this.searchProducts(""),r=await this.getAllQuoteRequests(),n=await this.getAccountOpeningRequests();return{totalOrders:e.length,pendingOrders:e.filter(i=>i.status===xt.PENDING).length,totalRevenue:e.reduce((i,l)=>i+l.totalAmount,0),totalUsers:s.length,totalProducts:a.length,pendingQuotes:r.filter(i=>i.status==="NEW"||i.status==="UNDER_REVIEW").length,newAccountRequests:n.filter(i=>i.status==="NEW").length}},async getAllUsers(){const e=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),s=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]");return e.map(a=>({user:a,profile:s.find(r=>r.userId===(a.role==="CUSTOMER_STAFF"?a.parentId:a.id))})).filter(a=>a.user.role!=="SUPER_ADMIN")},async getCustomersDatabase(){const e=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),s=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),a=await this.getAllOrders(),r=await this.getAllQuoteRequests(),n=await this.getImportRequests(),i=await this.getActivityLogs(),l=await this.getMissingProductRequests(),o=await this.getAccountOpeningRequests();return s.map(u=>{const h=e.filter(A=>A.businessId===u.userId||A.id===u.userId),f=e.find(A=>A.id===u.userId),x=o.find(A=>A.status==="APPROVED"&&(A.phone===(f==null?void 0:f.phone)||A.businessName===u.companyName)),p=(x==null?void 0:x.documents)||u.documents||[],v=a.filter(A=>A.businessId===u.userId||A.userId===u.userId),b=v.length,y=v.filter(A=>A.internalStatus==="SALES_INVOICE_CREATED"||A.internalStatus==="COMPLETED_INTERNAL").length,j=r.filter(A=>A.userId===u.userId).length,w=n.filter(A=>A.customerId===u.userId).length,S=i.filter(A=>A.eventType==="SEARCH_PERFORMED"&&h.some(D=>D.id===A.userId)).length,O=l.filter(A=>h.some(D=>D.id===A.userId)).length,_=(f==null?void 0:f.lastLoginAt)||null,E=(f==null?void 0:f.failedLoginAttempts)||0;return{...u,status:u.status||(f==null?void 0:f.status)||(f!=null&&f.isActive?"ACTIVE":"SUSPENDED"),assignedPriceLevel:u.assignedPriceLevel||(f==null?void 0:f.priceLevel)||"LEVEL_2",businessCustomerType:u.businessCustomerType||(f==null?void 0:f.customerType),customerType:u.customerType,searchPointsTotal:u.searchPointsTotal||((f==null?void 0:f.searchLimit)??50),searchPointsRemaining:u.searchPointsRemaining||((f==null?void 0:f.searchLimit)||50)-((f==null?void 0:f.searchUsed)||0),staffLimit:u.staffLimit||5,staffUsersCount:h.filter(A=>A.role==="CUSTOMER_STAFF").length,lastLoginAt:_,failedLoginAttempts:E,riskyLoginFlag:E>5,totalOrdersCount:b,totalQuotesCount:j,totalImportRequestsCount:w,totalInvoicesCount:y,totalSearchesCount:S,missingRequestsCount:O,documents:p}})},async updateCustomerStatus(e,s,a){const r=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),n=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),i=r.findIndex(o=>o.userId===e);i!==-1&&(r[i].status=s,a?r[i].suspendedUntil=a:r[i].suspendedUntil=null);const l=n.findIndex(o=>o.id===e);l!==-1&&(n[l].status=s,n[l].isActive=s==="ACTIVE"),(s==="BLOCKED"||s==="SUSPENDED")&&n.forEach(o=>{o.businessId===e&&(o.status=s,o.isActive=!1)}),localStorage.setItem(oe.PROFILES,JSON.stringify(r)),localStorage.setItem(oe.USERS,JSON.stringify(n)),bt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:s==="ACTIVE"?"CUSTOMER_REACTIVATED":"CUSTOMER_SUSPENDED",description:`    ${s}`,metadata:{targetUserId:e,suspendedUntil:a}})},async addCustomerSearchPoints(e,s){await this.adminGrantPoints(e,s);const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);r!==-1&&(a[r].searchPointsTotal=(a[r].searchPointsTotal||0)+s,a[r].searchPointsRemaining=(a[r].searchPointsRemaining||0)+s,localStorage.setItem(oe.PROFILES,JSON.stringify(a))),bt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"SEARCH_POINTS_ADDED",description:`  ${s}   `,metadata:{targetUserId:e,pointsAdded:s}})},async deductCustomerSearchPoints(e,s){const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(o=>o.userId===e);if(r===-1)return!1;const n=a[r].searchPointsRemaining||0;if(s>n)return!1;a[r].searchPointsRemaining=n-s,localStorage.setItem(oe.PROFILES,JSON.stringify(a));const i=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),l=i.findIndex(o=>o.id===e);return l!==-1&&(i[l].searchLimit=a[r].searchPointsRemaining,localStorage.setItem(oe.USERS,JSON.stringify(i))),bt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"SEARCH_POINTS_DEDUCTED",description:`  ${s}    `,metadata:{targetUserId:e,pointsDeducted:s,newBalance:a[r].searchPointsRemaining}}),!0},async createCustomerFromAdmin(e){await Bt(100);const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=`cust-${Date.now().toString().slice(-8)}`,n=new Date().toISOString(),i={id:r,name:e.companyName,phone:e.phone,email:e.email||"",password:"123456",role:"CUSTOMER",status:e.status||"ACTIVE",isActive:e.status!=="SUSPENDED"&&e.status!=="BLOCKED",searchLimit:e.searchPointsTotal||0,priceLevel:e.priceLevel||"LEVEL_1",createdAt:n,updatedAt:n,clientId:`CLT-${Date.now().toString().slice(-6)}`},l={userId:r,companyName:e.companyName,phone:e.phone,email:e.email,region:e.region||"",city:e.city,crNumber:e.crNumber||"",taxNumber:e.taxNumber||"",nationalAddress:e.nationalAddress||"",customerType:e.customerType,deviceFingerprint:"",branches:[],isApproved:!0,status:e.status||"ACTIVE",assignedPriceLevel:e.priceLevel||"LEVEL_1",priceVisibility:"VISIBLE",searchPointsTotal:e.searchPointsTotal||0,searchPointsRemaining:e.searchPointsTotal||0,staffLimit:5,internalNotes:e.internalNotes,totalOrdersCount:0,totalQuotesCount:0,totalSearchesCount:0,lastLoginAt:null,lastActivityAt:n,completionPercent:100};return s.push(i),a.push(l),localStorage.setItem(oe.USERS,JSON.stringify(s)),localStorage.setItem(oe.PROFILES,JSON.stringify(a)),bt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"OTHER",description:`    : ${e.companyName}`,metadata:{newCustomerId:r,companyName:e.companyName}}),l},async updateCustomerPriceVisibility(e,s){const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);r!==-1&&(a[r].priceVisibility=s,localStorage.setItem(oe.PROFILES,JSON.stringify(a)),bt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"OTHER",description:`      ${s==="VISIBLE"?"":""}`,metadata:{targetUserId:e,priceVisibility:s}}))},async updateStaffStatus(e,s){const a=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),r=a.findIndex(n=>n.id===e);r!==-1&&(a[r].status=s,a[r].isActive=s==="ACTIVE",localStorage.setItem(oe.USERS,JSON.stringify(a)),bt({userId:"super-admin",eventType:s==="ACTIVE"?"USER_REACTIVATED":"USER_SUSPENDED",description:`   ${a[r].name}  ${s}`,metadata:{targetUserId:e}}))},async resetFailedLogin(e){const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=s.findIndex(r=>r.id===e);a!==-1&&(s[a].failedLoginAttempts=0,s[a].riskyLoginFlag=!1,localStorage.setItem(oe.USERS,JSON.stringify(s)))},async getAdminCustomers(e){let s=await this.getCustomersDatabase();if(e.search){const d=e.search.toLowerCase();s=s.filter(u=>{var h,f,x,p;return u.companyName.toLowerCase().includes(d)||((h=u.phone)==null?void 0:h.includes(d))||((f=u.email)==null?void 0:f.toLowerCase().includes(d))||((x=u.whatsapp)==null?void 0:x.includes(d))||((p=u.city)==null?void 0:p.toLowerCase().includes(d))})}if(e.customerType&&e.customerType!=="ALL"&&(s=s.filter(d=>d.customerType===e.customerType)),e.status&&e.status!=="ALL"&&(s=s.filter(d=>d.status===e.status)),e.assignedMarketerId&&(s=s.filter(d=>d.assignedMarketerId===e.assignedMarketerId)),e.assignedEmployeeId&&(s=s.filter(d=>d.assignedEmployeeId===e.assignedEmployeeId)),e.dateFrom&&(s=s.filter(d=>(d.lastLoginAt||"")>=e.dateFrom)),e.dateTo&&(s=s.filter(d=>(d.lastLoginAt||"")<=e.dateTo)),e.activityLevel&&e.activityLevel!=="ALL"){const d=new Date,u=new Date(d.getFullYear(),d.getMonth(),d.getDate()).toISOString(),h=new Date(d.getTime()-10080*60*1e3).toISOString(),f=new Date(d.getTime()-720*60*60*1e3).toISOString();e.activityLevel==="ACTIVE_TODAY"?s=s.filter(x=>(x.lastActivityAt||x.lastLoginAt||"")>=u):e.activityLevel==="ACTIVE_WEEK"?s=s.filter(x=>(x.lastActivityAt||x.lastLoginAt||"")>=h):e.activityLevel==="INACTIVE_30"&&(s=s.filter(x=>(x.lastActivityAt||x.lastLoginAt||"")<f))}e.orderBehavior&&e.orderBehavior!=="ALL"&&(e.orderBehavior==="HIGH_VOLUME"?s=s.filter(d=>(d.totalOrdersCount||0)>10):e.orderBehavior==="REJECTED_REQUESTS"?s=s.filter(d=>(d.totalRejectedOrders||0)>0):e.orderBehavior==="ABANDONED_CARTS"&&(s=s.filter(d=>(d.abandonedCartsCount||0)>0)));const a=e.sortBy||"lastActivityAt",r=e.sortDirection||"desc";s.sort((d,u)=>{let h,f;switch(a){case"name":case"companyName":h=d.companyName,f=u.companyName;break;case"lastActivityAt":h=d.lastActivityAt||d.lastLoginAt||"",f=u.lastActivityAt||u.lastLoginAt||"";break;case"lastLoginAt":h=d.lastLoginAt||"",f=u.lastLoginAt||"";break;case"createdAt":h=d.lastLoginAt||"",f=u.lastLoginAt||"";break;case"totalOrdersCount":h=d.totalOrdersCount||0,f=u.totalOrdersCount||0;break;case"totalSearchesCount":h=d.totalSearchesCount||0,f=u.totalSearchesCount||0;break;case"city":h=d.city||"",f=u.city||"";break;case"status":h=d.status||"",f=u.status||"";break;case"customerType":h=d.customerType||"",f=u.customerType||"";break;default:h=d.lastLoginAt||"",f=u.lastLoginAt||""}return h<f?r==="asc"?-1:1:h>f?r==="asc"?1:-1:0});const n=e.page||1,i=e.pageSize||15,l=(n-1)*i;return{items:s.slice(l,l+i),page:n,pageSize:i,total:s.length}},async getCustomerStats(){const e=await this.getCustomersDatabase();return{total:e.length,active:e.filter(s=>s.status==="ACTIVE").length,suspended:e.filter(s=>s.status==="SUSPENDED").length,blocked:e.filter(s=>s.status==="BLOCKED").length}},async getCustomerById(e){const a=(await this.getCustomersDatabase()).find(x=>x.userId===e);if(!a)return null;const n=(await this.getAllOrders()).filter(x=>x.userId===e||x.businessId===e),l=(await this.getAllQuoteRequests()).filter(x=>x.userId===e),d=(await this.getAbandonedCarts()).filter(x=>x.userId===e),u={totalOrders:n.length,totalRequests:l.length,totalApproved:n.filter(x=>x.status==="APPROVED"||x.status==="DELIVERED").length,totalRejected:n.filter(x=>x.status==="CANCELLED").length,totalSpent:n.reduce((x,p)=>x+p.totalAmount,0),abandonedCartsCount:d.length,activeRequestsCount:l.filter(x=>x.status==="NEW"||x.status==="UNDER_REVIEW").length},f=(await this.getActivityLogs()).filter(x=>x.userId===e).sort((x,p)=>new Date(p.timestamp).getTime()-new Date(x.timestamp).getTime()).slice(0,20);return{profile:a,summary:u,recentActivity:f}},async updateCustomerProfileAdmin(e,s){const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);r!==-1&&(["companyName","phone","whatsapp","email","customerType","assignedMarketerId","assignedEmployeeId","completionPercent","city","region","status","assignedPriceLevel"].forEach(i=>{s[i]!==void 0&&(a[r][i]=s[i])}),localStorage.setItem(oe.PROFILES,JSON.stringify(a)),bt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"OTHER",description:"   ",metadata:{targetUserId:e,updates:s}}))},async addCustomerNote(e,s,a,r){const n=JSON.parse(localStorage.getItem("CUSTOMER_NOTES")||"[]"),i={id:`note-${Date.now()}`,customerId:e,text:s,createdBy:a,createdByName:r,createdAt:new Date().toISOString()};return n.push(i),localStorage.setItem("CUSTOMER_NOTES",JSON.stringify(n)),bt({userId:a,userName:r,role:"SUPER_ADMIN",eventType:"OTHER",description:"   ",metadata:{targetUserId:e,noteId:i.id}}),i},async getCustomerNotes(e,s=1,a=10){const n=JSON.parse(localStorage.getItem("CUSTOMER_NOTES")||"[]").filter(l=>l.customerId===e).sort((l,o)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime()),i=(s-1)*a;return{notes:n.slice(i,i+a),total:n.length}},async getCustomerOrdersSummary(e){const s=await this.getAllOrders(),a=s.filter(n=>n.userId===e||n.businessId===e).sort((n,i)=>new Date(i.date).getTime()-new Date(n.date).getTime()).slice(0,10),r=s.filter(n=>n.userId===e||n.businessId===e);return{orders:a,stats:{pending:r.filter(n=>n.status==="PENDING").length,approved:r.filter(n=>n.status==="APPROVED"||n.status==="DELIVERED").length,rejected:r.filter(n=>n.status==="CANCELLED").length,total:r.length}}},async getMarketersForDropdown(){return(await this.getMarketers()).map(s=>({id:s.id,name:s.name}))},async getEmployeesForDropdown(){return(await this.getAdminUsers()).map(s=>({id:s.id,name:s.fullName}))},async getAllOrders(){const e=localStorage.getItem(oe.ORDERS);return e?JSON.parse(e):(localStorage.setItem(oe.ORDERS,JSON.stringify(lu)),lu)},async cancelOrder(e,s){const a=JSON.parse(localStorage.getItem(oe.ORDERS)||"[]"),r=a.findIndex(l=>l.id===e);if(r===-1)throw new Error("  ");const n=a[r];if(s==="CUSTOMER"&&[xt.SHIPPED,xt.DELIVERED].includes(n.status))throw new Error("CANNOT_CANCEL_SENSITIVE_STATUS");const i={...n,status:xt.CANCELLED,cancelledBy:s,cancelledAt:new Date().toISOString()};if(a[r]=i,localStorage.setItem(oe.ORDERS,JSON.stringify(a)),ou("ORDER_CANCELLED",{orderId:e,by:s}),bt({userId:i.userId,eventType:"ORDER_CANCELLED",description:`   #${i.id}  ${s==="CUSTOMER"?"":""}`,metadata:{orderId:i.id,cancelledBy:s}}),s==="ADMIN"){lr(i.userId,"ORDER_STATUS_CHANGED"," ",`    ${i.id}   .`);const l=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),o=l.findIndex(d=>d.id===i.userId);if(o!==-1){const d=l[o];d.hasUnreadOrders=!0,Ai(d)}}return i},async deleteOrder(e){const s=JSON.parse(localStorage.getItem(oe.ORDERS)||"[]"),a=s.find(n=>n.id===e),r=s.filter(n=>n.id!==e);localStorage.setItem(oe.ORDERS,JSON.stringify(r)),ou("ORDER_DELETED",{orderId:e}),a&&bt({userId:a.userId,eventType:"ORDER_DELETED",description:`   #${e}  `,metadata:{orderId:e}})},async getNotificationsForUser(e,s){const a=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]");let r=a.filter(h=>h.userId===e);(s==null?void 0:s.isRead)!==void 0&&(r=r.filter(h=>h.isRead===s.isRead)),s!=null&&s.types&&s.types.length>0?r=r.filter(h=>s.types.includes(h.type)):s!=null&&s.type&&(r=r.filter(h=>h.type===s.type)),r.sort((h,f)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());const n=r.length,i=a.filter(h=>h.userId===e&&!h.isRead).length,l=(s==null?void 0:s.limit)||20,d=(((s==null?void 0:s.page)||1)-1)*l;return{items:r.slice(d,d+l),unreadCount:i,total:n}},async getAllNotifications(){return JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]")},async markNotificationAsRead(e,s){const a=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]"),r=a.findIndex(n=>n.id===s&&n.userId===e);return r===-1?null:(a[r]={...a[r],isRead:!0,readAt:new Date().toISOString()},localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(a)),a[r])},async markAllNotificationsAsRead(e){const s=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]"),a=new Date().toISOString();let r=0;const n=s.map(i=>i.userId===e&&!i.isRead?(r++,{...i,isRead:!0,readAt:a}):i);return localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(n)),r},async markNotificationsAsRead(e){await this.markAllNotificationsAsRead(e)},async clearNotificationsForUser(e){const a=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]").filter(r=>r.userId!==e);localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(a))},async deleteNotification(e,s){const r=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]").filter(n=>!(n.id===s&&n.userId===e));localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(r))},async createNotification(e){return lr(e.userId,e.type,e.title,e.message,e.relatedType,e.relatedId,e.link)},async notifyAdmins(e,s,a,r,n){cu().forEach(l=>{lr(l,e,s,a,r,n)})},async getUnreadNotificationCount(e){return JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]").filter(a=>a.userId===e&&!a.isRead).length},async markOrdersAsReadForUser(e){const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a!==-1){const r=s[a];r.hasUnreadOrders&&(r.hasUnreadOrders=!1,r.lastOrdersViewedAt=new Date().toISOString(),Ai(r))}},async markQuotesAsReadForUser(e){const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a!==-1){const r=s[a];r.hasUnreadQuotes&&(r.hasUnreadQuotes=!1,r.lastQuotesViewedAt=new Date().toISOString(),Ai(r))}},async adminGrantPoints(e,s){const a=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),r=a.findIndex(n=>n.id===e);if(r!==-1){const n=a[r];n.searchLimit=(n.searchLimit||0)+s,Ai(n),lr(e,"SEARCH_POINTS_ADDED","   ",`  ${s}    .  : ${n.searchLimit}`),bt({userId:"super-admin",eventType:"SEARCH_POINTS_ADDED",description:` ${s}    ${n.name}`,metadata:{targetUserId:e,pointsAdded:s}})}},async saveProduct(e){let s=await this.searchProducts("");const a=s.findIndex(r=>r.id===e.id);a>=0?s[a]=e:s.push({...e,id:crypto.randomUUID()}),localStorage.setItem(oe.PRODUCTS,JSON.stringify(s))},async login(e,s,a){if(await Bt(20),e==="admin"&&s==="admin"){if(ou("LOGIN_ADMIN",{user:"admin"}),localStorage.getItem(oe.TOOL_CONFIGS)||localStorage.setItem(oe.TOOL_CONFIGS,JSON.stringify(this.getDefaultToolConfigs())),localStorage.getItem(oe.ORDERS)||localStorage.setItem(oe.ORDERS,JSON.stringify(lu)),localStorage.getItem(oe.QUOTE_REQUESTS)||localStorage.setItem(oe.QUOTE_REQUESTS,JSON.stringify(h1)),localStorage.getItem(oe.SETTINGS)||localStorage.setItem(oe.SETTINGS,JSON.stringify(ma)),localStorage.getItem(oe.ADMIN_ROLES)||localStorage.setItem(oe.ADMIN_ROLES,JSON.stringify(this.getDefaultRoles())),!localStorage.getItem(oe.ADMIN_USERS)){const v={id:"super-admin",username:"admin",email:"admin@system.com",fullName:" ",roleId:"role-super-admin",isActive:!0,isSuperAdmin:!0,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString()};localStorage.setItem(oe.ADMIN_USERS,JSON.stringify([v]))}bt({userId:"super-admin",userName:" ",role:"SUPER_ADMIN",eventType:"LOGIN",description:"  "});const p={id:"super-admin",clientId:"admin",name:" ",email:"admin@system.com",role:"SUPER_ADMIN",extendedRole:"SUPER_ADMIN",searchLimit:0,searchUsed:0,isSuperAdmin:!0,isApproved:!0,status:"ACTIVE"};return localStorage.setItem(oe.SESSION,JSON.stringify(p)),{user:p,profile:null}}let r=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),n=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]");if(!r.find(p=>p.phone==="0500056988"&&p.role==="CUSTOMER_STAFF")){const p={id:"demo-staff-id",clientId:"STAFF-001",name:" ",email:"staff@sinicar.com",phone:"0500056988",activationCode:"381960",role:"CUSTOMER_STAFF",parentId:"demo-user-id",businessId:"demo-user-id",searchLimit:20,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE"};r.push(p),localStorage.setItem(oe.USERS,JSON.stringify(r))}if(!r.find(p=>p.clientId==="user-5")){const p={id:"supplier-user-5",clientId:"user-5",name:"  ",email:"5@sinicar.com",phone:"050000005",password:"5",role:"CUSTOMER_OWNER",searchLimit:100,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",isSupplier:!0,extendedRole:"SUPPLIER_LOCAL"};r.push(p),localStorage.setItem(oe.USERS,JSON.stringify(r))}if(!r.find(p=>p.clientId==="SL-20001")){const p={id:"supplier-1",clientId:"SL-20001",name:"  ",email:"supplier1@alamal.com",phone:"0560000001",password:"supplier123",role:"CUSTOMER_OWNER",searchLimit:100,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",isSupplier:!0,extendedRole:"SUPPLIER_LOCAL"};r.push(p),localStorage.setItem(oe.USERS,JSON.stringify(r))}if(!r.find(p=>p.clientId==="MKT-001")){const p={id:"marketer-demo-1",clientId:"MKT-001",name:" ",email:"marketer@sinicar.com",phone:"0555555551",password:"marketer123",role:"CUSTOMER_OWNER",searchLimit:75,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",extendedRole:"MARKETER"};r.push(p),localStorage.setItem(oe.USERS,JSON.stringify(r))}if(!r.find(p=>p.clientId==="ADV-001")){const p={id:"advertiser-demo-1",clientId:"ADV-001",name:" ",email:"advertiser@sinicar.com",phone:"0555555552",password:"advertiser123",role:"CUSTOMER_OWNER",searchLimit:60,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",extendedRole:"EMPLOYEE"};r.push(p),localStorage.setItem(oe.USERS,JSON.stringify(r))}if(e==="1"&&s==="1"&&a==="OWNER"&&!r.find(v=>v.clientId==="1")){const v="demo-user-id",b={id:v,clientId:"1",password:"1",name:"  ()",email:"admin@sinicar.com",role:"CUSTOMER_OWNER",searchLimit:50,searchUsed:0,lastSearchDate:new Date().toISOString().split("T")[0],priceLevel:"A",isApproved:!0,accountStatus:"ACTIVE",customerType:"WHOLESALE",businessId:v,hasUnreadOrders:!1,status:"ACTIVE",lastLoginAt:new Date().toISOString()},y={userId:v,companyName:"   ",phone:"0500000000",region:"",city:"",crNumber:"1010101010",taxNumber:"300055566600003",nationalAddress:"1234   ",customerType:YM.SPARE_PARTS_SHOP,deviceFingerprint:"DEMO",branches:[{id:"b1",name:"",city:"",address:" ",phone:"0500000000"}],isApproved:!0,status:"ACTIVE",searchPointsTotal:50,searchPointsRemaining:50};r.push(b),n.push(y),localStorage.setItem(oe.USERS,JSON.stringify(r)),localStorage.setItem(oe.PROFILES,JSON.stringify(n)),localStorage.getItem(oe.ORDERS)||localStorage.setItem(oe.ORDERS,JSON.stringify(lu)),localStorage.getItem(oe.QUOTE_REQUESTS)||localStorage.setItem(oe.QUOTE_REQUESTS,JSON.stringify(h1))}let h;if(a==="OWNER"){if(h=r.find(p=>p.clientId===e),!h)throw new Error("   ");if(h.role==="ADMIN"&&(h.role="CUSTOMER_OWNER"),h.password!==s)throw h.failedLoginAttempts=(h.failedLoginAttempts||0)+1,Ai(h),bt({userId:h.id,userName:h.name,role:h.role,eventType:"FAILED_LOGIN",description:"    "}),new Error("   ");if(h.role!=="CUSTOMER_OWNER"&&h.role!=="SUPER_ADMIN")throw new Error("     ")}else if(a==="STAFF"){if(h=r.find(p=>p.phone===e&&(p.role==="CUSTOMER_STAFF"||p.role==="EMPLOYEE")),!h)throw new Error("    ");if(h.role==="EMPLOYEE"&&(h.role="CUSTOMER_STAFF"),h.activationCode!==s&&h.password!==s)throw h.failedLoginAttempts=(h.failedLoginAttempts||0)+1,Ai(h),new Error("   ")}if(!h)throw new Error("  ");if(h.isActive===!1||h.status==="BLOCKED"||h.status==="SUSPENDED")throw new Error("     ");h.searchLimit===void 0&&(h.searchLimit=50,h.searchUsed=0,h.lastSearchDate=new Date().toISOString().split("T")[0],h.priceLevel="B",h.accountStatus="ACTIVE"),h.failedLoginAttempts=0,h.lastLoginAt=new Date().toISOString(),h=VO(h),Ai(h);const f=h.role==="CUSTOMER_STAFF"?h.parentId:h.id,x=n.find(p=>p.userId===f);if(x&&a==="OWNER"){x.lastLoginAt=h.lastLoginAt;const p=n.findIndex(v=>v.userId===x.userId);p!==-1&&(n[p]=x,localStorage.setItem(oe.PROFILES,JSON.stringify(n)))}return localStorage.setItem(oe.SESSION,JSON.stringify(h)),ou("LOGIN_SUCCESS",{userId:h.id,type:a}),bt({userId:h.id,userName:h.name,role:h.role,eventType:"LOGIN",description:"  "}),{user:h,profile:x||null}},async registerBusiness(e,s){await Bt(100);const a=JSON.parse(localStorage.getItem(oe.USERS)||"[]");if(a.find(d=>d.email===e.email))throw new Error("   ");const r=crypto.randomUUID(),n=bte(),i={...e,id:r,clientId:n,role:"CUSTOMER_OWNER",businessId:r,searchLimit:50,searchUsed:0,lastSearchDate:new Date().toISOString().split("T")[0],priceLevel:"C",accountStatus:"PENDING",isApproved:!1,hasUnreadOrders:!1,status:"PENDING"},l={...s,userId:r,branches:[{id:crypto.randomUUID(),name:" ",city:s.city,address:s.nationalAddress,phone:e.phone}],isApproved:!1};a.push(i);const o=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]");return o.push(l),localStorage.setItem(oe.USERS,JSON.stringify(a)),localStorage.setItem(oe.PROFILES,JSON.stringify(o)),{success:!0,message:"  ",clientId:n}},async getCurrentSession(){const e=localStorage.getItem(oe.SESSION);if(!e)return null;const s=JSON.parse(e);let r=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(n=>n.id===s.id);return r?(r.searchLimit===void 0&&(r.searchLimit=50,r.searchUsed=0,r.lastSearchDate=new Date().toISOString().split("T")[0]),r=VO(r),Ai(r),r):s},async logout(){const e=localStorage.getItem(oe.SESSION);if(e){const s=JSON.parse(e);ou("LOGOUT",{userId:s.id}),bt({userId:s.id,userName:s.name,role:s.role,eventType:"LOGOUT",description:" "})}localStorage.removeItem(oe.SESSION)},canShowPrice(e){if(!e)return!1;if(e.role==="SUPER_ADMIN")return!0;const s=e.searchLimit??50,a=e.searchUsed??0;return s===0?!0:a<s},async incrementSearchUsage(e){const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a!==-1){let r=s[a];const n=new Date().toISOString().split("T")[0];r.lastSearchDate!==n&&(r.searchUsed=0,r.lastSearchDate=n);const i=r.searchLimit??50;if(i!==0){const l=r.searchUsed||0;if(l>=i)throw new Error("NO_POINTS_LEFT");r.searchUsed=l+1}return Ai(r),r}throw new Error("User not found")},hasRecentPriceView(e,s){const a=JSON.parse(localStorage.getItem(oe.SEARCH_HISTORY)||"[]"),r=Date.now()-7200*60*1e3;return!!a.find(i=>i.userId===e&&i.productId===s&&new Date(i.viewedAt).getTime()>r)},async logPriceView(e,s){const r=JSON.parse(localStorage.getItem(oe.SEARCH_HISTORY)||"[]").filter(i=>!(i.userId===e.id&&i.productId===s.id)),n={id:crypto.randomUUID(),userId:e.id,productId:s.id,partNumber:s.partNumber,productName:s.name,viewedAt:new Date().toISOString(),priceSnapshot:s.price};r.unshift(n),r.length>500&&r.pop(),localStorage.setItem(oe.SEARCH_HISTORY,JSON.stringify(r)),bt({userId:e.id,userName:e.name,role:e.role,eventType:"SEARCH_PERFORMED",description:`  : ${s.partNumber} - ${s.name}`,metadata:{productId:s.id,partNumber:s.partNumber}})},getSearchHistoryForUser(e){return JSON.parse(localStorage.getItem(oe.SEARCH_HISTORY)||"[]").filter(a=>a.userId===e)},async logMissingProduct(e,s,a,r="SEARCH",n){const i=JSON.parse(localStorage.getItem(oe.MISSING_REQUESTS)||"[]"),l=Zi(s),o=new Date().toISOString(),d=i.findIndex(u=>u.normalizedPartNumber&&u.normalizedPartNumber===l&&l.length>3||u.query.trim().toLowerCase()===s.trim().toLowerCase());if(d!==-1){const u=i[d],h=new Set(u.customerIds||[]);h.add(e);const f={...u,totalRequestsCount:(u.totalRequestsCount||1)+1,uniqueCustomersCount:h.size,customerIds:Array.from(h),lastRequestedAt:o,source:r==="QUOTE"?"QUOTE":u.source,quoteRequestId:n||u.quoteRequestId};i[d]=f}else{const u={id:crypto.randomUUID(),userId:e,userName:a,query:s,normalizedPartNumber:l,partNumber:l.length>3?s:void 0,name:l.length<=3?s:void 0,createdAt:o,source:r,quoteRequestId:n,status:"NEW",totalRequestsCount:1,uniqueCustomersCount:1,customerIds:[e],lastRequestedAt:o,isNew:!0};i.push(u)}localStorage.setItem(oe.MISSING_REQUESTS,JSON.stringify(i)),r==="SEARCH"&&bt({userId:e,userName:a,eventType:"SEARCH_PERFORMED",description:`    : ${s}`,metadata:{query:s}})},async getMissingProductRequests(){return JSON.parse(localStorage.getItem(oe.MISSING_REQUESTS)||"[]")},async updateMissingProductStatus(e,s,a){const r=await this.getMissingProductRequests(),n=r.findIndex(l=>l.id===e);if(n===-1)throw new Error("Record not found");const i={...r[n],status:s,adminNotes:a??r[n].adminNotes};return r[n]=i,localStorage.setItem(oe.MISSING_REQUESTS,JSON.stringify(r)),i},getStockThreshold(){return JSON.parse(localStorage.getItem(oe.SETTINGS)||"{}").stockThreshold??0},getMinVisibleQty(){return JSON.parse(localStorage.getItem(oe.SETTINGS)||"{}").minVisibleQty??1},async logMissingPartFromSearch(e){const s=new Date().toISOString().split("T")[0],a=JSON.parse(localStorage.getItem(oe.MISSING_REQUESTS)||"[]"),r=a.findIndex(n=>n.normalizedPartNumber===e.normalizedPartNumber&&n.userId===(e.customerId||"guest")&&n.lastSearchDate===s);if(r>=0){const n=a[r];a[r]={...n,searchCount:(n.searchCount||1)+1,lastRequestedAt:new Date().toISOString(),totalRequestsCount:(n.totalRequestsCount||1)+1,availabilityStatus:e.availabilityStatus,searchSource:e.searchSource}}else{const n={id:crypto.randomUUID(),userId:e.customerId||"guest",userName:e.customerName,query:e.partNumber,partNumber:e.partNumber,normalizedPartNumber:e.normalizedPartNumber,name:e.productName,brand:e.brand,carModel:e.carInfo,branchId:e.branchId,productId:e.productId,createdAt:new Date().toISOString(),source:"SEARCH",availabilityStatus:e.availabilityStatus,searchSource:e.searchSource,searchCount:1,lastSearchDate:s,status:"NEW",totalRequestsCount:1,uniqueCustomersCount:1,customerIds:e.customerId?[e.customerId]:[],lastRequestedAt:new Date().toISOString(),isNew:!0};a.push(n)}localStorage.setItem(oe.MISSING_REQUESTS,JSON.stringify(a))},getExcelColumnPresets(){const e=localStorage.getItem(oe.EXCEL_COLUMN_PRESETS);if(!e){const s={id:"default-preset",name:" ",isDefault:!0,mappings:[{internalField:"partNumber",excelHeader:" ",isEnabled:!0,isRequired:!0},{internalField:"name",excelHeader:" ",isEnabled:!0,isRequired:!0},{internalField:"brand",excelHeader:"",isEnabled:!0,isRequired:!1},{internalField:"qtyTotal",excelHeader:"",isEnabled:!0,isRequired:!0},{internalField:"priceWholesale",excelHeader:" ",isEnabled:!0,isRequired:!1},{internalField:"priceRetail",excelHeader:" ",isEnabled:!0,isRequired:!1}],createdAt:new Date().toISOString()};return localStorage.setItem(oe.EXCEL_COLUMN_PRESETS,JSON.stringify([s])),[s]}return JSON.parse(e)},getDefaultExcelColumnPreset(){const e=this.getExcelColumnPresets();return e.find(s=>s.isDefault)||e[0]||null},createExcelColumnPreset(e){const s=this.getExcelColumnPresets(),a={...e,id:`preset-${Date.now()}`,createdAt:new Date().toISOString()};return e.isDefault&&s.forEach(r=>r.isDefault=!1),s.push(a),localStorage.setItem(oe.EXCEL_COLUMN_PRESETS,JSON.stringify(s)),a},updateExcelColumnPreset(e,s){const a=this.getExcelColumnPresets(),r=a.findIndex(n=>n.id===e);return r===-1?null:(s.isDefault&&a.forEach(n=>n.isDefault=!1),a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(oe.EXCEL_COLUMN_PRESETS,JSON.stringify(a)),a[r])},deleteExcelColumnPreset(e){const s=this.getExcelColumnPresets(),a=s.findIndex(n=>n.id===e);if(a===-1)return!1;const r=s[a].isDefault;return s.splice(a,1),r&&s.length>0&&(s[0].isDefault=!0),localStorage.setItem(oe.EXCEL_COLUMN_PRESETS,JSON.stringify(s)),!0},setDefaultExcelColumnPreset(e){const s=this.getExcelColumnPresets(),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.forEach(r=>r.isDefault=!1),s[a].isDefault=!0,localStorage.setItem(oe.EXCEL_COLUMN_PRESETS,JSON.stringify(s)),!0)},async getImportRequests(){return JSON.parse(localStorage.getItem(oe.IMPORT_REQUESTS)||"[]")},async createImportRequest(e){await Bt(100);const s=JSON.parse(localStorage.getItem(oe.IMPORT_REQUESTS)||"[]"),a={status:"NEW",note:"     ",changedAt:new Date().toISOString(),changedBy:e.businessName||"Customer",actorRole:"CUSTOMER"},r={...e,id:`IMP-${Math.floor(1e4+Math.random()*9e4)}`,status:"NEW",createdAt:new Date().toISOString(),timeline:[a],isNew:!0};return s.push(r),localStorage.setItem(oe.IMPORT_REQUESTS,JSON.stringify(s)),bt({userId:e.customerId,eventType:"IMPORT_REQUEST",description:`   (${e.serviceMode})`,metadata:{importId:r.id}}),r},async updateImportRequestStatus(e,s,a){const r=JSON.parse(localStorage.getItem(oe.IMPORT_REQUESTS)||"[]"),n=r.findIndex(u=>u.id===e);if(n===-1)throw new Error("  ");const i=r[n],l=i.status,o={status:s,note:(a==null?void 0:a.note)||null,changedAt:new Date().toISOString(),changedBy:(a==null?void 0:a.changedBy)||"System",actorRole:(a==null?void 0:a.actorRole)||"ADMIN"},d={...i,status:s,updatedAt:new Date().toISOString(),timeline:[...i.timeline||[],o]};return r[n]=d,localStorage.setItem(oe.IMPORT_REQUESTS,JSON.stringify(r)),(a==null?void 0:a.actorRole)==="ADMIN"&&s!==l&&lr(d.customerId,"IMPORT_UPDATE","  ",`    #${d.id}  ${s}`),bt({userId:(a==null?void 0:a.actorRole)==="ADMIN"?"super-admin":d.customerId,eventType:"IMPORT_STATUS_CHANGED",description:`     ${s}`,metadata:{importId:e,oldStatus:l,newStatus:s}}),d},async uploadImportRequestExcel(e,s,a){await Bt(500);const r=JSON.parse(localStorage.getItem(oe.IMPORT_REQUESTS)||"[]"),n=r.findIndex(d=>d.id===e);if(n===-1)throw new Error("Request not found");const i=r[n],l={status:i.status,note:`   : ${s}`,changedAt:new Date().toISOString(),changedBy:a,actorRole:"CUSTOMER"},o={...i,customerExcelFileName:s,customerExcelUploadedAt:new Date().toISOString(),timeline:[...i.timeline||[],l]};return r[n]=o,localStorage.setItem(oe.IMPORT_REQUESTS,JSON.stringify(r)),o},async completeImportRequestPricing(e,s){const a=JSON.parse(localStorage.getItem(oe.IMPORT_REQUESTS)||"[]"),r=a.findIndex(o=>o.id===e);if(r===-1)throw new Error("Request not found");const n=a[r],i={status:"PRICING_SENT",note:`    (${s.totalAmount} .)`,changedAt:new Date().toISOString(),changedBy:s.adminName,actorRole:"ADMIN"},l={...n,status:"PRICING_SENT",pricingFileNameForCustomer:s.pricingFileName,pricingTotalAmount:s.totalAmount,pricingPreparedBy:s.adminName,pricingPreparedAt:new Date().toISOString(),timeline:[...n.timeline||[],i]};return a[r]=l,localStorage.setItem(oe.IMPORT_REQUESTS,JSON.stringify(a)),lr(l.customerId,"IMPORT_UPDATE","  ",`      #${e}.   .`),l},async confirmImportRequestByCustomer(e,s){return this.updateImportRequestStatus(e,"APPROVED_BY_CUSTOMER",{note:s.approvalNote||"    ",changedBy:s.customerName,actorRole:"CUSTOMER"})},async getAccountOpeningRequests(){return JSON.parse(localStorage.getItem(oe.ACCOUNT_REQUESTS)||"[]")},async createAccountOpeningRequest(e){await Bt(100);const s=JSON.parse(localStorage.getItem(oe.ACCOUNT_REQUESTS)||"[]"),a={...e,id:`REQ-${Date.now().toString().slice(-6)}${Math.floor(Math.random()*9)}`,status:"NEW",createdAt:new Date().toISOString(),isNew:!0};return s.push(a),localStorage.setItem(oe.ACCOUNT_REQUESTS,JSON.stringify(s)),bt({userId:"GUEST",userName:e.fullName||e.businessName,eventType:"ACCOUNT_REQUEST",description:`   : ${e.businessName||e.fullName}`,metadata:{requestId:a.id,category:e.category}}),cu().forEach(n=>{lr(n,"NEW_ACCOUNT_REQUEST","   ",`    : ${e.businessName||e.fullName}`,"ACCOUNT",a.id)}),a},async updateAccountOpeningRequestStatus(e,s,a){const r=JSON.parse(localStorage.getItem(oe.ACCOUNT_REQUESTS)||"[]"),n=r.findIndex(l=>l.id===e);if(n===-1)throw new Error("    ");const i={...r[n],status:s,updatedAt:new Date().toISOString(),...a};return r[n]=i,localStorage.setItem(oe.ACCOUNT_REQUESTS,JSON.stringify(r)),i.userId&&(s==="APPROVED"?lr(i.userId,"ACCOUNT_APPROVED","  ","     SINI CAR.      .","ACCOUNT",i.id):s==="REJECTED"&&lr(i.userId,"ACCOUNT_REJECTED","   ","     .       .","ACCOUNT",i.id)),i},async reviewAccountRequest(e,s){const a=JSON.parse(localStorage.getItem(oe.ACCOUNT_REQUESTS)||"[]"),r=a.findIndex(i=>i.id===e);if(r===-1)throw new Error("Request not found");const n={...a[r],...s,reviewedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a[r]=n,localStorage.setItem(oe.ACCOUNT_REQUESTS,JSON.stringify(a)),bt({userId:s.reviewedBy,userName:s.reviewedBy,role:"SUPER_ADMIN",eventType:"ACCOUNT_REQUEST_REVIEWED",description:` ${s.status==="APPROVED"?"":s.status==="REJECTED"?"":""}     ${n.businessName||n.fullName}`,metadata:{requestId:e,status:s.status}}),n.userId&&(s.status==="APPROVED"?lr(n.userId,"ACCOUNT_APPROVED","  ","     SINI CAR.      .","ACCOUNT",e):s.status==="REJECTED"&&lr(n.userId,"ACCOUNT_REJECTED","   ","     .       .","ACCOUNT",e)),n},async searchProducts(e){const s=localStorage.getItem(oe.PRODUCTS);let a=s?JSON.parse(s):_l;return s||(a=_l,localStorage.setItem(oe.PRODUCTS,JSON.stringify(a))),a.map(r=>{if(!r.normalizedPart||!r.numericPartCore){const n=p9(r.partNumber);return{...r,normalizedPart:n.clean,numericPartCore:n.numericCore}}return r})},async getFeaturedProducts(){const e=await this.searchProducts("");return{newArrivals:e.filter(s=>s.isNew),onSale:e.filter(s=>s.isOnSale)}},async getBanners(){const e=localStorage.getItem(oe.BANNERS);if(e)return JSON.parse(e);const s=gte.map((a,r)=>({...a,id:a.id||`b-${r}`,isActive:a.isActive!==void 0?a.isActive:!0,colorClass:a.colorClass.replace("red","primary").replace("blue","secondary")}));return localStorage.setItem(oe.BANNERS,JSON.stringify(s)),s},async getNews(){const e=localStorage.getItem(oe.NEWS);return e?JSON.parse(e):(localStorage.setItem(oe.NEWS,JSON.stringify(qO)),qO)},async createOrder(e){const s=JSON.parse(localStorage.getItem(oe.ORDERS)||"[]"),a=JSON.parse(localStorage.getItem(oe.SESSION)||"{}"),r=e.businessId||a.businessId||a.id,n={...e,id:`ORD-${Math.floor(Math.random()*1e5)}`,status:xt.PENDING,date:new Date().toISOString(),businessId:r,createdByUserId:a.id,createdByName:a.name,internalStatus:"NEW",internalStatusHistory:[{status:"NEW",changedAt:new Date().toISOString(),changedBy:"system"}],isNew:!0};return s.push(n),localStorage.setItem(oe.ORDERS,JSON.stringify(s)),ou("ORDER_CREATED",{orderId:n.id,amount:n.totalAmount}),bt({userId:a.id,userName:a.name,role:a.role,eventType:"ORDER_CREATED",description:`     ${n.totalAmount.toLocaleString()} .`,metadata:{orderId:n.id,itemCount:n.items.length}}),n},async getOrders(e){const s=JSON.parse(localStorage.getItem(oe.ORDERS)||"[]");if(s.length===0&&e==="demo-user-id")return localStorage.setItem(oe.ORDERS,JSON.stringify(lu)),lu;const r=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(n=>n.id===e);return r&&r.businessId?s.filter(n=>n.businessId===r.businessId||n.userId===e).reverse():s.filter(n=>n.userId===e).reverse()},async updateOrderInternalStatus(e,s,a,r){const n=await this.getAllOrders(),i=n.findIndex(d=>d.id===e);if(i===-1)throw new Error("ORDER_NOT_FOUND");const l=n[i],o={...l,internalStatus:s,internalNotes:r??l.internalNotes,internalStatusHistory:[...l.internalStatusHistory??[],{status:s,changedAt:new Date().toISOString(),changedBy:a}]};return n[i]=o,localStorage.setItem(oe.ORDERS,JSON.stringify(n)),bt({userId:"super-admin",userName:a,role:"SUPER_ADMIN",eventType:"ORDER_INTERNAL_STATUS_CHANGED",description:`    #${l.id}  ${s}`,metadata:{orderId:l.id,newStatus:s}}),o},async adminUpdateOrderStatus(e,s,a){var x;const r=await this.getAllOrders(),n=r.findIndex(p=>p.id===e);if(n===-1)throw new Error("ORDER_NOT_FOUND");const i=r[n],l=i.status,o={...i,status:s};r[n]=o,localStorage.setItem(oe.ORDERS,JSON.stringify(r)),lr(i.userId,"ORDER_STATUS_CHANGED","  ",`     ${i.id}  ${l}  ${s}`),bt({userId:"super-admin",userName:a,role:"SUPER_ADMIN",eventType:"ORDER_STATUS_CHANGED",description:`   #${i.id} ()  ${s}`,metadata:{orderId:i.id,newStatus:s}});const d=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),u=d.findIndex(p=>p.id===i.userId);if(u!==-1){const p=d[u];p.hasUnreadOrders=!0,Ai(p)}const f=(await this.getSettings()).orderStatusPointsConfig;if(f!=null&&f.enabled){const p=(x=Object.entries(xt).find(([b,y])=>y===s))==null?void 0:x[0],v=p?f.pointsPerStatus[p]:0;if(v&&v>0){const b=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),y=d.find(j=>j.id===i.userId);if(y){const j=y.role==="CUSTOMER_STAFF"?y.parentId:y.id,w=b.findIndex(S=>S.userId===j);w!==-1&&(b[w].searchPointsRemaining=(b[w].searchPointsRemaining||0)+v,b[w].searchPointsTotal=(b[w].searchPointsTotal||0)+v,localStorage.setItem(oe.PROFILES,JSON.stringify(b)),lr(i.userId,"SEARCH_POINTS_ADDED","   ",`  ${v}       #${i.id}  "${s}"`),bt({userId:"super-admin",userName:"",role:"SUPER_ADMIN",eventType:"SEARCH_POINTS_ADDED",description:` : ${v}       "${s}"`,metadata:{orderId:i.id,pointsAdded:v,targetUserId:j}}))}}}return o},async getAbandonedCarts(){const e=JSON.parse(localStorage.getItem(oe.ABANDONED_CARTS)||"[]"),s=Date.now()-900*1e3;return e.filter(a=>a.status==="ACTIVE"&&new Date(a.lastUpdatedAt).getTime()<s)},async saveAbandonedCart(e,s,a){if(!e||s.length===0)return null;const r=JSON.parse(localStorage.getItem(oe.ABANDONED_CARTS)||"[]"),i=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(u=>u.id===e),l=new Date().toISOString(),o=r.findIndex(u=>u.userId===e&&u.status==="ACTIVE");if(o!==-1)return r[o].items=s,r[o].totalAmount=a,r[o].lastUpdatedAt=l,i&&(r[o].userName=i.name,r[o].whatsapp=i.whatsapp||i.phone,r[o].phone=i.phone,r[o].extendedRole=i.extendedRole),localStorage.setItem(oe.ABANDONED_CARTS,JSON.stringify(r)),r[o];const d={id:`AC-${Date.now()}-${Math.floor(Math.random()*1e3)}`,userId:e,userName:i==null?void 0:i.name,whatsapp:(i==null?void 0:i.whatsapp)||(i==null?void 0:i.phone),phone:i==null?void 0:i.phone,extendedRole:i==null?void 0:i.extendedRole,items:s,totalAmount:a,lastUpdatedAt:l,status:"ACTIVE",createdAt:l};return r.push(d),localStorage.setItem(oe.ABANDONED_CARTS,JSON.stringify(r)),d},async convertAbandonedCart(e){const s=JSON.parse(localStorage.getItem(oe.ABANDONED_CARTS)||"[]"),a=s.findIndex(r=>r.userId===e&&r.status==="ACTIVE");return a===-1?!1:(s.splice(a,1),localStorage.setItem(oe.ABANDONED_CARTS,JSON.stringify(s)),!0)},async clearAbandonedCart(e){const s=JSON.parse(localStorage.getItem(oe.ABANDONED_CARTS)||"[]"),a=s.findIndex(r=>r.userId===e&&r.status==="ACTIVE");return a===-1?!1:(s.splice(a,1),localStorage.setItem(oe.ABANDONED_CARTS,JSON.stringify(s)),!0)},async getAbandonedCartById(e){return JSON.parse(localStorage.getItem(oe.ABANDONED_CARTS)||"[]").find(a=>a.id===e)||null},async uploadAlternatives(e,s,a){const r=JSON.parse(localStorage.getItem(oe.ALTERNATIVE_PARTS)||"[]"),n=new Date().toISOString();let i=0,l=0;const o=[];for(let d=0;d<e.length;d++){const u=e[d],h=(u.mainPart||"").trim().toUpperCase(),f=(u.altPart||"").trim().toUpperCase();if(!h||!f){l++,o.push(`Row ${d+1}: Missing main or alternative part number`);continue}if(h===f){l++,o.push(`Row ${d+1}: Main and alternative part numbers are the same`);continue}const x=r.find(p=>p.mainPartNumber===h&&p.altPartNumber===f);x?(x.description=u.description||x.description,x.brand=u.brand||x.brand,x.updatedAt=n,i++):(r.push({id:`ALT-${Date.now()}-${Math.random().toString(36).substr(2,6)}`,mainPartNumber:h,altPartNumber:f,description:u.description||void 0,brand:u.brand||void 0,sourceType:"CUSTOMER_UPLOAD",sourceUserId:s,sourceUserName:a,createdAt:n,updatedAt:n}),i++)}return localStorage.setItem(oe.ALTERNATIVE_PARTS,JSON.stringify(r)),{success:!0,rowsProcessed:e.length,rowsInserted:i,rowsSkipped:l,errors:o.slice(0,10)}},async searchAlternatives(e){const s=JSON.parse(localStorage.getItem(oe.ALTERNATIVE_PARTS)||"[]"),a=(e||"").trim().toUpperCase();return a?s.filter(r=>r.mainPartNumber===a||r.altPartNumber===a):[]},async getAllAlternatives(e=1,s=50){const a=JSON.parse(localStorage.getItem(oe.ALTERNATIVE_PARTS)||"[]"),r=a.sort((l,o)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime()),n=(e-1)*s,i=n+s;return{data:r.slice(n,i),total:a.length}},async deleteAlternative(e){const s=JSON.parse(localStorage.getItem(oe.ALTERNATIVE_PARTS)||"[]"),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.splice(a,1),localStorage.setItem(oe.ALTERNATIVE_PARTS,JSON.stringify(s)),!0)},async deleteAllAlternativesByUser(e){const s=JSON.parse(localStorage.getItem(oe.ALTERNATIVE_PARTS)||"[]"),a=s.filter(n=>n.sourceUserId!==e),r=s.length-a.length;return localStorage.setItem(oe.ALTERNATIVE_PARTS,JSON.stringify(a)),r},async advancedSearchProducts(e){const{q:s="",brand:a,make:r,model:n,year:i,page:l=1,pageSize:o=20}=e;let u=await this.searchProducts("");if(s.trim()){const p=s.toLowerCase().trim();u=u.filter(v=>v.partNumber.toLowerCase().includes(p)||v.name.toLowerCase().includes(p)||v.manufacturerPartNumber&&v.manufacturerPartNumber.toLowerCase().includes(p)||v.description&&v.description.toLowerCase().includes(p))}a&&(u=u.filter(p=>{var v;return((v=p.brand)==null?void 0:v.toLowerCase())===a.toLowerCase()})),r&&(u=u.filter(p=>{var v;return(v=p.carName)==null?void 0:v.toLowerCase().includes(r.toLowerCase())})),n&&(u=u.filter(p=>{var v;return(v=p.carName)==null?void 0:v.toLowerCase().includes(n.toLowerCase())})),i&&(u=u.filter(p=>{var v;return(v=p.modelYear)==null?void 0:v.includes(i)}));const h=u.length,f=(l-1)*o;return{items:u.slice(f,f+o),page:l,pageSize:o,total:h}},async createPurchaseRequest(e,s,a,r,n){const i=JSON.parse(localStorage.getItem(oe.PURCHASE_REQUESTS)||"[]"),l=`PR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,o={id:l,customerId:e,customerName:s,companyName:a,createdAt:new Date().toISOString(),status:"NEW",source:"PRODUCT_SEARCH_PAGE",items:r.map((u,h)=>({id:`${l}-item-${h}`,productId:u.productId,partNumber:u.partNumber,productName:u.productName,quantity:u.quantity,priceAtRequest:u.priceAtRequest,notes:u.notes})),totalItemsCount:r.length,notes:n,createdByUserId:e,createdByName:s,isNew:!0};return i.push(o),localStorage.setItem(oe.PURCHASE_REQUESTS,JSON.stringify(i)),bt({userId:e,userName:s,role:"CUSTOMER_OWNER",eventType:"PURCHASE_REQUEST_CREATED",description:`       ${r.length} `,metadata:{requestId:l,itemsCount:r.length}}),cu().forEach(u=>{lr(u,"NEW_PURCHASE_REQUEST","  ",`    ${s} (${a}) - ${r.length} `,"REQUEST",l)}),{success:!0,requestId:l}},async getPurchaseRequests(e,s=1,a=20){let n=JSON.parse(localStorage.getItem(oe.PURCHASE_REQUESTS)||"[]");e!=null&&e.customerId&&(n=n.filter(d=>d.customerId===e.customerId)),e!=null&&e.status&&(n=n.filter(d=>d.status===e.status)),n.sort((d,u)=>new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime());const i=n.length,l=(s-1)*a;return{items:n.slice(l,l+a),total:i,page:s,pageSize:a}},async getPurchaseRequestById(e){return JSON.parse(localStorage.getItem(oe.PURCHASE_REQUESTS)||"[]").find(a=>a.id===e)||null},async updatePurchaseRequestStatus(e,s,a,r){const n=JSON.parse(localStorage.getItem(oe.PURCHASE_REQUESTS)||"[]"),i=n.findIndex(o=>o.id===e);if(i===-1)return null;const l=n[i].status;if(n[i]={...n[i],status:s,updatedAt:new Date().toISOString(),adminReviewedBy:a,adminReviewedAt:new Date().toISOString(),adminNote:r||n[i].adminNote,isNew:!1},localStorage.setItem(oe.PURCHASE_REQUESTS,JSON.stringify(n)),n[i].customerId&&l!==s){const o={NEW:"",PROCESSING:" ",COMPLETED:"",CANCELLED:""};lr(n[i].customerId,"ORDER_STATUS_CHANGED","   ",`     #${e} : ${o[s]||s}`,"REQUEST",e)}return n[i]},async getNewPurchaseRequestsCount(){return JSON.parse(localStorage.getItem(oe.PURCHASE_REQUESTS)||"[]").filter(s=>s.isNew).length},async createQuoteRequest(e){const s=JSON.parse(localStorage.getItem(oe.QUOTE_REQUESTS)||"[]"),a=await this.searchProducts(""),r=e.items.map((i,l)=>{const o=Zi(i.partNumber),d=a.find(u=>Zi(u.partNumber)===o||u.partNumber===i.partNumber);return{...i,rowIndex:l,status:"PENDING",approvalStatus:"PENDING",matchedProductId:d?d.id:void 0,matchedProductName:d?d.name:void 0,matchedPrice:d?d.price:void 0,isAvailable:d?d.stock>0:void 0}}),n={...e,items:r,id:`Q-${Math.floor(1e3+Math.random()*9e3)}`,date:new Date().toISOString(),status:"NEW",totalQuotedAmount:0,resultReady:!1,isNew:!0};return s.push(n),localStorage.setItem(oe.QUOTE_REQUESTS,JSON.stringify(s)),bt({userId:e.userId,userName:e.userName,eventType:"QUOTE_REQUEST",description:`    (${e.priceType})`,metadata:{quoteId:n.id,itemCount:n.items.length}}),n},async getAllQuoteRequests(){const e=JSON.parse(localStorage.getItem(oe.QUOTE_REQUESTS)||"[]");return e.length===0?h1:e},async updateQuoteRequest(e){const s=JSON.parse(localStorage.getItem(oe.QUOTE_REQUESTS)||"[]"),a=s.findIndex(r=>r.id===e.id);a!==-1&&(s[a]=e,localStorage.setItem(oe.QUOTE_REQUESTS,JSON.stringify(s)))},async finalizeQuoteRequest(e,s,a){const r=JSON.parse(localStorage.getItem(oe.QUOTE_REQUESTS)||"[]"),n=r.findIndex(p=>p.id===e);if(n===-1)throw new Error("Quote request not found");const i=r[n],l=i.items.filter(p=>p.approvalStatus==="APPROVED"),o=i.items.filter(p=>p.approvalStatus==="MISSING"),d=l.reduce((p,v)=>p+(v.matchedPrice||0)*v.requestedQty,0);let u="APPROVED";l.length===0&&o.length>0?u="REJECTED":o.length>0&&(u="PARTIALLY_APPROVED");const h={...i,status:u,totalQuotedAmount:d,approvedItemsCount:l.length,missingItemsCount:o.length,processedDate:new Date().toISOString(),adminReviewedBy:s,adminReviewedAt:new Date().toISOString(),adminGeneralNote:a,resultReady:!0};for(const p of o)await this.logMissingProduct(i.userId,p.partNumber,i.userName,"QUOTE",i.id);r[n]=h,localStorage.setItem(oe.QUOTE_REQUESTS,JSON.stringify(r)),lr(i.userId,"QUOTE_PROCESSED","   ",`       ${i.id}.     .`);const f=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),x=f.findIndex(p=>p.id===i.userId);if(x!==-1){const p=f[x];p.hasUnreadQuotes=!0,Ai(p)}return bt({userId:"super-admin",userName:s,role:"SUPER_ADMIN",eventType:"QUOTE_REVIEWED",description:`    #${i.id}`,metadata:{quoteId:i.id,approved:l.length,missing:o.length,total:d}}),h},async addBranch(e,s){await Bt(100);const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r===-1)throw new Error("User not found");return a[r].branches.push({...s,id:crypto.randomUUID()}),localStorage.setItem(oe.PROFILES,JSON.stringify(a)),a[r].branches},async deleteBranch(e,s){const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r===-1)throw new Error("User not found");return a[r].branches=a[r].branches.filter(n=>n.id!==s),localStorage.setItem(oe.PROFILES,JSON.stringify(a)),a[r].branches},async updateCustomerProfile(e,s){await Bt(200);const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r===-1)throw new Error("User not found");return s.companyName!==void 0&&(a[r].companyName=s.companyName),s.crNumber!==void 0&&(a[r].crNumber=s.crNumber),s.taxNumber!==void 0&&(a[r].taxNumber=s.taxNumber),s.nationalAddress!==void 0&&(a[r].nationalAddress=s.nationalAddress),s.city!==void 0&&(a[r].city=s.city),s.region!==void 0&&(a[r].region=s.region),s.phone!==void 0&&(a[r].phone=s.phone),localStorage.setItem(oe.PROFILES,JSON.stringify(a)),a[r]},async addEmployee(e,s){await Bt(100);const a=JSON.parse(localStorage.getItem(oe.USERS)||"[]");if(a.find(l=>l.phone===s.phone))throw new Error("    ");if(!s.phone||!s.name)throw new Error("Missing required employee fields");const r=crypto.randomUUID(),n=vte(),i={id:r,clientId:s.phone,name:s.name,email:`${s.phone}@employee.com`,phone:s.phone,role:"CUSTOMER_STAFF",parentId:e,businessId:e,activationCode:n,isActive:!0,branchId:s.branchId,employeeRole:s.employeeRole||_n.BUYER,searchLimit:50,searchUsed:0,lastSearchDate:new Date().toISOString().split("T")[0],hasUnreadOrders:!1,status:"ACTIVE"};return a.push(i),localStorage.setItem(oe.USERS,JSON.stringify(a)),{user:i,activationCode:n}},async toggleEmployeeStatus(e){const s=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a>=0)return s[a].isActive=!s[a].isActive,s[a].status=s[a].isActive?"ACTIVE":"SUSPENDED",localStorage.setItem(oe.USERS,JSON.stringify(s)),s[a];throw new Error("Employee not found")},async deleteEmployee(e){const a=JSON.parse(localStorage.getItem(oe.USERS)||"[]").filter(r=>r.id!==e);localStorage.setItem(oe.USERS,JSON.stringify(a))},async changePassword(e,s,a){const r=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),n=r.findIndex(l=>l.id===e);if(n===-1)return{success:!1,message:"  "};const i=r[n];return i.password!==s?{success:!1,message:"    "}:!a||a.length<4?{success:!1,message:"      4   "}:(r[n].password=a,localStorage.setItem(oe.USERS,JSON.stringify(r)),bt({userId:e,userName:i.name,role:i.role,eventType:"PASSWORD_CHANGED",description:"    "}),this.invalidateSessionTokens(e),{success:!0,message:"    "})},async adminResetPassword(e,s,a){const r=JSON.parse(localStorage.getItem(oe.USERS)||"[]"),n=r.find(o=>o.id===e),i=r.findIndex(o=>o.id===s);if(!n||n.role!=="SUPER_ADMIN"&&n.role!=="CUSTOMER_OWNER")return{success:!1,message:"      "};if(i===-1)return{success:!1,message:"   "};if(!a||a.length<4)return{success:!1,message:"      4   "};const l=r[i];return r[i].password=a,localStorage.setItem(oe.USERS,JSON.stringify(r)),bt({userId:e,userName:n.name,role:n.role,eventType:"PASSWORD_RESET",description:`     : ${l.name}`,metadata:{targetUserId:s,targetUserName:l.name}}),lr(s,"SYSTEM","    ","         .      ."),this.invalidateSessionTokens(s),{success:!0,message:"     "}},storeSessionToken(e,s){const a=JSON.parse(localStorage.getItem("sini_car_session_tokens")||"{}");a[e]||(a[e]=[]),a[e]=[...a[e].slice(-4),s],localStorage.setItem("sini_car_session_tokens",JSON.stringify(a))},validateSessionToken(e,s){var r;return((r=JSON.parse(localStorage.getItem("sini_car_session_tokens")||"{}")[e])==null?void 0:r.includes(s))||!1},invalidateSessionTokens(e){const s=JSON.parse(localStorage.getItem("sini_car_session_tokens")||"{}");delete s[e],localStorage.setItem("sini_car_session_tokens",JSON.stringify(s))},async getUserById(e){return JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(a=>a.id===e)||null},async getEmployees(e){return JSON.parse(localStorage.getItem(oe.USERS)||"[]").filter(a=>a.parentId===e&&a.role==="CUSTOMER_STAFF")},async importProductsFromOnyxExcel(e,s){const a=d=>{if(d==null||d==="")return null;const u=typeof d=="number"?d:parseFloat(String(d).replace(/,/g,""));return isNaN(u)?null:u},r=()=>`P-${Date.now()}-${Math.floor(Math.random()*1e4)}`,n=s?this.getExcelColumnPresets().find(d=>d.id===s):this.getDefaultExcelColumnPreset(),i=d=>{if(!n)return{partNumber:" ",name:" ",brand:" ",qtyTotal:"",priceWholesale:" ",priceRetail:" ",priceWholeWholesale:"  ",priceEcommerce:"  ",qtyStore103:"    103",qtyStore105:"    105",rack103:"  103",rack105:"  105",carName:"  ",description:" ",manufacturerPartNumber:" ",globalCategory:"  ",modelYear:"  ",quality:""}[d]||d;const u=n.mappings.find(h=>h.internalField===d&&h.isEnabled);return(u==null?void 0:u.excelHeader)||d},l=d=>{if(!n)return;const u=n.mappings.find(h=>h.internalField===d);return u==null?void 0:u.defaultValue},o=d=>{if(!n)return!0;const u=n.mappings.find(h=>h.internalField===d);return(u==null?void 0:u.isEnabled)??!1};return new Promise((d,u)=>{const h=new FileReader;h.onload=async f=>{var x,p,v,b,y,j,w,S,O,_,E,A;try{const D=new Uint8Array((x=f.target)==null?void 0:x.result),L=rd(D,{type:"array"}),B=L.SheetNames[0],I=L.Sheets[B],T=Ta.sheet_to_json(I),z=JSON.parse(localStorage.getItem(oe.PRODUCTS)||"[]");let k=0,F=0,P=0;const G=[];for(let Y=0;Y<T.length;Y++){const W=T[Y],ee=Y+2,H=i("partNumber"),M=i("name"),X=((p=W[H])==null?void 0:p.toString().trim())||l("partNumber"),K=((v=W[M])==null?void 0:v.toString().trim())||l("name");if(!X){P++;continue}if(!K){G.push(` ${ee}:      ${X}`),P++;continue}const Q={id:r(),partNumber:X,name:K,priceRetail:o("priceRetail")?a(W[i("priceRetail")])??a(l("priceRetail")):null,priceWholesale:o("priceWholesale")?a(W[i("priceWholesale")])??a(l("priceWholesale")):null,priceWholeWholesale:o("priceWholeWholesale")?a(W[i("priceWholeWholesale")])??a(l("priceWholeWholesale")):null,priceEcommerce:o("priceEcommerce")?a(W[i("priceEcommerce")])??a(l("priceEcommerce")):null,qtyStore103:o("qtyStore103")?a(W[i("qtyStore103")])??a(l("qtyStore103")):null,qtyStore105:o("qtyStore105")?a(W[i("qtyStore105")])??a(l("qtyStore105")):null,qtyTotal:o("qtyTotal")?a(W[i("qtyTotal")])??a(l("qtyTotal")):0,price:a(W[i("priceWholesale")])||a(W[i("priceRetail")])||0,stock:a(W[i("qtyTotal")])||0,brand:o("brand")?((b=W[i("brand")])==null?void 0:b.toString().trim())||l("brand"):void 0,description:o("description")?((y=W[i("description")])==null?void 0:y.toString().trim())||l("description"):void 0,carName:o("carName")?((j=W[i("carName")])==null?void 0:j.toString().trim())||l("carName"):null,globalCategory:o("globalCategory")?((w=W[i("globalCategory")])==null?void 0:w.toString().trim())||l("globalCategory"):null,modelYear:o("modelYear")?((S=W[i("modelYear")])==null?void 0:S.toString().trim())||l("modelYear"):null,quality:o("quality")?((O=W[i("quality")])==null?void 0:O.toString().trim())||l("quality"):null,manufacturerPartNumber:o("manufacturerPartNumber")?((_=W[i("manufacturerPartNumber")])==null?void 0:_.toString().trim())||l("manufacturerPartNumber"):null,rack103:o("rack103")?((E=W[i("rack103")])==null?void 0:E.toString().trim())||l("rack103"):null,rack105:o("rack105")?((A=W[i("rack105")])==null?void 0:A.toString().trim())||l("rack105"):null,createdAt:new Date().toISOString()},se=z.findIndex(V=>V.partNumber===X);se!==-1?(z[se]={...z[se],...Q,id:z[se].id,createdAt:z[se].createdAt,updatedAt:new Date().toISOString()},F++):(z.push(Q),k++)}localStorage.setItem(oe.PRODUCTS,JSON.stringify(z)),d({imported:k,updated:F,skipped:P,errors:G})}catch(D){u(new Error(`   : ${D.message}`))}},h.onerror=()=>u(new Error("   ")),h.readAsArrayBuffer(e)})},async getProducts(){const e=localStorage.getItem(oe.PRODUCTS);return e?JSON.parse(e):(localStorage.setItem(oe.PRODUCTS,JSON.stringify(_l)),_l)},async addProduct(e){const s=await this.getProducts(),a={...e,id:`P-${Date.now()}-${Math.floor(Math.random()*1e4)}`,createdAt:new Date().toISOString()};return s.push(a),localStorage.setItem(oe.PRODUCTS,JSON.stringify(s)),a},async updateProduct(e,s){const a=await this.getProducts(),r=a.findIndex(n=>n.id===e);if(r===-1)throw new Error("  ");return a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(oe.PRODUCTS,JSON.stringify(a)),a[r]},async deleteProduct(e){const a=(await this.getProducts()).filter(r=>r.id!==e);localStorage.setItem(oe.PRODUCTS,JSON.stringify(a))},async bulkUpdateProductVisibility(e,s){const a=await this.getProducts();let r=0;const n=a.map(i=>e.includes(i.id)?(r++,{...i,useVisibilityRuleForQty:s,updatedAt:new Date().toISOString()}):i);return localStorage.setItem(oe.PRODUCTS,JSON.stringify(n)),r},generateOnyxExcelTemplate(){const e=[" "," "," "," ","  ","  ","    103","    105",""],s=Ta.book_new();Ta.book_append_sheet(s,Ta.aoa_to_sheet([e]),"Products"),nd(s,"__.xlsx")},markOrdersAsSeen(){const s=JSON.parse(localStorage.getItem(oe.ORDERS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(oe.ORDERS,JSON.stringify(s))},markAccountRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(oe.ACCOUNT_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(oe.ACCOUNT_REQUESTS,JSON.stringify(s))},markQuoteRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(oe.QUOTE_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(oe.QUOTE_REQUESTS,JSON.stringify(s))},markImportRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(oe.IMPORT_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(oe.IMPORT_REQUESTS,JSON.stringify(s))},markMissingRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(oe.MISSING_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(oe.MISSING_REQUESTS,JSON.stringify(s))},getNewItemCounts(){const e=JSON.parse(localStorage.getItem(oe.ORDERS)||"[]"),s=JSON.parse(localStorage.getItem(oe.ACCOUNT_REQUESTS)||"[]"),a=JSON.parse(localStorage.getItem(oe.QUOTE_REQUESTS)||"[]"),r=JSON.parse(localStorage.getItem(oe.IMPORT_REQUESTS)||"[]"),n=JSON.parse(localStorage.getItem(oe.MISSING_REQUESTS)||"[]");return{orders:e.filter(i=>i.isNew===!0).length,accounts:s.filter(i=>i.isNew===!0).length,quotes:a.filter(i=>i.isNew===!0).length,imports:r.filter(i=>i.isNew===!0).length,missing:n.filter(i=>i.isNew===!0).length}},getDefaultAdminUsers(){return[{id:"admin-1",fullName:"  ",username:"admin",phone:"0500000001",email:"admin@sinicar.com",password:"admin123",roleId:"role-super-admin",isActive:!0,lastLoginAt:new Date().toISOString(),createdAt:new Date(Date.now()-2160*60*60*1e3).toISOString(),extendedRole:"ADMIN",accountStatus:"APPROVED",completionPercent:100,whatsapp:"+966500000001",clientCode:"ADM-001"},{id:"admin-2",fullName:"  ",username:"sales_manager",phone:"0500000002",email:"sales@sinicar.com",password:"sales123",roleId:"role-sales-manager",isActive:!0,lastLoginAt:new Date(Date.now()-2880*60*1e3).toISOString(),createdAt:new Date(Date.now()-1440*60*60*1e3).toISOString(),extendedRole:"EMPLOYEE",accountStatus:"APPROVED",completionPercent:85,whatsapp:"+966500000002",clientCode:"EMP-002"},{id:"admin-3",fullName:"  ",username:"sales_agent",phone:"0500000003",password:"agent123",roleId:"role-sales-agent",isActive:!0,createdAt:new Date(Date.now()-1080*60*60*1e3).toISOString(),extendedRole:"EMPLOYEE",accountStatus:"APPROVED",completionPercent:70,whatsapp:"+966500000003"},{id:"admin-4",fullName:" ",username:"viewer",phone:"0500000004",password:"viewer123",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-720*60*60*1e3).toISOString(),extendedRole:"EMPLOYEE",accountStatus:"BLOCKED",completionPercent:50},{id:"customer-1",fullName:" ",username:"customer1",phone:"0550000001",email:"customer1@example.com",password:"customer123",roleId:"role-viewer",isActive:!0,createdAt:new Date(Date.now()-14400*60*1e3).toISOString(),extendedRole:"CUSTOMER",accountStatus:"APPROVED",completionPercent:90,whatsapp:"+966550000001",clientCode:"C-10001",isCustomer:!0},{id:"customer-2",fullName:" ",username:"customer2",phone:"0550000002",password:"customer123",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-2880*60*1e3).toISOString(),extendedRole:"CUSTOMER",accountStatus:"PENDING",completionPercent:40,whatsapp:"+966550000002",clientCode:"C-10002",isCustomer:!0},{id:"supplier-1",clientId:"SL-20001",fullName:"  ",name:"  ",username:"supplier1",phone:"0560000001",email:"supplier1@alamal.com",password:"supplier123",role:"CUSTOMER_OWNER",roleId:"role-viewer",isActive:!0,createdAt:new Date(Date.now()-480*60*60*1e3).toISOString(),extendedRole:"SUPPLIER_LOCAL",accountStatus:"APPROVED",completionPercent:95,whatsapp:"+966560000001",clientCode:"SL-20001",isSupplier:!0,searchLimit:100,searchUsed:0},{id:"supplier-2",clientId:"SI-30001",fullName:" ",name:" ",username:"guangzhou_supplier",phone:"+8613800000001",email:"supplier@guangzhou.cn",password:"supplier123",role:"CUSTOMER_OWNER",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-7200*60*1e3).toISOString(),extendedRole:"SUPPLIER_INTERNATIONAL",accountStatus:"PENDING",completionPercent:60,whatsapp:"+8613800000001",clientCode:"SI-30001",isSupplier:!0,searchLimit:100,searchUsed:0},{id:"marketer-1",fullName:" ",username:"marketer1",phone:"0570000001",password:"marketer123",roleId:"role-viewer",isActive:!0,createdAt:new Date(Date.now()-360*60*60*1e3).toISOString(),extendedRole:"MARKETER",accountStatus:"APPROVED",completionPercent:80,whatsapp:"+966570000001",clientCode:"M-40001"},{id:"marketer-2",fullName:" ",username:"marketer2",phone:"0570000002",password:"marketer123",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-1440*60*1e3).toISOString(),extendedRole:"MARKETER",accountStatus:"REJECTED",completionPercent:30,whatsapp:"+966570000002",clientCode:"M-40002"}]},async getAdminUsers(){let e=JSON.parse(localStorage.getItem(oe.ADMIN_USERS)||"null");e||(e=this.getDefaultAdminUsers(),localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(e)));let s=!1;return e=e.map(a=>{const r={...a};return r.extendedRole||(r.extendedRole="EMPLOYEE",s=!0),r.accountStatus||(r.accountStatus=r.isActive?"APPROVED":"PENDING",s=!0),r.completionPercent===void 0&&(r.completionPercent=50,s=!0),r}),s&&localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(e)),e},async createAdminUser(e){const s=await this.getAdminUsers();if(s.some(n=>n.username===e.username))throw new Error("   ");if(!e.password||e.password.trim()==="")throw new Error("  ");const a=n=>{const i=Date.now().toString(36).slice(-4).toUpperCase();switch(n){case"CUSTOMER":return`C-${i}`;case"SUPPLIER_LOCAL":return`SL-${i}`;case"SUPPLIER_INTERNATIONAL":return`SI-${i}`;case"MARKETER":return`M-${i}`;case"ADMIN":return`ADM-${i}`;case"EMPLOYEE":return`EMP-${i}`;default:return`U-${i}`}},r={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),extendedRole:e.extendedRole||"EMPLOYEE",accountStatus:e.accountStatus||"PENDING",completionPercent:e.completionPercent??50,whatsapp:e.whatsapp||e.phone,clientCode:e.clientCode||a(e.extendedRole)};return s.push(r),localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(s)),bt({userId:"system",userName:"",eventType:"OTHER",description:`   : ${r.fullName} (${r.username})`,metadata:{adminUserId:r.id,action:"create_admin_user"}}),r},async updateAdminUser(e,s){const a=await this.getAdminUsers(),r=a.findIndex(n=>n.id===e);if(r===-1)return null;if(s.username&&s.username!==a[r].username&&a.some(n=>n.username===s.username&&n.id!==e))throw new Error("   ");return a[r]={...a[r],...s},localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(a)),bt({userId:"system",userName:"",eventType:"OTHER",description:`   : ${a[r].fullName}`,metadata:{adminUserId:e,action:"update_admin_user",updates:s}}),a[r]},async resetAdminUserPassword(e,s){if(!s||s.trim()==="")throw new Error("   ");const a=await this.getAdminUsers(),r=a.findIndex(n=>n.id===e);return r===-1?!1:(a[r].password=s,localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(a)),bt({userId:"system",userName:"",eventType:"OTHER",description:`     : ${a[r].fullName}`,metadata:{adminUserId:e,action:"reset_admin_password"}}),!0)},async toggleAdminUserStatus(e){const s=await this.getAdminUsers(),a=s.findIndex(n=>n.id===e);if(a===-1)return null;if(s[a].role==="SUPER_ADMIN"&&s[a].isActive&&s.filter(i=>i.role==="SUPER_ADMIN"&&i.isActive).length<=1)throw new Error("      ");s[a].isActive=!s[a].isActive,localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(s));const r=s[a].isActive?"":"";return bt({userId:"system",userName:"",eventType:s[a].isActive?"USER_REACTIVATED":"USER_SUSPENDED",description:` ${r} : ${s[a].fullName}`,metadata:{adminUserId:e,action:"toggle_admin_user_status"}}),s[a]},async approveAdminUser(e){const s=await this.getAdminUsers(),a=s.findIndex(r=>r.id===e);return a===-1?null:(s[a].accountStatus="APPROVED",s[a].isActive=!0,localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(s)),bt({userId:"system",userName:"",eventType:"USER_APPROVED",description:`   : ${s[a].fullName}`,metadata:{adminUserId:e,action:"approve_admin_user"}}),s[a])},async rejectAdminUser(e){const s=await this.getAdminUsers(),a=s.findIndex(r=>r.id===e);return a===-1?null:(s[a].accountStatus="REJECTED",s[a].isActive=!1,localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(s)),bt({userId:"system",userName:"",eventType:"USER_REJECTED",description:`   : ${s[a].fullName}`,metadata:{adminUserId:e,action:"reject_admin_user"}}),s[a])},async blockAdminUser(e){const s=await this.getAdminUsers(),a=s.findIndex(r=>r.id===e);if(a===-1)return null;if(s[a].roleId==="role-super-admin")throw new Error("    ");return s[a].accountStatus="BLOCKED",s[a].isActive=!1,localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(s)),bt({userId:"system",userName:"",eventType:"USER_SUSPENDED",description:`   : ${s[a].fullName}`,metadata:{adminUserId:e,action:"block_admin_user"}}),s[a]},async deleteAdminUser(e){const s=await this.getAdminUsers(),a=s.find(n=>n.id===e);if(!a)return!1;if(a.roleId==="role-super-admin"&&s.filter(i=>i.roleId==="role-super-admin").length<=1)throw new Error("     ");const r=s.filter(n=>n.id!==e);return localStorage.setItem(oe.ADMIN_USERS,JSON.stringify(r)),bt({userId:"system",userName:"",eventType:"OTHER",description:`  : ${a.fullName} (${a.username})`,metadata:{adminUserId:e,action:"delete_admin_user"}}),!0},async getAdminUserById(e){return(await this.getAdminUsers()).find(a=>a.id===e)||null},getDefaultRoles(){const e=["dashboard","products","customers","customer_requests","account_requests","quotes","orders","imports","missing","crm","activity_log","notifications","settings_general","settings_status_labels","settings_api","settings_backup","settings_security","users","roles","export_center","content_management","other"],s=["view","create","edit","delete","approve","reject","export","import","configure","manage_status","manage_users","manage_roles","run_backup","manage_api","other"],a=e.map(l=>({resource:l,actions:[...s]})),r=["dashboard","products","customers","customer_requests","quotes","orders","imports","missing","crm","notifications"],n=["view","create","edit","approve","reject","export"],i=["view","create","edit"];return[{id:"role-super-admin",name:" ",description:"   ",permissions:a,isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-admin",name:" ",description:"     ",permissions:e.filter(l=>l!=="roles").map(l=>({resource:l,actions:s.filter(o=>o!=="manage_roles")})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-sales-manager",name:" ",description:"   ",permissions:r.map(l=>({resource:l,actions:n})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-sales-agent",name:" ",description:"      ",permissions:r.map(l=>({resource:l,actions:i})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-viewer",name:" ",description:"    ",permissions:e.map(l=>({resource:l,actions:["view"]})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()}]},async getRoles(){let e=JSON.parse(localStorage.getItem(oe.ADMIN_ROLES)||"null");return e||(e=this.getDefaultRoles(),localStorage.setItem(oe.ADMIN_ROLES,JSON.stringify(e))),e},async getRoleById(e){return(await this.getRoles()).find(a=>a.id===e)||null},async createRole(e){const s=await this.getRoles();if(s.some(r=>r.name===e.name))throw new Error("   ");const a={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString()};return s.push(a),localStorage.setItem(oe.ADMIN_ROLES,JSON.stringify(s)),bt({userId:"system",userName:"",eventType:"OTHER",description:`   : ${a.name}`,metadata:{roleId:a.id,action:"create_role"}}),a},async updateRole(e,s){const a=await this.getRoles(),r=a.findIndex(n=>n.id===e);if(r===-1)return null;if(s.name&&s.name!==a[r].name&&a.some(n=>n.name===s.name&&n.id!==e))throw new Error("   ");return delete s.isSystem,a[r]={...a[r],...s},localStorage.setItem(oe.ADMIN_ROLES,JSON.stringify(a)),bt({userId:"system",userName:"",eventType:"OTHER",description:`  : ${a[r].name}`,metadata:{roleId:e,action:"update_role",updates:s}}),a[r]},async deleteRole(e){const s=await this.getRoles(),a=s.find(l=>l.id===e);if(!a)return!1;if(a.isSystem)throw new Error("    ");if((await this.getAdminUsers()).filter(l=>l.roleId===e).length>0)throw new Error("        ");const i=s.filter(l=>l.id!==e);return localStorage.setItem(oe.ADMIN_ROLES,JSON.stringify(i)),bt({userId:"system",userName:"",eventType:"OTHER",description:`  : ${a.name}`,metadata:{roleId:e,action:"delete_role"}}),!0},async getUserCountByRole(e){return(await this.getAdminUsers()).filter(a=>a.roleId===e).length},async exportAllData(){return{exportDate:new Date().toISOString(),version:"1.0",data:{products:await this.getProducts(),orders:await this.getOrders(),customers:await this.getCustomersDatabase(),settings:await this.getSettings(),banners:await this.getBanners(),quoteRequests:await this.getQuoteRequests(),accountRequests:await this.getAccountRequests(),notifications:JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]"),activityLogs:JSON.parse(localStorage.getItem(oe.ACTIVITY_LOGS)||"[]")}}},async resetAllData(){Object.values(oe).forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem(oe.PRODUCTS,JSON.stringify([])),localStorage.setItem(oe.ORDERS,JSON.stringify([])),localStorage.setItem(oe.PROFILES,JSON.stringify([])),localStorage.setItem(oe.QUOTE_REQUESTS,JSON.stringify([])),localStorage.setItem(oe.ACCOUNT_REQUESTS,JSON.stringify([])),localStorage.setItem(oe.ACTIVITY_LOGS,JSON.stringify([])),localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify([])),bt({userId:"system",userName:"",eventType:"OTHER",description:"     ()",metadata:{action:"reset_all_data"}})},async getAllCampaigns(){try{const e=localStorage.getItem(oe.CAMPAIGNS);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading campaigns:",e),[]}},async createCampaign(e){const s=await this.getAllCampaigns(),a={id:`CAMP-${Date.now()}`,title:e.title||"",message:e.message||"",displayType:e.displayType||"POPUP",skippable:e.skippable??!0,contentType:e.contentType||"TEXT",mediaUrl:e.mediaUrl,htmlContent:e.htmlContent,ctaLabel:e.ctaLabel,ctaUrl:e.ctaUrl,audienceType:e.audienceType||"ALL",status:e.status||"DRAFT",priority:e.priority||1,createdAt:new Date().toISOString(),startsAt:e.startsAt,expiresAt:e.expiresAt};return s.push(a),localStorage.setItem(oe.CAMPAIGNS,JSON.stringify(s)),bt({userId:"admin",userName:"",eventType:"OTHER",description:`    : ${a.title}`,metadata:{campaignId:a.id,action:"create_campaign"}}),a},async updateCampaign(e,s){const a=await this.getAllCampaigns(),r=a.findIndex(i=>i.id===e);if(r===-1)throw new Error("Campaign not found");const n={...a[r],...s};return a[r]=n,localStorage.setItem(oe.CAMPAIGNS,JSON.stringify(a)),n},async updateCampaignStatus(e,s){const a=await this.updateCampaign(e,{status:s});return bt({userId:"admin",userName:"",eventType:"OTHER",description:`    "${a.title}"  ${s}`,metadata:{campaignId:e,status:s,action:"update_campaign_status"}}),a},async deleteCampaign(e){const s=await this.getAllCampaigns(),a=s.find(n=>n.id===e),r=s.filter(n=>n.id!==e);localStorage.setItem(oe.CAMPAIGNS,JSON.stringify(r)),a&&bt({userId:"admin",userName:"",eventType:"OTHER",description:`   : ${a.title}`,metadata:{campaignId:e,action:"delete_campaign"}})},async dismissCampaignForUser(e,s){try{const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r!==-1){const n=a[r].dismissedCampaignIds||[];n.includes(s)||(n.push(s),a[r].dismissedCampaignIds=n,localStorage.setItem(oe.PROFILES,JSON.stringify(a)))}}catch(a){console.error("Error dismissing campaign:",a)}},async getDismissedCampaignIds(e){try{const a=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]").find(r=>r.userId===e);return(a==null?void 0:a.dismissedCampaignIds)||[]}catch(s){return console.error("Error getting dismissed campaigns:",s),[]}},async getActiveCampaignsForUser(e,s){try{const a=await this.getAllCampaigns(),r=await this.getDismissedCampaignIds(e),n=new Date;return a.filter(i=>{if(i.status!=="ACTIVE"||r.includes(i.id)||i.startsAt&&new Date(i.startsAt)>n||i.expiresAt&&new Date(i.expiresAt)<n)return!1;if(i.audienceType==="ALL"||!s)return!0;const o={"  ":"SPARE_PARTS_SHOP","  ":"RENTAL_COMPANY"," ":"MAINTENANCE_CENTER"," ":"INSURANCE_COMPANY"," ":"SALES_REP"}[s];return i.audienceType===o}).sort((i,l)=>l.priority-i.priority)}catch(a){return console.error("Error getting active campaigns:",a),[]}},async getPriceLevels(){try{const e=localStorage.getItem(oe.PRICE_LEVELS);if(e)return JSON.parse(e);const s={id:"L1",code:"1",name:" 1 ",description:"  ",isBaseLevel:!0,isActive:!0,sortOrder:1,color:"#2563eb",createdAt:new Date().toISOString()};return localStorage.setItem(oe.PRICE_LEVELS,JSON.stringify([s])),[s]}catch(e){return console.error("Error getting price levels:",e),[]}},async savePriceLevels(e){try{localStorage.setItem(oe.PRICE_LEVELS,JSON.stringify(e)),bt({userId:"admin",userName:"",eventType:"OTHER",description:"   ",metadata:{action:"update_price_levels",count:e.length}})}catch(s){throw console.error("Error saving price levels:",s),s}},async addPriceLevel(e){try{const s=await this.getPriceLevels(),a={...e,id:`L${Date.now()}`,createdAt:new Date().toISOString()};return s.push(a),await this.savePriceLevels(s),a}catch(s){throw console.error("Error adding price level:",s),s}},async updatePriceLevel(e,s){try{const a=await this.getPriceLevels(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.savePriceLevels(a),a[r])}catch(a){throw console.error("Error updating price level:",a),a}},async deletePriceLevel(e){try{const s=await this.getPriceLevels(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(await this.savePriceLevels(a),!0)}catch(s){return console.error("Error deleting price level:",s),!1}},async getProductPriceMatrix(){try{const e=localStorage.getItem(oe.PRODUCT_PRICE_MATRIX);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting price matrix:",e),[]}},async saveProductPriceMatrix(e){try{localStorage.setItem(oe.PRODUCT_PRICE_MATRIX,JSON.stringify(e)),bt({userId:"admin",userName:"",eventType:"OTHER",description:"   ",metadata:{action:"update_price_matrix",count:e.length}})}catch(s){throw console.error("Error saving price matrix:",s),s}},async addProductPriceEntry(e){try{const s=await this.getProductPriceMatrix(),a={...e,id:`PE${Date.now()}`,createdAt:new Date().toISOString()};return s.push(a),await this.saveProductPriceMatrix(s),a}catch(s){throw console.error("Error adding price entry:",s),s}},async updateProductPriceEntry(e,s){try{const a=await this.getProductPriceMatrix(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveProductPriceMatrix(a),a[r])}catch(a){throw console.error("Error updating price entry:",a),a}},async deleteProductPriceEntry(e){try{const s=await this.getProductPriceMatrix(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(await this.saveProductPriceMatrix(a),!0)}catch(s){return console.error("Error deleting price entry:",s),!1}},async getProductPriceForLevel(e,s){try{const r=(await this.getProductPriceMatrix()).find(n=>n.productId===e&&n.priceLevelId===s);return r?r.price:null}catch(a){return console.error("Error getting product price for level:",a),null}},async getGlobalPricingSettings(){try{const e=localStorage.getItem(oe.GLOBAL_PRICING_SETTINGS);if(e)return JSON.parse(e);const s=await this.getPriceLevels(),a={defaultPriceLevelId:s.length>0?s[0].id:null,currency:"SAR",currencySymbol:".",roundingMode:"ROUND",roundingDecimals:2,pricePrecedenceOrder:["CUSTOM_RULE","LEVEL_EXPLICIT","LEVEL_DERIVED"],allowNegativeDiscounts:!1,allowFallbackToOtherLevels:!0,fallbackLevelId:null,enableVolumeDiscounts:!1,volumeDiscountRules:[],enableTimePromotions:!1,timePromotions:[],showPriceBreakdown:!1,taxRate:15,taxIncluded:!0};return localStorage.setItem(oe.GLOBAL_PRICING_SETTINGS,JSON.stringify(a)),a}catch(e){return console.error("Error getting global pricing settings:",e),{defaultPriceLevelId:null,currency:"SAR",currencySymbol:".",roundingMode:"ROUND",roundingDecimals:2,pricePrecedenceOrder:["CUSTOM_RULE","LEVEL_EXPLICIT","LEVEL_DERIVED"],allowNegativeDiscounts:!1,allowFallbackToOtherLevels:!0}}},async saveGlobalPricingSettings(e){try{e.lastModifiedAt=new Date().toISOString(),localStorage.setItem(oe.GLOBAL_PRICING_SETTINGS,JSON.stringify(e)),bt({userId:"admin",userName:"",eventType:"OTHER",description:"    ",metadata:{action:"update_pricing_settings"}})}catch(s){throw console.error("Error saving global pricing settings:",s),s}},async getAllCustomerPricingProfiles(){try{const e=localStorage.getItem(oe.CUSTOMER_PRICING_PROFILES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer pricing profiles:",e),[]}},async getCustomerPricingProfile(e){try{return(await this.getAllCustomerPricingProfiles()).find(a=>a.customerId===e)||null}catch(s){return console.error("Error getting customer pricing profile:",s),null}},async upsertCustomerPricingProfile(e){try{const s=await this.getAllCustomerPricingProfiles(),a=s.findIndex(r=>r.customerId===e.customerId);e.lastModifiedAt=new Date().toISOString(),a===-1?s.push(e):s[a]=e,localStorage.setItem(oe.CUSTOMER_PRICING_PROFILES,JSON.stringify(s)),bt({userId:"admin",userName:"",eventType:"OTHER",description:`    : ${e.customerId}`,metadata:{action:"upsert_customer_pricing",customerId:e.customerId}})}catch(s){throw console.error("Error upserting customer pricing profile:",s),s}},async deleteCustomerPricingProfile(e){try{const s=await this.getAllCustomerPricingProfiles(),a=s.filter(r=>r.customerId!==e);return a.length===s.length?!1:(localStorage.setItem(oe.CUSTOMER_PRICING_PROFILES,JSON.stringify(a)),!0)}catch(s){return console.error("Error deleting customer pricing profile:",s),!1}},async copyCustomerPricingProfile(e,s){try{const a=await this.getCustomerPricingProfile(e);if(!a)return!1;const r={...a,customerId:s,lastModifiedAt:new Date().toISOString(),notes:`   ${e}`};return await this.upsertCustomerPricingProfile(r),!0}catch(a){return console.error("Error copying customer pricing profile:",a),!1}},async getPricingAuditLog(){try{const e=localStorage.getItem(oe.PRICING_AUDIT_LOG);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting pricing audit log:",e),[]}},async addPricingAuditEntry(e){try{const s=await this.getPricingAuditLog(),a={...e,id:`PAL${Date.now()}`,changedAt:new Date().toISOString()};s.unshift(a),s.length>500&&(s.length=500),localStorage.setItem(oe.PRICING_AUDIT_LOG,JSON.stringify(s))}catch(s){console.error("Error adding pricing audit entry:",s)}},async bulkImportPriceMatrix(e){try{const s=await this.getProductPriceMatrix();let a=0,r=0;const n=[];for(const i of e){if(!i.productId||!i.priceLevelId||typeof i.price!="number"){n.push(`  : ${JSON.stringify(i)}`);continue}const l=s.findIndex(o=>o.productId===i.productId&&o.priceLevelId===i.priceLevelId);l!==-1?(s[l].price=i.price,s[l].updatedAt=new Date().toISOString(),r++):(s.push({id:`PE${Date.now()}-${Math.random().toString(36).substr(2,5)}`,productId:i.productId,priceLevelId:i.priceLevelId,price:i.price,createdAt:new Date().toISOString()}),a++)}return await this.saveProductPriceMatrix(s),{imported:a,updated:r,errors:n}}catch(s){throw console.error("Error bulk importing price matrix:",s),s}},async exportPriceMatrixForLevel(e){try{const s=await this.getProductPriceMatrix(),a=await this.searchProducts("");return s.filter(n=>n.priceLevelId===e).map(n=>{const i=a.find(l=>l.id===n.productId);return{productId:n.productId,productName:(i==null?void 0:i.name)||" ",partNumber:(i==null?void 0:i.partNumber)||"",price:n.price}})}catch(s){return console.error("Error exporting price matrix:",s),[]}},getDefaultToolConfigs(){return[{toolKey:"PDF_TO_EXCEL",enabled:!0,allowedCustomerTypes:["PARTS_SHOP","RENTAL_COMPANY","INSURANCE_COMPANY","SALES_AGENT","FLEET_CUSTOMER","  ","  "," "," "," "],blockedCustomerIds:[],maxFilesPerDay:10,maxFilesPerMonth:100,logUsageForAnalytics:!0,showInDashboardShortcuts:!0,toolNameAr:" PDF  Excel",toolNameEn:"PDF to Excel Converter",descriptionAr:"  PDF     Excel  ",descriptionEn:"Convert PDF price lists to editable Excel spreadsheets",iconName:"FileSpreadsheet",sortOrder:1},{toolKey:"VIN_EXTRACTOR",enabled:!0,allowedCustomerTypes:["PARTS_SHOP","RENTAL_COMPANY","INSURANCE_COMPANY","MAINTENANCE_CENTER","  ","  "," "," "],blockedCustomerIds:[],maxFilesPerDay:20,maxFilesPerMonth:200,logUsageForAnalytics:!0,showInDashboardShortcuts:!0,toolNameAr:"  ",toolNameEn:"VIN Extractor",descriptionAr:"   (VIN)     ",descriptionEn:"Extract VIN numbers from car images or documents",iconName:"Car",sortOrder:2},{toolKey:"PRICE_COMPARISON",enabled:!0,allowedCustomerTypes:["PARTS_SHOP","RENTAL_COMPANY","INSURANCE_COMPANY","SALES_AGENT","  ","  "," "," "],blockedCustomerIds:[],maxFilesPerDay:5,maxFilesPerMonth:50,logUsageForAnalytics:!0,showInDashboardShortcuts:!0,toolNameAr:" ",toolNameEn:"Price Comparison",descriptionAr:"     ",descriptionEn:"Compare supplier prices and find the best deals",iconName:"Scale",sortOrder:3}]},async getToolConfigs(){try{const e=localStorage.getItem(oe.TOOL_CONFIGS);if(!e){const s=this.getDefaultToolConfigs();return localStorage.setItem(oe.TOOL_CONFIGS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting tool configs:",e),this.getDefaultToolConfigs()}},async saveToolConfigs(e){try{localStorage.setItem(oe.TOOL_CONFIGS,JSON.stringify(e))}catch(s){console.error("Error saving tool configs:",s)}},async getToolConfig(e){return(await this.getToolConfigs()).find(a=>a.toolKey===e)||null},async updateToolConfig(e,s){const a=await this.getToolConfigs(),r=a.findIndex(n=>n.toolKey===e);r!==-1&&(a[r]={...a[r],...s},await this.saveToolConfigs(a))},async getCustomerToolsOverrides(){try{const e=localStorage.getItem(oe.CUSTOMER_TOOLS_OVERRIDES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer tools overrides:",e),[]}},async getCustomerToolsOverride(e){return(await this.getCustomerToolsOverrides()).find(a=>a.customerId===e)||null},async saveCustomerToolsOverride(e){try{const s=await this.getCustomerToolsOverrides(),a=s.findIndex(r=>r.customerId===e.customerId);a!==-1?s[a]={...e,updatedAt:new Date().toISOString()}:s.push({...e,updatedAt:new Date().toISOString()}),localStorage.setItem(oe.CUSTOMER_TOOLS_OVERRIDES,JSON.stringify(s))}catch(s){console.error("Error saving customer tools override:",s)}},async deleteCustomerToolsOverride(e){try{const a=(await this.getCustomerToolsOverrides()).filter(r=>r.customerId!==e);localStorage.setItem(oe.CUSTOMER_TOOLS_OVERRIDES,JSON.stringify(a))}catch(s){console.error("Error deleting customer tools override:",s)}},async getToolUsageRecords(e,s){try{const a=localStorage.getItem(oe.TOOL_USAGE_RECORDS);let r=a?JSON.parse(a):[];return e&&(r=r.filter(n=>n.customerId===e)),s&&(r=r.filter(n=>n.toolKey===s)),r.sort((n,i)=>new Date(i.usedAt).getTime()-new Date(n.usedAt).getTime())}catch(a){return console.error("Error getting tool usage records:",a),[]}},async addToolUsageRecord(e){try{const s=await this.getToolUsageRecords(),a={...e,id:`TU${Date.now()}-${Math.random().toString(36).substr(2,5)}`};return s.unshift(a),s.length>1e3&&(s.length=1e3),localStorage.setItem(oe.TOOL_USAGE_RECORDS,JSON.stringify(s)),a}catch(s){throw console.error("Error adding tool usage record:",s),s}},async getCustomerToolUsageToday(e,s){const a=new Date().toISOString().split("T")[0];return(await this.getToolUsageRecords(e,s)).filter(n=>n.usedAt.startsWith(a)&&n.success).length},async getCustomerToolUsageThisMonth(e,s){const a=new Date().toISOString().slice(0,7);return(await this.getToolUsageRecords(e,s)).filter(n=>n.usedAt.startsWith(a)&&n.success).length},async getSupplierPriceRecords(e){try{const s=localStorage.getItem(oe.SUPPLIER_PRICE_RECORDS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.ownerCustomerId===e)),a.sort((r,n)=>new Date(n.parsedAt).getTime()-new Date(r.parsedAt).getTime())}catch(s){return console.error("Error getting supplier price records:",s),[]}},async saveSupplierPriceRecord(e){try{const s=await this.getSupplierPriceRecords(),a=s.findIndex(r=>r.id===e.id);a!==-1?s[a]=e:s.unshift(e),localStorage.setItem(oe.SUPPLIER_PRICE_RECORDS,JSON.stringify(s))}catch(s){console.error("Error saving supplier price record:",s)}},async deleteSupplierPriceRecord(e){try{const a=(await this.getSupplierPriceRecords()).filter(r=>r.id!==e);localStorage.setItem(oe.SUPPLIER_PRICE_RECORDS,JSON.stringify(a))}catch(s){console.error("Error deleting supplier price record:",s)}},async getVinExtractionRecords(e){try{const s=localStorage.getItem(oe.VIN_EXTRACTIONS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.ownerCustomerId===e)),a.sort((r,n)=>new Date(n.uploadedAt).getTime()-new Date(r.uploadedAt).getTime())}catch(s){return console.error("Error getting VIN extraction records:",s),[]}},async saveVinExtractionRecord(e){try{const s=await this.getVinExtractionRecords(),a=s.findIndex(r=>r.id===e.id);a!==-1?s[a]=e:s.unshift(e),localStorage.setItem(oe.VIN_EXTRACTIONS,JSON.stringify(s))}catch(s){console.error("Error saving VIN extraction record:",s)}},async deleteVinExtractionRecord(e){try{const a=(await this.getVinExtractionRecords()).filter(r=>r.id!==e);localStorage.setItem(oe.VIN_EXTRACTIONS,JSON.stringify(a))}catch(s){console.error("Error deleting VIN extraction record:",s)}},async getPriceComparisonSessions(e){try{const s=localStorage.getItem(oe.PRICE_COMPARISON_SESSIONS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.ownerCustomerId===e)),a.sort((r,n)=>new Date(n.createdAt).getTime()-new Date(r.createdAt).getTime())}catch(s){return console.error("Error getting price comparison sessions:",s),[]}},async savePriceComparisonSession(e){try{const s=await this.getPriceComparisonSessions(),a=s.findIndex(r=>r.id===e.id);a!==-1?s[a]=e:s.unshift(e),localStorage.setItem(oe.PRICE_COMPARISON_SESSIONS,JSON.stringify(s))}catch(s){console.error("Error saving price comparison session:",s)}},async deletePriceComparisonSession(e){try{const a=(await this.getPriceComparisonSessions()).filter(r=>r.id!==e);localStorage.setItem(oe.PRICE_COMPARISON_SESSIONS,JSON.stringify(a))}catch(s){console.error("Error deleting price comparison session:",s)}},getDefaultSupplierMarketplaceSettings(){return{enabled:!1,selectionMode:"SINI_FIRST_THEN_SUPPLIERS",hideRealSupplierFromCustomer:!0,supplierPriorities:[],defaultMarkupPercent:15,minProfitMargin:5,maxLeadTimeDays:14,autoApproveSupplierItems:!1,showSupplierStockLevel:!1,enableSupplierRating:!1,notifyAdminOnNewSupplierItem:!0}},async getSupplierMarketplaceSettings(){try{const e=localStorage.getItem(oe.SUPPLIER_MARKETPLACE_SETTINGS);if(!e){const s=this.getDefaultSupplierMarketplaceSettings();return localStorage.setItem(oe.SUPPLIER_MARKETPLACE_SETTINGS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting supplier marketplace settings:",e),this.getDefaultSupplierMarketplaceSettings()}},async saveSupplierMarketplaceSettings(e){try{e.lastModifiedAt=new Date().toISOString(),localStorage.setItem(oe.SUPPLIER_MARKETPLACE_SETTINGS,JSON.stringify(e))}catch(s){console.error("Error saving supplier marketplace settings:",s)}},async getSupplierCatalogItems(e){try{const s=localStorage.getItem(oe.SUPPLIER_CATALOG_ITEMS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.supplierId===e)),a}catch(s){return console.error("Error getting supplier catalog items:",s),[]}},async saveSupplierCatalogItems(e){try{localStorage.setItem(oe.SUPPLIER_CATALOG_ITEMS,JSON.stringify(e))}catch(s){console.error("Error saving supplier catalog items:",s)}},async addSupplierCatalogItem(e){try{const s=await this.getSupplierCatalogItems(),a={...e,id:`SCI${Date.now()}-${Math.random().toString(36).substr(2,5)}`,lastUpdatedAt:new Date().toISOString(),isActive:e.isActive??!0};return s.push(a),await this.saveSupplierCatalogItems(s),a}catch(s){throw console.error("Error adding supplier catalog item:",s),s}},async updateSupplierCatalogItem(e,s){try{const a=await this.getSupplierCatalogItems(),r=a.findIndex(n=>n.id===e);r!==-1&&(a[r]={...a[r],...s,lastUpdatedAt:new Date().toISOString()},await this.saveSupplierCatalogItems(a))}catch(a){console.error("Error updating supplier catalog item:",a)}},async deleteSupplierCatalogItem(e){try{const a=(await this.getSupplierCatalogItems()).filter(r=>r.id!==e);await this.saveSupplierCatalogItems(a)}catch(s){console.error("Error deleting supplier catalog item:",s)}},async searchSupplierCatalog(e){const s=await this.getSupplierCatalogItems(),a=e.toUpperCase().replace(/[^A-Z0-9]/g,"");return s.filter(r=>{if(!r.isActive)return!1;const n=r.partNumber.toUpperCase().replace(/[^A-Z0-9]/g,""),i=(r.oemNumber||"").toUpperCase().replace(/[^A-Z0-9]/g,"");return n.includes(a)||i.includes(a)})},async getSupplierProfiles(){try{const e=localStorage.getItem(oe.SUPPLIER_PROFILES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting supplier profiles:",e),[]}},async getSupplierProfile(e){return(await this.getSupplierProfiles()).find(a=>a.supplierId===e)||null},async saveSupplierProfile(e){try{const s=await this.getSupplierProfiles(),a=s.findIndex(r=>r.supplierId===e.supplierId);a!==-1?s[a]=e:s.push(e),localStorage.setItem(oe.SUPPLIER_PROFILES,JSON.stringify(s))}catch(s){console.error("Error saving supplier profile:",s)}},getDefaultMarketerSettings(){return{enabled:!1,attributionWindowDays:90,defaultCommissionType:"PERCENT",defaultCommissionValue:2,multiAttributionMode:"SINGLE",marketerCanViewCustomerNames:!1,marketerCanViewOrderTotals:!1,marketerCanViewOrderDetails:!1,marketerCanExportData:!1,autoApproveCommissions:!1,autoApproveThreshold:100,minPayoutAmount:500,paymentCycleDays:30,enableTierCommissions:!1,enableCategoryCommissions:!1,showReferralBanner:!1,notifyMarketerOnReferral:!0,notifyMarketerOnCommission:!0,notifyAdminOnNewMarketer:!0,requireMarketerApproval:!0,allowSelfRegistration:!1}},async getMarketerSettings(){try{const e=localStorage.getItem(oe.MARKETER_SETTINGS);if(!e){const s=this.getDefaultMarketerSettings();return localStorage.setItem(oe.MARKETER_SETTINGS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting marketer settings:",e),this.getDefaultMarketerSettings()}},async saveMarketerSettings(e){try{e.lastModifiedAt=new Date().toISOString(),localStorage.setItem(oe.MARKETER_SETTINGS,JSON.stringify(e))}catch(s){console.error("Error saving marketer settings:",s)}},async getMarketers(){try{const e=localStorage.getItem(oe.MARKETERS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting marketers:",e),[]}},async saveMarketers(e){try{localStorage.setItem(oe.MARKETERS,JSON.stringify(e))}catch(s){console.error("Error saving marketers:",s)}},async getMarketer(e){return(await this.getMarketers()).find(a=>a.id===e)||null},async getMarketerByReferralCode(e){return(await this.getMarketers()).find(a=>a.referralCode.toUpperCase()===e.toUpperCase())||null},async addMarketer(e){try{const s=await this.getMarketers(),a=`${e.name.substring(0,3).toUpperCase()}${Date.now().toString(36).toUpperCase().slice(-4)}`,r=window.location.origin,n={...e,id:`MKT${Date.now()}`,referralCode:a,referralUrl:`${r}/?ref=${a}`,createdAt:new Date().toISOString(),totalReferrals:0,totalEarnings:0,pendingEarnings:0,paidEarnings:0};return s.push(n),await this.saveMarketers(s),n}catch(s){throw console.error("Error adding marketer:",s),s}},async updateMarketer(e,s){try{const a=await this.getMarketers(),r=a.findIndex(n=>n.id===e);r!==-1&&(a[r]={...a[r],...s},await this.saveMarketers(a))}catch(a){console.error("Error updating marketer:",a)}},async deleteMarketer(e){try{const a=(await this.getMarketers()).filter(r=>r.id!==e);await this.saveMarketers(a)}catch(s){console.error("Error deleting marketer:",s)}},async getCustomerReferrals(){try{const e=localStorage.getItem(oe.CUSTOMER_REFERRALS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer referrals:",e),[]}},async getCustomerReferralsByCustomerId(e){return(await this.getCustomerReferrals()).filter(a=>a.customerId===e)},async getCustomerReferralsByMarketerId(e){return(await this.getCustomerReferrals()).filter(a=>a.marketerId===e)},async addCustomerReferral(e){try{const s=await this.getCustomerReferrals();s.push(e),localStorage.setItem(oe.CUSTOMER_REFERRALS,JSON.stringify(s));const a=await this.getMarketers(),r=a.findIndex(n=>n.id===e.marketerId);r!==-1&&(a[r].totalReferrals=(a[r].totalReferrals||0)+1,await this.saveMarketers(a))}catch(s){console.error("Error adding customer referral:",s)}},async getActiveReferralForCustomer(e){const s=await this.getCustomerReferralsByCustomerId(e),a=new Date;return s.find(r=>r.isActive&&new Date(r.attributionExpiresAt)>a)||null},async getMarketerCommissions(){try{const e=localStorage.getItem(oe.MARKETER_COMMISSIONS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting marketer commissions:",e),[]}},async getMarketerCommissionsByMarketerId(e){return(await this.getMarketerCommissions()).filter(a=>a.marketerId===e).sort((a,r)=>new Date(r.calculatedAt).getTime()-new Date(a.calculatedAt).getTime())},async addMarketerCommissionEntry(e){try{const s=await this.getMarketerCommissions(),a={...e,id:`COM${Date.now()}-${Math.random().toString(36).substr(2,5)}`,calculatedAt:new Date().toISOString()};s.push(a),localStorage.setItem(oe.MARKETER_COMMISSIONS,JSON.stringify(s));const r=await this.getMarketers(),n=r.findIndex(i=>i.id===e.marketerId);return n!==-1&&(r[n].totalEarnings=(r[n].totalEarnings||0)+e.commissionAmount,r[n].pendingEarnings=(r[n].pendingEarnings||0)+e.commissionAmount,await this.saveMarketers(r)),a}catch(s){throw console.error("Error adding marketer commission entry:",s),s}},async updateMarketerCommissionStatus(e,s,a,r,n){try{const i=await this.getMarketerCommissions(),l=i.findIndex(o=>o.id===e);if(l!==-1){const o=i[l],d=o.status;if(o.status=s,s==="APPROVED")o.approvedAt=new Date().toISOString(),o.approvedBy=a;else if(s==="PAID"){o.paidAt=new Date().toISOString(),o.paidBy=r,o.paymentReference=n;const u=await this.getMarketers(),h=u.findIndex(f=>f.id===o.marketerId);h!==-1&&(u[h].pendingEarnings=(u[h].pendingEarnings||0)-o.commissionAmount,u[h].paidEarnings=(u[h].paidEarnings||0)+o.commissionAmount,u[h].lastPaymentDate=new Date().toISOString(),await this.saveMarketers(u))}localStorage.setItem(oe.MARKETER_COMMISSIONS,JSON.stringify(i))}}catch(i){console.error("Error updating marketer commission status:",i)}},async calculateOrderCommission(e,s,a){try{const r=await this.getMarketerSettings();if(!r.enabled)return null;const n=await this.getActiveReferralForCustomer(s);if(!n)return null;const i=await this.getMarketer(n.marketerId);if(!i||!i.active)return null;const l=i.commissionType||r.defaultCommissionType,o=i.commissionValue||r.defaultCommissionValue;let d;return l==="PERCENT"?d=a*(o/100):d=o,await this.addMarketerCommissionEntry({marketerId:i.id,customerId:s,orderId:e,orderTotal:a,commissionAmount:d,commissionType:l,commissionRate:o,status:r.autoApproveCommissions&&d<=(r.autoApproveThreshold||100)?"APPROVED":"PENDING"})}catch(r){return console.error("Error calculating order commission:",r),null}},getDefaultAdSlots(){const e=new Date().toISOString();return[{id:"slot-home-top",slotKey:"HOME_TOP_BANNER",nameAr:"   ",nameEn:"Home Top Banner",descriptionAr:"     ",descriptionEn:"Ad banner at the top of the home page",isEnabled:!0,maxAds:3,selectionMode:"rotate",createdAt:e,updatedAt:e},{id:"slot-dashboard-sidebar",slotKey:"CUSTOMER_DASHBOARD_SIDEBAR",nameAr:"   ",nameEn:"Customer Dashboard Sidebar",descriptionAr:"      ",descriptionEn:"Ads in the customer dashboard sidebar",isEnabled:!0,maxAds:2,selectionMode:"by_priority",createdAt:e,updatedAt:e},{id:"slot-tools-banner",slotKey:"TOOLS_PAGE_BANNER",nameAr:"  ",nameEn:"Tools Page Banner",descriptionAr:"     ",descriptionEn:"Ad banner on the trader tools page",isEnabled:!0,maxAds:1,selectionMode:"by_priority",createdAt:e,updatedAt:e},{id:"slot-products-card",slotKey:"PRODUCTS_PAGE_CARD",nameAr:"  ",nameEn:"Products Page Card",descriptionAr:"       ",descriptionEn:"Ad card appearing within product search results",isEnabled:!0,maxAds:2,selectionMode:"random",createdAt:e,updatedAt:e}]},async getAdvertisers(){try{const e=localStorage.getItem(oe.ADVERTISERS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting advertisers:",e),[]}},async saveAdvertisers(e){try{localStorage.setItem(oe.ADVERTISERS,JSON.stringify(e))}catch(s){console.error("Error saving advertisers:",s)}},async getAdvertiserById(e){return(await this.getAdvertisers()).find(a=>a.id===e)||null},async createAdvertiser(e){const s=await this.getAdvertisers(),a=new Date().toISOString(),r={...e,id:`adv-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:a,updatedAt:a};return s.push(r),await this.saveAdvertisers(s),r},async updateAdvertiser(e,s){const a=await this.getAdvertisers(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveAdvertisers(a),a[r])},async deleteAdvertiser(e){const s=await this.getAdvertisers(),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.splice(a,1),await this.saveAdvertisers(s),!0)},async getAdCampaigns(){try{const e=localStorage.getItem(oe.AD_CAMPAIGNS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting ad campaigns:",e),[]}},async saveAdCampaigns(e){try{localStorage.setItem(oe.AD_CAMPAIGNS,JSON.stringify(e))}catch(s){console.error("Error saving ad campaigns:",s)}},async getAdCampaignById(e){return(await this.getAdCampaigns()).find(a=>a.id===e)||null},async createAdCampaign(e){const s=await this.getAdCampaigns(),a=new Date().toISOString(),r={...e,id:`camp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,currentViews:0,currentClicks:0,createdAt:a,updatedAt:a};return s.push(r),await this.saveAdCampaigns(s),r},async updateAdCampaign(e,s){const a=await this.getAdCampaigns(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveAdCampaigns(a),a[r])},async deleteAdCampaign(e){const s=await this.getAdCampaigns(),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.splice(a,1),await this.saveAdCampaigns(s),!0)},async getAdSlots(){try{const e=localStorage.getItem(oe.AD_SLOTS);if(!e){const s=this.getDefaultAdSlots();return localStorage.setItem(oe.AD_SLOTS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting ad slots:",e),this.getDefaultAdSlots()}},async saveAdSlots(e){try{localStorage.setItem(oe.AD_SLOTS,JSON.stringify(e))}catch(s){console.error("Error saving ad slots:",s)}},async getAdSlotByKey(e){return(await this.getAdSlots()).find(a=>a.slotKey===e)||null},async createAdSlot(e){const s=await this.getAdSlots(),a=new Date().toISOString(),r={...e,id:`slot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:a,updatedAt:a};return s.push(r),await this.saveAdSlots(s),r},async updateAdSlot(e,s){const a=await this.getAdSlots(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveAdSlots(a),a[r])},async getActiveAdsBySlot(e,s){try{const a=await this.getAdSlotByKey(e);if(!a||!a.isEnabled)return[];const r=await this.getAdCampaigns(),n=new Date().toISOString().split("T")[0];let i=r.filter(l=>!(l.status!=="running"||l.startDate>n||l.endDate&&l.endDate<n||!({HOME_TOP_BANNER:["banner_top"],CUSTOMER_DASHBOARD_SIDEBAR:["banner_sidebar"],TOOLS_PAGE_BANNER:["banner_top","banner_sidebar"],PRODUCTS_PAGE_CARD:["card_in_products"]}[e]||[]).includes(l.type)||l.maxViews&&(l.currentViews||0)>=l.maxViews||l.maxClicks&&(l.currentClicks||0)>=l.maxClicks));if(a.selectionMode==="by_priority")i.sort((l,o)=>l.priority-o.priority);else if(a.selectionMode==="random")i=i.sort(()=>Math.random()-.5);else if(a.selectionMode==="rotate"){const l=JSON.parse(localStorage.getItem(oe.AD_SLOT_ROTATIONS)||"[]");let o=l.find(u=>u.slotKey===e);o||(o={slotKey:e,currentIndex:0,lastRotatedAt:new Date().toISOString()},l.push(o));const d=o.currentIndex%i.length||0;i=[...i.slice(d),...i.slice(0,d)],o.currentIndex=(o.currentIndex+1)%Math.max(i.length,1),o.lastRotatedAt=new Date().toISOString(),localStorage.setItem(oe.AD_SLOT_ROTATIONS,JSON.stringify(l))}return i.slice(0,a.maxAds)}catch(a){return console.error("Error getting active ads by slot:",a),[]}},async recordAdView(e){const s=await this.getAdCampaignById(e);s&&await this.updateAdCampaign(e,{currentViews:(s.currentViews||0)+1})},async recordAdClick(e){const s=await this.getAdCampaignById(e);s&&await this.updateAdCampaign(e,{currentClicks:(s.currentClicks||0)+1})},async getAdvertisingStats(){const e=await this.getAdvertisers(),s=await this.getAdCampaigns();return{totalAdvertisers:e.length,activeAdvertisers:e.filter(a=>a.status==="active").length,totalCampaigns:s.length,runningCampaigns:s.filter(a=>a.status==="running").length,totalViews:s.reduce((a,r)=>a+(r.currentViews||0),0),totalClicks:s.reduce((a,r)=>a+(r.currentClicks||0),0)}},getDefaultInstallmentSettings(){return{enabled:!0,sinicarHasFirstPriority:!0,allowPartialApprovalBySinicar:!0,allowPartialApprovalBySuppliers:!0,autoForwardToSuppliersOnSinicarReject:!1,autoForwardToSuppliersOnSinicarPartialRemainder:!1,onCustomerRejectsSinicarPartial:"forward_to_suppliers",onCustomerRejectsSupplierOffer:"keep_waiting_for_other_suppliers",maxDurationMonths:12,minDurationMonths:1,maxDurationWeeks:52,minDurationWeeks:4,requireDownPayment:!1,minDownPaymentPercent:10,maxDownPaymentPercent:50,minRequestAmount:1e3,maxRequestAmount:5e5,requireCreditCheck:!1,minCreditScoreForApproval:"medium",autoRejectLowCredit:!1,allowedCustomerTypes:[],blockedCustomerIds:[],autoSelectAllSuppliers:!1,defaultSupplierIds:[],maxSuppliersPerRequest:5,requireAdminApprovalForSinicar:!0,autoGeneratePaymentSchedule:!0,defaultPaymentFrequency:"monthly",notifyCustomerOnNewOffer:!0,notifyCustomerOnStatusChange:!0,notifyAdminOnNewRequest:!0,notifyAdminOnCustomerDecision:!0,notifySuppliersOnForward:!0,notifySuppliersOnCustomerDecision:!0,showInstallmentInSidebar:!0,showInstallmentInDashboard:!0,showCreditProfileToCustomer:!1,showPaymentHistoryToCustomer:!0,termsAndConditionsAr:"      ...",termsAndConditionsEn:"Terms and conditions for installment purchases from SINI CAR...",requireTermsAcceptance:!0,overdueGracePeriodDays:7,autoMarkOverdue:!0,notifyOnOverdue:!0}},async getInstallmentSettings(){try{const e=localStorage.getItem(oe.INSTALLMENT_SETTINGS);return e?{...this.getDefaultInstallmentSettings(),...JSON.parse(e)}:this.getDefaultInstallmentSettings()}catch(e){return console.error("Error getting installment settings:",e),this.getDefaultInstallmentSettings()}},async updateInstallmentSettings(e){try{const a={...await this.getInstallmentSettings(),...e,lastModifiedAt:new Date().toISOString()};return localStorage.setItem(oe.INSTALLMENT_SETTINGS,JSON.stringify(a)),bt({userId:"admin",userName:"",eventType:"OTHER",description:"    ",metadata:{action:"update_installment_settings"}}),a}catch(s){throw console.error("Error updating installment settings:",s),s}},async getInstallmentRequests(){try{const e=localStorage.getItem(oe.INSTALLMENT_REQUESTS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting installment requests:",e),[]}},async getInstallmentRequestById(e){return(await this.getInstallmentRequests()).find(a=>a.id===e)||null},async getInstallmentRequestsByCustomerId(e){return(await this.getInstallmentRequests()).filter(a=>a.customerId===e)},async getInstallmentRequestsByStatus(e){return(await this.getInstallmentRequests()).filter(a=>a.status===e)},async createInstallmentRequest(e){try{if(!(await this.getInstallmentSettings()).enabled)throw new Error("    ");const a=await this.getInstallmentRequests(),r=new Date().toISOString(),n={...e,id:`IR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,status:"PENDING_SINICAR_REVIEW",sinicarDecision:"pending",allowedForSuppliers:!1,createdAt:r,updatedAt:r};return a.push(n),localStorage.setItem(oe.INSTALLMENT_REQUESTS,JSON.stringify(a)),bt({userId:e.customerId,userName:e.customerName||"",eventType:"OTHER",description:`      ${e.totalRequestedValue||0} `,metadata:{action:"create_installment_request",requestId:n.id}}),n}catch(s){throw console.error("Error creating installment request:",s),s}},async updateInstallmentRequest(e,s){try{const a=await this.getInstallmentRequests(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(oe.INSTALLMENT_REQUESTS,JSON.stringify(a)),a[r])}catch(a){return console.error("Error updating installment request:",a),null}},async deleteInstallmentRequest(e){try{const s=await this.getInstallmentRequests(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(localStorage.setItem(oe.INSTALLMENT_REQUESTS,JSON.stringify(a)),!0)}catch(s){return console.error("Error deleting installment request:",s),!1}},async getInstallmentOffers(){try{const e=localStorage.getItem(oe.INSTALLMENT_OFFERS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting installment offers:",e),[]}},async getInstallmentOfferById(e){return(await this.getInstallmentOffers()).find(a=>a.id===e)||null},async getOffersByRequestId(e){return(await this.getInstallmentOffers()).filter(a=>a.requestId===e)},async createInstallmentOffer(e){try{const s=await this.getInstallmentOffers(),a=new Date().toISOString(),r={...e,id:`IO-${Date.now()}-${Math.floor(Math.random()*1e3)}`,createdAt:a,updatedAt:a};return s.push(r),localStorage.setItem(oe.INSTALLMENT_OFFERS,JSON.stringify(s)),bt({userId:"admin",userName:e.sourceType==="sinicar"?" ":e.supplierName||"",eventType:"OTHER",description:`   ${e.type==="full"?"":""}  ${e.requestId}`,metadata:{action:"create_installment_offer",offerId:r.id,requestId:e.requestId}}),r}catch(s){throw console.error("Error creating installment offer:",s),s}},async updateInstallmentOffer(e,s){try{const a=await this.getInstallmentOffers(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(oe.INSTALLMENT_OFFERS,JSON.stringify(a)),a[r])}catch(a){return console.error("Error updating installment offer:",a),null}},async getCustomerCreditProfiles(){try{const e=localStorage.getItem(oe.CUSTOMER_CREDIT_PROFILES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer credit profiles:",e),[]}},async getCustomerCreditProfile(e){return(await this.getCustomerCreditProfiles()).find(a=>a.customerId===e)||null},async upsertCustomerCreditProfile(e){try{const s=await this.getCustomerCreditProfiles(),a=s.findIndex(i=>i.customerId===e.customerId),r=new Date().toISOString(),n={customerId:e.customerId,customerName:e.customerName,scoreLevel:e.scoreLevel||"medium",totalInstallmentRequests:e.totalInstallmentRequests||0,totalActiveContracts:e.totalActiveContracts||0,totalOverdueInstallments:e.totalOverdueInstallments||0,totalPaidAmount:e.totalPaidAmount||0,totalRemainingAmount:e.totalRemainingAmount||0,paymentHistoryScore:e.paymentHistoryScore,notes:e.notes,lastUpdated:r};return a===-1?s.push(n):s[a]={...s[a],...n,lastUpdated:r},localStorage.setItem(oe.CUSTOMER_CREDIT_PROFILES,JSON.stringify(s)),a===-1?n:s[a]}catch(s){throw console.error("Error upserting customer credit profile:",s),s}},generatePaymentSchedule(e,s,a,r){var o,d;const n=r?new Date(r):new Date;n.setDate(n.getDate()+7);const i=Math.ceil(e/a),l=[];for(let u=0;u<a;u++){const h=new Date(n);s==="monthly"?h.setMonth(h.getMonth()+u):h.setDate(h.getDate()+u*7),l.push({id:`INS-${Date.now()}-${u}`,dueDate:h.toISOString(),amount:u===a-1?e-i*(a-1):i,status:"pending"})}return{frequency:s,numberOfInstallments:a,installmentAmount:i,startDate:((o=l[0])==null?void 0:o.dueDate)||n.toISOString(),endDate:((d=l[l.length-1])==null?void 0:d.dueDate)||n.toISOString(),installments:l}},async recordSinicarDecision(e,s){var o,d,u,h,f,x;const a=await this.getInstallmentSettings(),r=await this.getInstallmentRequestById(e);if(!r)throw new Error("   ");const n=new Date().toISOString();let i={...r},l;if(s.decisionType==="approve_full"){const p=this.generatePaymentSchedule(((o=s.offer)==null?void 0:o.totalApprovedValue)||r.totalRequestedValue||0,r.paymentFrequency,r.requestedDurationMonths||3);l=await this.createInstallmentOffer({requestId:e,sourceType:"sinicar",type:"full",itemsApproved:((d=s.offer)==null?void 0:d.itemsApproved)||r.items.map(v=>({id:`OI-${Date.now()}-${Math.random()}`,offerId:"",requestItemId:v.id,productId:v.productId,productName:v.productName,quantityApproved:v.quantityRequested,unitPriceApproved:v.unitPriceRequested||0})),totalApprovedValue:((u=s.offer)==null?void 0:u.totalApprovedValue)||r.totalRequestedValue||0,schedule:p,status:"WAITING_FOR_CUSTOMER",adminNotes:s.adminNotes}),i.sinicarDecision="approved_full",i.status="WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR",i.reviewedAt=n,i.adminNotes=s.adminNotes}else if(s.decisionType==="approve_partial"){if(!a.allowPartialApprovalBySinicar)throw new Error("     ");const p=this.generatePaymentSchedule(((h=s.offer)==null?void 0:h.totalApprovedValue)||0,r.paymentFrequency,r.requestedDurationMonths||3);l=await this.createInstallmentOffer({requestId:e,sourceType:"sinicar",type:"partial",itemsApproved:((f=s.offer)==null?void 0:f.itemsApproved)||[],totalApprovedValue:((x=s.offer)==null?void 0:x.totalApprovedValue)||0,schedule:p,status:"WAITING_FOR_CUSTOMER",adminNotes:s.adminNotes}),i.sinicarDecision="approved_partial",i.status="WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR",i.reviewedAt=n,i.adminNotes=s.adminNotes}else s.decisionType==="reject"&&(i.sinicarDecision="rejected",i.reviewedAt=n,i.adminNotes=s.adminNotes,a.autoForwardToSuppliersOnSinicarReject&&s.forwardToSuppliers!==!1?(i.status="FORWARDED_TO_SUPPLIERS",i.allowedForSuppliers=!0,i.forwardedToSupplierIds=s.supplierIds||[]):i.status="REJECTED_BY_SINICAR");return await this.updateInstallmentRequest(e,i),bt({userId:"admin",userName:" ",eventType:"OTHER",description:`      ${e}: ${s.decisionType}`,metadata:{action:"sinicar_decision",requestId:e,decision:s.decisionType}}),{request:i,offer:l}},async forwardRequestToSuppliers(e,s){const a=await this.getInstallmentRequestById(e);if(!a)return null;if(a.sinicarDecision==="pending")throw new Error("     ");const r=await this.updateInstallmentRequest(e,{status:"FORWARDED_TO_SUPPLIERS",allowedForSuppliers:!0,forwardedToSupplierIds:s});return bt({userId:"admin",userName:"",eventType:"OTHER",description:`    ${e}  ${s.length} `,metadata:{action:"forward_to_suppliers",requestId:e,supplierIds:s}}),r},async supplierSubmitOffer(e,s,a,r){const n=await this.getInstallmentSettings(),i=await this.getInstallmentRequestById(e);if(!i)throw new Error("   ");if(!i.allowedForSuppliers)throw new Error("    ");if(r.type==="partial"&&!n.allowPartialApprovalBySuppliers)throw new Error("    ");const l=this.generatePaymentSchedule(r.totalApprovedValue,r.frequency,r.numberOfInstallments),o=await this.createInstallmentOffer({requestId:e,sourceType:"supplier",supplierId:s,supplierName:a,type:r.type,itemsApproved:r.itemsApproved,totalApprovedValue:r.totalApprovedValue,schedule:l,status:"WAITING_FOR_CUSTOMER",notes:r.notes});return await this.updateInstallmentRequest(e,{status:"WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER"}),o},async customerRespondToOffer(e,s){const a=await this.getInstallmentSettings(),r=await this.getInstallmentOfferById(e);if(!r)throw new Error("  ");const n=await this.getInstallmentRequestById(r.requestId);if(!n)throw new Error("   ");if(s==="accept"){await this.updateInstallmentOffer(e,{status:"ACCEPTED_BY_CUSTOMER"}),await this.updateInstallmentRequest(r.requestId,{status:"ACTIVE_CONTRACT",acceptedOfferId:e});const i=await this.getCustomerCreditProfile(n.customerId);return await this.upsertCustomerCreditProfile({customerId:n.customerId,customerName:n.customerName,totalInstallmentRequests:((i==null?void 0:i.totalInstallmentRequests)||0)+1,totalActiveContracts:((i==null?void 0:i.totalActiveContracts)||0)+1,totalRemainingAmount:((i==null?void 0:i.totalRemainingAmount)||0)+r.totalApprovedValue,scoreLevel:(i==null?void 0:i.scoreLevel)||"medium"}),bt({userId:n.customerId,userName:n.customerName||"",eventType:"OTHER",description:`     ${r.sourceType==="sinicar"?" ":r.supplierName}`,metadata:{action:"customer_accept_offer",offerId:e,requestId:r.requestId}}),{offer:{...r,status:"ACCEPTED_BY_CUSTOMER"},request:{...n,status:"ACTIVE_CONTRACT",acceptedOfferId:e}}}else{await this.updateInstallmentOffer(e,{status:"REJECTED_BY_CUSTOMER"});let i=n.status;r.sourceType==="sinicar"?a.onCustomerRejectsSinicarPartial==="forward_to_suppliers"?(i="FORWARDED_TO_SUPPLIERS",await this.updateInstallmentRequest(r.requestId,{status:i,allowedForSuppliers:!0})):(i="CLOSED",await this.updateInstallmentRequest(r.requestId,{status:i,closedAt:new Date().toISOString(),closedReason:"    "})):a.onCustomerRejectsSupplierOffer==="keep_waiting_for_other_suppliers"?(await this.getOffersByRequestId(r.requestId)).filter(u=>u.id!==e&&u.status==="WAITING_FOR_CUSTOMER").length>0?i="WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER":i="WAITING_FOR_SUPPLIER_OFFERS":(i="CLOSED",await this.updateInstallmentRequest(r.requestId,{status:i,closedAt:new Date().toISOString(),closedReason:"   "})),bt({userId:n.customerId,userName:n.customerName||"",eventType:"OTHER",description:`     ${r.sourceType==="sinicar"?" ":r.supplierName}`,metadata:{action:"customer_reject_offer",offerId:e,requestId:r.requestId}});const l=await this.getInstallmentRequestById(r.requestId);return{offer:{...r,status:"REJECTED_BY_CUSTOMER"},request:l||n}}},async markInstallmentAsPaid(e,s,a){const r=await this.getInstallmentOfferById(e);if(!r)return null;const n=r.schedule.installments.findIndex(o=>o.id===s);if(n===-1)return null;r.schedule.installments[n]={...r.schedule.installments[n],status:"paid",paidAt:new Date().toISOString(),paymentMethod:a==null?void 0:a.method,paymentReference:a==null?void 0:a.reference};const i=await this.updateInstallmentOffer(e,{schedule:r.schedule}),l=await this.getInstallmentRequestById(r.requestId);if(l){const o=await this.getCustomerCreditProfile(l.customerId),d=r.schedule.installments[n].amount;await this.upsertCustomerCreditProfile({customerId:l.customerId,totalPaidAmount:((o==null?void 0:o.totalPaidAmount)||0)+d,totalRemainingAmount:Math.max(0,((o==null?void 0:o.totalRemainingAmount)||0)-d),scoreLevel:(o==null?void 0:o.scoreLevel)||"medium"})}return i},async getInstallmentStats(){const e=await this.getInstallmentRequests(),s=await this.getInstallmentOffers(),a=e.filter(h=>h.status==="ACTIVE_CONTRACT"),r=e.filter(h=>h.status==="CLOSED");let n=0,i=0;for(const h of s)if(h.status==="ACCEPTED_BY_CUSTOMER")for(const f of h.schedule.installments)f.status==="paid"?n+=f.amount:f.status==="overdue"&&(i+=f.amount);const l=s.filter(h=>h.status==="ACCEPTED_BY_CUSTOMER").length,o=s.length,d={};for(const h of e)d[h.status]=(d[h.status]||0)+1;const u={};for(const h of e){const f=h.createdAt.substring(0,7);u[f]||(u[f]={count:0,value:0}),u[f].count++,u[f].value+=h.totalRequestedValue||0}return{totalRequests:e.length,pendingRequests:e.filter(h=>h.status==="PENDING_SINICAR_REVIEW").length,activeContracts:a.length,closedContracts:r.length,totalRequestedValue:e.reduce((h,f)=>h+(f.totalRequestedValue||0),0),totalApprovedValue:s.filter(h=>h.status==="ACCEPTED_BY_CUSTOMER").reduce((h,f)=>h+f.totalApprovedValue,0),totalPaidAmount:n,totalOverdueAmount:i,avgApprovalRate:o>0?l/o*100:0,avgProcessingDays:3,byStatus:Object.entries(d).map(([h,f])=>({status:h,count:f})),byMonth:Object.entries(u).sort((h,f)=>h[0].localeCompare(f[0])).map(([h,f])=>({month:h,count:f.count,value:f.value}))}},async getInstallmentRequestsForSupplier(e){return(await this.getInstallmentRequests()).filter(a=>{var r,n;return a.allowedForSuppliers&&(((r=a.forwardedToSupplierIds)==null?void 0:r.includes(e))||((n=a.forwardedToSupplierIds)==null?void 0:n.length)===0)})},async closeInstallmentRequest(e,s){return await this.updateInstallmentRequest(e,{status:"CLOSED",closedAt:new Date().toISOString(),closedReason:s})},async cancelInstallmentRequest(e){const s=await this.getInstallmentRequestById(e);if(!s)return null;if(s.status==="ACTIVE_CONTRACT")throw new Error("    ");return await this.updateInstallmentRequest(e,{status:"CANCELLED",closedAt:new Date().toISOString(),closedReason:"   "})},getDefaultOrganizationSettings(){return{enableTeamsForCustomers:!0,enableTeamsForSuppliers:!0,enableTeamsForAdvertisers:!0,enableTeamsForAffiliates:!0,maxCustomerEmployees:10,maxSupplierEmployees:5,maxAdvertiserEmployees:3,maxAffiliateEmployees:3,defaultCustomerManagerPermissions:["cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_prices","cust_manage_cart","org_view_logs"],defaultCustomerStaffPermissions:["cust_create_orders","cust_view_orders","cust_view_prices","cust_manage_cart"],defaultCustomerReadonlyPermissions:["cust_view_orders","cust_view_prices"],defaultSupplierManagerPermissions:["sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics","org_view_logs"],defaultSupplierStaffPermissions:["sup_view_forwarded_requests","sup_submit_offers"],defaultSupplierReadonlyPermissions:["sup_view_forwarded_requests","sup_view_analytics"],defaultAdvertiserManagerPermissions:["adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports","org_view_logs"],defaultAdvertiserStaffPermissions:["adv_view_campaigns","adv_manage_campaigns","adv_view_reports"],defaultAdvertiserReadonlyPermissions:["adv_view_campaigns","adv_view_reports"],defaultAffiliateManagerPermissions:["aff_view_links","aff_manage_links","aff_view_commissions","aff_view_analytics","org_view_logs"],defaultAffiliateStaffPermissions:["aff_view_links","aff_manage_links","aff_view_commissions"],defaultAffiliateReadonlyPermissions:["aff_view_links","aff_view_commissions"],allowCustomPermissionsForCustomers:!0,allowCustomPermissionsForSuppliers:!0,allowCustomPermissionsForAdvertisers:!0,allowCustomPermissionsForAffiliates:!0,trackTeamActivityPerOrganization:!0,activityLogRetentionDays:90,requireEmailVerification:!1,invitationExpiryHours:72}},async getOrganizationSettings(){const e=localStorage.getItem(oe.ORGANIZATION_SETTINGS);if(e)return JSON.parse(e);const s=this.getDefaultOrganizationSettings();return localStorage.setItem(oe.ORGANIZATION_SETTINGS,JSON.stringify(s)),s},async updateOrganizationSettings(e){const a={...await this.getOrganizationSettings(),...e,lastModifiedAt:new Date().toISOString()};return localStorage.setItem(oe.ORGANIZATION_SETTINGS,JSON.stringify(a)),a},async getOrganizations(){const e=localStorage.getItem(oe.ORGANIZATIONS);return e?JSON.parse(e):[]},async getOrganizationById(e){return(await this.getOrganizations()).find(a=>a.id===e)||null},async getOrganizationByCustomer(e){return(await this.getOrganizations()).find(a=>a.type==="customer"&&a.customerId===e)||null},async getOrganizationBySupplier(e){return(await this.getOrganizations()).find(a=>a.type==="supplier"&&a.supplierId===e)||null},async getOrganizationByAdvertiser(e){return(await this.getOrganizations()).find(a=>a.type==="advertiser"&&a.advertiserId===e)||null},async getOrganizationByAffiliate(e){return(await this.getOrganizations()).find(a=>a.type==="affiliate"&&a.affiliateId===e)||null},async getOrganizationByOwnerUserId(e){return(await this.getOrganizations()).find(a=>a.ownerUserId===e)||null},async getOrCreateOrganizationForEntity(e,s,a,r){let n=null;if(e==="customer"?n=await this.getOrganizationByCustomer(s):e==="supplier"?n=await this.getOrganizationBySupplier(s):e==="advertiser"?n=await this.getOrganizationByAdvertiser(s):e==="affiliate"&&(n=await this.getOrganizationByAffiliate(s)),n)return n;const i=new Date().toISOString(),l={id:`org_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,name:a,ownerUserId:r,isActive:!0,createdAt:i,updatedAt:i};e==="customer"?l.customerId=s:e==="supplier"?l.supplierId=s:e==="advertiser"?l.advertiserId=s:e==="affiliate"&&(l.affiliateId=s);const o=await this.getOrganizations();return o.push(l),localStorage.setItem(oe.ORGANIZATIONS,JSON.stringify(o)),await this.createOrganizationUser(l.id,{userId:r,role:"owner",permissions:[]}),l},async createOrganization(e){const s=new Date().toISOString(),a={...e,id:`org_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:s,updatedAt:s},r=await this.getOrganizations();return r.push(a),localStorage.setItem(oe.ORGANIZATIONS,JSON.stringify(r)),a},async updateOrganization(e,s){const a=await this.getOrganizations(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(oe.ORGANIZATIONS,JSON.stringify(a)),a[r])},async getOrganizationUsers(e){const s=localStorage.getItem(oe.ORGANIZATION_USERS),a=s?JSON.parse(s):[];return e?a.filter(r=>r.organizationId===e):a},async getOrganizationUser(e,s){return(await this.getOrganizationUsers(e)).find(r=>r.userId===s)||null},async getOrganizationUserById(e){return(await this.getOrganizationUsers()).find(a=>a.id===e)||null},async getOrganizationsByUserId(e){const a=(await this.getOrganizationUsers()).filter(n=>n.userId===e&&n.isActive).map(n=>n.organizationId);return(await this.getOrganizations()).filter(n=>a.includes(n.id)||n.ownerUserId===e)},async createOrganizationUser(e,s){const a=new Date().toISOString(),r={id:`orguser_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,organizationId:e,userId:s.userId,role:s.role,permissions:s.permissions,jobTitle:s.jobTitle,department:s.department,isActive:!0,joinedAt:a,createdAt:a,updatedAt:a},n=await this.getOrganizationUsers();return n.push(r),localStorage.setItem(oe.ORGANIZATION_USERS,JSON.stringify(n)),await this.logOrganizationActivity(e,s.userId,"team_member_added","team",{newMemberRole:s.role,newMemberUserId:s.userId}),r},async updateOrganizationUser(e,s){const a=await this.getOrganizationUsers(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(oe.ORGANIZATION_USERS,JSON.stringify(a)),a[r])},async deactivateOrganizationUser(e){return await this.updateOrganizationUser(e,{isActive:!1})},async reactivateOrganizationUser(e){return await this.updateOrganizationUser(e,{isActive:!0})},async removeOrganizationUser(e){const s=await this.getOrganizationUsers(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(localStorage.setItem(oe.ORGANIZATION_USERS,JSON.stringify(a)),!0)},async getTeamInvitations(e){const s=localStorage.getItem(oe.TEAM_INVITATIONS),a=s?JSON.parse(s):[];return e?a.filter(r=>r.organizationId===e):a},async getTeamInvitationByCode(e){return(await this.getTeamInvitations()).find(a=>a.invitationCode===e)||null},async createTeamInvitation(e,s,a){const r=await this.getOrganizationSettings(),n=new Date().toISOString(),i=new Date(Date.now()+r.invitationExpiryHours*60*60*1e3).toISOString(),l={id:`inv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,organizationId:e,invitedByUserId:s,email:a.email,phone:a.phone,name:a.name,role:a.role,permissions:a.permissions,status:"pending",invitationCode:Math.random().toString(36).substr(2,8).toUpperCase(),expiresAt:i,createdAt:n},o=await this.getTeamInvitations();return o.push(l),localStorage.setItem(oe.TEAM_INVITATIONS,JSON.stringify(o)),l},async acceptTeamInvitation(e,s){const a=await this.getTeamInvitationByCode(e);if(!a)return{success:!1,message:"   "};if(a.status!=="pending")return{success:!1,message:"    "};if(new Date(a.expiresAt)<new Date)return await this.updateTeamInvitation(a.id,{status:"expired"}),{success:!1,message:"  "};const r=await this.createOrganizationUser(a.organizationId,{userId:s,role:a.role,permissions:a.permissions});return await this.updateTeamInvitation(a.id,{status:"accepted",acceptedAt:new Date().toISOString()}),{success:!0,message:"   ",orgUser:r}},async updateTeamInvitation(e,s){const a=await this.getTeamInvitations(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s},localStorage.setItem(oe.TEAM_INVITATIONS,JSON.stringify(a)),a[r])},async cancelTeamInvitation(e){return await this.updateTeamInvitation(e,{status:"cancelled"})!==null},async getOrganizationActivityLogs(e,s=100){const a=localStorage.getItem(oe.ORGANIZATION_ACTIVITY_LOGS);let r=a?JSON.parse(a):[];return e&&(r=r.filter(n=>n.organizationId===e)),r.sort((n,i)=>new Date(i.createdAt).getTime()-new Date(n.createdAt).getTime()).slice(0,s)},async logOrganizationActivity(e,s,a,r,n){const i=await this.getOrganizationSettings();if(!i.trackTeamActivityPerOrganization)return{id:"",organizationId:e,userId:s,actionType:a,actionCategory:r,description:"",metadata:n,createdAt:new Date().toISOString()};const o=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(x=>x.id===s),d={id:`orglog_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,organizationId:e,userId:s,userName:(o==null?void 0:o.name)||"",actionType:a,actionCategory:r,description:this.getActivityDescription(a,r,n),metadata:n,createdAt:new Date().toISOString()},u=JSON.parse(localStorage.getItem(oe.ORGANIZATION_ACTIVITY_LOGS)||"[]");u.unshift(d);const h=new Date;h.setDate(h.getDate()-i.activityLogRetentionDays);const f=u.filter(x=>new Date(x.createdAt)>h);return localStorage.setItem(oe.ORGANIZATION_ACTIVITY_LOGS,JSON.stringify(f)),d},getActivityDescription(e,s,a){return{team_member_added:"    ",team_member_removed:"    ",team_member_updated:"    ",order_created:"   ",order_updated:"  ",installment_request_created:"   ",installment_offer_submitted:"   ",campaign_created:"   ",campaign_updated:"   ",offer_submitted:"  ",link_created:"   ",profile_updated:"   "}[e]||e},async hasScopedPermission(e,s,a){const r=await this.getOrganizationUser(s,e);if(!r){const n=await this.getOrganizationById(s);return!!(n&&n.ownerUserId===e)}return r.isActive?r.role==="owner"?!0:r.permissions.includes(a):!1},async getUserScopedPermissions(e,s){const a=await this.getOrganizationById(s);if(a&&a.ownerUserId===e)return this.getAllPermissionKeys();const r=await this.getOrganizationUser(s,e);return!r||!r.isActive?[]:r.role==="owner"?this.getAllPermissionKeys():r.permissions},getAllPermissionKeys(){return["adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports","sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics","cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart","aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"]},getPermissionsByOrganizationType(e){const s=["org_manage_team","org_view_logs","org_view_settings","org_edit_profile"];switch(e){case"customer":return[...s,"cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart"];case"supplier":return[...s,"sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics"];case"advertiser":return[...s,"adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports"];case"affiliate":return[...s,"aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics"];default:return s}},async getDefaultPermissionsForRole(e,s){const a=await this.getOrganizationSettings();if(s==="owner")return this.getPermissionsByOrganizationType(e);switch(e){case"customer":return s==="manager"?a.defaultCustomerManagerPermissions:s==="staff"?a.defaultCustomerStaffPermissions:a.defaultCustomerReadonlyPermissions;case"supplier":return s==="manager"?a.defaultSupplierManagerPermissions:s==="staff"?a.defaultSupplierStaffPermissions:a.defaultSupplierReadonlyPermissions;case"advertiser":return s==="manager"?a.defaultAdvertiserManagerPermissions:s==="staff"?a.defaultAdvertiserStaffPermissions:a.defaultAdvertiserReadonlyPermissions;case"affiliate":return s==="manager"?a.defaultAffiliateManagerPermissions:s==="staff"?a.defaultAffiliateStaffPermissions:a.defaultAffiliateReadonlyPermissions;default:return[]}},async getOrganizationStats(e){const s=await this.getOrganizationUsers(e),a=await this.getTeamInvitations(e),r=await this.getOrganizationActivityLogs(e,100),n=s.filter(u=>u.isActive),i=a.filter(u=>u.status==="pending"),l=new Date;l.setDate(l.getDate()-1);const o=r.filter(u=>new Date(u.createdAt)>l),d={owner:0,manager:0,staff:0,readonly:0};return n.forEach(u=>{d[u.role]++}),{totalMembers:s.length,activeMembers:n.length,pendingInvitations:i.length,recentActivities:o.length,membersByRole:Object.entries(d).map(([u,h])=>({role:u,count:h}))}},async canAddTeamMember(e){const s=await this.getOrganizationById(e);if(!s)return{allowed:!1,reason:"  "};const a=await this.getOrganizationSettings();if(!(s.type==="customer"&&a.enableTeamsForCustomers||s.type==="supplier"&&a.enableTeamsForSuppliers||s.type==="advertiser"&&a.enableTeamsForAdvertisers||s.type==="affiliate"&&a.enableTeamsForAffiliates))return{allowed:!1,reason:"       "};const i=(await this.getOrganizationUsers(e)).filter(o=>o.isActive),l=s.type==="customer"?a.maxCustomerEmployees:s.type==="supplier"?a.maxSupplierEmployees:s.type==="advertiser"?a.maxAdvertiserEmployees:a.maxAffiliateEmployees;return i.length>=l?{allowed:!1,reason:`       (${l})`}:{allowed:!0}},async canManageTeam(e,s){const a=await this.getOrganizationById(s);return a?a.ownerUserId===e?!0:await this.hasScopedPermission(e,s,"org_manage_team"):!1},async getCustomerPortalSettings(){const e=localStorage.getItem("b2b_customer_portal_settings_v1");return e?JSON.parse(e):this.getDefaultCustomerPortalSettings()},async saveCustomerPortalSettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_customer_portal_settings_v1",JSON.stringify(e)),e},getDefaultCustomerPortalSettings(){return{id:"portal-settings-1",design:{themeMode:"light",primaryColor:"#0B1B3A",accentColor:"#C8A04F",backgroundColor:"#f8fafc",sidebarColor:"#0B1B3A",fontFamily:"Cairo",borderRadius:"medium",enableAnimations:!0},dashboardSections:[{id:"hero",key:"HERO_BANNERS",enabled:!0,order:1,title:{ar:" ",en:"Hero Banners",hi:" ",zh:""}},{id:"search",key:"SEARCH_BAR",enabled:!0,order:2,title:{ar:" ",en:"Search Bar",hi:" ",zh:""}},{id:"business-types",key:"BUSINESS_TYPES",enabled:!0,order:3,title:{ar:" ",en:"Who We Serve",hi:"    ",zh:""}},{id:"services",key:"MAIN_SERVICES",enabled:!0,order:4,title:{ar:" ",en:"Our Main Services",hi:"  ",zh:""}},{id:"how-it-works",key:"HOW_IT_WORKS",enabled:!0,order:5,title:{ar:"  ",en:"How It Works",hi:"    ",zh:""}},{id:"why-sinicar",key:"WHY_SINICAR",enabled:!0,order:6,title:{ar:"  ",en:"Why SINI CAR",hi:"  ",zh:"SINI CAR"}},{id:"marketing-cards",key:"MARKETING_CARDS",enabled:!0,order:7,title:{ar:" ",en:"Marketing Cards",hi:" ",zh:""}}],navigationMenu:[{id:"nav-home",key:"HOME",enabled:!0,order:1,label:{ar:"",en:"Home",hi:"",zh:""},icon:"Home",requiresAuth:!1},{id:"nav-orders",key:"ORDERS",enabled:!0,order:2,label:{ar:" ",en:"Order History",hi:" ",zh:""},icon:"ShoppingBag",requiresAuth:!0},{id:"nav-quotes",key:"QUOTE_REQUEST",enabled:!0,order:3,label:{ar:" ",en:"Quote Requests",hi:" ",zh:""},icon:"FileText",requiresAuth:!0},{id:"nav-import",key:"IMPORT_CHINA",enabled:!0,order:4,label:{ar:"  ",en:"Import from China",hi:"  ",zh:""},icon:"Globe",requiresAuth:!0},{id:"nav-tools",key:"TRADER_TOOLS",enabled:!0,order:5,label:{ar:" ",en:"Trader Tools",hi:" ",zh:""},icon:"Wrench",requiresAuth:!0},{id:"nav-org",key:"ORGANIZATION",enabled:!0,order:6,label:{ar:" ",en:"Organization",hi:"",zh:""},icon:"Building2",requiresAuth:!0,requiredPermission:"org_view_dashboard"},{id:"nav-team",key:"TEAM_MANAGEMENT",enabled:!0,order:7,label:{ar:" ",en:"Team Management",hi:" ",zh:""},icon:"Users",requiresAuth:!0,requiredPermission:"org_manage_team"},{id:"nav-history",key:"HISTORY",enabled:!0,order:8,label:{ar:" ",en:"Search History",hi:" ",zh:""},icon:"Clock",requiresAuth:!0},{id:"nav-about",key:"ABOUT",enabled:!0,order:9,label:{ar:" ",en:"About Us",hi:"  ",zh:""},icon:"Info",requiresAuth:!1}],features:{enableSearch:!0,enableCart:!0,enableOrders:!0,enableQuoteRequests:!0,enableImportFromChina:!0,enableVinDecoder:!0,enablePdfToExcel:!0,enablePriceComparison:!0,enableSupplierMarketplace:!0,enableInstallments:!0,enableOrganization:!0,enableTeamManagement:!0,enableMarketingBanners:!0,enableMarketingPopups:!0,enableMarketingCards:!0,enableAnnouncementTicker:!0,enableGuestMode:!0,guestCanSearch:!0,guestCanViewPrices:!1},heroBanners:[{id:"banner-1",enabled:!0,order:1,title:{ar:" ..  ",en:"SINI CAR.. Your Gateway to Warehouse",hi:" ..     ",zh:"SINI CAR.."},subtitle:{ar:"     MG      ",en:"Order Changan & MG parts directly and save waiting time",hi:"      ",zh:"MG"},buttonText:{ar:"  ",en:"Start Ordering Now",hi:"  ",zh:""},buttonUrl:"#search",colorClass:"from-primary-700 to-primary-900"},{id:"banner-2",enabled:!0,order:2,title:{ar:" :   ",en:"New Arrivals: Geely & Haval Parts",hi:" :    ",zh:""},subtitle:{ar:"      H6 ",en:"Comprehensive coverage for new Geely Monjaro and Haval H6 models",hi:"     H6     ",zh:"MonjaroH6"},buttonText:{ar:" ",en:"Browse Parts",hi:"  ",zh:""},buttonUrl:"#search",colorClass:"from-slate-700 to-slate-900"},{id:"banner-3",enabled:!0,order:3,title:{ar:"  ",en:"Special Wholesale Offers",hi:"  ",zh:""},subtitle:{ar:"      ",en:"Special prices for wholesale orders and authorized service centers",hi:"         ",zh:""},buttonText:{ar:" ",en:"Bulk Offers",hi:" ",zh:""},buttonUrl:"#offers",colorClass:"from-secondary-600 to-secondary-800"}],announcements:[{id:"announcement-1",enabled:!0,type:"ticker",content:{ar:"      -      .     5000 .",en:"Welcome to SINI CAR B2B Portal - Your trusted source for Chinese auto parts. Free shipping for orders over 5000 SAR.",hi:"  B2B      -        ",zh:"SINI CAR B2B - "},backgroundColor:"#0f172a",textColor:"#fb923c",dismissible:!1}],infoCards:[{id:"card-1",enabled:!0,order:1,icon:"Shield",title:{ar:"  ",en:"Genuine & Guaranteed Parts",hi:"   ",zh:""},description:{ar:"        .",en:"Authorized distributor for Changan, MG, Geely, and Haval parts.",hi:", ,       ",zh:"MG"},colorClass:"bg-green-50 text-green-600"},{id:"card-2",enabled:!0,order:2,icon:"Truck",title:{ar:"  ",en:"Fast Regional Shipping",hi:"  ",zh:""},description:{ar:"  24       .",en:"24-hour shipping to major cities with refrigerated shipping for remote areas.",hi:"   24   ",zh:"24"},colorClass:"bg-blue-50 text-blue-600"},{id:"card-3",enabled:!0,order:3,icon:"BadgeDollarSign",title:{ar:"  ",en:"Competitive Wholesale Prices",hi:"  ",zh:""},description:{ar:"      .",en:"Smart pricing system based on your purchase volume.",hi:"        ",zh:""},colorClass:"bg-amber-50 text-amber-600"}],lastModifiedAt:new Date().toISOString()}},async resetCustomerPortalSettings(){const e=this.getDefaultCustomerPortalSettings();return localStorage.setItem("b2b_customer_portal_settings_v1",JSON.stringify(e)),e},async getAISettings(){const e=localStorage.getItem("b2b_ai_settings_v1");return e?JSON.parse(e):this.getDefaultAISettings()},async saveAISettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_ai_settings_v1",JSON.stringify(e)),e},getDefaultAISettings(){return{id:"ai-settings-1",enabled:!0,defaultProvider:"openai",providers:[{id:"openai-provider",provider:"openai",displayName:{ar:"OpenAI",en:"OpenAI",hi:"OpenAI",zh:"OpenAI"},enabled:!0,isDefault:!0,model:"gpt-4o-mini",maxTokens:4096,maxRequestsPerMinute:60,maxRequestsPerDay:1e3,supportsChat:!0,supportsImageGeneration:!0,supportsVision:!0,supportsAudio:!1,inputTokenCost:.15,outputTokenCost:.6},{id:"gemini-provider",provider:"gemini",displayName:{ar:"Google Gemini",en:"Google Gemini",hi:"Google Gemini",zh:"Google Gemini"},enabled:!1,isDefault:!1,model:"gemini-2.5-flash",maxTokens:8192,maxRequestsPerMinute:60,maxRequestsPerDay:1500,supportsChat:!0,supportsImageGeneration:!0,supportsVision:!0,supportsAudio:!0,inputTokenCost:.075,outputTokenCost:.3},{id:"anthropic-provider",provider:"anthropic",displayName:{ar:"Anthropic Claude",en:"Anthropic Claude",hi:"Anthropic Claude",zh:"Anthropic Claude"},enabled:!1,isDefault:!1,model:"claude-sonnet-4-5",maxTokens:4096,maxRequestsPerMinute:50,maxRequestsPerDay:500,supportsChat:!0,supportsImageGeneration:!1,supportsVision:!0,supportsAudio:!1,inputTokenCost:3,outputTokenCost:15}],features:{enableAIAssistant:!0,enableAIProductSearch:!0,enableAIPartMatching:!0,enableAIVinDecoding:!0,enableAIPriceAnalysis:!0,enableAITranslation:!0,enableAIOrderAnalysis:!0,enableAICustomerInsights:!0,enableAIReports:!0,enableAIFraudDetection:!1,enableAIInventoryPrediction:!1,enableAIContentGeneration:!0,enableAICampaignOptimization:!1},usageLimits:[{role:"SUPER_ADMIN",dailyRequests:500,monthlyRequests:1e4,maxTokensPerRequest:8192,allowedFeatures:["all"]},{role:"CUSTOMER_OWNER",dailyRequests:100,monthlyRequests:2e3,maxTokensPerRequest:4096,allowedFeatures:["enableAIAssistant","enableAIProductSearch","enableAIPartMatching","enableAIVinDecoding","enableAIPriceAnalysis"]},{role:"CUSTOMER_STAFF",dailyRequests:50,monthlyRequests:1e3,maxTokensPerRequest:2048,allowedFeatures:["enableAIAssistant","enableAIProductSearch"]}],systemPrompts:{customerAssistant:{ar:"      B2B.          .   .",en:"You are an AI assistant for SINI CAR B2B customers. Help customers find spare parts, prices, and order status. Be polite and helpful.",hi:"   B2B           ,        ",zh:"SINI CAR B2BAI"},productSearch:{ar:"        .         MG  .",en:"Help the user search for Chinese car spare parts. Use part numbers and brand names like Changan, MG, Geely, Haval.",hi:"          , , ,          ",zh:"MG"},partMatching:{ar:"      VIN   .      .",en:"Match parts based on VIN number or vehicle description. Identify parts compatible with the model and year.",hi:"VIN                     ",zh:"VIN"}},enableContentModeration:!0,blockedTopics:["weapons","drugs","violence","politics"],maxConversationLength:50,trackUsage:!0,trackCosts:!0,lastModifiedAt:new Date().toISOString()}},async resetAISettings(){const e=this.getDefaultAISettings();return localStorage.setItem("b2b_ai_settings_v1",JSON.stringify(e)),e},async getAIConversations(e){const s=localStorage.getItem(`b2b_ai_conversations_${e}`);return s?JSON.parse(s):[]},async saveAIConversation(e){const s=await this.getAIConversations(e.userId),a=s.findIndex(n=>n.id===e.id);a>=0?s[a]=e:s.unshift(e);const r=s.slice(0,50);return localStorage.setItem(`b2b_ai_conversations_${e.userId}`,JSON.stringify(r)),e},async sendAIMessage(e){await new Promise(o=>setTimeout(o,800+Math.random()*700));const{message:s,language:a="ar"}=e,r={search:{ar:"      .             .",en:"I can help you search for auto parts. What type of part are you looking for? Please tell me the vehicle type or part number."},order:{ar:"      .          .",en:"To check your order status, please provide your order number. You can find it in your email or on the My Orders page."},price:{ar:"   .          .",en:"I will help you compare prices. Tell me the part name or number and I will show you the best available options."},default:{ar:"  !               .",en:"Thank you for contacting us! How can I help you today? I can assist with finding parts, tracking orders, and comparing prices."}},n=s.toLowerCase();let i="default";n.includes("")||n.includes("")||n.includes("search")||n.includes("find")||n.includes("part")?i="search":n.includes("")||n.includes("order")||n.includes("status")?i="order":(n.includes("")||n.includes("")||n.includes("price")||n.includes("compare"))&&(i="price");const l=a==="ar"?"ar":"en";return{content:r[i][l],tokensUsed:Math.floor(50+Math.random()*100)}},async deleteAIConversation(e,s){const r=(await this.getAIConversations(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_ai_conversations_${e}`,JSON.stringify(r)),!0},async getAIUsageLogs(e){const s=localStorage.getItem("b2b_ai_usage_logs");let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.userId===e)),a.sort((r,n)=>new Date(n.timestamp).getTime()-new Date(r.timestamp).getTime())},async logAIUsage(e){const s=await this.getAIUsageLogs();s.unshift(e);const a=s.slice(0,1e3);localStorage.setItem("b2b_ai_usage_logs",JSON.stringify(a))},async getSavedPriceComparisons(e){const s=localStorage.getItem(`b2b_saved_comparisons_${e}`);return s?JSON.parse(s):[]},async savePriceComparison(e){const s=await this.getSavedPriceComparisons(e.userId),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]={...e,updatedAt:new Date().toISOString()}:(e.createdAt=new Date().toISOString(),e.updatedAt=e.createdAt,s.unshift(e)),localStorage.setItem(`b2b_saved_comparisons_${e.userId}`,JSON.stringify(s)),e},async deletePriceComparison(e,s){const r=(await this.getSavedPriceComparisons(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_saved_comparisons_${e}`,JSON.stringify(r)),!0},async getSavedVinExtractions(e){const s=localStorage.getItem(`b2b_saved_vins_${e}`);return s?JSON.parse(s):[]},async saveVinExtraction(e){const s=await this.getSavedVinExtractions(e.userId),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]={...e,updatedAt:new Date().toISOString()}:(e.createdAt=new Date().toISOString(),e.updatedAt=e.createdAt,s.unshift(e)),localStorage.setItem(`b2b_saved_vins_${e.userId}`,JSON.stringify(s)),e},async deleteVinExtraction(e,s){const r=(await this.getSavedVinExtractions(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_saved_vins_${e}`,JSON.stringify(r)),!0},async getSavedQuoteTemplates(e){const s=localStorage.getItem(`b2b_quote_templates_${e}`);return s?JSON.parse(s):[]},async saveQuoteTemplate(e){const s=await this.getSavedQuoteTemplates(e.userId),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]={...e,updatedAt:new Date().toISOString()}:(e.createdAt=new Date().toISOString(),e.updatedAt=e.createdAt,e.usageCount=0,s.unshift(e)),localStorage.setItem(`b2b_quote_templates_${e.userId}`,JSON.stringify(s)),e},async deleteQuoteTemplate(e,s){const r=(await this.getSavedQuoteTemplates(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_quote_templates_${e}`,JSON.stringify(r)),!0},async getFileConversionHistory(e){const s=localStorage.getItem(`b2b_file_conversions_${e}`);return s?JSON.parse(s):[]},async saveFileConversion(e){const s=await this.getFileConversionHistory(e.userId);s.unshift(e);const a=s.slice(0,100);return localStorage.setItem(`b2b_file_conversions_${e.userId}`,JSON.stringify(a)),e},async getSecuritySettings(){const e=localStorage.getItem("b2b_security_settings_v1");return e?JSON.parse(e):this.getDefaultSecuritySettings()},async saveSecuritySettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_security_settings_v1",JSON.stringify(e)),e},getDefaultSecuritySettings(){return{id:"security-settings-1",passwordMinLength:8,passwordRequireUppercase:!0,passwordRequireLowercase:!0,passwordRequireNumbers:!0,passwordRequireSymbols:!1,passwordExpiryDays:90,passwordHistoryCount:3,maxLoginAttempts:5,lockoutDurationMinutes:30,sessionTimeoutMinutes:60,allowMultipleSessions:!0,twoFactor:{enabled:!1,method:"email",requiredForAdmins:!0,requiredForFinancial:!0,graceLoginCount:3},enableIPWhitelist:!1,ipWhitelist:[],enableGeoBlocking:!1,blockedCountries:[],enableRiskDetection:!0,riskThreshold:70,notifyOnSuspiciousLogin:!0,enableAuditLog:!0,auditRetentionDays:90,lastModifiedAt:new Date().toISOString()}},async getLoginHistory(e){const s=localStorage.getItem("b2b_login_history");let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.userId===e)),a.sort((r,n)=>new Date(n.timestamp).getTime()-new Date(r.timestamp).getTime())},async logLogin(e){const s=await this.getLoginHistory();s.unshift(e);const a=s.slice(0,1e3);localStorage.setItem("b2b_login_history",JSON.stringify(a))},async getCoupons(){const e=localStorage.getItem("b2b_coupons");return e?JSON.parse(e):[]},async saveCoupon(e){const s=await this.getCoupons(),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]=e:(e.createdAt=new Date().toISOString(),e.usageCount=0,s.push(e)),localStorage.setItem("b2b_coupons",JSON.stringify(s)),e},async deleteCoupon(e){const a=(await this.getCoupons()).filter(r=>r.id!==e);return localStorage.setItem("b2b_coupons",JSON.stringify(a)),!0},async getLoyaltySettings(){const e=localStorage.getItem("b2b_loyalty_settings");return e?JSON.parse(e):this.getDefaultLoyaltySettings()},async saveLoyaltySettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_loyalty_settings",JSON.stringify(e)),e},getDefaultLoyaltySettings(){return{id:"loyalty-settings-1",enabled:!0,programName:{ar:"   ",en:"SINI CAR Loyalty Program",hi:"   ",zh:"SINI CAR "},pointsPerCurrency:1,pointsRedemptionRate:.1,levels:[{id:"bronze",name:{ar:"",en:"Bronze",hi:"",zh:""},minPoints:0,maxPoints:999,benefits:[{type:"discount",value:2,description:{ar:" 2%   ",en:"2% discount on all orders",hi:"   2% ",zh:"2%"}}],color:"#CD7F32"},{id:"silver",name:{ar:"",en:"Silver",hi:"",zh:""},minPoints:1e3,maxPoints:4999,benefits:[{type:"discount",value:5,description:{ar:" 5%   ",en:"5% discount on all orders",hi:"   5% ",zh:"5%"}},{type:"priority_support",description:{ar:"  ",en:"Priority support",hi:" ",zh:""}}],color:"#C0C0C0"},{id:"gold",name:{ar:"",en:"Gold",hi:"",zh:""},minPoints:5e3,maxPoints:14999,benefits:[{type:"discount",value:10,description:{ar:" 10%   ",en:"10% discount on all orders",hi:"   10% ",zh:"10%"}},{type:"free_shipping",description:{ar:" ",en:"Free shipping",hi:" ",zh:""}},{type:"priority_support",description:{ar:"  VIP",en:"VIP support",hi:" ",zh:"VIP"}}],color:"#FFD700"},{id:"platinum",name:{ar:"",en:"Platinum",hi:"",zh:""},minPoints:15e3,benefits:[{type:"discount",value:15,description:{ar:" 15%   ",en:"15% discount on all orders",hi:"   15% ",zh:"15%"}},{type:"free_shipping",description:{ar:"  ",en:"Free express shipping",hi:"  ",zh:""}},{type:"exclusive_access",description:{ar:"  ",en:"Exclusive offer access",hi:"  ",zh:""}},{type:"priority_support",description:{ar:"  ",en:"Personal account manager",hi:"  ",zh:""}}],color:"#E5E4E2"}],pointsExpiryDays:365,allowPartialRedemption:!0,minimumRedemptionPoints:100,lastModifiedAt:new Date().toISOString()}},async getCustomerLoyalty(e){const s=localStorage.getItem(`b2b_customer_loyalty_${e}`);return s?JSON.parse(s):null},async saveCustomerLoyalty(e){return e.lastActivityAt=new Date().toISOString(),localStorage.setItem(`b2b_customer_loyalty_${e.userId}`,JSON.stringify(e)),e},async getAdvancedNotificationSettings(){const e=localStorage.getItem("b2b_advanced_notification_settings_v1");return e?JSON.parse(e):this.getDefaultAdvancedNotificationSettings()},async saveAdvancedNotificationSettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_advanced_notification_settings_v1",JSON.stringify(e)),e},getDefaultAdvancedNotificationSettings(){return{id:"notification-settings-1",enabled:!0,defaultChannels:["toast","bell"],emailConfig:{enabled:!0,senderName:"SINI CAR B2B",senderEmail:"noreply@sinicar.com"},smsConfig:{enabled:!1,provider:"twilio"},whatsappConfig:{enabled:!1,provider:"twilio"},pushConfig:{enabled:!1},templates:[],defaultPreferences:[],lastModifiedAt:new Date().toISOString()}},determineActorType(e){var s;return e.extendedRole==="ADMIN"||e.role==="SUPER_ADMIN"?"ADMIN":e.extendedRole==="EMPLOYEE"||e.employeeRole?"EMPLOYEE":e.extendedRole==="MARKETER"?"MARKETER":e.isSupplier||(s=e.extendedRole)!=null&&s.startsWith("SUPPLIER_")?"SUPPLIER":"CUSTOMER"},async logActivityExtended(e){const s=await this.getActivityLogs(),a={id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:e.actorId,userName:e.actorName,eventType:e.actionType,actorType:e.actorType,entityType:e.entityType,entityId:e.entityId,description:e.description,page:e.page,metadata:e.metadata,ipAddress:e.ipAddress,userAgent:e.userAgent,createdAt:new Date().toISOString()};return s.unshift(a),s.length>1e4&&(s.length=1e4),localStorage.setItem(oe.ACTIVITY_LOGS,JSON.stringify(s)),a},async getActivityLogsFiltered(e){const s=await this.getActivityLogs(),a=e.page||1,r=e.pageSize||50;let n=s.filter(d=>{if(e.actorType&&d.actorType!==e.actorType||e.actorId&&d.userId!==e.actorId||e.actionType&&d.eventType!==e.actionType||e.entityType&&d.entityType!==e.entityType||e.entityId&&d.entityId!==e.entityId)return!1;if(e.dateFrom){const u=new Date(d.createdAt),h=new Date(e.dateFrom);if(u<h)return!1}if(e.dateTo){const u=new Date(d.createdAt),h=new Date(e.dateTo);if(h.setHours(23,59,59,999),u>h)return!1}return!0});n.sort((d,u)=>new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime());const i=n.length,l=(a-1)*r;return{items:n.slice(l,l+r),page:a,pageSize:r,total:i}},async updateUserLastActivity(e){const s=this.getUsers(),a=s.findIndex(r=>r.id===e);if(a!==-1){const r=s[a],n=new Date,i=r.lastActiveAt?new Date(r.lastActiveAt):null;(!i||n.getTime()-i.getTime()>120*1e3)&&(s[a]={...r,lastActiveAt:n.toISOString()},this.saveUsers(s))}},async getOnlineUsersGrouped(e=5){const s=this.getUsers(),a=new Date(Date.now()-e*60*1e3),r=s.filter(i=>i.lastActiveAt?new Date(i.lastActiveAt)>=a:!1),n={onlineCustomers:[],onlineSuppliers:[],onlineMarketers:[],onlineEmployees:[],onlineAdmins:[]};for(const i of r){const l={id:i.id,name:i.name,actorType:this.determineActorType(i),role:i.role,lastActivityAt:i.lastActiveAt||""};switch(l.actorType){case"ADMIN":n.onlineAdmins.push(l);break;case"EMPLOYEE":n.onlineEmployees.push(l);break;case"MARKETER":n.onlineMarketers.push(l);break;case"SUPPLIER":n.onlineSuppliers.push(l);break;default:n.onlineCustomers.push(l)}}return n},async getActivityStats(){const e=await this.getActivityLogs(),s=new Date;s.setHours(0,0,0,0);const a=e.filter(i=>new Date(i.createdAt)>=s),r={CUSTOMER:0,SUPPLIER:0,MARKETER:0,EMPLOYEE:0,ADMIN:0},n={};for(const i of e)i.actorType&&r[i.actorType]++,i.eventType&&(n[i.eventType]=(n[i.eventType]||0)+1);return{totalLogs:e.length,todayLogs:a.length,logsByActorType:r,logsByActionType:n}},async getHomepageConfig(e){const s=e||"DEFAULT",a=[{id:"banner-1",title:{ar:"    ",en:"Genuine Parts at Wholesale Prices",hi:"    ",zh:""},subtitle:{ar:"     ",en:"Authorized Dealer for Chinese Auto Parts",hi:"     ",zh:""},backgroundColor:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",ctaLabel:{ar:" ",en:"Shop Now",hi:" ",zh:""},ctaLink:"PRODUCT_SEARCH",ctaVariant:"primary",isActive:!0,order:1},{id:"banner-2",title:{ar:"   ",en:"Import Service from China",hi:"   ",zh:""},subtitle:{ar:"      ",en:"Get any part not available locally",hi:"        ",zh:""},backgroundColor:"linear-gradient(135deg, #065f46 0%, #10b981 100%)",ctaLabel:{ar:" ",en:"Request Import",hi:" ",zh:""},ctaLink:"IMPORT_CHINA",ctaVariant:"secondary",isActive:!0,order:2},{id:"banner-3",title:{ar:"  ",en:"Advanced Trader Tools",hi:"  ",zh:""},subtitle:{ar:"   VIN ",en:"Price comparison, VIN decode, and more",hi:" , VIN ,  ",zh:"VIN"},backgroundColor:"linear-gradient(135deg, #7c2d12 0%, #f97316 100%)",ctaLabel:{ar:" ",en:"Explore Tools",hi:" ",zh:""},ctaLink:"TRADER_TOOLS",ctaVariant:"outline",isActive:!0,order:3}],r={WORKSHOP:{heroTitle:{ar:"  ",en:"Welcome Workshop",hi:"    ",zh:""},heroSubtitle:{ar:"     ",en:"Parts you need, delivered fast",hi:"   ,  ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showQuoteRequest:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders","tools"]},RENTAL:{heroTitle:{ar:"  ",en:"Rental Companies Portal",hi:"   ",zh:""},heroSubtitle:{ar:"   ",en:"Manage your fleet efficiently",hi:"      ",zh:""},showProductSearchShortcut:!0,showTraderTools:!1,showQuoteRequest:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders"]},INSURANCE:{heroTitle:{ar:"  ",en:"Insurance Companies Portal",hi:"   ",zh:""},heroSubtitle:{ar:"    ",en:"Fast claims and accurate price comparison",hi:"     ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showQuoteRequest:!0,sectionsOrder:["hero","banners","keyActions","stats","tools"]},SUPPLIER:{heroTitle:{ar:" ",en:"Supplier Portal",hi:" ",zh:""},heroSubtitle:{ar:"   ",en:"Manage customer requests and your products",hi:"       ",zh:""},showProductSearchShortcut:!1,showTraderTools:!1,showQuoteRequest:!1,sectionsOrder:["hero","banners","supplierStats","incomingRequests"]},MARKETER:{heroTitle:{ar:" ",en:"Marketer Portal",hi:" ",zh:""},heroSubtitle:{ar:"   ",en:"Track your commissions and referral links",hi:"       ",zh:""},showProductSearchShortcut:!1,showTraderTools:!1,showQuoteRequest:!1,sectionsOrder:["hero","banners","marketerStats","referralSection"]},PARTS_SHOP:{heroTitle:{ar:"  ",en:"Parts Shop Portal",hi:"  ",zh:""},heroSubtitle:{ar:"    ",en:"Competitive wholesale prices and fast delivery",hi:"     ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showQuoteRequest:!0,showOrderHistory:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders","tools"]},DEFAULT:{heroTitle:{ar:"  ",en:"SINI CAR System",hi:"  ",zh:""},heroSubtitle:{ar:"   ",en:"Authorized Wholesale Portal",hi:"  ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showImportServices:!0,showQuoteRequest:!0,showOrderHistory:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders","tools","feedback"]}},n=r[s]||r.DEFAULT,i=[{id:"shortcut-search",icon:"search",title:{ar:" ",en:"Parts Search",hi:" ",zh:""},description:{ar:"       ",en:"Search parts by number or description",hi:"     ",zh:""},link:"PRODUCT_SEARCH",colorClass:"bg-blue-600",isActive:!0,order:1},{id:"shortcut-quote",icon:"file-text",title:{ar:" ",en:"Quote Request",hi:" ",zh:""},description:{ar:"      ",en:"Upload Excel file for full quote",hi:"       ",zh:"Excel"},link:"QUOTE_REQUEST",colorClass:"bg-emerald-600",isActive:!0,order:2},{id:"shortcut-orders",icon:"package",title:{ar:" ",en:"Order History",hi:" ",zh:""},description:{ar:"    ",en:"Track all your past and current orders",hi:"        ",zh:""},link:"ORDERS",colorClass:"bg-orange-600",isActive:!0,order:3},{id:"shortcut-import",icon:"globe",title:{ar:"  ",en:"Import from China",hi:"  ",zh:""},description:{ar:"    ",en:"Order parts not available locally",hi:"      ",zh:""},link:"IMPORT_CHINA",colorClass:"bg-purple-600",isActive:!0,order:4},{id:"shortcut-tools",icon:"wrench",title:{ar:" ",en:"Trader Tools",hi:" ",zh:""},description:{ar:"   ",en:"Advanced comparison and analysis tools",hi:"    ",zh:""},link:"TRADER_TOOLS",colorClass:"bg-indigo-600",isActive:!0,order:5},{id:"shortcut-alternatives",icon:"refresh-cw",title:{ar:" ",en:"Part Alternatives",hi:" ",zh:""},description:{ar:"    ",en:"Find compatible part alternatives",hi:"   ",zh:""},link:"ALTERNATIVES",colorClass:"bg-teal-600",isActive:!0,order:6}];return{customerType:s,layoutConfig:{heroTitle:n.heroTitle||r.DEFAULT.heroTitle,heroSubtitle:n.heroSubtitle||r.DEFAULT.heroSubtitle,heroBackgroundGradient:"linear-gradient(135deg, #081a33 0%, #102b57 100%)",showProductSearchShortcut:n.showProductSearchShortcut??!0,showTraderTools:n.showTraderTools??!0,showImportServices:n.showImportServices??!0,showQuoteRequest:n.showQuoteRequest??!0,showOrderHistory:n.showOrderHistory??!0,sectionsOrder:n.sectionsOrder||["hero","banners","keyActions","stats","recentOrders","tools"],primaryCtaLabel:{ar:"   ",en:"Search Parts",hi:" ",zh:""},primaryCtaLink:"PRODUCT_SEARCH",secondaryCtaLabel:{ar:" ",en:"Request Quote",hi:"   ",zh:""},secondaryCtaLink:"QUOTE_REQUEST"},bannersConfig:{autoPlayInterval:5e3,showDots:!0,showArrows:!0,transitionType:"slide",banners:a},shortcutsConfig:{shortcuts:i.filter(l=>!(l.link==="PRODUCT_SEARCH"&&!n.showProductSearchShortcut||l.link==="TRADER_TOOLS"&&!n.showTraderTools||l.link==="QUOTE_REQUEST"&&!n.showQuoteRequest||l.link==="IMPORT_CHINA"&&!n.showImportServices))}}},async getHomepageStats(e){const s=await this.getOrders(e);return{pendingRequests:(await this.getAllQuoteRequests()).filter(n=>n.customerId===e).filter(n=>n.status==="NEW"||n.status==="UNDER_REVIEW").length,approvedOrders:s.filter(n=>n.status==="APPROVED").length,inProgressOrders:s.filter(n=>n.status==="PENDING").length,totalOrders:s.length}},async getSupplierProducts(e,s){await Bt(50);let r=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]").filter(f=>f.supplierId===e);if(s!=null&&s.search){const f=s.search.toLowerCase();r=r.filter(x=>x.name.toLowerCase().includes(f)||x.sku.toLowerCase().includes(f)||x.oemNumber.toLowerCase().includes(f)||x.brand.toLowerCase().includes(f))}s!=null&&s.category&&(r=r.filter(f=>f.category===s.category)),s!=null&&s.brand&&(r=r.filter(f=>f.brand===s.brand)),(s==null?void 0:s.availability)==="IN_STOCK"?r=r.filter(f=>f.stock>0):(s==null?void 0:s.availability)==="OUT_OF_STOCK"&&(r=r.filter(f=>f.stock===0)),(s==null?void 0:s.isActive)!==void 0&&(r=r.filter(f=>f.isActive===s.isActive));const n=(s==null?void 0:s.sortBy)||"createdAt",i=(s==null?void 0:s.sortDirection)||"desc";r.sort((f,x)=>{const p=f[n]??"",v=x[n]??"";return typeof p=="string"&&typeof v=="string"?i==="asc"?p.localeCompare(v):v.localeCompare(p):typeof p=="number"&&typeof v=="number"?i==="asc"?p-v:v-p:0});const l=r.length,o=(s==null?void 0:s.page)||1,d=(s==null?void 0:s.pageSize)||20,u=(o-1)*d;return{items:r.slice(u,u+d),total:l}},async addSupplierProduct(e,s){await Bt(50);const a=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]"),r={id:`SP-${Date.now()}-${Math.floor(Math.random()*1e3)}`,supplierId:e,...s,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a.push(r),localStorage.setItem(oe.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(a)),bt({eventType:"PRODUCT_ADDED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:r.id,description:`  : ${s.name}`,metadata:{productSku:s.sku}}),r},async updateSupplierProduct(e,s,a){await Bt(50);const r=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]"),n=r.findIndex(i=>i.id===s&&i.supplierId===e);return n===-1?null:(r[n]={...r[n],...a,updatedAt:new Date().toISOString()},localStorage.setItem(oe.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(r)),bt({eventType:"PRODUCT_UPDATED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:s,description:` : ${r[n].name}`,metadata:{updates:Object.keys(a)}}),r[n])},async deleteSupplierProduct(e,s){await Bt(50);const a=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]"),r=a.findIndex(n=>n.id===s&&n.supplierId===e);return r===-1?!1:(a[r].isActive=!1,a[r].updatedAt=new Date().toISOString(),localStorage.setItem(oe.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(a)),bt({eventType:"PRODUCT_DELETED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:s,description:` : ${a[r].name}`,metadata:{}}),!0)},async importSupplierProductsFromExcel(e,s){await Bt(100);try{const a=rd(s,{type:"array"}),r=a.SheetNames[0],n=a.Sheets[r],i=Ta.sheet_to_json(n,{defval:""}),l=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]");let o=0,d=0,u=0;const h=[];return i.forEach((f,x)=>{const p=String(f.sku||f.SKU||f[" "]||"").trim(),v=String(f.oemNumber||f.OEM||f[" OEM"]||f[" "]||"").trim(),b=String(f.name||f.||f[" "]||"").trim(),y=parseFloat(f.price||f.||f.purchasePrice||"0"),j=parseInt(f.stock||f.||f.||"0"),w=String(f.category||f.||"").trim(),S=String(f.brand||f.||f.||"").trim(),O=String(f.model||f.||"").trim(),_=parseInt(f.yearFrom||f[" "]||"0")||void 0,E=parseInt(f.yearTo||f[" "]||"0")||void 0,A=parseInt(f.deliveryTime||f[" "]||"3"),D=parseInt(f.minOrderQty||f[" "]||"1");if(!p&&!v){h.push({row:x+2,field:"sku/oemNumber",message:"      OEM"}),u++;return}if(!b){h.push({row:x+2,field:"name",message:"  "}),u++;return}if(isNaN(y)||y<0){h.push({row:x+2,field:"price",message:"  "}),u++;return}const L=l.findIndex(B=>B.supplierId===e&&(p&&B.sku===p||v&&B.oemNumber===v));if(L!==-1)l[L]={...l[L],name:b,purchasePrice:y,stock:j,category:w||l[L].category,brand:S||l[L].brand,model:O||l[L].model,yearFrom:_||l[L].yearFrom,yearTo:E||l[L].yearTo,deliveryTime:A,minOrderQty:D,updatedAt:new Date().toISOString()},d++;else{const B={id:`SP-${Date.now()}-${Math.floor(Math.random()*1e4)}`,supplierId:e,sku:p||`AUTO-${Date.now()}`,oemNumber:v||"",name:b,category:w||"",brand:S||" ",model:O,yearFrom:_,yearTo:E,purchasePrice:y,minOrderQty:D,stock:j,deliveryTime:A,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l.push(B),o++}}),localStorage.setItem(oe.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(l)),bt({eventType:"PRODUCT_IMPORTED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:"",description:` ${o+d}    Excel`,metadata:{insertedCount:o,updatedCount:d,skippedCount:u}}),{success:!0,totalRows:i.length,insertedCount:o,updatedCount:d,skippedCount:u,errors:h}}catch{return{success:!1,totalRows:0,insertedCount:0,updatedCount:0,skippedCount:0,errors:[{row:0,field:"file",message:"   "}]}}},async getSupplierRequests(e,s){await Bt(50);let r=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_REQUESTS)||"[]").filter(f=>f.supplierId===e);if(s!=null&&s.status&&s.status!=="ALL"&&(r=r.filter(f=>f.status===s.status)),s!=null&&s.urgency&&s.urgency!=="ALL"&&(r=r.filter(f=>f.urgency===s.urgency)),s!=null&&s.dateFrom&&(r=r.filter(f=>f.createdAt>=s.dateFrom)),s!=null&&s.dateTo&&(r=r.filter(f=>f.createdAt<=s.dateTo)),s!=null&&s.search){const f=s.search.toLowerCase();r=r.filter(x=>{var p,v,b;return((p=x.partNumber)==null?void 0:p.toLowerCase().includes(f))||((v=x.partName)==null?void 0:v.toLowerCase().includes(f))||((b=x.customerName)==null?void 0:b.toLowerCase().includes(f))})}const n=(s==null?void 0:s.sortBy)||"createdAt",i=(s==null?void 0:s.sortDirection)||"desc";r.sort((f,x)=>{const p=f[n]??"",v=x[n]??"";return typeof p=="string"&&typeof v=="string"?i==="asc"?p.localeCompare(v):v.localeCompare(p):0});const l=r.length,o=(s==null?void 0:s.page)||1,d=(s==null?void 0:s.pageSize)||20,u=(o-1)*d;return{items:r.slice(u,u+d),total:l}},async submitSupplierQuote(e,s){await Bt(50);const a=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_REQUESTS)||"[]"),r=a.findIndex(i=>i.id===s.requestId&&i.supplierId===e);return r===-1?null:(a[r]={...a[r],status:"QUOTED",quotedPrice:s.quotedPrice,stockAvailable:s.stockAvailable,notes:s.notes,respondedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},localStorage.setItem(oe.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(a)),bt({eventType:"QUOTE_SENT",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"REQUEST",entityId:s.requestId,description:`  : ${s.quotedPrice} `,metadata:{quotedPrice:s.quotedPrice,stockAvailable:s.stockAvailable}}),cu().forEach(i=>{HO({userId:i,type:"SUPPLIER_REQUEST_ASSIGNED",title:"    ",message:`    ${s.quotedPrice} `,relatedType:"REQUEST",relatedId:s.requestId})}),a[r])},async rejectSupplierRequest(e,s,a){await Bt(50);const r=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_REQUESTS)||"[]"),n=r.findIndex(i=>i.id===s&&i.supplierId===e);return n===-1?null:(r[n]={...r[n],status:"REJECTED",notes:a||"  ",respondedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},localStorage.setItem(oe.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(r)),bt({eventType:"QUOTE_REQUEST_REJECTED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"REQUEST",entityId:s,description:"  ",metadata:{reason:a}}),r[n])},initializeSupplierDemoData(e){const s=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]");if(!s.some(i=>i.supplierId===e)){const i=[{id:"SP-demo-1",supplierId:e,sku:"CN-BRK-001",oemNumber:"11223344",name:"   -  CS75",category:"",brand:"Changan",model:"CS75",yearFrom:2020,yearTo:2024,purchasePrice:120,stock:50,minOrderQty:1,deliveryTime:2,isActive:!0,createdAt:new Date(Date.now()-2592e6).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-2",supplierId:e,sku:"MG-FLT-002",oemNumber:"55667788",name:"   - MG RX5",category:"",brand:"MG",model:"RX5",yearFrom:2021,yearTo:2024,purchasePrice:35,stock:200,minOrderQty:5,deliveryTime:1,isActive:!0,createdAt:new Date(Date.now()-216e7).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-3",supplierId:e,sku:"GL-RAD-003",oemNumber:"99887766",name:"  -  ",category:"",brand:"Geely",model:"Coolray",yearFrom:2022,yearTo:2024,purchasePrice:550,stock:15,minOrderQty:1,deliveryTime:3,isActive:!0,createdAt:new Date(Date.now()-1728e6).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-4",supplierId:e,sku:"HV-SUSP-004",oemNumber:"44556677",name:"  -  H6",category:" ",brand:"Haval",model:"H6",yearFrom:2020,yearTo:2023,purchasePrice:380,stock:10,minOrderQty:1,deliveryTime:2,isActive:!0,createdAt:new Date(Date.now()-1296e6).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-5",supplierId:e,sku:"CN-ALT-005",oemNumber:"33445566",name:"  -  CS95",category:"",brand:"Changan",model:"CS95",yearFrom:2019,yearTo:2024,purchasePrice:950,stock:5,minOrderQty:1,deliveryTime:4,isActive:!1,createdAt:new Date(Date.now()-864e6).toISOString(),updatedAt:new Date().toISOString()}],l=[...s,...i];localStorage.setItem(oe.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(l))}const r=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_REQUESTS)||"[]");if(!r.some(i=>i.supplierId===e)){const i=[{id:"SR-demo-1",supplierId:e,customerId:"cust-001",customerName:"  ",partNumber:"CN-BRK-001",partName:"  ",quantity:20,status:"NEW",urgency:"HIGH",deadline:new Date(Date.now()+2592e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString()},{id:"SR-demo-2",supplierId:e,customerId:"cust-002",customerName:"  ",partNumber:"MG-FLT-002",partName:"  MG",quantity:50,status:"NEW",urgency:"MEDIUM",deadline:new Date(Date.now()+432e6).toISOString(),createdAt:new Date(Date.now()-18e6).toISOString()},{id:"SR-demo-3",supplierId:e,customerId:"cust-003",customerName:"  ",partNumber:"GL-RAD-003",partName:" ",quantity:5,status:"QUOTED",quotedPrice:3e3,stockAvailable:5,urgency:"NORMAL",respondedAt:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-2592e5).toISOString()},{id:"SR-demo-4",supplierId:e,customerId:"cust-004",customerName:"  ",partNumber:"HV-SUSP-004",partName:"  H6",quantity:10,status:"ACCEPTED",quotedPrice:4200,stockAvailable:10,urgency:"HIGH",respondedAt:new Date(Date.now()-432e6).toISOString(),createdAt:new Date(Date.now()-6048e5).toISOString()},{id:"SR-demo-5",supplierId:e,customerId:"cust-005",customerName:"  ",partNumber:"CN-ALT-005",partName:" ",quantity:2,status:"REJECTED",notes:"  ",urgency:"URGENT",respondedAt:new Date(Date.now()-1728e5).toISOString(),createdAt:new Date(Date.now()-3456e5).toISOString()}],l=[...r,...i];localStorage.setItem(oe.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(l))}},async getSupplierDashboard(e){await Bt(50),this.initializeSupplierDemoData(e);const s=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]"),a=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_REQUESTS)||"[]"),r=s.filter(p=>p.supplierId===e),n=a.filter(p=>p.supplierId===e),i=new Date().toISOString().split("T")[0],l=n.filter(p=>p.createdAt.startsWith(i)),o=n.filter(p=>p.status==="QUOTED"),d=n.filter(p=>p.status==="ACCEPTED"),u=n.filter(p=>p.status==="REJECTED"),h=n.filter(p=>p.status==="NEW"||p.status==="VIEWED");let f=0,x=0;return o.forEach(p=>{if(p.respondedAt&&p.createdAt){const v=new Date(p.createdAt).getTime(),b=new Date(p.respondedAt).getTime();f+=(b-v)/(1e3*60*60),x++}}),{totalProducts:r.length,activeProducts:r.filter(p=>p.isActive).length,inactiveProducts:r.filter(p=>!p.isActive).length,requestsAssignedToday:l.length,quotesSubmitted:o.length,quotesAccepted:d.length,quotesRejected:u.length,pendingRequests:h.length,averageResponseTime:x>0?Math.round(f/x):0,supplierRating:4.2,totalRevenue:d.reduce((p,v)=>p+(v.quotedPrice||0),0),thisMonthRevenue:d.filter(p=>{var v;return(v=p.respondedAt)==null?void 0:v.startsWith(new Date().toISOString().slice(0,7))}).reduce((p,v)=>p+(v.quotedPrice||0),0)}},async getSupplierSettings(e){await Bt(30);const a=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_SETTINGS)||"[]").find(r=>r.supplierId===e);return a||{id:`SS-${e}`,supplierId:e,defaultPriceMarkup:10,defaultDeliveryTime:3,autoResponseEnabled:!1,notifyOnNewRequest:!0,notifyOnQuoteAccepted:!0,notifyOnDeadlineApproaching:!0}},async updateSupplierSettings(e,s){await Bt(50);const a=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_SETTINGS)||"[]"),r=a.findIndex(i=>i.supplierId===e);let n;return r!==-1?(a[r]={...a[r],...s},n=a[r]):(n={id:`SS-${e}`,supplierId:e,defaultPriceMarkup:10,defaultDeliveryTime:3,autoResponseEnabled:!1,notifyOnNewRequest:!0,notifyOnQuoteAccepted:!0,notifyOnDeadlineApproaching:!0,...s},a.push(n)),localStorage.setItem(oe.SUPPLIER_PORTAL_SETTINGS,JSON.stringify(a)),bt({eventType:"SETTINGS_UPDATED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"USER",entityId:e,description:"  ",metadata:{updates:Object.keys(s)}}),n},async createSupplierRequest(e){await Bt(30);const s=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_REQUESTS)||"[]"),a={id:`SR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s.push(a),localStorage.setItem(oe.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(s)),HO({userId:e.supplierId,type:"SUPPLIER_REQUEST_ASSIGNED",title:"  ",message:`    : ${e.partName||e.partNumber}`,relatedType:"REQUEST",relatedId:a.id,link:"/supplier/requests"}),a},async getSupplierPortalProfile(e){await Bt(30);const a=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(o=>o.id===e);if(!a||!a.isSupplier)return null;const r=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]"),n=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_REQUESTS)||"[]"),i=r.filter(o=>o.supplierId===e),l=n.filter(o=>o.supplierId===e);return{userId:e,supplierType:a.extendedRole==="SUPPLIER_INTERNATIONAL"?"INTERNATIONAL":"LOCAL",supplierCompanyName:a.name||"",supplierVat:"",supplierCrNumber:"",supplierRating:4.2,supplierActiveProductsCount:i.filter(o=>o.isActive).length,supplierTotalQuotesSubmitted:l.filter(o=>o.status==="QUOTED").length,supplierTotalQuotesAccepted:l.filter(o=>o.status==="ACCEPTED").length,supplierJoinedAt:new Date().toISOString(),supplierStatus:"ACTIVE",contactEmail:a.email,contactPhone:a.phone}},async getSupplierProductCategories(e){const s=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]");return[...new Set(s.filter(r=>r.supplierId===e).map(r=>r.category))].filter(Boolean)},async getSupplierProductBrands(e){const s=JSON.parse(localStorage.getItem(oe.SUPPLIER_PORTAL_PRODUCTS)||"[]");return[...new Set(s.filter(r=>r.supplierId===e).map(r=>r.brand))].filter(Boolean)},async logTraderToolAction(e,s,a,r,n){await Bt(10);const i=JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]"),o=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(h=>h.id===e),d={id:`TTA-${Date.now()}-${Math.floor(Math.random()*1e3)}`,customerId:e,customerName:(o==null?void 0:o.name)||" ",toolType:s,inputData:a,outputData:r,inputFileUrl:n==null?void 0:n.inputFileUrl,inputFileName:n==null?void 0:n.inputFileName,outputFileUrl:n==null?void 0:n.outputFileUrl,outputFileName:n==null?void 0:n.outputFileName,createdAt:new Date().toISOString(),createdFromIp:"192.168.1."+Math.floor(Math.random()*255),deviceType:"WEB",status:(n==null?void 0:n.status)||"SUCCESS",errorMessage:n==null?void 0:n.errorMessage,processingTimeMs:n==null?void 0:n.processingTimeMs,metadata:n==null?void 0:n.metadata};i.push(d),localStorage.setItem(oe.TRADER_TOOL_ACTIONS,JSON.stringify(i));const u={VIN:"  VIN",PDF_EXCEL:"  PDF  Excel",COMPARISON:"  ",ALTERNATIVES:"  ",SEARCH:"   ",EXCEL_QUOTE:"   Excel"};return bt({eventType:"TRADER_TOOL_USED",userId:e,userName:o==null?void 0:o.name,role:(o==null?void 0:o.role)||"CUSTOMER_OWNER",entityType:"TRADER_TOOL",entityId:d.id,description:` ${u[s]}`,metadata:{toolType:s,status:d.status,inputSummary:JSON.stringify(a).substring(0,200)}}),d},async getTraderToolActionsAdmin(e){await Bt(30);let s=JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]");if(s=s.filter(x=>!x.isDeleted),e.customerId&&(s=s.filter(x=>x.customerId===e.customerId)),e.toolType&&e.toolType!=="ALL"&&(s=s.filter(x=>x.toolType===e.toolType)),e.status&&e.status!=="ALL"&&(s=s.filter(x=>x.status===e.status)),e.deviceType&&e.deviceType!=="ALL"&&(s=s.filter(x=>x.deviceType===e.deviceType)),e.dateFrom&&(s=s.filter(x=>x.createdAt>=e.dateFrom)),e.dateTo&&(s=s.filter(x=>x.createdAt<=e.dateTo)),e.hasFiles!==void 0&&(e.hasFiles?s=s.filter(x=>x.inputFileUrl||x.outputFileUrl):s=s.filter(x=>!x.inputFileUrl&&!x.outputFileUrl)),e.search){const x=e.search.toLowerCase();s=s.filter(p=>{var v,b,y,j,w,S,O,_,E;return((v=p.customerName)==null?void 0:v.toLowerCase().includes(x))||((b=p.inputFileName)==null?void 0:b.toLowerCase().includes(x))||((y=p.outputFileName)==null?void 0:y.toLowerCase().includes(x))||((w=(j=p.metadata)==null?void 0:j.vin)==null?void 0:w.toLowerCase().includes(x))||((O=(S=p.metadata)==null?void 0:S.partNumber)==null?void 0:O.toLowerCase().includes(x))||((E=(_=p.metadata)==null?void 0:_.searchQuery)==null?void 0:E.toLowerCase().includes(x))||JSON.stringify(p.inputData).toLowerCase().includes(x)})}const a=s.length,r={VIN:s.filter(x=>x.toolType==="VIN").length,PDF_EXCEL:s.filter(x=>x.toolType==="PDF_EXCEL").length,COMPARISON:s.filter(x=>x.toolType==="COMPARISON").length,ALTERNATIVES:s.filter(x=>x.toolType==="ALTERNATIVES").length,SEARCH:s.filter(x=>x.toolType==="SEARCH").length,EXCEL_QUOTE:s.filter(x=>x.toolType==="EXCEL_QUOTE").length},n={SUCCESS:s.filter(x=>x.status==="SUCCESS").length,FAILED:s.filter(x=>x.status==="FAILED").length,PENDING:s.filter(x=>x.status==="PENDING").length,PROCESSING:s.filter(x=>x.status==="PROCESSING").length},i=a>0?n.SUCCESS/a*100:0,l=e.sortBy||"createdAt",o=e.sortDirection||"desc";s.sort((x,p)=>{let v=0;switch(l){case"createdAt":v=new Date(x.createdAt).getTime()-new Date(p.createdAt).getTime();break;case"toolType":v=x.toolType.localeCompare(p.toolType);break;case"status":v=x.status.localeCompare(p.status);break;case"customerName":v=(x.customerName||"").localeCompare(p.customerName||"");break}return o==="asc"?v:-v});const d=e.page||1,u=e.pageSize||20,h=(d-1)*u;return{items:s.slice(h,h+u),total:a,page:d,pageSize:u,summary:{total:a,byToolType:r,byStatus:n,successRate:i}}},async getTraderToolActionById(e){return await Bt(10),JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]").find(a=>a.id===e&&!a.isDeleted)||null},async deleteTraderToolAction(e){await Bt(10);const s=JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]"),a=s.findIndex(r=>r.id===e);return a!==-1?(s[a].isDeleted=!0,localStorage.setItem(oe.TRADER_TOOL_ACTIONS,JSON.stringify(s)),bt({eventType:"ADMIN_ACTION",userId:"super-admin",userName:" ",role:"SUPER_ADMIN",entityType:"TRADER_TOOL",entityId:e,description:`   : ${e}`,metadata:{}}),!0):!1},async getTraderToolActionsCustomer(e,s){await Bt(20);let a=JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]");a=a.filter(d=>d.customerId===e&&!d.isDeleted),s.toolType&&s.toolType!=="ALL"&&(a=a.filter(d=>d.toolType===s.toolType)),s.status&&s.status!=="ALL"&&(a=a.filter(d=>d.status===s.status)),s.dateFrom&&(a=a.filter(d=>d.createdAt>=s.dateFrom)),s.dateTo&&(a=a.filter(d=>d.createdAt<=s.dateTo)),a.sort((d,u)=>new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime());const r=a.length,n=s.page||1,i=s.pageSize||20,l=(n-1)*i;return{items:a.slice(l,l+i),total:r,page:n,pageSize:i}},async exportTraderToolActions(e){return await Bt(30),(await this.getTraderToolActionsAdmin({...e,page:1,pageSize:1e4})).items.map(a=>({id:a.id,customerId:a.customerId,customerName:a.customerName||"",toolType:a.toolType,inputSummary:JSON.stringify(a.inputData).substring(0,200),outputSummary:a.outputData?JSON.stringify(a.outputData).substring(0,200):"",status:a.status,deviceType:a.deviceType,createdAt:a.createdAt,hasInputFile:!!a.inputFileUrl,hasOutputFile:!!a.outputFileUrl}))},async getTraderToolsUsageReport(e,s,a,r){await Bt(50);let n=JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]");n=n.filter(_=>!_.isDeleted);const i=new Date;let l,o=i;if(s&&a)l=new Date(s),o=new Date(a);else switch(e){case"day":l=new Date(i.getFullYear(),i.getMonth(),i.getDate());break;case"week":l=new Date(i.getTime()-10080*60*1e3);break;case"month":l=new Date(i.getFullYear(),i.getMonth(),1);break;case"quarter":l=new Date(i.getFullYear(),Math.floor(i.getMonth()/3)*3,1);break;case"year":l=new Date(i.getFullYear(),0,1);break}if(n=n.filter(_=>{const E=new Date(_.createdAt);return E>=l&&E<=o}),r){const E=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]").filter(A=>A.customerType===r).map(A=>A.userId);n=n.filter(A=>E.includes(A.customerId))}const d=n.length,u=new Set(n.map(_=>_.customerId)).size,h=n.filter(_=>_.status==="SUCCESS").length,f=d>0?h/d*100:0,p=["VIN","PDF_EXCEL","COMPARISON","ALTERNATIVES","SEARCH","EXCEL_QUOTE"].map(_=>{const E=n.filter(B=>B.toolType===_),A=E.filter(B=>B.status==="SUCCESS"),D=E.filter(B=>B.status==="FAILED"),L=E.reduce((B,I)=>B+(I.processingTimeMs||0),0);return{toolType:_,count:E.length,successCount:A.length,failedCount:D.length,avgProcessingTime:E.length>0?L/E.length:0}}),v=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),b=new Map;n.forEach(_=>{const E=v.find(D=>D.userId===_.customerId),A=(E==null?void 0:E.customerType)||" ";b.set(A,(b.get(A)||0)+1)});const y=Array.from(b.entries()).map(([_,E])=>({customerType:_,count:E})),j=new Map;n.forEach(_=>{const E=_.createdAt.split("T")[0];j.set(E,(j.get(E)||0)+1)});const w=Array.from(j.entries()).map(([_,E])=>({date:_,count:E})).sort((_,E)=>_.date.localeCompare(E.date)),S=new Map;n.forEach(_=>{const E=S.get(_.customerId);E?E.count++:S.set(_.customerId,{name:_.customerName||" ",count:1})});const O=Array.from(S.entries()).map(([_,E])=>({customerId:_,customerName:E.name,usageCount:E.count})).sort((_,E)=>E.usageCount-_.usageCount).slice(0,10);return{period:e,dateFrom:l.toISOString(),dateTo:o.toISOString(),totalActions:d,uniqueCustomers:u,successRate:f,byToolType:p,byCustomerType:y,byDate:w,topCustomers:O}},async initializeTraderToolsDemoData(e){await Bt(10);const s=JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]");if(s.some(l=>l.customerId===e))return;const r=JSON.parse(localStorage.getItem(oe.USERS)||"[]").find(l=>l.id===e),n=(r==null?void 0:r.name)||" ",i=[{id:`TTA-demo-${e}-1`,customerId:e,customerName:n,toolType:"VIN",inputData:{imageFile:"vin_photo.jpg"},outputData:{vin:"JT2BG22K0W0012345",manufacturer:"Toyota",year:"2022"},createdAt:new Date(Date.now()-2880*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:2340,metadata:{vin:"JT2BG22K0W0012345",manufacturer:"Toyota",model:"Camry",year:"2022",confidence:94}},{id:`TTA-demo-${e}-2`,customerId:e,customerName:n,toolType:"PDF_EXCEL",inputData:{fileName:"price_list.pdf",pageCount:5},outputData:{rows:150,columns:8},inputFileName:"price_list.pdf",outputFileName:"price_list.xlsx",createdAt:new Date(Date.now()-1440*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:8750,metadata:{rowCount:150,columnCount:8,pageCount:5}},{id:`TTA-demo-${e}-3`,customerId:e,customerName:n,toolType:"COMPARISON",inputData:{partNumber:"CN-102030"},outputData:{suppliersCount:5,lowestPrice:120,highestPrice:180},createdAt:new Date(Date.now()-720*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:1560,metadata:{partNumber:"CN-102030",partName:" ",suppliersCount:5,lowestPrice:120,highestPrice:180}},{id:`TTA-demo-${e}-4`,customerId:e,customerName:n,toolType:"SEARCH",inputData:{query:"  "},outputData:{resultsCount:12},createdAt:new Date(Date.now()-360*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:890,metadata:{searchQuery:"  ",resultsCount:12}},{id:`TTA-demo-${e}-5`,customerId:e,customerName:n,toolType:"EXCEL_QUOTE",inputData:{fileName:"parts_request.xlsx",itemsCount:25},outputData:{processedItems:25,quotedTotal:15750},inputFileName:"parts_request.xlsx",createdAt:new Date(Date.now()-10800*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:4200,metadata:{itemsCount:25,quotedTotal:15750}}];s.push(...i),localStorage.setItem(oe.TRADER_TOOL_ACTIONS,JSON.stringify(s))},async getCustomerToolUsageSummary(e){var i;await Bt(10);let s=JSON.parse(localStorage.getItem(oe.TRADER_TOOL_ACTIONS)||"[]");s=s.filter(l=>l.customerId===e&&!l.isDeleted);const a={VIN:s.filter(l=>l.toolType==="VIN").length,PDF_EXCEL:s.filter(l=>l.toolType==="PDF_EXCEL").length,COMPARISON:s.filter(l=>l.toolType==="COMPARISON").length,ALTERNATIVES:s.filter(l=>l.toolType==="ALTERNATIVES").length,SEARCH:s.filter(l=>l.toolType==="SEARCH").length,EXCEL_QUOTE:s.filter(l=>l.toolType==="EXCEL_QUOTE").length};s.sort((l,o)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime());let r,n=0;return Object.entries(a).forEach(([l,o])=>{o>n&&(n=o,r=l)}),{totalUsage:s.length,byToolType:a,lastUsed:(i=s[0])==null?void 0:i.createdAt,mostUsedTool:r}},async getFeedbackSettings(){await Bt(10);const e=localStorage.getItem(oe.FEEDBACK_SETTINGS);if(e)return JSON.parse(e);const s={enabled:!0,showForRoles:["CUSTOMER","SUPPLIER","MARKETER","EMPLOYEE","ADMIN"],defaultCategory:"SUGGESTION",defaultPriority:"MEDIUM",allowGuestFeedback:!0};return localStorage.setItem(oe.FEEDBACK_SETTINGS,JSON.stringify(s)),s},async saveFeedbackSettings(e){await Bt(50),localStorage.setItem(oe.FEEDBACK_SETTINGS,JSON.stringify(e))},async createFeedback(e,s,a,r,n){await Bt(100);const i=JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]"),l=await this.getFeedbackSettings();let o="CUSTOMER";n==="ADMIN"||n==="SUPER_ADMIN"?o="ADMIN":n==="EMPLOYEE"||n==="CUSTOMER_STAFF"?o="EMPLOYEE":n.includes("SUPPLIER")?o="SUPPLIER":n==="MARKETER"&&(o="MARKETER");const d=new Date().toISOString(),u={id:`FB-${Date.now()}-${Math.floor(Math.random()*1e3)}`,senderUserId:s,senderName:a,senderContact:e.senderContact||r,senderType:o,pageContext:e.pageContext,category:e.category,priority:e.priority,subject:e.subject,message:e.message,status:"NEW",adminAssignedId:l.assignedDefaultAdminId||null,createdAt:d,updatedAt:d};i.push(u),localStorage.setItem(oe.FEEDBACK,JSON.stringify(i)),bt({userId:s,userName:a,role:n,eventType:"CREATE",entityType:"FEEDBACK",entityId:u.id,description:`  : ${e.subject}`,metadata:{category:e.category,priority:e.priority}});const h=cu(),f=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]");return h.forEach(x=>{const p={id:`NOTIF-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:x,type:"SYSTEM",title:" ",message:`   ${a}: ${e.subject}`,isRead:!1,createdAt:d,metadata:{feedbackId:u.id,category:e.category}};f.push(p)}),localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(f)),{success:!0,feedbackId:u.id}},async createPublicFeedback(e){await Bt(100);const s=JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]"),a=await this.getFeedbackSettings(),r=new Date().toISOString(),n={id:`FB-${Date.now()}-${Math.floor(Math.random()*1e3)}`,senderUserId:null,senderName:e.senderName,senderContact:e.senderContact,senderType:"GUEST",pageContext:e.pageContext,category:e.category,priority:e.priority,subject:e.subject,message:e.message,status:"NEW",adminAssignedId:a.assignedDefaultAdminId||null,createdAt:r,updatedAt:r};return s.push(n),localStorage.setItem(oe.FEEDBACK,JSON.stringify(s)),bt({userId:"guest",userName:e.senderName,role:"GUEST",eventType:"CREATE",entityType:"FEEDBACK",entityId:n.id,description:`  : ${e.subject}`,metadata:{category:e.category,priority:e.priority}}),{success:!0,feedbackId:n.id}},async getAdminFeedbackList(e){await Bt(50);let s=JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]");if(e.status&&(s=s.filter(o=>o.status===e.status)),e.category&&(s=s.filter(o=>o.category===e.category)),e.senderType&&(s=s.filter(o=>o.senderType===e.senderType)),e.assignedTo&&(s=s.filter(o=>o.adminAssignedId===e.assignedTo)),e.dateFrom&&(s=s.filter(o=>new Date(o.createdAt)>=new Date(e.dateFrom))),e.dateTo&&(s=s.filter(o=>new Date(o.createdAt)<=new Date(e.dateTo))),e.search){const o=e.search.toLowerCase();s=s.filter(d=>d.subject.toLowerCase().includes(o)||d.message.toLowerCase().includes(o)||d.senderName.toLowerCase().includes(o))}s.sort((o,d)=>new Date(d.createdAt).getTime()-new Date(o.createdAt).getTime());const a=e.page||1,r=e.pageSize||20,n=s.length,i=(a-1)*r;return{items:s.slice(i,i+r),page:a,pageSize:r,total:n}},async getFeedbackById(e){return await Bt(10),JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]").find(a=>a.id===e)||null},async updateFeedback(e,s,a,r){await Bt(50);const n=JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]"),i=n.findIndex(d=>d.id===e);if(i===-1)return null;const l=n[i],o={...l,...s,updatedAt:new Date().toISOString()};if(n[i]=o,localStorage.setItem(oe.FEEDBACK,JSON.stringify(n)),s.status&&s.status!==l.status&&(bt({userId:a,userName:r,role:"ADMIN",eventType:"UPDATE",entityType:"FEEDBACK",entityId:e,description:`    : ${s.status}`,metadata:{oldStatus:l.status,newStatus:s.status}}),s.status==="RESOLVED"&&l.senderUserId)){const d={id:`NOTIF-${Date.now()}`,userId:l.senderUserId,type:"SYSTEM",title:"  ",message:`  : ${l.subject}`,isRead:!1,createdAt:new Date().toISOString(),metadata:{feedbackId:e}},u=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]");u.push(d),localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(u))}return o},async deleteFeedback(e){await Bt(50);let s=JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]");const a=s.findIndex(r=>r.id===e);return a===-1?!1:(s[a].status="DISMISSED",s[a].updatedAt=new Date().toISOString(),localStorage.setItem(oe.FEEDBACK,JSON.stringify(s)),!0)},async getFeedbackReplies(e){return await Bt(10),JSON.parse(localStorage.getItem(oe.FEEDBACK_REPLIES)||"[]").filter(a=>a.feedbackId===e).sort((a,r)=>new Date(a.createdAt).getTime()-new Date(r.createdAt).getTime())},async addFeedbackReply(e,s,a,r){await Bt(50);const n=JSON.parse(localStorage.getItem(oe.FEEDBACK_REPLIES)||"[]"),i={id:`FBR-${Date.now()}`,feedbackId:e,senderUserId:a,senderName:r,message:s,createdAt:new Date().toISOString()};n.push(i),localStorage.setItem(oe.FEEDBACK_REPLIES,JSON.stringify(n));const l=JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]"),o=l.findIndex(d=>d.id===e);return o!==-1&&(l[o].updatedAt=new Date().toISOString(),localStorage.setItem(oe.FEEDBACK,JSON.stringify(l))),i},async getFeedbackStats(){await Bt(10);const e=JSON.parse(localStorage.getItem(oe.FEEDBACK)||"[]"),s=new Date,a=new Date(s.getTime()-10080*60*1e3),r=new Date(s.getTime()-720*60*60*1e3),n={NEW:0,IN_REVIEW:0,RESOLVED:0,DISMISSED:0},i={BUG:0,SUGGESTION:0,COMPLAINT:0,QUESTION:0,OTHER:0},l={CUSTOMER:0,SUPPLIER:0,MARKETER:0,EMPLOYEE:0,ADMIN:0,GUEST:0};let o=0,d=0;return e.forEach(u=>{n[u.status]++,i[u.category]++,l[u.senderType]++;const h=new Date(u.createdAt);h>=a&&o++,h>=r&&d++}),{total:e.length,byStatus:n,byCategory:i,bySenderType:l,thisWeek:o,thisMonth:d}},async exportFeedbackToCsv(e){await Bt(50);const s=await this.getAdminFeedbackList({...e,page:1,pageSize:1e4}),a=["ID","Date","Sender","Contact","Type","Category","Priority","Subject","Status","Assigned To"],r=s.items.map(i=>[i.id,new Date(i.createdAt).toLocaleDateString("ar-SA"),i.senderName,i.senderContact,i.senderType,i.category,i.priority,i.subject.replace(/,/g,";"),i.status,i.adminAssignedId||"-"]);return[a.join(","),...r.map(i=>i.join(","))].join(`
`)},async createPartnerRequest(e){await Bt(100);const s=JSON.parse(localStorage.getItem("partner_requests")||"[]"),a={id:`PR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,...e,status:"NEW",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.push(a),localStorage.setItem("partner_requests",JSON.stringify(s)),bt({userId:"guest",userName:e.companyName||e.fullName||" ",role:"GUEST",eventType:"CREATE",entityType:"PARTNER_REQUEST",entityId:a.id,description:`  : ${e.type}`,metadata:{type:e.type,phone:e.phone}});const r=cu(),n=JSON.parse(localStorage.getItem(oe.NOTIFICATIONS)||"[]"),i={LOCAL_SUPPLIER:" ",INTERNATIONAL_SUPPLIER:" ",MARKETER:"",ADVERTISER:""};return r.forEach(l=>{const o={id:`NOTIF-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:l,type:"SYSTEM",title:"  ",message:`   ${i[e.type]||e.type}: ${e.companyName||e.fullName}`,isRead:!1,createdAt:new Date().toISOString(),metadata:{partnerRequestId:a.id,type:e.type}};n.push(o)}),localStorage.setItem(oe.NOTIFICATIONS,JSON.stringify(n)),a},async checkPartnerRequestStatus(e,s){await Bt(100);const r=JSON.parse(localStorage.getItem("partner_requests")||"[]").find(i=>i.phone===e&&i.password===s);if(!r)throw new Error("      ");return{NEW:{status:"NEW",message:"     "},UNDER_REVIEW:{status:"UNDER_REVIEW",message:"      "},APPROVED:{status:"APPROVED",message:"   !    "},REJECTED:{status:"REJECTED",message:`  . : ${r.rejectionReason||" "}`},NEEDS_MODIFICATION:{status:"NEEDS_MODIFICATION",message:`  : ${r.modificationNote||"  "}`}}[r.status]||{status:r.status,message:"  "}},async getPartnerRequests(e){await Bt(50);let s=JSON.parse(localStorage.getItem("partner_requests")||"[]");if(e!=null&&e.type&&e.type!=="ALL"&&(s=s.filter(o=>o.type===e.type)),e!=null&&e.status&&e.status!=="ALL"&&(s=s.filter(o=>o.status===e.status)),e!=null&&e.search){const o=e.search.toLowerCase();s=s.filter(d=>(d.companyName||"").toLowerCase().includes(o)||(d.fullName||"").toLowerCase().includes(o)||(d.phone||"").includes(o))}s.sort((o,d)=>new Date(d.createdAt).getTime()-new Date(o.createdAt).getTime());const a=s.length,r=(e==null?void 0:e.page)||1,n=(e==null?void 0:e.pageSize)||20,i=(r-1)*n;return{items:s.slice(i,i+n),total:a,page:r,pageSize:n}},async getPartnerRequestById(e){return await Bt(10),JSON.parse(localStorage.getItem("partner_requests")||"[]").find(a=>a.id===e)||null},async updatePartnerRequestStatus(e,s,a,r,n){await Bt(50);const i=JSON.parse(localStorage.getItem("partner_requests")||"[]"),l=i.findIndex(d=>d.id===e);if(l===-1)return null;const o=i[l];return i[l]={...o,status:s,adminNotes:a||o.adminNotes,rejectionReason:r||o.rejectionReason,modificationNote:n||o.modificationNote,reviewedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},localStorage.setItem("partner_requests",JSON.stringify(i)),bt({userId:"admin",userName:"",role:"ADMIN",eventType:"UPDATE",entityType:"PARTNER_REQUEST",entityId:e,description:`     : ${s}`,metadata:{oldStatus:o.status,newStatus:s}}),i[l]},async approvePartnerRequest(e,s){await Bt(100);const a=JSON.parse(localStorage.getItem("partner_requests")||"[]"),r=a.findIndex(d=>d.id===e);if(r===-1)throw new Error("  ");const n=a[r],i=JSON.parse(localStorage.getItem(oe.USERS)||"[]");let l;switch(n.type){case"LOCAL_SUPPLIER":l="SUPPLIER_LOCAL";break;case"INTERNATIONAL_SUPPLIER":l="SUPPLIER_INTERNATIONAL";break;case"MARKETER":l="MARKETER";break;case"ADVERTISER":l="ADVERTISER";break;default:l="SUPPLIER"}const o={id:`user-${Date.now()}`,username:n.phone,password:n.password,name:n.companyName||n.fullName,role:l,status:"ACTIVE",permissions:s||{},createdAt:new Date().toISOString(),partnerRequestId:e};if(i.push(o),localStorage.setItem(oe.USERS,JSON.stringify(i)),a[r]={...n,status:"APPROVED",approvedAt:new Date().toISOString(),createdUserId:o.id,updatedAt:new Date().toISOString()},localStorage.setItem("partner_requests",JSON.stringify(a)),n.type==="LOCAL_SUPPLIER"){const d=JSON.parse(localStorage.getItem(oe.PROFILES)||"[]"),u={userId:o.id,companyName:n.companyName,city:n.city,commercialRegNumber:n.commercialRegNumber,vatNumber:n.vatNumber,nationalAddress:n.nationalAddressNumber,phone:n.phone,status:"ACTIVE",carBrands:n.carBrands||[],ownBrands:n.ownBrands||[],isSupplier:!0,searchPointsBalance:(s==null?void 0:s.searchPoints)||100,createdAt:new Date().toISOString()};d.push(u),localStorage.setItem(oe.PROFILES,JSON.stringify(d))}return bt({userId:"admin",userName:"",role:"ADMIN",eventType:"CREATE",entityType:"USER",entityId:o.id,description:`      : ${o.name}`,metadata:{type:n.type,phone:n.phone}}),{user:o,request:a[r]}},async getPartnerRequestsStats(){await Bt(10);const e=JSON.parse(localStorage.getItem("partner_requests")||"[]"),s=new Date,a=new Date(s.getTime()-10080*60*1e3),r=new Date(s.getTime()-720*60*60*1e3),n={LOCAL_SUPPLIER:0,INTERNATIONAL_SUPPLIER:0,MARKETER:0,ADVERTISER:0},i={NEW:0,UNDER_REVIEW:0,APPROVED:0,REJECTED:0,NEEDS_MODIFICATION:0};let l=0,o=0;return e.forEach(d=>{n[d.type]!==void 0&&n[d.type]++,i[d.status]!==void 0&&i[d.status]++;const u=new Date(d.createdAt);u>=a&&l++,u>=r&&o++}),{total:e.length,byType:n,byStatus:i,thisWeek:l,thisMonth:o}},async getOrderShortages(){return await Bt(10),JSON.parse(localStorage.getItem(oe.ORDER_SHORTAGES)||"[]")},async createOrderShortage(e){await Bt(10);const s=JSON.parse(localStorage.getItem(oe.ORDER_SHORTAGES)||"[]"),a=new Date().toISOString(),r={id:`shortage-${Date.now()}`,...e,status:"NEW",statusHistory:[{status:"NEW",changedAt:a,changedBy:"System",notes:"     "}],internalNotes:"",expectedDeliveryDate:new Date(Date.now()+e.deliveryHours*60*60*1e3).toISOString(),isNew:!0,createdAt:a,updatedAt:a};return s.push(r),localStorage.setItem(oe.ORDER_SHORTAGES,JSON.stringify(s)),lr({targetUserId:"all_admins",type:"SYSTEM",title:" ",message:`   ${e.customerName}: ${e.productName}`,category:"ORDER",priority:"HIGH"}),r},async updateOrderShortageStatus(e,s,a,r="Admin"){await Bt(10);const n=JSON.parse(localStorage.getItem(oe.ORDER_SHORTAGES)||"[]"),i=n.findIndex(d=>d.id===e);if(i===-1)return!1;const l=new Date().toISOString(),o=n[i];return o.status=s,o.updatedAt=l,o.isNew=!1,o.statusHistory.push({status:s,changedAt:l,changedBy:r,notes:a}),s==="DELIVERED"&&(o.actualDeliveryDate=l),n[i]=o,localStorage.setItem(oe.ORDER_SHORTAGES,JSON.stringify(n)),bt({userId:"admin",userName:r,role:"ADMIN",eventType:"UPDATE",entityType:"ORDER",entityId:e,description:`     ${s}`,metadata:{shortageId:e,newStatus:s,notes:a}}),!0},async getOrderShortagesStats(){const e=await this.getOrderShortages();return{total:e.length,new:e.filter(s=>s.status==="NEW").length,contacting:e.filter(s=>s.status==="CONTACTING").length,preparing:e.filter(s=>s.status==="PREPARING"||s.status==="CONFIRMED").length,received:e.filter(s=>s.status==="RECEIVED").length,delivered:e.filter(s=>s.status==="DELIVERED").length,cancelled:e.filter(s=>s.status==="CANCELLED").length}},async markOrderShortagesAsSeen(){const e=JSON.parse(localStorage.getItem(oe.ORDER_SHORTAGES)||"[]");e.forEach(s=>{s.isNew=!1}),localStorage.setItem(oe.ORDER_SHORTAGES,JSON.stringify(e))}};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nte=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,r)=>r?r.toUpperCase():a.toLowerCase()),GO=e=>{const s=Nte(e);return s.charAt(0).toUpperCase()+s.slice(1)},iF=(...e)=>e.filter((s,a,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===a).join(" ").trim(),jte=e=>{for(const s in e)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=C.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:l,...o},d)=>C.createElement("svg",{ref:d,...wte,width:s,height:s,stroke:e,strokeWidth:r?Number(a)*24/Number(s):a,className:iF("lucide",n),...!i&&!jte(o)&&{"aria-hidden":"true"},...o},[...l.map(([u,h])=>C.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(e,s)=>{const a=C.forwardRef(({className:r,...n},i)=>C.createElement(Ste,{ref:i,iconNode:s,className:iF(`lucide-${yte(GO(e))}`,`lucide-${e}`,r),...n}));return a.displayName=GO(e),a};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Wr=De("activity",Ate);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=[["path",{d:"M12 6v16",key:"nqf5sj"}],["path",{d:"m19 13 2-1a9 9 0 0 1-18 0l2 1",key:"y7qv08"}],["path",{d:"M9 11h6",key:"1fldmi"}],["circle",{cx:"12",cy:"4",r:"2",key:"muu5ef"}]],lF=De("anchor",Ete);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],_u=De("archive",Cte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],_te=De("arrow-left-right",Tte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kte=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yf=De("arrow-left",kte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sl=De("arrow-right",Ote);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Rte=De("arrow-up-down",Ite);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],zS=De("award",Pte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],Mte=De("badge-dollar-sign",Dte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$p=De("ban",Lte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Nr=De("bell",Fte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Kx=De("book-open",Ute);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ln=De("bot",zte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Vc=De("box",Bte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],oF=De("brain",$te);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Fu=De("briefcase",qte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],cF=De("bug",Hte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ta=De("building-2",Vte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],dF=De("building",Gte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],WO=De("calculator",Wte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hh=De("calendar",Qte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Jte=De("camera",Kte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Mi=De("car",Yte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Dr=De("chart-column",Xte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],ese=De("check-check",Zte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],es=De("check",tse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ir=De("chevron-down",sse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hs=De("chevron-right",ase);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ns=De("chevron-left",rse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Qr=De("chevron-up",nse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Cs=De("circle-alert",ise);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],uF=De("circle-arrow-down",lse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],BS=De("circle-arrow-up",ose);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mt=De("circle-check-big",cse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Un=De("circle-check",dse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const use=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],h0=De("circle-question-mark",use);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],fse=De("circle-stop",mse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sa=De("circle-x",hse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xse=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],yp=De("clipboard-list",xse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],is=De("clock",pse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],mF=De("code-xml",gse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bse=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],QO=De("code",bse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vse=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],yse=De("coins",vse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],jse=De("cog",Nse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qp=De("copy",wse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sse=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ab=De("credit-card",Sse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ase=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Wo=De("database",Ase);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ese=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],mr=De("dollar-sign",Ese);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cse=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],tr=De("download",Cse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fF=De("earth",Tse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],hF=De("ellipsis",_se);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ll=De("external-link",kse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ose=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dr=De("eye-off",Ose);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ise=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ns=De("eye",Ise);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["path",{d:"M13.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v11.5",key:"4pqfef"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 12v-1",key:"1ej8lb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M8 7V6",key:"1nbb54"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]],$S=De("file-archive",Rse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Dm=De("file-image",Pse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],rb=De("file-search",Dse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],yn=De("file-spreadsheet",Mse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zt=De("file-text",Lse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],qS=De("file",Fse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],zse=De("forward",Use);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bse=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sc=De("funnel",Bse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ea=De("globe",$se);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],KO=De("grip-vertical",qse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hse=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],Vse=De("handshake",Hse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gse=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Wse=De("hard-drive",Gse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],xF=De("hash",Qse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Nf=De("headphones",Kse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],gn=De("history",Jse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],nE=De("house",Yse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Li=De("image",Xse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mi=De("info",Zse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Gc=De("key",eae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tae=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],pF=De("languages",tae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Mr=De("layers",sae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],iE=De("layout-dashboard",aae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rae=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],nae=De("layout-grid",rae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Hp=De("lightbulb",iae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],HS=De("link-2",lae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ts=De("loader-circle",oae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],dae=De("lock-open",cae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uae=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],x1=De("lock-keyhole",uae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Sa=De("lock",mae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lE=De("log-out",fae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hae=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Fl=De("mail",hae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Qo=De("map-pin",xae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pae=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],gae=De("map-pinned",pae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],vae=De("maximize-2",bae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],ja=De("megaphone",yae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],gF=De("menu",Nae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ku=De("message-circle",jae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wae=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],JO=De("message-square-plus",wae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Rr=De("message-square",Sae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aae=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Eae=De("minimize-2",Aae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=[["path",{d:"M5 12h14",key:"1ays0h"}]],oE=De("minus",Cae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],bF=De("monitor",Tae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ae=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],YO=De("moon",_ae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],XO=De("move",kae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oae=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ZO=De("navigation",Oae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iae=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],Rae=De("package-plus",Iae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pae=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Yt=De("package",Pae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dae=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]],Mae=De("package-x",Dae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ko=De("palette",Lae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Wc=De("panels-top-left",Fae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],vF=De("pause",Uae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ql=De("pen-line",zae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ma=De("pen",Bae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Vp=De("pencil",$ae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Lo=De("percent",qae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Yr=De("phone",Hae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Uu=De("play",Vae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kt=De("plus",Gae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],zu=De("power-off",Wae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],id=De("power",Qae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Qc=De("printer",Kae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Yae=De("receipt",Jae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Jo=De("refresh-ccw",Xae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gt=De("refresh-cw",Zae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yF=De("rotate-ccw",ere);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],us=De("save",tre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sre=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Fo=De("scale",sre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const are=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],e5=De("search-x",are);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rre=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lt=De("search",rre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xi=De("send",nre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ire=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Gp=De("server",ire);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lre=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Jm=De("settings-2",lre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ore=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aa=De("settings",ore);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],jf=De("shield-alert",cre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fn=De("shield-check",dre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ure=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],mre=De("shield-x",ure);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Bs=De("shield",fre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hre=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],xre=De("ship",hre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pre=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Bu=De("shopping-bag",pre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gre=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qa=De("shopping-cart",gre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bre=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],vre=De("smartphone",bre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yre=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],pi=De("sparkles",yre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nre=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],p1=De("square-check-big",Nre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],wre=De("square-pen",jre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],t5=De("square",Sre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],Ere=De("star-off",Are);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],bn=De("star",Cre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],VS=De("sticky-note",Tre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],ld=De("store",_re);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ore=De("sun",kre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],cE=De("table",Ire);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],GS=De("tag",Rre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],NF=De("tags",Pre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xh=De("target",Dre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],wf=De("terminal",Mre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],vu=De("test-tube",Lre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],Ure=De("text-align-center",Fre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],Bre=De("text-align-end",zre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],qre=De("text-align-start",$re);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Ym=De("toggle-left",Hre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],At=De("trash-2",Vre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Wre=De("trending-down",Gre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gi=De("trending-up",Qre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ks=De("triangle-alert",Kre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fr=De("truck",Jre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],s5=De("type",Yre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],a5=De("undo-2",Xre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],ene=De("unlink",Zre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],va=De("upload",tne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],x0=De("user-check",sne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],al=De("user-plus",ane);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],yu=De("user-x",rne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nn=De("user",nne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wt=De("users",ine);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],one=De("volume-2",lne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],dne=De("wallet",cne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const une=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],mne=De("wand-sparkles",une);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fne=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],jF=De("warehouse",fne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hne=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],xne=De("webhook",hne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pne=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],gne=De("wifi",pne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bne=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],ac=De("wrench",bne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vne=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vt=De("x",vne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yne=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],wF=De("zoom-in",yne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nne=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],rl=De("zap",Nne),{slice:jne,forEach:wne}=[];function Sne(e){return wne.call(jne.call(arguments,1),s=>{if(s)for(const a in s)e[a]===void 0&&(e[a]=s[a])}),e}function Ane(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(a=>a.test(e))}const r5=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ene=function(e,s){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(s);let i=`${e}=${n}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!r5.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!r5.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},n5={create(e,s,a,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+a*60*1e3)),r&&(n.domain=r),document.cookie=Ene(e,s,n)},read(e){const s=`${e}=`,a=document.cookie.split(";");for(let r=0;r<a.length;r++){let n=a[r];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(s)===0)return n.substring(s.length,n.length)}return null},remove(e,s){this.create(e,"",-1,s)}};var Cne={name:"cookie",lookup(e){let{lookupCookie:s}=e;if(s&&typeof document<"u")return n5.read(s)||void 0},cacheUserLanguage(e,s){let{lookupCookie:a,cookieMinutes:r,cookieDomain:n,cookieOptions:i}=s;a&&typeof document<"u"&&n5.create(a,e,r,n,i)}},Tne={name:"querystring",lookup(e){var r;let{lookupQuerystring:s}=e,a;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const l=n.substring(1).split("&");for(let o=0;o<l.length;o++){const d=l[o].indexOf("=");d>0&&l[o].substring(0,d)===s&&(a=l[o].substring(d+1))}}return a}},_ne={name:"hash",lookup(e){var n;let{lookupHash:s,lookupFromHashIndex:a}=e,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const l=i.substring(1);if(s){const o=l.split("&");for(let d=0;d<o.length;d++){const u=o[d].indexOf("=");u>0&&o[d].substring(0,u)===s&&(r=o[d].substring(u+1))}}if(r)return r;if(!r&&a>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(n=o[typeof a=="number"?a:0])==null?void 0:n.replace("/",""):void 0}}}return r}};let du=null;const i5=()=>{if(du!==null)return du;try{if(du=typeof window<"u"&&window.localStorage!==null,!du)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{du=!1}return du};var kne={name:"localStorage",lookup(e){let{lookupLocalStorage:s}=e;if(s&&i5())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(e,s){let{lookupLocalStorage:a}=s;a&&i5()&&window.localStorage.setItem(a,e)}};let uu=null;const l5=()=>{if(uu!==null)return uu;try{if(uu=typeof window<"u"&&window.sessionStorage!==null,!uu)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{uu=!1}return uu};var One={name:"sessionStorage",lookup(e){let{lookupSessionStorage:s}=e;if(s&&l5())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(e,s){let{lookupSessionStorage:a}=s;a&&l5()&&window.sessionStorage.setItem(a,e)}},Ine={name:"navigator",lookup(e){const s=[];if(typeof navigator<"u"){const{languages:a,userLanguage:r,language:n}=navigator;if(a)for(let i=0;i<a.length;i++)s.push(a[i]);r&&s.push(r),n&&s.push(n)}return s.length>0?s:void 0}},Rne={name:"htmlTag",lookup(e){let{htmlTag:s}=e,a;const r=s||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(a=r.getAttribute("lang")),a}},Pne={name:"path",lookup(e){var n;let{lookupFromPathIndex:s}=e;if(typeof window>"u")return;const a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(n=a[typeof s=="number"?s:0])==null?void 0:n.replace("/",""):void 0}},Dne={name:"subdomain",lookup(e){var n,i;let{lookupFromSubdomainIndex:s}=e;const a=typeof s=="number"?s+1:1,r=typeof window<"u"&&((i=(n=window.location)==null?void 0:n.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[a]}};let SF=!1;try{document.cookie,SF=!0}catch{}const AF=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];SF||AF.splice(1,1);const Mne=()=>({order:AF,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class EF{constructor(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,a)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s,this.options=Sne(a,this.options||{},Mne()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Cne),this.addDetector(Tne),this.addDetector(kne),this.addDetector(One),this.addDetector(Ine),this.addDetector(Rne),this.addDetector(Pne),this.addDetector(Dne),this.addDetector(_ne)}addDetector(s){return this.detectors[s.name]=s,this}detect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,a=[];return s.forEach(r=>{if(this.detectors[r]){let n=this.detectors[r].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(a=a.concat(n))}}),a=a.filter(r=>r!=null&&!Ane(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}cacheUserLanguage(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||a.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(s,this.options)}))}}EF.type="languageDetector";const Lne={appName:" ",siniCar:" ",appSlogan:"  ",loading:" ...",save:"",cancel:"",confirm:"",delete:"",edit:"",add:"",search:"",filter:"",reset:" ",back:"",next:"",previous:"",close:"",submit:"",yes:"",no:"",all:"",none:" ",export:"",import:"",refresh:"",view:"",details:"",actions:"",status:"",date:"",time:"",total:"",price:"",quantity:"",name:"",email:" ",phone:"",address:"",city:"",region:"",country:"",notes:"",description:"",active:"",inactive:" ",enabled:"",disabled:"",success:" ",error:"",warning:"",info:"",noData:"  ",noResults:"  ",selectOption:" ",required:"",optional:"",language:"",welcome:"",page:"",of:"",currency:".",order:"",notSpecified:" ",sort:"",download:"",upload:"",first:"",last:"",selectAll:" ",deselectAll:" "},Fne={wholesaleLogin:"   ",b2bPortal:"   ",ownerLogin:" ",staffLogin:" ",clientId:" ",phoneNumber:" ",password:" ",activationCode:" ",rememberMe:"",forgotPassword:"  ",enter:"",verifying:" ...",secureConnection:"  ",securityNote:"      .    .",openNewAccount:"   ",invalidCredentials:"   ",loginSuccess:"   ",logoutSuccess:"   ",enterAsGuest:" ",guest:"",guestWelcome:"  !    ",title:" ",subtitle:"   ",phone:" ",phonePlaceholder:"  ",passwordPlaceholder:"  ",loginButton:"",loggingIn:" ...",noAccount:"  ",registerHere:" ",errors:{phoneRequired:"  ",passwordRequired:"  ",invalidCredentials:"   ",accountSuspended:" ",tooManyAttempts:" .  "},success:"   ",quickLoginForTesting:"  ",quickAdmin:" ",quickManager:"",quickStaff:"",quickCustomer:"",quickSupplier:"",quickMarketer:""},Une={verifyingCredentials:"   ...",connectingWarehouse:"  ...",loadingCatalog:"   ...",applyingDiscounts:"    ...",syncingInventory:"   ...",optimizingLogistics:"   ...",finalizingSetup:"   ...",accessGranted:"   !"},zne={mainServer:" ",connectingServer:"   ...",dataSync:" ",syncingData:"    ...",logistics:" ",connectingWarehouses:"      ..."},Bne={dismiss:"",campaignOf:" {{current}}  {{total}}",next:"",understood:""},$ne={restrictedTitle:"   ",restrictedSubtitle:"    B2B",restrictedMessage:"   :",targetAudience:{partsStores:"  ",insuranceCompanies:" ",rentalCompanies:"  ",salesReps:"  "},benefitsTitle:"  ",benefits:{prices:"  ",catalog:"   ",orders:"   ",support:"  "},callToAction:"           !",loginButton:" ",requestAccountButton:"   ",browseOnly:" ",blurredResultsNote:"   ",loginToAccess:"   ",searchDisabled:"    "},qne={title:"   ",openNewAccount:"  ",subtitle:"               .",businessInfo:" ",businessName:" ",businessNameAr:"  ()",businessNameEn:"  ()",commercialRegister:" ",taxNumber:" ",businessType:" ",selectBusinessType:"  ",contactInfo:" ",ownerName:" ",ownerPhone:"  ",ownerEmail:"  ()",addressInfo:" ",fullAddress:" ",nationalAddress:"  ",nationalAddressPlaceholder:": RDJ2929",city:"",region:"",postalCode:" ",branchesCount:" ",submitRequest:"   ",backToLogin:"  ",requestSuccess:"   !",requestPending:"  ",requestSuccessMessage:" .                .",backToHome:" ",benefits:{exclusivePrices:"  ",instantAccess:"  ",taxInvoices:"  "},businessTypes:{sparePartsShop:"  ",maintenanceCenter:" ",insuranceCompany:" ",rentalCompany:" ",salesRep:" ",workshop:" ",store:"  ",distributor:"",agency:"",other:""},salesRepFields:{fullName:" ",phone:" ",region:" /  ",email:"  ()",clientsType:"  ( ...)",clientsCount:"  "},documents:{title:" ",requiredDocuments:" ",instructions:"     PDF   .      .",uploadNotice:"     PDF   .      .",crCertificate:"  ",vatCertificate:"  ",nationalId:"  ",nationalAddressCert:"  ",clickToUpload:"  ",fileTypes:"PDF, JPEG, PNG, WebP (  5MB)",uploadSuccess:"  ",invalidFileType:"   .   PDF   (JPEG, PNG, WebP)",fileTooLarge:"   .   5 "},businessFields:{businessName:" ",branchesCount:" ",city:"",nationalAddress:"  ",nationalAddressPlaceholder:": RDJ2929",commercialReg:" ",vatNumber:" ",contactPerson:" ",phone:" ",emailOptional:"  ()"},success:{title:"   !",message:" .                .",backToHome:" "},validation:{phoneRequired:"  ",fullNameRequired:"  ",regionRequired:"   ",businessNameRequired:"  ",cityRequired:" ",contactPersonRequired:"  ",commercialRegRequired:"  ",vatRequired:"  ",nationalAddressRequired:"  ",documentRequired:""},additionalNotes:" ",submitting:" ...",submitError:"   "},Hne={home:"",dashboard:" ",products:"",catalog:"",orders:"",myOrders:"",cart:"",customers:"",users:"",roles:"",settings:"",profile:" ",notifications:"",reports:"",analytics:"",help:"",support:"",about:"",contact:" ",logout:" ",accountRequests:" ",statusLabels:" ",systemSettings:" "},Vne={title:" ",welcome:"",overview:" ",statistics:"",recentOrders:" ",recentActivity:" ",quickActions:" ",totalSales:" ",totalOrders:" ",totalCustomers:" ",totalProducts:" ",pendingOrders:" ",processingOrders:"  ",completedOrders:" ",cancelledOrders:" ",revenue:"",salesChart:" ",topProducts:"  ",topCustomers:" ",lowStock:" ",newCustomers:" ",monthlyRevenue:" ",weeklyOrders:" ",dailySales:" ",customerDashboard:"  ",adminDashboard:"  "},Gne={title:"",catalog:" ",addProduct:" ",editProduct:" ",deleteProduct:" ",productDetails:" ",productName:" ",productNameAr:"  ()",productNameEn:"  ()",sku:" ",barcode:"",category:"",subcategory:" ",brand:" ",manufacturer:" ",price:"",wholesalePrice:" ",retailPrice:" ",costPrice:" ",stock:"",stockQuantity:" ",minStock:"  ",maxStock:"  ",unit:"",weight:"",dimensions:"",image:"",images:"",specifications:"",description:"",shortDescription:" ",longDescription:" ",tags:"",status:"",available:"",outOfStock:" ",discontinued:"",featured:"",newArrival:" ",bestSeller:" ",onSale:"",discount:"",addToCart:" ",buyNow:" ",quantity:"",totalPrice:" ",searchProducts:"  ...",filterByCategory:"  ",filterByBrand:"   ",filterByPrice:"  ",sortBy:" ",priceAsc:":   ",priceDesc:":   ",nameAsc:": -",nameDesc:": -",newest:"",oldest:"",noProducts:"  ",productAdded:"   ",productUpdated:"   ",productDeleted:"   "},Wne={title:"",myOrders:"",allOrders:" ",newOrder:" ",createOrder:" ",orderDetails:" ",orderNumber:" ",orderDate:" ",orderStatus:" ",orderItems:" ",orderTotal:" ",subtotal:" ",tax:"",shipping:"",discount:"",grandTotal:" ",paymentMethod:" ",paymentStatus:" ",shippingAddress:" ",billingAddress:" ",trackOrder:" ",cancelOrder:" ",reorder:" ",printInvoice:" ",downloadInvoice:" ",orderConfirmed:"  ",orderShipped:" ",orderDelivered:" ",orderCancelled:" ",orderPending:" ",orderProcessing:" ",orderCompleted:"",orderRefunded:"",noOrders:"  ",searchOrders:"  ...",filterByStatus:"  ",filterByDate:"  ",orderCreated:"   ",orderUpdated:"   ",orderCancelledSuccess:"   "},Qne={title:" ",emptyCart:" ",addItems:"  ",continueShopping:" ",checkout:" ",clearCart:" ",updateCart:" ",itemAdded:"   ",itemRemoved:"    ",cartUpdated:"  ",cartCleared:"  ",proceedToCheckout:" ",estimatedTotal:" "},Kne={title:"",allCustomers:" ",addCustomer:" ",editCustomer:" ",customerDetails:" ",customerName:" ",clientId:" ",businessName:" ",contactPerson:" ",phone:"",email:" ",address:"",city:"",region:"",creditLimit:" ",currentBalance:" ",totalPurchases:" ",lastOrder:" ",status:"",activeCustomer:" ",inactiveCustomer:"  ",blockedCustomer:" ",verifiedCustomer:" ",pendingVerification:" ",searchCustomers:"  ...",noCustomers:"  ",customerAdded:"   ",customerUpdated:"   ",customerDeleted:"   "},Jne={title:"",allUsers:" ",addUser:" ",editUser:" ",deleteUser:" ",userDetails:" ",username:" ",fullName:" ",email:" ",phone:"",role:"",permissions:"",status:"",activeUser:" ",inactiveUser:"  ",lastLogin:" ",createdAt:" ",searchUsers:"  ...",noUsers:"  ",userAdded:"   ",userUpdated:"   ",userDeleted:"   ",passwordReset:"    ",sendPasswordReset:"   "},Yne={title:" ",allRoles:" ",addRole:" ",editRole:" ",deleteRole:" ",roleDetails:" ",roleName:" ",roleDescription:" ",permissions:"",assignedUsers:" ",superAdmin:" ",admin:"",manager:"",salesManager:" ",salesAgent:" ",viewer:"",customer:"",staff:"",noRoles:"  ",roleAdded:"   ",roleUpdated:"   ",roleDeleted:"   "},Xne={title:"",viewDashboard:"  ",viewProducts:" ",manageProducts:" ",viewOrders:" ",manageOrders:" ",viewCustomers:" ",manageCustomers:" ",viewUsers:" ",manageUsers:" ",viewRoles:" ",manageRoles:" ",viewSettings:" ",manageSettings:" ",viewReports:" ",exportData:" ",importData:" ",deleteData:" ",fullAccess:" "},Zne={title:"",general:"",appearance:"",language:"",selectLanguage:" ",notifications:"",security:"",privacy:"",account:"",profile:" ",changePassword:"  ",twoFactorAuth:" ",sessions:"",apiKeys:" API",webhooks:"Webhooks",integrations:"",backup:" ",restore:"",export:"",import:"",theme:"",darkMode:" ",lightMode:" ",autoMode:"",timezone:" ",dateFormat:" ",currency:"",settingsSaved:"  ",settingsReset:"   "},eie={title:"  ",pending:" ",approved:" ",rejected:"",underReview:" ",requestDate:" ",reviewDate:" ",reviewedBy:"",approve:"",reject:"",requestDetails:" ",noRequests:"  ",requestApproved:"   ",requestRejected:"  "},tie={title:" ",addLabel:" ",editLabel:" ",deleteLabel:" ",labelName:" ",labelNameAr:"  ()",labelNameEn:"  ()",labelColor:" ",labelType:" ",orderStatus:" ",customerStatus:" ",productStatus:" ",noLabels:"  ",labelAdded:"   ",labelUpdated:"   ",labelDeleted:"   "},sie={title:"",salesReport:" ",ordersReport:" ",customersReport:" ",productsReport:" ",inventoryReport:" ",financialReport:" ",generateReport:" ",downloadReport:" ",printReport:" ",dateRange:" ",from:"",to:"",today:"",yesterday:"",thisWeek:" ",lastWeek:" ",thisMonth:" ",lastMonth:" ",thisYear:" ",custom:""},aie={title:"",allNotifications:" ",unread:" ",read:"",markAsRead:" ",markAllAsRead:"  ",clearAll:" ",noNotifications:"  ",newOrder:" ",orderUpdate:" ",newCustomer:" ",lowStock:" ",paymentReceived:"  ",systemUpdate:" "},rie={somethingWrong:"  ",tryAgain:"   ",pageNotFound:"  ",accessDenied:"   ",sessionExpired:"  ",networkError:"  ",serverError:"  ",validationError:"  ",requiredField:"  ",invalidEmail:"   ",invalidPhone:"   ",passwordMismatch:"   ",weakPassword:"  "},nie={deleteItem:"      ",deleteItems:"      ",cancelOrder:"      ",logout:"     ",clearCart:"     ",discardChanges:"     ",actionCannotBeUndone:"     "},iie={panel:" ",systemSettings:" ",manageAll:" ",superAdmin:" ",salesManager:" ",salesAgent:" ",viewer:" "},lie={welcomeBack:"  {{name}}",totalOrders:" ",pendingRequests:"  ",approvedOrders:"  ",quickActions:" ",fastShipping:" ",fastShippingDesc:"  24-48   ",qualityGuarantee:" ",qualityGuaranteeDesc:"      ",support:"  ",supportDesc:"      ",needHelp:" ",needHelpDesc:"     ",callUs:" ",whatsapp:""},oie={mainMenu:" ",management:"",supportSection:"",home:"",orders:" ",quotes:" ",import:"  ",traderTools:" ",history:" ",organization:" ",teamManagement:" ",support:"  / ",searchCredits:"  ",unlimitedSearch:" "},cie={heroTitle:"    ",heroSubtitle:"                .",searchTip:"       ",searchPlaceholder:"    ...",searching:" ...",noResults:"  ",pressSearch:"      :",partNotAvailable:"   ",noResultsFor:"     :",outOfStock:" ",outOfStockMessage:"     ",available:"",priceNotAvailable:"  ",showPrice:"",addToCartTip:"  ()    ",whoWeServe:" ",whoWeServeSubtitle:"    ",partsStores:"  ",partsStoresDesc:"          .",insuranceCompanies:" ",insuranceDesc:"         .",rentalCompanies:" ",rentalDesc:"         .",salesReps:" ",salesRepsDesc:"         .",mainServices:"   ",mainServicesSubtitle:"   ",quoteRequests:"  (Excel)",quoteRequestsDesc:"            .",importFromChina:"  ",importFromChinaDesc:"             .",wholesaleOrders:"  ",wholesaleOrdersDesc:"           PDF.",staffBranches:"  ",staffBranchesDesc:"          .",howItWorks:"  ",howItWorksSubtitle:"   ",step1Title:"  ",step1Desc:"        .",step2Title:" ",step2Desc:"      .",step3Title:" ",step3Desc:"        .",step4Title:" ",step4Desc:"       .",whySiniCar:"  ",whySiniCarSubtitle:"   ",expertiseTitle:" ",expertiseDesc:"         .",techTitle:" ",techDesc:"       .",globalTitle:" ",globalDesc:"     3   .",supportTitle:"  B2B",supportDesc:"        .",wholesaleCart:"  ",emptyCart:" ",useSearchToAdd:"   ",estimatedTotal:" ()",submitOrder:" ",fastShipping:" ",fastShippingDesc:"  24       .",techSupport:"  ",techSupportDesc:"        .",searchHistory:"  ",partNumber:" ",productName:" ",viewDate:" ",recordedPrice:" ",noSearchHistory:"     ",sar:".",enterValidPartNumber:"     .",unexpectedError:"       .",orderSubmitError:"    ",pageView:" :",addToCart:" ",priceModal:{productDetails:" ",wholesalePrice:" ",quantity:"",total:"",addToCart:" ",close:""},duplicateConfirm:{title:" ",message:"     .    ",confirm:"  ",cancel:""},orderSuccess:{title:"   !",message:"     "},welcome:"",dashboard:" ",searchProducts:"  ",search:"",recentOrders:" ",viewAll:" ",noRecentOrders:"   ",recentQuotes:"  ",noRecentQuotes:"    ",quickActions:" ",newOrder:" ",newQuote:" ",myAccount:"",support:"",stats:{totalOrders:" ",pendingOrders:"  ",totalSpent:" ",searchPoints:" "},searchResults:" ",cart:"",checkout:" ",total:"",currency:"."},die={mainSection:"",ordersCustomersSection:" ",settingsSection:"",dashboard:" ",activityLog:" ",customerOrders:" ",accountRequests:" ",customersCRM:"  (CRM)",quoteRequests:" ",importRequests:" ",missingParts:"",orderShortages:" ",products:"",users:"",systemSettings:" ",marketingCenter:" ",pricingCenter:" ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",customerPortalSettings:"  ",aiSettings:"  ",aiTraining:"  ",aiCommandCenter:"  AI",connected:" ",slowConnection:" ",disconnected:" ",pageTitles:{dashboard:"  ",ordersManager:"  ",activityLogs:" ",accountRequests:"   ",customers:"   (CRM)",quotes:"  ",imports:" ",missing:"",orderShortages:" ",settings:" ",users:" ",products:" ",marketing:" ",pricing:" ",traderTools:"  ",supplierMarketplace:"  ",marketers:" ",installments:"  ",advertising:" ",customerPortal:"  ",teamSettings:" ",aiSettings:"  ",aiTraining:"   ",aiCommandCenter:"   "},stats:{totalRevenue:" ",todayRevenue:" ",pendingOrders:" ",approvedOrders:"  ",shippedOrders:" ",cancelledOrders:" ",totalProducts:" ",outOfStock:" ",activeBusinesses:" ",pendingAccounts:" ",pendingQuotes:" "},kpi:{revenue:"",orders:"",inventory:"",customers:""},activity:{logins:" ",ordersCreated:" ",quotesRequested:" ",searchesPerformed:" "},charts:{dailyOrders:" ",dailyRevenue:" ",topCustomers:" ",topMissingParts:"  ",revenue:""},views:{dashboard:" ",customers:" ",products:"",settings:"",quotes:" ",missing:"",orderShortages:" ",importRequests:" ",accountRequests:" ",activityLogs:" ",ordersManager:" ",adminUsers:"",marketing:" ",pricing:" ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",teamSettings:" ",customerPortal:" ",aiSettings:" ",aiTraining:"  ",aiCommandCenter:"  AI"},onlineUsers:{title:"  ",subtitle:"   5 ",now:"",minutesAgo:" {{mins}} ",online:"",noOnlineUsers:"    ",moreOnline:" {{count}}   ..."},activityLogs:{title:" ",activity:"",time:"",user:"",event:"",details:"",noActivities:"   "},generalManager:" ",teamSettings:" "},uie={title:"   (CRM)",loading:"  ...",stats:{totalCustomers:" ",activeCustomers:" ",blockedSuspended:"/",mostActiveCustomer:" "},searchPlaceholder:"      ...",allStatuses:" ",filters:{searchPlaceholder:"    ...",allStatuses:" ",advanced:" ",customerType:" ",allTypes:" ",activityLevel:" ",allActivity:" ",activeToday:" ",activeWeek:"  ",inactive30:"  (+30 )",marketer:" ",allMarketers:" ",employee:" ",allEmployees:" ",clearAll:" ",resultsCount:"   {{count}} ",mostOrders:" ",mostSearches:" ",lastActive:" "},table:{customer:"",city:"",priceLevel:" ",ordersCount:" ",totalPurchases:" ",status:"",actions:""},view:"",noMatchingCustomers:"   ",status:{active:"",suspended:"",blocked:"",pending:" ",inactive:" "},addCustomer:{button:"  ",title:"  ",subtitle:"   ",saving:" ...",submit:" ",success:"    ",fields:{companyName:" ",phone:" ",email:" ",city:"",region:"",customerType:" ",priceLevel:" ",crNumber:"  ",taxNumber:" ",nationalAddress:" ",contactPerson:" ",searchPoints:" ",branchesCount:" ",status:" ",internalNotes:" "},placeholders:{companyName:"    ",selectCity:" ",selectRegion:" ",nationalAddress:": RRRD1234, 1234,  , ",contactPerson:"  ",internalNotes:"   ..."},types:{autoPartsShop:"  ",maintenanceCenter:" ",autoShowroom:" ",carRental:"  ",government:" ",other:""},priceLevels:{level1:"  ()",level2:" ",level3:" ",special:" "},errors:{companyNameRequired:"  ",phoneRequired:"  ",cityRequired:" ",failed:"    "}},errors:{loadFailed:"    "},panel:{title:" ",tabs:{overview:" ",orders:"",activity:""},businessInfo:" ",companyName:" ",city:"",phone:"",crNumber:" ",priceLevel:" ",customerType:" ",accountStatus:" ",searchBalance:" ",staffUsers:"",accessValidity:" ",ordersHistory:" ",activityLog:" "},toast:{loadError:"    "},detail:{tabs:{overview:" ",orders:"",quotes:"",staff:"",security:" ",notes:""},accountManagement:" ",changeStatus:" ",statusActive:" (Active)",statusSuspended:"  (Suspend)",statusBlocked:"  (Block)",suspendUntil:"  ",saving:" ...",saveChanges:" ",statusUpdated:"   ",errorOccurred:" ",priceDisplayType:"  ",pricesVisible:"   -   ",pricesHidden:"  -    ",visibleNoPoints:"  ( )",hiddenWithPoints:"  ()",visible:"",hidden:"",priceDisplayChanged:"     ",searchWallet:" ",addBalance:" ",deductBalance:" ",totalBalance:" ",used:"",remaining:"",joinDate:" ",lastLogin:"  ",customerDocs:" ",commercialRegistration:" ",vatCertificate:" ",nationalId:" ",notAttached:" ",noDocument:" ",enterPointsToAdd:"   :",pointsAddedSuccess:"  {{points}}  ",currentBalance:" :",points:"",enterPointsToDeduct:"   :",cannotDeductMoreThan:"      ",pointsDeductedSuccess:"  {{points}}  ",errorDeductingPoints:"    ",staffStatusUpdated:"   ",customerOrders:" ",noOrders:"  ",orderNumber:" ",date:"",amount:"",orderStatus:"",priceQuotes:" ",noQuotes:"   ",quoteNumber:" ",items:"",staffMembers:" ",noStaff:"   ",staffName:" ",role:"",lastActive:" ",action:"",suspend:"",activate:"",securityAccessLogs:"  ",loginHistory:" ",device:"",ipAddress:"IP",location:"",adminNotes:" ",noNotes:"  ",addNote:" ...",writeNote:"  ...",notePlaceholder:"  ...",addNoteBtn:" ",docs:{commercialReg:" ",taxNumber:" ",nationalAddress:" ",notAttached:" ",notAvailable:" "},staff:{staffMembers:" ",maxLimit:" ",owner:"",active:"",suspended:"",suspendBtn:"",activateBtn:""},orders:{customerOrders:" ",completed:"",ongoing:"",loadingOrders:"  ...",noOrders:"    ",unspecified:" ",products:"",item:"",total:"",date:"",currency:".",showingOf:" {{shown}}  {{total}} "},quotes:{pricingRequests:" ",approved:"",new:"",loadingQuotes:"   ...",noQuotes:"     ",unspecified:" ",items:"",item:"",total:"",date:"",currency:".",pendingPricing:" ",showingOf:" {{shown}}  {{total}}  ",missing:"",reviewedBy:""},security:{securityIndicators:" ",failedLoginAttempts:"  ",suspiciousBehavior:"  (Flag)",yes:"",no:"",resetCounter:"    (Reset)",counterReset:"  ",passwordReset:"   ",passwordResetDesc:"        .        .",enterNewPassword:"    (4   ):",adminNotFound:":      ",passwordResetError:"      ",passwordMinLength:"     4   ",resetPasswordBtn:"   ",recentLoginHistory:"  ",successfulLogin:" ",failedLogin:" ",passwordChanged:"  ",passwordResetAdmin:"  (Admin)",noLogsAvailable:"   "},notes:{adminNotes:" ",addNew:"  ",placeholder:"  ...",addNote:" ",adding:" ...",addedSuccess:"   ",addError:"   ",emptyError:"  ",previousNotes:" ",noNotes:"   ",addFirst:"    ",saveNote:" "}}},mie={systemSettings:" ",generalSettings:" ",bannerManagement:" ",whySiniCar:"  ",textManagement:" ",statusLabels:" ",apiIntegration:"  (API)",appearanceIdentity:" ",siteSettings:"  ",saveChanges:" ",saving:" ...",siteName:"  / ",supportPhone:"  ",salesWhatsApp:"  ",supportEmail:"  ",newsTicker:"  ",enableTicker:" ",tickerText:" ",tickerSpeed:" (1-10)",bgColor:"  (Hex)",textColor:"  (Hex)",productDisplaySettings:"   ",minVisibleQty:"    ",minVisibleQtyNote:"          (: 1)",stockThreshold:"  ( )",stockThresholdNote:'           " " (: 0)',settingsNote:"        .       .",maintenanceMode:" ",maintenanceModeDesc:'       " "  .',bannerAds:"  ",bannerAdsDesc:"        ",addNewBanner:"  ",newBannerData:"  ",mainTitle:" ",subtitle:" ",buttonText:"  (:  )",colorScheme:"",imageUrl:"  ()",saveAndPublish:" ",uiTextManagement:"   ",uiTextManagementDesc:"        .",saveTexts:" ",erpIntegration:"  (ERP Integration)",erpIntegrationDesc:"   Onyx ERP    ",connectionSettings:" ",erpUrl:"   (Cloud ERP URL)",apiToken:"  (API Token)",syncFrequency:"  (Sync Frequency)",realtime:" (Real-time)",every15Min:" 15 ",hourly:" ",daily:"",environment:" ",production:"Production (Live)",sandbox:"Sandbox (Test)",testConnection:"  ",connecting:" ...",connectionSuccess:"    (200 OK)",connectionFailed:" :   ",sharedData:"   API",sharedDataDesc:"        ",productsItems:" ",productsItemsDesc:"  ",ordersData:"",ordersDataDesc:"  ",customersData:"",customersDataDesc:"  ",quotesData:" ",quotesDataDesc:"  ",inventoryData:"",inventoryDataDesc:"  ",priceLists:" ",priceListsDesc:"  ",syncDirection:" ",pullOnly:"  ERP ",pullOnlyDesc:"    ",pushOnly:"  ERP ",pushOnlyDesc:"   ",bidirectional:" ",bidirectionalDesc:"   ",webhooks:"Webhooks ( )",webhooksDesc:"        ",addWebhook:"",events:"",webhookAdded:"  Webhook ",loadingFailed:"   ",settingsSaved:"   ",saveError:"   ",fillTitleAndDesc:"   ",bannerAdded:"  ",bannerDeleted:"  ",confirmDeleteBanner:"      ",hide:"",show:"",darkGray:"  ()",royalBlue:" ",vibrantOrange:" ",darkGreen:" ",loading:" ...",advancedSettings:" ",loggingLevel:" ",loggingLevelBasic:"Basic",loggingLevelDetailed:"Detailed",loggingLevelDebug:"Debug ()",retryOnFail:"   ",retryAttempts:"",timeout:"  (Timeout)",seconds:"",featureManagement:'  "  "',featureManagementDesc:"      .     .",addNewFeature:"  ",fillAllFields:"   ",featureAdded:"   ",featureDeleted:"  ",title:"",description:"",icon:"",iconBox:"",iconChart:"",iconAnchor:"",iconHeadphones:"",iconTruck:"",iconShield:"",iconGlobe:" ",iconStar:"",iconClock:"",iconAward:"",iconColor:" ",colorCyan:"",colorGreen:"",colorGold:"",colorPurple:"",colorRed:"",colorBlue:"",colorPink:"",colorOrange:"",appearanceCustomization:" ",primaryColor:"  ",primaryColorDesc:"       .",siteLogo:"  (Logo)",uploadNotAvailable:"      ",clickToUploadLogo:"  ",livePreview:" ",livePreviewDesc:"     ",primaryButtonExample:"  ",statusLabelsManagement:"  ",statusLabelsDescription:"            .           .",addNewStatus:"  ",statusKey:" ()",statusLabel:" ",newStatus:" ",backgroundColor:"",preview:"",add:"",statusUpdated:"   ",fillKeyAndName:"   ",keyExists:"   ",statusAdded:"    ",cannotDeleteSystem:"    ",cannotDeleteInUse:"    {{count}}    ",statusDeleted:"   ",defaultStatusSet:"   ",checkingUsage:"   ...",confirmDelete:"    ",yesDelete:" ",systemStatus:"",defaultStatus:"",setAsDefault:" ",systemStatuses:" ",systemStatusesDesc:"         .      .",defaultStatusInfo:" ",defaultStatusInfoDesc:"    .        .",statusCategories:{orderStatus:"  ( )",orderInternalStatus:"  ",accountRequestStatus:"  ",quoteRequestStatus:"  ",quoteItemStatus:"  ",missingStatus:" ",importRequestStatus:"  ",customerStatus:" ",staffStatus:" "},guestMode:" ",guestModeSettings:"  ",guestModeSettingsDesc:"         .  /     .",guestBrowsingEnabled:"  ",guestBrowsingEnabledDesc:"      ",visibleSections:"  ( )",visibleSectionsDesc:"       ",showBusinessTypes:' " " ( )',showMainServices:"  ",showHowItWorks:' "  "',showWhySiniCar:' "  "',showCart:"  ",showMarketingCards:"  ",blurSettings:" ",blurIntensity:" ",blurLight:"",blurMedium:"",blurHeavy:"",showBlurOverlay:"    ",showBlurOverlayDesc:'  " "   ',searchSettings:"  ",allowSearch:" ",allowSearchDesc:"    ( )",showSearchResults:"  ",showSearchResultsDesc:"     ",guestSettingsSaved:"     ",general:{title:" ",siteName:" ",siteDescription:" ",contactEmail:"  ",contactPhone:" ",currency:"",language:"",timezone:" ",save:"",saved:"  "},business:{title:" ",minOrderAmount:"  ",maxOrderAmount:"  ",deliveryFee:" ",taxRate:" "},notifications:{title:" ",emailNotifications:" ",smsNotifications:" ",pushNotifications:" "},security:{title:" ",twoFactorAuth:" ",sessionTimeout:" ",maxLoginAttempts:"   "}},fie={title:" ",newOrders:" ",inProgress:" ",readyToShip:" ",totalOrders:" ",searchOrder:"     ...",allStatuses:" ",allInternalStatuses:"  ",orderNumber:" ",customer:"",date:"",total:"",status:"",internalStatus:" ",actions:"",noOrders:"  ",orderDetails:" ",customerInfo:" ",orderItems:" ",statusHistory:" ",internalNotes:" ",updateStatus:" ",updateInternalStatus:"  ",externalStatusUpdated:"    ",internalStatusUpdated:"    ",updateFailed:"  ",statusLabels:{pending:" ",approved:" ",shipped:" ",delivered:" ",rejected:"",cancelled:""},internalStatusLabels:{new:"",sentToWarehouse:" ",waitingPayment:" ",paymentConfirmed:" ",salesInvoiceCreated:"  ",readyForShipment:" ",completedInternal:" ",cancelledInternal:" "},details:"",name:"",userId:"",product:"",quantity:"",price:"",itemTotal:"",grandTotal:" ",changedStatusTo:"  ",noHistory:"   ",externalStatus:"  (External)",externalStatusDesc:"      .",noStatusPermission:"    ",internalStatusTitle:"  (Internal)",internalStatusDesc:"  .   .",notesPlaceholder:"     ...",saveNotes:" ",noInternalPermission:"     ",dangerZone:" ",cancelOrder:"  ",noPermission:"  ",stats:{pending:" ",processing:" ",shipped:" ",delivered:" ",cancelled:"",total:"",new:"",ready:" "},searchPlaceholder:"    ...",table:{orderId:" ",customer:"",items:"",total:"",date:"",status:"",actions:""},view:"",approve:"",ship:"",deliver:"",cancel:"",orderUpdated:"  ",shippingInfo:" ",paymentInfo:" ",noteAdded:"  "},hie={title:"   ",newRequests:" ",underReview:" ",approved:" ",rejected:"",searchAccount:"     ...",allStatuses:" ",businessName:" ",phone:"",requestDate:" ",status:"",actions:"",noRequests:"  ",requestDetails:" ",businessInfo:" ",contactInfo:" ",documents:"",decision:"",priceLevel:" ",customerType:" ",searchPoints:" ",initialPoints:" ",monthlyPoints:" ",portalAccess:" ",startDate:" ",endDate:" ",openEnded:"",staffAccess:" ",canCreateStaff:"  ",maxStaffUsers:"  ",adminNotes:" ",saveDecision:" ",decisionSaved:"   ",saveError:"   ",statusLabels:{new:" ",underReview:" ",approved:" ",rejected:"",onHold:""},documentTypes:{crCertificate:" ",vatCertificate:"  ",nationalId:" ",authorizationLetter:" ",other:" "}},xie={stats:{newRequests:" ",underReview:" ",approved:" ",rejected:""},status:{new:" ",underReview:" ",approved:" ",rejected:"",onHold:""},docTypes:{crCertificate:" ",vatCertificate:"  ",nationalId:" ",authLetter:" ",other:" "},categories:{spareParts:"  ",rental:" ",insurance:" ",agent:""},searchPlaceholder:"   ...",allStatuses:" ",table:{businessName:"  / ",activityType:" ",city:"",date:"",status:"",actions:""},approvedAccount:" ",view:"",noMatchingRequests:"   ",panel:{title:"  ",customerData:" ",businessName:" ",activity:"",city:"",contactNumber:" ",crNumber:" ",vatNumber:" ",customerNotes:" ",attachedDocuments:" ",adminDecision:"  "},form:{requestStatus:" ",statusNew:"",statusUnderReview:" ",statusApproved:" ()",statusRejected:"",statusOnHold:"",customerType:" ",typePartsShop:"  ",typeRentalCompany:" ",typeInsuranceCompany:" ",typeSalesAgent:"",typeFleetCustomer:" ",typeOther:"",priceLevel:" ",level1:"Level 1 (VIP -  )",level2:"Level 2 ()",level3:"Level 3 (/)",levelSpecial:"",accessValidity:" ",to:"",openEnded:"  (  )",searchPoints:"  ",initialBalance:" ",monthlyRenewal:" ",allowAddStaff:"  ",maxLimit:" ",adminNotes:"  ( )",notesPlaceholder:"    ...",saveDecision:" ",cancel:""},toast:{saveSuccess:"   ",saveError:"   "}},pie={title:"  ",pendingQuotes:" ",completedQuotes:" ",searchQuote:"     ...",allStatuses:" ",quoteNumber:" ",customer:"",date:"",itemsCount:" ",status:"",actions:"",noQuotes:"   ",quoteDetails:"  ",requestedItems:" ",response:"",sendResponse:" ",stats:{new:"",inProgress:" ",completed:"",approved:""},searchPlaceholder:"    ...",table:{quoteId:"  ",customer:"",items:"",priceType:" ",date:"",status:"",actions:""},view:"",process:"",complete:"",approve:"",quoteUpdated:"   ",pricedItems:" ",missingItems:" "},gie={title:" ",subtitle:"    ",searchPlaceholder:"  ...",addProduct:" ",importExcel:" Excel",exportExcel:" Excel",columnSettings:" ",visibilitySettings:" ",stats:{totalProducts:" ",inStock:"",outOfStock:" ",hidden:""},table:{partNumber:" ",name:" ",brand:"",quantity:"",price:"",visibility:"",actions:""},modal:{addTitle:"  ",editTitle:" ",deleteConfirm:" ",deleteMessage:"      ",importTitle:"  Excel",columnSettingsTitle:"  Excel"},form:{partNumber:" ",name:" ",brand:"",quantity:"",price:"",costPrice:" ",description:"",isVisible:" ",save:"",cancel:""},import:{selectFile:"  Excel",dragDrop:"    ",processing:" ...",success:"  ",imported:" ",updated:" ",skipped:" ",errors:""},validation:{partNumberRequired:"  ",nameRequired:"  ",priceInvalid:"  ",quantityInvalid:"  "},toast:{productCreated:"   ",productUpdated:"   ",productDeleted:"   ",importSuccess:"   ",createError:"   ",updateError:"   ",deleteError:"   ",importError:"   ",loadError:"   ",visibilityThresholdSaved:"     "},presets:{title:"  ",name:" ",isDefault:"",mappings:" ",internalField:" ",excelHeader:" Excel",enabled:"",required:"",addPreset:"  ",editPreset:" ",deletePreset:" ",savePreset:" ",toast:{presetCreated:"   ",presetUpdated:"   ",presetDeleted:"   ",presetSetDefault:"   "}},uploadExcel:" Excel",downloadTemplate:" ",loading:" ...",noProducts:"  ",noMatchingProducts:"   ",partNumber:" ",productName:" ",quantity:"",price:"",category:"",actions:"",edit:"",delete:"",deleteConfirm:"      ",productDeleted:"  ",productSaved:"  ",productCreated:"  ",importModal:{title:" ",selectFile:"  Excel",importing:" ...",importSuccess:"  ",imported:" ",updated:" ",skipped:" ",errors:""},productModal:{editTitle:" ",addTitle:"  ",save:"",cancel:""},columnPresets:{title:"  Excel",presetName:" ",enterPresetName:"   ",created:"   ",saved:"  ",deleteConfirm:"      ",deleted:"  ",setDefault:" ",isDefault:""},visibility:{title:" ",threshold:"  ",saved:"   "},pagination:{showing:"",of:"",products:"",previous:"",next:""},selectProductsFirst:"   ",selectedCount:"  {{count}} ",visibilityApplied:"      {{count}} ",visibilityRemoved:"      {{count}} ",loadFailed:"   ",importFailed:"  ",templateDownloaded:"   Excel",templateDownloadFailed:"   ",partAndNameRequired:"   ",deleteFailed:"   "},bie={title:" ",subtitle:"     ",tabs:{users:"",roles:" "},searchPlaceholder:"  ...",allRoles:" ",allStatuses:" ",addUser:" ",exportUsers:" ",table:{user:"",role:"",contact:"",lastLogin:" ",status:"",actions:"",name:"",email:" ",phone:""},status:{active:"",inactive:" ",ACTIVE:"",SUSPENDED:"",PENDING:" "},modal:{addTitle:"  ",editTitle:" ",deleteConfirm:" ",deleteMessage:"      ",resetPassword:"   ",toggleStatus:" "},form:{fullName:" ",username:" ",email:" ",phone:" ",role:"",password:" ",newPassword:"  ",confirmPassword:"  ",save:"",cancel:""},validation:{nameRequired:" ",usernameRequired:"  ",emailRequired:"  ",emailInvalid:"   ",passwordRequired:"  ",passwordMinLength:"     6   ",roleRequired:" "},toast:{userCreated:"   ",userUpdated:"   ",userDeleted:"   ",passwordReset:"    ",statusChanged:"   ",createError:"   ",updateError:"   ",deleteError:"   ",loadError:"   "},roles:{title:" ",addRole:"  ",editRole:" ",deleteRole:" ",roleName:" ",roleDescription:" ",permissions:"",usersCount:" ",isSystemRole:" ",noRoles:"  ",toast:{roleCreated:"   ",roleUpdated:"   ",roleDeleted:"   "},SUPER_ADMIN:" ",ADMIN:"",MANAGER:"",STAFF:"",CUSTOMER_OWNER:" ",CUSTOMER_STAFF:" "},stats:{total:" ",admins:"",staff:"",active:""},noUsers:"  ",editUser:" ",deleteUser:" ",deleteConfirm:"      ",userCreated:"  ",userUpdated:"  ",userDeleted:"  ",resetPassword:"   ",passwordReset:"    "},vie={title:"   ",message:"         ",contactAdmin:"    ",requestedPage:" ",goBack:"",goHome:" ",errorCode:" "},yie={searchPlaceholder:"    ...",allStatuses:" ",table:{requestNumber:" ",businessCustomer:" / ",uploadDate:" ",itemsCount:" ",priceType:" ",status:"",actions:""},reviewDetails:" / ",noRequests:"  ",panel:{reviewRequest:" ",proposedTotal:" ",approving:" ...",approveAndSend:"  ",selectAll:" ",changeSelectedStatus:"  ",available:" (Approved)",unavailable:"  (Missing)",rejected:" (Rejected)",customerPartNumber:"  ()",customerPartName:"  ()",quantity:"",matchedProduct:" ( )",price:"",decision:"",notes:"",generalNotes:"  ",notesPlaceholder:"   ...",itemStatus:{approved:"",missing:" ",rejected:"",pending:""}},status:{new:"",underReview:" ",partiallyApproved:" ",approved:" ",quoted:" ",processed:" ",rejected:""},toast:{itemsUpdated:"  {{count}} ",approvedWithoutPriceWarning:"    .   ",pricingSentSuccess:"     ",saveError:"   ",quoteSaved:"   ",quoteSaveFailed:"    "}},Nie={tabs:{all:"",fromSearch:" ",fromQuote:" "},stats:{totalMissing:" ",newMissing:" ",underReview:" ",ordered:" ",solved:" ",orderedImport:"  / ",addedToStock:" ",fromQuote:" ",fromSearch:" "},searchPlaceholder:"  ...",allStatuses:" ",noMatchingMissing:"   ",table:{partNumber:"  / ",partInfo:" ",requestCount:" ",requestFrequency:" ",interestedCustomers:" ",source:"",date:"",lastRequest:" ",status:"",actions:""},source:{search:"",quote:""},actions:{details:"",linkToImport:"  ",addToStock:" ",saving:" ...",saveChanges:" "},view:"",noMatchingParts:"   ",pagination:{page:"",of:""},export:{partNumber:" ",itemName:" ",source:"",requestCount:" ",customerCount:" ",status:"",lastRequest:" ",adminNotes:" "},panel:{title:"  ",missingDetails:" ",partDetails:" ",requestedItem:" ",suggestedName:" ",brand:"",searchQuery:" ",partNumber:" ",partName:" ",requestCount:"  ",differentCustomers:" ",source:" ",sourceQuote:":  ",firstRequest:" ",lastRequest:" ",requestingCustomers:" ",updateStatus:" ",followUp:" ",internalNotes:" ",adminNotes:" ",notesPlaceholder:"   (:    ...)",saving:" ...",saveStatus:" "},status:{new:" ",underReview:" ",orderPlanned:" ",ordered:" ",addedToStock:" ",ignored:" "},sourceLabels:{search:"",quote:""},toast:{statusUpdated:"    ",saveError:"   ",exportSuccess:"   ",exportFailed:" ",linkImportSoon:"    ",redirectToAddProduct:"    ..."}},jie={stats:{newRequests:" ",pending:"",inProgress:" ",awaitingCustomer:" ",completed:"",delivered:" "},table:{requestNumber:" ",customer:"",service:"",requestDate:" ",date:"",category:"",status:"",action:"",actions:""},serviceType:{fullService:"",processingOnly:" ",fullImport:" ",goodsPreparation:" "},actions:{manageRequest:" ",startReview:" ",requestItemsFile:"  ",cancelRequest:" "},viewDetails:" ",noRequests:"   ",modal:{manageRequest:"  ",currentStatus:" ",timeline:"  (Timeline)"},pricing:{preparePricing:"  ",customerFile:" ",download:"",waitingForFile:"     ...",totalOffer:"  (.)",sendToCustomer:"  "},details:{title:" ",requestedBrands:" ",serviceType:" ",branchesCount:" ",estimatedValue:" ",customerNotes:" "},statusControl:{title:"  ()",hint:"       (  ...)"},panel:{title:"  ",requestInfo:" ",customer:"",category:"",description:"",estimatedQuantity:" ",timeline:" ",updateStatus:" ",pricingSection:" ",totalAmount:" ",enterAmount:" ",note:"",notePlaceholder:" ...",sendPricing:"  "},status:{new:" ",underReview:" ",waitingCustomerExcel:"  ",pricingInProgress:" ",pricingSent:"  ",waitingCustomerApproval:" ",approvedByCustomer:"  ",inFactory:" ",shipmentBooked:"  ",onTheSea:" ",inPort:" ",customsCleared:" ",onTheWay:" ",delivered:" ",cancelled:""},toast:{statusUpdated:"   ",updateFailed:" ",enterValidAmount:"   ",pricingSent:"    ",sendFailed:" "}},wie={title:"  ",subtitle:"    ",adminTitle:"  ",adminSubtitle:"    ",supplierTitle:"  ",supplierSubtitle:"     ",newRequest:" ",myRequests:"",noRequests:"   ",createFirst:"  ",requestDetails:" ",requestedValue:" ",duration:"",frequency:"",downPayment:" ",requestedItems:" ",product:"",quantity:"",price:"",notes:"",createdAt:" ",cancelRequest:" ",confirmCancel:"     ",requestCancelled:"  ",months:"",monthly:"",weekly:"",pendingOffers:"  ",sinicarOffer:"  ",supplierOffer:"",fullApproval:" ",partialApproval:" ",approvedValue:"  ",installments:" ",installmentAmount:" ",startDate:" ",acceptOffer:" ",rejectOffer:" ",offerAccepted:"   ",offerRejected:"  ",activeContract:" ",totalPaid:"",remaining:"",paidInstallments:" ",overdueInstallments:" ",installmentNumber:" ",dueDate:" ",amount:"",status:"",paid:"",overdue:"",pending:" ",enterTotalValue:"  ",selectProducts:" ",totalValue:"  ",selectProduct:"--   --",total:"",paymentFrequency:" ",minMax:" ",max:" ",unlimited:" ",minDownPayment:" ",paymentPreview:"  ",afterDownPayment:"  ",estimatedInstallment:" ",acceptTerms:"   ",submitRequest:" ",requestCreated:"   ",loadError:"    ",actionError:" ",cancelError:"   ",createError:"    ",minAmountError:"     ",maxAmountError:"     ",minDownPaymentError:"     ",disabled:"    ",disabledDesc:"      ",notesPlaceholder:"  ...",totalRequests:" ",pendingRequests:" ",activeContracts:" ",closedContracts:" ",overdueAmount:"",noRequestsInTab:"     ",requestId:" ",customer:"",date:"",actions:"",review:"",reviewRequest:"  ",yourDecision:"",approveFullAction:" ",approveFullDesc:"   ",approvePartialAction:" ",approvePartialDesc:"    ",rejectAction:"",rejectDesc:" ",approvedAmount:"  ",forwardOnReject:"    ",adminNotes:" ",confirmDecision:" ",decisionRecorded:"  ",requestRejected:"  ",forwarded:"   ",customerNotes:" ",generalSettings:" ",enableSystem:"  ",sinicarPriority:"   ",allowPartialSinicar:"     ",allowPartialSuppliers:"    ",forwardingSettings:" ",autoForwardOnReject:"    ",autoForwardOnPartial:"     ",onCustomerRejectsSinicar:"     ",forwardToSuppliers:" ",closeRequest:" ",financialLimits:" ",minAmount:" ",maxAmount:" ",requireDownPayment:"  ",minDownPercent:"  %",maxDownPercent:"  %",durationSettings:" ",minMonths:"  ()",maxMonths:"  ()",defaultFrequency:" ",settingsSaved:"  ",settingsError:"    ",noCreditProfiles:"   ",creditScore:" ",availableRequests:" ",submittedOffers:" ",pendingDecisions:" ",availableForOffer:"  ",noAvailableRequests:"    ",submitOffer:" ",mySubmittedOffers:" ",myOffer:"",perInstallment:"",anonymousCustomer:"",requestedDuration:" ",fullOffer:" ",partialOffer:" ",offerAmount:" ",numberOfInstallments:" ",offerSummary:" ",offerSubmitted:"   ",offerError:"    ",invalidAmount:"  "},Sie={title:" ",stats:{total:" ",active:"",pending:" ",suspended:""},searchPlaceholder:"   ...",allStatuses:" ",table:{name:"",phone:"",referralCode:" ",referrals:"",earnings:"",status:"",actions:""},status:{ACTIVE:"",PENDING:" ",SUSPENDED:""},noMarketers:"  ",view:"",activate:"",suspend:"",delete:"",addMarketer:" ",marketerDetails:" ",referralHistory:" ",commissionHistory:" ",payoutHistory:" ",pendingPayout:" ",totalEarnings:" ",marketerUpdated:"  ",marketerCreated:"  "},Aie={title:" ",stats:{total:" ",active:"",scheduled:"",expired:""},searchPlaceholder:"  ...",allStatuses:" ",table:{title:"",type:"",placement:"",startDate:" ",endDate:" ",status:"",actions:""},status:{ACTIVE:"",SCHEDULED:"",PAUSED:" ",EXPIRED:""},noAds:"  ",addAd:" ",editAd:" ",deleteAd:" ",deleteConfirm:"      ",adCreated:"  ",adUpdated:"  ",adDeleted:"  ",uploadImage:" ",adDetails:" "},Eie={title:" ",stats:{totalRequests:" ",pending:" ",approved:"",rejected:"",active:""},searchPlaceholder:"   ...",allStatuses:" ",table:{requestId:" ",customer:"",product:"",amount:"",installments:"",status:"",actions:""},status:{PENDING:" ",APPROVED:"",REJECTED:"",ACTIVE:"",COMPLETED:"",DEFAULTED:""},noRequests:"   ",view:"",approve:"",reject:"",requestDetails:" ",customerInfo:" ",productInfo:" ",paymentSchedule:" ",paymentHistory:" ",monthlyPayment:" ",totalAmount:" ",remainingAmount:" ",dueDate:" ",requestApproved:"   ",requestRejected:"  "},Cie={title:"  ",description:"     ",resetDefaults:" ",saveChanges:" ",confirmReset:"          ",unsavedChanges:"   ",savedSuccess:"   ",tabs:{design:" ",layout:"  ",navigation:" ",features:"",content:""},design:{themeMode:" ",colors:" "},layout:{sections:"  ",reorder:"  "},navigation:{menu:"  "},features:{tools:" ",ordering:"",marketing:"",guest:" "},banners:{hero:"  "},announcements:{title:""},cards:{info:" "}},Tie={title:"  ",description:"    ",globalEnable:"  ",globalEnableDesc:"      ",unsavedChanges:"  ",resetDefaults:" ",saveChanges:" ",savedSuccess:"     ",resetSuccess:"   ",confirmReset:"         ",tabs:{providers:" ",features:"",limits:" ",prompts:" ",safety:" "},providers:{title:"  ",description:"  OpenAI  Gemini  Anthropic",default:"",enabled:"",disabled:"",apiKey:" API",apiKeyPlaceholder:"  API",apiKeyNote:"      Replit AI",model:"",maxTokens:"  ",rateLimit:" ",perMinute:" ",perDay:" ",chat:"",imageGen:" ",vision:"",audio:"",setDefault:" "},features:{customerTitle:" ",customerDesc:"    ",adminTitle:" ",adminDesc:"    ",marketingTitle:" ",enableAIAssistant:" ",enableAIAssistantDesc:"     ",enableAIProductSearch:" ",enableAIProductSearchDesc:"     ",enableAIPartMatching:" ",enableAIPartMatchingDesc:"   ",enableAIVinDecoding:"  VIN",enableAIVinDecodingDesc:"     ",enableAIPriceAnalysis:" ",enableAIPriceAnalysisDesc:"  ",enableAITranslation:" ",enableAITranslationDesc:"  ",enableAIOrderAnalysis:" ",enableAIOrderAnalysisDesc:"   ",enableAICustomerInsights:" ",enableAICustomerInsightsDesc:"  ",enableAIReports:" ",enableAIReportsDesc:"  ",enableAIFraudDetection:" ",enableAIFraudDetectionDesc:"  ",enableAIInventoryPrediction:" ",enableAIInventoryPredictionDesc:"  ",enableAIContentGeneration:" ",enableAIContentGenerationDesc:"   ",enableAICampaignOptimization:" ",enableAICampaignOptimizationDesc:"   "},limits:{title:" ",description:"     ",dailyRequests:" ",monthlyRequests:" ",maxTokens:"    ",role:{customer:"",admin:"",super_admin:" "}},prompts:{title:" ",description:"    ",customerAssistant:"  ",customerAssistantDesc:"   ",productSearch:"  ",productSearchDesc:"   ",partMatching:" ",partMatchingDesc:"    "},safety:{title:" ",description:"   ",contentModeration:" ",contentModerationDesc:"   ",blockedTopics:" ",blockedTopicsDesc:"      ",addTopic:"   Enter",maxConversation:"  ",maxConversationDesc:"     ",trackUsage:" ",trackUsageDesc:"   ",trackCosts:" ",trackCostsDesc:"  API"}},_ie={portalTitle:" ",dashboard:" ",products:"",requests:" ",settings:"",notifications:"",totalProducts:" ",activeProducts:" ",pendingRequests:" ",quotesSubmitted:" ",quotesAccepted:" ",totalRevenue:" ",active:"",inactive:" ",accepted:"",recentRequests:" ",viewAll:" ",noRequests:"  ",quickActions:" ",addProduct:" ",importProducts:" ",viewRequests:" ",performance:"",avgResponseTime:"  ",rating:"",searchProducts:"  ...",searchRequests:"  ...",import:"",export:"",noProducts:"  ",addFirstProduct:"   ",sku:" ",productName:" ",brand:"",price:"",stock:"",minOrder:" ",category:"",oemNumber:" OEM",editProduct:" ",add:"",allStatuses:" ",customer:"",quantity:"",deadline:" ",received:" ",submitQuote:" ",reject:"",quotedAt:" ",status:{new:"",viewed:" ",quoted:" ",accepted:"",rejected:""},urgency:{low:"",medium:"",high:"",urgent:"",normal:""},settingsTitle:" ",defaultPriceMarkup:"  ",defaultDeliveryTime:"  ",deliveryDaysHint:" ",notifyNewRequest:"    ",notifyQuoteAccepted:"   ",notifyDeadline:"    ",submitQuoteTitle:"  ",requestDetails:" ",part:"",yourPrice:"",availableStock:" ",quoteNotes:" ",sendQuote:" ",importComplete:" ",importFailed:" ",totalRows:" ",inserted:" ",updated:" ",skipped:" ",errors:"",row:"",dropExcelFile:"  Excel    ",startImport:" ",importing:" ...",productAdded:"   ",productUpdated:"   ",productDeleted:"  ",productAddError:"   ",productUpdateError:"   ",productDeleteError:"   ",confirmDeleteProduct:"      ",quoteSent:"   ",quoteError:"   ",requestRejected:"  ",rejectError:"   ",rejectReason:"  ()",settingsSaved:"  ",settingsError:"   ",importSuccess:"  ",importError:"   ",exportSuccess:"   ",added:"",thisMonthRevenue:"  ",team:"",addEmployee:" ",editEmployee:" ",employeeAdded:"   ",employeeUpdated:"   ",noEmployees:"    ",addFirstEmployee:"     "},kie={title:"  ",subtitle:"     ",filters:"",toolType:" ",status:"",dateFrom:" ",dateTo:" ",totalUsage:"",noRecords:"  ",noRecordsDesc:"     ",detailsTitle:" ",loadError:"    ",col:{date:"",tool:"",input:"",output:"",status:"",actions:""},processingTime:" ",inputFile:" ",outputFile:" ",errorMessage:" ",deviceType:"",additionalInfo:" ",confidence:"",suppliersCompared:" ",pagesProcessed:""},Oie={title:"  ",subtitle:"/    ",settingsTab:"",analyticsTab:"",usageLogTab:" ",filters:"",search:"",searchPlaceholder:" VIN ...",toolType:" ",status:"",dateFrom:" ",dateTo:" ",clearFilters:"",export:"",totalActions:" ",successful:"",failed:"",successRate:" ",noRecords:"  ",exportSuccess:"   ",exportError:"   ",loadError:"    ",col:{date:"",customer:"",tool:"",input:"",output:"",status:"",actions:""},detailTitle:" ",processingTime:" ",inputDetails:"",outputDetails:"",showing:""},Iie={VIN:" VIN",PDF_EXCEL:" PDF  Excel",COMPARISON:" ",ALTERNATIVES:" ",SEARCH:" ",EXCEL_QUOTE:"  Excel"},Rie={SUCCESS:"",FAILED:"",PENDING:" ",PROCESSING:" "},Pie={viewImage:" ",noImage:"  ",loadError:"  ",magnifierHint:"    ",uploadImage:" ",addToGallery:" ",removeImage:" ",setAsMain:"  ",mainImage:" ",gallery:"",imageOf:" {{current}}  {{total}}",settings:{title:"  ",enabled:"  ",enabledDesc:"      ",supplierUpload:"  ",supplierUploadDesc:"    ",maxSize:"   ()",maxSizeDesc:"   "}},Die={button:" ",title:" ",subtitle:"    ",typeLabel:" ",subjectLabel:"",subjectPlaceholder:"  ...",descriptionLabel:"",descriptionPlaceholder:"  ...",submitButton:" ",submitting:" ...",successTitle:"   ",successMessage:" !      ",errorMessage:"    ",guest:"",types:{BUG:" ",FEATURE:"  ",IMPROVEMENT:"",COMPLAINT:"",OTHER:""},categories:{bug:" ",suggestion:"",complaint:"",question:"",other:""},priorities:{low:"",medium:"",high:"",critical:""}},Mie={title:" ",subtitle:"   ",allFeedback:" ",filters:"",type:"",status:{NEW:"",IN_PROGRESS:" ",IN_REVIEW:" ",RESOLVED:" ",CLOSED:"",DISMISSED:""},priority:{LOW:"",MEDIUM:"",HIGH:"",CRITICAL:""},dateRange:" ",search:"...",noFeedback:"  ",loading:" ...",export:"",refresh:"",markAsRead:" ",delete:"",adminNotes:" ",adminNotesPlaceholder:"  ...",saveNotes:" ",updateStatus:" ",updatePriority:" ",customerInfo:" ",feedbackDetails:" ",submittedAt:" ",lastUpdated:" ",actions:"",stats:{total:" ",new:"",inProgress:" ",resolved:" ",closed:"",byType:" ",byPriority:" "},senderType:{CUSTOMER:"",SUPPLIER:"",MARKETER:"",EMPLOYEE:"",ADMIN:"",GUEST:""},exportSuccess:"   ",exportError:"   ",updateSuccess:"  ",updateError:"  ",deleteConfirm:"      ",deleteSuccess:"   ",deleteError:"   "},Lie={title:" ",subtitle:"   ",tabs:{templates:"",logs:" ",settings:""},channels:{WHATSAPP:"",EMAIL:" ",NOTIFICATION:""},events:{QUOTE_CREATED:"  ",QUOTE_APPROVED:"   ",ORDER_CREATED:" ",ORDER_SHIPPED:" ",PASSWORD_RESET:"   ",ACCOUNT_ACTIVATED:" ",WELCOME_MESSAGE:" ",PAYMENT_REMINDER:" ",SUPPLIER_APPLICATION_APPROVED:"  "},status:{PENDING:"",SENT:" ",DELIVERED:" ",FAILED:""},table:{event:"",template:"",status:"",actions:""},logs:{recipient:"",event:"",channel:"",status:"",sentAt:" ",empty:"    ",unknown:" "},settings:{channels:" ",defaultLanguage:"  "},form:{name:" ",subject:" ",body:" ",variables:" ",isActive:" "},default:"",noTemplate:"  ",active:"",inactive:"",createTemplate:" ",editTemplate:" ",preview:" ",sendTest:" ",send:"",test:{phone:" ",email:" ",userId:" "},testSuccess:"    ",testFailed:"  ",confirmDelete:"      ",searchLogs:"   ..."},Fie={common:Lne,login:Fne,loading:Une,intro:zne,marketing:Bne,guestMode:$ne,register:qne,nav:Hne,dashboard:Vne,products:Gne,orders:Wne,cart:Qne,customers:Kne,users:Jne,roles:Yne,permissions:Xne,settings:Zne,accountRequests:eie,statusLabels:tie,reports:sie,notifications:aie,errors:rie,confirmations:nie,admin:iie,homepage:lie,sidebar:oie,customerDashboard:cie,adminDashboard:die,adminCustomers:uie,adminSettings:mie,adminOrders:fie,adminAccounts:hie,adminAccountRequests:xie,adminQuotes:pie,adminProducts:gie,adminUsers:bie,accessDenied:vie,adminQuoteManager:yie,adminMissingParts:Nie,adminImport:jie,installment:wie,adminMarketers:Sie,adminAdvertising:Aie,adminInstallments:Eie,adminPortalSettings:Cie,aiSettings:Tie,supplier:_ie,traderHistory:kie,traderToolsAdmin:Oie,toolTypes:Iie,toolStatus:Rie,productImages:Pie,feedback:Die,feedbackAdmin:Mie,messaging:Lie},Uie={appName:"Sini Car",siniCar:"Sini Car",appSlogan:"Wholesale Auto Parts Portal",loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",add:"Add",search:"Search",filter:"Filter",reset:"Reset",back:"Back",next:"Next",previous:"Previous",close:"Close",submit:"Submit",yes:"Yes",no:"No",all:"All",none:"None",export:"Export",import:"Import",refresh:"Refresh",view:"View",details:"Details",actions:"Actions",status:"Status",date:"Date",time:"Time",total:"Total",price:"Price",quantity:"Quantity",name:"Name",email:"Email",phone:"Phone",address:"Address",city:"City",region:"Region",country:"Country",notes:"Notes",description:"Description",active:"Active",inactive:"Inactive",enabled:"Enabled",disabled:"Disabled",success:"Success",error:"Error",warning:"Warning",info:"Info",noData:"No data",noResults:"No results found",selectOption:"Select an option",required:"Required",optional:"Optional",language:"Language",welcome:"Welcome",page:"Page",of:"of",currency:"SAR",order:"Order",notSpecified:"Not specified",sort:"Sort",download:"Download",upload:"Upload",first:"First",last:"Last",selectAll:"Select All",deselectAll:"Deselect All"},zie={wholesaleLogin:"Wholesale Customer Login",b2bPortal:"SINI CAR B2B PORTAL",ownerLogin:"Business Owner",staffLogin:"Staff Login",clientId:"Client ID",phoneNumber:"Phone Number",password:"Password",activationCode:"Activation Code",rememberMe:"Remember me",forgotPassword:"Forgot password?",enter:"Login",verifying:"Verifying...",secureConnection:"SECURE CONNECTION ENCRYPTED",securityNote:"This system is protected with high-level security protocols. All operations are logged and monitored.",openNewAccount:"Request New Account",invalidCredentials:"Invalid credentials",loginSuccess:"Login successful",logoutSuccess:"Logout successful",enterAsGuest:"Browse as Guest",guest:"Guest",guestWelcome:"Welcome as a guest! You can browse products only",title:"Login",subtitle:"Enter your credentials to continue",phone:"Phone Number",phonePlaceholder:"Enter phone number",passwordPlaceholder:"Enter password",loginButton:"Login",loggingIn:"Logging in...",noAccount:"Don't have an account?",registerHere:"Register here",errors:{phoneRequired:"Phone number is required",passwordRequired:"Password is required",invalidCredentials:"Invalid credentials",accountSuspended:"Account is suspended",tooManyAttempts:"Too many attempts. Try later"},success:"Login successful",quickLoginForTesting:"Quick Login for Testing",quickAdmin:"Super Admin",quickManager:"Admin",quickStaff:"Staff",quickCustomer:"Customer",quickSupplier:"Supplier",quickMarketer:"Marketer"},Bie={verifyingCredentials:"Verifying Secure Credentials",connectingWarehouse:"Connecting to Global Warehouse",loadingCatalog:"Fetching Product Catalog",applyingDiscounts:"Applying Exclusive Wholesale Rates",syncingInventory:"Syncing Real-time Inventory",optimizingLogistics:"Optimizing Logistics Routes",finalizingSetup:"Finalizing Dashboard Setup",accessGranted:"Access Granted"},$ie={mainServer:"Main Server",connectingServer:"Connecting and verifying identity...",dataSync:"Data Sync",syncingData:"Updating price lists and inventory...",logistics:"Logistics Connection",connectingWarehouses:"Connecting to Sini Car central warehouses..."},qie={dismiss:"Dismiss",campaignOf:"Campaign {{current}} of {{total}}",next:"Next",understood:"Got it"},Hie={restrictedTitle:"Exclusive B2B Wholesale Service",restrictedSubtitle:"Sini Car Business Platform",restrictedMessage:"We exclusively serve:",targetAudience:{partsStores:"Auto Parts Stores",insuranceCompanies:"Insurance Companies",rentalCompanies:"Car Rental Companies",salesReps:"Sales Representatives & Agents"},benefitsTitle:"Full Membership Benefits",benefits:{prices:"Competitive wholesale prices",catalog:"Complete parts catalog",orders:"Fast orders with real-time tracking",support:"Dedicated technical support"},callToAction:"If you're in one of these industries, register now for full membership access!",loginButton:"Login",requestAccountButton:"Request New Account",browseOnly:"Continue Browsing",blurredResultsNote:"Register to view details and prices",loginToAccess:"Login for full access",searchDisabled:"Login to search products"},Vie={title:"New Account Request",openNewAccount:"Open New Account",subtitle:"Join Sini Car certified network and benefit from wholesale prices, fast shipping, and specialized technical support.",businessInfo:"Business Information",businessName:"Business Name",businessNameAr:"Business Name (Arabic)",businessNameEn:"Business Name (English)",commercialRegister:"Commercial Register",taxNumber:"Tax Number",businessType:"Business Type",selectBusinessType:"Select Business Type",contactInfo:"Contact Information",ownerName:"Contact Person Name",ownerPhone:"Owner Phone",ownerEmail:"Email Address (Optional)",addressInfo:"Address Information",fullAddress:"Full Address",nationalAddress:"National Address (Short)",nationalAddressPlaceholder:"e.g., RDJ2929",city:"City",region:"Region",postalCode:"Postal Code",branchesCount:"Number of Branches",submitRequest:"Submit Account Request",backToLogin:"Back to Login",requestSuccess:"Your request has been received successfully!",requestPending:"Your request is under review",requestSuccessMessage:"Thank you for your interest. Sini Car customer relations team will review the data and contact you to activate your account and send login credentials.",backToHome:"Back to Home",benefits:{exclusivePrices:"Exclusive wholesale prices",instantAccess:"Instant inventory access",taxInvoices:"Certified tax invoices"},businessTypes:{sparePartsShop:"Spare Parts Shop",maintenanceCenter:"Maintenance Center",insuranceCompany:"Insurance Company",rentalCompany:"Car Rental",salesRep:"Sales Representative",workshop:"Maintenance Workshop",store:"Parts Store",distributor:"Distributor",agency:"Agency",other:"Other"},salesRepFields:{fullName:"Full Name",phone:"Phone Number",region:"Region / Cities Covered",email:"Email (Optional)",clientsType:"Clients Type (workshops, shops...)",clientsCount:"Approximate Clients Count"},documents:{title:"Required Documents",requiredDocuments:"Required Documents",instructions:"Please upload the following documents in PDF or clear image format. They will be reviewed by the approval team.",uploadNotice:"Please upload the following documents in PDF or clear image format. They will be reviewed by the approval team.",crCertificate:"Commercial Register Certificate",vatCertificate:"VAT Registration Certificate",nationalId:"National ID Copy",nationalAddressCert:"National Address Certificate",clickToUpload:"Click to upload file",fileTypes:"PDF, JPEG, PNG, WebP (max 5MB)",uploadSuccess:"uploaded successfully",invalidFileType:"Invalid file type. Please use PDF or images (JPEG, PNG, WebP)",fileTooLarge:"File too large. Maximum size is 5MB"},businessFields:{businessName:"Business Name",branchesCount:"Number of Branches",city:"City",nationalAddress:"National Address (Short)",nationalAddressPlaceholder:"e.g., RDJ2929",commercialReg:"Commercial Register",vatNumber:"VAT Number",contactPerson:"Contact Person",phone:"Phone Number",emailOptional:"Email (Optional)"},success:{title:"Your request has been received successfully!",message:"Thank you for your interest. Sini Car customer relations team will review the data and contact you to activate your account and send login credentials.",backToHome:"Back to Home"},validation:{phoneRequired:"Phone number is required",fullNameRequired:"Full name is required",regionRequired:"Region is required",businessNameRequired:"Business name is required",cityRequired:"City is required",contactPersonRequired:"Contact person name is required",commercialRegRequired:"Commercial register is required",vatRequired:"VAT number is required",nationalAddressRequired:"National address is required",documentRequired:"is required"},additionalNotes:"Additional Notes",submitting:"Submitting...",submitError:"An error occurred during submission"},Gie={home:"Home",dashboard:"Dashboard",products:"Products",catalog:"Catalog",orders:"Orders",myOrders:"My Orders",cart:"Cart",customers:"Customers",users:"Users",roles:"Roles",settings:"Settings",profile:"Profile",notifications:"Notifications",reports:"Reports",analytics:"Analytics",help:"Help",support:"Support",about:"About",contact:"Contact Us",logout:"Logout",accountRequests:"Account Requests",statusLabels:"Status Labels",systemSettings:"System Settings"},Wie={title:"Dashboard",welcome:"Welcome",overview:"Overview",statistics:"Statistics",recentOrders:"Recent Orders",recentActivity:"Recent Activity",quickActions:"Quick Actions",totalSales:"Total Sales",totalOrders:"Total Orders",totalCustomers:"Total Customers",totalProducts:"Total Products",pendingOrders:"Pending Orders",processingOrders:"Processing Orders",completedOrders:"Completed Orders",cancelledOrders:"Cancelled Orders",revenue:"Revenue",salesChart:"Sales Chart",topProducts:"Top Selling Products",topCustomers:"Top Customers",lowStock:"Low Stock",newCustomers:"New Customers",monthlyRevenue:"Monthly Revenue",weeklyOrders:"Weekly Orders",dailySales:"Daily Sales",customerDashboard:"Customer Dashboard",adminDashboard:"Admin Dashboard"},Qie={title:"Products",catalog:"Product Catalog",addProduct:"Add Product",editProduct:"Edit Product",deleteProduct:"Delete Product",productDetails:"Product Details",productName:"Product Name",productNameAr:"Product Name (Arabic)",productNameEn:"Product Name (English)",sku:"SKU",barcode:"Barcode",category:"Category",subcategory:"Subcategory",brand:"Brand",manufacturer:"Manufacturer",price:"Price",wholesalePrice:"Wholesale Price",retailPrice:"Retail Price",costPrice:"Cost Price",stock:"Stock",stockQuantity:"Stock Quantity",minStock:"Minimum Stock",maxStock:"Maximum Stock",unit:"Unit",weight:"Weight",dimensions:"Dimensions",image:"Image",images:"Images",specifications:"Specifications",description:"Description",shortDescription:"Short Description",longDescription:"Long Description",tags:"Tags",status:"Status",available:"Available",outOfStock:"Out of Stock",discontinued:"Discontinued",featured:"Featured",newArrival:"New Arrival",bestSeller:"Best Seller",onSale:"On Sale",discount:"Discount",addToCart:"Add to Cart",buyNow:"Buy Now",quantity:"Quantity",totalPrice:"Total Price",searchProducts:"Search products...",filterByCategory:"Filter by Category",filterByBrand:"Filter by Brand",filterByPrice:"Filter by Price",sortBy:"Sort by",priceAsc:"Price: Low to High",priceDesc:"Price: High to Low",nameAsc:"Name: A-Z",nameDesc:"Name: Z-A",newest:"Newest",oldest:"Oldest",noProducts:"No products found",productAdded:"Product added successfully",productUpdated:"Product updated successfully",productDeleted:"Product deleted successfully"},Kie={title:"Orders",myOrders:"My Orders",allOrders:"All Orders",newOrder:"New Order",createOrder:"Create Order",orderDetails:"Order Details",orderNumber:"Order Number",orderDate:"Order Date",orderStatus:"Order Status",orderItems:"Order Items",orderTotal:"Order Total",subtotal:"Subtotal",tax:"Tax",shipping:"Shipping",discount:"Discount",grandTotal:"Grand Total",paymentMethod:"Payment Method",paymentStatus:"Payment Status",shippingAddress:"Shipping Address",billingAddress:"Billing Address",trackOrder:"Track Order",cancelOrder:"Cancel Order",reorder:"Reorder",printInvoice:"Print Invoice",downloadInvoice:"Download Invoice",orderConfirmed:"Order Confirmed",orderShipped:"Shipped",orderDelivered:"Delivered",orderCancelled:"Cancelled",orderPending:"Pending",orderProcessing:"Processing",orderCompleted:"Completed",orderRefunded:"Refunded",noOrders:"No orders found",searchOrders:"Search orders...",filterByStatus:"Filter by Status",filterByDate:"Filter by Date",orderCreated:"Order created successfully",orderUpdated:"Order updated successfully",orderCancelledSuccess:"Order cancelled successfully"},Jie={title:"Shopping Cart",emptyCart:"Your cart is empty",addItems:"Add products to your cart",continueShopping:"Continue Shopping",checkout:"Checkout",clearCart:"Clear Cart",updateCart:"Update Cart",itemAdded:"Item added to cart",itemRemoved:"Item removed from cart",cartUpdated:"Cart updated",cartCleared:"Cart cleared",proceedToCheckout:"Proceed to Checkout",estimatedTotal:"Estimated Total"},Yie={title:"Customers",allCustomers:"All Customers",addCustomer:"Add Customer",editCustomer:"Edit Customer",customerDetails:"Customer Details",customerName:"Customer Name",clientId:"Client ID",businessName:"Business Name",contactPerson:"Contact Person",phone:"Phone",email:"Email",address:"Address",city:"City",region:"Region",creditLimit:"Credit Limit",currentBalance:"Current Balance",totalPurchases:"Total Purchases",lastOrder:"Last Order",status:"Status",activeCustomer:"Active Customer",inactiveCustomer:"Inactive Customer",blockedCustomer:"Blocked Customer",verifiedCustomer:"Verified Customer",pendingVerification:"Pending Verification",searchCustomers:"Search customers...",noCustomers:"No customers found",customerAdded:"Customer added successfully",customerUpdated:"Customer updated successfully",customerDeleted:"Customer deleted successfully"},Xie={title:"Users",allUsers:"All Users",addUser:"Add User",editUser:"Edit User",deleteUser:"Delete User",userDetails:"User Details",username:"Username",fullName:"Full Name",email:"Email",phone:"Phone",role:"Role",permissions:"Permissions",status:"Status",activeUser:"Active User",inactiveUser:"Inactive User",lastLogin:"Last Login",createdAt:"Created At",searchUsers:"Search users...",noUsers:"No users found",userAdded:"User added successfully",userUpdated:"User updated successfully",userDeleted:"User deleted successfully",passwordReset:"Password reset successfully",sendPasswordReset:"Send Password Reset"},Zie={title:"Roles & Permissions",allRoles:"All Roles",addRole:"Add Role",editRole:"Edit Role",deleteRole:"Delete Role",roleDetails:"Role Details",roleName:"Role Name",roleDescription:"Role Description",permissions:"Permissions",assignedUsers:"Assigned Users",superAdmin:"Super Admin",admin:"Admin",manager:"Manager",salesManager:"Sales Manager",salesAgent:"Sales Agent",viewer:"Viewer",customer:"Customer",staff:"Staff",noRoles:"No roles found",roleAdded:"Role added successfully",roleUpdated:"Role updated successfully",roleDeleted:"Role deleted successfully"},ele={title:"Permissions",viewDashboard:"View Dashboard",viewProducts:"View Products",manageProducts:"Manage Products",viewOrders:"View Orders",manageOrders:"Manage Orders",viewCustomers:"View Customers",manageCustomers:"Manage Customers",viewUsers:"View Users",manageUsers:"Manage Users",viewRoles:"View Roles",manageRoles:"Manage Roles",viewSettings:"View Settings",manageSettings:"Manage Settings",viewReports:"View Reports",exportData:"Export Data",importData:"Import Data",deleteData:"Delete Data",fullAccess:"Full Access"},tle={title:"Settings",general:"General",appearance:"Appearance",language:"Language",selectLanguage:"Select Language",notifications:"Notifications",security:"Security",privacy:"Privacy",account:"Account",profile:"Profile",changePassword:"Change Password",twoFactorAuth:"Two-Factor Authentication",sessions:"Sessions",apiKeys:"API Keys",webhooks:"Webhooks",integrations:"Integrations",backup:"Backup",restore:"Restore",export:"Export",import:"Import",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",autoMode:"Auto",timezone:"Timezone",dateFormat:"Date Format",currency:"Currency",settingsSaved:"Settings saved",settingsReset:"Settings reset"},sle={title:"Account Requests",pending:"Pending",approved:"Approved",rejected:"Rejected",underReview:"Under Review",requestDate:"Request Date",reviewDate:"Review Date",reviewedBy:"Reviewed By",approve:"Approve",reject:"Reject",requestDetails:"Request Details",noRequests:"No requests found",requestApproved:"Request approved",requestRejected:"Request rejected"},ale={title:"Status Labels",addLabel:"Add Label",editLabel:"Edit Label",deleteLabel:"Delete Label",labelName:"Label Name",labelNameAr:"Label Name (Arabic)",labelNameEn:"Label Name (English)",labelColor:"Label Color",labelType:"Label Type",orderStatus:"Order Status",customerStatus:"Customer Status",productStatus:"Product Status",noLabels:"No labels found",labelAdded:"Label added successfully",labelUpdated:"Label updated successfully",labelDeleted:"Label deleted successfully"},rle={title:"Reports",salesReport:"Sales Report",ordersReport:"Orders Report",customersReport:"Customers Report",productsReport:"Products Report",inventoryReport:"Inventory Report",financialReport:"Financial Report",generateReport:"Generate Report",downloadReport:"Download Report",printReport:"Print Report",dateRange:"Date Range",from:"From",to:"To",today:"Today",yesterday:"Yesterday",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",custom:"Custom"},nle={title:"Notifications",allNotifications:"All Notifications",unread:"Unread",read:"Read",markAsRead:"Mark as Read",markAllAsRead:"Mark All as Read",clearAll:"Clear All",noNotifications:"No notifications",newOrder:"New Order",orderUpdate:"Order Update",newCustomer:"New Customer",lowStock:"Low Stock",paymentReceived:"Payment Received",systemUpdate:"System Update"},ile={somethingWrong:"Something went wrong",tryAgain:"Please try again",pageNotFound:"Page not found",accessDenied:"Access denied",sessionExpired:"Session expired",networkError:"Network error",serverError:"Server error",validationError:"Validation error",requiredField:"This field is required",invalidEmail:"Invalid email address",invalidPhone:"Invalid phone number",passwordMismatch:"Passwords do not match",weakPassword:"Password is too weak"},lle={deleteItem:"Are you sure you want to delete this item?",deleteItems:"Are you sure you want to delete selected items?",cancelOrder:"Are you sure you want to cancel this order?",logout:"Are you sure you want to logout?",clearCart:"Are you sure you want to clear the cart?",discardChanges:"Are you sure you want to discard changes?",actionCannotBeUndone:"This action cannot be undone"},ole={panel:"Admin Panel",systemSettings:"System Settings",manageAll:"Full Management",superAdmin:"Super Admin",salesManager:"Sales Manager",salesAgent:"Sales Agent",viewer:"Viewer Only"},cle={welcomeBack:"Welcome back, {{name}}",totalOrders:"Total Orders",pendingRequests:"Pending Requests",approvedOrders:"Approved Orders",quickActions:"Quick Actions",fastShipping:"Fast Shipping",fastShippingDesc:"Delivery within 24-48 hours to major cities",qualityGuarantee:"Quality Guarantee",qualityGuaranteeDesc:"All parts guaranteed with clear return policy",support:"Expert Support",supportDesc:"Support team available 24/7 to help you",needHelp:"Need Help?",needHelpDesc:"Our team is ready to assist you with any inquiries",callUs:"Call Us",whatsapp:"WhatsApp"},dle={mainMenu:"Main Menu",management:"Management",supportSection:"Support",home:"Home",orders:"Order History",quotes:"Quote Requests",import:"Import from China",traderTools:"Trader Tools",history:"Search History",organization:"Organization Management",teamManagement:"Team Management",support:"About / Support",searchCredits:"Remaining Search Credits",unlimitedSearch:"Unlimited Search"},ule={heroTitle:"Sini Car Wholesale Platform",heroSubtitle:"Unified system for ordering and pricing Chinese auto parts for wholesale customers, insurance companies, rental companies, and parts stores.",searchTip:"Best results when searching by part number",searchPlaceholder:"Enter part number or description...",searching:"Searching...",noResults:"No results",pressSearch:"Press search button for exact search:",partNotAvailable:"Part currently unavailable",noResultsFor:"No results found for:",outOfStock:"Out of Stock",outOfStockMessage:"This part is currently out of stock",available:"Available",priceNotAvailable:"Price unavailable",showPrice:"Price",addToCartTip:"Click (Price) to view details and add product",whoWeServe:"Who We Serve?",partsStores:"Parts Stores",partsStoresDesc:"Organize wholesale orders, manage quotes, and track each order status accurately.",insuranceCompanies:"Insurance Companies",insuranceDesc:"Unified platform for parts requests for accident cases and official approvals management.",rentalCompanies:"Rental Companies",rentalDesc:"Prepare parts for vehicle fleets with complete records of previous orders.",salesReps:"Sales Representatives",salesRepsDesc:"Tool for organizing customer orders you manage in different regions and cities.",mainServices:"Sini Car Main Services",quoteRequests:"Quote Requests (Excel)",quoteRequestsDesc:"Upload your items file and get a complete quote for available and unavailable items in seconds.",importFromChina:"Import from China",importFromChinaDesc:"Custom form for import requests, with our import/export company in three Chinese cities.",wholesaleOrders:"Wholesale Order Management",wholesaleOrdersDesc:"Complete record for each order, with order status, invoice printing, and PDF download.",staffBranches:"Staff & Branch Linking",staffBranchesDesc:"Add staff to your account, set their permissions, and link orders to each branch or rep.",howItWorks:"How Does It Work?",step1Title:"Request Account",step1Desc:"Submit an account request via a form customized for your business type.",step2Title:"Approval & Activation",step2Desc:"We review your data and grant you search and wholesale ordering permissions.",step3Title:"Search & Pricing",step3Desc:"Use smart search by part number or upload Excel files.",step4Title:"Execution & Shipping",step4Desc:"We contact you to complete orders and shipping or special import.",whySiniCar:"Why Sini Car?",expertiseTitle:"Specialized Expertise",expertiseDesc:"Specialists in Chinese auto parts only, ensuring part accuracy.",techTitle:"Technical Integration",techDesc:"Direct link with inventory and accounting system for instant updates.",globalTitle:"Global Presence",globalDesc:"Private import/export offices in 3 major Chinese cities.",supportTitle:"B2B Technical Support",supportDesc:"Dedicated wholesale sales team available all week.",wholesaleCart:"Wholesale Orders Cart",emptyCart:"Cart is empty",useSearchToAdd:"Use search to add items",estimatedTotal:"Estimated Total",submitOrder:"Submit Order",fastShipping:"Fast Shipping",fastShippingDesc:"24-hour delivery to major cities and refrigerated shipping to remote areas.",techSupport:"Specialized Technical Support",techSupportDesc:"Dedicated wholesale sales team available all week.",searchHistory:"Search & View History",partNumber:"Part Number",productName:"Product Name",viewDate:"View Date",recordedPrice:"Recorded Price",noSearchHistory:"No search history yet",sar:"SAR",enterValidPartNumber:"Please enter a valid part number.",unexpectedError:"An unexpected error occurred. Please try again.",orderSubmitError:"Error submitting order",pageView:"Opened page:",addToCart:"Add to Cart",priceModal:{productDetails:"Product Details",wholesalePrice:"Wholesale Price",quantity:"Quantity",total:"Total",addToCart:"Add to Cart",close:"Close"},duplicateConfirm:{title:"Confirm Addition",message:"This product is already in the cart. Add more quantity?",confirm:"Yes, Add Quantity",cancel:"Cancel"},orderSuccess:{title:"Order Submitted Successfully!",message:"We will contact you soon to complete the order"},welcome:"Welcome",dashboard:"Dashboard",searchProducts:"Search Products",search:"Search",recentOrders:"Recent Orders",viewAll:"View All",noRecentOrders:"No recent orders",recentQuotes:"Recent Quote Requests",noRecentQuotes:"No recent quote requests",quickActions:"Quick Actions",newOrder:"New Order",newQuote:"Quote Request",myAccount:"My Account",support:"Support",stats:{totalOrders:"Total Orders",pendingOrders:"Pending Orders",totalSpent:"Total Spent",searchPoints:"Search Points"},searchResults:"Search Results",cart:"Cart",checkout:"Checkout",total:"Total",currency:"SAR"},mle={mainSection:"Main",ordersCustomersSection:"Orders & Customers",settingsSection:"Settings",dashboard:"Dashboard",activityLog:"Activity Log",customerOrders:"Customer Orders",accountRequests:"Account Requests",customersCRM:"Customers (CRM)",quoteRequests:"Quote Requests",importRequests:"Import Requests",missingParts:"Missing Parts",orderShortages:"Order Shortages",products:"Products",users:"Users",systemSettings:"System Settings",marketingCenter:"Marketing Center",pricingCenter:"Pricing Center",traderTools:"Trader Tools",supplierMarketplace:"Supplier Marketplace",marketers:"Marketers",installments:"Installment Requests",advertising:"Advertising",customerPortalSettings:"Customer Portal Settings",aiSettings:"AI Settings",aiTraining:"AI Training",aiCommandCenter:"AI Command Center",connected:"System Connected",slowConnection:"Slow Connection",disconnected:"Disconnected",pageTitles:{dashboard:"Central Dashboard",ordersManager:"Customer Orders Management",activityLogs:"Activity Logs",accountRequests:"Account Opening Requests",customers:"Customer Database (CRM)",quotes:"Quote Requests Management",imports:"Import Requests",missing:"Missing Parts",orderShortages:"Order Shortages",settings:"General Settings",users:"User Management",products:"Products Management",marketing:"Marketing Center",pricing:"Pricing Center",traderTools:"Trader Tools Management",supplierMarketplace:"Supplier Marketplace Settings",marketers:"Marketers Management",installments:"Installment Requests Management",advertising:"Advertising Management",customerPortal:"Customer Portal Settings",teamSettings:"Organizations & Teams",aiSettings:"AI Settings",aiTraining:"AI Training Management",aiCommandCenter:"AI Command Center"},stats:{totalRevenue:"Total Revenue",todayRevenue:"Today's Revenue",pendingOrders:"Pending Orders",approvedOrders:"Approved Orders",shippedOrders:"Shipped Orders",cancelledOrders:"Cancelled Orders",totalProducts:"Total Products",outOfStock:"Out of Stock",activeBusinesses:"Active Businesses",pendingAccounts:"Pending Accounts",pendingQuotes:"Pending Quotes"},kpi:{revenue:"Revenue",orders:"Orders",inventory:"Inventory",customers:"Customers"},activity:{logins:"Logins",ordersCreated:"New Orders",quotesRequested:"Quote Requests",searchesPerformed:"Searches"},charts:{dailyOrders:"Daily Orders",dailyRevenue:"Daily Revenue",topCustomers:"Top Customers",topMissingParts:"Most Requested Parts",revenue:"Revenue"},views:{dashboard:"Dashboard",customers:"Customers",products:"Products",settings:"Settings",quotes:"Quote Requests",missing:"Missing Parts",orderShortages:"Order Shortages",importRequests:"Import Requests",accountRequests:"Account Requests",activityLogs:"Activity Log",ordersManager:"Customer Orders",adminUsers:"Users",marketing:"Marketing Center",pricing:"Pricing Center",traderTools:"Trader Tools",supplierMarketplace:"Supplier Marketplace",marketers:"Marketers",installments:"Installment Requests",advertising:"Advertising",teamSettings:"Organizations & Teams",customerPortal:"Customer Portal",aiSettings:"AI Settings",aiTraining:"AI Training",aiCommandCenter:"AI Command Center"},onlineUsers:{title:"Online Customers",subtitle:"Active in last 5 minutes",now:"Now",minutesAgo:"{{mins}} minutes ago",online:"Online",noOnlineUsers:"No customers online currently",moreOnline:"And {{count}} more customers online..."},activityLogs:{title:"Activity Log",activity:"activity",time:"Time",user:"User",event:"Event",details:"Details",noActivities:"No activities recorded"},generalManager:"General Manager",teamSettings:"Organizations & Teams"},fle={title:"Customer Database (CRM)",loading:"Loading data...",stats:{totalCustomers:"Total Customers",activeCustomers:"Active Customers",suspendedBlocked:"Suspended/Blocked",mostActiveCustomer:"Most Active Customer"},searchPlaceholder:"Search by business name, phone, or city...",allStatuses:"All Statuses",filters:{searchPlaceholder:"Search by name, phone, email, city...",allStatuses:"All Statuses",advanced:"Advanced Filters",customerType:"Customer Type",allTypes:"All Types",activityLevel:"Activity Level",allActivity:"All Activity",activeToday:"Active Today",activeWeek:"Active This Week",inactive30:"Inactive (30+ days)",marketer:"Assigned Marketer",allMarketers:"All Marketers",employee:"Assigned Employee",allEmployees:"All Employees",clearAll:"Clear All",resultsCount:"{{count}} customers found",mostOrders:"Most Orders",mostSearches:"Most Searches",lastActive:"Last Active"},table:{customer:"Customer",city:"City",priceLevel:"Price Level",ordersCount:"Orders Count",totalPurchases:"Total Purchases",status:"Status",actions:"Actions"},view:"View",noMatchingCustomers:"No matching customers found",status:{active:"Active",suspended:"Suspended",blocked:"Blocked",pending:"Pending Activation",inactive:"Inactive"},addCustomer:{button:"Add New Customer",title:"Add New Customer",subtitle:"Enter the new customer details",saving:"Saving...",submit:"Save Customer",success:"Customer account created successfully",fields:{companyName:"Company Name",phone:"Phone Number",email:"Email Address",city:"City",region:"Region",customerType:"Business Type",priceLevel:"Price Level",crNumber:"Commercial Register Number",taxNumber:"Tax Number",nationalAddress:"National Address",contactPerson:"Contact Person",searchPoints:"Search Points",branchesCount:"Number of Branches",status:"Account Status",internalNotes:"Internal Notes"},placeholders:{companyName:"Enter company or business name",selectCity:"Select city",selectRegion:"Select region",nationalAddress:"e.g., RRRD1234, 1234, Al Nakheel, Riyadh",contactPerson:"Contact person name",internalNotes:"Internal notes for admin only..."},types:{autoPartsShop:"Auto Parts Shop",maintenanceCenter:"Maintenance Center",autoShowroom:"Auto Showroom",carRental:"Car Rental Company",government:"Government Entity",other:"Other"},priceLevels:{level1:"Level 1 (Default)",level2:"Level 2",level3:"Level 3",special:"Special Pricing"},errors:{companyNameRequired:"Company name is required",phoneRequired:"Phone number is required",cityRequired:"City is required",failed:"Failed to create customer account"}},errors:{loadFailed:"Failed to load customer data"},panel:{title:"Customer Profile",tabs:{overview:"Overview",orders:"Orders",activity:"Activity"},businessInfo:"Business Information",companyName:"Company Name",city:"City",phone:"Phone",crNumber:"Commercial Register",priceLevel:"Price Level",customerType:"Customer Type",accountStatus:"Account Status",searchBalance:"Search Balance",staffUsers:"Staff Users",accessValidity:"Access Validity",ordersHistory:"Orders History",activityLog:"Activity Log"},toast:{loadError:"Failed to load database"},detail:{tabs:{overview:"Overview",orders:"Orders",quotes:"Quotes",staff:"Staff",security:"Security & Access",notes:"Notes"},accountManagement:"Account Management",changeStatus:"Change Status",statusActive:"Active",statusSuspended:"Suspend",statusBlocked:"Block",suspendUntil:"Suspend Until Date",saving:"Saving...",saveChanges:"Save Changes",statusUpdated:"Customer status updated",errorOccurred:"An error occurred",priceDisplayType:"Price Display Type",pricesVisible:"Prices always visible - No points system",pricesHidden:"Prices hidden - Requires search points to reveal",visibleNoPoints:"Visible prices (No points)",hiddenWithPoints:"Hidden prices (With points)",visible:"visible",hidden:"hidden",priceDisplayChanged:"Price display changed to",searchWallet:"Search Wallet",addBalance:"Add Balance",deductBalance:"Deduct Balance",totalBalance:"Total Balance",used:"Used",remaining:"Remaining",joinDate:"Join Date",lastLogin:"Last Login",customerDocs:"Customer Documents",commercialRegistration:"Commercial Registration",vatCertificate:"VAT Certificate",nationalId:"National ID",notAttached:"Not attached",noDocument:"No document",enterPointsToAdd:"Enter points to add:",pointsAddedSuccess:"{{points}} points added successfully",currentBalance:"Current balance:",points:"points",enterPointsToDeduct:"Enter points to deduct:",cannotDeductMoreThan:"Cannot deduct more than remaining balance",pointsDeductedSuccess:"{{points}} points deducted successfully",errorDeductingPoints:"Error deducting points",staffStatusUpdated:"Staff status updated",customerOrders:"Customer Orders",noOrders:"No orders",orderNumber:"Order #",date:"Date",amount:"Amount",orderStatus:"Status",priceQuotes:"Price Quote Requests",noQuotes:"No quote requests",quoteNumber:"Quote #",items:"Items",staffMembers:"Customer Staff",noStaff:"No registered staff",staffName:"Staff Name",role:"Role",lastActive:"Last Active",action:"Action",suspend:"Suspend",activate:"Activate",securityAccessLogs:"Security & Access Logs",loginHistory:"Login History",device:"Device",ipAddress:"IP",location:"Location",adminNotes:"Admin Notes",notes:{adminNotes:"Admin Notes",noNotes:"No internal notes",addNote:"Add a new note...",placeholder:"Write admin notes here...",saveNote:"Save Note"},docs:{commercialReg:"Commercial Registration",taxNumber:"Tax Number",nationalAddress:"National Address",notAttached:"Not attached",notAvailable:"Not available"},staff:{staffMembers:"Staff Members",maxLimit:"Max Limit",owner:"Owner",active:"Active",suspended:"Suspended",suspendBtn:"Suspend",activateBtn:"Activate"},orders:{customerOrders:"Customer Orders",completed:"Completed",ongoing:"Ongoing",loadingOrders:"Loading orders...",noOrders:"No orders for this customer",unspecified:"Unspecified",products:"Products",item:"item",total:"Total",date:"Date",currency:"SAR",showingOf:"Showing {{shown}} of {{total}} orders"},quotes:{pricingRequests:"Quote Requests",approved:"Approved",new:"New",loadingQuotes:"Loading quote requests...",noQuotes:"No quote requests for this customer",unspecified:"Unspecified",items:"Items",item:"item",total:"Total",date:"Date",currency:"SAR",pendingPricing:"Pending Pricing",showingOf:"Showing {{shown}} of {{total}} quote requests",missing:"Missing",reviewedBy:"By"},security:{securityIndicators:"Security Indicators",failedLoginAttempts:"Failed Login Attempts",suspiciousBehavior:"Suspicious Behavior (Flag)",yes:"Yes",no:"No",resetCounter:"Reset Failure Counter",counterReset:"Counter reset",passwordReset:"Password Reset",passwordResetDesc:"You can reset the account owner's password here. A new password will be generated and the customer will be notified.",enterNewPassword:"Enter new password (at least 4 characters):",adminNotFound:"Error: Admin data not found",passwordResetError:"Error resetting password",passwordMinLength:"Password must be at least 4 characters",resetPasswordBtn:"Reset Password",recentLoginHistory:"Recent Login History",successfulLogin:"Successful Login",failedLogin:"Failed Login",passwordChanged:"Password Changed",passwordResetAdmin:"Reset (Admin)",noLogsAvailable:"No logs available"}}},hle={systemSettings:"System Settings",generalSettings:"General Settings",bannerManagement:"Banner Management",whySiniCar:"Why Sini Car?",textManagement:"Text Management",statusLabels:"System Statuses",apiIntegration:"API Integration",appearanceIdentity:"Appearance & Identity",siteSettings:"Basic Site Settings",saveChanges:"Save Changes",saving:"Saving...",siteName:"Site/Store Name",supportPhone:"Support Phone",salesWhatsApp:"Sales WhatsApp",supportEmail:"Support Email",newsTicker:"News Ticker",enableTicker:"Enable Ticker",tickerText:"Ticker Text",tickerSpeed:"Speed (1-10)",bgColor:"Background Color (Hex)",textColor:"Text Color (Hex)",productDisplaySettings:"Product Display & Search Settings",minVisibleQty:"Min Quantity for Product Visibility",minVisibleQtyNote:"Products with quantity below this will not be visible to customers (Default: 1)",stockThreshold:"Stock Threshold (Out of Stock)",stockThresholdNote:"Products with quantity at or below this will show as 'Out of Stock' (Default: 0)",settingsNote:"These settings affect search results and product display. Low stock products will show without price.",maintenanceMode:"Maintenance Mode",maintenanceModeDesc:"When enabled, the site will show as 'Closed for Maintenance' to all customers.",bannerAds:"Banner Ads Management",bannerAdsDesc:"Control images and offers displayed on the homepage",addNewBanner:"Add New Banner",newBannerData:"New Banner Data",mainTitle:"Main Title",subtitle:"Subtitle",buttonText:"Button Text (e.g., Shop Now)",colorScheme:"Color",imageUrl:"Image URL (Optional)",saveAndPublish:"Save & Publish",uiTextManagement:"UI Text Management",uiTextManagementDesc:"Edit labels and titles visible to customers directly here.",saveTexts:"Save Texts",erpIntegration:"ERP Integration Settings",erpIntegrationDesc:"Connect with Onyx ERP or any external system",connectionSettings:"Connection Settings",erpUrl:"Cloud ERP URL",apiToken:"API Token",syncFrequency:"Sync Frequency",realtime:"Real-time",every15Min:"Every 15 minutes",hourly:"Hourly",daily:"Daily",environment:"Environment",production:"Production (Live)",sandbox:"Sandbox (Test)",testConnection:"Test System Connection",connecting:"Connecting...",connectionSuccess:"Server connection successful (200 OK)",connectionFailed:"Connection failed: Auth token missing",sharedData:"Shared Data via API",sharedDataDesc:"Select data types to sync with external system",productsItems:"Products & Items",productsItemsDesc:"Names, prices, quantities",ordersData:"Orders",ordersDataDesc:"Customer orders and statuses",customersData:"Customers",customersDataDesc:"Customer data and accounts",quotesData:"Quote Requests",quotesDataDesc:"Custom price quotes",inventoryData:"Inventory",inventoryDataDesc:"Warehouse quantities",priceLists:"Price Lists",priceListsDesc:"Wholesale and retail prices",syncDirection:"Sync Direction",pullOnly:"Pull from ERP Only",pullOnlyDesc:"Import data from accounting system",pushOnly:"Push to ERP Only",pushOnlyDesc:"Send data to accounting system",bidirectional:"Bidirectional",bidirectionalDesc:"Full sync in both directions",webhooks:"Webhooks (Instant Notifications)",webhooksDesc:"Add URLs to receive instant notifications on events",addWebhook:"Add",events:"events",webhookAdded:"Webhook added successfully",loadingFailed:"Failed to load settings",settingsSaved:"Settings saved successfully",saveError:"Error saving settings",fillTitleAndDesc:"Please fill in title and description",bannerAdded:"Banner added",bannerDeleted:"Banner deleted",confirmDeleteBanner:"Are you sure you want to delete this banner?",hide:"Hide",show:"Show",darkGray:"Dark Gray (Default)",royalBlue:"Royal Blue",vibrantOrange:"Vibrant Orange",darkGreen:"Dark Green",loading:"Loading...",advancedSettings:"Advanced Settings",loggingLevel:"Logging Level",loggingLevelBasic:"Basic",loggingLevelDetailed:"Detailed",loggingLevelDebug:"Debug (For Developers)",retryOnFail:"Retry on Failure",retryAttempts:"attempts",timeout:"Response Timeout",seconds:"seconds",featureManagement:'"Why Sini Car?" Feature Management',featureManagementDesc:"Customize features displayed on the homepage. You can change texts, icons and colors.",addNewFeature:"Add New Feature",fillAllFields:"Please fill all fields",featureAdded:"Feature added successfully",featureDeleted:"Feature deleted",title:"Settings",description:"Description",icon:"Icon",iconBox:"Box",iconChart:"Chart",iconAnchor:"Anchor",iconHeadphones:"Headphones",iconTruck:"Truck",iconShield:"Shield",iconGlobe:"Globe",iconStar:"Star",iconClock:"Clock",iconAward:"Award",iconColor:"Icon Color",colorCyan:"Cyan",colorGreen:"Green",colorGold:"Gold",colorPurple:"Purple",colorRed:"Red",colorBlue:"Blue",colorPink:"Pink",colorOrange:"Orange",appearanceCustomization:"Appearance & Customization",primaryColor:"Primary Brand Color",primaryColorDesc:"This color affects buttons, links, and main headings.",siteLogo:"Site Logo",uploadNotAvailable:"Upload feature not available in demo version",clickToUploadLogo:"Click to upload logo",livePreview:"Live Preview",livePreviewDesc:"This is how the main button will look with the selected color",primaryButtonExample:"Primary Button Example",statusLabelsManagement:"System Status Labels Management",statusLabelsDescription:"Customize status labels and colors displayed in the dashboard and to customers. System statuses are protected and cannot be deleted, but you can modify their names and colors.",addNewStatus:"Add New Status",statusKey:"Key (English)",statusLabel:"Status Name",newStatus:"New Status",backgroundColor:"Background",preview:"Preview",add:"Add",statusUpdated:"Status updated successfully",fillKeyAndName:"Please fill in key and name",keyExists:"This key already exists",statusAdded:"New status added successfully",cannotDeleteSystem:"Cannot delete system status",cannotDeleteInUse:"Cannot delete, {{count}} records using this status",statusDeleted:"Status deleted successfully",defaultStatusSet:"Default status set",checkingUsage:"Checking usage...",confirmDelete:"Are you sure you want to delete?",yesDelete:"Yes, Delete",systemStatus:"System",defaultStatus:"Default",setAsDefault:"Set as Default",systemStatuses:"System Statuses",systemStatusesDesc:"Protected and cannot be deleted, but you can modify name and color only. These statuses are linked to core system logic.",defaultStatusInfo:"Default Status",defaultStatusInfoDesc:"Used when creating new records. You can set any status as default via the star icon.",statusCategories:{orderStatus:"Order Statuses (Customer Visible)",orderInternalStatus:"Internal Order Statuses",accountRequestStatus:"Account Request Statuses",quoteRequestStatus:"Quote Request Statuses",quoteItemStatus:"Quote Item Statuses",missingStatus:"Missing Parts Statuses",importRequestStatus:"Import Request Statuses",customerStatus:"Customer Statuses",staffStatus:"Staff Statuses"},guestMode:"Guest Mode",guestModeSettings:"Guest Mode Settings",guestModeSettingsDesc:"Control what unregistered visitors see when browsing the site. You can enable/disable different sections and adjust blur intensity.",guestBrowsingEnabled:"Enable Guest Browsing",guestBrowsingEnabledDesc:"Allow visitors to browse the site without logging in",visibleSections:"Visible Sections (with blur)",visibleSectionsDesc:"Select sections that will be visible to guests with blurred content",showBusinessTypes:'"Who We Serve" Section (Business Types)',showMainServices:"Main Services Section",showHowItWorks:'"How It Works" Section',showWhySiniCar:'"Why Sini Car" Section',showCart:"Side Shopping Cart",showMarketingCards:"Side Marketing Cards",blurSettings:"Blur Settings",blurIntensity:"Blur Intensity",blurLight:"Light",blurMedium:"Medium",blurHeavy:"Heavy",showBlurOverlay:"Show overlay on blurred content",showBlurOverlayDesc:'Shows "Login" button over blurred content',searchSettings:"Guest Search Settings",allowSearch:"Allow Search",allowSearchDesc:"Guests can use search (results are blurred)",showSearchResults:"Show Search Results",showSearchResultsDesc:"Display search results with blurred details",guestSettingsSaved:"Guest mode settings saved successfully",general:{title:"General Settings",siteName:"Site Name",siteDescription:"Site Description",contactEmail:"Contact Email",contactPhone:"Contact Phone",currency:"Currency",language:"Language",timezone:"Timezone",save:"Save",saved:"Settings saved"},business:{title:"Business Settings",minOrderAmount:"Minimum Order Amount",maxOrderAmount:"Maximum Order Amount",deliveryFee:"Delivery Fee",taxRate:"Tax Rate"},notifications:{title:"Notification Settings",emailNotifications:"Email Notifications",smsNotifications:"SMS Notifications",pushNotifications:"Push Notifications"},security:{title:"Security Settings",twoFactorAuth:"Two-Factor Authentication",sessionTimeout:"Session Timeout",maxLoginAttempts:"Max Login Attempts"}},xle={title:"Order Management",newOrders:"New Orders",inProgress:"In Progress",readyToShip:"Ready to Ship",totalOrders:"Total Orders",searchOrder:"Search by order number or customer name...",allStatuses:"All Statuses",allInternalStatuses:"All Internal Statuses",orderNumber:"Order Number",customer:"Customer",date:"Date",total:"Total",status:"Status",internalStatus:"Internal Status",actions:"Actions",noOrders:"No orders",orderDetails:"Order Details",customerInfo:"Customer Information",orderItems:"Order Items",statusHistory:"Status History",internalNotes:"Internal Notes",updateStatus:"Update Status",updateInternalStatus:"Update Internal Status",externalStatusUpdated:"External order status updated",internalStatusUpdated:"Internal order status updated",updateFailed:"Update failed",statusLabels:{pending:"Pending",approved:"Approved",shipped:"Shipped",delivered:"Delivered",rejected:"Rejected",cancelled:"Cancelled"},internalStatusLabels:{new:"New",sentToWarehouse:"Sent to Warehouse",waitingPayment:"Waiting Payment",paymentConfirmed:"Payment Confirmed",salesInvoiceCreated:"Sales Invoice Created",readyForShipment:"Ready for Shipment",completedInternal:"Completed Internally",cancelledInternal:"Cancelled Internally"},details:"Details",name:"Name",userId:"ID",product:"Product",quantity:"Quantity",price:"Price",itemTotal:"Total",grandTotal:"Grand Total",changedStatusTo:"changed status to",noHistory:"No previous history",externalStatus:"Customer Status (External)",externalStatusDesc:"Customer will be notified when this status changes.",noStatusPermission:"You don't have permission to change status",internalStatusTitle:"Internal Status",internalStatusDesc:"For admin use only. Not visible to customer.",notesPlaceholder:"Write a note about the status change...",saveNotes:"Save Notes",noInternalPermission:"You don't have permission to edit internal status",dangerZone:"Danger Zone",cancelOrder:"Cancel Order Permanently",noPermission:"No Permission",stats:{pending:"Pending",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled",total:"Total",new:"New",ready:"Ready for Shipment"},searchPlaceholder:"Search by order number or customer...",table:{orderId:"Order ID",customer:"Customer",items:"Items",total:"Total",date:"Date",status:"Status",actions:"Actions"},view:"View",approve:"Approve",ship:"Ship",deliver:"Deliver",cancel:"Cancel",orderUpdated:"Order updated",shippingInfo:"Shipping Info",paymentInfo:"Payment Info",noteAdded:"Note added"},ple={title:"Account Opening Requests",newRequests:"New Requests",underReview:"Under Review",approved:"Approved",rejected:"Rejected",searchAccount:"Search by business name or phone...",allStatuses:"All Statuses",businessName:"Business Name",phone:"Phone",requestDate:"Request Date",status:"Status",actions:"Actions",noRequests:"No requests found",requestDetails:"Request Details",businessInfo:"Business Information",contactInfo:"Contact Information",documents:"Documents",decision:"Decision",priceLevel:"Price Level",customerType:"Customer Type",searchPoints:"Search Points",initialPoints:"Initial Points",monthlyPoints:"Monthly Points",portalAccess:"Portal Access",startDate:"Start Date",endDate:"End Date",openEnded:"Open Ended",staffAccess:"Staff Access",canCreateStaff:"Can Create Staff",maxStaffUsers:"Max Staff Users",adminNotes:"Admin Notes",saveDecision:"Save Decision",decisionSaved:"Decision saved successfully",saveError:"Error saving decision",statusLabels:{new:"New Request",underReview:"Under Review",approved:"Approved",rejected:"Rejected",onHold:"On Hold"},documentTypes:{crCertificate:"Commercial Register",vatCertificate:"VAT Certificate",nationalId:"National ID",authorizationLetter:"Authorization Letter",other:"Other Document"}},gle={stats:{newRequests:"New Requests",underReview:"Under Review",approved:"Approved",rejected:"Rejected"},status:{new:"New Request",underReview:"Under Review",approved:"Approved",rejected:"Rejected",onHold:"On Hold"},docTypes:{crCertificate:"Commercial Registration",vatCertificate:"VAT Certificate",nationalId:"National ID",authLetter:"Authorization Letter",other:"Other Document"},categories:{spareParts:"Spare Parts Shop",rental:"Car Rental",insurance:"Insurance Company",agent:"Agent"},searchPlaceholder:"Search by business name, phone...",allStatuses:"All Statuses",table:{businessName:"Business / Customer Name",activityType:"Activity Type",city:"City",date:"Date",status:"Status",actions:"Actions"},approvedAccount:"Approved Account",view:"View",noMatchingRequests:"No matching requests",panel:{title:"Approval Request Details",customerData:"Customer Data",businessName:"Business Name",activity:"Activity",city:"City",contactNumber:"Contact Number",crNumber:"Commercial Registration",vatNumber:"VAT Number",customerNotes:"Customer Notes",attachedDocuments:"Attached Documents",adminDecision:"Admin Decision & Permissions"},form:{requestStatus:"Request Status",statusNew:"New",statusUnderReview:"Under Review",statusApproved:"Approved",statusRejected:"Rejected",statusOnHold:"On Hold",customerType:"Customer Type",typePartsShop:"Parts Shop",typeRentalCompany:"Rental Company",typeInsuranceCompany:"Insurance Company",typeSalesAgent:"Sales Agent",typeFleetCustomer:"Fleet Customer",typeOther:"Other",priceLevel:"Price Level",level1:"Level 1 (VIP - Best Price)",level2:"Level 2 (Wholesale)",level3:"Level 3 (Retail/Small)",levelSpecial:"Special",accessValidity:"Access Validity",to:"to",openEnded:"Open-ended (no expiry date)",searchPoints:"Search Points Balance",initialBalance:"Initial Balance",monthlyRenewal:"Monthly Renewal",allowAddStaff:"Allow Adding Staff",maxLimit:"Maximum Limit",adminNotes:"Admin Notes (Internal Use)",notesPlaceholder:"Write any notes about the review...",saveDecision:"Save Decision",cancel:"Cancel"},toast:{saveSuccess:"Decision saved successfully",saveError:"Error saving decision"}},ble={title:"Quote Request Management",pendingQuotes:"Pending Quotes",completedQuotes:"Completed Quotes",searchQuote:"Search by request number or customer...",allStatuses:"All Statuses",quoteNumber:"Request Number",customer:"Customer",date:"Date",itemsCount:"Items Count",status:"Status",actions:"Actions",noQuotes:"No quote requests",quoteDetails:"Quote Details",requestedItems:"Requested Items",response:"Response",sendResponse:"Send Response",stats:{new:"New",inProgress:"In Progress",completed:"Completed",approved:"Approved"},searchPlaceholder:"Search by quote ID, customer name...",table:{quoteId:"Quote ID",customer:"Customer",items:"Items",priceType:"Price Type",date:"Date",status:"Status",actions:"Actions"},view:"View",process:"Process",complete:"Complete",approve:"Approve",quoteUpdated:"Quote request updated",pricedItems:"Priced Items",missingItems:"Missing Items"},vle={title:"Product Management",subtitle:"Manage product catalog, prices and inventory",searchPlaceholder:"Search for product...",addProduct:"Add Product",importExcel:"Import Excel",exportExcel:"Export Excel",columnSettings:"Column Settings",visibilitySettings:"Visibility Settings",stats:{totalProducts:"Total Products",inStock:"In Stock",outOfStock:"Out of Stock",hidden:"Hidden"},table:{partNumber:"Part Number",name:"Product Name",brand:"Brand",quantity:"Quantity",price:"Price",visibility:"Visibility",actions:"Actions"},modal:{addTitle:"Add New Product",editTitle:"Edit Product",deleteConfirm:"Confirm Delete",deleteMessage:"Are you sure you want to delete this product?",importTitle:"Import from Excel",columnSettingsTitle:"Excel Column Settings"},form:{partNumber:"Part Number",name:"Product Name",brand:"Brand",quantity:"Quantity",price:"Price",costPrice:"Cost Price",description:"Description",isVisible:"Visible to Customers",save:"Save",cancel:"Cancel"},import:{selectFile:"Select Excel File",dragDrop:"Or drag and drop file here",processing:"Processing...",success:"Import successful",imported:"Imported",updated:"Updated",skipped:"Skipped",errors:"Errors"},validation:{partNumberRequired:"Part number is required",nameRequired:"Product name is required",priceInvalid:"Price is invalid",quantityInvalid:"Quantity is invalid"},toast:{productCreated:"Product added successfully",productUpdated:"Product updated successfully",productDeleted:"Product deleted successfully",importSuccess:"Products imported successfully",createError:"Failed to add product",updateError:"Failed to update product",deleteError:"Failed to delete product",importError:"Failed to import file",loadError:"Failed to load products",visibilityThresholdSaved:"Minimum display quantity saved"},presets:{title:"Import Column Settings",name:"Preset Name",isDefault:"Default",mappings:"Column Mappings",internalField:"Internal Field",excelHeader:"Excel Column",enabled:"Enabled",required:"Required",addPreset:"Add New Preset",editPreset:"Edit Preset",deletePreset:"Delete Preset",savePreset:"Save Preset",toast:{presetCreated:"Preset created successfully",presetUpdated:"Preset updated successfully",presetDeleted:"Preset deleted successfully",presetSetDefault:"Preset set as default"}},uploadExcel:"Upload Excel",downloadTemplate:"Download Template",loading:"Loading...",noProducts:"No products",noMatchingProducts:"No matching products",partNumber:"Part Number",productName:"Product Name",quantity:"Quantity",price:"Price",category:"Category",actions:"Actions",edit:"Edit",delete:"Delete",deleteConfirm:"Are you sure you want to delete this product?",productDeleted:"Product deleted",productSaved:"Product saved",productCreated:"Product created",importModal:{title:"Import Products",selectFile:"Select Excel file",importing:"Importing...",importSuccess:"Import successful",imported:"Added",updated:"Updated",skipped:"Skipped",errors:"Errors"},productModal:{editTitle:"Edit Product",addTitle:"Add New Product",save:"Save",cancel:"Cancel"},columnPresets:{title:"Excel Column Settings",presetName:"Preset Name",enterPresetName:"Please enter preset name",created:"Preset created successfully",saved:"Changes saved",deleteConfirm:"Are you sure you want to delete this preset?",deleted:"Preset deleted",setDefault:"Set as Default",isDefault:"Default"},visibility:{title:"Visibility Settings",threshold:"Minimum Visibility Threshold",saved:"Visibility settings saved"},pagination:{showing:"Showing",of:"of",products:"products",previous:"Previous",next:"Next"},selectProductsFirst:"Please select products first",selectedCount:"Selected {{count}} products",visibilityApplied:"Applied visibility rule to {{count}} products",visibilityRemoved:"Removed visibility rule from {{count}} products",loadFailed:"Failed to load products",importFailed:"Import failed",templateDownloaded:"Excel template downloaded",templateDownloadFailed:"Failed to download template",partAndNameRequired:"Part number and name are required",deleteFailed:"Failed to delete product"},yle={title:"User Management",subtitle:"Manage admin user accounts, roles and permissions",tabs:{users:"Users",roles:"Roles & Permissions"},searchPlaceholder:"Search by name, email...",allRoles:"All Roles",allStatuses:"All Statuses",addUser:"Add User",exportUsers:"Export Data",table:{user:"User",role:"Role",contact:"Contact",lastLogin:"Last Login",status:"Status",actions:"Actions",name:"Name",email:"Email",phone:"Phone"},status:{active:"Active",inactive:"Inactive",ACTIVE:"Active",SUSPENDED:"Suspended",PENDING:"Pending"},modal:{addTitle:"Add New User",editTitle:"Edit User",deleteConfirm:"Confirm Delete",deleteMessage:"Are you sure you want to delete this user?",resetPassword:"Reset Password",toggleStatus:"Change Status"},form:{fullName:"Full Name",username:"Username",email:"Email",phone:"Phone Number",role:"Role",password:"Password",newPassword:"New Password",confirmPassword:"Confirm Password",save:"Save",cancel:"Cancel"},validation:{nameRequired:"Name is required",usernameRequired:"Username is required",emailRequired:"Email is required",emailInvalid:"Email is invalid",passwordRequired:"Password is required",passwordMinLength:"Password must be at least 6 characters",roleRequired:"Role is required"},toast:{userCreated:"User created successfully",userUpdated:"User updated successfully",userDeleted:"User deleted successfully",passwordReset:"Password reset successfully",statusChanged:"User status changed",createError:"Failed to create user",updateError:"Failed to update user",deleteError:"Failed to delete user",loadError:"Failed to load users"},roles:{title:"Roles Management",addRole:"Add New Role",editRole:"Edit Role",deleteRole:"Delete Role",roleName:"Role Name",roleDescription:"Role Description",permissions:"Permissions",usersCount:"Users Count",isSystemRole:"System Role",noRoles:"No roles found",toast:{roleCreated:"Role created successfully",roleUpdated:"Role updated successfully",roleDeleted:"Role deleted successfully"},SUPER_ADMIN:"Super Admin",ADMIN:"Admin",MANAGER:"Manager",STAFF:"Staff",CUSTOMER_OWNER:"Account Owner",CUSTOMER_STAFF:"Customer Staff"},stats:{total:"Total Users",admins:"Admins",staff:"Staff",active:"Active"},noUsers:"No users",editUser:"Edit User",deleteUser:"Delete User",deleteConfirm:"Are you sure you want to delete this user?",userCreated:"User created",userUpdated:"User updated",userDeleted:"User deleted",resetPassword:"Reset Password",passwordReset:"Password reset"},Nle={title:"Access Denied",message:"You do not have permission to view this page or perform this action",contactAdmin:"Please contact the system administrator",requestedPage:"Requested Page",goBack:"Go Back",goHome:"Dashboard",errorCode:"Error Code"},jle={searchPlaceholder:"Search by quote number or company...",allStatuses:"All Statuses",table:{requestNumber:"Request Number",businessCustomer:"Business / Customer",uploadDate:"Upload Date",itemsCount:"Items Count",priceType:"Price Type",status:"Status",actions:"Actions"},reviewDetails:"Review / Details",noRequests:"No requests found",panel:{reviewRequest:"Review Request",proposedTotal:"Proposed Total",approving:"Approving...",approveAndSend:"Approve and Send to Customer",selectAll:"Select All",changeSelectedStatus:"Change Selected Status",available:"Available (Approved)",unavailable:"Unavailable (Missing)",rejected:"Rejected",customerPartNumber:"Part Number (Customer)",customerPartName:"Part Name (Customer)",quantity:"Quantity",matchedProduct:"Matched Product",price:"Price",decision:"Decision",notes:"Notes",generalNotes:"General Notes for Customer",notesPlaceholder:"Additional notes that will be shown to customer...",itemStatus:{approved:"Available",missing:"Unavailable",rejected:"Rejected",pending:"Pending"}},status:{new:"New",underReview:"Under Review",partiallyApproved:"Partially Approved",approved:"Approved",quoted:"Quoted",processed:"Processed",rejected:"Rejected"},toast:{itemsUpdated:"Updated {{count}} items",approvedWithoutPriceWarning:"Some items are approved without price. Continue?",pricingSentSuccess:"Pricing approved and sent to customer",saveError:"Error saving changes",quoteSaved:"Quote request saved",quoteSaveFailed:"Failed to save quote request"}},wle={tabs:{all:"All",fromSearch:"From Search",fromQuote:"From Quote"},stats:{totalMissing:"Total Missing",newMissing:"New Missing",underReview:"Under Review",ordered:"Ordered",solved:"Solved",orderedImport:"Ordered / Import",addedToStock:"Added to Stock",fromQuote:"From Quote",fromSearch:"From Search"},searchPlaceholder:"Search by part number...",allStatuses:"All Statuses",noMatchingMissing:"No matching missing parts found",table:{partNumber:"Part Number / Search",partInfo:"Part Information",requestCount:"Request Count",requestFrequency:"Request Frequency",interestedCustomers:"Interested Customers",source:"Source",date:"Date",lastRequest:"Last Request",status:"Status",actions:"Actions"},source:{search:"Search",quote:"Quote"},actions:{details:"Details",linkToImport:"Link to Import",addToStock:"Add to Stock",saving:"Saving...",saveChanges:"Save Changes"},view:"View",noMatchingParts:"No matching results found",pagination:{page:"Page",of:"of"},export:{partNumber:"Part Number",itemName:"Item Name",source:"Source",requestCount:"Request Count",customerCount:"Customer Count",status:"Status",lastRequest:"Last Request",adminNotes:"Admin Notes"},panel:{title:"Missing Part Details",missingDetails:"Missing Details",partDetails:"Part Details",requestedItem:"Requested Item",suggestedName:"Suggested Name",brand:"Brand",searchQuery:"Original Search",partNumber:"Part Number",partName:"Part Name",requestCount:"Request Count",differentCustomers:"Different Customers",source:"Request Source",sourceQuote:"Source: Quote Request",firstRequest:"First Request",lastRequest:"Last Request",requestingCustomers:"Requesting Customers",updateStatus:"Update Status",followUp:"Follow Up",internalNotes:"Internal Notes",adminNotes:"Admin Notes",notesPlaceholder:"Write follow-up notes (e.g., Contacted supplier...)",saving:"Saving...",saveStatus:"Save Status"},status:{new:"New Missing",underReview:"Under Review",orderPlanned:"Scheduled for Import",ordered:"Ordered",addedToStock:"Added to Stock",ignored:"Ignored"},sourceLabels:{search:"Search",quote:"Quote"},toast:{statusUpdated:"Item status updated successfully",saveError:"Error saving changes",exportSuccess:"Report exported successfully",exportFailed:"Export failed",linkImportSoon:"Import linking will be enabled soon",redirectToAddProduct:"Redirecting to add product page..."}},Sle={stats:{newRequests:"New Requests",pending:"Pending",inProgress:"In Progress",awaitingCustomer:"Awaiting Customer",completed:"Completed",delivered:"Delivered"},table:{requestNumber:"Request Number",customer:"Customer",service:"Service",requestDate:"Request Date",date:"Date",category:"Category",status:"Status",action:"Action",actions:"Actions"},serviceType:{fullService:"Full Service",processingOnly:"Processing Only",fullImport:"Full Import",goodsPreparation:"Goods Preparation"},actions:{manageRequest:"Manage Request",startReview:"Start Review",requestItemsFile:"Request Items File",cancelRequest:"Cancel Request"},viewDetails:"View Details",noRequests:"No import requests found",modal:{manageRequest:"Manage Import Request",currentStatus:"Current Status",timeline:"Events Log (Timeline)"},pricing:{preparePricing:"Prepare Price Offer",customerFile:"Customer File",download:"Download",waitingForFile:"Waiting for customer to upload items file...",totalOffer:"Total Offer (SAR)",sendToCustomer:"Send Offer to Customer"},details:{title:"Request Details",requestedBrands:"Requested Brands",serviceType:"Service Type",branchesCount:"Branches Count",estimatedValue:"Estimated Value",customerNotes:"Customer Notes"},statusControl:{title:"Update Status (Manual)",hint:"Use this option to progress through shipping stages (Factory, Sea, Port...)"},panel:{title:"Import Request Details",requestInfo:"Request Information",customer:"Customer",category:"Category",description:"Description",estimatedQuantity:"Estimated Quantity",timeline:"Timeline",updateStatus:"Update Status",pricingSection:"Pricing Section",totalAmount:"Total Amount",enterAmount:"Enter amount",note:"Note",notePlaceholder:"Note for customer...",sendPricing:"Send Price Offer"},status:{new:"New Request",underReview:"Under Review",waitingCustomerExcel:"Waiting Customer File",pricingInProgress:"Pricing in Progress",pricingSent:"Offer Sent",waitingCustomerApproval:"Waiting Approval",approvedByCustomer:"Customer Approved",inFactory:"In Factory",shipmentBooked:"Shipment Booked",onTheSea:"On the Sea",inPort:"Arrived at Port",customsCleared:"Customs Cleared",onTheWay:"On the Way",delivered:"Delivered",cancelled:"Cancelled"},toast:{statusUpdated:"Status updated successfully",updateFailed:"Update failed",enterValidAmount:"Please enter a valid amount",pricingSent:"Price offer sent to customer",sendFailed:"Failed to send"}},Ale={title:"Installment Purchase Requests",subtitle:"Submit and track installment purchase requests",adminTitle:"Installment Request Management",adminSubtitle:"Review and approve installment purchase requests",supplierTitle:"Supplier Installment Requests",supplierSubtitle:"View and submit offers on installment requests",newRequest:"New Request",myRequests:"My Requests",noRequests:"No installment requests",createFirst:"Create your first request",requestDetails:"Request Details",requestedValue:"Requested Value",duration:"Duration",frequency:"Frequency",downPayment:"Down Payment",requestedItems:"Requested Items",product:"Product",quantity:"Quantity",price:"Price",notes:"Notes",createdAt:"Created At",cancelRequest:"Cancel Request",confirmCancel:"Are you sure you want to cancel this request?",requestCancelled:"Request cancelled",months:"months",monthly:"Monthly",weekly:"Weekly",pendingOffers:"Offers Awaiting Your Decision",sinicarOffer:"SINI CAR Offer",supplierOffer:"Offer from",fullApproval:"Full Approval",partialApproval:"Partial Approval",approvedValue:"Approved Value",installments:"Installments",installmentAmount:"Installment Amount",startDate:"Start Date",acceptOffer:"Accept Offer",rejectOffer:"Reject Offer",offerAccepted:"Offer accepted successfully",offerRejected:"Offer rejected",activeContract:"Active Contract",totalPaid:"Total Paid",remaining:"Remaining",paidInstallments:"Paid Installments",overdueInstallments:"Overdue Installments",installmentNumber:"Installment #",dueDate:"Due Date",amount:"Amount",status:"Status",paid:"Paid",overdue:"Overdue",pending:"Pending",enterTotalValue:"Enter Total Value",selectProducts:"Select Products",totalValue:"Total Value Requested",selectProduct:"-- Select Product --",total:"Total",paymentFrequency:"Payment Frequency",minMax:"Minimum",max:"Maximum",unlimited:"Unlimited",minDownPayment:"Minimum",paymentPreview:"Payment Preview",afterDownPayment:"After Down Payment",estimatedInstallment:"Estimated Installment",acceptTerms:"I agree to the terms and conditions",submitRequest:"Submit Request",requestCreated:"Request submitted successfully",loadError:"Error loading data",actionError:"An error occurred",cancelError:"Error cancelling request",createError:"Error submitting request",minAmountError:"Value is below minimum allowed",maxAmountError:"Value exceeds maximum allowed",minDownPaymentError:"Down payment is below minimum",disabled:"Installment service is currently unavailable",disabledDesc:"The service will be available soon. Please try again later",notesPlaceholder:"Any additional notes...",totalRequests:"Total Requests",pendingRequests:"Pending Review",activeContracts:"Active Contracts",closedContracts:"Closed Contracts",overdueAmount:"Overdue Amount",noRequestsInTab:"No requests in this section",requestId:"Request ID",customer:"Customer",date:"Date",actions:"Actions",review:"Review",reviewRequest:"Review Installment Request",yourDecision:"Your Decision",approveFullAction:"Full Approval",approveFullDesc:"Approve the full amount",approvePartialAction:"Partial Approval",approvePartialDesc:"Approve part of the amount",rejectAction:"Reject",rejectDesc:"Reject the request",approvedAmount:"Approved Amount",forwardOnReject:"Forward request to suppliers after rejection",adminNotes:"Admin Notes",confirmDecision:"Confirm Decision",decisionRecorded:"Decision recorded",requestRejected:"Request rejected",forwarded:"Request forwarded to suppliers",customerNotes:"Customer Notes",generalSettings:"General Settings",enableSystem:"Enable Installment System",sinicarPriority:"SINI CAR Has Priority",allowPartialSinicar:"Allow Partial Approval by SINI CAR",allowPartialSuppliers:"Allow Partial Approval by Suppliers",forwardingSettings:"Forwarding Settings",autoForwardOnReject:"Auto-forward to suppliers on rejection",autoForwardOnPartial:"Auto-forward remainder on partial approval",onCustomerRejectsSinicar:"When customer rejects SINI CAR offer",forwardToSuppliers:"Forward to Suppliers",closeRequest:"Close Request",financialLimits:"Financial Limits",minAmount:"Minimum Amount",maxAmount:"Maximum Amount",requireDownPayment:"Require Down Payment",minDownPercent:"Minimum %",maxDownPercent:"Maximum %",durationSettings:"Duration Settings",minMonths:"Minimum (months)",maxMonths:"Maximum (months)",defaultFrequency:"Default Frequency",settingsSaved:"Settings saved",settingsError:"Error saving settings",noCreditProfiles:"No credit profiles",creditScore:"Credit Score",availableRequests:"Available Requests",submittedOffers:"Submitted Offers",pendingDecisions:"Pending Decisions",availableForOffer:"Available for Offer",noAvailableRequests:"No requests available",submitOffer:"Submit Offer",mySubmittedOffers:"My Submitted Offers",myOffer:"My Offer",perInstallment:"per installment",anonymousCustomer:"Customer",requestedDuration:"Requested Duration",fullOffer:"Full Offer",partialOffer:"Partial Offer",offerAmount:"Offer Amount",numberOfInstallments:"Number of Installments",offerSummary:"Offer Summary",offerSubmitted:"Offer submitted successfully",offerError:"Error submitting offer",invalidAmount:"Invalid amount"},Ele={title:"Marketer Management",stats:{total:"Total Marketers",active:"Active",pending:"Pending",suspended:"Suspended"},searchPlaceholder:"Search by name, phone...",allStatuses:"All Statuses",table:{name:"Name",phone:"Phone",referralCode:"Referral Code",referrals:"Referrals",earnings:"Earnings",status:"Status",actions:"Actions"},status:{ACTIVE:"Active",PENDING:"Pending",SUSPENDED:"Suspended"},noMarketers:"No marketers",view:"View",activate:"Activate",suspend:"Suspend",delete:"Delete",addMarketer:"Add Marketer",marketerDetails:"Marketer Details",referralHistory:"Referral History",commissionHistory:"Commission History",payoutHistory:"Payout History",pendingPayout:"Pending Payout",totalEarnings:"Total Earnings",marketerUpdated:"Marketer updated",marketerCreated:"Marketer created"},Cle={title:"Advertising Management",stats:{total:"Total Ads",active:"Active",scheduled:"Scheduled",expired:"Expired"},searchPlaceholder:"Search ads...",allStatuses:"All Statuses",table:{title:"Title",type:"Type",placement:"Placement",startDate:"Start Date",endDate:"End Date",status:"Status",actions:"Actions"},status:{ACTIVE:"Active",SCHEDULED:"Scheduled",PAUSED:"Paused",EXPIRED:"Expired"},noAds:"No advertisements",addAd:"Add Ad",editAd:"Edit Ad",deleteAd:"Delete Ad",deleteConfirm:"Are you sure you want to delete this ad?",adCreated:"Ad created",adUpdated:"Ad updated",adDeleted:"Ad deleted",uploadImage:"Upload Image",adDetails:"Ad Details"},Tle={title:"Installment Management",stats:{totalRequests:"Total Requests",pending:"Pending",approved:"Approved",rejected:"Rejected",active:"Active"},searchPlaceholder:"Search by name, request ID...",allStatuses:"All Statuses",table:{requestId:"Request ID",customer:"Customer",product:"Product",amount:"Amount",installments:"Installments",status:"Status",actions:"Actions"},status:{PENDING:"Pending",APPROVED:"Approved",REJECTED:"Rejected",ACTIVE:"Active",COMPLETED:"Completed",DEFAULTED:"Defaulted"},noRequests:"No installment requests",view:"View",approve:"Approve",reject:"Reject",requestDetails:"Request Details",customerInfo:"Customer Info",productInfo:"Product Info",paymentSchedule:"Payment Schedule",paymentHistory:"Payment History",monthlyPayment:"Monthly Payment",totalAmount:"Total Amount",remainingAmount:"Remaining Amount",dueDate:"Due Date",requestApproved:"Request approved",requestRejected:"Request rejected"},_le={title:"Customer Portal Settings",description:"Configure the appearance, layout, and features of the customer portal",resetDefaults:"Reset Defaults",saveChanges:"Save Changes",confirmReset:"Are you sure you want to reset all settings to defaults?",unsavedChanges:"You have unsaved changes",savedSuccess:"Settings saved successfully",tabs:{design:"Design & Theme",layout:"Dashboard Layout",navigation:"Navigation Menu",features:"Features",content:"Content"},design:{themeMode:"Theme Mode",colors:"Color Scheme"},layout:{sections:"Dashboard Sections",reorder:"Drag to reorder"},navigation:{menu:"Navigation Menu Items"},features:{tools:"Tools & Features",ordering:"Ordering",marketing:"Marketing",guest:"Guest Mode"},banners:{hero:"Hero Banners"},announcements:{title:"Announcements"},cards:{info:"Info Cards"}},kle={title:"AI Settings",description:"Manage AI providers and their features",globalEnable:"Enable AI Features",globalEnableDesc:"Enable or disable all AI features across the platform",unsavedChanges:"Unsaved changes",resetDefaults:"Reset to Defaults",saveChanges:"Save Changes",savedSuccess:"AI settings saved successfully",resetSuccess:"Settings reset to defaults",confirmReset:"Are you sure you want to reset all AI settings?",tabs:{providers:"AI Providers",features:"Features",limits:"Usage Limits",prompts:"System Prompts",safety:"Safety & Privacy"},providers:{title:"AI Providers",description:"Manage OpenAI, Gemini, and Anthropic connections",default:"Default",enabled:"Enabled",disabled:"Disabled",apiKey:"API Key",apiKeyPlaceholder:"Enter API key",apiKeyNote:"Leave empty to use Replit AI integration",model:"Model",maxTokens:"Max Tokens",rateLimit:"Rate Limits",perMinute:"Per minute",perDay:"Per day",chat:"Chat",imageGen:"Image Generation",vision:"Vision",audio:"Audio",setDefault:"Set as Default"},features:{customerTitle:"Customer Features",customerDesc:"AI features available to customers",adminTitle:"Admin Features",adminDesc:"AI features available to administrators",marketingTitle:"Marketing Features",enableAIAssistant:"AI Assistant",enableAIAssistantDesc:"Chat assistant for customer inquiries",enableAIProductSearch:"Smart Search",enableAIProductSearchDesc:"AI-enhanced product search",enableAIPartMatching:"Part Matching",enableAIPartMatchingDesc:"Intelligent part number matching",enableAIVinDecoding:"VIN Decoding",enableAIVinDecodingDesc:"Extract vehicle info from VIN",enableAIPriceAnalysis:"Price Analysis",enableAIPriceAnalysisDesc:"Price comparison and analysis",enableAITranslation:"Auto Translation",enableAITranslationDesc:"Automatic content translation",enableAIOrderAnalysis:"Order Analysis",enableAIOrderAnalysisDesc:"Intelligent order data analysis",enableAICustomerInsights:"Customer Insights",enableAICustomerInsightsDesc:"Customer behavior analysis",enableAIReports:"Smart Reports",enableAIReportsDesc:"Automatic report generation",enableAIFraudDetection:"Fraud Detection",enableAIFraudDetectionDesc:"Detect suspicious activities",enableAIInventoryPrediction:"Inventory Prediction",enableAIInventoryPredictionDesc:"Predict inventory needs",enableAIContentGeneration:"Content Generation",enableAIContentGenerationDesc:"Auto-generate marketing content",enableAICampaignOptimization:"Campaign Optimization",enableAICampaignOptimizationDesc:"Auto-optimize ad campaigns"},limits:{title:"Usage Limits",description:"Set usage limits by user role",dailyRequests:"Daily Requests",monthlyRequests:"Monthly Requests",maxTokens:"Max Tokens per Request",role:{customer:"Customer",admin:"Administrator",super_admin:"Super Admin"}},prompts:{title:"System Prompts",description:"Customize AI system prompts",customerAssistant:"Customer Assistant",customerAssistantDesc:"System prompt for chat assistant",productSearch:"Product Search",productSearchDesc:"System prompt for smart search",partMatching:"Part Matching",partMatchingDesc:"System prompt for part number matching"},safety:{title:"Safety & Privacy",description:"AI safety and privacy settings",contentModeration:"Content Moderation",contentModerationDesc:"Filter inappropriate content",blockedTopics:"Blocked Topics",blockedTopicsDesc:"Topics AI will not discuss",addTopic:"Add topic and press Enter",maxConversation:"Max Conversation Length",maxConversationDesc:"Maximum messages per conversation",trackUsage:"Track Usage",trackUsageDesc:"Log AI usage statistics",trackCosts:"Track Costs",trackCostsDesc:"Calculate API costs"}},Ole={portalTitle:"Supplier Portal",dashboard:"Dashboard",products:"Products",requests:"Quote Requests",settings:"Settings",notifications:"Notifications",totalProducts:"Total Products",activeProducts:"Active Products",pendingRequests:"Pending Requests",quotesSubmitted:"Quotes Submitted",quotesAccepted:"Quotes Accepted",totalRevenue:"Total Revenue",active:"Active",inactive:"Inactive",accepted:"Accepted",recentRequests:"Recent Requests",viewAll:"View All",noRequests:"No requests",quickActions:"Quick Actions",addProduct:"Add Product",importProducts:"Import Products",viewRequests:"View Requests",performance:"Performance",avgResponseTime:"Avg Response Time",rating:"Rating",searchProducts:"Search products...",searchRequests:"Search requests...",import:"Import",export:"Export",noProducts:"No products",addFirstProduct:"Add your first product",sku:"SKU",productName:"Product Name",brand:"Brand",price:"Price",stock:"Stock",minOrder:"Min Order",category:"Category",oemNumber:"OEM Number",editProduct:"Edit Product",add:"Add",allStatuses:"All Statuses",customer:"Customer",quantity:"Quantity",deadline:"Deadline",received:"Received",submitQuote:"Submit Quote",reject:"Reject",quotedAt:"Quoted Price",status:{new:"New",viewed:"Viewed",quoted:"Quoted",accepted:"Accepted",rejected:"Rejected"},urgency:{low:"Low",medium:"Medium",high:"High",urgent:"Urgent",normal:"Normal"},settingsTitle:"Supplier Settings",defaultPriceMarkup:"Default Price Markup",defaultDeliveryTime:"Default Delivery Time",deliveryDaysHint:"Number of days",notifyNewRequest:"Notify on new request",notifyQuoteAccepted:"Notify on quote accepted",notifyDeadline:"Notify on approaching deadline",submitQuoteTitle:"Submit Quote",requestDetails:"Request Details",part:"Part",yourPrice:"Your Price",availableStock:"Available Stock",quoteNotes:"Additional Notes",sendQuote:"Send Quote",importComplete:"Import Complete",importFailed:"Import Failed",totalRows:"Total Rows",inserted:"Inserted",updated:"Updated",skipped:"Skipped",errors:"Errors",row:"Row",dropExcelFile:"Drop Excel file here or select file",startImport:"Start Import",importing:"Importing...",productAdded:"Product added successfully",productUpdated:"Product updated successfully",productDeleted:"Product deleted",productAddError:"Error adding product",productUpdateError:"Error updating product",productDeleteError:"Error deleting product",confirmDeleteProduct:"Are you sure you want to delete this product?",quoteSent:"Quote sent successfully",quoteError:"Error sending quote",requestRejected:"Request rejected",rejectError:"Error rejecting request",rejectReason:"Rejection reason (optional)",settingsSaved:"Settings saved",settingsError:"Error saving settings",importSuccess:"Import successful",importError:"Error importing file",exportSuccess:"Products exported successfully",added:"added",thisMonthRevenue:"This Month Revenue",team:"Team",addEmployee:"Add Employee",editEmployee:"Edit Employee",employeeAdded:"Employee added successfully",employeeUpdated:"Employee updated successfully",noEmployees:"No team members yet",addFirstEmployee:"Add your first team member to get started"},Ile={title:"Tools Usage History",subtitle:"Track all your trader tools usage",filters:"Filters",toolType:"Tool Type",status:"Status",dateFrom:"From Date",dateTo:"To Date",totalUsage:"Total",noRecords:"No records",noRecordsDesc:"Start using trader tools to see your history here",detailsTitle:"Action Details",loadError:"Error loading history",col:{date:"Date",tool:"Tool",input:"Input",output:"Output",status:"Status",actions:"Actions"},processingTime:"Processing Time",inputFile:"Input File",outputFile:"Output File",errorMessage:"Error Message",deviceType:"Device",additionalInfo:"Additional Information",confidence:"Accuracy",suppliersCompared:"Suppliers Compared",pagesProcessed:"Pages Processed"},Rle={title:"Trader Tools Management",subtitle:"Enable/disable tools and configure access permissions",settingsTab:"Settings",analyticsTab:"Analytics",usageLogTab:"Usage Log",filters:"Filters",search:"Search",searchPlaceholder:"Name, VIN, file...",toolType:"Tool Type",status:"Status",dateFrom:"From Date",dateTo:"To Date",clearFilters:"Clear",export:"Export",totalActions:"Total Actions",successful:"Successful",failed:"Failed",successRate:"Success Rate",noRecords:"No records",exportSuccess:"Data exported successfully",exportError:"Failed to export data",loadError:"Failed to load usage log",col:{date:"Date",customer:"Customer",tool:"Tool",input:"Input",output:"Output",status:"Status",actions:"Actions"},detailTitle:"Action Details",processingTime:"Processing Time",inputDetails:"Input",outputDetails:"Output",showing:"Showing"},Ple={VIN:"VIN Extraction",PDF_EXCEL:"PDF to Excel",COMPARISON:"Price Comparison",ALTERNATIVES:"Alternatives Upload",SEARCH:"Product Search",EXCEL_QUOTE:"Excel Quote"},Dle={SUCCESS:"Success",FAILED:"Failed",PENDING:"Pending",PROCESSING:"Processing"},Mle={viewImage:"View Image",noImage:"No Image",loadError:"Failed to load image",magnifierHint:"Move mouse over image to zoom",uploadImage:"Upload Image",addToGallery:"Add to Gallery",removeImage:"Remove Image",setAsMain:"Set as Main",mainImage:"Main Image",gallery:"Gallery",imageOf:"Image {{current}} of {{total}}",settings:{title:"Product Images Settings",enabled:"Enable Product Images",enabledDesc:"Show product images in search results and details",supplierUpload:"Allow Supplier Upload",supplierUploadDesc:"Allow suppliers to upload images for their products",maxSize:"Max Image Size (MB)",maxSizeDesc:"Maximum file size for uploaded images"}},Lle={button:"Send Feedback",title:"Send Your Feedback",subtitle:"We value your opinion and strive to improve our services",typeLabel:"Feedback Type",subjectLabel:"Subject",subjectPlaceholder:"Enter feedback subject...",descriptionLabel:"Details",descriptionPlaceholder:"Describe your feedback in detail...",submitButton:"Submit Feedback",submitting:"Submitting...",successTitle:"Feedback Submitted Successfully",successMessage:"Thank you! We will review your feedback and work on improving our services",errorMessage:"Error submitting feedback",guest:"Guest",types:{BUG:"Bug Report",FEATURE:"Feature Request",IMPROVEMENT:"Improvement",COMPLAINT:"Complaint",OTHER:"Other"},categories:{bug:"Bug Report",suggestion:"Suggestion",complaint:"Complaint",question:"Question",other:"Other"},priorities:{low:"Low",medium:"Medium",high:"High",critical:"Critical"}},Fle={title:"Feedback Center",subtitle:"Manage customer feedback and analytics",allFeedback:"All Feedback",filters:"Filters",type:"Type",status:{NEW:"New",IN_PROGRESS:"In Progress",IN_REVIEW:"In Review",RESOLVED:"Resolved",CLOSED:"Closed",DISMISSED:"Dismissed"},priority:{LOW:"Low",MEDIUM:"Medium",HIGH:"High",CRITICAL:"Critical"},dateRange:"Date Range",search:"Search...",noFeedback:"No feedback found",loading:"Loading...",export:"Export",refresh:"Refresh",markAsRead:"Mark as Read",delete:"Delete",adminNotes:"Admin Notes",adminNotesPlaceholder:"Add internal notes...",saveNotes:"Save Notes",updateStatus:"Update Status",updatePriority:"Update Priority",customerInfo:"Customer Info",feedbackDetails:"Feedback Details",submittedAt:"Submitted At",lastUpdated:"Last Updated",actions:"Actions",stats:{total:"Total Feedback",new:"New",inProgress:"In Progress",resolved:"Resolved",closed:"Closed",byType:"By Type",byPriority:"By Priority"},senderType:{CUSTOMER:"Customer",SUPPLIER:"Supplier",MARKETER:"Marketer",EMPLOYEE:"Employee",ADMIN:"Admin",GUEST:"Guest"},exportSuccess:"Data exported successfully",exportError:"Failed to export data",updateSuccess:"Updated successfully",updateError:"Failed to update",deleteConfirm:"Are you sure you want to delete this feedback?",deleteSuccess:"Feedback deleted successfully",deleteError:"Failed to delete feedback"},Ule={title:"Message Center",subtitle:"Manage message templates and notifications",tabs:{templates:"Templates",logs:"Message Logs",settings:"Settings"},channels:{WHATSAPP:"WhatsApp",EMAIL:"Email",NOTIFICATION:"Notifications"},events:{QUOTE_CREATED:"Quote Created",QUOTE_APPROVED:"Quote Approved",ORDER_CREATED:"Order Created",ORDER_SHIPPED:"Order Shipped",PASSWORD_RESET:"Password Reset",ACCOUNT_ACTIVATED:"Account Activated",WELCOME_MESSAGE:"Welcome Message",PAYMENT_REMINDER:"Payment Reminder",SUPPLIER_APPLICATION_APPROVED:"Supplier Application Approved"},status:{PENDING:"Pending",SENT:"Sent",DELIVERED:"Delivered",FAILED:"Failed"},table:{event:"Event",template:"Template",status:"Status",actions:"Actions"},logs:{recipient:"Recipient",event:"Event",channel:"Channel",status:"Status",sentAt:"Sent At",empty:"No messages in log",unknown:"Unknown"},settings:{channels:"Enabled Channels",defaultLanguage:"Default Message Language"},form:{name:"Template Name",subject:"Email Subject",body:"Message Body",variables:"Available Variables",isActive:"Enable Template"},default:"Default",noTemplate:"No template",active:"Active",inactive:"Inactive",createTemplate:"Create Template",editTemplate:"Edit Template",preview:"Preview Message",sendTest:"Send Test",send:"Send",test:{phone:"Phone Number",email:"Email Address",userId:"User ID"},testSuccess:"Test message sent successfully",testFailed:"Failed to send message",confirmDelete:"Are you sure you want to delete this template?",searchLogs:"Search message logs..."},zle={common:Uie,login:zie,loading:Bie,intro:$ie,marketing:qie,guestMode:Hie,register:Vie,nav:Gie,dashboard:Wie,products:Qie,orders:Kie,cart:Jie,customers:Yie,users:Xie,roles:Zie,permissions:ele,settings:tle,accountRequests:sle,statusLabels:ale,reports:rle,notifications:nle,errors:ile,confirmations:lle,admin:ole,homepage:cle,sidebar:dle,customerDashboard:ule,adminDashboard:mle,adminCustomers:fle,adminSettings:hle,adminOrders:xle,adminAccounts:ple,adminAccountRequests:gle,adminQuotes:ble,adminProducts:vle,adminUsers:yle,accessDenied:Nle,adminQuoteManager:jle,adminMissingParts:wle,adminImport:Sle,installment:Ale,adminMarketers:Ele,adminAdvertising:Cle,adminInstallments:Tle,adminPortalSettings:_le,aiSettings:kle,supplier:Ole,traderHistory:Ile,traderToolsAdmin:Rle,toolTypes:Ple,toolStatus:Dle,productImages:Mle,feedback:Lle,feedbackAdmin:Fle,messaging:Ule},Ble={appName:" ",siniCar:" ",appSlogan:"   ",loading:"   ...",save:"",cancel:" ",confirm:" ",delete:"",edit:" ",add:"",search:"",filter:"",reset:"",back:"",next:"",previous:"",close:" ",submit:" ",yes:"",no:"",all:"",none:" ",export:"",import:"",refresh:" ",view:"",details:"",actions:"",status:"",date:"",time:"",total:"",price:"",quantity:"",name:"",email:"",phone:"",address:"",city:"",region:"",country:"",notes:"",description:"",active:"",inactive:"",enabled:"",disabled:"",success:"",error:"",warning:"",info:"",noData:"  ",noResults:"   ",selectOption:"  ",required:"",optional:"",language:"",welcome:" ",page:"",of:"",currency:"SAR",order:"",notSpecified:" ",sort:" ",download:"",upload:"",first:"",last:"",selectAll:" ",deselectAll:"  "},$le={wholesaleLogin:"  ",b2bPortal:"  B2B ",ownerLogin:" ",staffLogin:" ",clientId:" ",phoneNumber:" ",password:"",activationCode:" ",rememberMe:"  ",forgotPassword:"  ?",enter:"",verifying:"   ...",secureConnection:"  ",securityNote:"  -             ",openNewAccount:"   ",invalidCredentials:" ",loginSuccess:" ",logoutSuccess:" ",enterAsGuest:"     ",guest:"",guestWelcome:"     !      ",title:"",subtitle:"       ",phone:" ",phonePlaceholder:"   ",passwordPlaceholder:"  ",loginButton:"",loggingIn:"    ...",noAccount:"  ?",registerHere:"  ",errors:{phoneRequired:"   ",passwordRequired:"  ",invalidCredentials:" ",accountSuspended:"  ",tooManyAttempts:"       "},success:" "},qle={verifyingCredentials:"     ",connectingWarehouse:"      ",loadingCatalog:"     ",applyingDiscounts:"      ",syncingInventory:"-     ",optimizingLogistics:"     ",finalizingSetup:"     ",accessGranted:"   "},Hle={mainServer:" ",connectingServer:"         ...",dataSync:" ",syncingData:"       ...",logistics:" ",connectingWarehouses:"        ..."},Vle={dismiss:" ",campaignOf:" {{current}}   {{total}}",next:"",understood:" "},Gle={restrictedTitle:" B2B  ",restrictedSubtitle:"   ",restrictedMessage:"      :",targetAudience:{partsStores:"  ",insuranceCompanies:" ",rentalCompanies:"  ",salesReps:"   "},benefitsTitle:"  ",benefits:{prices:"  ",catalog:"  ",orders:"   - ",support:"  "},callToAction:"     ,        !",loginButton:"",requestAccountButton:"   ",browseOnly:"  ",blurredResultsNote:"       ",loginToAccess:"     ",searchDisabled:"     "},Wle={title:"  ",openNewAccount:"  ",subtitle:"         ,  ,       ",businessInfo:"  ",businessName:"  ",businessNameAr:"   ()",businessNameEn:"   ()",commercialRegister:" ",taxNumber:" ",businessType:"  ",selectBusinessType:"  ",contactInfo:" ",ownerName:"   ",ownerPhone:"  ",ownerEmail:"  ()",addressInfo:" ",fullAddress:" ",nationalAddress:"  ()",nationalAddressPlaceholder:": RDJ2929",city:"",region:"",postalCode:" ",branchesCount:"  ",submitRequest:"   ",backToLogin:"   ",requestSuccess:"    !",requestPending:"   ",requestSuccessMessage:"                            ",backToHome:"   ",benefits:{exclusivePrices:"  ",instantAccess:"  ",taxInvoices:"  "},businessTypes:{sparePartsShop:"  ",maintenanceCenter:" ",insuranceCompany:" ",rentalCompany:" ",salesRep:" ",workshop:" ",store:" ",distributor:"",agency:"",other:""},salesRepFields:{fullName:" ",phone:" ",region:" /    ",email:" ()",clientsType:"  (, ...)",clientsCount:"  "},documents:{title:" ",requiredDocuments:" ",instructions:"   PDF              ",uploadNotice:"   PDF              ",crCertificate:"  ",vatCertificate:"VAT  ",nationalId:"    ",nationalAddressCert:"  ",clickToUpload:"      ",fileTypes:"PDF, JPEG, PNG, WebP ( 5MB)",uploadSuccess:"   ",invalidFileType:"    PDF   (JPEG, PNG, WebP)  ",fileTooLarge:"      5MB "},businessFields:{businessName:"  ",branchesCount:"  ",city:"",nationalAddress:"  ()",nationalAddressPlaceholder:": RDJ2929",commercialReg:" ",vatNumber:"VAT ",contactPerson:" ",phone:" ",emailOptional:" ()"},success:{title:"    !",message:"                            ",backToHome:"   "},validation:{phoneRequired:"   ",fullNameRequired:"   ",regionRequired:"  ",businessNameRequired:"    ",cityRequired:"  ",contactPersonRequired:"     ",commercialRegRequired:"   ",vatRequired:"VAT   ",nationalAddressRequired:"   ",documentRequired:" "},additionalNotes:" ",submitting:"   ...",submitError:"    "},Qle={home:"",dashboard:"",products:"",catalog:"",orders:"",myOrders:" ",cart:"",customers:"",users:"",roles:"",settings:"",profile:"",notifications:"",reports:"",analytics:"",help:"",support:"",about:"  ",contact:" ",logout:"",accountRequests:" ",statusLabels:" ",systemSettings:" "},Kle={title:"",welcome:" ",overview:"",statistics:"",recentOrders:"  ",recentActivity:" ",quickActions:" ",totalSales:" ",totalOrders:" ",totalCustomers:" ",totalProducts:" ",pendingOrders:" ",processingOrders:" ",completedOrders:" ",cancelledOrders:" ",revenue:"",salesChart:" ",topProducts:"  ",topCustomers:" ",lowStock:" ",newCustomers:" ",monthlyRevenue:" ",weeklyOrders:" ",dailySales:" ",customerDashboard:" ",adminDashboard:" "},Jle={title:"",catalog:" ",addProduct:" ",editProduct:"  ",deleteProduct:" ",productDetails:" ",productName:"  ",productNameAr:"   ()",productNameEn:"   ()",sku:"SKU",barcode:"",category:"",subcategory:"-",brand:"",manufacturer:"",price:"",wholesalePrice:" ",retailPrice:" ",costPrice:" ",stock:"",stockQuantity:" ",minStock:" ",maxStock:" ",unit:"",weight:"",dimensions:"",image:"",images:"",specifications:"",description:"",shortDescription:" ",longDescription:" ",tags:"",status:"",available:"",outOfStock:"  ",discontinued:"",featured:"",newArrival:" ",bestSeller:" ",onSale:" ",discount:"",addToCart:"  ",buyNow:" ",quantity:"",totalPrice:" ",searchProducts:" ...",filterByCategory:"    ",filterByBrand:"    ",filterByPrice:"    ",sortBy:"   ",priceAsc:":   ",priceDesc:":   ",nameAsc:": A-Z",nameDesc:": Z-A",newest:"",oldest:" ",noProducts:"   ",productAdded:"   ",productUpdated:"    ",productDeleted:"   "},Yle={title:"",myOrders:" ",allOrders:" ",newOrder:" ",createOrder:" ",orderDetails:" ",orderNumber:" ",orderDate:" ",orderStatus:" ",orderItems:" ",orderTotal:" ",subtotal:"-",tax:"",shipping:"",discount:"",grandTotal:" ",paymentMethod:" ",paymentStatus:" ",shippingAddress:" ",billingAddress:" ",trackOrder:"  ",cancelOrder:"  ",reorder:"   ",printInvoice:"  ",downloadInvoice:"  ",orderConfirmed:" ",orderShipped:"  ",orderDelivered:"  ",orderCancelled:"",orderPending:"",orderProcessing:"",orderCompleted:"",orderRefunded:"  ",noOrders:"   ",searchOrders:" ...",filterByStatus:"    ",filterByDate:"    ",orderCreated:"   ",orderUpdated:"    ",orderCancelledSuccess:"    "},Xle={title:" ",emptyCart:"   ",addItems:"    ",continueShopping:"  ",checkout:"",clearCart:"  ",updateCart:"  ",itemAdded:"    ",itemRemoved:"    ",cartUpdated:"   ",cartCleared:"   ",proceedToCheckout:"  ",estimatedTotal:" "},Zle={title:"",allCustomers:" ",addCustomer:" ",editCustomer:"  ",customerDetails:" ",customerName:"  ",clientId:" ",businessName:"  ",contactPerson:" ",phone:"",email:"",address:"",city:"",region:"",creditLimit:" ",currentBalance:" ",totalPurchases:" ",lastOrder:" ",status:"",activeCustomer:" ",inactiveCustomer:" ",blockedCustomer:"   ",verifiedCustomer:" ",pendingVerification:" ",searchCustomers:" ...",noCustomers:"   ",customerAdded:"   ",customerUpdated:"    ",customerDeleted:"   "},eoe={title:"",allUsers:" ",addUser:" ",editUser:"  ",deleteUser:" ",userDetails:" ",username:" ",fullName:" ",email:"",phone:"",role:"",permissions:"",status:"",activeUser:" ",inactiveUser:" ",lastLogin:" ",createdAt:" ",searchUsers:" ...",noUsers:"   ",userAdded:"   ",userUpdated:"    ",userDeleted:"   ",passwordReset:"    ",sendPasswordReset:"  "},toe={title:"  ",allRoles:" ",addRole:" ",editRole:"  ",deleteRole:" ",roleDetails:" ",roleName:"  ",roleDescription:" ",permissions:"",assignedUsers:"   ",superAdmin:" ",admin:"",manager:"",salesManager:" ",salesAgent:" ",viewer:"",customer:"",staff:"",noRoles:"   ",roleAdded:"   ",roleUpdated:"    ",roleDeleted:"   "},soe={title:"",viewDashboard:" ",viewProducts:" ",manageProducts:"  ",viewOrders:" ",manageOrders:"  ",viewCustomers:" ",manageCustomers:"  ",viewUsers:" ",manageUsers:"  ",viewRoles:" ",manageRoles:"  ",viewSettings:" ",manageSettings:"  ",viewReports:" ",exportData:"  ",importData:"  ",deleteData:" ",fullAccess:" "},aoe={title:"",general:"",appearance:"",language:"",selectLanguage:" ",notifications:"",security:"",privacy:"",account:"",profile:"",changePassword:" ",twoFactorAuth:"- ",sessions:"",apiKeys:"API ",webhooks:"",integrations:"",backup:"",restore:"",export:"",import:"",theme:"",darkMode:" ",lightMode:" ",autoMode:"",timezone:" ",dateFormat:" ",currency:"",settingsSaved:"  ",settingsReset:" "},roe={title:" ",pending:"",approved:"",rejected:"",underReview:"",requestDate:" ",reviewDate:" ",reviewedBy:"",approve:" ",reject:" ",requestDetails:" ",noRequests:"   ",requestApproved:" ",requestRejected:" "},noe={title:" ",addLabel:" ",editLabel:"  ",deleteLabel:" ",labelName:"  ",labelNameAr:"   ()",labelNameEn:"   ()",labelColor:" ",labelType:" ",orderStatus:" ",customerStatus:" ",productStatus:" ",noLabels:"   ",labelAdded:"   ",labelUpdated:"    ",labelDeleted:"   "},ioe={title:"",salesReport:" ",ordersReport:" ",customersReport:" ",productsReport:" ",inventoryReport:" ",financialReport:" ",generateReport:" ",downloadReport:"  ",printReport:"  ",dateRange:" ",from:"",to:"",today:"",yesterday:"",thisWeek:" ",lastWeek:" ",thisMonth:" ",lastMonth:" ",thisYear:" ",custom:""},loe={title:"",allNotifications:" ",unread:"",read:"",markAsRead:"     ",markAllAsRead:"       ",clearAll:"  ",noNotifications:"  ",newOrder:" ",orderUpdate:" ",newCustomer:" ",lowStock:" ",paymentReceived:" ",systemUpdate:" "},ooe={somethingWrong:"   ",tryAgain:"   ",pageNotFound:"  ",accessDenied:" ",sessionExpired:"   ",networkError:" ",serverError:" ",validationError:" ",requiredField:"   ",invalidEmail:"  ",invalidPhone:"  ",passwordMismatch:"   ",weakPassword:"   "},coe={deleteItem:"        ?",deleteItems:"       ?",cancelOrder:"         ?",logout:"      ?",clearCart:"       ?",discardChanges:"       ?",actionCannotBeUndone:"      "},doe={panel:" ",systemSettings:" ",manageAll:" ",superAdmin:" ",salesManager:" ",salesAgent:" ",viewer:" "},uoe={welcomeBack:"   , {{name}}",totalOrders:" ",pendingRequests:" ",approvedOrders:" ",quickActions:" ",fastShipping:" ",fastShippingDesc:"   24-48    ",qualityGuarantee:" ",qualityGuaranteeDesc:"       ",support:" ",supportDesc:"    24/7   ",needHelp:" ?",needHelpDesc:"           ",callUs:"  ",whatsapp:""},moe={mainMenu:" ",management:"",supportSection:"",home:"",orders:" ",quotes:" ",import:"  ",traderTools:" ",history:" ",organization:" ",teamManagement:" ",support:"   / ",searchCredits:"  ",unlimitedSearch:" "},foe={heroTitle:"   ",heroSubtitle:" ,  ,                ",searchTip:"       ",searchPlaceholder:"     ...",searching:"  ...",noResults:"  ",pressSearch:"      :",partNotAvailable:"    ",noResultsFor:"     :",outOfStock:"  ",outOfStockMessage:"       ",available:"",priceNotAvailable:"  ",showPrice:"",addToCartTip:"       ()   ",whoWeServe:"    ?",partsStores:" ",partsStoresDesc:"   ,   ,           ",insuranceCompanies:" ",insuranceDesc:"            ",rentalCompanies:" ",rentalDesc:"             ",salesReps:" ",salesRepsDesc:"                 ",mainServices:"   ",quoteRequests:"  (Excel)",quoteRequestsDesc:"                ",importFromChina:"  ",importFromChinaDesc:"     /         ",wholesaleOrders:"  ",wholesaleOrdersDesc:"    ,  ,    PDF   ",staffBranches:"   ",staffBranchesDesc:"    ,    ,          ",howItWorks:"    ?",step1Title:"  ",step1Desc:"             ",step2Title:"  ",step2Desc:"                ",step3Title:"  ",step3Desc:"         Excel   ",step4Title:"  ",step4Desc:"               ",whySiniCar:"  ?",expertiseTitle:" ",expertiseDesc:"     ,     ",techTitle:" ",techDesc:"          ",globalTitle:" ",globalDesc:"3      / ",supportTitle:"B2B  ",supportDesc:"      ",wholesaleCart:"  ",emptyCart:"  ",useSearchToAdd:"       ",estimatedTotal:" ",submitOrder:"  ",fastShipping:" ",fastShippingDesc:"   24          ",techSupport:"  ",techSupportDesc:"      ",searchHistory:"   ",partNumber:" ",productName:"  ",viewDate:"  ",recordedPrice:"   ",noSearchHistory:"     ",sar:"SAR",enterValidPartNumber:"      ",unexpectedError:"       ",orderSubmitError:"    ",pageView:"  :",addToCart:"  ",priceModal:{productDetails:" ",wholesalePrice:" ",quantity:"",total:"",addToCart:"  ",close:" "},duplicateConfirm:{title:"   ",message:"         ?",confirm:",  ",cancel:" "},orderSuccess:{title:"  !",message:"          "},welcome:" ",dashboard:"",searchProducts:" ",search:"",recentOrders:"  ",viewAll:" ",noRecentOrders:"    ",recentQuotes:"   ",noRecentQuotes:"     ",quickActions:" ",newOrder:" ",newQuote:" ",myAccount:" ",support:"",stats:{totalOrders:" ",pendingOrders:" ",totalSpent:" ",searchPoints:" "},searchResults:" ",cart:"",checkout:"",total:"",currency:"SAR"},hoe={mainSection:"",ordersCustomersSection:"  ",settingsSection:"",dashboard:"",activityLog:" ",customerOrders:" ",accountRequests:" ",customersCRM:" (CRM)",quoteRequests:" ",importRequests:" ",missingParts:" ",products:"",users:"",systemSettings:" ",marketingCenter:" ",pricingCenter:"  ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",customerPortalSettings:"  ",connected:" ",slowConnection:" ",disconnected:"",pageTitles:{dashboard:" ",ordersManager:"  ",activityLogs:" ",accountRequests:"   ",customers:"  (CRM)",quotes:"  ",imports:" ",missing:" ",settings:" ",users:" ",products:" ",marketing:" ",pricing:"  ",traderTools:"  ",supplierMarketplace:"  ",marketers:" ",installments:"  ",advertising:" ",customerPortal:"  ",teamSettings:"  "},stats:{totalRevenue:" ",todayRevenue:"  ",pendingOrders:" ",approvedOrders:" ",shippedOrders:"   ",cancelledOrders:" ",totalProducts:" ",outOfStock:" ",activeBusinesses:" ",pendingAccounts:" ",pendingQuotes:" "},kpi:{revenue:"",orders:"",inventory:"",customers:""},activity:{logins:"",ordersCreated:" ",quotesRequested:" ",searchesPerformed:""},charts:{dailyOrders:" ",dailyRevenue:" ",topCustomers:" ",topMissingParts:"   ",revenue:""},views:{dashboard:"",customers:"",products:"",settings:"",quotes:" ",missing:" ",importRequests:" ",accountRequests:" ",activityLogs:" ",ordersManager:" ",adminUsers:"",marketing:" ",pricing:"  ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",teamSettings:"  ",customerPortal:" "},onlineUsers:{title:" ",subtitle:" 5   ",now:"",minutesAgo:"{{mins}}  ",online:"",noOnlineUsers:"      ",moreOnline:" {{count}}   ..."},activityLogs:{title:" ",activity:"",time:"",user:"",event:"",details:"",noActivities:"   "},generalManager:"",teamSettings:"  "},xoe={title:"  (CRM)",loading:"    ...",stats:{totalCustomers:" ",activeCustomers:" ",suspendedBlocked:"/"},searchPlaceholder:" , ,    ...",allStatuses:" ",table:{customer:"",city:"",priceLevel:" ",ordersCount:" ",totalPurchases:" ",status:"",actions:""},view:"",noMatchingCustomers:"    ",status:{active:"",suspended:"",blocked:"",pending:" ",inactive:""},panel:{title:" ",tabs:{overview:"",orders:"",activity:""},businessInfo:" ",companyName:"  ",city:"",phone:"",crNumber:" ",priceLevel:" ",customerType:" ",accountStatus:" ",searchBalance:" ",staffUsers:" ",accessValidity:" ",ordersHistory:" ",activityLog:" "},toast:{loadError:"    "},detail:{tabs:{overview:"",orders:"",quotes:"",staff:"",security:"  ",notes:""},accountManagement:" ",changeStatus:" ",statusActive:"",statusSuspended:"",statusBlocked:"",suspendUntil:"   ",saving:"   ...",saveChanges:" ",statusUpdated:"    ",errorOccurred:"  ",priceDisplayType:"  ",pricesVisible:"     -    ",pricesHidden:"    -     ",visibleNoPoints:"  ( )",hiddenWithPoints:"  (  )",visible:"",hidden:" ",priceDisplayChanged:"   ",searchWallet:" ",addBalance:" ",deductBalance:" ",totalBalance:" ",used:"  ",remaining:"",joinDate:"  ",lastLogin:" ",customerDocs:" ",commercialRegistration:" ",vatCertificate:"VAT ",nationalId:"  ",notAttached:" ",noDocument:"  ",enterPointsToAdd:"     :",pointsAddedSuccess:"{{points}}    ",currentBalance:" :",points:"",enterPointsToDeduct:"     :",cannotDeductMoreThan:"        ",pointsDeductedSuccess:"{{points}}    ",errorDeductingPoints:"   ",staffStatusUpdated:"    ",customerOrders:" ",noOrders:"  ",orderNumber:" #",date:"",amount:"",orderStatus:"",priceQuotes:"  ",noQuotes:"   ",quoteNumber:" #",items:"",staffMembers:" ",noStaff:"   ",staffName:" ",role:"",lastActive:" ",action:"",suspend:" ",activate:" ",securityAccessLogs:"   ",loginHistory:" ",device:"",ipAddress:"IP",location:"",adminNotes:" ",noNotes:"  ",addNote:"  ...",writeNote:"   ...",notePlaceholder:"   ...",addNoteBtn:" ",docs:{commercialReg:" ",taxNumber:" ",nationalAddress:" ",notAttached:" ",notAvailable:" "},staff:{staffMembers:" ",maxLimit:" ",owner:"",active:"",suspended:"",suspendBtn:" ",activateBtn:" "},orders:{customerOrders:" ",completed:"",ongoing:" ",loadingOrders:"    ...",noOrders:"      ",unspecified:"",products:"",item:"",total:"",date:"",currency:"SAR",showingOf:"{{total}}   {{shown}}     "},quotes:{pricingRequests:" ",approved:"",new:"",loadingQuotes:"     ...",noQuotes:"       ",unspecified:"",items:"",item:"",total:"",date:"",currency:"SAR",pendingPricing:"  ",showingOf:"{{total}}   {{shown}}      ",missing:"",reviewedBy:""},security:{securityIndicators:" ",failedLoginAttempts:"  ",suspiciousBehavior:"  (Flag)",yes:"",no:"",resetCounter:"   ",counterReset:"   ",passwordReset:" ",passwordResetDesc:"                    ",enterNewPassword:"    (   4 ):",adminNotFound:":    ",passwordResetError:"    ",passwordMinLength:"    4    ",resetPasswordBtn:"  ",recentLoginHistory:"   ",successfulLogin:" ",failedLogin:" ",passwordChanged:"  ",passwordResetAdmin:" (Admin)",noLogsAvailable:"   "},notes:{adminNotes:" ",noNotes:"   ",addNote:"   ...",placeholder:"   ...",saveNote:" "}}},poe={systemSettings:" ",generalSettings:" ",bannerManagement:" ",whySiniCar:"  ?",textManagement:" ",statusLabels:" ",apiIntegration:"API ",appearanceIdentity:"  ",siteSettings:"  ",saveChanges:" ",saving:"   ...",siteName:"/  ",supportPhone:" ",salesWhatsApp:" WhatsApp",supportEmail:" ",newsTicker:" ",enableTicker:"  ",tickerText:" ",tickerSpeed:" (1-10)",bgColor:"  (Hex)",textColor:"  (Hex)",productDisplaySettings:"    ",minVisibleQty:"     ",minVisibleQtyNote:"          (: 1)",stockThreshold:"  ( )",stockThresholdNote:"       ' '      (: 0)",settingsNote:"          ",maintenanceMode:" ",maintenanceModeDesc:"  ,     '   '     ",bannerAds:"  ",bannerAdsDesc:"        ",addNewBanner:"  ",newBannerData:"  ",mainTitle:" ",subtitle:"",buttonText:" ",colorScheme:"",imageUrl:" URL ()",saveAndPublish:"   ",uiTextManagement:"UI  ",uiTextManagementDesc:"          ",saveTexts:" ",erpIntegration:"ERP  ",erpIntegrationDesc:"Onyx ERP       ",connectionSettings:" ",erpUrl:"Cloud ERP URL",apiToken:"API ",syncFrequency:" ",realtime:"-",every15Min:" 15 ",hourly:" ",daily:"",environment:"",production:"Production (Live)",sandbox:"Sandbox (Test)",testConnection:"   ",connecting:"   ...",connectionSuccess:"   (200 OK)",connectionFailed:" :   ",sharedData:"API     ",sharedDataDesc:"          ",productsItems:"  ",productsItemsDesc:", , ",ordersData:"",ordersDataDesc:"   ",customersData:"",customersDataDesc:"   ",quotesData:" ",quotesDataDesc:"  ",inventoryData:"",inventoryDataDesc:" ",priceLists:" ",priceListsDesc:"   ",syncDirection:" ",pullOnly:" ERP   ",pullOnlyDesc:"     ",pushOnly:" ERP   ",pushOnlyDesc:"    ",bidirectional:"",bidirectionalDesc:"    ",webhooks:"Webhooks ( )",webhooksDesc:"        URLs ",addWebhook:"",events:"",webhookAdded:"Webhook   ",loadingFailed:"    ",settingsSaved:"   ",saveError:"   ",fillTitleAndDesc:"    ",bannerAdded:"  ",bannerDeleted:"  ",confirmDeleteBanner:"        ?",hide:"",show:"",darkGray:"  ()",royalBlue:" ",vibrantOrange:" ",darkGreen:" ",loading:"   ...",advancedSettings:" ",loggingLevel:" ",loggingLevelBasic:"",loggingLevelDetailed:"",loggingLevelDebug:" (  )",retryOnFail:"   ",retryAttempts:"",timeout:" ",seconds:"",featureManagement:'"  ?"  ',featureManagementDesc:"        ,      ",addNewFeature:"  ",fillAllFields:"   ",featureAdded:"   ",featureDeleted:"  ",title:"",description:"",icon:"",iconBox:"",iconChart:"",iconAnchor:"",iconHeadphones:"",iconTruck:"",iconShield:"",iconGlobe:"",iconStar:"",iconClock:"",iconAward:"",iconColor:" ",colorCyan:"",colorGreen:"",colorGold:"",colorPurple:"",colorRed:"",colorBlue:"",colorPink:"",colorOrange:"",appearanceCustomization:"  ",primaryColor:"  ",primaryColorDesc:"  ,        ",siteLogo:" ",uploadNotAvailable:"       ",clickToUploadLogo:"      ",livePreview:" ",livePreviewDesc:"       ",primaryButtonExample:"  ",statusLabelsManagement:"   ",statusLabelsDescription:"                      ,         ",addNewStatus:"  ",statusKey:" ()",statusLabel:"  ",newStatus:" ",backgroundColor:"",preview:"",add:"",statusUpdated:"    ",fillKeyAndName:"    ",keyExists:"     ",statusAdded:"    ",cannotDeleteSystem:"     ",cannotDeleteInUse:"   , {{count}}        ",statusDeleted:"   ",defaultStatusSet:"    ",checkingUsage:"     ...",confirmDelete:"     ?",yesDelete:", ",systemStatus:"",defaultStatus:"",setAsDefault:"     ",systemStatuses:" ",systemStatusesDesc:"      ,                 ",defaultStatusInfo:" ",defaultStatusInfoDesc:"                         ",statusCategories:{orderStatus:"  (    )",orderInternalStatus:"  ",accountRequestStatus:"  ",quoteRequestStatus:"  ",quoteItemStatus:"  ",missingStatus:"  ",importRequestStatus:"  ",customerStatus:" ",staffStatus:" "},guestMode:" ",guestModeSettings:"  ",guestModeSettingsDesc:"                  /          ",guestBrowsingEnabled:"   ",guestBrowsingEnabledDesc:"          ",visibleSections:"  (  )",visibleSectionsDesc:"          ",showBusinessTypes:'"    " ',showMainServices:"  ",showHowItWorks:'"    " ',showWhySiniCar:'"  " ',showCart:"  ",showMarketingCards:"  ",blurSettings:" ",blurIntensity:" ",blurLight:"",blurMedium:"",blurHeavy:"",showBlurOverlay:"    ",showBlurOverlayDesc:'   ""   ',searchSettings:"  ",allowSearch:"   ",allowSearchDesc:"       (  )",showSearchResults:"  ",showSearchResultsDesc:"       ",guestSettingsSaved:"     ",general:{title:" ",siteName:"  ",siteDescription:" ",contactEmail:" ",contactPhone:" ",currency:"",language:"",timezone:" ",save:"",saved:"  "},business:{title:" ",minOrderAmount:"  ",maxOrderAmount:"  ",deliveryFee:" ",taxRate:" "},notifications:{title:" ",emailNotifications:" ",smsNotifications:"SMS ",pushNotifications:" "},security:{title:" ",twoFactorAuth:"- ",sessionTimeout:"  ",maxLoginAttempts:"  "}},goe={title:" ",newOrders:" ",inProgress:" ",readyToShip:"    ",totalOrders:" ",searchOrder:"      ...",allStatuses:" ",allInternalStatuses:"  ",orderNumber:" ",customer:"",date:"",total:"",status:"",internalStatus:" ",actions:"",noOrders:"  ",orderDetails:" ",customerInfo:" ",orderItems:" ",statusHistory:" ",internalNotes:" ",updateStatus:"  ",updateInternalStatus:"   ",externalStatusUpdated:"     ",internalStatusUpdated:"     ",updateFailed:" ",statusLabels:{pending:"",approved:"",shipped:"  ",delivered:"  ",rejected:"",cancelled:""},internalStatusLabels:{new:"",sentToWarehouse:"   ",waitingPayment:"  ",paymentConfirmed:" ",salesInvoiceCreated:"   ",readyForShipment:"   ",completedInternal:"   ",cancelledInternal:"   "},details:"",name:"",userId:"",product:"",quantity:"",price:"",itemTotal:"",grandTotal:" ",changedStatusTo:"   ",noHistory:"   ",externalStatus:"  ()",externalStatusDesc:"          ",noStatusPermission:"      ",internalStatusTitle:" ",internalStatusDesc:"         ",notesPlaceholder:"      ...",saveNotes:" ",noInternalPermission:"        ",dangerZone:" ",cancelOrder:"     ",noPermission:"  ",stats:{pending:"",processing:"",shipped:"  ",delivered:"  ",cancelled:"  ",total:"",new:"",ready:"   "},searchPlaceholder:"     ...",table:{orderId:" ",customer:"",items:"",total:"",date:"",status:"",actions:""},view:"",approve:" ",ship:"",deliver:" ",cancel:" ",orderUpdated:"   ",shippingInfo:" ",paymentInfo:" ",noteAdded:"  "},boe={title:"   ",newRequests:" ",underReview:"",approved:"",rejected:"",searchAccount:"     ...",allStatuses:" ",businessName:"  ",phone:"",requestDate:" ",status:"",actions:"",noRequests:"   ",requestDetails:" ",businessInfo:" ",contactInfo:" ",documents:"",decision:"",priceLevel:" ",customerType:" ",searchPoints:" ",initialPoints:" ",monthlyPoints:" ",portalAccess:" ",startDate:" ",endDate:" ",openEnded:" ",staffAccess:" ",canCreateStaff:"   ",maxStaffUsers:"  ",adminNotes:" ",saveDecision:" ",decisionSaved:"   ",saveError:"   ",statusLabels:{new:" ",underReview:"",approved:"",rejected:"",onHold:" "},documentTypes:{crCertificate:" ",vatCertificate:"VAT ",nationalId:"  ",authorizationLetter:" ",other:" "}},voe={stats:{newRequests:" ",underReview:"",approved:"",rejected:""},status:{new:" ",underReview:"",approved:"",rejected:"",onHold:" "},docTypes:{crCertificate:" ",vatCertificate:"VAT ",nationalId:"  ",authLetter:" ",other:" "},categories:{spareParts:"  ",rental:" ",insurance:" ",agent:""},searchPlaceholder:" ,   ...",allStatuses:" ",table:{businessName:" /   ",activityType:" ",city:"",date:"",status:"",actions:""},approvedAccount:" ",view:"",noMatchingRequests:"   ",panel:{title:"  ",customerData:" ",businessName:"  ",activity:"",city:"",contactNumber:" ",crNumber:" ",vatNumber:"VAT ",customerNotes:" ",attachedDocuments:" ",adminDecision:"   "},form:{requestStatus:" ",statusNew:"",statusUnderReview:"",statusApproved:"",statusRejected:"",statusOnHold:" ",customerType:" ",typePartsShop:" ",typeRentalCompany:" ",typeInsuranceCompany:" ",typeSalesAgent:" ",typeFleetCustomer:" ",typeOther:"",priceLevel:" ",level1:"Level 1 (VIP -  )",level2:"Level 2 ()",level3:"Level 3 (/)",levelSpecial:"",accessValidity:" ",to:"",openEnded:"  (   )",searchPoints:"  ",initialBalance:" ",monthlyRenewal:" ",allowAddStaff:"   ",maxLimit:" ",adminNotes:"  ( )",notesPlaceholder:"      ...",saveDecision:" ",cancel:" "},toast:{saveSuccess:"   ",saveError:"   "}},yoe={title:"  ",pendingQuotes:" ",completedQuotes:" ",searchQuote:"     ...",allStatuses:" ",quoteNumber:" ",customer:"",date:"",itemsCount:" ",status:"",actions:"",noQuotes:"   ",quoteDetails:" ",requestedItems:" ",response:"",sendResponse:" ",stats:{new:"",inProgress:" ",completed:"",approved:""},searchPlaceholder:" ,    ...",table:{quoteId:" ",customer:"",items:"",priceType:" ",date:"",status:"",actions:""},view:"",process:" ",complete:" ",approve:" ",quoteUpdated:"    ",pricedItems:"  ",missingItems:" "},Noe={title:" ",subtitle:" ,     ",searchPlaceholder:" ...",addProduct:" ",importExcel:"Excel  ",exportExcel:"Excel  ",columnSettings:" ",visibilitySettings:" ",stats:{totalProducts:" ",inStock:" ",outOfStock:"  ",hidden:" "},table:{partNumber:" ",name:"  ",brand:"",quantity:"",price:"",visibility:"",actions:""},modal:{addTitle:"  ",editTitle:"  ",deleteConfirm:"  ",deleteMessage:"        ?",importTitle:"Excel   ",columnSettingsTitle:"Excel  "},form:{partNumber:" ",name:"  ",brand:"",quantity:"",price:"",costPrice:" ",description:"",isVisible:"   ",save:"",cancel:" "},import:{selectFile:"Excel  ",dragDrop:"     ",processing:"...",success:" ",imported:"  ",updated:"  ",skipped:" ",errors:""},validation:{partNumberRequired:"   ",nameRequired:"    ",priceInvalid:"  ",quantityInvalid:"  "},toast:{productCreated:"   ",productUpdated:"    ",productDeleted:"   ",importSuccess:"    ",createError:"   ",updateError:"    ",deleteError:"   ",importError:"    ",loadError:"    ",visibilityThresholdSaved:"    "},presets:{title:"  ",name:" ",isDefault:"",mappings:" ",internalField:" ",excelHeader:"Excel ",enabled:"",required:"",addPreset:"  ",editPreset:"  ",deletePreset:" ",savePreset:" ",toast:{presetCreated:"   ",presetUpdated:"    ",presetDeleted:"   ",presetSetDefault:"       "}},uploadExcel:"Excel  ",downloadTemplate:"  ",loading:"   ...",noProducts:"  ",noMatchingProducts:"     ",partNumber:" ",productName:"  ",quantity:"",price:"",category:"",actions:"",edit:" ",delete:"",deleteConfirm:"        ?",productDeleted:"  ",productSaved:"  ",productCreated:"  ",importModal:{title:"  ",selectFile:"Excel  ",importing:"   ...",importSuccess:" ",imported:" ",updated:"  ",skipped:" ",errors:""},productModal:{editTitle:"  ",addTitle:"  ",save:"",cancel:" "},columnPresets:{title:"Excel  ",presetName:"  ",enterPresetName:"     ",created:"   ",saved:"  ",deleteConfirm:"        ?",deleted:"  ",setDefault:"  ",isDefault:""},visibility:{title:" ",threshold:"  ",saved:"   "},pagination:{showing:"  ",of:" ",products:"",previous:"",next:""},selectProductsFirst:"   ",selectedCount:"{{count}}   ",visibilityApplied:"{{count}}       ",visibilityRemoved:"{{count}}      ",loadFailed:"    ",importFailed:" ",templateDownloaded:"Excel    ",templateDownloadFailed:"    ",partAndNameRequired:"     ",deleteFailed:"   "},joe={title:" ",subtitle:"  ,     ",tabs:{users:"",roles:"  "},searchPlaceholder:",   ...",allRoles:" ",allStatuses:" ",addUser:" ",exportUsers:"  ",table:{user:"",role:"",contact:"",lastLogin:" ",status:"",actions:"",name:"",email:"",phone:""},status:{active:"",inactive:"",ACTIVE:"",SUSPENDED:"",PENDING:""},modal:{addTitle:"  ",editTitle:"  ",deleteConfirm:"  ",deleteMessage:"        ?",resetPassword:"  ",toggleStatus:" "},form:{fullName:" ",username:" ",email:"",phone:" ",role:"",password:"",newPassword:" ",confirmPassword:"   ",save:"",cancel:" "},validation:{nameRequired:"  ",usernameRequired:"   ",emailRequired:"  ",emailInvalid:"  ",passwordRequired:"  ",passwordMinLength:"    6    ",roleRequired:"  "},toast:{userCreated:"   ",userUpdated:"    ",userDeleted:"   ",passwordReset:"    ",statusChanged:"   ",createError:"   ",updateError:"    ",deleteError:"   ",loadError:"    "},roles:{title:" ",addRole:"  ",editRole:"  ",deleteRole:" ",roleName:"  ",roleDescription:" ",permissions:"",usersCount:" ",isSystemRole:" ",noRoles:"   ",toast:{roleCreated:"   ",roleUpdated:"    ",roleDeleted:"   "},SUPER_ADMIN:" ",ADMIN:"",MANAGER:"",STAFF:"",CUSTOMER_OWNER:" ",CUSTOMER_STAFF:" "},stats:{total:" ",admins:"",staff:"",active:""},noUsers:"  ",editUser:"  ",deleteUser:" ",deleteConfirm:"        ?",userCreated:"  ",userUpdated:"   ",userDeleted:"  ",resetPassword:"  ",passwordReset:"   "},woe={title:" ",message:"            ",contactAdmin:"     ",requestedPage:" ",goBack:" ",goHome:"",errorCode:" "},Soe={searchPlaceholder:"     ...",allStatuses:" ",table:{requestNumber:" ",businessCustomer:" / ",uploadDate:" ",itemsCount:" ",priceType:" ",status:"",actions:""},reviewDetails:" / ",noRequests:"   ",panel:{reviewRequest:" ",proposedTotal:" ",approving:" ...",approveAndSend:"     ",selectAll:" ",changeSelectedStatus:"  ",available:" (Approved)",unavailable:" (Missing)",rejected:" (Rejected)",customerPartNumber:"  ()",customerPartName:"  ()",quantity:"",matchedProduct:" ",price:"",decision:"",notes:"",generalNotes:"    ",notesPlaceholder:"      ...",itemStatus:{approved:"",missing:"",rejected:"",pending:""}},status:{new:"",underReview:"",partiallyApproved:"   ",approved:"",quoted:"  ",processed:"  ",rejected:""},toast:{itemsUpdated:"{{count}}    ",approvedWithoutPriceWarning:"        ?",pricingSentSuccess:"       ",saveError:"   ",quoteSaved:"   ",quoteSaveFailed:"    "}},Aoe={tabs:{all:"",fromSearch:" ",fromQuote:" "},stats:{totalMissing:" ",newMissing:" ",underReview:"",ordered:"  ",solved:"  ",orderedImport:" / ",addedToStock:"   ",fromQuote:" ",fromSearch:" "},searchPlaceholder:"   ...",allStatuses:" ",noMatchingMissing:"     ",table:{partNumber:"  / ",partInfo:" ",requestCount:" ",requestFrequency:" ",interestedCustomers:" ",source:"",date:"",lastRequest:" ",status:"",actions:""},source:{search:"",quote:""},actions:{details:"",linkToImport:"  ",addToStock:"  ",saving:"   ...",saveChanges:" "},view:"",noMatchingParts:"    ",pagination:{page:"",of:""},export:{partNumber:" ",itemName:" ",source:"",requestCount:" ",customerCount:" ",status:"",lastRequest:" ",adminNotes:" "},panel:{title:"  ",missingDetails:" ",partDetails:" ",requestedItem:" ",suggestedName:"  ",brand:"",searchQuery:" ",partNumber:" ",partName:" ",requestCount:" ",differentCustomers:" ",source:" ",sourceQuote:":  ",firstRequest:" ",lastRequest:" ",requestingCustomers:"   ",updateStatus:"  ",followUp:" ",internalNotes:" ",adminNotes:" ",notesPlaceholder:"-   (,    ...)",saving:"   ...",saveStatus:" "},status:{new:" ",underReview:"",orderPlanned:"   ",ordered:"  ",addedToStock:"   ",ignored:"  "},sourceLabels:{search:"",quote:""},toast:{statusUpdated:"     ",saveError:"   ",exportSuccess:"    ",exportFailed:" ",linkImportSoon:"    ",redirectToAddProduct:"       ..."}},Eoe={stats:{newRequests:" ",pending:"",inProgress:" ",awaitingCustomer:"  ",completed:"",delivered:""},table:{requestNumber:" ",customer:"",service:"",requestDate:" ",date:"",category:"",status:"",action:"",actions:""},serviceType:{fullService:" ",processingOnly:" ",fullImport:" ",goodsPreparation:" "},actions:{manageRequest:"  ",startReview:"  ",requestItemsFile:"   ",cancelRequest:"  "},viewDetails:" ",noRequests:"    ",modal:{manageRequest:"   ",currentStatus:" ",timeline:"  ()"},pricing:{preparePricing:"   ",customerFile:" ",download:"",waitingForFile:"      ...",totalOffer:"  (SAR)",sendToCustomer:"   "},details:{title:" ",requestedBrands:" ",serviceType:" ",branchesCount:"  ",estimatedValue:" ",customerNotes:" "},statusControl:{title:"   ()",hint:"            (, , ...)"},panel:{title:"  ",requestInfo:" ",customer:"",category:"",description:"",estimatedQuantity:" ",timeline:"",updateStatus:"  ",pricingSection:"  ",totalAmount:" ",enterAmount:"  ",note:"",notePlaceholder:"   ...",sendPricing:"  "},status:{new:" ",underReview:"",waitingCustomerExcel:"   ",pricingInProgress:"  ",pricingSent:"  ",waitingCustomerApproval:"  ",approvedByCustomer:"  ",inFactory:" ",shipmentBooked:" ",onTheSea:" ",inPort:"  ",customsCleared:" ",onTheWay:" ",delivered:"",cancelled:""},toast:{statusUpdated:"    ",updateFailed:" ",enterValidAmount:"     ",pricingSent:"     ",sendFailed:"  "}},Coe={title:" ",stats:{total:" ",active:"",pending:"",suspended:""},searchPlaceholder:",   ...",allStatuses:" ",table:{name:"",phone:"",referralCode:" ",referrals:"",earnings:"",status:"",actions:""},status:{ACTIVE:"",PENDING:"",SUSPENDED:""},noMarketers:"  ",view:"",activate:" ",suspend:" ",delete:"",addMarketer:" ",marketerDetails:" ",referralHistory:" ",commissionHistory:" ",payoutHistory:" ",pendingPayout:" ",totalEarnings:" ",marketerUpdated:"   ",marketerCreated:"  "},Toe={title:" ",stats:{total:" ",active:"",scheduled:"",expired:""},searchPlaceholder:" ...",allStatuses:" ",table:{title:"",type:"",placement:"",startDate:" ",endDate:" ",status:"",actions:""},status:{ACTIVE:"",SCHEDULED:"",PAUSED:" ",EXPIRED:""},noAds:"  ",addAd:" ",editAd:"  ",deleteAd:" ",deleteConfirm:"        ?",adCreated:"  ",adUpdated:"   ",adDeleted:"  ",uploadImage:"  ",adDetails:" "},_oe={title:" ",stats:{totalRequests:" ",pending:"",approved:"",rejected:"",active:""},searchPlaceholder:",    ...",allStatuses:" ",table:{requestId:" ",customer:"",product:"",amount:"",installments:"",status:"",actions:""},status:{PENDING:"",APPROVED:"",REJECTED:"",ACTIVE:"",COMPLETED:"",DEFAULTED:""},noRequests:"   ",view:"",approve:" ",reject:" ",requestDetails:" ",customerInfo:" ",productInfo:" ",paymentSchedule:" ",paymentHistory:" ",monthlyPayment:" ",totalAmount:" ",remainingAmount:" ",dueDate:" ",requestApproved:" ",requestRejected:" "},koe={title:"  ",description:"   ,     ",resetDefaults:"  ",saveChanges:" ",confirmReset:"           ?",unsavedChanges:"     ",savedSuccess:"   ",tabs:{design:"  ",layout:" ",navigation:" ",features:"",content:""},design:{themeMode:" ",colors:" "},layout:{sections:" ",reorder:"    "},navigation:{menu:"  "},features:{tools:"  ",ordering:"",marketing:"",guest:" "},banners:{hero:" "},announcements:{title:""},cards:{info:" "}},Ooe={title:"  ",subtitle:"       ",filters:"",toolType:" ",status:"",dateFrom:" ",dateTo:" ",totalUsage:"",noRecords:"  ",noRecordsDesc:"           ",detailsTitle:" ",loadError:"    ",col:{date:"",tool:"",input:"",output:"",status:"",actions:""},processingTime:" ",inputFile:" ",outputFile:" ",errorMessage:" ",deviceType:"",additionalInfo:" ",confidence:"",suppliersCompared:"   ",pagesProcessed:"   "},Ioe={title:"  ",subtitle:" /      ",settingsTab:"",analyticsTab:"",usageLogTab:" ",filters:"",search:"",searchPlaceholder:", VIN, ...",toolType:" ",status:"",dateFrom:" ",dateTo:" ",clearFilters:" ",export:"",totalActions:" ",successful:"",failed:"",successRate:" ",noRecords:"  ",exportSuccess:"    ",exportError:"    ",loadError:"     ",col:{date:"",customer:"",tool:"",input:"",output:"",status:"",actions:""},detailTitle:" ",processingTime:" ",inputDetails:"",outputDetails:"",showing:"  "},Roe={VIN:"VIN ",PDF_EXCEL:"PDF  Excel",COMPARISON:" ",ALTERNATIVES:" ",SEARCH:" ",EXCEL_QUOTE:"Excel "},Poe={SUCCESS:"",FAILED:"",PENDING:"",PROCESSING:""},Doe={viewImage:" ",noImage:"  ",loadError:"    ",magnifierHint:"        ",uploadImage:"  ",addToGallery:"  ",removeImage:" ",setAsMain:"     ",mainImage:" ",gallery:"",imageOf:" {{current}}   {{total}}",settings:{title:"  ",enabled:"   ",enabledDesc:"       ",supplierUpload:"   ",supplierUploadDesc:"           ",maxSize:"   (MB)",maxSizeDesc:"        "}},Moe={button:" ",title:"  ",subtitle:"               ",typeLabel:" ",subjectLabel:"",subjectPlaceholder:"   ...",descriptionLabel:"",descriptionPlaceholder:"      ...",submitButton:" ",submitting:"  ...",successTitle:"   ",successMessage:"!            ",errorMessage:"   ",guest:"",types:{BUG:" ",FEATURE:" ",IMPROVEMENT:"",COMPLAINT:"",OTHER:""},categories:{bug:" ",suggestion:"",complaint:"",question:"",other:""},priorities:{low:"",medium:"",high:"",critical:""}},Loe={title:" ",subtitle:"     ",allFeedback:" ",filters:"",type:"",status:{NEW:"",IN_PROGRESS:" ",IN_REVIEW:"",RESOLVED:"  ",CLOSED:"",DISMISSED:""},priority:{LOW:"",MEDIUM:"",HIGH:"",CRITICAL:""},dateRange:" ",search:"...",noFeedback:"   ",loading:"   ...",export:"",refresh:"",markAsRead:"   ",delete:"",adminNotes:" ",adminNotesPlaceholder:"  ...",saveNotes:" ",updateStatus:"  ",updatePriority:"  ",customerInfo:" ",feedbackDetails:" ",submittedAt:"   ",lastUpdated:" ",actions:"",stats:{total:" ",new:"",inProgress:" ",resolved:"  ",closed:"",byType:"  ",byPriority:"  "},senderType:{CUSTOMER:"",SUPPLIER:"",MARKETER:"",EMPLOYEE:"",ADMIN:"",GUEST:""},exportSuccess:"    ",exportError:"    ",updateSuccess:"   ",updateError:"   ",deleteConfirm:"       ?",deleteSuccess:"   ",deleteError:"   "},Foe={common:Ble,login:$le,loading:qle,intro:Hle,marketing:Vle,guestMode:Gle,register:Wle,nav:Qle,dashboard:Kle,products:Jle,orders:Yle,cart:Xle,customers:Zle,users:eoe,roles:toe,permissions:soe,settings:aoe,accountRequests:roe,statusLabels:noe,reports:ioe,notifications:loe,errors:ooe,confirmations:coe,admin:doe,homepage:uoe,sidebar:moe,customerDashboard:foe,adminDashboard:hoe,adminCustomers:xoe,adminSettings:poe,adminOrders:goe,adminAccounts:boe,adminAccountRequests:voe,adminQuotes:yoe,adminProducts:Noe,adminUsers:joe,accessDenied:woe,adminQuoteManager:Soe,adminMissingParts:Aoe,adminImport:Eoe,adminMarketers:Coe,adminAdvertising:Toe,adminInstallments:_oe,adminPortalSettings:koe,traderHistory:Ooe,traderToolsAdmin:Ioe,toolTypes:Roe,toolStatus:Poe,productImages:Doe,feedback:Moe,feedbackAdmin:Loe},Uoe={appName:"",siniCar:"",appSlogan:"",loading:"...",save:"",cancel:"",confirm:"",delete:"",edit:"",add:"",search:"",filter:"",reset:"",back:"",next:"",previous:"",close:"",submit:"",yes:"",no:"",all:"",none:"",export:"",import:"",refresh:"",view:"",details:"",actions:"",status:"",date:"",time:"",total:"",price:"",quantity:"",name:"",email:"",phone:"",address:"",city:"",region:"",country:"",notes:"",description:"",active:"",inactive:"",enabled:"",disabled:"",success:"",error:"",warning:"",info:"",noData:"",noResults:"",selectOption:"",required:"",optional:"",language:"",welcome:"",page:"",of:"/",currency:"SAR",order:"",notSpecified:"",sort:"",download:"",upload:"",first:"",last:"",selectAll:"",deselectAll:""},zoe={wholesaleLogin:"",b2bPortal:" B2B ",ownerLogin:"",staffLogin:"",clientId:"ID",phoneNumber:"",password:"",activationCode:"",rememberMe:"",forgotPassword:"",enter:"",verifying:"...",secureConnection:"",securityNote:"",openNewAccount:"",invalidCredentials:"",loginSuccess:"",logoutSuccess:"",enterAsGuest:"",guest:"",guestWelcome:"",title:"",subtitle:"",phone:"",phonePlaceholder:"",passwordPlaceholder:"",loginButton:"",loggingIn:"...",noAccount:"",registerHere:"",errors:{phoneRequired:"",passwordRequired:"",invalidCredentials:"",accountSuspended:"",tooManyAttempts:""},success:""},Boe={verifyingCredentials:"",connectingWarehouse:"",loadingCatalog:"",applyingDiscounts:"",syncingInventory:"",optimizingLogistics:"",finalizingSetup:"",accessGranted:""},$oe={mainServer:"",connectingServer:"...",dataSync:"",syncingData:"...",logistics:"",connectingWarehouses:"..."},qoe={dismiss:"",campaignOf:" {{current}}/{{total}}",next:"",understood:""},Hoe={restrictedTitle:"B2B",restrictedSubtitle:"",restrictedMessage:"",targetAudience:{partsStores:"",insuranceCompanies:"",rentalCompanies:"",salesReps:""},benefitsTitle:"",benefits:{prices:"",catalog:"",orders:"",support:""},callToAction:"",loginButton:"",requestAccountButton:"",browseOnly:"",blurredResultsNote:"",loginToAccess:"",searchDisabled:""},Voe={title:"",openNewAccount:"",subtitle:"",businessInfo:"",businessName:"",businessNameAr:"",businessNameEn:"",commercialRegister:"",taxNumber:"",businessType:"",selectBusinessType:"",contactInfo:"",ownerName:"",ownerPhone:"",ownerEmail:"",addressInfo:"",fullAddress:"",nationalAddress:"",nationalAddressPlaceholder:"RDJ2929",city:"",region:"",postalCode:"",branchesCount:"",submitRequest:"",backToLogin:"",requestSuccess:"",requestPending:"",requestSuccessMessage:"",backToHome:"",benefits:{exclusivePrices:"",instantAccess:"",taxInvoices:""},businessTypes:{sparePartsShop:"",maintenanceCenter:"",insuranceCompany:"",rentalCompany:"",salesRep:"",workshop:"",store:"",distributor:"",agency:"",other:""},salesRepFields:{fullName:"",phone:"",region:"/",email:"",clientsType:"...",clientsCount:""},documents:{title:"",requiredDocuments:"",instructions:"PDF",uploadNotice:"PDF",crCertificate:"",vatCertificate:"",nationalId:"",nationalAddressCert:"",clickToUpload:"",fileTypes:"PDF, JPEG, PNG, WebP5MB",uploadSuccess:"",invalidFileType:"PDFJPEG, PNG, WebP",fileTooLarge:"5MB"},businessFields:{businessName:"",branchesCount:"",city:"",nationalAddress:"",nationalAddressPlaceholder:"RDJ2929",commercialReg:"",vatNumber:"",contactPerson:"",phone:"",emailOptional:""},success:{title:"",message:"",backToHome:""},validation:{phoneRequired:"",fullNameRequired:"",regionRequired:"",businessNameRequired:"",cityRequired:"",contactPersonRequired:"",commercialRegRequired:"",vatRequired:"",nationalAddressRequired:"",documentRequired:""},additionalNotes:"",submitting:"...",submitError:""},Goe={home:"",dashboard:"",products:"",catalog:"",orders:"",myOrders:"",cart:"",customers:"",users:"",roles:"",settings:"",profile:"",notifications:"",reports:"",analytics:"",help:"",support:"",about:"",contact:"",logout:"",accountRequests:"",statusLabels:"",systemSettings:""},Woe={title:"",welcome:"",overview:"",statistics:"",recentOrders:"",recentActivity:"",quickActions:"",totalSales:"",totalOrders:"",totalCustomers:"",totalProducts:"",pendingOrders:"",processingOrders:"",completedOrders:"",cancelledOrders:"",revenue:"",salesChart:"",topProducts:"",topCustomers:"",lowStock:"",newCustomers:"",monthlyRevenue:"",weeklyOrders:"",dailySales:"",customerDashboard:"",adminDashboard:""},Qoe={title:"",catalog:"",addProduct:"",editProduct:"",deleteProduct:"",productDetails:"",productName:"",productNameAr:"",productNameEn:"",sku:"SKU",barcode:"",category:"",subcategory:"",brand:"",manufacturer:"",price:"",wholesalePrice:"",retailPrice:"",costPrice:"",stock:"",stockQuantity:"",minStock:"",maxStock:"",unit:"",weight:"",dimensions:"",image:"",images:"",specifications:"",description:"",shortDescription:"",longDescription:"",tags:"",status:"",available:"",outOfStock:"",discontinued:"",featured:"",newArrival:"",bestSeller:"",onSale:"",discount:"",addToCart:"",buyNow:"",quantity:"",totalPrice:"",searchProducts:"...",filterByCategory:"",filterByBrand:"",filterByPrice:"",sortBy:"",priceAsc:"",priceDesc:"",nameAsc:"A-Z",nameDesc:"Z-A",newest:"",oldest:"",noProducts:"",productAdded:"",productUpdated:"",productDeleted:""},Koe={title:"",myOrders:"",allOrders:"",newOrder:"",createOrder:"",orderDetails:"",orderNumber:"",orderDate:"",orderStatus:"",orderItems:"",orderTotal:"",subtotal:"",tax:"",shipping:"",discount:"",grandTotal:"",paymentMethod:"",paymentStatus:"",shippingAddress:"",billingAddress:"",trackOrder:"",cancelOrder:"",reorder:"",printInvoice:"",downloadInvoice:"",orderConfirmed:"",orderShipped:"",orderDelivered:"",orderCancelled:"",orderPending:"",orderProcessing:"",orderCompleted:"",orderRefunded:"",noOrders:"",searchOrders:"...",filterByStatus:"",filterByDate:"",orderCreated:"",orderUpdated:"",orderCancelledSuccess:""},Joe={title:"",emptyCart:"",addItems:"",continueShopping:"",checkout:"",clearCart:"",updateCart:"",itemAdded:"",itemRemoved:"",cartUpdated:"",cartCleared:"",proceedToCheckout:"",estimatedTotal:""},Yoe={title:"",allCustomers:"",addCustomer:"",editCustomer:"",customerDetails:"",customerName:"",clientId:"ID",businessName:"",contactPerson:"",phone:"",email:"",address:"",city:"",region:"",creditLimit:"",currentBalance:"",totalPurchases:"",lastOrder:"",status:"",activeCustomer:"",inactiveCustomer:"",blockedCustomer:"",verifiedCustomer:"",pendingVerification:"",searchCustomers:"...",noCustomers:"",customerAdded:"",customerUpdated:"",customerDeleted:""},Xoe={title:"",allUsers:"",addUser:"",editUser:"",deleteUser:"",userDetails:"",username:"",fullName:"",email:"",phone:"",role:"",permissions:"",status:"",activeUser:"",inactiveUser:"",lastLogin:"",createdAt:"",searchUsers:"...",noUsers:"",userAdded:"",userUpdated:"",userDeleted:"",passwordReset:"",sendPasswordReset:""},Zoe={title:"",allRoles:"",addRole:"",editRole:"",deleteRole:"",roleDetails:"",roleName:"",roleDescription:"",permissions:"",assignedUsers:"",superAdmin:"",admin:"",manager:"",salesManager:"",salesAgent:"",viewer:"",customer:"",staff:"",noRoles:"",roleAdded:"",roleUpdated:"",roleDeleted:""},ece={title:"",viewDashboard:"",viewProducts:"",manageProducts:"",viewOrders:"",manageOrders:"",viewCustomers:"",manageCustomers:"",viewUsers:"",manageUsers:"",viewRoles:"",manageRoles:"",viewSettings:"",manageSettings:"",viewReports:"",exportData:"",importData:"",deleteData:"",fullAccess:""},tce={title:"",general:"",appearance:"",language:"",selectLanguage:"",notifications:"",security:"",privacy:"",account:"",profile:"",changePassword:"",twoFactorAuth:"",sessions:"",apiKeys:"API",webhooks:"Webhooks",integrations:"",backup:"",restore:"",export:"",import:"",theme:"",darkMode:"",lightMode:"",autoMode:"",timezone:"",dateFormat:"",currency:"",settingsSaved:"",settingsReset:""},sce={title:"",pending:"",approved:"",rejected:"",underReview:"",requestDate:"",reviewDate:"",reviewedBy:"",approve:"",reject:"",requestDetails:"",noRequests:"",requestApproved:"",requestRejected:""},ace={title:"",addLabel:"",editLabel:"",deleteLabel:"",labelName:"",labelNameAr:"",labelNameEn:"",labelColor:"",labelType:"",orderStatus:"",customerStatus:"",productStatus:"",noLabels:"",labelAdded:"",labelUpdated:"",labelDeleted:""},rce={title:"",salesReport:"",ordersReport:"",customersReport:"",productsReport:"",inventoryReport:"",financialReport:"",generateReport:"",downloadReport:"",printReport:"",dateRange:"",from:"",to:"",today:"",yesterday:"",thisWeek:"",lastWeek:"",thisMonth:"",lastMonth:"",thisYear:"",custom:""},nce={title:"",allNotifications:"",unread:"",read:"",markAsRead:"",markAllAsRead:"",clearAll:"",noNotifications:"",newOrder:"",orderUpdate:"",newCustomer:"",lowStock:"",paymentReceived:"",systemUpdate:""},ice={somethingWrong:"",tryAgain:"",pageNotFound:"",accessDenied:"",sessionExpired:"",networkError:"",serverError:"",validationError:"",requiredField:"",invalidEmail:"",invalidPhone:"",passwordMismatch:"",weakPassword:""},lce={deleteItem:"",deleteItems:"",cancelOrder:"",logout:"",clearCart:"",discardChanges:"",actionCannotBeUndone:""},oce={panel:"",systemSettings:"",manageAll:"",superAdmin:"",salesManager:"",salesAgent:"",viewer:""},cce={welcomeBack:"{{name}}",totalOrders:"",pendingRequests:"",approvedOrders:"",quickActions:"",fastShipping:"",fastShippingDesc:"24-48",qualityGuarantee:"",qualityGuaranteeDesc:"",support:"",supportDesc:"24/7",needHelp:"",needHelpDesc:"",callUs:"",whatsapp:"WhatsApp"},dce={mainMenu:"",management:"",supportSection:"",home:"",orders:"",quotes:"",import:"",traderTools:"",history:"",organization:"",teamManagement:"",support:" / ",searchCredits:"",unlimitedSearch:""},uce={heroTitle:"",heroSubtitle:"",searchTip:"",searchPlaceholder:"...",searching:"...",noResults:"",pressSearch:"",partNotAvailable:"",noResultsFor:"",outOfStock:"",outOfStockMessage:"",available:"",priceNotAvailable:"",showPrice:"",addToCartTip:"",whoWeServe:"",partsStores:"",partsStoresDesc:"",insuranceCompanies:"",insuranceDesc:"",rentalCompanies:"",rentalDesc:"",salesReps:"",salesRepsDesc:"",mainServices:"",quoteRequests:"Excel",quoteRequestsDesc:"",importFromChina:"",importFromChinaDesc:"",wholesaleOrders:"",wholesaleOrdersDesc:"PDF",staffBranches:"",staffBranchesDesc:"",howItWorks:"",step1Title:"",step1Desc:"",step2Title:"",step2Desc:"",step3Title:"",step3Desc:"Excel",step4Title:"",step4Desc:"",whySiniCar:"",expertiseTitle:"",expertiseDesc:"",techTitle:"",techDesc:"",globalTitle:"",globalDesc:"3",supportTitle:"B2B",supportDesc:"",wholesaleCart:"",emptyCart:"",useSearchToAdd:"",estimatedTotal:"",submitOrder:"",fastShipping:"",fastShippingDesc:"24",techSupport:"",techSupportDesc:"",searchHistory:"",partNumber:"",productName:"",viewDate:"",recordedPrice:"",noSearchHistory:"",sar:"SAR",enterValidPartNumber:"",unexpectedError:"",orderSubmitError:"",pageView:"",addToCart:"",priceModal:{productDetails:"",wholesalePrice:"",quantity:"",total:"",addToCart:"",close:""},duplicateConfirm:{title:"",message:"",confirm:"",cancel:""},orderSuccess:{title:"",message:""},welcome:"",dashboard:"",searchProducts:"",search:"",recentOrders:"",viewAll:"",noRecentOrders:"",recentQuotes:"",noRecentQuotes:"",quickActions:"",newOrder:"",newQuote:"",myAccount:"",support:"",stats:{totalOrders:"",pendingOrders:"",totalSpent:"",searchPoints:""},searchResults:"",cart:"",checkout:"",total:"",currency:"SAR"},mce={mainSection:"",ordersCustomersSection:"",settingsSection:"",dashboard:"",activityLog:"",customerOrders:"",accountRequests:"",customersCRM:" (CRM)",quoteRequests:"",importRequests:"",missingParts:"",products:"",users:"",systemSettings:"",marketingCenter:"",pricingCenter:"",traderTools:"",supplierMarketplace:"",marketers:"",installments:"",advertising:"",customerPortalSettings:"",connected:"",slowConnection:"",disconnected:"",pageTitles:{dashboard:"",ordersManager:"",activityLogs:"",accountRequests:"",customers:" (CRM)",quotes:"",imports:"",missing:"",settings:"",users:"",products:"",marketing:"",pricing:"",traderTools:"",supplierMarketplace:"",marketers:"",installments:"",advertising:"",customerPortal:"",teamSettings:""},stats:{totalRevenue:"",todayRevenue:"",pendingOrders:"",approvedOrders:"",shippedOrders:"",cancelledOrders:"",totalProducts:"",outOfStock:"",activeBusinesses:"",pendingAccounts:"",pendingQuotes:""},kpi:{revenue:"",orders:"",inventory:"",customers:""},activity:{logins:"",ordersCreated:"",quotesRequested:"",searchesPerformed:""},charts:{dailyOrders:"",dailyRevenue:"",topCustomers:"",topMissingParts:"",revenue:""},views:{dashboard:"",customers:"",products:"",settings:"",quotes:"",missing:"",importRequests:"",accountRequests:"",activityLogs:"",ordersManager:"",adminUsers:"",marketing:"",pricing:"",traderTools:"",supplierMarketplace:"",marketers:"",installments:"",advertising:"",teamSettings:"",customerPortal:""},onlineUsers:{title:"",subtitle:"5",now:"",minutesAgo:"{{mins}}",online:"",noOnlineUsers:"",moreOnline:"{{count}}..."},activityLogs:{title:"",activity:"",time:"",user:"",event:"",details:"",noActivities:""},generalManager:"",teamSettings:""},fce={title:" (CRM)",loading:"...",stats:{totalCustomers:"",activeCustomers:"",suspendedBlocked:"/"},searchPlaceholder:"...",allStatuses:"",table:{customer:"",city:"",priceLevel:"",ordersCount:"",totalPurchases:"",status:"",actions:""},view:"",noMatchingCustomers:"",status:{active:"",suspended:"",blocked:"",pending:"",inactive:""},panel:{title:"",tabs:{overview:"",orders:"",activity:""},businessInfo:"",companyName:"",city:"",phone:"",crNumber:"",priceLevel:"",customerType:"",accountStatus:"",searchBalance:"",staffUsers:"",accessValidity:"",ordersHistory:"",activityLog:""},toast:{loadError:""},detail:{tabs:{overview:"",orders:"",quotes:"",staff:"",security:"",notes:""},accountManagement:"",changeStatus:"",statusActive:"",statusSuspended:"",statusBlocked:"",suspendUntil:"",saving:"...",saveChanges:"",statusUpdated:"",errorOccurred:"",priceDisplayType:"",pricesVisible:" - ",pricesHidden:" - ",visibleNoPoints:"",hiddenWithPoints:"",visible:"",hidden:"",priceDisplayChanged:"",searchWallet:"",addBalance:"",deductBalance:"",totalBalance:"",used:"",remaining:"",joinDate:"",lastLogin:"",customerDocs:"",commercialRegistration:"",vatCertificate:"",nationalId:"",notAttached:"",noDocument:"",enterPointsToAdd:"",pointsAddedSuccess:" {{points}} ",currentBalance:"",points:"",enterPointsToDeduct:"",cannotDeductMoreThan:"",pointsDeductedSuccess:" {{points}} ",errorDeductingPoints:"",staffStatusUpdated:"",customerOrders:"",noOrders:"",orderNumber:"",date:"",amount:"",orderStatus:"",priceQuotes:"",noQuotes:"",quoteNumber:"",items:"",staffMembers:"",noStaff:"",staffName:"",role:"",lastActive:"",action:"",suspend:"",activate:"",securityAccessLogs:"",loginHistory:"",device:"",ipAddress:"IP",location:"",adminNotes:"",noNotes:"",addNote:"...",writeNote:"...",notePlaceholder:"...",addNoteBtn:"",docs:{commercialReg:"",taxNumber:"",nationalAddress:"",notAttached:"",notAvailable:""},staff:{staffMembers:"",maxLimit:"",owner:"",active:"",suspended:"",suspendBtn:"",activateBtn:""},orders:{customerOrders:"",completed:"",ongoing:"",loadingOrders:"...",noOrders:"",unspecified:"",products:"",item:"",total:"",date:"",currency:"SAR",showingOf:" {{total}}  {{shown}} "},quotes:{pricingRequests:"",approved:"",new:"",loadingQuotes:"...",noQuotes:"",unspecified:"",items:"",item:"",total:"",date:"",currency:"SAR",pendingPricing:"",showingOf:" {{total}}  {{shown}} ",missing:"",reviewedBy:""},security:{securityIndicators:"",failedLoginAttempts:"",suspiciousBehavior:" ()",yes:"",no:"",resetCounter:"",counterReset:"",passwordReset:"",passwordResetDesc:"",enterNewPassword:"4",adminNotFound:"",passwordResetError:"",passwordMinLength:"4",resetPasswordBtn:"",recentLoginHistory:"",successfulLogin:"",failedLogin:"",passwordChanged:"",passwordResetAdmin:" ()",noLogsAvailable:""},notes:{adminNotes:"",noNotes:"",addNote:"...",placeholder:"...",saveNote:""}}},hce={systemSettings:"",generalSettings:"",bannerManagement:"",whySiniCar:"Sini Car",textManagement:"",statusLabels:"",apiIntegration:"API",appearanceIdentity:"",siteSettings:"",saveChanges:"",saving:"...",siteName:"/",supportPhone:"",salesWhatsApp:"WhatsApp",supportEmail:"",newsTicker:"",enableTicker:"",tickerText:"",tickerSpeed:" (1-10)",bgColor:" (Hex)",textColor:" (Hex)",productDisplaySettings:"",minVisibleQty:"",minVisibleQtyNote:"1",stockThreshold:"",stockThresholdNote:"0",settingsNote:"",maintenanceMode:"",maintenanceModeDesc:"",bannerAds:"",bannerAdsDesc:"",addNewBanner:"",newBannerData:"",mainTitle:"",subtitle:"",buttonText:"",colorScheme:"",imageUrl:"URL",saveAndPublish:"",uiTextManagement:"UI",uiTextManagementDesc:"",saveTexts:"",erpIntegration:"ERP",erpIntegrationDesc:"Onyx ERP",connectionSettings:"",erpUrl:"ERP URL",apiToken:"API",syncFrequency:"",realtime:"",every15Min:"15",hourly:"",daily:"",environment:"",production:" (Live)",sandbox:" (Test)",testConnection:"",connecting:"...",connectionSuccess:" (200 OK)",connectionFailed:"",sharedData:"API",sharedDataDesc:"",productsItems:"",productsItemsDesc:"",ordersData:"",ordersDataDesc:"",customersData:"",customersDataDesc:"",quotesData:"",quotesDataDesc:"",inventoryData:"",inventoryDataDesc:"",priceLists:"",priceListsDesc:"",syncDirection:"",pullOnly:"ERP",pullOnlyDesc:"",pushOnly:"ERP",pushOnlyDesc:"",bidirectional:"",bidirectionalDesc:"",webhooks:"Webhooks",webhooksDesc:"URL",addWebhook:"",events:"",webhookAdded:"Webhook",loadingFailed:"",settingsSaved:"",saveError:"",fillTitleAndDesc:"",bannerAdded:"",bannerDeleted:"",confirmDeleteBanner:"",hide:"",show:"",darkGray:"",royalBlue:"",vibrantOrange:"",darkGreen:"",loading:"...",advancedSettings:"",loggingLevel:"",loggingLevelBasic:"",loggingLevelDetailed:"",loggingLevelDebug:"",retryOnFail:"",retryAttempts:"",timeout:"",seconds:"",featureManagement:'"Sini Car"',featureManagementDesc:"",addNewFeature:"",fillAllFields:"",featureAdded:"",featureDeleted:"",title:"",description:"",icon:"",iconBox:"",iconChart:"",iconAnchor:"",iconHeadphones:"",iconTruck:"",iconShield:"",iconGlobe:"",iconStar:"",iconClock:"",iconAward:"",iconColor:"",colorCyan:"",colorGreen:"",colorGold:"",colorPurple:"",colorRed:"",colorBlue:"",colorPink:"",colorOrange:"",appearanceCustomization:"",primaryColor:"",primaryColorDesc:"",siteLogo:"",uploadNotAvailable:"",clickToUploadLogo:"",livePreview:"",livePreviewDesc:"",primaryButtonExample:"",statusLabelsManagement:"",statusLabelsDescription:"",addNewStatus:"",statusKey:"",statusLabel:"",newStatus:"",backgroundColor:"",preview:"",add:"",statusUpdated:"",fillKeyAndName:"",keyExists:"",statusAdded:"",cannotDeleteSystem:"",cannotDeleteInUse:"{{count}}",statusDeleted:"",defaultStatusSet:"",checkingUsage:"...",confirmDelete:"",yesDelete:"",systemStatus:"",defaultStatus:"",setAsDefault:"",systemStatuses:"",systemStatusesDesc:"",defaultStatusInfo:"",defaultStatusInfoDesc:"",statusCategories:{orderStatus:"",orderInternalStatus:"",accountRequestStatus:"",quoteRequestStatus:"",quoteItemStatus:"",missingStatus:"",importRequestStatus:"",customerStatus:"",staffStatus:""},guestMode:"",guestModeSettings:"",guestModeSettingsDesc:"/",guestBrowsingEnabled:"",guestBrowsingEnabledDesc:"",visibleSections:"",visibleSectionsDesc:"",showBusinessTypes:'""',showMainServices:"",showHowItWorks:'""',showWhySiniCar:'""',showCart:"",showMarketingCards:"",blurSettings:"",blurIntensity:"",blurLight:"",blurMedium:"",blurHeavy:"",showBlurOverlay:"",showBlurOverlayDesc:'""',searchSettings:"",allowSearch:"",allowSearchDesc:"",showSearchResults:"",showSearchResultsDesc:"",guestSettingsSaved:"",general:{title:"",siteName:"",siteDescription:"",contactEmail:"",contactPhone:"",currency:"",language:"",timezone:"",save:"",saved:""},business:{title:"",minOrderAmount:"",maxOrderAmount:"",deliveryFee:"",taxRate:""},notifications:{title:"",emailNotifications:"",smsNotifications:"",pushNotifications:""},security:{title:"",twoFactorAuth:"",sessionTimeout:"",maxLoginAttempts:""}},xce={title:"",newOrders:"",inProgress:"",readyToShip:"",totalOrders:"",searchOrder:"...",allStatuses:"",allInternalStatuses:"",orderNumber:"",customer:"",date:"",total:"",status:"",internalStatus:"",actions:"",noOrders:"",orderDetails:"",customerInfo:"",orderItems:"",statusHistory:"",internalNotes:"",updateStatus:"",updateInternalStatus:"",externalStatusUpdated:"",internalStatusUpdated:"",updateFailed:"",statusLabels:{pending:"",approved:"",shipped:"",delivered:"",rejected:"",cancelled:""},internalStatusLabels:{new:"",sentToWarehouse:"",waitingPayment:"",paymentConfirmed:"",salesInvoiceCreated:"",readyForShipment:"",completedInternal:"",cancelledInternal:""},details:"",name:"",userId:"ID",product:"",quantity:"",price:"",itemTotal:"",grandTotal:"",changedStatusTo:"",noHistory:"",externalStatus:"",externalStatusDesc:"",noStatusPermission:"",internalStatusTitle:"",internalStatusDesc:"",notesPlaceholder:"...",saveNotes:"",noInternalPermission:"",dangerZone:"",cancelOrder:"",noPermission:"",stats:{pending:"",processing:"",shipped:"",delivered:"",cancelled:"",total:"",new:"",ready:""},searchPlaceholder:"...",table:{orderId:"",customer:"",items:"",total:"",date:"",status:"",actions:""},view:"",approve:"",ship:"",deliver:"",cancel:"",orderUpdated:"",shippingInfo:"",paymentInfo:"",noteAdded:""},pce={title:"",newRequests:"",underReview:"",approved:"",rejected:"",searchAccount:"...",allStatuses:"",businessName:"",phone:"",requestDate:"",status:"",actions:"",noRequests:"",requestDetails:"",businessInfo:"",contactInfo:"",documents:"",decision:"",priceLevel:"",customerType:"",searchPoints:"",initialPoints:"",monthlyPoints:"",portalAccess:"",startDate:"",endDate:"",openEnded:"",staffAccess:"",canCreateStaff:"",maxStaffUsers:"",adminNotes:"",saveDecision:"",decisionSaved:"",saveError:"",statusLabels:{new:"",underReview:"",approved:"",rejected:"",onHold:""},documentTypes:{crCertificate:"",vatCertificate:"",nationalId:"",authorizationLetter:"",other:""}},gce={stats:{newRequests:"",underReview:"",approved:"",rejected:""},status:{new:"",underReview:"",approved:"",rejected:"",onHold:""},docTypes:{crCertificate:"",vatCertificate:"",nationalId:"",authLetter:"",other:""},categories:{spareParts:"",rental:"",insurance:"",agent:""},searchPlaceholder:"...",allStatuses:"",table:{businessName:"/",activityType:"",city:"",date:"",status:"",actions:""},approvedAccount:"",view:"",noMatchingRequests:"",panel:{title:"",customerData:"",businessName:"",activity:"",city:"",contactNumber:"",crNumber:"",vatNumber:"",customerNotes:"",attachedDocuments:"",adminDecision:""},form:{requestStatus:"",statusNew:"",statusUnderReview:"",statusApproved:"",statusRejected:"",statusOnHold:"",customerType:"",typePartsShop:"",typeRentalCompany:"",typeInsuranceCompany:"",typeSalesAgent:"",typeFleetCustomer:"",typeOther:"",priceLevel:"",level1:"Level 1 (VIP - )",level2:"Level 2 ()",level3:"Level 3 (/)",levelSpecial:"",accessValidity:"",to:"",openEnded:"",searchPoints:"",initialBalance:"",monthlyRenewal:"",allowAddStaff:"",maxLimit:"",adminNotes:"",notesPlaceholder:"...",saveDecision:"",cancel:""},toast:{saveSuccess:"",saveError:""}},bce={title:"",pendingQuotes:"",completedQuotes:"",searchQuote:"...",allStatuses:"",quoteNumber:"",customer:"",date:"",itemsCount:"",status:"",actions:"",noQuotes:"",quoteDetails:"",requestedItems:"",response:"",sendResponse:"",stats:{new:"",inProgress:"",completed:"",approved:""},searchPlaceholder:"ID...",table:{quoteId:"ID",customer:"",items:"",priceType:"",date:"",status:"",actions:""},view:"",process:"",complete:"",approve:"",quoteUpdated:"",pricedItems:"",missingItems:""},vce={title:"",subtitle:"",searchPlaceholder:"...",addProduct:"",importExcel:"Excel",exportExcel:"Excel",columnSettings:"",visibilitySettings:"",stats:{totalProducts:"",inStock:"",outOfStock:"",hidden:""},table:{partNumber:"",name:"",brand:"",quantity:"",price:"",visibility:"",actions:""},modal:{addTitle:"",editTitle:"",deleteConfirm:"",deleteMessage:"",importTitle:"Excel",columnSettingsTitle:"Excel"},form:{partNumber:"",name:"",brand:"",quantity:"",price:"",costPrice:"",description:"",isVisible:"",save:"",cancel:""},import:{selectFile:"Excel",dragDrop:"",processing:"...",success:"",imported:"",updated:"",skipped:"",errors:""},validation:{partNumberRequired:"",nameRequired:"",priceInvalid:"",quantityInvalid:""},toast:{productCreated:"",productUpdated:"",productDeleted:"",importSuccess:"",createError:"",updateError:"",deleteError:"",importError:"",loadError:"",visibilityThresholdSaved:""},presets:{title:"",name:"",isDefault:"",mappings:"",internalField:"",excelHeader:"Excel",enabled:"",required:"",addPreset:"",editPreset:"",deletePreset:"",savePreset:"",toast:{presetCreated:"",presetUpdated:"",presetDeleted:"",presetSetDefault:""}},uploadExcel:"Excel",downloadTemplate:"",loading:"...",noProducts:"",noMatchingProducts:"",partNumber:"",productName:"",quantity:"",price:"",category:"",actions:"",edit:"",delete:"",deleteConfirm:"",productDeleted:"",productSaved:"",productCreated:"",importModal:{title:"",selectFile:"Excel",importing:"...",importSuccess:"",imported:"",updated:"",skipped:"",errors:""},productModal:{editTitle:"",addTitle:"",save:"",cancel:""},columnPresets:{title:"Excel",presetName:"",enterPresetName:"",created:"",saved:"",deleteConfirm:"",deleted:"",setDefault:"",isDefault:""},visibility:{title:"",threshold:"",saved:""},pagination:{showing:"",of:"",products:"",previous:"",next:""},selectProductsFirst:"",selectedCount:" {{count}} ",visibilityApplied:" {{count}} ",visibilityRemoved:" {{count}} ",loadFailed:"",importFailed:"",templateDownloaded:"Excel",templateDownloadFailed:"",partAndNameRequired:"",deleteFailed:""},yce={title:"",subtitle:"",tabs:{users:"",roles:""},searchPlaceholder:"...",allRoles:"",allStatuses:"",addUser:"",exportUsers:"",table:{user:"",role:"",contact:"",lastLogin:"",status:"",actions:"",name:"",email:"",phone:""},status:{active:"",inactive:"",ACTIVE:"",SUSPENDED:"",PENDING:""},modal:{addTitle:"",editTitle:"",deleteConfirm:"",deleteMessage:"",resetPassword:"",toggleStatus:""},form:{fullName:"",username:"",email:"",phone:"",role:"",password:"",newPassword:"",confirmPassword:"",save:"",cancel:""},validation:{nameRequired:"",usernameRequired:"",emailRequired:"",emailInvalid:"",passwordRequired:"",passwordMinLength:"6",roleRequired:""},toast:{userCreated:"",userUpdated:"",userDeleted:"",passwordReset:"",statusChanged:"",createError:"",updateError:"",deleteError:"",loadError:""},roles:{title:"",addRole:"",editRole:"",deleteRole:"",roleName:"",roleDescription:"",permissions:"",usersCount:"",isSystemRole:"",noRoles:"",toast:{roleCreated:"",roleUpdated:"",roleDeleted:""},SUPER_ADMIN:"",ADMIN:"",MANAGER:"",STAFF:"",CUSTOMER_OWNER:"",CUSTOMER_STAFF:""},stats:{total:"",admins:"",staff:"",active:""},noUsers:"",editUser:"",deleteUser:"",deleteConfirm:"",userCreated:"",userUpdated:"",userDeleted:"",resetPassword:"",passwordReset:""},Nce={title:"",message:"",contactAdmin:"",requestedPage:"",goBack:"",goHome:"",errorCode:""},jce={searchPlaceholder:"...",allStatuses:"",table:{requestNumber:"",businessCustomer:" / ",uploadDate:"",itemsCount:"",priceType:"",status:"",actions:""},reviewDetails:" / ",noRequests:"",panel:{reviewRequest:"",proposedTotal:"",approving:"...",approveAndSend:"",selectAll:"",changeSelectedStatus:"",available:" (Approved)",unavailable:" (Missing)",rejected:" (Rejected)",customerPartNumber:"",customerPartName:"",quantity:"",matchedProduct:"",price:"",decision:"",notes:"",generalNotes:"",notesPlaceholder:"...",itemStatus:{approved:"",missing:"",rejected:"",pending:""}},status:{new:"",underReview:"",partiallyApproved:"",approved:"",quoted:"",processed:"",rejected:""},toast:{itemsUpdated:" {{count}} ",approvedWithoutPriceWarning:"",pricingSentSuccess:"",saveError:"",quoteSaved:"",quoteSaveFailed:""}},wce={tabs:{all:"",fromSearch:"",fromQuote:""},stats:{totalMissing:"",newMissing:"",underReview:"",ordered:"",solved:"",orderedImport:" / ",addedToStock:"",fromQuote:"",fromSearch:""},searchPlaceholder:"...",allStatuses:"",noMatchingMissing:"",table:{partNumber:" / ",partInfo:"",requestCount:"",requestFrequency:"",interestedCustomers:"",source:"",date:"",lastRequest:"",status:"",actions:""},source:{search:"",quote:""},actions:{details:"",linkToImport:"",addToStock:"",saving:"...",saveChanges:""},view:"",noMatchingParts:"",pagination:{page:"",of:""},export:{partNumber:"",itemName:"",source:"",requestCount:"",customerCount:"",status:"",lastRequest:"",adminNotes:""},panel:{title:"",missingDetails:"",partDetails:"",requestedItem:"",suggestedName:"",brand:"",searchQuery:"",partNumber:"",partName:"",requestCount:"",differentCustomers:"",source:"",sourceQuote:"",firstRequest:"",lastRequest:"",requestingCustomers:"",updateStatus:"",followUp:"",internalNotes:"",adminNotes:"",notesPlaceholder:"...",saving:"...",saveStatus:""},status:{new:"",underReview:"",orderPlanned:"",ordered:"",addedToStock:"",ignored:""},sourceLabels:{search:"",quote:""},toast:{statusUpdated:"",saveError:"",exportSuccess:"",exportFailed:"",linkImportSoon:"",redirectToAddProduct:"..."}},Sce={stats:{newRequests:"",pending:"",inProgress:"",awaitingCustomer:"",completed:"",delivered:""},table:{requestNumber:"",customer:"",service:"",requestDate:"",date:"",category:"",status:"",action:"",actions:""},serviceType:{fullService:"",processingOnly:"",fullImport:"",goodsPreparation:""},actions:{manageRequest:"",startReview:"",requestItemsFile:"",cancelRequest:""},viewDetails:"",noRequests:"",modal:{manageRequest:"",currentStatus:"",timeline:""},pricing:{preparePricing:"",customerFile:"",download:"",waitingForFile:"...",totalOffer:" (SAR)",sendToCustomer:""},details:{title:"",requestedBrands:"",serviceType:"",branchesCount:"",estimatedValue:"",customerNotes:""},statusControl:{title:"",hint:"..."},panel:{title:"",requestInfo:"",customer:"",category:"",description:"",estimatedQuantity:"",timeline:"",updateStatus:"",pricingSection:"",totalAmount:"",enterAmount:"",note:"",notePlaceholder:"...",sendPricing:""},status:{new:"",underReview:"",waitingCustomerExcel:"",pricingInProgress:"",pricingSent:"",waitingCustomerApproval:"",approvedByCustomer:"",inFactory:"",shipmentBooked:"",onTheSea:"",inPort:"",customsCleared:"",onTheWay:"",delivered:"",cancelled:""},toast:{statusUpdated:"",updateFailed:"",enterValidAmount:"",pricingSent:"",sendFailed:""}},Ace={title:"",stats:{total:"",active:"",pending:"",suspended:""},searchPlaceholder:"...",allStatuses:"",table:{name:"",phone:"",referralCode:"",referrals:"",earnings:"",status:"",actions:""},status:{ACTIVE:"",PENDING:"",SUSPENDED:""},noMarketers:"",view:"",activate:"",suspend:"",delete:"",addMarketer:"",marketerDetails:"",referralHistory:"",commissionHistory:"",payoutHistory:"",pendingPayout:"",totalEarnings:"",marketerUpdated:"",marketerCreated:""},Ece={title:"",stats:{total:"",active:"",scheduled:"",expired:""},searchPlaceholder:"...",allStatuses:"",table:{title:"",type:"",placement:"",startDate:"",endDate:"",status:"",actions:""},status:{ACTIVE:"",SCHEDULED:"",PAUSED:"",EXPIRED:""},noAds:"",addAd:"",editAd:"",deleteAd:"",deleteConfirm:"",adCreated:"",adUpdated:"",adDeleted:"",uploadImage:"",adDetails:""},Cce={title:"",stats:{totalRequests:"",pending:"",approved:"",rejected:"",active:""},searchPlaceholder:"ID...",allStatuses:"",table:{requestId:"ID",customer:"",product:"",amount:"",installments:"",status:"",actions:""},status:{PENDING:"",APPROVED:"",REJECTED:"",ACTIVE:"",COMPLETED:"",DEFAULTED:""},noRequests:"",view:"",approve:"",reject:"",requestDetails:"",customerInfo:"",productInfo:"",paymentSchedule:"",paymentHistory:"",monthlyPayment:"",totalAmount:"",remainingAmount:"",dueDate:"",requestApproved:"",requestRejected:""},Tce={title:"",description:"",resetDefaults:"",saveChanges:"",confirmReset:"",unsavedChanges:"",savedSuccess:"",tabs:{design:"",layout:"",navigation:"",features:"",content:""},design:{themeMode:"",colors:""},layout:{sections:"",reorder:""},navigation:{menu:""},features:{tools:"",ordering:"",marketing:"",guest:""},banners:{hero:""},announcements:{title:""},cards:{info:""}},_ce={title:"",subtitle:"",filters:"",toolType:"",status:"",dateFrom:"",dateTo:"",totalUsage:"",noRecords:"",noRecordsDesc:"",detailsTitle:"",loadError:"",col:{date:"",tool:"",input:"",output:"",status:"",actions:""},processingTime:"",inputFile:"",outputFile:"",errorMessage:"",deviceType:"",additionalInfo:"",confidence:"",suppliersCompared:"",pagesProcessed:""},kce={title:"",subtitle:"/",settingsTab:"",analyticsTab:"",usageLogTab:"",filters:"",search:"",searchPlaceholder:"VIN...",toolType:"",status:"",dateFrom:"",dateTo:"",clearFilters:"",export:"",totalActions:"",successful:"",failed:"",successRate:"",noRecords:"",exportSuccess:"",exportError:"",loadError:"",col:{date:"",customer:"",tool:"",input:"",output:"",status:"",actions:""},detailTitle:"",processingTime:"",inputDetails:"",outputDetails:"",showing:""},Oce={VIN:"VIN",PDF_EXCEL:"PDFExcel",COMPARISON:"",ALTERNATIVES:"",SEARCH:"",EXCEL_QUOTE:"Excel"},Ice={SUCCESS:"",FAILED:"",PENDING:"",PROCESSING:""},Rce={viewImage:"",noImage:"",loadError:"",magnifierHint:"",uploadImage:"",addToGallery:"",removeImage:"",setAsMain:"",mainImage:"",gallery:"",imageOf:" {{current}} / {{total}}",settings:{title:"",enabled:"",enabledDesc:"",supplierUpload:"",supplierUploadDesc:"",maxSize:" (MB)",maxSizeDesc:""}},Pce={button:"",title:"",subtitle:"",typeLabel:"",subjectLabel:"",subjectPlaceholder:"...",descriptionLabel:"",descriptionPlaceholder:"...",submitButton:"",submitting:"...",successTitle:"",successMessage:"",errorMessage:"",guest:"",types:{BUG:"",FEATURE:"",IMPROVEMENT:"",COMPLAINT:"",OTHER:""},categories:{bug:"",suggestion:"",complaint:"",question:"",other:""},priorities:{low:"",medium:"",high:"",critical:""}},Dce={title:"",subtitle:"",allFeedback:"",filters:"",type:"",status:{NEW:"",IN_PROGRESS:"",IN_REVIEW:"",RESOLVED:"",CLOSED:"",DISMISSED:""},priority:{LOW:"",MEDIUM:"",HIGH:"",CRITICAL:""},dateRange:"",search:"...",noFeedback:"",loading:"...",export:"",refresh:"",markAsRead:"",delete:"",adminNotes:"",adminNotesPlaceholder:"...",saveNotes:"",updateStatus:"",updatePriority:"",customerInfo:"",feedbackDetails:"",submittedAt:"",lastUpdated:"",actions:"",stats:{total:"",new:"",inProgress:"",resolved:"",closed:"",byType:"",byPriority:""},senderType:{CUSTOMER:"",SUPPLIER:"",MARKETER:"",EMPLOYEE:"",ADMIN:"",GUEST:""},exportSuccess:"",exportError:"",updateSuccess:"",updateError:"",deleteConfirm:"",deleteSuccess:"",deleteError:""},Mce={common:Uoe,login:zoe,loading:Boe,intro:$oe,marketing:qoe,guestMode:Hoe,register:Voe,nav:Goe,dashboard:Woe,products:Qoe,orders:Koe,cart:Joe,customers:Yoe,users:Xoe,roles:Zoe,permissions:ece,settings:tce,accountRequests:sce,statusLabels:ace,reports:rce,notifications:nce,errors:ice,confirmations:lce,admin:oce,homepage:cce,sidebar:dce,customerDashboard:uce,adminDashboard:mce,adminCustomers:fce,adminSettings:hce,adminOrders:xce,adminAccounts:pce,adminAccountRequests:gce,adminQuotes:bce,adminProducts:vce,adminUsers:yce,accessDenied:Nce,adminQuoteManager:jce,adminMissingParts:wce,adminImport:Sce,adminMarketers:Ace,adminAdvertising:Ece,adminInstallments:Cce,adminPortalSettings:Tce,traderHistory:_ce,traderToolsAdmin:kce,toolTypes:Oce,toolStatus:Ice,productImages:Rce,feedback:Pce,feedbackAdmin:Dce},Lce={ar:{translation:Fie},en:{translation:zle},hi:{translation:Foe},zh:{translation:Mce}};Lr.use(EF).use(l9).init({resources:Lce,lng:localStorage.getItem("i18nextLng")||"ar",fallbackLng:"ar",supportedLngs:["ar","en","hi","zh"],debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"}});const Np=[{code:"ar",name:"",nativeName:"",flag:"",dir:"rtl"},{code:"en",name:"English",nativeName:"English",flag:"",dir:"ltr"},{code:"hi",name:"",nativeName:"",flag:"",dir:"ltr"},{code:"zh",name:"",nativeName:"",flag:"",dir:"ltr"}],Uo=e=>e==="ar"?"rtl":"ltr",CF=e=>{Lr.changeLanguage(e);const s=Uo(e);document.documentElement.dir=s,document.documentElement.lang=e,localStorage.setItem("i18nextLng",e)},TF=C.createContext(void 0),Fce=({children:e})=>{const{t:s,i18n:a}=Kt(),[r,n]=C.useState(a.language||"ar"),[i,l]=C.useState({}),o=x=>{n(x),CF(x)};C.useEffect(()=>{const x=v=>{n(v);const b=Uo(v);document.documentElement.dir=b,document.documentElement.lang=v};a.on("languageChanged",x);const p=Uo(a.language);return document.documentElement.dir=p,document.documentElement.lang=a.language,()=>{a.off("languageChanged",x)}},[a]),C.useEffect(()=>{(async()=>{try{const p=await he.getSettings();p.uiTexts&&l(p.uiTexts)}catch{console.error("Failed to load UI texts")}})()},[]);const d=(x,p)=>{const v=s(x,p);return typeof v=="string"?v:x},u=(x,p)=>i[x]||p,h=Uo(r);return t.jsx(TF.Provider,{value:{language:r,setLanguage:o,t:d,tDynamic:u,dir:h,fontFamily:"Tajawal, system-ui, sans-serif"},children:e})},Hs=()=>{const e=C.useContext(TF);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},Uce=({className:e,variant:s="light"})=>{const{language:a,setLanguage:r}=Hs(),[n,i]=C.useState(!1);return t.jsxs("div",{className:`relative ${e}`,children:[t.jsxs("button",{onClick:()=>i(!n),className:`flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all duration-200 ${s==="dark"?"bg-white/10 border-white/20 text-white hover:bg-white/20 backdrop-blur-md":"bg-white border-gray-200 text-slate-700 hover:border-amber-500 shadow-sm hover:shadow-md"}`,"data-testid":"button-language-switcher",children:[t.jsx(Ea,{size:14,className:s==="dark"?"text-amber-400":"text-amber-600"}),t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:a}),t.jsx(Ir,{size:12,className:`transition-transform duration-200 ${n?"rotate-180":""} opacity-70`})]}),n&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),t.jsx("div",{className:`absolute top-full mt-2 w-44 py-1 bg-white rounded-lg shadow-xl border border-gray-100 overflow-hidden z-50 animate-fade-in ${document.dir==="rtl"?"left-0":"right-0"}`,children:Np.map(l=>t.jsxs("button",{onClick:()=>{r(l.code),i(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-slate-50 transition-colors ${a===l.code?"bg-amber-50 font-bold text-amber-700":"text-slate-700"}`,"data-testid":`button-lang-${l.code}`,children:[t.jsx("span",{className:"text-lg",children:l.flag}),t.jsx("span",{className:"flex-1 text-start",children:l.nativeName}),a===l.code&&t.jsx(es,{size:16,className:"text-amber-600"})]},l.code))})]})]})},_F=C.createContext(void 0),zce=({children:e})=>{const[s,a]=C.useState([]),r=C.useCallback(i=>{a(l=>l.filter(o=>o.id!==i))},[]),n=C.useCallback((i,l="success")=>{const o=Math.random().toString(36).substring(2,9);a(d=>[...d,{id:o,message:i,type:l}]),setTimeout(()=>{r(o)},3e3)},[r]);return t.jsx(_F.Provider,{value:{toasts:s,addToast:n,removeToast:r},children:e})},It=()=>{const e=C.useContext(_F);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},ph=({variant:e="light",size:s="md",showLabel:a=!0})=>{const{i18n:r,t:n}=Kt(),[i,l]=C.useState(!1),o=C.useRef(null),d=Np.find(x=>x.code===r.language)||Np[0];C.useEffect(()=>{const x=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),C.useEffect(()=>{const x=Uo(r.language);document.documentElement.dir=x,document.documentElement.lang=r.language},[r.language]);const u=x=>{CF(x),l(!1)},h={sm:"px-2 py-1.5 text-xs gap-1.5",md:"px-3 py-2 text-sm gap-2",lg:"px-4 py-2.5 text-base gap-2.5"},f={dark:"bg-white/10 hover:bg-white/20 text-white border-white/20 backdrop-blur-md",light:"bg-white hover:bg-slate-50 text-slate-700 border-slate-200 shadow-sm hover:shadow-md",floating:"bg-[#0B1B3A] hover:bg-[#1a2e56] text-white border-[#C8A04F]/30 shadow-lg"};return t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{onClick:()=>l(!i),className:`flex items-center rounded-xl border transition-all duration-200 font-medium ${h[s]} ${f[e]}`,"data-testid":"button-language-switcher",children:[t.jsx("span",{className:"text-lg leading-none",children:d.flag}),a&&t.jsx("span",{className:"font-bold",children:d.nativeName}),t.jsx(Ir,{size:s==="sm"?12:14,className:`transition-transform opacity-60 ${i?"rotate-180":""}`})]}),i&&t.jsxs("div",{className:`absolute top-full mt-2 w-52 bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden z-[100] animate-in fade-in slide-in-from-top-2 duration-200 ${document.dir==="rtl"?"left-0":"right-0"}`,children:[t.jsx("div",{className:"p-2 bg-slate-50 border-b border-slate-100",children:t.jsx("p",{className:"text-xs font-bold text-slate-500 px-2",children:n("settings.selectLanguage")})}),t.jsx("div",{className:"p-1",children:Np.map(x=>t.jsxs("button",{onClick:()=>u(x.code),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-start transition-all duration-150 ${x.code===r.language?"bg-gradient-to-r from-amber-50 to-amber-100/50 text-amber-800":"hover:bg-slate-50 text-slate-700"}`,"data-testid":`button-language-${x.code}`,children:[t.jsx("span",{className:"text-2xl",children:x.flag}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`font-bold ${x.code===r.language?"text-amber-800":"text-slate-800"}`,children:x.nativeName}),t.jsx("p",{className:"text-xs text-slate-500",children:x.name})]}),x.code===r.language&&t.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center",children:t.jsx(es,{size:14,className:"text-white"})})]},x.code))})]})]})},Bce=()=>t.jsx(ph,{variant:"light",size:"md"}),o5={CR_CERTIFICATE:{labelKey:"register.documents.crCertificate",required:!0,forCategory:["SPARE_PARTS_SHOP","INSURANCE_COMPANY","RENTAL_COMPANY","MAINTENANCE_CENTER"]},VAT_CERTIFICATE:{labelKey:"register.documents.vatCertificate",required:!0,forCategory:["SPARE_PARTS_SHOP","INSURANCE_COMPANY","RENTAL_COMPANY","MAINTENANCE_CENTER"]},NATIONAL_ID:{labelKey:"register.documents.nationalId",required:!0,forCategory:["SALES_REP"]},NATIONAL_ADDRESS:{labelKey:"register.documents.nationalAddressCert",required:!0,forCategory:["SPARE_PARTS_SHOP","INSURANCE_COMPANY","RENTAL_COMPANY","MAINTENANCE_CENTER"]}},$ce=["application/pdf","image/jpeg","image/png","image/webp"],qce=5*1024*1024,Hce=({onSuccess:e,onSwitchToLogin:s})=>{var T,z,k,F,P,G,Y,W,ee,H,M,X,K,Q,se,V,te;const[a,r]=C.useState(!1),[n,i]=C.useState(!1),[l,o]=C.useState("SPARE_PARTS_SHOP"),[d,u]=C.useState([]),h=C.useRef({}),[f,x]=C.useState(null),{addToast:p}=It(),{t:v,i18n:b}=Kt(),{dir:y}=Hs();b.language,C.useEffect(()=>{he.getSettings().then(x)},[]);const[j,w]=C.useState({phone:"",notes:"",email:"",businessName:"",city:"",country:"",branchesCount:1,commercialRegNumber:"",vatNumber:"",nationalAddress:"",contactPerson:"",fullName:"",representativeRegion:"",representativeClientsType:"",approximateClientsCount:""}),S=Z=>{w({...j,[Z.target.name]:Z.target.value})},O=()=>Object.entries(o5).filter(([Z,ue])=>ue.forCategory.includes(l)).map(([Z,ue])=>({key:Z,label:v(ue.labelKey),...ue})),_=async(Z,ue)=>{if(!$ce.includes(ue.type)){p(v("register.documents.invalidFileType"),"error");return}if(ue.size>qce){p(v("register.documents.fileTooLarge"),"error");return}const re=new FileReader;re.onload=()=>{const J={id:`doc_${Date.now()}`,name:ue.name,type:Z,fileType:ue.type,fileSize:ue.size,base64Data:re.result,uploadedAt:new Date().toISOString()};u(q=>[...q.filter(fe=>fe.type!==Z),J]);const Ne=o5[Z];p(`${v((Ne==null?void 0:Ne.labelKey)||"common.document")} ${v("register.documents.uploadSuccess")}`,"success")},re.readAsDataURL(ue)},E=Z=>{u(ue=>ue.filter(re=>re.type!==Z))},A=Z=>Z<1024?Z+" B":Z<1024*1024?(Z/1024).toFixed(1)+" KB":(Z/(1024*1024)).toFixed(1)+" MB",D=()=>{if(!j.phone)return p(v("register.validation.phoneRequired"),"error"),!1;if(l==="SALES_REP"){if(!j.fullName)return p(v("register.validation.fullNameRequired"),"error"),!1;if(!j.representativeRegion)return p(v("register.validation.regionRequired"),"error"),!1}else{if(!j.businessName)return p(v("register.validation.businessNameRequired"),"error"),!1;if(!j.city)return p(v("register.validation.cityRequired"),"error"),!1;if(!j.contactPerson)return p(v("register.validation.contactPersonRequired"),"error"),!1;if(!j.commercialRegNumber)return p(v("register.validation.commercialRegRequired"),"error"),!1;if(!j.vatNumber)return p(v("register.validation.vatRequired"),"error"),!1;if(!j.nationalAddress)return p(v("register.validation.nationalAddressRequired"),"error"),!1}const Z=O().filter(ue=>ue.required);for(const ue of Z)if(!d.find(re=>re.type===ue.key))return p(`${ue.label} ${v("register.validation.documentRequired")}`,"error"),!1;return!0},L=async()=>{if(D()){r(!0);try{await he.createAccountOpeningRequest({category:l,...j,phone:j.phone||"",documents:d}),i(!0),p(v("register.requestSuccess"),"success")}catch{p(v("register.submitError"),"error")}finally{r(!1)}}},B=({docKey:Z,label:ue,required:re})=>{const J=d.find(q=>q.type===Z),Ne=J==null?void 0:J.fileType.startsWith("image/");return t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[ue," ",re&&t.jsx("span",{className:"text-red-500",children:"*"})]}),J?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-green-600",children:Ne?t.jsx(Li,{size:20}):t.jsx(qS,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:J.name}),t.jsx("p",{className:"text-xs text-slate-500",children:A(J.fileSize)})]}),t.jsx("button",{type:"button",onClick:()=>E(Z),className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center text-red-600 hover:bg-red-200 transition-colors","data-testid":`remove-doc-${Z}`,children:t.jsx(vt,{size:16})})]}):t.jsxs("div",{className:"w-full p-6 border-2 border-dashed border-slate-300 rounded-xl bg-slate-50 hover:bg-slate-100 hover:border-brand-400 transition-all cursor-pointer text-center",onClick:()=>{var q;return(q=h.current[Z])==null?void 0:q.click()},"data-testid":`upload-${Z}`,children:[t.jsx(va,{className:"mx-auto mb-2 text-slate-400",size:28}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:v("register.documents.clickToUpload")}),t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:v("register.documents.fileTypes")}),t.jsx("input",{type:"file",ref:q=>h.current[Z]=q,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:q=>{var fe;const ce=(fe=q.target.files)==null?void 0:fe[0];ce&&_(Z,ce),q.target.value=""}})]})]})},I=Z=>t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[Z.label," ",Z.required&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{...Z,className:"w-full p-3 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-medium"})]});return t.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4 relative",dir:y,children:[t.jsx("div",{className:`absolute top-4 z-50 ${y==="rtl"?"left-4":"right-4"}`,children:t.jsx(ph,{variant:"floating",size:"md"})}),t.jsx("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:n?t.jsxs("div",{className:"text-center py-20 px-8 animate-fade-in",children:[t.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center text-green-600 mx-auto mb-8 shadow-sm animate-bounce",children:t.jsx(Mt,{size:48})}),t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:v("register.success.title")}),t.jsx("p",{className:"text-slate-500 text-lg mb-8 max-w-xl mx-auto leading-relaxed",children:v("register.success.message")}),t.jsx("div",{className:"flex justify-center gap-4",children:t.jsx("button",{onClick:s,className:"px-8 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-md",children:v("register.success.backToHome")})})]}):t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsxs("div",{className:"bg-slate-900 text-white p-8 md:w-1/3 flex flex-col justify-between relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("h2",{className:"text-2xl font-black mb-6",children:((T=f==null?void 0:f.authPageTexts)==null?void 0:T.registerTitle)||v("register.openNewAccount")}),t.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-6",children:((z=f==null?void 0:f.authPageTexts)==null?void 0:z.registerSubtitle)||v("register.subtitle")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-200",children:[t.jsx(Mt,{className:"text-brand-500",size:18}),t.jsx("span",{children:v("register.benefits.exclusivePrices")})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-200",children:[t.jsx(Mt,{className:"text-brand-500",size:18}),t.jsx("span",{children:v("register.benefits.instantAccess")})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-200",children:[t.jsx(Mt,{className:"text-brand-500",size:18}),t.jsx("span",{children:v("register.benefits.taxInvoices")})]})]})]}),t.jsx("div",{className:"relative z-10 mt-8 pt-8 border-t border-slate-800",children:t.jsxs("button",{onClick:s,className:"text-sm font-bold text-slate-400 hover:text-white flex items-center gap-2 transition-colors",children:[t.jsx(sl,{size:16})," ",((k=f==null?void 0:f.authPageTexts)==null?void 0:k.registerLoginLinkText)||v("register.backToLogin")]})})]}),t.jsxs("div",{className:"p-8 md:p-10 md:w-2/3",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:[((F=f==null?void 0:f.authPageTexts)==null?void 0:F.registerBusinessTypeLabel)||v("register.selectBusinessType")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3",children:[t.jsxs("button",{onClick:()=>o("SPARE_PARTS_SHOP"),className:`p-3 rounded-xl border text-center transition-all ${l==="SPARE_PARTS_SHOP"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-spare-parts",children:[t.jsx(ta,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.sparePartsShop")})]}),t.jsxs("button",{onClick:()=>o("MAINTENANCE_CENTER"),className:`p-3 rounded-xl border text-center transition-all ${l==="MAINTENANCE_CENTER"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-maintenance-center",children:[t.jsx(ac,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.maintenanceCenter")})]}),t.jsxs("button",{onClick:()=>o("INSURANCE_COMPANY"),className:`p-3 rounded-xl border text-center transition-all ${l==="INSURANCE_COMPANY"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-insurance",children:[t.jsx(Bs,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.insuranceCompany")})]}),t.jsxs("button",{onClick:()=>o("RENTAL_COMPANY"),className:`p-3 rounded-xl border text-center transition-all ${l==="RENTAL_COMPANY"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-rental",children:[t.jsx(Mi,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.rentalCompany")})]}),t.jsxs("button",{onClick:()=>o("SALES_REP"),className:`p-3 rounded-xl border text-center transition-all ${l==="SALES_REP"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-sales-rep",children:[t.jsx(Fu,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.salesRep")})]})]})]}),t.jsxs("form",{onSubmit:Z=>Z.preventDefault(),className:"space-y-6 animate-fade-in",children:[l==="SALES_REP"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.salesRepFields.fullName"),name:"fullName",value:j.fullName,onChange:S,required:!0}),t.jsx(I,{label:v("register.salesRepFields.phone"),name:"phone",value:j.phone,onChange:S,placeholder:"05xxxxxxxx",required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.salesRepFields.region"),name:"representativeRegion",value:j.representativeRegion,onChange:S,required:!0}),t.jsx(I,{label:v("register.salesRepFields.email"),name:"email",type:"email",value:j.email,onChange:S})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.salesRepFields.clientsType"),name:"representativeClientsType",value:j.representativeClientsType,onChange:S}),t.jsx(I,{label:v("register.salesRepFields.clientsCount"),name:"approximateClientsCount",value:j.approximateClientsCount,onChange:S})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:((P=f==null?void 0:f.authPageTexts)==null?void 0:P.registerBusinessNameLabel)||v("register.businessFields.businessName"),name:"businessName",value:j.businessName,onChange:S,placeholder:((G=f==null?void 0:f.authPageTexts)==null?void 0:G.registerBusinessNamePlaceholder)||"",required:!0}),t.jsx(I,{label:v("register.businessFields.branchesCount"),name:"branchesCount",type:"number",min:1,value:j.branchesCount,onChange:S,required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:((Y=f==null?void 0:f.authPageTexts)==null?void 0:Y.registerCityLabel)||v("register.businessFields.city"),name:"city",value:j.city,onChange:S,placeholder:((W=f==null?void 0:f.authPageTexts)==null?void 0:W.registerCityPlaceholder)||"",required:!0}),t.jsx(I,{label:v("register.businessFields.nationalAddress"),name:"nationalAddress",value:j.nationalAddress,onChange:S,placeholder:v("register.businessFields.nationalAddressPlaceholder"),required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.businessFields.commercialReg"),name:"commercialRegNumber",value:j.commercialRegNumber,onChange:S,required:!0}),t.jsx(I,{label:v("register.businessFields.vatNumber"),name:"vatNumber",value:j.vatNumber,onChange:S,required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:((ee=f==null?void 0:f.authPageTexts)==null?void 0:ee.registerOwnerNameLabel)||v("register.businessFields.contactPerson"),name:"contactPerson",value:j.contactPerson,onChange:S,placeholder:((H=f==null?void 0:f.authPageTexts)==null?void 0:H.registerOwnerNamePlaceholder)||"",required:!0}),t.jsx(I,{label:((M=f==null?void 0:f.authPageTexts)==null?void 0:M.registerPhoneLabel)||v("register.businessFields.phone"),name:"phone",value:j.phone,onChange:S,placeholder:((X=f==null?void 0:f.authPageTexts)==null?void 0:X.registerPhonePlaceholder)||"05xxxxxxxx",required:!0})]}),t.jsx(I,{label:((K=f==null?void 0:f.authPageTexts)==null?void 0:K.registerEmailLabel)||v("register.businessFields.emailOptional"),name:"email",type:"email",value:j.email,onChange:S,placeholder:((Q=f==null?void 0:f.authPageTexts)==null?void 0:Q.registerEmailPlaceholder)||""})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-6 mt-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(zt,{className:"text-brand-600",size:20}),t.jsx("h3",{className:"text-lg font-bold text-slate-800",children:v("register.documents.requiredDocuments")})]}),t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4 flex items-start gap-3",children:[t.jsx(Cs,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:18}),t.jsx("p",{className:"text-sm text-amber-800",children:v("register.documents.uploadNotice")})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:O().map(Z=>t.jsx("div",{children:t.jsx(B,{docKey:Z.key,label:Z.label,required:Z.required})},Z.key))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:((se=f==null?void 0:f.authPageTexts)==null?void 0:se.registerNotesLabel)||v("register.additionalNotes")}),t.jsx("textarea",{name:"notes",className:"w-full p-3 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-medium",rows:3,value:j.notes,onChange:S,placeholder:((V=f==null?void 0:f.authPageTexts)==null?void 0:V.registerNotesPlaceholder)||""})]}),t.jsxs("button",{onClick:L,disabled:a,className:"w-full py-4 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-200 flex items-center justify-center gap-2 transition-all",children:[a?v("register.submitting"):((te=f==null?void 0:f.authPageTexts)==null?void 0:te.registerButtonText)||v("register.submitRequest")," ",t.jsx(xi,{size:18,className:"rtl:rotate-180"})]})]})]})]})})]})},Mm=[{id:"chery",label:" Chery",labelEn:"Chery"},{id:"geely",label:" Geely",labelEn:"Geely"},{id:"haval",label:" Haval",labelEn:"Haval"},{id:"mg",label:"  MG",labelEn:"MG"},{id:"jac",label:" JAC",labelEn:"JAC"},{id:"baic",label:" BAIC",labelEn:"BAIC"},{id:"changan",label:" Changan",labelEn:"Changan"},{id:"greatwall",label:"  Great Wall",labelEn:"Great Wall"},{id:"dongfeng",label:" Dongfeng",labelEn:"Dongfeng"},{id:"faw",label:" FAW",labelEn:"FAW"},{id:"saic",label:" SAIC",labelEn:"SAIC"},{id:"byd",label:"   BYD",labelEn:"BYD"},{id:"hongqi",label:" Hongqi",labelEn:"Hongqi"},{id:"gac",label:"   GAC",labelEn:"GAC"},{id:"wuling",label:" Wuling",labelEn:"Wuling"},{id:"foton",label:" Foton",labelEn:"Foton"},{id:"zotye",label:" Zotye",labelEn:"Zotye"},{id:"lifan",label:" Lifan",labelEn:"Lifan"},{id:"dfsk",label:"    DFSK",labelEn:"DFSK"},{id:"jetour",label:" Jetour",labelEn:"Jetour"},{id:"exeed",label:" Exeed",labelEn:"Exeed"},{id:"tank",label:" Tank",labelEn:"Tank"},{id:"ora",label:" Ora",labelEn:"Ora"},{id:"other",label:"",labelEn:"Other"}],kF=[{id:"riyadh",label:"",region:" "},{id:"jeddah",label:"",region:" "},{id:"mecca",label:" ",region:" "},{id:"medina",label:" ",region:" "},{id:"dammam",label:"",region:" "},{id:"khobar",label:"",region:" "},{id:"dhahran",label:"",region:" "},{id:"qatif",label:"",region:" "},{id:"ahsa",label:"",region:" "},{id:"jubail",label:"",region:" "},{id:"taif",label:"",region:" "},{id:"tabuk",label:"",region:" "},{id:"abha",label:"",region:" "},{id:"khamis",label:" ",region:" "},{id:"yanbu",label:"",region:" "},{id:"hail",label:"",region:" "},{id:"najran",label:"",region:" "},{id:"jazan",label:"",region:" "},{id:"baha",label:"",region:" "},{id:"buraidah",label:"",region:""},{id:"unaizah",label:"",region:""},{id:"arar",label:"",region:" "},{id:"sakaka",label:"",region:""},{id:"qunfudah",label:"",region:" "},{id:"hofuf",label:"",region:" "}],OF=[{id:"instagram",label:"",labelEn:"Instagram",icon:"instagram"},{id:"twitter",label:" (X)",labelEn:"Twitter (X)",icon:"twitter"},{id:"tiktok",label:" ",labelEn:"TikTok",icon:"video"},{id:"snapchat",label:" ",labelEn:"Snapchat",icon:"camera"},{id:"whatsapp",label:"",labelEn:"WhatsApp",icon:"message-circle"},{id:"youtube",label:"",labelEn:"YouTube",icon:"youtube"},{id:"facebook",label:"",labelEn:"Facebook",icon:"facebook"},{id:"field",label:" ",labelEn:"Field Marketing",icon:"map-pin"},{id:"referral",label:" ",labelEn:"Customer Referral",icon:"users"},{id:"other",label:"",labelEn:"Other",icon:"more-horizontal"}],WS=[{id:"banner",label:" ",labelEn:"Banner Ad",description:"   "},{id:"popup",label:" ",labelEn:"Popup",description:"   "},{id:"notification",label:"",labelEn:"Notification",description:"   "}],Vce=[{days:7,label:" ",labelEn:"1 Week"},{days:14,label:"",labelEn:"2 Weeks"},{days:30,label:" ",labelEn:"1 Month"},{days:60,label:"",labelEn:"2 Months"},{days:90,label:" ",labelEn:"3 Months"},{days:180,label:" ",labelEn:"6 Months"},{days:365,label:" ",labelEn:"1 Year"}],QS=[{code:"CN",label:"",labelEn:"China"},{code:"AE",label:"",labelEn:"UAE"},{code:"KW",label:"",labelEn:"Kuwait"},{code:"QA",label:"",labelEn:"Qatar"},{code:"BH",label:"",labelEn:"Bahrain"},{code:"OM",label:"",labelEn:"Oman"},{code:"TR",label:"",labelEn:"Turkey"},{code:"IN",label:"",labelEn:"India"},{code:"TH",label:"",labelEn:"Thailand"},{code:"JP",label:"",labelEn:"Japan"},{code:"KR",label:" ",labelEn:"South Korea"},{code:"MY",label:"",labelEn:"Malaysia"},{code:"OTHER",label:"",labelEn:"Other"}],IF=[{id:"factory",label:"",labelEn:"Factory",icon:"factory"},{id:"supplier",label:" / ",labelEn:"Supplier / Distributor",icon:"truck"},{id:"agent",label:"",labelEn:"Agent",icon:"briefcase"}],Gce={NEW:{label:" ",labelEn:"New",color:"bg-blue-100 text-blue-700 border-blue-200"},UNDER_REVIEW:{label:" ",labelEn:"Under Review",color:"bg-yellow-100 text-yellow-700 border-yellow-200"},APPROVED:{label:" ",labelEn:"Approved",color:"bg-green-100 text-green-700 border-green-200"},REJECTED:{label:"",labelEn:"Rejected",color:"bg-red-100 text-red-700 border-red-200"},NEEDS_MODIFICATION:{label:" ",labelEn:"Needs Modification",color:"bg-orange-100 text-orange-700 border-orange-200"}},Po={LOCAL_SUPPLIER:{label:" ",labelEn:"Local Supplier",icon:"building-2",color:"bg-emerald-600",description:"     "},INTERNATIONAL_SUPPLIER:{label:" ",labelEn:"International Supplier",icon:"globe",color:"bg-blue-600",description:"    ( )"},MARKETER:{label:"",labelEn:"Marketer",icon:"megaphone",color:"bg-purple-600",description:"    "},ADVERTISER:{label:"",labelEn:"Advertiser",icon:"sparkles",color:"bg-amber-600",description:"     "}},Wce=({onBack:e,onCheckStatus:s})=>{const{t:a,i18n:r}=Kt(),{dir:n}=Hs(),{addToast:i}=It();r.language;const[l,o]=C.useState("LOCAL_SUPPLIER"),[d,u]=C.useState(!1),[h,f]=C.useState(!1),[x,p]=C.useState(!1),[v,b]=C.useState(!1),[y,j]=C.useState(!1),[w,S]=C.useState(""),[O,_]=C.useState(""),[E,A]=C.useState(null),[D,L]=C.useState({companyName:"",commercialRegNumber:"",vatNumber:"",nationalAddressNumber:"",phone:"",password:"",confirmPassword:"",city:"",carBrands:[],ownBrands:[],newOwnBrand:""}),[B,I]=C.useState({companyName:"",country:"",city:"",businessType:"",phone:"",password:"",confirmPassword:"",carBrands:[]}),[T,z]=C.useState({fullName:"",phone:"",password:"",confirmPassword:"",marketingChannels:[],otherChannel:""}),[k,F]=C.useState({companyName:"",phone:"",adType:"",duration:0,startDate:""}),P=(K,Q)=>{Q==="local"?D.carBrands.includes(K)||L({...D,carBrands:[...D.carBrands,K]}):B.carBrands.includes(K)||I({...B,carBrands:[...B.carBrands,K]})},G=(K,Q)=>{Q==="local"?L({...D,carBrands:D.carBrands.filter(se=>se!==K)}):I({...B,carBrands:B.carBrands.filter(se=>se!==K)})},Y=()=>{D.newOwnBrand.trim()&&!D.ownBrands.includes(D.newOwnBrand.trim())&&L({...D,ownBrands:[...D.ownBrands,D.newOwnBrand.trim()],newOwnBrand:""})},W=K=>{z(Q=>({...Q,marketingChannels:Q.marketingChannels.includes(K)?Q.marketingChannels.filter(se=>se!==K):[...Q.marketingChannels,K]}))},ee=()=>{if(l==="LOCAL_SUPPLIER"){if(!D.companyName)return i("   ","error"),!1;if(!D.commercialRegNumber)return i("    ","error"),!1;if(!D.vatNumber)return i("   ","error"),!1;if(!D.nationalAddressNumber)return i("    ","error"),!1;if(!D.phone)return i("   ","error"),!1;if(!D.city)return i("  ","error"),!1;if(D.carBrands.length===0)return i("     ","error"),!1;if(!D.password||D.password.length<6)return i("     6   ","error"),!1;if(D.password!==D.confirmPassword)return i("   ","error"),!1}if(l==="INTERNATIONAL_SUPPLIER"){if(!B.companyName)return i("   ","error"),!1;if(!B.country)return i("  ","error"),!1;if(!B.city)return i("  ","error"),!1;if(!B.businessType)return i("   ","error"),!1;if(!B.phone)return i("   ","error"),!1;if(B.carBrands.length===0)return i("     ","error"),!1;if(!B.password||B.password.length<6)return i("     6   ","error"),!1;if(B.password!==B.confirmPassword)return i("   ","error"),!1}if(l==="MARKETER"){if(!T.fullName)return i("   ","error"),!1;if(!T.phone)return i("   ","error"),!1;if(T.marketingChannels.length===0)return i("      ","error"),!1;if(!T.password||T.password.length<6)return i("     6   ","error"),!1;if(T.password!==T.confirmPassword)return i("   ","error"),!1}if(l==="ADVERTISER"){if(!k.companyName)return i("   ","error"),!1;if(!k.phone)return i("   ","error"),!1;if(!k.adType)return i("   ","error"),!1;if(!k.duration)return i("   ","error"),!1;if(!k.startDate)return i("   ","error"),!1}return!0},H=async()=>{if(ee()){u(!0);try{const K={type:l,status:"NEW",createdAt:new Date().toISOString()};l==="LOCAL_SUPPLIER"?Object.assign(K,{companyName:D.companyName,commercialRegNumber:D.commercialRegNumber,vatNumber:D.vatNumber,nationalAddressNumber:D.nationalAddressNumber,phone:D.phone,password:D.password,city:D.city,carBrands:D.carBrands,ownBrands:D.ownBrands}):l==="INTERNATIONAL_SUPPLIER"?Object.assign(K,{companyName:B.companyName,country:B.country,city:B.city,businessType:B.businessType,phone:B.phone,password:B.password,carBrands:B.carBrands}):l==="MARKETER"?Object.assign(K,{fullName:T.fullName,phone:T.phone,password:T.password,marketingChannels:T.marketingChannels,otherChannel:T.otherChannel}):l==="ADVERTISER"&&Object.assign(K,{companyName:k.companyName,phone:k.phone,adType:k.adType,duration:k.duration,startDate:k.startDate}),await he.createPartnerRequest(K),f(!0),i("   !   ","success")}catch{i("    ","error")}finally{u(!1)}}},M=async()=>{if(!w||!O){i("     ","error");return}u(!0);try{const K=await he.checkPartnerRequestStatus(w,O);A(K)}catch{i("      ","error")}finally{u(!1)}},X=[{id:"LOCAL_SUPPLIER",icon:ta,...Po.LOCAL_SUPPLIER},{id:"INTERNATIONAL_SUPPLIER",icon:Ea,...Po.INTERNATIONAL_SUPPLIER},{id:"MARKETER",icon:ja,...Po.MARKETER},{id:"ADVERTISER",icon:pi,...Po.ADVERTISER}];return h?t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4",dir:n,children:t.jsxs("div",{className:"max-w-lg w-full bg-white rounded-3xl shadow-xl border border-slate-100 p-10 text-center animate-fade-in",children:[t.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center text-green-600 mx-auto mb-8 shadow-sm animate-bounce",children:t.jsx(Mt,{size:48})}),t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:"   !"}),t.jsx("p",{className:"text-slate-500 text-lg mb-8 leading-relaxed",children:"             ."}),t.jsx("div",{className:"bg-slate-50 rounded-xl p-4 mb-6 border border-slate-200",children:t.jsx("p",{className:"text-sm text-slate-600",children:"         "})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:()=>j(!0),className:"flex-1 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-md",children:"  "}),t.jsx("button",{onClick:e,className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200",children:" "})]})]})}):y?t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4",dir:n,children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl border border-slate-100 p-8 animate-fade-in",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-2xl flex items-center justify-center text-brand-600 mx-auto mb-4",children:t.jsx(is,{size:32})}),t.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"  "}),t.jsx("p",{className:"text-slate-500 text-sm",children:"     "})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx(Yr,{className:"absolute right-3 top-3.5 text-slate-400",size:18}),t.jsx("input",{type:"tel",value:w,onChange:K=>S(K.target.value),placeholder:"05xxxxxxxx",className:"w-full pr-10 pl-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx(Sa,{className:"absolute right-3 top-3.5 text-slate-400",size:18}),t.jsx("input",{type:x?"text":"password",value:O,onChange:K=>_(K.target.value),placeholder:" ",className:"w-full pr-10 pl-12 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"}),t.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute left-3 top-3.5 text-slate-400 hover:text-slate-600",children:x?t.jsx(dr,{size:18}):t.jsx(ns,{size:18})})]})]}),E&&t.jsx("div",{className:`p-4 rounded-xl border ${E.status==="APPROVED"?"bg-green-50 border-green-200 text-green-700":E.status==="REJECTED"?"bg-red-50 border-red-200 text-red-700":E.status==="NEEDS_MODIFICATION"?"bg-orange-50 border-orange-200 text-orange-700":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:t.jsx("p",{className:"font-bold text-sm",children:E.message})}),t.jsx("button",{onClick:M,disabled:d,className:"w-full py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-md disabled:opacity-50",children:d?" ...":"  "}),t.jsx("button",{onClick:()=>{j(!1),A(null)},className:"w-full py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200",children:""})]})]})}):t.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4",dir:n,children:[t.jsx("div",{className:`fixed top-4 z-50 ${n==="rtl"?"left-4":"right-4"}`,children:t.jsx(ph,{variant:"floating",size:"md"})}),t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 text-slate-500 hover:text-slate-700 mb-6 font-medium",children:[t.jsx(sl,{size:18,className:"rtl:rotate-180"}),"  "]}),t.jsx("h1",{className:"text-4xl font-black text-slate-800 mb-3",children:" "}),t.jsx("p",{className:"text-slate-500 text-lg",children:"    "})]}),t.jsx("div",{className:"text-center mb-8",children:t.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center gap-2 text-brand-600 hover:text-brand-700 font-bold text-sm underline",children:[t.jsx(is,{size:16}),"      "]})}),t.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:X.map(K=>t.jsxs("button",{onClick:()=>o(K.id),className:`flex items-center gap-3 px-6 py-4 rounded-2xl border-2 transition-all ${l===K.id?`${K.color} text-white border-transparent shadow-lg scale-105`:"bg-white border-slate-200 text-slate-600 hover:border-slate-300 hover:shadow"}`,children:[t.jsx(K.icon,{size:24}),t.jsxs("div",{className:"text-start",children:[t.jsx("p",{className:"font-bold",children:K.label}),t.jsx("p",{className:`text-xs ${l===K.id?"text-white/80":"text-slate-400"}`,children:K.labelEn})]})]},K.id))}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8 animate-fade-in",children:[l==="LOCAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.companyName,onChange:K=>L({...D,companyName:K.target.value}),placeholder:"   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.commercialRegNumber,onChange:K=>L({...D,commercialRegNumber:K.target.value}),placeholder:"1010xxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.vatNumber,onChange:K=>L({...D,vatNumber:K.target.value}),placeholder:"3xxxxxxxxxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.nationalAddressNumber,onChange:K=>L({...D,nationalAddressNumber:K.target.value}),placeholder:"AAAA1234",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:D.phone,onChange:K=>L({...D,phone:K.target.value}),placeholder:"05xxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:D.city,onChange:K=>L({...D,city:K.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[t.jsx("option",{value:"",children:" "}),kF.map(K=>t.jsxs("option",{value:K.id,children:[K.label," - ",K.region]},K.id))]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["    ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:D.carBrands.map(K=>{var Q;return t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-brand-100 text-brand-700 rounded-full text-sm font-bold",children:[((Q=Mm.find(se=>se.id===K))==null?void 0:Q.label)||K,t.jsx("button",{onClick:()=>G(K,"local"),className:"hover:text-red-600",children:t.jsx(vt,{size:14})})]},K)})}),t.jsx("div",{className:"flex flex-wrap gap-2 p-4 bg-slate-50 rounded-xl border border-slate-200 max-h-48 overflow-y-auto",children:Mm.filter(K=>!D.carBrands.includes(K.id)).map(K=>t.jsx("button",{type:"button",onClick:()=>P(K.id,"local"),className:"px-3 py-1.5 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-600 hover:bg-slate-100 hover:border-slate-300 transition-colors",children:K.label},K.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"    ()"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:D.newOwnBrand,onChange:K=>L({...D,newOwnBrand:K.target.value}),placeholder:"  ",className:"flex-1 p-3 bg-slate-50 border border-slate-200 rounded-lg",onKeyPress:K=>K.key==="Enter"&&Y()}),t.jsx("button",{type:"button",onClick:Y,className:"px-4 py-3 bg-slate-800 text-white rounded-lg font-bold hover:bg-slate-700",children:t.jsx(kt,{size:20})})]}),D.ownBrands.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:D.ownBrands.map(K=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-100 text-purple-700 rounded-full text-sm font-bold",children:[K,t.jsx("button",{onClick:()=>L({...D,ownBrands:D.ownBrands.filter(Q=>Q!==K)}),className:"hover:text-red-600",children:t.jsx(vt,{size:14})})]},K))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:x?"text":"password",value:D.password,onChange:K=>L({...D,password:K.target.value}),placeholder:"6   ",className:"w-full p-3 pl-12 bg-slate-50 border border-slate-200 rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>p(!x),className:"absolute left-3 top-3.5 text-slate-400 hover:text-slate-600",children:x?t.jsx(dr,{size:18}):t.jsx(ns,{size:18})})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:v?"text":"password",value:D.confirmPassword,onChange:K=>L({...D,confirmPassword:K.target.value}),placeholder:"   ",className:"w-full p-3 pl-12 bg-slate-50 border border-slate-200 rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>b(!v),className:"absolute left-3 top-3.5 text-slate-400 hover:text-slate-600",children:v?t.jsx(dr,{size:18}):t.jsx(ns,{size:18})})]})]})]})]}),l==="INTERNATIONAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:B.companyName,onChange:K=>I({...B,companyName:K.target.value}),placeholder:"Company Name",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:B.country,onChange:K=>I({...B,country:K.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[t.jsx("option",{value:"",children:" "}),QS.map(K=>t.jsx("option",{value:K.code,children:K.label},K.code))]})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:B.city,onChange:K=>I({...B,city:K.target.value}),placeholder:"City Name",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex gap-2",children:IF.map(K=>t.jsx("button",{type:"button",onClick:()=>I({...B,businessType:K.id}),className:`flex-1 py-3 px-4 rounded-lg border-2 text-center font-bold transition-all ${B.businessType===K.id?"border-brand-600 bg-brand-50 text-brand-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:K.label},K.id))})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  (WhatsApp) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:B.phone,onChange:K=>I({...B,phone:K.target.value}),placeholder:"+86 xxx xxxx xxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:B.carBrands.map(K=>{var Q;return t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm font-bold",children:[((Q=Mm.find(se=>se.id===K))==null?void 0:Q.label)||K,t.jsx("button",{onClick:()=>G(K,"intl"),className:"hover:text-red-600",children:t.jsx(vt,{size:14})})]},K)})}),t.jsx("div",{className:"flex flex-wrap gap-2 p-4 bg-slate-50 rounded-xl border border-slate-200 max-h-48 overflow-y-auto",children:Mm.filter(K=>!B.carBrands.includes(K.id)).map(K=>t.jsx("button",{type:"button",onClick:()=>P(K.id,"intl"),className:"px-3 py-1.5 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-600 hover:bg-slate-100",children:K.label},K.id))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:x?"text":"password",value:B.password,onChange:K=>I({...B,password:K.target.value}),placeholder:"Password",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:v?"text":"password",value:B.confirmPassword,onChange:K=>I({...B,confirmPassword:K.target.value}),placeholder:"Confirm Password",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]})]}),l==="MARKETER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:T.fullName,onChange:K=>z({...T,fullName:K.target.value}),placeholder:" ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:T.phone,onChange:K=>z({...T,phone:K.target.value}),placeholder:"05xxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:OF.map(K=>t.jsxs("button",{type:"button",onClick:()=>W(K.id),className:`p-4 rounded-xl border-2 text-center transition-all ${T.marketingChannels.includes(K.id)?"border-purple-600 bg-purple-50 text-purple-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[t.jsx(ku,{size:24,className:"mx-auto mb-2"}),t.jsx("span",{className:"text-sm font-bold block",children:K.label})]},K.id))})]}),T.marketingChannels.includes("other")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsx("input",{type:"text",value:T.otherChannel,onChange:K=>z({...T,otherChannel:K.target.value}),placeholder:"  ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:x?"text":"password",value:T.password,onChange:K=>z({...T,password:K.target.value}),placeholder:"6   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:v?"text":"password",value:T.confirmPassword,onChange:K=>z({...T,confirmPassword:K.target.value}),placeholder:"   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]})]}),l==="ADVERTISER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  /  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:k.companyName,onChange:K=>F({...k,companyName:K.target.value}),placeholder:"   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:k.phone,onChange:K=>F({...k,phone:K.target.value}),placeholder:"05xxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:WS.map(K=>t.jsxs("button",{type:"button",onClick:()=>F({...k,adType:K.id}),className:`p-4 rounded-xl border-2 text-center transition-all ${k.adType===K.id?"border-amber-600 bg-amber-50 text-amber-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[t.jsx(pi,{size:28,className:"mx-auto mb-2"}),t.jsx("p",{className:"font-bold",children:K.label}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:K.description})]},K.id))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:k.duration,onChange:K=>F({...k,duration:parseInt(K.target.value)}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[t.jsx("option",{value:0,children:" "}),Vce.map(K=>t.jsx("option",{value:K.days,children:K.label},K.days))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:k.startDate,onChange:K=>F({...k,startDate:K.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",min:new Date().toISOString().split("T")[0]})]})]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:t.jsx("button",{onClick:H,disabled:d,className:"w-full py-4 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-200 flex items-center justify-center gap-2 disabled:opacity-50",children:d?t.jsx("span",{className:"animate-pulse",children:" ..."}):t.jsxs(t.Fragment,{children:[t.jsx(xi,{size:20,className:"rtl:rotate-180"})," "]})})})]})]})]})};var Qce=qM();function Kce(e=768){const[s,a]=C.useState(()=>typeof window<"u"?window.innerWidth<e:!1);return C.useEffect(()=>{if(typeof window>"u")return;const r=()=>{a(window.innerWidth<e)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[e]),s}const Xn=C.memo(({icon:e,label:s,active:a,onClick:r,badge:n,collapsed:i})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center ${i?"justify-center":"justify-between"} px-3 py-3.5 rounded-2xl mb-2 transition-all duration-300 group relative overflow-hidden ${a?"bg-gradient-to-l from-brand-600 to-brand-700 text-white font-bold shadow-lg shadow-brand-900/40 scale-[1.02]":"text-slate-300 hover:bg-white/10 hover:text-white font-medium hover:scale-[1.01]"}`,title:i?s:void 0,children:[a&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse opacity-50"}),t.jsxs("div",{className:`flex items-center relative z-10 ${i?"":"gap-3.5"}`,children:[t.jsx("span",{className:`shrink-0 transition-transform duration-300 ${a?"scale-110":"group-hover:scale-105"}`,children:e}),!i&&t.jsx("span",{className:"text-sm md:text-[15px] truncate tracking-wide",children:s})]}),n&&!i&&t.jsx("span",{className:"bg-gradient-to-r from-action-500 to-action-600 text-white text-[11px] font-bold px-2.5 py-1 rounded-full flex items-center justify-center min-w-[22px] shadow-md shadow-action-500/30 animate-bounce relative z-10",children:n===!0?"!":n}),n&&i&&t.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-gradient-to-r from-action-500 to-red-500 rounded-full animate-pulse shadow-lg shadow-action-500/50"}),i&&t.jsxs("div",{className:"absolute left-full ml-3 px-4 py-2.5 bg-slate-800/95 backdrop-blur-sm text-white text-sm font-bold rounded-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-2xl border border-slate-700/50",children:[s,n&&t.jsxs("span",{className:"mr-2 text-action-400 font-black",children:["(",n===!0?"!":n,")"]})]})]})),Jce=C.memo(({user:e,profile:s,view:a,onViewChange:r,onLogout:n,sidebarOpen:i,setSidebarOpen:l,t:o,tDynamic:d,remainingCredits:u,isRTL:h,isGuest:f,guestSettings:x,onGuestPageClick:p,collapsed:v,setCollapsed:b,hasPermission:y,isOwner:j})=>{const w=A=>j||e.role==="CUSTOMER"&&!e.parentId?!0:y?y(A):!1,S=h?"right-0":"left-0",O=h?i?"translate-x-0":"translate-x-full lg:translate-x-0":i?"translate-x-0":"-translate-x-full lg:translate-x-0",_=v?"w-20":"w-72",E=i?"pointer-events-auto":"pointer-events-none lg:pointer-events-auto";return t.jsxs("aside",{className:`fixed lg:static inset-y-0 ${S} ${_} bg-gradient-to-b from-slate-900 via-slate-900 to-brand-950 text-white transform transition-all duration-300 z-50 flex flex-col shadow-2xl lg:shadow-xl ${O} ${E}`,children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-brand-600/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-20 left-0 w-32 h-32 bg-action-500/10 rounded-full blur-3xl"})]}),t.jsx("div",{className:`relative p-4 ${v?"px-3":"p-5"} border-b border-white/10 flex items-center ${v?"justify-center":"justify-between"}`,children:v?t.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-brand-500/30 ring-2 ring-white/20",children:t.jsx(Vc,{size:24,strokeWidth:2.5})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-brand-500/30 ring-2 ring-white/20",children:t.jsx(Vc,{size:24,strokeWidth:2.5})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-display font-black text-xl tracking-wide text-white",children:o("siteName")}),t.jsx("p",{className:"text-[10px] text-slate-400 font-bold tracking-widest uppercase mt-0.5",children:"B2B Wholesale"})]})]}),t.jsx("button",{onClick:()=>l(!1),className:"lg:hidden text-slate-400 hover:text-white p-2.5 -m-2 rounded-xl hover:bg-white/10 transition-all duration-200","data-testid":"button-close-sidebar","aria-label":"Close sidebar",children:t.jsx(vt,{size:22})})]})}),t.jsxs("button",{onClick:()=>b(!v),className:`hidden lg:flex absolute ${h?"-left-4":"-right-4"} top-20 w-8 h-8 bg-gradient-to-br from-brand-400 via-brand-500 to-brand-600 text-white rounded-full items-center justify-center transition-all duration-500 shadow-xl shadow-brand-500/50 z-50 ring-2 ring-white/30 hover:ring-white/50 hover:shadow-2xl hover:shadow-brand-400/60 hover:scale-110 active:scale-95 group`,"data-testid":"button-toggle-sidebar",title:v?o("sidebar.expand",""):o("sidebar.collapse",""),children:[t.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-white/0 via-white/30 to-white/0 animate-pulse opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx(Ns,{size:18,className:`transition-transform duration-500 ease-in-out ${v?h?"rotate-180":"rotate-0":h?"rotate-0":"rotate-180"}`})]}),v?t.jsxs("div",{className:"p-3 flex flex-col items-center relative",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-brand-500/30 to-brand-600/20 flex items-center justify-center text-brand-300 border border-brand-400/30 mb-3 shadow-inner",children:t.jsx(nn,{size:20,strokeWidth:2})}),t.jsx("div",{className:"bg-gradient-to-r from-brand-600/20 to-brand-500/10 border border-brand-400/30 rounded-lg p-2 text-center w-full",children:t.jsx("p",{className:"text-lg font-black text-white tabular-nums",children:e.searchLimit===0?"":u})})]}):t.jsx("div",{className:"p-4 relative",children:t.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10 shadow-inner",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-brand-500/30 to-brand-600/20 flex items-center justify-center text-brand-300 border border-brand-400/30 shrink-0 shadow-inner",children:t.jsx(nn,{size:22,strokeWidth:2})}),t.jsxs("div",{className:"overflow-hidden flex-1",children:[t.jsx("p",{className:"font-bold text-[15px] truncate text-white",children:e.name}),t.jsx("p",{className:"text-[11px] text-slate-400 truncate font-mono mt-0.5 bg-slate-800/50 px-2 py-0.5 rounded-md w-fit",children:e.clientId})]})]}),s&&t.jsxs("div",{className:"text-xs text-slate-300 bg-slate-800/50 p-3 rounded-xl border border-white/5 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ta,{size:14,className:"text-brand-400"}),t.jsx("p",{className:"truncate font-bold",children:s.companyName})]}),t.jsx("p",{className:"text-[10px] text-brand-400 mt-1 mr-5",children:s.city})]}),t.jsxs("div",{className:"bg-gradient-to-r from-brand-600/20 to-brand-500/10 border border-brand-400/30 rounded-xl p-3.5 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-pulse"}),t.jsx("p",{className:"text-[10px] text-brand-200 uppercase font-bold mb-1.5 tracking-wider relative z-10",children:o("sidebar.searchCredits")}),t.jsx("div",{className:"flex items-center justify-center gap-2 relative z-10",children:t.jsx("span",{className:"text-2xl font-black text-white tabular-nums",children:e.searchLimit===0?o("sidebar.unlimitedSearch"):u})})]})]})}),t.jsxs("nav",{className:`flex-1 overflow-y-auto ${v?"px-2":"px-4"} py-2 custom-scrollbar relative`,children:[!v&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:o("sidebar.mainMenu")}),t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),t.jsx(Xn,{icon:t.jsx(iE,{size:20}),label:d("sidebar.home",""),active:a==="HOME",onClick:()=>r("HOME"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(Yt,{size:20}),label:d("sidebar.orders"," "),active:a==="ORDERS",onClick:()=>f?p():r("ORDERS"),badge:e.hasUnreadOrders?!0:void 0,collapsed:v}),t.jsx(Xn,{icon:t.jsx(Lt,{size:20}),label:d("sidebar.quotes"," "),active:a==="QUOTE_REQUEST",onClick:()=>f?p():r("QUOTE_REQUEST"),badge:e.hasUnreadQuotes?!0:void 0,collapsed:v}),t.jsx(Xn,{icon:t.jsx(Ea,{size:20}),label:d("sidebar.import","  "),active:a==="IMPORT_CHINA",onClick:()=>f?p():r("IMPORT_CHINA"),collapsed:v}),w("cust_use_trader_tools")&&t.jsx(Xn,{icon:t.jsx(ac,{size:20}),label:d("sidebar.traderTools"," "),active:a==="TRADER_TOOLS",onClick:()=>f?p():r("TRADER_TOOLS"),collapsed:v}),w("cust_use_trader_tools")&&t.jsx(Xn,{icon:t.jsx(is,{size:20}),label:d("sidebar.toolsHistory"," "),active:a==="TOOLS_HISTORY",onClick:()=>f?p():r("TOOLS_HISTORY"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(Yt,{size:20}),label:d("sidebar.productSearch"," "),active:a==="PRODUCT_SEARCH",onClick:()=>f?p():r("PRODUCT_SEARCH"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(Mr,{size:20}),label:d("sidebar.alternatives"," "),active:a==="ALTERNATIVES",onClick:()=>f?p():r("ALTERNATIVES"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(gn,{size:20}),label:d("sidebar.history"," "),active:a==="HISTORY",onClick:()=>f?p():r("HISTORY"),collapsed:v}),!v&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mt-6 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:o("sidebar.management")}),t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),t.jsx(Xn,{icon:t.jsx(ta,{size:20}),label:d("sidebar.organization"," "),active:a==="ORGANIZATION",onClick:()=>f?p():r("ORGANIZATION"),collapsed:v}),w("org_manage_team")&&t.jsx(Xn,{icon:t.jsx(Wt,{size:20}),label:d("sidebar.teamManagement"," "),active:a==="TEAM_MANAGEMENT",onClick:()=>f?p():r("TEAM_MANAGEMENT"),collapsed:v}),!v&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mt-6 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:o("sidebar.supportSection")}),t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),t.jsx(Xn,{icon:t.jsx(Nf,{size:20}),label:d("sidebar.support","  / "),active:a==="ABOUT",onClick:()=>f?p():r("ABOUT"),collapsed:v})]}),t.jsx("div",{className:`${v?"p-2":"p-4"} border-t border-white/10 relative`,children:t.jsxs("button",{onClick:n,className:`w-full flex items-center ${v?"justify-center":"gap-3"} px-4 py-3 rounded-xl text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all duration-300 group relative border border-transparent hover:border-red-500/30`,title:v?o("logout"):void 0,children:[t.jsx(lE,{size:20,className:"transition-transform duration-300 group-hover:scale-110"}),!v&&t.jsx("span",{className:"text-sm font-bold tracking-wide",children:o("logout")}),v&&t.jsx("div",{className:"absolute left-full ml-3 px-4 py-2.5 bg-slate-800/95 backdrop-blur-sm text-red-300 text-sm font-bold rounded-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-2xl border border-red-500/30",children:o("logout")})]})})]})});function Yo(e){if(!e)return"-";const s=new Date(e);if(isNaN(s.getTime()))return"-";const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}function Yce(e){if(!e)return"-";const s=new Date(e);if(isNaN(s.getTime()))return"-";let a=s.getHours();const r=String(s.getMinutes()).padStart(2,"0"),i=a>=12?"":"";return a=a%12,a===0&&(a=12),`${String(a).padStart(2,"0")}:${r} ${i}`}function ms(e){return e?`${Yo(e)} - ${Yce(e)}`:"-"}const dE=({user:e,customerType:s,onViewAll:a})=>{const[r,n]=C.useState([]),[i,l]=C.useState(!1),[o,d]=C.useState(0),u=C.useRef(null),{addToast:h}=It();C.useEffect(()=>{f();const S=setInterval(f,3e4),O=_=>{u.current&&!u.current.contains(_.target)&&l(!1)};return document.addEventListener("mousedown",O),()=>{clearInterval(S),document.removeEventListener("mousedown",O)}},[e.id,s]);const f=async()=>{try{const S=await he.getNotificationsForUser(e.id),O=S.items,E=(await he.getActiveCampaignsForUser(e.id,s)).filter(I=>I.displayType==="BELL"),A=JSON.parse(localStorage.getItem(`siniCar_bell_read_${e.id}`)||"[]"),D=E.map(I=>({id:`campaign-${I.id}`,userId:e.id,type:"MARKETING",title:I.title,message:I.message,createdAt:I.createdAt,isRead:A.includes(I.id),isCampaign:!0,campaignId:I.id,ctaUrl:I.ctaUrl,ctaLabel:I.ctaLabel})),L=[...O,...D];L.sort((I,T)=>new Date(T.createdAt).getTime()-new Date(I.createdAt).getTime()),n(L);const B=D.filter(I=>!I.isRead).length;d(S.unreadCount+B)}catch(S){console.error("Failed to load notifications",S)}},x=async()=>{if(l(!i),!i&&o>0)try{await he.markNotificationsAsRead(e.id);const S=r.filter(O=>O.isCampaign&&!O.isRead&&O.campaignId).map(O=>O.campaignId);if(S.length>0){const O=JSON.parse(localStorage.getItem(`siniCar_bell_read_${e.id}`)||"[]"),_=[...new Set([...O,...S])];localStorage.setItem(`siniCar_bell_read_${e.id}`,JSON.stringify(_))}n(O=>O.map(_=>({..._,isRead:!0}))),d(0)}catch{console.error("Failed to mark read")}},p=async()=>{try{await he.clearNotificationsForUser(e.id),n([]),d(0),h("   ","success")}catch(S){console.error("Failed to clear notifications",S),h("    ","error")}},v=async S=>{try{await he.deleteNotification(e.id,S),n(O=>O.filter(_=>_.id!==S)),h("  ","success")}catch(O){console.error("Failed to delete notification",O)}},b=async(S,O)=>{try{await he.dismissCampaignForUser(e.id,S),n(_=>_.filter(E=>E.id!==O)),h("  ","success")}catch(_){console.error("Failed to dismiss campaign",_)}},y=S=>{switch(S){case"ORDER_STATUS_CHANGED":return t.jsx(Yt,{size:16,className:"text-blue-500"});case"SEARCH_POINTS_ADDED":return t.jsx(Lt,{size:16,className:"text-green-500"});case"QUOTE_PROCESSED":return t.jsx(yn,{size:16,className:"text-purple-500"});case"SYSTEM":return t.jsx(Gc,{size:16,className:"text-amber-500"});case"ACCOUNT_UPDATE":return t.jsx(aa,{size:16,className:"text-slate-500"});case"IMPORT_UPDATE":return t.jsx(Yt,{size:16,className:"text-orange-500"});case"GENERAL":return t.jsx(mi,{size:16,className:"text-blue-400"});case"MARKETING":return t.jsx(ja,{size:16,className:"text-pink-500"});default:return t.jsx(Nr,{size:16,className:"text-slate-400"})}},j=S=>{switch(S){case"ORDER_STATUS_CHANGED":return"bg-blue-50 border-blue-100";case"SEARCH_POINTS_ADDED":return"bg-green-50 border-green-100";case"QUOTE_PROCESSED":return"bg-purple-50 border-purple-100";case"SYSTEM":return"bg-amber-50 border-amber-100";case"ACCOUNT_UPDATE":return"bg-slate-50 border-slate-200";case"IMPORT_UPDATE":return"bg-orange-50 border-orange-100";case"MARKETING":return"bg-pink-50 border-pink-100";default:return"bg-white border-slate-100"}},w=S=>{const O=new Date(S),E=new Date().getTime()-O.getTime(),A=Math.floor(E/6e4),D=Math.floor(A/60),L=Math.floor(D/24);return A<1?"":A<60?` ${A} `:D<24?` ${D} `:L<7?` ${L} `:ms(S).split("-")[1]};return t.jsxs("div",{className:"relative",ref:u,children:[t.jsxs("button",{onClick:x,className:"relative p-2 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl transition-all",title:"","data-testid":"button-notifications",children:[t.jsx(Nr,{size:24}),o>0&&t.jsx("span",{className:"absolute top-0.5 right-0.5 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:o>9?"9+":o})]}),i&&t.jsxs("div",{className:"absolute left-0 mt-3 w-80 md:w-[400px] bg-white rounded-2xl shadow-2xl border border-slate-200 z-50 overflow-hidden animate-fade-in-up origin-top-left",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Nr,{size:18,className:"text-brand-600"}),t.jsx("h3",{className:"font-bold text-slate-800 text-sm",children:" "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[r.length>0&&t.jsx("button",{onClick:p,className:"text-[10px] text-red-500 hover:text-red-600 font-bold px-2 py-1 rounded hover:bg-red-50 transition-colors","data-testid":"button-clear-all-notifications",children:" "}),t.jsx("span",{className:"bg-slate-100 text-slate-600 text-[10px] font-bold px-2 py-1 rounded-full",children:r.length})]})]}),t.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:r.length>0?t.jsx("div",{className:"divide-y divide-slate-50",children:r.map(S=>t.jsxs("div",{className:`p-4 hover:bg-slate-50 transition-colors flex gap-3 group ${S.isCampaign?"bg-gradient-to-l from-pink-50/50 to-transparent":S.isRead?"":"bg-blue-50/30"}`,"data-testid":`notification-item-${S.id}`,children:[t.jsx("div",{className:`mt-0.5 p-2 rounded-full border shadow-sm shrink-0 h-fit ${j(S.type)}`,children:y(S.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex justify-between items-start gap-2 mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"text-sm font-bold text-slate-800 leading-tight",children:S.title}),S.isCampaign&&t.jsx("span",{className:"text-[9px] bg-pink-100 text-pink-600 px-1.5 py-0.5 rounded font-bold",children:""})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[t.jsx("span",{className:"text-[10px] text-slate-400 font-medium whitespace-nowrap",children:w(S.createdAt)}),t.jsx("button",{onClick:O=>{O.stopPropagation(),S.isCampaign&&S.campaignId?b(S.campaignId,S.id):v(S.id)},className:"p-1 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all rounded hover:bg-red-50",title:"","data-testid":`button-delete-notification-${S.id}`,children:t.jsx(vt,{size:12})})]})]}),t.jsx("p",{className:"text-xs text-slate-500 leading-relaxed line-clamp-2",children:S.message}),S.isCampaign&&S.ctaUrl&&S.ctaLabel&&t.jsx("a",{href:S.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-[11px] bg-pink-500 text-white px-3 py-1.5 rounded-lg font-bold hover:bg-pink-600 transition-colors","data-testid":`button-cta-${S.id}`,children:S.ctaLabel}),!S.isRead&&!S.isCampaign&&t.jsx("span",{className:"inline-block mt-1.5 text-[9px] bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded font-bold",children:""})]})]},S.id))}):t.jsxs("div",{className:"py-16 px-6 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Nr,{size:28,className:"text-slate-300"})}),t.jsx("p",{className:"text-sm font-bold text-slate-600 mb-1",children:"  "}),t.jsx("p",{className:"text-xs text-slate-400",children:"    "})]})}),t.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50",children:a?t.jsx("button",{onClick:()=>{l(!1),a()},className:"w-full text-center text-sm font-bold text-brand-600 hover:text-brand-700 transition-colors","data-testid":"button-view-all-notifications",children:"  "}):r.length>5&&t.jsxs("span",{className:"text-xs text-slate-500 text-center block",children:["  ",Math.min(r.length,20)," "]})})]})]})},Xce=C.memo(({startX:e,startY:s,endX:a,endY:r,onComplete:n})=>{const[i,l]=C.useState({x:e,y:s,scale:1,opacity:1});return C.useEffect(()=>{requestAnimationFrame(()=>{l({x:a,y:r,scale:.3,opacity:.5})});const o=setTimeout(n,800);return()=>clearTimeout(o)},[a,r,n]),t.jsx("div",{className:"fixed z-[9999] pointer-events-none",style:{left:i.x,top:i.y,transform:`translate(-50%, -50%) scale(${i.scale})`,opacity:i.opacity,transition:"all 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:t.jsx("div",{className:"w-10 h-10 bg-brand-600 rounded-full flex items-center justify-center shadow-lg shadow-brand-600/50",children:t.jsx(qa,{size:18,className:"text-white"})})})}),Zce=C.memo(({cartCount:e,cartTotal:s,cart:a,onRemoveItem:r,onSubmitOrder:n,showDropdown:i,setShowDropdown:l,onCartIconMount:o,t:d,isRTL:u})=>{const h=C.useRef(null),f=C.useRef(null);return C.useEffect(()=>(o(h.current),()=>o(null)),[o]),C.useEffect(()=>{const x=p=>{f.current&&!f.current.contains(p.target)&&h.current&&!h.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[l]),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{ref:h,onClick:()=>l(!i),className:`relative p-2.5 rounded-xl transition-all ${e>0?"bg-brand-600 text-white hover:bg-brand-700 shadow-md shadow-brand-600/30":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":"button-cart","aria-label":"Shopping Cart",children:[t.jsx(qa,{size:20}),e>0&&t.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-sm animate-pulse",children:e})]}),i&&t.jsxs("div",{ref:f,className:`absolute top-full mt-2 w-80 bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden z-50 ${u?"left-0":"right-0"}`,children:[t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(qa,{size:18}),d("customerDashboard.cart"," "),t.jsx("span",{className:"bg-brand-600 text-white text-xs px-2 py-0.5 rounded-full",children:e})]})}),t.jsx("div",{className:"max-h-64 overflow-y-auto",children:a.length===0?t.jsxs("div",{className:"p-8 text-center text-slate-400",children:[t.jsx(qa,{size:32,className:"mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:d("customerDashboard.emptyCart"," ")})]}):a.map(x=>t.jsx("div",{className:"p-3 border-b border-slate-100 hover:bg-slate-50 transition-colors",children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:x.name}),t.jsxs("p",{className:"text-xs text-slate-500",children:[x.quantity,"  ",x.price.toLocaleString()," ",d("customerDashboard.sar",".")]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-bold text-brand-600",children:(x.quantity*x.price).toLocaleString()}),t.jsx("button",{onClick:()=>r(x.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-remove-item-${x.id}`,children:t.jsx(At,{size:14})})]})]})},x.id))}),a.length>0&&t.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("span",{className:"text-sm text-slate-600",children:[d("customerDashboard.total",""),":"]}),t.jsxs("span",{className:"text-lg font-black text-slate-900",children:[s.toLocaleString()," ",d("customerDashboard.sar",".")]})]}),t.jsx("button",{onClick:n,className:"w-full py-3 bg-brand-600 hover:bg-brand-700 text-white font-bold rounded-xl transition-colors shadow-md shadow-brand-600/30","data-testid":"button-submit-order-dropdown",children:d("customerDashboard.confirmOrder"," ")})]})]})]})}),ede=C.memo(({view:e,setSidebarOpen:s,user:a,profile:r,tDynamic:n,t:i,isRTL:l,cart:o,cartTotal:d,onRemoveItem:u,onSubmitOrder:h,showCartDropdown:f,setShowCartDropdown:x,onCartIconMount:p,onViewAllNotifications:v})=>t.jsxs("header",{className:"h-16 md:h-20 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-6 lg:px-8 flex-shrink-0 z-30 shadow-sm gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 min-w-0 flex-1",children:[t.jsx("button",{onClick:()=>s(!0),className:"lg:hidden text-slate-600 p-2 hover:bg-slate-100 rounded-lg shrink-0","data-testid":"button-open-sidebar","aria-label":"Open sidebar",children:t.jsx(gF,{size:22})}),t.jsxs("h2",{className:"text-base md:text-xl lg:text-2xl font-bold md:font-black text-slate-800 tracking-tight truncate",children:[e==="HOME"&&n("sidebar.home",""),e==="ORDERS"&&n("sidebar.orders"," "),e==="QUOTE_REQUEST"&&n("sidebar.quotes"," "),e==="IMPORT_CHINA"&&n("sidebar.import","  "),e==="TRADER_TOOLS"&&n("sidebar.traderTools"," "),e==="TOOLS_HISTORY"&&n("sidebar.toolsHistory"," "),e==="PRODUCT_SEARCH"&&n("sidebar.productSearch"," "),e==="ALTERNATIVES"&&n("sidebar.alternatives"," "),e==="ORGANIZATION"&&n("sidebar.organization"," "),e==="TEAM_MANAGEMENT"&&n("sidebar.teamManagement"," "),e==="HISTORY"&&n("sidebar.history"," "),e==="ABOUT"&&n("sidebar.support","  / "),e==="NOTIFICATIONS"&&n("sidebar.notifications","")]})]}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 shrink-0",children:[t.jsx(Uce,{}),(a==null?void 0:a.id)&&t.jsx(dE,{user:a,onViewAll:v}),t.jsx(Zce,{cartCount:o.length,cartTotal:d,cart:o,onRemoveItem:u,onSubmitOrder:h,showDropdown:f,setShowDropdown:x,onCartIconMount:p,t:i,isRTL:l})]})]}));C.memo(({icon:e,label:s,active:a,onClick:r,badge:n})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between px-4 py-3 rounded-xl mb-1.5 transition-all ${a?"bg-brand-800 text-white font-bold shadow-md":"text-brand-100 hover:bg-brand-800/50 hover:text-white font-medium"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e,t.jsx("span",{className:"text-sm md:text-[15px]",children:s})]}),n?t.jsx("span",{className:"bg-action-500 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center justify-center min-w-[20px]",children:n===!0?"!":n}):null]}));const c5=C.memo(({icon:e,title:s,desc:a})=>t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex items-start gap-4 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-3 bg-slate-50 text-slate-700 rounded-xl border border-slate-100 shrink-0",children:e}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm md:text-[15px] mb-1.5",children:s}),t.jsx("p",{className:"text-xs md:text-[13px] text-slate-500 leading-relaxed",children:a})]})]}));C.memo(({icon:e,title:s,desc:a,colorClass:r="bg-slate-50 text-brand-600",onClick:n})=>t.jsxs("div",{onClick:n,className:`bg-white p-5 sm:p-6 rounded-2xl border border-slate-200/80 shadow-sm flex flex-col gap-3 sm:gap-4 transition-all duration-300 group h-full ${n?"cursor-pointer hover:shadow-lg hover:border-brand-300 hover:-translate-y-1":"hover:shadow-md"}`,children:[t.jsx("div",{className:`w-11 h-11 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center shrink-0 transition-transform duration-300 group-hover:scale-110 ${r}`,children:e}),t.jsxs("div",{children:[t.jsx("h4",{className:`font-bold text-slate-800 text-base sm:text-lg mb-1.5 sm:mb-2 transition-colors ${n?"group-hover:text-brand-700":""}`,children:s}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed font-medium",children:a})]})]}));const Jx=C.memo(({icon:e,title:s,desc:a,colorClass:r,iconBgClass:n})=>t.jsxs("div",{className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 transition-all duration-300 hover:shadow-xl hover:border-brand-200 hover:-translate-y-1 overflow-hidden",children:[t.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${n} opacity-10 rounded-full -mr-8 -mt-8 transition-transform duration-500 group-hover:scale-150`}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:`w-14 h-14 sm:w-16 sm:h-16 rounded-2xl flex items-center justify-center mb-4 shadow-sm transition-all duration-300 group-hover:scale-105 ${r}`,children:e}),t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-2 group-hover:text-brand-700 transition-colors",children:s}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:a})]})]})),tde=C.memo(()=>{const[e,s]=C.useState(null);if(C.useEffect(()=>{he.getSettings().then(s)},[]),!e||!e.tickerEnabled)return null;const a=40-((e.tickerSpeed||5)-1)*3;return t.jsxs("div",{style:{backgroundColor:e.tickerBgColor||"#0f172a"},className:"w-full overflow-hidden py-3 relative z-50 shadow-sm border-b border-white/10",children:[t.jsx("style",{children:`
                @keyframes marquee {
                    0% { transform: translateX(100%); }
                    100% { transform: translateX(-100%); }
                }
                .ticker-content {
                    white-space: nowrap;
                    display: inline-block;
                    animation: marquee ${a}s linear infinite;
                    min-width: 100%;
                }
                .ticker-content:hover {
                    animation-play-state: paused;
                }
            `}),t.jsx("div",{className:"ticker-content px-4",children:t.jsx("span",{style:{color:e.tickerTextColor||"#f97316"},className:"font-bold text-sm md:text-base mx-4",children:e.tickerText})})]})}),sde="modulepreload",ade=function(e){return"/"+e},d5={},Qi=function(s,a,r){let n=Promise.resolve();if(a&&a.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=l(a.map(u=>{if(u=ade(u),u in d5)return;d5[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":sde,h||(x.as="script"),x.crossOrigin="",x.href=u,d&&x.setAttribute("nonce",d),document.head.appendChild(x),h)return new Promise((p,v)=>{x.addEventListener("load",p),x.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})},ds=({isOpen:e,onClose:s,title:a,children:r,maxWidth:n="max-w-lg",noPadding:i=!1})=>{const[l,o]=C.useState(!1),[d,u]=C.useState(!1);return C.useEffect(()=>{if(e){o(!0);const h=setTimeout(()=>u(!0),10);return()=>clearTimeout(h)}else{u(!1);const h=setTimeout(()=>o(!1),200);return()=>clearTimeout(h)}},[e]),l?t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[t.jsx("div",{className:`absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-200 ease-out ${d?"opacity-100":"opacity-0"}`,onClick:s}),t.jsxs("div",{className:`
          relative z-10 w-full ${n} bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]
          transform transition-all duration-200 ease-out
          ${d?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}
        `,onClick:h=>h.stopPropagation(),children:[t.jsx("button",{onClick:s,className:"absolute top-4 left-4 z-20 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500 hover:text-slate-700","data-testid":"button-modal-close",children:t.jsx(vt,{size:18})}),a&&t.jsx("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-slate-100 flex-shrink-0",children:t.jsx("h3",{className:"text-xl font-bold text-slate-800",children:a})}),t.jsx("div",{className:`flex-1 overflow-y-auto ${i?"":"p-6"}`,children:r})]})]}):null},Yx=({status:e,type:s="ORDER"})=>{const a={[xt.PENDING]:"bg-amber-50 text-amber-700 border-amber-200",[xt.APPROVED]:"bg-blue-50 text-blue-700 border-blue-200",[xt.SHIPPED]:"bg-emerald-50 text-emerald-700 border-emerald-200",[xt.DELIVERED]:"bg-green-100 text-green-800 border-green-300",[xt.REJECTED]:"bg-red-50 text-red-700 border-red-200",[xt.CANCELLED]:"bg-gray-100 text-gray-500 border-gray-300",PENDING:"bg-yellow-50 text-yellow-700 border-yellow-200",NEW:"bg-blue-50 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-50 text-yellow-700 border-yellow-200",QUOTED:"bg-blue-50 text-blue-700 border-blue-200",PROCESSED:"bg-green-50 text-green-700 border-green-200",PARTIALLY_APPROVED:"bg-purple-100 text-purple-700 border-purple-200",MATCHED:"bg-green-50 text-green-700 border-green-200",NOT_FOUND:"bg-slate-50 text-slate-500 border-slate-200"},r={[xt.PENDING]:" ",[xt.APPROVED]:" ",[xt.SHIPPED]:" ",[xt.DELIVERED]:" ",[xt.REJECTED]:"",[xt.CANCELLED]:"",PENDING:" ",NEW:"",UNDER_REVIEW:" ",QUOTED:" ",PROCESSED:" ",PARTIALLY_APPROVED:" ",MATCHED:"  ",NOT_FOUND:" "};return t.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold border flex items-center gap-1.5 w-fit ${a[e]||"bg-gray-50 text-gray-700 border-gray-200"}`,children:[e===xt.PENDING&&t.jsx(is,{size:14}),(e===xt.APPROVED||e===xt.DELIVERED||e==="PROCESSED"||e==="QUOTED"||e==="MATCHED"||e==="PARTIALLY_APPROVED")&&t.jsx(Mt,{size:14}),e===xt.SHIPPED&&t.jsx(Yt,{size:14}),(e===xt.REJECTED||e==="NOT_FOUND")&&t.jsx($p,{size:14}),e===xt.CANCELLED&&t.jsx(sa,{size:14}),(e==="NEW"||e==="UNDER_REVIEW"||e==="PENDING")&&t.jsx(is,{size:14}),r[e]||e]})},rde=({orders:e,quoteRequests:s=[]})=>{var G;const[a,r]=C.useState("ORDERS"),[n,i]=C.useState(e),[l,o]=C.useState(""),[d,u]=C.useState("ALL"),[h,f]=C.useState(1),x=20,[p,v]=C.useState(null),[b,y]=C.useState(null),[j,w]=C.useState(null),{addToast:S}=It();C.useEffect(()=>{i(e)},[e]),C.useEffect(()=>{f(1)},[l,d,a]);const O=C.useMemo(()=>{let Y=[...n];if(l){const W=l.toLowerCase();Y=Y.filter(ee=>ee.id.toLowerCase().includes(W))}return d!=="ALL"&&(Y=Y.filter(W=>W.status===d)),Y.sort((W,ee)=>new Date(ee.date).getTime()-new Date(W.date).getTime())},[n,l,d]),_=C.useMemo(()=>[...s].sort((Y,W)=>new Date(W.date).getTime()-new Date(Y.date).getTime()),[s]),E=C.useMemo(()=>{const Y=(h-1)*x;return a==="ORDERS"?O.slice(Y,Y+x):_.slice(Y,Y+x)},[a,O,_,h]),A=C.useMemo(()=>{const Y=a==="ORDERS"?O.length:_.length;return Math.ceil(Y/x)},[a,O.length,_.length]),D=C.useMemo(()=>({total:n.length,pending:n.filter(Y=>Y.status===xt.PENDING).length,approved:n.filter(Y=>Y.status===xt.APPROVED||Y.status===xt.SHIPPED).length}),[n]),L=Y=>{Y.status==="NEW"||Y.status==="UNDER_REVIEW"?S("        ","info"):w(Y)},B=async Y=>{if(!(Y.status===xt.PENDING||Y.status===xt.APPROVED)){Y.status===xt.SHIPPED||Y.status===xt.DELIVERED?S("            .","error"):S("       .","error");return}if(window.confirm("            ."))try{await he.cancelOrder(Y.id,"CUSTOMER");const ee=n.map(H=>H.id===Y.id?{...H,status:xt.CANCELLED,cancelledBy:"CUSTOMER",cancelledAt:new Date().toISOString()}:H);i(ee),b&&b.id===Y.id&&y({...b,status:xt.CANCELLED,cancelledBy:"CUSTOMER",cancelledAt:new Date().toISOString()}),S("   ","success")}catch(ee){ee.message==="CANNOT_CANCEL_SENSITIVE_STATUS"?S("        .","error"):S(ee.message||"   ","error")}},I=async Y=>{if(Y.status!==xt.CANCELLED&&Y.status!==xt.REJECTED){S("      .   .","error");return}if(window.confirm("         "))try{await he.deleteOrder(Y.id);const W=n.filter(ee=>ee.id!==Y.id);i(W),(b==null?void 0:b.id)===Y.id&&y(null),S("   ","success")}catch{S("   ","error")}},T=async(Y,W)=>{Y.stopPropagation();try{const{default:ee}=await Qi(async()=>{const{default:K}=await import("./jspdf.es.min-DcKUTRCn.js").then(Q=>Q.j);return{default:K}},[]),{default:H}=await Qi(async()=>{const{default:K}=await import("./jspdf.plugin.autotable-Ctn9oCMc.js");return{default:K}},[]),M=new ee;M.setFontSize(18),M.text(`Order Invoice #${W.id}`,14,20),M.setFontSize(10),M.text(`Date: ${Yo(W.date)}`,14,30),M.text(`Total Amount: ${W.totalAmount.toLocaleString()} SAR`,14,35),M.text(`Status: ${W.status}`,14,40);const X=W.items.map(K=>[K.partNumber,K.name,K.quantity,K.price,(K.price*K.quantity).toFixed(2)]);H(M,{startY:45,head:[["Part No","Item Name","Qty","Unit Price","Total"]],body:X,foot:[["","","","Grand Total",`${W.totalAmount.toLocaleString()} SAR`]]}),M.save(`order-${W.id}.pdf`),S("   ","success")}catch(ee){console.error(ee),S("    PDF","error")}},z=(Y,W)=>{Y.stopPropagation();const ee=window.open("","_blank","width=800,height=600");if(ee){const H=W.items.map(X=>`
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${X.partNumber}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${X.name}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: center;">${X.quantity}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: center;">${X.price}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: center;">${(X.price*X.quantity).toLocaleString()}</td>
            </tr>
        `).join(""),M=`
            <html dir="rtl" lang="ar">
            <head>
                <title>  #${W.id}</title>
                <style>
                    body { font-family: 'Arial', sans-serif; padding: 20px; }
                    .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
                    .details { margin-bottom: 20px; }
                    table { w-full; width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
                    th { background-color: #f8f9fa; padding: 10px; border-bottom: 2px solid #ddd; text-align: right; }
                    .totals { margin-top: 20px; text-align: left; font-size: 16px; font-weight: bold; }
                    @media print {
                        button { display: none; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Sini Car Wholesale</h1>
                    <h2>   #${W.id}</h2>
                </div>
                <div class="details">
                    <p><strong>:</strong> ${ms(W.date)}</p>
                    <p><strong>:</strong> ${W.status}</p>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th> </th>
                            <th> </th>
                            <th style="text-align: center;"></th>
                            <th style="text-align: center;"> </th>
                            <th style="text-align: center;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        ${H}
                    </tbody>
                </table>
                <div class="totals">
                    <p> ( ): ${W.totalAmount.toLocaleString()} .</p>
                </div>
                <script>
                    window.onload = function() { window.print(); }
                <\/script>
            </body>
            </html>
        `;ee.document.write(M),ee.document.close()}},k=Y=>{z({stopPropagation:()=>{}},Y)},F=async Y=>{const W=Y.items.filter(ee=>ee.status==="REJECTED"||ee.status==="NOT_FOUND").map(ee=>({"Part Number":ee.partNumber,"Part Name":ee.partName,Quantity:ee.requestedQty,Reason:ee.notes||"N/A"}));if(W.length===0){S("      ","info");return}try{const{utils:ee,writeFile:H}=await Qi(async()=>{const{utils:K,writeFile:Q}=await Promise.resolve().then(()=>Tu);return{utils:K,writeFile:Q}},void 0),M=ee.json_to_sheet(W),X=ee.book_new();ee.book_append_sheet(X,M,"Rejected Items"),H(X,`Quote_${Y.id}_NotFound.xlsx`),S("   Excel  ","success")}catch{S("    ","error")}},P=()=>A<=1?null:t.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[t.jsx("button",{disabled:h===1,onClick:()=>f(Y=>Math.max(1,Y-1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[" ",h,"  ",A]}),t.jsx("button",{disabled:h===A,onClick:()=>f(Y=>Math.min(A,Y+1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(Ns,{size:18})})]});return t.jsxs("div",{className:"w-full animate-fade-in pb-20 space-y-8",children:[t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden min-h-[600px]",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex flex-col md:flex-row justify-between items-center gap-6 bg-slate-50/50",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[a==="ORDERS"?t.jsx(zt,{className:"text-brand-600",size:28}):t.jsx(is,{className:"text-brand-600",size:28}),a==="ORDERS"?"  ":"  "]}),t.jsx("p",{className:"text-sm font-medium text-slate-500 mt-2",children:a==="ORDERS"?"     .":"      ."})]}),t.jsxs("div",{className:"bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex items-center",children:[t.jsxs("button",{onClick:()=>r("ORDERS"),className:`px-6 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${a==="ORDERS"?"bg-slate-800 text-white shadow-md":"text-slate-500 hover:text-slate-800 hover:bg-slate-50"}`,children:[t.jsx(Mr,{size:18}),"  "]}),t.jsxs("button",{onClick:()=>r("QUOTES"),className:`px-6 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${a==="QUOTES"?"bg-brand-600 text-white shadow-md":"text-slate-500 hover:text-brand-600 hover:bg-brand-50"}`,children:[t.jsx(zt,{size:18}),"  "]})]})]}),t.jsxs("div",{className:"p-8",children:[a==="ORDERS"&&t.jsxs("div",{className:"space-y-8 animate-slide-up",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-5 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-4 bg-slate-100 text-slate-600 rounded-full",children:t.jsx(Mr,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:" "}),t.jsx("p",{className:"text-3xl font-black text-slate-800 mt-1",children:D.total})]})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-5 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-4 bg-amber-50 text-amber-600 rounded-full",children:t.jsx(is,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:" "}),t.jsx("p",{className:"text-3xl font-black text-slate-800 mt-1",children:D.pending})]})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-5 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-4 bg-emerald-50 text-emerald-600 rounded-full",children:t.jsx(Mt,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:" "}),t.jsx("p",{className:"text-3xl font-black text-slate-800 mt-1",children:D.approved})]})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("span",{className:"text-sm font-bold text-slate-500 ml-2 flex items-center gap-2",children:[t.jsx(sc,{size:16})," :"]}),["ALL",xt.PENDING,xt.APPROVED,xt.SHIPPED,xt.CANCELLED].map(Y=>t.jsx("button",{onClick:()=>u(Y),className:`px-5 py-2 rounded-full text-xs font-bold border transition-colors ${d===Y?"bg-brand-600 text-white border-brand-600":"bg-white text-slate-500 border-slate-200 hover:border-brand-300 hover:text-brand-600"}`,children:Y==="ALL"?"":Y===xt.CANCELLED?"":Y},Y))]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-visible",children:t.jsxs("table",{className:"w-full text-sm text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:E.length>0?E.map((Y,W)=>t.jsxs("tr",{className:`hover:bg-blue-50/50 transition-colors group ${W%2===0?"bg-white":"bg-slate-50/30"}`,onClick:()=>y(Y),children:[t.jsx("td",{className:"p-5 font-mono font-bold text-brand-700 text-base",children:Y.id}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:ms(Y.date)}),t.jsxs("td",{className:"p-5 font-black text-slate-900",children:[Y.totalAmount.toLocaleString()," ."]}),t.jsx("td",{className:"p-5",children:t.jsx(Yx,{status:Y.status})}),t.jsxs("td",{className:"p-5 relative",onClick:ee=>ee.stopPropagation(),children:[t.jsxs("button",{className:"text-slate-400 hover:text-brand-600 p-2 rounded-full hover:bg-slate-100 transition-colors flex items-center gap-1 text-xs font-bold",onMouseEnter:()=>v(Y.id),onMouseLeave:()=>v(null),onClick:()=>v(p===Y.id?null:Y.id),children:[t.jsx(ns,{size:18})," "]}),p===Y.id&&t.jsxs("div",{className:"absolute z-50 top-full mt-2 -right-4 w-72 md:w-80 rounded-xl bg-white shadow-xl border border-slate-200 p-4 text-xs animate-fade-in pointer-events-none md:pointer-events-auto",children:[t.jsx("div",{className:"absolute top-0 right-8 -mt-2 w-4 h-4 bg-white border-t border-r border-slate-200 transform -rotate-45"}),t.jsxs("h4",{className:"font-bold text-slate-800 mb-2 border-b border-slate-100 pb-2",children:["  (",Y.items.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:Y.items.map((ee,H)=>t.jsxs("div",{className:"flex justify-between items-start gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"block font-bold text-slate-700 truncate",children:ee.name}),t.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:ee.partNumber})]}),t.jsxs("div",{className:"bg-slate-100 px-2 py-0.5 rounded text-[10px] font-bold",children:["x",ee.quantity]})]},H))})]})]}),t.jsx("td",{className:"p-5 text-center",onClick:ee=>ee.stopPropagation(),children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:ee=>z(ee,Y),className:"p-2 text-slate-400 hover:text-slate-700 hover:bg-slate-200 rounded-lg transition-colors",title:"",children:t.jsx(Qc,{size:18})}),t.jsx("button",{onClick:ee=>T(ee,Y),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" PDF",children:t.jsx(zt,{size:18})}),Y.status===xt.PENDING||Y.status===xt.APPROVED||Y.status===xt.SHIPPED||Y.status===xt.DELIVERED?t.jsx("div",{className:"relative group/cancel",children:t.jsx("button",{onClick:()=>B(Y),disabled:Y.status===xt.SHIPPED||Y.status===xt.DELIVERED,className:`p-2 rounded-lg transition-colors ${Y.status===xt.PENDING||Y.status===xt.APPROVED?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed"}`,title:Y.status===xt.SHIPPED?"     ":" ",children:t.jsx(sa,{size:18})})}):t.jsx("button",{onClick:()=>I(Y),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"  ",children:t.jsx(At,{size:18})})]})})]},Y.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-16 text-center text-slate-400 font-bold",children:"   "})})})]})}),t.jsx(P,{})]}),a==="QUOTES"&&t.jsxs("div",{className:"space-y-8 animate-slide-up",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-6 flex items-start gap-4",children:[t.jsx("div",{className:"bg-white p-3 rounded-full text-brand-600 shadow-sm shrink-0",children:t.jsx(zt,{size:24})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-brand-900 text-base",children:"   "}),t.jsxs("p",{className:"text-sm font-medium text-brand-700 mt-2 leading-relaxed",children:["   Excel       .    ",t.jsx("span",{className:"font-bold mx-1 px-2 py-0.5 bg-green-100 text-green-700 rounded-md",children:" "}),"       ."]})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:E.length>0?E.map((Y,W)=>t.jsxs("tr",{className:`hover:bg-blue-50/50 transition-colors cursor-pointer group ${W%2===0?"bg-white":"bg-slate-50/30"}`,onClick:()=>L(Y),children:[t.jsx("td",{className:"p-5 font-mono font-bold text-brand-700 text-base",children:Y.id}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:ms(Y.date)}),t.jsx("td",{className:"p-5 font-bold text-slate-800",children:Y.items.length}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:Y.priceType==="OEM"?" ":Y.priceType==="AFTERMARKET"?" ":""}),t.jsx("td",{className:"p-5",children:t.jsx(Yx,{status:Y.status,type:"QUOTE"})}),t.jsx("td",{className:"p-5 text-center",children:Y.status==="NEW"||Y.status==="UNDER_REVIEW"?t.jsx("span",{className:"text-xs font-bold text-slate-400 italic",children:" "}):t.jsxs("button",{className:"text-brand-600 hover:text-brand-800 font-bold text-xs flex items-center justify-center gap-1.5 mx-auto px-3 py-1.5 bg-brand-50 rounded-lg hover:bg-brand-100 transition-colors",children:[t.jsx(tr,{size:14}),"  "]})})]},Y.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-16 text-center text-slate-400 font-bold",children:"    "})})})]})}),t.jsx(P,{})]})]})]}),t.jsx(ds,{isOpen:!!b,onClose:()=>y(null),title:b?`  #${b.id}`:"",maxWidth:"max-w-2xl",children:b&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-5 rounded-2xl border border-slate-200",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:" "}),t.jsx("div",{children:t.jsx(Yx,{status:b.status})}),b.status===xt.CANCELLED&&b.cancelledBy&&t.jsxs("p",{className:"text-xs text-red-500 mt-1 font-bold",children:[": ",b.cancelledBy==="CUSTOMER"?"":""]})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:""}),t.jsxs("p",{className:"text-2xl font-black text-slate-900",children:[b.totalAmount.toLocaleString()," ."]})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2 text-lg",children:[t.jsx(Yt,{size:20,className:"text-brand-500"}),"  (",b.items.length,")"]}),t.jsx("div",{className:"border border-slate-200 rounded-2xl overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:b.items.map((Y,W)=>t.jsxs("tr",{children:[t.jsxs("td",{className:"p-4",children:[t.jsx("p",{className:"font-bold text-slate-800 text-base",children:Y.name}),t.jsx("p",{className:"font-mono text-xs text-slate-400 font-bold mt-0.5",children:Y.partNumber})]}),t.jsx("td",{className:"p-4 text-center font-bold text-base",children:Y.quantity}),t.jsx("td",{className:"p-4 text-center text-slate-600 font-medium",children:Y.price}),t.jsx("td",{className:"p-4 text-center font-bold text-brand-600 text-base",children:(Y.price*Y.quantity).toLocaleString()})]},W))})]})})]}),t.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-slate-100",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>k(b),className:"px-5 py-2.5 bg-slate-800 text-white rounded-xl font-bold hover:bg-slate-900 flex items-center gap-2 text-sm shadow-md transition-all",children:[t.jsx(Qc,{size:18})," "]}),(b.status===xt.PENDING||b.status===xt.APPROVED)&&t.jsxs("button",{onClick:()=>{b&&B(b)},className:"px-5 py-2.5 bg-red-50 text-red-600 border border-red-100 rounded-xl font-bold hover:bg-red-100 flex items-center gap-2 text-sm transition-all",children:[t.jsx(sa,{size:18}),"  "]}),(b.status===xt.CANCELLED||b.status===xt.REJECTED)&&t.jsxs("button",{onClick:()=>{b&&I(b)},className:"px-5 py-2.5 bg-slate-50 text-slate-600 border border-slate-200 rounded-xl font-bold hover:bg-slate-100 flex items-center gap-2 text-sm transition-all",children:[t.jsx(At,{size:18})," "]})]}),t.jsx("button",{onClick:()=>y(null),className:"px-6 py-2.5 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:""})]})]})}),t.jsx(ds,{isOpen:!!j,onClose:()=>w(null),title:j?`   #${j.id}`:"",maxWidth:"max-w-3xl",children:j&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 bg-slate-50 p-5 rounded-2xl border border-slate-200 text-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:Yo(j.date)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:j.priceType})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:j.items.length})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:"  "}),t.jsxs("p",{className:"font-black text-brand-600 text-lg",children:[((G=j.totalQuotedAmount)==null?void 0:G.toLocaleString())||0," ."]})]})]}),t.jsx("div",{className:"border border-slate-200 rounded-2xl overflow-hidden max-h-[400px] overflow-y-auto custom-scrollbar shadow-inner",children:t.jsxs("table",{className:"w-full text-sm text-right relative",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200 sticky top-0 z-10",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:" "}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:j.items.map((Y,W)=>t.jsxs("tr",{className:Y.status==="NOT_FOUND"||Y.status==="REJECTED"?"bg-red-50/30":"bg-white",children:[t.jsx("td",{className:"p-4 font-mono text-slate-600 font-bold",children:Y.partNumber}),t.jsxs("td",{className:"p-4",children:[t.jsx("span",{className:"font-bold text-slate-800 block text-base",children:Y.matchedProductName||Y.partName}),Y.notes&&t.jsx("span",{className:"text-xs text-red-500 font-bold block mt-1 bg-red-50 px-2 py-0.5 rounded w-fit",children:Y.notes})]}),t.jsx("td",{className:"p-4 text-center font-bold text-base",children:Y.requestedQty}),t.jsx("td",{className:"p-4 text-center font-bold text-brand-600 text-base",children:Y.matchedPrice?Y.matchedPrice.toLocaleString():"-"}),t.jsx("td",{className:"p-4 text-center",children:t.jsx(Yx,{status:Y.status||"PENDING"})})]},W))})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 pt-6 border-t border-slate-100",children:[t.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[t.jsxs("button",{onClick:()=>{const Y=window.open("","_blank");Y==null||Y.document.write("<h1>         </h1>")},className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-brand-600 text-white px-5 py-3 rounded-xl font-bold hover:bg-brand-700 shadow-md transition-colors text-sm opacity-50 cursor-not-allowed",title:"       ",children:[t.jsx(tr,{size:18}),"    (PDF)"]}),j.items.some(Y=>Y.status==="NOT_FOUND"||Y.status==="REJECTED")&&t.jsxs("button",{onClick:()=>F(j),className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 py-2.5 px-5 rounded-xl text-xs font-bold transition-colors",children:[t.jsx(tr,{size:16}),"    (Excel)"]})]}),t.jsx("button",{onClick:()=>w(null),className:"text-slate-500 font-bold hover:text-slate-800 transition-colors px-4",children:" "})]})]})})]})},nde=({user:e,onSuccess:s})=>{var Y,W;const[a,r]=C.useState(null),[n,i]=C.useState(null),[l,o]=C.useState([]),[d,u]=C.useState(0),[h,f]=C.useState(!1),[x,p]=C.useState(!1),[v,b]=C.useState([]),[y,j]=C.useState(1),w=5,S=C.useRef(null),[O,_]=C.useState(null),E=C.useRef(null),{addToast:A}=It();C.useEffect(()=>{D()},[x]);const D=async()=>{const ee=await he.getAllQuoteRequests();b(ee.filter(H=>H.userId===e.id).reverse())},L=C.useMemo(()=>{const ee=(y-1)*w;return v.slice(ee,ee+w)},[v,y]),B=Math.ceil(v.length/w),I=async()=>{try{const{utils:ee,writeFile:H}=await Qi(async()=>{const{utils:Q,writeFile:se}=await Promise.resolve().then(()=>Tu);return{utils:Q,writeFile:se}},void 0),M=ee.book_new(),X=[["PartNumber","PartName","Quantity"],["CN-102030"," ",10],["MG-998877","   ",5],["GL-COOL-01"," ",1]],K=ee.aoa_to_sheet(X);ee.book_append_sheet(M,K,"Template"),H(M,"SiniCar_Quote_Template.xlsx")}catch{A("    ","error")}},T=ee=>{if(!ee||ee.length<3)return!1;const H=ee.map(Q=>String(Q).toLowerCase()),M=H.some(Q=>Q.includes("number")||Q.includes("num")||Q.includes("part")||Q.includes("")),X=H.some(Q=>Q.includes("name")||Q.includes("desc")||Q.includes("")||Q.includes("")),K=H.some(Q=>Q.includes("qty")||Q.includes("quantity")||Q.includes("count")||Q.includes("")||Q.includes(""));return M&&X&&K},z=async ee=>{var M;const H=(M=ee.target.files)==null?void 0:M[0];if(H){if(!a){A("       ","error");return}i(H),f(!0),u(10);try{const{read:X,utils:K}=await Qi(async()=>{const{read:ie,utils:ne}=await Promise.resolve().then(()=>Tu);return{read:ie,utils:ne}},void 0),Q=await H.arrayBuffer(),se=X(Q),V=se.Sheets[se.SheetNames[0]],te=K.sheet_to_json(V,{header:1});if(te.length<2)throw new Error(" ");const Z=te[0];if(!T(Z))throw new Error("     :     ");u(40);const ue=[],re=Z.map(ie=>String(ie).toLowerCase()),J=re.findIndex(ie=>ie.includes("number")||ie.includes("num")||ie.includes("part")||ie.includes("")),Ne=re.findIndex(ie=>ie.includes("name")||ie.includes("desc")||ie.includes("")||ie.includes("")),q=re.findIndex(ie=>ie.includes("qty")||ie.includes("quantity")||ie.includes("count")||ie.includes(""));for(let ie=1;ie<te.length;ie++){const ne=te[ie];ne&&ne[J]&&ue.push({partNumber:String(ne[J]).trim(),partName:String(ne[Ne]||"Unknown").trim(),requestedQty:Number(ne[q])||1})}if(ue.length===0)throw new Error("     ");let ce=40;const fe=setInterval(()=>{ce+=5,u(ce),ce>=90&&clearInterval(fe)},50);await new Promise(ie=>setTimeout(ie,500)),clearInterval(fe),u(100),o(ue),await k(ue)}catch(X){A(X.message||"    ","error"),i(null),f(!1),u(0)}}},k=async ee=>{var H;try{const M=(H=(await he.getAllUsers()).find(X=>X.user.id===e.id))==null?void 0:H.profile;await he.createQuoteRequest({userId:e.id,userName:e.name,companyName:(M==null?void 0:M.companyName)||"Unknown",items:ee,priceType:a}),p(!0),A("    ","success")}catch{A("   ","error"),f(!1)}},F=()=>{i(null),o([]),f(!1),p(!1),u(0),r(null)},P=async ee=>{_(ee),setTimeout(async()=>{if(S.current)try{const{default:H}=await Qi(async()=>{const{default:te}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:te}},[]),{default:M}=await Qi(async()=>{const{default:te}=await import("./jspdf.es.min-DcKUTRCn.js").then(Z=>Z.j);return{default:te}},[]),X=await H(S.current,{scale:2,useCORS:!0}),K=X.toDataURL("image/png"),Q=new M("p","mm","a4"),se=Q.internal.pageSize.getWidth(),V=X.height*se/X.width;Q.addImage(K,"PNG",0,0,se,V),Q.save(`Quote_${ee.id}_Matched.pdf`),A("    ","success")}catch(H){console.error(H),A("     PDF","error")}finally{_(null)}},100)},G=async ee=>{const H=ee.items.filter(M=>M.approvalStatus==="MISSING"||M.approvalStatus==="REJECTED"||M.status==="NOT_FOUND"||M.status==="REJECTED").map(M=>({"Part Number":M.partNumber,"Part Name":M.partName,Quantity:M.requestedQty,Reason:M.adminNote||M.notes||"   "}));if(H.length===0){A("    ","info");return}try{const{utils:M,writeFile:X}=await Qi(async()=>{const{utils:se,writeFile:V}=await Promise.resolve().then(()=>Tu);return{utils:se,writeFile:V}},void 0),K=M.json_to_sheet(H),Q=M.book_new();M.book_append_sheet(Q,K,"Missing Items"),X(Q,`Quote_${ee.id}_Missing.xlsx`)}catch{A("    ","error")}};return t.jsxs("div",{className:"w-full animate-fade-in py-8 space-y-10",children:[x?t.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-green-100 p-16 text-center animate-fade-in relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-green-500"}),t.jsx("div",{className:"w-24 h-24 bg-green-50 rounded-full flex items-center justify-center text-green-500 mx-auto mb-8 shadow-sm border border-green-100 animate-bounce",children:t.jsx(Mt,{size:48})}),t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:"   "}),t.jsx("p",{className:"text-slate-500 font-medium text-lg max-w-xl mx-auto mb-10",children:"         .    ."}),t.jsxs("button",{onClick:F,className:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-10 py-4 rounded-xl font-bold transition-colors flex items-center gap-3 mx-auto text-lg",children:[t.jsx(sl,{size:20}),"   "]})]}):t.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 overflow-hidden relative",children:[t.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-10 text-white",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black mb-3",children:"   (Bulk Request)"}),t.jsx("p",{className:"text-slate-200 text-lg font-medium",children:"    Excel   ."})]}),t.jsxs("button",{onClick:I,className:"bg-white/10 hover:bg-white/20 text-white px-5 py-3 rounded-xl text-sm font-bold flex items-center gap-2 transition-all backdrop-blur-sm",children:[t.jsx(tr,{size:18}),"  Excel"]})]})}),t.jsxs("div",{className:"p-10",children:[t.jsxs("div",{className:"mb-10",children:[t.jsxs("label",{className:"block text-base font-bold text-slate-700 mb-6 flex items-center gap-3",children:[t.jsx("span",{className:"w-8 h-8 rounded-full bg-slate-900 text-white flex items-center justify-center text-sm font-bold",children:"1"}),"    :"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("button",{onClick:()=>r("OEM"),disabled:h,className:`p-8 rounded-2xl border-2 transition-all text-right group ${a==="OEM"?"border-brand-600 bg-brand-50 shadow-md ring-2 ring-brand-200":"border-slate-100 hover:border-slate-300 bg-white"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx(Fn,{className:`w-10 h-10 ${a==="OEM"?"text-brand-600":"text-slate-300"}`}),a==="OEM"&&t.jsx(Mt,{size:24,className:"text-brand-600"})]}),t.jsx("h3",{className:`font-bold text-xl mb-2 ${a==="OEM"?"text-brand-800":"text-slate-700"}`,children:"  (OEM)"}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"      ."})]}),t.jsxs("button",{onClick:()=>r("AFTERMARKET"),disabled:h,className:`p-8 rounded-2xl border-2 transition-all text-right group ${a==="AFTERMARKET"?"border-brand-600 bg-brand-50 shadow-md ring-2 ring-brand-200":"border-slate-100 hover:border-slate-300 bg-white"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx(jse,{className:`w-10 h-10 ${a==="AFTERMARKET"?"text-brand-600":"text-slate-300"}`}),a==="AFTERMARKET"&&t.jsx(Mt,{size:24,className:"text-brand-600"})]}),t.jsx("h3",{className:`font-bold text-xl mb-2 ${a==="AFTERMARKET"?"text-brand-800":"text-slate-700"}`,children:" "}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"     ."})]}),t.jsxs("button",{onClick:()=>r("BOTH"),disabled:h,className:`p-8 rounded-2xl border-2 transition-all text-right group ${a==="BOTH"?"border-brand-600 bg-brand-50 shadow-md ring-2 ring-brand-200":"border-slate-100 hover:border-slate-300 bg-white"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx(Mr,{className:`w-10 h-10 ${a==="BOTH"?"text-brand-600":"text-slate-300"}`}),a==="BOTH"&&t.jsx(Mt,{size:24,className:"text-brand-600"})]}),t.jsx("h3",{className:`font-bold text-xl mb-2 ${a==="BOTH"?"text-brand-800":"text-slate-700"}`,children:" ( )"}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"      ."})]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block text-base font-bold text-slate-700 mb-6 flex items-center gap-3",children:[t.jsx("span",{className:"w-8 h-8 rounded-full bg-slate-900 text-white flex items-center justify-center text-sm font-bold",children:"2"}),"  :"]}),h?t.jsx("div",{className:"border-2 border-slate-100 rounded-3xl p-16 text-center bg-slate-50/50",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 mb-2",children:[t.jsx("span",{children:" ..."}),t.jsxs("span",{children:[d,"%"]})]}),t.jsx("div",{className:"h-4 bg-slate-200 rounded-full overflow-hidden mb-8",children:t.jsx("div",{className:"h-full bg-brand-600 rounded-full transition-all duration-300 ease-out",style:{width:`${d}%`}})}),t.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[t.jsx(ts,{className:"animate-spin text-brand-600",size:40}),t.jsx("p",{className:"text-slate-700 font-bold text-lg",children:"   ..."})]})]})}):t.jsxs("div",{onClick:()=>{var ee;return a?(ee=E.current)==null?void 0:ee.click():A("    ","error")},className:`border-2 border-dashed rounded-3xl p-16 text-center transition-all group ${a?"border-slate-300 hover:border-brand-500 hover:bg-slate-50 cursor-pointer":"border-slate-200 bg-slate-50 opacity-50 cursor-not-allowed"}`,children:[t.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center text-brand-600 mx-auto mb-8 shadow-sm group-hover:scale-110 transition-transform border border-slate-100",children:t.jsx(va,{size:40})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"   Excel    "}),t.jsx("p",{className:"text-base text-slate-500 font-medium",children:"    :     "}),t.jsx("p",{className:"text-sm text-slate-400 mt-6 font-mono font-bold",children:".xlsx, .xls  Max 5MB"}),t.jsx("input",{type:"file",ref:E,className:"hidden",accept:".xlsx, .xls",onChange:z,disabled:!a})]})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"font-bold text-2xl text-slate-800 flex items-center gap-3 px-2",children:[t.jsx(zt,{size:24,className:"text-slate-400"}),"   "]}),L.map(ee=>t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm hover:shadow-md transition-shadow flex flex-col lg:flex-row items-center justify-between gap-6",children:[t.jsxs("div",{className:"flex items-center gap-5 flex-1 w-full",children:[t.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-xl font-bold ${ee.resultReady?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ee.items.length}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[t.jsx("span",{className:"font-mono font-bold text-slate-800 text-lg",children:ee.id}),ee.resultReady?t.jsx("span",{className:"bg-green-50 text-green-700 text-[11px] font-bold px-2.5 py-1 rounded-md border border-green-200",children:" "}):t.jsxs("span",{className:"bg-yellow-50 text-yellow-700 text-[11px] font-bold px-2.5 py-1 rounded-md border border-yellow-200 flex items-center gap-1",children:[t.jsx(is,{size:12}),"  "]})]}),t.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[ms(ee.date),"  ",ee.priceType==="OEM"?" ":ee.priceType==="AFTERMARKET"?" ":""]})]})]}),t.jsx("div",{className:"flex gap-8 w-full lg:w-auto justify-around lg:justify-start",children:ee.resultReady?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center px-4 lg:border-l border-slate-100",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:""}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:ee.approvedItemsCount??ee.items.filter(H=>H.approvalStatus==="APPROVED"||H.status==="MATCHED").length})]}),t.jsxs("div",{className:"text-center px-4 lg:border-l border-slate-100",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:" "}),t.jsx("p",{className:"text-2xl font-black text-slate-500",children:ee.missingItemsCount??ee.items.filter(H=>H.approvalStatus==="MISSING"||H.status==="NOT_FOUND").length})]})]}):t.jsx("div",{className:"text-center px-8 lg:border-l border-slate-100 text-slate-400 italic font-bold",children:" ..."})}),ee.resultReady&&t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto min-w-[200px]",children:[t.jsxs("button",{onClick:()=>P(ee),className:"flex-1 flex items-center justify-center gap-2 bg-brand-600 hover:bg-brand-700 text-white py-2.5 px-5 rounded-xl text-xs font-bold transition-colors shadow-sm",children:[t.jsx(Qc,{size:16}),"   "]}),(ee.missingItemsCount||0)>0&&t.jsxs("button",{onClick:()=>G(ee),className:"flex-1 flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 py-2.5 px-5 rounded-xl text-xs font-bold transition-colors",children:[t.jsx(tr,{size:16}),"  (Excel)"]})]})]},ee.id)),B>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[t.jsx("button",{disabled:y===1,onClick:()=>j(ee=>Math.max(1,ee-1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[" ",y,"  ",B]}),t.jsx("button",{disabled:y===B,onClick:()=>j(ee=>Math.min(B,ee+1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(Ns,{size:18})})]}),v.length===0&&t.jsx("div",{className:"text-center py-16 text-slate-400 bg-slate-50 rounded-3xl border border-dashed border-slate-200",children:t.jsx("p",{className:"text-lg font-bold opacity-50",children:"    "})})]}),O&&t.jsx("div",{className:"fixed top-0 left-0 -z-50 opacity-0 pointer-events-none",children:t.jsxs("div",{ref:S,className:"bg-white p-10 w-[210mm] min-h-[297mm] text-slate-900 font-sans",dir:"rtl",children:[t.jsxs("div",{className:"flex justify-between items-start border-b-2 border-slate-800 pb-6 mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"  / Pro-forma Invoice"}),t.jsxs("p",{className:"text-slate-500 font-bold",children:[" : ",t.jsx("span",{className:"font-mono text-slate-900",children:O.id})]}),t.jsxs("p",{className:"text-slate-500 font-bold",children:[": ",t.jsx("span",{className:"font-mono text-slate-900",children:Yo(O.processedDate||O.date)})]})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("h2",{className:"text-2xl font-black text-brand-700",children:"Sini Car Wholesale"}),t.jsx("p",{className:"text-sm text-slate-500",children:"   "}),t.jsx("p",{className:"text-sm text-slate-500 font-mono",children:"CR: 1010xxxxxx"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-8",children:[t.jsx("h3",{className:"font-bold text-lg mb-2 border-b border-slate-200 pb-1",children:" "}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("p",{children:[t.jsx("span",{className:"text-slate-500 font-bold ml-2",children:":"})," ",O.userName]}),t.jsxs("p",{children:[t.jsx("span",{className:"text-slate-500 font-bold ml-2",children:":"})," ",O.companyName]}),t.jsxs("p",{children:[t.jsx("span",{className:"text-slate-500 font-bold ml-2",children:" :"})," ",O.priceType]})]})]}),t.jsxs("table",{className:"w-full text-right text-sm border-collapse mb-8",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800 text-white",children:[t.jsx("th",{className:"p-3 border border-slate-800",children:"#"}),t.jsx("th",{className:"p-3 border border-slate-800",children:" "}),t.jsx("th",{className:"p-3 border border-slate-800",children:" "}),t.jsx("th",{className:"p-3 border border-slate-800 text-center",children:""}),t.jsx("th",{className:"p-3 border border-slate-800 text-center",children:" "}),t.jsx("th",{className:"p-3 border border-slate-800 text-center",children:""})]})}),t.jsx("tbody",{children:O.items.filter(ee=>ee.approvalStatus==="APPROVED"||ee.status==="MATCHED").map((ee,H)=>{var M;return t.jsxs("tr",{className:H%2===0?"bg-white":"bg-slate-50",children:[t.jsx("td",{className:"p-3 border border-slate-200 text-center",children:H+1}),t.jsx("td",{className:"p-3 border border-slate-200 font-mono font-bold",children:ee.partNumber}),t.jsx("td",{className:"p-3 border border-slate-200 font-bold",children:ee.matchedProductName||ee.partName}),t.jsx("td",{className:"p-3 border border-slate-200 text-center",children:ee.requestedQty}),t.jsx("td",{className:"p-3 border border-slate-200 text-center",children:(M=ee.matchedPrice)==null?void 0:M.toLocaleString()}),t.jsx("td",{className:"p-3 border border-slate-200 text-center font-bold",children:(ee.matchedPrice*ee.requestedQty).toLocaleString()})]},H)})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("div",{className:"w-64 bg-slate-100 p-4 rounded-lg border border-slate-200",children:[t.jsxs("div",{className:"flex justify-between mb-2",children:[t.jsx("span",{className:"font-bold text-slate-600",children:":"}),t.jsxs("span",{className:"font-bold font-mono",children:[(Y=O.totalQuotedAmount)==null?void 0:Y.toLocaleString()," SAR"]})]}),t.jsxs("div",{className:"flex justify-between border-t border-slate-300 pt-2",children:[t.jsx("span",{className:"font-black text-slate-900 text-lg",children:":"}),t.jsxs("span",{className:"font-black text-slate-900 text-lg font-mono",children:[(W=O.totalQuotedAmount)==null?void 0:W.toLocaleString()," SAR"]})]})]})}),t.jsxs("div",{className:"mt-12 text-center text-xs text-slate-400 border-t border-slate-200 pt-4",children:[t.jsx("p",{children:"    7   .     ."}),t.jsx("p",{children:"        ."})]})]})})]})},ide=()=>t.jsxs("div",{className:"max-w-5xl mx-auto animate-fade-in pb-10",children:[t.jsxs("div",{className:"bg-slate-900 rounded-3xl overflow-hidden shadow-2xl relative mb-10 text-white",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"}),t.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full bg-gradient-to-l from-primary-900/50 to-transparent"}),t.jsxs("div",{className:"relative z-10 p-12 md:p-20 text-center",children:[t.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-4",children:"SINI PRO"}),t.jsx("p",{className:"text-xl text-slate-300 font-light max-w-2xl mx-auto",children:"           ."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[t.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-soft border border-slate-100 hover:border-primary-200 transition-colors group",children:[t.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-2xl flex items-center justify-center text-primary-600 mb-6 group-hover:scale-110 transition-transform",children:t.jsx(xh,{size:28})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:""}),t.jsx("p",{className:"text-slate-600 leading-relaxed",children:"                            ."})]}),t.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-soft border border-slate-100 hover:border-secondary-200 transition-colors group",children:[t.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-2xl flex items-center justify-center text-secondary-600 mb-6 group-hover:scale-110 transition-transform",children:t.jsx(Fn,{size:28})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:""}),t.jsx("p",{className:"text-slate-600 leading-relaxed",children:"                        ."})]})]}),t.jsx("div",{className:"bg-slate-50 rounded-3xl p-10 border border-slate-200 mb-12",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center divide-x divide-slate-200 divide-x-reverse",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-primary-600 mb-2",children:"20k+"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-slate-800 mb-2",children:"500+"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-secondary-500 mb-2",children:"12"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-slate-800 mb-2",children:"24/7"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]})]})}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-soft border border-slate-100 p-8 flex flex-col md:flex-row justify-between items-center gap-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-900 rounded-full flex items-center justify-center text-white shadow-lg",children:t.jsx(Yr,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase",children:" "}),t.jsx("p",{className:"text-2xl font-black text-slate-900 font-mono",children:"9200 00000"})]})]}),t.jsx("div",{className:"h-12 w-px bg-slate-100 hidden md:block"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white border border-slate-200 rounded-full flex items-center justify-center text-green-600 shadow-sm",children:t.jsx(ku,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase",children:" "}),t.jsx("p",{className:"text-2xl font-black text-slate-900 font-mono",children:"050 000 0000"})]})]}),t.jsx("div",{className:"h-12 w-px bg-slate-100 hidden md:block"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white border border-slate-200 rounded-full flex items-center justify-center text-blue-600 shadow-sm",children:t.jsx(Ea,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-900",children:"   "})]})]})]})]}),lde=({user:e,mainProfileUserId:s})=>{const[a,r]=C.useState("PROFILE"),[n,i]=C.useState([]),[l,o]=C.useState([]),[d,u]=C.useState(!0),[h,f]=C.useState({companyName:"",crNumber:"",taxNumber:"",nationalAddress:"",city:"",region:"  ",phone:""}),[x,p]=C.useState(!1),[v,b]=C.useState(!1),[y,j]=C.useState(!1),[w,S]=C.useState(null),[O,_]=C.useState(!1),[E,A]=C.useState({}),[D,L]=C.useState({employeeRole:_n.BUYER}),[B,I]=C.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[T,z]=C.useState(!1),[k,F]=C.useState(!1),{addToast:P}=It();C.useEffect(()=>{G()},[s]);const G=async()=>{var Q;u(!0);try{const V=(Q=(await he.getAllUsers()).find(Z=>Z.user.id===s))==null?void 0:Q.profile;V&&(i(V.branches||[]),f({companyName:V.companyName||"",crNumber:V.crNumber||"",taxNumber:V.taxNumber||"",nationalAddress:V.nationalAddress||"",city:V.city||"",region:V.region||"  ",phone:V.phone||""}));const te=await he.getEmployees(s);o(te)}catch(se){console.error(se),P("    ","error")}finally{u(!1)}},Y=async()=>{p(!0);try{await he.updateCustomerProfile(s,h),P("    ","success")}catch(Q){P(Q.message||"  ","error")}finally{p(!1)}},W=async()=>{if(!E.name||!E.city||!E.phone){P("    (  )","error");return}_(!0);try{await he.addBranch(s,E),P("   ","success"),b(!1),A({}),G()}catch(Q){P(Q.message||" ","error")}finally{_(!1)}},ee=async Q=>{if(confirm("      "))try{await he.deleteBranch(s,Q),P("  ","info"),G()}catch{P(" ","error")}},H=async()=>{if(!D.name||!D.phone||!D.branchId){P("    ","error");return}_(!0);try{const Q=await he.addEmployee(s,D);P("   ","success"),j(!1),L({employeeRole:_n.BUYER}),S(Q.activationCode),G()}catch(Q){P(Q.message||" ","error")}finally{_(!1)}},M=async Q=>{try{await he.toggleEmployeeStatus(Q),P("   ","success"),G()}catch{P(" ","error")}},X=async Q=>{if(confirm("      "))try{await he.deleteEmployee(Q),P("   ","info"),G()}catch{P(" ","error")}},K=async()=>{if(!B.oldPassword){P("    ","error");return}if(!B.newPassword){P("    ","error");return}if(B.newPassword.length<4){P("      4   ","error");return}if(B.newPassword!==B.confirmPassword){P("      ","error");return}z(!0);try{const Q=await he.changePassword(e.id,B.oldPassword,B.newPassword);Q.success?(P(Q.message,"success"),I({oldPassword:"",newPassword:"",confirmPassword:""})):P(Q.message,"error")}catch{P("     ","error")}finally{z(!1)}};return t.jsxs("div",{className:"w-full animate-fade-in pb-20",children:[t.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 mb-8 flex flex-col md:flex-row justify-between items-center gap-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[t.jsx(ta,{className:"text-brand-600",size:32}),"   "]}),t.jsx("p",{className:"text-slate-500 font-medium mt-2",children:"      ."})]}),t.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-xl flex-wrap gap-1",children:[t.jsxs("button",{onClick:()=>r("PROFILE"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="PROFILE"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-profile",children:[t.jsx(Fu,{size:18}),"  "]}),t.jsxs("button",{onClick:()=>r("BRANCHES"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="BRANCHES"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-branches",children:[t.jsx(ta,{size:18}),"  (",n.length,")"]}),t.jsxs("button",{onClick:()=>r("EMPLOYEES"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="EMPLOYEES"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-employees",children:[t.jsx(Wt,{size:18}),"  (",l.length,")"]}),t.jsxs("button",{onClick:()=>r("SECURITY"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="SECURITY"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-security",children:[t.jsx(Sa,{size:18})," "]})]})]}),a==="PROFILE"&&t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden animate-slide-up",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(Fu,{size:22,className:"text-brand-600"})," "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"    "})]}),t.jsxs("button",{onClick:Y,disabled:x,className:"bg-brand-600 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 transition-colors disabled:opacity-50 shadow-md","data-testid":"button-save-profile",children:[t.jsx(us,{size:18})," ",x?" ...":" "]})]}),t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(ta,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all text-lg font-bold",value:h.companyName,onChange:Q=>f({...h,companyName:Q.target.value}),placeholder:"   ","data-testid":"input-business-name"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(xF,{size:16,className:"text-slate-400"}),"  "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-mono",value:h.crNumber,onChange:Q=>f({...h,crNumber:Q.target.value}),placeholder:"10 ","data-testid":"input-cr-number"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Yae,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-mono",value:h.taxNumber,onChange:Q=>f({...h,taxNumber:Q.target.value}),placeholder:"15 ","data-testid":"input-vat-number"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Qo,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:h.nationalAddress,onChange:Q=>f({...h,nationalAddress:Q.target.value}),placeholder:"    ABCD1234","data-testid":"input-national-address"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Ea,{size:16,className:"text-slate-400"}),""]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:h.city,onChange:Q=>f({...h,city:Q.target.value}),placeholder:": ","data-testid":"input-city"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Ea,{size:16,className:"text-slate-400"}),""]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:h.region,onChange:Q=>f({...h,region:Q.target.value}),placeholder:":   ","data-testid":"input-region"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Yr,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-mono",value:h.phone,onChange:Q=>f({...h,phone:Q.target.value}),placeholder:"    ",dir:"ltr","data-testid":"input-phone"})]})]}),t.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-5 flex gap-3",children:[t.jsx(Bs,{size:20,className:"text-blue-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-blue-800",children:" "}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"       .       ."})]})]})]})]}),a==="BRANCHES"&&t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden animate-slide-up",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-xl text-slate-800",children:" "}),t.jsxs("button",{onClick:()=>b(!0),className:"bg-brand-600 text-white px-5 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 transition-colors",children:[t.jsx(kt,{size:18}),"   "]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" / "}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:n.length>0?n.map((Q,se)=>t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsxs("td",{className:"p-5 font-bold text-slate-800 text-base",children:[Q.name,se===0&&t.jsx("span",{className:"mr-2 text-xs bg-brand-100 text-brand-700 px-2 py-0.5 rounded-full border border-brand-200",children:""})]}),t.jsx("td",{className:"p-5 text-slate-700 font-medium",children:Q.city}),t.jsx("td",{className:"p-5 text-slate-700 font-mono font-bold",dir:"ltr",children:Q.phone}),t.jsx("td",{className:"p-5",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[250px]",children:Q.address}),Q.mapUrl&&t.jsxs("a",{href:Q.mapUrl,target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-brand-600 flex items-center gap-1 hover:underline mt-1",children:[t.jsx(Qo,{size:12}),"   "]})]})}),t.jsx("td",{className:"p-5 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx(wre,{size:18})}),se!==0&&t.jsx("button",{onClick:()=>ee(Q.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(At,{size:18})})]})})]},Q.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"p-16 text-center text-slate-400 font-bold",children:"   "})})})]})})]}),a==="EMPLOYEES"&&t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden animate-slide-up",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-xl text-slate-800",children:" "}),t.jsxs("button",{onClick:()=>j(!0),className:"bg-brand-600 text-white px-5 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 transition-colors",children:[t.jsx(kt,{size:18}),"  "]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:"  ()"}),t.jsx("th",{className:"p-5",children:"  "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:l.length>0?l.map(Q=>{var se;return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"p-5 font-bold text-slate-800 text-base",children:Q.name}),t.jsx("td",{className:"p-5 font-mono font-bold text-slate-700",children:Q.phone}),t.jsx("td",{className:"p-5 text-slate-700 font-medium",children:((se=n.find(V=>V.id===Q.branchId))==null?void 0:se.name)||t.jsx("span",{className:"text-red-400 italic",children:" "})}),t.jsx("td",{className:"p-5",children:Q.employeeRole===_n.MANAGER?t.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold bg-purple-100 text-purple-700 px-3 py-1 rounded-full w-fit border border-purple-200",children:[t.jsx(Bs,{size:14}),"  (Admin)"]}):t.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold bg-blue-100 text-blue-700 px-3 py-1 rounded-full w-fit border border-blue-200",children:[t.jsx(qa,{size:14}),"  (Buyer)"]})}),t.jsx("td",{className:"p-5",children:t.jsx("button",{onClick:()=>M(Q.id),className:`px-3 py-1 rounded-full text-xs font-bold transition-all border ${Q.isActive?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"}`,children:Q.isActive?"":""})}),t.jsx("td",{className:"p-5 text-center",children:t.jsx("div",{className:"flex items-center justify-center gap-2",children:t.jsx("button",{onClick:()=>X(Q.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(At,{size:18})})})})]},Q.id)}):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-16 text-center text-slate-400 font-bold",children:"   "})})})]})})]}),a==="SECURITY"&&t.jsxs("div",{className:"animate-slide-up space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(Sa,{size:22,className:"text-brand-600"}),"  "]}),t.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"       "})]}),t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"max-w-md space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:k?"text":"password",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all pr-12",placeholder:"   ",value:B.oldPassword,onChange:Q=>I({...B,oldPassword:Q.target.value}),"data-testid":"input-old-password"}),t.jsx("button",{type:"button",onClick:()=>F(!k),className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:t.jsx(ns,{size:18})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsx("input",{type:k?"text":"password",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:"    (4   )",value:B.newPassword,onChange:Q=>I({...B,newPassword:Q.target.value}),"data-testid":"input-new-password"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"   "}),t.jsx("input",{type:k?"text":"password",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:"    ",value:B.confirmPassword,onChange:Q=>I({...B,confirmPassword:Q.target.value}),"data-testid":"input-confirm-password"})]}),t.jsx("button",{onClick:K,disabled:T,className:"bg-brand-600 text-white font-bold py-3.5 px-8 rounded-xl hover:bg-brand-700 disabled:opacity-50 transition-colors shadow-md flex items-center gap-2","data-testid":"button-change-password",children:T?t.jsx(t.Fragment,{children:" ..."}):t.jsxs(t.Fragment,{children:[t.jsx(es,{size:18}),"  "]})})]})})]}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-8 border-b border-slate-100",children:t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(Bs,{size:22,className:"text-brand-600"})," "]})}),t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800 font-mono",children:e.clientId})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800",children:e.email||"-"})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800 font-mono",dir:"ltr",children:e.phone||"-"})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800",children:e.role==="CUSTOMER_OWNER"?" ":e.role==="CUSTOMER_STAFF"?"":e.role})]})]})})]})]}),t.jsx(ds,{isOpen:v,onClose:()=>b(!1),title:"  ",children:t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:":   ",value:E.name||"",onChange:Q=>A({...E,name:Q.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:""}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.city||"",onChange:Q=>A({...E,city:Q.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.phone||"",onChange:Q=>A({...E,phone:Q.target.value})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.address||"",onChange:Q=>A({...E,address:Q.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"   ()"}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.mapUrl||"",onChange:Q=>A({...E,mapUrl:Q.target.value})})]}),t.jsx("button",{onClick:W,disabled:O,className:"w-full bg-brand-600 text-white font-bold py-3.5 rounded-xl mt-4 hover:bg-brand-700 disabled:opacity-50 transition-colors shadow-md",children:O?" ...":" "})]})}),t.jsx(ds,{isOpen:y,onClose:()=>j(!1),title:"  ",children:t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:D.name||"",onChange:Q=>L({...D,name:Q.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  (  )"}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:"05xxxxxxxx",value:D.phone||"",onChange:Q=>L({...D,phone:Q.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsxs("select",{className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:D.branchId||"",onChange:Q=>L({...D,branchId:Q.target.value}),children:[t.jsx("option",{value:"",children:" ..."}),n.map(Q=>t.jsxs("option",{value:Q.id,children:[Q.name," - ",Q.city]},Q.id))]})]}),t.jsxs("div",{className:"mt-2 bg-slate-50 p-5 rounded-xl border border-slate-200",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Bs,{size:18,className:"text-brand-600"}),"  "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("label",{className:`flex flex-col items-center justify-center p-5 rounded-xl border-2 cursor-pointer transition-all ${D.employeeRole===_n.MANAGER?"border-purple-500 bg-purple-50 text-purple-900 shadow-md":"border-slate-200 bg-white hover:border-slate-300"}`,children:[t.jsx("input",{type:"radio",name:"role",className:"hidden",checked:D.employeeRole===_n.MANAGER,onChange:()=>L({...D,employeeRole:_n.MANAGER})}),t.jsx(Bs,{className:`mb-2 ${D.employeeRole===_n.MANAGER?"text-purple-600":"text-slate-400"}`,size:24}),t.jsx("span",{className:"font-bold text-sm",children:" (Admin)"}),t.jsx("span",{className:"text-xs text-center opacity-70 mt-1 font-medium",children:"      ."})]}),t.jsxs("label",{className:`flex flex-col items-center justify-center p-5 rounded-xl border-2 cursor-pointer transition-all ${D.employeeRole===_n.BUYER?"border-blue-500 bg-blue-50 text-blue-900 shadow-md":"border-slate-200 bg-white hover:border-slate-300"}`,children:[t.jsx("input",{type:"radio",name:"role",className:"hidden",checked:D.employeeRole===_n.BUYER,onChange:()=>L({...D,employeeRole:_n.BUYER})}),t.jsx(qa,{className:`mb-2 ${D.employeeRole===_n.BUYER?"text-blue-600":"text-slate-400"}`,size:24}),t.jsx("span",{className:"font-bold text-sm",children:" (Buyer)"}),t.jsx("span",{className:"text-xs text-center opacity-70 mt-1 font-medium",children:"     (  )."})]})]})]}),t.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200 text-amber-800 text-sm flex gap-2",children:[t.jsx(Sa,{size:16,className:"shrink-0 mt-0.5"}),t.jsx("p",{children:"          ."})]}),t.jsx("button",{onClick:H,disabled:O,className:"w-full bg-brand-600 text-white font-bold py-3.5 rounded-xl mt-4 hover:bg-brand-700 disabled:opacity-50 transition-colors shadow-md",children:O?" ...":"   "})]})}),t.jsx(ds,{isOpen:!!w,onClose:()=>S(null),title:"   ",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mx-auto mb-4",children:t.jsx(es,{size:32})}),t.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"   "}),t.jsx("p",{className:"text-slate-500 mb-6",children:"         ."}),t.jsx("div",{className:"bg-slate-100 p-6 rounded-2xl border border-slate-200 mb-6",children:t.jsx("p",{className:"text-4xl font-mono font-black text-slate-800 tracking-widest",children:w})}),t.jsx("button",{onClick:()=>S(null),className:"w-full bg-slate-800 text-white font-bold py-3 rounded-xl hover:bg-slate-900",children:""})]})})]})},ode=["Changan","MG","Geely","Haval","Chery","GAC","BYD","Great Wall","Jetour","Hongqi","Jac","Omoda","Exeed","Wuling","Maxus"],u5={NEW:" ",UNDER_REVIEW:" ",WAITING_CUSTOMER_EXCEL:"   ",PRICING_IN_PROGRESS:"   ",PRICING_SENT:"   ",WAITING_CUSTOMER_APPROVAL:" ",APPROVED_BY_CUSTOMER:"  -  ",IN_FACTORY:"  / ",SHIPMENT_BOOKED:"  ",ON_THE_SEA:"  ",IN_PORT:" ",CUSTOMS_CLEARED:"  ",ON_THE_WAY:"  ",DELIVERED:" ",CANCELLED:""},cde=[{key:"NEW",label:" "},{key:"PRICING_SENT",label:""},{key:"APPROVED_BY_CUSTOMER",label:""},{key:"ON_THE_SEA",label:""},{key:"DELIVERED",label:""}],dde=({user:e,userProfile:s})=>{var B;const[a,r]=C.useState("LIST"),[n,i]=C.useState([]),[l,o]=C.useState(!0),[d,u]=C.useState(1),[h,f]=C.useState(!1),[x,p]=C.useState(!1),[v,b]=C.useState({businessName:(s==null?void 0:s.companyName)||e.name,branchesCount:((B=s==null?void 0:s.branches)==null?void 0:B.length)||1,targetCarBrands:[],hasImportedBefore:!1,serviceMode:"FULL_SERVICE",notes:""}),[y,j]=C.useState(""),{addToast:w}=It();C.useEffect(()=>{S()},[e.id]);const S=async()=>{o(!0);try{const T=(await he.getImportRequests()).filter(z=>z.customerId===e.id);i(T.reverse()),T.length===0&&r("NEW")}catch(I){console.error(I)}finally{o(!1)}},O=I=>{const T=v.targetCarBrands||[];T.includes(I)?b({...v,targetCarBrands:T.filter(z=>z!==I)}):b({...v,targetCarBrands:[...T,I]})},_=()=>{var I;if(d===1){if(!v.businessName||!v.branchesCount){w("     ","error");return}if((((I=v.targetCarBrands)==null?void 0:I.length)||0)===0){w("     ","error");return}}if(d===2&&v.hasImportedBefore&&!v.previousImportDetails){w("      ","error");return}u(T=>T+1),window.scrollTo(0,0)},E=async()=>{var I;f(!0);try{await he.createImportRequest({...v,customerId:e.id}),w("    ","success"),await S(),r("LIST"),u(1),b({businessName:(s==null?void 0:s.companyName)||e.name,branchesCount:((I=s==null?void 0:s.branches)==null?void 0:I.length)||1,targetCarBrands:[],hasImportedBefore:!1,serviceMode:"FULL_SERVICE",notes:""})}catch{w("   ","error")}finally{f(!1)}},A=async(I,T)=>{var k;const z=(k=I.target.files)==null?void 0:k[0];if(z){p(!0);try{await he.uploadImportRequestExcel(T,z.name,e.name),w("   ","success"),S()}catch{w(" ","error")}finally{p(!1)}}},D=async I=>{if(confirm("          "))try{await he.confirmImportRequestByCustomer(I,{customerName:e.name}),w("     ","success"),S()}catch{w(" ","error")}},L=({status:I})=>{const z=(k=>k==="NEW"||k==="UNDER_REVIEW"||k==="WAITING_CUSTOMER_EXCEL"?0:k.includes("PRICING")||k==="WAITING_CUSTOMER_APPROVAL"?1:k==="APPROVED_BY_CUSTOMER"||k==="IN_FACTORY"?2:k==="SHIPMENT_BOOKED"||k==="ON_THE_SEA"||k==="IN_PORT"||k==="CUSTOMS_CLEARED"||k==="ON_THE_WAY"?3:k==="DELIVERED"?4:0)(I);return t.jsx("div",{className:"w-full py-4",children:t.jsxs("div",{className:"flex items-center justify-between relative",children:[t.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-1 bg-slate-100 -z-10 rounded-full"}),cde.map((k,F)=>t.jsxs("div",{className:"flex flex-col items-center gap-2 bg-white px-2",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs border-2 transition-all ${F<=z?"bg-brand-600 text-white border-brand-600":"bg-white border-slate-300 text-slate-400"}`,children:F<z?t.jsx(es,{size:14}):F+1}),t.jsx("span",{className:`text-[10px] font-bold ${F<=z?"text-brand-700":"text-slate-400"}`,children:k.label})]},k.key))]})})};return a==="NEW"?t.jsxs("div",{className:"animate-fade-in pb-20",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:"  "}),n.length>0&&t.jsxs("button",{onClick:()=>r("LIST"),className:"text-slate-500 hover:text-slate-800 font-bold text-sm flex items-center gap-2",children:[t.jsx(sl,{size:16}),"  "]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-cyan-900 to-slate-900 rounded-3xl overflow-hidden shadow-xl text-white relative mb-10",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cartographer.png')] opacity-10"}),t.jsx("div",{className:"absolute right-0 top-0 w-1/3 h-full bg-gradient-to-l from-brand-600/30 to-transparent"}),t.jsxs("div",{className:"relative z-10 p-8 md:p-12 flex flex-col md:flex-row items-center gap-8",children:[t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-brand-500/20 backdrop-blur-md px-4 py-1.5 rounded-full border border-brand-400/30 text-brand-200 text-xs font-bold uppercase tracking-wider mb-2",children:[t.jsx(Ea,{size:14}),"   "]}),t.jsx("h1",{className:"text-3xl md:text-5xl font-black leading-tight",children:"   "}),t.jsx("p",{className:"text-slate-300 text-lg max-w-xl leading-relaxed",children:"                3     ."})]}),t.jsx("div",{className:"hidden md:block opacity-80",children:t.jsx(xre,{size:180,strokeWidth:.5,className:"text-white/20"})})]})]}),t.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-3xl shadow-sm border border-slate-200 p-8 md:p-10 min-h-[500px] flex flex-col",children:[d===1&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(ta,{className:"text-brand-600"}),"   "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  / "}),t.jsx("input",{type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold",value:v.businessName,onChange:I=>b({...v,businessName:I.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"number",min:1,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold",value:v.branchesCount,onChange:I=>b({...v,branchesCount:parseInt(I.target.value)||0})})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"  (   )"}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:ode.map(I=>{var T;return t.jsx("button",{onClick:()=>O(I),className:`px-4 py-2 rounded-lg text-sm font-bold border transition-all ${(T=v.targetCarBrands)!=null&&T.includes(I)?"bg-brand-600 text-white border-brand-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:I},I)})})]})]}),d===2&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(gn,{className:"text-brand-600"}),"  "]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-4",children:"      "}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md",children:[t.jsx("button",{onClick:()=>b({...v,hasImportedBefore:!0}),className:`p-6 rounded-2xl border-2 text-center transition-all ${v.hasImportedBefore?"border-brand-600 bg-brand-50 text-brand-800 shadow-md":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:t.jsx("span",{className:"font-bold text-lg",children:"  "})}),t.jsx("button",{onClick:()=>b({...v,hasImportedBefore:!1,previousImportDetails:""}),className:`p-6 rounded-2xl border-2 text-center transition-all ${v.hasImportedBefore?"border-slate-200 text-slate-500 hover:bg-slate-50":"border-brand-600 bg-brand-50 text-brand-800 shadow-md"}`,children:t.jsx("span",{className:"font-bold text-lg",children:"  "})})]})]}),v.hasImportedBefore&&t.jsxs("div",{className:"animate-slide-up",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"    "}),t.jsx("textarea",{rows:4,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl",placeholder:":     ...",value:v.previousImportDetails||"",onChange:I=>b({...v,previousImportDetails:I.target.value})})]})]}),d===3&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Mr,{className:"text-brand-600"}),"   "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[t.jsxs("button",{onClick:()=>b({...v,serviceMode:"FULL_SERVICE"}),className:`p-6 rounded-2xl border-2 text-right transition-all group ${v.serviceMode==="FULL_SERVICE"?"border-brand-600 bg-brand-50 shadow-md":"border-slate-200 hover:border-slate-300"}`,children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"  (Full Service)"}),t.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"           ."})]}),t.jsxs("button",{onClick:()=>b({...v,serviceMode:"GOODS_ONLY"}),className:`p-6 rounded-2xl border-2 text-right transition-all group ${v.serviceMode==="GOODS_ONLY"?"border-brand-600 bg-brand-50 shadow-md":"border-slate-200 hover:border-slate-300"}`,children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"  (EXW/FOB)"}),t.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"           ."})]})]})]}),d===4&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(zt,{className:"text-brand-600"}),"  "]}),t.jsx("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 mb-8 space-y-4 text-sm",children:t.jsx("p",{className:"font-bold",children:"     ."})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("textarea",{rows:3,className:"w-full p-4 bg-white border border-slate-300 rounded-xl",placeholder:"    ...",value:v.notes||"",onChange:I=>b({...v,notes:I.target.value})})]})]}),t.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-slate-100",children:[d>1?t.jsxs("button",{onClick:()=>u(d-1),className:"text-slate-500 font-bold hover:text-slate-800 flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-slate-50",children:[t.jsx(sl,{size:18})," "]}):t.jsx("div",{}),d<4?t.jsxs("button",{onClick:_,className:"bg-brand-600 text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-brand-700 shadow-lg shadow-brand-200 transition-all",children:[" ",t.jsx(yf,{size:18})]}):t.jsxs("button",{onClick:E,disabled:h,className:"bg-green-600 text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-green-700 shadow-lg shadow-green-200 transition-all",children:[h?" ...":"  "," ",t.jsx(Un,{size:18})]})]})]})]}):t.jsxs("div",{className:"animate-fade-in pb-20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-2",children:" "}),t.jsx("p",{className:"text-slate-500 font-medium",children:"      ."})]}),t.jsxs("button",{onClick:()=>r("NEW"),className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 shadow-lg",children:[t.jsx(Ea,{size:18}),"  "]})]}),l?t.jsx("div",{className:"text-center py-20",children:" ..."}):t.jsx("div",{className:"space-y-8",children:n.map(I=>t.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"p-6 md:p-8 border-b border-slate-100 flex flex-col md:flex-row justify-between gap-6 bg-slate-50/50",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsxs("span",{className:"font-mono text-lg font-bold text-brand-700",children:["#",I.id]}),t.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full border bg-white ${I.status==="CANCELLED"?"border-red-200 text-red-600":I.status==="DELIVERED"?"border-green-200 text-green-600":"border-blue-200 text-blue-600"}`,children:u5[I.status]||I.status})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",ms(I.createdAt)]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[I.status==="WAITING_CUSTOMER_EXCEL"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"file",id:`file-${I.id}`,className:"hidden",accept:".xlsx,.xls",onChange:T=>A(T,I.id)}),t.jsxs("label",{htmlFor:`file-${I.id}`,className:`cursor-pointer bg-brand-600 text-white px-6 py-3 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 shadow-lg shadow-brand-200 ${x?"opacity-50 pointer-events-none":""}`,children:[t.jsx(va,{size:18})," ",x?" ...":"   (Excel)"]})]}),(I.status==="PRICING_SENT"||I.status==="WAITING_CUSTOMER_APPROVAL")&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"bg-white border border-slate-200 text-slate-700 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-50",children:[t.jsx(tr,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>D(I.id),className:"bg-green-600 text-white px-6 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-green-700 shadow-lg shadow-green-200",children:[t.jsx(Un,{size:18}),"  "]})]})]})]}),t.jsxs("div",{className:"p-6 md:p-8",children:[t.jsx(L,{status:I.status}),t.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-100 text-sm space-y-3",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[t.jsx(zt,{size:16}),"  "]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:" "}),t.jsx("span",{className:"font-bold",children:I.serviceMode==="FULL_SERVICE"?" ":" "})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:""}),t.jsx("span",{className:"font-bold",children:I.targetCarBrands.join(", ")})]}),I.pricingTotalAmount&&t.jsxs("div",{className:"flex justify-between border-t border-slate-200 pt-2 mt-2",children:[t.jsx("span",{className:"text-slate-500",children:" "}),t.jsxs("span",{className:"font-black text-brand-600 text-lg",children:[I.pricingTotalAmount," ."]})]})]}),t.jsxs("div",{className:"border-r-2 border-slate-100 pr-6 mr-2 relative",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(gn,{size:16}),"  "]}),t.jsx("div",{className:"space-y-6",children:(I.timeline||[]).slice().reverse().slice(0,3).map((T,z)=>t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute -right-[31px] top-1 w-3 h-3 rounded-full bg-slate-300 border-2 border-white"}),t.jsx("p",{className:"text-xs font-bold text-slate-800",children:u5[T.status]||T.status}),t.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:ms(T.changedAt)}),T.note&&t.jsx("p",{className:"text-xs text-slate-600 mt-1 bg-slate-50 p-2 rounded",children:T.note})]},z))})]})]})]})]},I.id))})]})};function ude(e){return e?e.toLowerCase().trim().replace(/[]/g,"").replace(//g,"").replace(//g,"").replace(/[\u064B-\u065F]/g,"").replace(/[]/g,"").replace(//g,"").replace(/[^\w\s\u0600-\u06FF]/g," "):""}function m5(e){return ude(e).split(/\s+/).filter(a=>a.length>=2)}function mde(e,s){const a=[];for(let r=0;r<=s.length;r++)a[r]=[r];for(let r=0;r<=e.length;r++)a[0][r]=r;for(let r=1;r<=s.length;r++)for(let n=1;n<=e.length;n++)s.charAt(r-1)===e.charAt(n-1)?a[r][n]=a[r-1][n-1]:a[r][n]=Math.min(a[r-1][n-1]+1,Math.min(a[r][n-1]+1,a[r-1][n]+1));return a[s.length][e.length]}function fde(e,s){const a=m5(e),r=m5(s);let n=0;for(const i of a){let l=0;for(const o of r){let d=0;if(i===o)d=3;else if(o.includes(i))d=2;else{const u=mde(i,o),h=Math.floor(i.length/3)+1;(u<=1||i.length>4&&u<=h)&&(d=1)}d>l&&(l=d)}n+=l}return n}function hde(e,s){if(!e.trim())return[];const a=/[0-9-]/.test(e);let r="",n="";return a&&(r=Zi(e),n=rf(e)),s.map(l=>{let o=0;if(a&&r.length>2){const u=l.normalizedPart||Zi(l.partNumber),h=l.numericPartCore||rf(l.partNumber);u===r?o+=15:h===n&&h.length>3?o+=10:h.includes(n)||n.includes(h)?n.length>4?o+=6:n.length>2&&(o+=3):u.includes(r)&&(o+=4)}const d=[l.name,l.brand,l.category||"",l.description||""].join(" ");return o+=fde(e,d),{product:l,score:o}}).filter(l=>l.score>=3).sort((l,o)=>o.score-l.score).map(l=>l.product)}const xde=()=>{const[e,s]=C.useState(!1),[a,r]=C.useState(!1);C.useEffect(()=>{localStorage.getItem("siniCar_hasSeenUsageIntro")||setTimeout(()=>s(!0),1500)},[]);const n=()=>{s(!1),a&&localStorage.setItem("siniCar_hasSeenUsageIntro","true")};return t.jsx(ds,{isOpen:e,onClose:n,title:"    ",maxWidth:"max-w-2xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-brand-50 p-4 rounded-xl border border-brand-100 flex items-start gap-3",children:[t.jsx(mi,{className:"text-brand-600 shrink-0 mt-1"}),t.jsx("p",{className:"text-brand-800 text-sm leading-relaxed font-medium",children:"     .           .       :"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 shrink-0",children:t.jsx(Lt,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:" "}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"        (: 218102K700)."})]})]}),t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600 shrink-0",children:t.jsx(qa,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:" "}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         ."})]})]}),t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 shrink-0",children:t.jsx(zt,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"  (Bulk)"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  Excel        ."})]})]}),t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-600 shrink-0",children:t.jsx(Ea,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:" "}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         ."})]})]})]}),t.jsxs("div",{className:"border-t border-slate-100 pt-4 mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Wt,{size:16,className:"text-slate-400"}),t.jsx("span",{className:"text-xs text-slate-500",children:':         " ".'})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm text-slate-600",children:[t.jsx("input",{type:"checkbox",className:"rounded text-brand-600 focus:ring-brand-500",checked:a,onChange:i=>r(i.target.checked)}),"     "]}),t.jsxs("button",{onClick:n,className:"bg-brand-600 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-brand-700 flex items-center gap-2 shadow-md w-full sm:w-auto justify-center",children:["   ",t.jsx(Mt,{size:18})]})]})]})]})})},pde=e=>{switch(e){case"ACCOUNT_APPROVED":case"ACCOUNT_REJECTED":case"NEW_ACCOUNT_REQUEST":case"ACCOUNT_UPDATE":return nn;case"ORDER_STATUS_CHANGED":case"CUSTOMER_ORDER":return Yt;case"NEW_PURCHASE_REQUEST":case"NEW_QUOTE_REQUEST":case"NEW_IMPORT_REQUEST":case"QUOTE_PROCESSED":return zt;case"SEARCH_POINTS_ADDED":return ab;case"ABANDONED_CART_ALERT":return qa;default:return Nr}},gde=e=>{switch(e){case"ACCOUNT_APPROVED":return"bg-green-100 text-green-700 border-green-200";case"ACCOUNT_REJECTED":return"bg-red-100 text-red-700 border-red-200";case"ORDER_STATUS_CHANGED":return"bg-blue-100 text-blue-700 border-blue-200";case"NEW_PURCHASE_REQUEST":case"NEW_ACCOUNT_REQUEST":return"bg-amber-100 text-amber-700 border-amber-200";case"SEARCH_POINTS_ADDED":return"bg-purple-100 text-purple-700 border-purple-200";case"SYSTEM":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},bde=(e,s)=>{var r;return((r={ORDER_STATUS_CHANGED:{ar:" ",en:"Order Update"},SEARCH_POINTS_ADDED:{ar:" ",en:"Search Points"},QUOTE_PROCESSED:{ar:" ",en:"Quote"},GENERAL:{ar:"",en:"General"},ACCOUNT_UPDATE:{ar:" ",en:"Account Update"},IMPORT_UPDATE:{ar:" ",en:"Import Update"},SYSTEM:{ar:"",en:"System"},MARKETING:{ar:"",en:"Marketing"},ACCOUNT_APPROVED:{ar:" ",en:"Account Approved"},ACCOUNT_REJECTED:{ar:" ",en:"Account Rejected"},NEW_PURCHASE_REQUEST:{ar:" ",en:"Purchase Request"},NEW_MESSAGE:{ar:" ",en:"New Message"},NEW_CUSTOMER_REGISTERED:{ar:" ",en:"New Customer"},CUSTOMER_ORDER:{ar:" ",en:"Customer Order"},SUPPLIER_REQUEST_ASSIGNED:{ar:" ",en:"Supplier Request"},NEW_ACCOUNT_REQUEST:{ar:" ",en:"Account Request"},NEW_QUOTE_REQUEST:{ar:"  ",en:"Quote Request"},NEW_IMPORT_REQUEST:{ar:" ",en:"Import Request"},ABANDONED_CART_ALERT:{ar:" ",en:"Abandoned Cart"}}[e])==null?void 0:r[s?"ar":"en"])||e},vde=(e,s)=>{const a=new Date(e),n=new Date().getTime()-a.getTime(),i=Math.floor(n/6e4),l=Math.floor(i/60),o=Math.floor(l/24);if(s){if(i<1)return"";if(i<60)return` ${i} `;if(l<24)return` ${l} `;if(o<7)return` ${o} `}else{if(i<1)return"Just now";if(i<60)return`${i} min ago`;if(l<24)return`${l} hr ago`;if(o<7)return`${o} days ago`}return a.toLocaleDateString(s?"ar-SA":"en-US")},uE=({user:e,onBack:s})=>{const{t:a}=Kt(),{language:r}=Hs(),n=r==="ar",[i,l]=C.useState([]),[o,d]=C.useState(0),[u,h]=C.useState(0),[f,x]=C.useState(!1),[p,v]=C.useState("all"),[b,y]=C.useState("all"),[j,w]=C.useState(1),S=20,O=[{value:"all",types:[],ar:"",en:"All"},{value:"orders",types:["ORDER_STATUS_CHANGED","CUSTOMER_ORDER"],ar:"",en:"Orders"},{value:"account",types:["ACCOUNT_APPROVED","ACCOUNT_REJECTED","ACCOUNT_UPDATE","NEW_ACCOUNT_REQUEST","NEW_CUSTOMER_REGISTERED"],ar:"",en:"Account"},{value:"requests",types:["NEW_PURCHASE_REQUEST","NEW_QUOTE_REQUEST","NEW_IMPORT_REQUEST","SUPPLIER_REQUEST_ASSIGNED"],ar:" ",en:"Requests"},{value:"quotes",types:["QUOTE_PROCESSED","NEW_QUOTE_REQUEST"],ar:" ",en:"Quotes"},{value:"points",types:["SEARCH_POINTS_ADDED"],ar:"",en:"Points"},{value:"system",types:["SYSTEM","GENERAL","MARKETING","ABANDONED_CART_ALERT","NEW_MESSAGE","IMPORT_UPDATE"],ar:"",en:"System"}],_=T=>{const z=O.find(k=>k.value===T);return z&&z.types.length>0?z.types:void 0},E=C.useCallback(async()=>{if(e!=null&&e.id){x(!0);try{const T=_(b),z=await he.getNotificationsForUser(e.id,{isRead:p==="unread"?!1:void 0,types:T,limit:S,page:j});l(z.items),d(z.unreadCount),h(z.total)}catch(T){console.error("Failed to fetch notifications:",T)}finally{x(!1)}}},[e==null?void 0:e.id,p,b,j]);C.useEffect(()=>{E()},[E]);const A=async T=>{try{await he.markNotificationAsRead(e.id,T),l(z=>z.map(k=>k.id===T?{...k,isRead:!0,readAt:new Date().toISOString()}:k)),d(z=>Math.max(0,z-1))}catch(z){console.error("Failed to mark notification as read:",z)}},D=async()=>{x(!0);try{await he.markAllNotificationsAsRead(e.id),l(T=>T.map(z=>({...z,isRead:!0,readAt:new Date().toISOString()}))),d(0)}catch(T){console.error("Failed to mark all as read:",T)}finally{x(!1)}},L=async T=>{try{await he.deleteNotification(e.id,T),l(z=>z.filter(k=>k.id!==T)),h(z=>z-1)}catch(z){console.error("Failed to delete notification:",z)}},B=async()=>{x(!0);try{await he.clearNotificationsForUser(e.id),l([]),d(0),h(0)}catch(T){console.error("Failed to clear notifications:",T)}finally{x(!1)}},I=Math.ceil(u/S);return t.jsxs("div",{className:`p-4 md:p-6 space-y-4 ${n?"rtl":"ltr"}`,dir:n?"rtl":"ltr",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-brand-100 rounded-xl",children:t.jsx(Nr,{className:"h-6 w-6 text-brand-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-800",children:n?"":"Notifications"}),t.jsx("p",{className:"text-sm text-slate-500",children:n?`${o}     ${u}`:`${o} unread of ${u} total`})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsxs("button",{onClick:E,disabled:f,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 transition-colors","data-testid":"button-refresh-notifications",children:[t.jsx(Gt,{className:`h-4 w-4 ${f?"animate-spin":""}`}),n?"":"Refresh"]}),o>0&&t.jsxs("button",{onClick:D,disabled:f,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 transition-colors","data-testid":"button-mark-all-read",children:[t.jsx(ese,{className:"h-4 w-4"}),n?"  ":"Mark all read"]}),i.length>0&&t.jsxs("button",{onClick:B,disabled:f,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 disabled:opacity-50 transition-colors","data-testid":"button-clear-all",children:[t.jsx(At,{className:"h-4 w-4"}),n?" ":"Clear all"]})]})]}),t.jsxs("div",{className:"flex border-b border-slate-200",children:[t.jsxs("button",{onClick:()=>{v("all"),w(1)},className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${p==="all"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-all",children:[n?"":"All",t.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-slate-100 text-slate-600 rounded-full",children:u})]}),t.jsxs("button",{onClick:()=>{v("unread"),w(1)},className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${p==="unread"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-unread",children:[n?" ":"Unread",o>0&&t.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-red-500 text-white rounded-full",children:o})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-3",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:n?"  :":"Filter by type:"}),O.map(T=>t.jsx("button",{onClick:()=>{y(T.value),w(1)},className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${b===T.value?"bg-brand-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`filter-type-${T.value}`,children:n?T.ar:T.en},T.value))]}),t.jsx("div",{className:"mt-4",children:f?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Gt,{className:"h-8 w-8 mx-auto animate-spin text-slate-400"}),t.jsx("p",{className:"mt-2 text-slate-500",children:n?" ...":"Loading..."})]}):i.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 py-12 text-center",children:[t.jsx(Nr,{className:"h-12 w-12 mx-auto text-slate-300"}),t.jsx("h3",{className:"mt-4 text-lg font-medium text-slate-600",children:n?"  ":"No notifications"}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:n?"   ":"New notifications will appear here"})]}):t.jsxs("div",{className:"space-y-2",children:[i.map(T=>{const z=pde(T.type),k=gde(T.type);return t.jsx("div",{className:`bg-white rounded-xl border p-4 transition-all hover:shadow-md ${T.isRead?"border-slate-200":"border-brand-200 bg-brand-50/30"}`,"data-testid":`notification-card-${T.id}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${k}`,children:t.jsx(z,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:`font-medium text-slate-800 ${T.isRead?"":"font-semibold"}`,children:T.title}),t.jsx("span",{className:"px-2 py-0.5 text-xs bg-slate-100 text-slate-600 rounded border border-slate-200",children:bde(T.type,n)}),!T.isRead&&t.jsx("div",{className:"h-2 w-2 bg-brand-600 rounded-full"})]}),t.jsx("p",{className:"text-sm text-slate-600 mt-1",children:T.message}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(is,{className:"h-3 w-3"}),vde(T.createdAt,n)]}),T.relatedType&&T.relatedId&&t.jsx("div",{className:"flex items-center gap-1",children:t.jsxs("span",{className:"bg-slate-100 px-2 py-0.5 rounded",children:[T.relatedType,": ",T.relatedId]})})]})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!T.isRead&&t.jsx("button",{onClick:()=>A(T.id),title:n?" ":"Mark as read",className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors","data-testid":`button-mark-read-${T.id}`,children:t.jsx(es,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>L(T.id),title:n?"":"Delete",className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-${T.id}`,children:t.jsx(At,{className:"h-4 w-4"})})]})]})},T.id)}),I>1&&t.jsxs("div",{className:"flex items-center justify-center gap-2 pt-4",children:[t.jsxs("button",{disabled:j===1,onClick:()=>w(T=>Math.max(1,T-1)),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-prev-page",children:[t.jsx(hs,{className:"h-4 w-4"}),n?"":"Previous"]}),t.jsx("span",{className:"text-sm text-slate-500 px-3",children:n?` ${j}  ${I}`:`Page ${j} of ${I}`}),t.jsxs("button",{disabled:j===I,onClick:()=>w(T=>Math.min(I,T+1)),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-next-page",children:[n?"":"Next",t.jsx(Ns,{className:"h-4 w-4"})]})]})]})})]})},El=(e,s)=>{if(!e)return"";const a=s.split("-")[0];return e[a]||e.ar||e.en||""},yde=e=>({search:t.jsx(Lt,{className:"w-6 h-6"}),"file-text":t.jsx(zt,{className:"w-6 h-6"}),package:t.jsx(Yt,{className:"w-6 h-6"}),truck:t.jsx(fr,{className:"w-6 h-6"}),settings:t.jsx(aa,{className:"w-6 h-6"}),"trending-up":t.jsx(gi,{className:"w-6 h-6"}),wrench:t.jsx(ac,{className:"w-6 h-6"}),"file-search":t.jsx(rb,{className:"w-6 h-6"}),globe:t.jsx(Ea,{className:"w-6 h-6"}),shield:t.jsx(Bs,{className:"w-6 h-6"}),star:t.jsx(bn,{className:"w-6 h-6"}),"check-circle":t.jsx(Mt,{className:"w-6 h-6"}),zap:t.jsx(rl,{className:"w-6 h-6"}),"message-square":t.jsx(Rr,{className:"w-6 h-6"}),phone:t.jsx(Yr,{className:"w-6 h-6"}),"help-circle":t.jsx(h0,{className:"w-6 h-6"}),car:t.jsx(Mi,{className:"w-6 h-6"}),"shopping-bag":t.jsx(Bu,{className:"w-6 h-6"}),users:t.jsx(Wt,{className:"w-6 h-6"}),"bar-chart":t.jsx(Dr,{className:"w-6 h-6"}),"clipboard-list":t.jsx(yp,{className:"w-6 h-6"}),"refresh-cw":t.jsx(Gt,{className:"w-6 h-6"})})[e]||t.jsx(Yt,{className:"w-6 h-6"}),Nde=({user:e,profile:s,onNavigate:a,isRTL:r})=>{var B,I,T,z,k;const{t:n,i18n:i}=Kt(),l=i.language,[o,d]=C.useState(null),[u,h]=C.useState(null),[f,x]=C.useState(0),[p,v]=C.useState(!0),[b,y]=C.useState(!1),j=F=>{if(!(F!=null&&F.businessCustomerType))return"DEFAULT";switch(F.businessCustomerType){case"PARTS_SHOP":return"PARTS_SHOP";case"RENTAL_COMPANY":return"RENTAL";case"INSURANCE_COMPANY":return"INSURANCE";case"SALES_AGENT":return"MARKETER";case"FLEET_CUSTOMER":return"RENTAL";default:return"DEFAULT"}};C.useEffect(()=>{(async()=>{v(!0);try{const P=j(s),[G,Y]=await Promise.all([he.getHomepageConfig(P),he.getHomepageStats(e.id)]);d(G),h(Y)}catch(P){console.error("Error loading homepage data:",P)}finally{v(!1)}})()},[e.id,s]);const w=(o==null?void 0:o.bannersConfig.banners.filter(F=>F.isActive))||[],S=C.useCallback(()=>{w.length>1&&!b&&(y(!0),setTimeout(()=>{x(F=>(F+1)%w.length),y(!1)},300))},[w.length,b]),O=C.useCallback(()=>{w.length>1&&!b&&(y(!0),setTimeout(()=>{x(F=>(F-1+w.length)%w.length),y(!1)},300))},[w.length,b]);C.useEffect(()=>{if(!(o!=null&&o.bannersConfig.autoPlayInterval)||w.length<=1)return;const F=setInterval(()=>{S()},o.bannersConfig.autoPlayInterval);return()=>clearInterval(F)},[o==null?void 0:o.bannersConfig.autoPlayInterval,w.length,S]);const _=F=>{if(!F)return;if(F.startsWith("http://")||F.startsWith("https://")){window.open(F,"_blank","noopener,noreferrer");return}["HOME","PRODUCT_SEARCH","ORDERS","QUOTE_REQUEST","IMPORT_CHINA","TRADER_TOOLS","ALTERNATIVES","ORGANIZATION","TEAM_MANAGEMENT","ABOUT","NOTIFICATIONS","HISTORY"].includes(F)?a(F):a("PRODUCT_SEARCH")};if(p)return t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});if(!o)return t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-slate-500",children:n("common.error")})});const{layoutConfig:E,bannersConfig:A,shortcutsConfig:D}=o,L=(D==null?void 0:D.shortcuts)||[];return t.jsxs("div",{className:"flex flex-col gap-8 pb-8 animate-fade-in",children:[t.jsxs("section",{className:"relative w-full rounded-3xl overflow-hidden shadow-2xl animate-slide-up",style:{background:E.heroBackgroundGradient||"linear-gradient(135deg, #081a33 0%, #102b57 100%)"},children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[t.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-orange-500/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-blue-600/5 rounded-full blur-3xl"})]}),t.jsxs("div",{className:"relative z-10 px-6 py-12 md:px-12 md:py-16 lg:py-20",children:[t.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full mb-6 border border-white/20",children:[t.jsx(pi,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-white/90 text-sm font-medium",children:n("homepage.welcomeBack",{name:e.name})})]}),t.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-extrabold text-white mb-4 leading-tight",children:El(E.heroTitle,l)}),t.jsx("p",{className:"text-slate-200 text-lg md:text-xl font-medium max-w-2xl mx-auto mb-8",children:El(E.heroSubtitle,l)}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[E.primaryCtaLink&&t.jsxs("button",{onClick:()=>_(E.primaryCtaLink),className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white text-lg px-8 py-4 rounded-xl shadow-lg shadow-blue-600/30 font-bold transition-all hover:scale-105 active:scale-95","data-testid":"button-primary-cta",children:[t.jsx(Lt,{className:"w-5 h-5"}),El(E.primaryCtaLabel,l),r?t.jsx(yf,{className:"w-4 h-4"}):t.jsx(sl,{className:"w-4 h-4"})]}),E.secondaryCtaLink&&t.jsxs("button",{onClick:()=>_(E.secondaryCtaLink),className:"inline-flex items-center gap-2 border-2 border-white/30 text-white hover:bg-white/10 text-lg px-8 py-4 rounded-xl backdrop-blur-sm font-bold transition-all hover:scale-105 active:scale-95","data-testid":"button-secondary-cta",children:[t.jsx(zt,{className:"w-5 h-5"}),El(E.secondaryCtaLabel,l)]})]})]}),u&&t.jsxs("div",{className:"flex justify-center gap-8 mt-12",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white",children:u.totalOrders}),t.jsx("div",{className:"text-slate-300 text-sm",children:n("homepage.totalOrders")})]}),t.jsx("div",{className:"w-px bg-white/20"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white",children:u.pendingRequests}),t.jsx("div",{className:"text-slate-300 text-sm",children:n("homepage.pendingRequests")})]}),t.jsx("div",{className:"w-px bg-white/20 hidden md:block"}),t.jsxs("div",{className:"text-center hidden md:block",children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-emerald-400",children:u.approvedOrders}),t.jsx("div",{className:"text-slate-300 text-sm",children:n("homepage.approvedOrders")})]})]})]})]}),w.length>0&&t.jsx("section",{className:"relative animate-slide-up",style:{animationDelay:"0.1s"},children:t.jsxs("div",{className:"relative h-48 md:h-64 rounded-2xl overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 rounded-2xl overflow-hidden transition-opacity duration-300 ${b?"opacity-0":"opacity-100"}`,style:{background:(B=w[f])==null?void 0:B.backgroundColor},children:t.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-8 md:px-16",children:[t.jsxs("div",{className:"max-w-lg",children:[t.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:El((I=w[f])==null?void 0:I.title,l)}),t.jsx("p",{className:"text-white/80 text-sm md:text-base mb-4",children:El((T=w[f])==null?void 0:T.subtitle,l)}),t.jsxs("button",{onClick:()=>{var F;return _(((F=w[f])==null?void 0:F.ctaLink)||"HOME")},className:`inline-flex items-center gap-2 px-6 py-2 rounded-lg font-semibold transition-all hover:scale-105 ${((z=w[f])==null?void 0:z.ctaVariant)==="outline"?"border-2 border-white/50 text-white hover:bg-white/10":"bg-white text-slate-900 hover:bg-white/90"}`,"data-testid":`button-banner-cta-${f}`,children:[El((k=w[f])==null?void 0:k.ctaLabel,l),r?t.jsx(yf,{className:"w-4 h-4"}):t.jsx(sl,{className:"w-4 h-4"})]})]}),t.jsx("div",{className:"hidden md:block",children:t.jsx("div",{className:"w-32 h-32 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm",children:t.jsx(Yt,{className:"w-16 h-16 text-white/80"})})})]})}),w.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:O,className:`absolute top-1/2 -translate-y-1/2 ${r?"right-4":"left-4"} w-10 h-10 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center transition-all`,"data-testid":"button-banner-prev",children:r?t.jsx(hs,{className:"w-5 h-5 text-white"}):t.jsx(Ns,{className:"w-5 h-5 text-white"})}),t.jsx("button",{onClick:S,className:`absolute top-1/2 -translate-y-1/2 ${r?"left-4":"right-4"} w-10 h-10 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center transition-all`,"data-testid":"button-banner-next",children:r?t.jsx(Ns,{className:"w-5 h-5 text-white"}):t.jsx(hs,{className:"w-5 h-5 text-white"})})]}),w.length>1&&t.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:w.map((F,P)=>t.jsx("button",{onClick:()=>{b||(y(!0),setTimeout(()=>{x(P),y(!1)},300))},className:`w-2 h-2 rounded-full transition-all ${P===f?"bg-white w-6":"bg-white/50 hover:bg-white/70"}`,"data-testid":`button-banner-dot-${P}`},P))})]})}),L&&L.length>0&&t.jsxs("section",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:[t.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 dark:text-white mb-6",children:n("homepage.quickActions")}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:L.map((F,P)=>t.jsxs("button",{onClick:()=>_(F.link),className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all hover:-translate-y-1",style:{animationDelay:`${.3+P*.05}s`},"data-testid":`button-shortcut-${F.id}`,children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 ${F.colorClass||"bg-blue-600"} text-white`,children:yde(F.icon)}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm md:text-base mb-1",children:El(F.title,l)}),t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs md:text-sm line-clamp-2",children:El(F.description,l)}),t.jsx(Ll,{className:"absolute top-4 right-4 w-4 h-4 text-slate-300 dark:text-slate-600 group-hover:text-blue-500 transition-colors"})]},F.id))})]}),t.jsx("section",{className:"animate-slide-up",style:{animationDelay:"0.3s"},children:t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center mb-4",children:t.jsx(fr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.fastShipping")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:n("homepage.fastShippingDesc")})]}),t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 rounded-2xl p-6 border border-emerald-200 dark:border-emerald-800",children:[t.jsx("div",{className:"w-12 h-12 bg-emerald-600 rounded-xl flex items-center justify-center mb-4",children:t.jsx(Mt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.qualityGuarantee")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:n("homepage.qualityGuaranteeDesc")})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-2xl p-6 border border-purple-200 dark:border-purple-800",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mb-4",children:t.jsx(Nf,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.support")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:n("homepage.supportDesc")})]})]})}),t.jsx("section",{className:"animate-slide-up",style:{animationDelay:"0.4s"},children:t.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-2xl p-8 text-center",children:[t.jsx(h0,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.needHelp")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6 max-w-md mx-auto",children:n("homepage.needHelpDesc")}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[t.jsxs("a",{href:"tel:+966123456789",className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors","data-testid":"link-call-support",children:[t.jsx(Yr,{className:"w-5 h-5"}),n("homepage.callUs")]}),t.jsxs("a",{href:"https://wa.me/966123456789",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors","data-testid":"link-whatsapp",children:[t.jsx(Rr,{className:"w-5 h-5"}),n("homepage.whatsapp")]})]})]})})]})},jde=C.memo(({userId:e,customerType:s})=>{const{t:a,isRTL:r}=Hs(),[n,i]=C.useState([]),[l,o]=C.useState(0),[d,u]=C.useState(new Set);C.useEffect(()=>{(async()=>{const w=(await he.getActiveCampaignsForUser(e,s)).filter(S=>S.displayType==="BANNER").sort((S,O)=>O.priority-S.priority);i(w)})()},[e,s]);const h=async y=>{await he.dismissCampaignForUser(e,y),u(j=>{const w=new Set([...j,y]),S=n.filter(O=>!w.has(O.id)).length;return S>0&&l>=S&&o(0),w})},f=n.filter(y=>!d.has(y.id));if(f.length===0)return null;const x=f.length>0?l%f.length:0,p=f[x];if(!p)return null;const v=()=>{o(y=>(y+1)%f.length)},b=()=>{o(y=>(y-1+f.length)%f.length)};return t.jsx("div",{className:"relative bg-gradient-to-r from-brand-600 via-brand-500 to-purple-600 text-white px-4 py-3 shadow-md","data-testid":"marketing-banner",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:t.jsx(ja,{size:16,className:"text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-bold text-sm truncate","data-testid":"text-campaign-title",children:p.title}),t.jsx("p",{className:"text-xs text-white/80 truncate","data-testid":"text-campaign-message",children:p.message})]})]}),t.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[p.ctaUrl&&p.ctaLabel&&t.jsxs("a",{href:p.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-white text-brand-600 rounded-lg text-xs font-bold hover:bg-white/90 transition-colors flex items-center gap-1","data-testid":"link-campaign-cta",children:[p.ctaLabel,t.jsx(Ll,{size:12})]}),f.length>1&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:b,className:"p-1 hover:bg-white/20 rounded transition-colors","data-testid":"button-banner-prev",children:r?t.jsx(hs,{size:16}):t.jsx(Ns,{size:16})}),t.jsxs("span",{className:"text-xs text-white/70 min-w-[2rem] text-center",children:[x+1,"/",f.length]}),t.jsx("button",{onClick:v,className:"p-1 hover:bg-white/20 rounded transition-colors","data-testid":"button-banner-next",children:r?t.jsx(Ns,{size:16}):t.jsx(hs,{size:16})})]}),p.skippable&&t.jsx("button",{onClick:()=>h(p.id),className:"p-1.5 hover:bg-white/20 rounded-full transition-colors",title:a("marketing.dismiss",""),"data-testid":"button-dismiss-banner",children:t.jsx(vt,{size:16})})]})]})})}),wde=C.memo(({userId:e,customerType:s,onClose:a})=>{const{t:r,isRTL:n}=Hs(),[i,l]=C.useState([]),[o,d]=C.useState(0),[u,h]=C.useState(!1);C.useEffect(()=>{(async()=>{const y=(await he.getActiveCampaignsForUser(e,s)).filter(j=>j.displayType==="POPUP").sort((j,w)=>w.priority-j.priority);y.length>0&&(l(y),setTimeout(()=>h(!0),500))})()},[e,s]);const f=async()=>{const v=i[o];v&&await he.dismissCampaignForUser(e,v.id),o<i.length-1?d(b=>b+1):(h(!1),setTimeout(()=>{a==null||a()},300))},x=()=>{h(!1),i.forEach(v=>{he.dismissCampaignForUser(e,v.id)}),setTimeout(()=>{a==null||a()},300)};if(i.length===0||!u)return null;const p=i[o];return p?t.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${u?"opacity-100":"opacity-0 pointer-events-none"}`,"data-testid":"marketing-popup",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:p.skippable?x:void 0}),t.jsxs("div",{className:`relative bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden transform transition-all duration-300 ${u?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,dir:n?"rtl":"ltr",children:[t.jsx("div",{className:"bg-gradient-to-r from-brand-600 via-brand-500 to-purple-600 p-6",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:t.jsx(ja,{size:24,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white","data-testid":"text-popup-title",children:p.title}),i.length>1&&t.jsx("p",{className:"text-xs text-white/70",children:r("marketing.campaignOf"," {{current}}  {{total}}").replace("{{current}}",String(o+1)).replace("{{total}}",String(i.length))})]})]}),p.skippable&&t.jsx("button",{onClick:x,className:"p-2 hover:bg-white/20 rounded-full transition-colors text-white/70 hover:text-white","data-testid":"button-close-popup",children:t.jsx(vt,{size:20})})]})}),t.jsxs("div",{className:"p-6",children:[p.contentType==="IMAGE"&&p.mediaUrl&&t.jsx("div",{className:"mb-4 rounded-xl overflow-hidden",children:t.jsx("img",{src:p.mediaUrl,alt:p.title,className:"w-full h-48 object-cover"})}),p.contentType==="VIDEO"&&p.mediaUrl&&t.jsx("div",{className:"mb-4 rounded-xl overflow-hidden",children:t.jsx("video",{src:p.mediaUrl,controls:!0,className:"w-full"})}),p.contentType==="HTML"&&p.htmlContent&&t.jsx("div",{className:"mb-4 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:p.htmlContent}}),t.jsx("p",{className:"text-slate-600 text-sm leading-relaxed","data-testid":"text-popup-message",children:p.message})]}),t.jsxs("div",{className:"px-6 pb-6 flex items-center justify-between gap-3",children:[p.ctaUrl&&p.ctaLabel&&t.jsxs("a",{href:p.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-gradient-to-r from-brand-600 to-brand-500 text-white rounded-xl font-bold text-center hover:shadow-lg hover:shadow-brand-500/30 transition-all flex items-center justify-center gap-2","data-testid":"link-popup-cta",children:[p.ctaLabel,t.jsx(Ll,{size:16})]}),t.jsx("button",{onClick:f,className:`px-4 py-3 rounded-xl font-medium transition-all ${p.ctaUrl?"bg-slate-100 text-slate-600 hover:bg-slate-200":"flex-1 bg-gradient-to-r from-brand-600 to-brand-500 text-white hover:shadow-lg"}`,"data-testid":"button-dismiss-popup",children:o<i.length-1?r("marketing.next",""):r("marketing.understood","")})]})]})]}):null});C.memo(({userId:e,customerType:s})=>{const{t:a,isRTL:r}=Hs(),[n,i]=C.useState([]),[l,o]=C.useState(new Set);C.useEffect(()=>{(async()=>{const x=(await he.getActiveCampaignsForUser(e,s)).filter(p=>p.displayType==="DASHBOARD_CARD").sort((p,v)=>v.priority-p.priority);i(x)})()},[e,s]);const d=async h=>{await he.dismissCampaignForUser(e,h),o(f=>new Set([...f,h]))},u=n.filter(h=>!l.has(h.id));return u.length===0?null:t.jsx("div",{className:"space-y-4","data-testid":"marketing-dashboard-cards",children:u.slice(0,3).map(h=>t.jsxs("div",{className:"bg-gradient-to-r from-brand-50 to-purple-50 border border-brand-200 rounded-2xl p-4 relative","data-testid":`card-campaign-${h.id}`,children:[h.skippable&&t.jsx("button",{onClick:()=>d(h.id),className:"absolute top-2 left-2 p-1 hover:bg-white/50 rounded-full transition-colors text-slate-400 hover:text-slate-600","data-testid":`button-dismiss-card-${h.id}`,children:t.jsx(vt,{size:14})}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"shrink-0 w-10 h-10 bg-gradient-to-br from-brand-500 to-purple-500 rounded-xl flex items-center justify-center",children:t.jsx(ja,{size:18,className:"text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1 truncate",children:h.title}),t.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:h.message}),h.ctaUrl&&h.ctaLabel&&t.jsxs("a",{href:h.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-xs font-bold text-brand-600 hover:text-brand-700",children:[h.ctaLabel,t.jsx(Ll,{size:10})]})]})]})]},h.id))})});function mE(e){if(!e)return null;const s=e.trim();if(!s)return null;const a=Zi(s);return a.length<2?null:a}function Sde(e){const s=e.trim();if(!s)return{isValid:!1,normalized:null,error:"     ."};const a=mE(s);return a?{isValid:!0,normalized:a}:{isValid:!1,normalized:null,error:"     ."}}async function Ade(e,s=!0){const a=mE(e);if(!a)return{type:"NOT_FOUND",normalizedQuery:e};const r=rf(a),n=await he.searchProducts(""),i=he.getStockThreshold(),l=he.getMinVisibleQty();let o=null,d=0;for(const h of n){const f=h.qtyTotal??h.stock??0;if(s&&f<l)continue;const x=h.normalizedPart||Zi(h.partNumber),p=h.numericPartCore||rf(h.partNumber);let v=0;if(x===a?v=100:p===r&&r.length>3?v=80:x.includes(a)||a.includes(x)?v=50:(p.includes(r)||r.includes(p))&&r.length>4&&(v=40),v>d&&(d=v,o=h),v===100)break}return!o||d<50?{type:"NOT_FOUND",normalizedQuery:a}:(o.qtyTotal??o.stock??0)<=i?{type:"FOUND_OUT_OF_STOCK",product:o,normalizedQuery:a}:{type:"FOUND_AVAILABLE",product:o,normalizedQuery:a}}function Ede(e){const s=he.getMinVisibleQty();return e.filter(a=>(a.qtyTotal??a.stock??0)>=s)}async function Cde(e,s,a="heroSearch"){const r=Sde(e);if(!r.isValid)return{type:"NOT_FOUND",message:r.error||"     .",showPrice:!1};const n=await Ade(e);switch(n.type){case"NOT_FOUND":return await Tde(n.normalizedQuery||e,s,a),{type:"NOT_FOUND",normalizedQuery:n.normalizedQuery,message:"   .",showPrice:!1};case"FOUND_OUT_OF_STOCK":return await _de(n.product,s,a,n.normalizedQuery),{type:"FOUND_OUT_OF_STOCK",product:n.product,normalizedQuery:n.normalizedQuery,message:"     .",showPrice:!1};case"FOUND_AVAILABLE":return{type:"FOUND_AVAILABLE",product:n.product,normalizedQuery:n.normalizedQuery,message:"",showPrice:!0};default:return{type:"NOT_FOUND",message:"       .",showPrice:!1}}}async function Tde(e,s,a){try{await he.logMissingPartFromSearch({partNumber:e,normalizedPartNumber:mE(e)||e,customerId:s.customerId,customerName:s.customerName,carInfo:s.carInfo,branchId:s.branchId,availabilityStatus:"not_found",searchSource:a})}catch(r){console.error("Error logging missing part (not_found):",r)}}async function _de(e,s,a,r){try{await he.logMissingPartFromSearch({partNumber:e.partNumber,normalizedPartNumber:r||Zi(e.partNumber),productId:e.id,productName:e.name,brand:e.brand,customerId:s.customerId,customerName:s.customerName,carInfo:s.carInfo,branchId:s.branchId,availabilityStatus:"out_of_stock",searchSource:a})}catch(n){console.error("Error logging missing part (out_of_stock):",n)}}function kde(e){return{customerId:(e==null?void 0:e.id)||null,customerName:e==null?void 0:e.name,branchId:e==null?void 0:e.branchId}}const Ode={VIN_EXTRACTOR:"VIN",PDF_TO_EXCEL:"PDF_EXCEL",PRICE_COMPARISON:"COMPARISON"},Xo={async checkToolAccess(e,s,a){var r,n,i;try{const l=await he.getToolConfig(e);if(!l)return{hasAccess:!1,reason:"Tool configuration not found",reasonAr:"     "};if(!l.enabled)return{hasAccess:!1,reason:"This tool is currently disabled",reasonAr:"   ",toolConfig:l};if(l.maintenanceMode)return{hasAccess:!1,reason:l.maintenanceMessage||"Tool is under maintenance",reasonAr:l.maintenanceMessage||"  ",toolConfig:l,isInMaintenanceMode:!0};const o=await he.getCustomerToolsOverride(s);if(o&&!o.useGlobalDefaults){if((r=o.forcedDisabledTools)!=null&&r.includes(e))return{hasAccess:!1,reason:"Tool access has been disabled for your account",reasonAr:"     ",toolConfig:l};if((n=o.forcedEnabledTools)!=null&&n.includes(e)){const x=await he.getCustomerToolUsageToday(s,e),p=await he.getCustomerToolUsageThisMonth(s,e),v=(i=o.customLimits)==null?void 0:i.find(j=>j.toolKey===e),b=(v==null?void 0:v.maxFilesPerDay)??l.maxFilesPerDay,y=(v==null?void 0:v.maxFilesPerMonth)??l.maxFilesPerMonth;return b&&x>=b?{hasAccess:!1,reason:`Daily usage limit reached (${b} uses per day)`,reasonAr:`    (${b}   )`,toolConfig:l,usageToday:x,usageThisMonth:p,dailyLimit:b,monthlyLimit:y}:y&&p>=y?{hasAccess:!1,reason:`Monthly usage limit reached (${y} uses per month)`,reasonAr:`    (${y}   )`,toolConfig:l,usageToday:x,usageThisMonth:p,dailyLimit:b,monthlyLimit:y}:{hasAccess:!0,toolConfig:l,usageToday:x,usageThisMonth:p,dailyLimit:b,monthlyLimit:y}}}if(l.blockedCustomerIds.includes(s))return{hasAccess:!1,reason:"Tool access has been blocked for your account",reasonAr:"     ",toolConfig:l};if(a&&l.allowedCustomerTypes.length>0&&!l.allowedCustomerTypes.includes(a))return{hasAccess:!1,reason:"This tool is not available for your account type",reasonAr:"     ",toolConfig:l};const d=await he.getCustomerToolUsageToday(s,e),u=await he.getCustomerToolUsageThisMonth(s,e),h=l.maxFilesPerDay,f=l.maxFilesPerMonth;return h&&d>=h?{hasAccess:!1,reason:`Daily usage limit reached (${h} uses per day)`,reasonAr:`    (${h}   )`,toolConfig:l,usageToday:d,usageThisMonth:u,dailyLimit:h,monthlyLimit:f}:f&&u>=f?{hasAccess:!1,reason:`Monthly usage limit reached (${f} uses per month)`,reasonAr:`    (${f}   )`,toolConfig:l,usageToday:d,usageThisMonth:u,dailyLimit:h,monthlyLimit:f}:{hasAccess:!0,toolConfig:l,usageToday:d,usageThisMonth:u,dailyLimit:h,monthlyLimit:f}}catch(l){return console.error("Error checking tool access:",l),{hasAccess:!1,reason:"Error checking tool access",reasonAr:"      "}}},async getAllToolsAccess(e,s){const a=["PDF_TO_EXCEL","VIN_EXTRACTOR","PRICE_COMPARISON"],r={};for(const n of a)r[n]=await this.checkToolAccess(n,e,s);return r},async getVisibleTools(e,s){const a=await he.getToolConfigs(),r=await this.getAllToolsAccess(e,s);return a.filter(n=>{var o;if(!n.enabled||!n.showInDashboardShortcuts)return!1;const i=r[n.toolKey];return i?!i.hasAccess&&i.isInMaintenanceMode?!0:n.blockedCustomerIds.includes(e)?!1:((o=r[n.toolKey])==null?void 0:o.toolConfig)?!0:!(s&&n.allowedCustomerTypes.length>0&&!n.allowedCustomerTypes.includes(s)):!1}).sort((n,i)=>(n.sortOrder||0)-(i.sortOrder||0))},async recordToolUsage(e,s,a,r=1,n,i,l){const o=await he.getToolConfig(e);o!=null&&o.logUsageForAnalytics&&await he.addToolUsageRecord({customerId:s,toolKey:e,usedAt:new Date().toISOString(),filesProcessed:r,success:a,errorMessage:n,processingTimeMs:i,metadata:l});const d=Ode[e];d&&await he.logTraderToolAction(s,d,l||{},a?{filesProcessed:r}:void 0,{status:a?"SUCCESS":"FAILED",errorMessage:n,processingTimeMs:i,metadata:l})},async getToolUsageStats(e,s,a="month"){const r=await he.getToolUsageRecords(s,e),n=new Date;let i;switch(a){case"today":i=new Date(n.getFullYear(),n.getMonth(),n.getDate());break;case"week":i=new Date(n.getTime()-10080*60*1e3);break;case"month":i=new Date(n.getFullYear(),n.getMonth(),1);break;default:i=new Date(0)}const l=r.filter(b=>new Date(b.usedAt)>=i),o=l.length,d=l.filter(b=>b.success).length,u=l.filter(b=>!b.success).length,h=l.filter(b=>b.processingTimeMs!==void 0).map(b=>b.processingTimeMs),f=h.length>0?h.reduce((b,y)=>b+y,0)/h.length:0,x=new Set(l.map(b=>b.customerId)).size,p=new Map;l.forEach(b=>{const y=b.usedAt.split("T")[0];p.set(y,(p.get(y)||0)+1)});const v=Array.from(p.entries()).map(([b,y])=>({date:b,count:y})).sort((b,y)=>b.date.localeCompare(y.date));return{totalUsage:o,successfulUsage:d,failedUsage:u,avgProcessingTime:Math.round(f),uniqueCustomers:x,byDay:v}}},Ide=({user:e,profile:s,onClose:a})=>{const{t:r,dir:n}=Hs(),{addToast:i}=It(),l=n==="rtl",o=C.useRef(null),[d,u]=C.useState([]),[h,f]=C.useState([]),[x,p]=C.useState(!1),[v,b]=C.useState(!1),y=L=>{if(L.target.files){const B=Array.from(L.target.files),I=B.filter(T=>T.type==="application/pdf");I.length!==B.length&&i(r("pdfToExcel.onlyPdfAllowed","   PDF"),"info"),u(T=>[...T,...I])}},j=C.useCallback(L=>{L.preventDefault(),p(!0)},[]),w=C.useCallback(L=>{L.preventDefault(),p(!1)},[]),S=C.useCallback(L=>{L.preventDefault(),p(!1);const I=Array.from(L.dataTransfer.files).filter(T=>T.type==="application/pdf");I.length>0?u(T=>[...T,...I]):i(r("pdfToExcel.onlyPdfAllowed","   PDF"),"info")},[i,r]),O=L=>{u(B=>B.filter((I,T)=>T!==L))},_=async L=>{await new Promise(T=>setTimeout(T,1500+Math.random()*1e3));const B=10+Math.floor(Math.random()*20),I=[];I.push([r("pdfToExcel.demo.partNumber"," "),r("pdfToExcel.demo.partName"," "),r("pdfToExcel.demo.quantity",""),r("pdfToExcel.demo.price",""),r("pdfToExcel.demo.total","")]);for(let T=0;T<B;T++){const z=`PT-${String(1e3+T).padStart(5,"0")}`,k=Math.floor(Math.random()*50)+1,F=Math.floor(Math.random()*500)+50;I.push([z,`${r("pdfToExcel.demo.sparePart"," ")} ${T+1}`,k,F,k*F])}return I},E=async()=>{if(d.length===0)return;b(!0);const L=Date.now(),B=d.map((I,T)=>({id:`conv-${Date.now()}-${T}`,fileName:I.name,status:"pending",progress:0}));f(B);for(let I=0;I<B.length;I++){const T=B[I];f(z=>z.map(k=>k.id===T.id?{...k,status:"processing",progress:20}:k));try{f(W=>W.map(ee=>ee.id===T.id?{...ee,progress:50}:ee));const z=await _(d[I]);f(W=>W.map(ee=>ee.id===T.id?{...ee,progress:80}:ee));const k=Ta.book_new(),F=Ta.aoa_to_sheet(z);F["!cols"]=[{wch:15},{wch:25},{wch:10},{wch:12},{wch:15}],Ta.book_append_sheet(k,F,"Sheet1");const P=sb(k,{bookType:"xlsx",type:"array"}),G=new Blob([P],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Y=URL.createObjectURL(G);f(W=>W.map(ee=>{var H;return ee.id===T.id?{...ee,status:"completed",progress:100,downloadUrl:Y,rows:z.length,columns:((H=z[0])==null?void 0:H.length)||0,data:z}:ee})),await Xo.recordToolUsage("PDF_TO_EXCEL",e.id,!0,1,void 0,Date.now()-L)}catch{f(k=>k.map(F=>F.id===T.id?{...F,status:"error",progress:0,error:r("pdfToExcel.conversionError","   ")}:F)),await Xo.recordToolUsage("PDF_TO_EXCEL",e.id,!1,0,"Conversion failed")}}b(!1),u([]),i(r("pdfToExcel.conversionComplete","   "),"success")},A=L=>{if(L.downloadUrl){const B=document.createElement("a");B.href=L.downloadUrl,B.download=L.fileName.replace(".pdf",".xlsx"),document.body.appendChild(B),B.click(),document.body.removeChild(B)}},D=()=>{h.forEach(L=>{L.downloadUrl&&URL.revokeObjectURL(L.downloadUrl)}),f([])};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(yn,{size:32})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:r("pdfToExcel.title"," PDF  Excel")}),t.jsx("p",{className:"text-green-100 mt-1",children:r("pdfToExcel.subtitle","  PDF   Excel  ")})]})]})}),t.jsxs("div",{onDragOver:j,onDragLeave:w,onDrop:S,className:`relative border-2 border-dashed rounded-2xl p-8 text-center transition-all ${x?"border-brand-500 bg-brand-50":"border-slate-300 hover:border-brand-400 hover:bg-slate-50"}`,children:[t.jsx("input",{ref:o,type:"file",accept:".pdf",multiple:!0,onChange:y,className:"hidden","data-testid":"input-pdf-upload"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-slate-100 rounded-full flex items-center justify-center",children:t.jsx(va,{size:32,className:"text-slate-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-slate-700",children:r("pdfToExcel.dragDrop","  PDF ")}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r("pdfToExcel.orClick","   ")})]}),t.jsxs("button",{onClick:()=>{var L;return(L=o.current)==null?void 0:L.click()},className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 hover:bg-brand-700 text-white font-bold rounded-xl transition-colors","data-testid":"button-select-pdf",children:[t.jsx(zt,{size:20}),r("pdfToExcel.selectFiles","  PDF")]})]})]}),d.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"font-bold text-slate-800",children:[r("pdfToExcel.selectedFiles"," ")," (",d.length,")"]}),t.jsx("button",{onClick:()=>u([]),className:"text-sm text-red-500 hover:text-red-600 font-medium","data-testid":"button-clear-files",children:r("pdfToExcel.clearAll"," ")})]}),t.jsx("div",{className:"space-y-2",children:d.map((L,B)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(zt,{size:20,className:"text-red-500"}),t.jsx("span",{className:"text-sm font-medium text-slate-700 truncate max-w-[200px]",children:L.name}),t.jsxs("span",{className:"text-xs text-slate-400",children:["(",(L.size/1024).toFixed(1)," KB)"]})]}),t.jsx("button",{onClick:()=>O(B),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-remove-file-${B}`,children:t.jsx(vt,{size:16})})]},B))}),t.jsx("button",{onClick:E,disabled:v,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-convert-files",children:v?t.jsxs(t.Fragment,{children:[t.jsx(ts,{size:20,className:"animate-spin"}),r("pdfToExcel.converting"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(cE,{size:20}),r("pdfToExcel.convertToExcel","  Excel")]})})]}),h.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:r("pdfToExcel.results"," ")}),t.jsx("button",{onClick:D,className:"text-sm text-slate-500 hover:text-slate-600 font-medium","data-testid":"button-clear-results",children:r("pdfToExcel.clearResults"," ")})]}),t.jsx("div",{className:"space-y-3",children:h.map(L=>t.jsx("div",{className:`p-4 rounded-xl border ${L.status==="completed"?"bg-green-50 border-green-200":L.status==="error"?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[L.status==="completed"?t.jsx(Mt,{size:20,className:"text-green-600"}):L.status==="error"?t.jsx(Ks,{size:20,className:"text-red-600"}):t.jsx(ts,{size:20,className:"animate-spin text-brand-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-800",children:L.fileName}),L.status==="completed"&&t.jsxs("p",{className:"text-xs text-slate-500",children:[L.rows," ",r("pdfToExcel.rows",""),"  ",L.columns," ",r("pdfToExcel.columns","")]}),L.status==="error"&&t.jsx("p",{className:"text-xs text-red-500",children:L.error})]})]}),L.status==="processing"&&t.jsx("div",{className:"w-24 bg-slate-200 rounded-full h-2",children:t.jsx("div",{className:"bg-brand-600 h-2 rounded-full transition-all duration-300",style:{width:`${L.progress}%`}})}),L.status==="completed"&&t.jsxs("button",{onClick:()=>A(L),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-bold rounded-lg transition-colors","data-testid":`button-download-${L.id}`,children:[t.jsx(tr,{size:16}),r("pdfToExcel.download","")]})]})},L.id))})]}),t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[t.jsx("h3",{className:"font-bold text-slate-800 mb-3",children:r("pdfToExcel.howToUse"," ")}),t.jsxs("ol",{className:"text-sm text-slate-600 space-y-2 list-decimal list-inside",children:[t.jsx("li",{children:r("pdfToExcel.step1","  PDF     ")}),t.jsx("li",{children:r("pdfToExcel.step2",'   "  Excel"')}),t.jsx("li",{children:r("pdfToExcel.step3","   ")}),t.jsx("li",{children:r("pdfToExcel.step4","  Excel ")})]})]})]})},RF={JT:{manufacturer:"Toyota",country:"Japan"},JH:{manufacturer:"Honda",country:"Japan"},JN:{manufacturer:"Nissan",country:"Japan"},JM:{manufacturer:"Mazda/Mitsubishi",country:"Japan"},JS:{manufacturer:"Suzuki",country:"Japan"},WA:{manufacturer:"Audi",country:"Germany"},WB:{manufacturer:"BMW",country:"Germany"},WD:{manufacturer:"Mercedes-Benz",country:"Germany"},WV:{manufacturer:"Volkswagen",country:"Germany"},WP:{manufacturer:"Porsche",country:"Germany"},"1G":{manufacturer:"General Motors",country:"USA"},"1F":{manufacturer:"Ford",country:"USA"},"2H":{manufacturer:"Honda",country:"Canada"},"3V":{manufacturer:"Volkswagen",country:"Mexico"},KM:{manufacturer:"Hyundai",country:"Korea"},KN:{manufacturer:"Kia",country:"Korea"},SA:{manufacturer:"Land Rover",country:"UK"},SB:{manufacturer:"Bentley",country:"UK"},SJ:{manufacturer:"Jaguar",country:"UK"},ZA:{manufacturer:"Alfa Romeo",country:"Italy"},ZF:{manufacturer:"Ferrari",country:"Italy"},ZH:{manufacturer:"Maserati",country:"Italy"}},Rde=()=>{const e=Object.keys(RF),s=e[Math.floor(Math.random()*e.length)],a="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let r=s;for(let n=0;n<15;n++)r+=a[Math.floor(Math.random()*a.length)];return r.substring(0,17)},f5=e=>{var l;const s=e.substring(0,2).toUpperCase(),a=RF[s],r={A:"2010",B:"2011",C:"2012",D:"2013",E:"2014",F:"2015",G:"2016",H:"2017",J:"2018",K:"2019",L:"2020",M:"2021",N:"2022",P:"2023",R:"2024",S:"2025"},n=((l=e[9])==null?void 0:l.toUpperCase())||"",i=r[n]||"20"+(Math.floor(Math.random()*5)+20);return{manufacturer:(a==null?void 0:a.manufacturer)||"Unknown",country:(a==null?void 0:a.country)||"Unknown",year:i,model:"Model "+e.substring(3,6)}},Pde=({user:e,profile:s,onClose:a})=>{const{t:r,dir:n}=Hs(),{addToast:i}=It(),l=n==="rtl",o=C.useRef(null),[d,u]=C.useState([]),[h,f]=C.useState([]),[x,p]=C.useState(!1),[v,b]=C.useState(!1),[y,j]=C.useState(""),w=I=>{if(I.target.files){const T=Array.from(I.target.files),z=T.filter(k=>k.type.startsWith("image/"));z.length!==T.length&&i(r("vinExtractor.onlyImagesAllowed","   "),"info"),u(k=>[...k,...z])}},S=C.useCallback(I=>{I.preventDefault(),p(!0)},[]),O=C.useCallback(I=>{I.preventDefault(),p(!1)},[]),_=C.useCallback(I=>{I.preventDefault(),p(!1);const z=Array.from(I.dataTransfer.files).filter(k=>k.type.startsWith("image/"));z.length>0?u(k=>[...k,...z]):i(r("vinExtractor.onlyImagesAllowed","   "),"info")},[i,r]),E=I=>{u(T=>T.filter((z,k)=>k!==I))},A=async()=>{if(d.length===0)return;b(!0);const I=Date.now(),T=d.map((z,k)=>({id:`ext-${Date.now()}-${k}`,fileName:z.name,imageUrl:URL.createObjectURL(z),status:"pending"}));f(T);for(let z=0;z<T.length;z++){const k=T[z];f(F=>F.map(P=>P.id===k.id?{...P,status:"processing"}:P));try{if(await new Promise(P=>setTimeout(P,1500+Math.random()*1500)),Math.random()>.15){const P=Rde(),G=f5(P),Y=85+Math.floor(Math.random()*15);f(W=>W.map(ee=>ee.id===k.id?{...ee,status:"completed",vin:P,confidence:Y,vehicleInfo:G}:ee)),await Xo.recordToolUsage("VIN_EXTRACTOR",e.id,!0,1,void 0,Date.now()-I,{vin:P,confidence:Y})}else throw new Error("Could not extract VIN from image")}catch{f(P=>P.map(G=>G.id===k.id?{...G,status:"error",error:r("vinExtractor.extractionError","       ")}:G)),await Xo.recordToolUsage("VIN_EXTRACTOR",e.id,!1,0,"Extraction failed")}}b(!1),u([]),i(r("vinExtractor.processingComplete","  "),"success")},D=I=>{navigator.clipboard.writeText(I),i(r("vinExtractor.vinCopied","   "),"success")},L=()=>{if(y.length!==17){i(r("vinExtractor.invalidVinLength","     17 "),"error");return}const I=f5(y),T={id:`manual-${Date.now()}`,fileName:r("vinExtractor.manualEntry"," "),imageUrl:"",status:"completed",vin:y.toUpperCase(),confidence:100,vehicleInfo:I};f(z=>[T,...z]),j(""),i(r("vinExtractor.vinDecoded","    "),"success")},B=()=>{h.forEach(I=>{I.imageUrl&&URL.revokeObjectURL(I.imageUrl)}),f([])};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(Mi,{size:32})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:r("vinExtractor.title","   (VIN)")}),t.jsx("p",{className:"text-blue-100 mt-1",children:r("vinExtractor.subtitle","     ")})]})]})}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4",children:[t.jsx("h3",{className:"font-bold text-slate-800 mb-3",children:r("vinExtractor.manualInput","   ")}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"text",value:y,onChange:I=>j(I.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,17)),placeholder:r("vinExtractor.enterVin","   (17 )"),className:"flex-1 px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent font-mono tracking-wider","data-testid":"input-manual-vin"}),t.jsxs("button",{onClick:L,disabled:y.length!==17,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-lookup-vin",children:[t.jsx(Lt,{size:20}),r("vinExtractor.lookup","")]})]}),t.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[y.length,"/17 ",r("vinExtractor.characters","")]})]}),t.jsxs("div",{onDragOver:S,onDragLeave:O,onDrop:_,className:`relative border-2 border-dashed rounded-2xl p-8 text-center transition-all ${x?"border-brand-500 bg-brand-50":"border-slate-300 hover:border-brand-400 hover:bg-slate-50"}`,children:[t.jsx("input",{ref:o,type:"file",accept:"image/*",multiple:!0,onChange:w,className:"hidden","data-testid":"input-image-upload"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-slate-100 rounded-full flex items-center justify-center",children:t.jsx(Jte,{size:32,className:"text-slate-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-slate-700",children:r("vinExtractor.dragDrop","     ")}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r("vinExtractor.supportedFormats","       VIN")})]}),t.jsxs("button",{onClick:()=>{var I;return(I=o.current)==null?void 0:I.click()},className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 hover:bg-brand-700 text-white font-bold rounded-xl transition-colors","data-testid":"button-select-images",children:[t.jsx(Li,{size:20}),r("vinExtractor.selectImages"," ")]})]})]}),d.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"font-bold text-slate-800",children:[r("vinExtractor.selectedImages"," ")," (",d.length,")"]}),t.jsx("button",{onClick:()=>u([]),className:"text-sm text-red-500 hover:text-red-600 font-medium","data-testid":"button-clear-images",children:r("vinExtractor.clearAll"," ")})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:d.map((I,T)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:URL.createObjectURL(I),alt:I.name,className:"w-full h-24 object-cover rounded-xl"}),t.jsx("button",{onClick:()=>E(T),className:"absolute top-1 right-1 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`button-remove-image-${T}`,children:t.jsx(vt,{size:12})}),t.jsx("p",{className:"text-xs text-slate-500 truncate mt-1",children:I.name})]},T))}),t.jsx("button",{onClick:A,disabled:v,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-extract-vin",children:v?t.jsxs(t.Fragment,{children:[t.jsx(ts,{size:20,className:"animate-spin"}),r("vinExtractor.processing"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(Mi,{size:20}),r("vinExtractor.extractVin","  ")]})})]}),h.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:r("vinExtractor.results","")}),t.jsx("button",{onClick:B,className:"text-sm text-slate-500 hover:text-slate-600 font-medium","data-testid":"button-clear-vin-results",children:r("vinExtractor.clearResults"," ")})]}),t.jsx("div",{className:"space-y-4",children:h.map(I=>t.jsx("div",{className:`p-4 rounded-xl border ${I.status==="completed"?"bg-green-50 border-green-200":I.status==="error"?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[I.imageUrl&&t.jsx("img",{src:I.imageUrl,alt:I.fileName,className:"w-16 h-16 object-cover rounded-lg shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[I.status==="completed"?t.jsx(Mt,{size:18,className:"text-green-600"}):I.status==="error"?t.jsx(Ks,{size:18,className:"text-red-600"}):t.jsx(ts,{size:18,className:"animate-spin text-brand-600"}),t.jsx("span",{className:"font-medium text-slate-700 truncate",children:I.fileName})]}),I.status==="completed"&&I.vin&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"text-lg font-mono font-bold text-slate-800 bg-white px-3 py-1 rounded-lg border",children:I.vin}),t.jsx("button",{onClick:()=>D(I.vin),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-brand-50 rounded-lg transition-colors","data-testid":`button-copy-vin-${I.id}`,children:t.jsx(qp,{size:16})})]}),I.vehicleInfo&&t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.manufacturer"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-800 ms-2",children:I.vehicleInfo.manufacturer})]}),t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.year"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-800 ms-2",children:I.vehicleInfo.year})]}),t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.country"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-800 ms-2",children:I.vehicleInfo.country})]}),t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.confidence",""),":"]}),t.jsxs("span",{className:"font-medium text-green-600 ms-2",children:[I.confidence,"%"]})]})]})]}),I.status==="error"&&t.jsx("p",{className:"text-sm text-red-600",children:I.error})]})]})},I.id))})]}),t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[t.jsx("h3",{className:"font-bold text-slate-800 mb-3",children:r("vinExtractor.tips","    ")}),t.jsxs("ul",{className:"text-sm text-slate-600 space-y-2 list-disc list-inside",children:[t.jsx("li",{children:r("vinExtractor.tip1","     ")}),t.jsx("li",{children:r("vinExtractor.tip2","       ")}),t.jsx("li",{children:r("vinExtractor.tip3"," VIN       ")}),t.jsx("li",{children:r("vinExtractor.tip4","    17  ")})]})]})]})},Dde=[{id:"sup1",name:"  ",rating:4.8},{id:"sup2",name:"  ",rating:4.5},{id:"sup3",name:" ",rating:4.2},{id:"sup4",name:" ",rating:4.6},{id:"sup5",name:" ",rating:4}],Mde=e=>{const s=[...Dde].sort(()=>Math.random()-.5),a=3+Math.floor(Math.random()*3);return s.slice(0,a).map((r,n)=>{const i=.7+Math.random()*.6,l=Math.round(e*i),d=Math.random()>.6?Math.round(l*(1+Math.random()*.3)):void 0,u=d?Math.round((d-l)/d*100):void 0;return{supplierId:r.id,supplierName:r.name,price:l,originalPrice:d,discount:u,inStock:Math.random()>.2,stockQuantity:Math.floor(Math.random()*50)+1,deliveryDays:Math.floor(Math.random()*5)+1,rating:r.rating}}).sort((r,n)=>r.price-n.price).map((r,n)=>({...r,isBestPrice:n===0,isFastest:r.deliveryDays===Math.min(...s.slice(0,a).map(()=>Math.floor(Math.random()*5)+1)),isRecommended:n===0&&r.rating>=4.5}))},Lde=({user:e,profile:s,onClose:a})=>{const{t:r,dir:n}=Hs(),{addToast:i}=It(),l=n==="rtl",[o,d]=C.useState(""),[u,h]=C.useState(!1),[f,x]=C.useState(null),[p,v]=C.useState([]),[b,y]=C.useState("price");C.useEffect(()=>{const _=localStorage.getItem(`price_comparison_history_${e.id}`);if(_)try{v(JSON.parse(_))}catch(E){console.error("Failed to parse search history:",E)}},[e.id]);const j=_=>{const A=[{partNumber:_.partNumber,partName:_.partName,searchedAt:_.searchedAt,lowestPrice:_.lowestPrice,suppliersCount:_.suppliers.length},...p.filter(D=>D.partNumber!==_.partNumber)].slice(0,10);v(A),localStorage.setItem(`price_comparison_history_${e.id}`,JSON.stringify(A))},w=async(_,E)=>{_==null||_.preventDefault();const A=E||o.trim();if(!A)return;h(!0);const D=Date.now();try{await new Promise(Y=>setTimeout(Y,1e3+Math.random()*1e3));const B=(await he.searchProducts(A))[0];if(!B){i(r("priceComparison.noProductFound","      "),"info"),h(!1);return}const I=B.price||100+Math.random()*500,T=Mde(I),z=T.map(Y=>Y.price),k=Math.min(...z),F=Math.max(...z),P=Math.round(z.reduce((Y,W)=>Y+W,0)/z.length),G={partNumber:B.partNumber,partName:B.name,suppliers:T,searchedAt:new Date().toISOString(),averagePrice:P,lowestPrice:k,highestPrice:F,priceDifference:F-k};x(G),j(G),await Xo.recordToolUsage("PRICE_COMPARISON",e.id,!0,1,void 0,Date.now()-D,{partNumber:B.partNumber,suppliersCount:T.length}),i(r("priceComparison.searchComplete","  "),"success")}catch(L){console.error("Search failed:",L),i(r("priceComparison.searchError","   "),"error"),await Xo.recordToolUsage("PRICE_COMPARISON",e.id,!1,0,"Search failed")}finally{h(!1)}},S=()=>{if(!f)return[];const _=[...f.suppliers];switch(b){case"price":return _.sort((E,A)=>E.price-A.price);case"rating":return _.sort((E,A)=>A.rating-E.rating);case"delivery":return _.sort((E,A)=>E.deliveryDays-A.deliveryDays);default:return _}},O=()=>{v([]),localStorage.removeItem(`price_comparison_history_${e.id}`),i(r("priceComparison.historyCleared","   "),"success")};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(Fo,{size:32})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:r("priceComparison.title"," ")}),t.jsx("p",{className:"text-purple-100 mt-1",children:r("priceComparison.subtitle","        ")})]})]})}),t.jsx("form",{onSubmit:w,className:"bg-white rounded-2xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Lt,{size:20,className:`absolute top-1/2 -translate-y-1/2 ${l?"right-4":"left-4"} text-slate-400`}),t.jsx("input",{type:"text",value:o,onChange:_=>d(_.target.value),placeholder:r("priceComparison.searchPlaceholder","   ..."),className:`w-full ${l?"pr-12 pl-4":"pl-12 pr-4"} py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent`,"data-testid":"input-part-search"})]}),t.jsx("button",{type:"submit",disabled:u||!o.trim(),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-compare-prices",children:u?t.jsxs(t.Fragment,{children:[t.jsx(ts,{size:20,className:"animate-spin"}),r("priceComparison.searching"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(Fo,{size:20}),r("priceComparison.compare","")]})})]})}),f&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-slate-800",children:f.partName}),t.jsx("p",{className:"text-slate-500 font-mono",children:f.partNumber})]}),t.jsx("button",{onClick:()=>x(null),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-results",children:t.jsx(vt,{size:20})})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[t.jsx(Wre,{size:24,className:"text-green-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-green-600 font-medium",children:r("priceComparison.lowestPrice"," ")}),t.jsxs("p",{className:"text-xl font-bold text-green-700",children:[f.lowestPrice," ",r("common.sar",".")]})]}),t.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[t.jsx(gi,{size:24,className:"text-red-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-red-600 font-medium",children:r("priceComparison.highestPrice"," ")}),t.jsxs("p",{className:"text-xl font-bold text-red-700",children:[f.highestPrice," ",r("common.sar",".")]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[t.jsx(mr,{size:24,className:"text-blue-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-blue-600 font-medium",children:r("priceComparison.avgPrice"," ")}),t.jsxs("p",{className:"text-xl font-bold text-blue-700",children:[f.averagePrice," ",r("common.sar",".")]})]}),t.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[t.jsx(Lo,{size:24,className:"text-purple-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-purple-600 font-medium",children:r("priceComparison.savings"," ")}),t.jsxs("p",{className:"text-xl font-bold text-purple-700",children:[f.priceDifference," ",r("common.sar",".")]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-slate-600",children:[r("priceComparison.sortBy"," "),":"]}),t.jsx("div",{className:"flex gap-2",children:[{key:"price",label:r("priceComparison.sortPrice","")},{key:"rating",label:r("priceComparison.sortRating","")},{key:"delivery",label:r("priceComparison.sortDelivery","")}].map(_=>t.jsx("button",{onClick:()=>y(_.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b===_.key?"bg-purple-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`button-sort-${_.key}`,children:_.label},_.key))})]}),t.jsx("div",{className:"space-y-3",children:S().map((_,E)=>t.jsx("div",{className:`bg-white rounded-2xl border-2 p-4 transition-all ${_.isBestPrice?"border-green-400 bg-green-50/30":"border-slate-200 hover:border-slate-300"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg ${E===0?"bg-green-600 text-white":"bg-slate-100 text-slate-600"}`,children:E+1}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-bold text-slate-800",children:_.supplierName}),_.isRecommended&&t.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:r("priceComparison.recommended"," ")}),_.isBestPrice&&t.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs font-bold rounded-full",children:r("priceComparison.bestPrice"," ")})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-slate-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(bn,{size:14,className:"text-yellow-500 fill-yellow-500"}),_.rating]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(is,{size:14}),_.deliveryDays," ",r("priceComparison.days","")]}),t.jsxs("span",{className:`flex items-center gap-1 ${_.inStock?"text-green-600":"text-red-500"}`,children:[t.jsx(Yt,{size:14}),_.inStock?`${_.stockQuantity} ${r("priceComparison.inStock","")}`:r("priceComparison.outOfStock"," ")]})]})]})]}),t.jsxs("div",{className:`text-${l?"left":"right"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl font-bold text-slate-800",children:_.price}),t.jsx("span",{className:"text-slate-500",children:r("common.sar",".")})]}),_.originalPrice&&_.discount&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"line-through text-slate-400",children:_.originalPrice}),t.jsxs("span",{className:"text-green-600 font-bold",children:["-",_.discount,"%"]})]})]})]})},_.supplierId))})]}),p.length>0&&!f&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:r("priceComparison.recentSearches","  ")}),t.jsx("button",{onClick:O,className:"text-sm text-slate-500 hover:text-red-500 font-medium","data-testid":"button-clear-history",children:r("priceComparison.clearHistory"," ")})]}),t.jsx("div",{className:"space-y-2",children:p.map((_,E)=>t.jsxs("button",{onClick:()=>w(void 0,_.partNumber),className:"w-full flex items-center justify-between p-3 bg-slate-50 hover:bg-slate-100 rounded-xl transition-colors text-left","data-testid":`button-history-${E}`,children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-800",children:_.partName}),t.jsx("p",{className:"text-sm text-slate-500 font-mono",children:_.partNumber})]}),t.jsxs("div",{className:`text-${l?"left":"right"}`,children:[t.jsxs("p",{className:"font-bold text-green-600",children:[_.lowestPrice," ",r("common.sar",".")]}),t.jsxs("p",{className:"text-xs text-slate-400",children:[_.suppliersCount," ",r("priceComparison.suppliers","")]})]})]},E))})]}),!f&&p.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Fo,{size:64,className:"text-slate-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-slate-600",children:r("priceComparison.emptyState","     ")}),t.jsx("p",{className:"text-slate-500 mt-2",children:r("priceComparison.emptyStateDesc","      ")})]}),t.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6",children:[t.jsx("h3",{className:"font-bold text-purple-800 mb-3",children:r("priceComparison.tips","    ")}),t.jsxs("ul",{className:"text-sm text-purple-700 space-y-2 list-disc list-inside",children:[t.jsx("li",{children:r("priceComparison.tip1","      ")}),t.jsx("li",{children:r("priceComparison.tip2","        ")}),t.jsx("li",{children:r("priceComparison.tip3","     ")}),t.jsx("li",{children:r("priceComparison.tip4","       ")})]})]})]})},g1=({toolKey:e,icon:s,title:a,description:r,access:n,onSelect:i,isRTL:l})=>{const{t:o}=Hs(),d=n.hasAccess,u=n.isInMaintenanceMode,h=()=>u?t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-700",children:[t.jsx(Jm,{size:12}),o("traderTools.maintenance"," ")]}):d?t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700",children:[t.jsx(Mt,{size:12}),o("traderTools.available","")]}):t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600",children:[t.jsx(Sa,{size:12}),o("traderTools.noAccess"," ")]}),f=()=>{if(!d||n.usageToday===void 0&&n.usageThisMonth===void 0)return null;const x=n.dailyLimit?`${n.usageToday||0}/${n.dailyLimit}`:null,p=n.monthlyLimit?`${n.usageThisMonth||0}/${n.monthlyLimit}`:null;return!x&&!p?null:t.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-2",children:[x&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(is,{size:12}),o("traderTools.dailyUsage",""),": ",x]}),p&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Dr,{size:12}),o("traderTools.monthlyUsage",""),": ",p]})]})};return t.jsx("button",{onClick:i,disabled:!d,className:`group relative w-full text-${l?"right":"left"} p-6 rounded-2xl border-2 transition-all duration-200 ${d?"bg-white hover:bg-slate-50 border-slate-200 hover:border-brand-500 hover:shadow-lg cursor-pointer":u?"bg-amber-50/50 border-amber-200 cursor-not-allowed":"bg-slate-50 border-slate-200 cursor-not-allowed opacity-70"}`,"data-testid":`tool-card-${e.toLowerCase().replace("_","-")}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${d?"bg-gradient-to-br from-brand-500 to-brand-700 text-white shadow-lg shadow-brand-500/30":u?"bg-amber-200 text-amber-700":"bg-slate-200 text-slate-500"}`,children:s}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 truncate",children:a}),h()]}),t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:r}),f(),!d&&!u&&n.reason&&t.jsxs("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t.jsx(Ks,{size:12}),l?n.reasonAr:n.reason]})]}),d&&t.jsx(hs,{size:20,className:`text-slate-400 group-hover:text-brand-600 transition-transform ${l?"rotate-180 group-hover:-translate-x-1":"group-hover:translate-x-1"}`})]})})},Fde=({user:e,profile:s})=>{const{t:a,dir:r}=Hs(),{addToast:n}=It(),i=r==="rtl",[l,o]=C.useState(!0),[d,u]=C.useState({}),[h,f]=C.useState("NONE");C.useEffect(()=>{(async()=>{o(!0);try{const b=await Xo.getAllToolsAccess(e.id,s==null?void 0:s.customerType);u(b)}catch(b){console.error("Failed to load tools access:",b),n(a("traderTools.loadError","    "),"error")}finally{o(!1)}})()},[e.id,s==null?void 0:s.customerType]);const x=v=>{const b=d[v];b!=null&&b.hasAccess?f(v):b!=null&&b.isInMaintenanceMode&&n(a("traderTools.maintenanceMessage","    "),"info")},p=()=>{f("NONE")};if(l)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(ts,{size:48,className:"animate-spin text-brand-600 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600 font-medium",children:a("traderTools.loading","  ...")})]})});if(h!=="NONE"){const v={PDF_TO_EXCEL:Ide,VIN_EXTRACTOR:Pde,PRICE_COMPARISON:Lde}[h];return t.jsxs("div",{className:"animate-fade-in",children:[t.jsxs("button",{onClick:p,className:"mb-6 flex items-center gap-2 text-slate-600 hover:text-brand-600 transition-colors font-medium","data-testid":"button-back-to-tools",children:[t.jsx(hs,{size:20,className:i?"":"rotate-180"}),a("traderTools.backToTools","  ")]}),t.jsx(v,{user:e,profile:s,onClose:p})]})}return t.jsxs("div",{className:"animate-fade-in space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-[#081a33] to-[#102b57] rounded-3xl p-8 text-white",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("div",{className:"p-3 bg-white/10 rounded-xl backdrop-blur-sm",children:t.jsx(ac,{size:32})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:a("traderTools.title"," ")}),t.jsx("p",{className:"text-slate-300 mt-1",children:a("traderTools.subtitle","    ")})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsx(yn,{size:24,className:"text-green-400 mb-2"}),t.jsx("p",{className:"text-sm text-slate-300",children:a("traderTools.pdfConversion"," PDF")})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsx(Mi,{size:24,className:"text-blue-400 mb-2"}),t.jsx("p",{className:"text-sm text-slate-300",children:a("traderTools.vinExtraction"," VIN")})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsx(Fo,{size:24,className:"text-purple-400 mb-2"}),t.jsx("p",{className:"text-sm text-slate-300",children:a("traderTools.priceComparison"," ")})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:a("traderTools.availableTools"," ")}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsx(g1,{toolKey:"PDF_TO_EXCEL",icon:t.jsx(yn,{size:24}),title:a("traderTools.pdfToExcel.title"," PDF  Excel"),description:a("traderTools.pdfToExcel.description","  PDF       Excel  "),access:d.PDF_TO_EXCEL||{hasAccess:!1},onSelect:()=>x("PDF_TO_EXCEL"),isRTL:i}),t.jsx(g1,{toolKey:"VIN_EXTRACTOR",icon:t.jsx(Mi,{size:24}),title:a("traderTools.vinExtractor.title","   (VIN)"),description:a("traderTools.vinExtractor.description","       "),access:d.VIN_EXTRACTOR||{hasAccess:!1},onSelect:()=>x("VIN_EXTRACTOR"),isRTL:i}),t.jsx(g1,{toolKey:"PRICE_COMPARISON",icon:t.jsx(Fo,{size:24}),title:a("traderTools.priceComparison.title"," "),description:a("traderTools.priceComparison.description","        "),access:d.PRICE_COMPARISON||{hasAccess:!1},onSelect:()=>x("PRICE_COMPARISON"),isRTL:i})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(mi,{size:24,className:"text-blue-600 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:a("traderTools.tips.title"," ")}),t.jsxs("ul",{className:"text-sm text-blue-700 space-y-1.5 list-disc list-inside",children:[t.jsx("li",{children:a("traderTools.tips.tip1","         ")}),t.jsx("li",{children:a("traderTools.tips.tip2","      ")}),t.jsx("li",{children:a("traderTools.tips.tip3","     ")})]})]})]})})]})},PF={VIN:{ar:" VIN",en:"VIN Extraction",icon:t.jsx(Mi,{size:16})},PDF_EXCEL:{ar:" PDF  Excel",en:"PDF to Excel",icon:t.jsx(yn,{size:16})},COMPARISON:{ar:" ",en:"Price Comparison",icon:t.jsx(Fo,{size:16})},ALTERNATIVES:{ar:" ",en:"Alternatives Upload",icon:t.jsx(va,{size:16})},SEARCH:{ar:" ",en:"Quick Orders",icon:t.jsx(Lt,{size:16})},EXCEL_QUOTE:{ar:"  Excel",en:"Excel Purchase Order",icon:t.jsx(cE,{size:16})}},DF={SUCCESS:{ar:"",en:"Success",color:"bg-green-100 text-green-700 border-green-200",icon:t.jsx(Mt,{size:14})},FAILED:{ar:"",en:"Failed",color:"bg-red-100 text-red-700 border-red-200",icon:t.jsx(sa,{size:14})},PENDING:{ar:" ",en:"Pending",color:"bg-amber-100 text-amber-700 border-amber-200",icon:t.jsx(is,{size:14})},PROCESSING:{ar:" ",en:"Processing",color:"bg-blue-100 text-blue-700 border-blue-200",icon:t.jsx(ts,{size:14,className:"animate-spin"})}},h5=({status:e,isRTL:s})=>{const a=DF[e];return t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold border ${a.color}`,children:[a.icon,s?a.ar:a.en]})},x5=({toolType:e,isRTL:s})=>{const a=PF[e];return t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-brand-100 text-brand-700 border border-brand-200",children:[a.icon,s?a.ar:a.en]})},Ude=({user:e})=>{const{t:s,dir:a}=Hs(),{addToast:r}=It(),n=a==="rtl",[i,l]=C.useState(!0),[o,d]=C.useState([]),[u,h]=C.useState(0),[f,x]=C.useState("ALL"),[p,v]=C.useState("ALL"),[b,y]=C.useState(""),[j,w]=C.useState(""),[S,O]=C.useState(1),_=20,[E,A]=C.useState(null);C.useEffect(()=>{(async()=>{l(!0);try{await he.initializeTraderToolsDemoData(e.id);const z={page:S,pageSize:_,toolType:f==="ALL"?void 0:f,status:p==="ALL"?void 0:p,dateFrom:b||void 0,dateTo:j||void 0},k=await he.getTraderToolActionsCustomer(e.id,z);d(k.items),h(k.total)}catch(z){console.error("Failed to load tool history:",z),r(s("traderHistory.loadError","    "),"error")}finally{l(!1)}})()},[e.id,S,f,p,b,j]),C.useEffect(()=>{O(1)},[f,p,b,j]);const D=Math.ceil(u/_),L=T=>{const{toolType:z,metadata:k,inputData:F}=T;switch(z){case"VIN":return(k==null?void 0:k.vin)||(F==null?void 0:F.imageFile)||"-";case"PDF_EXCEL":return T.inputFileName||(F==null?void 0:F.fileName)||"-";case"COMPARISON":return(k==null?void 0:k.partNumber)||(k==null?void 0:k.partName)||(F==null?void 0:F.partNumber)||"-";case"SEARCH":return(k==null?void 0:k.searchQuery)||(F==null?void 0:F.query)||"-";case"EXCEL_QUOTE":return T.inputFileName||`${(k==null?void 0:k.itemsCount)||0} ${n?"":"items"}`;case"ALTERNATIVES":return T.inputFileName||"-";default:return"-"}},B=T=>{const{toolType:z,metadata:k,outputData:F}=T;switch(z){case"VIN":return k!=null&&k.manufacturer&&(k!=null&&k.year)?`${k.manufacturer} ${k.model||""} (${k.year})`:"-";case"PDF_EXCEL":return k!=null&&k.rowCount?`${k.rowCount} ${n?"":"rows"}, ${k.columnCount} ${n?"":"cols"}`:"-";case"COMPARISON":return k!=null&&k.suppliersCount?`${k.suppliersCount} ${n?"":"suppliers"} | ${k.lowestPrice} - ${k.highestPrice}`:"-";case"SEARCH":return(k==null?void 0:k.resultsCount)!==void 0?`${k.resultsCount} ${n?"":"results"}`:"-";case"EXCEL_QUOTE":return(k==null?void 0:k.quotedTotal)!==void 0?`${k.quotedTotal.toLocaleString()} ${n?".":"SAR"}`:"-";case"ALTERNATIVES":return F?JSON.stringify(F).substring(0,50):"-";default:return"-"}},I=()=>{x("ALL"),v("ALL"),y(""),w("")};return C.useMemo(()=>({total:o.length,success:o.filter(T=>T.status==="SUCCESS").length,failed:o.filter(T=>T.status==="FAILED").length}),[o]),t.jsxs("div",{className:"p-4 md:p-6 space-y-6",dir:a,children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(gn,{className:"text-brand-600",size:28}),s("traderHistory.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:s("traderHistory.subtitle","     ")})]}),t.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 px-4 py-2 flex items-center gap-3",children:[t.jsxs("span",{className:"text-slate-500 text-sm",children:[s("traderHistory.totalUsage",""),":"]}),t.jsx("span",{className:"font-bold text-lg text-brand-700","data-testid":"text-total-usage",children:u})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(sc,{size:18,className:"text-slate-500"}),t.jsx("span",{className:"font-semibold text-slate-700",children:s("traderHistory.filters","")})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.toolType"," ")}),t.jsxs("select",{value:f,onChange:T=>x(T.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-tool-type",children:[t.jsx("option",{value:"ALL",children:s("common.all","")}),Object.entries(PF).map(([T,z])=>t.jsx("option",{value:T,children:n?z.ar:z.en},T))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.status","")}),t.jsxs("select",{value:p,onChange:T=>v(T.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-status",children:[t.jsx("option",{value:"ALL",children:s("common.all","")}),Object.entries(DF).map(([T,z])=>t.jsx("option",{value:T,children:n?z.ar:z.en},T))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.dateFrom"," ")}),t.jsx("input",{type:"date",value:b,onChange:T=>y(T.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-from"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.dateTo"," ")}),t.jsx("input",{type:"date",value:j,onChange:T=>w(T.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-to"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:I,className:"px-4 py-2 text-sm text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors","data-testid":"button-clear-filters",children:s("common.clearFilters"," ")})})]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:i?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(ts,{className:"animate-spin text-brand-600",size:40})}):o.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[t.jsx(gn,{size:60,className:"mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-semibold",children:s("traderHistory.noRecords","  ")}),t.jsx("p",{className:"text-sm",children:s("traderHistory.noRecordsDesc","     ")})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[800px]",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.date","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.tool","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.input","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.output","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.status","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:o.map(T=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>A(T),"data-testid":`row-action-${T.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm text-slate-700 font-medium",children:Yo(T.createdAt)}),t.jsx("div",{className:"text-xs text-slate-400",children:ms(T.createdAt).split(" ").slice(-1)[0]})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(x5,{toolType:T.toolType,isRTL:n})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-700 truncate max-w-[200px] block",children:L(T)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[200px] block",children:B(T)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(h5,{status:T.status,isRTL:n})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[T.outputFileUrl&&t.jsx("button",{onClick:z=>{z.stopPropagation()},className:"p-1.5 text-slate-400 hover:text-brand-600 transition-colors",title:s("common.download",""),"data-testid":`button-download-${T.id}`,children:t.jsx(tr,{size:16})}),t.jsx("button",{onClick:z=>{z.stopPropagation(),A(T)},className:"p-1.5 text-slate-400 hover:text-brand-600 transition-colors",title:s("common.details",""),"data-testid":`button-details-${T.id}`,children:t.jsx(zt,{size:16})})]})})]},T.id))})]})}),D>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:[s("common.showing","")," ",(S-1)*_+1,"-",Math.min(S*_,u)," ",s("common.of","")," ",u]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>O(T=>Math.max(1,T-1)),disabled:S===1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-prev-page",children:n?t.jsx(hs,{size:18}):t.jsx(Ns,{size:18})}),t.jsxs("span",{className:"text-sm text-slate-600 px-3",children:[S," / ",D]}),t.jsx("button",{onClick:()=>O(T=>Math.min(D,T+1)),disabled:S===D,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-next-page",children:n?t.jsx(Ns,{size:18}):t.jsx(hs,{size:18})})]})]})]})}),E&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>A(null),children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[80vh] overflow-y-auto",onClick:T=>T.stopPropagation(),dir:a,children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:s("traderHistory.detailsTitle"," ")}),t.jsx("button",{onClick:()=>A(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-modal",children:t.jsx(sa,{size:20,className:"text-slate-400"})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.tool","")}),t.jsx("div",{className:"mt-1",children:t.jsx(x5,{toolType:E.toolType,isRTL:n})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.status","")}),t.jsx("div",{className:"mt-1",children:t.jsx(h5,{status:E.status,isRTL:n})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.date","")}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:ms(E.createdAt)})]}),E.processingTimeMs&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.processingTime"," ")}),t.jsxs("p",{className:"text-sm text-slate-700",children:[(E.processingTimeMs/1e3).toFixed(2)," ",s("common.seconds","")]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.input","")}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:L(E)}),E.inputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(zt,{size:12}),E.inputFileName]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.output","")}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:B(E)}),E.outputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(zt,{size:12}),E.outputFileName]})]})]}),E.status==="FAILED"&&E.errorMessage&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-red-500 uppercase",children:s("traderHistory.errorMessage"," ")}),t.jsx("div",{className:"mt-1 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:E.errorMessage})})]}),E.metadata&&Object.keys(E.metadata).length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.additionalInfo"," ")}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg text-sm",children:[E.toolType==="VIN"&&E.metadata.confidence&&t.jsxs("p",{className:"text-slate-600",children:[s("traderHistory.confidence",""),": ",t.jsxs("span",{className:"font-medium",children:[E.metadata.confidence,"%"]})]}),E.toolType==="COMPARISON"&&E.metadata.suppliersCount&&t.jsxs("p",{className:"text-slate-600",children:[s("traderHistory.suppliersCompared"," "),": ",t.jsx("span",{className:"font-medium",children:E.metadata.suppliersCount})]}),E.toolType==="PDF_EXCEL"&&E.metadata.pageCount&&t.jsxs("p",{className:"text-slate-600",children:[s("traderHistory.pagesProcessed",""),": ",t.jsx("span",{className:"font-medium",children:E.metadata.pageCount})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 pt-2 border-t border-slate-100",children:[t.jsxs("span",{children:["ID: ",E.id]}),t.jsx("span",{children:""}),t.jsx("span",{children:E.deviceType})]})]})]})})]})},zde=[{value:"BUG",labelKey:"feedback.categories.bug",icon:cF},{value:"SUGGESTION",labelKey:"feedback.categories.suggestion",icon:Hp},{value:"COMPLAINT",labelKey:"feedback.categories.complaint",icon:Cs},{value:"QUESTION",labelKey:"feedback.categories.question",icon:h0},{value:"OTHER",labelKey:"feedback.categories.other",icon:hF}],Bde=[{value:"LOW",labelKey:"feedback.priorities.low",color:"bg-slate-100 text-slate-700"},{value:"MEDIUM",labelKey:"feedback.priorities.medium",color:"bg-yellow-100 text-yellow-700"},{value:"HIGH",labelKey:"feedback.priorities.high",color:"bg-red-100 text-red-700"},{value:"CRITICAL",labelKey:"feedback.priorities.critical",color:"bg-purple-100 text-purple-700"}];function $de({user:e}){const{t:s,i18n:a}=Kt(),r=a.language==="ar",[n,i]=C.useState(!1),[l,o]=C.useState(!1),[d,u]=C.useState(!1),[h,f]=C.useState(!0),[x,p]=C.useState("SUGGESTION"),[v,b]=C.useState("MEDIUM"),[y,j]=C.useState(""),[w,S]=C.useState(""),[O,_]=C.useState("");C.useEffect(()=>{he.getFeedbackSettings().then(D=>{f(D.enabled),p(D.defaultCategory),b(D.defaultPriority)})},[]),C.useEffect(()=>{e&&_(e.phone||e.email||"")},[e]);const E=()=>{p("SUGGESTION"),b("MEDIUM"),j(""),S("")},A=async()=>{if(!(!y.trim()||!w.trim())){o(!0);try{const D={category:x,priority:v,subject:y.trim(),message:w.trim(),pageContext:window.location.pathname,senderContact:O||void 0};e?await he.createFeedback(D,e.id,e.name,e.phone||e.email||"",e.role):await he.createPublicFeedback({senderName:s("feedback.guest",""),senderContact:O,...D}),u(!0),E(),setTimeout(()=>{u(!1),i(!1)},2e3)}catch(D){console.error("Failed to submit feedback:",D)}finally{o(!1)}}};return h?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>i(!0),className:`fixed ${r?"left-4":"right-4"} bottom-20 z-50 flex items-center justify-center w-12 h-12 bg-primary text-white rounded-full shadow-lg hover:bg-primary/90 transition-all hover:scale-110`,title:s("feedback.button"," "),"data-testid":"button-feedback-open",children:t.jsx(JO,{className:"w-5 h-5"})}),n&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",dir:r?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("h2",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(JO,{className:"w-5 h-5 text-primary"}),s("feedback.title"," ")]}),t.jsx("button",{onClick:()=>i(!1),className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","data-testid":"button-feedback-close",children:t.jsx(vt,{className:"w-5 h-5 text-slate-500"})})]}),d?t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Un,{className:"w-8 h-8 text-green-600"})}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:s("feedback.success","   !")}),t.jsx("p",{className:"text-sm text-slate-500",children:s("feedback.successDesc","    ")})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e&&t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 text-sm",children:[t.jsxs("span",{className:"text-slate-500",children:[s("feedback.sendingAs"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200 mx-2",children:e.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:s("feedback.category"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:zde.map(D=>{const L=D.icon;return t.jsxs("button",{onClick:()=>p(D.value),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm transition-all ${x===D.value?"bg-primary text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,"data-testid":`button-category-${D.value}`,children:[t.jsx(L,{className:"w-3.5 h-3.5"}),s(D.labelKey,D.value)]},D.value)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:s("feedback.priority","")}),t.jsx("div",{className:"flex gap-2",children:Bde.map(D=>t.jsx("button",{onClick:()=>b(D.value),className:`px-4 py-1.5 rounded-full text-sm transition-all ${v===D.value?D.color+" ring-2 ring-primary ring-offset-1":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,"data-testid":`button-priority-${D.value}`,children:s(D.labelKey,D.value)},D.value))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:[s("feedback.subject","")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:y,onChange:D=>j(D.target.value),placeholder:s("feedback.subjectPlaceholder","  "),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent","data-testid":"input-feedback-subject"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:[s("feedback.message","")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:w,onChange:D=>S(D.target.value),placeholder:s("feedback.messagePlaceholder","   ..."),rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent resize-none","data-testid":"input-feedback-message"})]}),!e&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:s("feedback.contact"," ")}),t.jsx("input",{type:"text",value:O,onChange:D=>_(D.target.value),placeholder:s("feedback.contactPlaceholder","    "),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent","data-testid":"input-feedback-contact"})]}),t.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsxs("span",{children:[s("feedback.pageContext"," "),":"]}),t.jsx("code",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:location})]})]}),t.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","data-testid":"button-feedback-cancel",children:s("common.cancel","")}),t.jsxs("button",{onClick:A,disabled:l||!y.trim()||!w.trim(),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-feedback-submit",children:[l?t.jsx(ts,{className:"w-4 h-4 animate-spin"}):t.jsx(xi,{className:"w-4 h-4"}),s("feedback.send","")]})]})]})]})})]}):null}const qde=({user:e,onBack:s})=>{const{t:a}=Kt(),{addToast:r}=It(),n=C.useRef(null),[i,l]=C.useState(null),[o,d]=C.useState(!1),[u,h]=C.useState(null),[f,x]=C.useState(""),[p,v]=C.useState(!1),[b,y]=C.useState([]),[j,w]=C.useState(!1),S=5*1024*1024,O=async()=>{try{const L=Ta.book_new(),B=[["MAIN_PART","ALT_PART","DESCRIPTION","BRAND"],["CN-102030","CN-102030-ALT","  ","OEM"],["MG-998877","MG-998877-AF","  ","Aftermarket"],["GL-COOL-01","GL-COOL-02"," ","OEM"]],I=Ta.aoa_to_sheet(B);Ta.book_append_sheet(L,I,"Alternatives"),nd(L,"SiniCar_Alternatives_Template.xlsx"),r(a("alternatives.templateDownloaded","  "),"success")}catch{r(a("alternatives.templateError","    "),"error")}},_=L=>{var T;const B=(T=L.target.files)==null?void 0:T[0];if(!B)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(B.type)&&!B.name.endsWith(".xlsx")&&!B.name.endsWith(".xls")&&!B.name.endsWith(".csv")){r(a("alternatives.invalidFileType","   .  Excel  CSV"),"error");return}if(B.size>S){r(a("alternatives.fileTooLarge","   .   5 "),"error");return}l(B),h(null)},E=async()=>{if(i){d(!0),h(null);try{const L=await i.arrayBuffer(),B=rd(L),I=B.Sheets[B.SheetNames[0]],T=Ta.sheet_to_json(I,{header:1});if(T.length<2){r(a("alternatives.emptyFile","      "),"error"),d(!1);return}const z=T[0].map(ee=>String(ee).toLowerCase().trim()),k=z.findIndex(ee=>ee.includes("main")||ee.includes("")||ee.includes("")),F=z.findIndex(ee=>ee.includes("alt")||ee.includes("")),P=z.findIndex(ee=>ee.includes("desc")||ee.includes("")),G=z.findIndex(ee=>ee.includes("brand")||ee.includes("")||ee.includes(""));if(k===-1||F===-1){r(a("alternatives.missingColumns","      MAIN_PART  ALT_PART"),"error"),d(!1);return}const Y=[];for(let ee=1;ee<T.length;ee++){const H=T[ee];!H||H.length===0||Y.push({mainPart:String(H[k]||""),altPart:String(H[F]||""),description:P>=0?String(H[P]||""):void 0,brand:G>=0?String(H[G]||""):void 0})}if(Y.length===0){r(a("alternatives.noDataRows","     "),"error"),d(!1);return}const W=await he.uploadAlternatives(Y,e.id,e.name);h(W),W.rowsInserted>0&&r(a("alternatives.uploadSuccess",`  ${W.rowsInserted}  `),"success"),W.rowsSkipped>0&&r(a("alternatives.someSkipped",`  ${W.rowsSkipped} `),"warning"),l(null),n.current&&(n.current.value="")}catch(L){console.error("Upload error:",L),r(a("alternatives.uploadError","    "),"error")}finally{d(!1)}}},A=async()=>{if(!f.trim()){r(a("alternatives.enterPartNumber","   "),"warning");return}v(!0),w(!0);try{const L=await he.searchAlternatives(f.trim());y(L)}catch(L){console.error("Search error:",L),r(a("alternatives.searchError","   "),"error")}finally{v(!1)}},D=L=>{L.key==="Enter"&&A()};return t.jsxs("div",{className:"p-4 md:p-6 max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s&&t.jsx("button",{onClick:s,className:"p-2 rounded-lg hover-elevate","data-testid":"button-back",children:t.jsx(yf,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:a("alternatives.title"," ")}),t.jsx("p",{className:"text-muted-foreground text-sm",children:a("alternatives.subtitle","        ")})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(va,{className:"w-5 h-5 text-primary"}),t.jsx("h2",{className:"text-lg font-semibold",children:a("alternatives.uploadTitle","  ")})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a("alternatives.uploadDescription","  Excel      ")}),t.jsxs("button",{onClick:O,className:"flex items-center gap-2 text-sm text-primary hover:underline","data-testid":"button-download-template",children:[t.jsx(tr,{className:"w-4 h-4"}),a("alternatives.downloadTemplate","  Excel")]}),t.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[t.jsx("input",{ref:n,type:"file",accept:".xlsx,.xls,.csv",onChange:_,className:"hidden",id:"alternatives-file-input","data-testid":"input-file-upload"}),t.jsxs("label",{htmlFor:"alternatives-file-input",className:"cursor-pointer flex flex-col items-center gap-2",children:[t.jsx(yn,{className:"w-10 h-10 text-muted-foreground"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:i?i.name:a("alternatives.selectFile","  Excel   ")})]})]}),i&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:E,disabled:o,className:"flex-1 bg-primary text-primary-foreground py-2 px-4 rounded-lg flex items-center justify-center gap-2 hover-elevate disabled:opacity-50","data-testid":"button-upload",children:o?t.jsxs(t.Fragment,{children:[t.jsx(ts,{className:"w-4 h-4 animate-spin"}),a("alternatives.uploading"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(va,{className:"w-4 h-4"}),a("alternatives.uploadButton"," ")]})}),t.jsx("button",{onClick:()=>{l(null),n.current&&(n.current.value="")},className:"p-2 text-muted-foreground hover:text-destructive hover-elevate rounded-lg","data-testid":"button-clear-file",children:t.jsx(At,{className:"w-4 h-4"})})]}),u&&t.jsxs("div",{className:`p-4 rounded-lg ${u.rowsInserted>0?"bg-green-500/10 border border-green-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.rowsInserted>0?t.jsx(Mt,{className:"w-5 h-5 text-green-500"}):t.jsx(Cs,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"font-medium",children:a("alternatives.uploadResult"," ")})]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[a("alternatives.rowsProcessed"," "),": ",u.rowsProcessed]}),t.jsxs("p",{children:[a("alternatives.rowsInserted"," "),": ",u.rowsInserted]}),t.jsxs("p",{children:[a("alternatives.rowsSkipped"," "),": ",u.rowsSkipped]})]}),u.errors&&u.errors.length>0&&t.jsx("div",{className:"mt-2 text-xs text-destructive",children:u.errors.slice(0,3).map((L,B)=>t.jsx("p",{children:L},B))})]})]}),t.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Lt,{className:"w-5 h-5 text-primary"}),t.jsx("h2",{className:"text-lg font-semibold",children:a("alternatives.searchTitle","  ")})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a("alternatives.searchDescription","      ")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:f,onChange:L=>x(L.target.value),onKeyPress:D,placeholder:a("alternatives.searchPlaceholder"," ..."),className:"flex-1 px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50","data-testid":"input-search-part"}),t.jsxs("button",{onClick:A,disabled:p,className:"bg-primary text-primary-foreground py-2 px-4 rounded-lg flex items-center gap-2 hover-elevate disabled:opacity-50","data-testid":"button-search",children:[p?t.jsx(ts,{className:"w-4 h-4 animate-spin"}):t.jsx(Lt,{className:"w-4 h-4"}),a("alternatives.searchButton","")]})]})]})]}),j&&t.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[t.jsx(Yt,{className:"w-5 h-5"}),a("alternatives.searchResults"," "),t.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",b.length," ",a("alternatives.results",""),")"]})]}),b.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm","data-testid":"table-results",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.mainPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.altPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.description","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.brand","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.source","")})]})}),t.jsx("tbody",{children:b.map(L=>t.jsxs("tr",{className:"border-b border-border/50 hover:bg-muted/50","data-testid":`row-alternative-${L.id}`,children:[t.jsx("td",{className:"p-3 font-mono",children:L.mainPartNumber}),t.jsx("td",{className:"p-3 font-mono text-primary",children:L.altPartNumber}),t.jsx("td",{className:"p-3 text-muted-foreground",children:L.description||"-"}),t.jsx("td",{className:"p-3",children:L.brand||"-"}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs ${L.sourceType==="CUSTOMER_UPLOAD"?"bg-blue-500/10 text-blue-600":"bg-green-500/10 text-green-600"}`,children:L.sourceType==="CUSTOMER_UPLOAD"?a("alternatives.customerUpload",""):a("alternatives.system","")})})]},L.id))})]})}):t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Yt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:a("alternatives.noResults","    ")}),t.jsx("p",{className:"text-sm mt-1",children:a("alternatives.noResultsHint","      ")})]})]})]})},Hde="sini_product_images",p5="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+PHJlY3QgZmlsbD0iI2YzZjRmNiIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIxMjAiLz48cGF0aCBmaWxsPSIjOWNhM2FmIiBkPSJNNjAgMzBjLTIwIDAtMzUgMTUtMzUgMzVzMTUgMzUgMzUgMzUgMzUtMTUgMzUtMzUtMTUtMzUtMzUtMzV6bTAgNjBjLTE0IDAtMjUtMTEtMjUtMjVzMTEtMjUgMjUtMjUgMjUgMTEgMjUgMjUtMTEgMjUtMjUgMjV6Ii8+PHBhdGggZmlsbD0iIzljYTNhZiIgZD0iTTYwIDQ1Yy0xMCAwLTIwIDgtMjAgMjBzMTAgMjAgMjAgMjAgMjAtOCAyMC0yMC0xMC0yMC0yMC0yMHptMCAzMGMtNSAwLTEwLTQtMTAtMTBzNS0xMCAxMC0xMCAxMCA0IDEwIDEwLTUgMTAtMTAgMTB6Ii8+PC9zdmc+",Vde=e=>{if(!e)return null;try{const s=localStorage.getItem(Hde);if(s){const r=JSON.parse(s).find(n=>{var i;return((i=n.partNumber)==null?void 0:i.toUpperCase())===e.toUpperCase()&&(n.status==="APPROVED"||n.status==="AUTO_MATCHED")&&n.isLinkedToProduct});if(r)return r.fileUrl||r.fullImage||r.thumbnailUrl||r.thumbnail||null}}catch(s){console.error("Error reading product images from localStorage:",s)}return null},Gde=({mainImageUrl:e,imageGallery:s=[],productName:a,partNumber:r,size:n="md",showIcon:i=!0,className:l=""})=>{const{t:o,i18n:d}=Kt(),u=d.language==="ar",[h,f]=C.useState(!1),[x,p]=C.useState(0),[v,b]=C.useState({x:0,y:0}),[y,j]=C.useState(!1),[w,S]=C.useState(!1),[O,_]=C.useState(!1),[E,A]=C.useState(!1),D=C.useRef(null),L=C.useRef(null),I=[C.useMemo(()=>e||(r?Vde(r):null),[e,r]),...s||[]].filter(Boolean),T=I.length>0,z=I[x]||p5,k={sm:"w-10 h-10",md:"w-14 h-14",lg:"w-20 h-20"},F=C.useCallback(()=>{T&&(f(!0),p(0),S(!1),_(!1),setTimeout(()=>A(!0),10))},[T]),P=C.useCallback(()=>{A(!1),setTimeout(()=>{f(!1),j(!1)},200)},[]),G=C.useCallback(()=>{p(M=>M===0?I.length-1:M-1),S(!1),_(!1)},[I.length]),Y=C.useCallback(()=>{p(M=>M===I.length-1?0:M+1),S(!1),_(!1)},[I.length]),W=C.useCallback(M=>{if(!L.current||!D.current||!w)return;const X=L.current.getBoundingClientRect(),K=(M.clientX-X.left)/X.width*100,Q=(M.clientY-X.top)/X.height*100,se=Math.max(12,Math.min(88,K)),V=Math.max(12,Math.min(88,Q));b({x:se,y:V}),j(!0)},[w]),ee=C.useCallback(()=>{j(!1)},[]),H=C.useCallback(M=>{h&&(M.key==="Escape"&&P(),M.key==="ArrowLeft"&&(u?Y():G()),M.key==="ArrowRight"&&(u?G():Y()))},[h,P,G,Y,u]);return C.useEffect(()=>(window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)),[H]),C.useEffect(()=>(h?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[h]),!i&&!T?null:t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:F,disabled:!T,className:`
          relative flex items-center justify-center rounded-lg transition-all overflow-hidden border border-slate-200 dark:border-slate-700
          ${T?"bg-white hover:border-brand-400 hover:shadow-sm":"bg-slate-100 text-slate-400 cursor-not-allowed"}
          ${k[n]}
          ${l}
        `,"aria-label":T?o("productImages.viewImage"," "):o("productImages.noImage","  "),title:T?o("productImages.viewImage"," "):o("productImages.noImage","  "),"data-testid":`button-view-image-${r||"product"}`,children:T?t.jsx("img",{src:z,alt:a,className:"w-full h-full object-cover",onError:M=>{var X;M.target.style.display="none",(X=M.target.parentElement)==null||X.classList.add("bg-slate-100","text-slate-400")}}):t.jsx(dr,{className:"w-1/2 h-1/2"})}),h&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"product-image-viewer-title",children:[t.jsx("div",{className:`absolute inset-0 bg-slate-900/70 backdrop-blur-sm transition-opacity duration-200 ${E?"opacity-100":"opacity-0"}`,onClick:P}),t.jsxs("div",{className:`
              relative z-10 w-full max-w-4xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl overflow-hidden
              transform transition-all duration-200
              ${E?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}
            `,onClick:M=>M.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",children:[t.jsxs("div",{className:`flex items-center gap-3 ${u?"flex-row-reverse":""}`,children:[t.jsx("div",{className:"p-2 bg-brand-100 dark:bg-brand-900 rounded-lg",children:t.jsx(Yt,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"})}),t.jsxs("div",{className:u?"text-right":"text-left",children:[t.jsx("h3",{id:"product-image-viewer-title",className:"font-semibold text-slate-900 dark:text-white truncate max-w-md",children:a}),r&&t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono",children:r})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${u?"flex-row-reverse":""}`,children:[I.length>1&&t.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 px-3 py-1 bg-slate-200 dark:bg-slate-700 rounded-full",children:[x+1," / ",I.length]}),t.jsx("button",{onClick:P,className:"p-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors","aria-label":o("productImages.closeViewer",""),"data-testid":"button-close-image-modal",children:t.jsx(vt,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})})]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{ref:L,className:"relative aspect-square max-h-[60vh] w-full flex items-center justify-center bg-slate-100 dark:bg-slate-800 cursor-crosshair overflow-hidden",onMouseMove:W,onMouseLeave:ee,role:"img","aria-label":`${a} ${o("productImages.image","")} ${x+1} / ${I.length}`,children:[!w&&!O&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-10 h-10 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"})}),t.jsx("img",{ref:D,src:z,alt:a,className:`max-w-full max-h-full object-contain transition-opacity duration-300 ${w?"opacity-100":"opacity-0"}`,onLoad:()=>S(!0),onError:()=>{_(!0),S(!0)},draggable:!1}),y&&w&&!O&&t.jsx("div",{className:"absolute pointer-events-none w-36 h-36 border-4 border-white dark:border-slate-600 rounded-full overflow-hidden",style:{left:`calc(${v.x}% - 72px)`,top:`calc(${v.y}% - 72px)`,backgroundImage:`url(${z})`,backgroundPosition:`${v.x}% ${v.y}%`,backgroundSize:"300%",backgroundRepeat:"no-repeat",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},"aria-hidden":"true",children:t.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[t.jsx("div",{className:"w-px h-full bg-white/30 absolute"}),t.jsx("div",{className:"w-full h-px bg-white/30 absolute"})]})}),O&&t.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-slate-400",children:[t.jsx(Li,{className:"w-16 h-16"}),t.jsx("span",{children:o("productImages.loadError","  ")})]})]}),I.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:u?Y:G,className:`absolute top-1/2 -translate-y-1/2 ${u?"right-2":"left-2"} p-3 bg-white/90 dark:bg-slate-700/90 hover:bg-white dark:hover:bg-slate-600 rounded-full shadow-lg transition-colors`,"aria-label":o("productImages.prevImage"," "),"data-testid":"button-prev-image",children:t.jsx(Ns,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})}),t.jsx("button",{onClick:u?G:Y,className:`absolute top-1/2 -translate-y-1/2 ${u?"left-2":"right-2"} p-3 bg-white/90 dark:bg-slate-700/90 hover:bg-white dark:hover:bg-slate-600 rounded-full shadow-lg transition-colors`,"aria-label":o("productImages.nextImage"," "),"data-testid":"button-next-image",children:t.jsx(hs,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]})]}),I.length>1&&t.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",children:t.jsx("div",{className:`flex gap-2 overflow-x-auto pb-2 ${u?"flex-row-reverse":""}`,role:"tablist","aria-label":o("productImages.thumbnailList","  "),children:I.map((M,X)=>t.jsx("button",{onClick:()=>{p(X),S(!1),_(!1)},className:`
                        flex-shrink-0 w-14 h-14 rounded-lg overflow-hidden border-2 transition-colors
                        ${X===x?"border-brand-500 ring-2 ring-brand-300":"border-slate-200 dark:border-slate-600 hover:border-brand-300"}
                      `,role:"tab","aria-selected":X===x,"aria-label":`${o("productImages.thumbnail"," ")} ${X+1}`,"data-testid":`button-thumbnail-${X}`,children:t.jsx("img",{src:M,alt:`${a} - ${X+1}`,className:"w-full h-full object-cover",onError:K=>{K.target.src=p5}})},X))})}),t.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 bg-slate-100 dark:bg-slate-900",children:t.jsxs("div",{className:`flex items-center justify-center gap-2 text-xs text-slate-500 dark:text-slate-400 ${u?"flex-row-reverse":""}`,children:[t.jsx(wF,{className:"w-4 h-4"}),t.jsx("span",{children:o("productImages.magnifierHint","    ")})]})})]})]})]})};function Wde(e){if((e.qtyTotal||e.stock||0)<=0&&e.availabilityType!=="ORDER")return{type:"OUT_OF_STOCK",label:"Out of Stock",labelAr:" ",color:"text-red-600",bgColor:"bg-red-100"};if(e.availabilityType==="ORDER"||e.storageSection==="ORDER_PRODUCTS"){const a=e.deliveryHours||e.uploadBatchDeliveryHours||24;return{type:"ORDER",label:`Available on Order (${a}h)`,labelAr:`  ${a} `,color:"text-amber-600",bgColor:"bg-amber-100",deliveryHours:a}}return{type:"IN_STOCK",label:"In Stock",labelAr:"",color:"text-green-600",bgColor:"bg-green-100"}}function Qde(e){const s=Wde(e);switch(s.type){case"IN_STOCK":return{text:s.labelAr,className:"bg-green-100 text-green-700 border-green-200",icon:""};case"ORDER":return{text:s.labelAr,className:"bg-amber-100 text-amber-700 border-amber-200",icon:""};case"OUT_OF_STOCK":return{text:s.labelAr,className:"bg-red-100 text-red-700 border-red-200",icon:""}}}const b1="siniCar_productSearch_requestDraft";function Kde({user:e,profile:s,onBack:a}){const{t:r,i18n:n}=Kt(),i=n.language==="ar",[l,o]=C.useState(""),[d,u]=C.useState(""),[h,f]=C.useState(""),[x,p]=C.useState(""),[v,b]=C.useState([]),[y,j]=C.useState(!1),[w,S]=C.useState(1),[O,_]=C.useState(0),E=20,[A,D]=C.useState([]),[L,B]=C.useState(!1),[I,T]=C.useState(""),[z,k]=C.useState({open:!1,partNumber:"",productName:""}),[F,P]=C.useState([]),[G,Y]=C.useState(!1),[W,ee]=C.useState([]),[H,M]=C.useState(()=>(s==null?void 0:s.searchPointsRemaining)||(e==null?void 0:e.searchLimit)||50),[X,K]=C.useState(new Set),Q=C.useCallback(ne=>{if(!X.has(ne)&&!(H<=0)&&(K(pe=>new Set(pe).add(ne)),M(pe=>Math.max(0,pe-1)),s)){const pe=Math.max(0,H-1),Ee=JSON.parse(localStorage.getItem("sinicar_profiles")||"[]"),Ie=Ee.findIndex(_e=>_e.id===s.id);Ie>=0&&(Ee[Ie].searchPointsRemaining=pe,localStorage.setItem("sinicar_profiles",JSON.stringify(Ee)))}},[X,H,s]),se=C.useCallback(ne=>{const pe=ne.priceWholesale||ne.price||0;if(ne.profitMarginOverride!==void 0&&ne.profitMarginOverride>0)return Math.round(pe*(1+ne.profitMarginOverride/100));try{const Ee=JSON.parse(localStorage.getItem("sinicar_supplier_marketplace")||"{}"),Ie=Ee.defaultMarkupPercent||Ee.minProfitMargin||0;if(ne.supplierId&&Ee.supplierPriorities){const _e=Ee.supplierPriorities.find(Ge=>Ge.supplierId===ne.supplierId);if(_e!=null&&_e.minProfitMargin)return Math.round(pe*(1+_e.minProfitMargin/100))}if(Ie>0)return Math.round(pe*(1+Ie/100))}catch(Ee){console.error("Error loading margin settings:",Ee)}return pe},[]);C.useEffect(()=>{const ne=localStorage.getItem(b1);if(ne)try{const pe=JSON.parse(ne);Array.isArray(pe)&&D(pe)}catch{}he.searchProducts("").then(pe=>{const Ee=[...new Set(pe.map(Ie=>Ie.brand).filter(Boolean))];ee(Ee)})},[]),C.useEffect(()=>{localStorage.setItem(b1,JSON.stringify(A))},[A]);const V=async()=>{if(!(!l.trim()&&!d&&!h&&!x)){j(!0),S(1);try{const ne=await he.advancedSearchProducts({q:l,brand:d||void 0,make:h||void 0,year:x||void 0,page:1,pageSize:E});b(ne.items),_(ne.total)}catch(ne){console.error("Search error:",ne)}finally{j(!1)}}},te=async ne=>{j(!0),S(ne);try{const pe=await he.advancedSearchProducts({q:l,brand:d||void 0,make:h||void 0,year:x||void 0,page:ne,pageSize:E});b(pe.items),_(pe.total)}catch(pe){console.error("Page change error:",pe)}finally{j(!1)}},Z=ne=>{ne.key==="Enter"&&V()},ue=C.useCallback(ne=>{D(pe=>pe.find(Ie=>Ie.productId===ne.id)?pe.map(Ie=>Ie.productId===ne.id?{...Ie,quantity:Ie.quantity+1}:Ie):[...pe,{productId:ne.id,partNumber:ne.partNumber,productName:ne.name,quantity:1,priceAtRequest:ne.priceWholesale||ne.price}])},[]),re=(ne,pe)=>{D(Ee=>Ee.map(Ie=>{if(Ie.productId===ne){const _e=Math.max(1,Ie.quantity+pe);return{...Ie,quantity:_e}}return Ie}))},J=ne=>{D(pe=>pe.filter(Ee=>Ee.productId!==ne))},Ne=async()=>{if(A.length!==0){B(!0),T("");try{const ne=await he.createPurchaseRequest(e.id,e.name,(s==null?void 0:s.companyName)||"",A);ne.success&&(T(i?`   !  : ${ne.requestId}`:`Request sent successfully! Request ID: ${ne.requestId}`),D([]),localStorage.removeItem(b1))}catch(ne){console.error("Send request error:",ne)}finally{B(!1)}}},q=async(ne,pe)=>{k({open:!0,partNumber:ne,productName:pe}),Y(!0),P([]);try{const Ee=await he.searchAlternatives(ne);P(Ee)}catch(Ee){console.error("Alternatives search error:",Ee)}finally{Y(!1)}},ce=()=>{k({open:!1,partNumber:"",productName:""}),P([])},fe=Math.ceil(O/E),ie=ne=>{const pe=ne.qtyTotal??ne.stock??0;return pe>10?{text:i?"":"In Stock",color:"text-green-600"}:pe>0?{text:i?" ":"Limited",color:"text-yellow-600"}:{text:i?" ":"Out of Stock",color:"text-red-600"}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-6",dir:i?"rtl":"ltr",children:[t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:t.jsx(Lt,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:i?" ":"Quick Orders"}),t.jsx("p",{className:"text-sm text-gray-400",children:i?"     ":"Search products and add to purchase request"}),t.jsx("div",{className:"flex items-center gap-2 mt-2",children:t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${H>10?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":H>0?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[t.jsx(yse,{size:14}),i?`${H}  `:`${H} points left`]})})]})]}),a&&t.jsxs("button",{onClick:a,className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg flex items-center gap-2 transition-colors","data-testid":"button-back",children:[i?t.jsx(hs,{size:18}):t.jsx(Ns,{size:18}),i?"":"Back"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-4",children:t.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[t.jsx("div",{className:"flex-1 min-w-[200px]",children:t.jsx("input",{type:"text",value:l,onChange:ne=>o(ne.target.value),onKeyDown:Z,placeholder:i?"   ...":"Part number or name...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-search-query"})}),t.jsxs("select",{value:d,onChange:ne=>u(ne.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"select-brand-filter",children:[t.jsx("option",{value:"",className:"bg-slate-800",children:i?" ":"All Brands"}),W.map(ne=>t.jsx("option",{value:ne,className:"bg-slate-800",children:ne},ne))]}),t.jsx("input",{type:"text",value:h,onChange:ne=>f(ne.target.value),onKeyDown:Z,placeholder:i?" ":"Car Make",className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 w-32","data-testid":"input-make-filter"}),t.jsx("input",{type:"text",value:x,onChange:ne=>p(ne.target.value),onKeyDown:Z,placeholder:i?"":"Year",className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 w-24","data-testid":"input-year-filter"}),t.jsxs("button",{onClick:V,disabled:y,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl flex items-center gap-2 transition-all disabled:opacity-50","data-testid":"button-search",children:[y?t.jsx(ts,{className:"w-5 h-5 animate-spin"}):t.jsx(Lt,{className:"w-5 h-5"}),i?"":"Search"]})]})}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:t.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[t.jsx(Yt,{className:"w-5 h-5"}),i?" ":"Search Results",O>0&&t.jsxs("span",{className:"text-sm text-gray-400",children:["(",O,")"]})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-white/5",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-400 uppercase w-12",children:r("productImages.mainImage","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?" ":"Part #"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Name"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Brand"}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:i?"":"Price"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Stock"}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:i?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-white/10",children:v.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-gray-400",children:y?t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(ts,{className:"w-5 h-5 animate-spin"}),i?" ...":"Searching..."]}):i?"    ":"Start searching to find products"})}):v.map(ne=>{ie(ne);const pe=A.some(Ee=>Ee.productId===ne.id);return t.jsxs("tr",{className:"hover:bg-white/5 transition-colors","data-testid":`row-product-${ne.id}`,children:[t.jsx("td",{className:"px-2 py-3 text-center",children:t.jsx(Gde,{mainImageUrl:ne.mainImageUrl||ne.image,imageGallery:ne.imageGallery,productName:ne.name,partNumber:ne.partNumber,size:"sm"})}),t.jsx("td",{className:"px-4 py-3 text-sm text-white font-mono",children:ne.partNumber}),t.jsx("td",{className:"px-4 py-3 text-sm text-white",children:ne.name}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:ne.brand||"-"}),t.jsx("td",{className:"px-4 py-3 text-center",children:X.has(ne.id)?t.jsxs("span",{className:"text-emerald-400 font-bold",children:[se(ne).toLocaleString()," ."]}):H>0?t.jsxs("button",{onClick:()=>Q(ne.id),className:"px-3 py-1.5 bg-amber-500/20 text-amber-400 hover:bg-amber-500/30 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors border border-amber-500/30 mx-auto","data-testid":`button-view-price-${ne.id}`,children:[t.jsx(ns,{size:14}),i?" ":"View Price"]}):t.jsxs("span",{className:"text-gray-500 text-xs flex items-center gap-1 justify-center",children:[t.jsx(dr,{size:14}),i?"  ":"No points"]})}),t.jsx("td",{className:"px-4 py-3",children:(()=>{const Ee=Qde(ne);return t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold border ${Ee.className}`,children:[t.jsx("span",{children:Ee.icon}),t.jsx("span",{children:Ee.text})]})})()}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsxs("button",{onClick:()=>ue(ne),className:`px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors ${pe?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 border border-blue-500/30"}`,"data-testid":`button-add-${ne.id}`,children:[t.jsx(kt,{size:14}),i?"":"Add"]}),t.jsxs("button",{onClick:()=>q(ne.partNumber,ne.name),className:"px-3 py-1.5 bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors border border-purple-500/30","data-testid":`button-alternatives-${ne.id}`,children:[t.jsx(Mr,{size:14}),i?"":"Alt"]})]})})]},ne.id)})})]})}),fe>1&&t.jsxs("div",{className:"p-4 border-t border-white/10 flex items-center justify-between",children:[t.jsxs("button",{onClick:()=>te(w-1),disabled:w===1||y,className:"px-4 py-2 bg-white/10 hover:bg-white/20 disabled:opacity-50 text-white rounded-lg flex items-center gap-2 transition-colors","data-testid":"button-prev-page",children:[i?t.jsx(hs,{size:18}):t.jsx(Ns,{size:18}),i?"":"Prev"]}),t.jsx("span",{className:"text-sm text-gray-400",children:i?` ${w}  ${fe}`:`Page ${w} of ${fe}`}),t.jsxs("button",{onClick:()=>te(w+1),disabled:w===fe||y,className:"px-4 py-2 bg-white/10 hover:bg-white/20 disabled:opacity-50 text-white rounded-lg flex items-center gap-2 transition-colors","data-testid":"button-next-page",children:[i?"":"Next",i?t.jsx(Ns,{size:18}):t.jsx(hs,{size:18})]})]})]})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 sticky top-4",children:[t.jsx("div",{className:"p-4 border-b border-white/10",children:t.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[t.jsx(qa,{className:"w-5 h-5"}),i?" ":"Purchase Request",A.length>0&&t.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:A.length})]})}),t.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:A.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(qa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:i?"  ":"No items yet"}),t.jsx("p",{className:"text-sm mt-1",children:i?"    ":"Add products from search results"})]}):t.jsx("div",{className:"space-y-3",children:A.map(ne=>t.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10","data-testid":`cart-item-${ne.productId}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-white truncate",children:ne.productName}),t.jsx("p",{className:"text-xs text-gray-400 font-mono",children:ne.partNumber})]}),t.jsx("button",{onClick:()=>J(ne.productId),className:"p-1 text-red-400 hover:bg-red-500/20 rounded transition-colors","data-testid":`button-remove-${ne.productId}`,children:t.jsx(At,{size:16})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>re(ne.productId,-1),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors","data-testid":`button-decrease-${ne.productId}`,children:t.jsx(oE,{size:14,className:"text-white"})}),t.jsx("span",{className:"text-white font-medium w-8 text-center",children:ne.quantity}),t.jsx("button",{onClick:()=>re(ne.productId,1),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors","data-testid":`button-increase-${ne.productId}`,children:t.jsx(kt,{size:14,className:"text-white"})})]})]},ne.productId))})}),A.length>0&&t.jsxs("div",{className:"p-4 border-t border-white/10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[t.jsx("span",{className:"text-gray-400",children:i?" :":"Total Items:"}),t.jsx("span",{className:"text-white font-medium",children:A.reduce((ne,pe)=>ne+pe.quantity,0)})]}),I&&t.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-xl text-green-400 text-sm","data-testid":"text-success-message",children:I}),t.jsxs("button",{onClick:Ne,disabled:L||A.length===0,className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 text-white rounded-xl flex items-center justify-center gap-2 font-medium transition-all","data-testid":"button-send-request",children:[L?t.jsx(ts,{className:"w-5 h-5 animate-spin"}):t.jsx(xi,{className:"w-5 h-5"}),i?"  ":"Send Purchase Request"]})]})]})})]})]}),z.open&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-white/20 w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[t.jsx(Mr,{className:"w-5 h-5"}),i?" ":"Available Alternatives"]}),t.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[z.productName," - ",z.partNumber]})]}),t.jsx("button",{onClick:ce,className:"p-2 hover:bg-white/10 rounded-lg transition-colors","data-testid":"button-close-alternatives",children:t.jsx(vt,{className:"w-5 h-5 text-gray-400"})})]}),t.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:G?t.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-400",children:[t.jsx(ts,{className:"w-6 h-6 animate-spin mr-2"}),i?"   ...":"Searching for alternatives..."]}):F.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-400",children:[t.jsx(Mr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:i?"   ":"No alternatives found"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-white/5",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?" ":"Main Part"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?" ":"Alt Part"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Description"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Brand"})]})}),t.jsx("tbody",{className:"divide-y divide-white/10",children:F.map(ne=>t.jsxs("tr",{className:"hover:bg-white/5","data-testid":`row-alternative-${ne.id}`,children:[t.jsx("td",{className:"px-4 py-2 text-sm text-white font-mono",children:ne.mainPartNumber}),t.jsx("td",{className:"px-4 py-2 text-sm text-blue-400 font-mono",children:ne.altPartNumber}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-300",children:ne.description||"-"}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-300",children:ne.brand||"-"})]},ne.id))})]})})})]})})]})}const Ec={owner:{ar:"",en:"Owner",color:"bg-amber-500"},manager:{ar:"",en:"Manager",color:"bg-blue-500"},staff:{ar:"",en:"Staff",color:"bg-green-500"},readonly:{ar:" ",en:"Read Only",color:"bg-gray-500"}},Oc={adv_view_campaigns:{ar:" ",en:"View Campaigns",category:"advertising"},adv_manage_campaigns:{ar:" ",en:"Manage Campaigns",category:"advertising"},adv_manage_slots:{ar:"  ",en:"Manage Ad Slots",category:"advertising"},adv_view_reports:{ar:" ",en:"View Reports",category:"advertising"},sup_view_forwarded_requests:{ar:"  ",en:"View Forwarded Requests",category:"supplier"},sup_submit_offers:{ar:" ",en:"Submit Offers",category:"supplier"},sup_view_team_activity:{ar:"  ",en:"View Team Activity",category:"supplier"},sup_manage_products:{ar:" ",en:"Manage Products",category:"supplier"},sup_view_analytics:{ar:" ",en:"View Analytics",category:"supplier"},cust_create_orders:{ar:" ",en:"Create Orders",category:"customer"},cust_view_orders:{ar:" ",en:"View Orders",category:"customer"},cust_create_installment_requests:{ar:"  ",en:"Create Installment Requests",category:"customer"},cust_manage_installment_requests:{ar:"  ",en:"Manage Installment Requests",category:"customer"},cust_use_trader_tools:{ar:"  ",en:"Use Trader Tools",category:"customer"},cust_view_team_activity:{ar:"  ",en:"View Team Activity",category:"customer"},cust_view_prices:{ar:" ",en:"View Prices",category:"customer"},cust_manage_cart:{ar:" ",en:"Manage Cart",category:"customer"},aff_view_links:{ar:" ",en:"View Links",category:"affiliate"},aff_manage_links:{ar:" ",en:"Manage Links",category:"affiliate"},aff_view_commissions:{ar:" ",en:"View Commissions",category:"affiliate"},aff_withdraw_commissions:{ar:" ",en:"Withdraw Commissions",category:"affiliate"},aff_view_analytics:{ar:" ",en:"View Analytics",category:"affiliate"},org_manage_team:{ar:" ",en:"Manage Team",category:"organization"},org_view_logs:{ar:" ",en:"View Logs",category:"organization"},org_view_settings:{ar:" ",en:"View Settings",category:"organization"},org_edit_profile:{ar:" ",en:"Edit Profile",category:"organization"}},Xx={customer:{ar:"",en:"Customer"},supplier:{ar:"",en:"Supplier"},advertising:{ar:"",en:"Advertising"},affiliate:{ar:"",en:"Affiliate"},organization:{ar:"",en:"Organization"}};function g5(e){switch(e){case"customer":return{ar:"",en:"Customer"};case"supplier":return{ar:"",en:"Supplier"};case"advertiser":return{ar:"",en:"Advertiser"};case"affiliate":return{ar:"",en:"Affiliate"};case"platform":return{ar:"",en:"Platform"};default:return{ar:e,en:e}}}function Jde(e){const s=["org_manage_team","org_view_logs","org_view_settings","org_edit_profile"];switch(e){case"customer":return[...s,"cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart"];case"supplier":return[...s,"sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics"];case"advertiser":return[...s,"adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports"];case"affiliate":return[...s,"aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics"];default:return s}}function Yde(e){const s={};return e.forEach(a=>{const r=Oc[a],n=(r==null?void 0:r.category)||"other";s[n]||(s[n]=[]),s[n].push(a)}),s}function Xde({organizationType:e,entityId:s,entityName:a,currentUserId:r}){const{t:n,i18n:i}=Kt(),{addToast:l}=It(),o=i.language==="ar",[d,u]=C.useState(null),[h,f]=C.useState([]),[x,p]=C.useState([]),[v,b]=C.useState(null),[y,j]=C.useState(!0),[w,S]=C.useState(""),[O,_]=C.useState("all"),[E,A]=C.useState("members"),[D,L]=C.useState(!1),[B,I]=C.useState(!1),[T,z]=C.useState(!1),[k,F]=C.useState(null),[P,G]=C.useState({email:"",name:"",role:"staff",permissions:[]}),[Y,W]=C.useState({role:"staff",permissions:[],jobTitle:"",department:""}),ee=(d==null?void 0:d.ownerUserId)===r,H=h.find(ce=>ce.userId===r),M=ee||((H==null?void 0:H.permissions.includes("org_manage_team"))??!1),X=C.useMemo(()=>Jde(e),[e]),K=C.useMemo(()=>Yde(X),[X]);C.useEffect(()=>{Q()},[e,s]);async function Q(){j(!0);try{let ce=await he.getOrCreateOrganizationForEntity(e,s,a,r);if(u(ce),ce){const[fe,ie,ne]=await Promise.all([he.getOrganizationUsers(ce.id),he.getTeamInvitations(ce.id),he.getOrganizationStats(ce.id)]);f(fe),p(ie),b(ne)}}catch(ce){console.error("Error loading team data:",ce),l("     ","error")}finally{j(!1)}}const se=C.useMemo(()=>h.filter(ce=>{var ne,pe;const fe=w===""||((ne=ce.jobTitle)==null?void 0:ne.toLowerCase().includes(w.toLowerCase()))||((pe=ce.department)==null?void 0:pe.toLowerCase().includes(w.toLowerCase())),ie=O==="all"||ce.role===O;return fe&&ie}),[h,w,O]);async function V(){if(!d||!P.email){l("   ","error");return}try{const ce=await he.getOrganizationSettings(),fe=await he.getOrganizationUsers(d.id),ie=d.type==="customer"?ce.maxCustomerEmployees:d.type==="supplier"?ce.maxSupplierEmployees:d.type==="advertiser"?ce.maxAdvertiserEmployees:ce.maxAffiliateEmployees;if(fe.length>=ie){l("     ","error");return}const ne=await he.createTeamInvitation(d.id,r,{email:P.email,name:P.name,role:P.role,permissions:P.permissions});p(pe=>[...pe,ne]),L(!1),G({email:"",name:"",role:"staff",permissions:[]}),l("   ","success"),await Q()}catch(ce){console.error("Error inviting member:",ce),l("    ","error")}}async function te(){if(!(!d||!k))try{await he.updateOrganizationUser(k.id,{role:Y.role,permissions:Y.permissions,jobTitle:Y.jobTitle,department:Y.department}),I(!1),F(null),l("   ","success"),await Q()}catch(ce){console.error("Error updating member:",ce),l("    ","error")}}async function Z(){if(!(!d||!k))try{await he.removeOrganizationUser(k.id),z(!1),F(null),l("   ","success"),await Q()}catch(ce){console.error("Error removing member:",ce),l("    ","error")}}async function ue(ce){try{await he.cancelTeamInvitation(ce),l("  ","success"),await Q()}catch(fe){console.error("Error cancelling invitation:",fe),l("    ","error")}}async function re(ce){if(d)try{await he.updateOrganizationUser(ce.id,{isActive:!ce.isActive}),l(ce.isActive?"  ":"  ","success"),await Q()}catch{l(" ","error")}}function J(ce){F(ce),W({role:ce.role,permissions:[...ce.permissions],jobTitle:ce.jobTitle||"",department:ce.department||""}),I(!0)}function Ne(ce){F(ce),z(!0)}function q(ce,fe){fe==="invite"?G(ie=>({...ie,permissions:ie.permissions.includes(ce)?ie.permissions.filter(ne=>ne!==ce):[...ie.permissions,ce]})):W(ie=>({...ie,permissions:ie.permissions.includes(ce)?ie.permissions.filter(ne=>ne!==ce):[...ie.permissions,ce]}))}return y?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(Gt,{className:"w-8 h-8 animate-spin text-amber-500"})}):t.jsxs("div",{className:`space-y-6 ${o?"rtl":"ltr"}`,dir:o?"rtl":"ltr",children:[t.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-slate-700",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-xl bg-amber-500/20 flex items-center justify-center",children:t.jsx(ta,{className:"w-7 h-7 text-amber-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white","data-testid":"text-team-title",children:o?" ":"Team Management"}),t.jsxs("p",{className:"text-slate-400",children:[a," - ",o?g5(e).ar:g5(e).en]})]})]}),M&&t.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-slate-900 rounded-lg font-medium hover:bg-amber-400 transition-colors","data-testid":"button-invite-member",children:[t.jsx(al,{className:"w-5 h-5"}),t.jsx("span",{children:o?" ":"Invite Member"})]})]}),v&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-white","data-testid":"text-total-members",children:v.totalMembers}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Total Members"})]}),t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-green-400","data-testid":"text-active-members",children:v.activeMembers}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Active Members"})]}),t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-amber-400","data-testid":"text-pending-invites",children:v.pendingInvitations}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Pending Invites"})]}),t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-400","data-testid":"text-recent-activities",children:v.recentActivities}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Recent Activities"})]})]})]}),t.jsxs("div",{className:"flex gap-2 border-b border-slate-700",children:[t.jsxs("button",{onClick:()=>A("members"),className:`px-4 py-3 font-medium transition-colors ${E==="members"?"text-amber-400 border-b-2 border-amber-400":"text-slate-400 hover:text-white"}`,"data-testid":"tab-members",children:[t.jsx(Wt,{className:"w-4 h-4 inline-block mr-2"}),o?"":"Members"," (",h.length,")"]}),t.jsxs("button",{onClick:()=>A("invitations"),className:`px-4 py-3 font-medium transition-colors ${E==="invitations"?"text-amber-400 border-b-2 border-amber-400":"text-slate-400 hover:text-white"}`,"data-testid":"tab-invitations",children:[t.jsx(Fl,{className:"w-4 h-4 inline-block mr-2"}),o?"":"Invitations"," (",x.filter(ce=>ce.status==="pending").length,")"]}),t.jsxs("button",{onClick:()=>A("activity"),className:`px-4 py-3 font-medium transition-colors ${E==="activity"?"text-amber-400 border-b-2 border-amber-400":"text-slate-400 hover:text-white"}`,"data-testid":"tab-activity",children:[t.jsx(Wr,{className:"w-4 h-4 inline-block mr-2"}),o?"":"Activity"]})]}),E==="members"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),t.jsx("input",{type:"text",value:w,onChange:ce=>S(ce.target.value),placeholder:o?"  ...":"Search members...",className:"w-full pl-10 pr-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"input-search-members"})]}),t.jsxs("select",{value:O,onChange:ce=>_(ce.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"select-role-filter",children:[t.jsx("option",{value:"all",children:o?" ":"All Roles"}),Object.entries(Ec).map(([ce,fe])=>t.jsx("option",{value:ce,children:o?fe.ar:fe.en},ce))]})]}),t.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:se.length===0?t.jsxs("div",{className:"p-8 text-center text-slate-400",children:[t.jsx(Wt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:o?"  ":"No members found"})]}):t.jsx("div",{className:"divide-y divide-slate-700",children:se.map(ce=>t.jsxs("div",{className:"p-4 hover:bg-slate-700/50 transition-colors","data-testid":`member-row-${ce.userId}`,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium",children:ce.userId.slice(0,2).toUpperCase()})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-white",children:ce.jobTitle||`User ${ce.userId}`}),(d==null?void 0:d.ownerUserId)===ce.userId&&t.jsx("span",{className:"px-2 py-0.5 text-xs bg-amber-500/20 text-amber-400 rounded",children:o?"":"Owner"}),!ce.isActive&&t.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded",children:o?"":"Inactive"})]}),t.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs text-white ${Ec[ce.role].color}`,children:o?Ec[ce.role].ar:Ec[ce.role].en}),ce.department&&t.jsxs("span",{children:[" ",ce.department]})]})]})]}),M&&ce.role!=="owner"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>re(ce),className:`p-2 rounded-lg transition-colors ${ce.isActive?"text-green-400 hover:bg-green-500/20":"text-red-400 hover:bg-red-500/20"}`,title:ce.isActive?"Deactivate":"Activate","data-testid":`button-toggle-status-${ce.userId}`,children:ce.isActive?t.jsx(x0,{className:"w-5 h-5"}):t.jsx(yu,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>J(ce),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded-lg transition-colors",title:"Edit","data-testid":`button-edit-member-${ce.userId}`,children:t.jsx(Ma,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>Ne(ce),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",title:"Remove","data-testid":`button-remove-member-${ce.userId}`,children:t.jsx(At,{className:"w-5 h-5"})})]})]}),ce.permissions.length>0&&ce.role!=="owner"&&t.jsxs("div",{className:"mt-3 flex flex-wrap gap-1",children:[ce.permissions.slice(0,5).map(fe=>{var ie,ne;return t.jsx("span",{className:"px-2 py-0.5 text-xs bg-slate-600/50 text-slate-300 rounded",children:o?((ie=Oc[fe])==null?void 0:ie.ar)||fe:((ne=Oc[fe])==null?void 0:ne.en)||fe},fe)}),ce.permissions.length>5&&t.jsxs("span",{className:"px-2 py-0.5 text-xs bg-slate-600/50 text-slate-300 rounded",children:["+",ce.permissions.length-5]})]})]},ce.id))})})]}),E==="invitations"&&t.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:x.length===0?t.jsxs("div",{className:"p-8 text-center text-slate-400",children:[t.jsx(Fl,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:o?"  ":"No invitations"})]}):t.jsx("div",{className:"divide-y divide-slate-700",children:x.map(ce=>t.jsxs("div",{className:"p-4 flex items-center justify-between","data-testid":`invitation-row-${ce.id}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center",children:t.jsx(Fl,{className:"w-5 h-5 text-slate-400"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-white",children:ce.email}),t.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs text-white ${Ec[ce.role].color}`,children:o?Ec[ce.role].ar:Ec[ce.role].en}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ce.status==="pending"?"bg-amber-500/20 text-amber-400":ce.status==="accepted"?"bg-green-500/20 text-green-400":ce.status==="expired"?"bg-red-500/20 text-red-400":"bg-slate-500/20 text-slate-400"}`,children:ce.status==="pending"?o?"":"Pending":ce.status==="accepted"?o?"":"Accepted":ce.status==="expired"?o?"":"Expired":o?"":"Cancelled"})]})]})]}),M&&ce.status==="pending"&&t.jsx("button",{onClick:()=>ue(ce.id),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors","data-testid":`button-cancel-invitation-${ce.id}`,children:t.jsx(vt,{className:"w-5 h-5"})})]},ce.id))})}),E==="activity"&&t.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 p-8 text-center text-slate-400",children:[t.jsx(Wr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:o?"  ":"Activity log coming soon"})]}),t.jsx(ds,{isOpen:D,onClose:()=>L(!1),title:o?"  ":"Invite New Member",children:t.jsxs("div",{className:"space-y-4","data-testid":"modal-invite-member",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?" ":"Email Address"}),t.jsx("input",{type:"email",value:P.email,onChange:ce=>G(fe=>({...fe,email:ce.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"email@example.com","data-testid":"input-invite-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?"":"Role"}),t.jsxs("select",{value:P.role,onChange:ce=>G(fe=>({...fe,role:ce.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"select-invite-role",children:[t.jsx("option",{value:"manager",children:o?"":"Manager"}),t.jsx("option",{value:"staff",children:o?"":"Staff"}),t.jsx("option",{value:"readonly",children:o?" ":"Read Only"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:o?"":"Permissions"}),t.jsx("div",{className:"max-h-60 overflow-y-auto space-y-4 bg-slate-700/50 rounded-lg p-4",children:Object.entries(K).map(([ce,fe])=>{var ie,ne;return t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-amber-400 mb-2",children:o?((ie=Xx[ce])==null?void 0:ie.ar)||ce:((ne=Xx[ce])==null?void 0:ne.en)||ce}),t.jsx("div",{className:"space-y-1",children:fe.map(pe=>{var Ee,Ie;return t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-600/50 p-2 rounded",children:[t.jsx("input",{type:"checkbox",checked:P.permissions.includes(pe),onChange:()=>q(pe,"invite"),className:"w-4 h-4 rounded border-slate-500 bg-slate-600 text-amber-500 focus:ring-amber-500","data-testid":`checkbox-invite-perm-${pe}`}),t.jsx("span",{className:"text-sm text-slate-300",children:o?((Ee=Oc[pe])==null?void 0:Ee.ar)||pe:((Ie=Oc[pe])==null?void 0:Ie.en)||pe})]},pe)})})]},ce)})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-slate-300 hover:text-white transition-colors","data-testid":"button-cancel-invite",children:o?"":"Cancel"}),t.jsxs("button",{onClick:V,className:"px-4 py-2 bg-amber-500 text-slate-900 rounded-lg font-medium hover:bg-amber-400 transition-colors","data-testid":"button-confirm-invite",children:[t.jsx(xi,{className:"w-4 h-4 inline-block mr-2"}),o?" ":"Send Invitation"]})]})]})}),t.jsx(ds,{isOpen:B,onClose:()=>I(!1),title:o?" ":"Edit Member",children:t.jsxs("div",{className:"space-y-4","data-testid":"modal-edit-member",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?" ":"Job Title"}),t.jsx("input",{type:"text",value:Y.jobTitle,onChange:ce=>W(fe=>({...fe,jobTitle:ce.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"input-edit-job-title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?"":"Department"}),t.jsx("input",{type:"text",value:Y.department,onChange:ce=>W(fe=>({...fe,department:ce.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"input-edit-department"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?"":"Role"}),t.jsxs("select",{value:Y.role,onChange:ce=>W(fe=>({...fe,role:ce.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"select-edit-role",children:[t.jsx("option",{value:"manager",children:o?"":"Manager"}),t.jsx("option",{value:"staff",children:o?"":"Staff"}),t.jsx("option",{value:"readonly",children:o?" ":"Read Only"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:o?"":"Permissions"}),t.jsx("div",{className:"max-h-60 overflow-y-auto space-y-4 bg-slate-700/50 rounded-lg p-4",children:Object.entries(K).map(([ce,fe])=>{var ie,ne;return t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-amber-400 mb-2",children:o?((ie=Xx[ce])==null?void 0:ie.ar)||ce:((ne=Xx[ce])==null?void 0:ne.en)||ce}),t.jsx("div",{className:"space-y-1",children:fe.map(pe=>{var Ee,Ie;return t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-600/50 p-2 rounded",children:[t.jsx("input",{type:"checkbox",checked:Y.permissions.includes(pe),onChange:()=>q(pe,"edit"),className:"w-4 h-4 rounded border-slate-500 bg-slate-600 text-amber-500 focus:ring-amber-500","data-testid":`checkbox-edit-perm-${pe}`}),t.jsx("span",{className:"text-sm text-slate-300",children:o?((Ee=Oc[pe])==null?void 0:Ee.ar)||pe:((Ie=Oc[pe])==null?void 0:Ie.en)||pe})]},pe)})})]},ce)})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-slate-300 hover:text-white transition-colors","data-testid":"button-cancel-edit",children:o?"":"Cancel"}),t.jsxs("button",{onClick:te,className:"px-4 py-2 bg-amber-500 text-slate-900 rounded-lg font-medium hover:bg-amber-400 transition-colors","data-testid":"button-confirm-edit",children:[t.jsx(es,{className:"w-4 h-4 inline-block mr-2"}),o?" ":"Save Changes"]})]})]})}),t.jsx(ds,{isOpen:T,onClose:()=>z(!1),title:o?" ":"Remove Member",children:t.jsxs("div",{className:"space-y-4","data-testid":"modal-remove-member",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Cs,{className:"w-8 h-8 text-red-400"})}),t.jsx("p",{className:"text-white",children:o?"        ":"Are you sure you want to remove this member from the team?"}),t.jsx("p",{className:"text-slate-400 text-sm mt-2",children:o?"       .":"They will lose access to all organization resources."})]}),t.jsxs("div",{className:"flex justify-center gap-3 pt-4",children:[t.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-slate-300 hover:text-white transition-colors","data-testid":"button-cancel-remove",children:o?"":"Cancel"}),t.jsxs("button",{onClick:Z,className:"px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-400 transition-colors","data-testid":"button-confirm-remove",children:[t.jsx(At,{className:"w-4 h-4 inline-block mr-2"}),o?" ":"Remove Member"]})]})]})})]})}const MF=C.createContext(void 0),Zde=({children:e})=>{const[s,a]=C.useState(null),[r,n]=C.useState(null),[i,l]=C.useState([]),[o,d]=C.useState(!1),[u,h]=C.useState(null),f=(s==null?void 0:s.ownerUserId)===u||(r==null?void 0:r.role)==="owner",x=f||((r==null?void 0:r.permissions.includes("org_manage_team"))??!1),p=C.useCallback(async(P,G)=>{d(!0),h(P);try{let Y=null;if(G?Y=(await he.getOrganizations()).find(ee=>ee.type===G&&ee.ownerUserId===P)||null:Y=await he.getOrganizationByOwnerUserId(P),Y){a(Y);const W=await he.getOrganizationUser(Y.id,P);n(W)}else a(null),n(null)}catch(Y){console.error("Failed to load organization:",Y)}finally{d(!1)}},[]),v=C.useCallback(async P=>{d(!0),h(P);try{const G=await he.getOrganizationsByUserId(P);if(l(G),G.length>0&&!s){a(G[0]);const Y=await he.getOrganizationUser(G[0].id,P);n(Y)}}catch(G){console.error("Failed to load organizations:",G)}finally{d(!1)}},[s]),b=C.useCallback(async P=>{if(u){d(!0);try{const G=await he.getOrganizationById(P);if(G){a(G);const Y=await he.getOrganizationUser(P,u);n(Y)}}catch(G){console.error("Failed to switch organization:",G)}finally{d(!1)}}},[u]),y=C.useCallback(async()=>{if(s!=null&&s.id)try{const P=await he.getOrganizationById(s.id);if(P&&a(P),u){const G=await he.getOrganizationUser(s.id,u);n(G)}}catch(P){console.error("Failed to refresh organization:",P)}},[s==null?void 0:s.id,u]),j=C.useCallback(P=>!s||!u?!1:s.ownerUserId===u||(r==null?void 0:r.role)==="owner"?!0:(r==null?void 0:r.permissions.includes(P))??!1,[s,r,u]),w=C.useCallback(()=>!s||!u?[]:s.ownerUserId===u||(r==null?void 0:r.role)==="owner"?he.getPermissionsByOrganizationType(s.type):(r==null?void 0:r.permissions)??[],[s,r,u]),S=C.useCallback(async()=>s!=null&&s.id?await he.getOrganizationUsers(s.id):[],[s==null?void 0:s.id]),O=C.useCallback(async P=>{if(!(s!=null&&s.id))return null;try{return await he.createOrganizationUser(s.id,P)}catch(G){return console.error("Failed to add team member:",G),null}},[s==null?void 0:s.id]),_=C.useCallback(async(P,G)=>{try{return await he.updateOrganizationUser(P,G)}catch(Y){return console.error("Failed to update team member:",Y),null}},[]),E=C.useCallback(async P=>{try{return await he.deactivateOrganizationUser(P)!==null}catch(G){return console.error("Failed to deactivate team member:",G),!1}},[]),A=C.useCallback(async P=>{try{return await he.reactivateOrganizationUser(P)!==null}catch(G){return console.error("Failed to reactivate team member:",G),!1}},[]),D=C.useCallback(async P=>{try{return await he.removeOrganizationUser(P)}catch(G){return console.error("Failed to remove team member:",G),!1}},[]),L=C.useCallback(async()=>s!=null&&s.id?await he.getTeamInvitations(s.id):[],[s==null?void 0:s.id]),B=C.useCallback(async P=>{if(!(s!=null&&s.id)||!u)return null;try{return await he.createTeamInvitation(s.id,u,P)}catch(G){return console.error("Failed to create invitation:",G),null}},[s==null?void 0:s.id,u]),I=C.useCallback(async P=>{try{return await he.cancelTeamInvitation(P)}catch(G){return console.error("Failed to cancel invitation:",G),!1}},[]),T=C.useCallback(async(P=100)=>s!=null&&s.id?await he.getOrganizationActivityLogs(s.id,P):[],[s==null?void 0:s.id]),z=C.useCallback(async(P,G,Y)=>{if(!(!(s!=null&&s.id)||!u))try{await he.logOrganizationActivity(s.id,u,P,G,Y)}catch(W){console.error("Failed to log activity:",W)}},[s==null?void 0:s.id,u]),k=C.useCallback(async()=>s!=null&&s.id?await he.getOrganizationStats(s.id):null,[s==null?void 0:s.id]),F=C.useCallback(async()=>s!=null&&s.id?await he.canAddTeamMember(s.id):{allowed:!1,reason:"   "},[s==null?void 0:s.id]);return t.jsx(MF.Provider,{value:{currentOrganization:s,currentOrgUser:r,organizations:i,isLoading:o,isOwner:f,canManageTeam:x,loadOrganization:p,loadOrganizations:v,switchOrganization:b,refreshCurrentOrganization:y,hasPermission:j,getPermissions:w,getTeamMembers:S,addTeamMember:O,updateTeamMember:_,deactivateTeamMember:E,reactivateTeamMember:A,removeTeamMember:D,getInvitations:L,createInvitation:B,cancelInvitation:I,getActivityLogs:T,logActivity:z,getStats:k,canAddMember:F},children:e})},eue=()=>{const e=C.useContext(MF);if(!e)throw new Error("useOrganization must be used within an OrganizationProvider");return e},LF=C.createContext(void 0),tue=({children:e})=>{const[s,a]=C.useState(null),[r,n]=C.useState(!0),[i,l]=C.useState(null),o=C.useCallback(async()=>{try{n(!0),l(null);const h=await he.getCustomerPortalSettings();a(h)}catch(h){console.error("Failed to load customer portal settings:",h),l("Failed to load portal settings")}finally{n(!1)}},[]);C.useEffect(()=>{o()},[o]);const d=C.useCallback(h=>{const f=Lr.language||"en",p={ar:"ar",en:"en",hi:"hi",zh:"zh"}[f]||"en";return h[p]||h.en||""},[]),u=C.useCallback(async()=>{await o()},[o]);return t.jsx(LF.Provider,{value:{settings:s,loading:r,error:i,refreshSettings:u,getText:d},children:e})},sue=()=>{const e=C.useContext(LF);if(e===void 0)throw new Error("useCustomerPortalSettings must be used within a CustomerPortalSettingsProvider");return e},aue=(e,s)=>e?e.features[s]??!0:!0,rue=e=>e?e.navigationMenu.filter(s=>s.enabled).sort((s,a)=>s.order-a.order).map(s=>s.id):["dashboard","trader_tools","marketplace","orders","favorites","account"],nue=e=>e?e.dashboardSections.filter(s=>s.enabled).sort((s,a)=>s.order-a.order).map(s=>s.id):["welcome_banner","quick_stats","quick_actions","recent_orders","announcements"],iue=({user:e,profile:s,onLogout:a,onRefreshUser:r})=>{const{hasPermission:n,loadOrganization:i,currentOrganization:l,isOwner:o}=eue(),{settings:d,getText:u,loading:h}=sue();C.useCallback(et=>aue(d,et),[d]),C.useMemo(()=>nue(d),[d]),C.useMemo(()=>rue(d),[d]);const[f,x]=C.useState("HOME"),[p,v]=C.useState([]),[b,y]=C.useState([]),[j,w]=C.useState([]),[S,O]=C.useState(null),[_,E]=C.useState([]),[A,D]=C.useState(""),[L,B]=C.useState(""),[I,T]=C.useState(!1),[z,k]=C.useState(new Set),[F,P]=C.useState(!1),[G,Y]=C.useState(null),[W,ee]=C.useState([]),[H,M]=C.useState(!1),X=Kce(768),[K,Q]=C.useState(()=>localStorage.getItem("sinicar_sidebar_collapsed")==="true"),se=C.useCallback(et=>{Q(et),localStorage.setItem("sinicar_sidebar_collapsed",String(et))},[]),[V,te]=C.useState(null),[Z,ue]=C.useState(!1),[re,J]=C.useState(null),[Ne,q]=C.useState(1),[ce,fe]=C.useState(!1),[ie,ne]=C.useState([]),[pe,Ee]=C.useState(null),[Ie,_e]=C.useState(!1),Ge=C.useRef(null),[Ae,Ue]=C.useState(null),Qe=C.useCallback(et=>{Ee(et)},[]),[_t,lt]=C.useState(!1),Nt=e.isGuest===!0,[jt,Ft]=C.useState(!e.isGuest),Ce=S==null?void 0:S.guestSettings,ve=()=>{if(!Nt)return"";switch((Ce==null?void 0:Ce.blurIntensity)||"medium"){case"light":return"blur-sm";case"medium":return"blur-md";case"heavy":return"blur-lg";default:return"blur-md"}},Ve=et=>Nt?{businessTypes:Ce==null?void 0:Ce.showBusinessTypes,mainServices:Ce==null?void 0:Ce.showMainServices,howItWorks:Ce==null?void 0:Ce.showHowItWorks,whySiniCar:Ce==null?void 0:Ce.showWhySiniCar,cart:Ce==null?void 0:Ce.showCart,marketingCards:Ce==null?void 0:Ce.showMarketingCards}[et]!==!1:!0,ot=Nt&&(Ce==null?void 0:Ce.showBlurOverlay)!==!1,{t:le,tDynamic:Ke,dir:nt}=Hs(),{addToast:pt}=It();C.useEffect(()=>{(async()=>{const[de,ye,xe,ge]=await Promise.all([he.getOrders(e.id),he.getAllQuoteRequests(),he.searchProducts(""),he.getSettings()]);y(de),w(ye.filter(je=>je.userId===e.id)),E(xe),O(ge),ee(he.getSearchHistoryForUser(e.id))})()},[e.id,f]),C.useEffect(()=>{const et=e.role==="CUSTOMER_STAFF"&&e.parentId?e.parentId:e.id;i(et,"customer")},[e.id,e.role,e.parentId,i]),C.useEffect(()=>{he.recordActivity({userId:e.id,userName:e.name,role:e.role,eventType:"PAGE_VIEW",page:f,description:`${le("customerDashboard.pageView")} ${f}`})},[f,e.id,e.name,e.role]),C.useEffect(()=>{he.recordHeartbeat(e.id);const et=setInterval(()=>{he.recordHeartbeat(e.id)},6e4);return()=>clearInterval(et)},[e.id]),C.useEffect(()=>{const et=setTimeout(()=>{B(A)},300);return()=>clearTimeout(et)},[A]),C.useEffect(()=>{if(!e.id||e.isGuest)return;const et=setTimeout(async()=>{if(p.length>0){const de=p.reduce((ye,xe)=>ye+xe.price*xe.quantity,0);await he.saveAbandonedCart(e.id,p,de)}else await he.clearAbandonedCart(e.id)},2e3);return()=>clearTimeout(et)},[p,e.id,e.isGuest]);const Ut=C.useCallback(async et=>{if(x(et),et==="ORDERS"&&e.hasUnreadOrders)try{await he.markOrdersAsReadForUser(e.id),r()}catch(de){console.error("Failed to mark orders as read",de)}if(et==="QUOTE_REQUEST"&&e.hasUnreadQuotes)try{await he.markQuotesAsReadForUser(e.id),r()}catch(de){console.error("Failed to mark quotes as read",de)}},[e.hasUnreadOrders,e.hasUnreadQuotes,e.id,r]),[Ts,Rt]=C.useState(null),Re=C.useMemo(()=>{if(L.trim().length<2)return[];const et=Ede(_);return hde(L,et).slice(0,8)},[L,_]);C.useEffect(()=>{A.trim().length<2&&(Y(null),Rt(null))},[A]),C.useEffect(()=>{L.trim().length>=2?T(!0):T(!1)},[L]),C.useEffect(()=>{if(I&&Ge.current&&!X){const et=Ge.current.getBoundingClientRect();Ue({top:et.bottom+8,left:et.left,width:et.width})}},[I,X]);const ft=async et=>{if(et.preventDefault(),Nt){lt(!0);return}const de=A.trim();if(de.length<2){pt(le("customerDashboard.enterValidPartNumber"),"warning");return}P(!0),Y(null);try{const ye=kde(e),xe=await Cde(de,ye,"heroSearch");Y(xe),xe.type==="NOT_FOUND"?pt(xe.message,"info"):xe.type==="FOUND_OUT_OF_STOCK"&&pt(xe.message,"warning"),T(!0)}catch(ye){console.error("Search error:",ye),pt(le("customerDashboard.unexpectedError"),"error")}finally{P(!1)}},Xt=async(et,de)=>{if(et.stopPropagation(),Nt){lt(!0);return}if(q(1),z.has(de.id)||he.hasRecentPriceView(e.id,de.id)){k(ye=>new Set(ye).add(de.id)),J(de);return}fe(!0);try{await he.incrementSearchUsage(e.id),await he.logPriceView(e,de),k(ye=>new Set(ye).add(de.id)),J(de),pt(le("toast.creditDeducted","     "),"info"),r()}catch(ye){ye.message==="NO_POINTS_LEFT"?pt(le("toast.noCreditsLeft","       .    ."),"error"):(console.error(ye),pt(le("toast.priceRevealError","    "),"error"))}finally{fe(!1)}},As=C.useCallback((et,de,ye)=>{if(!pe)return;let xe=window.innerWidth/2,ge=window.innerHeight/2;if(ye){const Le=ye.getBoundingClientRect();xe=Le.left+Le.width/2,ge=Le.top+Le.height/2}const je=Math.min(de,5),Se=[];for(let Le=0;Le<je;Le++)Se.push({id:`${et.id}-${Date.now()}-${Le}`,startX:xe+(Math.random()-.5)*40,startY:ge+(Math.random()-.5)*40,productName:et.name});Se.forEach((Le,Je)=>{setTimeout(()=>{ne(Fe=>[...Fe,Le]),setTimeout(()=>{ne(Fe=>Fe.filter($e=>$e.id!==Le.id))},800)},Je*100)})},[pe]),we=(et,de,ye)=>{if(Nt){lt(!0);return}const xe=p.find(ge=>ge.id===et.id);As(et,de,ye),xe?te({product:et,quantity:de}):(v([...p,{...et,quantity:de}]),pt(le("toast.addedToCart","  "),"success"))},Pt=()=>{re&&(we(re,Ne),J(null))},ss=()=>{if(!V)return;const{product:et,quantity:de}=V;v(p.map(ye=>ye.id===et.id?{...ye,quantity:ye.quantity+de}:ye)),pt(le("toast.quantityUpdated","    "),"success"),te(null),J(null)},gs=et=>{v(p.filter(de=>de.id!==et))},Ps=async()=>{if(p.length!==0)try{const et=p.reduce((de,ye)=>de+ye.price*ye.quantity,0)*1.15;await he.createOrder({userId:e.id,items:p,totalAmount:et,branchId:e.branchId}),await he.convertAbandonedCart(e.id),v([]),ue(!0),setTimeout(()=>{ue(!1)},3e3),he.getOrders(e.id).then(y)}catch{pt(le("customerDashboard.orderSubmitError"),"error")}},Ca=e.searchLimit===0?"":(e.searchLimit||50)-(e.searchUsed||0),ar=p.reduce((et,de)=>et+de.price*de.quantity,0),rr=C.useCallback(()=>{if(pe){const et=pe.getBoundingClientRect();return{x:et.left+et.width/2,y:et.top+et.height/2}}return{x:window.innerWidth-100,y:50}},[pe]);return t.jsxs("div",{className:"flex h-screen bg-slate-100 font-sans overflow-hidden text-slate-800",dir:nt,children:[ie.map(et=>{const de=rr();return t.jsx(Xce,{startX:et.startX,startY:et.startY,endX:de.x,endY:de.y,onComplete:()=>ne(ye=>ye.filter(xe=>xe.id!==et.id))},et.id)}),t.jsx(xde,{}),t.jsx(ds,{isOpen:_t,onClose:()=>lt(!1),maxWidth:"max-w-lg",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 md:p-8 w-full mx-auto space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-brand-200",children:t.jsx(ta,{size:40,className:"text-white"})}),t.jsx("h3",{className:"text-xl md:text-2xl font-black text-slate-800",children:le("guestMode.restrictedTitle")}),t.jsx("p",{className:"text-brand-600 font-bold text-sm mt-1",children:le("guestMode.restrictedSubtitle")})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-slate-600 font-bold text-sm mb-3 text-center",children:le("guestMode.restrictedMessage")}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(Yt,{size:16,className:"text-blue-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:le("guestMode.targetAudience.partsStores")})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(Fn,{size:16,className:"text-green-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:le("guestMode.targetAudience.insuranceCompanies")})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:t.jsx(Mi,{size:16,className:"text-amber-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:le("guestMode.targetAudience.rentalCompanies")})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx(Wt,{size:16,className:"text-purple-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:le("guestMode.targetAudience.salesReps")})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-slate-800 font-bold text-sm text-center",children:le("guestMode.benefitsTitle")}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-50 text-green-700 text-xs font-bold rounded-full border border-green-200",children:[t.jsx(Mt,{size:12})," ",le("guestMode.benefits.prices")]}),t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 text-xs font-bold rounded-full border border-blue-200",children:[t.jsx(Mt,{size:12})," ",le("guestMode.benefits.catalog")]}),t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-amber-50 text-amber-700 text-xs font-bold rounded-full border border-amber-200",children:[t.jsx(Mt,{size:12})," ",le("guestMode.benefits.orders")]}),t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-50 text-purple-700 text-xs font-bold rounded-full border border-purple-200",children:[t.jsx(Mt,{size:12})," ",le("guestMode.benefits.support")]})]})]}),t.jsx("div",{className:"bg-gradient-to-r from-brand-50 to-blue-50 rounded-xl p-4 border border-brand-100 text-center",children:t.jsx("p",{className:"text-slate-700 font-bold text-sm leading-relaxed",children:le("guestMode.callToAction")})}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{lt(!1),a()},className:"py-3 px-4 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-brand-200","data-testid":"button-guest-login",children:[t.jsx(nn,{size:18}),le("guestMode.loginButton")]}),t.jsxs("button",{onClick:()=>{lt(!1),a()},className:"py-3 px-4 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-green-200","data-testid":"button-guest-request-account",children:[t.jsx(zt,{size:18}),le("guestMode.requestAccountButton")]})]}),t.jsx("button",{onClick:()=>lt(!1),className:"w-full py-2.5 px-6 bg-slate-100 text-slate-500 rounded-xl font-medium hover:bg-slate-200 transition-colors text-sm","data-testid":"button-guest-cancel",children:le("guestMode.browseOnly")})]})]})}),t.jsx("div",{className:`fixed inset-0 bg-black/60 z-40 lg:hidden backdrop-blur-sm transition-opacity duration-300 ${H?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>M(!1),"aria-hidden":!H}),t.jsx(Jce,{user:e,profile:s,view:f,onViewChange:Ut,onLogout:a,sidebarOpen:H,setSidebarOpen:M,t:le,tDynamic:Ke,remainingCredits:Ca,isRTL:nt==="rtl",isGuest:Nt,guestSettings:S==null?void 0:S.guestSettings,onGuestPageClick:()=>lt(!0),collapsed:K,setCollapsed:se,hasPermission:n,isOwner:o}),t.jsxs("main",{className:"flex-1 flex flex-col h-screen overflow-hidden relative bg-slate-100",children:[t.jsx(tde,{}),!Nt&&t.jsx(jde,{userId:e.id,customerType:s==null?void 0:s.businessType}),t.jsx(ede,{view:f,setSidebarOpen:M,user:e,profile:s,tDynamic:Ke,t:le,isRTL:nt==="rtl",cart:p,cartTotal:ar,onRemoveItem:gs,onSubmitOrder:Ps,showCartDropdown:Ie,setShowCartDropdown:_e,onCartIconMount:Qe,onViewAllNotifications:()=>x("NOTIFICATIONS")}),t.jsx("div",{className:"flex-1 overflow-y-auto scroll-smooth",children:t.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8 h-full",children:[f==="HOME"&&t.jsx(Nde,{user:e,profile:s,onNavigate:et=>Ut(et),isRTL:nt==="rtl"}),f==="HOME_LEGACY"&&t.jsxs("div",{className:"animate-fade-in flex flex-col gap-8",children:[t.jsxs("div",{className:"relative w-full rounded-3xl bg-gradient-to-r from-[#081a33] to-[#102b57] px-4 py-6 sm:px-6 sm:py-8 md:px-10 md:py-12 text-center text-white shadow-xl isolate",children:[t.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden rounded-3xl",children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-[500px] h-[500px] bg-brand-600 rounded-full opacity-20 blur-3xl"}),t.jsx("div",{className:"absolute bottom-0 left-0 -ml-20 -mb-20 w-[400px] h-[400px] bg-blue-500 rounded-full opacity-10 blur-3xl"})]}),t.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6",children:[t.jsx("h1",{className:"text-3xl md:text-5xl font-extrabold leading-tight tracking-tight text-white font-display",children:le("customerDashboard.heroTitle")}),t.jsx("p",{className:"text-slate-200 text-sm md:text-lg font-medium max-w-2xl mx-auto",children:le("customerDashboard.heroSubtitle")}),t.jsxs("div",{className:"relative w-full max-w-2xl mx-auto mt-4 sm:mt-6 md:mt-10 z-[200]",children:[t.jsx("div",{className:"flex justify-center md:justify-end mb-3",children:t.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-full bg-emerald-500/10 px-3 md:px-4 py-1 text-[10px] md:text-xs font-bold text-emerald-300 border border-emerald-500/40 backdrop-blur-sm shadow-sm",children:[t.jsx(Mt,{size:10,className:"md:w-3 md:h-3"}),t.jsx("span",{className:"truncate max-w-[200px] md:max-w-none",children:le("customerDashboard.searchTip")})]})}),Nt&&(Ce==null?void 0:Ce.allowSearch)===!1?t.jsxs("button",{onClick:()=>lt(!0),className:"w-full h-12 md:h-16 px-4 md:px-6 bg-white/90 text-slate-500 rounded-full shadow-2xl shadow-slate-900/30 flex items-center justify-center gap-2 md:gap-3 cursor-pointer hover:bg-white transition-colors","data-testid":"button-guest-search-disabled",children:[t.jsx(Sa,{size:18,className:"text-brand-600 shrink-0"}),t.jsx("span",{className:"font-bold text-sm md:text-base truncate",children:le("guestMode.searchDisabled")})]}):t.jsxs("form",{onSubmit:ft,className:"relative group w-full",children:[t.jsx("input",{ref:Ge,type:"text",className:"w-full h-12 md:h-16 pr-14 md:pr-16 pl-4 md:pl-6 bg-white text-slate-900 rounded-full shadow-2xl shadow-slate-900/30 focus:ring-4 focus:ring-brand-500/30 border-0 text-sm md:text-lg font-bold placeholder:text-slate-400 transition-all outline-none",placeholder:le("customerDashboard.searchPlaceholder"),value:A,onChange:et=>D(et.target.value),"data-testid":"input-hero-search"}),t.jsx("button",{type:"submit",className:"absolute right-1.5 md:right-2 top-1.5 md:top-2 bottom-1.5 md:bottom-2 w-10 md:w-14 h-9 md:h-12 bg-brand-600 hover:bg-brand-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg","data-testid":"button-hero-search",children:t.jsx(Lt,{size:18,className:"md:w-[22px] md:h-[22px]"})})]}),I&&typeof document<"u"&&Qce.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 transition-opacity ${X?"bg-black/60":"bg-black/20"}`,style:{zIndex:99998},onClick:()=>{T(!1),Y(null)},"data-testid":"search-backdrop"}),t.jsxs("div",{className:`fixed bg-white shadow-2xl text-right overflow-hidden flex flex-col animate-slide-up ${X?"inset-x-0 bottom-0 rounded-t-3xl border-t-2 border-slate-200 max-h-[80vh]":"rounded-2xl border border-slate-200 max-h-96"}`,style:{zIndex:99999,...!X&&Ae?{top:Ae.top,left:Ae.left,width:Ae.width}:{}},"data-testid":"search-results-container",children:[X?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200 bg-gradient-to-b from-slate-100 to-white",children:[t.jsx("button",{onClick:()=>{T(!1),Y(null)},className:"p-2.5 bg-slate-200 rounded-full text-slate-600 hover:bg-slate-300 active:scale-95 transition-all","data-testid":"button-close-search",children:t.jsx(vt,{size:20})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-base",children:le("customerDashboard.searchResults"," ")}),t.jsx("div",{className:"w-8 h-8 bg-brand-100 rounded-full flex items-center justify-center",children:t.jsx(Lt,{size:16,className:"text-brand-600"})})]})]}),t.jsx("div",{className:"flex justify-center py-1 bg-white",children:t.jsx("div",{className:"w-10 h-1 bg-slate-300 rounded-full"})})]}):t.jsx("div",{className:"absolute top-2 left-2 z-20",children:t.jsx("button",{onClick:()=>{T(!1),Y(null)},className:"p-1.5 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-500 hover:text-slate-700 transition-all","data-testid":"button-close-search-desktop",children:t.jsx(vt,{size:16})})}),t.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:F?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(ts,{size:32,className:"animate-spin text-brand-600 mx-auto mb-3"}),t.jsx("p",{className:"text-sm font-bold text-slate-600",children:le("customerDashboard.searching")})]}):(G==null?void 0:G.type)==="FOUND_OUT_OF_STOCK"&&G.product?t.jsxs("div",{className:"p-5",children:[t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-amber-700 mb-2",children:[t.jsx(Mae,{size:20}),t.jsx("span",{className:"font-bold",children:le("customerDashboard.outOfStockMessage")})]})}),t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsx("div",{className:"p-3 bg-slate-200 rounded-xl text-slate-600",children:t.jsx(Vc,{size:24})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-bold text-slate-800 text-base",children:G.product.name}),t.jsx("p",{className:"text-sm text-slate-500 font-mono mt-1",children:t.jsx("span",{className:"bg-white px-2 py-0.5 rounded border border-slate-200 font-bold",children:G.product.partNumber})})]}),t.jsx("span",{className:"text-xs font-bold px-3 py-1.5 rounded-full bg-red-50 text-red-700 border border-red-200",children:le("customerDashboard.outOfStock")})]})]}):(G==null?void 0:G.type)==="NOT_FOUND"?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-amber-50 text-amber-500 rounded-full mb-4",children:t.jsx(Ks,{size:32})}),t.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-2",children:le("customerDashboard.partNotAvailable")}),t.jsxs("p",{className:"text-sm text-slate-600",children:[le("customerDashboard.noResultsFor")," ",t.jsxs("span",{className:"font-bold text-slate-800 bg-slate-100 px-2 py-0.5 rounded",children:['"',A,'"']})]})]}):Re.length>0?t.jsxs("div",{className:"relative",children:[Nt&&(Ce==null?void 0:Ce.showSearchResults)!==!1&&ot&&t.jsx("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm rounded-xl",children:t.jsxs("div",{className:"text-center p-6",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Sa,{size:28,className:"text-brand-600"})}),t.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:le("guestMode.restrictedTitle")}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:le("guestMode.blurredResultsNote")}),t.jsxs("button",{onClick:()=>lt(!0),className:"px-6 py-2.5 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors flex items-center gap-2 mx-auto","data-testid":"button-guest-overlay-login",children:[t.jsx(nn,{size:16}),le("guestMode.loginButton")]})]})}),t.jsx("div",{className:`divide-y divide-slate-100 ${Nt&&(Ce==null?void 0:Ce.showSearchResults)!==!1?`${ve()} pointer-events-none select-none`:""}`,children:Re.map(et=>{const de=z.has(et.id)||he.hasRecentPriceView(e.id,et.id),ye=et.qtyTotal??et.stock??0;he.getMinVisibleQty();const xe=ye<=0;return t.jsxs("div",{className:"w-full text-right p-3 md:p-4 hover:bg-brand-50 flex flex-col md:flex-row md:items-center md:justify-between group transition-colors cursor-default gap-2 md:gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 md:gap-4 flex-1 min-w-0",children:[t.jsx("div",{className:"p-2 md:p-2.5 bg-slate-100 rounded-xl text-slate-600 group-hover:bg-white group-hover:text-brand-600 border border-slate-200 shrink-0",children:t.jsx(Vc,{size:18,className:"md:w-5 md:h-5"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"font-bold text-slate-800 text-sm md:text-base group-hover:text-brand-700 truncate",children:et.name}),t.jsxs("p",{className:"text-xs md:text-sm text-slate-500 font-mono mt-0.5 flex flex-wrap items-center gap-1 md:gap-2",children:[t.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 font-bold",children:et.partNumber}),t.jsx("span",{className:"text-slate-400 hidden md:inline",children:"|"}),t.jsx("span",{className:"text-xs",children:et.brand})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-[10px] md:text-xs font-bold px-2.5 py-1 rounded-full border ${xe?"bg-red-50 text-red-700 border-red-200":"bg-green-50 text-green-700 border-green-200"}`,children:le(xe?"customerDashboard.outOfStock":"customerDashboard.available")}),xe?t.jsx("span",{className:"text-xs text-slate-400 font-bold",children:le("customerDashboard.priceNotAvailable")}):de?t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex flex-col items-end px-2",children:t.jsxs("span",{className:"text-sm font-black text-slate-900",children:[et.priceWholesale||et.price," ",le("customerDashboard.sar")]})}),t.jsx("button",{onClick:ge=>Xt(ge,et),className:"bg-brand-600 text-white p-2 rounded-lg hover:bg-brand-700 shadow-sm",title:le("customerDashboard.addToCart"),children:t.jsx(Bu,{size:16})})]}):t.jsxs("button",{onClick:ge=>Xt(ge,et),className:"text-xs font-bold bg-amber-50 text-amber-700 border border-amber-200 px-3 py-1.5 rounded-lg hover:bg-amber-100 transition-colors flex items-center gap-1",title:le("customerDashboard.showPrice"),children:[t.jsx(ns,{size:14})," ",t.jsx("span",{className:"hidden sm:inline",children:le("customerDashboard.showPrice")})]})]})]},et.id)})})]}):L.trim().length>=2?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-slate-100 text-slate-400 rounded-full mb-4",children:t.jsx(Lt,{size:32})}),t.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-2",children:le("customerDashboard.noResults")}),t.jsxs("p",{className:"text-sm text-slate-600",children:[le("customerDashboard.pressSearch")," ",t.jsxs("span",{className:"font-bold text-slate-800 bg-slate-100 px-2 py-0.5 rounded",children:['"',A,'"']})]})]}):null}),(Re.length>0||(G==null?void 0:G.type)==="FOUND_AVAILABLE")&&t.jsx("div",{className:"bg-slate-50 p-2.5 text-center text-xs font-bold text-slate-500 border-t border-slate-100 shrink-0",children:le("customerDashboard.addToCartTip")})]})]}),document.body)]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8 items-start",children:[t.jsxs("div",{className:"xl:col-span-3 space-y-12",children:[Ve("businessTypes")&&t.jsxs("section",{className:"relative",children:[ot&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/70 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-section-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Sa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:le("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:le("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center shadow-lg shadow-brand-200",children:t.jsx(Wt,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800",children:le("customerDashboard.whoWeServe")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium",children:le("customerDashboard.whoWeServeSubtitle","    ")})]})]}),t.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 ${Nt?`${ve()} pointer-events-none select-none`:""}`,children:[t.jsx(Jx,{icon:t.jsx(ta,{size:26}),title:le("customerDashboard.partsStores"),desc:le("customerDashboard.partsStoresDesc"),colorClass:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",iconBgClass:"bg-blue-500"}),t.jsx(Jx,{icon:t.jsx(Fn,{size:26}),title:le("customerDashboard.insuranceCompanies"),desc:le("customerDashboard.insuranceDesc"),colorClass:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white",iconBgClass:"bg-emerald-500"}),t.jsx(Jx,{icon:t.jsx(Mi,{size:26}),title:le("customerDashboard.rentalCompanies"),desc:le("customerDashboard.rentalDesc"),colorClass:"bg-gradient-to-br from-amber-500 to-orange-500 text-white",iconBgClass:"bg-amber-500"}),t.jsx(Jx,{icon:t.jsx(Fu,{size:26}),title:le("customerDashboard.salesReps"),desc:le("customerDashboard.salesRepsDesc"),colorClass:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",iconBgClass:"bg-purple-500"})]})]}),Ve("mainServices")&&t.jsxs("section",{className:"relative",children:[ot&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/70 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-services-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Sa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:le("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:le("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(Fu,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800",children:le("customerDashboard.mainServices")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium",children:le("customerDashboard.mainServicesSubtitle","   ")})]})]}),t.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5 ${Nt?`${ve()} pointer-events-none select-none`:""}`,children:[t.jsxs("div",{onClick:()=>Nt?lt(!0):Ut("QUOTE_REQUEST"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-blue-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-quote-request",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-blue-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-300",children:t.jsx(yn,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-blue-700 transition-colors",children:le("customerDashboard.quoteRequests")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:le("customerDashboard.quoteRequestsDesc")})]})]})]}),t.jsxs("div",{onClick:()=>Nt?lt(!0):Ut("IMPORT_CHINA"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-emerald-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-import-china",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-emerald-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-emerald-600 group-hover:text-white transition-colors duration-300",children:t.jsx(Ea,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-emerald-700 transition-colors",children:le("customerDashboard.importFromChina")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:le("customerDashboard.importFromChinaDesc")})]})]})]}),t.jsxs("div",{onClick:()=>Nt?lt(!0):Ut("ORDERS"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-amber-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-orders",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 to-orange-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-amber-500 group-hover:text-white transition-colors duration-300",children:t.jsx(Yt,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-amber-700 transition-colors",children:le("customerDashboard.wholesaleOrders")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:le("customerDashboard.wholesaleOrdersDesc")})]})]})]}),t.jsxs("div",{onClick:()=>Nt?lt(!0):Ut("ORGANIZATION"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-purple-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-organization",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-purple-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-purple-50 text-purple-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-purple-600 group-hover:text-white transition-colors duration-300",children:t.jsx(Wt,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-purple-700 transition-colors",children:le("customerDashboard.staffBranches")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:le("customerDashboard.staffBranchesDesc")})]})]})]})]})]}),Ve("howItWorks")&&t.jsxs("section",{className:`bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-3xl p-6 sm:p-8 lg:p-10 shadow-xl relative overflow-hidden ${Nt?"select-none":""}`,children:[t.jsxs("div",{className:"absolute inset-0 opacity-10",children:[t.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-500 rounded-full -mr-48 -mt-48 blur-3xl"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-blue-500 rounded-full -ml-36 -mb-36 blur-3xl"})]}),ot&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-howitworks-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Sa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:le("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:le("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"relative z-10 flex items-center gap-3 mb-8 sm:mb-10",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-brand-600 rounded-xl flex items-center justify-center shadow-lg shadow-brand-600/30",children:t.jsx(gi,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:le("customerDashboard.howItWorks")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400 font-medium",children:le("customerDashboard.howItWorksSubtitle","   ")})]})]}),t.jsxs("div",{className:`relative z-10 grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 ${Nt?ve():""}`,children:[t.jsx("div",{className:"hidden lg:block absolute top-16 left-[15%] right-[15%] h-0.5 bg-gradient-to-r from-brand-600/50 via-brand-500/50 to-brand-600/50"}),[{icon:t.jsx(Wt,{size:28}),step:1,title:le("customerDashboard.step1Title"),desc:le("customerDashboard.step1Desc"),color:"from-blue-500 to-blue-600"},{icon:t.jsx(Fn,{size:28}),step:2,title:le("customerDashboard.step2Title"),desc:le("customerDashboard.step2Desc"),color:"from-emerald-500 to-emerald-600"},{icon:t.jsx(Lt,{size:28}),step:3,title:le("customerDashboard.step3Title"),desc:le("customerDashboard.step3Desc"),color:"from-amber-500 to-orange-500"},{icon:t.jsx(fr,{size:28}),step:4,title:le("customerDashboard.step4Title"),desc:le("customerDashboard.step4Desc"),color:"from-purple-500 to-purple-600"}].map((et,de)=>t.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center group",children:[t.jsxs("div",{className:`w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br ${et.color} rounded-2xl flex items-center justify-center text-white mb-4 shadow-lg transform transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3`,children:[et.icon,t.jsx("span",{className:"absolute -top-2 -right-2 w-6 h-6 sm:w-7 sm:h-7 bg-white text-slate-800 rounded-full flex items-center justify-center text-xs sm:text-sm font-black shadow-md",children:et.step})]}),t.jsx("h4",{className:"font-bold text-white text-sm sm:text-base mb-1.5 sm:mb-2",children:et.title}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400 leading-relaxed",children:et.desc})]},de))]})]}),Ve("whySiniCar")&&t.jsxs("section",{className:`relative ${Nt?`${ve()} select-none`:""}`,children:[ot&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/70 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-whysinicar-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Sa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:le("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:le("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center shadow-lg shadow-brand-200",children:t.jsx(Mt,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800",children:(S==null?void 0:S.whySiniCarTitle)||le("customerDashboard.whySiniCar")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium",children:le("customerDashboard.whySiniCarSubtitle","   ")})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5",children:((S==null?void 0:S.whySiniCarFeatures)||[{id:"1",title:le("customerDashboard.expertiseTitle"),description:le("customerDashboard.expertiseDesc"),icon:"box",iconColor:"text-cyan-400",bgColor:"from-cyan-500 to-cyan-600"},{id:"2",title:le("customerDashboard.techTitle"),description:le("customerDashboard.techDesc"),icon:"chart",iconColor:"text-emerald-400",bgColor:"from-emerald-500 to-emerald-600"},{id:"3",title:le("customerDashboard.globalTitle"),description:le("customerDashboard.globalDesc"),icon:"anchor",iconColor:"text-amber-400",bgColor:"from-amber-500 to-orange-500"},{id:"4",title:le("customerDashboard.supportTitle"),description:le("customerDashboard.supportDesc"),icon:"headphones",iconColor:"text-purple-400",bgColor:"from-purple-500 to-purple-600"}]).map((et,de)=>t.jsxs("div",{className:"group relative bg-gradient-to-br from-slate-800 to-slate-900 text-white p-5 sm:p-6 rounded-2xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",children:[t.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${et.bgColor||"from-brand-500 to-brand-600"} opacity-20 rounded-full -mr-16 -mt-16 transition-transform duration-500 group-hover:scale-150`}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:`w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br ${et.bgColor||"from-brand-500 to-brand-600"} rounded-xl flex items-center justify-center mb-4 shadow-lg transform transition-transform duration-300 group-hover:scale-110`,children:[et.icon==="box"&&t.jsx(Vc,{size:24,className:"text-white"}),et.icon==="chart"&&t.jsx(Dr,{size:24,className:"text-white"}),et.icon==="anchor"&&t.jsx(lF,{size:24,className:"text-white"}),et.icon==="headphones"&&t.jsx(Nf,{size:24,className:"text-white"}),et.icon==="truck"&&t.jsx(fr,{size:24,className:"text-white"}),et.icon==="shield"&&t.jsx(Fn,{size:24,className:"text-white"}),et.icon==="globe"&&t.jsx(Ea,{size:24,className:"text-white"}),et.icon==="star"&&t.jsx(gi,{size:24,className:"text-white"}),et.icon==="clock"&&t.jsx(is,{size:24,className:"text-white"}),et.icon==="award"&&t.jsx(es,{size:24,className:"text-white"})]}),t.jsx("h4",{className:"font-bold text-base sm:text-lg mb-2 text-white",children:et.title}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-300 leading-relaxed",children:et.description})]})]},et.id))})]})]}),t.jsxs("div",{className:"xl:col-span-1 space-y-6 sticky top-6",children:[Ve("cart")&&t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col relative ${Nt?`${ve()} select-none`:""}`,children:[ot&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/60 backdrop-blur-[2px] rounded-2xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-2 p-4 bg-white/90 rounded-xl shadow-lg border border-brand-100 hover:shadow-xl transition-all","data-testid":"button-guest-cart-cta",children:[t.jsx("div",{className:"w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center",children:t.jsx(Sa,{size:20,className:"text-brand-600"})}),t.jsx("span",{className:"font-bold text-slate-800 text-sm",children:le("guestMode.restrictedTitle")})]})}),t.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-sm md:text-base flex items-center gap-2",children:[t.jsx(qa,{className:"text-brand-600",size:20}),le("customerDashboard.wholesaleCart")]}),t.jsx("span",{className:"bg-brand-600 text-white text-xs font-bold px-2.5 py-1 rounded-full",children:p.length})]}),t.jsx("div",{className:"max-h-[350px] overflow-y-auto p-3 space-y-3 custom-scrollbar min-h-[180px]",children:p.length>0?p.map(et=>t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 group hover:border-brand-200 transition-colors shadow-sm",children:[t.jsx("div",{className:"w-9 h-9 bg-slate-50 rounded-lg border border-slate-200 flex items-center justify-center text-slate-700 font-bold text-sm shrink-0",children:et.quantity}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-xs md:text-sm truncate",title:et.name,children:et.name}),t.jsx("p",{className:"text-[11px] text-slate-500 font-mono truncate font-semibold mt-0.5",children:et.partNumber})]}),t.jsx("button",{onClick:()=>gs(et.id),className:"text-slate-300 hover:text-red-500 p-1.5 rounded hover:bg-red-50 transition-colors",children:t.jsx(At,{size:16})})]},et.id)):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-10 text-slate-400",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-3",children:t.jsx(qa,{size:32,className:"opacity-30"})}),t.jsx("p",{className:"text-sm font-bold text-slate-500",children:le("customerDashboard.emptyCart")}),t.jsx("p",{className:"text-xs opacity-70 mt-1",children:le("customerDashboard.useSearchToAdd")})]})}),p.length>0&&t.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700",children:[t.jsx("span",{children:le("customerDashboard.estimatedTotal")}),t.jsxs("span",{className:"font-black text-slate-900",children:[ar.toLocaleString()," ",le("customerDashboard.sar")]})]}),t.jsxs("button",{onClick:Ps,className:"w-full py-3 bg-brand-600 text-white rounded-xl font-bold text-sm hover:bg-brand-700 shadow-md shadow-brand-200 transition-all flex justify-center items-center gap-2",children:[t.jsx(Mt,{size:18}),le("customerDashboard.submitOrder")]})]})]}),Ve("marketingCards")&&t.jsxs("div",{className:`space-y-4 relative ${Nt?`${ve()} select-none`:""}`,children:[ot&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/60 backdrop-blur-[2px] rounded-2xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-2 p-4 bg-white/90 rounded-xl shadow-lg border border-brand-100 hover:shadow-xl transition-all","data-testid":"button-guest-marketing-cta",children:[t.jsx("div",{className:"w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center",children:t.jsx(Sa,{size:20,className:"text-brand-600"})}),t.jsx("span",{className:"font-bold text-slate-800 text-sm",children:le("guestMode.restrictedTitle")})]})}),t.jsx(c5,{icon:t.jsx(fr,{className:"text-blue-600",size:24}),title:le("customerDashboard.fastShipping"),desc:le("customerDashboard.fastShippingDesc")}),t.jsx(c5,{icon:t.jsx(Nf,{className:"text-purple-600",size:24}),title:le("customerDashboard.techSupport"),desc:le("customerDashboard.techSupportDesc")})]})]})]})]}),f==="ORDERS"&&t.jsx(rde,{orders:b,quoteRequests:j}),f==="QUOTE_REQUEST"&&t.jsx(nde,{user:e,onSuccess:()=>{}}),f==="IMPORT_CHINA"&&t.jsx(dde,{user:e,userProfile:s}),f==="TRADER_TOOLS"&&t.jsx(Fde,{user:e,profile:s}),f==="TOOLS_HISTORY"&&t.jsx(Ude,{user:e}),f==="ALTERNATIVES"&&t.jsx(qde,{user:e,onBack:()=>x("HOME")}),f==="PRODUCT_SEARCH"&&t.jsx(Kde,{user:e,profile:s,onBack:()=>x("HOME")}),f==="ORGANIZATION"&&t.jsx(lde,{user:e,mainProfileUserId:e.role==="CUSTOMER_STAFF"?e.parentId:e.id}),f==="TEAM_MANAGEMENT"&&s&&t.jsx(Xde,{organizationType:"customer",entityId:e.role==="CUSTOMER_STAFF"&&e.parentId?e.parentId:e.id,entityName:s.businessName||"",currentUserId:e.id}),f==="ABOUT"&&t.jsx(ide,{}),f==="NOTIFICATIONS"&&t.jsx(uE,{user:e,onBack:()=>x("HOME")}),f==="HISTORY"&&t.jsxs("div",{className:"animate-fade-in",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(gn,{className:"text-brand-600"})," ",le("customerDashboard.searchHistory")]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:W.length>0?t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:le("customerDashboard.partNumber")}),t.jsx("th",{className:"p-5",children:le("customerDashboard.productName")}),t.jsx("th",{className:"p-5",children:le("customerDashboard.viewDate")}),t.jsx("th",{className:"p-5",children:le("customerDashboard.recordedPrice")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:W.map(et=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-5 font-mono font-bold text-brand-600 text-base",children:et.partNumber}),t.jsx("td",{className:"p-5 font-bold text-slate-800",children:et.productName}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:ms(et.viewedAt)}),t.jsxs("td",{className:"p-5 font-black text-slate-900",children:[et.priceSnapshot," ",le("customerDashboard.sar")]})]},et.id))})]}):t.jsxs("div",{className:"p-16 text-center text-slate-400",children:[t.jsx(gn,{size:64,className:"mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"font-bold text-lg text-slate-500",children:le("customerDashboard.noSearchHistory")})]})})]})]})})]}),t.jsx(ds,{isOpen:Z,onClose:()=>ue(!1),title:le("customerDashboard.orderSuccess.title"),maxWidth:"max-w-md",children:t.jsxs("div",{className:"text-center p-6",children:[t.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600 shadow-sm animate-bounce",children:t.jsx(Mt,{size:40,strokeWidth:3})}),t.jsx("p",{className:"text-slate-600 font-medium text-lg leading-relaxed mb-6",children:le("customerDashboard.orderSuccess.message")}),t.jsx("button",{onClick:()=>ue(!1),className:"w-full py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:le("common.confirm")})]})}),re&&t.jsx(ds,{isOpen:!!re,onClose:()=>J(null),title:"",maxWidth:"max-w-sm",children:t.jsxs("div",{className:"relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-50 via-white to-amber-50 opacity-60"}),t.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 bg-brand-400/10 rounded-full blur-2xl -translate-x-1/2 -translate-y-1/2"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 bg-amber-400/10 rounded-full blur-2xl translate-x-1/3 translate-y-1/3"}),t.jsxs("div",{className:"relative text-center p-4",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-brand-100 to-brand-50 rounded-xl flex items-center justify-center text-brand-600 mx-auto mb-2 shadow-sm border border-brand-100/50 transform hover:scale-105 transition-transform",children:t.jsx(Yt,{size:24})}),t.jsx("h3",{className:"text-base font-bold text-slate-800 leading-tight line-clamp-2",children:re.name}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1.5 mt-1.5",children:[t.jsx("span",{className:"text-[11px] text-slate-500 font-mono font-bold bg-slate-100/80 px-1.5 py-0.5 rounded",children:re.partNumber}),t.jsx("span",{className:"text-[11px] text-brand-700 font-bold uppercase px-1.5 py-0.5 rounded bg-brand-50 border border-brand-100/50",children:re.brand})]})]}),t.jsx("div",{className:"bg-gradient-to-br from-white to-slate-50/80 p-3 rounded-xl border border-slate-100 mb-3 shadow-sm backdrop-blur-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mb-0.5",children:le("customerDashboard.priceModal.wholesalePrice")}),t.jsxs("div",{className:"text-2xl font-black bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:[re.price," ",t.jsx("span",{className:"text-sm text-slate-500 font-bold",children:le("customerDashboard.sar")})]})]}),re.stock>0?t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-emerald-50 border border-emerald-200/50",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),t.jsx("span",{className:"text-[10px] font-bold text-emerald-700",children:le("customerDashboard.available")})]}):t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-50 border border-red-200/50",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),t.jsx("span",{className:"text-[10px] font-bold text-red-700",children:le("customerDashboard.outOfStock")})]})]})}),t.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[t.jsxs("span",{className:"text-xs text-slate-500 font-bold",children:[le("customerDashboard.priceModal.quantity")||"",":"]}),t.jsxs("div",{className:"flex items-center border border-slate-200 rounded-lg h-9 bg-white shadow-sm overflow-hidden",children:[t.jsx("button",{onClick:()=>q(Math.max(1,Ne-1)),"data-testid":"button-quantity-decrease",className:"w-9 h-full flex items-center justify-center text-slate-500 hover:text-brand-600 hover:bg-brand-50 border-l border-slate-100 transition-colors",children:t.jsx(oE,{size:14})}),t.jsx("div",{className:"w-10 flex items-center justify-center font-black text-sm text-slate-800","data-testid":"text-quantity-value",children:Ne}),t.jsx("button",{onClick:()=>q(Ne+1),"data-testid":"button-quantity-increase",className:"w-9 h-full flex items-center justify-center text-slate-500 hover:text-brand-600 hover:bg-brand-50 border-r border-slate-100 transition-colors",children:t.jsx(kt,{size:14})})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>J(null),"data-testid":"button-modal-close",className:"flex-1 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-lg font-bold text-sm hover:bg-slate-50 transition-colors",children:le("customerDashboard.priceModal.close")}),t.jsxs("button",{onClick:et=>{et.stopPropagation(),Pt()},disabled:re.stock===0,"data-testid":"button-modal-add-to-cart",className:`flex-1 py-2.5 text-white rounded-lg font-bold text-sm flex items-center justify-center gap-1.5 transition-all transform hover:scale-[1.02] active:scale-[0.98] ${re.stock>0?"bg-gradient-to-r from-brand-600 to-brand-500 hover:from-brand-700 hover:to-brand-600 shadow-md shadow-brand-500/20":"bg-slate-300 cursor-not-allowed shadow-none"}`,children:[t.jsx(qa,{size:15}),le("customerDashboard.priceModal.addToCart")]})]})]})]})}),V&&t.jsx(ds,{isOpen:!!V,onClose:()=>te(null),title:le("customerDashboard.duplicateConfirm.title"),maxWidth:"max-w-md",children:t.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[t.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center text-amber-600 mb-6 animate-bounce",children:t.jsx(Ks,{size:40})}),t.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-3",children:le("customerDashboard.duplicateConfirm.title")}),t.jsxs("p",{className:"text-slate-600 mb-8 leading-relaxed font-medium",children:[le("customerDashboard.duplicateConfirm.message"),t.jsx("span",{className:"font-black text-slate-900 mx-1 block my-2 bg-slate-100 p-2 rounded-lg border border-slate-200",children:V.product.name}),"(",t.jsx("span",{className:"font-bold text-brand-600 mx-1",children:V.quantity}),")"]}),t.jsxs("div",{className:"flex gap-4 w-full",children:[t.jsx("button",{onClick:()=>te(null),className:"flex-1 py-3.5 bg-white border border-slate-300 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:le("customerDashboard.duplicateConfirm.cancel")}),t.jsx("button",{onClick:ss,className:"flex-1 py-3.5 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-200 transition-colors",children:le("customerDashboard.duplicateConfirm.confirm")})]})]})}),jt&&!Nt&&t.jsx(wde,{userId:e.id,customerType:s==null?void 0:s.businessType,onClose:()=>Ft(!1)}),!Nt&&t.jsx($de,{user:{id:e.id,name:e.name,phone:e.phone,email:e.email,role:e.role}})]})},lue=e=>[{key:"orderStatus",label:e("adminSettings.statusCategories.orderStatus"),icon:t.jsx(qa,{size:16})},{key:"orderInternalStatus",label:e("adminSettings.statusCategories.orderInternalStatus"),icon:t.jsx(jF,{size:16})},{key:"accountRequestStatus",label:e("adminSettings.statusCategories.accountRequestStatus"),icon:t.jsx(Wt,{size:16})},{key:"quoteRequestStatus",label:e("adminSettings.statusCategories.quoteRequestStatus"),icon:t.jsx(mr,{size:16})},{key:"quoteItemStatus",label:e("adminSettings.statusCategories.quoteItemStatus"),icon:t.jsx(zt,{size:16})},{key:"missingStatus",label:e("adminSettings.statusCategories.missingStatus"),icon:t.jsx(Yt,{size:16})},{key:"importRequestStatus",label:e("adminSettings.statusCategories.importRequestStatus"),icon:t.jsx(fr,{size:16})},{key:"customerStatus",label:e("adminSettings.statusCategories.customerStatus"),icon:t.jsx(Ea,{size:16})},{key:"staffStatus",label:e("adminSettings.statusCategories.staffStatus"),icon:t.jsx(Wt,{size:16})}],oue=({settings:e,onUpdate:s,onSave:a,saving:r})=>{const[n,i]=C.useState("orderStatus"),[l,o]=C.useState(null),[d,u]=C.useState(""),[h,f]=C.useState("#000000"),[x,p]=C.useState("#ffffff"),[v,b]=C.useState(!1),[y,j]=C.useState(""),[w,S]=C.useState(""),[O,_]=C.useState("#6b7280"),[E,A]=C.useState("#f3f4f6"),[D,L]=C.useState(null),[B,I]=C.useState(!1),{addToast:T}=It(),{t:z}=Hs(),k=lue(z),F=e.statusLabels;if(!F)return null;const P=F[n],G=k.find(Q=>Q.key===n),Y=Object.entries(P).sort((Q,se)=>{const V=Q[1].sortOrder||999,te=se[1].sortOrder||999;return V-te}),W=Q=>{const se=P[Q];se&&(o(Q),u(se.label),f(se.color),p(se.bgColor))},ee=async()=>{if(!l||!d.trim())return;const Q=P[l],se={...F,[n]:{...P,[l]:{...Q,label:d.trim(),color:h,bgColor:x}}};s({...e,statusLabels:se}),await he.updateStatusLabels(se),o(null),T(z("adminSettings.statusUpdated"),"success")},H=()=>{o(null)},M=async()=>{if(!y.trim()||!w.trim()){T(z("adminSettings.fillKeyAndName"),"error");return}const Q=y.trim().toUpperCase().replace(/\s+/g,"_");if(P[Q]){T(z("adminSettings.keyExists"),"error");return}const V=Object.values(P).reduce((Z,ue)=>Math.max(Z,ue.sortOrder||0),0),te={...F,[n]:{...P,[Q]:{label:w.trim(),color:O,bgColor:E,isSystem:!1,sortOrder:V+1}}};s({...e,statusLabels:te}),await he.updateStatusLabels(te),b(!1),j(""),S(""),_("#6b7280"),A("#f3f4f6"),T(z("adminSettings.statusAdded"),"success")},X=async Q=>{if(P[Q].isSystem){T(z("adminSettings.cannotDeleteSystem"),"error");return}I(!0);const V=await he.checkStatusUsage(n,Q);if(I(!1),V>0){T(z("adminSettings.cannotDeleteInUse",{count:V}),"error"),L(null);return}const te={...P};delete te[Q];const Z={...F,[n]:te};s({...e,statusLabels:Z}),await he.updateStatusLabels(Z),L(null),T(z("adminSettings.statusDeleted"),"success")},K=async Q=>{const se={...P};Object.keys(se).forEach(te=>{se[te]={...se[te],isDefault:te===Q}});const V={...F,[n]:se};s({...e,statusLabels:V}),await he.updateStatusLabels(V),T(z("adminSettings.defaultStatusSet"),"success")};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(NF,{className:"text-orange-500"})," ",z("adminSettings.statusLabelsManagement")]}),t.jsxs("button",{onClick:a,disabled:r,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2","data-testid":"button-save-status-labels",children:[t.jsx(us,{size:18})," ",z(r?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsx("p",{className:"text-sm text-slate-500 bg-slate-50 p-4 rounded-xl",children:z("adminSettings.statusLabelsDescription")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(Q=>t.jsxs("button",{onClick:()=>{i(Q.key),b(!1),o(null)},className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${n===Q.key?"bg-slate-900 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`button-category-${Q.key}`,children:[Q.icon,Q.label]},Q.key))}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-visible",children:[t.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[G==null?void 0:G.icon," ",G==null?void 0:G.label]}),t.jsxs("button",{onClick:()=>b(!v),className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg text-sm font-bold hover:bg-brand-700 transition-colors","data-testid":"button-add-new-status",children:[t.jsx(kt,{size:16})," ",z("adminSettings.addNewStatus")]})]}),v&&t.jsxs("div",{className:"bg-brand-50 p-6 border-b border-brand-200 animate-slide-up",children:[t.jsxs("h4",{className:"font-bold text-brand-800 mb-4 flex items-center gap-2",children:[t.jsx(kt,{size:18})," ",z("adminSettings.addNewStatus")]}),t.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:z("adminSettings.statusKey")}),t.jsx("input",{type:"text",value:y,onChange:Q=>j(Q.target.value.toUpperCase().replace(/\s+/g,"_")),className:"w-full p-2 border border-slate-300 rounded-lg text-sm font-mono",placeholder:"NEW_STATUS","data-testid":"input-new-status-key"})]}),t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:z("adminSettings.statusLabel")}),t.jsx("input",{type:"text",value:w,onChange:Q=>S(Q.target.value),className:"w-full p-2 border border-slate-300 rounded-lg text-sm font-bold",placeholder:z("adminSettings.newStatus"),"data-testid":"input-new-status-label"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.textColor"),":"]}),t.jsx("input",{type:"color",value:O,onChange:Q=>_(Q.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-new-status-color"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.backgroundColor"),":"]}),t.jsx("input",{type:"color",value:E,onChange:Q=>A(Q.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-new-status-bgcolor"})]}),t.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:E,color:O},children:w||z("adminSettings.preview")}),t.jsx("button",{onClick:M,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition-colors","data-testid":"button-confirm-add-status",children:z("adminSettings.add")}),t.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300 transition-colors","data-testid":"button-cancel-add-status",children:z("common.cancel")})]})]}),t.jsx("div",{className:"divide-y divide-slate-100",children:Y.map(([Q,se])=>t.jsx("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 transition-colors","data-testid":`row-status-${Q}`,children:l===Q?t.jsxs("div",{className:"flex-1 flex items-center gap-4 flex-wrap",children:[t.jsx("input",{type:"text",value:d,onChange:V=>u(V.target.value),className:"flex-1 min-w-[150px] p-2 border border-slate-300 rounded-lg text-sm font-bold",placeholder:z("adminSettings.statusLabel"),"data-testid":"input-edit-status-label"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.textColor"),":"]}),t.jsx("input",{type:"color",value:h,onChange:V=>f(V.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-edit-status-color"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.backgroundColor"),":"]}),t.jsx("input",{type:"color",value:x,onChange:V=>p(V.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-edit-status-bgcolor"})]}),t.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:x,color:h},children:d||z("adminSettings.preview")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:ee,className:"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors","data-testid":"button-confirm-edit-status",children:t.jsx(es,{size:16})}),t.jsx("button",{onClick:H,className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors","data-testid":"button-cancel-edit-status",children:t.jsx(vt,{size:16})})]})]}):D===Q?t.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[t.jsx("span",{className:"text-red-600 font-bold text-sm",children:z(B?"adminSettings.checkingUsage":"adminSettings.confirmDelete")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>X(Q),disabled:B,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-bold hover:bg-red-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-delete-status",children:z("adminSettings.yesDelete")}),t.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300 transition-colors","data-testid":"button-cancel-delete-status",children:z("common.cancel")})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded font-mono text-slate-500",children:Q}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:se.bgColor,color:se.color},children:se.label}),se.isSystem&&t.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-[10px] font-bold flex items-center gap-1",children:[t.jsx(Fn,{size:10})," ",z("adminSettings.systemStatus")]}),se.isDefault&&t.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded text-[10px] font-bold flex items-center gap-1",children:[t.jsx(bn,{size:10})," ",z("adminSettings.defaultStatus")]}),se.sortOrder&&t.jsxs("span",{className:"text-[10px] text-slate-400",children:["#",se.sortOrder]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[!se.isDefault&&t.jsx("button",{onClick:()=>K(Q),className:"p-2 text-amber-500 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors",title:z("adminSettings.setAsDefault"),"data-testid":`button-set-default-${Q}`,children:t.jsx(bn,{size:16})}),t.jsx("button",{onClick:()=>W(Q),className:"p-2 text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",title:z("common.edit"),"data-testid":`button-edit-status-${Q}`,children:t.jsx(Vp,{size:16})}),!se.isSystem&&t.jsx("button",{onClick:()=>L(Q),className:"p-2 text-red-400 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:z("common.delete"),"data-testid":`button-delete-status-${Q}`,children:t.jsx(At,{size:16})})]})]})},Q))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-blue-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(Fn,{size:16})," ",z("adminSettings.systemStatuses")]}),z("adminSettings.systemStatusesDesc")]}),t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(bn,{size:16})," ",z("adminSettings.defaultStatusInfo")]}),z("adminSettings.defaultStatusInfoDesc")]})]})]})},cue=({settings:e,onUpdate:s,onSave:a,saving:r})=>{const[n,i]=C.useState(!1),[l,o]=C.useState(null),[d,u]=C.useState(!1),[h,f]=C.useState("initial"),[x,p]=C.useState(!1),{addToast:v}=It(),{t:b}=Hs(),y=async S=>{var _;const O=(_=S.target.files)==null?void 0:_[0];if(O)try{const E=await O.text(),A=JSON.parse(E),L=["products","orders","customers","settings"].filter(I=>!(I in A));if(L.length>0){v(`    .  : ${L.join(", ")}`,"error");return}if(!(Array.isArray(A.products)&&A.products.length>0||Array.isArray(A.orders)&&A.orders.length>0||Array.isArray(A.customers)&&A.customers.length>0)){v("         ","error");return}if(!A.exportDate){v("     -       ","error");return}o(O),i(!0),v("       ","success")}catch{v("     -     JSON ","error")}},j=async()=>{try{const S=await he.exportAllData(),O=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),_=URL.createObjectURL(O),E=document.createElement("a");E.href=_,E.download=`sinicar_backup_${new Date().toISOString().split("T")[0]}.json`,E.click(),URL.revokeObjectURL(_),v("    ","success")}catch{v("     ","error")}},w=async()=>{if(!n){v("      ","error");return}p(!0);try{await he.resetAllData(),v("    ","success"),u(!1),f("initial"),i(!1),o(null),window.location.reload()}catch{v("    ","error")}finally{p(!1)}};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsx("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Wo,{className:"text-brand-600"}),"  "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"    "})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(BS,{size:20,className:"text-green-500"}),"  "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("button",{onClick:j,className:"p-6 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-all text-right",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(uF,{size:24,className:"text-green-600"}),t.jsx("span",{className:"font-bold text-green-800",children:"  "})]}),t.jsx("p",{className:"text-sm text-green-600",children:"     JSON"})]}),t.jsxs("label",{className:"p-6 bg-blue-50 border border-blue-200 rounded-xl hover:bg-blue-100 transition-all cursor-pointer text-right block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(BS,{size:24,className:"text-blue-600"}),t.jsx("span",{className:"font-bold text-blue-800",children:"  "}),n&&t.jsx(Un,{size:20,className:"text-green-500"})]}),t.jsx("p",{className:"text-sm text-blue-600",children:l?` : ${l.name}`:"    JSON"}),t.jsx("input",{type:"file",accept:".json",onChange:y,className:"hidden"})]})]})]}),t.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(Ks,{size:20,className:"text-red-500"}),"    ()"]}),t.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(jf,{size:24,className:"text-red-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-red-800",children:":      !"}),t.jsx("p",{className:"text-sm text-red-600 mt-1",children:"     :      ."}),t.jsx("p",{className:"text-sm text-red-700 font-bold mt-2",children:"       ."})]})]})}),d?t.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[h==="initial"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-slate-700 font-bold",children:"        "}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>f("confirm"),className:"flex-1 bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700",children:" "}),t.jsx("button",{onClick:()=>{u(!1),f("initial")},className:"flex-1 bg-slate-200 text-slate-700 py-3 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),h==="confirm"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-red-700 font-bold",children:"  :    !"}),t.jsx("p",{className:"text-sm text-slate-600",children:' "" :'}),t.jsx("input",{type:"text",className:"w-full p-3 border border-slate-300 rounded-lg text-center font-bold",placeholder:" ",onChange:S=>{S.target.value===""&&f("final")}}),t.jsx("button",{onClick:()=>{u(!1),f("initial")},className:"w-full bg-slate-200 text-slate-700 py-3 rounded-lg font-bold hover:bg-slate-300",children:""})]}),h==="final"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-red-100 border border-red-300 rounded-lg text-center",children:[t.jsx(Ks,{size:48,className:"text-red-600 mx-auto mb-2"}),t.jsx("p",{className:"text-red-800 font-bold",children:"  !"})]}),t.jsx("button",{onClick:w,disabled:x,className:"w-full bg-red-700 text-white py-4 rounded-lg font-bold hover:bg-red-800 disabled:opacity-50 flex items-center justify-center gap-2",children:x?t.jsxs(t.Fragment,{children:[t.jsx(Jo,{size:20,className:"animate-spin"})," ..."]}):t.jsxs(t.Fragment,{children:[t.jsx(At,{size:20}),"  "]})}),t.jsx("button",{onClick:()=>{u(!1),f("initial")},className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700",children:"  -  "})]})]}):t.jsxs("button",{onClick:()=>u(!0),disabled:!n,className:`w-full p-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${n?"bg-red-600 text-white hover:bg-red-700":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[t.jsx(At,{size:20}),n?"  ":"   "]})]})]})},due=({t:e})=>{const[s,a]=C.useState([{id:"ORDER_CONFIRMED",name:" ",nameEn:"Order Confirmed",type:"success",icon:"CheckCircle2",channels:["toast","email"],enabled:!0,message:{ar:"   ",en:"Your order has been confirmed",hi:"     ",zh:""},style:{bgColor:"#10b981",textColor:"#ffffff",borderColor:"#059669"}},{id:"ORDER_SHIPPED",name:" ",nameEn:"Order Shipped",type:"info",icon:"Truck",channels:["toast","email","sms"],enabled:!0,message:{ar:"  ",en:"Your order has been shipped",hi:"     ",zh:""},style:{bgColor:"#3b82f6",textColor:"#ffffff",borderColor:"#2563eb"}},{id:"PAYMENT_SUCCESS",name:" ",nameEn:"Payment Success",type:"success",icon:"DollarSign",channels:["toast","email"],enabled:!0,message:{ar:"   ",en:"Payment received successfully",hi:"   ",zh:""},style:{bgColor:"#059669",textColor:"#ffffff",borderColor:"#047857"}},{id:"LOW_STOCK",name:" ",nameEn:"Low Stock Alert",type:"warning",icon:"AlertCircle",channels:["toast","modal"],enabled:!0,message:{ar:":   ",en:"Alert: Low stock for product",hi:":  ",zh:""},style:{bgColor:"#f59e0b",textColor:"#ffffff",borderColor:"#d97706"}},{id:"ACCOUNT_APPROVED",name:"  ",nameEn:"Account Approved",type:"success",icon:"UserCheck",channels:["toast","email","sms"],enabled:!0,message:{ar:"   ",en:"Your account has been approved",hi:"    ",zh:""},style:{bgColor:"#22c55e",textColor:"#ffffff",borderColor:"#16a34a"}},{id:"NEW_MESSAGE",name:" ",nameEn:"New Message",type:"info",icon:"MessageSquare",channels:["toast","banner"],enabled:!0,message:{ar:"  ",en:"You have a new message",hi:"     ",zh:""},style:{bgColor:"#6366f1",textColor:"#ffffff",borderColor:"#4f46e5"}},{id:"ERROR_GENERAL",name:" ",nameEn:"General Error",type:"error",icon:"XCircle",channels:["toast","modal"],enabled:!0,message:{ar:"     ",en:"An error occurred, please try again",hi:"  ,    ",zh:""},style:{bgColor:"#ef4444",textColor:"#ffffff",borderColor:"#dc2626"}}]),[r,n]=C.useState(null),[i,l]=C.useState(null),o=[{value:"success",label:e("adminSettings.notifSuccess",""),icon:t.jsx(Un,{size:16,className:"text-green-500"})},{value:"error",label:e("adminSettings.notifError",""),icon:t.jsx(sa,{size:16,className:"text-red-500"})},{value:"warning",label:e("adminSettings.notifWarning",""),icon:t.jsx(Cs,{size:16,className:"text-amber-500"})},{value:"info",label:e("adminSettings.notifInfo",""),icon:t.jsx(mi,{size:16,className:"text-blue-500"})}],d=[{value:"toast",label:e("adminSettings.channelToast"," "),icon:t.jsx(Rr,{size:14})},{value:"modal",label:e("adminSettings.channelModal"," "),icon:t.jsx(Wc,{size:14})},{value:"banner",label:e("adminSettings.channelBanner"," "),icon:t.jsx(ja,{size:14})},{value:"email",label:e("adminSettings.channelEmail"," "),icon:t.jsx(Fl,{size:14})},{value:"sms",label:e("adminSettings.channelSMS"," "),icon:t.jsx(vre,{size:14})}],u=(f,x)=>{a(p=>p.map(v=>v.id===f?{...v,...x}:v))},h=(f,x)=>{const p=s.find(b=>b.id===f);if(!p)return;const v=p.channels.includes(x)?p.channels.filter(b=>b!==x):[...p.channels,x];u(f,{channels:v})};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Nr,{className:"text-brand-600"})," ",e("adminSettings.notificationManagement"," ")]}),t.jsxs("button",{className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 flex items-center gap-2",children:[t.jsx(kt,{size:18})," ",e("adminSettings.addNotification"," ")]})]}),t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-100",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(pi,{className:"text-blue-500 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-blue-800",children:e("adminSettings.notifSystemDesc","  ")}),t.jsx("p",{className:"text-sm text-blue-600",children:e("adminSettings.notifSystemDescDetail","     :    ")})]})]})}),t.jsx("div",{className:"space-y-4",children:s.map(f=>t.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${r===f.id?"border-brand-500 bg-brand-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:r===f.id?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-bold text-slate-800",children:e("adminSettings.editNotification"," ")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>l(f),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:t.jsx(ns,{size:16})}),t.jsx("button",{onClick:()=>n(null),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:t.jsx(es,{size:16})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifNameAr"," ")}),t.jsx("input",{type:"text",value:f.name,onChange:x=>u(f.id,{name:x.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifNameEn"," ")}),t.jsx("input",{type:"text",value:f.nameEn,onChange:x=>u(f.id,{nameEn:x.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifType"," ")}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(x=>t.jsxs("button",{onClick:()=>u(f.id,{type:x.value}),className:`flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${f.type===x.value?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[x.icon," ",x.label]},x.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifChannels"," ")}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:d.map(x=>t.jsxs("button",{onClick:()=>h(f.id,x.value),className:`flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${f.channels.includes(x.value)?"border-green-500 bg-green-50":"border-slate-200"}`,children:[x.icon," ",x.label]},x.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgAr"," ")}),t.jsx("input",{type:"text",value:f.message.ar,onChange:x=>u(f.id,{message:{...f.message,ar:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgEn"," ")}),t.jsx("input",{type:"text",value:f.message.en,dir:"ltr",onChange:x=>u(f.id,{message:{...f.message,en:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgHi"," ")}),t.jsx("input",{type:"text",value:f.message.hi,dir:"ltr",onChange:x=>u(f.id,{message:{...f.message,hi:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgZh"," ")}),t.jsx("input",{type:"text",value:f.message.zh,dir:"ltr",onChange:x=>u(f.id,{message:{...f.message,zh:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifBgColor"," ")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:f.style.bgColor,onChange:x=>u(f.id,{style:{...f.style,bgColor:x.target.value}}),className:"w-12 h-12 rounded-lg cursor-pointer border border-slate-200"}),t.jsx("input",{type:"text",value:f.style.bgColor,onChange:x=>u(f.id,{style:{...f.style,bgColor:x.target.value}}),className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifTextColor"," ")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:f.style.textColor,onChange:x=>u(f.id,{style:{...f.style,textColor:x.target.value}}),className:"w-12 h-12 rounded-lg cursor-pointer border border-slate-200"}),t.jsx("input",{type:"text",value:f.style.textColor,onChange:x=>u(f.id,{style:{...f.style,textColor:x.target.value}}),className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifBorderColor"," ")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:f.style.borderColor,onChange:x=>u(f.id,{style:{...f.style,borderColor:x.target.value}}),className:"w-12 h-12 rounded-lg cursor-pointer border border-slate-200"}),t.jsx("input",{type:"text",value:f.style.borderColor,onChange:x=>u(f.id,{style:{...f.style,borderColor:x.target.value}}),className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono",dir:"ltr"})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:e("adminSettings.notifPreview"," ")}),t.jsxs("div",{className:"p-4 rounded-xl flex items-center gap-3 shadow-lg",style:{backgroundColor:f.style.bgColor,color:f.style.textColor,borderLeft:`4px solid ${f.style.borderColor}`},children:[f.type==="success"&&t.jsx(Un,{size:24}),f.type==="error"&&t.jsx(sa,{size:24}),f.type==="warning"&&t.jsx(Cs,{size:24}),f.type==="info"&&t.jsx(mi,{size:24}),t.jsx("span",{className:"font-bold",children:f.message.ar})]})]})]}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:f.style.bgColor,color:f.style.textColor},children:[f.type==="success"&&t.jsx(Un,{size:20}),f.type==="error"&&t.jsx(sa,{size:20}),f.type==="warning"&&t.jsx(Cs,{size:20}),f.type==="info"&&t.jsx(mi,{size:20})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800",children:f.name}),t.jsx("p",{className:"text-sm text-slate-500",children:f.nameEn})]}),t.jsx("div",{className:"flex gap-1 flex-wrap",children:f.channels.map(x=>t.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded text-xs font-bold",children:x},x))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>u(f.id,{enabled:!f.enabled}),className:`p-2 rounded-lg transition-colors ${f.enabled?"bg-green-100 text-green-600":"bg-slate-100 text-slate-400"}`,children:f.enabled?t.jsx(one,{size:16}):t.jsx(dr,{size:16})}),t.jsx("button",{onClick:()=>n(f.id),className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200",children:t.jsx(Vp,{size:16})}),t.jsx("button",{className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:t.jsx(At,{size:16})})]})]})},f.id))})]})},uue=({t:e})=>{const[s,a]=C.useState([{id:"INVOICE",name:"",nameEn:"Invoice",type:"invoice",isDefault:!0,pageSize:"A4",orientation:"portrait",margins:{top:20,right:20,bottom:20,left:20},header:{enabled:!0,height:80,showLogo:!0,logoPosition:"right",showCompanyInfo:!0},footer:{enabled:!0,height:40,showPageNumbers:!0,customText:"  "},columns:["productName","sku","quantity","unitPrice","total"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:16,body:12}},colors:{primary:"#1e3a5f",secondary:"#f59e0b",text:"#1f2937",border:"#e5e7eb"}},{id:"QUOTE",name:" ",nameEn:"Quotation",type:"quote",isDefault:!1,pageSize:"A4",orientation:"portrait",margins:{top:25,right:25,bottom:25,left:25},header:{enabled:!0,height:100,showLogo:!0,logoPosition:"center",showCompanyInfo:!0},footer:{enabled:!0,height:50,showPageNumbers:!0,customText:"    7 "},columns:["productName","sku","quantity","unitPrice","discount","total"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:18,body:11}},colors:{primary:"#059669",secondary:"#fbbf24",text:"#374151",border:"#d1d5db"}},{id:"PACKING_LIST",name:" ",nameEn:"Packing List",type:"packing",isDefault:!1,pageSize:"A4",orientation:"portrait",margins:{top:15,right:15,bottom:15,left:15},header:{enabled:!0,height:60,showLogo:!0,logoPosition:"left",showCompanyInfo:!1},footer:{enabled:!1,height:0,showPageNumbers:!1,customText:""},columns:["productName","sku","quantity","location","notes"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:14,body:10}},colors:{primary:"#7c3aed",secondary:"#a78bfa",text:"#4b5563",border:"#e5e7eb"}},{id:"DELIVERY_NOTE",name:" ",nameEn:"Delivery Note",type:"delivery",isDefault:!1,pageSize:"A4",orientation:"portrait",margins:{top:20,right:20,bottom:20,left:20},header:{enabled:!0,height:70,showLogo:!0,logoPosition:"right",showCompanyInfo:!0},footer:{enabled:!0,height:60,showPageNumbers:!1,customText:" : ____________"},columns:["productName","quantity","notes"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:15,body:11}},colors:{primary:"#0891b2",secondary:"#06b6d4",text:"#1f2937",border:"#cbd5e1"}}]),[r,n]=C.useState(null),[i,l]=C.useState(null),o=[{value:"A4",label:"A4 (210  297 mm)"},{value:"A5",label:"A5 (148  210 mm)"},{value:"Letter",label:"Letter (8.5  11 in)"},{value:"Legal",label:"Legal (8.5  14 in)"}],d=[{value:"productName",label:e("adminSettings.colProductName"," ")},{value:"sku",label:e("adminSettings.colSku"," ")},{value:"quantity",label:e("adminSettings.colQuantity","")},{value:"unitPrice",label:e("adminSettings.colUnitPrice"," ")},{value:"discount",label:e("adminSettings.colDiscount","")},{value:"total",label:e("adminSettings.colTotal","")},{value:"location",label:e("adminSettings.colLocation","")},{value:"notes",label:e("adminSettings.colNotes","")}],u=(f,x)=>{a(p=>p.map(v=>v.id===f?{...v,...x}:v))},h=(f,x)=>{const p=s.find(b=>b.id===f);if(!p)return;const v=p.columns.includes(x)?p.columns.filter(b=>b!==x):[...p.columns,x];u(f,{columns:v})};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Qc,{className:"text-brand-600"})," ",e("adminSettings.printTemplateDesigner","  ")]}),t.jsxs("button",{className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 flex items-center gap-2",children:[t.jsx(kt,{size:18})," ",e("adminSettings.addTemplate"," ")]})]}),t.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-xl border border-purple-100",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Wc,{className:"text-purple-500 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-purple-800",children:e("adminSettings.templateDesignerDesc","  ")}),t.jsx("p",{className:"text-sm text-purple-600",children:e("adminSettings.templateDesignerDescDetail","          ")})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(f=>t.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${r===f.id?"border-brand-500 bg-brand-50 md:col-span-2":"border-slate-200 bg-white hover:border-slate-300"}`,children:r===f.id?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"font-bold text-slate-800 text-lg",children:[e("adminSettings.editTemplate"," "),": ",f.name]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>l(f),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 flex items-center gap-2",children:[t.jsx(ns,{size:16})," ",e("adminSettings.preview","")]}),t.jsx("button",{onClick:()=>n(null),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:t.jsx(es,{size:16})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h5",{className:"font-bold text-slate-700 flex items-center gap-2",children:[t.jsx(aa,{size:16})," ",e("adminSettings.pageSettings"," ")]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:e("adminSettings.pageSize"," ")}),t.jsx("select",{value:f.pageSize,onChange:x=>u(f.id,{pageSize:x.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",children:o.map(x=>t.jsx("option",{value:x.value,children:x.label},x.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:e("adminSettings.orientation","")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>u(f.id,{orientation:"portrait"}),className:`flex-1 p-3 rounded-lg border-2 transition-all ${f.orientation==="portrait"?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[t.jsx("div",{className:"w-6 h-8 border-2 border-current mx-auto mb-1"}),t.jsx("span",{className:"text-xs",children:e("adminSettings.portrait","")})]}),t.jsxs("button",{onClick:()=>u(f.id,{orientation:"landscape"}),className:`flex-1 p-3 rounded-lg border-2 transition-all ${f.orientation==="landscape"?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[t.jsx("div",{className:"w-8 h-6 border-2 border-current mx-auto mb-1"}),t.jsx("span",{className:"text-xs",children:e("adminSettings.landscape","")})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:e("adminSettings.margins"," (mm)")}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.top","")}),t.jsx("input",{type:"number",value:f.margins.top,onChange:x=>u(f.id,{margins:{...f.margins,top:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.bottom","")}),t.jsx("input",{type:"number",value:f.margins.bottom,onChange:x=>u(f.id,{margins:{...f.margins,bottom:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.right","")}),t.jsx("input",{type:"number",value:f.margins.right,onChange:x=>u(f.id,{margins:{...f.margins,right:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.left","")}),t.jsx("input",{type:"number",value:f.margins.left,onChange:x=>u(f.id,{margins:{...f.margins,left:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h5",{className:"font-bold text-slate-700 flex items-center gap-2",children:[t.jsx(Wc,{size:16})," ",e("adminSettings.headerFooter"," ")]}),t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-bold text-sm",children:e("adminSettings.header","")}),t.jsx("button",{onClick:()=>u(f.id,{header:{...f.header,enabled:!f.header.enabled}}),className:`p-2 rounded-lg ${f.header.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:f.header.enabled?t.jsx(es,{size:14}):t.jsx(vt,{size:14})})]}),f.header.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:f.header.showLogo,onChange:x=>u(f.id,{header:{...f.header,showLogo:x.target.checked}}),className:"rounded"}),t.jsx("span",{className:"text-sm",children:e("adminSettings.showLogo"," ")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.logoPosition"," ")}),t.jsx("div",{className:"flex gap-1",children:["left","center","right"].map(x=>t.jsxs("button",{onClick:()=>u(f.id,{header:{...f.header,logoPosition:x}}),className:`flex-1 p-2 rounded border ${f.header.logoPosition===x?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[x==="left"&&t.jsx(qre,{size:14,className:"mx-auto"}),x==="center"&&t.jsx(Ure,{size:14,className:"mx-auto"}),x==="right"&&t.jsx(Bre,{size:14,className:"mx-auto"})]},x))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:f.header.showCompanyInfo,onChange:x=>u(f.id,{header:{...f.header,showCompanyInfo:x.target.checked}}),className:"rounded"}),t.jsx("span",{className:"text-sm",children:e("adminSettings.showCompanyInfo"," ")})]})]})]}),t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-bold text-sm",children:e("adminSettings.footer","")}),t.jsx("button",{onClick:()=>u(f.id,{footer:{...f.footer,enabled:!f.footer.enabled}}),className:`p-2 rounded-lg ${f.footer.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:f.footer.enabled?t.jsx(es,{size:14}):t.jsx(vt,{size:14})})]}),f.footer.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:f.footer.showPageNumbers,onChange:x=>u(f.id,{footer:{...f.footer,showPageNumbers:x.target.checked}}),className:"rounded"}),t.jsx("span",{className:"text-sm",children:e("adminSettings.showPageNumbers"," ")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.customText"," ")}),t.jsx("input",{type:"text",value:f.footer.customText,onChange:x=>u(f.id,{footer:{...f.footer,customText:x.target.value}}),className:"w-full p-2 bg-white border border-slate-200 rounded-lg"})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h5",{className:"font-bold text-slate-700 flex items-center gap-2",children:[t.jsx(Ko,{size:16})," ",e("adminSettings.colorsAndFonts"," ")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.primaryColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.primary,onChange:x=>u(f.id,{colors:{...f.colors,primary:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.primary,onChange:x=>u(f.id,{colors:{...f.colors,primary:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.secondaryColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.secondary,onChange:x=>u(f.id,{colors:{...f.colors,secondary:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.secondary,onChange:x=>u(f.id,{colors:{...f.colors,secondary:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.textColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.text,onChange:x=>u(f.id,{colors:{...f.colors,text:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.text,onChange:x=>u(f.id,{colors:{...f.colors,text:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.borderColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.border,onChange:x=>u(f.id,{colors:{...f.colors,border:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.border,onChange:x=>u(f.id,{colors:{...f.colors,border:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.columns"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.map(x=>t.jsx("button",{onClick:()=>h(f.id,x.value),className:`px-2 py-1 text-xs rounded border transition-all ${f.columns.includes(x.value)?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 text-slate-600"}`,children:x.label},x.value))})]})]})]})]}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:f.colors.primary},children:t.jsx(Qc,{size:20,className:"text-white"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-bold text-slate-800",children:f.name}),f.isDefault&&t.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded text-xs font-bold",children:e("adminSettings.default","")})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[f.nameEn,"  ",f.pageSize,"  ",f.orientation==="portrait"?e("adminSettings.portrait",""):e("adminSettings.landscape","")]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>n(f.id),className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200",children:t.jsx(aa,{size:16})}),t.jsx("button",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:t.jsx(qp,{size:16})}),!f.isDefault&&t.jsx("button",{className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:t.jsx(At,{size:16})})]})]})},f.id))}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 text-purple-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(Qc,{size:16})," ",e("adminSettings.printTip"," ")]}),e("adminSettings.printTipDesc","            ")]}),t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-green-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(rl,{size:16})," ",e("adminSettings.pdfExport"," PDF")]}),e("adminSettings.pdfExportDesc","       PDF  ")]})]})]})},mue=()=>{var L,B,I,T,z,k,F,P,G,Y,W,ee,H,M,X,K,Q,se,V,te,Z,ue,re,J,Ne,q,ce,fe,ie,ne,pe,Ee,Ie,_e,Ge,Ae,Ue,Qe,_t,lt,Nt,jt,Ft,Ce,ve,Ve,ot,le,Ke,nt,pt,Ut,Ts,Rt,Re,ft,Xt,As;const[e,s]=C.useState("GENERAL"),[a,r]=C.useState(null),[n,i]=C.useState([]),[l,o]=C.useState(!0),[d,u]=C.useState(!1),[h,f]=C.useState(!1),[x,p]=C.useState({title:"",subtitle:"",buttonText:" ",colorClass:"from-slate-700 to-slate-900",isActive:!0}),{addToast:v}=It(),{t:b}=Hs();C.useEffect(()=>{j()},[]);const y=[{id:"1",title:" ",description:"         .",icon:"box",iconColor:"text-cyan-400"},{id:"2",title:" ",description:"       .",icon:"chart",iconColor:"text-green-400"},{id:"3",title:" ",description:"     3   .",icon:"anchor",iconColor:"text-amber-400"},{id:"4",title:"  B2B",description:"        .",icon:"headphones",iconColor:"text-purple-400"}],j=async()=>{o(!0);try{const[we,Pt]=await Promise.all([he.getSettings(),he.getBanners()]);(!we.whySiniCarFeatures||we.whySiniCarFeatures.length===0)&&(we.whySiniCarFeatures=y),r(we),i(Pt)}catch{v("   ","error")}finally{o(!1)}},w=async()=>{if(a){u(!0);try{await he.updateSettings(a),v("   ","success")}catch{v("   ","error")}finally{u(!1)}}},S=async()=>{const we=document.getElementById("test-conn-btn");we&&(we.innerText=" ..."),setTimeout(()=>{a!=null&&a.apiConfig.authToken?v("    (200 OK)","success"):v(" :   ","error"),we&&(we.innerText=" ")},1500)},O=async()=>{if(!x.title||!x.subtitle){v("   ","error");return}const we={id:`b-${Date.now()}`,title:x.title||"",subtitle:x.subtitle||"",buttonText:x.buttonText||"",colorClass:x.colorClass||"from-slate-700 to-slate-900",imageUrl:x.imageUrl,isActive:!0},Pt=[...n,we];i(Pt),await he.updateBanners(Pt),f(!1),p({title:"",subtitle:"",buttonText:" ",colorClass:"from-slate-700 to-slate-900",isActive:!0}),v("  ","success")},_=async we=>{if(confirm("      ")){const Pt=n.filter(ss=>ss.id!==we);i(Pt),await he.updateBanners(Pt),v("  ","info")}},E=async we=>{const Pt=n.map(ss=>ss.id===we?{...ss,isActive:!ss.isActive}:ss);i(Pt),await he.updateBanners(Pt)},A=(we,Pt)=>{a&&r({...a,uiTexts:{...a.uiTexts,[we]:Pt}})};if(l||!a)return t.jsx("div",{className:"p-10 text-center",children:b("adminSettings.loading")});const D=({id:we,icon:Pt,label:ss})=>t.jsxs("button",{onClick:()=>s(we),className:`flex items-center gap-3 w-full p-4 rounded-xl transition-all mb-2 font-bold ${e===we?"bg-slate-900 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-transparent hover:border-slate-200"}`,"data-testid":`tab-${we.toLowerCase()}`,children:[Pt,t.jsx("span",{children:ss})]});return t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 animate-fade-in max-w-7xl mx-auto",children:[t.jsx("div",{className:"w-full lg:w-72 flex-shrink-0",children:t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 mb-6 sticky top-6",children:[t.jsx("h3",{className:"font-black text-xl text-slate-800 mb-6 px-2",children:b("adminSettings.systemSettings")}),t.jsxs("nav",{children:[t.jsx(D,{id:"GENERAL",icon:t.jsx(aa,{size:20}),label:b("adminSettings.generalSettings")}),t.jsx(D,{id:"BANNERS",icon:t.jsx(Li,{size:20}),label:b("adminSettings.bannerManagement")}),t.jsx(D,{id:"FEATURES",icon:t.jsx(es,{size:20}),label:b("adminSettings.whySiniCar")}),t.jsx(D,{id:"GUEST_MODE",icon:t.jsx(yu,{size:20}),label:b("adminSettings.guestMode")}),t.jsx(D,{id:"NOTIFICATIONS",icon:t.jsx(Nr,{size:20}),label:b("adminSettings.notifications"," ")}),t.jsx(D,{id:"PRINT_TEMPLATES",icon:t.jsx(Qc,{size:20}),label:b("adminSettings.printTemplates"," ")}),t.jsx(D,{id:"TEXTS",icon:t.jsx(s5,{size:20}),label:b("adminSettings.textManagement")}),t.jsx(D,{id:"AUTH_TEXTS",icon:t.jsx(Vp,{size:20}),label:"  "}),t.jsx(D,{id:"QUANTITY_MODAL",icon:t.jsx(XO,{size:20}),label:"  "}),t.jsx(D,{id:"DATA_MANAGEMENT",icon:t.jsx(Wo,{size:20}),label:" "}),t.jsx(D,{id:"STATUS_LABELS",icon:t.jsx(NF,{size:20}),label:b("adminSettings.statusLabels")}),t.jsx(D,{id:"API",icon:t.jsx(Gp,{size:20}),label:b("adminSettings.apiIntegration")}),t.jsx(D,{id:"APPEARANCE",icon:t.jsx(Ko,{size:20}),label:b("adminSettings.appearanceIdentity")})]})]})}),t.jsxs("div",{className:"flex-1",children:[e==="GENERAL"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(aa,{className:"text-brand-600"})," ",b("adminSettings.siteSettings")]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.siteName")}),t.jsx("input",{type:"text",value:a.siteName,onChange:we=>r({...a,siteName:we.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.supportPhone")}),t.jsx("input",{type:"text",value:a.supportPhone,onChange:we=>r({...a,supportPhone:we.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.salesWhatsApp")}),t.jsx("input",{type:"text",value:a.supportWhatsapp||"",onChange:we=>r({...a,supportWhatsapp:we.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.supportEmail")}),t.jsx("input",{type:"email",value:a.supportEmail,onChange:we=>r({...a,supportEmail:we.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]})]}),t.jsxs("div",{className:"mt-8 border-t border-slate-100 pt-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-lg",children:t.jsx(ja,{size:20})}),t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b("adminSettings.newsTicker")})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"font-bold text-slate-700",children:b("adminSettings.enableTicker")}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.tickerEnabled,onChange:we=>r({...a,tickerEnabled:we.target.checked}),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.tickerText")}),t.jsx("textarea",{rows:2,className:"w-full p-3 bg-white border border-slate-300 rounded-lg text-sm",value:a.tickerText,onChange:we=>r({...a,tickerText:we.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.tickerSpeed")}),t.jsx("input",{type:"number",min:1,max:10,className:"w-full p-3 bg-white border border-slate-300 rounded-lg",value:a.tickerSpeed,onChange:we=>r({...a,tickerSpeed:parseInt(we.target.value)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.bgColor")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"w-10 h-10 rounded border border-slate-300",style:{backgroundColor:a.tickerBgColor}}),t.jsx("input",{type:"text",className:"w-full p-3 bg-white border border-slate-300 rounded-lg font-mono text-sm",value:a.tickerBgColor,onChange:we=>r({...a,tickerBgColor:we.target.value})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.textColor")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"w-10 h-10 rounded border border-slate-300",style:{backgroundColor:a.tickerTextColor}}),t.jsx("input",{type:"text",className:"w-full p-3 bg-white border border-slate-300 rounded-lg font-mono text-sm",value:a.tickerTextColor,onChange:we=>r({...a,tickerTextColor:we.target.value})})]})]})]})]})]}),t.jsxs("div",{className:"mt-8 border-t border-slate-100 pt-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:t.jsx(ns,{size:20})}),t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b("adminSettings.productDisplaySettings")})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.minVisibleQty")}),t.jsx("input",{type:"number",min:0,className:"w-full p-3 bg-white border border-slate-300 rounded-lg",value:a.minVisibleQty??1,onChange:we=>r({...a,minVisibleQty:parseInt(we.target.value)||0})}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:b("adminSettings.minVisibleQtyNote")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.stockThreshold")}),t.jsx("input",{type:"number",min:0,className:"w-full p-3 bg-white border border-slate-300 rounded-lg",value:a.stockThreshold??0,onChange:we=>r({...a,stockThreshold:parseInt(we.target.value)||0})}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:b("adminSettings.stockThresholdNote")})]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-3 text-sm text-blue-700",children:[t.jsxs("strong",{children:[b("common.note"),":"]})," ",b("adminSettings.settingsNote")]})]})]}),t.jsxs("div",{className:"mt-8 border-t border-slate-100 pt-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:t.jsx(pi,{size:20})}),t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"  "})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-700",children:"  "}),t.jsx("p",{className:"text-xs text-slate-500",children:"        "})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:((L=a.orderStatusPointsConfig)==null?void 0:L.enabled)??!0,onChange:we=>{var Pt;return r({...a,orderStatusPointsConfig:{...a.orderStatusPointsConfig,enabled:we.target.checked,pointsPerStatus:((Pt=a.orderStatusPointsConfig)==null?void 0:Pt.pointsPerStatus)??{}}})},className:"sr-only peer","data-testid":"toggle-auto-points"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{key:"DELIVERED",label:" ",color:"emerald"},{key:"APPROVED",label:" ",color:"blue"},{key:"SHIPPED",label:" ",color:"cyan"}].map(we=>{var Pt,ss;return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[t.jsx("span",{className:`inline-block w-2 h-2 rounded-full bg-${we.color}-500 mr-2`}),we.label]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",min:0,className:"w-full p-2 bg-slate-50 border border-slate-300 rounded-lg text-center font-bold",value:((ss=(Pt=a.orderStatusPointsConfig)==null?void 0:Pt.pointsPerStatus)==null?void 0:ss[we.key])??0,onChange:gs=>{var Ca,ar;const Ps=parseInt(gs.target.value)||0;r({...a,orderStatusPointsConfig:{enabled:((Ca=a.orderStatusPointsConfig)==null?void 0:Ca.enabled)??!0,pointsPerStatus:{...(ar=a.orderStatusPointsConfig)==null?void 0:ar.pointsPerStatus,[we.key]:Ps}}})},"data-testid":`input-points-${we.key.toLowerCase()}`}),t.jsx("span",{className:"text-slate-500 text-sm",children:""})]})]},we.key)})}),t.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-lg p-3 text-sm text-emerald-700",children:[t.jsx("strong",{children:":"}),"               "]})]})]}),t.jsx("div",{className:"bg-cyan-50 p-6 rounded-xl border border-cyan-100 mt-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-cyan-100 rounded-full text-cyan-600",children:t.jsx(Wt,{})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-cyan-900 text-lg",children:b("adminSettings.guestMode")}),t.jsx("p",{className:"text-cyan-700 text-sm",children:b("adminSettings.guestModeDesc")})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.guestModeEnabled??!1,onChange:we=>r({...a,guestModeEnabled:we.target.checked}),className:"sr-only peer","data-testid":"toggle-guest-mode"}),t.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] peer-checked:after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-cyan-600"})]})]})}),t.jsx("div",{className:"bg-red-50 p-6 rounded-xl border border-red-100 mt-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-red-100 rounded-full text-red-600",children:t.jsx(jf,{})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-red-900 text-lg",children:b("adminSettings.maintenanceMode")}),t.jsx("p",{className:"text-red-700 text-sm",children:b("adminSettings.maintenanceModeDesc")})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.maintenanceMode,onChange:we=>r({...a,maintenanceMode:we.target.checked}),className:"sr-only peer"}),t.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] peer-checked:after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-red-600"})]})]})})]}),e==="BANNERS"&&t.jsxs("div",{className:"space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:b("adminSettings.bannerAds")}),t.jsx("p",{className:"text-slate-500 text-sm",children:b("adminSettings.bannerAdsDesc")})]}),t.jsxs("button",{onClick:()=>f(!0),className:"bg-slate-900 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-slate-800",children:[t.jsx(kt,{size:16})," ",b("adminSettings.addNewBanner")]})]}),h&&t.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 animate-fade-in",children:[t.jsx("h4",{className:"font-bold mb-4",children:b("adminSettings.newBannerData")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsx("input",{placeholder:b("adminSettings.mainTitle"),className:"p-3 rounded-lg border-slate-200",value:x.title,onChange:we=>p({...x,title:we.target.value})}),t.jsx("input",{placeholder:b("adminSettings.subtitle"),className:"p-3 rounded-lg border-slate-200",value:x.subtitle,onChange:we=>p({...x,subtitle:we.target.value})}),t.jsx("input",{placeholder:b("adminSettings.buttonText"),className:"p-3 rounded-lg border-slate-200",value:x.buttonText,onChange:we=>p({...x,buttonText:we.target.value})}),t.jsxs("select",{className:"p-3 rounded-lg border-slate-200",value:x.colorClass,onChange:we=>p({...x,colorClass:we.target.value}),children:[t.jsx("option",{value:"from-slate-700 to-slate-900",children:b("adminSettings.darkGray")}),t.jsx("option",{value:"from-primary-600 to-primary-900",children:b("adminSettings.royalBlue")}),t.jsx("option",{value:"from-secondary-500 to-secondary-700",children:b("adminSettings.vibrantOrange")}),t.jsx("option",{value:"from-green-600 to-green-800",children:b("adminSettings.darkGreen")})]}),t.jsx("input",{placeholder:b("adminSettings.imageUrl"),className:"p-3 rounded-lg border-slate-200 col-span-2",value:x.imageUrl,onChange:we=>p({...x,imageUrl:we.target.value})})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:O,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-bold",children:b("adminSettings.saveAndPublish")}),t.jsx("button",{onClick:()=>f(!1),className:"bg-white border border-slate-300 text-slate-600 px-6 py-2 rounded-lg font-bold",children:b("common.cancel")})]})]}),t.jsx("div",{className:"grid gap-4",children:n.map(we=>t.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm flex flex-col md:flex-row items-center gap-6 ${we.isActive?"border-slate-200":"border-red-100 bg-red-50 opacity-70"}`,children:[t.jsx("div",{className:`w-full md:w-32 h-20 rounded-lg bg-gradient-to-r ${we.colorClass} flex items-center justify-center text-white shadow-inner flex-shrink-0`,children:we.imageUrl?t.jsx("img",{src:we.imageUrl,className:"w-full h-full object-cover rounded-lg",alt:""}):t.jsx(Li,{})}),t.jsxs("div",{className:"flex-1 text-center md:text-right",children:[t.jsx("h4",{className:"font-bold text-lg text-slate-800",children:we.title}),t.jsx("p",{className:"text-sm text-slate-500",children:we.subtitle})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>E(we.id),className:`p-2 rounded-lg transition-colors ${we.isActive?"text-green-600 hover:bg-green-50":"text-slate-400 hover:bg-slate-100"}`,title:we.isActive?b("adminSettings.hide"):b("adminSettings.show"),children:we.isActive?t.jsx(ns,{size:20}):t.jsx(dr,{size:20})}),t.jsx("button",{onClick:()=>_(we.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(At,{size:20})})]})]},we.id))})]}),e==="TEXTS"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(s5,{className:"text-brand-600"})," ",b("adminSettings.uiTextManagement")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.uiTextManagementDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveTexts")]})]}),t.jsx("div",{className:"space-y-4",children:a.uiTexts&&Object.entries(a.uiTexts).map(([we,Pt])=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-brand-300 transition-colors",children:[t.jsx("div",{className:"text-sm font-mono text-slate-500 md:col-span-1 break-all",children:we}),t.jsx("div",{className:"md:col-span-2",children:t.jsx("input",{type:"text",className:"w-full p-3 bg-white border border-slate-300 rounded-lg text-slate-800 font-bold focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:Pt,onChange:ss=>A(we,ss.target.value)})})]},we))})]}),e==="API"&&t.jsxs("div",{className:"space-y-6 animate-slide-up",children:[t.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Gp,{className:"text-brand-600"})," ",b("adminSettings.erpIntegration")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.erpIntegrationDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveSettings")]})]})}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(HS,{size:20,className:"text-brand-600"}),b("adminSettings.connectionSettings")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.cloudErpUrl")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:t.jsx(bF,{size:16})}),t.jsx("input",{type:"url",dir:"ltr",placeholder:"https://api.your-erp.com/v1",value:a.apiConfig.baseUrl,onChange:we=>r({...a,apiConfig:{...a.apiConfig,baseUrl:we.target.value}}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-sm","data-testid":"input-api-url"})]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.apiToken")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:t.jsx(jf,{size:16})}),t.jsx("input",{type:"password",dir:"ltr",value:a.apiConfig.authToken,onChange:we=>r({...a,apiConfig:{...a.apiConfig,authToken:we.target.value}}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-sm",placeholder:"sk_live_xxxxxxxxxxxxxxxx","data-testid":"input-api-token"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.syncFrequency")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.syncInterval,onChange:we=>r({...a,apiConfig:{...a.apiConfig,syncInterval:we.target.value}}),"data-testid":"select-sync-interval",children:[t.jsx("option",{value:"REALTIME",children:b("adminSettings.realtime")}),t.jsx("option",{value:"15MIN",children:b("adminSettings.every15Min")}),t.jsx("option",{value:"HOURLY",children:b("adminSettings.hourly")}),t.jsx("option",{value:"DAILY",children:b("adminSettings.daily")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.environment")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.environment,onChange:we=>r({...a,apiConfig:{...a.apiConfig,environment:we.target.value}}),"data-testid":"select-environment",children:[t.jsx("option",{value:"PRODUCTION",children:b("adminSettings.production")}),t.jsx("option",{value:"SANDBOX",children:b("adminSettings.sandbox")})]})]})]}),t.jsx("div",{className:"border-t border-slate-100 pt-4 mt-6",children:t.jsxs("button",{id:"test-conn-btn",onClick:S,className:"w-full py-4 border-2 border-dashed border-slate-300 rounded-xl text-slate-600 font-bold hover:bg-slate-50 hover:border-slate-400 transition-all flex justify-center items-center gap-2","data-testid":"button-test-connection",children:[t.jsx(gne,{size:20})," ",b("adminSettings.testConnection")]})})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(Wo,{size:20,className:"text-green-600"}),b("adminSettings.sharedData")]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:b("adminSettings.sharedDataDesc")}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"products",label:b("adminSettings.productsAndItems"),icon:Yt,desc:b("adminSettings.productsDesc")},{key:"orders",label:b("adminSettings.ordersLabel"),icon:qa,desc:b("adminSettings.ordersDesc")},{key:"customers",label:b("adminSettings.customersLabel"),icon:Wt,desc:b("adminSettings.customersDesc")},{key:"quotes",label:b("adminSettings.quotesLabel"),icon:zt,desc:b("adminSettings.quotesDesc")},{key:"inventory",label:b("adminSettings.inventoryLabel"),icon:jF,desc:b("adminSettings.inventoryDesc")},{key:"prices",label:b("adminSettings.pricesLabel"),icon:mr,desc:b("adminSettings.pricesDesc")}].map(we=>{var Pt,ss;return t.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-xl border-2 cursor-pointer transition-all ${(Pt=a.apiConfig.sharedData)!=null&&Pt.includes(we.key)?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300 bg-slate-50"}`,"data-testid":`checkbox-share-${we.key}`,children:[t.jsx("input",{type:"checkbox",checked:((ss=a.apiConfig.sharedData)==null?void 0:ss.includes(we.key))||!1,onChange:gs=>{const Ps=a.apiConfig.sharedData||[],Ca=gs.target.checked?[...Ps,we.key]:Ps.filter(ar=>ar!==we.key);r({...a,apiConfig:{...a.apiConfig,sharedData:Ca}})},className:"mt-1 w-4 h-4 text-brand-600 rounded"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(we.icon,{size:16,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-800",children:we.label})]}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:we.desc})]})]},we.key)})})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(Gt,{size:20,className:"text-blue-600"}),b("adminSettings.syncDirection")]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"PULL",label:b("adminSettings.pullOnly"),desc:b("adminSettings.pullOnlyDesc"),icon:uF},{value:"PUSH",label:b("adminSettings.pushOnly"),desc:b("adminSettings.pushOnlyDesc"),icon:BS},{value:"BIDIRECTIONAL",label:b("adminSettings.bidirectional"),desc:b("adminSettings.bidirectionalDesc"),icon:_te}].map(we=>t.jsxs("label",{className:`flex flex-col items-center gap-3 p-6 rounded-xl border-2 cursor-pointer transition-all text-center ${a.apiConfig.syncDirection===we.value?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300 bg-slate-50"}`,"data-testid":`radio-sync-${we.value.toLowerCase()}`,children:[t.jsx("input",{type:"radio",name:"syncDirection",value:we.value,checked:a.apiConfig.syncDirection===we.value,onChange:Pt=>r({...a,apiConfig:{...a.apiConfig,syncDirection:Pt.target.value}}),className:"sr-only"}),t.jsx(we.icon,{size:32,className:a.apiConfig.syncDirection===we.value?"text-brand-600":"text-slate-400"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800 block",children:we.label}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:we.desc})]})]},we.value))})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(xne,{size:20,className:"text-purple-600"}),b("adminSettings.webhooks")]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:b("adminSettings.webhooksDesc")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"url",dir:"ltr",placeholder:"https://your-webhook-url.com/endpoint",className:"flex-1 p-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-sm",id:"webhook-url-input","data-testid":"input-webhook-url"}),t.jsxs("button",{onClick:()=>{const we=document.getElementById("webhook-url-input");if(we!=null&&we.value){const Pt=a.apiConfig.webhooks||[];r({...a,apiConfig:{...a.apiConfig,webhooks:[...Pt,{url:we.value,events:["order.created"],active:!0}]}}),we.value="",v("  Webhook ","success")}},className:"px-4 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 flex items-center gap-2","data-testid":"button-add-webhook",children:[t.jsx(kt,{size:18})," ",b("common.add")]})]}),((B=a.apiConfig.webhooks)==null?void 0:B.length)>0&&t.jsx("div",{className:"space-y-2",children:a.apiConfig.webhooks.map((we,Pt)=>{var ss;return t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${we.active?"bg-green-500":"bg-slate-300"}`}),t.jsx("code",{className:"flex-1 text-sm font-mono text-slate-600 truncate",children:we.url}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded",children:[((ss=we.events)==null?void 0:ss.length)||0," ",b("adminSettings.events")]}),t.jsx("button",{onClick:()=>{const gs=[...a.apiConfig.webhooks||[]];gs.splice(Pt,1),r({...a,apiConfig:{...a.apiConfig,webhooks:gs}})},className:"p-1 text-red-500 hover:bg-red-50 rounded","data-testid":`button-delete-webhook-${Pt}`,children:t.jsx(At,{size:16})})]})]},Pt)})})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(Jm,{size:20,className:"text-slate-600"}),b("adminSettings.advancedSettings")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.rateLimit")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.rateLimit||"100",onChange:we=>r({...a,apiConfig:{...a.apiConfig,rateLimit:we.target.value}}),"data-testid":"select-rate-limit",children:[t.jsx("option",{value:"50",children:b("adminSettings.reqPerMin",{count:50})}),t.jsx("option",{value:"100",children:b("adminSettings.reqPerMin",{count:100})}),t.jsx("option",{value:"500",children:b("adminSettings.reqPerMin",{count:500})}),t.jsx("option",{value:"1000",children:b("adminSettings.reqPerMin",{count:1e3})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.timeout")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.timeout||"30",onChange:we=>r({...a,apiConfig:{...a.apiConfig,timeout:we.target.value}}),"data-testid":"select-timeout",children:[t.jsx("option",{value:"10",children:b("adminSettings.seconds",{count:10})}),t.jsx("option",{value:"30",children:b("adminSettings.seconds",{count:30})}),t.jsx("option",{value:"60",children:b("adminSettings.seconds",{count:60})}),t.jsx("option",{value:"120",children:b("adminSettings.seconds",{count:120})})]})]}),t.jsx("div",{className:"col-span-2",children:t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 cursor-pointer hover:bg-slate-100 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:a.apiConfig.debugMode||!1,onChange:we=>r({...a,apiConfig:{...a.apiConfig,debugMode:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-debug-mode"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:b("adminSettings.debugMode")}),t.jsx("p",{className:"text-xs text-slate-500",children:b("adminSettings.debugModeDesc")})]})]})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 cursor-pointer hover:bg-slate-100 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:a.apiConfig.retryOnFail||!0,onChange:we=>r({...a,apiConfig:{...a.apiConfig,retryOnFail:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-retry-on-fail"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:b("adminSettings.retryOnFail")}),t.jsx("p",{className:"text-xs text-slate-500",children:b("adminSettings.retryOnFailDesc")})]})]})})]})]})]}),e==="FEATURES"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(es,{className:"text-brand-600"})," ",b("adminSettings.whySiniCarSection")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.whySiniCarSectionDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.sectionTitle")}),t.jsx("input",{type:"text",value:a.whySiniCarTitle||b("adminSettings.whySiniCar"),onChange:we=>r({...a,whySiniCarTitle:we.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:b("adminSettings.whySiniCar"),"data-testid":"input-why-title"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:b("adminSettings.featureCards")}),t.jsxs("button",{onClick:()=>{const we=a.whySiniCarFeatures||[];r({...a,whySiniCarFeatures:[...we,{id:`F-${Date.now()}`,title:b("adminSettings.newFeature"),description:b("adminSettings.featureDescPlaceholder"),icon:"star",iconColor:"text-amber-400"}]})},className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700","data-testid":"button-add-feature",children:[t.jsx(kt,{size:18})," ",b("adminSettings.addCard")]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(a.whySiniCarFeatures||[{id:"1",title:" ",description:"         .",icon:"box",iconColor:"text-cyan-400"},{id:"2",title:" ",description:"       .",icon:"chart",iconColor:"text-green-400"},{id:"3",title:" ",description:"     3   .",icon:"anchor",iconColor:"text-amber-400"},{id:"4",title:"  B2B",description:"        .",icon:"headphones",iconColor:"text-purple-400"}]).map((we,Pt)=>t.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("span",{className:"text-xs font-bold text-slate-400",children:[b("adminSettings.card")," ",Pt+1]}),t.jsx("button",{onClick:()=>{const ss=a.whySiniCarFeatures||[];r({...a,whySiniCarFeatures:ss.filter(gs=>gs.id!==we.id)})},className:"p-1 text-red-500 hover:bg-red-50 rounded","data-testid":`button-delete-feature-${Pt}`,children:t.jsx(At,{size:16})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.title")}),t.jsx("input",{type:"text",value:we.title,onChange:ss=>{const gs=[...a.whySiniCarFeatures||[]],Ps=gs.findIndex(Ca=>Ca.id===we.id);Ps!==-1&&(gs[Ps]={...gs[Ps],title:ss.target.value},r({...a,whySiniCarFeatures:gs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm","data-testid":`input-feature-title-${Pt}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.description")}),t.jsx("textarea",{value:we.description,onChange:ss=>{const gs=[...a.whySiniCarFeatures||[]],Ps=gs.findIndex(Ca=>Ca.id===we.id);Ps!==-1&&(gs[Ps]={...gs[Ps],description:ss.target.value},r({...a,whySiniCarFeatures:gs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm resize-none",rows:2,"data-testid":`input-feature-desc-${Pt}`})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.icon")}),t.jsxs("select",{value:we.icon,onChange:ss=>{const gs=[...a.whySiniCarFeatures||[]],Ps=gs.findIndex(Ca=>Ca.id===we.id);Ps!==-1&&(gs[Ps]={...gs[Ps],icon:ss.target.value},r({...a,whySiniCarFeatures:gs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm","data-testid":`select-feature-icon-${Pt}`,children:[t.jsx("option",{value:"box",children:b("adminSettings.iconBox")}),t.jsx("option",{value:"chart",children:b("adminSettings.iconChart")}),t.jsx("option",{value:"anchor",children:b("adminSettings.iconAnchor")}),t.jsx("option",{value:"headphones",children:b("adminSettings.iconHeadphones")}),t.jsx("option",{value:"truck",children:b("adminSettings.iconTruck")}),t.jsx("option",{value:"shield",children:b("adminSettings.iconShield")}),t.jsx("option",{value:"globe",children:b("adminSettings.iconGlobe")}),t.jsx("option",{value:"star",children:b("adminSettings.iconStar")}),t.jsx("option",{value:"clock",children:b("adminSettings.iconClock")}),t.jsx("option",{value:"award",children:b("adminSettings.iconAward")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.iconColor")}),t.jsxs("select",{value:we.iconColor,onChange:ss=>{const gs=[...a.whySiniCarFeatures||[]],Ps=gs.findIndex(Ca=>Ca.id===we.id);Ps!==-1&&(gs[Ps]={...gs[Ps],iconColor:ss.target.value},r({...a,whySiniCarFeatures:gs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm","data-testid":`select-feature-color-${Pt}`,children:[t.jsx("option",{value:"text-cyan-400",children:b("adminSettings.colorCyan")}),t.jsx("option",{value:"text-green-400",children:b("adminSettings.colorGreen")}),t.jsx("option",{value:"text-amber-400",children:b("adminSettings.colorGold")}),t.jsx("option",{value:"text-purple-400",children:b("adminSettings.colorPurple")}),t.jsx("option",{value:"text-red-400",children:b("adminSettings.colorRed")}),t.jsx("option",{value:"text-blue-400",children:b("adminSettings.colorBlue")}),t.jsx("option",{value:"text-pink-400",children:b("adminSettings.colorPink")}),t.jsx("option",{value:"text-orange-400",children:b("adminSettings.colorOrange")})]})]})]}),t.jsxs("div",{className:"bg-slate-800 text-white p-4 rounded-xl mt-2",children:[t.jsxs("div",{className:`mb-2 ${we.iconColor}`,children:[we.icon==="box"&&t.jsx(Yt,{size:28}),we.icon==="chart"&&t.jsx(Wr,{size:28}),we.icon==="anchor"&&t.jsx(lF,{size:28}),we.icon==="headphones"&&t.jsx(Nf,{size:28}),we.icon==="truck"&&t.jsx(fr,{size:28}),we.icon==="shield"&&t.jsx(Fn,{size:28}),we.icon==="globe"&&t.jsx(Ea,{size:28}),we.icon==="star"&&t.jsx(bn,{size:28}),we.icon==="clock"&&t.jsx(is,{size:28}),we.icon==="award"&&t.jsx(zS,{size:28})]}),t.jsx("h4",{className:"font-bold text-sm",children:we.title}),t.jsx("p",{className:"text-xs text-slate-300 mt-1",children:we.description})]})]},we.id))})]})]}),e==="GUEST_MODE"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(yu,{className:"text-orange-500"})," ",b("adminSettings.guestModeSettings")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.guestModeSettingsDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2","data-testid":"button-save-guest-settings",children:[t.jsx(us,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsx("div",{className:"bg-orange-50 p-6 rounded-xl border border-orange-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-orange-100 text-orange-600 rounded-lg",children:t.jsx(yu,{size:20})}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:b("adminSettings.guestBrowsingEnabled")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.guestBrowsingEnabledDesc")})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.guestModeEnabled!==!1,onChange:we=>r({...a,guestModeEnabled:we.target.checked}),className:"sr-only peer","data-testid":"checkbox-guest-mode-enabled"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[t.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(ns,{size:18,className:"text-slate-600"})," ",b("adminSettings.visibleSections")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.visibleSectionsDesc")})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showBusinessTypes")}),t.jsx("input",{type:"checkbox",checked:((I=a.guestSettings)==null?void 0:I.showBusinessTypes)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showBusinessTypes:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-business-types"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showMainServices")}),t.jsx("input",{type:"checkbox",checked:((T=a.guestSettings)==null?void 0:T.showMainServices)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showMainServices:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-main-services"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showHowItWorks")}),t.jsx("input",{type:"checkbox",checked:((z=a.guestSettings)==null?void 0:z.showHowItWorks)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showHowItWorks:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-how-it-works"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showWhySiniCar")}),t.jsx("input",{type:"checkbox",checked:((k=a.guestSettings)==null?void 0:k.showWhySiniCar)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showWhySiniCar:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-why-sini-car"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showCart")}),t.jsx("input",{type:"checkbox",checked:((F=a.guestSettings)==null?void 0:F.showCart)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showCart:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-cart"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showMarketingCards")}),t.jsx("input",{type:"checkbox",checked:((P=a.guestSettings)==null?void 0:P.showMarketingCards)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showMarketingCards:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-marketing-cards"})]})]})]}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[t.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(dr,{size:18,className:"text-slate-600"})," ",b("adminSettings.blurSettings")]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.blurIntensity")}),t.jsxs("select",{value:((G=a.guestSettings)==null?void 0:G.blurIntensity)||"medium",onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},blurIntensity:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"select-blur-intensity",children:[t.jsx("option",{value:"light",children:b("adminSettings.blurLight")}),t.jsx("option",{value:"medium",children:b("adminSettings.blurMedium")}),t.jsx("option",{value:"heavy",children:b("adminSettings.blurHeavy")})]})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showBlurOverlay")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.showBlurOverlayDesc")})]}),t.jsx("input",{type:"checkbox",checked:((Y=a.guestSettings)==null?void 0:Y.showBlurOverlay)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showBlurOverlay:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-blur-overlay"})]})]})]}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[t.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(aa,{size:18,className:"text-slate-600"})," ",b("adminSettings.searchSettings")]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.allowSearch")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.allowSearchDesc")})]}),t.jsx("input",{type:"checkbox",checked:((W=a.guestSettings)==null?void 0:W.allowSearch)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},allowSearch:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-allow-search"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showSearchResults")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.showSearchResultsDesc")})]}),t.jsx("input",{type:"checkbox",checked:((ee=a.guestSettings)==null?void 0:ee.showSearchResults)!==!1,onChange:we=>r({...a,guestSettings:{...a.guestSettings||{},showSearchResults:we.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-search-results"})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white p-6 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(yu,{size:24}),t.jsx("h4",{className:"font-bold text-lg",children:b("adminSettings.guestMode")})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.visibleSections")}),t.jsxs("p",{className:"font-bold text-lg",children:[[((H=a.guestSettings)==null?void 0:H.showBusinessTypes)!==!1,((M=a.guestSettings)==null?void 0:M.showMainServices)!==!1,((X=a.guestSettings)==null?void 0:X.showHowItWorks)!==!1,((K=a.guestSettings)==null?void 0:K.showWhySiniCar)!==!1,((Q=a.guestSettings)==null?void 0:Q.showCart)!==!1,((se=a.guestSettings)==null?void 0:se.showMarketingCards)!==!1].filter(Boolean).length," / 6"]})]}),t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.blurIntensity")}),t.jsx("p",{className:"font-bold text-lg capitalize",children:((V=a.guestSettings)==null?void 0:V.blurIntensity)||"medium"})]}),t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.allowSearch")}),t.jsx("p",{className:"font-bold text-lg",children:((te=a.guestSettings)==null?void 0:te.allowSearch)!==!1?"":""})]}),t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.showBlurOverlay")}),t.jsx("p",{className:"font-bold text-lg",children:((Z=a.guestSettings)==null?void 0:Z.showBlurOverlay)!==!1?"":""})]})]})]})]}),e==="APPEARANCE"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-8 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Ko,{className:"text-purple-500"})," ",b("adminSettings.appearanceCustomization")]}),t.jsx("button",{onClick:w,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50",children:b("adminSettings.saveChanges")})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-4",children:b("adminSettings.primaryColor")}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl shadow-md border-4 border-white ring-1 ring-slate-200",style:{backgroundColor:a.primaryColor}}),t.jsx("input",{type:"color",value:a.primaryColor,onChange:we=>r({...a,primaryColor:we.target.value}),className:"h-12 w-32 p-1 rounded-lg cursor-pointer"})]}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:b("adminSettings.primaryColorDesc")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-4",children:b("adminSettings.siteLogo")}),t.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-6 text-center hover:bg-slate-50 transition-colors",children:a.logoUrl?t.jsxs("div",{className:"relative w-fit mx-auto",children:[t.jsx("img",{src:a.logoUrl,alt:"Logo",className:"h-16 object-contain"}),t.jsx("button",{onClick:()=>r({...a,logoUrl:""}),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:t.jsx(vt,{size:12})})]}):t.jsxs("div",{className:"text-slate-400 cursor-pointer",onClick:()=>v(b("adminSettings.uploadNotAvailable"),"info"),children:[t.jsx(va,{className:"mx-auto mb-2"}),t.jsx("span",{className:"text-xs font-bold",children:b("adminSettings.clickToUploadLogo")})]})})]})]}),t.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold",children:b("adminSettings.livePreview")}),t.jsx("p",{className:"text-sm opacity-70",children:b("adminSettings.livePreviewDesc")})]}),t.jsx("button",{style:{backgroundColor:a.primaryColor},className:"px-6 py-3 rounded-lg font-bold shadow-lg",children:b("adminSettings.primaryButtonExample")})]})]}),e==="STATUS_LABELS"&&t.jsx(oue,{settings:a,onUpdate:we=>r(we),onSave:w,saving:d}),e==="NOTIFICATIONS"&&t.jsx(due,{t:b}),e==="PRINT_TEMPLATES"&&t.jsx(uue,{t:b}),e==="AUTH_TEXTS"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Vp,{className:"text-brand-600"}),"    "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"         "})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>{r({...a,authPageTexts:void 0}),v("   ","success")},className:"bg-slate-100 text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-200 flex items-center gap-2",children:[t.jsx(Jo,{size:16}),"  "]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",d?" ...":" "]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 border-b pb-2",children:[t.jsx(Sa,{size:18,className:"text-blue-500"}),"   "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:" ",value:((ue=a.authPageTexts)==null?void 0:ue.loginTitle)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginTitle:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:"  ",value:((re=a.authPageTexts)==null?void 0:re.loginSubtitle)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginSubtitle:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((J=a.authPageTexts)==null?void 0:J.loginClientIdLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginClientIdLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:"  ",value:((Ne=a.authPageTexts)==null?void 0:Ne.loginClientIdPlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginClientIdPlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((q=a.authPageTexts)==null?void 0:q.loginPasswordLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginPasswordLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:"  ",value:((ce=a.authPageTexts)==null?void 0:ce.loginPasswordPlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginPasswordPlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:"",value:((fe=a.authPageTexts)==null?void 0:fe.loginButtonText)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginButtonText:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:"  ",value:((ie=a.authPageTexts)==null?void 0:ie.loginForgotPasswordText)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginForgotPasswordText:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:"  ",value:((ne=a.authPageTexts)==null?void 0:ne.loginNoAccountText)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginNoAccountText:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:"  ",value:((pe=a.authPageTexts)==null?void 0:pe.loginRegisterLinkText)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,loginRegisterLinkText:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]})]})]}),t.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 border-b pb-2",children:[t.jsx(Wt,{size:18,className:"text-green-500"}),"    "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:"  ",value:((Ee=a.authPageTexts)==null?void 0:Ee.registerTitle)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerTitle:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:"    ",value:((Ie=a.authPageTexts)==null?void 0:Ie.registerSubtitle)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerSubtitle:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((_e=a.authPageTexts)==null?void 0:_e.registerBusinessNameLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerBusinessNameLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:":    ",value:((Ge=a.authPageTexts)==null?void 0:Ge.registerBusinessNamePlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerBusinessNamePlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ae=a.authPageTexts)==null?void 0:Ae.registerOwnerNameLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerOwnerNameLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ue=a.authPageTexts)==null?void 0:Ue.registerOwnerNamePlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerOwnerNamePlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:" ",value:((Qe=a.authPageTexts)==null?void 0:Qe.registerPhoneLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerPhoneLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:"05xxxxxxxx",value:((_t=a.authPageTexts)==null?void 0:_t.registerPhonePlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerPhonePlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:" ",value:((lt=a.authPageTexts)==null?void 0:lt.registerEmailLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerEmailLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:"example@email.com",value:((Nt=a.authPageTexts)==null?void 0:Nt.registerEmailPlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerEmailPlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:"",value:((jt=a.authPageTexts)==null?void 0:jt.registerCityLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerCityLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ft=a.authPageTexts)==null?void 0:Ft.registerCityPlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerCityPlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ce=a.authPageTexts)==null?void 0:Ce.registerBusinessTypeLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerBusinessTypeLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:" ",value:((ve=a.authPageTexts)==null?void 0:ve.registerNotesLabel)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerNotesLabel:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:"    ...",value:((Ve=a.authPageTexts)==null?void 0:Ve.registerNotesPlaceholder)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerNotesPlaceholder:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((ot=a.authPageTexts)==null?void 0:ot.registerButtonText)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerButtonText:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:"  ",value:((le=a.authPageTexts)==null?void 0:le.registerHaveAccountText)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerHaveAccountText:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ke=a.authPageTexts)==null?void 0:Ke.registerLoginLinkText)||"",onChange:we=>r({...a,authPageTexts:{...a.authPageTexts,registerLoginLinkText:we.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]})]})]})]}),e==="QUANTITY_MODAL"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(XO,{className:"text-brand-600"}),"    "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"        "})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>{r({...a,quantityModalSettings:{mode:"hideSearch"}}),v("   ","success")},className:"bg-slate-100 text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-200 flex items-center gap-2",children:[t.jsx(Jo,{size:16}),"  "]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",d?" ...":" "]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[t.jsxs("h4",{className:"font-bold text-blue-800 mb-2 flex items-center gap-2",children:[t.jsx(mi,{size:18}),"    "]}),t.jsx("p",{className:"text-sm text-blue-700",children:"          .     :"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{onClick:()=>r({...a,quantityModalSettings:{...a.quantityModalSettings,mode:"hideSearch"}}),className:`p-6 rounded-xl border-2 cursor-pointer transition-all ${((nt=a.quantityModalSettings)==null?void 0:nt.mode)==="hideSearch"||!((pt=a.quantityModalSettings)!=null&&pt.mode)?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${((Ut=a.quantityModalSettings)==null?void 0:Ut.mode)==="hideSearch"||!((Ts=a.quantityModalSettings)!=null&&Ts.mode)?"border-brand-500 bg-brand-500":"border-slate-300"}`,children:(((Rt=a.quantityModalSettings)==null?void 0:Rt.mode)==="hideSearch"||!((Re=a.quantityModalSettings)!=null&&Re.mode))&&t.jsx(es,{size:12,className:"text-white"})}),t.jsx("h4",{className:"font-bold text-slate-800",children:"  "})]}),t.jsx("p",{className:"text-sm text-slate-600",children:"               "})]}),t.jsxs("div",{onClick:()=>r({...a,quantityModalSettings:{...a.quantityModalSettings,mode:"draggable"}}),className:`p-6 rounded-xl border-2 cursor-pointer transition-all ${((ft=a.quantityModalSettings)==null?void 0:ft.mode)==="draggable"?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${((Xt=a.quantityModalSettings)==null?void 0:Xt.mode)==="draggable"?"border-brand-500 bg-brand-500":"border-slate-300"}`,children:((As=a.quantityModalSettings)==null?void 0:As.mode)==="draggable"&&t.jsx(es,{size:12,className:"text-white"})}),t.jsx("h4",{className:"font-bold text-slate-800",children:"  "})]}),t.jsx("p",{className:"text-sm text-slate-600",children:"                 "})]})]})]})]}),e==="DATA_MANAGEMENT"&&t.jsx(cue,{settings:a,onUpdate:we=>r(we),onSave:w,saving:d})]})]})};function fue(e,s){if(e instanceof RegExp)return{keys:!1,pattern:e};var a,r,n,i,l=[],o="",d=e.split("/");for(d[0]||d.shift();n=d.shift();)a=n[0],a==="*"?(l.push(a),o+=n[1]==="?"?"(?:/(.*))?":"/(.*)"):a===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),l.push(n.substring(1,~r?r:~i?i:n.length)),o+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~r?"?":"")+"\\"+n.substring(i))):o+="/"+n;return{keys:l,pattern:new RegExp("^"+o+(s?"(?=$|/)":"/?$"),"i")}}const hue=wq.useInsertionEffect,xue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pue=xue?C.useLayoutEffect:C.useEffect,gue=hue||pue,FF=e=>{const s=C.useRef([e,(...a)=>s[0](...a)]).current;return gue(()=>{s[0]=e}),s[1]},bue="popstate",fE="pushState",hE="replaceState",vue="hashchange",b5=[bue,fE,hE,vue],yue=e=>{for(const s of b5)addEventListener(s,e);return()=>{for(const s of b5)removeEventListener(s,e)}},UF=(e,s)=>JM.useSyncExternalStore(yue,e,s),v5=()=>location.search,Nue=({ssrSearch:e}={})=>UF(v5,e!=null?()=>e:v5),y5=()=>location.pathname,jue=({ssrPath:e}={})=>UF(y5,e!=null?()=>e:y5),wue=(e,{replace:s=!1,state:a=null}={})=>history[s?hE:fE](a,"",e),Sue=(e={})=>[jue(e),wue],N5=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[N5]>"u"){for(const e of[fE,hE]){const s=history[e];history[e]=function(){const a=s.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),a}}Object.defineProperty(window,N5,{value:!0})}const Aue=(e,s)=>s.toLowerCase().indexOf(e.toLowerCase())?"~"+s:s.slice(e.length)||"/",zF=(e="")=>e==="/"?"":e,Eue=(e,s)=>e[0]==="~"?e.slice(1):zF(s)+e,Cue=(e="",s)=>Aue(j5(zF(e)),j5(s)),j5=e=>{try{return decodeURI(e)}catch{return e}},Tue={hook:Sue,searchHook:Nue,parser:fue,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},_ue=C.createContext(Tue),kue=()=>C.useContext(_ue),Oue={};C.createContext(Oue);const Iue=e=>{const[s,a]=e.hook(e);return[Cue(e.base,s),FF((r,n)=>a(Eue(r,e.base),n))]};C.forwardRef((e,s)=>{const a=kue(),[r,n]=Iue(a),{to:i="",href:l=i,onClick:o,asChild:d,children:u,className:h,replace:f,state:x,...p}=e,v=FF(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(o==null||o(y),y.defaultPrevented||(y.preventDefault(),n(l,e)))}),b=a.hrefs(l[0]==="~"?l.slice(1):a.base+l,a);return d&&C.isValidElement(u)?C.cloneElement(u,{onClick:v,href:b}):C.createElement("a",{...p,onClick:v,href:b,className:h!=null&&h.call?h(r===l):h,children:u,ref:s})});const Us=({resourceName:e,onGoBack:s,onGoHome:a})=>{const{t:r}=Kt();return t.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-8",children:t.jsxs("div",{className:"max-w-md w-full text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(mre,{className:"text-red-500",size:48})}),t.jsx("h1",{className:"text-2xl font-black text-slate-800 mb-3",children:r("accessDenied.title")}),t.jsxs("p",{className:"text-slate-600 mb-6 leading-relaxed",children:[r("accessDenied.message"),t.jsx("br",{}),r("accessDenied.contactAdmin")]}),e&&t.jsxs("div",{className:"bg-slate-100 rounded-xl p-4 mb-6",children:[t.jsxs("p",{className:"text-sm text-slate-500 mb-1",children:[r("accessDenied.requestedPage"),":"]}),t.jsx("p",{className:"font-bold text-slate-700",children:e})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s&&t.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-access-denied-back",children:[t.jsx(sl,{size:18}),r("accessDenied.goBack")]}),a&&t.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 px-6 py-3 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-access-denied-home",children:[t.jsx(nE,{size:18}),r("accessDenied.goHome")]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-400",children:[t.jsx(h0,{size:16}),t.jsxs("span",{children:[r("accessDenied.errorCode"),": ACCESS_DENIED_403"]})]})})]})})},w5=e=>{let s;const a=new Set,r=(u,h)=>{const f=typeof u=="function"?u(s):u;if(!Object.is(f,s)){const x=s;s=h??(typeof f!="object"||f===null)?f:Object.assign({},s,f),a.forEach(p=>p(s,x))}},n=()=>s,o={setState:r,getState:n,getInitialState:()=>d,subscribe:u=>(a.add(u),()=>a.delete(u))},d=s=e(r,n,o);return o},Rue=(e=>e?w5(e):w5),Pue=e=>e;function Due(e,s=Pue){const a=ke.useSyncExternalStore(e.subscribe,ke.useCallback(()=>s(e.getState()),[e,s]),ke.useCallback(()=>s(e.getInitialState()),[e,s]));return ke.useDebugValue(a),a}const Mue=e=>{const s=Rue(e),a=r=>Due(s,r);return Object.assign(a,s),a},Lue=(e=>Mue);function BF(e,s){let a;try{a=e()}catch{return}return{getItem:n=>{var i;const l=d=>d===null?null:JSON.parse(d,void 0),o=(i=a.getItem(n))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(n,i)=>a.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>a.removeItem(n)}}const KS=e=>s=>{try{const a=e(s);return a instanceof Promise?a:{then(r){return KS(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return KS(r)(a)}}}},Fue=(e,s)=>(a,r,n)=>{let i={storage:BF(()=>localStorage),partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...s},l=!1;const o=new Set,d=new Set;let u=i.storage;if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...b)},r,n);const h=()=>{const b=i.partialize({...r()});return u.setItem(i.name,{state:b,version:i.version})},f=n.setState;n.setState=(b,y)=>(f(b,y),h());const x=e((...b)=>(a(...b),h()),r,n);n.getInitialState=()=>x;let p;const v=()=>{var b,y;if(!u)return;l=!1,o.forEach(w=>{var S;return w((S=r())!=null?S:x)});const j=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(b=r())!=null?b:x))||void 0;return KS(u.getItem.bind(u))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const S=i.migrate(w.state,w.version);return S instanceof Promise?S.then(O=>[!0,O]):[!0,S]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var S;const[O,_]=w;if(p=i.merge(_,(S=r())!=null?S:x),a(p,!0),O)return h()}).then(()=>{j==null||j(p,void 0),p=r(),l=!0,d.forEach(w=>w(p))}).catch(w=>{j==null||j(void 0,w)})};return n.persist={setOptions:b=>{i={...i,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:b=>(o.add(b),()=>{o.delete(b)}),onFinishHydration:b=>(d.add(b),()=>{d.delete(b)})},i.skipHydration||v(),p||x},Uue=Fue,S5={adminUser:null,role:null,effectivePermissions:[],loading:!0,initialized:!1},ni=Lue()(Uue((e,s)=>({...S5,setAdminUser:a=>{e({adminUser:a}),s().loadPermissions(a)},setRole:a=>e({role:a}),setLoading:a=>e({loading:a}),loadPermissions:async a=>{var r,n,i;if(!(a!=null&&a.id)){e({role:null,effectivePermissions:[],loading:!1,initialized:!0});return}e({loading:!0});try{if(a.extendedRole==="ADMIN"||a.extendedRole==="SUPER_ADMIN"||a.isSuperAdmin===!0||((r=a.roleId)==null?void 0:r.includes("admin"))||((n=a.roleId)==null?void 0:n.includes("super"))){const o=a.extendedRole==="SUPER_ADMIN"||a.isSuperAdmin===!0||((i=a.roleId)==null?void 0:i.includes("super")),d={id:a.roleId||(o?"role-super-admin":"role-admin"),code:o?"SUPER_ADMIN":"ADMIN",name:o?"SUPER_ADMIN":"ADMIN",nameAr:o?" ":"",description:o?"Super Administrator":"Administrator",isSystem:!0,isActive:!0,sortOrder:0,createdAt:new Date().toISOString(),permissions:[]};e({role:d,effectivePermissions:[],loading:!1,initialized:!0})}else e({role:null,effectivePermissions:[],loading:!1,initialized:!0})}catch(l){console.error("Failed to load permissions:",l),e({role:null,effectivePermissions:[],loading:!1,initialized:!0})}},refreshPermissions:async()=>{const{adminUser:a}=s();await s().loadPermissions(a)},reset:()=>{e(S5),localStorage.removeItem("sini-auth-store")},hasPermission:(a,r)=>{var u;const{adminUser:n,role:i,effectivePermissions:l}=s();if(!n||!n.isActive)return!1;if(i!=null&&i.isSystem&&(i.name===" "||i.name==="SUPER_ADMIN"))return!0;const o=`${a}:${r}`,d=l.find(h=>h.permissionKey===o||h.resource===a&&h.action===r);if(d)return d.effect==="ALLOW";if(i!=null&&i.permissions){const h=i.permissions.find(f=>f.resource===a);if(h)return((u=h.actions)==null?void 0:u.includes(r))||!1}return!1},canAccess:a=>s().hasPermission(a,"view"),can:a=>{const{adminUser:r,role:n,effectivePermissions:i}=s();if(!r||!r.isActive)return!1;if(n!=null&&n.isSystem&&(n.name===" "||n.name==="SUPER_ADMIN"))return!0;const l=i.find(o=>o.permissionKey===a||o.permissionKey.toUpperCase()===a.toUpperCase());return l?l.effect==="ALLOW":!!(n!=null&&n.permissions&&n.permissions.some(d=>{var u;return`${d.resource}:${((u=d.actions)==null?void 0:u[0])||""}`.toUpperCase()===a.toUpperCase()}))}}),{name:"sini-auth-store",storage:BF(()=>localStorage),partialize:e=>({adminUser:e.adminUser,role:e.role,effectivePermissions:e.effectivePermissions})})),zue=e=>{const{role:s}=e;return s?s.isSystem&&(s.name===" "||s.name==="SUPER_ADMIN"):!1},Bue=({children:e,initialAdminUser:s=null})=>{const a=ni(n=>n.setAdminUser),r=ni(n=>n.initialized);return C.useEffect(()=>{s&&!r&&a(s)},[s,a,r]),t.jsx(t.Fragment,{children:e})},p0=()=>{const e=ni(h=>h.adminUser),s=ni(h=>h.role),a=ni(h=>h.loading),r=ni(h=>h.effectivePermissions),n=ni(h=>h.hasPermission),i=ni(h=>h.canAccess),l=ni(h=>h.can),o=ni(h=>h.refreshPermissions),d=ni(h=>h.setAdminUser),u=ni(zue);return{adminUser:e,role:s,loading:a,effectivePermissions:r,hasPermission:n,can:l,canAccess:i,isSuperAdmin:u,refreshPermissions:o,setAdminUser:d}},A5={[xt.PENDING]:"bg-yellow-100 text-yellow-800",[xt.APPROVED]:"bg-blue-100 text-blue-800",[xt.SHIPPED]:"bg-indigo-100 text-indigo-800",[xt.DELIVERED]:"bg-green-100 text-green-800",[xt.REJECTED]:"bg-red-100 text-red-800",[xt.CANCELLED]:"bg-gray-100 text-gray-800",NEW:"bg-slate-100 text-slate-600",SENT_TO_WAREHOUSE:"bg-orange-100 text-orange-700",WAITING_PAYMENT:"bg-amber-100 text-amber-700",PAYMENT_CONFIRMED:"bg-emerald-100 text-emerald-700",SALES_INVOICE_CREATED:"bg-cyan-100 text-cyan-700",READY_FOR_SHIPMENT:"bg-purple-100 text-purple-700",COMPLETED_INTERNAL:"bg-teal-100 text-teal-800",CANCELLED_INTERNAL:"bg-pink-100 text-pink-800"},$ue=({orders:e,users:s,onUpdate:a})=>{const{t:r}=Kt(),n={[xt.PENDING]:r("adminOrders.statusLabels.pending"),[xt.APPROVED]:r("adminOrders.statusLabels.approved"),[xt.SHIPPED]:r("adminOrders.statusLabels.shipped"),[xt.DELIVERED]:r("adminOrders.statusLabels.delivered"),[xt.REJECTED]:r("adminOrders.statusLabels.rejected"),[xt.CANCELLED]:r("adminOrders.statusLabels.cancelled")},i={NEW:r("adminOrders.internalStatusLabels.new"),SENT_TO_WAREHOUSE:r("adminOrders.internalStatusLabels.sentToWarehouse"),WAITING_PAYMENT:r("adminOrders.internalStatusLabels.waitingPayment"),PAYMENT_CONFIRMED:r("adminOrders.internalStatusLabels.paymentConfirmed"),SALES_INVOICE_CREATED:r("adminOrders.internalStatusLabels.salesInvoiceCreated"),READY_FOR_SHIPMENT:r("adminOrders.internalStatusLabels.readyForShipment"),COMPLETED_INTERNAL:r("adminOrders.internalStatusLabels.completedInternal"),CANCELLED_INTERNAL:r("adminOrders.internalStatusLabels.cancelledInternal")},{hasPermission:l}=p0(),o=l("orders","edit"),d=l("orders","approve"),[u,h]=C.useState(""),[f,x]=C.useState("ALL"),[p,v]=C.useState("ALL"),[b,y]=C.useState(1),j=20,[w,S]=C.useState(null),[O,_]=C.useState(""),[E,A]=C.useState(!1),{addToast:D}=It(),L=C.useMemo(()=>({total:e.length,new:e.filter(P=>!P.internalStatus||P.internalStatus==="NEW").length,processing:e.filter(P=>P.status===xt.APPROVED&&P.internalStatus!=="COMPLETED_INTERNAL").length,ready:e.filter(P=>P.internalStatus==="READY_FOR_SHIPMENT").length}),[e]),B=C.useMemo(()=>{let P=[...e];if(u){const G=u.toLowerCase();P=P.filter(Y=>{var W;return Y.id.toLowerCase().includes(G)||((W=Y.createdByName)==null?void 0:W.toLowerCase().includes(G))||Y.totalAmount.toString().includes(G)})}return f!=="ALL"&&(P=P.filter(G=>G.status===f)),p!=="ALL"&&(P=P.filter(G=>(G.internalStatus||"NEW")===p)),P.sort((G,Y)=>new Date(Y.date).getTime()-new Date(G.date).getTime())},[e,u,f,p]),I=C.useMemo(()=>{const P=(b-1)*j;return B.slice(P,P+j)},[B,b]),T=Math.ceil(B.length/j),z=async P=>{if(w){A(!0);try{await he.adminUpdateOrderStatus(w.id,P,"Admin"),D(r("adminOrders.externalStatusUpdated"),"success"),a(),S(G=>G?{...G,status:P}:null)}catch{D(r("adminOrders.updateFailed"),"error")}finally{A(!1)}}},k=async P=>{if(w){A(!0);try{await he.updateOrderInternalStatus(w.id,P,"Admin",O),D(r("adminOrders.internalStatusUpdated"),"success"),a();const G=(await he.getAllOrders()).find(Y=>Y.id===w.id);G&&S(G)}catch{D(r("adminOrders.updateFailed"),"error")}finally{A(!1)}}},F=P=>{S(P),_(P.internalNotes||"")};return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.newOrders")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:L.new})]}),t.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:t.jsx(zt,{size:20})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.inProgress")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:L.processing})]}),t.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 rounded-lg",children:t.jsx(is,{size:20})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.readyToShip")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:L.ready})]}),t.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg",children:t.jsx(fr,{size:20})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.totalOrders")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:L.total})]}),t.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg",children:t.jsx(Bu,{size:20})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col md:flex-row gap-4 items-center justify-between sticky top-20 z-10",children:[t.jsxs("div",{className:"relative w-full md:w-96",children:[t.jsx(Lt,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:r("adminOrders.searchOrder"),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#C8A04F] focus:border-[#C8A04F] transition-all text-slate-800 dark:text-white",value:u,onChange:P=>h(P.target.value),"data-testid":"input-order-search"})]}),t.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm font-bold text-slate-700 dark:text-white focus:outline-none",value:f,onChange:P=>x(P.target.value),"data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:r("adminOrders.allStatuses")}),Object.entries(n).map(([P,G])=>t.jsx("option",{value:P,children:G},P))]}),t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm font-bold text-slate-700 dark:text-white focus:outline-none",value:p,onChange:P=>v(P.target.value),"data-testid":"select-internal-status-filter",children:[t.jsx("option",{value:"ALL",children:r("adminOrders.allInternalStatuses")}),Object.entries(i).map(([P,G])=>t.jsx("option",{value:P,children:G},P))]})]})]}),t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:r("adminOrders.orderNumber")}),t.jsx("th",{className:"p-4",children:r("adminOrders.customer")}),t.jsx("th",{className:"p-4",children:r("adminOrders.date")}),t.jsx("th",{className:"p-4",children:r("adminOrders.total")}),t.jsx("th",{className:"p-4 text-center",children:r("adminOrders.status")}),t.jsx("th",{className:"p-4 text-center",children:r("adminOrders.internalStatus")}),t.jsx("th",{className:"p-4 text-center",children:r("adminOrders.actions")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[I.map(P=>t.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsx("td",{className:"p-4 font-mono font-bold text-[#C8A04F]",children:P.id}),t.jsx("td",{className:"p-4 font-bold text-slate-700 dark:text-slate-200",children:P.createdByName||P.userId}),t.jsx("td",{className:"p-4 text-slate-500 dark:text-slate-400 text-xs",dir:"ltr",children:ms(P.date)}),t.jsxs("td",{className:"p-4 font-black text-slate-800 dark:text-white",children:[P.totalAmount.toLocaleString()," ",r("common.currency")]}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${A5[P.status]}`,children:n[P.status]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${A5[P.internalStatus||"NEW"]}`,children:i[P.internalStatus||"NEW"]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>F(P),className:"text-[#0B1B3A] dark:text-[#C8A04F] hover:bg-slate-100 dark:hover:bg-slate-700 p-2 rounded-lg transition-colors flex items-center justify-center gap-1 mx-auto font-bold text-xs","data-testid":`button-view-order-${P.id}`,children:[t.jsx(ns,{size:16})," ",r("adminOrders.details")]})})]},P.id)),I.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-10 text-center text-slate-400",children:r("adminOrders.noOrders")})})]})]})}),T>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx("button",{disabled:b===1,onClick:()=>y(P=>P-1),className:"p-2 rounded-lg border bg-white dark:bg-slate-700 disabled:opacity-50 hover:bg-slate-50 dark:hover:bg-slate-600","data-testid":"button-prev-page",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:[r("common.page")," ",b," ",r("common.of")," ",T]}),t.jsx("button",{disabled:b===T,onClick:()=>y(P=>P+1),className:"p-2 rounded-lg border bg-white dark:bg-slate-700 disabled:opacity-50 hover:bg-slate-50 dark:hover:bg-slate-600","data-testid":"button-next-page",children:t.jsx(Ns,{size:18})})]}),t.jsx(ds,{isOpen:!!w,onClose:()=>S(null),title:w?`${r("adminOrders.orderDetails")} #${w.id}`:"",maxWidth:"max-w-4xl",children:w&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[t.jsx(zt,{size:16})," ",r("adminOrders.customerInfo")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase",children:r("adminOrders.name")}),t.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:w.createdByName||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase",children:r("adminOrders.userId")}),t.jsx("p",{className:"font-mono text-slate-700 dark:text-slate-300",children:w.userId})]})]})]}),t.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-xl overflow-hidden",children:[t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3",children:r("adminOrders.product")}),t.jsx("th",{className:"p-3 text-center",children:r("adminOrders.quantity")}),t.jsx("th",{className:"p-3 text-center",children:r("adminOrders.price")}),t.jsx("th",{className:"p-3 text-center",children:r("adminOrders.itemTotal")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-600",children:w.items.map((P,G)=>t.jsxs("tr",{children:[t.jsxs("td",{className:"p-3",children:[t.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:P.name}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:P.partNumber})]}),t.jsx("td",{className:"p-3 text-center font-bold text-slate-700 dark:text-slate-200",children:P.quantity}),t.jsx("td",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:P.price}),t.jsx("td",{className:"p-3 text-center font-bold text-[#C8A04F]",children:(P.price*P.quantity).toLocaleString()})]},G))})]}),t.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-t border-slate-200 dark:border-slate-600 flex justify-between items-center",children:[t.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",children:r("adminOrders.grandTotal")}),t.jsxs("span",{className:"font-black text-xl text-slate-900 dark:text-white",children:[w.totalAmount.toLocaleString()," ",r("common.currency")]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(gn,{size:16})," ",r("adminOrders.statusHistory")]}),t.jsxs("div",{className:"space-y-4 relative before:absolute before:right-2 before:top-2 before:bottom-2 before:w-0.5 before:bg-slate-100 dark:before:bg-slate-700",children:[(w.internalStatusHistory||[]).slice().reverse().map((P,G)=>t.jsxs("div",{className:"relative pr-6",children:[t.jsx("div",{className:"absolute right-0 top-1 w-4 h-4 bg-slate-200 dark:bg-slate-600 rounded-full border-2 border-white dark:border-slate-800"}),t.jsx("p",{className:"text-xs text-slate-400 font-mono mb-0.5",children:ms(P.changedAt)}),t.jsxs("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:[P.changedBy,": ",r("adminOrders.changedStatusTo")," ",t.jsx("span",{className:"text-[#C8A04F]",children:i[P.status]})]})]},G)),(!w.internalStatusHistory||w.internalStatusHistory.length===0)&&t.jsx("p",{className:"text-center text-slate-400 text-sm",children:r("adminOrders.noHistory")})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-600 shadow-sm",children:[t.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[t.jsx(ns,{size:18,className:"text-blue-500"})," ",r("adminOrders.externalStatus")]}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:r("adminOrders.externalStatusDesc")}),d?t.jsx("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-white mb-3",value:w.status,onChange:P=>z(P.target.value),disabled:E,"data-testid":"select-external-status",children:Object.entries(n).map(([P,G])=>t.jsx("option",{value:P,children:G},P))}):t.jsxs("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 flex items-center gap-2",children:[t.jsx(Sa,{size:16,className:"text-slate-400"}),t.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:r("adminOrders.noStatusPermission")})]})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-5 rounded-xl border border-slate-700 shadow-lg text-white",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] mb-3 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",r("adminOrders.internalStatusTitle")]}),t.jsx("p",{className:"text-xs text-slate-400 mb-3",children:r("adminOrders.internalStatusDesc")}),o?t.jsxs(t.Fragment,{children:[t.jsx("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg font-bold text-white mb-3 focus:ring-1 focus:ring-[#C8A04F]",value:w.internalStatus||"NEW",onChange:P=>k(P.target.value),disabled:E,"data-testid":"select-internal-status",children:Object.entries(i).map(([P,G])=>t.jsx("option",{value:P,children:G},P))}),t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2 mt-4",children:r("adminOrders.internalNotes")}),t.jsx("textarea",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-sm text-white focus:outline-none focus:border-[#C8A04F]",rows:3,placeholder:r("adminOrders.notesPlaceholder"),value:O,onChange:P=>_(P.target.value),"data-testid":"textarea-internal-notes"}),t.jsx("button",{onClick:()=>k(w.internalStatus||"NEW"),className:"w-full mt-3 bg-[#C8A04F] text-[#0B1B3A] py-2 rounded-lg font-bold text-sm hover:bg-[#b08d45] transition-colors",disabled:E,"data-testid":"button-save-notes",children:r("adminOrders.saveNotes")})]}):t.jsxs("div",{className:"p-3 bg-slate-700 rounded-lg border border-slate-600 flex items-center gap-2",children:[t.jsx(Sa,{size:16,className:"text-slate-400"}),t.jsx("span",{className:"text-sm font-bold text-slate-400",children:r("adminOrders.noInternalPermission")})]})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-800",children:[t.jsxs("h4",{className:"font-bold text-red-800 dark:text-red-400 mb-2 flex items-center gap-2",children:[t.jsx(Cs,{size:16})," ",r("adminOrders.dangerZone")]}),t.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm transition-colors ${d?"bg-white dark:bg-red-900/30 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/50":"bg-slate-100 dark:bg-slate-700 text-slate-400 cursor-not-allowed"}`,disabled:!d,"data-testid":"button-cancel-order",children:r(d?"adminOrders.cancelOrder":"adminOrders.noPermission")})]})]})]})})]})},que=e=>({CR_CERTIFICATE:e("adminAccountRequests.docTypes.crCertificate",{defaultValue:" "}),VAT_CERTIFICATE:e("adminAccountRequests.docTypes.vatCertificate",{defaultValue:"  "}),NATIONAL_ID:e("adminAccountRequests.docTypes.nationalId",{defaultValue:" "}),AUTHORIZATION_LETTER:e("adminAccountRequests.docTypes.authLetter",{defaultValue:" "}),OTHER:e("adminAccountRequests.docTypes.other",{defaultValue:" "})}),Hue=e=>({NEW:e("adminAccountRequests.status.new",{defaultValue:" "}),UNDER_REVIEW:e("adminAccountRequests.status.underReview",{defaultValue:" "}),APPROVED:e("adminAccountRequests.status.approved",{defaultValue:" "}),REJECTED:e("adminAccountRequests.status.rejected",{defaultValue:""}),ON_HOLD:e("adminAccountRequests.status.onHold",{defaultValue:""})}),Vue={NEW:"bg-blue-100 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-green-100 text-green-700 border-green-200",REJECTED:"bg-red-100 text-red-700 border-red-200",ON_HOLD:"bg-gray-100 text-gray-600 border-gray-200"},Gue=({requests:e,onUpdate:s})=>{const[a,r]=C.useState(""),[n,i]=C.useState("ALL"),[l,o]=C.useState(null),[d,u]=C.useState({status:"UNDER_REVIEW",priceLevel:"LEVEL_3",customerType:"OTHER",searchPointsInitial:50,searchPointsMonthly:50,portalAccessStart:new Date().toISOString().split("T")[0],portalAccessEnd:"",canCreateStaff:!1,maxStaffUsers:3,adminNotes:"",openEnded:!0}),{addToast:h}=It(),{t:f}=Kt(),x=C.useMemo(()=>Hue(f),[f]),p=C.useMemo(()=>que(f),[f]),v=C.useMemo(()=>({new:e.filter(w=>w.status==="NEW").length,review:e.filter(w=>w.status==="UNDER_REVIEW").length,approved:e.filter(w=>w.status==="APPROVED").length,rejected:e.filter(w=>w.status==="REJECTED").length}),[e]),b=C.useMemo(()=>{let w=[...e];if(a){const S=a.toLowerCase();w=w.filter(O=>(O.businessName||O.fullName||"").toLowerCase().includes(S)||O.phone.includes(S))}return n!=="ALL"&&(w=w.filter(S=>S.status===n)),w.sort((S,O)=>new Date(O.createdAt).getTime()-new Date(S.createdAt).getTime())},[e,a,n]),y=w=>{o(w),u({status:w.status==="NEW"?"UNDER_REVIEW":w.status,priceLevel:w.assignedPriceLevel||"LEVEL_2",customerType:w.assignedCustomerType||"PARTS_SHOP",searchPointsInitial:w.searchPointsInitial||50,searchPointsMonthly:w.searchPointsMonthly||0,portalAccessStart:w.portalAccessStart||new Date().toISOString().split("T")[0],portalAccessEnd:w.portalAccessEnd||"",openEnded:!w.portalAccessEnd,canCreateStaff:w.canCreateStaff||!1,maxStaffUsers:w.maxStaffUsers||3,adminNotes:w.adminNotes||""})},j=async()=>{if(l)try{await he.reviewAccountRequest(l.id,{status:d.status,adminNotes:d.adminNotes,assignedPriceLevel:d.priceLevel,assignedCustomerType:d.customerType,searchPointsInitial:d.searchPointsInitial,searchPointsMonthly:d.searchPointsMonthly,portalAccessStart:d.portalAccessStart,portalAccessEnd:d.openEnded?null:d.portalAccessEnd,canCreateStaff:d.canCreateStaff,maxStaffUsers:d.maxStaffUsers,reviewedBy:"Admin"}),h(f("adminAccountRequests.toast.saveSuccess","   "),"success"),s(),o(null)}catch{h(f("adminAccountRequests.toast.saveError","   "),"error")}};return t.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.newRequests"," ")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:v.new})]}),t.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-lg",children:t.jsx(al,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.underReview"," ")}),t.jsx("p",{className:"text-2xl font-black text-yellow-600",children:v.review})]}),t.jsx("div",{className:"p-3 bg-yellow-50 text-yellow-600 rounded-lg",children:t.jsx(is,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.approved"," ")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:v.approved})]}),t.jsx("div",{className:"p-3 bg-green-50 text-green-600 rounded-lg",children:t.jsx(Mt,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.rejected","")}),t.jsx("p",{className:"text-2xl font-black text-red-600",children:v.rejected})]}),t.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg",children:t.jsx(sa,{size:20})})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"relative w-full md:w-96",children:[t.jsx(Lt,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:f("adminAccountRequests.searchPlaceholder","   ..."),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-300 transition-all",value:a,onChange:w=>r(w.target.value)})]}),t.jsx("div",{className:"flex gap-2 w-full md:w-auto",children:t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none w-full md:w-auto",value:n,onChange:w=>i(w.target.value),children:[t.jsx("option",{value:"ALL",children:f("adminAccountRequests.allStatuses"," ")}),Object.entries(x).map(([w,S])=>t.jsx("option",{value:w,children:S},w))]})})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.businessName","  / ")}),t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.activityType"," ")}),t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.city","")}),t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.date","")}),t.jsx("th",{className:"p-4 text-center",children:f("adminAccountRequests.table.status","")}),t.jsx("th",{className:"p-4 text-center",children:f("adminAccountRequests.table.actions","")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[b.map(w=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsxs("td",{className:"p-4",children:[t.jsx("p",{className:"font-bold text-slate-800",children:w.businessName||w.fullName}),t.jsx("p",{className:"text-xs text-slate-500 font-mono mt-0.5",children:w.phone})]}),t.jsx("td",{className:"p-4 text-slate-600 font-medium",children:w.category==="SPARE_PARTS_SHOP"?f("adminAccountRequests.categories.spareParts","  "):w.category==="RENTAL_COMPANY"?f("adminAccountRequests.categories.rental"," "):w.category==="INSURANCE_COMPANY"?f("adminAccountRequests.categories.insurance"," "):f("adminAccountRequests.categories.agent","")}),t.jsx("td",{className:"p-4 text-slate-600",children:w.city||w.representativeRegion}),t.jsx("td",{className:"p-4 text-slate-500 text-xs",dir:"ltr",children:ms(w.createdAt)}),t.jsxs("td",{className:"p-4 text-center",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${Vue[w.status]}`,children:x[w.status]}),w.status==="APPROVED"&&t.jsx("div",{className:"text-[10px] text-green-600 font-bold mt-1",children:f("adminAccountRequests.approvedAccount"," ")})]}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>y(w),className:"text-slate-600 hover:text-brand-600 bg-slate-100 hover:bg-slate-200 p-2 rounded-lg transition-colors flex items-center justify-center gap-1 mx-auto font-bold text-xs",children:[t.jsx(ns,{size:16})," ",f("adminAccountRequests.view","")]})})]},w.id)),b.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-10 text-center text-slate-400",children:f("adminAccountRequests.noMatchingRequests","   ")})})]})]})}),l&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm transition-opacity",onClick:()=>o(null)}),t.jsxs("div",{className:"fixed inset-y-0 left-0 w-full md:w-[600px] bg-slate-50 z-50 shadow-2xl transform transition-transform duration-300 ease-in-out border-r border-slate-200 flex flex-col",children:[t.jsxs("div",{className:"p-6 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm z-10",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:f("adminAccountRequests.panel.title","  ")}),t.jsxs("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["REF: ",l.id]})]}),t.jsx("button",{onClick:()=>o(null),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 text-slate-600",children:t.jsx(vt,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm space-y-4",children:[t.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 border-b border-slate-100 pb-2",children:[t.jsx(zt,{size:18,className:"text-blue-600"})," ",f("adminAccountRequests.panel.customerData"," ")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.businessName"," ")}),t.jsx("span",{className:"font-bold text-slate-800 text-base",children:l.businessName||l.fullName})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.activity","")}),t.jsx("span",{className:"font-bold text-slate-800",children:l.category})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.city","")}),t.jsx("span",{className:"font-bold text-slate-800",children:l.city||l.representativeRegion})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.contactNumber"," ")}),t.jsx("span",{className:"font-mono font-bold text-slate-800",children:l.phone})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.crNumber"," ")}),t.jsx("span",{className:"font-mono text-slate-800",children:l.commercialRegNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.vatNumber"," ")}),t.jsx("span",{className:"font-mono text-slate-800",children:l.vatNumber||"-"})]})]}),l.notes&&t.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100 text-sm text-slate-600",children:[t.jsxs("span",{className:"block text-xs font-bold text-slate-400 mb-1",children:[f("adminAccountRequests.panel.customerNotes"," "),":"]}),l.notes]})]}),l.documents&&l.documents.length>0&&t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm space-y-4",children:[t.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 border-b border-slate-100 pb-2",children:[t.jsx(qS,{size:18,className:"text-purple-600"})," ",f("adminAccountRequests.panel.attachedDocuments"," ")," (",l.documents.length,")"]}),t.jsx("div",{className:"grid gap-3",children:l.documents.map(w=>{const S=w.fileType.startsWith("image/"),O=w.fileSize<1024*1024?(w.fileSize/1024).toFixed(1)+" KB":(w.fileSize/(1024*1024)).toFixed(1)+" MB";return t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200 hover:border-purple-300 transition-colors",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${S?"bg-blue-100 text-blue-600":"bg-red-100 text-red-600"}`,children:S?t.jsx(Li,{size:20}):t.jsx(qS,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:p[w.type]||w.type}),t.jsxs("p",{className:"text-xs text-slate-500",children:[w.name,"  ",O]})]}),w.base64Data&&t.jsx("a",{href:w.base64Data,target:"_blank",rel:"noopener noreferrer",download:w.name,className:"p-2 bg-purple-100 rounded-lg text-purple-600 hover:bg-purple-200 transition-colors","data-testid":`view-doc-${w.id}`,children:t.jsx(Ll,{size:16})})]},w.id)})})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-6 rounded-2xl border border-slate-700 shadow-lg text-white space-y-6",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] flex items-center gap-2 border-b border-slate-700 pb-2",children:[t.jsx(Bs,{size:18})," ",f("adminAccountRequests.panel.adminDecision","  ")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.requestStatus"," ")}),t.jsxs("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white font-bold focus:ring-1 focus:ring-[#C8A04F]",value:d.status,onChange:w=>u({...d,status:w.target.value}),children:[t.jsx("option",{value:"NEW",children:f("adminAccountRequests.form.statusNew","")}),t.jsx("option",{value:"UNDER_REVIEW",children:f("adminAccountRequests.form.statusUnderReview"," ")}),t.jsx("option",{value:"APPROVED",children:f("adminAccountRequests.form.statusApproved"," ()")}),t.jsx("option",{value:"REJECTED",children:f("adminAccountRequests.form.statusRejected","")}),t.jsx("option",{value:"ON_HOLD",children:f("adminAccountRequests.form.statusOnHold","")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.customerType"," ")}),t.jsxs("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",value:d.customerType,onChange:w=>u({...d,customerType:w.target.value}),children:[t.jsx("option",{value:"PARTS_SHOP",children:f("adminAccountRequests.form.typePartsShop","  ")}),t.jsx("option",{value:"RENTAL_COMPANY",children:f("adminAccountRequests.form.typeRentalCompany"," ")}),t.jsx("option",{value:"INSURANCE_COMPANY",children:f("adminAccountRequests.form.typeInsuranceCompany"," ")}),t.jsx("option",{value:"SALES_AGENT",children:f("adminAccountRequests.form.typeSalesAgent","")}),t.jsx("option",{value:"FLEET_CUSTOMER",children:f("adminAccountRequests.form.typeFleetCustomer"," ")}),t.jsx("option",{value:"OTHER",children:f("adminAccountRequests.form.typeOther","")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.priceLevel"," ")}),t.jsxs("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",value:d.priceLevel,onChange:w=>u({...d,priceLevel:w.target.value}),children:[t.jsx("option",{value:"LEVEL_1",children:f("adminAccountRequests.form.level1","Level 1 (VIP - Best Price)")}),t.jsx("option",{value:"LEVEL_2",children:f("adminAccountRequests.form.level2","Level 2 (Wholesale)")}),t.jsx("option",{value:"LEVEL_3",children:f("adminAccountRequests.form.level3","Level 3 (Retail/Small)")}),t.jsx("option",{value:"SPECIAL",children:f("adminAccountRequests.form.levelSpecial","Special")})]})]})]}),t.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-bold text-[#C8A04F] mb-2 flex items-center gap-2",children:[t.jsx(hh,{size:14})," ",f("adminAccountRequests.form.accessValidity"," ")]}),t.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[t.jsx("input",{type:"date",className:"bg-slate-900 border border-slate-600 rounded p-2 text-xs text-white w-full",value:d.portalAccessStart,onChange:w=>u({...d,portalAccessStart:w.target.value})}),t.jsx("span",{className:"text-slate-400 text-xs",children:f("adminAccountRequests.form.to","")}),t.jsx("input",{type:"date",disabled:d.openEnded,className:"bg-slate-900 border border-slate-600 rounded p-2 text-xs text-white w-full disabled:opacity-50",value:d.portalAccessEnd,onChange:w=>u({...d,portalAccessEnd:w.target.value})})]}),t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-300 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.openEnded,onChange:w=>u({...d,openEnded:w.target.checked}),className:"rounded bg-slate-700 border-slate-500"}),f("adminAccountRequests.form.openEnded","  (  )")]})]}),t.jsxs("div",{className:"pt-2 border-t border-slate-700",children:[t.jsx("label",{className:"block text-xs font-bold text-[#C8A04F] mb-2",children:f("adminAccountRequests.form.searchPoints","  ")}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-xs text-slate-400 block mb-1",children:f("adminAccountRequests.form.initialBalance"," ")}),t.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm text-white",value:d.searchPointsInitial,onChange:w=>u({...d,searchPointsInitial:parseInt(w.target.value)})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-xs text-slate-400 block mb-1",children:f("adminAccountRequests.form.monthlyRenewal"," ")}),t.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm text-white",value:d.searchPointsMonthly,onChange:w=>u({...d,searchPointsMonthly:parseInt(w.target.value)})})]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg border border-slate-600",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.canCreateStaff,onChange:w=>u({...d,canCreateStaff:w.target.checked}),className:"w-4 h-4 rounded bg-slate-700 border-slate-500 text-[#C8A04F] focus:ring-0"}),t.jsx("span",{className:"text-sm font-bold text-slate-200",children:f("adminAccountRequests.form.allowAddStaff","  ")})]}),d.canCreateStaff&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-slate-400",children:[f("adminAccountRequests.form.maxLimit"," "),":"]}),t.jsx("input",{type:"number",min:1,className:"w-16 bg-slate-900 border border-slate-600 rounded p-1 text-center text-sm text-white",value:d.maxStaffUsers,onChange:w=>u({...d,maxStaffUsers:parseInt(w.target.value)})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.adminNotes","  ( )")}),t.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-sm text-white focus:border-[#C8A04F] focus:outline-none",placeholder:f("adminAccountRequests.form.notesPlaceholder","    ..."),value:d.adminNotes,onChange:w=>u({...d,adminNotes:w.target.value})})]})]})]}),t.jsxs("div",{className:"p-6 bg-white border-t border-slate-200 shadow-up z-10 flex gap-4",children:[t.jsxs("button",{onClick:j,className:"flex-1 bg-[#0B1B3A] text-white py-3 rounded-xl font-bold hover:bg-slate-900 transition-colors flex items-center justify-center gap-2 shadow-lg",children:[t.jsx(us,{size:18})," ",f("adminAccountRequests.form.saveDecision"," ")]}),t.jsx("button",{onClick:()=>o(null),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:f("adminAccountRequests.form.cancel","")})]})]})]})]})},E5={LOCAL_SUPPLIER:ta,INTERNATIONAL_SUPPLIER:Ea,MARKETER:ja,ADVERTISER:pi},C5={NEW:"bg-blue-100 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-green-100 text-green-700 border-green-200",REJECTED:"bg-red-100 text-red-700 border-red-200",NEEDS_MODIFICATION:"bg-orange-100 text-orange-700 border-orange-200"},Wue=({onBack:e})=>{var W,ee,H,M,X,K,Q,se,V;const[s,a]=C.useState([]),[r,n]=C.useState(!0),[i,l]=C.useState(""),[o,d]=C.useState("ALL"),[u,h]=C.useState("ALL"),[f,x]=C.useState(null),[p,v]=C.useState(null),[b,y]=C.useState("UNDER_REVIEW"),[j,w]=C.useState(""),[S,O]=C.useState(""),[_,E]=C.useState(""),[A,D]=C.useState(100),{addToast:L}=It(),{t:B}=Kt();C.useEffect(()=>{I()},[o,u,i]);const I=async()=>{n(!0);try{const[te,Z]=await Promise.all([he.getPartnerRequests({type:o!=="ALL"?o:void 0,status:u!=="ALL"?u:void 0,search:i||void 0}),he.getPartnerRequestsStats()]);a(te.items),v(Z)}catch{L("    ","error")}finally{n(!1)}},T=te=>{x(te),y(te.status==="NEW"?"UNDER_REVIEW":te.status),w(te.adminNotes||""),O(te.rejectionReason||""),E(te.modificationNote||"")},z=async()=>{if(f)try{b==="APPROVED"?(await he.approvePartnerRequest(f.id,{searchPoints:A}),L("     ","success")):(await he.updatePartnerRequestStatus(f.id,b,j,S,_),L("   ","success")),x(null),I()}catch{L("   ","error")}},k=te=>{var Z;return((Z=Po[te])==null?void 0:Z.label)||te},F=te=>E5[te]||ta,P=te=>{var Z;return((Z=Gce[te])==null?void 0:Z.label)||te},G=te=>!te||te.length===0?t.jsx("span",{className:"text-slate-400",children:"-"}):t.jsxs("div",{className:"flex flex-wrap gap-1",children:[te.slice(0,3).map(Z=>{const ue=Mm.find(re=>re.id===Z);return t.jsx("span",{className:"px-2 py-0.5 bg-brand-100 text-brand-700 rounded-full text-xs font-bold",children:(ue==null?void 0:ue.label)||Z},Z)}),te.length>3&&t.jsxs("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full text-xs font-bold",children:["+",te.length-3]})]}),Y=te=>!te||te.length===0?t.jsx("span",{className:"text-slate-400",children:"-"}):t.jsx("div",{className:"flex flex-wrap gap-1",children:te.map(Z=>{const ue=OF.find(re=>re.id===Z);return t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-bold",children:(ue==null?void 0:ue.label)||Z},Z)})});return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e&&t.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg",children:t.jsx(yf,{size:20})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-slate-500 text-sm",children:"    "})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-bold",children:[(p==null?void 0:p.total)||0," "]})})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Po).map(([te,Z])=>{var J;const ue=E5[te],re=((J=p==null?void 0:p.byType)==null?void 0:J[te])||0;return t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:`p-2 rounded-lg ${Z.color} text-white`,children:t.jsx(ue,{size:20})}),t.jsx("span",{className:"text-2xl font-black text-slate-800",children:re})]}),t.jsx("p",{className:"text-sm font-bold text-slate-600",children:Z.label})]},te)})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[": ",((W=p==null?void 0:p.byStatus)==null?void 0:W.NEW)||0]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-yellow-700",children:[" : ",((ee=p==null?void 0:p.byStatus)==null?void 0:ee.UNDER_REVIEW)||0]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-green-700",children:[" : ",((H=p==null?void 0:p.byStatus)==null?void 0:H.APPROVED)||0]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-red-700",children:[": ",((M=p==null?void 0:p.byStatus)==null?void 0:M.REJECTED)||0]})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"relative w-full md:w-80",children:[t.jsx(Lt,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:"   ...",className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-300",value:i,onChange:te=>l(te.target.value)})]}),t.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[t.jsxs("select",{value:o,onChange:te=>d(te.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"LOCAL_SUPPLIER",children:" "}),t.jsx("option",{value:"INTERNATIONAL_SUPPLIER",children:" "}),t.jsx("option",{value:"MARKETER",children:""}),t.jsx("option",{value:"ADVERTISER",children:""})]}),t.jsxs("select",{value:u,onChange:te=>h(te.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"NEW",children:" "}),t.jsx("option",{value:"UNDER_REVIEW",children:" "}),t.jsx("option",{value:"APPROVED",children:" "}),t.jsx("option",{value:"REJECTED",children:""}),t.jsx("option",{value:"NEEDS_MODIFICATION",children:" "})]})]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:r?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-brand-600 border-t-transparent rounded-full animate-spin mx-auto"}),t.jsx("p",{className:"text-slate-500 mt-3",children:" ..."})]}):s.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Wt,{size:48,className:"text-slate-300 mx-auto mb-3"}),t.jsx("p",{className:"text-slate-500",children:"    "})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(te=>{var ue,re,J;const Z=F(te.type);return t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`p-1.5 rounded-lg ${((ue=Po[te.type])==null?void 0:ue.color)||"bg-slate-500"} text-white`,children:t.jsx(Z,{size:16})}),t.jsx("span",{className:"text-sm font-bold text-slate-700",children:k(te.type)})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"font-bold text-slate-800",children:te.companyName||te.fullName||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 font-mono",dir:"ltr",children:te.phone})}),t.jsxs("td",{className:"px-4 py-3",children:[te.type==="LOCAL_SUPPLIER"&&G(te.carBrands||[]),te.type==="INTERNATIONAL_SUPPLIER"&&t.jsx("span",{className:"text-sm text-slate-600",children:((re=QS.find(Ne=>Ne.code===te.country))==null?void 0:re.label)||te.country}),te.type==="MARKETER"&&Y(te.marketingChannels||[]),te.type==="ADVERTISER"&&t.jsxs("span",{className:"text-sm text-slate-600",children:[((J=WS.find(Ne=>Ne.id===te.adType))==null?void 0:J.label)||te.adType," - ",te.duration," "]})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${C5[te.status]}`,children:P(te.status)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-500",children:ms(te.createdAt)})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>T(te),className:"p-2 text-brand-600 hover:bg-brand-50 rounded-lg transition-colors",children:t.jsx(ns,{size:18})})})]},te.id)})})]})})}),f&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-scale-in",children:[t.jsx("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-xl ${((X=Po[f.type])==null?void 0:X.color)||"bg-slate-500"} text-white`,children:ke.createElement(F(f.type),{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:f.companyName||f.fullName}),t.jsx("p",{className:"text-sm text-slate-500",children:k(f.type)})]})]}),t.jsx("button",{onClick:()=>x(null),className:"p-2 hover:bg-slate-200 rounded-lg",children:t.jsx(vt,{size:20})})]})}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[t.jsx(Yr,{size:14}),t.jsx("span",{children:" "})]}),t.jsx("p",{className:"font-bold text-slate-800",dir:"ltr",children:f.phone})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[t.jsx(hh,{size:14}),t.jsx("span",{children:" "})]}),t.jsx("p",{className:"font-bold text-slate-800",children:ms(f.createdAt)})]})]}),f.type==="LOCAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:"  "}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.commercialRegNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.vatNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.nationalAddressNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:((K=kF.find(te=>te.id===f.city))==null?void 0:K.label)||f.city||"-"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),G(f.carBrands||[])]}),f.ownBrands&&f.ownBrands.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:"  "}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:f.ownBrands.map((te,Z)=>t.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-bold",children:te},Z))})]})]}),f.type==="INTERNATIONAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:"  "}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:((Q=QS.find(te=>te.code===f.country))==null?void 0:Q.label)||f.country||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:f.city||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:((se=IF.find(te=>te.id===f.businessType))==null?void 0:se.label)||f.businessType||"-"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),G(f.carBrands||[])]})]}),f.type==="MARKETER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:" "}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),Y(f.marketingChannels||[])]}),f.otherChannel&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.otherChannel})]})]}),f.type==="ADVERTISER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:" "}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:((V=WS.find(te=>te.id===f.adType))==null?void 0:V.label)||f.adType||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsxs("p",{className:"font-bold text-slate-800",children:[f.duration||0," "]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.startDate||"-"})]})]})]}),t.jsxs("div",{className:"border-t pt-6 space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700",children:" "}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-2 block",children:" "}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["UNDER_REVIEW","APPROVED","REJECTED","NEEDS_MODIFICATION"].map(te=>t.jsx("button",{onClick:()=>y(te),className:`px-4 py-2 rounded-lg border-2 font-bold text-sm transition-all ${b===te?C5[te]+" border-current":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:P(te)},te))})]}),b==="APPROVED"&&f.type==="LOCAL_SUPPLIER"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"  "}),t.jsx("input",{type:"number",value:A,onChange:te=>D(parseInt(te.target.value)||0),className:"w-40 p-2 border border-slate-200 rounded-lg"})]}),b==="REJECTED"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:" "}),t.jsx("textarea",{value:S,onChange:te=>O(te.target.value),className:"w-full p-3 border border-slate-200 rounded-lg h-20",placeholder:"   ..."})]}),b==="NEEDS_MODIFICATION"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:" "}),t.jsx("textarea",{value:_,onChange:te=>E(te.target.value),className:"w-full p-3 border border-slate-200 rounded-lg h-20",placeholder:"  ..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:" "}),t.jsx("textarea",{value:j,onChange:te=>w(te.target.value),className:"w-full p-3 border border-slate-200 rounded-lg h-20",placeholder:"  (  )..."})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-slate-200 bg-slate-50 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>x(null),className:"px-6 py-2 bg-slate-100 text-slate-700 rounded-lg font-bold hover:bg-slate-200",children:""}),t.jsxs("button",{onClick:z,className:"px-6 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 flex items-center gap-2",children:[t.jsx(us,{size:18})," "]})]})]})})]})},T5={NEW:"new",UNDER_REVIEW:"underReview",PARTIALLY_APPROVED:"partiallyApproved",APPROVED:"approved",QUOTED:"quoted",PROCESSED:"processed",REJECTED:"rejected"},Que={NEW:"bg-blue-100 text-blue-700",UNDER_REVIEW:"bg-yellow-100 text-yellow-700",PARTIALLY_APPROVED:"bg-purple-100 text-purple-700",APPROVED:"bg-green-100 text-green-700",QUOTED:"bg-green-100 text-green-700",PROCESSED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"},Kue=({quotes:e,onUpdate:s})=>{const{t:a}=Kt(),[r,n]=C.useState(""),[i,l]=C.useState("ALL"),[o,d]=C.useState(null),[u,h]=C.useState(!1),[f,x]=C.useState([]),[p,v]=C.useState(new Set),[b,y]=C.useState(""),{addToast:j}=It(),w=I=>{const T=T5[I];return T?a(`adminQuoteManager.status.${T}`):I},S=C.useMemo(()=>{let I=[...e];if(r){const T=r.toLowerCase();I=I.filter(z=>z.id.toLowerCase().includes(T)||z.companyName.toLowerCase().includes(T)||z.userName.toLowerCase().includes(T))}return i!=="ALL"&&(I=I.filter(T=>T.status===i)),I.sort((T,z)=>new Date(z.date).getTime()-new Date(T.date).getTime())},[e,r,i]),O=I=>{d(I),x(JSON.parse(JSON.stringify(I.items))),y(I.adminGeneralNote||""),v(new Set)},_=(I,T,z)=>{const k=[...f];k[I]={...k[I],[T]:z},x(k)},E=I=>{const T=new Set(p);T.has(I)?T.delete(I):T.add(I),v(T)},A=()=>{p.size===f.length?v(new Set):v(new Set(f.map((I,T)=>T)))},D=I=>{const T=[...f];p.forEach(z=>{T[z].approvalStatus=I,(I==="MISSING"||I==="REJECTED")&&(T[z].matchedPrice=void 0)}),x(T),j(a("adminQuoteManager.toast.itemsUpdated",{count:p.size}),"info")},L=async()=>{if(!(!o||f.some(T=>T.approvalStatus==="APPROVED"&&(!T.matchedPrice||T.matchedPrice<=0))&&!confirm(a("adminQuoteManager.toast.approvedWithoutPriceWarning")))){h(!0);try{const T={...o,items:f};await he.updateQuoteRequest(T),await he.finalizeQuoteRequest(o.id,"Admin",b),j(a("adminQuoteManager.toast.pricingSentSuccess"),"success"),s(),d(null)}catch{j(a("adminQuoteManager.toast.saveError"),"error")}finally{h(!1)}}};f.filter(I=>I.approvalStatus==="APPROVED").length,f.filter(I=>I.approvalStatus==="MISSING").length;const B=f.reduce((I,T)=>I+(T.matchedPrice||0)*T.requestedQty,0);return t.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 justify-between items-center",children:[t.jsxs("div",{className:"relative w-full md:w-96",children:[t.jsx(Lt,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:a("adminQuoteManager.searchPlaceholder"),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-300 transition-all",value:r,onChange:I=>n(I.target.value)})]}),t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none w-full md:w-auto",value:i,onChange:I=>l(I.target.value),children:[t.jsx("option",{value:"ALL",children:a("adminQuoteManager.allStatuses")}),Object.keys(T5).map(I=>t.jsx("option",{value:I,children:w(I)},I))]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:a("adminQuoteManager.table.requestNumber")}),t.jsx("th",{className:"p-4",children:a("adminQuoteManager.table.businessCustomer")}),t.jsx("th",{className:"p-4",children:a("adminQuoteManager.table.uploadDate")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.itemsCount")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.priceType")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.status")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.actions")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[S.map(I=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-4 font-mono font-bold text-[#C8A04F]",children:I.id}),t.jsxs("td",{className:"p-4",children:[t.jsx("p",{className:"font-bold text-slate-800",children:I.companyName}),t.jsx("p",{className:"text-xs text-slate-500",children:I.userName})]}),t.jsx("td",{className:"p-4 text-slate-500 text-xs",dir:"ltr",children:ms(I.date)}),t.jsx("td",{className:"p-4 text-center font-bold",children:I.items.length}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:"text-xs font-bold bg-slate-100 px-2 py-1 rounded",children:I.priceType})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Que[I.status]||"bg-gray-100 text-gray-600"}`,children:w(I.status)})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("button",{onClick:()=>O(I),className:"bg-white border border-slate-200 hover:bg-slate-50 text-slate-700 px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm transition-colors",children:a("adminQuoteManager.reviewDetails")})})]},I.id)),S.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-10 text-center text-slate-400",children:a("adminQuoteManager.noRequests")})})]})]})}),o&&t.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-slate-100",children:[t.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:t.jsx(vt,{size:24})}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-black text-slate-800 flex items-center gap-2",children:[a("adminQuoteManager.panel.reviewRequest")," ",t.jsx("span",{className:"font-mono text-[#C8A04F] bg-[#0B1B3A] px-2 py-0.5 rounded text-base",children:o.id})]}),t.jsxs("p",{className:"text-xs text-slate-500 font-bold",children:[o.companyName,"  ",o.priceType]})]})]}),t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsxs("div",{className:"text-center px-4 border-l border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400",children:a("adminQuoteManager.panel.proposedTotal")}),t.jsxs("p",{className:"text-lg font-black text-slate-800",children:[B.toLocaleString()," ",a("common.currency")]})]}),t.jsxs("button",{onClick:L,disabled:u,className:"bg-green-600 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-green-700 shadow-lg flex items-center gap-2 disabled:opacity-50",children:[t.jsx(us,{size:18})," ",a(u?"adminQuoteManager.panel.approving":"adminQuoteManager.panel.approveAndSend")]})]})]}),t.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-6 py-3 flex gap-3 items-center overflow-x-auto shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 px-2 border-l border-slate-300 ml-2",children:[t.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300",checked:p.size===f.length&&f.length>0,onChange:A}),t.jsx("span",{className:"text-sm font-bold text-slate-600",children:a("adminQuoteManager.panel.selectAll")})]}),t.jsxs("span",{className:"text-xs font-bold text-slate-400 mx-2",children:[a("adminQuoteManager.panel.changeSelectedStatus")," (",p.size,"):"]}),t.jsx("button",{onClick:()=>D("APPROVED"),disabled:p.size===0,className:"px-3 py-1.5 bg-green-50 text-green-700 border border-green-200 rounded-lg text-xs font-bold hover:bg-green-100 disabled:opacity-50",children:a("adminQuoteManager.panel.available")}),t.jsx("button",{onClick:()=>D("MISSING"),disabled:p.size===0,className:"px-3 py-1.5 bg-yellow-50 text-yellow-700 border border-yellow-200 rounded-lg text-xs font-bold hover:bg-yellow-100 disabled:opacity-50",children:a("adminQuoteManager.panel.unavailable")}),t.jsx("button",{onClick:()=>D("REJECTED"),disabled:p.size===0,className:"px-3 py-1.5 bg-red-50 text-red-700 border border-red-200 rounded-lg text-xs font-bold hover:bg-red-100 disabled:opacity-50",children:a("adminQuoteManager.panel.rejected")})]}),t.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-100 text-slate-600 font-bold border-b border-slate-200 sticky top-0 z-10 shadow-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 w-10"}),t.jsx("th",{className:"p-3",children:a("adminQuoteManager.panel.customerPartNumber")}),t.jsx("th",{className:"p-3",children:a("adminQuoteManager.panel.customerPartName")}),t.jsx("th",{className:"p-3 w-20 text-center",children:a("adminQuoteManager.panel.quantity")}),t.jsx("th",{className:"p-3 w-40",children:a("adminQuoteManager.panel.matchedProduct")}),t.jsx("th",{className:"p-3 w-32 text-center",children:a("adminQuoteManager.panel.price")}),t.jsx("th",{className:"p-3 w-40 text-center",children:a("adminQuoteManager.panel.decision")}),t.jsx("th",{className:"p-3",children:a("adminQuoteManager.panel.notes")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:f.map((I,T)=>{const z=p.has(T);return t.jsxs("tr",{className:`${z?"bg-blue-50":"hover:bg-slate-50"} transition-colors`,children:[t.jsx("td",{className:"p-3 text-center",children:t.jsx("input",{type:"checkbox",checked:z,onChange:()=>E(T),className:"rounded border-gray-300 text-brand-600 focus:ring-0"})}),t.jsx("td",{className:"p-3 font-mono font-bold text-slate-700",children:I.partNumber}),t.jsx("td",{className:"p-3 text-slate-600",children:I.partName}),t.jsx("td",{className:"p-3 text-center font-bold",children:I.requestedQty}),t.jsx("td",{className:"p-3",children:t.jsx("input",{type:"text",className:"w-full p-2 text-xs border border-slate-200 rounded bg-white",placeholder:" ...",value:I.matchedProductName||"",onChange:k=>_(T,"matchedProductName",k.target.value)})}),t.jsx("td",{className:"p-3",children:t.jsx("input",{type:"number",className:`w-full p-2 text-xs text-center border rounded font-bold ${I.approvalStatus==="APPROVED"&&!I.matchedPrice?"border-red-300 bg-red-50":"border-slate-200 bg-white"}`,placeholder:"0.00",value:I.matchedPrice||"",onChange:k=>_(T,"matchedPrice",parseFloat(k.target.value)),disabled:I.approvalStatus!=="APPROVED"})}),t.jsx("td",{className:"p-3 text-center",children:t.jsxs("select",{className:`w-full p-1.5 text-xs font-bold rounded border ${I.approvalStatus==="APPROVED"?"bg-green-100 text-green-700 border-green-200":I.approvalStatus==="MISSING"?"bg-yellow-100 text-yellow-700 border-yellow-200":I.approvalStatus==="REJECTED"?"bg-red-100 text-red-700 border-red-200":"bg-slate-100 text-slate-600 border-slate-200"}`,value:I.approvalStatus||"PENDING",onChange:k=>_(T,"approvalStatus",k.target.value),children:[t.jsx("option",{value:"PENDING",children:a("adminQuoteManager.panel.itemStatus.pending")}),t.jsx("option",{value:"APPROVED",children:a("adminQuoteManager.panel.itemStatus.approved")}),t.jsx("option",{value:"MISSING",children:a("adminQuoteManager.panel.itemStatus.missing")}),t.jsx("option",{value:"REJECTED",children:a("adminQuoteManager.panel.itemStatus.rejected")})]})}),t.jsx("td",{className:"p-3",children:t.jsx("input",{type:"text",className:"w-full p-2 text-xs border border-slate-200 rounded bg-white text-slate-500",placeholder:"...",value:I.adminNote||"",onChange:k=>_(T,"adminNote",k.target.value)})})]},T)})})]})}),t.jsxs("div",{className:"mt-6 max-w-2xl",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:a("adminQuoteManager.panel.generalNotes")}),t.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500",rows:3,value:b,onChange:I=>y(I.target.value),placeholder:a("adminQuoteManager.panel.notesPlaceholder")})]})]})]})]})},v1={NEW:"new",UNDER_REVIEW:"underReview",ORDER_PLANNED:"orderPlanned",ORDERED:"ordered",ADDED_TO_STOCK:"addedToStock",IGNORED:"ignored"},Jue={NEW:"bg-blue-50 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-50 text-yellow-700 border-yellow-200",ORDER_PLANNED:"bg-purple-50 text-purple-700 border-purple-200",ORDERED:"bg-orange-50 text-orange-700 border-orange-200",ADDED_TO_STOCK:"bg-green-50 text-green-700 border-green-200",IGNORED:"bg-gray-50 text-gray-500 border-gray-200"},Yue=({missingRequests:e})=>{const{t:s}=Kt(),[a,r]=C.useState("ALL"),[n,i]=C.useState(""),[l,o]=C.useState("ALL"),[d,u]=C.useState(null),[h,f]=C.useState({status:"NEW",adminNotes:""}),[x,p]=C.useState(!1),[v,b]=C.useState(1),y=15,{addToast:j}=It(),w=B=>{const I=v1[B];return I?s(`adminMissingParts.status.${I}`):B},S=C.useMemo(()=>({total:e.length,new:e.filter(B=>B.status==="NEW"||!B.status).length,inReview:e.filter(B=>B.status==="UNDER_REVIEW").length,ordered:e.filter(B=>B.status==="ORDERED"||B.status==="ORDER_PLANNED").length,solved:e.filter(B=>B.status==="ADDED_TO_STOCK").length,fromQuote:e.filter(B=>B.source==="QUOTE").length,fromSearch:e.filter(B=>B.source==="SEARCH").length}),[e]),O=C.useMemo(()=>{let B=[...e];if(a!=="ALL"&&(B=B.filter(I=>(I.source||"SEARCH")===a)),n){const I=n.toLowerCase();B=B.filter(T=>T.query.toLowerCase().includes(I)||(T.partNumber||"").toLowerCase().includes(I)||(T.name||"").toLowerCase().includes(I))}return l!=="ALL"&&(B=B.filter(I=>(I.status||"NEW")===l)),B.sort((I,T)=>{const z=(T.totalRequestsCount||1)-(I.totalRequestsCount||1);return z!==0?z:new Date(T.createdAt).getTime()-new Date(I.createdAt).getTime()})},[e,a,n,l]),_=C.useMemo(()=>{const B=(v-1)*y;return O.slice(B,B+y)},[O,v]),E=Math.ceil(O.length/y),A=B=>{u(B),f({status:B.status||"NEW",adminNotes:B.adminNotes||""})},D=async()=>{if(d){p(!0);try{await he.updateMissingProductStatus(d.id,h.status,h.adminNotes),j(s("adminMissingParts.toast.statusUpdated"),"success"),d.status=h.status,d.adminNotes=h.adminNotes,u(null)}catch{j(s("adminMissingParts.toast.saveError"),"error")}finally{p(!1)}}},L=async()=>{try{const{utils:B,writeFile:I}=await Qi(async()=>{const{utils:F,writeFile:P}=await Promise.resolve().then(()=>Tu);return{utils:F,writeFile:P}},void 0),T=O.map(F=>({[s("adminMissingParts.export.partNumber")]:F.normalizedPartNumber||F.query,[s("adminMissingParts.export.itemName")]:F.name||F.query,[s("adminMissingParts.export.source")]:F.source==="QUOTE"?s("adminMissingParts.source.quote"):s("adminMissingParts.source.search"),[s("adminMissingParts.export.requestCount")]:F.totalRequestsCount||1,[s("adminMissingParts.export.customerCount")]:F.uniqueCustomersCount||1,[s("adminMissingParts.export.status")]:w(F.status||"NEW"),[s("adminMissingParts.export.lastRequest")]:ms(F.lastRequestedAt||F.createdAt),[s("adminMissingParts.export.adminNotes")]:F.adminNotes||""})),z=B.json_to_sheet(T),k=B.book_new();B.book_append_sheet(k,z,"Missing Items"),I(k,"Missing_Parts_Report.xlsx"),j(s("adminMissingParts.toast.exportSuccess"),"success")}catch{j(s("adminMissingParts.toast.exportFailed"),"error")}};return t.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.totalMissing")}),t.jsx("p",{className:"text-2xl font-black text-slate-800",children:S.total})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.newMissing")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:S.new})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.underReview")}),t.jsx("p",{className:"text-2xl font-black text-yellow-600",children:S.inReview})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.orderedImport")}),t.jsx("p",{className:"text-2xl font-black text-purple-600",children:S.ordered})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.addedToStock")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:S.solved})]})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col xl:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg w-full xl:w-auto overflow-x-auto",children:[t.jsx("button",{onClick:()=>r("ALL"),className:`px-5 py-2 rounded-md text-sm font-bold transition-all whitespace-nowrap ${a==="ALL"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:s("adminMissingParts.tabs.all")}),t.jsxs("button",{onClick:()=>r("QUOTE"),className:`px-5 py-2 rounded-md text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2 ${a==="QUOTE"?"bg-white text-brand-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[t.jsx(zt,{size:16})," ",s("adminMissingParts.tabs.fromQuote")," (",S.fromQuote,")"]}),t.jsxs("button",{onClick:()=>r("SEARCH"),className:`px-5 py-2 rounded-md text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2 ${a==="SEARCH"?"bg-white text-brand-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[t.jsx(Lt,{size:16})," ",s("adminMissingParts.tabs.fromSearch")," (",S.fromSearch,")"]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Lt,{className:"absolute right-3 top-2.5 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:s("adminMissingParts.searchPlaceholder"),className:"w-full pr-10 pl-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-500/20 transition-all",value:n,onChange:B=>i(B.target.value)})]}),t.jsxs("select",{className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none",value:l,onChange:B=>o(B.target.value),children:[t.jsx("option",{value:"ALL",children:s("adminMissingParts.allStatuses")}),Object.keys(v1).map(B=>t.jsx("option",{value:B,children:w(B)},B))]}),t.jsxs("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 flex items-center justify-center gap-2 transition-colors shadow-sm",children:[t.jsx(tr,{size:16})," Excel"]})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:s("adminMissingParts.table.partNumber")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.source")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.requestFrequency")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.interestedCustomers")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.status")}),t.jsx("th",{className:"p-4",children:s("adminMissingParts.table.lastRequest")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.actions")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[_.map(B=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-mono font-bold text-brand-700 text-base",children:B.normalizedPartNumber||B.query}),B.name&&B.name!==B.query&&t.jsx("span",{className:"text-xs text-slate-500 mt-0.5",children:B.name})]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded border ${B.source==="QUOTE"?"bg-purple-50 text-purple-700 border-purple-100":"bg-blue-50 text-blue-700 border-blue-100"}`,children:B.source==="QUOTE"?s("adminMissingParts.source.quote"):s("adminMissingParts.source.search")})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:"font-black text-slate-800 text-lg",children:B.totalRequestsCount||1})}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-1 text-slate-600 font-bold",children:[t.jsx(x0,{size:14})," ",B.uniqueCustomersCount||1]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${Jue[B.status||"NEW"]}`,children:w(B.status||"NEW")})}),t.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",dir:"ltr",children:ms(B.lastRequestedAt||B.createdAt)}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>A(B),className:"text-slate-600 hover:text-brand-600 bg-slate-100 hover:bg-slate-200 p-2 rounded-lg transition-colors flex items-center justify-center gap-1 mx-auto font-bold text-xs",children:[t.jsx(ns,{size:16})," ",s("adminMissingParts.actions.details")]})})]},B.id)),_.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-16 text-center text-slate-400 font-bold",children:s("adminMissingParts.noMatchingMissing")})})]})]})}),E>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx("button",{disabled:v===1,onClick:()=>b(B=>B-1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[s("adminMissingParts.pagination.page")," ",v," ",s("adminMissingParts.pagination.of")," ",E]}),t.jsx("button",{disabled:v===E,onClick:()=>b(B=>B+1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(Ns,{size:18})})]}),d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm transition-opacity",onClick:()=>u(null)}),t.jsxs("div",{className:"fixed inset-y-0 left-0 w-full md:w-[500px] bg-slate-50 z-50 shadow-2xl transform transition-transform duration-300 ease-in-out border-r border-slate-200 flex flex-col",children:[t.jsxs("div",{className:"p-6 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm z-10",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:s("adminMissingParts.panel.missingDetails")}),t.jsxs("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["ID: ",d.id]})]}),t.jsx("button",{onClick:()=>u(null),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 text-slate-600",children:t.jsx(vt,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.panel.requestedItem")}),t.jsx("span",{className:"block text-2xl font-black text-brand-700 font-mono bg-slate-50 p-2 rounded-lg border border-slate-100 text-center",children:d.normalizedPartNumber||d.query})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.panel.suggestedName")}),t.jsx("span",{className:"font-bold text-slate-800",children:d.name||"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.panel.brand")}),t.jsx("span",{className:"font-bold text-slate-800",children:d.brand||"-"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-blue-600",children:d.totalRequestsCount||1}),t.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase",children:s("adminMissingParts.panel.requestCount")})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-purple-600",children:d.uniqueCustomersCount||1}),t.jsx("p",{className:"text-xs font-bold text-purple-400 uppercase",children:s("adminMissingParts.panel.differentCustomers")})]})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-6 rounded-2xl border border-slate-700 shadow-lg text-white space-y-4",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] flex items-center gap-2 border-b border-slate-700 pb-2",children:[t.jsx(Cs,{size:18})," ",s("adminMissingParts.panel.followUp")]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:s("adminMissingParts.panel.updateStatus")}),t.jsx("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white font-bold focus:ring-1 focus:ring-[#C8A04F]",value:h.status,onChange:B=>f({...h,status:B.target.value}),children:Object.keys(v1).map(B=>t.jsx("option",{value:B,children:w(B)},B))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:s("adminMissingParts.panel.internalNotes")}),t.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-sm text-white focus:border-[#C8A04F] focus:outline-none",placeholder:s("adminMissingParts.panel.notesPlaceholder"),value:h.adminNotes,onChange:B=>f({...h,adminNotes:B.target.value})})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsxs("button",{className:"flex-1 bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 rounded-lg border border-white/10 flex items-center justify-center gap-2",onClick:()=>j(s("adminMissingParts.toast.linkImportSoon"),"info"),children:[t.jsx(Rae,{size:14})," ",s("adminMissingParts.actions.linkToImport")]}),t.jsxs("button",{className:"flex-1 bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 rounded-lg border border-white/10 flex items-center justify-center gap-2",onClick:()=>j(s("adminMissingParts.toast.redirectToAddProduct"),"info"),children:[t.jsx(_u,{size:14})," ",s("adminMissingParts.actions.addToStock")]})]})]}),d.source==="QUOTE"&&t.jsxs("div",{className:"bg-slate-100 p-4 rounded-xl border border-slate-200 text-xs text-slate-500",children:[t.jsx("p",{className:"font-bold mb-1",children:s("adminMissingParts.panel.sourceQuote")}),t.jsxs("p",{className:"font-mono",children:["Ref ID: ",d.quoteRequestId]})]})]}),t.jsxs("div",{className:"p-6 bg-white border-t border-slate-200 shadow-up z-10 flex gap-4",children:[t.jsxs("button",{onClick:D,disabled:x,className:"flex-1 bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 shadow-lg disabled:opacity-50",children:[t.jsx(us,{size:18})," ",s(x?"adminMissingParts.actions.saving":"adminMissingParts.actions.saveChanges")]}),t.jsx("button",{onClick:()=>u(null),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:s("common.cancel")})]})]})]})]})},Cc={NEW:{label:"",color:"text-blue-700",bgColor:"bg-blue-50 border-blue-200"},CONTACTING:{label:" ",color:"text-yellow-700",bgColor:"bg-yellow-50 border-yellow-200"},CONFIRMED:{label:" ",color:"text-purple-700",bgColor:"bg-purple-50 border-purple-200"},PREPARING:{label:" ",color:"text-orange-700",bgColor:"bg-orange-50 border-orange-200"},RECEIVED:{label:" ",color:"text-teal-700",bgColor:"bg-teal-50 border-teal-200"},DELIVERED:{label:" ",color:"text-green-700",bgColor:"bg-green-50 border-green-200"},CANCELLED:{label:"",color:"text-red-700",bgColor:"bg-red-50 border-red-200"}},Xue=({onRefresh:e})=>{const{t:s}=Kt(),{addToast:a}=It(),[r,n]=C.useState([]),[i,l]=C.useState(!0),[o,d]=C.useState(""),[u,h]=C.useState("ALL"),[f,x]=C.useState(1),p=15,[v,b]=C.useState(null),[y,j]=C.useState({status:"NEW",internalNotes:""}),[w,S]=C.useState(!1);C.useEffect(()=>{O()},[]);const O=async()=>{l(!0);try{const T=await he.getOrderShortages();n(T)}catch(T){console.error("Error loading shortages:",T),a("  ","error")}finally{l(!1)}},_=C.useMemo(()=>({total:r.length,new:r.filter(T=>T.status==="NEW").length,contacting:r.filter(T=>T.status==="CONTACTING").length,preparing:r.filter(T=>T.status==="PREPARING"||T.status==="CONFIRMED").length,received:r.filter(T=>T.status==="RECEIVED").length,delivered:r.filter(T=>T.status==="DELIVERED").length}),[r]),E=C.useMemo(()=>{let T=[...r];if(o){const z=o.toLowerCase();T=T.filter(k=>k.partNumber.toLowerCase().includes(z)||k.productName.toLowerCase().includes(z)||k.customerName.toLowerCase().includes(z)||k.supplierName.toLowerCase().includes(z))}return u!=="ALL"&&(T=T.filter(z=>z.status===u)),T.sort((z,k)=>new Date(k.createdAt).getTime()-new Date(z.createdAt).getTime())},[r,o,u]),A=C.useMemo(()=>{const T=(f-1)*p;return E.slice(T,T+p)},[E,f]),D=Math.ceil(E.length/p),L=T=>{b(T),j({status:T.status,internalNotes:T.internalNotes||""})},B=async()=>{if(v){S(!0);try{await he.updateOrderShortageStatus(v.id,y.status,y.internalNotes,"Admin"),n(T=>T.map(z=>z.id===v.id?{...z,status:y.status,internalNotes:y.internalNotes}:z)),a("   ","success"),b(null),e==null||e()}catch{a("  ","error")}finally{S(!1)}}},I=async()=>{try{const{utils:T,writeFile:z}=await Qi(async()=>{const{utils:G,writeFile:Y}=await Promise.resolve().then(()=>Tu);return{utils:G,writeFile:Y}},void 0),k=E.map(G=>{var Y;return{" ":G.partNumber," ":G.productName,:G.customerName,:G.supplierName,:G.quantity,:G.unitPrice,:((Y=Cc[G.status])==null?void 0:Y.label)||G.status," ":`${G.deliveryHours} `," ":ms(G.createdAt)}}),F=T.json_to_sheet(k),P=T.book_new();T.book_append_sheet(P,F,"Order Shortages"),z(P,"_.xlsx"),a("   ","success")}catch{a("  ","error")}};return i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Gt,{className:"animate-spin text-brand-500",size:32})}):t.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:""}),t.jsx("p",{className:"text-2xl font-black text-slate-800",children:_.total})]}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[t.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase mb-1",children:""}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:_.new})]}),t.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-200",children:[t.jsx("p",{className:"text-xs font-bold text-yellow-500 uppercase mb-1",children:" "}),t.jsx("p",{className:"text-2xl font-black text-yellow-600",children:_.contacting})]}),t.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[t.jsx("p",{className:"text-xs font-bold text-orange-500 uppercase mb-1",children:" "}),t.jsx("p",{className:"text-2xl font-black text-orange-600",children:_.preparing})]}),t.jsxs("div",{className:"bg-teal-50 p-4 rounded-xl border border-teal-200",children:[t.jsx("p",{className:"text-xs font-bold text-teal-500 uppercase mb-1",children:" "}),t.jsx("p",{className:"text-2xl font-black text-teal-600",children:_.received})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[t.jsx("p",{className:"text-xs font-bold text-green-500 uppercase mb-1",children:" "}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:_.delivered})]})]}),t.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col xl:flex-row justify-between items-center gap-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Lt,{className:"absolute right-3 top-2.5 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pr-10 pl-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-500/20 transition-all",value:o,onChange:T=>d(T.target.value)})]}),t.jsxs("select",{className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none",value:u,onChange:T=>h(T.target.value),children:[t.jsx("option",{value:"ALL",children:" "}),Object.entries(Cc).map(([T,z])=>t.jsx("option",{value:T,children:z.label},T))]}),t.jsxs("button",{onClick:I,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 flex items-center justify-center gap-2 transition-colors shadow-sm",children:[t.jsx(tr,{size:16})," Excel"]}),t.jsxs("button",{onClick:O,className:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-200 flex items-center justify-center gap-2",children:[t.jsx(Gt,{size:16})," "]})]})}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:" "}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:" "}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[A.map(T=>{var z,k,F;return t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"font-mono font-bold text-brand-700",children:T.partNumber})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",children:T.productName})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(nn,{size:14,className:"text-slate-400"}),t.jsx("span",{className:"font-bold text-slate-700",children:T.customerName})]})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-bold text-slate-700",children:T.supplierName}),T.supplierContact&&t.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[t.jsx(Yr,{size:10})," ",T.supplierContact]})]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:"font-black text-slate-800",children:T.quantity})}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded border border-amber-200",children:[T.deliveryHours," "]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${(z=Cc[T.status])==null?void 0:z.bgColor} ${(k=Cc[T.status])==null?void 0:k.color}`,children:((F=Cc[T.status])==null?void 0:F.label)||T.status})}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>L(T),className:"text-slate-600 hover:text-brand-600 bg-slate-100 hover:bg-slate-200 p-2 rounded-lg transition-colors flex items-center justify-center gap-1 mx-auto font-bold text-xs",children:[t.jsx(ns,{size:16})," "]})})]},T.id)}),A.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"p-16 text-center text-slate-400 font-bold",children:r.length===0?"    ":"   "})})]})]})}),D>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx("button",{disabled:f===1,onClick:()=>x(T=>T-1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[" ",f,"  ",D]}),t.jsx("button",{disabled:f===D,onClick:()=>x(T=>T+1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(Ns,{size:18})})]}),v&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm",onClick:()=>b(null)}),t.jsxs("div",{className:"fixed inset-y-0 left-0 w-full md:w-[500px] bg-slate-50 z-50 shadow-2xl transform transition-transform duration-300 ease-in-out border-r border-slate-200 flex flex-col",children:[t.jsxs("div",{className:"p-6 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:" "}),t.jsxs("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["ID: ",v.id]})]}),t.jsx("button",{onClick:()=>b(null),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 text-slate-600",children:t.jsx(vt,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:" "}),t.jsx("span",{className:"block text-2xl font-black text-brand-700 font-mono bg-slate-50 p-2 rounded-lg border border-slate-100 text-center",children:v.partNumber})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:" "}),t.jsx("span",{className:"font-bold text-slate-800",children:v.productName})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:""}),t.jsx("span",{className:"font-bold text-slate-800",children:v.quantity})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[t.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase mb-2",children:""}),t.jsx("p",{className:"font-bold text-blue-700",children:v.customerName})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100",children:[t.jsx("p",{className:"text-xs font-bold text-purple-400 uppercase mb-2",children:""}),t.jsx("p",{className:"font-bold text-purple-700",children:v.supplierName}),v.supplierContact&&t.jsxs("p",{className:"text-xs text-purple-500 mt-1 flex items-center gap-1",children:[t.jsx(Yr,{size:10})," ",v.supplierContact]})]})]}),t.jsx("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(fr,{className:"text-amber-600",size:24}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-bold text-amber-500",children:"  "}),t.jsxs("p",{className:"text-lg font-black text-amber-700",children:[v.deliveryHours," "]})]})]})}),t.jsxs("div",{className:"bg-[#0B1B3A] p-6 rounded-2xl border border-slate-700 shadow-lg text-white space-y-4",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] flex items-center gap-2 border-b border-slate-700 pb-2",children:[t.jsx(Cs,{size:18}),"  "]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:" "}),t.jsx("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white font-bold focus:ring-1 focus:ring-[#C8A04F]",value:y.status,onChange:T=>j({...y,status:T.target.value}),children:Object.entries(Cc).map(([T,z])=>t.jsx("option",{value:T,children:z.label},T))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:" "}),t.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-sm text-white focus:border-[#C8A04F] focus:outline-none",placeholder:"   ...",value:y.internalNotes,onChange:T=>j({...y,internalNotes:T.target.value})})]})]}),v.statusHistory&&v.statusHistory.length>0&&t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[t.jsx(is,{size:16}),"  "]}),t.jsx("div",{className:"space-y-2",children:v.statusHistory.map((T,z)=>{var k;return t.jsxs("div",{className:"flex items-start gap-3 text-sm border-b border-slate-50 pb-2 last:border-0",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-500 mt-2"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-700",children:((k=Cc[T.status])==null?void 0:k.label)||T.status}),t.jsxs("p",{className:"text-xs text-slate-500",children:[ms(T.changedAt)," - ",T.changedBy]}),T.notes&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:T.notes})]})]},z)})})]})]}),t.jsxs("div",{className:"p-6 bg-white border-t border-slate-200 shadow-up flex gap-4",children:[t.jsxs("button",{onClick:B,disabled:w,className:"flex-1 bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 shadow-lg disabled:opacity-50",children:[t.jsx(us,{size:18})," ",w?" ...":" "]}),t.jsx("button",{onClick:()=>b(null),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:""})]})]})]})]})},$F=({status:e,t:s})=>{const a={ACTIVE:"bg-green-100 text-green-700 border-green-200",SUSPENDED:"bg-yellow-100 text-yellow-700 border-yellow-200",BLOCKED:"bg-red-100 text-red-700 border-red-200",PENDING:"bg-blue-100 text-blue-700 border-blue-200",INACTIVE:"bg-gray-100 text-gray-500 border-gray-200"},r=n=>({ACTIVE:"adminCustomers.status.active",SUSPENDED:"adminCustomers.status.suspended",BLOCKED:"adminCustomers.status.blocked",PENDING:"adminCustomers.status.pending",INACTIVE:"adminCustomers.status.inactive"})[n]||n;return t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${a[e]||a.INACTIVE}`,children:s(r(e))})},Zue=()=>{const[e,s]=C.useState([]),[a,r]=C.useState(!0),[n,i]=C.useState(""),[l,o]=C.useState("ALL"),[d,u]=C.useState("ALL"),[h,f]=C.useState("ALL"),[x,p]=C.useState(!1),[v,b]=C.useState({key:"totalOrdersCount",direction:"desc"}),[y,j]=C.useState(null),[w,S]=C.useState(!1),[O,_]=C.useState(!1),[E,A]=C.useState({companyName:"",phone:"",email:"",city:"",region:"",customerType:"AUTO_PARTS_SHOP",crNumber:"",taxNumber:"",nationalAddress:"",contactPerson:"",priceLevel:"LEVEL_1",status:"ACTIVE",searchPointsTotal:0,branchesCount:1,internalNotes:""}),[D,L]=C.useState([]),[B,I]=C.useState([]),[T,z]=C.useState(""),[k,F]=C.useState(""),[P,G]=C.useState(1),Y=15,{addToast:W}=It(),{t:ee}=Kt(),[H,M]=C.useState(0);C.useEffect(()=>{G(1)},[n,l,d,T,k,h]),C.useEffect(()=>{X()},[n,l,d,T,k,h,P,v]),C.useEffect(()=>{K()},[]);const X=async()=>{r(!0);try{const q={search:n||void 0,status:l!=="ALL"?l:void 0,customerType:d!=="ALL"?d:void 0,assignedMarketerId:T||void 0,assignedEmployeeId:k||void 0,activityLevel:h!=="ALL"?h:void 0,page:P,pageSize:Y,sortBy:v.key,sortDirection:v.direction},ce=await he.getAdminCustomers(q);s(ce.items),M(ce.total)}catch{W(ee("adminCustomers.errors.loadFailed"),"error")}finally{r(!1)}},K=async()=>{try{const[q,ce]=await Promise.all([he.getMarketersForDropdown(),he.getEmployeesForDropdown()]);L(q),I(ce)}catch(q){console.error("Error loading dropdown data:",q)}},[Q,se]=C.useState({total:0,active:0,suspended:0});C.useEffect(()=>{(async()=>{try{const ce=await he.getCustomerStats();se({total:ce.total,active:ce.active,suspended:ce.suspended+ce.blocked})}catch(ce){console.error("Error loading stats:",ce)}})()},[]),C.useMemo(()=>[...e].sort((q,ce)=>(ce.totalOrdersCount||0)-(q.totalOrdersCount||0)).slice(0,5),[e]);const V=C.useMemo(()=>{let q=0;return l!=="ALL"&&q++,d!=="ALL"&&q++,T&&q++,k&&q++,h!=="ALL"&&q++,q},[l,d,T,k,h]),te=()=>{i(""),o("ALL"),u("ALL"),z(""),F(""),f("ALL"),G(1)},Z=()=>{A({companyName:"",phone:"",email:"",city:"",region:"",customerType:"AUTO_PARTS_SHOP",crNumber:"",taxNumber:"",nationalAddress:"",contactPerson:"",priceLevel:"LEVEL_1",status:"ACTIVE",searchPointsTotal:0,branchesCount:1,internalNotes:""})},ue=async()=>{if(!E.companyName.trim()){W(ee("adminCustomers.addCustomer.errors.companyNameRequired"),"error");return}if(!E.phone.trim()){W(ee("adminCustomers.addCustomer.errors.phoneRequired"),"error");return}if(!E.city.trim()){W(ee("adminCustomers.addCustomer.errors.cityRequired"),"error");return}_(!0);try{await he.createCustomerFromAdmin(E),W(ee("adminCustomers.addCustomer.success"),"success"),S(!1),Z(),X();const q=await he.getCustomerStats();se({total:q.total,active:q.active,suspended:q.suspended+q.blocked})}catch{W(ee("adminCustomers.addCustomer.errors.failed"),"error")}finally{_(!1)}},re=Math.ceil(H/Y),J=q=>{b(ce=>({key:q,direction:ce.key===q&&ce.direction==="desc"?"asc":"desc"}))},Ne=q=>{j(q)};return t.jsxs("div",{className:"space-y-6 animate-fade-in relative min-h-screen",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:ee("adminCustomers.stats.totalCustomers")}),t.jsx("p",{className:"text-2xl font-black text-slate-800",children:Q.total})]}),t.jsx("div",{className:"p-3 bg-slate-100 rounded-lg text-slate-600",children:t.jsx(Wt,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:ee("adminCustomers.stats.activeCustomers")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:Q.active})]}),t.jsx("div",{className:"p-3 bg-green-50 rounded-lg text-green-600",children:t.jsx(x0,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:ee("adminCustomers.stats.blockedSuspended")}),t.jsx("p",{className:"text-2xl font-black text-red-600",children:Q.suspended})]}),t.jsx("div",{className:"p-3 bg-red-50 rounded-lg text-red-600",children:t.jsx(jf,{size:20})})]}),t.jsxs("div",{onClick:()=>S(!0),className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white p-4 rounded-xl shadow-md border border-emerald-400 cursor-pointer hover:from-emerald-600 hover:to-emerald-700 transition-all flex flex-col justify-center items-center gap-2","data-testid":"button-add-customer",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:t.jsx(al,{size:24})}),t.jsx("p",{className:"text-sm font-bold",children:ee("adminCustomers.addCustomer.button")})]})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[t.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex gap-4 w-full xl:w-auto",children:[t.jsxs("div",{className:"relative flex-1 xl:w-80",children:[t.jsx(Lt,{className:"absolute right-3 top-2.5 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:ee("adminCustomers.filters.searchPlaceholder"),className:"w-full pr-10 pl-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-500/20 transition-all",value:n,onChange:q=>i(q.target.value),"data-testid":"input-search-customers"})]}),t.jsxs("select",{className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none",value:l,onChange:q=>o(q.target.value),"data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:ee("adminCustomers.filters.allStatuses")}),t.jsx("option",{value:"ACTIVE",children:ee("adminCustomers.status.active")}),t.jsx("option",{value:"SUSPENDED",children:ee("adminCustomers.status.suspended")}),t.jsx("option",{value:"BLOCKED",children:ee("adminCustomers.status.blocked")}),t.jsx("option",{value:"PENDING",children:ee("adminCustomers.status.pending")})]}),t.jsxs("button",{onClick:()=>p(!x),className:`px-4 py-2 border rounded-lg text-sm font-bold flex items-center gap-2 transition-colors ${x?"bg-brand-600 text-white border-brand-600":"bg-slate-50 text-slate-700 border-slate-200 hover:bg-slate-100"}`,"data-testid":"button-toggle-advanced-filters",children:[t.jsx(sc,{size:16}),ee("adminCustomers.filters.advanced"),V>0&&t.jsx("span",{className:"bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-bold",children:V}),x?t.jsx(Qr,{size:14}):t.jsx(Ir,{size:14})]})]}),t.jsxs("div",{className:"flex gap-2 w-full xl:w-auto overflow-x-auto",children:[t.jsx("button",{onClick:()=>b({key:"totalOrdersCount",direction:"desc"}),className:`px-3 py-1.5 border rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${v.key==="totalOrdersCount"?"bg-brand-50 border-brand-200 text-brand-700":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:ee("adminCustomers.filters.mostOrders")}),t.jsx("button",{onClick:()=>b({key:"totalSearchesCount",direction:"desc"}),className:`px-3 py-1.5 border rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${v.key==="totalSearchesCount"?"bg-brand-50 border-brand-200 text-brand-700":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:ee("adminCustomers.filters.mostSearches")}),t.jsx("button",{onClick:()=>b({key:"lastLoginAt",direction:"desc"}),className:`px-3 py-1.5 border rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${v.key==="lastLoginAt"?"bg-brand-50 border-brand-200 text-brand-700":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:ee("adminCustomers.filters.lastActive")})]})]}),x&&t.jsxs("div",{className:"border-t border-slate-100 pt-4 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.customerType")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:d,onChange:q=>u(q.target.value),"data-testid":"select-customer-type-filter",children:[t.jsx("option",{value:"ALL",children:ee("adminCustomers.filters.allTypes")}),t.jsx("option",{value:"AUTO_PARTS_SHOP",children:"  "}),t.jsx("option",{value:"MAINTENANCE_CENTER",children:" "}),t.jsx("option",{value:"AUTO_SHOWROOM",children:" "}),t.jsx("option",{value:"CAR_RENTAL",children:" "}),t.jsx("option",{value:"GOVERNMENT",children:" "}),t.jsx("option",{value:"OTHER",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.activityLevel")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:h,onChange:q=>f(q.target.value),"data-testid":"select-activity-level-filter",children:[t.jsx("option",{value:"ALL",children:ee("adminCustomers.filters.allActivity")}),t.jsx("option",{value:"ACTIVE_TODAY",children:ee("adminCustomers.filters.activeToday")}),t.jsx("option",{value:"ACTIVE_WEEK",children:ee("adminCustomers.filters.activeWeek")}),t.jsx("option",{value:"INACTIVE_30",children:ee("adminCustomers.filters.inactive30")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.marketer")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:T,onChange:q=>z(q.target.value),"data-testid":"select-marketer-filter",children:[t.jsx("option",{value:"",children:ee("adminCustomers.filters.allMarketers")}),D.map(q=>t.jsx("option",{value:q.id,children:q.name},q.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.employee")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:k,onChange:q=>F(q.target.value),"data-testid":"select-employee-filter",children:[t.jsx("option",{value:"",children:ee("adminCustomers.filters.allEmployees")}),B.map(q=>t.jsx("option",{value:q.id,children:q.name},q.id))]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:te,className:"w-full px-4 py-2 bg-red-50 text-red-600 border border-red-200 rounded-lg text-sm font-bold hover:bg-red-100 transition-colors flex items-center justify-center gap-2","data-testid":"button-clear-filters",children:[t.jsx(vt,{size:14}),ee("adminCustomers.filters.clearAll")]})})]}),t.jsx("div",{className:"mt-4 text-sm text-slate-500",children:ee("adminCustomers.filters.resultsCount",{count:H})})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[500px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4 cursor-pointer",onClick:()=>J("companyName"),children:ee("adminCustomers.table.businessName")}),t.jsx("th",{className:"p-4 cursor-pointer hidden md:table-cell",onClick:()=>J("city"),children:ee("adminCustomers.table.city")}),t.jsx("th",{className:"p-4 cursor-pointer hidden lg:table-cell",onClick:()=>J("customerType"),children:ee("adminCustomers.table.activity")}),t.jsx("th",{className:"p-4 text-center cursor-pointer",onClick:()=>J("status"),children:ee("adminCustomers.table.status")}),t.jsx("th",{className:"p-4 text-center cursor-pointer",onClick:()=>J("totalOrdersCount"),children:ee("adminCustomers.table.orders")}),t.jsx("th",{className:"p-4 text-center cursor-pointer hidden md:table-cell",onClick:()=>J("totalSearchesCount"),children:ee("adminCustomers.table.searches")}),t.jsx("th",{className:"p-4 text-center cursor-pointer hidden lg:table-cell",onClick:()=>J("lastLoginAt"),children:ee("adminCustomers.table.lastLogin")}),t.jsx("th",{className:"p-4 text-center",children:ee("adminCustomers.table.action")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:a?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"p-10 text-center",children:ee("common.loading")})}):e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"p-10 text-center text-slate-400",children:ee("adminCustomers.table.noMatching")})}):e.map(q=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-bold text-slate-800 text-base",children:q.companyName}),q.riskyLoginFlag&&t.jsxs("span",{className:"text-[10px] text-red-500 font-bold flex items-center gap-1 mt-1",children:[t.jsx(Ks,{size:10})," ",ee("adminCustomers.table.suspiciousBehavior")]})]})}),t.jsx("td",{className:"p-4 text-slate-600 hidden md:table-cell",children:q.city}),t.jsx("td",{className:"p-4 text-slate-600 hidden lg:table-cell text-xs font-bold bg-slate-50 px-2 py-1 rounded w-fit h-fit",children:q.customerType||ee("common.notSpecified")}),t.jsx("td",{className:"p-4 text-center",children:t.jsx($F,{status:q.status||"ACTIVE",t:ee})}),t.jsx("td",{className:"p-4 text-center font-bold text-brand-700",children:q.totalOrdersCount}),t.jsx("td",{className:"p-4 text-center hidden md:table-cell",children:q.totalSearchesCount}),t.jsx("td",{className:"p-4 text-center hidden lg:table-cell text-xs text-slate-500 font-mono",dir:"ltr",children:ms(q.lastLoginAt)}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>Ne(q),className:"bg-slate-100 hover:bg-[#0B1B3A] hover:text-white text-slate-600 p-2 rounded-lg transition-colors text-xs font-bold flex items-center justify-center gap-1 mx-auto",children:[t.jsx(ns,{size:16})," ",t.jsx("span",{className:"hidden xl:inline",children:""})]})})]},q.userId))})]})}),re>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx("button",{disabled:P===1,onClick:()=>G(q=>q-1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[" ",P,"  ",re]}),t.jsx("button",{disabled:P===re,onClick:()=>G(q=>q+1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(Ns,{size:18})})]}),y&&t.jsx(s0e,{customer:y,onClose:()=>j(null),onUpdate:()=>{X(),j(null)}}),w&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-fade-in",children:[t.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 p-5 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:t.jsx(al,{className:"text-white",size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:ee("adminCustomers.addCustomer.title")}),t.jsx("p",{className:"text-emerald-100 text-sm",children:ee("adminCustomers.addCustomer.subtitle")})]})]}),t.jsx("button",{onClick:()=>{S(!1),Z()},className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-add-customer-modal",children:t.jsx(vt,{className:"text-white",size:20})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(ta,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.companyName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:E.companyName,onChange:q=>A({...E,companyName:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:ee("adminCustomers.addCustomer.placeholders.companyName"),"data-testid":"input-new-customer-company-name"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Yr,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.phone")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:E.phone,onChange:q=>A({...E,phone:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"05xxxxxxxx",dir:"ltr","data-testid":"input-new-customer-phone"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Fl,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.email")]}),t.jsx("input",{type:"email",value:E.email,onChange:q=>A({...E,email:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"example@email.com",dir:"ltr","data-testid":"input-new-customer-email"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Qo,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.city")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:E.city,onChange:q=>A({...E,city:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-city",children:[t.jsx("option",{value:"",children:ee("adminCustomers.addCustomer.placeholders.selectCity")}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(gae,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.region")]}),t.jsxs("select",{value:E.region,onChange:q=>A({...E,region:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-region",children:[t.jsx("option",{value:"",children:ee("adminCustomers.addCustomer.placeholders.selectRegion")}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Fu,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.customerType")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:E.customerType,onChange:q=>A({...E,customerType:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-type",children:[t.jsx("option",{value:"AUTO_PARTS_SHOP",children:ee("adminCustomers.addCustomer.types.autoPartsShop")}),t.jsx("option",{value:"MAINTENANCE_CENTER",children:ee("adminCustomers.addCustomer.types.maintenanceCenter")}),t.jsx("option",{value:"AUTO_SHOWROOM",children:ee("adminCustomers.addCustomer.types.autoShowroom")}),t.jsx("option",{value:"CAR_RENTAL",children:ee("adminCustomers.addCustomer.types.carRental")}),t.jsx("option",{value:"GOVERNMENT",children:ee("adminCustomers.addCustomer.types.government")}),t.jsx("option",{value:"OTHER",children:ee("adminCustomers.addCustomer.types.other")})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Lo,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.priceLevel")]}),t.jsxs("select",{value:E.priceLevel,onChange:q=>A({...E,priceLevel:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-price-level",children:[t.jsx("option",{value:"LEVEL_1",children:ee("adminCustomers.addCustomer.priceLevels.level1")}),t.jsx("option",{value:"LEVEL_2",children:ee("adminCustomers.addCustomer.priceLevels.level2")}),t.jsx("option",{value:"LEVEL_3",children:ee("adminCustomers.addCustomer.priceLevels.level3")}),t.jsx("option",{value:"SPECIAL",children:ee("adminCustomers.addCustomer.priceLevels.special")})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(xF,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.crNumber")]}),t.jsx("input",{type:"text",value:E.crNumber,onChange:q=>A({...E,crNumber:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"1010xxxxxx",dir:"ltr","data-testid":"input-new-customer-cr-number"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(zt,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.taxNumber")]}),t.jsx("input",{type:"text",value:E.taxNumber,onChange:q=>A({...E,taxNumber:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"3xxxxxxxxxxxxxxx",dir:"ltr","data-testid":"input-new-customer-tax-number"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Qo,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.nationalAddress")]}),t.jsx("input",{type:"text",value:E.nationalAddress,onChange:q=>A({...E,nationalAddress:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:ee("adminCustomers.addCustomer.placeholders.nationalAddress"),"data-testid":"input-new-customer-national-address"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(nn,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.contactPerson")]}),t.jsx("input",{type:"text",value:E.contactPerson,onChange:q=>A({...E,contactPerson:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:ee("adminCustomers.addCustomer.placeholders.contactPerson"),"data-testid":"input-new-customer-contact-person"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Lt,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.searchPoints")]}),t.jsx("input",{type:"number",value:E.searchPointsTotal,onChange:q=>A({...E,searchPointsTotal:parseInt(q.target.value)||0}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"0",min:"0",dir:"ltr","data-testid":"input-new-customer-search-points"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(ta,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.branchesCount")]}),t.jsx("input",{type:"number",value:E.branchesCount,onChange:q=>A({...E,branchesCount:parseInt(q.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"1",min:"1",dir:"ltr","data-testid":"input-new-customer-branches-count"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:ee("adminCustomers.addCustomer.fields.status")}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>A({...E,status:"ACTIVE"}),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${E.status==="ACTIVE"?"bg-green-100 text-green-700 border-2 border-green-400":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,"data-testid":"button-status-active",children:[t.jsx(Mt,{size:16,className:"inline ml-2"}),ee("adminCustomers.status.active")]}),t.jsxs("button",{type:"button",onClick:()=>A({...E,status:"PENDING"}),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${E.status==="PENDING"?"bg-blue-100 text-blue-700 border-2 border-blue-400":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,"data-testid":"button-status-pending",children:[t.jsx(is,{size:16,className:"inline ml-2"}),ee("adminCustomers.status.pending")]}),t.jsxs("button",{type:"button",onClick:()=>A({...E,status:"SUSPENDED"}),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${E.status==="SUSPENDED"?"bg-yellow-100 text-yellow-700 border-2 border-yellow-400":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,"data-testid":"button-status-suspended",children:[t.jsx(sa,{size:16,className:"inline ml-2"}),ee("adminCustomers.status.suspended")]})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(VS,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.internalNotes")]}),t.jsx("textarea",{value:E.internalNotes,onChange:q=>A({...E,internalNotes:q.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all resize-none",placeholder:ee("adminCustomers.addCustomer.placeholders.internalNotes"),rows:3,"data-testid":"textarea-new-customer-notes"})]})]})}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-between items-center gap-4",children:[t.jsx("button",{onClick:()=>{S(!1),Z()},className:"px-6 py-3 bg-white border border-slate-300 text-slate-700 rounded-xl font-bold hover:bg-slate-100 transition-colors","data-testid":"button-cancel-add-customer",children:ee("common.cancel")}),t.jsx("button",{onClick:ue,disabled:O,className:"px-8 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2","data-testid":"button-submit-add-customer",children:O?t.jsxs(t.Fragment,{children:[t.jsx(Jo,{size:18,className:"animate-spin"}),ee("adminCustomers.addCustomer.saving")]}):t.jsxs(t.Fragment,{children:[t.jsx(us,{size:18}),ee("adminCustomers.addCustomer.submit")]})})]})]})})]})},e0e=({status:e})=>{const s={PENDING:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-blue-100 text-blue-700 border-blue-200",SHIPPED:"bg-purple-100 text-purple-700 border-purple-200",DELIVERED:"bg-green-100 text-green-700 border-green-200",CANCELLED:"bg-red-100 text-red-700 border-red-200"},a={PENDING:" ",APPROVED:"",SHIPPED:" ",DELIVERED:" ",CANCELLED:""};return t.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold border ${s[e]||"bg-gray-100 text-gray-600 border-gray-200"}`,children:a[e]||e})},t0e=({status:e})=>{const s={NEW:"bg-blue-100 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-green-100 text-green-700 border-green-200",PARTIALLY_APPROVED:"bg-orange-100 text-orange-700 border-orange-200",REJECTED:"bg-red-100 text-red-700 border-red-200"},a={NEW:"",UNDER_REVIEW:" ",APPROVED:"",PARTIALLY_APPROVED:" ",REJECTED:""};return t.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold border ${s[e]||"bg-gray-100 text-gray-600 border-gray-200"}`,children:a[e]||e})},s0e=({customer:e,onClose:s,onUpdate:a})=>{var z,k,F;const[r,n]=C.useState("OVERVIEW"),{addToast:i}=It(),{t:l}=Kt(),[o,d]=C.useState(e.status||"ACTIVE"),[u,h]=C.useState(""),[f,x]=C.useState(!1),[p,v]=C.useState([]),[b,y]=C.useState([]),[j,w]=C.useState([]),[S,O]=C.useState([]),[_,E]=C.useState(!1),[A,D]=C.useState(!1);C.useEffect(()=>{(async()=>{const G=await he.getCustomerActivityLogs(e.userId);v(G);const Y=await he.getEmployees(e.userId);y(Y)})()},[e.userId]),C.useEffect(()=>{r==="ORDERS"&&j.length===0&&!_&&(E(!0),he.getAllOrders().then(P=>{const G=P.filter(Y=>Y.userId===e.userId||Y.businessId===e.userId);w(G.sort((Y,W)=>new Date(W.date).getTime()-new Date(Y.date).getTime())),E(!1)}))},[r,e.userId,j.length,_]),C.useEffect(()=>{r==="QUOTES"&&S.length===0&&!A&&(D(!0),he.getAllQuoteRequests().then(P=>{const G=P.filter(Y=>Y.userId===e.userId);O(G.sort((Y,W)=>new Date(W.date).getTime()-new Date(Y.date).getTime())),D(!1)}))},[r,e.userId,S.length,A]);const L=async()=>{x(!0);try{await he.updateCustomerStatus(e.userId,o,u),i("   ","success"),a()}catch{i(" ","error")}finally{x(!1)}},B=async()=>{const P=prompt("   :","50");P&&parseInt(P)>0&&(await he.addCustomerSearchPoints(e.userId,parseInt(P)),i(`  ${P}  `,"success"),a())},I=async()=>{const P=e.searchPointsRemaining||0,G=prompt(` : ${P} 

   :`,"10");if(G&&parseInt(G)>0){const Y=parseInt(G);if(Y>P){i(`       (${P} )`,"error");return}await he.deductCustomerSearchPoints(e.userId,Y)?(i(`  ${G}  `,"success"),a()):i("    ","error")}},T=async(P,G)=>{const Y=G==="ACTIVE"?"SUSPENDED":"ACTIVE";await he.updateStaffStatus(P,Y),i("   ","success");const W=await he.getEmployees(e.userId);y(W)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm transition-opacity",onClick:s}),t.jsxs("div",{className:"fixed inset-y-0 left-0 w-full md:w-[800px] bg-slate-50 z-50 shadow-2xl transform transition-transform duration-300 ease-in-out border-r border-slate-200 flex flex-col",children:[t.jsxs("div",{className:"bg-white border-b border-slate-200 flex flex-col shadow-sm z-10",children:[t.jsxs("div",{className:"p-6 flex justify-between items-start pb-4",children:[t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsx("div",{className:"w-16 h-16 bg-[#0B1B3A] rounded-xl flex items-center justify-center text-white text-2xl font-bold uppercase shadow-lg",children:e.companyName.substring(0,2)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:e.companyName}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-slate-500",children:[t.jsx(Qo,{size:14})," ",e.city,t.jsx("span",{className:"mx-1",children:""}),t.jsx(Yr,{size:14})," ",e.phone]}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx($F,{status:e.status||"ACTIVE",t:l}),t.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-xs font-bold border border-slate-200",children:e.priceLevel})]})]})]}),t.jsx("button",{onClick:s,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-600 transition-colors",children:t.jsx(vt,{size:20})})]}),t.jsx("div",{className:"flex px-6 gap-6 overflow-x-auto",children:[{id:"OVERVIEW",label:l("adminCustomers.detail.tabs.overview"),icon:t.jsx(Wr,{size:16})},{id:"ORDERS",label:l("adminCustomers.detail.tabs.orders"),icon:t.jsx(zt,{size:16})},{id:"QUOTES",label:l("adminCustomers.detail.tabs.quotes"),icon:t.jsx(yn,{size:16})},{id:"STAFF",label:`${l("adminCustomers.detail.tabs.staff")} (${b.length})`,icon:t.jsx(Wt,{size:16})},{id:"SECURITY",label:l("adminCustomers.detail.tabs.security"),icon:t.jsx(x1,{size:16})},{id:"NOTES",label:l("adminCustomers.detail.tabs.notes"),icon:t.jsx(Rr,{size:16})}].map(P=>t.jsxs("button",{onClick:()=>n(P.id),className:`pb-3 text-sm font-bold flex items-center gap-2 border-b-2 transition-colors whitespace-nowrap ${r===P.id?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-800"}`,children:[P.icon," ",P.label]},P.id))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r==="OVERVIEW"&&t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"bg-[#0B1B3A] p-6 rounded-2xl text-white shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-[#C8A04F] mb-4 flex items-center gap-2",children:[t.jsx(jf,{size:18})," ",l("adminCustomers.detail.accountManagement")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:l("adminCustomers.detail.changeStatus")}),t.jsxs("select",{className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm text-white focus:border-[#C8A04F]",value:o,onChange:P=>d(P.target.value),children:[t.jsx("option",{value:"ACTIVE",children:l("adminCustomers.detail.statusActive")}),t.jsx("option",{value:"SUSPENDED",children:l("adminCustomers.detail.statusSuspended")}),t.jsx("option",{value:"BLOCKED",children:l("adminCustomers.detail.statusBlocked")})]})]}),o==="SUSPENDED"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:l("adminCustomers.detail.suspendUntil")}),t.jsx("input",{type:"date",className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm text-white",value:u,onChange:P=>h(P.target.value)})]})]}),t.jsx("button",{onClick:L,disabled:f,className:"mt-4 w-full bg-[#C8A04F] text-[#0B1B3A] font-bold py-2 rounded-lg hover:bg-[#b08d45] transition-colors",children:l(f?"adminCustomers.detail.saving":"adminCustomers.detail.saveChanges")})]}),t.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-xl ${e.priceVisibility==="VISIBLE"?"bg-emerald-100":"bg-amber-100"}`,children:e.priceVisibility==="VISIBLE"?t.jsx(ns,{size:20,className:"text-emerald-600"}):t.jsx(dr,{size:20,className:"text-amber-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-slate-800",children:l("adminCustomers.detail.priceDisplayType")}),t.jsx("p",{className:"text-xs text-slate-500",children:e.priceVisibility==="VISIBLE"?l("adminCustomers.detail.pricesVisible"):l("adminCustomers.detail.pricesHidden")})]})]}),t.jsxs("select",{className:"bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 text-sm font-bold",value:e.priceVisibility||"HIDDEN",onChange:async P=>{const G=P.target.value;await he.updateCustomerPriceVisibility(e.userId,G),i(`${l("adminCustomers.detail.priceDisplayChanged")} ${l(G==="VISIBLE"?"adminCustomers.detail.visible":"adminCustomers.detail.hidden")}`,"success"),a()},"data-testid":"select-price-visibility",children:[t.jsx("option",{value:"VISIBLE",children:l("adminCustomers.detail.visibleNoPoints")}),t.jsx("option",{value:"HIDDEN",children:l("adminCustomers.detail.hiddenWithPoints")})]})]})}),e.priceVisibility!=="VISIBLE"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Lt,{size:18,className:"text-blue-500"})," ",l("adminCustomers.detail.searchWallet")]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:B,className:"text-xs bg-green-50 text-green-600 px-3 py-1.5 rounded-lg font-bold hover:bg-green-100 transition-colors flex items-center gap-1","data-testid":"button-add-points",children:[t.jsx(kt,{size:14})," ",l("adminCustomers.detail.addBalance")]}),t.jsxs("button",{onClick:I,className:"text-xs bg-red-50 text-red-600 px-3 py-1.5 rounded-lg font-bold hover:bg-red-100 transition-colors flex items-center gap-1","data-testid":"button-deduct-points",children:[t.jsx(oE,{size:14})," ",l("adminCustomers.detail.deductBalance")]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:l("adminCustomers.detail.totalBalance")}),t.jsx("p",{className:"text-xl font-black text-slate-800",children:e.searchPointsTotal||0})]}),t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:l("adminCustomers.detail.used")}),t.jsx("p",{className:"text-xl font-black text-slate-800",children:(e.searchPointsTotal||0)-(e.searchPointsRemaining||0)})]}),t.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl shadow-sm",children:[t.jsx("p",{className:"text-xs text-blue-500 font-bold uppercase",children:l("adminCustomers.detail.remaining")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:e.searchPointsRemaining||0})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:l("adminCustomers.detail.joinDate")}),t.jsx("p",{className:"font-mono font-bold text-slate-700",children:"2023-01-15"})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:l("adminCustomers.detail.lastLogin")}),t.jsx("p",{className:"font-mono font-bold text-slate-700",dir:"ltr",children:ms(e.lastLoginAt)})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2 mb-4",children:[t.jsx(zt,{size:18,className:"text-amber-500"})," ",l("adminCustomers.detail.customerDocs")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.crNumber?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:t.jsx(zt,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:l("adminCustomers.detail.docs.commercialReg")}),t.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.crNumber})]}),(z=e.documents)!=null&&z.find(P=>P.type==="CR_CERTIFICATE")?t.jsx("button",{onClick:()=>{var G;const P=(G=e.documents)==null?void 0:G.find(Y=>Y.type==="CR_CERTIFICATE");P!=null&&P.base64Data&&window.open(P.base64Data,"_blank")},className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100","data-testid":"view-cr-doc",children:t.jsx(Ll,{size:16})}):t.jsx("span",{className:"text-xs text-slate-400",children:l("adminCustomers.detail.docs.notAttached")})]}):t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 text-center",children:[t.jsx("p",{className:"text-sm text-slate-400",children:l("adminCustomers.detail.docs.commercialReg")}),t.jsx("p",{className:"text-xs text-slate-300",children:l("adminCustomers.detail.docs.notAvailable")})]}),e.taxNumber?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-green-600",children:t.jsx(zt,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:l("adminCustomers.detail.docs.taxNumber")}),t.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.taxNumber})]}),(k=e.documents)!=null&&k.find(P=>P.type==="VAT_CERTIFICATE")?t.jsx("button",{onClick:()=>{var G;const P=(G=e.documents)==null?void 0:G.find(Y=>Y.type==="VAT_CERTIFICATE");P!=null&&P.base64Data&&window.open(P.base64Data,"_blank")},className:"p-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100","data-testid":"view-vat-doc",children:t.jsx(Ll,{size:16})}):t.jsx("span",{className:"text-xs text-slate-400",children:l("adminCustomers.detail.docs.notAttached")})]}):t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 text-center",children:[t.jsx("p",{className:"text-sm text-slate-400",children:l("adminCustomers.detail.docs.taxNumber")}),t.jsx("p",{className:"text-xs text-slate-300",children:l("adminCustomers.detail.docs.notAvailable")})]}),e.nationalAddress?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center text-amber-600",children:t.jsx(Qo,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:l("adminCustomers.detail.docs.nationalAddress")}),t.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.nationalAddress})]}),(F=e.documents)!=null&&F.find(P=>P.type==="NATIONAL_ADDRESS")?t.jsx("button",{onClick:()=>{var G;const P=(G=e.documents)==null?void 0:G.find(Y=>Y.type==="NATIONAL_ADDRESS");P!=null&&P.base64Data&&window.open(P.base64Data,"_blank")},className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100","data-testid":"view-address-doc",children:t.jsx(Ll,{size:16})}):t.jsx("span",{className:"text-xs text-slate-400",children:l("adminCustomers.detail.docs.notAttached")})]}):t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 text-center",children:[t.jsx("p",{className:"text-sm text-slate-400",children:l("adminCustomers.detail.docs.nationalAddress")}),t.jsx("p",{className:"text-xs text-slate-300",children:l("adminCustomers.detail.docs.notAvailable")})]})]})]})]}),r==="STAFF"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("h3",{className:"font-bold text-slate-800",children:[l("adminCustomers.detail.staff.staffMembers")," (",b.length,")"]}),t.jsxs("p",{className:"text-xs text-slate-500",children:[l("adminCustomers.detail.staff.maxLimit"),": ",e.staffLimit]})]}),b.map(P=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 font-bold",children:P.name[0]}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:[P.name," ",P.role==="CUSTOMER_OWNER"&&t.jsx("span",{className:"bg-amber-100 text-amber-700 text-[10px] px-1.5 rounded ml-1",children:l("adminCustomers.detail.staff.owner")})]}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:P.phone||P.clientId})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${P.isActive?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:P.isActive?l("adminCustomers.detail.staff.active"):l("adminCustomers.detail.staff.suspended")}),t.jsx("button",{onClick:()=>T(P.id,P.status||"ACTIVE"),className:"text-xs border px-3 py-1.5 rounded hover:bg-slate-50",children:P.isActive?l("adminCustomers.detail.staff.suspendBtn"):l("adminCustomers.detail.staff.activateBtn")})]})]},P.id)),b.length===0&&t.jsx("p",{className:"text-center text-slate-400 py-8",children:l("adminCustomers.detail.noStaff")})]}),r==="SECURITY"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm mb-6",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Sa,{size:18})," ",l("adminCustomers.detail.security.securityIndicators")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"flex justify-between p-3 bg-slate-50 rounded-lg",children:[t.jsx("span",{children:l("adminCustomers.detail.security.failedLoginAttempts")}),t.jsx("span",{className:`font-bold ${e.failedLoginAttempts>3?"text-red-600":"text-slate-800"}`,children:e.failedLoginAttempts||0})]}),t.jsxs("div",{className:"flex justify-between p-3 bg-slate-50 rounded-lg",children:[t.jsx("span",{children:l("adminCustomers.detail.security.suspiciousBehavior")}),t.jsx("span",{className:`font-bold ${e.riskyLoginFlag?"text-red-600":"text-green-600"}`,children:e.riskyLoginFlag?l("adminCustomers.detail.security.yes"):l("adminCustomers.detail.security.no")})]})]}),t.jsx("button",{onClick:()=>he.resetFailedLogin(e.userId).then(()=>{i(l("adminCustomers.detail.security.counterReset"),"success"),a()}),className:"mt-4 w-full border border-slate-300 text-slate-600 py-2 rounded-lg text-sm hover:bg-slate-50",children:l("adminCustomers.detail.security.resetCounter")})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm mb-6",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(x1,{size:18})," ",l("adminCustomers.detail.security.passwordReset")]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:l("adminCustomers.detail.security.passwordResetDesc")}),t.jsxs("button",{onClick:async()=>{const P=prompt(l("adminCustomers.detail.security.enterNewPassword"),"");if(P&&P.length>=4)try{const G=JSON.parse(localStorage.getItem("sini_car_current_user")||"{}");if(!G.id){i(l("adminCustomers.detail.security.adminNotFound"),"error");return}const Y=await he.adminResetPassword(G.id,e.userId,P);Y.success?i(Y.message,"success"):i(Y.message,"error")}catch{i(l("adminCustomers.detail.security.passwordResetError"),"error")}else P&&i(l("adminCustomers.detail.security.passwordMinLength"),"error")},className:"w-full bg-amber-500 text-white font-bold py-2 rounded-lg text-sm hover:bg-amber-600 flex items-center justify-center gap-2","data-testid":"button-admin-reset-password",children:[t.jsx(x1,{size:16}),l("adminCustomers.detail.security.resetPasswordBtn")]})]}),t.jsx("h3",{className:"font-bold text-slate-800 mb-2 text-sm",children:l("adminCustomers.detail.security.recentLoginHistory")}),t.jsxs("div",{className:"space-y-2",children:[p.filter(P=>P.eventType==="LOGIN"||P.eventType==="FAILED_LOGIN"||P.eventType==="PASSWORD_CHANGED"||P.eventType==="PASSWORD_RESET").slice(0,5).map(P=>t.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border border-slate-100 rounded-lg text-xs",children:[t.jsx("span",{className:`font-bold ${P.eventType==="LOGIN"?"text-green-600":P.eventType==="FAILED_LOGIN"?"text-red-600":P.eventType==="PASSWORD_CHANGED"?"text-blue-600":P.eventType==="PASSWORD_RESET"?"text-amber-600":"text-slate-600"}`,children:P.eventType==="LOGIN"?l("adminCustomers.detail.security.successfulLogin"):P.eventType==="FAILED_LOGIN"?l("adminCustomers.detail.security.failedLogin"):P.eventType==="PASSWORD_CHANGED"?l("adminCustomers.detail.security.passwordChanged"):P.eventType==="PASSWORD_RESET"?l("adminCustomers.detail.security.passwordResetAdmin"):P.eventType}),t.jsx("span",{className:"text-slate-500 font-mono",dir:"ltr",children:ms(P.createdAt)})]},P.id)),p.length===0&&t.jsx("p",{className:"text-center text-slate-400 text-xs",children:l("adminCustomers.detail.security.noLogsAvailable")})]})]}),r==="NOTES"&&t.jsx(a0e,{customerId:e.userId,customerName:e.companyName}),r==="ORDERS"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Yt,{size:18,className:"text-blue-500"})," ",l("adminCustomers.detail.orders.customerOrders")," (",j.length,")"]}),t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.orders.completed"),": ",j.filter(P=>P.status==="DELIVERED").length]}),t.jsxs("span",{className:"bg-yellow-50 text-yellow-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.orders.ongoing"),": ",j.filter(P=>["PENDING","APPROVED","SHIPPED"].includes(P.status)).length]})]})]}),_?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(Jo,{size:24,className:"mx-auto mb-3 animate-spin opacity-50"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.orders.loadingOrders")})]}):j.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(Yt,{size:40,className:"mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.orders.noOrders")})]}):t.jsxs("div",{className:"space-y-3",children:[j.slice(0,10).map(P=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600",children:t.jsx(Yt,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:["#",P.id]}),t.jsx("p",{className:"text-xs text-slate-500",children:P.createdByName||l("adminCustomers.detail.orders.unspecified")})]})]}),t.jsx(e0e,{status:P.status})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.orders.products")}),t.jsxs("p",{className:"font-bold text-slate-700",children:[P.items.length," ",l("adminCustomers.detail.orders.item")]})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.orders.total")}),t.jsxs("p",{className:"font-bold text-green-700",children:[P.totalAmount.toLocaleString()," ",l("adminCustomers.detail.orders.currency")]})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.orders.date")}),t.jsx("p",{className:"font-bold text-slate-700 font-mono",dir:"ltr",children:Yo(P.date)})]})]})]},P.id)),j.length>10&&t.jsx("p",{className:"text-center text-slate-400 text-xs py-2",children:l("adminCustomers.detail.orders.showingOf",{shown:10,total:j.length})})]})]}),r==="QUOTES"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(yp,{size:18,className:"text-purple-500"})," ",l("adminCustomers.detail.quotes.pricingRequests")," (",S.length,")"]}),t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.quotes.approved"),": ",S.filter(P=>P.status==="APPROVED").length]}),t.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.quotes.new"),": ",S.filter(P=>P.status==="NEW").length]})]})]}),A?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(Jo,{size:24,className:"mx-auto mb-3 animate-spin opacity-50"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.quotes.loadingQuotes")})]}):S.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(yp,{size:40,className:"mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.quotes.noQuotes")})]}):t.jsxs("div",{className:"space-y-3",children:[S.slice(0,10).map(P=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center text-purple-600",children:t.jsx(yp,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:["#",P.id]}),t.jsx("p",{className:"text-xs text-slate-500",children:P.priceType||l("adminCustomers.detail.quotes.unspecified")})]})]}),t.jsx(t0e,{status:P.status})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.quotes.items")}),t.jsxs("p",{className:"font-bold text-slate-700",children:[P.items.length," ",l("adminCustomers.detail.quotes.item")]})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.quotes.total")}),t.jsx("p",{className:"font-bold text-green-700",children:P.totalQuotedAmount?`${P.totalQuotedAmount.toLocaleString()} ${l("adminCustomers.detail.quotes.currency")}`:l("adminCustomers.detail.quotes.pendingPricing")})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.quotes.date")}),t.jsx("p",{className:"font-bold text-slate-700 font-mono",dir:"ltr",children:Yo(P.date)})]})]}),P.resultReady&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 flex justify-between items-center",children:[t.jsxs("div",{className:"flex gap-2 text-[10px]",children:[t.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded",children:[l("adminCustomers.detail.quotes.approved"),": ",P.approvedItemsCount||0]}),t.jsxs("span",{className:"bg-red-50 text-red-700 px-2 py-0.5 rounded",children:[l("adminCustomers.detail.quotes.missing"),": ",P.missingItemsCount||0]})]}),t.jsxs("span",{className:"text-[10px] text-slate-400",children:[l("adminCustomers.detail.quotes.reviewedBy"),": ",P.adminReviewedBy||l("adminCustomers.detail.quotes.unspecified")]})]})]},P.id)),S.length>10&&t.jsx("p",{className:"text-center text-slate-400 text-xs py-2",children:l("adminCustomers.detail.quotes.showingOf",{shown:10,total:S.length})})]})]})]})]})]})},a0e=({customerId:e,customerName:s})=>{const[a,r]=C.useState([]),[n,i]=C.useState(""),[l,o]=C.useState(!0),[d,u]=C.useState(!1),{addToast:h}=It(),{t:f}=Kt();C.useEffect(()=>{x()},[e]);const x=async()=>{o(!0);try{const v=await he.getCustomerNotes(e,1,50);r(v.notes)}catch(v){console.error("Error loading notes:",v)}finally{o(!1)}},p=async()=>{if(!n.trim()){h(f("adminCustomers.detail.notes.emptyError"),"error");return}u(!0);try{await he.addCustomerNote(e,n,"super-admin","System Admin"),h(f("adminCustomers.detail.notes.addedSuccess"),"success"),i(""),x()}catch{h(f("adminCustomers.detail.notes.addError"),"error")}finally{u(!1)}};return t.jsxs("div",{className:"animate-fade-in h-full flex flex-col space-y-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[t.jsx(VS,{size:18,className:"text-amber-500"}),f("adminCustomers.detail.notes.addNew")]}),t.jsx("textarea",{className:"w-full p-3 bg-amber-50 border border-amber-200 rounded-lg text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-300 resize-none",placeholder:f("adminCustomers.detail.notes.placeholder"),rows:3,value:n,onChange:v=>i(v.target.value),"data-testid":"textarea-new-note"}),t.jsxs("button",{onClick:p,disabled:d||!n.trim(),className:"mt-3 w-full bg-amber-500 text-white font-bold py-2.5 rounded-lg hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2","data-testid":"button-add-note",children:[d?t.jsx(Jo,{size:16,className:"animate-spin"}):t.jsx(kt,{size:16}),f(d?"adminCustomers.detail.notes.adding":"adminCustomers.detail.notes.addNote")]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[t.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Rr,{size:18,className:"text-blue-500"}),f("adminCustomers.detail.notes.previousNotes")," (",a.length,")"]}),l?t.jsxs("div",{className:"text-center py-8 text-slate-400",children:[t.jsx(Jo,{size:24,className:"mx-auto mb-3 animate-spin opacity-50"}),t.jsx("p",{className:"text-sm",children:f("common.loading")})]}):a.length===0?t.jsxs("div",{className:"text-center py-8 text-slate-400 bg-slate-50 rounded-xl border border-slate-100",children:[t.jsx(VS,{size:40,className:"mx-auto mb-3 opacity-20"}),t.jsx("p",{className:"text-sm",children:f("adminCustomers.detail.notes.noNotes")}),t.jsx("p",{className:"text-xs text-slate-300 mt-1",children:f("adminCustomers.detail.notes.addFirst")})]}):a.map(v=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow","data-testid":`note-item-${v.id}`,children:[t.jsx("div",{className:"flex justify-between items-start mb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-xs font-bold",children:v.createdByName.substring(0,2)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm text-slate-800",children:v.createdByName}),t.jsx("p",{className:"text-[10px] text-slate-400 font-mono",dir:"ltr",children:ms(v.createdAt)})]})]})}),t.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap leading-relaxed bg-slate-50 p-3 rounded-lg",children:v.text})]},v.id))]})]})},_5={NEW:"new",UNDER_REVIEW:"underReview",WAITING_CUSTOMER_EXCEL:"waitingCustomerExcel",PRICING_IN_PROGRESS:"pricingInProgress",PRICING_SENT:"pricingSent",WAITING_CUSTOMER_APPROVAL:"waitingCustomerApproval",APPROVED_BY_CUSTOMER:"approvedByCustomer",IN_FACTORY:"inFactory",SHIPMENT_BOOKED:"shipmentBooked",ON_THE_SEA:"onTheSea",IN_PORT:"inPort",CUSTOMS_CLEARED:"customsCleared",ON_THE_WAY:"onTheWay",DELIVERED:"delivered",CANCELLED:"cancelled"},k5={NEW:"bg-blue-100 text-blue-700",UNDER_REVIEW:"bg-yellow-100 text-yellow-700",APPROVED_BY_CUSTOMER:"bg-green-100 text-green-700",ON_THE_SEA:"bg-cyan-100 text-cyan-700",DELIVERED:"bg-emerald-100 text-emerald-700",CANCELLED:"bg-red-100 text-red-700",PRICING_SENT:"bg-purple-100 text-purple-700"},r0e=({requests:e,onUpdate:s})=>{const{t:a}=Kt(),[r,n]=C.useState(null),[i,l]=C.useState(!1),[o,d]=C.useState({totalAmount:0,note:""}),{addToast:u}=It(),h=v=>{const b=_5[v];return b?a(`adminImport.status.${b}`):v},f=C.useMemo(()=>[...e].sort((v,b)=>new Date(b.createdAt).getTime()-new Date(v.createdAt).getTime()),[e]),x=async(v,b)=>{if(r){l(!0);try{await he.updateImportRequestStatus(r.id,v,{note:b||"",changedBy:"Admin",actorRole:"ADMIN"}),u(a("adminImport.toast.statusUpdated"),"success"),s(),n(null)}catch{u(a("adminImport.toast.updateFailed"),"error")}finally{l(!1)}}},p=async()=>{if(!r||o.totalAmount<=0){u(a("adminImport.toast.enterValidAmount"),"error");return}l(!0);try{await he.completeImportRequestPricing(r.id,{totalAmount:o.totalAmount,pricingFileName:"Price_Offer.pdf",adminName:"Admin"}),u(a("adminImport.toast.pricingSent"),"success"),s(),n(null)}catch{u(a("adminImport.toast.sendFailed"),"error")}finally{l(!1)}};return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.newRequests")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:e.filter(v=>v.status==="NEW").length})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.inProgress")}),t.jsx("p",{className:"text-2xl font-black text-yellow-600",children:e.filter(v=>["IN_FACTORY","SHIPMENT_BOOKED","ON_THE_SEA"].includes(v.status)).length})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.awaitingCustomer")}),t.jsx("p",{className:"text-2xl font-black text-purple-600",children:e.filter(v=>["WAITING_CUSTOMER_EXCEL","PRICING_SENT","WAITING_CUSTOMER_APPROVAL"].includes(v.status)).length})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.completed")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:e.filter(v=>v.status==="DELIVERED").length})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:a("adminImport.table.requestNumber")}),t.jsx("th",{className:"p-4",children:a("adminImport.table.customer")}),t.jsx("th",{className:"p-4",children:a("adminImport.table.service")}),t.jsx("th",{className:"p-4",children:a("adminImport.table.requestDate")}),t.jsx("th",{className:"p-4 text-center",children:a("adminImport.table.status")}),t.jsx("th",{className:"p-4 text-center",children:a("adminImport.table.action")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[f.map(v=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-4 font-mono font-bold text-brand-700",children:v.id}),t.jsx("td",{className:"p-4 font-bold text-slate-800",children:v.businessName}),t.jsx("td",{className:"p-4 text-slate-600",children:v.serviceMode==="FULL_SERVICE"?a("adminImport.serviceType.fullService"):a("adminImport.serviceType.processingOnly")}),t.jsx("td",{className:"p-4 text-slate-500 text-xs",dir:"ltr",children:ms(v.createdAt)}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${k5[v.status]||"bg-gray-100 text-gray-600"}`,children:h(v.status)})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("button",{onClick:()=>n(v),className:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",children:a("adminImport.actions.manageRequest")})})]},v.id)),f.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-10 text-center text-slate-400",children:a("adminImport.noRequests")})})]})]})}),t.jsx(ds,{isOpen:!!r,onClose:()=>n(null),title:`${a("adminImport.modal.manageRequest")} #${r==null?void 0:r.id}`,maxWidth:"max-w-5xl",children:r&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between ${k5[r.status]||"bg-slate-50 border-slate-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white/50 rounded-lg",children:t.jsx(is,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:a("adminImport.modal.currentStatus")}),t.jsx("p",{className:"text-lg font-black",children:h(r.status)})]})]}),r.status==="NEW"&&t.jsx("button",{onClick:()=>x("UNDER_REVIEW"),className:"bg-white text-slate-800 px-4 py-2 rounded-lg text-xs font-bold shadow-sm hover:bg-slate-50",children:a("adminImport.actions.startReview")}),r.status==="UNDER_REVIEW"&&t.jsx("button",{onClick:()=>x("WAITING_CUSTOMER_EXCEL"),className:"bg-white text-slate-800 px-4 py-2 rounded-lg text-xs font-bold shadow-sm hover:bg-slate-50",children:a("adminImport.actions.requestItemsFile")})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Ea,{size:18})," ",a("adminImport.modal.timeline")]}),t.jsx("div",{className:"space-y-6 relative before:absolute before:right-[19px] before:top-2 before:bottom-2 before:w-0.5 before:bg-slate-100",children:(r.timeline||[]).slice().reverse().map((v,b)=>t.jsxs("div",{className:"relative pr-10",children:[t.jsx("div",{className:`absolute right-3 top-1 w-4 h-4 rounded-full border-2 border-white shadow-sm ${v.actorRole==="ADMIN"?"bg-blue-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:h(v.status)}),v.note&&t.jsx("p",{className:"text-xs text-slate-500 mt-1 bg-slate-50 p-2 rounded border border-slate-100 inline-block",children:v.note})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:ms(v.changedAt)}),t.jsx("p",{className:"text-[10px] font-bold text-slate-300 uppercase",children:v.changedBy})]})]})]},b))})]}),(r.status==="WAITING_CUSTOMER_EXCEL"||r.status==="PRICING_IN_PROGRESS")&&t.jsxs("div",{className:"bg-purple-50 p-6 rounded-2xl border border-purple-100",children:[t.jsxs("h4",{className:"font-bold text-purple-900 mb-4 flex items-center gap-2",children:[t.jsx(mr,{size:18})," ",a("adminImport.pricing.preparePricing")]}),r.customerExcelFileName?t.jsxs("div",{className:"flex items-center gap-3 bg-white p-3 rounded-lg border border-purple-200 mb-4",children:[t.jsx(zt,{className:"text-green-600"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[a("adminImport.pricing.customerFile"),": ",r.customerExcelFileName]}),t.jsx("p",{className:"text-xs text-slate-400",children:ms(r.customerExcelUploadedAt)})]}),t.jsx("button",{className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded font-bold",children:a("adminImport.pricing.download")})]}):t.jsx("p",{className:"text-sm text-purple-600 mb-4 italic",children:a("adminImport.pricing.waitingForFile")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-1",children:a("adminImport.pricing.totalOffer")}),t.jsx("input",{type:"number",className:"w-full p-2 rounded-lg border border-purple-200",value:o.totalAmount,onChange:v=>d({...o,totalAmount:parseFloat(v.target.value)})})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:p,disabled:i,className:"w-full bg-purple-600 text-white py-2 rounded-lg font-bold hover:bg-purple-700 disabled:opacity-50",children:a("adminImport.pricing.sendToCustomer")})})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 p-5 rounded-2xl border border-slate-200",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-4 border-b border-slate-200 pb-2",children:a("adminImport.details.title")}),t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.requestedBrands")}),t.jsx("span",{className:"font-bold text-slate-700",children:r.targetCarBrands.join(", ")})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.serviceType")}),t.jsx("span",{className:"font-bold text-brand-600",children:r.serviceMode==="FULL_SERVICE"?a("adminImport.serviceType.fullImport"):a("adminImport.serviceType.goodsPreparation")})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.branchesCount")}),t.jsx("span",{className:"font-bold text-slate-700",children:r.branchesCount})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.estimatedValue")}),t.jsx("span",{className:"font-bold text-slate-700",children:r.estimatedAnnualValue||"-"})]}),r.notes&&t.jsxs("div",{className:"bg-white p-3 rounded border border-slate-100 mt-2",children:[t.jsxs("span",{className:"text-xs text-slate-400 block mb-1",children:[a("adminImport.details.customerNotes"),":"]}),t.jsx("p",{className:"text-slate-600",children:r.notes})]})]})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-5 rounded-2xl text-white shadow-lg",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] mb-4 flex items-center gap-2",children:[t.jsx(us,{size:18})," ",a("adminImport.statusControl.title")]}),t.jsx("select",{className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm mb-4 text-white",value:r.status,onChange:v=>x(v.target.value),disabled:i,children:Object.keys(_5).map(v=>t.jsx("option",{value:v,children:h(v)},v))}),t.jsx("p",{className:"text-xs text-slate-400 mb-2",children:a("adminImport.statusControl.hint")})]}),t.jsx("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:t.jsx("button",{onClick:()=>x("CANCELLED"),className:"w-full text-red-600 font-bold text-sm py-2 hover:bg-red-100 rounded transition-colors",children:a("adminImport.actions.cancelRequest")})})]})]})})]})},n0e=({activeTab:e,products:s,onFileSelect:a})=>{if(e==="ITEMS_DATABASE")return t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white border border-indigo-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-xl",children:t.jsx(Wo,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsxs("p",{className:"text-sm text-slate-500",children:["     (",s.length," )"]})]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(va,{size:18}),"  ",t.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:a})]})})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-indigo-100",children:[t.jsx("p",{className:"text-2xl font-black text-indigo-600",children:s.length}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:" "})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-green-100",children:[t.jsx("p",{className:"text-2xl font-black text-green-600",children:s.filter(r=>(r.stock||0)>0).length}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-amber-100",children:[t.jsx("p",{className:"text-2xl font-black text-amber-600",children:s.filter(r=>(r.stock||0)===0).length}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:" "})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-2xl font-black text-slate-600",children:new Set(s.map(r=>r.brand)).size}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:""})]})]}),t.jsx("p",{className:"text-xs text-indigo-600 bg-indigo-100 px-3 py-2 rounded-lg",children:"      .    Excel        ."})]});if(e==="QUALITY_SETTINGS"){const[r,n]=ke.useState([]),[i,l]=ke.useState({code:"",labelAr:"",labelEn:"",description:""}),[o,d]=ke.useState(!1),u="sinicar_quality_codes",h=[{id:"1",code:"OEM",label:" ",labelAr:" ",labelEn:"Original Equipment",description:"    ",defaultMarginAdjust:5,isActive:!0,sortOrder:1},{id:"2",code:"OES",label:" ",labelAr:" ",labelEn:"OES Quality",description:"     ",defaultMarginAdjust:3,isActive:!0,sortOrder:2},{id:"3",code:"AFT",label:" ",labelAr:" ",labelEn:"Aftermarket Premium",description:"  ",defaultMarginAdjust:0,isActive:!0,sortOrder:3},{id:"4",code:"CPY",label:"",labelAr:"",labelEn:"Commercial Copy",description:"  ",defaultMarginAdjust:-3,isActive:!0,sortOrder:4}];ke.useEffect(()=>{try{const b=localStorage.getItem(u);n(b?JSON.parse(b):h)}catch{n(h)}},[]);const f=b=>{localStorage.setItem(u,JSON.stringify(b)),n(b)},x=()=>{if(!i.code||!i.labelAr)return;const b={id:`${Date.now()}`,code:i.code.toUpperCase(),label:i.labelAr,labelAr:i.labelAr,labelEn:i.labelEn,description:i.description,defaultMarginAdjust:0,isActive:!0,sortOrder:r.length+1};f([...r,b]),l({code:"",labelAr:"",labelEn:"",description:""}),d(!1)},p=b=>{const y=r.map(j=>j.id===b?{...j,isActive:!j.isActive}:j);f(y)},v=b=>{f(r.filter(y=>y.id!==b))};return t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-white border border-amber-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-amber-100 text-amber-600 rounded-xl",children:t.jsx(Ko,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsxs("p",{className:"text-sm text-slate-500",children:["      Excel (",r.length," )"]})]})]}),t.jsxs("button",{onClick:()=>d(!o),className:"flex items-center gap-2 px-4 py-2.5 bg-amber-600 hover:bg-amber-700 text-white rounded-xl font-bold text-sm transition-colors",children:[t.jsx(kt,{size:18}),"  "]})]}),o&&t.jsxs("div",{className:"mb-6 p-4 bg-white rounded-xl border border-amber-200",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[t.jsx("input",{placeholder:" (: OEM)",value:i.code,onChange:b=>l({...i,code:b.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5}),t.jsx("input",{placeholder:" ",value:i.labelAr,onChange:b=>l({...i,labelAr:b.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{placeholder:"Label in English",value:i.labelEn,onChange:b=>l({...i,labelEn:b.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr"}),t.jsx("input",{placeholder:"",value:i.description,onChange:b=>l({...i,description:b.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:x,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold text-sm",children:""}),t.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold text-sm",children:""})]})]}),t.jsx("div",{className:"space-y-3",children:r.map(b=>t.jsxs("div",{className:`flex items-center justify-between p-4 bg-white rounded-xl border ${b.isActive?"border-amber-100":"border-slate-200 opacity-60"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-white ${(b.defaultMarginAdjust||0)>0?"bg-emerald-500":(b.defaultMarginAdjust||0)<0?"bg-orange-500":"bg-slate-500"}`,children:b.code}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:b.label}),t.jsxs("span",{className:"text-xs text-slate-400 mr-2",children:["(",b.code,")"]}),b.labelEn&&t.jsx("p",{className:"text-sm text-slate-500",children:b.labelEn}),b.description&&t.jsx("p",{className:"text-xs text-slate-400",children:b.description})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-slate-400",children:[": ",b.sortOrder]}),t.jsx("button",{onClick:()=>p(b.id),className:`p-2 rounded-lg ${b.isActive?"text-emerald-600 hover:bg-emerald-50":"text-slate-400 hover:bg-slate-50"}`,children:b.isActive?" ":" "}),t.jsx("button",{onClick:()=>v(b.id),className:"p-2 text-red-400 hover:text-red-600 rounded-lg hover:bg-red-50",children:t.jsx(Cs,{size:16})}),t.jsx("button",{className:"p-2 text-slate-400 hover:text-amber-600 rounded-lg hover:bg-amber-50",children:t.jsx(Ma,{size:16})})]})]},b.id))}),t.jsx("p",{className:"mt-4 text-xs text-amber-600 bg-amber-100 px-3 py-2 rounded-lg",children:"      Excel    (  ...)"})]})}if(e==="UNMATCHED")return t.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white border border-red-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-xl",children:t.jsx(Cs,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"      "})]})]}),t.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-red-200",children:[t.jsx(Cs,{size:48,className:"mx-auto text-red-200 mb-4"}),t.jsx("p",{className:"text-slate-500 font-bold",children:"     "}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"       "})]})]});if(e==="LOCAL_SUPPLIER")return t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white border border-green-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-xl",children:t.jsx(fr,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"     "})]})]}),t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(va,{size:18}),"  Excel",t.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:a})]})]}),t.jsx("p",{className:"text-xs text-green-600 bg-green-100 px-3 py-2 rounded-lg",children:"    Excel  :        "})]});if(e==="INTERNATIONAL_SUPPLIER")return t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white border border-purple-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-xl",children:t.jsx(fF,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"      "})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("select",{className:"px-3 py-2 border border-purple-200 rounded-lg text-sm font-bold",children:[t.jsx("option",{value:"USD",children:"  "}),t.jsx("option",{value:"EUR",children:" "}),t.jsx("option",{value:"CNY",children:"  "}),t.jsx("option",{value:"AED",children:"  "})]}),t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(va,{size:18}),"  Excel",t.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:a})]})]})]}),t.jsx("p",{className:"text-xs text-purple-600 bg-purple-100 px-3 py-2 rounded-lg",children:"         "})]});if(e==="NAME_PRIORITY"){const r="sinicar_name_priorities",[n,i]=ke.useState(()=>{try{return JSON.parse(localStorage.getItem(r)||"[]")}catch{return[]}}),l=ke.useMemo(()=>{const u=new Map;return s.forEach(h=>{const f=u.get(h.partNumber)||[];f.push({source:h.supplierId||"SINI_CAR",name:h.name,image:h.imageUrl||h.image}),u.set(h.partNumber,f)}),Array.from(u.entries()).filter(([h,f])=>f.length>1).map(([h,f])=>({partNumber:h,sources:f}))},[s]),o=(u,h)=>{const f=[...n],x=f.findIndex(p=>p.partNumber===u);x>=0?f[x].prioritySource=h:f.push({partNumber:u,prioritySource:h,productNames:[]}),i(f),localStorage.setItem(r,JSON.stringify(f))},d=u=>{var h;return((h=n.find(f=>f.partNumber===u))==null?void 0:h.prioritySource)||"SINI_CAR"};return t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-white border border-orange-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-orange-100 text-orange-600 rounded-xl",children:t.jsx(Cs,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"      "})]})]}),t.jsxs("span",{className:"bg-orange-100 text-orange-700 px-4 py-2 rounded-full font-bold text-sm",children:[l.length,"  "]})]}),l.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500",children:[t.jsx(Cs,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"font-bold",children:"    "}),t.jsx("p",{className:"text-sm",children:"         "})]}):t.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:l.slice(0,50).map(u=>{const h=d(u.partNumber);return t.jsxs("div",{className:"bg-white rounded-xl border border-orange-100 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"font-mono font-bold text-slate-800 bg-slate-100 px-3 py-1 rounded-lg",children:u.partNumber}),t.jsxs("span",{className:"text-xs text-slate-400",children:[u.sources.length," "]})]}),t.jsx("div",{className:"space-y-2",children:u.sources.map((f,x)=>t.jsxs("div",{onClick:()=>o(u.partNumber,f.source),className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-all ${h===f.source?"bg-orange-100 border-2 border-orange-400":"bg-slate-50 border border-slate-200 hover:bg-slate-100"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${f.source==="SINI_CAR"?"bg-brand-600":"bg-blue-500"}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm text-slate-700",children:f.name}),t.jsx("p",{className:"text-xs text-slate-400",children:f.source==="SINI_CAR"?" ":`: ${f.source}`})]})]}),h===f.source&&t.jsx("span",{className:"text-orange-600 font-bold text-xs bg-orange-50 px-2 py-1 rounded",children:" "})]},x))})]},u.partNumber)})}),t.jsx("p",{className:"text-xs text-orange-600 bg-orange-100 px-3 py-2 rounded-lg mt-4",children:"        .     ."})]})}return null};function i0e(e,s){let a=null;return(...r)=>{a&&clearTimeout(a),a=setTimeout(()=>{e(...r)},s)}}function l0e(e,s){const a=new Map;return e.forEach(r=>{const n=String(r[s]);a.set(n,r)}),a}const o0e=({onRefresh:e})=>{var Rt;const{t:s}=Kt(),{addToast:a}=It(),r=C.useRef(null),{hasPermission:n}=p0(),i=n("products","create"),l=n("products","edit"),o=n("products","delete"),[d,u]=C.useState([]),[h,f]=C.useState(!0),[x,p]=C.useState(""),[v,b]=C.useState(""),[y,j]=C.useState(1),[w,S]=C.useState(!1),O=C.useMemo(()=>i0e(Re=>{b(Re),j(1)},300),[]);C.useCallback(Re=>{const ft=Re.target.value;p(ft),O(ft)},[O]),C.useMemo(()=>l0e(d,"partNumber"),[d]);const[_,E]=C.useState(!1),[A,D]=C.useState(null),[L,B]=C.useState(!1),[I,T]=C.useState(null),[z,k]=C.useState({}),[F,P]=C.useState(!1),[G,Y]=C.useState([]),[W,ee]=C.useState(null),[H,M]=C.useState({name:"",mappings:[]}),[X,K]=C.useState("list"),[Q,se]=C.useState(new Set),[V,te]=C.useState(!1),[Z,ue]=C.useState(1),[re,J]=C.useState("ITEMS_DATABASE"),Ne=20;C.useEffect(()=>{Ft(),ce(),q()},[]);const q=async()=>{const Re=await he.getSettings();ue(Re.minVisibleQty??1)},ce=()=>{const Re=he.getExcelColumnPresets();Y(Re)},fe=()=>{const Re=Lx.map(ft=>({internalField:ft.key,excelHeader:ft.label,isEnabled:ft.required,isRequired:ft.required,defaultValue:void 0}));M({name:"",mappings:Re}),ee(null),K("create")},ie=Re=>{ee(Re),M({name:Re.name,mappings:[...Re.mappings]}),K("edit")},ne=()=>{if(!H.name.trim()){a(s("adminProducts.columnPresets.enterPresetName","   "),"error");return}X==="create"?(he.createExcelColumnPreset({name:H.name,isDefault:G.length===0,mappings:H.mappings}),a(s("adminProducts.columnPresets.created","   "),"success")):W&&(he.updateExcelColumnPreset(W.id,{name:H.name,mappings:H.mappings}),a(s("adminProducts.columnPresets.saved","  "),"success")),ce(),K("list")},pe=Re=>{confirm(s("adminProducts.columnPresets.deleteConfirm","      "))&&(he.deleteExcelColumnPreset(Re),a(s("adminProducts.columnPresets.deleted","  "),"info"),ce())},Ee=Re=>{he.setDefaultExcelColumnPreset(Re),a(s("adminProducts.columnPresets.setDefault","   "),"success"),ce()},Ie=(Re,ft,Xt)=>{const As=[...H.mappings];As[Re]={...As[Re],[ft]:Xt},M({...H,mappings:As})},_e=()=>{const Re={internalField:`custom_${Date.now()}`,excelHeader:"",isEnabled:!0,isRequired:!1,defaultValue:void 0};M({...H,mappings:[...H.mappings,Re]})},Ge=Re=>{const ft=H.mappings.filter((Xt,As)=>As!==Re);M({...H,mappings:ft})},Ae=Re=>{se(ft=>{const Xt=new Set(ft);return Xt.has(Re)?Xt.delete(Re):Xt.add(Re),Xt})},Ue=()=>{Q.size===ve.length?se(new Set):se(new Set(ve.map(Re=>Re.id)))},Qe=()=>{se(new Set(Ce.map(Re=>Re.id))),a(s("adminProducts.selectedCount",`  ${Ce.length} `,{count:Ce.length}),"info")},_t=()=>{se(new Set)},lt=async()=>{if(Q.size===0){a(s("adminProducts.selectProductsFirst","   "),"error");return}const Re=await he.bulkUpdateProductVisibility(Array.from(Q),!0);a(s("adminProducts.visibilityApplied",`      ${Re} `,{count:Re}),"success"),Ft(),_t()},Nt=async()=>{if(Q.size===0){a(s("adminProducts.selectProductsFirst","   "),"error");return}const Re=await he.bulkUpdateProductVisibility(Array.from(Q),!1);a(s("adminProducts.visibilityRemoved",`      ${Re} `,{count:Re}),"success"),Ft(),_t()},jt=async()=>{const Re=await he.getSettings();await he.updateSettings({...Re,minVisibleQty:Z}),a(s("adminProducts.visibility.saved","     "),"success")},Ft=async()=>{f(!0);try{const Re=await he.getProducts();u(Re)}catch{a(s("adminProducts.loadFailed","   "),"error")}finally{f(!1)}},Ce=C.useMemo(()=>{if(!v.trim())return d;const Re=v.toLowerCase();return d.filter(ft=>ft.partNumber.toLowerCase().includes(Re)||ft.name.toLowerCase().includes(Re)||ft.brand&&ft.brand.toLowerCase().includes(Re)||ft.carName&&ft.carName.toLowerCase().includes(Re))},[d,v]),ve=C.useMemo(()=>{const Re=(y-1)*Ne;return Ce.slice(Re,Re+Ne)},[Ce,y]),Ve=Math.ceil(Ce.length/Ne),ot=async Re=>{var Xt;const ft=(Xt=Re.target.files)==null?void 0:Xt[0];if(ft){S(!0),D(null),E(!0);try{const As=he.getDefaultExcelColumnPreset(),we=await he.importProductsFromOnyxExcel(ft,As==null?void 0:As.id);D(we),a(s("adminProducts.importModal.importSuccess","  "),"success"),Ft(),e==null||e()}catch(As){a(As.message||s("adminProducts.importFailed","  "),"error"),D({imported:0,updated:0,skipped:0,errors:[As.message]})}finally{S(!1),r.current&&(r.current.value="")}}},le=()=>{try{he.generateOnyxExcelTemplate(),a(s("adminProducts.templateDownloaded","   Excel"),"success")}catch{a(s("adminProducts.templateDownloadFailed","   "),"error")}},Ke=Re=>{T(Re),k({...Re}),B(!0)},nt=()=>{T(null),k({partNumber:"",name:"",price:0,stock:0}),B(!0)},pt=async()=>{if(!z.partNumber||!z.name){a(s("adminProducts.partAndNameRequired","   "),"error");return}try{I?(await he.updateProduct(I.id,z),a(s("adminProducts.productSaved","  "),"success")):(await he.addProduct(z),a(s("adminProducts.productCreated","  "),"success")),Ft(),B(!1),e==null||e()}catch(Re){a(Re.message||s("common.error"," "),"error")}},Ut=async Re=>{if(confirm(s("adminProducts.deleteConfirm","      ")))try{await he.deleteProduct(Re),a(s("adminProducts.productDeleted","  "),"success"),Ft(),e==null||e()}catch{a(s("adminProducts.deleteFailed","   "),"error")}},Ts=Re=>Re==null?"-":`${Re.toLocaleString()} .`;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Yt,{className:"text-[#C8A04F]",size:24})," "]}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[d.length,"    "]})]})}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b border-slate-200",children:[t.jsxs("button",{onClick:()=>J("ITEMS_DATABASE"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${re==="ITEMS_DATABASE"?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Wo,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>J("OUR_PRODUCTS"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${re==="OUR_PRODUCTS"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(ta,{size:16})," "]}),t.jsxs("button",{onClick:()=>J("LOCAL_SUPPLIER"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${re==="LOCAL_SUPPLIER"?"bg-green-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(fr,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>J("INTERNATIONAL_SUPPLIER"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${re==="INTERNATIONAL_SUPPLIER"?"bg-purple-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(fF,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>J("QUALITY_SETTINGS"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${re==="QUALITY_SETTINGS"?"bg-amber-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Ko,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>J("NAME_PRIORITY"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${re==="NAME_PRIORITY"?"bg-orange-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Cs,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>J("UNMATCHED"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${re==="UNMATCHED"?"bg-red-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Cs,{size:16}),"  "]})]}),t.jsx(n0e,{activeTab:re,products:d,onFileSelect:ot}),t.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{onClick:()=>{P(!0),K("list")},className:"flex items-center gap-2 px-4 py-2.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-xl font-bold text-sm transition-colors","data-testid":"button-column-settings",children:[t.jsx(aa,{size:18})," "]}),t.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold text-sm transition-colors",children:[t.jsx(tr,{size:18}),"  Excel"]}),i&&t.jsxs("div",{className:"relative group",children:[t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(va,{size:18}),"  ",t.jsx("input",{ref:r,type:"file",accept:".xlsx,.xls",className:"hidden",onChange:ot})]}),G.find(Re=>Re.isDefault)&&t.jsxs("div",{className:"absolute -bottom-6 right-0 text-xs text-slate-500 whitespace-nowrap",children:[": ",(Rt=G.find(Re=>Re.isDefault))==null?void 0:Rt.name]})]}),i?t.jsxs("button",{onClick:nt,className:"flex items-center gap-2 px-4 py-2.5 bg-[#0B1B3A] hover:bg-[#1a2e56] text-white rounded-xl font-bold text-sm transition-colors",children:[t.jsx(kt,{size:18})," "]}):t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-400 rounded-xl font-bold text-sm cursor-not-allowed",children:[t.jsx(Sa,{size:18}),"  "]})]})}),t.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-l from-purple-50 to-white border border-purple-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:t.jsx(Bs,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800",children:"   "}),t.jsx("p",{className:"text-xs text-slate-500",children:"       "})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 whitespace-nowrap",children:" :"}),t.jsx("input",{type:"number",min:"0",value:Z,onChange:Re=>ue(parseInt(Re.target.value)||0),className:"w-20 px-3 py-2 border border-purple-200 rounded-lg text-center focus:ring-2 focus:ring-purple-500 focus:border-transparent","data-testid":"input-visibility-threshold"})]}),t.jsx("button",{onClick:jt,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold text-sm transition-colors","data-testid":"button-save-threshold",children:""})]})]}),t.jsxs("p",{className:"text-xs text-purple-600 mt-2 bg-purple-100 px-3 py-1.5 rounded-lg inline-block",children:["     ",Z,'    " "    ']})]}),Q.size>0&&t.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-l from-blue-50 to-white border border-blue-200 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(p1,{className:"text-blue-600",size:20}),t.jsxs("span",{className:"font-bold text-slate-800",children:[Q.size,"  "]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:lt,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold text-sm transition-colors","data-testid":"button-apply-visibility",children:[t.jsx(dr,{size:16}),"  "]}),t.jsxs("button",{onClick:Nt,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-bold text-sm transition-colors","data-testid":"button-remove-visibility",children:[t.jsx(ns,{size:16}),"  "]}),t.jsxs("button",{onClick:Qe,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold text-sm transition-colors",children:["  (",Ce.length,")"]}),t.jsx("button",{onClick:_t,className:"px-4 py-2 text-slate-500 hover:text-slate-700 rounded-lg font-bold text-sm transition-colors",children:t.jsx(vt,{size:16})})]})]}),t.jsxs("div",{className:"relative mb-6",children:[t.jsx(Lt,{size:20,className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",placeholder:"      ...",value:x,onChange:Re=>{p(Re.target.value),j(1)},className:"w-full pr-12 pl-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent transition-all"})]}),h?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(Gt,{className:"animate-spin text-[#C8A04F]",size:32})}):Ce.length===0?t.jsxs("div",{className:"text-center py-20",children:[t.jsx(Yt,{size:48,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-500 font-bold",children:"  "}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"     Excel"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50 text-slate-600",children:[t.jsx("th",{className:"px-3 py-3 text-center font-bold rounded-tr-xl w-12",children:t.jsx("button",{onClick:Ue,className:"p-1.5 hover:bg-slate-200 rounded transition-colors",title:" ",children:Q.size===ve.length&&ve.length>0?t.jsx(p1,{className:"text-blue-600",size:18}):t.jsx(t5,{className:"text-slate-400",size:18})})}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:""}),t.jsx("th",{className:"px-4 py-3 text-center font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:""}),t.jsx("th",{className:"px-4 py-3 text-center font-bold rounded-tl-xl",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:ve.map(Re=>{const ft=Re.qtyTotal??Re.stock??0,Xt=Re.useVisibilityRuleForQty===!0,As=Xt&&ft<Z;return t.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors ${Q.has(Re.id)?"bg-blue-50/50":""}`,children:[t.jsx("td",{className:"px-3 py-3 text-center",children:t.jsx("button",{onClick:()=>Ae(Re.id),className:"p-1.5 hover:bg-slate-200 rounded transition-colors",children:Q.has(Re.id)?t.jsx(p1,{className:"text-blue-600",size:18}):t.jsx(t5,{className:"text-slate-300",size:18})})}),t.jsx("td",{className:"px-4 py-3 font-mono text-slate-700",children:Re.partNumber}),t.jsx("td",{className:"px-4 py-3 font-bold text-slate-800",children:Re.name}),t.jsx("td",{className:"px-4 py-3 text-emerald-600 font-bold",children:Ts(Re.priceWholesale||Re.price)}),t.jsx("td",{className:"px-4 py-3 text-slate-600",children:Ts(Re.priceRetail)}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${ft>10?"bg-emerald-100 text-emerald-700":ft>0?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:ft}),As&&t.jsx("span",{className:"mr-1 text-purple-500",title:"  ",children:t.jsx(dr,{size:14,className:"inline"})})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:Xt?t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-bold rounded-lg",children:[t.jsx(Bs,{size:12}),""]}):t.jsx("span",{className:"text-slate-400 text-xs",children:"-"})}),t.jsx("td",{className:"px-4 py-3 text-slate-500",children:Re.brand||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l?t.jsx("button",{onClick:()=>Ke(Re),className:"p-2 text-slate-400 hover:text-[#C8A04F] hover:bg-amber-50 rounded-lg transition-colors",title:"",children:t.jsx(Ma,{size:16})}):t.jsx("span",{className:"p-2 text-slate-300 cursor-not-allowed",title:"  ",children:t.jsx(Ma,{size:16})}),o?t.jsx("button",{onClick:()=>Ut(Re.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:t.jsx(At,{size:16})}):t.jsx("span",{className:"p-2 text-slate-300 cursor-not-allowed",title:"  ",children:t.jsx(At,{size:16})})]})})]},Re.id)})})]})}),Ve>1&&t.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-slate-100",children:[t.jsxs("p",{className:"text-sm text-slate-500",children:[" ",(y-1)*Ne+1," - ",Math.min(y*Ne,Ce.length),"  ",Ce.length]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>j(Re=>Math.max(1,Re-1)),disabled:y===1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"px-4 py-2 font-bold text-slate-700",children:[y," / ",Ve]}),t.jsx("button",{onClick:()=>j(Re=>Math.min(Ve,Re+1)),disabled:y===Ve,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:t.jsx(Ns,{size:18})})]})]})]})]}),_&&t.jsx(ds,{isOpen:_,onClose:()=>E(!1),title:" ",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:`p-3 rounded-xl ${w?"bg-blue-100":A!=null&&A.imported||A!=null&&A.updated?"bg-emerald-100":"bg-red-100"}`,children:w?t.jsx(Gt,{size:24,className:"animate-spin text-blue-600"}):A!=null&&A.imported||A!=null&&A.updated?t.jsx(Mt,{size:24,className:"text-emerald-600"}):t.jsx(Ks,{size:24,className:"text-red-600"})}),t.jsx("div",{children:t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:w?" ...":" "})})]}),w?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-slate-600",children:"  ..."})}):A&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-emerald-600",children:A.imported}),t.jsx("p",{className:"text-xs font-bold text-emerald-700",children:""})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-blue-600",children:A.updated}),t.jsx("p",{className:"text-xs font-bold text-blue-700",children:""})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-slate-600",children:A.skipped}),t.jsx("p",{className:"text-xs font-bold text-slate-700",children:" "})]})]}),A.errors.length>0&&t.jsxs("div",{className:"bg-red-50 rounded-xl p-4",children:[t.jsxs("p",{className:"font-bold text-red-700 mb-2 flex items-center gap-2",children:[t.jsx(Ks,{size:16})," (",A.errors.length,")"]}),t.jsx("ul",{className:"text-sm text-red-600 space-y-1 max-h-32 overflow-y-auto",children:A.errors.slice(0,10).map((Re,ft)=>t.jsxs("li",{children:[" ",Re]},ft))})]}),t.jsx("button",{onClick:()=>E(!1),className:"w-full py-3 bg-[#0B1B3A] hover:bg-[#1a2e56] text-white rounded-xl font-bold transition-colors",children:""})]})]})}),L&&t.jsx(ds,{isOpen:L,onClose:()=>B(!1),title:I?" ":"  ",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  *"}),t.jsx("input",{type:"text",value:z.partNumber||"",onChange:Re=>k(ft=>({...ft,partNumber:Re.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:": ABC-123"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),t.jsx("input",{type:"text",value:z.brand||"",onChange:Re=>k(ft=>({...ft,brand:Re.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:": Changan"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  *"}),t.jsx("input",{type:"text",value:z.name||"",onChange:Re=>k(ft=>({...ft,name:Re.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:" "})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"number",value:z.priceWholesale||z.price||"",onChange:Re=>k(ft=>({...ft,priceWholesale:parseFloat(Re.target.value)||0,price:parseFloat(Re.target.value)||0})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"number",value:z.priceRetail||"",onChange:Re=>k(ft=>({...ft,priceRetail:parseFloat(Re.target.value)||null})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:"0"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"number",value:z.qtyTotal??z.stock??"",onChange:Re=>k(ft=>({...ft,qtyTotal:parseInt(Re.target.value)||0,stock:parseInt(Re.target.value)||0})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),t.jsx("input",{type:"text",value:z.carName||"",onChange:Re=>k(ft=>({...ft,carName:Re.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:" "})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),t.jsx("textarea",{value:z.description||"",onChange:Re=>k(ft=>({...ft,description:Re.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent resize-none",rows:3,placeholder:" ..."})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:()=>B(!1),className:"flex-1 py-3 border border-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:""}),t.jsx("button",{onClick:pt,className:"flex-1 py-3 bg-[#0B1B3A] hover:bg-[#1a2e56] text-white rounded-xl font-bold transition-colors",children:I?" ":" "})]})]})}),F&&t.jsx(ds,{isOpen:F,onClose:()=>{P(!1),K("list")},maxWidth:"max-w-4xl",children:t.jsx("div",{className:"flex flex-col h-full",children:X==="list"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100 flex-shrink-0",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(aa,{className:"text-blue-600",size:24}),"  "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"    Excel "})]}),t.jsxs("button",{onClick:fe,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-sm transition-colors shadow-sm","data-testid":"button-add-preset",children:[t.jsx(kt,{size:18}),"  "]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto py-4 min-h-[200px] max-h-[50vh]",children:G.length===0?t.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[t.jsx(yn,{size:56,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-600 font-bold text-lg",children:"   "}),t.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"      "}),t.jsxs("button",{onClick:fe,className:"mt-4 px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-sm transition-colors",children:[t.jsx(kt,{size:16,className:"inline ml-2"}),"  "]})]}):t.jsx("div",{className:"space-y-3",children:G.map(Re=>t.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border transition-all ${Re.isDefault?"border-blue-300 bg-gradient-to-l from-blue-50 to-white shadow-sm":"border-slate-200 bg-white hover:border-slate-300 hover:shadow-sm"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[Re.isDefault?t.jsx("span",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:t.jsx(bn,{size:20})}):t.jsx("span",{className:"p-2 bg-slate-100 text-slate-400 rounded-lg",children:t.jsx(yn,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800 text-base",children:Re.name}),t.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[t.jsxs("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded",children:[Re.mappings.filter(ft=>ft.isEnabled).length,"  "]}),Re.mappings.filter(ft=>!Lx.find(Xt=>Xt.key===ft.internalField)).length>0&&t.jsxs("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded",children:["+",Re.mappings.filter(ft=>!Lx.find(Xt=>Xt.key===ft.internalField)).length,"  "]}),Re.isDefault&&t.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded font-bold",children:""})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[!Re.isDefault&&t.jsx("button",{onClick:()=>Ee(Re.id),className:"p-2.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:t.jsx(Ere,{size:18})}),t.jsx("button",{onClick:()=>ie(Re),className:"p-2.5 text-slate-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"","data-testid":`button-edit-preset-${Re.id}`,children:t.jsx(Ma,{size:18})}),t.jsx("button",{onClick:()=>pe(Re.id),className:"p-2.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:t.jsx(At,{size:18})})]})]},Re.id))})}),t.jsx("div",{className:"pt-4 border-t border-slate-100 flex-shrink-0",children:t.jsx("button",{onClick:()=>P(!1),className:"w-full py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-colors",children:""})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"pb-4 border-b border-slate-100 flex-shrink-0",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:X==="create"?t.jsxs(t.Fragment,{children:[t.jsx(kt,{className:"text-green-600",size:24}),"  "]}):t.jsxs(t.Fragment,{children:[t.jsx(Ma,{className:"text-amber-600",size:24}),": ",W==null?void 0:W.name]})})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  *"}),t.jsx("input",{type:"text",value:H.name,onChange:Re=>M({...H,name:Re.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:": Onyx Export Format","data-testid":"input-preset-name"})]})]}),t.jsx("div",{className:"py-3 border-b border-slate-200 flex-shrink-0 bg-slate-50 -mx-6 px-6 mt-4",children:t.jsxs("div",{className:"grid grid-cols-12 gap-3 text-xs font-bold text-slate-600",children:[t.jsx("div",{className:"col-span-1 text-center",children:""}),t.jsx("div",{className:"col-span-3",children:" "}),t.jsx("div",{className:"col-span-3",children:"   Excel"}),t.jsx("div",{className:"col-span-3",children:" "}),t.jsx("div",{className:"col-span-2 text-center",children:""})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto py-2 min-h-[200px] max-h-[40vh]",children:[t.jsx("div",{className:"space-y-2",children:H.mappings.map((Re,ft)=>{const Xt=Lx.find(we=>we.key===Re.internalField),As=!Xt;return t.jsxs("div",{className:`grid grid-cols-12 gap-3 items-center p-3 rounded-lg transition-colors ${As?"bg-green-50 border border-green-200":Re.isRequired?"bg-blue-50 border border-blue-100":"hover:bg-slate-50 border border-transparent"}`,children:[t.jsx("div",{className:"col-span-1 text-center",children:t.jsx("input",{type:"checkbox",checked:Re.isEnabled,onChange:we=>Ie(ft,"isEnabled",we.target.checked),disabled:Re.isRequired,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 cursor-pointer disabled:cursor-not-allowed"})}),t.jsx("div",{className:"col-span-3",children:As?t.jsx("input",{type:"text",value:Re.internalField,onChange:we=>Ie(ft,"internalField",we.target.value),className:"w-full px-3 py-2 border border-green-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white",placeholder:" "}):t.jsxs("span",{className:`text-sm flex items-center gap-1 ${Re.isRequired?"font-bold text-slate-800":"text-slate-600"}`,children:[(Xt==null?void 0:Xt.label)||Re.internalField,Re.isRequired&&t.jsx("span",{className:"text-red-500 text-xs",children:"()"})]})}),t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",value:Re.excelHeader,onChange:we=>Ie(ft,"excelHeader",we.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"   Excel"})}),t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",value:Re.defaultValue||"",onChange:we=>Ie(ft,"defaultValue",we.target.value||void 0),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"  ()"})}),t.jsxs("div",{className:"col-span-2 flex items-center justify-center gap-1",children:[As&&t.jsx("button",{onClick:()=>Ge(ft),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:" ","data-testid":`button-remove-column-${ft}`,children:t.jsx(At,{size:16})}),!As&&Re.isRequired&&t.jsx("span",{className:"text-xs text-blue-500 bg-blue-100 px-2 py-1 rounded",children:""})]})]},`${Re.internalField}-${ft}`)})}),t.jsxs("button",{onClick:_e,className:"w-full mt-4 py-3 border-2 border-dashed border-green-300 text-green-600 rounded-xl font-bold hover:bg-green-50 hover:border-green-400 transition-colors flex items-center justify-center gap-2","data-testid":"button-add-column",children:[t.jsx(kt,{size:20}),"   ()"]})]}),t.jsx("div",{className:"pt-4 border-t border-slate-100 flex-shrink-0",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>K("list"),className:"flex-1 py-3 border border-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:""}),t.jsxs("button",{onClick:ne,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold transition-colors flex items-center justify-center gap-2 shadow-sm","data-testid":"button-save-preset",children:[t.jsx(us,{size:18})," "]})]})})]})})})]})},c0e=({onRefresh:e})=>{const{t:s}=Kt(),[a,r]=C.useState("users");return t.jsxs("div",{className:"p-6 lg:p-8",children:[t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(Wt,{className:"text-[#C8A04F]",size:28}),s("adminUsers.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:s("adminUsers.subtitle","     ")})]})}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"border-b border-slate-200",children:t.jsxs("div",{className:"flex",children:[t.jsxs("button",{onClick:()=>r("users"),className:`flex items-center gap-2 px-6 py-4 font-bold transition-colors ${a==="users"?"text-[#0B1B3A] border-b-2 border-[#C8A04F] bg-slate-50":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,"data-testid":"tab-users",children:[t.jsx(Wt,{size:20}),s("adminUsers.tabs.users","")]}),t.jsxs("button",{onClick:()=>r("roles"),className:`flex items-center gap-2 px-6 py-4 font-bold transition-colors ${a==="roles"?"text-[#0B1B3A] border-b-2 border-[#C8A04F] bg-slate-50":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,"data-testid":"tab-roles",children:[t.jsx(Bs,{size:20}),s("adminUsers.tabs.roles"," ")]})]})}),a==="users"?t.jsx(d0e,{onRefresh:e}):t.jsx(u0e,{onRefresh:e})]})]})},d0e=({onRefresh:e})=>{const{t:s}=Kt(),[a,r]=C.useState([]),[n,i]=C.useState([]),[l,o]=C.useState(!0),[d,u]=C.useState(""),{hasPermission:h}=p0(),f=h("users","create"),x=h("users","edit"),p=h("users","delete"),v=h("users","approve")||h("users","edit"),[b,y]=C.useState("ALL"),[j,w]=C.useState("ALL"),[S,O]=C.useState("ALL"),[_,E]=C.useState("ALL"),[A,D]=C.useState(null),[L,B]=C.useState(!1),[I,T]=C.useState(!1),[z,k]=C.useState(!1),[F,P]=C.useState(!1),[G,Y]=C.useState(!1),[W,ee]=C.useState(null),[H,M]=C.useState({fullName:"",username:"",phone:"",email:"",password:"",roleId:"",isActive:!0}),[X,K]=C.useState(""),[Q,se]=C.useState(""),[V,te]=C.useState(!1),{addToast:Z}=It();C.useEffect(()=>{ue()},[]);const ue=async()=>{o(!0);try{const[ve,Ve]=await Promise.all([he.getAdminUsers(),he.getRoles()]);r(ve),i(Ve),Ve.length>0&&!H.roleId&&M(ot=>({...ot,roleId:Ve[0].id}))}catch(ve){console.error("Failed to load data",ve),Z(s("adminUsers.toast.loadError","   "),"error")}finally{o(!1)}},re=ve=>{const Ve=n.find(ot=>ot.id===ve);return(Ve==null?void 0:Ve.name)||s("common.unassigned"," ")},J=a.filter(ve=>{const Ve=ve.fullName.toLowerCase().includes(d.toLowerCase())||ve.username.toLowerCase().includes(d.toLowerCase())||ve.phone.includes(d)||ve.whatsapp&&ve.whatsapp.includes(d)||ve.clientCode&&ve.clientCode.toLowerCase().includes(d.toLowerCase()),ot=b==="ALL"||ve.roleId===b,le=j==="ALL"||j==="ACTIVE"&&ve.isActive||j==="INACTIVE"&&!ve.isActive,Ke=S==="ALL"||ve.extendedRole===S,nt=_==="ALL"||ve.accountStatus===_;return Ve&&ot&&le&&Ke&&nt}),Ne=()=>{M({fullName:"",username:"",phone:"",email:"",password:"",roleId:n.length>0?n[0].id:"",isActive:!0}),se("")},q=()=>{Ne(),B(!0)},ce=ve=>{ee(ve),M({fullName:ve.fullName,username:ve.username,phone:ve.phone,email:ve.email||"",password:"",roleId:ve.roleId,isActive:ve.isActive}),se(""),T(!0)},fe=ve=>{ee(ve),k(!0)},ie=ve=>{ee(ve),K(""),se(""),P(!0)},ne=(ve=!1)=>H.fullName.trim()?H.username.trim()?/^[a-zA-Z0-9_]+$/.test(H.username)?H.phone.trim()?H.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H.email)?(se("   "),!1):!ve&&!H.password.trim()?(se("  "),!1):H.roleId?!0:(se(" "),!1):(se("  "),!1):(se("         "),!1):(se("  "),!1):(se("  "),!1),pe=async()=>{if(ne(!1)){te(!0);try{await he.createAdminUser({fullName:H.fullName,username:H.username,phone:H.phone,email:H.email||void 0,password:H.password,roleId:H.roleId,isActive:H.isActive}),Z("   ","success"),B(!1),ue(),e==null||e()}catch(ve){se(ve.message||"   ")}finally{te(!1)}}},Ee=async()=>{if(!(!W||!ne(!0))){te(!0);try{await he.updateAdminUser(W.id,{fullName:H.fullName,phone:H.phone,email:H.email||void 0,roleId:H.roleId,isActive:H.isActive}),Z("    ","success"),T(!1),ue(),e==null||e()}catch(ve){se(ve.message||"   ")}finally{te(!1)}}},Ie=async()=>{if(W){te(!0);try{await he.toggleAdminUserStatus(W.id);const ve=W.isActive?"":"";Z(` ${ve}  `,"success"),Y(!1),ee(null),ue(),e==null||e()}catch(ve){Z(ve.message||"    ","error")}finally{te(!1)}}},_e=async()=>{if(W){if(!X.trim()){se("   ");return}te(!0);try{await he.resetAdminUserPassword(W.id,X),Z("     ","success"),P(!1),ee(null),K("")}catch(ve){se(ve.message||"     ")}finally{te(!1)}}},Ge=async()=>{if(W){te(!0);try{await he.deleteAdminUser(W.id),Z("   ","success"),k(!1),ee(null),ue(),e==null||e()}catch(ve){Z(ve.message||"   ","error")}finally{te(!1)}}},Ae=()=>{const ve=[" "," "," "," ","","","  "],Ve=a.map(pt=>[pt.fullName,pt.username,pt.phone,pt.email||"-",re(pt.roleId),pt.isActive?"":"",pt.lastLoginAt?ms(pt.lastLoginAt):"-"]),ot=[ve.join(","),...Ve.map(pt=>pt.join(","))].join(`
`),le=new Blob(["\uFEFF"+ot],{type:"text/csv;charset=utf-8;"}),Ke=URL.createObjectURL(le),nt=document.createElement("a");nt.href=Ke,nt.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,nt.click(),URL.revokeObjectURL(Ke),Z("   ","success")},Ue=ve=>{const Ve=n.find(Ke=>Ke.id===ve),ot=(Ve==null?void 0:Ve.name)||" ",le={" ":"bg-purple-100 text-purple-800 border-purple-200"," ":"bg-blue-100 text-blue-800 border-blue-200"," ":"bg-emerald-100 text-emerald-800 border-emerald-200"," ":"bg-amber-100 text-amber-800 border-amber-200"," ":"bg-slate-100 text-slate-800 border-slate-200"};return t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${le[ot]||"bg-slate-100 text-slate-800 border-slate-200"}`,children:ot})},Qe=ve=>ve?t.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800 border border-green-200 flex items-center gap-1",children:[t.jsx(es,{size:12})," "]}):t.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-bold bg-red-100 text-red-800 border border-red-200 flex items-center gap-1",children:[t.jsx(vt,{size:12})," "]}),_t=ve=>{const Ve={ADMIN:{label:"",color:"bg-purple-100 text-purple-800 border-purple-200"},EMPLOYEE:{label:"",color:"bg-blue-100 text-blue-800 border-blue-200"},CUSTOMER:{label:"",color:"bg-emerald-100 text-emerald-800 border-emerald-200"},SUPPLIER_LOCAL:{label:" ",color:"bg-amber-100 text-amber-800 border-amber-200"},SUPPLIER_INTERNATIONAL:{label:" ",color:"bg-orange-100 text-orange-800 border-orange-200"},MARKETER:{label:"",color:"bg-pink-100 text-pink-800 border-pink-200"}};if(!ve)return t.jsx("span",{className:"text-slate-400 text-xs",children:""});const ot=Ve[ve]||{label:ve,color:"bg-slate-100 text-slate-800 border-slate-200"};return t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${ot.color}`,children:ot.label})},lt=ve=>{const Ve={PENDING:{label:" ",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:t.jsx(is,{size:12})},APPROVED:{label:"",color:"bg-green-100 text-green-800 border-green-200",icon:t.jsx(Mt,{size:12})},REJECTED:{label:"",color:"bg-red-100 text-red-800 border-red-200",icon:t.jsx(sa,{size:12})},BLOCKED:{label:"",color:"bg-slate-100 text-slate-800 border-slate-200",icon:t.jsx($p,{size:12})}};if(!ve)return t.jsx("span",{className:"text-slate-400 text-xs",children:""});const ot=Ve[ve]||{label:ve,color:"bg-slate-100 text-slate-800 border-slate-200",icon:null};return t.jsxs("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border flex items-center gap-1 ${ot.color}`,children:[ot.icon," ",ot.label]})},Nt=ve=>{const Ve=ve??0,ot=Ve>=80?"bg-green-500":Ve>=50?"bg-yellow-500":"bg-red-500";return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-16 h-2 bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${ot}`,style:{width:`${Ve}%`}})}),t.jsxs("span",{className:"text-xs text-slate-600",children:[Ve,"%"]})]})},jt=async ve=>{D(ve);try{const Ve=await mockApi.approveAdminUser(ve);Ve&&(r(ot=>ot.map(le=>le.id===ve?Ve:le)),Z("   ","success"))}catch(Ve){Z(Ve.message||"   ","error")}finally{D(null)}},Ft=async ve=>{D(ve);try{const Ve=await mockApi.rejectAdminUser(ve);Ve&&(r(ot=>ot.map(le=>le.id===ve?Ve:le)),Z("  ","success"))}catch(Ve){Z(Ve.message||"   ","error")}finally{D(null)}},Ce=async ve=>{D(ve);try{const Ve=await mockApi.blockAdminUser(ve);Ve&&(r(ot=>ot.map(le=>le.id===ve?Ve:le)),Z("  ","success"))}catch(Ve){Z(Ve.message||"   ","error")}finally{D(null)}};return l?t.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-slate-500",children:"  ..."})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 flex-1",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(Lt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:"      ...",value:d,onChange:ve=>u(ve.target.value),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent","data-testid":"input-search-users"})]}),t.jsxs("select",{value:b,onChange:ve=>y(ve.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-role-filter",children:[t.jsx("option",{value:"ALL",children:" "}),n.map(ve=>t.jsx("option",{value:ve.id,children:ve.name},ve.id))]}),t.jsxs("select",{value:j,onChange:ve=>w(ve.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"ACTIVE",children:""}),t.jsx("option",{value:"INACTIVE",children:""})]}),t.jsxs("select",{value:S,onChange:ve=>O(ve.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-extended-role-filter",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"ADMIN",children:""}),t.jsx("option",{value:"EMPLOYEE",children:""}),t.jsx("option",{value:"CUSTOMER",children:""}),t.jsx("option",{value:"SUPPLIER_LOCAL",children:" "}),t.jsx("option",{value:"SUPPLIER_INTERNATIONAL",children:" "}),t.jsx("option",{value:"MARKETER",children:""})]}),t.jsxs("select",{value:_,onChange:ve=>E(ve.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-account-status-filter",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"PENDING",children:" "}),t.jsx("option",{value:"APPROVED",children:""}),t.jsx("option",{value:"REJECTED",children:""}),t.jsx("option",{value:"BLOCKED",children:""})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-export-users",children:[t.jsx(tr,{size:18}),""]}),f?t.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-add-user",children:[t.jsx(kt,{size:18})," "]}):t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-400 rounded-xl font-bold cursor-not-allowed",children:[t.jsx(Sa,{size:18}),"  "]})]})]}),a.length===0?t.jsxs("div",{className:"py-16 text-center text-slate-400",children:[t.jsx(Wt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:"    "}),t.jsx("p",{className:"text-sm mt-2",children:"   "})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50 text-slate-600 text-sm",children:[t.jsx("th",{className:"text-right py-4 px-4 font-bold",children:" "}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:""}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:""}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:""}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:J.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:9,className:"py-12 text-center text-slate-400",children:"    "})}):J.map(ve=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-user-${ve.id}`,children:[t.jsx("td",{className:"py-4 px-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-[#0B1B3A] flex items-center justify-center text-white font-bold",children:ve.fullName.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:ve.fullName}),t.jsx("p",{className:"text-xs text-slate-500",children:ve.username}),ve.email&&t.jsxs("p",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsx(Fl,{size:10})," ",ve.email]})]})]})}),t.jsx("td",{className:"py-4 px-3",children:ve.clientCode?t.jsx("span",{className:"font-mono text-sm bg-blue-50 text-blue-700 px-2 py-1 rounded",children:ve.clientCode}):t.jsx("span",{className:"text-slate-400 text-xs",children:""})}),t.jsx("td",{className:"py-4 px-3",children:ve.whatsapp?t.jsxs("span",{className:"flex items-center gap-1 text-slate-600 text-sm",children:[t.jsx(ku,{size:14,className:"text-green-500"})," ",ve.whatsapp]}):t.jsxs("span",{className:"flex items-center gap-1 text-slate-500 text-sm",children:[t.jsx(Yr,{size:14,className:"text-slate-400"})," ",ve.phone]})}),t.jsx("td",{className:"py-4 px-3",children:_t(ve.extendedRole)}),t.jsx("td",{className:"py-4 px-3 text-center",children:lt(ve.accountStatus)}),t.jsx("td",{className:"py-4 px-3",children:Nt(ve.completionPercent)}),t.jsx("td",{className:"py-4 px-3",children:Ue(ve.roleId)}),t.jsx("td",{className:"py-4 px-3 text-center",children:Qe(ve.isActive)}),t.jsx("td",{className:"py-4 px-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-1 flex-wrap",children:[v&&ve.accountStatus==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>jt(ve.id),disabled:A===ve.id,className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:"","data-testid":`button-approve-user-${ve.id}`,children:t.jsx(Mt,{size:16})}),t.jsx("button",{onClick:()=>Ft(ve.id),disabled:A===ve.id,className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"","data-testid":`button-reject-user-${ve.id}`,children:t.jsx(sa,{size:16})})]}),v&&ve.accountStatus!=="BLOCKED"&&ve.accountStatus!=="PENDING"&&t.jsx("button",{onClick:()=>Ce(ve.id),disabled:A===ve.id,className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",title:"","data-testid":`button-block-user-${ve.id}`,children:t.jsx($p,{size:16})}),x&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>ce(ve),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"","data-testid":`button-edit-user-${ve.id}`,children:t.jsx(Ma,{size:16})}),t.jsx("button",{onClick:()=>ie(ve),className:"p-1.5 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"   ","data-testid":`button-reset-password-${ve.id}`,children:t.jsx(Gc,{size:16})})]}),p&&t.jsx("button",{onClick:()=>fe(ve),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"","data-testid":`button-delete-user-${ve.id}`,children:t.jsx(At,{size:16})})]})})]},ve.id))})]})}),t.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",t.jsx("span",{className:"font-bold text-slate-700",children:a.length}),J.length!==a.length&&t.jsxs("span",{className:"mr-2",children:["  : ",t.jsx("span",{className:"font-bold text-slate-700",children:J.length})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:[": ",a.filter(ve=>ve.isActive).length]}),t.jsxs("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded",children:[": ",a.filter(ve=>!ve.isActive).length]})]})]}),L&&t.jsx(ds,{isOpen:L,onClose:()=>B(!1),children:t.jsxs("div",{className:"p-6 max-w-lg w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(kt,{className:"text-[#C8A04F]",size:24}),"  "]}),Q&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Ks,{size:18})," ",Q]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:H.fullName,onChange:ve=>M({...H,fullName:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"  ","data-testid":"input-user-fullname"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"tel",value:H.phone,onChange:ve=>M({...H,phone:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"05xxxxxxxx",dir:"ltr","data-testid":"input-user-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("input",{type:"email",value:H.email,onChange:ve=>M({...H,email:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com",dir:"ltr","data-testid":"input-user-email"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:H.username,onChange:ve=>M({...H,username:ve.target.value.toLowerCase()}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"username",dir:"ltr","data-testid":"input-user-username"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"password",value:H.password,onChange:ve=>M({...H,password:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"  ",dir:"ltr","data-testid":"input-user-password"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("select",{value:H.roleId,onChange:ve=>M({...H,roleId:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-user-role",children:n.map(ve=>t.jsx("option",{value:ve.id,children:ve.name},ve.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:H.isActive?"active":"inactive",onChange:ve=>M({...H,isActive:ve.target.value==="active"}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-user-status",children:[t.jsx("option",{value:"active",children:""}),t.jsx("option",{value:"inactive",children:""})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>B(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-add",children:""}),t.jsx("button",{onClick:pe,disabled:V,className:"flex-1 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors disabled:opacity-50","data-testid":"button-confirm-add",children:V?" ...":" "})]})]})}),I&&W&&t.jsx(ds,{isOpen:I,onClose:()=>T(!1),children:t.jsxs("div",{className:"p-6 max-w-lg w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Ma,{className:"text-[#C8A04F]",size:24}),"  "]}),Q&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Ks,{size:18})," ",Q]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:H.fullName,onChange:ve=>M({...H,fullName:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"input-edit-user-fullname"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"tel",value:H.phone,onChange:ve=>M({...H,phone:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",dir:"ltr","data-testid":"input-edit-user-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("input",{type:"email",value:H.email,onChange:ve=>M({...H,email:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",dir:"ltr","data-testid":"input-edit-user-email"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("select",{value:H.roleId,onChange:ve=>M({...H,roleId:ve.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-edit-user-role",children:n.map(ve=>t.jsx("option",{value:ve.id,children:ve.name},ve.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:H.isActive?"active":"inactive",onChange:ve=>M({...H,isActive:ve.target.value==="active"}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-edit-user-status",children:[t.jsx("option",{value:"active",children:""}),t.jsx("option",{value:"inactive",children:""})]})]})]}),t.jsx("div",{className:"pt-2",children:t.jsxs("button",{onClick:()=>{T(!1),ie(W)},className:"flex items-center gap-2 text-purple-600 hover:text-purple-800 font-bold text-sm","data-testid":"button-reset-password-in-edit",children:[t.jsx(Gc,{size:16}),"   "]})})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-edit",children:""}),t.jsx("button",{onClick:Ee,disabled:V,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-edit",children:V?" ...":" "})]})]})}),F&&W&&t.jsx(ds,{isOpen:F,onClose:()=>P(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Gc,{className:"text-purple-600",size:24}),"   "]}),t.jsxs("p",{className:"text-slate-600 mb-4",children:["    : ",t.jsx("span",{className:"font-bold",children:W.fullName})]}),Q&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Ks,{size:18})," ",Q]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"   *"}),t.jsx("input",{type:"password",value:X,onChange:ve=>K(ve.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500",placeholder:"   ",dir:"ltr","data-testid":"input-new-password"})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-reset-password",children:""}),t.jsx("button",{onClick:_e,disabled:V,className:"flex-1 px-4 py-2.5 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-reset-password",children:V?" ...":"  "})]})]})}),G&&W&&t.jsx(ds,{isOpen:G,onClose:()=>Y(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full text-center",children:[t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${W.isActive?"bg-amber-100":"bg-green-100"}`,children:W.isActive?t.jsx(yu,{className:"text-amber-600",size:32}):t.jsx(x0,{className:"text-green-600",size:32})}),t.jsx("h2",{className:"text-xl font-black text-slate-800 mb-2",children:W.isActive?" ":" "}),t.jsxs("p",{className:"text-slate-600 mb-6",children:["     ",t.jsx("br",{}),t.jsx("span",{className:"font-bold text-slate-800",children:W.fullName})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>Y(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-toggle",children:""}),t.jsx("button",{onClick:Ie,disabled:V,className:`flex-1 px-4 py-2.5 text-white rounded-xl font-bold transition-colors disabled:opacity-50 ${W.isActive?"bg-amber-600 hover:bg-amber-700":"bg-green-600 hover:bg-green-700"}`,"data-testid":"button-confirm-toggle",children:V?" ...":W.isActive?"":""})]})]})}),z&&W&&t.jsx(ds,{isOpen:z,onClose:()=>k(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(At,{className:"text-red-600",size:32})}),t.jsx("h2",{className:"text-xl font-black text-slate-800 mb-2",children:" "}),t.jsxs("p",{className:"text-slate-600 mb-6",children:["       ",t.jsx("br",{}),t.jsx("span",{className:"font-bold text-slate-800",children:W.fullName}),t.jsx("br",{}),t.jsx("span",{className:"text-sm text-red-600",children:"     "})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-delete",children:""}),t.jsx("button",{onClick:Ge,disabled:V,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-delete",children:V?" ...":" "})]})]})})]})},u0e=({onRefresh:e})=>{const[s,a]=C.useState([]),[r,n]=C.useState({}),[i,l]=C.useState(!0),[o,d]=C.useState(null),[u,h]=C.useState(!1),[f,x]=C.useState(!1),[p,v]=C.useState(!1),[b,y]=C.useState(!1),[j,w]=C.useState({name:"",description:""}),[S,O]=C.useState([]),[_,E]=C.useState(""),[A,D]=C.useState(!1),{addToast:L}=It(),{hasPermission:B}=p0(),I=B("roles","create"),T=B("roles","edit"),z=B("roles","delete");C.useEffect(()=>{k()},[]);const k=async()=>{l(!0);try{const V=await he.getRoles();a(V);const te={};for(const Z of V)te[Z.id]=await he.getUserCountByRole(Z.id);n(te)}catch(V){console.error("Failed to load roles",V),L("   ","error")}finally{l(!1)}},F=()=>{w({name:"",description:""}),E("")},P=()=>{F(),h(!0)},G=V=>{d(V),w({name:V.name,description:V.description||""}),E(""),x(!0)},Y=V=>{d(V),O(JSON.parse(JSON.stringify(V.permissions))),y(!0)},W=V=>{d(V),v(!0)},ee=async()=>{if(!j.name.trim()){E("  ");return}D(!0);try{await he.createRole({name:j.name,description:j.description||void 0,permissions:[],isSystem:!1}),L("   ","success"),h(!1),k(),e==null||e()}catch(V){E(V.message||"   ")}finally{D(!1)}},H=async()=>{if(o){if(!j.name.trim()){E("  ");return}D(!0);try{await he.updateRole(o.id,{name:j.name,description:j.description||void 0}),L("   ","success"),x(!1),k(),e==null||e()}catch(V){E(V.message||"   ")}finally{D(!1)}}},M=async()=>{if(o){D(!0);try{await he.updateRole(o.id,{permissions:S}),L("   ","success"),y(!1),k(),e==null||e()}catch(V){L(V.message||"   ","error")}finally{D(!1)}}},X=async()=>{if(o){D(!0);try{await he.deleteRole(o.id),L("   ","success"),v(!1),d(null),k(),e==null||e()}catch(V){L(V.message||"   ","error")}finally{D(!1)}}},K=(V,te)=>{O(Z=>{const ue=Z.find(re=>re.resource===V);if(ue)if(ue.actions.includes(te)){const re=ue.actions.filter(J=>J!==te);return re.length===0?Z.filter(J=>J.resource!==V):Z.map(J=>J.resource===V?{...J,actions:re}:J)}else return Z.map(re=>re.resource===V?{...re,actions:[...re.actions,te]}:re);else return[...Z,{resource:V,actions:[te]}]})},Q=(V,te)=>{const Z=S.find(ue=>ue.resource===V);return(Z==null?void 0:Z.actions.includes(te))||!1},se=V=>{const te=R4[V],Z=S.find(re=>re.resource===V),ue=(Z==null?void 0:Z.actions.length)===te.length;O(re=>ue?re.filter(J=>J.resource!==V):[...re.filter(Ne=>Ne.resource!==V),{resource:V,actions:[...te]}])};return i?t.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-slate-500",children:"  ..."})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsx("p",{className:"text-slate-600",children:"     "}),I?t.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-add-role",children:[t.jsx(kt,{size:18}),"  "]}):t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-400 rounded-xl font-bold cursor-not-allowed",children:[t.jsx(Sa,{size:18}),"  "]})]}),s.length===0?t.jsxs("div",{className:"py-16 text-center text-slate-400",children:[t.jsx(Bs,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:"    "}),t.jsx("p",{className:"text-sm mt-2",children:"   "})]}):t.jsx("div",{className:"divide-y divide-slate-100",children:s.map(V=>t.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors","data-testid":`row-role-${V.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:V.name}),V.isSystem&&t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-bold rounded-full",children:" "}),t.jsxs("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-xs font-bold rounded-full",children:[r[V.id]||0," "]})]}),V.description&&t.jsx("p",{className:"text-sm text-slate-500",children:V.description}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[V.permissions.slice(0,5).map(te=>t.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded",children:Zy[te.resource]},te.resource)),V.permissions.length>5&&t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:["+",V.permissions.length-5," "]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[T?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>Y(V),className:"flex items-center gap-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-bold text-sm","data-testid":`button-permissions-role-${V.id}`,children:[t.jsx(aa,{size:16}),""]}),t.jsx("button",{onClick:()=>G(V),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"","data-testid":`button-edit-role-${V.id}`,children:t.jsx(Ma,{size:18})})]}):t.jsx("span",{className:"p-2 text-slate-300",title:"  ",children:t.jsx(Sa,{size:18})}),!V.isSystem&&z&&t.jsx("button",{onClick:()=>W(V),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"","data-testid":`button-delete-role-${V.id}`,children:t.jsx(At,{size:18})}),!V.isSystem&&!z&&t.jsx("span",{className:"p-2 text-slate-300",title:"  ",children:t.jsx(At,{size:18})})]})]})},V.id))}),t.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50",children:t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",t.jsx("span",{className:"font-bold text-slate-700",children:s.length}),t.jsxs("span",{className:"mr-2",children:["  : ",t.jsx("span",{className:"font-bold text-slate-700",children:s.filter(V=>V.isSystem).length})]})]})}),u&&t.jsx(ds,{isOpen:u,onClose:()=>h(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(kt,{className:"text-[#C8A04F]",size:24}),"  "]}),_&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Ks,{size:18})," ",_]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:j.name,onChange:V=>w({...j,name:V.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"   ","data-testid":"input-role-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("textarea",{value:j.description,onChange:V=>w({...j,description:V.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"   ",rows:3,"data-testid":"input-role-description"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-add-role",children:""}),t.jsx("button",{onClick:ee,disabled:A,className:"flex-1 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors disabled:opacity-50","data-testid":"button-confirm-add-role",children:A?" ...":" "})]})]})}),f&&o&&t.jsx(ds,{isOpen:f,onClose:()=>x(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Ma,{className:"text-[#C8A04F]",size:24})," "]}),_&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Ks,{size:18})," ",_]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:j.name,onChange:V=>w({...j,name:V.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"input-edit-role-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("textarea",{value:j.description,onChange:V=>w({...j,description:V.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 resize-none",rows:3,"data-testid":"input-edit-role-description"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-edit-role",children:""}),t.jsx("button",{onClick:H,disabled:A,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-edit-role",children:A?" ...":" "})]})]})}),b&&o&&t.jsx(ds,{isOpen:b,onClose:()=>y(!1),children:t.jsxs("div",{className:"p-6 max-w-4xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[t.jsx(Bs,{className:"text-[#C8A04F]",size:24}),": ",o.name]}),o.isSystem&&t.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm font-bold rounded-full",children:" "})]}),t.jsx("div",{className:"flex-1 overflow-auto border border-slate-200 rounded-xl",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-right py-3 px-4 font-bold text-slate-600 border-b",children:""}),["view","create","edit","delete","approve","reject","export"].map(V=>t.jsx("th",{className:"text-center py-3 px-2 font-bold text-slate-600 border-b text-xs",children:I4[V]},V)),t.jsx("th",{className:"text-center py-3 px-2 font-bold text-slate-600 border-b text-xs",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:Object.keys(Zy).map(V=>{const te=R4[V],Z=S.find(re=>re.resource===V),ue=(Z==null?void 0:Z.actions.length)===te.length;return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:ue,onChange:()=>se(V),className:"w-4 h-4 rounded border-slate-300","data-testid":`checkbox-all-${V}`}),t.jsx("span",{className:"font-medium text-slate-700",children:Zy[V]})]})}),["view","create","edit","delete","approve","reject","export"].map(re=>t.jsx("td",{className:"text-center py-3 px-2",children:te.includes(re)?t.jsx("input",{type:"checkbox",checked:Q(V,re),onChange:()=>K(V,re),className:"w-4 h-4 rounded border-slate-300","data-testid":`checkbox-${V}-${re}`}):t.jsx("span",{className:"text-slate-300",children:"-"})},re)),t.jsx("td",{className:"text-center py-3 px-2",children:te.filter(re=>!["view","create","edit","delete","approve","reject","export"].includes(re)).length>0?t.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:te.filter(re=>!["view","create","edit","delete","approve","reject","export"].includes(re)).map(re=>t.jsxs("label",{className:"flex items-center gap-1 text-xs bg-slate-100 px-1.5 py-0.5 rounded cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Q(V,re),onChange:()=>K(V,re),className:"w-3 h-3 rounded border-slate-300"}),I4[re]]},re))}):t.jsx("span",{className:"text-slate-300",children:"-"})})]},V)})})]})}),t.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-permissions",children:""}),t.jsxs("button",{onClick:M,disabled:A,className:"flex-1 px-4 py-2.5 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2","data-testid":"button-save-permissions",children:[t.jsx(us,{size:18}),A?" ...":" "]})]})]})}),p&&o&&t.jsx(ds,{isOpen:p,onClose:()=>v(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(At,{className:"text-red-600",size:32})}),t.jsx("h2",{className:"text-xl font-black text-slate-800 mb-2",children:" "}),t.jsxs("p",{className:"text-slate-600 mb-6",children:["       ",t.jsx("br",{}),t.jsx("span",{className:"font-bold text-slate-800",children:o.name}),t.jsx("br",{}),t.jsx("span",{className:"text-sm text-red-600",children:"     "})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-delete-role",children:""}),t.jsx("button",{onClick:X,disabled:A,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-delete-role",children:A?" ...":" "})]})]})})]})},O5={POPUP:" ",BANNER:" ",BELL:" ",DASHBOARD_CARD:"  "},m0e={TEXT:" ",IMAGE:"",VIDEO:"",HTML:" HTML"},y1={DRAFT:{label:"",color:"text-slate-600",bg:"bg-slate-100"},ACTIVE:{label:"",color:"text-green-600",bg:"bg-green-100"},PAUSED:{label:"",color:"text-amber-600",bg:"bg-amber-100"},EXPIRED:{label:"",color:"text-red-600",bg:"bg-red-100"}},I5={ALL:" ",SPARE_PARTS_SHOP:"  ",RENTAL_COMPANY:" ",MAINTENANCE_CENTER:" ",INSURANCE_COMPANY:" ",SALES_REP:" "},f0e=e=>{switch(e){case"POPUP":return t.jsx(Rr,{size:16});case"BANNER":return t.jsx(Wc,{size:16});case"BELL":return t.jsx(Nr,{size:16});case"DASHBOARD_CARD":return t.jsx(zt,{size:16})}},h0e=({onClose:e})=>{const[s,a]=C.useState([]),[r,n]=C.useState(!0),[i,l]=C.useState(!1),[o,d]=C.useState(null),[u,h]=C.useState(null),{addToast:f}=It(),[x,p]=C.useState({title:"",message:"",displayType:"POPUP",skippable:!0,contentType:"TEXT",mediaUrl:"",htmlContent:"",ctaLabel:"",ctaUrl:"",audienceType:"ALL",status:"ACTIVE",priority:1,startsAt:"",expiresAt:""}),[v,b]=C.useState({});C.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const A=await he.getAllCampaigns();a(A.sort((D,L)=>new Date(L.createdAt).getTime()-new Date(D.createdAt).getTime()))}catch{f("    ","error")}finally{n(!1)}},j=()=>{p({title:"",message:"",displayType:"POPUP",skippable:!0,contentType:"TEXT",mediaUrl:"",htmlContent:"",ctaLabel:"",ctaUrl:"",audienceType:"ALL",status:"ACTIVE",priority:1,startsAt:"",expiresAt:""}),b({}),d(null)},w=()=>{var D,L,B,I;const A={};if((D=x.title)!=null&&D.trim()?x.title.length>100&&(A.title="   (  100 )"):A.title="  ",(L=x.message)!=null&&L.trim()?x.message.length>500&&(A.message="   (  500 )"):A.message="  ",(x.contentType==="IMAGE"||x.contentType==="VIDEO")&&!((B=x.mediaUrl)!=null&&B.trim())&&(A.mediaUrl="      "),(I=x.ctaUrl)!=null&&I.trim())try{new URL(x.ctaUrl)}catch{A.ctaUrl="   "}if(x.startsAt&&x.expiresAt){const T=new Date(x.startsAt);new Date(x.expiresAt)<=T&&(A.expiresAt="       ")}return(x.priority<1||x.priority>100)&&(A.priority="     1  100"),b(A),Object.keys(A).length===0},S=async()=>{if(w())try{o?(await he.updateCampaign(o.id,x),f("   ","success")):(await he.createCampaign(x),f("   ","success")),l(!1),j(),y()}catch{f("    ","error")}},O=async(A,D)=>{try{await he.updateCampaignStatus(A,D),f(` ${D==="ACTIVE"?"":D==="PAUSED"?"":""} `,"success"),y()}catch{f("     ","error")}},_=async A=>{try{await he.deleteCampaign(A),f("   ","success"),h(null),y()}catch{f("    ","error")}},E=A=>{d(A),p({title:A.title,message:A.message,displayType:A.displayType,skippable:A.skippable,contentType:A.contentType,mediaUrl:A.mediaUrl||"",htmlContent:A.htmlContent||"",ctaLabel:A.ctaLabel||"",ctaUrl:A.ctaUrl||"",audienceType:A.audienceType,status:A.status,priority:A.priority,startsAt:A.startsAt||"",expiresAt:A.expiresAt||""}),l(!0)};return t.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-6 mb-6 text-white",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:t.jsx(ja,{size:28})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:" "}),t.jsx("p",{className:"text-purple-200 text-sm",children:"   "})]})]}),t.jsxs("button",{onClick:()=>{j(),l(!0)},className:"flex items-center gap-2 bg-white text-purple-600 px-5 py-2.5 rounded-xl font-bold hover:bg-purple-50 transition-colors","data-testid":"button-create-campaign",children:[t.jsx(kt,{size:20})," "]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold",children:s.length}),t.jsx("div",{className:"text-purple-200 text-sm",children:" "})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-green-300",children:s.filter(A=>A.status==="ACTIVE").length}),t.jsx("div",{className:"text-purple-200 text-sm",children:" "})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-amber-300",children:s.filter(A=>A.status==="DRAFT").length}),t.jsx("div",{className:"text-purple-200 text-sm",children:""})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-slate-300",children:s.filter(A=>A.status==="PAUSED"||A.status==="EXPIRED").length}),t.jsx("div",{className:"text-purple-200 text-sm",children:"/"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100",children:t.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "})}),r?t.jsxs("div",{className:"p-8 text-center text-slate-500",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-2"})," ..."]}):s.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(ja,{size:48,className:"text-slate-300 mx-auto mb-3"}),t.jsx("p",{className:"text-slate-500",children:"    "}),t.jsx("button",{onClick:()=>{j(),l(!0)},className:"mt-4 text-purple-600 font-bold hover:underline",children:"  "})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 text-right",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:" "}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(A=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-campaign-${A.id}`,children:[t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-slate-800",children:A.title}),t.jsx("div",{className:"text-sm text-slate-500 line-clamp-1",children:A.message})]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"p-1.5 bg-slate-100 rounded",children:f0e(A.displayType)}),t.jsx("span",{className:"text-sm text-slate-600",children:O5[A.displayType]})]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-600",children:[t.jsx(xh,{size:14}),I5[A.audienceType]]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${y1[A.status].bg} ${y1[A.status].color}`,children:[A.status==="ACTIVE"&&t.jsx(rl,{size:12}),y1[A.status].label]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:"text-sm font-mono bg-slate-100 px-2 py-1 rounded",children:A.priority})}),t.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:ms(A.createdAt)}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[A.status==="ACTIVE"?t.jsx("button",{onClick:()=>O(A.id,"PAUSED"),className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"","data-testid":`button-pause-${A.id}`,children:t.jsx(vF,{size:18})}):A.status!=="EXPIRED"?t.jsx("button",{onClick:()=>O(A.id,"ACTIVE"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"","data-testid":`button-activate-${A.id}`,children:t.jsx(Uu,{size:18})}):null,t.jsx("button",{onClick:()=>E(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"","data-testid":`button-edit-${A.id}`,children:t.jsx(Ma,{size:18})}),t.jsx("button",{onClick:()=>h(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"","data-testid":`button-delete-${A.id}`,children:t.jsx(At,{size:18})})]})})]},A.id))})]})})]}),i&&t.jsx(ds,{isOpen:i,onClose:()=>{l(!1),j()},children:t.jsxs("div",{className:"p-6 max-h-[85vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(ja,{className:"text-purple-600"}),o?" ":"  "]}),t.jsx("button",{onClick:()=>{l(!1),j()},className:"p-2 hover:bg-slate-100 rounded-lg",children:t.jsx(vt,{size:20})})]}),t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:x.title,onChange:A=>p({...x,title:A.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${v.title?"border-red-300":"border-slate-200"}`,placeholder:":   ","data-testid":"input-campaign-title"}),v.title&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:x.message,onChange:A=>p({...x,message:A.target.value}),rows:3,className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none ${v.message?"border-red-300":"border-slate-200"}`,placeholder:"    ...","data-testid":"input-campaign-message"}),v.message&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.message})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("select",{value:x.displayType,onChange:A=>p({...x,displayType:A.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-display-type",children:Object.entries(O5).map(([A,D])=>t.jsx("option",{value:A,children:D},A))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("select",{value:x.contentType,onChange:A=>p({...x,contentType:A.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-content-type",children:Object.entries(m0e).map(([A,D])=>t.jsx("option",{value:A,children:D},A))})]})]}),(x.contentType==="IMAGE"||x.contentType==="VIDEO")&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"url",value:x.mediaUrl,onChange:A=>p({...x,mediaUrl:A.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.mediaUrl?"border-red-300":"border-slate-200"}`,placeholder:"https://example.com/image.jpg","data-testid":"input-media-url"}),v.mediaUrl&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.mediaUrl}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:x.contentType==="IMAGE"?"   (jpg, png, gif)":"   (mp4, webm)"})]}),x.contentType==="HTML"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" HTML"}),t.jsx("textarea",{value:x.htmlContent,onChange:A=>p({...x,htmlContent:A.target.value}),rows:4,className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 font-mono text-sm resize-none",placeholder:"<div>...</div>","data-testid":"input-html-content"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl",children:[t.jsx("input",{type:"checkbox",id:"skippable",checked:x.skippable,onChange:A=>p({...x,skippable:A.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-purple-600 focus:ring-purple-500","data-testid":"checkbox-skippable"}),t.jsxs("label",{htmlFor:"skippable",className:"text-sm",children:[t.jsx("span",{className:"font-bold text-slate-700",children:"  "}),t.jsx("p",{className:"text-slate-500 text-xs",children:"   "})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"   ()"}),t.jsx("input",{type:"text",value:x.ctaLabel,onChange:A=>p({...x,ctaLabel:A.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500",placeholder:":  ","data-testid":"input-cta-label"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  ()"}),t.jsx("input",{type:"url",value:x.ctaUrl,onChange:A=>p({...x,ctaUrl:A.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.ctaUrl?"border-red-300":"border-slate-200"}`,placeholder:"https://...","data-testid":"input-cta-url"}),v.ctaUrl&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.ctaUrl})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("select",{value:x.audienceType,onChange:A=>p({...x,audienceType:A.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-audience",children:Object.entries(I5).map(([A,D])=>t.jsx("option",{value:A,children:D},A))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:""}),t.jsx("input",{type:"number",min:"1",max:"100",value:x.priority,onChange:A=>p({...x,priority:parseInt(A.target.value)||1}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.priority?"border-red-300":"border-slate-200"}`,"data-testid":"input-priority"}),v.priority&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.priority})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  ()"}),t.jsx("input",{type:"datetime-local",value:x.startsAt,onChange:A=>p({...x,startsAt:A.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"input-starts-at"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  ()"}),t.jsx("input",{type:"datetime-local",value:x.expiresAt,onChange:A=>p({...x,expiresAt:A.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.expiresAt?"border-red-300":"border-slate-200"}`,"data-testid":"input-expires-at"}),v.expiresAt&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.expiresAt})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:""}),t.jsxs("select",{value:x.status,onChange:A=>p({...x,status:A.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-status",children:[t.jsx("option",{value:"DRAFT",children:""}),t.jsx("option",{value:"ACTIVE",children:""}),t.jsx("option",{value:"PAUSED",children:""})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>{l(!1),j()},className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl font-bold transition-colors",children:""}),t.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-5 py-2.5 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition-colors","data-testid":"button-save-campaign",children:[t.jsx(us,{size:18}),o?" ":" "]})]})]})]})}),u&&t.jsx(ds,{isOpen:!!u,onClose:()=>h(null),children:t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Cs,{size:32,className:"text-red-600"})}),t.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:" "}),t.jsx("p",{className:"text-slate-600 mb-6",children:"            ."}),t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx("button",{onClick:()=>h(null),className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl font-bold transition-colors",children:""}),t.jsxs("button",{onClick:()=>_(u),className:"flex items-center gap-2 px-5 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors","data-testid":"button-confirm-delete",children:[t.jsx(At,{size:18})," "]})]})]})})]})};let jp=null,wp=null,Sp=null,JS=0;const x0e=3e4,ci=()=>{jp=null,wp=null,Sp=null,JS=0},p0e=async()=>{const e=Date.now();if(jp&&wp&&Sp&&e-JS<x0e)return{settings:jp,levels:wp,matrix:Sp};const[s,a,r]=await Promise.all([he.getGlobalPricingSettings(),he.getPriceLevels(),he.getProductPriceMatrix()]);return jp=s,wp=a,Sp=r,JS=e,{settings:s,levels:a,matrix:r}},g0e=(e,s)=>{const{roundingMode:a,roundingDecimals:r}=s,n=Math.pow(10,r);switch(a){case"ROUND":return Math.round(e*n)/n;case"CEIL":return Math.ceil(e*n)/n;case"FLOOR":return Math.floor(e*n)/n;case"NONE":default:return e}},Wp=(e,s,a)=>{const r=a.find(n=>n.productId===e&&n.priceLevelId===s);return r?r.price:null},xE=(e,s,a,r,n=new Set)=>{if(n.has(s.id))return null;if(n.add(s.id),s.isBaseLevel)return Wp(e,s.id,r);if(!s.baseLevelId||!s.adjustmentType||s.adjustmentValue===void 0)return null;const i=a.find(o=>o.id===s.baseLevelId);if(!i)return null;let l=Wp(e,i.id,r);return l===null&&(l=xE(e,i,a,r,n)),l===null?null:s.adjustmentType==="PERCENT"?l*(1+s.adjustmentValue/100):s.adjustmentType==="FIXED"?l+s.adjustmentValue:l},qF=(e,s,a,r)=>{const n=a.find(l=>l.id===s);if(!n||!n.isActive)return null;const i=Wp(e,s,r);return i!==null?i:xE(e,n,a,r)},b0e=(e,s,a,r)=>{if(e.productId&&e.productId!==s)return null;const n=new Date;if(e.validFrom&&new Date(e.validFrom)>n||e.validTo&&new Date(e.validTo)<n)return null;if(e.useFixedPrice&&e.fixedPrice!==void 0)return e.fixedPrice;if(e.usePercentOfLevel&&e.percentOfLevel!==void 0&&e.priceLevelIdForPercent){const i=qF(s,e.priceLevelIdForPercent,a,r);if(i!==null)return i*(e.percentOfLevel/100)}return null},v0e=async(e,s,a=1)=>{var n,i,l,o,d;const r={finalPrice:null,basePrice:null,sourcePrecedence:null,sourceLevelId:null,roundingApplied:!1,calculationSteps:[]};try{const{settings:u,levels:h,matrix:f}=await p0e();r.calculationSteps.push("   ");let x=null;s&&(x=await he.getCustomerPricingProfile(s),x&&r.calculationSteps.push(`     : ${s}`));let p=null;x!=null&&x.defaultPriceLevelId?(p=x.defaultPriceLevelId,r.calculationSteps.push(`  : ${p}`)):u.defaultPriceLevelId&&(p=u.defaultPriceLevelId,r.calculationSteps.push(`  : ${p}`));const v=h.find(j=>j.id===p);v&&(r.sourceLevelName=v.name);let b=null;for(const j of u.pricePrecedenceOrder){if(b!==null)break;switch(j){case"CUSTOM_RULE":if(x!=null&&x.allowCustomRules&&((n=x.customRules)!=null&&n.length))for(const w of x.customRules){const S=b0e(w,e,h,f);if(S!==null){b=S,r.sourcePrecedence="CUSTOM_RULE",r.calculationSteps.push(`   - : ${S}`);break}}break;case"LEVEL_EXPLICIT":if(p){const w=Wp(e,p,f);w!==null&&(b=w,r.sourcePrecedence="LEVEL_EXPLICIT",r.sourceLevelId=p,r.calculationSteps.push(`    ${p}: ${w}`))}break;case"LEVEL_DERIVED":if(p){const w=h.find(S=>S.id===p);if(w&&!w.isBaseLevel){const S=xE(e,w,h,f);S!==null&&(b=S,r.sourcePrecedence="LEVEL_DERIVED",r.sourceLevelId=p,r.calculationSteps.push(`    ${w.baseLevelId}: ${S}`))}}break}}if(b===null&&u.allowFallbackToOtherLevels){const j=u.fallbackLevelId||((i=h.find(w=>w.isBaseLevel&&w.isActive))==null?void 0:i.id);j&&j!==p&&(b=qF(e,j,h,f),b!==null&&(r.sourceLevelId=j,r.calculationSteps.push(`   ${j}: ${b}`)))}if(b===null)return r.calculationSteps.push("    "),r;r.basePrice=b;let y=b;if(x){const j=x.extraMarkupPercent||0,w=x.extraDiscountPercent||0;!u.allowNegativeDiscounts&&w>j&&r.calculationSteps.push("    -   ");const S=u.allowNegativeDiscounts?w:Math.min(w,j),O=j-S;O!==0&&(y=y*(1+O/100),r.appliedMarkup=j,r.appliedDiscount=S,r.calculationSteps.push(`  ${j}%  ${S}%`)),x.priceFloor&&y<x.priceFloor&&(y=x.priceFloor,r.calculationSteps.push(`   : ${x.priceFloor}`)),x.priceCeiling&&y>x.priceCeiling&&(y=x.priceCeiling,r.calculationSteps.push(`   : ${x.priceCeiling}`))}if(u.minPriceFloor&&y<u.minPriceFloor&&(y=u.minPriceFloor,r.calculationSteps.push(`   : ${u.minPriceFloor}`)),u.maxPriceCeiling&&y>u.maxPriceCeiling&&(y=u.maxPriceCeiling,r.calculationSteps.push(`   : ${u.maxPriceCeiling}`)),u.enableVolumeDiscounts&&((l=u.volumeDiscountRules)!=null&&l.length)){for(const j of u.volumeDiscountRules)if(j.isActive&&!(a<j.minQty)&&!(j.maxQty&&a>j.maxQty)&&!(!j.appliesToAllProducts&&j.productIds&&!j.productIds.includes(e))){if(j.discountType==="PERCENT"){const w=y*(j.discountValue/100);y-=w,r.appliedVolumeDiscount=j.discountValue,r.calculationSteps.push(`  ${j.discountValue}%`)}else j.discountType==="FIXED"&&(y-=j.discountValue,r.appliedVolumeDiscount=j.discountValue,r.calculationSteps.push(`  : ${j.discountValue}`));break}}if(u.enableTimePromotions&&((o=u.timePromotions)!=null&&o.length)){const j=new Date;for(const w of u.timePromotions)if(w.isActive&&!(new Date(w.startsAt)>j||new Date(w.endsAt)<j)&&!(!w.appliesToAllProducts&&w.productIds&&!w.productIds.includes(e))&&!((d=w.priceLevelIds)!=null&&d.length&&r.sourceLevelId&&!w.priceLevelIds.includes(r.sourceLevelId))){w.discountType==="PERCENT"?(y-=y*(w.discountValue/100),r.appliedPromotion=w.name,r.calculationSteps.push(` ${w.name}:  ${w.discountValue}%`)):w.discountType==="FIXED"&&(y-=w.discountValue,r.appliedPromotion=w.name,r.calculationSteps.push(` ${w.name}:  ${w.discountValue}`));break}}if(u.roundingMode!=="NONE"){const j=g0e(y,u);j!==y&&(r.roundingApplied=!0,r.calculationSteps.push(`  ${y}  ${j}`)),y=j}y<0&&(y=0,r.calculationSteps.push("    ")),r.finalPrice=y,r.calculationSteps.push(` : ${y}`)}catch(u){console.error("Error calculating price:",u),r.errors=[`   : ${u}`]}return r},y0e=async(e,s,a)=>v0e(e,s,a),N0e=({onRefresh:e})=>{const{t:s,i18n:a}=Kt(),{addToast:r}=It(),n=a.dir()==="rtl",[i,l]=C.useState("LEVELS"),[o,d]=C.useState(!0),[u,h]=C.useState([]),[f,x]=C.useState([]),[p,v]=C.useState([]),[b,y]=C.useState(null),[j,w]=C.useState([]),[S,O]=C.useState([]),_=C.useCallback(async()=>{d(!0);try{const[D,L,B,I,T,z]=await Promise.all([he.getPriceLevels(),he.getProductPriceMatrix(),he.getAllCustomerPricingProfiles(),he.getGlobalPricingSettings(),he.searchProducts(""),he.getAllUsers()]);h(D),x(L),v(B),y(I),w(T),O(z)}catch(D){console.error("Error loading pricing data:",D),r("error","    ")}finally{d(!1)}},[r]);C.useEffect(()=>{_()},[_]);const E=()=>{ci(),_(),e==null||e()},A=[{id:"LEVELS",label:" ",icon:t.jsx(Mr,{size:18})},{id:"MATRIX",label:" ",icon:t.jsx(mr,{size:18})},{id:"CUSTOMERS",label:" ",icon:t.jsx(Wt,{size:18})},{id:"SETTINGS",label:" ",icon:t.jsx(aa,{size:18})}];return o?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#C8A04F] border-t-transparent"})}):t.jsxs("div",{className:"space-y-6",dir:n?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:" "}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"      "})]}),t.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-xl text-sm font-bold text-slate-700 transition-colors","data-testid":"button-refresh-pricing",children:[t.jsx(Gt,{size:16}),""]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(Zx,{label:" ",value:u.filter(D=>D.isActive).length,total:u.length,icon:t.jsx(Mr,{}),color:"blue"}),t.jsx(Zx,{label:" ",value:f.length,icon:t.jsx(mr,{}),color:"green"}),t.jsx(Zx,{label:" ",value:p.length,icon:t.jsx(Wt,{}),color:"amber"}),t.jsx(Zx,{label:" ",value:p.reduce((D,L)=>{var B;return D+(((B=L.customRules)==null?void 0:B.length)||0)},0),icon:t.jsx(GS,{}),color:"purple"})]}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"flex border-b border-slate-200",children:A.map(D=>t.jsxs("button",{onClick:()=>l(D.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-4 text-sm font-bold transition-colors ${i===D.id?"bg-[#0B1B3A] text-white":"bg-white text-slate-600 hover:bg-slate-50"}`,"data-testid":`tab-${D.id.toLowerCase()}`,children:[D.icon,D.label]},D.id))}),t.jsxs("div",{className:"p-6",children:[i==="LEVELS"&&t.jsx(j0e,{levels:u,onUpdate:_,addToast:r}),i==="MATRIX"&&t.jsx(w0e,{matrix:f,levels:u,products:j,onUpdate:_,addToast:r}),i==="CUSTOMERS"&&t.jsx(S0e,{profiles:p,levels:u,customers:S,products:j,onUpdate:_,addToast:r}),i==="SETTINGS"&&b&&t.jsx(A0e,{settings:b,levels:u,products:j,customers:S,onUpdate:_,addToast:r})]})]})]})},Zx=({label:e,value:s,total:a,icon:r,color:n})=>{const i={blue:"bg-blue-100 text-blue-600",green:"bg-emerald-100 text-emerald-600",amber:"bg-amber-100 text-amber-600",purple:"bg-purple-100 text-purple-600"};return t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:e}),t.jsxs("p",{className:"text-2xl font-black text-slate-800 mt-1",children:[s,a!==void 0&&t.jsxs("span",{className:"text-sm text-slate-400 font-normal",children:["/",a]})]})]}),t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${i[n]}`,children:r})]})})},j0e=({levels:e,onUpdate:s,addToast:a})=>{const[r,n]=C.useState(null),[i,l]=C.useState(!1),[o,d]=C.useState({code:"",name:"",description:"",isBaseLevel:!0,isActive:!0,sortOrder:e.length+1}),u=async()=>{if(!o.code||!o.name){a("error","  ");return}try{await he.addPriceLevel(o),a("success","   "),l(!1),d({code:"",name:"",description:"",isBaseLevel:!0,isActive:!0,sortOrder:e.length+2}),ci(),s()}catch{a("error","   ")}},h=async()=>{if(r)try{await he.updatePriceLevel(r.id,r),a("success","   "),n(null),ci(),s()}catch{a("error","   ")}},f=async v=>{if(confirm("      "))try{await he.deletePriceLevel(v),a("success","   "),ci(),s()}catch{a("error","   ")}},x=async v=>{try{await he.updatePriceLevel(v.id,{isActive:!v.isActive}),ci(),s()}catch{a("error","   ")}},p=e.filter(v=>v.isBaseLevel);return t.jsxs("div",{className:"space-y-6",children:[i?t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("input",{type:"text",value:o.code||"",onChange:v=>d({...o,code:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:": L2","data-testid":"input-level-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("input",{type:"text",value:o.name||"",onChange:v=>d({...o,name:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:":  ","data-testid":"input-level-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:o.description||"",onChange:v=>d({...o,description:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:" "})]})]}),t.jsx("div",{className:"mt-4 flex items-center gap-4",children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:o.isBaseLevel,onChange:v=>d({...o,isBaseLevel:v.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm text-slate-600",children:" "})]})}),!o.isBaseLevel&&t.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 bg-amber-50 p-4 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:o.baseLevelId||"",onChange:v=>d({...o,baseLevelId:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),p.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:o.adjustmentType||"",onChange:v=>d({...o,adjustmentType:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"PERCENT",children:"  %"}),t.jsx("option",{value:"FIXED",children:" "})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"number",value:o.adjustmentValue||"",onChange:v=>d({...o,adjustmentValue:parseFloat(v.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:": 10"})]})]}),t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsxs("button",{onClick:u,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700 flex items-center gap-2","data-testid":"button-save-level",children:[t.jsx(us,{size:16})," "]}),t.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]}):t.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-xl text-sm font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-add-level",children:[t.jsx(kt,{size:16}),"   "]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-100",children:[t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-center px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-center px-4 py-3 text-sm font-bold text-slate-600",children:""})]})}),t.jsx("tbody",{children:e.sort((v,b)=>v.sortOrder-b.sortOrder).map((v,b)=>{var y;return t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-slate-400 text-sm",children:b+1})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 bg-slate-200 rounded text-sm font-mono",children:v.code})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"font-bold text-slate-800",children:v.name}),v.description&&t.jsx("p",{className:"text-xs text-slate-500",children:v.description})]}),t.jsx("td",{className:"px-4 py-3",children:v.isBaseLevel?t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold",children:""}):t.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded text-xs font-bold",children:""})}),t.jsx("td",{className:"px-4 py-3",children:!v.isBaseLevel&&v.adjustmentType&&t.jsxs("span",{className:"text-sm text-slate-600",children:[v.adjustmentType==="PERCENT"?`${v.adjustmentValue}%`:`${v.adjustmentValue} .`," ",""," ",t.jsx("span",{className:"font-bold",children:((y=e.find(j=>j.id===v.baseLevelId))==null?void 0:y.name)||"-"})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>x(v),className:`px-3 py-1 rounded-full text-xs font-bold ${v.isActive?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:v.isActive?"":""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>n(v),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",title:"",children:t.jsx(Ma,{size:16})}),t.jsx("button",{onClick:()=>f(v.id),className:"p-2 hover:bg-red-100 rounded-lg text-red-600",title:"",children:t.jsx(At,{size:16})})]})})]},v.id)})})]})}),r&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-lg",children:[t.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:" "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:r.code,onChange:v=>n({...r,code:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:r.name,onChange:v=>n({...r,name:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:r.description||"",onChange:v=>n({...r,description:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),t.jsxs("div",{className:"flex gap-2 mt-6",children:[t.jsx("button",{onClick:h,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:" "}),t.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]})})]})},w0e=({matrix:e,levels:s,products:a,onUpdate:r,addToast:n})=>{const[i,l]=C.useState(""),[o,d]=C.useState(""),[u,h]=C.useState(!1),[f,x]=C.useState({productId:"",priceLevelId:"",price:0}),[p,v]=C.useState(null),b=C.useMemo(()=>e.filter(_=>{var L,B;const E=a.find(I=>I.id===_.productId),A=!i||((L=E==null?void 0:E.partNumber)==null?void 0:L.toLowerCase().includes(i.toLowerCase()))||((B=E==null?void 0:E.name)==null?void 0:B.toLowerCase().includes(i.toLowerCase())),D=!o||_.priceLevelId===o;return A&&D}),[e,a,i,o]),y=async()=>{if(!f.productId||!f.priceLevelId||!f.price){n("error","  ");return}try{await he.addProductPriceEntry(f),n("success","   "),h(!1),x({productId:"",priceLevelId:"",price:0}),ci(),r()}catch{n("error","   ")}},j=async()=>{if(p)try{await he.updateProductPriceEntry(p.id,p),n("success","   "),v(null),ci(),r()}catch{n("error","   ")}},w=async _=>{if(confirm("      "))try{await he.deleteProductPriceEntry(_),n("success","   "),ci(),r()}catch{n("error","   ")}},S=()=>{const _=e.map(D=>{const L=a.find(I=>I.id===D.productId),B=s.find(I=>I.id===D.priceLevelId);return{" ":(L==null?void 0:L.partNumber)||""," ":(L==null?void 0:L.name)||"",:(B==null?void 0:B.name)||"",:D.price}}),E=Ta.json_to_sheet(_),A=Ta.book_new();Ta.book_append_sheet(A,E,"Price Matrix"),nd(A,"price_matrix.xlsx"),n("success","   ")},O=async _=>{var A;const E=(A=_.target.files)==null?void 0:A[0];if(E){try{const D=new FileReader;D.onload=async L=>{var P;const B=new Uint8Array((P=L.target)==null?void 0:P.result),I=rd(B,{type:"array"}),T=I.SheetNames[0],z=I.Sheets[T],k=Ta.sheet_to_json(z),F=[];for(const G of k){const Y=G[" "]||G.partNumber,W=G.||G.level,ee=parseFloat(G.||G.price),H=a.find(X=>X.partNumber===Y),M=s.find(X=>X.name===W||X.code===W);H&&M&&!isNaN(ee)&&F.push({productId:H.id,priceLevelId:M.id,price:ee})}if(F.length>0){const G=await he.bulkImportPriceMatrix(F);n("success",`  ${G.imported}    ${G.updated} `),G.errors.length>0&&console.error("Import errors:",G.errors),ci(),r()}else n("warning","      ")},D.readAsArrayBuffer(E)}catch{n("error","   ")}_.target.value=""}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[t.jsxs("div",{className:"flex gap-4 flex-1",children:[t.jsxs("div",{className:"relative flex-1 max-w-xs",children:[t.jsx(Lt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",value:i,onChange:_=>l(_.target.value),placeholder:"    ...",className:"w-full pr-10 pl-4 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"input-search-matrix"})]}),t.jsxs("select",{value:o,onChange:_=>d(_.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),s.map(_=>t.jsx("option",{value:_.id,children:_.name},_.id))]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-price",children:[t.jsx(kt,{size:16}),"  "]}),t.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(tr,{size:16})," "]}),t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-bold hover:bg-amber-700 cursor-pointer",children:[t.jsx(va,{size:16})," ",t.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:O,className:"hidden"})]})]})]}),u&&t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:f.productId||"",onChange:_=>x({...f,productId:_.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-product",children:[t.jsx("option",{value:"",children:" "}),a.slice(0,100).map(_=>t.jsxs("option",{value:_.id,children:[_.partNumber," - ",_.name]},_.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:f.priceLevelId||"",onChange:_=>x({...f,priceLevelId:_.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-level",children:[t.jsx("option",{value:"",children:" "}),s.filter(_=>_.isActive).map(_=>t.jsx("option",{value:_.id,children:_.name},_.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("input",{type:"number",value:f.price||"",onChange:_=>x({...f,price:parseFloat(_.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"0.00","data-testid":"input-price"})]})]}),t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsxs("button",{onClick:y,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700 flex items-center gap-2","data-testid":"button-save-price",children:[t.jsx(us,{size:16})," "]}),t.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-100",children:[t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-center px-4 py-3 text-sm font-bold text-slate-600",children:""})]})}),t.jsx("tbody",{children:b.slice(0,50).map(_=>{const E=a.find(D=>D.id===_.productId),A=s.find(D=>D.id===_.priceLevelId);return t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"font-mono text-sm",children:(E==null?void 0:E.partNumber)||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-700",children:(E==null?void 0:E.name)||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 bg-slate-200 rounded text-sm",children:(A==null?void 0:A.name)||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"font-bold text-emerald-600",children:[_.price.toFixed(2)," ."]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>v(_),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:t.jsx(Ma,{size:16})}),t.jsx("button",{onClick:()=>w(_.id),className:"p-2 hover:bg-red-100 rounded-lg text-red-600",children:t.jsx(At,{size:16})})]})})]},_.id)})})]}),b.length>50&&t.jsxs("p",{className:"text-center text-sm text-slate-500 mt-4",children:[" 50  ",b.length," "]})]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:" "}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"number",value:p.price,onChange:_=>v({...p,price:parseFloat(_.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})}),t.jsxs("div",{className:"flex gap-2 mt-6",children:[t.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:" "}),t.jsx("button",{onClick:()=>v(null),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]})})]})},S0e=({profiles:e,levels:s,customers:a,products:r,onUpdate:n,addToast:i})=>{var O,_;const[l,o]=C.useState(""),[d,u]=C.useState(null),[h,f]=C.useState(null),x=C.useMemo(()=>l?a.filter(E=>{var A,D,L;return((A=E.user.name)==null?void 0:A.toLowerCase().includes(l.toLowerCase()))||((D=E.user.clientId)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||((L=E.profile.companyName)==null?void 0:L.toLowerCase().includes(l.toLowerCase()))}):a,[a,l]),p=E=>e.find(A=>A.customerId===E)||null,v=E=>{var D;u(E);const A=p(E);f(A||{customerId:E,defaultPriceLevelId:((D=s[0])==null?void 0:D.id)||"",allowCustomRules:!1,customRules:[]})},b=async()=>{if(h)try{await he.upsertCustomerPricingProfile(h),i("success","    "),ci(),n()}catch{i("error","    ")}},y=async()=>{if(d&&confirm("        "))try{await he.deleteCustomerPricingProfile(d),i("success","   "),u(null),f(null),ci(),n()}catch{i("error","    ")}},j=()=>{if(!h)return;const E={id:`CR${Date.now()}`,useFixedPrice:!1,usePercentOfLevel:!1};f({...h,customRules:[...h.customRules||[],E]})},w=(E,A)=>{h&&f({...h,customRules:(h.customRules||[]).map(D=>D.id===E?{...D,...A}:D)})},S=E=>{h&&f({...h,customRules:(h.customRules||[]).filter(A=>A.id!==E)})};return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-1 bg-slate-50 rounded-xl p-4 max-h-[600px] overflow-y-auto",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",value:l,onChange:E=>o(E.target.value),placeholder:"    ...",className:"w-full pr-10 pl-4 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"input-search-customers"})]})}),t.jsx("div",{className:"space-y-2",children:x.map(({user:E,profile:A})=>{const D=p(E.id)!==null;return t.jsx("button",{onClick:()=>v(E.id),className:`w-full text-right p-3 rounded-lg transition-colors ${d===E.id?"bg-[#0B1B3A] text-white":"bg-white hover:bg-slate-100"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm",children:A.companyName||E.name}),t.jsx("p",{className:`text-xs ${d===E.id?"text-slate-300":"text-slate-500"}`,children:E.clientId})]}),D&&t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${d===E.id?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:""})]})},E.id)})})]}),t.jsx("div",{className:"lg:col-span-2",children:h?t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-bold text-slate-800",children:"  "}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-profile",children:[t.jsx(us,{size:16})," "]}),p(h.customerId)&&t.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-bold hover:bg-red-700",children:[t.jsx(At,{size:16})," "]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("select",{value:h.defaultPriceLevelId,onChange:E=>f({...h,defaultPriceLevelId:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-default-level",children:s.filter(E=>E.isActive).map(E=>t.jsx("option",{value:E.id,children:E.name},E.id))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  %"}),t.jsx("input",{type:"number",value:h.extraMarkupPercent||"",onChange:E=>f({...h,extraMarkupPercent:parseFloat(E.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  %"}),t.jsx("input",{type:"number",value:h.extraDiscountPercent||"",onChange:E=>f({...h,extraDiscountPercent:parseFloat(E.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"0"})]})]})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:h.allowCustomRules,onChange:E=>f({...h,allowCustomRules:E.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm font-bold text-slate-700",children:"  "})]}),h.allowCustomRules&&t.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-1 bg-slate-100 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-200",children:[t.jsx(kt,{size:14}),"  "]})]}),h.allowCustomRules&&(((O=h.customRules)==null?void 0:O.length)||0)>0&&t.jsx("div",{className:"space-y-4",children:(_=h.customRules)==null?void 0:_.map(E=>t.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("span",{className:"text-sm font-bold text-slate-700",children:" "}),t.jsx("button",{onClick:()=>S(E.id),className:"p-1 hover:bg-red-100 rounded text-red-600",children:t.jsx(vt,{size:16})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" ()"}),t.jsxs("select",{value:E.productId||"",onChange:A=>w(E.id,{productId:A.target.value||void 0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),r.slice(0,50).map(A=>t.jsx("option",{value:A.id,children:A.partNumber},A.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsxs("select",{value:E.useFixedPrice?"FIXED":E.usePercentOfLevel?"PERCENT":"",onChange:A=>{const D=A.target.value;w(E.id,{useFixedPrice:D==="FIXED",usePercentOfLevel:D==="PERCENT"})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"FIXED",children:" "}),t.jsx("option",{value:"PERCENT",children:"  "})]})]}),E.useFixedPrice&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("input",{type:"number",value:E.fixedPrice||"",onChange:A=>w(E.id,{fixedPrice:parseFloat(A.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),E.usePercentOfLevel&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" %"}),t.jsx("input",{type:"number",value:E.percentOfLevel||"",onChange:A=>w(E.id,{percentOfLevel:parseFloat(A.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsxs("select",{value:E.priceLevelIdForPercent||"",onChange:A=>w(E.id,{priceLevelIdForPercent:A.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),s.filter(A=>A.isActive).map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]})]})]})]})]},E.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("textarea",{value:h.notes||"",onChange:E=>f({...h,notes:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",rows:3,placeholder:" ..."})]})]}):t.jsxs("div",{className:"bg-slate-50 rounded-xl p-8 text-center",children:[t.jsx(Wt,{size:48,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-500",children:"      "})]})})]})},A0e=({settings:e,levels:s,products:a,customers:r,onUpdate:n,addToast:i})=>{const[l,o]=C.useState(e),[d,u]=C.useState(""),[h,f]=C.useState(""),[x,p]=C.useState(null),[v,b]=C.useState(!1),y=async()=>{try{await he.saveGlobalPricingSettings(l),i("success","   "),ci(),n()}catch{i("error","   ")}},j=async()=>{if(!d){i("error","  ");return}b(!0);try{const O=await y0e(d,h||null);p(O)}catch{i("error","  ")}finally{b(!1)}},w=(O,_)=>{const E=[...l.pricePrecedenceOrder],A=_==="up"?O-1:O+1;A<0||A>=E.length||([E[O],E[A]]=[E[A],E[O]],o({...l,pricePrecedenceOrder:E}))},S={CUSTOM_RULE:" ",LEVEL_EXPLICIT:" ",LEVEL_DERIVED:" "};return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-4",children:" "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:l.defaultPriceLevelId||"",onChange:O=>o({...l,defaultPriceLevelId:O.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-default-global-level",children:[t.jsx("option",{value:"",children:""}),s.filter(O=>O.isActive).map(O=>t.jsx("option",{value:O.id,children:O.name},O.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:l.currency,onChange:O=>o({...l,currency:O.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:l.roundingMode,onChange:O=>o({...l,roundingMode:O.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"NONE",children:" "}),t.jsx("option",{value:"ROUND",children:" "}),t.jsx("option",{value:"CEIL",children:" "}),t.jsx("option",{value:"FLOOR",children:" "})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  "}),t.jsx("input",{type:"number",min:"0",max:"4",value:l.roundingDecimals,onChange:O=>o({...l,roundingDecimals:parseInt(O.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:l.allowNegativeDiscounts,onChange:O=>o({...l,allowNegativeDiscounts:O.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm text-slate-700",children:"  "})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:l.allowFallbackToOtherLevels,onChange:O=>o({...l,allowFallbackToOtherLevels:O.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm text-slate-700",children:"   "})]})]}),l.allowFallbackToOtherLevels&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:l.fallbackLevelId||"",onChange:O=>o({...l,fallbackLevelId:O.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" (  )"}),s.filter(O=>O.isActive).map(O=>t.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[t.jsx("h5",{className:"font-bold text-slate-700 mb-3",children:" "}),t.jsx("div",{className:"space-y-2",children:l.pricePrecedenceOrder.map((O,_)=>t.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-3 rounded-lg",children:[t.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-[#0B1B3A] text-white rounded-full text-xs font-bold",children:_+1}),t.jsx("span",{className:"flex-1 text-sm font-bold text-slate-700",children:S[O]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>w(_,"up"),disabled:_===0,className:"p-1 hover:bg-slate-200 rounded disabled:opacity-30",children:t.jsx(Qr,{size:16})}),t.jsx("button",{onClick:()=>w(_,"down"),disabled:_===l.pricePrecedenceOrder.length-1,className:"p-1 hover:bg-slate-200 rounded disabled:opacity-30",children:t.jsx(Ir,{size:16})})]})]},O))})]}),t.jsxs("button",{onClick:y,className:"mt-6 w-full flex items-center justify-center gap-2 px-4 py-3 bg-emerald-600 text-white rounded-xl text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-settings",children:[t.jsx(us,{size:18}),"  "]})]})}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h4",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(WO,{size:20}),"  "]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"       "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:d,onChange:O=>u(O.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-simulation-product",children:[t.jsx("option",{value:"",children:" "}),a.slice(0,100).map(O=>t.jsxs("option",{value:O.id,children:[O.partNumber," - ",O.name]},O.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" ()"}),t.jsxs("select",{value:h,onChange:O=>f(O.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-simulation-customer",children:[t.jsx("option",{value:"",children:" ( )"}),r.map(({user:O,profile:_})=>t.jsxs("option",{value:O.id,children:[_.companyName||O.name," (",O.clientId,")"]},O.id))]})]}),t.jsx("button",{onClick:j,disabled:v,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-[#0B1B3A] text-white rounded-xl text-sm font-bold hover:bg-[#1a2e56] disabled:opacity-50","data-testid":"button-simulate",children:v?t.jsxs(t.Fragment,{children:[t.jsx(Gt,{size:18,className:"animate-spin"}),"  ..."]}):t.jsxs(t.Fragment,{children:[t.jsx(WO,{size:18}),"  "]})})]}),x&&t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[t.jsx("h5",{className:"font-bold text-slate-700 mb-3",children:" "}),t.jsx("div",{className:`p-4 rounded-xl mb-4 ${x.finalPrice!==null?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:x.finalPrice!==null?t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-slate-600",children:" "}),t.jsxs("p",{className:"text-3xl font-black text-emerald-600","data-testid":"text-final-price",children:[x.finalPrice.toFixed(2)," ."]}),x.sourceLevelName&&t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[": ",x.sourceLevelName]})]}):t.jsxs("div",{className:"text-center",children:[t.jsx(Cs,{size:32,className:"mx-auto text-red-500 mb-2"}),t.jsx("p",{className:"text-red-600 font-bold",children:"    "})]})}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h6",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(zt,{size:16}),"  "]}),t.jsx("div",{className:"space-y-1",children:x.calculationSteps.map((O,_)=>t.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[t.jsx(sl,{size:12,className:"mt-0.5 text-slate-400"}),t.jsx("span",{children:O})]},_))})]}),x.errors&&x.errors.length>0&&t.jsxs("div",{className:"mt-4 bg-red-50 rounded-xl p-4",children:[t.jsx("h6",{className:"text-sm font-bold text-red-700 mb-2",children:""}),x.errors.map((O,_)=>t.jsx("p",{className:"text-xs text-red-600",children:O},_))]})]})]})})]})},R5={PDF_TO_EXCEL:t.jsx(yn,{size:24}),VIN_EXTRACTOR:t.jsx(Mi,{size:24}),PRICE_COMPARISON:t.jsx(Fo,{size:24})},E0e=[{value:"PARTS_SHOP",labelAr:"  ",labelEn:"Parts Shop"},{value:"RENTAL_COMPANY",labelAr:" ",labelEn:"Rental Company"},{value:"INSURANCE_COMPANY",labelAr:" ",labelEn:"Insurance Company"},{value:"SALES_AGENT",labelAr:" ",labelEn:"Sales Agent"},{value:"FLEET_CUSTOMER",labelAr:" ",labelEn:"Fleet Customer"},{value:"MAINTENANCE_CENTER",labelAr:" ",labelEn:"Maintenance Center"},{value:"TRADING_COMPANY",labelAr:" ",labelEn:"Trading Company"}],Tc={VIN:{ar:" VIN",en:"VIN Extraction",icon:t.jsx(Mi,{size:16})},PDF_EXCEL:{ar:" PDF  Excel",en:"PDF to Excel",icon:t.jsx(yn,{size:16})},COMPARISON:{ar:" ",en:"Price Comparison",icon:t.jsx(Fo,{size:16})},ALTERNATIVES:{ar:" ",en:"Alternatives Upload",icon:t.jsx(va,{size:16})},SEARCH:{ar:" ",en:"Quick Orders",icon:t.jsx(Lt,{size:16})},EXCEL_QUOTE:{ar:"  Excel",en:"Excel Purchase Order",icon:t.jsx(cE,{size:16})}},_c={SUCCESS:{ar:"",en:"Success",color:"bg-green-100 text-green-700"},FAILED:{ar:"",en:"Failed",color:"bg-red-100 text-red-700"},PENDING:{ar:" ",en:"Pending",color:"bg-amber-100 text-amber-700"},PROCESSING:{ar:" ",en:"Processing",color:"bg-blue-100 text-blue-700"}},C0e=()=>{var Q,se,V,te,Z,ue;const[e,s]=C.useState("TOOLS"),[a,r]=C.useState([]),[n,i]=C.useState(null),[l,o]=C.useState(!0),[d,u]=C.useState(!1),[h,f]=C.useState({}),[x,p]=C.useState(!1),[v,b]=C.useState(null),[y,j]=C.useState({page:1,pageSize:20,sortBy:"createdAt",sortDirection:"desc"}),[w,S]=C.useState(""),[O,_]=C.useState(null),{addToast:E}=It(),{t:A,language:D}=Hs();C.useEffect(()=>{L()},[]);const L=async()=>{o(!0);try{const re=await he.getToolConfigs();r(re);const J={};for(const Ne of re)J[Ne.toolKey]=await Xo.getToolUsageStats(Ne.toolKey,void 0,"month");f(J)}catch{E("    ","error")}finally{o(!1)}},B=async()=>{p(!0);try{const re={...y,search:w||void 0},J=await he.getTraderToolActionsAdmin(re);b(J)}catch{E(D==="ar"?"    ":"Failed to load usage log","error")}finally{p(!1)}};C.useEffect(()=>{e==="USAGE_LOG"&&B()},[e,y]);const I=async()=>{try{const re=await he.exportTraderToolActions(y),J=["ID","Customer ID","Customer Name","Tool Type","Status","Device","Date","Has Input File","Has Output File"],Ne=re.map(ne=>[ne.id,ne.customerId,ne.customerName,ne.toolType,ne.status,ne.deviceType,ne.createdAt,ne.hasInputFile?"Yes":"No",ne.hasOutputFile?"Yes":"No"]),q=[J.join(","),...Ne.map(ne=>ne.join(","))].join(`
`),ce=new Blob([q],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(ce),ie=document.createElement("a");ie.href=fe,ie.download=`trader_tools_usage_${new Date().toISOString().split("T")[0]}.csv`,ie.click(),URL.revokeObjectURL(fe),E(D==="ar"?"   ":"Data exported successfully","success")}catch{E(D==="ar"?"   ":"Failed to export data","error")}},T=re=>{const{toolType:J,metadata:Ne,inputData:q}=re;switch(J){case"VIN":return(Ne==null?void 0:Ne.vin)||(q==null?void 0:q.imageFile)||"-";case"PDF_EXCEL":return re.inputFileName||(q==null?void 0:q.fileName)||"-";case"COMPARISON":return(Ne==null?void 0:Ne.partNumber)||(Ne==null?void 0:Ne.partName)||"-";case"SEARCH":return(Ne==null?void 0:Ne.searchQuery)||(q==null?void 0:q.query)||"-";case"EXCEL_QUOTE":return re.inputFileName||`${(Ne==null?void 0:Ne.itemsCount)||0} items`;case"ALTERNATIVES":return re.inputFileName||"-";default:return"-"}},z=re=>{const{toolType:J,metadata:Ne}=re;switch(J){case"VIN":return Ne!=null&&Ne.manufacturer?`${Ne.manufacturer} ${Ne.model||""} (${Ne.year})`:"-";case"PDF_EXCEL":return Ne!=null&&Ne.rowCount?`${Ne.rowCount} rows`:"-";case"COMPARISON":return Ne!=null&&Ne.suppliersCount?`${Ne.suppliersCount} suppliers`:"-";case"SEARCH":return(Ne==null?void 0:Ne.resultsCount)!==void 0?`${Ne.resultsCount} results`:"-";case"EXCEL_QUOTE":return(Ne==null?void 0:Ne.quotedTotal)!==void 0?`${Ne.quotedTotal.toLocaleString()} SAR`:"-";default:return"-"}},k=v?Math.ceil(v.total/(y.pageSize||20)):0,F=async()=>{u(!0);try{await he.saveToolConfigs(a),E(D==="ar"?"   ":"Settings saved successfully","success")}catch{E(D==="ar"?"   ":"Error saving settings","error")}finally{u(!1)}},P=re=>{r(J=>J.map(Ne=>Ne.toolKey===re?{...Ne,enabled:!Ne.enabled}:Ne))},G=re=>{r(J=>J.map(Ne=>Ne.toolKey===re?{...Ne,maintenanceMode:!Ne.maintenanceMode}:Ne))},Y=re=>{r(J=>J.map(Ne=>Ne.toolKey===re?{...Ne,showInDashboardShortcuts:!Ne.showInDashboardShortcuts}:Ne))},W=re=>{r(J=>J.map(Ne=>Ne.toolKey===re?{...Ne,logUsageForAnalytics:!Ne.logUsageForAnalytics}:Ne))},ee=(re,J,Ne)=>{r(q=>q.map(ce=>ce.toolKey===re?{...ce,[J]:Ne}:ce))},H=(re,J)=>{r(Ne=>Ne.map(q=>{if(q.toolKey!==re)return q;const ce=[...q.allowedCustomerTypes],fe=ce.indexOf(J);return fe===-1?ce.push(J):ce.splice(fe,1),{...q,allowedCustomerTypes:ce}}))},M=re=>D==="ar"?re.toolNameAr:re.toolNameEn,X=re=>D==="ar"?re.descriptionAr:re.descriptionEn;if(l)return t.jsxs("div",{className:"p-10 text-center",children:[t.jsx(Gt,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ...":"Loading..."})]});const K=({id:re,icon:J,label:Ne})=>t.jsxs("button",{onClick:()=>s(re),className:`flex items-center gap-3 px-6 py-3 rounded-xl transition-all font-bold ${e===re?"bg-brand-600 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,"data-testid":`tab-${re.toLowerCase()}`,children:[J,t.jsx("span",{children:Ne})]});return t.jsxs("div",{className:"animate-fade-in max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(ac,{className:"text-brand-600"}),D==="ar"?"  ":"Trader Tools Management"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:D==="ar"?"/       ":"Enable/disable tools and configure access permissions per customer type"})]}),t.jsxs("div",{className:"flex gap-3 flex-wrap",children:[t.jsx(K,{id:"TOOLS",icon:t.jsx(aa,{size:18}),label:D==="ar"?"":"Settings"}),t.jsx(K,{id:"ANALYTICS",icon:t.jsx(Dr,{size:18}),label:D==="ar"?"":"Analytics"}),t.jsx(K,{id:"USAGE_LOG",icon:t.jsx(Wr,{size:18}),label:D==="ar"?" ":"Usage Log"})]})]}),e==="TOOLS"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:F,disabled:d,className:"bg-brand-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2 transition-all","data-testid":"btn-save-tools",children:[t.jsx(us,{size:18}),d?D==="ar"?" ...":"Saving...":D==="ar"?" ":"Save Settings"]})}),a.map(re=>t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border transition-all ${re.enabled?"border-slate-100":"border-slate-200 opacity-75"}`,children:[t.jsxs("div",{className:"p-6 flex items-center justify-between cursor-pointer hover:bg-slate-50 rounded-t-2xl transition-colors",onClick:()=>i(n===re.toolKey?null:re.toolKey),"data-testid":`tool-header-${re.toolKey}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${re.enabled?re.maintenanceMode?"bg-amber-50 text-amber-600":"bg-brand-50 text-brand-600":"bg-slate-100 text-slate-400"}`,children:R5[re.toolKey]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:M(re)}),t.jsx("p",{className:"text-sm text-slate-500",children:X(re)})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[re.maintenanceMode&&t.jsxs("span",{className:"px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-bold flex items-center gap-1",children:[t.jsx(Ks,{size:12}),D==="ar"?"":"Maintenance"]}),t.jsx("button",{onClick:J=>{J.stopPropagation(),P(re.toolKey)},className:`p-2 rounded-lg transition-colors ${re.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,"data-testid":`toggle-tool-${re.toolKey}`,children:re.enabled?t.jsx(id,{size:20}):t.jsx(zu,{size:20})}),n===re.toolKey?t.jsx(Qr,{size:20}):t.jsx(Ir,{size:20})]})]}),n===re.toolKey&&t.jsxs("div",{className:"border-t border-slate-100 p-6 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[re.showInDashboardShortcuts?t.jsx(ns,{size:18,className:"text-brand-600"}):t.jsx(dr,{size:18,className:"text-slate-400"}),t.jsx("span",{className:"font-medium",children:D==="ar"?"  ":"Show in Shortcuts"})]}),t.jsx("button",{onClick:()=>Y(re.toolKey),className:`w-12 h-6 rounded-full transition-colors relative ${re.showInDashboardShortcuts?"bg-brand-600":"bg-slate-300"}`,"data-testid":`toggle-show-${re.toolKey}`,children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${re.showInDashboardShortcuts?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Wr,{size:18,className:re.logUsageForAnalytics?"text-brand-600":"text-slate-400"}),t.jsx("span",{className:"font-medium",children:D==="ar"?" ":"Log Usage"})]}),t.jsx("button",{onClick:()=>W(re.toolKey),className:`w-12 h-6 rounded-full transition-colors relative ${re.logUsageForAnalytics?"bg-brand-600":"bg-slate-300"}`,"data-testid":`toggle-log-${re.toolKey}`,children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${re.logUsageForAnalytics?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ks,{size:18,className:re.maintenanceMode?"text-amber-600":"text-slate-400"}),t.jsx("span",{className:"font-medium",children:D==="ar"?" ":"Maintenance Mode"})]}),t.jsx("button",{onClick:()=>G(re.toolKey),className:`w-12 h-6 rounded-full transition-colors relative ${re.maintenanceMode?"bg-amber-500":"bg-slate-300"}`,"data-testid":`toggle-maintenance-${re.toolKey}`,children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${re.maintenanceMode?"right-1":"left-1"}`})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[t.jsx(is,{size:14,className:"inline ml-1"}),D==="ar"?"  ()":"Daily Limit (files)"]}),t.jsx("input",{type:"number",value:re.maxFilesPerDay||"",onChange:J=>ee(re.toolKey,"maxFilesPerDay",parseInt(J.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:D==="ar"?" ":"No limit","data-testid":`input-daily-limit-${re.toolKey}`})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[t.jsx(is,{size:14,className:"inline ml-1"}),D==="ar"?"  ()":"Monthly Limit (files)"]}),t.jsx("input",{type:"number",value:re.maxFilesPerMonth||"",onChange:J=>ee(re.toolKey,"maxFilesPerMonth",parseInt(J.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:D==="ar"?" ":"No limit","data-testid":`input-monthly-limit-${re.toolKey}`})]})]}),re.maintenanceMode&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:D==="ar"?" ":"Maintenance Message"}),t.jsx("input",{type:"text",value:re.maintenanceMessage||"",onChange:J=>ee(re.toolKey,"maintenanceMessage",J.target.value),className:"w-full p-3 bg-amber-50 border border-amber-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500",placeholder:D==="ar"?"   ...":"Tool is currently under maintenance...","data-testid":`input-maintenance-msg-${re.toolKey}`})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(Wt,{size:16}),D==="ar"?"   ":"Allowed Customer Types"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:E0e.map(J=>{const Ne=re.allowedCustomerTypes.includes(J.value);return t.jsxs("button",{onClick:()=>H(re.toolKey,J.value),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${Ne?"bg-brand-100 text-brand-700 border-2 border-brand-300":"bg-slate-100 text-slate-500 border-2 border-transparent hover:border-slate-200"}`,"data-testid":`customer-type-${re.toolKey}-${J.value}`,children:[Ne?t.jsx(Mt,{size:16}):t.jsx(sa,{size:16}),D==="ar"?J.labelAr:J.labelEn]},J.value)})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:D==="ar"?"  ()":"Tool Name (Arabic)"}),t.jsx("input",{type:"text",value:re.toolNameAr,onChange:J=>ee(re.toolKey,"toolNameAr",J.target.value),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",dir:"rtl","data-testid":`input-name-ar-${re.toolKey}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:D==="ar"?"  ()":"Tool Name (English)"}),t.jsx("input",{type:"text",value:re.toolNameEn,onChange:J=>ee(re.toolKey,"toolNameEn",J.target.value),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",dir:"ltr","data-testid":`input-name-en-${re.toolKey}`})]})]})]})]},re.toolKey))]}),e==="ANALYTICS"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(gi,{className:"text-brand-600"}),D==="ar"?"  ":"Monthly Usage Statistics"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(re=>{const J=h[re.toolKey];return J?t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-brand-100 text-brand-600 rounded-lg",children:R5[re.toolKey]}),t.jsx("h3",{className:"font-bold text-slate-800",children:M(re)})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ":"Total Usage"}),t.jsx("span",{className:"font-bold text-slate-800",children:J.totalUsage})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?"":"Successful"}),t.jsx("span",{className:"font-bold text-green-600",children:J.successfulUsage})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?"":"Failed"}),t.jsx("span",{className:"font-bold text-red-600",children:J.failedUsage})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ":"Unique Customers"}),t.jsx("span",{className:"font-bold text-slate-800",children:J.uniqueCustomers})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ":"Avg Time"}),t.jsxs("span",{className:"font-bold text-slate-800",children:[J.avgProcessingTime,"ms"]})]})]}),J.byDay.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-2",children:D==="ar"?" 7 ":"Last 7 days"}),t.jsx("div",{className:"flex items-end gap-1 h-16",children:J.byDay.slice(-7).map((Ne,q)=>{const ce=Math.max(...J.byDay.slice(-7).map(ie=>ie.count),1),fe=Ne.count/ce*100;return t.jsx("div",{className:"flex-1 bg-brand-500 rounded-t",style:{height:`${Math.max(fe,4)}%`},title:`${Ne.date}: ${Ne.count}`},q)})})]})]},re.toolKey):null})})]}),t.jsx("div",{className:"text-center text-slate-500 text-sm",children:t.jsxs("button",{onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors","data-testid":"btn-refresh-analytics",children:[t.jsx(Gt,{size:16}),D==="ar"?" ":"Refresh Data"]})})]}),e==="USAGE_LOG"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(sc,{size:18,className:"text-slate-500"}),t.jsx("span",{className:"font-semibold text-slate-700",children:D==="ar"?"":"Filters"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?"":"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:w,onChange:re=>S(re.target.value),onKeyDown:re=>re.key==="Enter"&&B(),placeholder:D==="ar"?" VIN ...":"Name, VIN, file...",className:"w-full pl-10 pr-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-search-log"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?" ":"Tool Type"}),t.jsxs("select",{value:y.toolType||"ALL",onChange:re=>j(J=>({...J,toolType:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-tool-type-log",children:[t.jsx("option",{value:"ALL",children:D==="ar"?"":"All"}),Object.entries(Tc).map(([re,J])=>t.jsx("option",{value:re,children:D==="ar"?J.ar:J.en},re))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?"":"Status"}),t.jsxs("select",{value:y.status||"ALL",onChange:re=>j(J=>({...J,status:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-status-log",children:[t.jsx("option",{value:"ALL",children:D==="ar"?"":"All"}),Object.entries(_c).map(([re,J])=>t.jsx("option",{value:re,children:D==="ar"?J.ar:J.en},re))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?" ":"From Date"}),t.jsx("input",{type:"date",value:y.dateFrom||"",onChange:re=>j(J=>({...J,dateFrom:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-from-log"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?" ":"To Date"}),t.jsx("input",{type:"date",value:y.dateTo||"",onChange:re=>j(J=>({...J,dateTo:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-to-log"})]}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:()=>{S(""),j({page:1,pageSize:20,sortBy:"createdAt",sortDirection:"desc"})},className:"px-4 py-2 text-sm text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors","data-testid":"button-clear-filters-log",children:D==="ar"?"":"Clear"}),t.jsxs("button",{onClick:I,className:"px-4 py-2 text-sm text-white bg-brand-600 rounded-lg hover:bg-brand-700 transition-colors flex items-center gap-2","data-testid":"button-export-log",children:[t.jsx(tr,{size:16}),D==="ar"?"":"Export"]})]})]})]}),(v==null?void 0:v.summary)&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?" ":"Total Actions"}),t.jsx("div",{className:"text-2xl font-bold text-slate-800","data-testid":"text-summary-total",children:v.summary.total})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?"":"Successful"}),t.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-summary-success",children:v.summary.byStatus.SUCCESS})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?"":"Failed"}),t.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"text-summary-failed",children:v.summary.byStatus.FAILED})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?" ":"Success Rate"}),t.jsxs("div",{className:"text-2xl font-bold text-brand-600","data-testid":"text-summary-rate",children:[v.summary.successRate.toFixed(1),"%"]})]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:x?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(ts,{className:"animate-spin text-brand-600",size:40})}):!v||v.items.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[t.jsx(Wr,{size:60,className:"mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-semibold",children:D==="ar"?"  ":"No records"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[900px]",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Date"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Customer"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Tool"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Input"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Output"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:v.items.map(re=>{var J,Ne,q,ce,fe,ie;return t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>_(re),"data-testid":`row-log-${re.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm text-slate-700 font-medium",children:Yo(re.createdAt)}),t.jsx("div",{className:"text-xs text-slate-400",children:ms(re.createdAt).split(" ").slice(-1)[0]})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm font-medium text-slate-700",children:re.customerName||"-"}),t.jsx("div",{className:"text-xs text-slate-400",children:re.customerId})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-brand-100 text-brand-700",children:[(J=Tc[re.toolType])==null?void 0:J.icon,D==="ar"?(Ne=Tc[re.toolType])==null?void 0:Ne.ar:(q=Tc[re.toolType])==null?void 0:q.en]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[150px] block",children:T(re)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[150px] block",children:z(re)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold ${(ce=_c[re.status])==null?void 0:ce.color}`,children:[re.status==="SUCCESS"&&t.jsx(Mt,{size:12}),re.status==="FAILED"&&t.jsx(sa,{size:12}),re.status==="PENDING"&&t.jsx(is,{size:12}),re.status==="PROCESSING"&&t.jsx(ts,{size:12,className:"animate-spin"}),D==="ar"?(fe=_c[re.status])==null?void 0:fe.ar:(ie=_c[re.status])==null?void 0:ie.en]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:ne=>{ne.stopPropagation(),_(re)},className:"p-1.5 text-slate-400 hover:text-brand-600 transition-colors","data-testid":`button-view-${re.id}`,children:t.jsx(ns,{size:16})})})]},re.id)})})]})}),k>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:[D==="ar"?"":"Showing"," ",((y.page||1)-1)*(y.pageSize||20)+1,"-",Math.min((y.page||1)*(y.pageSize||20),v.total)," ",D==="ar"?"":"of"," ",v.total]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>j(re=>({...re,page:Math.max(1,(re.page||1)-1)})),disabled:(y.page||1)===1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-prev-page-log",children:t.jsx(Ns,{size:18})}),t.jsxs("span",{className:"text-sm text-slate-600 px-3",children:[y.page||1," / ",k]}),t.jsx("button",{onClick:()=>j(re=>({...re,page:Math.min(k,(re.page||1)+1)})),disabled:(y.page||1)===k,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-next-page-log",children:t.jsx(hs,{size:18})})]})]})]})})]}),O&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>_(null),children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[80vh] overflow-y-auto",onClick:re=>re.stopPropagation(),children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:D==="ar"?" ":"Action Details"}),t.jsx("button",{onClick:()=>_(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-detail",children:t.jsx(sa,{size:20,className:"text-slate-400"})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Tool"}),t.jsx("div",{className:"mt-1",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-brand-100 text-brand-700",children:[(Q=Tc[O.toolType])==null?void 0:Q.icon,D==="ar"?(se=Tc[O.toolType])==null?void 0:se.ar:(V=Tc[O.toolType])==null?void 0:V.en]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Status"}),t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold ${(te=_c[O.status])==null?void 0:te.color}`,children:D==="ar"?(Z=_c[O.status])==null?void 0:Z.ar:(ue=_c[O.status])==null?void 0:ue.en})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Customer"}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:O.customerName||"-"}),t.jsx("p",{className:"text-xs text-slate-400",children:O.customerId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Date"}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:ms(O.createdAt)})]}),O.processingTimeMs&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?" ":"Processing Time"}),t.jsxs("p",{className:"text-sm text-slate-700",children:[(O.processingTimeMs/1e3).toFixed(2),"s"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Input"}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:T(O)}),O.inputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(zt,{size:12}),O.inputFileName]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Output"}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:z(O)}),O.outputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(zt,{size:12}),O.outputFileName]})]})]}),O.status==="FAILED"&&O.errorMessage&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-red-500 uppercase",children:D==="ar"?" ":"Error"}),t.jsx("div",{className:"mt-1 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:O.errorMessage})})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 pt-2 border-t border-slate-100",children:[t.jsxs("span",{children:["ID: ",O.id]}),t.jsx("span",{children:""}),t.jsx("span",{children:O.deviceType}),O.createdFromIp&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["IP: ",O.createdFromIp]})]})]})]})]})})]})},T0e=[{value:"SINI_FIRST_THEN_SUPPLIERS",labelAr:"   ",labelEn:"Sini First, Then Suppliers",descAr:"            ",descEn:"Search Sini inventory first, then supplier catalogs if not available"},{value:"SUPPLIERS_ONLY_WHEN_OUT_OF_STOCK",labelAr:"    ",labelEn:"Suppliers Only When Out of Stock",descAr:"           ",descEn:"Show supplier products only when item is out of stock at Sini"},{value:"RANDOM_SUPPLIER_WHEN_OUT_OF_STOCK",labelAr:"    ",labelEn:"Random Supplier When Out of Stock",descAr:"         ",descEn:"Pick a random supplier from available ones when product is not available"},{value:"LOWEST_PRICE_FIRST",labelAr:"  ",labelEn:"Lowest Price First",descAr:"          ",descEn:"Show product from supplier with lowest price regardless of stock"},{value:"HIGHEST_PRIORITY_FIRST",labelAr:"  ",labelEn:"Highest Priority First",descAr:"        ",descEn:"Show product from supplier with highest priority in ranking"}],_0e=()=>{const[e,s]=C.useState(null),[a,r]=C.useState([]),[n,i]=C.useState(!0),[l,o]=C.useState(!1),[d,u]=C.useState("GENERAL"),[h,f]=C.useState(null),[x,p]=C.useState(!1),[v,b]=C.useState({companyName:"",contactName:"",email:"",phone:"",supplierType:"LOCAL",deliveryHours:48,canPlaceOrders:!1,canRequestQuotes:!1,hasPointsAccount:!1,canViewPricing:!1,canUploadProducts:!0,maxProductsLimit:1e3}),{addToast:y}=It(),{language:j}=Hs();C.useEffect(()=>{w()},[]);const w=async()=>{i(!0);try{const[F,P]=await Promise.all([he.getSupplierMarketplaceSettings(),he.getSupplierProfiles()]);s(F),r(P)}catch{y(j==="ar"?"   ":"Failed to load settings","error")}finally{i(!1)}},S=async()=>{if(e){o(!0);try{await he.saveSupplierMarketplaceSettings(e),y(j==="ar"?"   ":"Settings saved successfully","success")}catch{y(j==="ar"?"   ":"Error saving settings","error")}finally{o(!1)}}},O=()=>{e&&s({...e,enabled:!e.enabled})},_=(F,P)=>{e&&s({...e,[F]:P})},E=()=>{if(!e)return;const F={supplierId:`SUP${Date.now()}`,supplierName:j==="ar"?" ":"New Supplier",priority:e.supplierPriorities.length+1,enabled:!0};s({...e,supplierPriorities:[...e.supplierPriorities,F]})},A=F=>{e&&s({...e,supplierPriorities:e.supplierPriorities.filter(P=>P.supplierId!==F)})},D=(F,P)=>{e&&s({...e,supplierPriorities:e.supplierPriorities.map(G=>G.supplierId===F?{...G,...P}:G)})},L=(F,P)=>{if(!e)return;const G=[...e.supplierPriorities],Y=G.findIndex(ee=>ee.supplierId===F);if(Y===-1)return;const W=P==="up"?Y-1:Y+1;W<0||W>=G.length||([G[Y],G[W]]=[G[W],G[Y]],G.forEach((ee,H)=>ee.priority=H+1),s({...e,supplierPriorities:G}))};if(n||!e)return t.jsxs("div",{className:"p-10 text-center",children:[t.jsx(Gt,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("span",{className:"text-slate-500",children:j==="ar"?" ...":"Loading..."})]});const B=({id:F,icon:P,label:G})=>t.jsxs("button",{onClick:()=>u(F),className:`flex items-center gap-3 px-5 py-3 rounded-xl transition-all font-bold ${d===F?"bg-brand-600 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,"data-testid":`section-${F.toLowerCase()}`,children:[P,t.jsx("span",{children:G})]}),I=a.filter(F=>F.supplierType==="LOCAL"||!F.supplierType&&F.supplierType!=="UNREGISTERED"),T=a.filter(F=>F.supplierType==="INTERNATIONAL"),z=a.filter(F=>F.supplierType==="UNREGISTERED"),k=async()=>{try{const F={supplierId:`SUP-${Date.now()}`,companyName:v.companyName,contactName:v.contactName,email:v.email,phone:v.phone,supplierType:v.supplierType,status:"ACTIVE",totalItemsListed:0,permissions:{canPlaceOrders:v.canPlaceOrders,canRequestQuotes:v.canRequestQuotes,hasPointsAccount:v.hasPointsAccount,canViewPricing:v.canViewPricing,canUploadProducts:v.canUploadProducts,maxProductsLimit:v.maxProductsLimit},createdAt:new Date().toISOString()};r([...a,F]),b({companyName:"",contactName:"",email:"",phone:"",supplierType:"LOCAL",deliveryHours:48,canPlaceOrders:!1,canRequestQuotes:!1,hasPointsAccount:!1,canViewPricing:!1,canUploadProducts:!0,maxProductsLimit:1e3}),y(j==="ar"?"   ":"Supplier added successfully","success"),u("LOCAL_SUPPLIERS")}catch{y(j==="ar"?"   ":"Failed to add supplier","error")}};return t.jsxs("div",{className:"animate-fade-in max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(ld,{className:"text-brand-600"}),j==="ar"?" ":"Suppliers & Settings"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:j==="ar"?"     ":"Manage local and international suppliers, permissions & products"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:O,className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold transition-all ${e.enabled?"bg-green-100 text-green-700 border-2 border-green-300":"bg-red-100 text-red-700 border-2 border-red-300"}`,"data-testid":"toggle-marketplace",children:[e.enabled?t.jsx(id,{size:18}):t.jsx(zu,{size:18}),e.enabled?j==="ar"?"":"Enabled":j==="ar"?"":"Disabled"]}),t.jsxs("button",{onClick:S,disabled:l,className:"bg-brand-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2 transition-all","data-testid":"btn-save-settings",children:[t.jsx(us,{size:18}),l?j==="ar"?" ...":"Saving...":j==="ar"?" ":"Save Settings"]})]})]}),!e.enabled&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(Cs,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-amber-800",children:j==="ar"?"   ":"Supplier Marketplace is Currently Disabled"}),t.jsx("p",{className:"text-sm text-amber-700",children:j==="ar"?"      ":"Enable the marketplace to show supplier products to customers"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx(B,{id:"GENERAL",icon:t.jsx(aa,{size:18}),label:j==="ar"?" ":"General Settings"}),t.jsx(B,{id:"PRIORITIES",icon:t.jsx(Rte,{size:18}),label:j==="ar"?" ":"Supplier Priorities"}),t.jsx(B,{id:"LOCAL_SUPPLIERS",icon:t.jsx(ta,{size:18}),label:j==="ar"?" ":"Local Suppliers"}),t.jsx(B,{id:"INTL_SUPPLIERS",icon:t.jsx(fr,{size:18}),label:j==="ar"?" ":"International Suppliers"}),t.jsx(B,{id:"UNREGISTERED_SUPPLIERS",icon:t.jsx(Cs,{size:18}),label:j==="ar"?" ":"Unregistered"}),t.jsx(B,{id:"ADD_SUPPLIER",icon:t.jsx(kt,{size:18}),label:j==="ar"?" ":"Add Supplier"})]}),d==="GENERAL"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:j==="ar"?"  ":"Supplier Selection Mode"}),t.jsx("div",{className:"space-y-3",children:T0e.map(F=>t.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all ${e.selectionMode===F.value?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300"}`,children:[t.jsx("input",{type:"radio",name:"selectionMode",value:F.value,checked:e.selectionMode===F.value,onChange:()=>_("selectionMode",F.value),className:"mt-1","data-testid":`radio-mode-${F.value}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:j==="ar"?F.labelAr:F.labelEn}),t.jsx("p",{className:"text-sm text-slate-500",children:j==="ar"?F.descAr:F.descEn})]})]},F.value))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(dr,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:j==="ar"?"  ":"Hide Supplier Identity"})]}),t.jsx("button",{onClick:()=>_("hideRealSupplierFromCustomer",!e.hideRealSupplierFromCustomer),className:`w-12 h-6 rounded-full transition-colors relative ${e.hideRealSupplierFromCustomer?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-hide-supplier",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.hideRealSupplierFromCustomer?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"     ":"Do not show real supplier name to customers"})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Yt,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:j==="ar"?"  ":"Show Stock Level"})]}),t.jsx("button",{onClick:()=>_("showSupplierStockLevel",!e.showSupplierStockLevel),className:`w-12 h-6 rounded-full transition-colors relative ${e.showSupplierStockLevel?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-show-stock",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.showSupplierStockLevel?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"     ":"Display available stock quantity from supplier"})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bn,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:j==="ar"?" ":"Supplier Rating"})]}),t.jsx("button",{onClick:()=>_("enableSupplierRating",!e.enableSupplierRating),className:`w-12 h-6 rounded-full transition-colors relative ${e.enableSupplierRating?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-rating",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.enableSupplierRating?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"     ":"Allow rating suppliers based on performance"})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Nr,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:j==="ar"?"  ":"New Product Notification"})]}),t.jsx("button",{onClick:()=>_("notifyAdminOnNewSupplierItem",!e.notifyAdminOnNewSupplierItem),className:`w-12 h-6 rounded-full transition-colors relative ${e.notifyAdminOnNewSupplierItem?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-notify",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.notifyAdminOnNewSupplierItem?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"       ":"Notify admin when new product is added by supplier"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Lo,{size:14}),j==="ar"?"  ":"Default Markup %"]}),t.jsx("input",{type:"number",value:e.defaultMarkupPercent||"",onChange:F=>_("defaultMarkupPercent",parseFloat(F.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",placeholder:"15","data-testid":"input-markup"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(mr,{size:14}),j==="ar"?"   %":"Min Profit Margin %"]}),t.jsx("input",{type:"number",value:e.minProfitMargin||"",onChange:F=>_("minProfitMargin",parseFloat(F.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",placeholder:"5","data-testid":"input-min-margin"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(is,{size:14}),j==="ar"?"   ()":"Max Lead Time (days)"]}),t.jsx("input",{type:"number",value:e.maxLeadTimeDays||"",onChange:F=>_("maxLeadTimeDays",parseInt(F.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",placeholder:"14","data-testid":"input-lead-time"})]})]})]}),d==="PRIORITIES"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:j==="ar"?"  ":"Supplier Priority Order"}),t.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors","data-testid":"btn-add-priority",children:[t.jsx(kt,{size:16}),j==="ar"?" ":"Add Supplier"]})]}),e.supplierPriorities.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500",children:[t.jsx(ta,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:j==="ar"?"   ":"No suppliers added yet"})]}):t.jsx("div",{className:"space-y-3",children:e.supplierPriorities.sort((F,P)=>F.priority-P.priority).map((F,P)=>t.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all ${F.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50 opacity-60"}`,"data-testid":`priority-${F.supplierId}`,children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>L(F.supplierId,"up"),disabled:P===0,className:"p-1 hover:bg-slate-100 rounded disabled:opacity-30",children:t.jsx(Qr,{size:16})}),t.jsx("button",{onClick:()=>L(F.supplierId,"down"),disabled:P===e.supplierPriorities.length-1,className:"p-1 hover:bg-slate-100 rounded disabled:opacity-30",children:t.jsx(Ir,{size:16})})]}),t.jsx("div",{className:"w-8 h-8 bg-brand-100 text-brand-600 rounded-lg flex items-center justify-center font-bold",children:F.priority}),t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"text",value:F.supplierName||"",onChange:G=>D(F.supplierId,{supplierName:G.target.value}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg font-bold",placeholder:j==="ar"?" ":"Supplier Name"})}),t.jsxs("div",{className:"w-24",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:F.minProfitMargin||"",onChange:G=>D(F.supplierId,{minProfitMargin:parseFloat(G.target.value)||0}),className:"w-full p-2 bg-amber-50 border border-amber-200 rounded-lg text-center font-bold text-amber-700",placeholder:"20",min:"0",max:"100","data-testid":`margin-${F.supplierId}`}),t.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-amber-500 text-xs font-bold",children:"%"})]}),t.jsx("p",{className:"text-[10px] text-slate-400 text-center mt-0.5",children:j==="ar"?" ":"Margin"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>D(F.supplierId,{enabled:!F.enabled}),className:`p-2 rounded-lg transition-colors ${F.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:F.enabled?t.jsx(id,{size:18}):t.jsx(zu,{size:18})}),t.jsx("button",{onClick:()=>A(F.supplierId),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(At,{size:18})})]})]},F.supplierId))})]}),(d==="LOCAL_SUPPLIERS"||d==="INTL_SUPPLIERS")&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:d==="LOCAL_SUPPLIERS"?j==="ar"?" ":"Local Suppliers":j==="ar"?" ":"International Suppliers"}),t.jsx("span",{className:"bg-brand-100 text-brand-700 px-3 py-1 rounded-full font-bold",children:d==="LOCAL_SUPPLIERS"?I.length:T.length})]}),(d==="LOCAL_SUPPLIERS"?I:T).length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500",children:[t.jsx(ta,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:j==="ar"?"   ":"No registered suppliers"}),t.jsx("button",{onClick:()=>u("ADD_SUPPLIER"),className:"mt-4 px-4 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700",children:j==="ar"?"  ":"Add New Supplier"})]}):t.jsx("div",{className:"space-y-4",children:(d==="LOCAL_SUPPLIERS"?I:T).map(F=>{var P,G,Y,W,ee;return t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-brand-300 transition-colors","data-testid":`supplier-${F.supplierId}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:F.companyName}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${F.status==="ACTIVE"?"bg-green-100 text-green-700":F.status==="PENDING"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:F.status==="ACTIVE"?j==="ar"?"":"Active":F.status==="PENDING"?j==="ar"?"":"Pending":j==="ar"?"":"Suspended"})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[F.contactName,"  ",F.email||F.phone]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{f(F),p(!0)},className:"p-2 bg-brand-50 text-brand-600 rounded-lg hover:bg-brand-100",title:j==="ar"?" ":"View Details",children:t.jsx(ns,{size:18})}),t.jsx("button",{className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200",children:t.jsx(aa,{size:18})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[t.jsxs("div",{className:"bg-white p-2 rounded-lg border border-slate-100",children:[t.jsx("p",{className:"text-slate-500",children:j==="ar"?"":"Products"}),t.jsx("p",{className:"font-bold text-slate-800",children:F.totalItemsListed||0})]}),F.avgRating&&t.jsxs("div",{className:"bg-white p-2 rounded-lg border border-slate-100",children:[t.jsx("p",{className:"text-slate-500",children:j==="ar"?"":"Rating"}),t.jsxs("p",{className:"font-bold text-amber-600 flex items-center gap-1",children:[t.jsx(bn,{size:14})," ",F.avgRating.toFixed(1)]})]}),t.jsxs("div",{className:"bg-white p-2 rounded-lg border border-slate-100",children:[t.jsx("p",{className:"text-slate-500",children:j==="ar"?" ":"Registered"}),t.jsx("p",{className:"font-bold text-slate-800",children:F.createdAt?new Date(F.createdAt).toLocaleDateString("en-GB"):"-"})]})]}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:j==="ar"?":":"Permissions:"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[((P=F.permissions)==null?void 0:P.canPlaceOrders)&&t.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:j==="ar"?" ":"Can Order"}),((G=F.permissions)==null?void 0:G.canRequestQuotes)&&t.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-full",children:j==="ar"?" ":"Quote Request"}),((Y=F.permissions)==null?void 0:Y.hasPointsAccount)&&t.jsx("span",{className:"px-2 py-1 bg-amber-50 text-amber-700 text-xs rounded-full",children:j==="ar"?" ":"Points Account"}),((W=F.permissions)==null?void 0:W.canViewPricing)&&t.jsx("span",{className:"px-2 py-1 bg-green-50 text-green-700 text-xs rounded-full",children:j==="ar"?" ":"View Pricing"}),((ee=F.permissions)==null?void 0:ee.canUploadProducts)&&t.jsx("span",{className:"px-2 py-1 bg-cyan-50 text-cyan-700 text-xs rounded-full",children:j==="ar"?" ":"Upload Products"})]})]})]},F.supplierId)})})]}),d==="UNREGISTERED_SUPPLIERS"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Cs,{className:"text-amber-500",size:20}),j==="ar"?"  ":"Unregistered Suppliers"]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:j==="ar"?"     -    ":"Suppliers without platform account - manual contact"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full font-bold",children:z.length}),t.jsxs("button",{onClick:()=>u("ADD_SUPPLIER"),className:"px-4 py-2 bg-amber-500 text-white rounded-lg font-bold hover:bg-amber-600 flex items-center gap-2",children:[t.jsx(kt,{size:16}),j==="ar"?"":"Add"]})]})]}),z.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500 bg-amber-50 rounded-xl border-2 border-dashed border-amber-200",children:[t.jsx(Cs,{size:48,className:"mx-auto mb-4 text-amber-400"}),t.jsx("p",{className:"font-bold text-amber-700",children:j==="ar"?"    ":"No unregistered suppliers"}),t.jsx("p",{className:"text-sm text-amber-600 mt-1",children:j==="ar"?"      ":"Add an unregistered supplier to upload their products manually"}),t.jsx("button",{onClick:()=>{b({...v,supplierType:"UNREGISTERED"}),u("ADD_SUPPLIER")},className:"mt-4 px-4 py-2 bg-amber-500 text-white rounded-lg font-bold hover:bg-amber-600",children:j==="ar"?"   ":"Add Unregistered Supplier"})]}):t.jsx("div",{className:"space-y-4",children:z.map(F=>t.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl border-2 border-amber-200 hover:border-amber-400 transition-colors","data-testid":`supplier-${F.supplierId}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:F.companyName}),t.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-amber-200 text-amber-800",children:[" ",j==="ar"?" ":"Unregistered"]}),F.deliveryHours&&t.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-700",children:[" ",F.deliveryHours," ",j==="ar"?"":"hours"]})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[F.contactName,"  ",F.phone]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"p-2 bg-amber-100 text-amber-700 rounded-lg hover:bg-amber-200 flex items-center gap-1",title:j==="ar"?"  Excel":"Upload Excel Products",children:[t.jsx(Yt,{size:18}),t.jsx("span",{className:"text-xs font-bold hidden md:inline",children:j==="ar"?" ":"Upload"})]}),t.jsx("button",{onClick:()=>{f(F),p(!0)},className:"p-2 bg-white text-slate-600 rounded-lg hover:bg-slate-100 border border-slate-200",title:j==="ar"?" ":"View Details",children:t.jsx(ns,{size:18})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[t.jsxs("div",{className:"bg-white p-2 rounded-lg border border-amber-100",children:[t.jsx("p",{className:"text-slate-500",children:j==="ar"?"":"Products"}),t.jsx("p",{className:"font-bold text-slate-800",children:F.totalItemsListed||0})]}),t.jsxs("div",{className:"bg-white p-2 rounded-lg border border-amber-100",children:[t.jsx("p",{className:"text-slate-500",children:j==="ar"?" ":"Delivery"}),t.jsxs("p",{className:"font-bold text-blue-600",children:[F.deliveryHours||48," ",j==="ar"?"":"h"]})]}),t.jsxs("div",{className:"bg-white p-2 rounded-lg border border-amber-100",children:[t.jsx("p",{className:"text-slate-500",children:j==="ar"?" ":"Added"}),t.jsx("p",{className:"font-bold text-slate-800",children:F.createdAt?new Date(F.createdAt).toLocaleDateString("en-GB"):"-"})]}),t.jsxs("div",{className:"bg-white p-2 rounded-lg border border-amber-100",children:[t.jsx("p",{className:"text-slate-500",children:j==="ar"?"":"Phone"}),t.jsx("p",{className:"font-bold text-slate-800 text-xs",children:F.phone||"-"})]})]})]},F.supplierId))})]}),d==="ADD_SUPPLIER"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(kt,{size:20,className:"text-brand-600"}),j==="ar"?"  ":"Add New Supplier"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-bold text-slate-700",children:j==="ar"?" ":"Basic Information"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:j==="ar"?" ":"Company Name"}),t.jsx("input",{type:"text",value:v.companyName,onChange:F=>b({...v,companyName:F.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:j==="ar"?":  ":"e.g. Al-Wafa Company"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:j==="ar"?" ":"Contact Name"}),t.jsx("input",{type:"text",value:v.contactName,onChange:F=>b({...v,contactName:F.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:j==="ar"?" ":"Email"}),t.jsx("input",{type:"email",value:v.email,onChange:F=>b({...v,email:F.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:j==="ar"?" ":"Phone"}),t.jsx("input",{type:"tel",value:v.phone,onChange:F=>b({...v,phone:F.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:j==="ar"?" ":"Supplier Type"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>b({...v,supplierType:"LOCAL"}),className:`flex-1 py-3 rounded-xl font-bold transition-all text-sm ${v.supplierType==="LOCAL"?"bg-brand-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:j==="ar"?"":"Local"}),t.jsx("button",{onClick:()=>b({...v,supplierType:"INTERNATIONAL"}),className:`flex-1 py-3 rounded-xl font-bold transition-all text-sm ${v.supplierType==="INTERNATIONAL"?"bg-brand-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:j==="ar"?"":"International"}),t.jsx("button",{onClick:()=>b({...v,supplierType:"UNREGISTERED"}),className:`flex-1 py-3 rounded-xl font-bold transition-all text-sm ${v.supplierType==="UNREGISTERED"?"bg-amber-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:j==="ar"?" ":"Unregistered"})]}),v.supplierType==="UNREGISTERED"&&t.jsx("p",{className:"text-xs text-amber-600 mt-2",children:j==="ar"?"    -         ":" Supplier without account - manual contact, products uploaded by Sini Car"})]}),v.supplierType==="UNREGISTERED"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:j==="ar"?"  ()":"Delivery Time (hours)"}),t.jsxs("div",{className:"flex gap-2",children:[[24,48,72,96].map(F=>t.jsxs("button",{onClick:()=>b({...v,deliveryHours:F}),className:`flex-1 py-2 rounded-lg font-bold transition-all ${v.deliveryHours===F?"bg-amber-500 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[F," ",j==="ar"?"":"h"]},F)),t.jsx("input",{type:"number",value:v.deliveryHours,onChange:F=>b({...v,deliveryHours:parseInt(F.target.value)||48}),className:"w-20 p-2 bg-slate-50 border border-slate-200 rounded-lg text-center font-bold",min:"1"})]}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:j==="ar"?'   " X "':'Will show to customer as "Order X hours"'})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-bold text-slate-700",children:j==="ar"?" ":"Special Permissions"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer hover:bg-slate-100",children:[t.jsx("input",{type:"checkbox",checked:v.canUploadProducts,onChange:F=>b({...v,canUploadProducts:F.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-brand-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:j==="ar"?" ":"Upload Products"}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"   ":"Allow uploading and managing products"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer hover:bg-slate-100",children:[t.jsx("input",{type:"checkbox",checked:v.canPlaceOrders,onChange:F=>b({...v,canPlaceOrders:F.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-brand-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:j==="ar"?"  ()":"Place Orders (as Customer)"}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"   ":"Can place orders like a customer"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer hover:bg-slate-100",children:[t.jsx("input",{type:"checkbox",checked:v.canRequestQuotes,onChange:F=>b({...v,canRequestQuotes:F.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-brand-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:j==="ar"?"  ":"Request Quotes"}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"  ":"Request price quotes"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer hover:bg-slate-100",children:[t.jsx("input",{type:"checkbox",checked:v.hasPointsAccount,onChange:F=>b({...v,hasPointsAccount:F.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-brand-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:j==="ar"?" ":"Points Account"}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"   ":"Link to points and rewards system"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl cursor-pointer hover:bg-slate-100",children:[t.jsx("input",{type:"checkbox",checked:v.canViewPricing,onChange:F=>b({...v,canViewPricing:F.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-brand-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:j==="ar"?" ":"View Pricing"}),t.jsx("p",{className:"text-xs text-slate-500",children:j==="ar"?"  ":"View product pricing"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:j==="ar"?"  ":"Max Products Limit"}),t.jsx("input",{type:"number",value:v.maxProductsLimit,onChange:F=>b({...v,maxProductsLimit:parseInt(F.target.value)||1e3}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]})]})]}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>u("LOCAL_SUPPLIERS"),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200",children:j==="ar"?"":"Cancel"}),t.jsxs("button",{onClick:k,disabled:!v.companyName||!v.contactName,className:"px-6 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(kt,{size:18}),j==="ar"?" ":"Add Supplier"]})]})]})]})},k0e=()=>{const[e,s]=C.useState("MARKETERS"),[a,r]=C.useState([]),[n,i]=C.useState([]),[l,o]=C.useState(null),[d,u]=C.useState(!0),[h,f]=C.useState(!1),[x,p]=C.useState(!1),[v,b]=C.useState(null),[y,j]=C.useState(""),[w,S]=C.useState(null),[O,_]=C.useState({name:"",phone:"",email:"",commissionType:"PERCENT",commissionValue:0,notes:""}),{addToast:E}=It(),{language:A}=Hs();C.useEffect(()=>{D()},[]);const D=async()=>{u(!0);try{const[W,ee,H]=await Promise.all([he.getMarketers(),he.getMarketerCommissions(),he.getMarketerSettings()]);r(W),i(ee),o(H)}catch{E(A==="ar"?"   ":"Failed to load data","error")}finally{u(!1)}},L=async()=>{if(l){f(!0);try{await he.saveMarketerSettings(l),E(A==="ar"?"   ":"Settings saved successfully","success")}catch{E(A==="ar"?"   ":"Error saving settings","error")}finally{f(!1)}}},B=async()=>{if(!O.name||!O.phone){E(A==="ar"?"    ":"Please enter name and phone","error");return}try{await he.addMarketer({name:O.name,phone:O.phone,email:O.email,commissionType:O.commissionType,commissionValue:O.commissionValue||(l==null?void 0:l.defaultCommissionValue)||2,active:!0,notes:O.notes}),E(A==="ar"?"   ":"Marketer added successfully","success"),p(!1),_({name:"",phone:"",email:"",commissionType:"PERCENT",commissionValue:0,notes:""}),D()}catch{E(A==="ar"?"   ":"Error adding marketer","error")}},I=async W=>{const ee=a.find(H=>H.id===W);ee&&(await he.updateMarketer(W,{active:!ee.active}),r(H=>H.map(M=>M.id===W?{...M,active:!M.active}:M)),E(ee.active?A==="ar"?"  ":"Marketer disabled":A==="ar"?"  ":"Marketer enabled","info"))},T=async W=>{confirm(A==="ar"?"      ":"Are you sure you want to delete this marketer?")&&(await he.deleteMarketer(W),r(ee=>ee.filter(H=>H.id!==W)),E(A==="ar"?"  ":"Marketer deleted","info"))},z=W=>{navigator.clipboard.writeText(W),S(W),setTimeout(()=>S(null),2e3)},k=W=>{navigator.clipboard.writeText(W),E(A==="ar"?"  ":"Link copied","success")},F=async(W,ee)=>{await he.updateMarketerCommissionStatus(W,ee,"admin"),i(H=>H.map(M=>M.id===W?{...M,status:ee,approvedAt:ee==="APPROVED"?new Date().toISOString():M.approvedAt}:M)),E(A==="ar"?`    ${ee==="APPROVED"?"":ee==="PAID"?"":ee}`:`Status updated to ${ee}`,"success")},P=a.filter(W=>W.name.toLowerCase().includes(y.toLowerCase())||W.phone.includes(y)||W.referralCode.toLowerCase().includes(y.toLowerCase()));if(d||!l)return t.jsxs("div",{className:"p-10 text-center",children:[t.jsx(Gt,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("span",{className:"text-slate-500",children:A==="ar"?" ...":"Loading..."})]});const G=({id:W,icon:ee,label:H,count:M})=>t.jsxs("button",{onClick:()=>s(W),className:`flex items-center gap-3 px-5 py-3 rounded-xl transition-all font-bold relative ${e===W?"bg-brand-600 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,"data-testid":`tab-${W.toLowerCase()}`,children:[ee,t.jsx("span",{children:H}),M!==void 0&&M>0&&t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${e===W?"bg-white/20 text-white":"bg-brand-100 text-brand-600"}`,children:M})]}),Y=W=>{const ee={PENDING:"bg-amber-100 text-amber-700",APPROVED:"bg-blue-100 text-blue-700",PAID:"bg-green-100 text-green-700",CANCELLED:"bg-red-100 text-red-700"},H={PENDING:A==="ar"?" ":"Pending",APPROVED:A==="ar"?"":"Approved",PAID:A==="ar"?"":"Paid",CANCELLED:A==="ar"?"":"Cancelled"};return t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${ee[W]}`,children:H[W]})};return t.jsxs("div",{className:"animate-fade-in max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(Wt,{className:"text-brand-600"}),A==="ar"?" ":"Marketer Management"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:A==="ar"?"     ":"Manage affiliate marketing program and track referrals"})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("button",{onClick:()=>l&&o({...l,enabled:!l.enabled}),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold transition-all ${l.enabled?"bg-green-100 text-green-700 border-2 border-green-300":"bg-red-100 text-red-700 border-2 border-red-300"}`,"data-testid":"toggle-system",children:[l.enabled?t.jsx(id,{size:18}):t.jsx(zu,{size:18}),l.enabled?A==="ar"?"":"Enabled":A==="ar"?"":"Disabled"]})})]}),!l.enabled&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(Cs,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-amber-800",children:A==="ar"?"   ":"Marketer System is Currently Disabled"}),t.jsx("p",{className:"text-sm text-amber-700",children:A==="ar"?"      ":"Enable the system to track referrals and calculate commissions"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx(G,{id:"MARKETERS",icon:t.jsx(Wt,{size:18}),label:A==="ar"?"":"Marketers",count:a.length}),t.jsx(G,{id:"COMMISSIONS",icon:t.jsx(mr,{size:18}),label:A==="ar"?"":"Commissions",count:n.filter(W=>W.status==="PENDING").length}),t.jsx(G,{id:"SETTINGS",icon:t.jsx(aa,{size:18}),label:A==="ar"?"":"Settings"})]}),e==="MARKETERS"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(Lt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",value:y,onChange:W=>j(W.target.value),placeholder:A==="ar"?"     ...":"Search by name, phone or code...",className:"w-full pr-10 pl-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",dir:"rtl","data-testid":"search-marketers"})]}),t.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-5 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 transition-colors","data-testid":"btn-add-marketer",children:[t.jsx(al,{size:18}),A==="ar"?" ":"Add Marketer"]})]}),x&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(al,{className:"text-brand-600"}),A==="ar"?"  ":"Add New Marketer"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:A==="ar"?" *":"Name *"}),t.jsx("input",{type:"text",value:O.name,onChange:W=>_({...O,name:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"input-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:A==="ar"?"  *":"Phone *"}),t.jsx("input",{type:"tel",value:O.phone,onChange:W=>_({...O,phone:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr","data-testid":"input-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:A==="ar"?" ":"Email"}),t.jsx("input",{type:"email",value:O.email,onChange:W=>_({...O,email:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr","data-testid":"input-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:A==="ar"?" ":"Commission Type"}),t.jsxs("select",{value:O.commissionType,onChange:W=>_({...O,commissionType:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"select-commission-type",children:[t.jsx("option",{value:"PERCENT",children:A==="ar"?" ":"Percentage"}),t.jsx("option",{value:"FIXED",children:A==="ar"?" ":"Fixed Amount"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:A==="ar"?" ":"Commission Value"}),t.jsx("input",{type:"number",value:O.commissionValue||"",onChange:W=>_({...O,commissionValue:parseFloat(W.target.value)||0}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:`${l.defaultCommissionValue}${O.commissionType==="PERCENT"?"%":" SAR"}`,"data-testid":"input-commission-value"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:A==="ar"?"":"Notes"}),t.jsx("textarea",{value:O.notes,onChange:W=>_({...O,notes:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl resize-none",rows:2,"data-testid":"input-notes"})]})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:()=>p(!1),className:"px-5 py-2 bg-slate-100 text-slate-600 rounded-lg font-bold hover:bg-slate-200 transition-colors",children:A==="ar"?"":"Cancel"}),t.jsxs("button",{onClick:B,className:"px-5 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors flex items-center gap-2","data-testid":"btn-save-marketer",children:[t.jsx(kt,{size:16}),A==="ar"?"":"Add"]})]})]}),P.length===0?t.jsxs("div",{className:"bg-white p-12 rounded-2xl shadow-sm border border-slate-100 text-center",children:[t.jsx(Wt,{size:48,className:"mx-auto mb-4 text-slate-300"}),t.jsx("p",{className:"text-slate-500",children:A==="ar"?"  ":"No marketers found"})]}):t.jsx("div",{className:"space-y-3",children:P.map(W=>t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border transition-all ${W.active?"border-slate-100":"border-slate-200 opacity-75"}`,"data-testid":`marketer-${W.id}`,children:[t.jsxs("div",{className:"p-5 flex items-center justify-between cursor-pointer hover:bg-slate-50 rounded-t-2xl transition-colors",onClick:()=>b(v===W.id?null:W.id),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg ${W.active?"bg-brand-100 text-brand-600":"bg-slate-100 text-slate-400"}`,children:W.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-slate-800",children:W.name}),t.jsx("p",{className:"text-sm text-slate-500",children:W.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-left hidden md:block",children:[t.jsx("p",{className:"text-sm text-slate-500",children:A==="ar"?" ":"Referral Code"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"font-mono font-bold text-brand-600",children:W.referralCode}),t.jsx("button",{onClick:ee=>{ee.stopPropagation(),z(W.referralCode)},className:"p-1 hover:bg-slate-100 rounded",children:w===W.referralCode?t.jsx(es,{size:14,className:"text-green-600"}):t.jsx(qp,{size:14})})]})]}),t.jsxs("div",{className:"text-left hidden md:block",children:[t.jsx("p",{className:"text-sm text-slate-500",children:A==="ar"?"":"Commission"}),t.jsxs("p",{className:"font-bold text-slate-800",children:[W.commissionValue,W.commissionType==="PERCENT"?"%":" SAR"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:ee=>{ee.stopPropagation(),I(W.id)},className:`p-2 rounded-lg transition-colors ${W.active?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:W.active?t.jsx(id,{size:18}):t.jsx(zu,{size:18})}),v===W.id?t.jsx(Qr,{size:20}):t.jsx(Ir,{size:20})]})]})]}),v===W.id&&t.jsxs("div",{className:"border-t border-slate-100 p-5 space-y-4 animate-slide-up",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:A==="ar"?"":"Referrals"}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:W.totalReferrals||0})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-green-600 mb-1",children:A==="ar"?" ":"Total Earnings"}),t.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[(W.totalEarnings||0).toFixed(2)," SAR"]})]}),t.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-amber-600 mb-1",children:A==="ar"?" ":"Pending"}),t.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:[(W.pendingEarnings||0).toFixed(2)," SAR"]})]}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-blue-600 mb-1",children:A==="ar"?"":"Paid"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[(W.paidEarnings||0).toFixed(2)," SAR"]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:A==="ar"?" ":"Referral Link"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:W.referralUrl,readOnly:!0,className:"flex-1 p-2 bg-white border border-slate-200 rounded-lg font-mono text-sm",dir:"ltr"}),t.jsx("button",{onClick:()=>k(W.referralUrl),className:"p-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:t.jsx(qp,{size:18})})]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsxs("button",{onClick:()=>T(W.id),className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg font-bold hover:bg-red-100 transition-colors",children:[t.jsx(At,{size:16}),A==="ar"?"":"Delete"]})})]})]},W.id))})]}),e==="COMMISSIONS"&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[t.jsx("div",{className:"p-5 border-b border-slate-100",children:t.jsx("h2",{className:"font-bold text-lg text-slate-800",children:A==="ar"?" ":"Commission History"})}),n.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(mr,{size:48,className:"mx-auto mb-4 text-slate-300"}),t.jsx("p",{className:"text-slate-500",children:A==="ar"?"  ":"No commissions found"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:A==="ar"?"":"Marketer"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:A==="ar"?"":"Order"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:A==="ar"?" ":"Order Value"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:A==="ar"?"":"Commission"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:A==="ar"?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:A==="ar"?"":"Date"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:A==="ar"?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(W=>{const ee=a.find(H=>H.id===W.marketerId);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`commission-${W.id}`,children:[t.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:(ee==null?void 0:ee.name)||"-"}),t.jsx("td",{className:"px-4 py-3 text-slate-600",children:W.orderId}),t.jsxs("td",{className:"px-4 py-3 font-medium text-slate-800",children:[W.orderTotal.toFixed(2)," SAR"]}),t.jsxs("td",{className:"px-4 py-3 font-bold text-green-600",children:[W.commissionAmount.toFixed(2)," SAR"]}),t.jsx("td",{className:"px-4 py-3",children:Y(W.status)}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:new Date(W.calculatedAt).toLocaleDateString("ar-SA")}),t.jsxs("td",{className:"px-4 py-3",children:[W.status==="PENDING"&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>F(W.id,"APPROVED"),className:"p-1.5 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",title:A==="ar"?"":"Approve",children:t.jsx(es,{size:14})}),t.jsx("button",{onClick:()=>F(W.id,"CANCELLED"),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:A==="ar"?"":"Cancel",children:t.jsx(vt,{size:14})})]}),W.status==="APPROVED"&&t.jsxs("button",{onClick:()=>F(W.id,"PAID"),className:"flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 text-sm font-bold",children:[t.jsx(ab,{size:14}),A==="ar"?"":"Pay"]})]})]},W.id)})})]})})]}),e==="SETTINGS"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:A==="ar"?"  ":"Marketing Program Settings"}),t.jsxs("button",{onClick:L,disabled:h,className:"flex items-center gap-2 px-5 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors disabled:opacity-50","data-testid":"btn-save-settings",children:[t.jsx(us,{size:16}),h?A==="ar"?" ...":"Saving...":A==="ar"?"":"Save"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(hh,{size:14}),A==="ar"?"  ()":"Attribution Window (days)"]}),t.jsx("input",{type:"number",value:l.attributionWindowDays,onChange:W=>o({...l,attributionWindowDays:parseInt(W.target.value)||90}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"input-attribution-days"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:A==="ar"?"      ":"Period during which referral is counted after registration"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Lo,{size:14}),A==="ar"?" ":"Default Commission"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:l.defaultCommissionType,onChange:W=>o({...l,defaultCommissionType:W.target.value}),className:"p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"select-default-type",children:[t.jsx("option",{value:"PERCENT",children:A==="ar"?"":"%"}),t.jsx("option",{value:"FIXED",children:A==="ar"?"":"Fixed"})]}),t.jsx("input",{type:"number",value:l.defaultCommissionValue,onChange:W=>o({...l,defaultCommissionValue:parseFloat(W.target.value)||0}),className:"flex-1 p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"input-default-value"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(dne,{size:14}),A==="ar"?"  ":"Min Payout Amount"]}),t.jsx("input",{type:"number",value:l.minPayoutAmount||"",onChange:W=>o({...l,minPayoutAmount:parseFloat(W.target.value)||void 0}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:"500 SAR","data-testid":"input-min-payout"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(is,{size:14}),A==="ar"?"  ()":"Payment Cycle (days)"]}),t.jsx("input",{type:"number",value:l.paymentCycleDays||"",onChange:W=>o({...l,paymentCycleDays:parseInt(W.target.value)||void 0}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:"30","data-testid":"input-payment-cycle"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:A==="ar"?" ":"Auto-Approve Commissions"}),t.jsx("p",{className:"text-xs text-slate-500",children:A==="ar"?"  ":"Automatically approve commissions"})]}),t.jsx("button",{onClick:()=>o({...l,autoApproveCommissions:!l.autoApproveCommissions}),className:`w-12 h-6 rounded-full transition-colors relative ${l.autoApproveCommissions?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-auto-approve",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.autoApproveCommissions?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:A==="ar"?"  ":"Show Customer Names"}),t.jsx("p",{className:"text-xs text-slate-500",children:A==="ar"?"    ":"Allow marketer to see customer names"})]}),t.jsx("button",{onClick:()=>o({...l,marketerCanViewCustomerNames:!l.marketerCanViewCustomerNames}),className:`w-12 h-6 rounded-full transition-colors relative ${l.marketerCanViewCustomerNames?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-show-names",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.marketerCanViewCustomerNames?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:A==="ar"?"  ":"Show Order Totals"}),t.jsx("p",{className:"text-xs text-slate-500",children:A==="ar"?"    ":"Allow marketer to see order totals"})]}),t.jsx("button",{onClick:()=>o({...l,marketerCanViewOrderTotals:!l.marketerCanViewOrderTotals}),className:`w-12 h-6 rounded-full transition-colors relative ${l.marketerCanViewOrderTotals?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-show-totals",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.marketerCanViewOrderTotals?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:A==="ar"?"  ":"Notify on Referral"}),t.jsx("p",{className:"text-xs text-slate-500",children:A==="ar"?"     ":"Notify marketer when new customer registers"})]}),t.jsx("button",{onClick:()=>o({...l,notifyMarketerOnReferral:!l.notifyMarketerOnReferral}),className:`w-12 h-6 rounded-full transition-colors relative ${l.notifyMarketerOnReferral?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-notify-referral",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.notifyMarketerOnReferral?"right-1":"left-1"}`})})]})]})]})]})},O0e={PENDING_SINICAR_REVIEW:{labelAr:" ",labelEn:"Pending Review",color:"bg-amber-100 text-amber-700",icon:t.jsx(is,{size:16})},WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR:{labelAr:"  ",labelEn:"Awaiting Customer Decision",color:"bg-blue-100 text-blue-700",icon:t.jsx(Ks,{size:16})},REJECTED_BY_SINICAR:{labelAr:"   ",labelEn:"Rejected by SINI CAR",color:"bg-red-100 text-red-700",icon:t.jsx(sa,{size:16})},FORWARDED_TO_SUPPLIERS:{labelAr:" ",labelEn:"Forwarded to Suppliers",color:"bg-purple-100 text-purple-700",icon:t.jsx(fr,{size:16})},WAITING_FOR_SUPPLIER_OFFERS:{labelAr:"  ",labelEn:"Waiting for Supplier Offers",color:"bg-indigo-100 text-indigo-700",icon:t.jsx(is,{size:16})},WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER:{labelAr:"     ",labelEn:"Awaiting Customer Decision on Supplier Offer",color:"bg-blue-100 text-blue-700",icon:t.jsx(Ks,{size:16})},ACTIVE_CONTRACT:{labelAr:" ",labelEn:"Active Contract",color:"bg-green-100 text-green-700",icon:t.jsx(Mt,{size:16})},CLOSED:{labelAr:"",labelEn:"Closed",color:"bg-slate-100 text-slate-600",icon:t.jsx($p,{size:16})},CANCELLED:{labelAr:"",labelEn:"Cancelled",color:"bg-slate-100 text-slate-600",icon:t.jsx(sa,{size:16})}},I0e=[{key:"pending",labelAr:" ",labelEn:"New Requests",icon:t.jsx(is,{size:18})},{key:"customer-decisions",labelAr:" ",labelEn:"Customer Decisions",icon:t.jsx(Wt,{size:18})},{key:"forwarded",labelAr:" ",labelEn:"Forwarded",icon:t.jsx(fr,{size:18})},{key:"active",labelAr:" ",labelEn:"Active Contracts",icon:t.jsx(Mt,{size:18})},{key:"settings",labelAr:"",labelEn:"Settings",icon:t.jsx(aa,{size:18})},{key:"credit-profiles",labelAr:" ",labelEn:"Credit Profiles",icon:t.jsx(bn,{size:18})}],R0e=()=>{const[e,s]=C.useState(!0),[a,r]=C.useState("pending"),[n,i]=C.useState([]),[l,o]=C.useState([]),[d,u]=C.useState(null),[h,f]=C.useState([]),[x,p]=C.useState(null),[v,b]=C.useState(null),[y,j]=C.useState(!1),{addToast:w}=It(),{t:S,language:O}=Hs(),_=O==="ar";C.useEffect(()=>{E()},[]);const E=async()=>{s(!0);try{const[k,F,P,G,Y]=await Promise.all([he.getInstallmentRequests(),he.getInstallmentOffers(),he.getInstallmentSettings(),he.getCustomerCreditProfiles(),he.getInstallmentStats()]);i(k),o(F),u(P),f(G),p(Y)}catch{w(S("installment.loadError","    "),"error")}finally{s(!1)}},A=k=>new Date(k).toLocaleDateString(_?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric"}),D=k=>new Intl.NumberFormat(_?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0}).format(k),L=()=>{switch(a){case"pending":return n.filter(k=>k.status==="PENDING_SINICAR_REVIEW");case"customer-decisions":return n.filter(k=>["WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR","WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER"].includes(k.status));case"forwarded":return n.filter(k=>["FORWARDED_TO_SUPPLIERS","WAITING_FOR_SUPPLIER_OFFERS"].includes(k.status));case"active":return n.filter(k=>k.status==="ACTIVE_CONTRACT");default:return[]}},B=n.filter(k=>k.status==="PENDING_SINICAR_REVIEW").length,I=n.filter(k=>["WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR","WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER"].includes(k.status)).length,T=n.filter(k=>["FORWARDED_TO_SUPPLIERS","WAITING_FOR_SUPPLIER_OFFERS"].includes(k.status)).length,z=n.filter(k=>k.status==="ACTIVE_CONTRACT").length;return e?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(Gt,{className:"animate-spin text-brand-600",size:48})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.jsx(ab,{className:"text-brand-600",size:28}),S("installment.adminTitle","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:S("installment.adminSubtitle","    ")})]}),t.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-refresh",children:[t.jsx(Gt,{size:18}),S("common.refresh","")]})]}),x&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-brand-100 rounded-lg",children:t.jsx(zt,{className:"text-brand-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:S("installment.totalRequests"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:x.totalRequests})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:t.jsx(is,{className:"text-amber-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:S("installment.pendingRequests"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:x.pendingRequests})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(Mt,{className:"text-green-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:S("installment.activeContracts"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:x.activeContracts})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(mr,{className:"text-blue-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:S("installment.approvedValue","  ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:D(x.totalApprovedValue)})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:t.jsx(gi,{className:"text-emerald-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:S("installment.totalPaid"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:D(x.totalPaidAmount)})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(Ks,{className:"text-red-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:S("installment.overdueAmount","")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:D(x.totalOverdueAmount)})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"flex border-b border-slate-200 overflow-x-auto",children:I0e.map(k=>{let F=0;return k.key==="pending"?F=B:k.key==="customer-decisions"?F=I:k.key==="forwarded"?F=T:k.key==="active"?F=z:k.key==="credit-profiles"&&(F=h.length),t.jsxs("button",{onClick:()=>r(k.key),className:`flex items-center gap-2 px-4 py-3 font-medium whitespace-nowrap transition-colors ${a===k.key?"text-brand-600 border-b-2 border-brand-600 bg-brand-50":"text-slate-600 hover:text-brand-600 hover:bg-slate-50"}`,"data-testid":`tab-${k.key}`,children:[k.icon,_?k.labelAr:k.labelEn,F>0&&t.jsx("span",{className:"bg-brand-100 text-brand-700 px-2 py-0.5 rounded-full text-xs",children:F})]},k.key)})}),t.jsxs("div",{className:"p-4",children:[(a==="pending"||a==="customer-decisions"||a==="forwarded"||a==="active")&&t.jsx(P0e,{requests:L(),offers:l,settings:d,onSelectRequest:b,selectedRequest:v,onRefresh:E,t:S,isRTL:_,formatDate:A,formatCurrency:D,showActions:a==="pending"}),a==="settings"&&d&&t.jsx(M0e,{settings:d,onSave:async k=>{try{await he.updateInstallmentSettings(k),await E(),w(S("installment.settingsSaved","  "),"success")}catch{w(S("installment.settingsError","    "),"error")}},t:S,isRTL:_}),a==="credit-profiles"&&t.jsx(L0e,{profiles:h,t:S,isRTL:_,formatCurrency:D})]})]}),v&&a==="pending"&&t.jsx(D0e,{request:v,settings:d,onClose:()=>b(null),onAction:async(k,F)=>{j(!0);try{k==="approve_full"||k==="approve_partial"?(await he.recordSinicarDecision(v.id,{decisionType:k,offer:F==null?void 0:F.offer,adminNotes:F==null?void 0:F.notes}),w(S("installment.decisionRecorded","  "),"success")):k==="reject"?(await he.recordSinicarDecision(v.id,{decisionType:"reject",adminNotes:F==null?void 0:F.notes,forwardToSuppliers:F==null?void 0:F.forwardToSuppliers,supplierIds:F==null?void 0:F.supplierIds}),w(S("installment.requestRejected","  "),"success")):k==="forward"&&(await he.forwardRequestToSuppliers(v.id,(F==null?void 0:F.supplierIds)||[]),w(S("installment.forwarded","   "),"success")),await E(),b(null)}catch(P){w(P.message||S("installment.actionError"," "),"error")}finally{j(!1)}},processing:y,t:S,isRTL:_,formatCurrency:D})]})},P0e=({requests:e,offers:s,settings:a,onSelectRequest:r,selectedRequest:n,onRefresh:i,t:l,isRTL:o,formatDate:d,formatCurrency:u,showActions:h})=>e.length===0?t.jsxs("div",{className:"py-12 text-center text-slate-500",children:[t.jsx(zt,{className:"mx-auto mb-4 text-slate-300",size:48}),t.jsx("p",{children:l("installment.noRequestsInTab","     ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.requestId"," ")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.customer","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.amount","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.duration","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.date","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.status","")}),h&&t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(f=>{const x=O0e[f.status];return s.filter(p=>p.requestId===f.id),t.jsxs("tr",{className:`hover:bg-slate-50 ${(n==null?void 0:n.id)===f.id?"bg-brand-50":""}`,children:[t.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:["#",f.id.slice(-8)]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:f.customerName||f.customerId}),t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:u(f.totalRequestedValue||0)}),t.jsxs("td",{className:"px-4 py-3 text-sm text-slate-600",children:[f.requestedDurationMonths," ",l("installment.months","")]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:d(f.createdAt)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium w-fit ${x==null?void 0:x.color}`,children:[x==null?void 0:x.icon,o?x==null?void 0:x.labelAr:x==null?void 0:x.labelEn]})}),h&&t.jsx("td",{className:"px-4 py-3",children:t.jsxs("button",{onClick:()=>r(f),className:"flex items-center gap-1 px-3 py-1.5 bg-brand-600 hover:bg-brand-700 text-white text-sm rounded-lg transition-colors","data-testid":`button-review-${f.id}`,children:[t.jsx(ns,{size:14}),l("installment.review","")]})})]},f.id)})})]})}),D0e=({request:e,settings:s,onClose:a,onAction:r,processing:n,t:i,isRTL:l,formatCurrency:o})=>{const[d,u]=C.useState(null),[h,f]=C.useState(""),[x,p]=C.useState(s.autoForwardToSuppliersOnSinicarReject),[v,b]=C.useState(e.totalRequestedValue||0);return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:i("installment.reviewRequest","  ")}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-modal",children:t.jsx(vt,{size:20})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.customer","")}),t.jsx("div",{className:"font-medium text-slate-800",children:e.customerName||e.customerId})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.requestedValue"," ")}),t.jsx("div",{className:"font-bold text-slate-800",children:o(e.totalRequestedValue||0)})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.duration","")}),t.jsxs("div",{className:"font-medium text-slate-800",children:[e.requestedDurationMonths," ",i("installment.months","")]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.frequency","")}),t.jsx("div",{className:"font-medium text-slate-800",children:e.paymentFrequency==="monthly"?i("installment.monthly",""):i("installment.weekly","")})]})]}),e.items.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:i("installment.requestedItems"," ")}),t.jsx("div",{className:"bg-slate-50 rounded-xl p-4 space-y-2",children:e.items.map(y=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:y.productName||y.productId}),t.jsxs("span",{children:[y.quantityRequested,"  ",o(y.unitPriceRequested||0)]})]},y.id))})]}),e.notes&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:i("installment.customerNotes"," ")}),t.jsx("p",{className:"text-slate-600 bg-slate-50 p-4 rounded-xl",children:e.notes})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[t.jsx("h3",{className:"font-semibold text-slate-800 mb-4",children:i("installment.yourDecision","")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[t.jsxs("button",{onClick:()=>u("approve_full"),className:`p-4 rounded-xl border-2 transition-colors ${d==="approve_full"?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-300"}`,"data-testid":"button-action-approve-full",children:[t.jsx(Mt,{className:`mx-auto mb-2 ${d==="approve_full"?"text-green-600":"text-slate-400"}`,size:32}),t.jsx("div",{className:"font-medium text-slate-800",children:i("installment.approveFullAction"," ")}),t.jsx("div",{className:"text-xs text-slate-500",children:i("installment.approveFullDesc","   ")})]}),s.allowPartialApprovalBySinicar&&t.jsxs("button",{onClick:()=>u("approve_partial"),className:`p-4 rounded-xl border-2 transition-colors ${d==="approve_partial"?"border-amber-500 bg-amber-50":"border-slate-200 hover:border-amber-300"}`,"data-testid":"button-action-approve-partial",children:[t.jsx(Ks,{className:`mx-auto mb-2 ${d==="approve_partial"?"text-amber-600":"text-slate-400"}`,size:32}),t.jsx("div",{className:"font-medium text-slate-800",children:i("installment.approvePartialAction"," ")}),t.jsx("div",{className:"text-xs text-slate-500",children:i("installment.approvePartialDesc","    ")})]}),t.jsxs("button",{onClick:()=>u("reject"),className:`p-4 rounded-xl border-2 transition-colors ${d==="reject"?"border-red-500 bg-red-50":"border-slate-200 hover:border-red-300"}`,"data-testid":"button-action-reject",children:[t.jsx(sa,{className:`mx-auto mb-2 ${d==="reject"?"text-red-600":"text-slate-400"}`,size:32}),t.jsx("div",{className:"font-medium text-slate-800",children:i("installment.rejectAction","")}),t.jsx("div",{className:"text-xs text-slate-500",children:i("installment.rejectDesc"," ")})]})]}),d==="approve_partial"&&t.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-amber-800 mb-2",children:i("installment.approvedAmount","  ")}),t.jsx("input",{type:"number",min:1,max:e.totalRequestedValue,value:v,onChange:y=>b(parseFloat(y.target.value)||0),className:"w-full border border-amber-200 rounded-lg py-2 px-4 focus:ring-2 focus:ring-amber-500","data-testid":"input-partial-amount"})]}),d==="reject"&&t.jsx("div",{className:"bg-red-50 p-4 rounded-xl mb-4",children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:x,onChange:y=>p(y.target.checked),className:"w-4 h-4 text-brand-600 rounded","data-testid":"checkbox-forward-on-reject"}),t.jsx("span",{className:"text-sm font-medium text-red-800",children:i("installment.forwardOnReject","    ")})]})}),d&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:i("installment.adminNotes"," ")}),t.jsx("textarea",{value:h,onChange:y=>f(y.target.value),rows:3,className:"w-full border border-slate-200 rounded-lg py-3 px-4 focus:ring-2 focus:ring-brand-500",placeholder:i("installment.notesPlaceholder","  ..."),"data-testid":"textarea-admin-notes"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{onClick:a,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel-action",children:i("common.cancel","")}),d&&t.jsxs("button",{onClick:()=>r(d,{notes:h,forwardToSuppliers:d==="reject"?x:void 0,offer:d==="approve_partial"?{totalApprovedValue:v,itemsApproved:[]}:d==="approve_full"?{totalApprovedValue:e.totalRequestedValue,itemsApproved:[]}:void 0}),disabled:n,className:`flex items-center gap-2 px-6 py-2 rounded-lg transition-colors disabled:opacity-50 ${d==="approve_full"?"bg-green-600 hover:bg-green-700 text-white":d==="approve_partial"?"bg-amber-600 hover:bg-amber-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,"data-testid":"button-confirm-action",children:[n?t.jsx(Gt,{className:"animate-spin",size:18}):t.jsx(es,{size:18}),i("installment.confirmDecision"," ")]})]})]})]})})},M0e=({settings:e,onSave:s,t:a,isRTL:r})=>{const[n,i]=C.useState({...e}),[l,o]=C.useState(!1),d=async()=>{o(!0);try{await s(n)}finally{o(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(aa,{size:18,className:"text-brand-600"}),a("installment.generalSettings"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.enableSystem","  ")}),t.jsx("input",{type:"checkbox",checked:n.enabled,onChange:u=>i({...n,enabled:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-enabled"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.sinicarPriority","   ")}),t.jsx("input",{type:"checkbox",checked:n.sinicarHasFirstPriority,onChange:u=>i({...n,sinicarHasFirstPriority:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-sinicar-priority"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.allowPartialSinicar","     ")}),t.jsx("input",{type:"checkbox",checked:n.allowPartialApprovalBySinicar,onChange:u=>i({...n,allowPartialApprovalBySinicar:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-partial-sinicar"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.allowPartialSuppliers","    ")}),t.jsx("input",{type:"checkbox",checked:n.allowPartialApprovalBySuppliers,onChange:u=>i({...n,allowPartialApprovalBySuppliers:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-partial-suppliers"})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(zse,{size:18,className:"text-brand-600"}),a("installment.forwardingSettings"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.autoForwardOnReject","    ")}),t.jsx("input",{type:"checkbox",checked:n.autoForwardToSuppliersOnSinicarReject,onChange:u=>i({...n,autoForwardToSuppliersOnSinicarReject:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-auto-forward-reject"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.autoForwardOnPartial","     ")}),t.jsx("input",{type:"checkbox",checked:n.autoForwardToSuppliersOnSinicarPartialRemainder,onChange:u=>i({...n,autoForwardToSuppliersOnSinicarPartialRemainder:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-auto-forward-partial"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-2",children:a("installment.onCustomerRejectsSinicar","     ")}),t.jsxs("select",{value:n.onCustomerRejectsSinicarPartial,onChange:u=>i({...n,onCustomerRejectsSinicarPartial:u.target.value}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"select-on-customer-rejects-sinicar",children:[t.jsx("option",{value:"forward_to_suppliers",children:a("installment.forwardToSuppliers"," ")}),t.jsx("option",{value:"close_request",children:a("installment.closeRequest"," ")})]})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(mr,{size:18,className:"text-brand-600"}),a("installment.financialLimits"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.minAmount"," ")}),t.jsx("input",{type:"number",value:n.minRequestAmount,onChange:u=>i({...n,minRequestAmount:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-min-amount"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.maxAmount"," ")}),t.jsx("input",{type:"number",value:n.maxRequestAmount,onChange:u=>i({...n,maxRequestAmount:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-max-amount"})]})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.requireDownPayment","  ")}),t.jsx("input",{type:"checkbox",checked:n.requireDownPayment,onChange:u=>i({...n,requireDownPayment:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-require-down-payment"})]}),n.requireDownPayment&&t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.minDownPercent","  %")}),t.jsx("input",{type:"number",min:0,max:100,value:n.minDownPaymentPercent,onChange:u=>i({...n,minDownPaymentPercent:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-min-down-percent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.maxDownPercent","  %")}),t.jsx("input",{type:"number",min:0,max:100,value:n.maxDownPaymentPercent,onChange:u=>i({...n,maxDownPaymentPercent:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-max-down-percent"})]})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(hh,{size:18,className:"text-brand-600"}),a("installment.durationSettings"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.minMonths","  ()")}),t.jsx("input",{type:"number",min:1,value:n.minDurationMonths,onChange:u=>i({...n,minDurationMonths:parseInt(u.target.value)||1}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-min-months"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.maxMonths","  ()")}),t.jsx("input",{type:"number",min:1,value:n.maxDurationMonths,onChange:u=>i({...n,maxDurationMonths:parseInt(u.target.value)||12}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-max-months"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.defaultFrequency"," ")}),t.jsxs("select",{value:n.defaultPaymentFrequency,onChange:u=>i({...n,defaultPaymentFrequency:u.target.value}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"select-default-frequency",children:[t.jsx("option",{value:"monthly",children:a("installment.monthly","")}),t.jsx("option",{value:"weekly",children:a("installment.weekly","")})]})]})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:d,disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors disabled:opacity-50","data-testid":"button-save-settings",children:[l?t.jsx(Gt,{className:"animate-spin",size:18}):t.jsx(us,{size:18}),a("common.save"," ")]})})]})},L0e=({profiles:e,t:s,isRTL:a,formatCurrency:r})=>{const n={excellent:"bg-green-100 text-green-700",good:"bg-blue-100 text-blue-700",medium:"bg-amber-100 text-amber-700",low:"bg-orange-100 text-orange-700",blocked:"bg-red-100 text-red-700"},i={excellent:{ar:"",en:"Excellent"},good:{ar:"",en:"Good"},medium:{ar:"",en:"Medium"},low:{ar:"",en:"Low"},blocked:{ar:"",en:"Blocked"}};return e.length===0?t.jsxs("div",{className:"py-12 text-center text-slate-500",children:[t.jsx(Wt,{className:"mx-auto mb-4 text-slate-300",size:48}),t.jsx("p",{children:s("installment.noCreditProfiles","   ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.customer","")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.creditScore"," ")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.totalRequests"," ")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.activeContracts"," ")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.totalPaid","")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.remaining","")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.overdue","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(l=>{var o,d;return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:l.customerName||l.customerId}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n[l.scoreLevel]||"bg-slate-100 text-slate-600"}`,children:a?(o=i[l.scoreLevel])==null?void 0:o.ar:(d=i[l.scoreLevel])==null?void 0:d.en})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:l.totalInstallmentRequests}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:l.totalActiveContracts}),t.jsx("td",{className:"px-4 py-3 text-sm text-green-600 font-medium",children:r(l.totalPaidAmount||0)}),t.jsx("td",{className:"px-4 py-3 text-sm text-amber-600 font-medium",children:r(l.totalRemainingAmount||0)}),t.jsx("td",{className:"px-4 py-3 text-sm text-red-600 font-medium",children:l.totalOverdueInstallments>0?l.totalOverdueInstallments:"-"})]},l.customerId)})})]})})},YS=[{value:"supplier",labelAr:"",labelEn:"Supplier"},{value:"shipping",labelAr:" ",labelEn:"Shipping Company"},{value:"workshop",labelAr:"",labelEn:"Workshop"},{value:"other",labelAr:"",labelEn:"Other"}],XS=[{value:"active",labelAr:"",labelEn:"Active",color:"bg-green-100 text-green-700"},{value:"pending_verification",labelAr:" ",labelEn:"Pending Verification",color:"bg-amber-100 text-amber-700"},{value:"suspended",labelAr:"",labelEn:"Suspended",color:"bg-red-100 text-red-700"},{value:"blacklisted",labelAr:"",labelEn:"Blacklisted",color:"bg-slate-100 text-slate-700"}],ZS=[{value:"banner_top",labelAr:" ",labelEn:"Top Banner"},{value:"banner_sidebar",labelAr:" ",labelEn:"Sidebar Banner"},{value:"card_in_tools",labelAr:"  ",labelEn:"Card in Tools"},{value:"card_in_products",labelAr:"  ",labelEn:"Card in Products"},{value:"popup",labelAr:" ",labelEn:"Popup"}],e2=[{value:"draft",labelAr:"",labelEn:"Draft",color:"bg-slate-100 text-slate-700"},{value:"pending_approval",labelAr:" ",labelEn:"Pending Approval",color:"bg-amber-100 text-amber-700"},{value:"running",labelAr:"",labelEn:"Running",color:"bg-green-100 text-green-700"},{value:"paused",labelAr:"",labelEn:"Paused",color:"bg-blue-100 text-blue-700"},{value:"rejected",labelAr:"",labelEn:"Rejected",color:"bg-red-100 text-red-700"},{value:"ended",labelAr:"",labelEn:"Ended",color:"bg-slate-200 text-slate-600"}],F0e=[{value:"home",labelAr:" ",labelEn:"Home"},{value:"dashboard",labelAr:" ",labelEn:"Dashboard"},{value:"products",labelAr:"",labelEn:"Products"},{value:"tools",labelAr:"",labelEn:"Tools"},{value:"orders",labelAr:"",labelEn:"Orders"},{value:"quotes",labelAr:" ",labelEn:"Quotes"}],HF=[{value:"by_priority",labelAr:" ",labelEn:"By Priority"},{value:"rotate",labelAr:"",labelEn:"Rotate"},{value:"random",labelAr:"",labelEn:"Random"}],U0e=()=>{const[e,s]=C.useState("ADVERTISERS"),[a,r]=C.useState(!0),[n,i]=C.useState([]),[l,o]=C.useState([]),[d,u]=C.useState([]),[h,f]=C.useState({totalAdvertisers:0,activeAdvertisers:0,totalCampaigns:0,runningCampaigns:0,totalViews:0,totalClicks:0}),[x,p]=C.useState(!1),[v,b]=C.useState(!1),[y,j]=C.useState(!1),[w,S]=C.useState(null),[O,_]=C.useState(null),[E,A]=C.useState(null),[D,L]=C.useState(""),[B,I]=C.useState(""),[T,z]=C.useState(""),[k,F]=C.useState(""),[P,G]=C.useState(""),[Y,W]=C.useState(""),[ee,H]=C.useState(""),{addToast:M}=It(),{t:X,language:K}=Hs(),Q=K==="ar";C.useEffect(()=>{se()},[]);const se=async()=>{r(!0);try{const[J,Ne,q,ce]=await Promise.all([he.getAdvertisers(),he.getAdCampaigns(),he.getAdSlots(),he.getAdvertisingStats()]);i(J),o(Ne),u(q),f(ce)}catch{M(X("advertising.loadError","    "),"error")}finally{r(!1)}},V=J=>new Date(J).toLocaleDateString(Q?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric"}),te=n.filter(J=>{var Ne,q;if(D){const ce=D.toLowerCase();if(!J.name.toLowerCase().includes(ce)&&!((Ne=J.phone)!=null&&Ne.toLowerCase().includes(ce))&&!((q=J.email)!=null&&q.toLowerCase().includes(ce)))return!1}return!(B&&J.status!==B||T&&J.companyType!==T)}),Z=l.filter(J=>!(k&&!J.name.toLowerCase().includes(k.toLowerCase())||P&&J.status!==P||Y&&J.advertiserId!==Y||ee&&J.type!==ee)),ue=J=>{const Ne=n.find(q=>q.id===J);return(Ne==null?void 0:Ne.name)||X("advertising.unknownAdvertiser","  ")},re=[{key:"ADVERTISERS",label:X("advertising.advertisers",""),icon:t.jsx(ta,{size:18})},{key:"CAMPAIGNS",label:X("advertising.campaigns",""),icon:t.jsx(ja,{size:18})},{key:"SLOTS",label:X("advertising.slots"," "),icon:t.jsx(nae,{size:18})},{key:"REPORTS",label:X("advertising.reports",""),icon:t.jsx(Dr,{size:18})}];return a?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(Gt,{className:"animate-spin text-brand-600",size:48})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.jsx(ja,{className:"text-brand-600",size:28}),X("advertising.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:X("advertising.subtitle","     ")})]}),t.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-refresh-advertising",children:[t.jsx(Gt,{size:18}),X("common.refresh","")]})]}),t.jsx("div",{className:"flex gap-2 border-b border-slate-200 overflow-x-auto",children:re.map(J=>t.jsxs("button",{onClick:()=>s(J.key),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${e===J.key?"border-brand-600 text-brand-600 font-semibold":"border-transparent text-slate-500 hover:text-slate-700"}`,"data-testid":`tab-${J.key.toLowerCase()}`,children:[J.icon,J.label]},J.key))}),e==="ADVERTISERS"&&t.jsx(z0e,{advertisers:te,search:D,setSearch:L,statusFilter:B,setStatusFilter:I,typeFilter:T,setTypeFilter:z,onAdd:()=>{S(null),p(!0)},onEdit:J=>{S(J),p(!0)},onDelete:async J=>{confirm(X("advertising.confirmDelete","    "))&&(await he.deleteAdvertiser(J),se(),M(X("advertising.deleted","  "),"success"))},t:X,isRTL:Q,formatDate:V}),e==="CAMPAIGNS"&&t.jsx(B0e,{campaigns:Z,advertisers:n,search:k,setSearch:F,statusFilter:P,setStatusFilter:G,advertiserFilter:Y,setAdvertiserFilter:W,typeFilter:ee,setTypeFilter:H,onAdd:()=>{_(null),b(!0)},onEdit:J=>{_(J),b(!0)},onDelete:async J=>{confirm(X("advertising.confirmDelete","    "))&&(await he.deleteAdCampaign(J),se(),M(X("advertising.deleted","  "),"success"))},onStatusChange:async(J,Ne)=>{await he.updateAdCampaign(J,{status:Ne}),se(),M(X("advertising.statusUpdated","  "),"success")},getAdvertiserName:ue,t:X,isRTL:Q,formatDate:V}),e==="SLOTS"&&t.jsx($0e,{slots:d,onEdit:J=>{A(J),j(!0)},onToggle:async(J,Ne)=>{await he.updateAdSlot(J,{isEnabled:Ne}),se(),M(X("advertising.slotUpdated","  "),"success")},t:X,isRTL:Q}),e==="REPORTS"&&t.jsx(q0e,{stats:h,t:X,isRTL:Q}),x&&t.jsx(H0e,{advertiser:w,onClose:()=>p(!1),onSave:async J=>{w?await he.updateAdvertiser(w.id,J):await he.createAdvertiser(J),p(!1),se(),M(X("advertising.saved","  "),"success")},t:X,isRTL:Q}),v&&t.jsx(V0e,{campaign:O,advertisers:n,onClose:()=>b(!1),onSave:async J=>{O?await he.updateAdCampaign(O.id,J):await he.createAdCampaign(J),b(!1),se(),M(X("advertising.saved","  "),"success")},t:X,isRTL:Q}),y&&E&&t.jsx(G0e,{slot:E,onClose:()=>j(!1),onSave:async J=>{await he.updateAdSlot(E.id,J),j(!1),se(),M(X("advertising.slotUpdated","  "),"success")},t:X,isRTL:Q})]})},z0e=({advertisers:e,search:s,setSearch:a,statusFilter:r,setStatusFilter:n,typeFilter:i,setTypeFilter:l,onAdd:o,onEdit:d,onDelete:u,t:h,isRTL:f,formatDate:x})=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{size:18,className:"absolute top-1/2 -translate-y-1/2 text-slate-400",style:{[f?"right":"left"]:"12px"}}),t.jsx("input",{type:"text",placeholder:h("advertising.searchAdvertiser","   ..."),value:s,onChange:p=>a(p.target.value),className:`border border-slate-200 rounded-lg py-2 ${f?"pr-10 pl-4":"pl-10 pr-4"} w-64 focus:ring-2 focus:ring-brand-500 focus:border-transparent`,"data-testid":"input-search-advertisers"})]}),t.jsxs("select",{value:r,onChange:p=>n(p.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-status-filter",children:[t.jsx("option",{value:"",children:h("advertising.allStatuses"," ")}),XS.map(p=>t.jsx("option",{value:p.value,children:f?p.labelAr:p.labelEn},p.value))]}),t.jsxs("select",{value:i,onChange:p=>l(p.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-type-filter",children:[t.jsx("option",{value:"",children:h("advertising.allTypes"," ")}),YS.map(p=>t.jsx("option",{value:p.value,children:f?p.labelAr:p.labelEn},p.value))]})]}),t.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 rounded-lg transition-colors","data-testid":"button-add-advertiser",children:[t.jsx(kt,{size:18}),h("advertising.addAdvertiser"," ")]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.name","")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.companyType"," ")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.contact","")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.status","")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.createdAt"," ")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-12 text-slate-500",children:h("advertising.noAdvertisers","  ")})}):e.map(p=>{const v=XS.find(y=>y.value===p.status),b=YS.find(y=>y.value===p.companyType);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`row-advertiser-${p.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"font-medium text-slate-800",children:p.name}),p.contactName&&t.jsx("div",{className:"text-sm text-slate-500",children:p.contactName})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:b?f?b.labelAr:b.labelEn:"-"}),t.jsxs("td",{className:"px-4 py-3 text-sm",children:[p.phone&&t.jsx("div",{children:p.phone}),p.email&&t.jsx("div",{className:"text-slate-500",children:p.email})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v==null?void 0:v.color}`,children:v?f?v.labelAr:v.labelEn:p.status})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:x(p.createdAt)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>d(p),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":`button-edit-${p.id}`,children:t.jsx(ql,{size:16})}),t.jsx("button",{onClick:()=>u(p.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-${p.id}`,children:t.jsx(At,{size:16})})]})})]},p.id)})})]})})]}),B0e=({campaigns:e,advertisers:s,search:a,setSearch:r,statusFilter:n,setStatusFilter:i,advertiserFilter:l,setAdvertiserFilter:o,typeFilter:d,setTypeFilter:u,onAdd:h,onEdit:f,onDelete:x,onStatusChange:p,getAdvertiserName:v,t:b,isRTL:y,formatDate:j})=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{size:18,className:"absolute top-1/2 -translate-y-1/2 text-slate-400",style:{[y?"right":"left"]:"12px"}}),t.jsx("input",{type:"text",placeholder:b("advertising.searchCampaign"," ..."),value:a,onChange:w=>r(w.target.value),className:`border border-slate-200 rounded-lg py-2 ${y?"pr-10 pl-4":"pl-10 pr-4"} w-48 focus:ring-2 focus:ring-brand-500`,"data-testid":"input-search-campaigns"})]}),t.jsxs("select",{value:l,onChange:w=>o(w.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-advertiser-filter",children:[t.jsx("option",{value:"",children:b("advertising.allAdvertisers"," ")}),s.map(w=>t.jsx("option",{value:w.id,children:w.name},w.id))]}),t.jsxs("select",{value:d,onChange:w=>u(w.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-campaign-type-filter",children:[t.jsx("option",{value:"",children:b("advertising.allCampaignTypes"," ")}),ZS.map(w=>t.jsx("option",{value:w.value,children:y?w.labelAr:w.labelEn},w.value))]}),t.jsxs("select",{value:n,onChange:w=>i(w.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-campaign-status-filter",children:[t.jsx("option",{value:"",children:b("advertising.allStatuses"," ")}),e2.map(w=>t.jsx("option",{value:w.value,children:y?w.labelAr:w.labelEn},w.value))]})]}),t.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 rounded-lg transition-colors","data-testid":"button-add-campaign",children:[t.jsx(kt,{size:18}),b("advertising.addCampaign"," ")]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.campaignName"," ")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.advertiser","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.type","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.dates","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.performance","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.status","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-12 text-slate-500",children:b("advertising.noCampaigns","  ")})}):e.map(w=>{const S=e2.find(_=>_.value===w.status),O=ZS.find(_=>_.value===w.type);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`row-campaign-${w.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"font-medium text-slate-800",children:w.name}),t.jsxs("div",{className:"text-xs text-slate-500",children:[b("advertising.priority",""),": ",w.priority]})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:v(w.advertiserId)}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:O?y?O.labelAr:O.labelEn:w.type}),t.jsxs("td",{className:"px-4 py-3 text-sm",children:[t.jsx("div",{children:j(w.startDate)}),w.endDate&&t.jsx("div",{className:"text-slate-500",children:j(w.endDate)})]}),t.jsx("td",{className:"px-4 py-3 text-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(ns,{size:14,className:"text-slate-400"}),w.currentViews||0]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(xh,{size:14,className:"text-slate-400"}),w.currentClicks||0]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S==null?void 0:S.color}`,children:S?y?S.labelAr:S.labelEn:w.status})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[w.status==="running"&&t.jsx("button",{onClick:()=>p(w.id,"paused"),className:"p-2 text-amber-500 hover:bg-amber-50 rounded-lg transition-colors",title:b("advertising.pause"," "),"data-testid":`button-pause-${w.id}`,children:t.jsx(vF,{size:16})}),w.status==="paused"&&t.jsx("button",{onClick:()=>p(w.id,"running"),className:"p-2 text-green-500 hover:bg-green-50 rounded-lg transition-colors",title:b("advertising.resume",""),"data-testid":`button-resume-${w.id}`,children:t.jsx(Uu,{size:16})}),(w.status==="running"||w.status==="paused")&&t.jsx("button",{onClick:()=>p(w.id,"ended"),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:b("advertising.end",""),"data-testid":`button-end-${w.id}`,children:t.jsx(fse,{size:16})}),t.jsx("button",{onClick:()=>f(w),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":`button-edit-campaign-${w.id}`,children:t.jsx(ql,{size:16})}),t.jsx("button",{onClick:()=>x(w.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-campaign-${w.id}`,children:t.jsx(At,{size:16})})]})})]},w.id)})})]})})]}),$0e=({slots:e,onEdit:s,onToggle:a,t:r,isRTL:n})=>t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.slotName"," ")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.slotKey","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.enabled","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.maxAds"," ")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.selectionMode"," ")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(i=>{const l=HF.find(o=>o.value===i.selectionMode);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`row-slot-${i.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"font-medium text-slate-800",children:n?i.nameAr:i.nameEn}),i.descriptionAr&&t.jsx("div",{className:"text-sm text-slate-500",children:n?i.descriptionAr:i.descriptionEn})]}),t.jsx("td",{className:"px-4 py-3 font-mono text-sm text-slate-600",children:i.slotKey}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:()=>a(i.id,!i.isEnabled),className:`p-2 rounded-lg transition-colors ${i.isEnabled?"text-green-600 bg-green-50":"text-slate-400 bg-slate-100"}`,"data-testid":`button-toggle-slot-${i.id}`,children:i.isEnabled?t.jsx(id,{size:18}):t.jsx(zu,{size:18})})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:i.maxAds}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:l?n?l.labelAr:l.labelEn:i.selectionMode}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:()=>s(i),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":`button-edit-slot-${i.id}`,children:t.jsx(ql,{size:16})})})]},i.id)})})]})})}),q0e=({stats:e,t:s,isRTL:a})=>{const r=e.totalViews>0?(e.totalClicks/e.totalViews*100).toFixed(2):"0.00";return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:t.jsx(ta,{className:"text-blue-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalAdvertisers"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalAdvertisers})]})]}),t.jsxs("div",{className:"text-sm text-slate-600",children:[s("advertising.activeCount",""),": ",t.jsx("span",{className:"font-semibold text-green-600",children:e.activeAdvertisers})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:t.jsx(ja,{className:"text-purple-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalCampaigns"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalCampaigns})]})]}),t.jsxs("div",{className:"text-sm text-slate-600",children:[s("advertising.runningCount",""),": ",t.jsx("span",{className:"font-semibold text-green-600",children:e.runningCampaigns})]})]}),t.jsx("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-amber-100 rounded-xl",children:t.jsx(ns,{className:"text-amber-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalViews"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalViews.toLocaleString()})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:t.jsx(xh,{className:"text-green-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalClicks"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalClicks.toLocaleString()})]})]})}),t.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-rose-100 rounded-xl",children:t.jsx(gi,{className:"text-rose-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.ctr"," ")}),t.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[r,"%"]})]})]}),t.jsxs("div",{className:"text-sm text-slate-500",children:["CTR = ",s("advertising.ctrFormula"," / ")]})]})]})},H0e=({advertiser:e,onClose:s,onSave:a,t:r,isRTL:n})=>{const[i,l]=C.useState({name:(e==null?void 0:e.name)||"",contactName:(e==null?void 0:e.contactName)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",whatsapp:(e==null?void 0:e.whatsapp)||"",companyType:(e==null?void 0:e.companyType)||"other",source:(e==null?void 0:e.source)||"",status:(e==null?void 0:e.status)||"pending_verification",notes:(e==null?void 0:e.notes)||""}),o=d=>{d.preventDefault(),a(i)};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:e?r("advertising.editAdvertiser"," "):r("advertising.addAdvertiser"," ")}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-modal",children:t.jsx(vt,{size:20})})]}),t.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[r("advertising.name","")," *"]}),t.jsx("input",{type:"text",value:i.name,onChange:d=>l({...i,name:d.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-advertiser-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.contactName","  ")}),t.jsx("input",{type:"text",value:i.contactName,onChange:d=>l({...i,contactName:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-contact-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.phone","")}),t.jsx("input",{type:"text",value:i.phone,onChange:d=>l({...i,phone:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.email"," ")}),t.jsx("input",{type:"email",value:i.email,onChange:d=>l({...i,email:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.whatsapp","")}),t.jsx("input",{type:"text",value:i.whatsapp,onChange:d=>l({...i,whatsapp:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-whatsapp"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.companyType"," ")}),t.jsx("select",{value:i.companyType,onChange:d=>l({...i,companyType:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-company-type",children:YS.map(d=>t.jsx("option",{value:d.value,children:n?d.labelAr:d.labelEn},d.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.source","")}),t.jsx("input",{type:"text",value:i.source,onChange:d=>l({...i,source:d.target.value}),placeholder:r("advertising.sourcePlaceholder",":  ..."),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-source"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.status","")}),t.jsx("select",{value:i.status,onChange:d=>l({...i,status:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-status",children:XS.map(d=>t.jsx("option",{value:d.value,children:n?d.labelAr:d.labelEn},d.value))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.notes","")}),t.jsx("textarea",{value:i.notes,onChange:d=>l({...i,notes:d.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"textarea-notes"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel",children:r("common.cancel","")}),t.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"button-save-advertiser",children:[t.jsx(es,{size:18}),r("common.save","")]})]})]})]})})},V0e=({campaign:e,advertisers:s,onClose:a,onSave:r,t:n,isRTL:i})=>{var h;const[l,o]=C.useState({advertiserId:(e==null?void 0:e.advertiserId)||((h=s[0])==null?void 0:h.id)||"",name:(e==null?void 0:e.name)||"",type:(e==null?void 0:e.type)||"banner_top",targetPages:(e==null?void 0:e.targetPages)||[],priority:(e==null?void 0:e.priority)||1,startDate:(e==null?void 0:e.startDate)||new Date().toISOString().split("T")[0],endDate:(e==null?void 0:e.endDate)||"",budgetType:(e==null?void 0:e.budgetType)||"fixed",maxViews:(e==null?void 0:e.maxViews)||void 0,maxClicks:(e==null?void 0:e.maxClicks)||void 0,landingUrl:(e==null?void 0:e.landingUrl)||"",imageUrl:(e==null?void 0:e.imageUrl)||"",status:(e==null?void 0:e.status)||"draft"}),d=f=>{o(x=>({...x,targetPages:x.targetPages.includes(f)?x.targetPages.filter(p=>p!==f):[...x.targetPages,f]}))},u=f=>{f.preventDefault(),r(l)};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:e?n("advertising.editCampaign"," "):n("advertising.addCampaign"," ")}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-campaign-modal",children:t.jsx(vt,{size:20})})]}),t.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[n("advertising.advertiser","")," *"]}),t.jsx("select",{value:l.advertiserId,onChange:f=>o({...l,advertiserId:f.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-campaign-advertiser",children:s.map(f=>t.jsx("option",{value:f.id,children:f.name},f.id))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[n("advertising.campaignName"," ")," *"]}),t.jsx("input",{type:"text",value:l.name,onChange:f=>o({...l,name:f.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-campaign-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.type","")}),t.jsx("select",{value:l.type,onChange:f=>o({...l,type:f.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-campaign-type",children:ZS.map(f=>t.jsx("option",{value:f.value,children:i?f.labelAr:f.labelEn},f.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.priority","")}),t.jsx("input",{type:"number",min:"1",max:"100",value:l.priority,onChange:f=>o({...l,priority:parseInt(f.target.value)||1}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-priority"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[n("advertising.startDate"," ")," *"]}),t.jsx("input",{type:"date",value:l.startDate,onChange:f=>o({...l,startDate:f.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-start-date"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.endDate"," ")}),t.jsx("input",{type:"date",value:l.endDate,onChange:f=>o({...l,endDate:f.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-end-date"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.maxViews","  ")}),t.jsx("input",{type:"number",min:"0",value:l.maxViews||"",onChange:f=>o({...l,maxViews:f.target.value?parseInt(f.target.value):void 0}),placeholder:n("advertising.unlimited"," "),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-max-views"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.maxClicks","  ")}),t.jsx("input",{type:"number",min:"0",value:l.maxClicks||"",onChange:f=>o({...l,maxClicks:f.target.value?parseInt(f.target.value):void 0}),placeholder:n("advertising.unlimited"," "),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-max-clicks"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.landingUrl"," ")}),t.jsx("input",{type:"url",value:l.landingUrl,onChange:f=>o({...l,landingUrl:f.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-landing-url"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.imageUrl"," ")}),t.jsx("input",{type:"url",value:l.imageUrl,onChange:f=>o({...l,imageUrl:f.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-image-url"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:n("advertising.targetPages"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:F0e.map(f=>t.jsx("button",{type:"button",onClick:()=>d(f.value),className:`px-3 py-1 rounded-full text-sm border transition-colors ${l.targetPages.includes(f.value)?"bg-brand-600 text-white border-brand-600":"bg-white text-slate-600 border-slate-200 hover:border-brand-500"}`,"data-testid":`button-target-${f.value}`,children:i?f.labelAr:f.labelEn},f.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.status","")}),t.jsx("select",{value:l.status,onChange:f=>o({...l,status:f.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-campaign-status",children:e2.map(f=>t.jsx("option",{value:f.value,children:i?f.labelAr:f.labelEn},f.value))})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel-campaign",children:n("common.cancel","")}),t.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"button-save-campaign",children:[t.jsx(es,{size:18}),n("common.save","")]})]})]})]})})},G0e=({slot:e,onClose:s,onSave:a,t:r,isRTL:n})=>{const[i,l]=C.useState({nameAr:e.nameAr,nameEn:e.nameEn,descriptionAr:e.descriptionAr||"",descriptionEn:e.descriptionEn||"",isEnabled:e.isEnabled,maxAds:e.maxAds,selectionMode:e.selectionMode}),o=d=>{d.preventDefault(),a(i)};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:r("advertising.editSlot","  ")}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-slot-modal",children:t.jsx(vt,{size:20})})]}),t.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.nameAr"," ")}),t.jsx("input",{type:"text",value:i.nameAr,onChange:d=>l({...i,nameAr:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-slot-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.nameEn"," ")}),t.jsx("input",{type:"text",value:i.nameEn,onChange:d=>l({...i,nameEn:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-slot-name-en"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.descriptionAr"," ")}),t.jsx("textarea",{value:i.descriptionAr,onChange:d=>l({...i,descriptionAr:d.target.value}),rows:2,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"textarea-desc-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.descriptionEn"," ")}),t.jsx("textarea",{value:i.descriptionEn,onChange:d=>l({...i,descriptionEn:d.target.value}),rows:2,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"textarea-desc-en"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm font-medium text-slate-700",children:r("advertising.enabled","")}),t.jsx("button",{type:"button",onClick:()=>l({...i,isEnabled:!i.isEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${i.isEnabled?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-slot-enabled",children:t.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${i.isEnabled?"translate-x-7":"translate-x-1"}`})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.maxAds","  ")}),t.jsx("input",{type:"number",min:"1",max:"10",value:i.maxAds,onChange:d=>l({...i,maxAds:parseInt(d.target.value)||1}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-slot-max-ads"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.selectionMode"," ")}),t.jsx("select",{value:i.selectionMode,onChange:d=>l({...i,selectionMode:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-selection-mode",children:HF.map(d=>t.jsx("option",{value:d.value,children:n?d.labelAr:d.labelEn},d.value))})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel-slot",children:r("common.cancel","")}),t.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"button-save-slot",children:[t.jsx(es,{size:18}),r("common.save","")]})]})]})]})})},W0e=()=>{const{t:e}=Kt(),{addToast:s}=It(),[a,r]=C.useState(null),[n,i]=C.useState([]),[l,o]=C.useState(!0),[d,u]=C.useState(!1),[h,f]=C.useState({general:!0,limits:!1,permissions:!1,activity:!1}),[x,p]=C.useState(""),[v,b]=C.useState("all"),y=C.useCallback(async()=>{o(!0);try{const[F,P]=await Promise.all([he.getOrganizationSettings(),he.getOrganizations()]);r(F),i(P)}catch(F){console.error("Failed to load organization settings:",F),s("   ","error")}finally{o(!1)}},[s]);C.useEffect(()=>{y()},[y]);const j=async()=>{if(a){u(!0);try{await he.updateOrganizationSettings(a),s("   ","success")}catch(F){console.error("Failed to save settings:",F),s("   ","error")}finally{u(!1)}}},w=F=>{f(P=>({...P,[F]:!P[F]}))},S=(F,P)=>{a&&r({...a,[F]:P})},O={adv_view_campaigns:"  ",adv_manage_campaigns:"  ",adv_manage_slots:"  ",adv_view_reports:"  ",sup_view_forwarded_requests:"  ",sup_submit_offers:" ",sup_view_team_activity:"  ",sup_manage_products:" ",sup_view_analytics:" ",cust_create_orders:" ",cust_view_orders:" ",cust_create_installment_requests:"  ",cust_manage_installment_requests:"  ",cust_use_trader_tools:"  ",cust_view_team_activity:"  ",cust_view_prices:" ",cust_manage_cart:" ",aff_view_links:"  ",aff_manage_links:"  ",aff_view_commissions:" ",aff_withdraw_commissions:" ",aff_view_analytics:" ",org_manage_team:" ",org_view_logs:"  ",org_view_settings:" ",org_edit_profile:"  "},_=(F,P,G)=>t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-slate-300 text-sm",children:G}),t.jsx("button",{type:"button",onClick:()=>P(!F),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${F?"bg-amber-500":"bg-slate-600"}`,"data-testid":`toggle-${G.replace(/\s+/g,"-")}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${F?"translate-x-6":"translate-x-1"}`})})]}),E=(F,P,G,Y=1,W=100)=>t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-slate-300 text-sm",children:G}),t.jsx("input",{type:"number",value:F,onChange:ee=>P(Math.max(Y,Math.min(W,parseInt(ee.target.value)||Y))),className:"w-20 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-slate-100 text-center text-sm",min:Y,max:W,"data-testid":`input-${G.replace(/\s+/g,"-")}`})]}),A=(F,P,G)=>t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:G.map(Y=>t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-400 cursor-pointer hover:text-slate-300",children:[t.jsx("input",{type:"checkbox",checked:F.includes(Y),onChange:W=>{W.target.checked?P([...F,Y]):P(F.filter(ee=>ee!==Y))},className:"rounded border-slate-600 bg-slate-700 text-amber-500"}),O[Y]]},Y))}),D=n.filter(F=>{const P=F.name.toLowerCase().includes(x.toLowerCase()),G=v==="all"||F.type===v;return P&&G}),L={customer:"",supplier:"",advertiser:"",affiliate:""},B={customer:t.jsx(ta,{size:16}),supplier:t.jsx(ld,{size:16}),advertiser:t.jsx(ja,{size:16}),affiliate:t.jsx(al,{size:16})};if(l)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Gt,{className:"animate-spin text-amber-500",size:32})});if(!a)return t.jsxs("div",{className:"text-center text-red-500 py-8",children:[t.jsx(Ks,{size:48,className:"mx-auto mb-4"}),t.jsx("p",{children:"   "})]});const I=["cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"],T=["sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"],z=["adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"],k=["aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"];return t.jsx("div",{className:"p-6 bg-slate-900 min-h-screen",dir:"rtl",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ta,{className:"text-amber-500",size:28}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"  "}),t.jsx("p",{className:"text-sm text-slate-400",children:"      "})]})]}),t.jsxs("button",{onClick:j,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors disabled:opacity-50","data-testid":"button-save-org-settings",children:[d?t.jsx(Gt,{className:"animate-spin",size:18}):t.jsx(us,{size:18})," "]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("general"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-general-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(aa,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:" "})]}),h.general?t.jsx(Qr,{size:20,className:"text-slate-400"}):t.jsx(Ir,{size:20,className:"text-slate-400"})]}),h.general&&t.jsxs("div",{className:"p-4 border-t border-slate-700 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:"   "}),_(a.enableTeamsForCustomers,F=>S("enableTeamsForCustomers",F)," "),_(a.enableTeamsForSuppliers,F=>S("enableTeamsForSuppliers",F)," "),_(a.enableTeamsForAdvertisers,F=>S("enableTeamsForAdvertisers",F)," "),_(a.enableTeamsForAffiliates,F=>S("enableTeamsForAffiliates",F)," ")]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:"  "}),_(a.allowCustomPermissionsForCustomers,F=>S("allowCustomPermissionsForCustomers",F),""),_(a.allowCustomPermissionsForSuppliers,F=>S("allowCustomPermissionsForSuppliers",F),""),_(a.allowCustomPermissionsForAdvertisers,F=>S("allowCustomPermissionsForAdvertisers",F),""),_(a.allowCustomPermissionsForAffiliates,F=>S("allowCustomPermissionsForAffiliates",F),"")]})]}),t.jsxs("div",{className:"border-t border-slate-600 pt-4 mt-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:" "}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_(a.requireEmailVerification,F=>S("requireEmailVerification",F),"   "),E(a.invitationExpiryHours,F=>S("invitationExpiryHours",F),"   ()",1,168)]})]})]})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("limits"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-limits-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Wt,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:"  "})]}),h.limits?t.jsx(Qr,{size:20,className:"text-slate-400"}):t.jsx(Ir,{size:20,className:"text-slate-400"})]}),h.limits&&t.jsx("div",{className:"p-4 border-t border-slate-700",children:t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[E(a.maxCustomerEmployees,F=>S("maxCustomerEmployees",F),"   ",1,50),E(a.maxSupplierEmployees,F=>S("maxSupplierEmployees",F),"   ",1,50)]}),t.jsxs("div",{className:"space-y-2",children:[E(a.maxAdvertiserEmployees,F=>S("maxAdvertiserEmployees",F),"   ",1,50),E(a.maxAffiliateEmployees,F=>S("maxAffiliateEmployees",F),"   ",1,50)]})]})})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("permissions"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-permissions-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Bs,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:" "})]}),h.permissions?t.jsx(Qr,{size:20,className:"text-slate-400"}):t.jsx(Ir,{size:20,className:"text-slate-400"})]}),h.permissions&&t.jsxs("div",{className:"p-4 border-t border-slate-700 space-y-6",children:[t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(ta,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultCustomerManagerPermissions,F=>S("defaultCustomerManagerPermissions",F),I)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultCustomerStaffPermissions,F=>S("defaultCustomerStaffPermissions",F),I)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),A(a.defaultCustomerReadonlyPermissions,F=>S("defaultCustomerReadonlyPermissions",F),I)]})]})]}),t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(ld,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultSupplierManagerPermissions,F=>S("defaultSupplierManagerPermissions",F),T)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultSupplierStaffPermissions,F=>S("defaultSupplierStaffPermissions",F),T)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),A(a.defaultSupplierReadonlyPermissions,F=>S("defaultSupplierReadonlyPermissions",F),T)]})]})]}),t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(ja,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultAdvertiserManagerPermissions,F=>S("defaultAdvertiserManagerPermissions",F),z)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultAdvertiserStaffPermissions,F=>S("defaultAdvertiserStaffPermissions",F),z)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),A(a.defaultAdvertiserReadonlyPermissions,F=>S("defaultAdvertiserReadonlyPermissions",F),z)]})]})]}),t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(al,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultAffiliateManagerPermissions,F=>S("defaultAffiliateManagerPermissions",F),k)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),A(a.defaultAffiliateStaffPermissions,F=>S("defaultAffiliateStaffPermissions",F),k)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),A(a.defaultAffiliateReadonlyPermissions,F=>S("defaultAffiliateReadonlyPermissions",F),k)]})]})]})]})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("activity"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-activity-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Wr,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:" "})]}),h.activity?t.jsx(Qr,{size:20,className:"text-slate-400"}):t.jsx(Ir,{size:20,className:"text-slate-400"})]}),h.activity&&t.jsxs("div",{className:"p-4 border-t border-slate-700 space-y-4",children:[_(a.trackTeamActivityPerOrganization,F=>S("trackTeamActivityPerOrganization",F),"    "),E(a.activityLogRetentionDays,F=>S("activityLogRetentionDays",F),"   ()",7,365)]})]})]}),t.jsxs("div",{className:"mt-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-100 flex items-center gap-2",children:[t.jsx(ta,{size:20,className:"text-amber-500"}),"  (",n.length,")"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:x,onChange:F=>p(F.target.value),placeholder:"...",className:"pr-9 pl-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-slate-100 placeholder-slate-400 w-48","data-testid":"input-search-orgs"})]}),t.jsxs("select",{value:v,onChange:F=>b(F.target.value),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-slate-100","data-testid":"select-org-type",children:[t.jsx("option",{value:"all",children:""}),t.jsx("option",{value:"customer",children:""}),t.jsx("option",{value:"supplier",children:""}),t.jsx("option",{value:"advertiser",children:""}),t.jsx("option",{value:"affiliate",children:""})]})]})]}),D.length===0?t.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 text-center border border-slate-700",children:[t.jsx(mi,{size:48,className:"mx-auto mb-4 text-slate-500"}),t.jsx("p",{className:"text-slate-400",children:"    "})]}):t.jsx("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-750",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:" "})]})}),t.jsx("tbody",{className:"divide-y divide-slate-700",children:D.map(F=>t.jsxs("tr",{className:"hover:bg-slate-750/50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-100 font-medium",children:F.name})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-slate-700 rounded text-xs text-slate-300",children:[B[F.type],L[F.type]]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs ${F.isActive?"bg-emerald-900/50 text-emerald-400":"bg-red-900/50 text-red-400"}`,children:[F.isActive?t.jsx(es,{size:12}):t.jsx(vt,{size:12}),F.isActive?"":""]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:new Date(F.createdAt).toLocaleDateString("ar-SA")})]},F.id))})]})})]})]})})},VF=[{code:"ar",label:"",flag:""},{code:"en",label:"English",flag:""},{code:"hi",label:"",flag:""},{code:"zh",label:"",flag:""}],N1={Home:t.jsx(nE,{size:18}),ShoppingBag:t.jsx(Bu,{size:18}),FileText:t.jsx(zt,{size:18}),Globe:t.jsx(Ea,{size:18}),Wrench:t.jsx(ac,{size:18}),Building2:t.jsx(ta,{size:18}),Users:t.jsx(Wt,{size:18}),Clock:t.jsx(is,{size:18}),Info:t.jsx(mi,{size:18}),Shield:t.jsx(Bs,{size:18}),Truck:t.jsx(fr,{size:18}),BadgeDollarSign:t.jsx(Mte,{size:18}),Megaphone:t.jsx(ja,{size:18})},Q0e=["Home","ShoppingBag","FileText","Globe","Wrench","Building2","Users","Clock","Info","Shield","Truck","BadgeDollarSign","Megaphone"],P5=[{name:"Navy Blue",value:"#0B1B3A"},{name:"Gold",value:"#C8A04F"},{name:"Deep Blue",value:"#1e40af"},{name:"Emerald",value:"#059669"},{name:"Purple",value:"#7c3aed"},{name:"Red",value:"#dc2626"},{name:"Orange",value:"#ea580c"},{name:"Teal",value:"#0d9488"}],bm=C.memo(({active:e,icon:s,label:a,onClick:r,testId:n})=>t.jsxs("button",{onClick:r,"data-testid":n,className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${e?"bg-[#0B1B3A] text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[s,t.jsx("span",{className:"text-sm",children:a})]})),fn=C.memo(({title:e,children:s,icon:a})=>t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#0B1B3A] text-white flex items-center justify-center",children:a}),t.jsx("h3",{className:"font-bold text-slate-800",children:e})]}),t.jsx("div",{className:"p-6",children:s})]})),Ya=C.memo(({enabled:e,onChange:s,label:a,description:r,testId:n})=>t.jsxs("div",{className:"flex items-start justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-slate-700",children:a}),r&&t.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:r})]}),t.jsx("button",{onClick:()=>s(!e),"data-testid":n,className:`relative w-12 h-6 rounded-full transition-colors ${e?"bg-green-500":"bg-slate-300"}`,children:t.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${e?"translate-x-6":"translate-x-0.5"}`})})]})),mu=C.memo(({value:e,onChange:s,label:a,placeholder:r,testIdPrefix:n})=>{const[i,l]=C.useState(!1);return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-slate-700",children:a}),t.jsxs("button",{onClick:()=>l(!i),className:"text-xs text-[#C8A04F] hover:underline flex items-center gap-1","data-testid":`${n}-expand`,children:[t.jsx(pF,{size:14}),i?"Collapse":"Show All Languages"]})]}),i?t.jsx("div",{className:"space-y-2 p-3 bg-slate-50 rounded-xl",children:VF.map(o=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-8 text-center",children:o.flag}),t.jsx("input",{type:"text",value:e[o.code],onChange:d=>s({...e,[o.code]:d.target.value}),placeholder:`${o.label}: ${r||""}`,"data-testid":`${n}-${o.code}`,className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",dir:o.code==="ar"?"rtl":"ltr"})]},o.code))}):t.jsx("input",{type:"text",value:e.ar,onChange:o=>s({...e,ar:o.target.value}),placeholder:r,"data-testid":`${n}-ar`,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",dir:"rtl"})]})}),K0e=C.memo(()=>{const{t:e}=Kt(),{addToast:s}=It(),[a,r]=C.useState(null),[n,i]=C.useState(!0),[l,o]=C.useState(!1),[d,u]=C.useState("design"),[h,f]=C.useState(!1);C.useEffect(()=>{x()},[]);const x=async()=>{i(!0);try{const I=await he.getCustomerPortalSettings();r(I)}catch{s("error","Failed to load settings")}i(!1)},p=async()=>{if(a){o(!0);try{await he.saveCustomerPortalSettings(a),s("success",e("adminPortalSettings.savedSuccess")||"Settings saved successfully"),f(!1)}catch{s("error","Failed to save settings")}o(!1)}},v=async()=>{if(confirm(e("adminPortalSettings.confirmReset")||"Are you sure you want to reset all settings to defaults?")){i(!0);try{const I=await he.resetCustomerPortalSettings();r(I),s("success","Settings reset to defaults"),f(!1)}catch{s("error","Failed to reset settings")}i(!1)}},b=C.useCallback((I,T)=>{r(z=>z?{...z,[I]:T}:null),f(!0)},[]),y=C.useCallback((I,T)=>{r(z=>z?{...z,design:{...z.design,[I]:T}}:null),f(!0)},[]),j=C.useCallback((I,T)=>{r(z=>z?{...z,features:{...z.features,[I]:T}}:null),f(!0)},[]),w=C.useCallback((I,T)=>{r(z=>z?{...z,navigationMenu:z.navigationMenu.map(k=>k.id===I?{...k,...T}:k)}:null),f(!0)},[]),S=C.useCallback((I,T)=>{r(z=>z?{...z,dashboardSections:z.dashboardSections.map(k=>k.id===I?{...k,...T}:k)}:null),f(!0)},[]),O=C.useCallback((I,T)=>{r(z=>z?{...z,heroBanners:z.heroBanners.map(k=>k.id===I?{...k,...T}:k)}:null),f(!0)},[]),_=C.useCallback(()=>{const I={id:`banner-${Date.now()}`,enabled:!0,order:((a==null?void 0:a.heroBanners.length)||0)+1,title:{ar:" ",en:"New Title",hi:" ",zh:""},subtitle:{ar:" ",en:"New Description",hi:" ",zh:""},buttonText:{ar:" ",en:"Click Here",hi:"  ",zh:""},buttonUrl:"#",colorClass:"from-primary-700 to-primary-900"};r(T=>T?{...T,heroBanners:[...T.heroBanners,I]}:null),f(!0)},[a==null?void 0:a.heroBanners.length]),E=C.useCallback(I=>{r(T=>T?{...T,heroBanners:T.heroBanners.filter(z=>z.id!==I)}:null),f(!0)},[]),A=C.useCallback((I,T)=>{r(z=>z?{...z,infoCards:z.infoCards.map(k=>k.id===I?{...k,...T}:k)}:null),f(!0)},[]),D=C.useCallback(()=>{const I={id:`card-${Date.now()}`,enabled:!0,order:((a==null?void 0:a.infoCards.length)||0)+1,icon:"Shield",title:{ar:" ",en:"New Title",hi:" ",zh:""},description:{ar:" ",en:"New Description",hi:" ",zh:""},colorClass:"bg-slate-50 text-slate-600"};r(T=>T?{...T,infoCards:[...T.infoCards,I]}:null),f(!0)},[a==null?void 0:a.infoCards.length]),L=C.useCallback(I=>{r(T=>T?{...T,infoCards:T.infoCards.filter(z=>z.id!==I)}:null),f(!0)},[]),B=C.useCallback((I,T)=>{r(z=>z?{...z,announcements:z.announcements.map(k=>k.id===I?{...k,...T}:k)}:null),f(!0)},[]);return n?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx(ts,{className:"w-8 h-8 animate-spin text-[#C8A04F]"})}):a?t.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto","data-testid":"admin-portal-settings",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(aa,{className:"text-[#C8A04F]",size:28}),e("adminPortalSettings.title")||"Customer Portal Settings"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("adminPortalSettings.description")||"Configure the appearance, layout, and features of the customer portal"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:v,"data-testid":"button-reset-settings",className:"px-4 py-2.5 border border-slate-300 text-slate-600 rounded-xl hover:bg-slate-50 transition-colors flex items-center gap-2",children:[t.jsx(Gt,{size:18}),e("adminPortalSettings.resetDefaults")||"Reset Defaults"]}),t.jsxs("button",{onClick:p,disabled:l||!h,"data-testid":"button-save-settings",className:`px-6 py-2.5 rounded-xl font-medium transition-all flex items-center gap-2 ${h?"bg-[#C8A04F] text-white hover:bg-[#b8903f] shadow-lg shadow-[#C8A04F]/30":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[l?t.jsx(ts,{size:18,className:"animate-spin"}):t.jsx(us,{size:18}),e("adminPortalSettings.saveChanges")||"Save Changes"]})]})]}),h&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl px-4 py-3 flex items-center gap-3",children:[t.jsx(Cs,{className:"text-amber-500",size:20}),t.jsx("span",{className:"text-amber-700 text-sm font-medium",children:e("adminPortalSettings.unsavedChanges")||"You have unsaved changes"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(bm,{active:d==="design",icon:t.jsx(Ko,{size:18}),label:e("adminPortalSettings.tabs.design")||"Design & Theme",onClick:()=>u("design"),testId:"tab-design"}),t.jsx(bm,{active:d==="layout",icon:t.jsx(Wc,{size:18}),label:e("adminPortalSettings.tabs.layout")||"Dashboard Layout",onClick:()=>u("layout"),testId:"tab-layout"}),t.jsx(bm,{active:d==="navigation",icon:t.jsx(ZO,{size:18}),label:e("adminPortalSettings.tabs.navigation")||"Navigation Menu",onClick:()=>u("navigation"),testId:"tab-navigation"}),t.jsx(bm,{active:d==="features",icon:t.jsx(Ym,{size:18}),label:e("adminPortalSettings.tabs.features")||"Features",onClick:()=>u("features"),testId:"tab-features"}),t.jsx(bm,{active:d==="content",icon:t.jsx(zt,{size:18}),label:e("adminPortalSettings.tabs.content")||"Content",onClick:()=>u("content"),testId:"tab-content"})]}),t.jsxs("div",{className:"space-y-6",children:[d==="design"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(fn,{title:e("adminPortalSettings.design.themeMode")||"Theme Mode",icon:t.jsx(YO,{size:20}),children:t.jsx("div",{className:"flex gap-3",children:[{mode:"light",icon:t.jsx(Ore,{size:20}),label:"Light"},{mode:"dark",icon:t.jsx(YO,{size:20}),label:"Dark"},{mode:"system",icon:t.jsx(bF,{size:20}),label:"System"}].map(({mode:I,icon:T,label:z})=>t.jsxs("button",{onClick:()=>y("themeMode",I),"data-testid":`button-theme-${I}`,className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${a.design.themeMode===I?"border-[#C8A04F] bg-[#C8A04F]/10":"border-slate-200 hover:border-slate-300"}`,children:[T,t.jsx("span",{className:"text-sm font-medium",children:z})]},I))})}),t.jsx(fn,{title:e("adminPortalSettings.design.colors")||"Color Scheme",icon:t.jsx(Ko,{size:20}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Primary Color"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"color",value:a.design.primaryColor,onChange:I=>y("primaryColor",I.target.value),"data-testid":"input-primary-color",className:"w-12 h-12 rounded-lg border border-slate-200 cursor-pointer"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:P5.slice(0,4).map(I=>t.jsx("button",{onClick:()=>y("primaryColor",I.value),className:"w-8 h-8 rounded-lg border-2 border-white shadow-md",style:{backgroundColor:I.value},title:I.name},I.value))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Accent Color"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"color",value:a.design.accentColor,onChange:I=>y("accentColor",I.target.value),"data-testid":"input-accent-color",className:"w-12 h-12 rounded-lg border border-slate-200 cursor-pointer"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:P5.slice(4).map(I=>t.jsx("button",{onClick:()=>y("accentColor",I.value),className:"w-8 h-8 rounded-lg border-2 border-white shadow-md",style:{backgroundColor:I.value},title:I.name},I.value))})]})]})]})}),t.jsx(fn,{title:e("adminPortalSettings.design.appearance")||"Appearance",icon:t.jsx(Wc,{size:20}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Border Radius"}),t.jsx("div",{className:"flex gap-2",children:["none","small","medium","large"].map(I=>t.jsx("button",{onClick:()=>y("borderRadius",I),"data-testid":`button-radius-${I}`,className:`flex-1 py-2 px-3 rounded-lg border transition-all text-sm ${a.design.borderRadius===I?"border-[#C8A04F] bg-[#C8A04F]/10 text-[#C8A04F] font-medium":"border-slate-200 hover:border-slate-300"}`,children:I.charAt(0).toUpperCase()+I.slice(1)},I))})]}),t.jsx(Ya,{enabled:a.design.enableAnimations,onChange:I=>y("enableAnimations",I),label:"Enable Animations",description:"Show smooth transitions and hover effects",testId:"toggle-animations"})]})}),t.jsx(fn,{title:e("adminPortalSettings.design.font")||"Font Family",icon:t.jsx(zt,{size:20}),children:t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Cairo","Tajawal","Inter","Roboto"].map(I=>t.jsx("button",{onClick:()=>y("fontFamily",I),"data-testid":`button-font-${I}`,className:`py-3 px-4 rounded-xl border transition-all text-center ${a.design.fontFamily===I?"border-[#C8A04F] bg-[#C8A04F]/10":"border-slate-200 hover:border-slate-300"}`,style:{fontFamily:I},children:I},I))})})]}),d==="layout"&&t.jsxs(fn,{title:e("adminPortalSettings.layout.sections")||"Dashboard Sections",icon:t.jsx(Wc,{size:20}),children:[t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Enable or disable sections on the customer dashboard. Drag to reorder."}),t.jsx("div",{className:"space-y-2",children:a.dashboardSections.sort((I,T)=>I.order-T.order).map((I,T)=>t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsx(KO,{className:"text-slate-400 cursor-move",size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-slate-700",children:I.title.en}),t.jsx("p",{className:"text-xs text-slate-500",children:I.key})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{if(T>0){const z=[...a.dashboardSections],k=z[T-1],F=z[T];[k.order,F.order]=[F.order,k.order],b("dashboardSections",z)}},disabled:T===0,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(Qr,{size:18})}),t.jsx("button",{onClick:()=>{if(T<a.dashboardSections.length-1){const z=[...a.dashboardSections],k=z[T+1],F=z[T];[k.order,F.order]=[F.order,k.order],b("dashboardSections",z)}},disabled:T===a.dashboardSections.length-1,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(Ir,{size:18})})]}),t.jsx("button",{onClick:()=>S(I.id,{enabled:!I.enabled}),"data-testid":`toggle-section-${I.key}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(ns,{size:18}):t.jsx(dr,{size:18})})]},I.id))})]}),d==="navigation"&&t.jsxs(fn,{title:e("adminPortalSettings.navigation.menu")||"Navigation Menu Items",icon:t.jsx(ZO,{size:20}),children:[t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure which menu items appear in the customer portal sidebar."}),t.jsx("div",{className:"space-y-3",children:a.navigationMenu.sort((I,T)=>I.order-T.order).map((I,T)=>t.jsxs("div",{className:`p-4 rounded-xl border ${I.enabled?"bg-white border-slate-200":"bg-slate-50 border-slate-100"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(KO,{className:"text-slate-400 cursor-move",size:20}),t.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#0B1B3A] text-white flex items-center justify-center",children:N1[I.icon]||t.jsx(nE,{size:18})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("input",{type:"text",value:I.label.en,onChange:z=>w(I.id,{label:{...I.label,en:z.target.value}}),className:"w-full font-medium text-slate-700 bg-transparent border-0 focus:ring-0 p-0","data-testid":`input-nav-label-${I.key}`}),t.jsx("p",{className:"text-xs text-slate-500",children:I.key})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{if(T>0){const z=[...a.navigationMenu],k=z[T-1],F=z[T];[k.order,F.order]=[F.order,k.order],b("navigationMenu",z)}},disabled:T===0,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(Qr,{size:18})}),t.jsx("button",{onClick:()=>{if(T<a.navigationMenu.length-1){const z=[...a.navigationMenu],k=z[T+1],F=z[T];[k.order,F.order]=[F.order,k.order],b("navigationMenu",z)}},disabled:T===a.navigationMenu.length-1,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(Ir,{size:18})}),t.jsx("button",{onClick:()=>w(I.id,{enabled:!I.enabled}),"data-testid":`toggle-nav-${I.key}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(ns,{size:18}):t.jsx(dr,{size:18})})]})]}),I.enabled&&t.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100 grid grid-cols-4 gap-2",children:VF.map(z=>t.jsx("input",{type:"text",value:I.label[z.code],onChange:k=>w(I.id,{label:{...I.label,[z.code]:k.target.value}}),placeholder:z.label,className:"px-3 py-1.5 text-sm border border-slate-200 rounded-lg",dir:z.code==="ar"?"rtl":"ltr","data-testid":`input-nav-${I.key}-${z.code}`},z.code))})]},I.id))})]}),d==="features"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(fn,{title:e("adminPortalSettings.features.core")||"Core Features",icon:t.jsx(Ym,{size:20}),children:[t.jsx(Ya,{enabled:a.features.enableSearch,onChange:I=>j("enableSearch",I),label:"Search",description:"Allow customers to search for products",testId:"toggle-feature-search"}),t.jsx(Ya,{enabled:a.features.enableCart,onChange:I=>j("enableCart",I),label:"Shopping Cart",description:"Enable cart functionality",testId:"toggle-feature-cart"}),t.jsx(Ya,{enabled:a.features.enableOrders,onChange:I=>j("enableOrders",I),label:"Order History",description:"Show order history page",testId:"toggle-feature-orders"}),t.jsx(Ya,{enabled:a.features.enableQuoteRequests,onChange:I=>j("enableQuoteRequests",I),label:"Quote Requests",description:"Allow quote/pricing requests",testId:"toggle-feature-quotes"})]}),t.jsxs(fn,{title:e("adminPortalSettings.features.tools")||"Trader Tools",icon:t.jsx(ac,{size:20}),children:[t.jsx(Ya,{enabled:a.features.enableImportFromChina,onChange:I=>j("enableImportFromChina",I),label:"Import from China",description:"Enable China import requests",testId:"toggle-feature-import"}),t.jsx(Ya,{enabled:a.features.enableVinDecoder,onChange:I=>j("enableVinDecoder",I),label:"VIN Decoder",description:"Extract parts from VIN number",testId:"toggle-feature-vin"}),t.jsx(Ya,{enabled:a.features.enablePdfToExcel,onChange:I=>j("enablePdfToExcel",I),label:"PDF to Excel",description:"Convert PDF price lists to Excel",testId:"toggle-feature-pdf"}),t.jsx(Ya,{enabled:a.features.enablePriceComparison,onChange:I=>j("enablePriceComparison",I),label:"Price Comparison",description:"Compare prices across suppliers",testId:"toggle-feature-compare"}),t.jsx(Ya,{enabled:a.features.enableSupplierMarketplace,onChange:I=>j("enableSupplierMarketplace",I),label:"Supplier Marketplace",description:"Access supplier marketplace",testId:"toggle-feature-marketplace"})]}),t.jsxs(fn,{title:e("adminPortalSettings.features.b2b")||"B2B Features",icon:t.jsx(ta,{size:20}),children:[t.jsx(Ya,{enabled:a.features.enableInstallments,onChange:I=>j("enableInstallments",I),label:"Installment Purchases",description:"Enable BNPL payment options",testId:"toggle-feature-installments"}),t.jsx(Ya,{enabled:a.features.enableOrganization,onChange:I=>j("enableOrganization",I),label:"Organization Management",description:"Manage business organization",testId:"toggle-feature-organization"}),t.jsx(Ya,{enabled:a.features.enableTeamManagement,onChange:I=>j("enableTeamManagement",I),label:"Team Management",description:"Manage team members",testId:"toggle-feature-team"})]}),t.jsxs(fn,{title:e("adminPortalSettings.features.marketing")||"Marketing & Content",icon:t.jsx(ja,{size:20}),children:[t.jsx(Ya,{enabled:a.features.enableMarketingBanners,onChange:I=>j("enableMarketingBanners",I),label:"Marketing Banners",description:"Show promotional banners",testId:"toggle-feature-banners"}),t.jsx(Ya,{enabled:a.features.enableMarketingPopups,onChange:I=>j("enableMarketingPopups",I),label:"Marketing Popups",description:"Show promotional popups",testId:"toggle-feature-popups"}),t.jsx(Ya,{enabled:a.features.enableMarketingCards,onChange:I=>j("enableMarketingCards",I),label:"Marketing Cards",description:"Show dashboard marketing cards",testId:"toggle-feature-cards"}),t.jsx(Ya,{enabled:a.features.enableAnnouncementTicker,onChange:I=>j("enableAnnouncementTicker",I),label:"Announcement Ticker",description:"Show scrolling announcements",testId:"toggle-feature-ticker"})]}),t.jsxs(fn,{title:e("adminPortalSettings.features.guest")||"Guest Mode",icon:t.jsx(Wt,{size:20}),children:[t.jsx(Ya,{enabled:a.features.enableGuestMode,onChange:I=>j("enableGuestMode",I),label:"Enable Guest Mode",description:"Allow browsing without login",testId:"toggle-feature-guest"}),t.jsx(Ya,{enabled:a.features.guestCanSearch,onChange:I=>j("guestCanSearch",I),label:"Guest Can Search",description:"Allow guests to search products",testId:"toggle-feature-guest-search"}),t.jsx(Ya,{enabled:a.features.guestCanViewPrices,onChange:I=>j("guestCanViewPrices",I),label:"Guest Can View Prices",description:"Show prices to guest users",testId:"toggle-feature-guest-prices"})]})]}),d==="content"&&t.jsxs("div",{className:"space-y-8",children:[t.jsxs(fn,{title:e("adminPortalSettings.banners.hero")||"Hero Banners",icon:t.jsx(zt,{size:20}),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Configure the rotating hero banners on the dashboard."}),t.jsxs("button",{onClick:_,"data-testid":"button-add-banner",className:"flex items-center gap-2 px-4 py-2 bg-[#C8A04F] text-white rounded-xl hover:bg-[#b8903f] transition-colors",children:[t.jsx(kt,{size:18}),"Add Banner"]})]}),t.jsx("div",{className:"space-y-4",children:a.heroBanners.sort((I,T)=>I.order-T.order).map(I=>t.jsxs("div",{className:`p-4 rounded-xl border ${I.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${I.colorClass} flex items-center justify-center`,children:t.jsx(ja,{className:"text-white",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-700",children:I.title.en}),t.jsxs("p",{className:"text-xs text-slate-500",children:["Order: ",I.order]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>O(I.id,{enabled:!I.enabled}),"data-testid":`toggle-banner-${I.id}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(ns,{size:18}):t.jsx(dr,{size:18})}),t.jsx("button",{onClick:()=>E(I.id),"data-testid":`button-delete-banner-${I.id}`,className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:t.jsx(At,{size:18})})]})]}),I.enabled&&t.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-100",children:[t.jsx(mu,{value:I.title,onChange:T=>O(I.id,{title:T}),label:"Title",placeholder:"Banner title...",testIdPrefix:`banner-title-${I.id}`}),t.jsx(mu,{value:I.subtitle,onChange:T=>O(I.id,{subtitle:T}),label:"Subtitle",placeholder:"Banner subtitle...",testIdPrefix:`banner-subtitle-${I.id}`}),t.jsx(mu,{value:I.buttonText,onChange:T=>O(I.id,{buttonText:T}),label:"Button Text",placeholder:"Button text...",testIdPrefix:`banner-button-${I.id}`}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Button URL"}),t.jsx("input",{type:"text",value:I.buttonUrl,onChange:T=>O(I.id,{buttonUrl:T.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm","data-testid":`input-banner-url-${I.id}`})]})]})]},I.id))})]}),t.jsxs(fn,{title:e("adminPortalSettings.announcements.title")||"Announcements",icon:t.jsx(Nr,{size:20}),children:[t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure ticker, banner, and popup announcements."}),t.jsx("div",{className:"space-y-4",children:a.announcements.map(I=>t.jsxs("div",{className:"p-4 rounded-xl border border-slate-200 bg-white",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:I.backgroundColor,color:I.textColor},children:t.jsx(Nr,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-slate-700 capitalize",children:[I.type," Announcement"]}),t.jsx("p",{className:"text-xs text-slate-500 truncate max-w-xs",children:I.content.en})]})]}),t.jsx("button",{onClick:()=>B(I.id,{enabled:!I.enabled}),"data-testid":`toggle-announcement-${I.id}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(ns,{size:18}):t.jsx(dr,{size:18})})]}),I.enabled&&t.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-100",children:[t.jsx(mu,{value:I.content,onChange:T=>B(I.id,{content:T}),label:"Content",placeholder:"Announcement text...",testIdPrefix:`announcement-content-${I.id}`}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Background Color"}),t.jsx("input",{type:"color",value:I.backgroundColor,onChange:T=>B(I.id,{backgroundColor:T.target.value}),className:"w-full h-10 rounded-lg border border-slate-200 cursor-pointer","data-testid":`input-announcement-bg-${I.id}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Text Color"}),t.jsx("input",{type:"color",value:I.textColor,onChange:T=>B(I.id,{textColor:T.target.value}),className:"w-full h-10 rounded-lg border border-slate-200 cursor-pointer","data-testid":`input-announcement-text-${I.id}`})]})]})]})]},I.id))})]}),t.jsxs(fn,{title:e("adminPortalSettings.cards.info")||"Info Cards",icon:t.jsx(ab,{size:20}),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Configure the info/marketing cards displayed on the dashboard."}),t.jsxs("button",{onClick:D,"data-testid":"button-add-card",className:"flex items-center gap-2 px-4 py-2 bg-[#C8A04F] text-white rounded-xl hover:bg-[#b8903f] transition-colors",children:[t.jsx(kt,{size:18}),"Add Card"]})]}),t.jsx("div",{className:"space-y-4",children:a.infoCards.sort((I,T)=>I.order-T.order).map(I=>t.jsxs("div",{className:`p-4 rounded-xl border ${I.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl ${I.colorClass} flex items-center justify-center`,children:N1[I.icon]||t.jsx(Bs,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-700",children:I.title.en}),t.jsxs("p",{className:"text-xs text-slate-500",children:["Order: ",I.order]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>A(I.id,{enabled:!I.enabled}),"data-testid":`toggle-card-${I.id}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(ns,{size:18}):t.jsx(dr,{size:18})}),t.jsx("button",{onClick:()=>L(I.id),"data-testid":`button-delete-card-${I.id}`,className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:t.jsx(At,{size:18})})]})]}),I.enabled&&t.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-100",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Icon"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Q0e.map(T=>t.jsx("button",{onClick:()=>A(I.id,{icon:T}),className:`p-2 rounded-lg border transition-all ${I.icon===T?"border-[#C8A04F] bg-[#C8A04F]/10":"border-slate-200 hover:border-slate-300"}`,children:N1[T]},T))})]}),t.jsx(mu,{value:I.title,onChange:T=>A(I.id,{title:T}),label:"Title",placeholder:"Card title...",testIdPrefix:`card-title-${I.id}`}),t.jsx(mu,{value:I.description,onChange:T=>A(I.id,{description:T}),label:"Description",placeholder:"Card description...",testIdPrefix:`card-desc-${I.id}`})]})]},I.id))})]})]})]})]}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-slate-500",children:[t.jsx(Cs,{size:48,className:"mb-4"}),t.jsx("p",{children:"Failed to load settings. Please try again."})]})}),fu=({checked:e,onChange:s,testId:a})=>t.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>s(!e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${e?"bg-blue-600":"bg-gray-200"}`,"data-testid":a,children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-gray-300 transition-transform ${e?"translate-x-5":"translate-x-0.5"}`})});function J0e(){const{t:e}=Kt(),{language:s,dir:a}=Hs(),{addToast:r}=It(),n=a==="rtl",[i,l]=C.useState(null),[o,d]=C.useState(!0),[u,h]=C.useState(!1),[f,x]=C.useState(!1),[p,v]=C.useState("providers"),[b,y]=C.useState({}),[j,w]=C.useState({});C.useEffect(()=>{S()},[]);const S=async()=>{try{d(!0);const k=await he.getAISettings();l(k);const F={};k.providers.forEach(P=>{F[P.id]=P.enabled}),w(F)}catch{r(e("common.loadError","   "),"error")}finally{d(!1)}},O=async()=>{if(i)try{h(!0),await he.saveAISettings(i),x(!1),r(e("aiSettings.savedSuccess","     "),"success")}catch{r(e("common.saveError","   "),"error")}finally{h(!1)}},_=async()=>{if(confirm(e("aiSettings.confirmReset","      ")))try{const k=await he.resetAISettings();l(k),x(!1),r(e("aiSettings.resetSuccess","   "),"success")}catch{r(e("common.error"," "),"error")}},E=k=>{i&&(l({...i,...k}),x(!0))},A=(k,F)=>{if(!i)return;const P=i.providers.map(G=>G.id===k?{...G,...F}:G);E({providers:P})},D=k=>{if(!i)return;const F=i.providers.find(G=>G.id===k);if(!F)return;const P=i.providers.map(G=>({...G,isDefault:G.id===k}));E({providers:P,defaultProvider:F.provider})},L=(k,F)=>{i&&E({features:{...i.features,[k]:F}})},B=(k,F)=>{if(!i)return;const P=i.usageLimits.map(G=>G.role===k?{...G,...F}:G);E({usageLimits:P})},I=k=>{switch(k){case"openai":return"";case"gemini":return"";case"anthropic":return"";default:return""}},T=k=>{switch(k){case"openai":return"bg-green-100 text-green-800";case"gemini":return"bg-blue-100 text-blue-800";case"anthropic":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};if(o)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",dir:n?"rtl":"ltr",children:t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full"})});if(!i)return null;const z=[{id:"providers",label:e("aiSettings.tabs.providers"," "),icon:rl},{id:"features",label:e("aiSettings.tabs.features",""),icon:pi},{id:"limits",label:e("aiSettings.tabs.limits"," "),icon:Dr},{id:"prompts",label:e("aiSettings.tabs.prompts",""),icon:Rr},{id:"safety",label:e("aiSettings.tabs.safety",""),icon:Bs}];return t.jsxs("div",{className:"space-y-6",dir:n?"rtl":"ltr",children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2 text-slate-800",children:[t.jsx(Ln,{className:"w-7 h-7 text-blue-600"}),e("aiSettings.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.description","    ")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[f&&t.jsx("span",{className:"px-3 py-1 text-sm font-medium text-amber-700 bg-amber-50 border border-amber-200 rounded-lg",children:e("aiSettings.unsavedChanges","  ")}),t.jsxs("button",{onClick:_,disabled:u,className:"flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50","data-testid":"button-reset-ai",children:[t.jsx(yF,{className:"w-4 h-4"}),e("aiSettings.resetDefaults"," ")]}),t.jsxs("button",{onClick:O,disabled:u||!f,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-ai",children:[t.jsx(us,{className:"w-4 h-4"}),u?e("common.saving"," ..."):e("aiSettings.saveChanges"," ")]})]})]}),t.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${i.enabled?"bg-green-100":"bg-gray-100"}`,children:t.jsx(Ln,{className:`w-5 h-5 ${i.enabled?"text-green-600":"text-gray-500"}`})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-base font-medium text-slate-800",children:e("aiSettings.globalEnable","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.globalEnableDesc","      ")})]})]}),t.jsx("button",{type:"button",role:"switch","aria-checked":i.enabled,onClick:()=>E({enabled:!i.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${i.enabled?"bg-blue-600":"bg-gray-200"}`,"data-testid":"switch-ai-global",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-gray-300 transition-transform ${i.enabled?"translate-x-5":"translate-x-0.5"}`})})]})}),t.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-2",children:z.map(k=>t.jsxs("button",{onClick:()=>v(k.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${p===k.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`tab-ai-${k.id}`,children:[t.jsx(k.icon,{className:"w-4 h-4"}),k.label]},k.id))}),p==="providers"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(rl,{className:"w-5 h-5"}),e("aiSettings.providers.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.providers.description","  OpenAI  Gemini  Anthropic")})]}),t.jsx("div",{className:"space-y-4",children:i.providers.map(k=>t.jsxs("div",{className:`border rounded-xl overflow-hidden ${k.enabled?"border-blue-200":"border-slate-200"}`,children:[t.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer ${k.enabled?"bg-blue-50":"bg-slate-50"}`,onClick:()=>w(F=>({...F,[k.id]:!F[k.id]})),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:I(k.provider)}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-semibold text-slate-800",children:k.displayName[s]||k.displayName.en}),k.isDefault&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-full",children:e("aiSettings.providers.default","")}),t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${T(k.provider)}`,children:k.model})]}),t.jsx("p",{className:"text-sm text-slate-500",children:k.enabled?e("aiSettings.providers.enabled",""):e("aiSettings.providers.disabled","")})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",role:"switch","aria-checked":k.enabled,onClick:F=>{F.stopPropagation(),A(k.id,{enabled:!k.enabled})},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${k.enabled?"bg-blue-600":"bg-gray-200"}`,"data-testid":`switch-provider-${k.id}`,children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-gray-300 transition-transform ${k.enabled?"translate-x-5":"translate-x-0.5"}`})}),j[k.id]?t.jsx(Qr,{className:"w-5 h-5 text-slate-500"}):t.jsx(Ir,{className:"w-5 h-5 text-slate-500"})]})]}),j[k.id]&&t.jsxs("div",{className:"p-4 border-t border-slate-200 space-y-4 bg-white",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.apiKey"," API")}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:b[k.id]?"text":"password",value:k.apiKey||"",onChange:F=>A(k.id,{apiKey:F.target.value}),placeholder:e("aiSettings.providers.apiKeyPlaceholder","  API"),className:"w-full px-4 py-2 pe-10 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-apikey-${k.id}`}),t.jsx("button",{type:"button",onClick:()=>y(F=>({...F,[k.id]:!F[k.id]})),className:"absolute end-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:b[k.id]?t.jsx(dr,{className:"w-4 h-4"}):t.jsx(ns,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:e("aiSettings.providers.apiKeyNote","      Replit AI")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.model","")}),t.jsxs("select",{value:k.model,onChange:F=>A(k.id,{model:F.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`select-model-${k.id}`,children:[k.provider==="openai"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"gpt-4o",children:"GPT-4o"}),t.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini"}),t.jsx("option",{value:"gpt-4",children:"GPT-4"}),t.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"})]}),k.provider==="gemini"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"gemini-2.5-pro",children:"Gemini 2.5 Pro"}),t.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),t.jsx("option",{value:"gemini-pro",children:"Gemini Pro"})]}),k.provider==="anthropic"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"claude-opus-4-5",children:"Claude Opus 4.5"}),t.jsx("option",{value:"claude-sonnet-4-5",children:"Claude Sonnet 4.5"}),t.jsx("option",{value:"claude-haiku-4-5",children:"Claude Haiku 4.5"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.maxTokens","  ")}),t.jsx("input",{type:"number",value:k.maxTokens,onChange:F=>A(k.id,{maxTokens:parseInt(F.target.value)||4096}),min:256,max:32e3,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-tokens-${k.id}`})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.rateLimit"," ")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:k.maxRequestsPerMinute,onChange:F=>A(k.id,{maxRequestsPerMinute:parseInt(F.target.value)||60}),placeholder:e("aiSettings.providers.perMinute"," "),className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),t.jsx("input",{type:"number",value:k.maxRequestsPerDay,onChange:F=>A(k.id,{maxRequestsPerDay:parseInt(F.target.value)||1e3}),placeholder:e("aiSettings.providers.perDay"," "),className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${k.supportsChat?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[k.supportsChat?t.jsx(es,{className:"w-3 h-3"}):t.jsx(vt,{className:"w-3 h-3"}),e("aiSettings.providers.chat","")]}),t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${k.supportsImageGeneration?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[k.supportsImageGeneration?t.jsx(es,{className:"w-3 h-3"}):t.jsx(vt,{className:"w-3 h-3"}),e("aiSettings.providers.imageGen"," ")]}),t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${k.supportsVision?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[k.supportsVision?t.jsx(es,{className:"w-3 h-3"}):t.jsx(vt,{className:"w-3 h-3"}),e("aiSettings.providers.vision","")]}),t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${k.supportsAudio?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[k.supportsAudio?t.jsx(es,{className:"w-3 h-3"}):t.jsx(vt,{className:"w-3 h-3"}),e("aiSettings.providers.audio","")]})]}),!k.isDefault&&k.enabled&&t.jsx("button",{onClick:()=>D(k.id),className:"px-4 py-2 text-sm font-medium border border-blue-200 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors","data-testid":`button-default-${k.id}`,children:e("aiSettings.providers.setDefault"," ")})]})]},k.id))})]})}),p==="features"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Wt,{className:"w-5 h-5"}),e("aiSettings.features.customerTitle"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.features.customerDesc","    ")})]}),t.jsx("div",{className:"space-y-4",children:[{key:"enableAIAssistant",icon:Rr,label:" ",desc:"     "},{key:"enableAIProductSearch",icon:Lt,label:" ",desc:"     "},{key:"enableAIPartMatching",icon:rb,label:" ",desc:"   "},{key:"enableAIVinDecoding",icon:Yt,label:"  VIN",desc:"     "},{key:"enableAIPriceAnalysis",icon:gi,label:" ",desc:"  "},{key:"enableAITranslation",icon:pF,label:" ",desc:"  "}].map(k=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(k.icon,{className:"w-5 h-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e(`aiSettings.features.${k.key}`,k.label)}),t.jsx("p",{className:"text-sm text-slate-500",children:e(`aiSettings.features.${k.key}Desc`,k.desc)})]})]}),t.jsx(fu,{checked:i.features[k.key],onChange:F=>L(k.key,F),testId:`switch-feature-${k.key}`})]},k.key))})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(aa,{className:"w-5 h-5"}),e("aiSettings.features.adminTitle"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.features.adminDesc","    ")})]}),t.jsx("div",{className:"space-y-4",children:[{key:"enableAIOrderAnalysis",icon:Dr,label:" ",desc:"   "},{key:"enableAICustomerInsights",icon:Wt,label:" ",desc:"  "},{key:"enableAIReports",icon:gi,label:" ",desc:"  "},{key:"enableAIFraudDetection",icon:Ks,label:" ",desc:"  "},{key:"enableAIInventoryPrediction",icon:Yt,label:" ",desc:"  "}].map(k=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(k.icon,{className:"w-5 h-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e(`aiSettings.features.${k.key}`,k.label)}),t.jsx("p",{className:"text-sm text-slate-500",children:e(`aiSettings.features.${k.key}Desc`,k.desc)})]})]}),t.jsx(fu,{checked:i.features[k.key],onChange:F=>L(k.key,F),testId:`switch-feature-${k.key}`})]},k.key))})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(ja,{className:"w-5 h-5"}),e("aiSettings.features.marketingTitle"," ")]})}),t.jsx("div",{className:"space-y-4",children:[{key:"enableAIContentGeneration",icon:pi,label:" ",desc:"   "},{key:"enableAICampaignOptimization",icon:xh,label:" ",desc:"   "}].map(k=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(k.icon,{className:"w-5 h-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e(`aiSettings.features.${k.key}`,k.label)}),t.jsx("p",{className:"text-sm text-slate-500",children:e(`aiSettings.features.${k.key}Desc`,k.desc)})]})]}),t.jsx(fu,{checked:i.features[k.key],onChange:F=>L(k.key,F),testId:`switch-feature-${k.key}`})]},k.key))})]})]}),p==="limits"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Dr,{className:"w-5 h-5"}),e("aiSettings.limits.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.limits.description","     ")})]}),t.jsx("div",{className:"space-y-6",children:i.usageLimits.map(k=>t.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-slate-100 text-slate-700 rounded-full",children:k.role}),t.jsx("span",{className:"text-sm text-slate-500",children:e(`aiSettings.limits.role.${k.role}`,k.role)})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.limits.dailyRequests"," ")}),t.jsx("input",{type:"number",value:k.dailyRequests,onChange:F=>B(k.role,{dailyRequests:parseInt(F.target.value)||0}),min:0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-daily-${k.role}`})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.limits.monthlyRequests"," ")}),t.jsx("input",{type:"number",value:k.monthlyRequests,onChange:F=>B(k.role,{monthlyRequests:parseInt(F.target.value)||0}),min:0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-monthly-${k.role}`})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.limits.maxTokens","  ")}),t.jsx("input",{type:"number",value:k.maxTokensPerRequest,onChange:F=>B(k.role,{maxTokensPerRequest:parseInt(F.target.value)||0}),min:256,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-maxtokens-${k.role}`})]})]})]},k.role))})]}),p==="prompts"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Rr,{className:"w-5 h-5"}),e("aiSettings.prompts.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.prompts.description","    ")})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-base font-medium text-slate-800",children:e("aiSettings.prompts.customerAssistant","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.prompts.customerAssistantDesc","   ")}),t.jsx("textarea",{value:i.systemPrompts.customerAssistant[s]||i.systemPrompts.customerAssistant.en,onChange:k=>E({systemPrompts:{...i.systemPrompts,customerAssistant:{...i.systemPrompts.customerAssistant,[s]:k.target.value}}}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"textarea-prompt-assistant"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-base font-medium text-slate-800",children:e("aiSettings.prompts.productSearch","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.prompts.productSearchDesc","   ")}),t.jsx("textarea",{value:i.systemPrompts.productSearch[s]||i.systemPrompts.productSearch.en,onChange:k=>E({systemPrompts:{...i.systemPrompts,productSearch:{...i.systemPrompts.productSearch,[s]:k.target.value}}}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"textarea-prompt-search"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-base font-medium text-slate-800",children:e("aiSettings.prompts.partMatching"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.prompts.partMatchingDesc","    ")}),t.jsx("textarea",{value:i.systemPrompts.partMatching[s]||i.systemPrompts.partMatching.en,onChange:k=>E({systemPrompts:{...i.systemPrompts,partMatching:{...i.systemPrompts.partMatching,[s]:k.target.value}}}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"textarea-prompt-matching"})]})]})]}),p==="safety"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Bs,{className:"w-5 h-5"}),e("aiSettings.safety.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.safety.description","   ")})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e("aiSettings.safety.contentModeration"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.contentModerationDesc","   ")})]}),t.jsx(fu,{checked:i.enableContentModeration,onChange:k=>E({enableContentModeration:k}),testId:"switch-moderation"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block font-medium text-slate-800",children:e("aiSettings.safety.blockedTopics"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.blockedTopicsDesc","      ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:i.blockedTopics.map((k,F)=>t.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 text-sm font-medium bg-slate-100 text-slate-700 rounded-full",children:[k,t.jsx("button",{onClick:()=>E({blockedTopics:i.blockedTopics.filter((P,G)=>G!==F)}),className:"ms-1 text-slate-400 hover:text-red-500",children:t.jsx(vt,{className:"w-3 h-3"})})]},F))}),t.jsx("input",{placeholder:e("aiSettings.safety.addTopic","   Enter"),onKeyDown:k=>{if(k.key==="Enter"){const F=k.target.value.trim();F&&!i.blockedTopics.includes(F)&&(E({blockedTopics:[...i.blockedTopics,F]}),k.target.value="")}},className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"input-blocked-topic"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block font-medium text-slate-800",children:e("aiSettings.safety.maxConversation","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.maxConversationDesc","     ")}),t.jsx("input",{type:"number",value:i.maxConversationLength,onChange:k=>E({maxConversationLength:parseInt(k.target.value)||50}),min:10,max:200,className:"w-full max-w-xs px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"input-max-conversation"})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e("aiSettings.safety.trackUsage"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.trackUsageDesc","   ")})]}),t.jsx(fu,{checked:i.trackUsage,onChange:k=>E({trackUsage:k}),testId:"switch-track-usage"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e("aiSettings.safety.trackCosts"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.trackCostsDesc","  API")})]}),t.jsx(fu,{checked:i.trackCosts,onChange:k=>E({trackCosts:k}),testId:"switch-track-costs"})]})]})]})]})})]})}const Y0e=({onRefresh:e})=>{const{t:s}=Kt(),[a,r]=C.useState([]),[n,i]=C.useState(!0),[l,o]=C.useState(""),[d,u]=C.useState("ALL"),[h,f]=C.useState(null),[x,p]=C.useState(!1),{hasPermission:v}=p0(),b=v("orders","view")||v("customers","view"),y=async()=>{i(!0);try{const A=await he.getAbandonedCarts();r(A)}catch(A){console.error("Failed to load abandoned carts:",A)}finally{i(!1)}};C.useEffect(()=>{y()},[]);const j=A=>{const D=new Date,L=new Date(A),B=D.getTime()-L.getTime(),I=Math.floor(B/(1e3*60)),T=Math.floor(I/60),z=Math.floor(T/24);return z>0?`${z} ${s("common.days","")}`:T>0?`${T} ${s("common.hours","")}`:`${I} ${s("common.minutes","")}`},w=A=>{const D={ADMIN:{label:"",color:"bg-purple-100 text-purple-700"},EMPLOYEE:{label:"",color:"bg-blue-100 text-blue-700"},CUSTOMER:{label:"",color:"bg-green-100 text-green-700"},SUPPLIER_LOCAL:{label:" ",color:"bg-orange-100 text-orange-700"},SUPPLIER_INTERNATIONAL:{label:" ",color:"bg-red-100 text-red-700"},MARKETER:{label:"",color:"bg-pink-100 text-pink-700"}};if(!A)return t.jsx("span",{className:"text-slate-400 text-xs",children:"-"});const L=D[A]||{label:A,color:"bg-slate-100 text-slate-700"};return t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${L.color}`,children:L.label})},S=C.useMemo(()=>a.filter(A=>{var B,I,T;const D=!l||((B=A.userName)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))||((I=A.phone)==null?void 0:I.includes(l))||((T=A.whatsapp)==null?void 0:T.includes(l)),L=d==="ALL"||A.extendedRole===d;return D&&L}),[a,l,d]),O=C.useMemo(()=>S.reduce((A,D)=>A+D.totalAmount,0),[S]),_=A=>{f(A),p(!0)},E=A=>{if(!A)return;const D=A.replace(/[^0-9]/g,"");window.open(`https://wa.me/${D}`,"_blank")};return b?t.jsxs("div",{className:"p-6 lg:p-8",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(qa,{className:"text-[#C8A04F]",size:28}),s("adminAbandonedCarts.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:s("adminAbandonedCarts.subtitle","        (  15 )")})]}),t.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-700 font-medium transition-colors","data-testid":"button-refresh-carts",children:[t.jsx(Gt,{size:18,className:n?"animate-spin":""}),s("common.refresh","")]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:t.jsx(qa,{className:"text-orange-600",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:s("adminAbandonedCarts.stats.count"," ")}),t.jsx("p",{className:"text-2xl font-black text-slate-800","data-testid":"text-abandoned-count",children:S.length})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(Yt,{className:"text-green-600",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:s("adminAbandonedCarts.stats.totalValue"," ")}),t.jsxs("p",{className:"text-2xl font-black text-slate-800","data-testid":"text-total-value",children:[O.toLocaleString()," ."]})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(nn,{className:"text-blue-600",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:s("adminAbandonedCarts.stats.avgItems"," ")}),t.jsx("p",{className:"text-2xl font-black text-slate-800","data-testid":"text-avg-items",children:S.length>0?Math.round(S.reduce((A,D)=>A+D.items.length,0)/S.length):0})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-200 flex flex-col md:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:s("adminAbandonedCarts.searchPlaceholder","    ..."),value:l,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C8A04F]/20 focus:border-[#C8A04F]","data-testid":"input-search-carts"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(sc,{size:18,className:"text-slate-400"}),t.jsxs("select",{value:d,onChange:A=>u(A.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C8A04F]/20 focus:border-[#C8A04F]","data-testid":"select-role-filter",children:[t.jsx("option",{value:"ALL",children:s("common.allRoles"," ")}),t.jsx("option",{value:"CUSTOMER",children:s("roles.customer","")}),t.jsx("option",{value:"SUPPLIER_LOCAL",children:s("roles.supplierLocal"," ")}),t.jsx("option",{value:"SUPPLIER_INTERNATIONAL",children:s("roles.supplierIntl"," ")}),t.jsx("option",{value:"MARKETER",children:s("roles.marketer","")})]})]})]}),n?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Gt,{className:"w-8 h-8 text-slate-400 mx-auto animate-spin mb-3"}),t.jsx("p",{className:"text-slate-500",children:s("common.loading"," ...")})]}):S.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(qa,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),t.jsx("h3",{className:"text-lg font-bold text-slate-600",children:s("adminAbandonedCarts.noResults","   ")}),t.jsx("p",{className:"text-slate-400 mt-1",children:s("adminAbandonedCarts.noResultsDesc","       ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.customer","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.role","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.items","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.value","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.abandoned","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:S.map(A=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-cart-${A.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-slate-800","data-testid":`text-username-${A.id}`,children:A.userName||s("common.unknown"," ")}),A.phone&&t.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[t.jsx(Yr,{size:12}),A.phone]})]})}),t.jsx("td",{className:"px-4 py-3",children:w(A.extendedRole)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"font-medium text-slate-700","data-testid":`text-items-${A.id}`,children:[A.items.length," ",s("common.products","")]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"font-bold text-green-600","data-testid":`text-value-${A.id}`,children:[A.totalAmount.toLocaleString()," ."]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[t.jsx(is,{size:14}),t.jsx("span",{className:"text-sm font-medium","data-testid":`text-time-${A.id}`,children:j(A.lastUpdatedAt)})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>_(A),className:"p-2 text-slate-600 hover:text-[#C8A04F] hover:bg-[#C8A04F]/10 rounded-lg transition-colors",title:s("common.viewDetails"," "),"data-testid":`button-view-${A.id}`,children:t.jsx(ns,{size:18})}),A.whatsapp&&t.jsx("button",{onClick:()=>E(A.whatsapp),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:s("common.whatsapp",""),"data-testid":`button-whatsapp-${A.id}`,children:t.jsx(ku,{size:18})})]})})]},A.id))})]})})]}),t.jsx(ds,{isOpen:x,onClose:()=>p(!1),maxWidth:"max-w-2xl",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[t.jsx(qa,{className:"text-[#C8A04F]",size:24}),s("adminAbandonedCarts.details.title","  ")]}),t.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-details",children:t.jsx(vt,{size:20})})]}),h&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.customer","")}),t.jsx("span",{className:"font-bold text-slate-800",children:h.userName||"-"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.role","")}),w(h.extendedRole)]}),h.phone&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.phone","")}),t.jsx("span",{className:"font-medium text-slate-700",children:h.phone})]}),h.whatsapp&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.whatsapp","")}),t.jsxs("button",{onClick:()=>E(h.whatsapp),className:"text-green-600 font-medium hover:underline flex items-center gap-1",children:[t.jsx(ku,{size:14}),h.whatsapp]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.abandonedSince"," ")}),t.jsx("span",{className:"font-medium text-orange-600",children:j(h.lastUpdatedAt)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.lastUpdate"," ")}),t.jsx("span",{className:"font-medium text-slate-700",children:ms(h.lastUpdatedAt)})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(Yt,{size:18}),s("adminAbandonedCarts.details.products","  ")," (",h.items.length,")"]}),t.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-right text-xs font-bold text-slate-600",children:s("common.product","")}),t.jsx("th",{className:"px-4 py-2 text-center text-xs font-bold text-slate-600",children:s("common.quantity","")}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-bold text-slate-600",children:s("common.price","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:h.items.map((A,D)=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-slate-800",children:A.name}),t.jsx("span",{className:"text-xs text-slate-500",children:A.partNumber})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("span",{className:"font-medium",children:A.quantity})}),t.jsx("td",{className:"px-4 py-3 text-left",children:t.jsxs("span",{className:"font-bold text-green-600",children:[(A.price*A.quantity).toLocaleString()," ."]})})]},D))}),t.jsx("tfoot",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("td",{colSpan:2,className:"px-4 py-3 text-right font-bold text-slate-700",children:s("common.total","")}),t.jsxs("td",{className:"px-4 py-3 text-left font-black text-lg text-green-600",children:[h.totalAmount.toLocaleString()," ."]})]})})]})})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[h.whatsapp&&t.jsxs("button",{onClick:()=>E(h.whatsapp),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold transition-colors","data-testid":"button-contact-whatsapp",children:[t.jsx(ku,{size:18}),s("adminAbandonedCarts.details.contactWhatsapp","  ")]}),t.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-colors","data-testid":"button-close",children:s("common.close","")})]})]})]})})]}):t.jsx("div",{className:"p-6 lg:p-8",children:t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[t.jsx(qa,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),t.jsx("h3",{className:"text-lg font-bold text-red-700",children:s("common.accessDenied"," ")}),t.jsx("p",{className:"text-red-600 mt-2",children:s("adminAbandonedCarts.noPermission","     ")})]})})},X0e=({onRefresh:e})=>{const{t:s}=Kt(),{addToast:a}=It(),[r,n]=C.useState([]),[i,l]=C.useState(!0),[o,d]=C.useState(""),[u,h]=C.useState(1),[f,x]=C.useState(0),[p,v]=C.useState(null),b=20;C.useEffect(()=>{y()},[u]);const y=async()=>{l(!0);try{const E=await he.getAllAlternatives(u,b);n(E.data),x(E.total)}catch(E){console.error("Error loading alternatives:",E),a(s("admin.alternatives.loadError","   "),"error")}finally{l(!1)}},j=async()=>{if(!o.trim()){y();return}l(!0);try{const E=await he.searchAlternatives(o.trim());n(E),x(E.length),h(1)}catch(E){console.error("Search error:",E),a(s("admin.alternatives.searchError","  "),"error")}finally{l(!1)}},w=async E=>{if(confirm(s("admin.alternatives.confirmDelete","      "))){v(E);try{await he.deleteAlternative(E),a(s("admin.alternatives.deleteSuccess","   "),"success"),y(),e==null||e()}catch(A){console.error("Delete error:",A),a(s("admin.alternatives.deleteError","   "),"error")}finally{v(null)}}},S=()=>{try{const E=r.map(L=>({" ":L.mainPartNumber," ":L.altPartNumber,:L.description||"",:L.brand||"",:L.sourceType==="CUSTOMER_UPLOAD"?"":""," ":L.sourceUserName||"-"," ":ms(L.createdAt)})),A=Ta.book_new(),D=Ta.json_to_sheet(E);Ta.book_append_sheet(A,D,"Alternatives"),nd(A,`alternatives_export_${new Date().toISOString().split("T")[0]}.xlsx`),a(s("admin.alternatives.exportSuccess","   "),"success")}catch(E){console.error("Export error:",E),a(s("admin.alternatives.exportError","   "),"error")}},O=Math.ceil(f/b),_=(o.trim(),r);return t.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:s("admin.alternatives.title"," ")}),t.jsx("p",{className:"text-muted-foreground text-sm",children:s("admin.alternatives.subtitle","    ")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:S,disabled:r.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover-elevate disabled:opacity-50","data-testid":"button-export",children:[t.jsx(tr,{className:"w-4 h-4"}),s("admin.alternatives.export","")]}),t.jsxs("button",{onClick:()=>{d(""),h(1),y()},className:"flex items-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover-elevate","data-testid":"button-refresh",children:[t.jsx(Gt,{className:"w-4 h-4"}),s("admin.alternatives.refresh","")]})]})]}),t.jsx("div",{className:"bg-card border border-border rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:t.jsx(Yt,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.alternatives.totalCount"," ")}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-total-count",children:f})]})]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:o,onChange:E=>d(E.target.value),onKeyDown:E=>E.key==="Enter"&&j(),placeholder:s("admin.alternatives.searchPlaceholder","  ..."),className:"flex-1 px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50","data-testid":"input-search"}),t.jsxs("button",{onClick:j,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover-elevate flex items-center gap-2","data-testid":"button-search",children:[t.jsx(Lt,{className:"w-4 h-4"}),s("admin.alternatives.search","")]})]}),t.jsxs("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:[i?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(ts,{className:"w-8 h-8 animate-spin text-primary"})}):_.length===0?t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(Yt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:s("admin.alternatives.noData","  ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm","data-testid":"table-alternatives",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.mainPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.altPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.description","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.brand","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.source","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.uploadedBy"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.createdAt"," ")}),t.jsx("th",{className:"text-center p-3 font-medium text-muted-foreground",children:s("admin.alternatives.actions","")})]})}),t.jsx("tbody",{children:_.map(E=>t.jsxs("tr",{className:"border-t border-border/50 hover:bg-muted/30","data-testid":`row-alternative-${E.id}`,children:[t.jsx("td",{className:"p-3 font-mono",children:E.mainPartNumber}),t.jsx("td",{className:"p-3 font-mono text-primary",children:E.altPartNumber}),t.jsx("td",{className:"p-3 text-muted-foreground max-w-[200px] truncate",children:E.description||"-"}),t.jsx("td",{className:"p-3",children:E.brand||"-"}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs ${E.sourceType==="CUSTOMER_UPLOAD"?"bg-blue-500/10 text-blue-600":"bg-green-500/10 text-green-600"}`,children:E.sourceType==="CUSTOMER_UPLOAD"?"":""})}),t.jsx("td",{className:"p-3 text-muted-foreground",children:E.sourceUserName||"-"}),t.jsx("td",{className:"p-3 text-muted-foreground text-xs",children:ms(E.createdAt)}),t.jsx("td",{className:"p-3 text-center",children:t.jsx("button",{onClick:()=>w(E.id),disabled:p===E.id,className:"p-2 text-destructive hover:bg-destructive/10 rounded-lg disabled:opacity-50","data-testid":`button-delete-${E.id}`,children:p===E.id?t.jsx(ts,{className:"w-4 h-4 animate-spin"}):t.jsx(At,{className:"w-4 h-4"})})})]},E.id))})]})}),O>1&&t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:[s("admin.alternatives.showing","")," ",(u-1)*b+1," - ",Math.min(u*b,f)," ",s("admin.alternatives.of","")," ",f]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>h(E=>Math.max(1,E-1)),disabled:u===1,className:"p-2 rounded-lg hover-elevate disabled:opacity-50","data-testid":"button-prev-page",children:t.jsx(hs,{className:"w-4 h-4"})}),t.jsxs("span",{className:"text-sm",children:[u," / ",O]}),t.jsx("button",{onClick:()=>h(E=>Math.min(O,E+1)),disabled:u===O,className:"p-2 rounded-lg hover-elevate disabled:opacity-50","data-testid":"button-next-page",children:t.jsx(Ns,{className:"w-4 h-4"})})]})]})]})]})},D5=[{value:"LOGIN",labelAr:" ",labelEn:"Login"},{value:"LOGOUT",labelAr:" ",labelEn:"Logout"},{value:"FAILED_LOGIN",labelAr:"  ",labelEn:"Failed Login"},{value:"ORDER_CREATED",labelAr:" ",labelEn:"Order Created"},{value:"QUOTE_REQUEST",labelAr:" ",labelEn:"Quote Request"},{value:"IMPORT_REQUEST",labelAr:" ",labelEn:"Import Request"},{value:"ACCOUNT_REQUEST",labelAr:"  ",labelEn:"Account Request"},{value:"SEARCH_PERFORMED",labelAr:"",labelEn:"Search"},{value:"ORDER_STATUS_CHANGED",labelAr:"  ",labelEn:"Order Status Changed"},{value:"USER_SUSPENDED",labelAr:" ",labelEn:"User Suspended"},{value:"USER_APPROVED",labelAr:" ",labelEn:"User Approved"},{value:"PASSWORD_CHANGED",labelAr:"  ",labelEn:"Password Changed"},{value:"ALTERNATIVES_UPLOADED",labelAr:" ",labelEn:"Alternatives Uploaded"},{value:"SETTINGS_CHANGED",labelAr:" ",labelEn:"Settings Changed"},{value:"PURCHASE_REQUEST_CREATED",labelAr:" ",labelEn:"Purchase Request"}],M5=[{value:"CUSTOMER",labelAr:"",labelEn:"Customer",icon:nn},{value:"SUPPLIER",labelAr:"",labelEn:"Supplier",icon:ld},{value:"MARKETER",labelAr:"",labelEn:"Marketer",icon:ja},{value:"EMPLOYEE",labelAr:"",labelEn:"Employee",icon:dF},{value:"ADMIN",labelAr:"",labelEn:"Admin",icon:Bs}],Z0e=[{value:"ORDER",labelAr:"",labelEn:"Order"},{value:"REQUEST",labelAr:" ",labelEn:"Request"},{value:"CUSTOMER",labelAr:"",labelEn:"Customer"},{value:"SUPPLIER",labelAr:"",labelEn:"Supplier"},{value:"PRODUCT",labelAr:"",labelEn:"Product"},{value:"ALTERNATIVE",labelAr:"",labelEn:"Alternative"},{value:"SETTINGS",labelAr:"",labelEn:"Settings"},{value:"QUOTE",labelAr:"",labelEn:"Quote"},{value:"IMPORT",labelAr:"",labelEn:"Import"},{value:"USER",labelAr:"",labelEn:"User"}],eme=({onBack:e})=>{const{t:s}=Kt(),{language:a}=Hs(),r=a==="ar",[n,i]=C.useState([]),[l,o]=C.useState(!1),[d,u]=C.useState(0),[h,f]=C.useState(1),[x]=C.useState(20),[p,v]=C.useState(!1),[b,y]=C.useState(""),[j,w]=C.useState(""),[S,O]=C.useState(""),[_,E]=C.useState(""),[A,D]=C.useState(""),[L,B]=C.useState(null),[I,T]=C.useState(!1),[z,k]=C.useState("logs"),[F,P]=C.useState(null),G=async()=>{o(!0);try{const Z={page:h,pageSize:x};b&&(Z.actorType=b),j&&(Z.actionType=j),S&&(Z.entityType=S),_&&(Z.dateFrom=_),A&&(Z.dateTo=A);const ue=await he.getActivityLogsFiltered(Z);i(ue.items),u(ue.total)}catch(Z){console.error("Error loading activity logs:",Z)}finally{o(!1)}},Y=async()=>{T(!0);try{const Z=await he.getOnlineUsersGrouped(5);B(Z)}catch(Z){console.error("Error loading online users:",Z)}finally{T(!1)}},W=async()=>{try{const Z=await he.getActivityStats();P(Z)}catch(Z){console.error("Error loading stats:",Z)}};C.useEffect(()=>{G(),W()},[h]);const ee=()=>{f(1),G()},H=()=>{y(""),w(""),O(""),E(""),D(""),f(1),setTimeout(()=>G(),0)},M=Math.ceil(d/x),X=Z=>{if(!Z)return"-";const ue=M5.find(re=>re.value===Z);return ue?r?ue.labelAr:ue.labelEn:Z},K=Z=>{switch(Z){case"ADMIN":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"EMPLOYEE":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"MARKETER":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"SUPPLIER":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";default:return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}},Q=Z=>{const ue=D5.find(re=>re.value===Z);return ue?r?ue.labelAr:ue.labelEn:Z},se=Z=>{const ue=new Date(Z);return new Intl.DateTimeFormat(r?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(ue)},V=()=>L?L.onlineCustomers.length+L.onlineSuppliers.length+L.onlineMarketers.length+L.onlineEmployees.length+L.onlineAdmins.length:0,te=(Z,ue,re)=>Z.length===0?null:t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(re,{size:18,className:"text-gray-500"}),t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:ue}),t.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded-full",children:Z.length})]}),t.jsx("div",{className:"space-y-2",children:Z.map(J=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg","data-testid":`online-user-${J.id}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),t.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:J.name})]}),t.jsx("span",{className:"text-xs text-gray-500",children:se(J.lastActivityAt)})]},J.id))})]});return t.jsxs("div",{className:`p-4 md:p-6 space-y-6 ${r?"rtl":"ltr"}`,dir:r?"rtl":"ltr",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e&&t.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","data-testid":"button-back",children:r?t.jsx(hs,{size:20}):t.jsx(Ns,{size:20})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[t.jsx(Wr,{size:24,className:"text-blue-600"}),s("admin.activityLog.title",r?" ":"Activity Log")]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("admin.activityLog.subtitle",r?"   ":"Track user and system activities")})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${z==="logs"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:()=>k("logs"),"data-testid":"button-tab-logs",children:[t.jsx(Wr,{size:16}),s("admin.activityLog.logs",r?"":"Logs")]}),t.jsxs("button",{className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${z==="online"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:()=>{k("online"),L||Y()},"data-testid":"button-tab-online",children:[t.jsx(Wt,{size:16}),s("admin.activityLog.online",r?"":"Online"),L&&t.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:V()})]})]})]}),F&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:F.totalLogs}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.totalLogs",r?" ":"Total Logs")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:F.todayLogs}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.today",r?"":"Today")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:F.logsByActorType.CUSTOMER||0}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.customers",r?"":"Customers")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:F.logsByActorType.SUPPLIER||0}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.suppliers",r?"":"Suppliers")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:F.logsByActorType.MARKETER||0}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.marketers",r?"":"Marketers")})]})]}),z==="logs"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("button",{className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",onClick:()=>v(!p),"data-testid":"button-toggle-filters",children:[t.jsx(sc,{size:16}),s("admin.activityLog.filters",r?"":"Filters")]}),t.jsxs("select",{value:b,onChange:Z=>y(Z.target.value),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"select-actor-type",children:[t.jsx("option",{value:"",children:s("admin.activityLog.allActors",r?" ":"All Users")}),M5.map(Z=>t.jsx("option",{value:Z.value,children:r?Z.labelAr:Z.labelEn},Z.value))]}),t.jsxs("button",{className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700 transition-colors disabled:opacity-50",onClick:ee,disabled:l,"data-testid":"button-search",children:[t.jsx(Lt,{size:16}),s("common.search",r?"":"Search")]}),(b||j||S||_||A)&&t.jsxs("button",{className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 flex items-center gap-1",onClick:H,"data-testid":"button-clear-filters",children:[t.jsx(vt,{size:16}),s("common.clear",r?"":"Clear")]})]}),p&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.actionType",r?" ":"Action Type")}),t.jsxs("select",{value:j,onChange:Z=>w(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"select-action-type",children:[t.jsx("option",{value:"",children:s("common.all",r?"":"All")}),D5.map(Z=>t.jsx("option",{value:Z.value,children:r?Z.labelAr:Z.labelEn},Z.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.entityType",r?" ":"Entity Type")}),t.jsxs("select",{value:S,onChange:Z=>O(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"select-entity-type",children:[t.jsx("option",{value:"",children:s("common.all",r?"":"All")}),Z0e.map(Z=>t.jsx("option",{value:Z.value,children:r?Z.labelAr:Z.labelEn},Z.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.dateFrom",r?" ":"From Date")}),t.jsx("input",{type:"date",value:_,onChange:Z=>E(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"input-date-from"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.dateTo",r?" ":"To Date")}),t.jsx("input",{type:"date",value:A,onChange:Z=>D(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"input-date-to"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("h2",{className:"font-semibold text-gray-800 dark:text-white flex items-center gap-2",children:[t.jsx(Wr,{size:18}),s("admin.activityLog.activityLogs",r?" ":"Activity Logs")]}),t.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-gray-600 dark:text-gray-400",children:[d," ",s("admin.activityLog.records",r?"":"logs")]})]}),l?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx(Gt,{className:"animate-spin text-blue-600",size:28})}):n.length===0?t.jsxs("div",{className:"text-center py-16 text-gray-500",children:[t.jsx(Wr,{size:48,className:"mx-auto mb-3 opacity-40"}),t.jsx("p",{children:s("admin.activityLog.noLogs",r?"  ":"No logs found")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.time",r?"":"Time")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.user",r?"":"User")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.type",r?"":"Type")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.action",r?"":"Action")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.description",r?"":"Description")})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:n.map(Z=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors","data-testid":`log-row-${Z.id}`,children:[t.jsx("td",{className:"p-3 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-1.5 text-gray-500",children:[t.jsx(is,{size:14}),t.jsx("span",{className:"text-xs",children:se(Z.createdAt)})]})}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:Z.userName||Z.userId})}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium ${K(Z.actorType)}`,children:X(Z.actorType)})}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-800 px-2.5 py-1 rounded text-gray-700 dark:text-gray-300",children:Q(Z.eventType)})}),t.jsx("td",{className:"p-3 max-w-[300px]",children:t.jsx("span",{className:"text-gray-600 dark:text-gray-400 truncate block",title:Z.description,children:Z.description||"-"})})]},Z.id))})]})}),M>1&&t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("span",{className:"text-sm text-gray-500",children:r?` ${h}  ${M}`:`Page ${h} of ${M}`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:h===1,onClick:()=>f(Z=>Z-1),"data-testid":"button-prev-page",children:r?t.jsx(hs,{size:18}):t.jsx(Ns,{size:18})}),t.jsx("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:h===M,onClick:()=>f(Z=>Z+1),"data-testid":"button-next-page",children:r?t.jsx(Ns,{size:18}):t.jsx(hs,{size:18})})]})]})]})]}),z==="online"&&t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("h2",{className:"font-semibold text-gray-800 dark:text-white flex items-center gap-2",children:[t.jsx(Wt,{size:18}),s("admin.activityLog.onlineUsers",r?"  ":"Online Users Now")]}),t.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:Y,disabled:I,"data-testid":"button-refresh-online",children:[t.jsx(Gt,{size:14,className:I?"animate-spin":""}),s("common.refresh",r?"":"Refresh")]})]}),t.jsx("div",{className:"p-4",children:I?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx(Gt,{className:"animate-spin text-blue-600",size:28})}):L?V()===0?t.jsxs("div",{className:"text-center py-16 text-gray-500",children:[t.jsx(Wt,{size:48,className:"mx-auto mb-3 opacity-40"}),t.jsx("p",{children:s("admin.activityLog.noOnline",r?"   ":"No users online")})]}):t.jsxs("div",{className:"space-y-6",children:[te(L.onlineAdmins,s("admin.activityLog.admins",r?"":"Admins"),Bs),te(L.onlineEmployees,s("admin.activityLog.employees",r?"":"Employees"),dF),te(L.onlineSuppliers,s("admin.activityLog.suppliersOnline",r?"":"Suppliers"),ld),te(L.onlineMarketers,s("admin.activityLog.marketersOnline",r?"":"Marketers"),ja),te(L.onlineCustomers,s("admin.activityLog.customersOnline",r?"":"Customers"),nn)]}):t.jsxs("div",{className:"text-center py-16 text-gray-500",children:[t.jsx(Wt,{size:48,className:"mx-auto mb-3 opacity-40"}),t.jsx("p",{children:s("admin.activityLog.clickRefresh",r?"   ":"Click refresh to load online users")})]})})]})]})},L5={NEW:{color:"text-purple-700",bgColor:"bg-purple-100",icon:Cs},IN_REVIEW:{color:"text-yellow-700",bgColor:"bg-yellow-100",icon:ns},RESOLVED:{color:"text-green-700",bgColor:"bg-green-100",icon:Mt},DISMISSED:{color:"text-slate-500",bgColor:"bg-slate-100",icon:sa}},F5={BUG:cF,SUGGESTION:Hp,COMPLAINT:Cs,QUESTION:h0,OTHER:hF},U5={CUSTOMER:{color:"bg-blue-100 text-blue-700"},SUPPLIER:{color:"bg-orange-100 text-orange-700"},MARKETER:{color:"bg-pink-100 text-pink-700"},EMPLOYEE:{color:"bg-indigo-100 text-indigo-700"},ADMIN:{color:"bg-red-100 text-red-700"},GUEST:{color:"bg-slate-100 text-slate-700"}},z5={LOW:{color:"bg-slate-100 text-slate-600"},MEDIUM:{color:"bg-yellow-100 text-yellow-700"},HIGH:{color:"bg-red-100 text-red-700"},CRITICAL:{color:"bg-purple-100 text-purple-700"}};function tme(){const{t:e,i18n:s}=Kt(),a=s.language==="ar",r=V=>e(`feedbackAdmin.status.${V}`,V),n=V=>e(`feedback.categories.${V.toLowerCase()}`,V),i=V=>e(`feedbackAdmin.priority.${V}`,V),l=V=>e(`feedbackAdmin.senderType.${V}`,V),[o,d]=C.useState([]),[u,h]=C.useState(!0),[f,x]=C.useState(0),[p,v]=C.useState(1),b=20,[y,j]=C.useState({page:1,pageSize:20}),[w,S]=C.useState(!1),[O,_]=C.useState(""),[E,A]=C.useState(null),[D,L]=C.useState([]),[B,I]=C.useState(""),[T,z]=C.useState(""),[k,F]=C.useState(!1),[P,G]=C.useState(null),Y=C.useCallback(async()=>{h(!0);try{const V=await he.getAdminFeedbackList({...y,search:O||void 0,page:p,pageSize:b});d(V.items),x(V.total)}catch(V){console.error("Failed to load feedback:",V)}finally{h(!1)}},[y,O,p,b]),W=C.useCallback(async()=>{try{const V=await he.getFeedbackStats();G({total:V.total,byStatus:V.byStatus,thisWeek:V.thisWeek})}catch(V){console.error("Failed to load stats:",V)}},[]);C.useEffect(()=>{Y(),W()},[Y,W]);const ee=async V=>{A(V),z(V.adminNotes||"");try{const te=await he.getFeedbackReplies(V.id);L(te)}catch(te){console.error("Failed to load replies:",te)}},H=async V=>{if(E){F(!0);try{const te={status:V},Z=await he.updateFeedback(E.id,te,"admin"," ");Z&&(A(Z),Y(),W())}catch(te){console.error("Failed to update status:",te)}finally{F(!1)}}},M=async()=>{if(E){F(!0);try{const V={adminNotes:T},te=await he.updateFeedback(E.id,V,"admin"," ");te&&A(te)}catch(V){console.error("Failed to save notes:",V)}finally{F(!1)}}},X=async()=>{if(!(!E||!B.trim())){F(!0);try{const V=await he.addFeedbackReply(E.id,B.trim(),"admin"," ");L([...D,V]),I("")}catch(V){console.error("Failed to add reply:",V)}finally{F(!1)}}},K=async()=>{try{const V=await he.exportFeedbackToCsv(y),te=new Blob([V],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a");Z.href=URL.createObjectURL(te),Z.download=`feedback_export_${new Date().toISOString().split("T")[0]}.csv`,Z.click()}catch(V){console.error("Failed to export:",V)}},Q=()=>{j({page:1,pageSize:20}),_(""),v(1)},se=Math.ceil(f/b);return t.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",dir:a?"rtl":"ltr",children:t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(Rr,{className:"w-6 h-6 text-primary"}),e("feedbackCenter.title"," ")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e("feedbackCenter.subtitle","   ")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>S(!w),className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-toggle-filters",children:[t.jsx(sc,{className:"w-4 h-4"}),e("common.filter","")]}),t.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-export-feedback",children:[t.jsx(tr,{className:"w-4 h-4"}),e("common.export","")]}),t.jsxs("button",{onClick:()=>{Y(),W()},className:"flex items-center gap-2 px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary/90","data-testid":"button-refresh-feedback",children:[t.jsx(Gt,{className:"w-4 h-4"}),e("common.refresh","")]})]})]}),P&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[t.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:P.total}),t.jsx("div",{className:"text-sm text-slate-500",children:e("feedbackCenter.totalFeedback"," ")})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-700",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-700",children:P.byStatus.NEW}),t.jsx("div",{className:"text-sm text-purple-600",children:e("feedbackCenter.new","")})]}),t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-700",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:P.byStatus.IN_REVIEW}),t.jsx("div",{className:"text-sm text-yellow-600",children:e("feedbackCenter.inReview"," ")})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-700",children:[t.jsx("div",{className:"text-2xl font-bold text-green-700",children:P.byStatus.RESOLVED}),t.jsx("div",{className:"text-sm text-green-600",children:e("feedbackCenter.resolved"," ")})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-700",children:P.thisWeek}),t.jsx("div",{className:"text-sm text-blue-600",children:e("feedbackCenter.thisWeek"," ")})]})]}),w&&t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 mb-4 border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("common.search","")}),t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{className:"absolute top-1/2 transform -translate-y-1/2 start-3 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",value:O,onChange:V=>_(V.target.value),placeholder:e("feedbackCenter.searchPlaceholder","    ..."),className:"w-full ps-10 pe-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"input-search-feedback"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("common.status","")}),t.jsxs("select",{value:y.status||"",onChange:V=>j({...y,status:V.target.value||void 0}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"select-filter-status",children:[t.jsx("option",{value:"",children:e("common.all","")}),t.jsx("option",{value:"NEW",children:e("feedbackCenter.new","")}),t.jsx("option",{value:"IN_REVIEW",children:e("feedbackCenter.inReview"," ")}),t.jsx("option",{value:"RESOLVED",children:e("feedbackCenter.resolved"," ")}),t.jsx("option",{value:"DISMISSED",children:e("feedbackCenter.dismissed","")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("feedbackCenter.category","")}),t.jsxs("select",{value:y.category||"",onChange:V=>j({...y,category:V.target.value||void 0}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"select-filter-category",children:[t.jsx("option",{value:"",children:e("common.all","")}),t.jsx("option",{value:"BUG",children:n("BUG")}),t.jsx("option",{value:"SUGGESTION",children:n("SUGGESTION")}),t.jsx("option",{value:"COMPLAINT",children:n("COMPLAINT")}),t.jsx("option",{value:"QUESTION",children:n("QUESTION")}),t.jsx("option",{value:"OTHER",children:n("OTHER")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("feedbackCenter.senderType"," ")}),t.jsxs("select",{value:y.senderType||"",onChange:V=>j({...y,senderType:V.target.value||void 0}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"select-filter-sendertype",children:[t.jsx("option",{value:"",children:e("common.all","")}),t.jsx("option",{value:"CUSTOMER",children:l("CUSTOMER")}),t.jsx("option",{value:"SUPPLIER",children:l("SUPPLIER")}),t.jsx("option",{value:"MARKETER",children:l("MARKETER")}),t.jsx("option",{value:"EMPLOYEE",children:l("EMPLOYEE")}),t.jsx("option",{value:"GUEST",children:l("GUEST")})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:Q,className:"flex items-center gap-1 px-3 py-2 text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-clear-filters",children:[t.jsx(vt,{className:"w-4 h-4"}),e("common.reset","")]})})]})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:`flex-1 ${E?"hidden md:block md:w-1/2":"w-full"}`,children:t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:u?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Gt,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-2"}),t.jsx("p",{className:"text-slate-500",children:e("common.loading"," ...")})]}):o.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Rr,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),t.jsx("p",{className:"text-slate-500",children:e("feedbackCenter.noFeedback","  ")})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.map(V=>{const te=L5[V.status],Z=F5[V.category],ue=U5[V.senderType],re=z5[V.priority];return t.jsx("div",{onClick:()=>ee(V),className:`p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors ${(E==null?void 0:E.id)===V.id?"bg-primary/5 border-s-4 border-primary":""}`,"data-testid":`feedback-item-${V.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Z,{className:"w-4 h-4 text-slate-500 flex-shrink-0"}),t.jsx("span",{className:"font-medium text-slate-800 dark:text-white truncate",children:V.subject})]}),t.jsx("p",{className:"text-sm text-slate-500 line-clamp-1 mb-2",children:V.message}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full ${ue.color}`,children:V.senderName}),t.jsx("span",{className:`px-2 py-0.5 rounded-full ${re.color}`,children:i(V.priority)}),t.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[t.jsx(is,{className:"w-3 h-3"}),new Date(V.createdAt).toLocaleDateString(s.language)]})]})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${te.bgColor} ${te.color}`,children:r(V.status)})]})},V.id)})}),se>1&&t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:[e("common.page","")," ",p," ",e("common.of","")," ",se]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>v(V=>Math.max(1,V-1)),disabled:p===1,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50","data-testid":"button-prev-page",children:a?t.jsx(hs,{className:"w-4 h-4"}):t.jsx(Ns,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>v(V=>Math.min(se,V+1)),disabled:p===se,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50","data-testid":"button-next-page",children:a?t.jsx(Ns,{className:"w-4 h-4"}):t.jsx(hs,{className:"w-4 h-4"})})]})]})]})})}),E&&t.jsxs("div",{className:"fixed inset-0 md:static md:w-1/2 bg-white dark:bg-slate-800 md:rounded-lg md:border md:border-slate-200 dark:md:border-slate-700 z-50 md:z-auto overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 flex items-center justify-between z-10",children:[t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:e("feedbackCenter.details"," ")}),t.jsx("button",{onClick:()=>A(null),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700","data-testid":"button-close-details",children:t.jsx(vt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(nn,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:E.senderName}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${U5[E.senderType].color}`,children:l(E.senderType)}),E.senderContact&&t.jsx(t.Fragment,{children:E.senderContact.includes("@")?t.jsxs("a",{href:`mailto:${E.senderContact}`,className:"flex items-center gap-1 text-primary hover:underline",children:[t.jsx(Fl,{className:"w-3 h-3"}),E.senderContact]}):t.jsxs("a",{href:`tel:${E.senderContact}`,className:"flex items-center gap-1 text-primary hover:underline",children:[t.jsx(Yr,{className:"w-3 h-3"}),E.senderContact]})})]})]})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(()=>{const V=F5[E.category];return t.jsx(V,{className:"w-4 h-4 text-slate-500"})})(),t.jsx("span",{className:"font-semibold text-slate-800 dark:text-white",children:E.subject})]}),t.jsx("p",{className:"text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:E.message}),E.pageContext&&t.jsxs("div",{className:"mt-3 text-xs text-slate-400",children:[e("feedbackCenter.pageContext",""),": ",t.jsx("code",{className:"bg-slate-200 dark:bg-slate-600 px-1 rounded",children:E.pageContext})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${z5[E.priority].color}`,children:[e("feedbackCenter.priority",""),": ",i(E.priority)]}),t.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:n(E.category)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("feedbackCenter.changeStatus"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["NEW","IN_REVIEW","RESOLVED","DISMISSED"].map(V=>{const te=L5[V],Z=te.icon;return t.jsxs("button",{onClick:()=>H(V),disabled:k||E.status===V,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-all ${E.status===V?`${te.bgColor} ${te.color} ring-2 ring-offset-1`:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200"} disabled:opacity-50`,"data-testid":`button-status-${V}`,children:[t.jsx(Z,{className:"w-3.5 h-3.5"}),r(V)]},V)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("feedbackCenter.adminNotes"," ")}),t.jsx("textarea",{value:T,onChange:V=>z(V.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",placeholder:e("feedbackCenter.adminNotesPlaceholder","  ..."),"data-testid":"input-admin-notes"}),t.jsx("button",{onClick:M,disabled:k||T===(E.adminNotes||""),className:"mt-2 px-4 py-1.5 bg-primary text-white text-sm rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-save-notes",children:e("common.save","")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e("feedbackCenter.replies","")," (",D.length,")"]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[D.map(V=>t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm text-blue-800 dark:text-blue-300",children:V.senderName}),t.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:new Date(V.createdAt).toLocaleString("ar-SA")})]}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200",children:V.message})]},V.id)),D.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-2",children:e("feedbackCenter.noReplies","   ")})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:B,onChange:V=>I(V.target.value),placeholder:e("feedbackCenter.replyPlaceholder"," ..."),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm","data-testid":"input-reply"}),t.jsx("button",{onClick:X,disabled:k||!B.trim(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-send-reply",children:t.jsx(xi,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"text-xs text-slate-400 pt-2 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{children:[e("feedbackCenter.createdAt"," "),": ",new Date(E.createdAt).toLocaleString("ar-SA")]}),t.jsxs("div",{children:[e("feedbackCenter.updatedAt"," "),": ",new Date(E.updatedAt).toLocaleString("ar-SA")]})]})]})]})]})]})})}const j1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var vm={};function Qp(e,s=""){if(typeof import.meta<"u"&&j1){const a=`VITE_${e}`;if(j1[a]!==void 0)return j1[a]}if(typeof process<"u"&&vm){if(vm[e]!==void 0)return vm[e];const a=`VITE_${e}`;if(vm[a]!==void 0)return vm[a]}return s}function B5(){const e=Qp("NODE_ENV","development");return e==="production"?"production":e==="test"?"test":"development"}function sme(){const e=Qp("API_MODE","mock"),s=Qp("API_BASE_URL","");return e==="rest"&&!s?(console.warn('[apiConfig] API_MODE is "rest" but API_BASE_URL is not set. Falling back to mock mode.'),"mock"):e==="rest"||e==="mock"?e:"mock"}const zo={env:B5(),apiMode:sme(),baseUrl:Qp("API_BASE_URL","https://api.sini-pro-erp.com/v1"),timeouts:{default:3e4},retry:{maxRetries:3,baseDelay:1e3,maxDelay:1e4},defaultHeaders:{"Content-Type":"application/json",Accept:"application/json","Accept-Language":"ar"},debug:B5()==="development"};function ame(e){return`${zo.baseUrl}${e}`}function ym(e,s,a){if(zo.debug){const r=new Date().toISOString();console.log(`[${r}] [${e}] ${s}`,a??"")}}function rme(e,s,a,r){const n=new Date().toISOString();console.error(`[${n}] [${e}] ${s}`,{error:a,context:r,apiMode:zo.apiMode,env:zo.env})}const nme="auth_token";function ime(){try{return localStorage.getItem(nme)}catch{return null}}function lme(e){const s=Object.entries(e).filter(([,a])=>a!==void 0).map(([a,r])=>`${encodeURIComponent(a)}=${encodeURIComponent(String(r))}`);return s.length>0?`?${s.join("&")}`:""}function $5(e){const{baseDelay:s,maxDelay:a}=zo.retry,r=s*Math.pow(2,e);return Math.min(r,a)}function ome(e){return e===401?"UNAUTHORIZED":e===403?"FORBIDDEN":e===404?"NOT_FOUND":e===422||e===400?"VALIDATION_ERROR":e>=500?"SERVER_ERROR":"UNKNOWN"}function w1(e,s){return{NETWORK_ERROR:"   .     .",TIMEOUT:"  .    .",UNAUTHORIZED:"  .     .",FORBIDDEN:"      .",NOT_FOUND:"   .",VALIDATION_ERROR:s||"   .",SERVER_ERROR:"   .   .",UNKNOWN:s||"   ."}[e]}function cme(e){const s={};return e.headers.forEach((a,r)=>{s[r]=a}),s}function dme(e){return new Promise((s,a)=>{setTimeout(()=>{a(new Error("Request timeout"))},e)})}async function Nm(e,s,a,r={}){const n=Date.now(),i=r.retries??zo.retry.maxRetries,l=r.timeout??zo.timeouts.default;let o=null,d=0;const u=r.params?lme(r.params):"",h=ame(s)+u,f={...zo.defaultHeaders,...r.headers};if(!r.skipAuth){const p=ime();p&&(f.Authorization=`Bearer ${p}`)}const x={method:e,headers:f,credentials:r.credentials??"same-origin",signal:r.signal};for(a&&e!=="GET"&&(x.body=JSON.stringify(a));d<=i;)try{ym("http",`${e} ${s}`,{attempt:d+1,body:a});const p=await Promise.race([fetch(h,x),dme(l)]),v=Date.now()-n,b=cme(p);let y=null;const j=p.headers.get("content-type");if(j!=null&&j.includes("application/json"))try{y=await p.json()}catch(w){ym("http","Failed to parse JSON response",w)}if(!p.ok){const w=ome(p.status),S=(y==null?void 0:y.message)||p.statusText;if(o={code:w,message:w1(w,S),status:p.status,details:y},p.status>=400&&p.status<500&&p.status!==429)break;if(d<i){const O=$5(d);ym("http",`Retry ${d+1}/${i} after ${O}ms`),await new Promise(_=>setTimeout(_,O)),d++;continue}break}return ym("http",`${e} ${s} completed`,{status:p.status,duration:v}),{data:y,error:null,status:p.status,success:!0,headers:b,meta:{url:h,method:e,duration:v,retries:d}}}catch(p){const v=Date.now()-n;if(p instanceof Error&&p.message==="Request timeout")o={code:"TIMEOUT",message:w1("TIMEOUT"),status:0,details:{timeout:l}};else{if(p instanceof DOMException&&p.name==="AbortError")return{data:null,error:"  ",status:0,success:!1,meta:{url:h,method:e,duration:v,retries:d}};o={code:"NETWORK_ERROR",message:w1("NETWORK_ERROR"),status:0,details:p}}if(rme("http",`${e} ${s} failed`,p,{url:h,attempt:d+1,duration:v}),d<i){const b=$5(d);ym("http",`Retry ${d+1}/${i} after ${b}ms`),await new Promise(y=>setTimeout(y,b)),d++;continue}break}return{data:null,error:(o==null?void 0:o.message)||"   ",status:(o==null?void 0:o.status)??0,success:!1,meta:{url:h,method:e,duration:Date.now()-n,retries:d}}}const Vi={get(e,s){return Nm("GET",e,void 0,s)},post(e,s,a){return Nm("POST",e,s,a)},put(e,s,a){return Nm("PUT",e,s,a)},patch(e,s,a){return Nm("PATCH",e,s,a)},delete(e,s){return Nm("DELETE",e,void 0,s)}},q5={WHATSAPP:Yr,EMAIL:Fl,NOTIFICATION:Nr},H5={WHATSAPP:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",border:"border-green-300 dark:border-green-700"},EMAIL:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",border:"border-blue-300 dark:border-blue-700"},NOTIFICATION:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",border:"border-purple-300 dark:border-purple-700"}},ume={PENDING:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-300"},SENT:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300"},DELIVERED:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300"},FAILED:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300"}},mme=["QUOTE_CREATED","QUOTE_APPROVED","ORDER_CREATED","ORDER_SHIPPED","PASSWORD_RESET","ACCOUNT_ACTIVATED","WELCOME_MESSAGE","PAYMENT_REMINDER","SUPPLIER_APPLICATION_APPROVED"],fme=["WHATSAPP","EMAIL","NOTIFICATION"];function hme(){const{t:e,i18n:s}=Kt(),a=s.language==="ar",r=s.language==="ar"?"ar":"en",[n,i]=C.useState("templates"),[l,o]=C.useState("WHATSAPP"),[d,u]=C.useState(null),[h,f]=C.useState(null),[x,p]=C.useState([]),[v,b]=C.useState([]),[y,j]=C.useState([]),[w,S]=C.useState(null),[O,_]=C.useState(!0),[E,A]=C.useState(!1),[D,L]=C.useState(!1),[B,I]=C.useState(!1),[T,z]=C.useState(!1),[k,F]=C.useState(""),[P,G]=C.useState(null),[Y,W]=C.useState(""),[ee,H]=C.useState(1),[M,X]=C.useState(0),K=20,[Q,se]=C.useState({name:"",subject:"",body:"",isActive:!0}),V=Ae=>e(`messaging.events.${Ae}`,Ae),te=Ae=>e(`messaging.channels.${Ae}`,Ae),Z=Ae=>e(`messaging.status.${Ae}`,Ae),ue=C.useCallback(async()=>{_(!0);try{const Ae=await Vi.get("/api/messaging/templates");Ae.success&&Ae.data&&p(Ae.data)}catch(Ae){console.error("Failed to load templates:",Ae)}finally{_(!1)}},[]),re=C.useCallback(async Ae=>{try{const Ue=await Vi.get(`/api/messaging/variables/${Ae}`);Ue.success&&Ue.data&&b(Ue.data)}catch(Ue){console.error("Failed to load variables:",Ue),b([])}},[]),J=C.useCallback(async()=>{try{const Ae=await Vi.get("/api/messaging/logs",{params:{page:ee,pageSize:K,search:Y||void 0}});Ae.success&&Ae.data&&(j(Ae.data.items),X(Ae.data.total))}catch(Ae){console.error("Failed to load logs:",Ae)}},[ee,Y]),Ne=C.useCallback(async()=>{try{const Ae=await Vi.get("/api/messaging/settings");Ae.success&&Ae.data&&S(Ae.data)}catch(Ae){console.error("Failed to load settings:",Ae)}},[]);C.useEffect(()=>{ue(),Ne()},[ue,Ne]),C.useEffect(()=>{n==="logs"&&J()},[n,J]),C.useEffect(()=>{d&&re(d)},[d,re]),x.filter(Ae=>Ae.channel===l&&Ae.language===r);const q=Ae=>x.find(Ue=>Ue.event===Ae&&Ue.channel===l&&Ue.language===r),ce=Ae=>{f(Ae),u(Ae.event),se({name:Ae.name,subject:Ae.subject||"",body:Ae.body,isActive:Ae.isActive}),L(!0)},fe=Ae=>{u(Ae),f(null),se({name:"",subject:"",body:"",isActive:!0}),L(!0)},ie=async()=>{if(d){A(!0);try{const Ae={event:d,channel:l,language:r,name:Q.name,subject:Q.subject||null,body:Q.body,isActive:Q.isActive};let Ue;h?Ue=await Vi.patch(`/api/messaging/templates/${h.id}`,Ae):Ue=await Vi.post("/api/messaging/templates",Ae),Ue.success&&(await ue(),L(!1),f(null),u(null))}catch(Ae){console.error("Failed to save template:",Ae)}finally{A(!1)}}},ne=async Ae=>{if(confirm(e("messaging.confirmDelete","      ")))try{await Vi.delete(`/api/messaging/templates/${Ae.id}`),await ue()}catch(Ue){console.error("Failed to delete template:",Ue)}},pe=async Ae=>{try{await Vi.patch(`/api/messaging/templates/${Ae.id}`,{isActive:!Ae.isActive}),await ue()}catch(Ue){console.error("Failed to toggle template:",Ue)}},Ee=async()=>{if(w){A(!0);try{await Vi.patch("/api/messaging/settings",w)}catch(Ae){console.error("Failed to save settings:",Ae)}finally{A(!1)}}},Ie=async()=>{if(!(!h||!k)){A(!0),G(null);try{const Ae={};v.forEach(Qe=>{Ae[Qe.code]=Qe.sampleValue});const Ue=await Vi.post("/api/messaging/send",{event:h.event,channel:h.channel,recipientId:"test",recipientContact:k,data:Ae,language:r});Ue.success?G({success:!0,message:e("messaging.testSuccess","    ")}):G({success:!1,message:Ue.error||e("messaging.testFailed","  ")})}catch{G({success:!1,message:e("messaging.testFailed","  ")})}finally{A(!1)}}},_e=Ae=>{const Ue=`{{${Ae}}}`;se(Qe=>({...Qe,body:Qe.body+Ue}))},Ge=Math.ceil(M/K);return t.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(Rr,{className:"w-6 h-6 text-primary"}),e("messaging.title"," ")]}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:e("messaging.subtitle","   ")})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("button",{onClick:ue,className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-refresh-templates",children:[t.jsx(Gt,{className:"w-4 h-4"}),e("common.refresh","")]})})]}),t.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[t.jsxs("button",{onClick:()=>i("templates"),className:`px-4 py-3 flex items-center gap-2 border-b-2 transition-colors ${n==="templates"?"border-primary text-primary font-medium":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,"data-testid":"tab-templates",children:[t.jsx(QO,{className:"w-4 h-4"}),e("messaging.tabs.templates","")]}),t.jsxs("button",{onClick:()=>i("logs"),className:`px-4 py-3 flex items-center gap-2 border-b-2 transition-colors ${n==="logs"?"border-primary text-primary font-medium":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,"data-testid":"tab-logs",children:[t.jsx(gn,{className:"w-4 h-4"}),e("messaging.tabs.logs"," ")]}),t.jsxs("button",{onClick:()=>i("settings"),className:`px-4 py-3 flex items-center gap-2 border-b-2 transition-colors ${n==="settings"?"border-primary text-primary font-medium":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,"data-testid":"tab-settings",children:[t.jsx(aa,{className:"w-4 h-4"}),e("messaging.tabs.settings","")]})]}),n==="templates"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:fme.map(Ae=>{const Ue=q5[Ae],Qe=H5[Ae];return t.jsxs("button",{onClick:()=>o(Ae),className:`flex items-center gap-2 px-4 py-2 rounded-lg border whitespace-nowrap transition-all ${l===Ae?`${Qe.bg} ${Qe.text} ${Qe.border} ring-2 ring-offset-2 ring-${Ae==="WHATSAPP"?"green":Ae==="EMAIL"?"blue":"purple"}-500/30`:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,"data-testid":`button-channel-${Ae.toLowerCase()}`,children:[t.jsx(Ue,{className:"w-4 h-4"}),te(Ae)]},Ae)})}),t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.event","")}),t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.template","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.status","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:mme.map(Ae=>{const Ue=q(Ae);return t.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50","data-testid":`row-event-${Ae.toLowerCase()}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(rl,{className:"w-4 h-4 text-amber-500"}),t.jsx("span",{className:"font-medium text-slate-800 dark:text-white",children:V(Ae)})]})}),t.jsx("td",{className:"px-4 py-3",children:Ue?t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:Ue.name}),Ue.isDefault&&t.jsx("span",{className:"ms-2 px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:e("messaging.default","")})]}):t.jsx("span",{className:"text-slate-400 dark:text-slate-500 italic",children:e("messaging.noTemplate","  ")})}),t.jsx("td",{className:"px-4 py-3 text-center",children:Ue?t.jsx("button",{onClick:()=>pe(Ue),className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${Ue.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,"data-testid":`button-toggle-${Ae.toLowerCase()}`,children:Ue.isActive?t.jsxs(t.Fragment,{children:[t.jsx(es,{className:"w-3 h-3"})," ",e("messaging.active","")]}):t.jsxs(t.Fragment,{children:[t.jsx(vt,{className:"w-3 h-3"})," ",e("messaging.inactive","")]})}):t.jsx("span",{className:"text-slate-400",children:""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex items-center justify-center gap-1",children:Ue?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>ce(Ue),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:e("common.edit",""),"data-testid":`button-edit-${Ae.toLowerCase()}`,children:t.jsx(ql,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{f(Ue),u(Ue.event),I(!0)},className:"p-2 text-slate-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg",title:e("common.preview",""),"data-testid":`button-preview-${Ae.toLowerCase()}`,children:t.jsx(ns,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{f(Ue),u(Ue.event),z(!0)},className:"p-2 text-slate-500 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg",title:e("messaging.sendTest"," "),"data-testid":`button-test-${Ae.toLowerCase()}`,children:t.jsx(vu,{className:"w-4 h-4"})}),!Ue.isDefault&&t.jsx("button",{onClick:()=>ne(Ue),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:e("common.delete",""),"data-testid":`button-delete-${Ae.toLowerCase()}`,children:t.jsx(At,{className:"w-4 h-4"})})]}):t.jsxs("button",{onClick:()=>fe(Ae),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-primary text-white rounded-lg hover:bg-primary/90","data-testid":`button-create-${Ae.toLowerCase()}`,children:[t.jsx(kt,{className:"w-4 h-4"}),e("messaging.createTemplate"," ")]})})})]},Ae)})})]})})})]}),n==="logs"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Lt,{className:"absolute start-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",value:Y,onChange:Ae=>W(Ae.target.value),placeholder:e("messaging.searchLogs","   ..."),className:"w-full ps-10 pe-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-white placeholder-slate-400","data-testid":"input-search-logs"})]}),t.jsx("button",{onClick:J,className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-refresh-logs",children:t.jsx(Gt,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.recipient","")}),t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.event","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.channel","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.status","")}),t.jsx("th",{className:"px-4 py-3 text-end text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.sentAt"," ")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[y.map(Ae=>{const Ue=q5[Ae.channel],Qe=H5[Ae.channel],_t=ume[Ae.status];return t.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50","data-testid":`row-log-${Ae.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:Ae.recipientName||e("messaging.logs.unknown"," ")}),t.jsx("div",{className:"text-sm text-slate-500",children:Ae.recipientContact})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:V(Ae.event)})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${Qe.bg} ${Qe.text}`,children:[t.jsx(Ue,{className:"w-3 h-3"}),te(Ae.channel)]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${_t.bg} ${_t.text}`,children:[Ae.status==="FAILED"&&t.jsx(Ks,{className:"w-3 h-3"}),Ae.status==="DELIVERED"&&t.jsx(es,{className:"w-3 h-3"}),Ae.status==="PENDING"&&t.jsx(is,{className:"w-3 h-3"}),Ae.status==="SENT"&&t.jsx(xi,{className:"w-3 h-3"}),Z(Ae.status)]})}),t.jsx("td",{className:"px-4 py-3 text-end text-sm text-slate-500",children:Ae.sentAt?new Date(Ae.sentAt).toLocaleString(a?"ar-SA":"en-US"):""})]},Ae.id)}),y.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:e("messaging.logs.empty","    ")})})]})]})}),Ge>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"text-sm text-slate-500",children:[e("common.showing","")," ",(ee-1)*K+1," - ",Math.min(ee*K,M)," ",e("common.of","")," ",M]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>H(Ae=>Math.max(1,Ae-1)),disabled:ee===1,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-700 disabled:opacity-50","data-testid":"button-prev-page",children:a?t.jsx(hs,{className:"w-4 h-4"}):t.jsx(Ns,{className:"w-4 h-4"})}),t.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[ee," / ",Ge]}),t.jsx("button",{onClick:()=>H(Ae=>Math.min(Ge,Ae+1)),disabled:ee===Ge,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-700 disabled:opacity-50","data-testid":"button-next-page",children:a?t.jsx(Ns,{className:"w-4 h-4"}):t.jsx(hs,{className:"w-4 h-4"})})]})]})]})]}),n==="settings"&&w&&t.jsx("div",{className:"max-w-2xl",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:e("messaging.settings.channels"," ")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:w.enableWhatsApp,onChange:Ae=>S({...w,enableWhatsApp:Ae.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-green-600 focus:ring-green-500","data-testid":"checkbox-whatsapp"}),t.jsx(Yr,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e("messaging.channels.WHATSAPP","")})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:w.enableEmail,onChange:Ae=>S({...w,enableEmail:Ae.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500","data-testid":"checkbox-email"}),t.jsx(Fl,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e("messaging.channels.EMAIL"," ")})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:w.enableNotifications,onChange:Ae=>S({...w,enableNotifications:Ae.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-purple-600 focus:ring-purple-500","data-testid":"checkbox-notifications"}),t.jsx(Nr,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e("messaging.channels.NOTIFICATION","")})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("messaging.settings.defaultLanguage","  ")}),t.jsxs("select",{value:w.defaultLanguage,onChange:Ae=>S({...w,defaultLanguage:Ae.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-white","data-testid":"select-default-language",children:[t.jsx("option",{value:"ar",children:""}),t.jsx("option",{value:"en",children:"English"})]})]}),t.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:t.jsxs("button",{onClick:Ee,disabled:E,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-save-settings",children:[t.jsx(us,{className:"w-4 h-4"}),E?e("common.saving"," ..."):e("common.save","")]})})]})})]}),D&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:h?e("messaging.editTemplate"," "):e("messaging.createTemplate","  ")}),t.jsx("button",{onClick:()=>L(!1),className:"p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-editor",children:t.jsx(vt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e("messaging.form.name"," ")}),t.jsx("input",{type:"text",value:Q.name,onChange:Ae=>se({...Q,name:Ae.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white","data-testid":"input-template-name"})]}),l==="EMAIL"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e("messaging.form.subject"," ")}),t.jsx("input",{type:"text",value:Q.subject,onChange:Ae=>se({...Q,subject:Ae.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white","data-testid":"input-template-subject"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e("messaging.form.body"," ")}),t.jsx("textarea",{value:Q.body,onChange:Ae=>se({...Q,body:Ae.target.value}),rows:8,className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white font-mono text-sm",dir:"auto","data-testid":"textarea-template-body"})]}),v.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("messaging.form.variables"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(Ae=>t.jsxs("button",{onClick:()=>_e(Ae.code),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 text-sm",title:`${a?Ae.nameAr:Ae.name}: ${Ae.sampleValue}`,"data-testid":`button-variable-${Ae.code}`,children:[t.jsx(QO,{className:"w-3 h-3"}),`{{${Ae.code}}}`,Ae.isRequired&&t.jsx("span",{className:"text-red-500",children:"*"})]},Ae.code))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:Q.isActive,onChange:Ae=>se({...Q,isActive:Ae.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary","data-testid":"checkbox-template-active"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-slate-700 dark:text-slate-300",children:e("messaging.form.isActive"," ")})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-cancel-edit",children:e("common.cancel","")}),t.jsxs("button",{onClick:ie,disabled:E||!Q.name||!Q.body,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-save-template",children:[t.jsx(us,{className:"w-4 h-4"}),E?e("common.saving"," ..."):e("common.save","")]})]})]})}),B&&h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(ns,{className:"w-5 h-5"}),e("messaging.preview"," ")]}),t.jsx("button",{onClick:()=>I(!1),className:"p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-preview",children:t.jsx(vt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l==="EMAIL"&&h.subject&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:e("messaging.preview.subject","")}),t.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-900 rounded-lg text-slate-800 dark:text-white",children:h.subject})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:e("messaging.preview.body"," ")}),t.jsx("div",{className:`p-4 rounded-lg whitespace-pre-wrap ${l==="WHATSAPP"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":l==="EMAIL"?"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700":"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800"}`,children:l==="EMAIL"?t.jsx("div",{className:"text-slate-800 dark:text-white",dangerouslySetInnerHTML:{__html:h.body}}):t.jsx("p",{className:"text-slate-800 dark:text-white",dir:"auto",children:h.body})})]})]}),t.jsx("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:t.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-preview-action",children:e("common.close","")})})]})}),T&&h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(vu,{className:"w-5 h-5"}),e("messaging.sendTest","  ")]}),t.jsx("button",{onClick:()=>{z(!1),G(null),F("")},className:"p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-test",children:t.jsx(vt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:l==="WHATSAPP"?e("messaging.test.phone"," "):l==="EMAIL"?e("messaging.test.email"," "):e("messaging.test.userId"," ")}),t.jsx("input",{type:l==="EMAIL"?"email":"text",value:k,onChange:Ae=>F(Ae.target.value),placeholder:l==="WHATSAPP"?"+966501234567":l==="EMAIL"?"test@example.com":"user-123",className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white",dir:"ltr","data-testid":"input-test-recipient"})]}),P&&t.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${P.success?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:[P.success?t.jsx(es,{className:"w-5 h-5"}):t.jsx(Ks,{className:"w-5 h-5"}),P.message]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:()=>{z(!1),G(null),F("")},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-cancel-test",children:e("common.cancel","")}),t.jsxs("button",{onClick:Ie,disabled:E||!k,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-send-test",children:[t.jsx(xi,{className:"w-4 h-4"}),E?e("common.sending"," ..."):e("messaging.send","")]})]})]})})]})}const Ao=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,xme=[{id:"1",code:"SAR",name:" ",nameAr:" ",nameEn:"Saudi Riyal",symbol:".",isBase:!0,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"USD",name:" ",nameAr:" ",nameEn:"US Dollar",symbol:"$",isBase:!1,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"CNY",name:" ",nameAr:" ",nameEn:"Chinese Yuan",symbol:"",isBase:!1,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"AED",name:" ",nameAr:" ",nameEn:"UAE Dirham",symbol:".",isBase:!1,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()}],pme=[{id:"1",currencyId:"2",rateToBase:3.75,syncPercent:2.5,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},{id:"2",currencyId:"3",rateToBase:.52,syncPercent:3,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},{id:"3",currencyId:"4",rateToBase:1.02,syncPercent:1.5,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()}],gme=[{id:"1",name:"  ",nameAr:"  ",nameEn:"China Direct",description:"    ",defaultMarginPercent:25,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",name:" ",nameAr:" ",nameEn:"Dubai Partners",description:"    ",defaultMarginPercent:18,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",name:" ",nameAr:" ",nameEn:"Saudi Local",description:"  ",defaultMarginPercent:12,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()}],bme=[{id:"1",code:"OEM",label:" ",labelAr:" ",labelEn:"Original Equipment",description:"    ",defaultMarginAdjust:5,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"OES",label:" ",labelAr:" ",labelEn:"OES Quality",description:"     ",defaultMarginAdjust:3,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"AFT",label:" ",labelAr:" ",labelEn:"Aftermarket Premium",description:"  ",defaultMarginAdjust:0,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"CPY",label:"",labelAr:"",labelEn:"Commercial Copy",description:"  ",defaultMarginAdjust:-3,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()},{id:"5",code:"REB",label:"",labelAr:"",labelEn:"Rebuilt/Refurbished",description:"   ",defaultMarginAdjust:-5,isActive:!0,sortOrder:5,createdAt:new Date().toISOString()}],vme=[{id:"1",code:"TOY",name:" ",nameAr:" ",nameEn:"Toyota Genuine",country:"Japan",isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"HYU",name:"/ ",nameAr:"/ ",nameEn:"Hyundai/Kia Genuine",country:"Korea",isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"GMB",name:"GMB",nameAr:"  ",nameEn:"GMB Japan",country:"Japan",isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"KOY",name:"KOYO",nameAr:"",nameEn:"KOYO Bearings",country:"Japan",isActive:!0,sortOrder:4,createdAt:new Date().toISOString()},{id:"5",code:"AIS",name:"AISIN",nameAr:"",nameEn:"AISIN Japan",country:"Japan",isActive:!0,sortOrder:5,createdAt:new Date().toISOString()}],yme=[{id:"1",code:"SEA",name:" ",nameAr:" ",nameEn:"Sea Freight",baseRate:500,perKgRate:2.5,minCharge:500,deliveryDays:35,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"AIR",name:" ",nameAr:" ",nameEn:"Air Freight",baseRate:150,perKgRate:18,minCharge:200,deliveryDays:7,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"EXP",name:" ",nameAr:" ",nameEn:"Express Courier",baseRate:100,perKgRate:45,minCharge:150,deliveryDays:3,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"LND",name:" ",nameAr:" ",nameEn:"Land Freight",baseRate:300,perKgRate:1.5,minCharge:400,deliveryDays:14,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()}],Nme=[{id:"1",code:"GCC",name:" ",nameAr:" ",countries:["SA","AE","KW","BH","OM","QA"],extraRatePerKg:0,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"MENA",name:"   ",nameAr:"   ",countries:["EG","JO","LB","IQ","MA","TN"],extraRatePerKg:3,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"ASIA",name:"",nameAr:"",countries:["CN","JP","KR","TH","MY","ID"],extraRatePerKg:5,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"EUR",name:"",nameAr:"",countries:["DE","FR","IT","ES","GB","NL"],extraRatePerKg:8,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()}],jme=[{id:"1",code:"SUPER_ADMIN",name:" ",nameAr:" ",nameEn:"Super Admin",isSystem:!0,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"ADMIN",name:"",nameAr:"",nameEn:"Admin",isSystem:!0,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"MANAGER",name:"",nameAr:"",nameEn:"Manager",isSystem:!1,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"SUPPLIER",name:"",nameAr:"",nameEn:"Supplier",isSystem:!0,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()},{id:"5",code:"TRADER",name:"",nameAr:"",nameEn:"Trader",isSystem:!0,isActive:!0,sortOrder:5,createdAt:new Date().toISOString()},{id:"6",code:"CUSTOMER",name:"",nameAr:"",nameEn:"Customer",isSystem:!0,isActive:!0,sortOrder:6,createdAt:new Date().toISOString()},{id:"7",code:"GUEST",name:"",nameAr:"",nameEn:"Guest",isSystem:!0,isActive:!0,sortOrder:7,createdAt:new Date().toISOString()}],xs={currencies:"sinicar_currencies",exchangeRates:"sinicar_exchange_rates",supplierGroups:"sinicar_supplier_groups",qualityCodes:"sinicar_quality_codes",brandCodes:"sinicar_brand_codes",shippingMethods:"sinicar_shipping_methods",shippingZones:"sinicar_shipping_zones",roles:"sinicar_roles"};function Eo(e,s){try{const a=localStorage.getItem(e);return a?JSON.parse(a):s}catch{return s}}function Gs(e,s){localStorage.setItem(e,JSON.stringify(s))}const wme=()=>{const{t:e,i18n:s}=Kt(),{addToast:a}=It();s.dir();const[r,n]=C.useState("CURRENCIES"),[i,l]=C.useState(!1),[o,d]=C.useState([]),[u,h]=C.useState([]),[f,x]=C.useState([]),[p,v]=C.useState([]),[b,y]=C.useState([]),[j,w]=C.useState([]),[S,O]=C.useState([]),[_,E]=C.useState([]),[A,D]=C.useState(null),[L,B]=C.useState(!1);C.useEffect(()=>{I()},[]);const I=()=>{l(!0),d(Eo(xs.currencies,xme)),h(Eo(xs.exchangeRates,pme)),x(Eo(xs.supplierGroups,gme)),v(Eo(xs.qualityCodes,bme)),y(Eo(xs.brandCodes,vme)),w(Eo(xs.shippingMethods,yme)),O(Eo(xs.shippingZones,Nme)),E(Eo(xs.roles,jme)),l(!1)},T=()=>{Gs(xs.currencies,o),Gs(xs.exchangeRates,u),Gs(xs.supplierGroups,f),Gs(xs.qualityCodes,p),Gs(xs.brandCodes,b),Gs(xs.shippingMethods,j),Gs(xs.shippingZones,S),Gs(xs.roles,_),a("    ","success")},z=({id:M,icon:X,label:K})=>t.jsxs("button",{onClick:()=>{n(M),B(!1),D(null)},className:`flex items-center gap-2 px-4 py-3 rounded-xl transition-all font-bold text-sm ${r===M?"bg-[#0B1B3A] text-[#C8A04F] shadow-lg":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-200"}`,"data-testid":`tab-${M.toLowerCase()}`,children:[X,t.jsx("span",{children:K})]}),k=()=>{const[M,X]=C.useState({code:"",name:"",nameAr:"",nameEn:"",symbol:"",isBase:!1,isActive:!0}),[K,Q]=C.useState({currencyId:"",rateToBase:1,syncPercent:0}),se=()=>{if(!M.code||!M.name||!M.symbol){a("    ","error");return}const re={id:Ao(),code:M.code.toUpperCase(),name:M.name,nameAr:M.nameAr,nameEn:M.nameEn,symbol:M.symbol,isBase:M.isBase||!1,isActive:!0,sortOrder:o.length+1,createdAt:new Date().toISOString()},J=[...o,re];d(J),Gs(xs.currencies,J),X({code:"",name:"",nameAr:"",nameEn:"",symbol:"",isBase:!1,isActive:!0}),B(!1),a("   ","success")},V=()=>{if(!K.currencyId||!K.rateToBase){a("     ","error");return}const re={id:Ao(),currencyId:K.currencyId,rateToBase:Number(K.rateToBase),syncPercent:Number(K.syncPercent)||0,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},J=[...u,re];h(J),Gs(xs.exchangeRates,J),Q({currencyId:"",rateToBase:1,syncPercent:0}),a("    ","success")},te=re=>{const J=o.filter(q=>q.id!==re);d(J),Gs(xs.currencies,J);const Ne=u.filter(q=>q.currencyId!==re);h(Ne),Gs(xs.exchangeRates,Ne),a("  ","success")},Z=(re,J,Ne)=>{const q=u.map(ce=>ce.id===re?{...ce,[J]:Ne,updatedAt:new Date().toISOString()}:ce);h(q),Gs(xs.exchangeRates,q)},ue=re=>{const J=o.find(Ne=>Ne.id===re);return J?`${J.code} - ${J.name}`:re};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(mr,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>B(!L),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-currency",children:[t.jsx(kt,{size:16}),"  "]})]}),L&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsx("input",{placeholder:"  (USD)",value:M.code,onChange:re=>X({...M,code:re.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:3,"data-testid":"input-currency-code"}),t.jsx("input",{placeholder:" ",value:M.nameAr,onChange:re=>X({...M,nameAr:re.target.value,name:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-currency-name-ar"}),t.jsx("input",{placeholder:"Name in English",value:M.nameEn,onChange:re=>X({...M,nameEn:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-currency-name-en"}),t.jsx("input",{placeholder:" ($)",value:M.symbol,onChange:re=>X({...M,symbol:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5,"data-testid":"input-currency-symbol"}),t.jsxs("label",{className:"flex items-center gap-2 p-3",children:[t.jsx("input",{type:"checkbox",checked:M.isBase,onChange:re=>X({...M,isBase:re.target.checked}),className:"w-4 h-4","data-testid":"checkbox-currency-base"}),t.jsx("span",{className:"text-sm",children:" "})]}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-currency",children:[t.jsx(es,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:o.map(re=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-[#0B1B3A] rounded-xl flex items-center justify-center text-[#C8A04F] font-bold",children:re.symbol}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[re.code," - ",re.name]}),t.jsx("p",{className:"text-sm text-slate-500",children:re.nameEn})]}),re.isBase&&t.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:" "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:re.isActive,onChange:J=>{const Ne=o.map(q=>q.id===re.id?{...q,isActive:J.target.checked}:q);d(Ne),Gs(xs.currencies,Ne)},className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]}),!re.isBase&&t.jsx("button",{onClick:()=>te(re.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg","data-testid":`button-delete-currency-${re.id}`,children:t.jsx(At,{size:16})})]})]},re.id))})]}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Gt,{size:20,className:"text-[#C8A04F]"}),"  (  )"]})}),t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("select",{value:K.currencyId,onChange:re=>Q({...K,currencyId:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"select-rate-currency",children:[t.jsx("option",{value:"",children:" "}),o.filter(re=>!re.isBase).map(re=>t.jsxs("option",{value:re.id,children:[re.code," - ",re.name]},re.id))]}),t.jsx("input",{type:"number",placeholder:" ",value:K.rateToBase,onChange:re=>Q({...K,rateToBase:parseFloat(re.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.01","data-testid":"input-rate-value"}),t.jsx("input",{type:"number",placeholder:"  %",value:K.syncPercent,onChange:re=>Q({...K,syncPercent:parseFloat(re.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.1","data-testid":"input-rate-sync"}),t.jsxs("button",{onClick:V,className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-rate",children:[t.jsx(kt,{size:16}),"  "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:u.map(re=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:t.jsx(mr,{size:18,className:"text-slate-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:ue(re.currencyId)}),t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",new Date(re.createdAt).toLocaleDateString("ar-SA")]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:re.rateToBase,onChange:J=>Z(re.id,"rateToBase",parseFloat(J.target.value)||0),className:"w-24 p-2 text-center rounded-lg border border-slate-200 font-bold",step:"0.01"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" "})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:re.syncPercent,onChange:J=>Z(re.id,"syncPercent",parseFloat(J.target.value)||0),className:"w-20 p-2 text-center rounded-lg border border-slate-200",step:"0.1"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  %"})]}),t.jsx("button",{onClick:()=>{const J=u.filter(Ne=>Ne.id!==re.id);h(J),Gs(xs.exchangeRates,J)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:t.jsx(At,{size:16})})]})]},re.id))})]})]})},F=()=>{const[M,X]=C.useState({name:"",nameAr:"",nameEn:"",description:"",defaultMarginPercent:15}),K=()=>{if(!M.name){a("   ","error");return}const V={id:Ao(),name:M.name,nameAr:M.nameAr,nameEn:M.nameEn,description:M.description,defaultMarginPercent:Number(M.defaultMarginPercent)||15,isActive:!0,sortOrder:f.length+1,createdAt:new Date().toISOString()},te=[...f,V];x(te),Gs(xs.supplierGroups,te),X({name:"",nameAr:"",nameEn:"",description:"",defaultMarginPercent:15}),B(!1),a("    ","success")},Q=(V,te,Z)=>{const ue=f.map(re=>re.id===V?{...re,[te]:Z,updatedAt:new Date().toISOString()}:re);x(ue),Gs(xs.supplierGroups,ue)},se=V=>{const te=f.filter(Z=>Z.id!==V);x(te),Gs(xs.supplierGroups,te),a("  ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(ta,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>B(!L),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-supplier-group",children:[t.jsx(kt,{size:16}),"  "]})]}),L&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("input",{placeholder:"  ",value:M.nameAr,onChange:V=>X({...M,nameAr:V.target.value,name:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-group-name-ar"}),t.jsx("input",{placeholder:"Group Name in English",value:M.nameEn,onChange:V=>X({...M,nameEn:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-group-name-en"}),t.jsx("input",{placeholder:"",value:M.description,onChange:V=>X({...M,description:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-group-description"}),t.jsx("input",{type:"number",placeholder:"  %",value:M.defaultMarginPercent,onChange:V=>X({...M,defaultMarginPercent:parseFloat(V.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-group-margin"}),t.jsxs("button",{onClick:K,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-group",children:[t.jsx(es,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:f.map(V=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-[#0B1B3A] to-[#1a2e56] rounded-xl flex items-center justify-center text-white font-bold",children:[V.defaultMarginPercent,"%"]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:V.name}),t.jsx("p",{className:"text-sm text-slate-500",children:V.nameEn}),V.description&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:V.description})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:V.defaultMarginPercent,onChange:te=>Q(V.id,"defaultMarginPercent",parseFloat(te.target.value)||0),className:"w-20 p-2 text-center rounded-lg border border-slate-200 font-bold"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  %"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:V.isActive,onChange:te=>Q(V.id,"isActive",te.target.checked),className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]}),t.jsx("button",{onClick:()=>se(V.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg","data-testid":`button-delete-group-${V.id}`,children:t.jsx(At,{size:16})})]})]},V.id))})]})})},P=()=>{const[M,X]=C.useState({code:"",label:"",labelAr:"",labelEn:"",description:"",defaultMarginAdjust:0}),K=()=>{if(!M.code||!M.label){a("   ","error");return}const V={id:Ao(),code:M.code.toUpperCase(),label:M.label,labelAr:M.labelAr,labelEn:M.labelEn,description:M.description,defaultMarginAdjust:Number(M.defaultMarginAdjust)||0,isActive:!0,sortOrder:p.length+1,createdAt:new Date().toISOString()},te=[...p,V];v(te),Gs(xs.qualityCodes,te),X({code:"",label:"",labelAr:"",labelEn:"",description:"",defaultMarginAdjust:0}),B(!1),a("    ","success")},Q=(V,te,Z)=>{const ue=p.map(re=>re.id===V?{...re,[te]:Z,updatedAt:new Date().toISOString()}:re);v(ue),Gs(xs.qualityCodes,ue)},se=V=>{const te=p.filter(Z=>Z.id!==V);v(te),Gs(xs.qualityCodes,te),a("   ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(zS,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>B(!L),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-quality-code",children:[t.jsx(kt,{size:16}),"  "]})]}),L&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsx("input",{placeholder:" (OEM)",value:M.code,onChange:V=>X({...M,code:V.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5,"data-testid":"input-quality-code"}),t.jsx("input",{placeholder:" ",value:M.labelAr,onChange:V=>X({...M,labelAr:V.target.value,label:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-quality-label-ar"}),t.jsx("input",{placeholder:"Label in English",value:M.labelEn,onChange:V=>X({...M,labelEn:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-quality-label-en"}),t.jsx("input",{placeholder:"",value:M.description,onChange:V=>X({...M,description:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-quality-description"}),t.jsx("input",{type:"number",placeholder:"  %",value:M.defaultMarginAdjust,onChange:V=>X({...M,defaultMarginAdjust:parseFloat(V.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-quality-margin"}),t.jsxs("button",{onClick:K,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-quality-code",children:[t.jsx(es,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:p.map(V=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-white ${V.defaultMarginAdjust>0?"bg-emerald-500":V.defaultMarginAdjust<0?"bg-orange-500":"bg-slate-500"}`,children:V.code}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:V.label}),t.jsx("p",{className:"text-sm text-slate-500",children:V.labelEn}),V.description&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:V.description})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:V.defaultMarginAdjust,onChange:te=>Q(V.id,"defaultMarginAdjust",parseFloat(te.target.value)||0),className:"w-20 p-2 text-center rounded-lg border border-slate-200 font-bold"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  %"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:V.isActive,onChange:te=>Q(V.id,"isActive",te.target.checked),className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]}),t.jsx("button",{onClick:()=>se(V.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg","data-testid":`button-delete-quality-${V.id}`,children:t.jsx(At,{size:16})})]})]},V.id))})]})})},G=()=>{const[M,X]=C.useState({code:"",name:"",nameAr:"",nameEn:"",country:""}),K=()=>{if(!M.code||!M.name){a("   ","error");return}const se={id:Ao(),code:M.code.toUpperCase(),name:M.name,nameAr:M.nameAr,nameEn:M.nameEn,country:M.country,isActive:!0,sortOrder:b.length+1,createdAt:new Date().toISOString()},V=[...b,se];y(V),Gs(xs.brandCodes,V),X({code:"",name:"",nameAr:"",nameEn:"",country:""}),B(!1),a("    ","success")},Q=se=>{const V=b.filter(te=>te.id!==se);y(V),Gs(xs.brandCodes,V),a("   ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(GS,{size:20,className:"text-[#C8A04F]"}),"  "]}),t.jsxs("button",{onClick:()=>B(!L),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-brand",children:[t.jsx(kt,{size:16}),"  "]})]}),L&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("input",{placeholder:" (TOY)",value:M.code,onChange:se=>X({...M,code:se.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5,"data-testid":"input-brand-code"}),t.jsx("input",{placeholder:" ",value:M.nameAr,onChange:se=>X({...M,nameAr:se.target.value,name:se.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-brand-name-ar"}),t.jsx("input",{placeholder:"Name in English",value:M.nameEn,onChange:se=>X({...M,nameEn:se.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-brand-name-en"}),t.jsx("input",{placeholder:" ",value:M.country,onChange:se=>X({...M,country:se.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-brand-country"}),t.jsxs("button",{onClick:K,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-brand",children:[t.jsx(es,{size:16})," "]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:b.map(se=>t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-[#C8A04F] transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"px-3 py-1 bg-[#0B1B3A] text-[#C8A04F] font-bold rounded-lg text-sm",children:se.code}),t.jsx("button",{onClick:()=>Q(se.id),className:"p-1 text-red-500 hover:bg-red-50 rounded","data-testid":`button-delete-brand-${se.id}`,children:t.jsx(At,{size:14})})]}),t.jsx("p",{className:"font-bold text-slate-800",children:se.name}),t.jsx("p",{className:"text-sm text-slate-500",children:se.nameEn}),se.country&&t.jsxs("p",{className:"text-xs text-slate-400 mt-2 flex items-center gap-1",children:[t.jsx(Ea,{size:12})," ",se.country]})]},se.id))})]})})},Y=()=>{const[M,X]=C.useState({currencyId:"",rateToBase:0,syncPercent:2.5}),[K,Q]=C.useState(!1),se=()=>{if(!M.currencyId){a("  ","error");return}const te={id:Ao(),currencyId:M.currencyId,rateToBase:Number(M.rateToBase)||0,syncPercent:Number(M.syncPercent)||2.5,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},Z=[...u,te];h(Z),Gs(xs.exchangeRates,Z),X({currencyId:"",rateToBase:0,syncPercent:2.5}),Q(!1),a("    ","success")},V=te=>{const Z=o.find(ue=>ue.id===te);return Z?`${Z.code} - ${Z.name}`:te};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Lo,{size:20,className:"text-[#C8A04F]"}),"     (SAR)"]}),t.jsxs("button",{onClick:()=>Q(!K),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-exchange-rate",children:[t.jsx(kt,{size:16}),"   "]})]}),K&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("select",{value:M.currencyId,onChange:te=>X({...M,currencyId:te.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",children:[t.jsx("option",{value:"",children:" "}),o.filter(te=>!te.isBase).map(te=>t.jsxs("option",{value:te.id,children:[te.code," - ",te.name]},te.id))]}),t.jsx("input",{type:"number",placeholder:" ",value:M.rateToBase,onChange:te=>X({...M,rateToBase:parseFloat(te.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.01"}),t.jsx("input",{type:"number",placeholder:"  %",value:M.syncPercent,onChange:te=>X({...M,syncPercent:parseFloat(te.target.value)||2.5}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.1"}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(es,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:u.map(te=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-xl flex items-center justify-center text-white",children:t.jsx(Lo,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:V(te.currencyId)}),t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",new Date(te.createdAt).toLocaleDateString("ar-SA")]})]})]}),t.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"font-bold text-2xl text-[#0B1B3A]",children:te.rateToBase}),t.jsx("p",{className:"text-xs text-slate-500",children:"/"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-600",children:[te.syncPercent,"%"]}),t.jsx("p",{className:"text-xs text-slate-500",children:""})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${te.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:te.isActive?"":" "}),t.jsx("button",{onClick:()=>{const Z=u.filter(ue=>ue.id!==te.id);h(Z),Gs(xs.exchangeRates,Z)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:t.jsx(At,{size:16})})]})]},te.id))})]})})},W=()=>{const[M,X]=C.useState({code:"",name:"",nameAr:"",nameEn:"",baseRate:0,perKgRate:0,minCharge:0,deliveryDays:7}),[K,Q]=C.useState(!1),se=()=>{if(!M.code||!M.name){a("   ","error");return}const V={id:Ao(),code:M.code.toUpperCase(),name:M.name,nameAr:M.nameAr,nameEn:M.nameEn,baseRate:Number(M.baseRate)||0,perKgRate:Number(M.perKgRate)||0,minCharge:Number(M.minCharge)||0,deliveryDays:Number(M.deliveryDays)||7,isActive:!0,sortOrder:j.length+1,createdAt:new Date().toISOString()},te=[...j,V];w(te),Gs(xs.shippingMethods,te),X({code:"",name:"",nameAr:"",nameEn:"",baseRate:0,perKgRate:0,minCharge:0,deliveryDays:7}),Q(!1),a("    ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(fr,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>Q(!K),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-shipping-method",children:[t.jsx(kt,{size:16}),"  "]})]}),K&&t.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[t.jsx("input",{placeholder:" (SEA)",value:M.code,onChange:V=>X({...M,code:V.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5}),t.jsx("input",{placeholder:" ",value:M.nameAr,onChange:V=>X({...M,nameAr:V.target.value,name:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{placeholder:"Name in English",value:M.nameEn,onChange:V=>X({...M,nameEn:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr"}),t.jsx("input",{type:"number",placeholder:" ",value:M.deliveryDays,onChange:V=>X({...M,deliveryDays:parseInt(V.target.value)||7}),className:"p-3 rounded-lg border border-slate-300 text-sm"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("input",{type:"number",placeholder:"  ()",value:M.baseRate,onChange:V=>X({...M,baseRate:parseFloat(V.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{type:"number",placeholder:"  ()",value:M.perKgRate,onChange:V=>X({...M,perKgRate:parseFloat(V.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{type:"number",placeholder:"  ()",value:M.minCharge,onChange:V=>X({...M,minCharge:parseFloat(V.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(es,{size:16})," "]})]})]}),t.jsx("div",{className:"divide-y divide-slate-100",children:j.map(V=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl flex items-center justify-center text-white",children:t.jsx(fr,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[V.code," - ",V.name]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[V.nameEn," | ",V.deliveryDays," "]})]})]}),t.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[V.baseRate," ."]}),t.jsx("p",{className:"text-xs text-slate-500",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[V.perKgRate," ."]}),t.jsx("p",{className:"text-xs text-slate-500",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[V.minCharge," ."]}),t.jsx("p",{className:"text-xs text-slate-500",children:" "})]}),t.jsx("button",{onClick:()=>{const te=j.filter(Z=>Z.id!==V.id);w(te),Gs(xs.shippingMethods,te)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:t.jsx(At,{size:16})})]})]},V.id))})]})})},ee=()=>{const[M,X]=C.useState({code:"",name:"",nameAr:"",countries:[],extraRatePerKg:0}),[K,Q]=C.useState(!1),se=()=>{if(!M.code||!M.name){a("   ","error");return}const V={id:Ao(),code:M.code.toUpperCase(),name:M.name,nameAr:M.nameAr,countries:M.countries||[],extraRatePerKg:Number(M.extraRatePerKg)||0,isActive:!0,sortOrder:S.length+1,createdAt:new Date().toISOString()},te=[...S,V];O(te),Gs(xs.shippingZones,te),X({code:"",name:"",nameAr:"",countries:[],extraRatePerKg:0}),Q(!1),a("    ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Qo,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>Q(!K),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-shipping-zone",children:[t.jsx(kt,{size:16}),"  "]})]}),K&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("input",{placeholder:" (GCC)",value:M.code,onChange:V=>X({...M,code:V.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5}),t.jsx("input",{placeholder:" ",value:M.nameAr,onChange:V=>X({...M,nameAr:V.target.value,name:V.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{placeholder:" (SA,AE,KW)",value:(M.countries||[]).join(","),onChange:V=>X({...M,countries:V.target.value.split(",").map(te=>te.trim().toUpperCase())}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr"}),t.jsx("input",{type:"number",placeholder:" /",value:M.extraRatePerKg,onChange:V=>X({...M,extraRatePerKg:parseFloat(V.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(es,{size:16})," "]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:S.map(V=>t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 font-bold rounded-lg text-sm",children:V.code}),t.jsx("button",{onClick:()=>{const te=S.filter(Z=>Z.id!==V.id);O(te),Gs(xs.shippingZones,te)},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:t.jsx(At,{size:14})})]}),t.jsx("p",{className:"font-bold text-slate-800",children:V.name}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[" : ",V.extraRatePerKg," ./"]}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:V.countries.map(te=>t.jsx("span",{className:"px-2 py-0.5 bg-slate-200 text-slate-600 text-xs rounded",children:te},te))})]},V.id))})]})})},H=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Bs,{size:20,className:"text-[#C8A04F]"})," "]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:_.map(M=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-white ${M.code==="SUPER_ADMIN"?"bg-purple-600":M.code==="ADMIN"?"bg-blue-600":M.code==="MANAGER"?"bg-emerald-600":M.code==="SUPPLIER"?"bg-orange-600":M.code==="TRADER"?"bg-amber-600":M.code==="CUSTOMER"?"bg-slate-600":"bg-gray-400"}`,children:t.jsx(Bs,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:M.name}),t.jsx("p",{className:"text-sm text-slate-500",children:M.nameEn}),M.description&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:M.description})]}),M.isSystem&&t.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded-full",children:""})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 text-xs font-mono rounded",children:M.code}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:M.isActive,onChange:X=>{const K=_.map(Q=>Q.id===M.id?{...Q,isActive:X.target.checked}:Q);E(K),Gs(xs.roles,K)},className:"w-4 h-4",disabled:M.isSystem}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]})]})]},M.id))})]}),t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Cs,{className:"text-amber-600 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-amber-800",children:""}),t.jsx("p",{className:"text-sm text-amber-700",children:"      .         ."})]})]})})]});return i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Gt,{className:"animate-spin text-[#C8A04F]",size:32})}):t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(Ea,{className:"text-[#C8A04F]",size:28}),"  "]}),t.jsx("p",{className:"text-slate-500 mt-1",children:"    "})]}),t.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 shadow-lg","data-testid":"button-save-all",children:[t.jsx(us,{size:18}),"   "]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(z,{id:"CURRENCIES",icon:t.jsx(mr,{size:18}),label:""}),t.jsx(z,{id:"EXCHANGE_RATES",icon:t.jsx(Lo,{size:18}),label:" "}),t.jsx(z,{id:"SUPPLIER_GROUPS",icon:t.jsx(ta,{size:18}),label:" "}),t.jsx(z,{id:"QUALITY_CODES",icon:t.jsx(zS,{size:18}),label:" "}),t.jsx(z,{id:"BRAND_CODES",icon:t.jsx(GS,{size:18}),label:" "}),t.jsx(z,{id:"SHIPPING_METHODS",icon:t.jsx(fr,{size:18}),label:" "}),t.jsx(z,{id:"SHIPPING_ZONES",icon:t.jsx(Qo,{size:18}),label:" "}),t.jsx(z,{id:"ROLES",icon:t.jsx(Bs,{size:18}),label:""})]}),r==="CURRENCIES"&&t.jsx(k,{}),r==="EXCHANGE_RATES"&&t.jsx(Y,{}),r==="SUPPLIER_GROUPS"&&t.jsx(F,{}),r==="QUALITY_CODES"&&t.jsx(P,{}),r==="BRAND_CODES"&&t.jsx(G,{}),r==="SHIPPING_METHODS"&&t.jsx(W,{}),r==="SHIPPING_ZONES"&&t.jsx(ee,{}),r==="ROLES"&&t.jsx(H,{})]})},V5={ar:{permissionCenter:" ",roles:"",permissions:"",permissionGroups:" ",customerVisibility:"  ",search:"...",addNew:" ",edit:"",delete:"",save:"",cancel:"",name:"",code:"",description:"",module:"",category:"",status:"",active:"",inactive:" ",system:"",custom:"",allow:"",deny:"",show:"",hide:"",restricted:"",assignPermissions:" ",selectedPermissions:" ",noResults:"  ",confirmDelete:"    ",cannotDeleteSystem:"    ",saving:" ...",loading:" ...",featureCode:" ",visibility:"",profileRequirement:"   ",reason:"",user:"",customer:"",allPermissions:" ",filterByModule:"  ",filterByCategory:"  ",nameAr:" ",managePermissions:"    ",usersCount:"",permissionsCount:"",permissionMatrix:" ",saveMatrix:" ",matrixUpdated:"   ",selectAll:" ",unselectAll:" ",features:"",featureFlags:" ",ownerType:" ",ownerId:" ",customerLabel:"",supplierLabel:"",selectOwner:" ",loadFeatures:" ",enabled:"",disabled:"",noFeaturesLoaded:"      ",saveFeatures:" ",featuresSaved:"   ",globalDefault:" "},en:{permissionCenter:"Permission Center",roles:"Roles",permissions:"Permissions",permissionGroups:"Permission Groups",customerVisibility:"Customer Feature Visibility",search:"Search...",addNew:"Add New",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",name:"Name",code:"Code",description:"Description",module:"Module",category:"Category",status:"Status",active:"Active",inactive:"Inactive",system:"System",custom:"Custom",allow:"Allow",deny:"Deny",show:"Show",hide:"Hide",restricted:"Restricted",assignPermissions:"Assign Permissions",selectedPermissions:"Selected Permissions",noResults:"No results found",confirmDelete:"Are you sure you want to delete?",cannotDeleteSystem:"Cannot delete system items",saving:"Saving...",loading:"Loading...",featureCode:"Feature Code",visibility:"Visibility",profileRequirement:"Profile Completion Required",reason:"Reason",user:"User",customer:"Customer",allPermissions:"All Permissions",filterByModule:"Filter by Module",filterByCategory:"Filter by Category",nameAr:"Arabic Name",managePermissions:"Manage roles, permissions, and permission groups",usersCount:"Users",permissionsCount:"Permissions",permissionMatrix:"Permission Matrix",saveMatrix:"Save Changes",matrixUpdated:"Matrix updated successfully",selectAll:"Select All",unselectAll:"Unselect All",features:"Features",featureFlags:"Feature Management",ownerType:"Owner Type",ownerId:"Owner ID",customerLabel:"Customer",supplierLabel:"Supplier",selectOwner:"Select Owner",loadFeatures:"Load Features",enabled:"Enabled",disabled:"Disabled",noFeaturesLoaded:"Select owner type and ID, then click Load",saveFeatures:"Save Features",featuresSaved:"Features saved successfully",globalDefault:"Global Default"},hi:{permissionCenter:" ",roles:"",permissions:"",permissionGroups:" ",customerVisibility:"  ",search:"...",addNew:" ",edit:" ",delete:"",save:"",cancel:" ",name:"",code:"",description:"",module:"",category:"",status:"",active:"",inactive:"",system:"",custom:"",allow:" ",deny:" ",show:"",hide:"",restricted:"",assignPermissions:"  ",selectedPermissions:" ",noResults:"  ",confirmDelete:"    ?",cannotDeleteSystem:"    ",saving:"  ...",loading:"   ...",featureCode:" ",visibility:"",profileRequirement:"  ",reason:"",user:"",customer:"",allPermissions:" ",filterByModule:"  ",filterByCategory:"  ",nameAr:" ",managePermissions:",     ",usersCount:"",permissionsCount:""},zh:{permissionCenter:"",roles:"",permissions:"",permissionGroups:"",customerVisibility:"",search:"...",addNew:"",edit:"",delete:"",save:"",cancel:"",name:"",code:"",description:"",module:"",category:"",status:"",active:"",inactive:"",system:"",custom:"",allow:"",deny:"",show:"",hide:"",restricted:"",assignPermissions:"",selectedPermissions:"",noResults:"",confirmDelete:"",cannotDeleteSystem:"",saving:"...",loading:"...",featureCode:"",visibility:"",profileRequirement:"",reason:"",user:"",customer:"",allPermissions:"",filterByModule:"",filterByCategory:"",nameAr:"",managePermissions:"",usersCount:"",permissionsCount:""}};function Sme(){var Ui;const{i18n:e}=Kt(),{addToast:s}=It(),a=s,r=((Ui=e.language)==null?void 0:Ui.substring(0,2))||"ar",n=V5[r]||V5.ar,i=r==="ar",[l,o]=C.useState("roles"),[d,u]=C.useState(""),[h,f]=C.useState("all"),[x,p]=C.useState("all"),[v,b]=C.useState(!1),[y,j]=C.useState([]),[w,S]=C.useState([]),[O,_]=C.useState([]),[E,A]=C.useState([]),[D,L]=C.useState([]),[B,I]=C.useState({}),[T,z]=C.useState(!1),[k,F]=C.useState(null),[P,G]=C.useState(null),[Y,W]=C.useState(null),[ee,H]=C.useState(null),[M,X]=C.useState(!1),[K,Q]=C.useState(!1),[se,V]=C.useState(!1),[te,Z]=C.useState(!1),[ue,re]=C.useState(!1),[J,Ne]=C.useState([]),[q,ce]=C.useState(!1),[fe,ie]=C.useState(!1),[ne,pe]=C.useState(!1),[Ee,Ie]=C.useState(!1),[_e,Ge]=C.useState([]),[Ae,Ue]=C.useState(!1),[Qe,_t]=C.useState({page:1,limit:20,total:0,totalPages:0}),[lt,Nt]=C.useState(""),[jt,Ft]=C.useState(""),[Ce,ve]=C.useState(null),[Ve,ot]=C.useState(!1),[le,Ke]=C.useState([]),[nt,pt]=C.useState(!1),[Ut,Ts]=C.useState("CUSTOMER"),[Rt,Re]=C.useState(""),[ft,Xt]=C.useState([]),[As,we]=C.useState(!1),[Pt,ss]=C.useState(!1),[gs,Ps]=C.useState(!1),Ca=C.useMemo(()=>{const be=new Set(w.map(Me=>Me.category).filter(Boolean));return Array.from(be)},[w]),ar=async()=>{var Me;let be=localStorage.getItem("backend_token");if(be)return be;try{const Et=await fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:"user-1",password:"1",loginType:"owner"})});if(Et.ok){const Ms=await Et.json();if(Ms.success&&((Me=Ms.data)!=null&&Me.accessToken))return localStorage.setItem("backend_token",Ms.data.accessToken),Ms.data.accessToken}}catch(Tt){console.error("Backend auth failed:",Tt)}return null},rr=async()=>{b(!0);try{const be=await ar(),Me={"Content-Type":"application/json"};be&&(Me.Authorization=`Bearer ${be}`);const Tt=await fetch("/api/v1/permission-center/roles-permissions",{headers:Me});if(Tt.ok){const Et=await Tt.json();if(Et.success&&Et.data){j(Et.data.roles||[]),S(Et.data.permissions||[]),I(Et.data.matrix||{});const Ms=[...new Set((Et.data.permissions||[]).map(Ua=>Ua.module))];A(Ms.map(Ua=>({moduleKey:Ua,moduleName:Ua,moduleNameAr:Ua})))}}else console.warn("Failed to fetch matrix, using empty data"),j([]),S([]),I({}),A([]);_([]),L([])}catch(be){console.error("Error fetching permission data:",be),a(i?"   ":"Error loading data","error")}finally{b(!1)}};C.useEffect(()=>{rr()},[]);const et=C.useMemo(()=>{if(!d)return y;const be=d.toLowerCase();return y.filter(Me=>{var Tt;return Me.name.toLowerCase().includes(be)||Me.code.toLowerCase().includes(be)||((Tt=Me.nameAr)==null?void 0:Tt.includes(be))})},[y,d]),de=C.useMemo(()=>{let be=w;if(d){const Me=d.toLowerCase();be=be.filter(Tt=>{var Et;return Tt.name.toLowerCase().includes(Me)||Tt.code.toLowerCase().includes(Me)||((Et=Tt.nameAr)==null?void 0:Et.includes(Me))})}return h!=="all"&&(be=be.filter(Me=>Me.module===h)),x!=="all"&&(be=be.filter(Me=>Me.category===x)),be},[w,d,h,x]),ye=C.useMemo(()=>{if(!d)return O;const be=d.toLowerCase();return O.filter(Me=>{var Tt;return Me.name.toLowerCase().includes(be)||Me.code.toLowerCase().includes(be)||((Tt=Me.nameAr)==null?void 0:Tt.includes(be))})},[O,d]),xe=async()=>{if(k){ce(!0);try{const be=k.id?"PUT":"POST",Me=k.id?`/api/v1/permissions/roles/${k.id}`:"/api/v1/permissions/roles";(await fetch(Me,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok?(a(i?"  ":"Saved successfully","success"),X(!1),F(null),rr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{ce(!1)}}},ge=async be=>{if(be.isSystem){a(n.cannotDeleteSystem,"error");return}if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/roles/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),rr())}catch{a(i?"  ":"Error deleting","error")}},je=async()=>{if(P){ie(!0);try{const be=P.id?"PUT":"POST",Me=P.id?`/api/v1/permissions/groups/${P.id}`:"/api/v1/permissions/groups";(await fetch(Me,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).ok?(a(i?"  ":"Saved successfully","success"),Q(!1),G(null),rr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{ie(!1)}}},Se=async be=>{if(be.isSystemDefault){a(n.cannotDeleteSystem,"error");return}if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/groups/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),rr())}catch{a(i?"  ":"Error deleting","error")}},Le=be=>{var Me;G(be),Ne(((Me=be.permissions)==null?void 0:Me.map(Tt=>Tt.permission.id))||[]),re(!0)},Je=be=>{Ne(Me=>Me.includes(be)?Me.filter(Tt=>Tt!==be):[...Me,be])},Fe=async()=>{if(P!=null&&P.id)try{(await fetch(`/api/v1/permissions/groups/${P.id}/permissions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissionIds:J})})).ok&&(a(i?"  ":"Permissions assigned","success"),re(!1),rr())}catch{a(i?"  ":"Error assigning","error")}},$e=async()=>{if(Y){pe(!0);try{const be=Y.id?"PUT":"POST",Me=Y.id?`/api/v1/permissions/permissions/${Y.id}`:"/api/v1/permissions/permissions";(await fetch(Me,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)})).ok?(a(i?"  ":"Saved successfully","success"),V(!1),W(null),rr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{pe(!1)}}},qe=async be=>{if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/permissions/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),rr())}catch{a(i?"  ":"Error deleting","error")}},rt=async()=>{if(ee){Ie(!0);try{const be=ee.id?"PUT":"POST",Me=ee.id?`/api/v1/permissions/customer-visibility/${ee.id}`:"/api/v1/permissions/customer-visibility";(await fetch(Me,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)})).ok?(a(i?"  ":"Saved successfully","success"),Z(!1),H(null),rr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{Ie(!1)}}},ct=async be=>{if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/customer-visibility/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),rr())}catch{a(i?"  ":"Error deleting","error")}},gt=(be,Me)=>{I(Tt=>{const Et=Tt[be]||[];return Et.includes(Me)?{...Tt,[be]:Et.filter(Ms=>Ms!==Me)}:{...Tt,[be]:[...Et,Me]}})},it=async be=>{z(!0);try{const Me=localStorage.getItem("token"),Tt={"Content-Type":"application/json"};Me&&(Tt.Authorization=`Bearer ${Me}`);const Et=await fetch(`/api/v1/permission-center/roles/${be}/permissions`,{method:"PUT",headers:Tt,body:JSON.stringify({permissionIds:B[be]||[]})});if(Et.ok)a(n.matrixUpdated||"   ","success");else{const Ms=await Et.json();a(Ms.error||(i?"  ":"Error saving"),"error")}}catch{a(i?"  ":"Error saving","error")}finally{z(!1)}},ht=async(be=1)=>{Ue(!0);try{const Me=await ar(),Tt={"Content-Type":"application/json"};Me&&(Tt.Authorization=`Bearer ${Me}`);const Et=new URLSearchParams({page:be.toString(),limit:Qe.limit.toString(),...lt&&{search:lt},...jt&&{role:jt}}),Ms=await fetch(`/api/v1/permission-center/users?${Et}`,{headers:Tt});if(Ms.ok){const Ua=await Ms.json();Ua.success&&(Ge(Ua.data.users),_t(Ua.data.pagination))}}catch(Me){console.error("Error fetching users:",Me)}finally{Ue(!1)}},wt=async be=>{try{const Me=await ar(),Tt={"Content-Type":"application/json"};Me&&(Tt.Authorization=`Bearer ${Me}`);const Et=await fetch(`/api/v1/permission-center/users/${be}`,{headers:Tt});if(Et.ok){const Ms=await Et.json();if(Ms.success){ve(Ms.data);const Ua=w.map(Zr=>{const E0=Ms.data.overrides.find(Db=>Db.permissionCode===Zr.code);return{permissionCode:Zr.code,effect:E0?E0.effect:"INHERIT"}});Ke(Ua),ot(!0)}}}catch(Me){console.error("Error fetching user details:",Me)}},na=async()=>{if(Ce){pt(!0);try{const be=await ar(),Me={"Content-Type":"application/json"};be&&(Me.Authorization=`Bearer ${be}`);const Tt=le.filter(Ms=>Ms.effect!=="INHERIT").map(Ms=>({permissionCode:Ms.permissionCode,effect:Ms.effect})),Et=await fetch(`/api/v1/permission-center/users/${Ce.user.id}/overrides`,{method:"PUT",headers:Me,body:JSON.stringify({overrides:Tt})});if(Et.ok)a(i?"   ":"Overrides saved successfully","success"),await wt(Ce.user.id);else{const Ms=await Et.json();a(Ms.error||(i?"  ":"Error saving"),"error")}}catch{a(i?"  ":"Error saving","error")}finally{pt(!1)}}},Vs=(be,Me)=>{Ke(Tt=>Tt.map(Et=>Et.permissionCode===be?{...Et,effect:Me}:Et))};C.useEffect(()=>{l==="users"&&ht()},[l,lt,jt]);const Ds=be=>`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${l===be?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,wr="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4";return t.jsxs("div",{className:`min-h-screen p-6 space-y-6 ${i?"rtl":"ltr"}`,dir:i?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-xl",children:t.jsx(Bs,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.permissionCenter}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:n.managePermissions})]})]}),t.jsxs("button",{onClick:rr,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-refresh",children:[t.jsx(Gt,{className:`h-4 w-4 ${v?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:v?n.loading:"Refresh"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{className:Ds("roles"),onClick:()=>o("roles"),"data-testid":"tab-roles",children:[t.jsx(Bs,{className:"h-4 w-4"}),n.roles]}),t.jsxs("button",{className:Ds("permissions"),onClick:()=>o("permissions"),"data-testid":"tab-permissions",children:[t.jsx(Gc,{className:"h-4 w-4"}),n.permissions]}),t.jsxs("button",{className:Ds("groups"),onClick:()=>o("groups"),"data-testid":"tab-groups",children:[t.jsx(Mr,{className:"h-4 w-4"}),n.permissionGroups]}),t.jsxs("button",{className:Ds("visibility"),onClick:()=>o("visibility"),"data-testid":"tab-visibility",children:[t.jsx(ns,{className:"h-4 w-4"}),n.customerVisibility]}),t.jsxs("button",{className:Ds("matrix"),onClick:()=>o("matrix"),"data-testid":"tab-matrix",children:[t.jsx(aa,{className:"h-4 w-4"}),n.permissionMatrix||" "]}),t.jsxs("button",{className:Ds("users"),onClick:()=>o("users"),"data-testid":"tab-users",children:[t.jsx(x0,{className:"h-4 w-4"}),i?" ":"Users & Overrides"]}),t.jsxs("button",{className:Ds("features"),onClick:()=>o("features"),"data-testid":"tab-features",children:[t.jsx(Ym,{className:"h-4 w-4"}),n.features]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:n.search,value:d,onChange:be=>u(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent","data-testid":"input-search"})]}),l==="permissions"&&t.jsxs(t.Fragment,{children:[t.jsxs("select",{value:h,onChange:be=>f(be.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-module-filter",children:[t.jsx("option",{value:"all",children:n.allPermissions}),E.map(be=>t.jsx("option",{value:be.moduleKey,children:i?be.moduleNameAr:be.moduleName},be.moduleKey))]}),t.jsxs("select",{value:x,onChange:be=>p(be.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-category-filter",children:[t.jsx("option",{value:"all",children:n.allPermissions}),Ca.map(be=>t.jsx("option",{value:be,children:be},be))]})]}),(l==="roles"||l==="groups"||l==="permissions"||l==="visibility")&&t.jsxs("button",{onClick:()=>{l==="roles"?(F({code:"",name:"",isSystem:!1,isActive:!0,sortOrder:0}),X(!0)):l==="groups"?(G({code:"",name:"",isSystemDefault:!1,isActive:!0,permissions:[]}),Q(!0)):l==="permissions"?(W({code:"",name:"",module:"",isActive:!0}),V(!0)):l==="visibility"&&(H({customerId:"",featureCode:"",visibility:"SHOW"}),Z(!0))},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors","data-testid":"button-add-new",children:[t.jsx(kt,{className:"h-4 w-4"}),n.addNew]})]}),v?t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx(Gt,{className:"h-8 w-8 animate-spin text-blue-600"}),t.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:n.loading})]}):t.jsxs(t.Fragment,{children:[l==="roles"&&t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[et.map(be=>t.jsxs("div",{className:wr,"data-testid":`card-role-${be.id}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Bs,{className:"h-5 w-5 text-blue-600"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:i&&be.nameAr||be.name})]}),t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isSystem?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:be.isSystem?n.system:n.custom})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono mb-2",children:be.code}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:be.description||"-"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?n.active:n.inactive}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{F(be),X(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-role-${be.id}`,children:t.jsx(Ma,{className:"h-4 w-4"})}),!be.isSystem&&t.jsx("button",{onClick:()=>ge(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-role-${be.id}`,children:t.jsx(At,{className:"h-4 w-4"})})]})]})]},be.id)),et.length===0&&t.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:n.noResults})]}),l==="permissions"&&t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.code}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.name}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.module}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.category}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.status}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:de.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-permission-${be.id}`,children:[t.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:be.code}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:i&&be.nameAr||be.name}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:be.module})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",children:be.category||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?n.active:n.inactive})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{W(be),V(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-permission-${be.id}`,children:t.jsx(Ma,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>qe(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-permission-${be.id}`,children:t.jsx(At,{className:"h-4 w-4"})})]})})]},be.id))})]}),de.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults})]}),l==="groups"&&t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[ye.map(be=>{var Me,Tt;return t.jsxs("div",{className:wr,"data-testid":`card-group-${be.id}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Mr,{className:"h-5 w-5 text-purple-600"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:i&&be.nameAr||be.name})]}),be.isSystemDefault&&t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",children:n.system})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono mb-2",children:be.code}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:be.description||"-"}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-4",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gc,{className:"h-3 w-3"}),((Me=be.permissions)==null?void 0:Me.length)||0," ",n.permissionsCount]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Wt,{className:"h-3 w-3"}),((Tt=be._count)==null?void 0:Tt.users)||0," ",n.usersCount]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?n.active:n.inactive}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>Le(be),className:"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/50 rounded-lg transition-colors",title:n.assignPermissions,"data-testid":`button-assign-permissions-${be.id}`,children:t.jsx(Gc,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>{G(be),Q(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-group-${be.id}`,children:t.jsx(Ma,{className:"h-4 w-4"})}),!be.isSystemDefault&&t.jsx("button",{onClick:()=>Se(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-group-${be.id}`,children:t.jsx(At,{className:"h-4 w-4"})})]})]})]},be.id)}),ye.length===0&&t.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:n.noResults})]}),l==="visibility"&&t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.customer}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.featureCode}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.visibility}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.profileRequirement}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.reason}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:D.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-visibility-${be.id}`,children:[t.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:be.customerId}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:be.featureCode}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.visibility==="SHOW"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":be.visibility==="HIDE"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}`,children:be.visibility==="SHOW"?n.show:be.visibility==="HIDE"?n.hide:n.restricted})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:be.conditionProfilePercent?`${be.conditionProfilePercent}%`:"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:be.reason||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{H(be),Z(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-visibility-${be.id}`,children:t.jsx(Ma,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ct(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-visibility-${be.id}`,children:t.jsx(At,{className:"h-4 w-4"})})]})})]},be.id))})]}),D.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults})]}),l==="matrix"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-collapse min-w-[800px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300 sticky left-0 bg-gray-50 dark:bg-gray-700 z-10",children:n.permissions}),y.map(be=>t.jsx("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-700 dark:text-gray-300 min-w-[120px]",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("span",{children:i&&be.nameAr||be.name}),be.isSystem&&t.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300 rounded",children:n.system})]})},be.id))]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-matrix-${be.id}`,children:[t.jsx("td",{className:"px-4 py-2 text-sm sticky left-0 bg-white dark:bg-gray-800 z-10",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i&&be.nameAr||be.name}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:be.code})]})}),y.map(Me=>{const Tt=(B[Me.id]||[]).includes(be.id),Et=Me.code==="SUPER_ADMIN";return t.jsx("td",{className:"px-3 py-2 text-center",children:t.jsx("button",{onClick:()=>!Et&&gt(Me.id,be.id),disabled:Et,className:`p-2 rounded-lg transition-colors ${Et?"opacity-50 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-600"}`,"data-testid":`toggle-${Me.id}-${be.id}`,children:Tt?t.jsx(es,{className:"h-5 w-5 text-green-600"}):t.jsx(vt,{className:"h-5 w-5 text-gray-300 dark:text-gray-600"})})},Me.id)})]},be.id))})]})}),t.jsx("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:y.filter(be=>be.code!=="SUPER_ADMIN").map(be=>t.jsxs("button",{onClick:()=>it(be.id),disabled:T,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-wait transition-colors","data-testid":`button-save-role-${be.id}`,children:[t.jsx(us,{className:"h-4 w-4"}),T?n.saving:`${n.save} - ${i&&be.nameAr||be.name}`]},be.id))}),w.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults})]}),l==="users"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:i?"  ...":"Search users...",value:lt,onChange:be=>Nt(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500","data-testid":"input-users-search"})]}),t.jsxs("select",{value:jt,onChange:be=>Ft(be.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-users-role-filter",children:[t.jsx("option",{value:"",children:i?" ":"All Roles"}),y.map(be=>t.jsx("option",{value:be.code,children:i&&be.nameAr||be.name},be.code))]})]}),Ae?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(Gt,{className:"h-6 w-6 animate-spin text-blue-600"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:n.loading})]}):t.jsxs("div",{className:wr,children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?"":"User"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?" ":"Primary Role"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_e.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-user-${be.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:be.name}),t.jsx("span",{className:"text-xs text-gray-500",children:be.email||be.clientId})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:be.primaryRole})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?i?"":"Active":i?" ":"Inactive"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("button",{onClick:()=>wt(be.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors","data-testid":`button-edit-overrides-${be.id}`,children:[t.jsx(aa,{className:"h-4 w-4"}),i?" ":"Manage Overrides"]})})]},be.id))})]})}),_e.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults}),Qe.totalPages>1&&t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700 mt-4",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:i?` ${Qe.page}  ${Qe.totalPages}`:`Page ${Qe.page} of ${Qe.totalPages}`}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>ht(Qe.page-1),disabled:Qe.page<=1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700","data-testid":"button-prev-page",children:i?"":"Prev"}),t.jsx("button",{onClick:()=>ht(Qe.page+1),disabled:Qe.page>=Qe.totalPages,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700","data-testid":"button-next-page",children:i?"":"Next"})]})]})]})]}),l==="features"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:wr,children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(Ym,{className:"h-5 w-5 text-blue-600"}),n.featureFlags]}),t.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-6",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.ownerType}),t.jsxs("select",{value:Ut,onChange:be=>{Ts(be.target.value),Ps(!1),Xt([])},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-feature-owner-type",children:[t.jsx("option",{value:"CUSTOMER",children:n.customerLabel}),t.jsx("option",{value:"SUPPLIER",children:n.supplierLabel})]})]}),t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.ownerId}),t.jsx("input",{type:"text",value:Rt,onChange:be=>{Re(be.target.value),Ps(!1)},placeholder:i?"  ...":"Enter owner ID...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-feature-owner-id"})]}),t.jsxs("button",{onClick:async()=>{if(!Rt.trim()){a(i?"   ":"Please enter owner ID","error");return}we(!0);try{const be=await ar(),Me={"Content-Type":"application/json"};be&&(Me.Authorization=`Bearer ${be}`);const Et=await(await fetch(`/api/v1/permission-center/features/access?ownerType=${Ut}&ownerId=${Rt}`,{headers:Me})).json();Et.success?(Xt(Et.data.features||[]),Ps(!0)):a(Et.error||"Failed to load features","error")}catch(be){console.error("Error loading features:",be),a(i?"  ":"Failed to load features","error")}we(!1)},disabled:As||!Rt.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2","data-testid":"button-load-features",children:[As&&t.jsx(Gt,{className:"h-4 w-4 animate-spin"}),n.loadFeatures]})]}),gs?t.jsxs("div",{className:"space-y-3",children:[ft.map(be=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg","data-testid":`feature-row-${be.featureCode}`,children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:i&&be.featureNameAr||be.featureName}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:be.description}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:be.featureCode})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${be.globalEnabled?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-600 dark:bg-gray-600 dark:text-gray-300"}`,children:[n.globalDefault,": ",be.globalEnabled?n.enabled:n.disabled]}),t.jsx("button",{onClick:()=>{Xt(Me=>Me.map(Tt=>Tt.featureCode===be.featureCode?{...Tt,isEnabled:!Tt.isEnabled}:Tt))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${be.isEnabled?"bg-green-600":"bg-gray-300 dark:bg-gray-600"}`,"data-testid":`toggle-feature-${be.featureCode}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${be.isEnabled?i?"translate-x-1":"translate-x-6":i?"translate-x-6":"translate-x-1"}`})})]})]},be.featureCode)),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsxs("button",{onClick:async()=>{ss(!0);try{const be=await ar(),Me={"Content-Type":"application/json"};be&&(Me.Authorization=`Bearer ${be}`);const Et=await(await fetch("/api/v1/permission-center/features/access",{method:"PUT",headers:Me,body:JSON.stringify({ownerType:Ut,ownerId:Rt,features:ft.map(Ms=>({featureCode:Ms.featureCode,isEnabled:Ms.isEnabled}))})})).json();Et.success?a(n.featuresSaved,"success"):a(Et.error||"Failed to save features","error")}catch(be){console.error("Error saving features:",be),a(i?"  ":"Failed to save features","error")}ss(!1)},disabled:Pt,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center gap-2","data-testid":"button-save-features",children:[Pt?t.jsx(Gt,{className:"h-4 w-4 animate-spin"}):t.jsx(us,{className:"h-4 w-4"}),n.saveFeatures]})})]}):t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx(Ym,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),t.jsx("p",{children:n.noFeaturesLoaded})]})]})})]}),Ve&&Ce&&t.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ot(!1)}),t.jsxs("div",{className:`absolute ${i?"left-0":"right-0"} top-0 h-full w-full max-w-2xl bg-white dark:bg-gray-800 shadow-xl overflow-hidden flex flex-col`,children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:i?" ":"Permission Overrides"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[Ce.user.name," (",Ce.user.clientId,")"]})]}),t.jsx("button",{onClick:()=>ot(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","data-testid":"button-close-drawer",children:t.jsx(vt,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:i?" ":"Assigned Roles"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Ce.roles.map(be=>t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-sm",children:be},be))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:i?" ":"Permission Overrides"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:i?' ""    ""   ""   ':'Select "Allow" to grant, "Deny" to block, or "Inherit" to use role permissions'}),t.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:le.map(be=>{const Me=w.find(Et=>Et.code===be.permissionCode);if(!Me)return null;const Tt=Ce.rolePermissions.some(Et=>Et.code===Me.code);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg","data-testid":`override-row-${Me.code}`,children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i&&Me.nameAr||Me.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:Me.code}),Tt&&t.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 rounded",children:i?" ":"From Role"})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>Vs(Me.code,"ALLOW"),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${be.effect==="ALLOW"?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/50"}`,"data-testid":`btn-allow-${Me.code}`,children:n.allow}),t.jsx("button",{onClick:()=>Vs(Me.code,"DENY"),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${be.effect==="DENY"?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-900/50"}`,"data-testid":`btn-deny-${Me.code}`,children:n.deny}),t.jsx("button",{onClick:()=>Vs(Me.code,"INHERIT"),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${be.effect==="INHERIT"?"bg-gray-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`,"data-testid":`btn-inherit-${Me.code}`,children:i?"":"Inherit"})]})]},Me.code)})})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-lg p-4",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:i?" ":"Effective Permissions"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[Ce.effectivePermissions.map(be=>t.jsx("span",{className:"px-2 py-1 text-xs bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-600",children:be.code},be.code)),Ce.effectivePermissions.length===0&&t.jsx("span",{className:"text-sm text-gray-500",children:i?"   ":"No effective permissions"})]})]})]}),t.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>ot(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-overrides",children:n.cancel}),t.jsx("button",{onClick:na,disabled:nt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors","data-testid":"button-save-overrides",children:nt?n.saving:n.save})]})})]})]}),t.jsxs(ds,{isOpen:M,onClose:()=>{X(!1),F(null)},title:k!=null&&k.id?`${n.edit} ${n.roles}`:`${n.addNew} ${n.roles}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.code}),t.jsx("input",{type:"text",value:(k==null?void 0:k.code)||"",onChange:be=>F(Me=>Me?{...Me,code:be.target.value}:null),disabled:!!(k!=null&&k.id),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:opacity-50","data-testid":"input-role-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.name}),t.jsx("input",{type:"text",value:(k==null?void 0:k.name)||"",onChange:be=>F(Me=>Me?{...Me,name:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-role-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.nameAr}),t.jsx("input",{type:"text",value:(k==null?void 0:k.nameAr)||"",onChange:be=>F(Me=>Me?{...Me,nameAr:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-role-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.description}),t.jsx("input",{type:"text",value:(k==null?void 0:k.description)||"",onChange:be=>F(Me=>Me?{...Me,description:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-role-description"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"role-active",checked:(k==null?void 0:k.isActive)??!0,onChange:be=>F(Me=>Me?{...Me,isActive:be.target.checked}:null),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":"checkbox-role-active"}),t.jsx("label",{htmlFor:"role-active",className:"text-sm text-gray-700 dark:text-gray-300",children:n.active})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{X(!1),F(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-role",children:n.cancel}),t.jsx("button",{onClick:xe,disabled:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-role",children:q?n.saving:n.save})]})]}),t.jsxs(ds,{isOpen:K,onClose:()=>{Q(!1),G(null)},title:P!=null&&P.id?`${n.edit} ${n.permissionGroups}`:`${n.addNew} ${n.permissionGroups}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.code}),t.jsx("input",{type:"text",value:(P==null?void 0:P.code)||"",onChange:be=>G(Me=>Me?{...Me,code:be.target.value}:null),disabled:!!(P!=null&&P.id),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:opacity-50","data-testid":"input-group-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.name}),t.jsx("input",{type:"text",value:(P==null?void 0:P.name)||"",onChange:be=>G(Me=>Me?{...Me,name:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-group-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.nameAr}),t.jsx("input",{type:"text",value:(P==null?void 0:P.nameAr)||"",onChange:be=>G(Me=>Me?{...Me,nameAr:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-group-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.description}),t.jsx("input",{type:"text",value:(P==null?void 0:P.description)||"",onChange:be=>G(Me=>Me?{...Me,description:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-group-description"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{Q(!1),G(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-group",children:n.cancel}),t.jsx("button",{onClick:je,disabled:fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-group",children:fe?n.saving:n.save})]})]}),t.jsxs(ds,{isOpen:ue,onClose:()=>{re(!1),G(null)},title:`${n.assignPermissions} - ${i&&(P==null?void 0:P.nameAr)||(P==null?void 0:P.name)}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:n.search,value:d,onChange:be=>u(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:de.map(be=>t.jsxs("div",{className:"flex items-center gap-3 p-3 border-b last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>Je(be.id),children:[t.jsx("input",{type:"checkbox",checked:J.includes(be.id),onChange:()=>Je(be.id),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i&&be.nameAr||be.name}),t.jsx("p",{className:"text-xs text-gray-500 font-mono",children:be.code})]}),t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:be.module})]},be.id))}),t.jsxs("p",{className:"text-sm text-gray-500",children:[n.selectedPermissions,": ",J.length]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{re(!1),G(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:n.cancel}),t.jsx("button",{onClick:Fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n.save})]})]}),t.jsxs(ds,{isOpen:se,onClose:()=>{V(!1),W(null)},title:Y!=null&&Y.id?`${n.edit} ${n.permissions}`:`${n.addNew} ${n.permissions}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.code}),t.jsx("input",{type:"text",value:(Y==null?void 0:Y.code)||"",onChange:be=>W(Me=>Me?{...Me,code:be.target.value}:null),disabled:!!(Y!=null&&Y.id),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:opacity-50","data-testid":"input-permission-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.name}),t.jsx("input",{type:"text",value:(Y==null?void 0:Y.name)||"",onChange:be=>W(Me=>Me?{...Me,name:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-permission-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.nameAr}),t.jsx("input",{type:"text",value:(Y==null?void 0:Y.nameAr)||"",onChange:be=>W(Me=>Me?{...Me,nameAr:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-permission-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.module}),t.jsxs("select",{value:(Y==null?void 0:Y.module)||"",onChange:be=>W(Me=>Me?{...Me,module:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-permission-module",children:[t.jsx("option",{value:"",children:i?" ":"Select Module"}),E.map(be=>t.jsx("option",{value:be.moduleKey,children:i?be.moduleNameAr:be.moduleName},be.moduleKey))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.category}),t.jsx("input",{type:"text",value:(Y==null?void 0:Y.category)||"",onChange:be=>W(Me=>Me?{...Me,category:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-permission-category"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"permission-active",checked:(Y==null?void 0:Y.isActive)??!0,onChange:be=>W(Me=>Me?{...Me,isActive:be.target.checked}:null),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":"checkbox-permission-active"}),t.jsx("label",{htmlFor:"permission-active",className:"text-sm text-gray-700 dark:text-gray-300",children:n.active})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{V(!1),W(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-permission",children:n.cancel}),t.jsx("button",{onClick:$e,disabled:ne,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-permission",children:ne?n.saving:n.save})]})]}),t.jsxs(ds,{isOpen:te,onClose:()=>{Z(!1),H(null)},title:ee!=null&&ee.id?`${n.edit} ${n.customerVisibility}`:`${n.addNew} ${n.customerVisibility}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.customer," ID"]}),t.jsx("input",{type:"text",value:(ee==null?void 0:ee.customerId)||"",onChange:be=>H(Me=>Me?{...Me,customerId:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-customer-id"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.featureCode}),t.jsx("input",{type:"text",value:(ee==null?void 0:ee.featureCode)||"",onChange:be=>H(Me=>Me?{...Me,featureCode:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-feature-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.visibility}),t.jsxs("select",{value:(ee==null?void 0:ee.visibility)||"SHOW",onChange:be=>H(Me=>Me?{...Me,visibility:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-visibility-type",children:[t.jsx("option",{value:"SHOW",children:n.show}),t.jsx("option",{value:"HIDE",children:n.hide}),t.jsx("option",{value:"RESTRICTED",children:n.restricted})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.profileRequirement," (%)"]}),t.jsx("input",{type:"number",min:"0",max:"100",value:(ee==null?void 0:ee.conditionProfilePercent)||"",onChange:be=>H(Me=>Me?{...Me,conditionProfilePercent:be.target.value?parseInt(be.target.value):void 0}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-profile-percent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.reason}),t.jsx("input",{type:"text",value:(ee==null?void 0:ee.reason)||"",onChange:be=>H(Me=>Me?{...Me,reason:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-reason"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{Z(!1),H(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-visibility",children:n.cancel}),t.jsx("button",{onClick:rt,disabled:Ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-visibility",children:Ee?n.saving:n.save})]})]})]})}const ep="/api/v1",tp=()=>{const e=localStorage.getItem("siniCar_auth_token");return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}},Ame=()=>{const{language:e}=Hs(),{addToast:s}=It(),a=e==="ar",[r,n]=C.useState([]),[i,l]=C.useState(null),[o,d]=C.useState(null),[u,h]=C.useState(null),[f,x]=C.useState(!0),[p,v]=C.useState(!1),[b,y]=C.useState(!1),[j,w]=C.useState(!1),[S,O]=C.useState({dateFrom:"",dateTo:"",status:"",category:"",customerId:"",productId:"",page:"1"}),[_,E]=C.useState(1);C.useEffect(()=>{A()},[]);const A=async()=>{x(!0);try{const H=await fetch(`${ep}/reports/definitions`,{headers:tp()});if(!H.ok)throw new Error("Failed to load reports");const M=await H.json();M.success&&n(M.data)}catch{s(a?"   ":"Failed to load reports","error")}finally{x(!1)}},D=async()=>{if(i){v(!0),d(null),h(null);try{const H=await fetch(`${ep}/reports/${i.code}/run`,{method:"POST",headers:tp(),body:JSON.stringify({filters:S})});if(!H.ok){const X=await H.json();throw new Error(X.error||"Failed to run report")}const M=await H.json();M.success&&(d(M.data),s(a?"   ":"Report executed successfully","success"))}catch(H){s(H.message||(a?"   ":"Failed to run report"),"error")}finally{v(!1)}}},L=async H=>{if(i){y(!0);try{const M=await fetch(`${ep}/reports/${i.code}/analyze`,{method:"POST",headers:tp(),body:JSON.stringify({filters:S,mode:H})});if(!M.ok){const K=await M.json();throw new Error(K.error||"Failed to analyze report")}const X=await M.json();X.success&&(h(X.data),s(X.data.cached?a?"     ":"Analysis retrieved from cache":a?"  ":"Analysis completed","success"))}catch(M){s(M.message||(a?"   ":"Failed to analyze report"),"error")}finally{y(!1)}}},B=H=>a?H.nameAr||H.name:H.nameEn||H.name,I=H=>a?H.descriptionAr||H.description:H.descriptionEn||H.description,T=H=>{var X;return((X={SALES:{ar:"",en:"Sales"},OPERATIONS:{ar:"",en:"Operations"},FINANCE:{ar:"",en:"Finance"},ANALYTICS:{ar:"",en:"Analytics"},AUDIT:{ar:"",en:"Audit"},GENERAL:{ar:"",en:"General"}}[H])==null?void 0:X[a?"ar":"en"])||H},z=H=>({SALES:"bg-green-100 text-green-800",OPERATIONS:"bg-blue-100 text-blue-800",FINANCE:"bg-purple-100 text-purple-800",ANALYTICS:"bg-orange-100 text-orange-800",AUDIT:"bg-red-100 text-red-800",GENERAL:"bg-gray-100 text-gray-800"})[H]||"bg-gray-100 text-gray-800",k=H=>t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(H).map(([M,X])=>t.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[t.jsx("div",{className:"text-sm text-gray-500 mb-1",children:M.replace(/([A-Z])/g," $1").trim()}),t.jsx("div",{className:"text-xl font-bold text-gray-900",children:typeof X=="number"?X.toLocaleString():String(X)})]},M))}),F=H=>{if(H.length===0)return null;const M=Object.keys(H[0]);return t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:M.map(X=>t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:X.replace(/([A-Z])/g," $1").trim()},X))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.slice(0,10).map((X,K)=>t.jsx("tr",{className:"hover:bg-gray-50",children:M.map(Q=>t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:typeof X[Q]=="number"?X[Q].toLocaleString():String(X[Q]??"-")},Q))},K))})]}),H.length>10&&t.jsx("div",{className:"text-center py-2 text-sm text-gray-500",children:a?`  ${H.length-10} ...`:`And ${H.length-10} more rows...`})]})},P=H=>({NEW:"bg-blue-100 text-blue-800",PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",COMPLETED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",CANCELLED:"bg-gray-100 text-gray-800"})[H]||"bg-gray-100 text-gray-800",G=H=>{var X;return((X={NEW:{ar:"",en:"New"},PENDING:{ar:"",en:"Pending"},APPROVED:{ar:" ",en:"Approved"},COMPLETED:{ar:"",en:"Completed"},REJECTED:{ar:"",en:"Rejected"},CANCELLED:{ar:"",en:"Cancelled"}}[H])==null?void 0:X[a?"ar":"en"])||H},Y=async H=>{if(i){E(H),v(!0);try{const M=await fetch(`${ep}/reports/${i.code}/run`,{method:"POST",headers:tp(),body:JSON.stringify({filters:{...S,page:String(H)}})});if(!M.ok){const K=await M.json();throw new Error(K.error||"Failed to run report")}const X=await M.json();X.success&&d(X.data)}catch(M){s(M.message||(a?"   ":"Failed to load page"),"error")}finally{v(!1)}}},W=H=>{const{summary:M,byStatus:X,byCustomer:K,rows:Q,pagination:se}=H,V=Math.max(...X.map(te=>te.count),1);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4","data-testid":"quotes-overview-summary",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(zt,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-sm text-blue-700",children:a?" ":"Total Quotes"})]}),t.jsx("div",{className:"text-2xl font-bold text-blue-900","data-testid":"text-total-quotes",children:M.totalQuotes.toLocaleString()})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Un,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-green-700",children:a?" ":"Approved"})]}),t.jsx("div",{className:"text-2xl font-bold text-green-900","data-testid":"text-total-approved",children:M.totalApproved.toLocaleString()})]}),t.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(sa,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"text-sm text-red-700",children:a?"":"Rejected"})]}),t.jsx("div",{className:"text-2xl font-bold text-red-900","data-testid":"text-total-rejected",children:M.totalRejected.toLocaleString()})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Cs,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"text-sm text-yellow-700",children:a?"":"Pending"})]}),t.jsx("div",{className:"text-2xl font-bold text-yellow-900","data-testid":"text-total-pending",children:M.totalPending.toLocaleString()})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(mr,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-sm text-purple-700",children:a?" ":"Approved Amount"})]}),t.jsxs("div",{className:"text-2xl font-bold text-purple-900","data-testid":"text-total-amount",children:[M.totalAmountApproved.toLocaleString()," ",t.jsx("span",{className:"text-sm font-normal",children:"SAR"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(gi,{size:16}),a?" ":"Status Distribution"]}),t.jsx("div",{className:"space-y-3","data-testid":"quotes-by-status",children:X.map((te,Z)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full min-w-[80px] text-center ${P(te.status)}`,children:G(te.status)}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4 overflow-hidden",children:t.jsx("div",{className:"bg-blue-600 h-full rounded-full transition-all",style:{width:`${te.count/V*100}%`}})}),t.jsx("span",{className:"text-sm font-medium text-gray-700 min-w-[40px] text-right",children:te.count})]},Z))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(Wt,{size:16}),a?" ":"Top Customers"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"quotes-by-customer",children:K.length>0?K.map((te,Z)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.customerName}),t.jsxs("div",{className:"text-xs text-gray-500",children:[te.count," ",a?"":"quotes"]})]}),t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[te.totalAmount.toLocaleString()," SAR"]})]},Z)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:a?" ":"Quote List"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200","data-testid":"quotes-rows-table",children:[t.jsx("thead",{className:"bg-white",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Number"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Customer"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Amount"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Q.length>0?Q.map((te,Z)=>t.jsxs("tr",{className:"hover:bg-gray-50","data-testid":`quote-row-${Z}`,children:[t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-blue-600",children:["#",te.number]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:te.customerName}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P(te.status)}`,children:G(te.status)})}),t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:[te.amount.toLocaleString()," SAR"]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(te.createdAt).toLocaleDateString(a?"ar-SA":"en-US")})]},te.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:a?"  ":"No quotes found"})})})]})}),se&&se.totalPages>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[t.jsx("div",{className:"text-sm text-gray-500",children:a?` ${se.page}  ${se.totalPages} (${se.totalCount} )`:`Page ${se.page} of ${se.totalPages} (${se.totalCount} quotes)`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Y(se.page-1),disabled:se.page<=1||p,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-prev-page",children:a?t.jsx(hs,{size:16}):t.jsx(Ns,{size:16})}),t.jsx("span",{className:"px-3 py-1 text-sm font-medium text-gray-700",children:se.page}),t.jsx("button",{onClick:()=>Y(se.page+1),disabled:se.page>=se.totalPages||p,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-next-page",children:a?t.jsx(Ns,{size:16}):t.jsx(hs,{size:16})})]})]})]})]})},ee=H=>{const{totals:M,byCustomer:X,byProduct:K,byDay:Q,rows:se,pagination:V}=H,te=Math.max(...Q.map(Z=>Z.totalAmount),1);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-testid":"sales-summary-totals",children:[t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(mr,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-green-700",children:a?" ":"Total Sales"})]}),t.jsxs("div",{className:"text-2xl font-bold text-green-900","data-testid":"text-total-sales",children:[M.totalSalesAmount.toLocaleString()," ",t.jsx("span",{className:"text-sm font-normal",children:"SAR"})]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(zt,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-sm text-blue-700",children:a?" ":"Total Invoices"})]}),t.jsx("div",{className:"text-2xl font-bold text-blue-900","data-testid":"text-total-invoices",children:M.totalInvoices.toLocaleString()})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(gi,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-sm text-purple-700",children:a?"  ":"Avg Invoice Value"})]}),t.jsxs("div",{className:"text-2xl font-bold text-purple-900","data-testid":"text-avg-invoice",children:[M.avgInvoiceValue.toLocaleString()," ",t.jsx("span",{className:"text-sm font-normal",children:"SAR"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(hh,{size:16}),a?" ":"Daily Sales"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"sales-by-day",children:Q.length>0?Q.slice(-14).map((Z,ue)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs text-gray-600 min-w-[80px]",children:new Date(Z.date).toLocaleDateString(a?"ar-SA":"en-US",{month:"short",day:"numeric"})}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4 overflow-hidden",children:t.jsx("div",{className:"bg-green-500 h-full rounded-full transition-all",style:{width:`${Z.totalAmount/te*100}%`}})}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 min-w-[80px] text-right",children:[Z.totalAmount.toLocaleString()," SAR"]})]},ue)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(Wt,{size:16}),a?" ":"Top Customers"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"sales-by-customer",children:X.length>0?X.map((Z,ue)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.customerName}),t.jsxs("div",{className:"text-xs text-gray-500",children:[Z.count," ",a?"":"orders"]})]}),t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[Z.totalAmount.toLocaleString()," SAR"]})]},ue)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(Yt,{size:16}),a?" ":"Top Products"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"sales-by-product",children:K.length>0?K.map((Z,ue)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.productName}),t.jsxs("div",{className:"text-xs text-gray-500",children:[Z.qty," ",a?"":"units"]})]}),t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[Z.totalAmount.toLocaleString()," SAR"]})]},ue)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:a?" ":"Orders List"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200","data-testid":"sales-rows-table",children:[t.jsx("thead",{className:"bg-white",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Number"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Customer"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Amount"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.length>0?se.map((Z,ue)=>t.jsxs("tr",{className:"hover:bg-gray-50","data-testid":`sales-row-${ue}`,children:[t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-blue-600",children:["#",Z.number]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:Z.customerName}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Z.status==="COMPLETED"?"bg-green-100 text-green-800":Z.status==="PENDING"?"bg-yellow-100 text-yellow-800":Z.status==="CANCELLED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:Z.status})}),t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:[Z.amount.toLocaleString()," SAR"]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(Z.createdAt).toLocaleDateString(a?"ar-SA":"en-US")})]},Z.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:a?"  ":"No orders found"})})})]})}),V&&V.totalPages>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[t.jsx("div",{className:"text-sm text-gray-500",children:a?` ${V.page}  ${V.totalPages} (${V.totalCount} )`:`Page ${V.page} of ${V.totalPages} (${V.totalCount} orders)`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Y(V.page-1),disabled:V.page<=1||p,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-prev-page",children:a?t.jsx(hs,{size:16}):t.jsx(Ns,{size:16})}),t.jsx("span",{className:"px-3 py-1 text-sm font-medium text-gray-700",children:V.page}),t.jsx("button",{onClick:()=>Y(V.page+1),disabled:V.page>=V.totalPages||p,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-next-page",children:a?t.jsx(Ns,{size:16}):t.jsx(hs,{size:16})})]})]})]})]})};return f?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(ts,{className:"w-8 h-8 animate-spin text-blue-600"})}):t.jsxs("div",{className:"p-6 space-y-6",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Dr,{className:"w-8 h-8 text-blue-600"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900","data-testid":"text-reports-title",children:a?" ":"Reports Center"}),t.jsx("p",{className:"text-sm text-gray-500",children:a?"    ":"Run and analyze reports with AI"})]})]}),t.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition","data-testid":"button-refresh-reports",children:[t.jsx(Gt,{size:18}),a?"":"Refresh"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1 space-y-4",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(zt,{size:20}),a?" ":"Available Reports"]}),t.jsxs("div",{className:"space-y-2",children:[r.map(H=>t.jsx("button",{onClick:()=>{l(H),d(null),h(null)},className:`w-full text-right p-3 rounded-lg border transition ${(i==null?void 0:i.id)===H.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,"data-testid":`button-select-report-${H.code}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:B(H)}),I(H)&&t.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:I(H)})]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full shrink-0 ${z(H.category)}`,children:T(H.category)})]})},H.id)),r.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(zt,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:a?"   ":"No reports available"})]})]})]})}),t.jsx("div",{className:"lg:col-span-2 space-y-4",children:i?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:B(i)}),t.jsxs("button",{onClick:()=>w(!j),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg","data-testid":"button-toggle-filters",children:[t.jsx(sc,{size:16}),a?"":"Filters",j?t.jsx(Qr,{size:16}):t.jsx(Ir,{size:16})]})]}),j&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"From Date"}),t.jsx("input",{type:"date",value:S.dateFrom||"",onChange:H=>O({...S,dateFrom:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-date-from"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"To Date"}),t.jsx("input",{type:"date",value:S.dateTo||"",onChange:H=>O({...S,dateTo:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-date-to"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?"":"Status"}),t.jsxs("select",{value:S.status||"",onChange:H=>O({...S,status:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"select-status",children:[t.jsx("option",{value:"",children:a?"":"All"}),(i==null?void 0:i.code)==="QUOTES_OVERVIEW"?t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"NEW",children:a?"":"New"}),t.jsx("option",{value:"PENDING",children:a?"":"Pending"}),t.jsx("option",{value:"APPROVED",children:a?" ":"Approved"}),t.jsx("option",{value:"REJECTED",children:a?"":"Rejected"}),t.jsx("option",{value:"COMPLETED",children:a?"":"Completed"}),t.jsx("option",{value:"CANCELLED",children:a?"":"Cancelled"})]}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"ACTIVE",children:a?"":"Active"}),t.jsx("option",{value:"PENDING",children:a?"":"Pending"}),t.jsx("option",{value:"COMPLETED",children:a?"":"Completed"})]})]})]}),(i==null?void 0:i.code)==="QUOTES_OVERVIEW"||(i==null?void 0:i.code)==="SALES_SUMMARY"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"Customer ID"}),t.jsx("input",{type:"text",value:S.customerId||"",onChange:H=>O({...S,customerId:H.target.value}),placeholder:a?"":"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-customer-id"})]}),(i==null?void 0:i.code)==="SALES_SUMMARY"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"Product ID"}),t.jsx("input",{type:"text",value:S.productId||"",onChange:H=>O({...S,productId:H.target.value}),placeholder:a?"":"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-product-id"})]})]}):t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?"":"Category"}),t.jsx("input",{type:"text",value:S.category||"",onChange:H=>O({...S,category:H.target.value}),placeholder:a?" ":"Enter category",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-category"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{onClick:D,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition","data-testid":"button-run-report",children:[p?t.jsx(ts,{size:18,className:"animate-spin"}):t.jsx(Uu,{size:18}),a?" ":"Run Report"]}),o&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>L("SUMMARY"),disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition","data-testid":"button-ai-summary",children:[b?t.jsx(ts,{size:18,className:"animate-spin"}):t.jsx(pi,{size:18}),a?" AI":"AI Summary"]}),t.jsxs("button",{onClick:()=>L("INSIGHTS"),disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 transition","data-testid":"button-ai-insights",children:[b?t.jsx(ts,{size:18,className:"animate-spin"}):t.jsx(Hp,{size:18}),a?" AI":"AI Insights"]})]})]})]}),u&&t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl border border-purple-200 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.mode==="SUMMARY"?t.jsx(pi,{className:"w-5 h-5 text-purple-600"}):t.jsx(Hp,{className:"w-5 h-5 text-orange-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:u.mode==="SUMMARY"?a?"  ":"AI Summary":a?"  ":"AI Insights"}),u.cached&&t.jsx("span",{className:"text-xs px-2 py-1 bg-gray-200 text-gray-600 rounded-full",children:a?"  ":"Cached"})]}),t.jsx("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap","data-testid":"text-ai-analysis",children:u.aiText})]}),o&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(Un,{className:"w-5 h-5 text-green-600"}),a?" ":"Report Results"]}),o.metadata&&t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(is,{size:14}),new Date(o.metadata.generatedAt).toLocaleString(a?"ar-SA":"en-US")]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(mi,{size:14}),o.metadata.rowCount," ",a?"":"rows"]})]})]}),(i==null?void 0:i.code)==="QUOTES_OVERVIEW"&&o.data?W(o.data):(i==null?void 0:i.code)==="SALES_SUMMARY"&&o.data?ee(o.data):t.jsxs(t.Fragment,{children:[o.summary&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:a?"":"Summary"}),k(o.summary)]}),o.breakdown&&o.breakdown.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:a?"":"Breakdown"}),F(o.breakdown)]})]})]})})]}):t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[t.jsx(Dr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),t.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:a?"  ":"Select a report to begin"}),t.jsx("p",{className:"text-sm text-gray-400",children:a?"     ":"Choose a report from the list to run and analyze"})]})})]})]})},Co=[{value:"general",labelAr:"",labelEn:"General"},{value:"products",labelAr:"",labelEn:"Products"},{value:"orders",labelAr:"",labelEn:"Orders"},{value:"pricing",labelAr:"",labelEn:"Pricing"},{value:"shipping",labelAr:"",labelEn:"Shipping"},{value:"returns",labelAr:"",labelEn:"Returns"},{value:"support",labelAr:"",labelEn:"Support"},{value:"account",labelAr:"",labelEn:"Account"},{value:"technical",labelAr:"",labelEn:"Technical"}];function Eme(){const{t:e}=Kt(),{language:s,dir:a}=Hs(),{addToast:r}=It(),n=a==="rtl",[i,l]=C.useState("knowledge"),[o,d]=C.useState(!0),[u,h]=C.useState(!1),[f,x]=C.useState([]),[p,v]=C.useState(!1),[b,y]=C.useState(null),[j,w]=C.useState(""),[S,O]=C.useState("all"),[_,E]=C.useState([]),[A,D]=C.useState(!1),[L,B]=C.useState(null),[I,T]=C.useState([]),[z,k]=C.useState(!1),[F,P]=C.useState(null),[G,Y]=C.useState([]),[W,ee]=C.useState(""),[H,M]=C.useState(""),[X,K]=C.useState(!1),[Q,se]=C.useState(!1),[V,te]=C.useState({totalQueries:0,successRate:0,avgResponseTime:0,topCategories:[],recentActivity:[]}),[Z,ue]=C.useState({question:"",answer:"",category:"general",tags:"",priority:5,enabled:!0}),[re,J]=C.useState({title:"",category:"general",messages:[],rating:5,enabled:!0}),[Ne,q]=C.useState({name:"",nameAr:"",description:"",content:"",contentAr:"",type:"system",enabled:!0,order:1}),[ce,fe]=C.useState({role:"user",content:""});C.useEffect(()=>{ie()},[]);const ie=async()=>{d(!0);try{const le=localStorage.getItem("ai_knowledge_base"),Ke=localStorage.getItem("ai_training_conversations"),nt=localStorage.getItem("ai_system_prompts"),pt=localStorage.getItem("ai_test_cases");if(le)x(JSON.parse(le));else{const Ut=[{id:"kb-1",question:"    ",answer:"    :        ( )  .    .",category:"general",tags:["","payment",""],priority:10,enabled:!0,usageCount:45,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-2",question:"   ",answer:'      ""  .          .',category:"orders",tags:["","",""],priority:9,enabled:!0,usageCount:78,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-3",question:"   ",answer:"    7          .       .",category:"returns",tags:["","",""],priority:8,enabled:!0,usageCount:32,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-4",question:"    ",answer:"        .        .   .",category:"products",tags:["","","",""],priority:10,enabled:!0,usageCount:120,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-5",question:"   ",answer:`    :
- : 1-2  
-   : 2-3  
-  : 3-5  
      24 .`,category:"shipping",tags:["","",""],priority:9,enabled:!0,usageCount:89,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];x(Ut),localStorage.setItem("ai_knowledge_base",JSON.stringify(Ut))}if(Ke)E(JSON.parse(Ke));else{const Ut=[{id:"conv-1",title:"    ",messages:[{role:"user",content:"         2020"},{role:"assistant",content:" !  .        2020.     "},{role:"user",content:" "},{role:"assistant",content:"!      2020     90915-YZZD4  45 .    "}],category:"products",rating:5,enabled:!0,createdAt:new Date().toISOString()},{id:"conv-2",title:"   ",messages:[{role:"user",content:"    ORD-1234"},{role:"assistant",content:"!     ...   ORD-1234        .  : SM123456789.      ."},{role:"user",content:""},{role:"assistant",content:"!       .  !"}],category:"orders",rating:5,enabled:!0,createdAt:new Date().toISOString()}];E(Ut),localStorage.setItem("ai_training_conversations",JSON.stringify(Ut))}if(nt)T(JSON.parse(nt));else{const Ut=[{id:"prompt-1",name:"Main System Prompt",nameAr:" ",description:"The main system prompt that defines the AI personality and behavior",content:"You are a helpful AI assistant for SINI CAR B2B auto parts platform. You help customers find parts, track orders, and answer questions about products and services. Be professional, friendly, and knowledgeable.",contentAr:"     SINI CAR    B2B.           .      .",type:"system",enabled:!0,order:1},{id:"prompt-2",name:"Personality Prompt",nameAr:" ",description:"Defines the AI personality traits",content:`Personality traits:
- Professional but friendly
- Patient and understanding
- Knowledgeable about auto parts
- Helpful and proactive
- Bilingual (Arabic/English)`,contentAr:` :
-   
-  
-   
-  
-   (/)`,type:"persona",enabled:!0,order:2},{id:"prompt-3",name:"Context Prompt",nameAr:" ",description:"Provides business context to the AI",content:`Business context:
- B2B auto parts platform
- Serves mechanics and parts shops
- Offers original and aftermarket parts
- Saudi Arabia market focus
- Competitive pricing`,contentAr:` :
-  B2B   
-    
-    
-  
-  `,type:"context",enabled:!0,order:3},{id:"prompt-4",name:"Safety Instructions",nameAr:" ",description:"Safety and restriction instructions",content:`Safety rules:
- Never share customer personal data
- Do not discuss competitors negatively
- Refer complex issues to human support
- Do not make unauthorized promises
- Stay on topic (auto parts)`,contentAr:` :
-     
-     
-     
-      
-    ( )`,type:"instruction",enabled:!0,order:4}];T(Ut),localStorage.setItem("ai_system_prompts",JSON.stringify(Ut))}if(pt)Y(JSON.parse(pt));else{const Ut=[{id:"test-1",input:"   ",expectedOutput:"            ",category:"products",passed:void 0,lastTested:void 0},{id:"test-2",input:"     ",expectedOutput:"     (7 )    ",category:"returns",passed:void 0,lastTested:void 0},{id:"test-3",input:"",expectedOutput:"      ",category:"general",passed:void 0,lastTested:void 0}];Y(Ut),localStorage.setItem("ai_test_cases",JSON.stringify(Ut))}te({totalQueries:1247,successRate:94.5,avgResponseTime:1.2,topCategories:[{category:"products",count:456},{category:"orders",count:312},{category:"shipping",count:189},{category:"returns",count:145},{category:"support",count:98}],recentActivity:[{date:"2024-12-01",queries:89,success:85},{date:"2024-12-02",queries:112,success:106},{date:"2024-12-03",queries:98,success:92},{date:"2024-12-04",queries:134,success:128},{date:"2024-12-05",queries:145,success:137},{date:"2024-12-06",queries:167,success:158},{date:"2024-12-07",queries:178,success:169}]})}catch{r(e("common.loadError","   "),"error")}finally{d(!1)}},ne=()=>{if(!Z.question.trim()||!Z.answer.trim()){r(n?"  ":"Question and answer are required","error");return}const le={id:(b==null?void 0:b.id)||`kb-${Date.now()}`,question:Z.question,answer:Z.answer,category:Z.category,tags:Z.tags.split(",").map(nt=>nt.trim()).filter(nt=>nt),priority:Z.priority,enabled:Z.enabled,usageCount:(b==null?void 0:b.usageCount)||0,lastUsed:(b==null?void 0:b.lastUsed)||null,createdAt:(b==null?void 0:b.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};let Ke;b?Ke=f.map(nt=>nt.id===b.id?le:nt):Ke=[...f,le],x(Ke),localStorage.setItem("ai_knowledge_base",JSON.stringify(Ke)),Ee(),r(n?"   ":"Knowledge saved successfully","success")},pe=le=>{if(!confirm(n?"    ":"Are you sure you want to delete?"))return;const Ke=f.filter(nt=>nt.id!==le);x(Ke),localStorage.setItem("ai_knowledge_base",JSON.stringify(Ke)),r(n?"  ":"Deleted successfully","success")},Ee=()=>{ue({question:"",answer:"",category:"general",tags:"",priority:5,enabled:!0}),y(null),v(!1)},Ie=le=>{y(le),ue({question:le.question,answer:le.answer,category:le.category,tags:le.tags.join(", "),priority:le.priority,enabled:le.enabled}),v(!0)},_e=()=>{if(!re.title.trim()||re.messages.length===0){r(n?"  ":"Title and messages are required","error");return}const le={id:(L==null?void 0:L.id)||`conv-${Date.now()}`,title:re.title,messages:re.messages,category:re.category,rating:re.rating,enabled:re.enabled,createdAt:(L==null?void 0:L.createdAt)||new Date().toISOString()};let Ke;L?Ke=_.map(nt=>nt.id===L.id?le:nt):Ke=[..._,le],E(Ke),localStorage.setItem("ai_training_conversations",JSON.stringify(Ke)),Ae(),r(n?"   ":"Conversation saved successfully","success")},Ge=le=>{if(!confirm(n?"    ":"Are you sure you want to delete?"))return;const Ke=_.filter(nt=>nt.id!==le);E(Ke),localStorage.setItem("ai_training_conversations",JSON.stringify(Ke)),r(n?"  ":"Deleted successfully","success")},Ae=()=>{J({title:"",category:"general",messages:[],rating:5,enabled:!0}),B(null),D(!1),fe({role:"user",content:""})},Ue=()=>{ce.content.trim()&&(J(le=>({...le,messages:[...le.messages,{...ce}]})),fe({role:ce.role==="user"?"assistant":"user",content:""}))},Qe=le=>{J(Ke=>({...Ke,messages:Ke.messages.filter((nt,pt)=>pt!==le)}))},_t=()=>{if(!Ne.name.trim()||!Ne.content.trim()){r(n?"  ":"Name and content are required","error");return}const le={id:(F==null?void 0:F.id)||`prompt-${Date.now()}`,name:Ne.name,nameAr:Ne.nameAr,description:Ne.description,content:Ne.content,contentAr:Ne.contentAr,type:Ne.type,enabled:Ne.enabled,order:Ne.order};let Ke;F?Ke=I.map(nt=>nt.id===F.id?le:nt):Ke=[...I,le],T(Ke),localStorage.setItem("ai_system_prompts",JSON.stringify(Ke)),Nt(),r(n?"   ":"Prompt saved successfully","success")},lt=le=>{if(!confirm(n?"    ":"Are you sure you want to delete?"))return;const Ke=I.filter(nt=>nt.id!==le);T(Ke),localStorage.setItem("ai_system_prompts",JSON.stringify(Ke)),r(n?"  ":"Deleted successfully","success")},Nt=()=>{q({name:"",nameAr:"",description:"",content:"",contentAr:"",type:"system",enabled:!0,order:I.length+1}),P(null),k(!1)},jt=async()=>{if(!W.trim()){r(n?"  ":"Enter test input","error");return}K(!0);try{await new Promise(Ke=>setTimeout(Ke,1500));const le=f.find(Ke=>Ke.enabled&&(W.includes(Ke.question.substring(0,10))||Ke.tags.some(nt=>W.includes(nt))));M(le?le.answer:n?"!      SINI CAR.    ":"Hello! I am your AI assistant at SINI CAR platform. How can I help you today?")}catch{r(n?"   ":"Failed to run test","error")}finally{K(!1)}},Ft=async()=>{K(!0);try{const le=await Promise.all(G.map(async Ke=>{await new Promise(Rt=>setTimeout(Rt,500));const nt=Ke.expectedOutput.toLowerCase().split(" "),pt=n?"   ":"This is a test response",Ut=Math.random()>.3,Ts=Ut?Math.floor(Math.random()*20)+80:Math.floor(Math.random()*40)+30;return{...Ke,actualOutput:pt,passed:Ut,score:Ts,lastTested:new Date().toISOString()}}));Y(le),localStorage.setItem("ai_test_cases",JSON.stringify(le)),r(n?"   ":"All tests completed","success")}catch{r(n?"   ":"Failed to run tests","error")}finally{K(!1)}},Ce=()=>{const le={knowledge:f,conversations:_,prompts:I,testCases:G,exportedAt:new Date().toISOString()},Ke=new Blob([JSON.stringify(le,null,2)],{type:"application/json"}),nt=URL.createObjectURL(Ke),pt=document.createElement("a");pt.href=nt,pt.download=`ai-training-data-${new Date().toISOString().split("T")[0]}.json`,pt.click(),URL.revokeObjectURL(nt),r(n?"   ":"Data exported successfully","success")},ve=le=>{var pt;const Ke=(pt=le.target.files)==null?void 0:pt[0];if(!Ke)return;const nt=new FileReader;nt.onload=Ut=>{var Ts;try{const Rt=JSON.parse((Ts=Ut.target)==null?void 0:Ts.result);Rt.knowledge&&(x(Rt.knowledge),localStorage.setItem("ai_knowledge_base",JSON.stringify(Rt.knowledge))),Rt.conversations&&(E(Rt.conversations),localStorage.setItem("ai_training_conversations",JSON.stringify(Rt.conversations))),Rt.prompts&&(T(Rt.prompts),localStorage.setItem("ai_system_prompts",JSON.stringify(Rt.prompts))),Rt.testCases&&(Y(Rt.testCases),localStorage.setItem("ai_test_cases",JSON.stringify(Rt.testCases))),r(n?"   ":"Data imported successfully","success")}catch{r(n?"   ":"Failed to import data","error")}},nt.readAsText(Ke),le.target.value=""},Ve=C.useMemo(()=>f.filter(le=>{const Ke=!j||le.question.toLowerCase().includes(j.toLowerCase())||le.answer.toLowerCase().includes(j.toLowerCase())||le.tags.some(pt=>pt.toLowerCase().includes(j.toLowerCase())),nt=S==="all"||le.category===S;return Ke&&nt}),[f,j,S]),ot=[{id:"knowledge",icon:Kx,label:n?" ":"Knowledge Base"},{id:"conversations",icon:Rr,label:n?" ":"Training Conversations"},{id:"prompts",icon:Jm,label:n?"":"System Prompts"},{id:"testing",icon:vu,label:n?" ":"Testing & Evaluation"},{id:"analytics",icon:Dr,label:n?"":"Analytics"}];return o?t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Gt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600",children:n?" ...":"Loading..."})]})}):t.jsxs("div",{className:"p-6 space-y-6",dir:a,children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 rounded-2xl p-6 text-white shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(oF,{className:"w-8 h-8"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold","data-testid":"text-page-title",children:n?"   ":"AI Training Management"}),t.jsx("p",{className:"text-purple-100 text-sm",children:n?"     ":"Train and customize AI according to your needs"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("label",{className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl cursor-pointer transition-colors flex items-center gap-2",children:[t.jsx(va,{size:18}),t.jsx("span",{children:n?"":"Import"}),t.jsx("input",{type:"file",accept:".json",onChange:ve,className:"hidden","data-testid":"input-import-data"})]}),t.jsxs("button",{onClick:Ce,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors flex items-center gap-2","data-testid":"button-export-data",children:[t.jsx(tr,{size:18}),t.jsx("span",{children:n?"":"Export"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(Kx,{size:16}),t.jsx("span",{children:n?" ":"Knowledge Base"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-knowledge-count",children:f.length})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(Rr,{size:16}),t.jsx("span",{children:n?"":"Conversations"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-conversations-count",children:_.length})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(Jm,{size:16}),t.jsx("span",{children:n?"":"Prompts"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-prompts-count",children:I.length})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(vu,{size:16}),t.jsx("span",{children:n?"":"Test Cases"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-tests-count",children:G.length})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("div",{className:"flex overflow-x-auto border-b border-slate-200",children:ot.map(le=>t.jsxs("button",{onClick:()=>l(le.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${i===le.id?"text-purple-600 border-b-2 border-purple-600 bg-purple-50/50":"text-slate-600 hover:text-purple-600 hover:bg-slate-50"}`,"data-testid":`tab-${le.id}`,children:[t.jsx(le.icon,{size:18}),le.label]},le.id))}),t.jsxs("div",{className:"p-6",children:[i==="knowledge"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[t.jsxs("div",{className:"flex gap-3 flex-1 min-w-[300px]",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Lt,{className:"absolute top-1/2 -translate-y-1/2 text-slate-400 start-3",size:18}),t.jsx("input",{type:"text",value:j,onChange:le=>w(le.target.value),placeholder:n?"   ...":"Search knowledge base...",className:"w-full ps-10 pe-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 transition-all","data-testid":"input-search-knowledge"})]}),t.jsxs("select",{value:S,onChange:le=>O(le.target.value),className:"px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-category-filter",children:[t.jsx("option",{value:"all",children:n?" ":"All Categories"}),Co.map(le=>t.jsx("option",{value:le.value,children:n?le.labelAr:le.labelEn},le.value))]})]}),t.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 font-medium","data-testid":"button-add-knowledge",children:[t.jsx(kt,{size:18}),n?" ":"Add Knowledge"]})]}),t.jsx("div",{className:"space-y-4",children:Ve.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500",children:[t.jsx(Kx,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t.jsx("p",{children:n?"  ":"No results found"})]}):Ve.map(le=>{var Ke;return t.jsx("div",{className:`border rounded-xl p-5 transition-all ${le.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50 opacity-60"}`,"data-testid":`knowledge-entry-${le.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${le.category==="products"?"bg-blue-100 text-blue-700":le.category==="orders"?"bg-green-100 text-green-700":le.category==="shipping"?"bg-orange-100 text-orange-700":le.category==="returns"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:(Ke=Co.find(nt=>nt.value===le.category))==null?void 0:Ke[n?"labelAr":"labelEn"]}),t.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsx(bn,{size:12,className:"text-yellow-500"}),le.priority]}),t.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsx(Dr,{size:12}),le.usageCount," ",n?"":"uses"]})]}),t.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:le.question}),t.jsx("p",{className:"text-sm text-slate-600 whitespace-pre-line",children:le.answer}),le.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1.5 mt-3",children:le.tags.map((nt,pt)=>t.jsxs("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-600 rounded-full text-xs",children:["#",nt]},pt))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ie(le),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-knowledge-${le.id}`,children:t.jsx(Ma,{size:18})}),t.jsx("button",{onClick:()=>pe(le.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-knowledge-${le.id}`,children:t.jsx(At,{size:18})})]})]})},le.id)})})]}),i==="conversations"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-slate-600",children:n?"         ":"Add example conversations to train the AI on desired response style"}),t.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 font-medium","data-testid":"button-add-conversation",children:[t.jsx(kt,{size:18}),n?" ":"Add Conversation"]})]}),t.jsx("div",{className:"grid gap-4",children:_.map(le=>{var Ke;return t.jsxs("div",{className:"border border-slate-200 rounded-xl p-5 bg-white","data-testid":`conversation-${le.id}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:le.title}),t.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full text-xs",children:(Ke=Co.find(nt=>nt.value===le.category))==null?void 0:Ke[n?"labelAr":"labelEn"]}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5}).map((nt,pt)=>t.jsx(bn,{size:14,className:pt<le.rating?"text-yellow-400 fill-yellow-400":"text-slate-200"},pt))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{B(le),J({title:le.title,category:le.category,messages:le.messages,rating:le.rating,enabled:le.enabled}),D(!0)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-conversation-${le.id}`,children:t.jsx(Ma,{size:18})}),t.jsx("button",{onClick:()=>Ge(le.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-conversation-${le.id}`,children:t.jsx(At,{size:18})})]})]}),t.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:le.messages.map((nt,pt)=>t.jsxs("div",{className:`flex gap-3 ${nt.role==="assistant"?"justify-start":"justify-end"}`,children:[nt.role==="assistant"&&t.jsx("div",{className:"p-2 bg-purple-100 rounded-full h-fit",children:t.jsx(Ln,{size:16,className:"text-purple-600"})}),t.jsx("div",{className:`max-w-[70%] px-4 py-2.5 rounded-2xl text-sm ${nt.role==="assistant"?"bg-slate-100 text-slate-800 rounded-tl-sm":"bg-purple-600 text-white rounded-tr-sm"}`,children:nt.content}),nt.role==="user"&&t.jsx("div",{className:"p-2 bg-slate-200 rounded-full h-fit",children:t.jsx(nn,{size:16,className:"text-slate-600"})})]},pt))})]},le.id)})})]}),i==="prompts"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-slate-600",children:n?"        ":"Manage core prompts that define AI behavior and personality"}),t.jsxs("button",{onClick:()=>k(!0),className:"px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 font-medium","data-testid":"button-add-prompt",children:[t.jsx(kt,{size:18}),n?" ":"Add Prompt"]})]}),t.jsx("div",{className:"space-y-4",children:I.sort((le,Ke)=>le.order-Ke.order).map(le=>t.jsx("div",{className:`border rounded-xl p-5 transition-all ${le.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50 opacity-60"}`,"data-testid":`prompt-${le.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${le.type==="system"?"bg-blue-100 text-blue-700":le.type==="persona"?"bg-purple-100 text-purple-700":le.type==="context"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:le.type==="system"?n?"":"System":le.type==="persona"?n?"":"Persona":le.type==="context"?n?"":"Context":n?"":"Instruction"}),t.jsxs("span",{className:"text-xs text-slate-400",children:["#",le.order]}),!le.enabled&&t.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 rounded-full text-xs",children:n?"":"Disabled"})]}),t.jsx("h3",{className:"font-semibold text-slate-800 mb-1",children:n&&le.nameAr||le.name}),t.jsx("p",{className:"text-sm text-slate-500 mb-3",children:le.description}),t.jsx("pre",{className:"text-sm text-slate-600 bg-slate-50 p-3 rounded-lg whitespace-pre-wrap font-sans max-h-40 overflow-y-auto",children:n&&le.contentAr||le.content})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{P(le),q({name:le.name,nameAr:le.nameAr,description:le.description,content:le.content,contentAr:le.contentAr,type:le.type,enabled:le.enabled,order:le.order}),k(!0)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-prompt-${le.id}`,children:t.jsx(Ma,{size:18})}),t.jsx("button",{onClick:()=>lt(le.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-prompt-${le.id}`,children:t.jsx(At,{size:18})})]})]})},le.id))})]}),i==="testing"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-purple-50 rounded-xl p-6 border border-slate-200",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(mne,{size:20,className:"text-purple-600"}),n?" ":"Live Testing"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:n?" ":"Test Message"}),t.jsx("textarea",{value:W,onChange:le=>ee(le.target.value),placeholder:n?"    ...":"Type a message to test the AI...",className:"w-full p-4 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:3,"data-testid":"textarea-test-input"})]}),t.jsx("button",{onClick:jt,disabled:X||!W.trim(),className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 font-medium","data-testid":"button-run-test",children:X?t.jsxs(t.Fragment,{children:[t.jsx(Gt,{size:18,className:"animate-spin"}),n?" ...":"Testing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Uu,{size:18}),n?" ":"Run Test"]})}),H&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:n?"  ":"AI Response"}),t.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:t.jsx(Ln,{size:18,className:"text-purple-600"})}),t.jsx("p",{className:"text-slate-700 flex-1","data-testid":"text-test-output",children:H})]})})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[t.jsx(vu,{size:20,className:"text-purple-600"}),n?" ":"Test Cases"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:Ft,disabled:X||G.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 text-sm font-medium","data-testid":"button-run-all-tests",children:[X?t.jsx(Gt,{size:16,className:"animate-spin"}):t.jsx(Uu,{size:16}),n?" ":"Run All"]}),t.jsxs("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 text-sm font-medium","data-testid":"button-add-test-case",children:[t.jsx(kt,{size:16}),n?" ":"Add Test"]})]})]}),t.jsx("div",{className:"space-y-3",children:G.map(le=>{var Ke;return t.jsx("div",{className:`border rounded-xl p-4 ${le.passed===void 0?"border-slate-200 bg-white":le.passed?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,"data-testid":`test-case-${le.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[le.passed===void 0?t.jsx(h0,{size:18,className:"text-slate-400"}):le.passed?t.jsx(Mt,{size:18,className:"text-green-600"}):t.jsx(sa,{size:18,className:"text-red-600"}),t.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full text-xs",children:(Ke=Co.find(nt=>nt.value===le.category))==null?void 0:Ke[n?"labelAr":"labelEn"]}),le.score!==void 0&&t.jsxs("span",{className:`text-xs font-medium ${le.score>=80?"text-green-600":le.score>=50?"text-yellow-600":"text-red-600"}`,children:[le.score,"%"]})]}),t.jsxs("p",{className:"text-sm font-medium text-slate-800 mb-1",children:[n?":":"Input:"," ",le.input]}),t.jsxs("p",{className:"text-sm text-slate-600 mb-1",children:[n?":":"Expected:"," ",le.expectedOutput]}),le.actualOutput&&t.jsxs("p",{className:"text-sm text-slate-500",children:[n?":":"Actual:"," ",le.actualOutput]})]}),t.jsx("button",{onClick:()=>{const nt=G.filter(pt=>pt.id!==le.id);Y(nt),localStorage.setItem("ai_test_cases",JSON.stringify(nt))},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-test-${le.id}`,children:t.jsx(At,{size:18})})]})},le.id)})})]})]}),i==="analytics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:t.jsx(Rr,{size:20,className:"text-white"})}),t.jsx("span",{className:"text-blue-700 font-medium",children:n?" ":"Total Queries"})]}),t.jsx("p",{className:"text-3xl font-bold text-blue-800","data-testid":"text-total-queries",children:V.totalQueries.toLocaleString()})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:t.jsx(Mt,{size:20,className:"text-white"})}),t.jsx("span",{className:"text-green-700 font-medium",children:n?" ":"Success Rate"})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-800","data-testid":"text-success-rate",children:[V.successRate,"%"]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:t.jsx(is,{size:20,className:"text-white"})}),t.jsx("span",{className:"text-purple-700 font-medium",children:n?"  ":"Avg Response Time"})]}),t.jsxs("p",{className:"text-3xl font-bold text-purple-800","data-testid":"text-avg-response-time",children:[V.avgResponseTime,"s"]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Mr,{size:20,className:"text-purple-600"}),n?"  ":"Top Categories"]}),t.jsx("div",{className:"space-y-3",children:V.topCategories.map((le,Ke)=>{var nt;return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-sm font-medium",children:Ke+1}),t.jsx("span",{className:"flex-1 text-slate-700",children:((nt=Co.find(pt=>pt.value===le.category))==null?void 0:nt[n?"labelAr":"labelEn"])||le.category}),t.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2 overflow-hidden",children:t.jsx("div",{className:"h-full bg-purple-600 rounded-full",style:{width:`${le.count/V.topCategories[0].count*100}%`}})}),t.jsx("span",{className:"text-sm font-medium text-slate-600 w-16 text-end",children:le.count})]},le.category)})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Dr,{size:20,className:"text-purple-600"}),n?"  (7 )":"Recent Activity (7 days)"]}),t.jsx("div",{className:"flex items-end gap-2 h-40",children:V.recentActivity.map((le,Ke)=>t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[t.jsxs("div",{className:"w-full flex flex-col gap-0.5",children:[t.jsx("div",{className:"w-full bg-purple-600 rounded-t",style:{height:`${le.success/200*100}px`},title:`${n?"":"Success"}: ${le.success}`}),t.jsx("div",{className:"w-full bg-red-400 rounded-b",style:{height:`${(le.queries-le.success)/200*100}px`},title:`${n?"":"Failed"}: ${le.queries-le.success}`})]}),t.jsx("span",{className:"text-xs text-slate-500",children:le.date.split("-")[2]})]},le.date))}),t.jsxs("div",{className:"flex items-center gap-4 mt-4 justify-center text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded"}),t.jsx("span",{className:"text-slate-600",children:n?"":"Success"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-red-400 rounded"}),t.jsx("span",{className:"text-slate-600",children:n?"":"Failed"})]})]})]})]})]})]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Kx,{size:24}),b?n?" ":"Edit Knowledge":n?"  ":"Add New Knowledge"]}),t.jsx("button",{onClick:Ee,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-knowledge-modal",children:t.jsx(vt,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Question"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:Z.question,onChange:le=>ue({...Z,question:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?"  ...":"Enter the question...","data-testid":"input-knowledge-question"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Answer"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:Z.answer,onChange:le=>ue({...Z,answer:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:4,placeholder:n?"  ...":"Enter the answer...","data-testid":"textarea-knowledge-answer"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Category"}),t.jsx("select",{value:Z.category,onChange:le=>ue({...Z,category:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-knowledge-category",children:Co.map(le=>t.jsx("option",{value:le.value,children:n?le.labelAr:le.labelEn},le.value))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Priority"," (1-10)"]}),t.jsx("input",{type:"number",min:"1",max:"10",value:Z.priority,onChange:le=>ue({...Z,priority:parseInt(le.target.value)||5}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-knowledge-priority"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Tags"," (",n?" ":"comma separated",")"]}),t.jsx("input",{type:"text",value:Z.tags,onChange:le=>ue({...Z,tags:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?", , ":"payment, cards, transfer","data-testid":"input-knowledge-tags"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:()=>ue({...Z,enabled:!Z.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Z.enabled?"bg-purple-600":"bg-slate-200"}`,"data-testid":"toggle-knowledge-enabled",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-slate-300 transition-transform ${Z.enabled?"translate-x-5":"translate-x-0.5"}`})}),t.jsx("span",{className:"text-sm text-slate-700",children:n?"":"Enabled"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:Ee,className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-knowledge",children:n?"":"Cancel"}),t.jsxs("button",{onClick:ne,className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-knowledge",children:[t.jsx(us,{size:18}),n?"":"Save"]})]})]})}),A&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Rr,{size:24}),L?n?" ":"Edit Conversation":n?"  ":"Add New Conversation"]}),t.jsx("button",{onClick:Ae,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-conversation-modal",children:t.jsx(vt,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ":"Conversation Title"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:re.title,onChange:le=>J({...re,title:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?":   ":"Example: Product inquiry","data-testid":"input-conversation-title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Category"}),t.jsx("select",{value:re.category,onChange:le=>J({...re,category:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-conversation-category",children:Co.map(le=>t.jsx("option",{value:le.value,children:n?le.labelAr:le.labelEn},le.value))})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Conversation"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50 space-y-3 max-h-60 overflow-y-auto",children:re.messages.length===0?t.jsx("p",{className:"text-center text-slate-400 py-4",children:n?"  .   .":"No messages. Add a message below."}):re.messages.map((le,Ke)=>t.jsxs("div",{className:`flex gap-2 items-start ${le.role==="assistant"?"":"flex-row-reverse"}`,children:[t.jsx("div",{className:`p-1.5 rounded-full ${le.role==="assistant"?"bg-purple-100":"bg-slate-200"}`,children:le.role==="assistant"?t.jsx(Ln,{size:14,className:"text-purple-600"}):t.jsx(nn,{size:14,className:"text-slate-600"})}),t.jsx("div",{className:`flex-1 px-3 py-2 rounded-xl text-sm ${le.role==="assistant"?"bg-white border border-slate-200":"bg-purple-600 text-white"}`,children:le.content}),t.jsx("button",{onClick:()=>Qe(Ke),className:"p-1 text-slate-400 hover:text-red-600",children:t.jsx(vt,{size:14})})]},Ke))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:ce.role,onChange:le=>fe({...ce,role:le.target.value}),className:"px-3 py-2 border border-slate-200 rounded-xl text-sm","data-testid":"select-message-role",children:[t.jsx("option",{value:"user",children:n?"":"User"}),t.jsx("option",{value:"assistant",children:n?"":"Assistant"})]}),t.jsx("input",{type:"text",value:ce.content,onChange:le=>fe({...ce,content:le.target.value}),onKeyDown:le=>le.key==="Enter"&&Ue(),className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?" ...":"Type message...","data-testid":"input-new-message"}),t.jsx("button",{onClick:Ue,className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700","data-testid":"button-add-message",children:t.jsx(kt,{size:18})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Rating"}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(le=>t.jsx("button",{type:"button",onClick:()=>J({...re,rating:le}),className:"p-1","data-testid":`button-rating-${le}`,children:t.jsx(bn,{size:24,className:le<=re.rating?"text-yellow-400 fill-yellow-400":"text-slate-200"})},le))})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:()=>J({...re,enabled:!re.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${re.enabled?"bg-purple-600":"bg-slate-200"}`,"data-testid":"toggle-conversation-enabled",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-slate-300 transition-transform ${re.enabled?"translate-x-5":"translate-x-0.5"}`})}),t.jsx("span",{className:"text-sm text-slate-700",children:n?"":"Enabled"})]})})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:Ae,className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-conversation",children:n?"":"Cancel"}),t.jsxs("button",{onClick:_e,className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-conversation",children:[t.jsx(us,{size:18}),n?"":"Save"]})]})]})}),z&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Jm,{size:24}),F?n?" ":"Edit Prompt":n?"  ":"Add New Prompt"]}),t.jsx("button",{onClick:Nt,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-prompt-modal",children:t.jsx(vt,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ()":"Name (English)"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:Ne.name,onChange:le=>q({...Ne,name:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-prompt-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?" ()":"Name (Arabic)"}),t.jsx("input",{type:"text",value:Ne.nameAr,onChange:le=>q({...Ne,nameAr:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",dir:"rtl","data-testid":"input-prompt-name-ar"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Description"}),t.jsx("input",{type:"text",value:Ne.description,onChange:le=>q({...Ne,description:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-prompt-description"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Type"}),t.jsxs("select",{value:Ne.type,onChange:le=>q({...Ne,type:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-prompt-type",children:[t.jsx("option",{value:"system",children:n?"":"System"}),t.jsx("option",{value:"persona",children:n?"":"Persona"}),t.jsx("option",{value:"context",children:n?"":"Context"}),t.jsx("option",{value:"instruction",children:n?"":"Instruction"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Order"}),t.jsx("input",{type:"number",min:"1",value:Ne.order,onChange:le=>q({...Ne,order:parseInt(le.target.value)||1}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-prompt-order"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ()":"Content (English)"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:Ne.content,onChange:le=>q({...Ne,content:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none font-mono text-sm",rows:5,"data-testid":"textarea-prompt-content"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?" ()":"Content (Arabic)"}),t.jsx("textarea",{value:Ne.contentAr,onChange:le=>q({...Ne,contentAr:le.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none font-mono text-sm",rows:5,dir:"rtl","data-testid":"textarea-prompt-content-ar"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:()=>q({...Ne,enabled:!Ne.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Ne.enabled?"bg-purple-600":"bg-slate-200"}`,"data-testid":"toggle-prompt-enabled",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-slate-300 transition-transform ${Ne.enabled?"translate-x-5":"translate-x-0.5"}`})}),t.jsx("span",{className:"text-sm text-slate-700",children:n?"":"Enabled"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:Nt,className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-prompt",children:n?"":"Cancel"}),t.jsxs("button",{onClick:_t,className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-prompt",children:[t.jsx(us,{size:18}),n?"":"Save"]})]})]})}),Q&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(vu,{size:24}),n?"  ":"Add Test Case"]}),t.jsx("button",{onClick:()=>se(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-test-modal",children:t.jsx(vt,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Category"}),t.jsx("select",{id:"test-category",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-test-category",children:Co.map(le=>t.jsx("option",{value:le.value,children:n?le.labelAr:le.labelEn},le.value))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Input"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{id:"test-input",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:3,placeholder:n?"  ":"What will the user say?","data-testid":"textarea-test-case-input"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ":"Expected Output"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{id:"test-expected",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:3,placeholder:n?"       ":"What should the AI respond with?","data-testid":"textarea-test-case-expected"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>se(!1),className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-test",children:n?"":"Cancel"}),t.jsxs("button",{onClick:()=>{var Ts,Rt,Re;const le=(Ts=document.getElementById("test-input"))==null?void 0:Ts.value,Ke=(Rt=document.getElementById("test-expected"))==null?void 0:Rt.value,nt=(Re=document.getElementById("test-category"))==null?void 0:Re.value;if(!le||!Ke){r(n?"   ":"Input and expected output are required","error");return}const pt={id:`test-${Date.now()}`,input:le,expectedOutput:Ke,category:nt},Ut=[...G,pt];Y(Ut),localStorage.setItem("ai_test_cases",JSON.stringify(Ut)),se(!1),r(n?"   ":"Test case added","success")},className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-test",children:[t.jsx(us,{size:18}),n?"":"Save"]})]})]})})]})}const Cme=[{ar:"    ",en:"Create a new page for special offers"},{ar:"      ",en:"Add a new user named Ahmed with admin role"},{ar:"    ",en:"Translate the customers page to English"},{ar:"     ",en:"Change the main site color to green"},{ar:"   ",en:"Add a new permission for reports"},{ar:"     ",en:"Create a new customer named Al-Fahd Company"}],G5="ai_command_backups",W5="ai_command_history",S1="ai_dynamic_pages";function Tme(){const{t:e}=Kt(),{showToast:s}=It(),{language:a}=Hs(),r=a==="ar",[n,i]=C.useState(""),[l,o]=C.useState(!1),[d,u]=C.useState(!1),[h,f]=C.useState(null),[x,p]=C.useState(!1),[v,b]=C.useState([]),[y,j]=C.useState([]),[w,S]=C.useState([]),[O,_]=C.useState("command"),[E,A]=C.useState(null),[D,L]=C.useState(!1),B=C.useRef(null);C.useEffect(()=>{I()},[]);const I=()=>{try{const se=localStorage.getItem(W5);se&&b(JSON.parse(se));const V=localStorage.getItem(G5);V&&j(JSON.parse(V));const te=localStorage.getItem(S1);te&&S(JSON.parse(te))}catch(se){console.error("Error loading data:",se)}},T=se=>{b(se),localStorage.setItem(W5,JSON.stringify(se))},z=se=>{j(se),localStorage.setItem(G5,JSON.stringify(se))},k=se=>{S(se),localStorage.setItem(S1,JSON.stringify(se))},F=(se,V,te)=>{const Z={users:localStorage.getItem("portal_users"),customers:localStorage.getItem("portal_customers"),settings:localStorage.getItem("portal_settings"),permissions:localStorage.getItem("portal_permissions"),roles:localStorage.getItem("portal_roles"),dynamicPages:localStorage.getItem(S1),translations_ar:localStorage.getItem("translations_ar"),translations_en:localStorage.getItem("translations_en")},ue=JSON.stringify(Z),re={id:`backup_${Date.now()}`,timestamp:new Date().toISOString(),description:V,descriptionAr:te,commandId:se,dataSnapshot:ue,size:new Blob([ue]).size},J=[re,...y].slice(0,50);return z(J),re},P=async se=>{const V=y.find(te=>te.id===se);if(!V){s(r?"   ":"Backup not found","error");return}try{const te=JSON.parse(V.dataSnapshot);Object.entries(te).forEach(([ue,re])=>{re&&localStorage.setItem(ue,re)}),I(),s(r?"    ":"Backup restored successfully","success");const Z=v.find(ue=>ue.backupId===se);if(Z){const ue=v.map(re=>re.id===Z.id?{...re,status:"rolled_back"}:re);T(ue)}}catch{s(r?"    ":"Failed to restore backup","error")}},G=async se=>{u(!0);try{const fe=await fetch("/api/v1/ai/parse-command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:se,language:a})});if(fe.ok){const ie=await fe.json();return u(!1),ie.parsedCommand}}catch{console.log("AI parsing not available, using local parser")}await new Promise(fe=>setTimeout(fe,500));const V=se.toLowerCase(),te=se;let Z="unknown",ue="",re="",J={},Ne=.5,q="",ce="";if(V.includes("create page")||V.includes("new page")||te.includes(" ")||te.includes(" ")){Z="create_page",ue="create",re="page",Ne=.85;const fe=se.match(/(?:for|||)\s+(.+?)(?:\s|$)/i);J.title=fe?fe[1].trim():se.replace(/ |create page|new page|/gi,"").trim(),q=`Create a new page: "${J.title}"`,ce=`  : "${J.title}"`}else if(V.includes("add user")||V.includes("new user")||te.includes(" ")||te.includes(" ")){Z="add_user",ue="create",re="user",Ne=.8;const fe=se.match(/(?:named||)\s+(\S+)/i);J.name=fe?fe[1]:"";const ie=se.match(/(?:role||)\s+(\S+)/i);J.role=ie?ie[1]:"staff",q=`Add new user: "${J.name}" with role "${J.role}"`,ce=`  : "${J.name}"  "${J.role}"`}else if(V.includes("translate")||te.includes("")){Z="translate",ue="translate",Ne=.85;const fe=se.match(/(?:page|)\s+(\S+)/i);re=fe?fe[1]:"current";const ie=se.match(/(?:to|)\s+(english||arabic|)/i);J.targetLanguage=ie?ie[1].toLowerCase().includes("english")||ie[1].includes("")?"en":"ar":a==="ar"?"en":"ar",q=`Translate ${re} page to ${J.targetLanguage==="en"?"English":"Arabic"}`,ce=`  ${re}  ${J.targetLanguage==="en"?"":""}`}else if(V.includes("add customer")||V.includes("new customer")||te.includes(" ")||te.includes(" ")||te.includes(" ")){Z="add_customer",ue="create",re="customer",Ne=.8;const fe=se.match(/(?:named||)\s+(.+?)(?:\s|$)/i);J.businessName=fe?fe[1].trim():se.replace(/ | |add customer|new customer|/gi,"").trim(),q=`Add new customer: "${J.businessName}"`,ce=`  : "${J.businessName}"`}else if(V.includes("change color")||V.includes("edit color")||te.includes(" ")||te.includes(" ")){Z="edit_settings",ue="edit",re="settings",Ne=.75;const fe=se.match(/(?:to|)\s+(green||blue||red||orange||purple|)/i),ie={green:"#10b981",:"#10b981",blue:"#3b82f6",:"#3b82f6",red:"#ef4444",:"#ef4444",orange:"#f97316",:"#f97316",purple:"#8b5cf6",:"#8b5cf6"};J.primaryColor=fe?ie[fe[1].toLowerCase()]||fe[1]:"#3b82f6",q=`Change primary color to ${J.primaryColor}`,ce=`    ${J.primaryColor}`}else if(V.includes("add permission")||V.includes("new permission")||te.includes(" ")||te.includes(" ")){Z="add_permission",ue="create",re="permission",Ne=.75;const fe=se.match(/(?:for||)\s+(.+?)(?:\s|$)/i);J.resource=fe?fe[1].trim():"",q=`Add new permission for: "${J.resource}"`,ce=`   : "${J.resource}"`}else q="Unknown command - please try rephrasing",ce="   -   ";return u(!1),{type:Z,action:ue,target:re,params:J,confidence:Ne,description:q,descriptionAr:ce}},Y=async()=>{if(!n.trim())return;const se=await G(n);f(se),p(!0)},W=async()=>{var ue,re,J;if(!h)return;o(!0);const se={id:`cmd_${Date.now()}`,command:n,parsedCommand:h,status:"executing",timestamp:new Date().toISOString()},V=F(se.id,`Before: ${h.description}`,`: ${h.descriptionAr}`);se.backupId=V.id;const te=[se,...v];T(te);try{let Ne="",q="";switch(h.type){case"create_page":const ce={id:`page_${Date.now()}`,title:h.params.title||"New Page",titleAr:h.params.title||" ",slug:(h.params.title||"new-page").toLowerCase().replace(/\s+/g,"-"),content:`<h1>${h.params.title||"New Page"}</h1>
<p>Page content goes here...</p>`,contentAr:`<h1>${h.params.title||" "}</h1>
<p>  ...</p>`,layout:"default",isPublished:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"AI Command Center"};k([...w,ce]),Ne=`Page "${ce.title}" created successfully with slug "/${ce.slug}"`,q=`   "${ce.titleAr}"   "/${ce.slug}"`;break;case"add_user":const fe=JSON.parse(localStorage.getItem("portal_users")||"[]"),ie={id:`user_${Date.now()}`,username:((ue=h.params.name)==null?void 0:ue.toLowerCase().replace(/\s+/g,"_"))||`user_${Date.now()}`,name:h.params.name||"New User",email:`${(re=h.params.name)==null?void 0:re.toLowerCase().replace(/\s+/g,".")}@example.com`,role:((J=h.params.role)==null?void 0:J.toUpperCase())||"STAFF",status:"ACTIVE",createdAt:new Date().toISOString()};fe.push(ie),localStorage.setItem("portal_users",JSON.stringify(fe)),Ne=`User "${ie.name}" created with role "${ie.role}"`,q=`   "${ie.name}"  "${ie.role}"`;break;case"add_customer":const ne=JSON.parse(localStorage.getItem("portal_customers")||"[]"),pe={id:`cust_${Date.now()}`,businessName:h.params.businessName||" ",phone:"0500000000",email:"customer@example.com",city:"",customerType:"RETAIL",status:"ACTIVE",createdAt:new Date().toISOString()};ne.push(pe),localStorage.setItem("portal_customers",JSON.stringify(ne)),Ne=`Customer "${pe.businessName}" created successfully`,q=`   "${pe.businessName}" `;break;case"translate":Ne=`Translation request queued for ${h.target} page to ${h.params.targetLanguage}`,q=`     ${h.target}   `;break;case"edit_settings":const Ee=JSON.parse(localStorage.getItem("portal_settings")||"{}");h.params.primaryColor&&(Ee.primaryColor=h.params.primaryColor,localStorage.setItem("portal_settings",JSON.stringify(Ee)),Ne=`Primary color changed to ${h.params.primaryColor}`,q=`     ${h.params.primaryColor}`);break;case"add_permission":const Ie=JSON.parse(localStorage.getItem("portal_permissions")||"[]"),_e={id:`perm_${Date.now()}`,resource:h.params.resource||"new_resource",actions:["view","create","edit","delete"],createdAt:new Date().toISOString()};Ie.push(_e),localStorage.setItem("portal_permissions",JSON.stringify(Ie)),Ne=`Permission for "${_e.resource}" created with actions: ${_e.actions.join(", ")}`,q=`    "${_e.resource}"  : ${_e.actions.join(" ")}`;break;default:throw new Error("Unknown command type")}se.status="success",se.result=Ne,se.resultAr=q,se.executedAt=new Date().toISOString(),s(r?q:Ne,"success")}catch(Ne){se.status="failed",se.error=Ne.message||"Execution failed",s(r?"   ":"Command execution failed","error")}const Z=v.map(Ne=>Ne.id===se.id?se:Ne);Z.find(Ne=>Ne.id===se.id)||Z.unshift(se),T(Z),o(!1),p(!1),f(null),i("")},ee=()=>{p(!1),f(null)},H=se=>{switch(se){case"success":return t.jsx(Mt,{className:"w-4 h-4 text-green-500"});case"failed":return t.jsx(sa,{className:"w-4 h-4 text-red-500"});case"rolled_back":return t.jsx(a5,{className:"w-4 h-4 text-amber-500"});case"executing":return t.jsx(ts,{className:"w-4 h-4 text-blue-500 animate-spin"});default:return t.jsx(is,{className:"w-4 h-4 text-gray-400"})}},M=se=>{switch(se){case"create_page":return t.jsx(zt,{className:"w-4 h-4"});case"add_user":case"edit_user":return t.jsx(Wt,{className:"w-4 h-4"});case"add_permission":case"edit_permission":return t.jsx(Bs,{className:"w-4 h-4"});case"add_customer":case"edit_customer":return t.jsx(al,{className:"w-4 h-4"});case"translate":return t.jsx(Ea,{className:"w-4 h-4"});case"edit_settings":return t.jsx(aa,{className:"w-4 h-4"});default:return t.jsx(wf,{className:"w-4 h-4"})}},X=se=>{if(se===0)return"0 Bytes";const V=1024,te=["Bytes","KB","MB"],Z=Math.floor(Math.log(se)/Math.log(V));return parseFloat((se/Math.pow(V,Z)).toFixed(2))+" "+te[Z]},K=se=>{const V=new Date(se);return new Intl.DateTimeFormat(r?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(V)},Q=[{id:"command",label:r?" ":"Command Center",icon:wf},{id:"history",label:r?" ":"History",icon:gn},{id:"backups",label:r?" ":"Backups",icon:_u},{id:"pages",label:r?" ":"Dynamic Pages",icon:Mr}];return t.jsxs("div",{className:`space-y-6 ${r?"text-right":"text-left"}`,dir:r?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl shadow-lg",children:t.jsx(Ln,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground","data-testid":"text-page-title",children:r?"   ":"AI Command Center"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:r?"        ":"Execute commands in Arabic or English with automatic backup"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 rounded-full",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs text-green-700 dark:text-green-400 font-medium",children:r?" ":"System Ready"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(gn,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-2xl font-bold",children:v.length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Total Commands"})]}),t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Mt,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"text-2xl font-bold",children:v.filter(se=>se.status==="success").length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Successful"})]}),t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(_u,{className:"w-5 h-5 text-purple-500"}),t.jsx("span",{className:"text-2xl font-bold",children:y.length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Backups"})]}),t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Mr,{className:"w-5 h-5 text-amber-500"}),t.jsx("span",{className:"text-2xl font-bold",children:w.length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Dynamic Pages"})]})]}),t.jsx("div",{className:"flex gap-2 border-b",children:Q.map(se=>t.jsxs("button",{onClick:()=>_(se.id),className:`flex items-center gap-2 px-4 py-2.5 text-sm font-medium transition-colors border-b-2 -mb-px ${O===se.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,"data-testid":`tab-${se.id}`,children:[t.jsx(se.icon,{className:"w-4 h-4"}),se.label]},se.id))}),O==="command"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-card border rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(pi,{className:"w-5 h-5 text-violet-500"}),t.jsx("h2",{className:"font-semibold",children:r?" ":"Enter Command"}),t.jsxs("button",{onClick:()=>L(!D),className:"text-xs text-primary hover:underline flex items-center gap-1 mr-auto",children:[t.jsx(mi,{className:"w-3 h-3"}),r?"":"Examples"]})]}),D&&t.jsxs("div",{className:"mb-4 p-4 bg-muted/50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:r?"  :":"Command Examples:"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Cme.map((se,V)=>t.jsxs("button",{onClick:()=>i(r?se.ar:se.en),className:"text-sm text-left p-2 rounded hover:bg-muted transition-colors",children:[t.jsx("span",{className:"text-primary",children:""})," ",r?se.ar:se.en]},V))})]}),t.jsx("div",{className:"relative",children:t.jsx("textarea",{ref:B,value:n,onChange:se=>i(se.target.value),onKeyDown:se=>{se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),Y())},placeholder:r?"  ... (:    )":"Type your command here... (e.g., Create a new page for offers)",className:"w-full min-h-[100px] p-4 bg-background border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary/50","data-testid":"textarea-command-input"})}),t.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[t.jsxs("button",{onClick:Y,disabled:!n.trim()||d||l,className:"flex items-center gap-2 px-6 py-2.5 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-parse-command",children:[d?t.jsx(ts,{className:"w-4 h-4 animate-spin"}):t.jsx(rl,{className:"w-4 h-4"}),r?" ":"Parse Command"]}),n&&t.jsx("button",{onClick:()=>i(""),className:"px-4 py-2.5 text-muted-foreground hover:text-foreground transition-colors",children:r?"":"Clear"})]})]}),x&&h&&t.jsxs("div",{className:"bg-card border-2 border-primary/50 rounded-xl p-6 animate-in fade-in slide-in-from-top-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ns,{className:"w-5 h-5 text-primary"}),t.jsx("h3",{className:"font-semibold",children:r?" ":"Command Preview"})]}),t.jsx("button",{onClick:ee,className:"text-muted-foreground hover:text-foreground",children:t.jsx(vt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[M(h.type),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:r?h.descriptionAr:h.description}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[r?" :":"Command Type:"," ",h.type.replace("_"," ")]})]}),t.jsxs("div",{className:`px-2 py-1 rounded text-xs font-medium ${h.confidence>=.8?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":h.confidence>=.6?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[Math.round(h.confidence*100),"% ",r?"":"confidence"]})]}),Object.keys(h.params).length>0&&t.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:r?":":"Parameters:"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(h.params).map(([se,V])=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("span",{className:"text-muted-foreground",children:[se,":"]})," ",t.jsx("span",{className:"font-medium",children:String(V)})]},se))})]}),t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[t.jsx(Ks,{className:"w-5 h-5 text-amber-500 shrink-0"}),t.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:r?"        ":"A backup will be automatically created before executing this command"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:W,disabled:l||h.type==="unknown",className:"flex items-center gap-2 px-6 py-2.5 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-execute-command",children:[l?t.jsx(ts,{className:"w-4 h-4 animate-spin"}):t.jsx(Uu,{className:"w-4 h-4"}),r?" ":"Execute Command"]}),t.jsx("button",{onClick:ee,className:"px-6 py-2.5 border rounded-lg font-medium hover:bg-muted transition-colors",children:r?"":"Cancel"})]})]})]})]}),O==="history"&&t.jsxs("div",{className:"bg-card border rounded-xl",children:[t.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold",children:r?" ":"Command History"}),v.length>0&&t.jsx("button",{onClick:()=>{confirm(r?"    ":"Clear command history?")&&T([])},className:"text-sm text-red-500 hover:text-red-600",children:r?" ":"Clear History"})]}),v.length===0?t.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[t.jsx(gn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:r?"   ":"No command history yet"})]}):t.jsx("div",{className:"divide-y",children:v.map(se=>t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>A(E===se.id?null:se.id),children:[H(se.status),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium truncate",children:se.command}),t.jsx("p",{className:"text-sm text-muted-foreground",children:K(se.timestamp)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[M(se.parsedCommand.type),E===se.id?t.jsx(Qr,{className:"w-4 h-4 text-muted-foreground"}):t.jsx(Ir,{className:"w-4 h-4 text-muted-foreground"})]})]}),E===se.id&&t.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:r?":":"Type:"})," ",se.parsedCommand.type]}),se.result&&t.jsx("div",{className:"text-sm p-2 bg-green-50 dark:bg-green-900/20 rounded",children:t.jsx("span",{className:"text-green-700 dark:text-green-400",children:r?se.resultAr:se.result})}),se.error&&t.jsx("div",{className:"text-sm p-2 bg-red-50 dark:bg-red-900/20 rounded",children:t.jsx("span",{className:"text-red-700 dark:text-red-400",children:se.error})}),se.backupId&&se.status==="success"&&t.jsxs("button",{onClick:()=>P(se.backupId),className:"flex items-center gap-2 text-sm text-amber-600 hover:text-amber-700",children:[t.jsx(a5,{className:"w-4 h-4"}),r?"   ":"Rollback this command"]})]})]},se.id))})]}),O==="backups"&&t.jsxs("div",{className:"bg-card border rounded-xl",children:[t.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold",children:r?" ":"Backups"}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:[y.length," / 50 ",r?"":"backups"]})]}),y.length===0?t.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[t.jsx(_u,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:r?"   ":"No backups yet"})]}):t.jsx("div",{className:"divide-y",children:y.map(se=>t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx(Wse,{className:"w-5 h-5 text-purple-500 shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium truncate",children:r?se.descriptionAr:se.description}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[t.jsx("span",{children:K(se.timestamp)}),t.jsx("span",{children:""}),t.jsx("span",{children:X(se.size)})]})]}),t.jsxs("button",{onClick:()=>{confirm(r?"    ":"Restore this backup?")&&P(se.id)},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded-lg hover:bg-amber-200 dark:hover:bg-amber-900/50 transition-colors",children:[t.jsx(yF,{className:"w-4 h-4"}),r?"":"Restore"]})]},se.id))})]}),O==="pages"&&t.jsxs("div",{className:"bg-card border rounded-xl",children:[t.jsx("div",{className:"p-4 border-b flex items-center justify-between",children:t.jsx("h3",{className:"font-semibold",children:r?" ":"Dynamic Pages"})}),w.length===0?t.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[t.jsx(Mr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:r?"   ":"No dynamic pages yet"}),t.jsx("p",{className:"text-sm mt-1",children:r?"    ":"Use commands to create new pages"})]}):t.jsx("div",{className:"divide-y",children:w.map(se=>t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx(zt,{className:"w-5 h-5 text-blue-500 shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium",children:r?se.titleAr:se.title}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[t.jsxs("span",{children:["/",se.slug]}),t.jsx("span",{children:""}),t.jsx("span",{children:K(se.createdAt)})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[se.isPublished?t.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[t.jsx(dae,{className:"w-3 h-3"}),r?"":"Published"]}):t.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded",children:[t.jsx(Sa,{className:"w-3 h-3"}),r?"":"Draft"]}),t.jsx("button",{onClick:()=>{const V=w.map(te=>te.id===se.id?{...te,isPublished:!te.isPublished}:te);k(V)},className:"p-1.5 text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(ql,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{confirm(r?"    ":"Delete this page?")&&k(w.filter(V=>V.id!==se.id))},className:"p-1.5 text-red-500 hover:text-red-600 transition-colors",children:t.jsx(At,{className:"w-4 h-4"})})]})]},se.id))})]})]})}function sp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var A1={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Q5;function _me(){return Q5||(Q5=1,(function(e,s){(function(a){e.exports=a()})(function(){return(function a(r,n,i){function l(u,h){if(!n[u]){if(!r[u]){var f=typeof sp=="function"&&sp;if(!h&&f)return f(u,!0);if(o)return o(u,!0);var x=new Error("Cannot find module '"+u+"'");throw x.code="MODULE_NOT_FOUND",x}var p=n[u]={exports:{}};r[u][0].call(p.exports,function(v){var b=r[u][1][v];return l(b||v)},p,p.exports,a,r,n,i)}return n[u].exports}for(var o=typeof sp=="function"&&sp,d=0;d<i.length;d++)l(i[d]);return l})({1:[function(a,r,n){var i=a("./utils"),l=a("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(d){for(var u,h,f,x,p,v,b,y=[],j=0,w=d.length,S=w,O=i.getTypeOf(d)!=="string";j<d.length;)S=w-j,f=O?(u=d[j++],h=j<w?d[j++]:0,j<w?d[j++]:0):(u=d.charCodeAt(j++),h=j<w?d.charCodeAt(j++):0,j<w?d.charCodeAt(j++):0),x=u>>2,p=(3&u)<<4|h>>4,v=1<S?(15&h)<<2|f>>6:64,b=2<S?63&f:64,y.push(o.charAt(x)+o.charAt(p)+o.charAt(v)+o.charAt(b));return y.join("")},n.decode=function(d){var u,h,f,x,p,v,b=0,y=0,j="data:";if(d.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");var w,S=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===o.charAt(64)&&S--,d.charAt(d.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=l.uint8array?new Uint8Array(0|S):new Array(0|S);b<d.length;)u=o.indexOf(d.charAt(b++))<<2|(x=o.indexOf(d.charAt(b++)))>>4,h=(15&x)<<4|(p=o.indexOf(d.charAt(b++)))>>2,f=(3&p)<<6|(v=o.indexOf(d.charAt(b++))),w[y++]=u,p!==64&&(w[y++]=h),v!==64&&(w[y++]=f);return w}},{"./support":30,"./utils":32}],2:[function(a,r,n){var i=a("./external"),l=a("./stream/DataWorker"),o=a("./stream/Crc32Probe"),d=a("./stream/DataLengthProbe");function u(h,f,x,p,v){this.compressedSize=h,this.uncompressedSize=f,this.crc32=x,this.compression=p,this.compressedContent=v}u.prototype={getContentWorker:function(){var h=new l(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),f=this;return h.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new l(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,f,x){return h.pipe(new o).pipe(new d("uncompressedSize")).pipe(f.compressWorker(x)).pipe(new d("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,r,n){var i=a("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,r,n){var i=a("./utils"),l=(function(){for(var o,d=[],u=0;u<256;u++){o=u;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;d[u]=o}return d})();r.exports=function(o,d){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?(function(u,h,f,x){var p=l,v=x+f;u^=-1;for(var b=x;b<v;b++)u=u>>>8^p[255&(u^h[b])];return-1^u})(0|d,o,o.length,0):(function(u,h,f,x){var p=l,v=x+f;u^=-1;for(var b=x;b<v;b++)u=u>>>8^p[255&(u^h.charCodeAt(b))];return-1^u})(0|d,o,o.length,0):0}},{"./utils":32}],5:[function(a,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(a,r,n){var i=null;i=typeof Promise<"u"?Promise:a("lie"),r.exports={Promise:i}},{lie:37}],7:[function(a,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=a("pako"),o=a("./utils"),d=a("./stream/GenericWorker"),u=i?"uint8array":"array";function h(f,x){d.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=x,this.meta={}}n.magic="\b\0",o.inherits(h,d),h.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,f.data),!1)},h.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(x){f.push({data:x,meta:f.meta})}},n.compressWorker=function(f){return new h("Deflate",f)},n.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,r,n){function i(p,v){var b,y="";for(b=0;b<v;b++)y+=String.fromCharCode(255&p),p>>>=8;return y}function l(p,v,b,y,j,w){var S,O,_=p.file,E=p.compression,A=w!==u.utf8encode,D=o.transformTo("string",w(_.name)),L=o.transformTo("string",u.utf8encode(_.name)),B=_.comment,I=o.transformTo("string",w(B)),T=o.transformTo("string",u.utf8encode(B)),z=L.length!==_.name.length,k=T.length!==B.length,F="",P="",G="",Y=_.dir,W=_.date,ee={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(ee.crc32=p.crc32,ee.compressedSize=p.compressedSize,ee.uncompressedSize=p.uncompressedSize);var H=0;v&&(H|=8),A||!z&&!k||(H|=2048);var M=0,X=0;Y&&(M|=16),j==="UNIX"?(X=798,M|=(function(Q,se){var V=Q;return Q||(V=se?16893:33204),(65535&V)<<16})(_.unixPermissions,Y)):(X=20,M|=(function(Q){return 63&(Q||0)})(_.dosPermissions)),S=W.getUTCHours(),S<<=6,S|=W.getUTCMinutes(),S<<=5,S|=W.getUTCSeconds()/2,O=W.getUTCFullYear()-1980,O<<=4,O|=W.getUTCMonth()+1,O<<=5,O|=W.getUTCDate(),z&&(P=i(1,1)+i(h(D),4)+L,F+="up"+i(P.length,2)+P),k&&(G=i(1,1)+i(h(I),4)+T,F+="uc"+i(G.length,2)+G);var K="";return K+=`
\0`,K+=i(H,2),K+=E.magic,K+=i(S,2),K+=i(O,2),K+=i(ee.crc32,4),K+=i(ee.compressedSize,4),K+=i(ee.uncompressedSize,4),K+=i(D.length,2),K+=i(F.length,2),{fileRecord:f.LOCAL_FILE_HEADER+K+D+F,dirRecord:f.CENTRAL_FILE_HEADER+i(X,2)+K+i(I.length,2)+"\0\0\0\0"+i(M,4)+i(y,4)+D+F+I}}var o=a("../utils"),d=a("../stream/GenericWorker"),u=a("../utf8"),h=a("../crc32"),f=a("../signature");function x(p,v,b,y){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=y,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(x,d),x.prototype.push=function(p){var v=p.meta.percent||0,b=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,d.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-y-1))/b:100}}))},x.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var v=this.streamFiles&&!p.file.dir;if(v){var b=l(p,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(p){this.accumulate=!1;var v=this.streamFiles&&!p.file.dir,b=l(p,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:(function(y){return f.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)})(p),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var p=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-p,y=(function(j,w,S,O,_){var E=o.transformTo("string",_(O));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(j,2)+i(j,2)+i(w,4)+i(S,4)+i(E.length,2)+E})(this.dirRecords.length,b,p,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(p){this._sources.push(p);var v=this;return p.on("data",function(b){v.processChunk(b)}),p.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),p.on("error",function(b){v.error(b)}),this},x.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(p){var v=this._sources;if(!d.prototype.error.call(this,p))return!1;for(var b=0;b<v.length;b++)try{v[b].error(p)}catch{}return!0},x.prototype.lock=function(){d.prototype.lock.call(this);for(var p=this._sources,v=0;v<p.length;v++)p[v].lock()},r.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,r,n){var i=a("../compressions"),l=a("./ZipFileWorker");n.generateWorker=function(o,d,u){var h=new l(d.streamFiles,u,d.platform,d.encodeFileName),f=0;try{o.forEach(function(x,p){f++;var v=(function(w,S){var O=w||S,_=i[O];if(!_)throw new Error(O+" is not a valid compression method !");return _})(p.options.compression,d.compression),b=p.options.compressionOptions||d.compressionOptions||{},y=p.dir,j=p.date;p._compressWorker(v,b).withStreamInfo("file",{name:x,dir:y,date:j,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(x){h.error(x)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,r,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new i;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(i.prototype=a("./object")).loadAsync=a("./load"),i.support=a("./support"),i.defaults=a("./defaults"),i.version="3.10.1",i.loadAsync=function(l,o){return new i().loadAsync(l,o)},i.external=a("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,r,n){var i=a("./utils"),l=a("./external"),o=a("./utf8"),d=a("./zipEntries"),u=a("./stream/Crc32Probe"),h=a("./nodejsUtils");function f(x){return new l.Promise(function(p,v){var b=x.decompressed.getContentWorker().pipe(new u);b.on("error",function(y){v(y)}).on("end",function(){b.streamInfo.crc32!==x.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(x,p){var v=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(x)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",x,!0,p.optimizedBinaryString,p.base64).then(function(b){var y=new d(p);return y.load(b),y}).then(function(b){var y=[l.Promise.resolve(b)],j=b.files;if(p.checkCRC32)for(var w=0;w<j.length;w++)y.push(f(j[w]));return l.Promise.all(y)}).then(function(b){for(var y=b.shift(),j=y.files,w=0;w<j.length;w++){var S=j[w],O=S.fileNameStr,_=i.resolve(S.fileNameStr);v.file(_,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:p.createFolders}),S.dir||(v.file(_).unsafeOriginalName=O)}return y.zipComment.length&&(v.comment=y.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,r,n){var i=a("../utils"),l=a("../stream/GenericWorker");function o(d,u){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,l),o.prototype._bindStream=function(d){var u=this;(this._stream=d).pause(),d.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,r,n){var i=a("readable-stream").Readable;function l(o,d,u){i.call(this,d),this._helper=o;var h=this;o.on("data",function(f,x){h.push(f)||h._helper.pause(),u&&u(x)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}a("../utils").inherits(l,i),l.prototype._read=function(){this._helper.resume()},r.exports=l},{"../utils":32,"readable-stream":16}],14:[function(a,r,n){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,l);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,l)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var l=new Buffer(i);return l.fill(0),l},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(a,r,n){function i(_,E,A){var D,L=o.getTypeOf(E),B=o.extend(A||{},h);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(_=j(_)),B.createFolders&&(D=y(_))&&w.call(this,D,!0);var I=L==="string"&&B.binary===!1&&B.base64===!1;A&&A.binary!==void 0||(B.binary=!I),(E instanceof f&&E.uncompressedSize===0||B.dir||!E||E.length===0)&&(B.base64=!1,B.binary=!0,E="",B.compression="STORE",L="string");var T=null;T=E instanceof f||E instanceof d?E:v.isNode&&v.isStream(E)?new b(_,E):o.prepareContent(_,E,B.binary,B.optimizedBinaryString,B.base64);var z=new x(_,T,B);this.files[_]=z}var l=a("./utf8"),o=a("./utils"),d=a("./stream/GenericWorker"),u=a("./stream/StreamHelper"),h=a("./defaults"),f=a("./compressedObject"),x=a("./zipObject"),p=a("./generate"),v=a("./nodejsUtils"),b=a("./nodejs/NodejsStreamInputAdapter"),y=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var E=_.lastIndexOf("/");return 0<E?_.substring(0,E):""},j=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},w=function(_,E){return E=E!==void 0?E:h.createFolders,_=j(_),this.files[_]||i.call(this,_,null,{dir:!0,createFolders:E}),this.files[_]};function S(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var E,A,D;for(E in this.files)D=this.files[E],(A=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&_(A,D)},filter:function(_){var E=[];return this.forEach(function(A,D){_(A,D)&&E.push(D)}),E},file:function(_,E,A){if(arguments.length!==1)return _=this.root+_,i.call(this,_,E,A),this;if(S(_)){var D=_;return this.filter(function(B,I){return!I.dir&&D.test(B)})}var L=this.files[this.root+_];return L&&!L.dir?L:null},folder:function(_){if(!_)return this;if(S(_))return this.filter(function(L,B){return B.dir&&_.test(L)});var E=this.root+_,A=w.call(this,E),D=this.clone();return D.root=A.name,D},remove:function(_){_=this.root+_;var E=this.files[_];if(E||(_.slice(-1)!=="/"&&(_+="/"),E=this.files[_]),E&&!E.dir)delete this.files[_];else for(var A=this.filter(function(L,B){return B.name.slice(0,_.length)===_}),D=0;D<A.length;D++)delete this.files[A[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var E,A={};try{if((A=o.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");o.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var D=A.comment||this.comment||"";E=p.generateWorker(this,A,D)}catch(L){(E=new d("error")).error(L)}return new u(E,A.type||"string",A.mimeType)},generateAsync:function(_,E){return this.generateInternalStream(_).accumulate(E)},generateNodeStream:function(_,E){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(E)}};r.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,r,n){r.exports=a("stream")},{stream:void 0}],17:[function(a,r,n){var i=a("./DataReader");function l(o){i.call(this,o);for(var d=0;d<this.data.length;d++)o[d]=255&o[d]}a("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var d=o.charCodeAt(0),u=o.charCodeAt(1),h=o.charCodeAt(2),f=o.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===d&&this.data[x+1]===u&&this.data[x+2]===h&&this.data[x+3]===f)return x-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var d=o.charCodeAt(0),u=o.charCodeAt(1),h=o.charCodeAt(2),f=o.charCodeAt(3),x=this.readData(4);return d===x[0]&&u===x[1]&&h===x[2]&&f===x[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./DataReader":18}],18:[function(a,r,n){var i=a("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var d,u=0;for(this.checkOffset(o),d=this.index+o-1;d>=this.index;d--)u=(u<<8)+this.byteAt(d);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=l},{"../utils":32}],19:[function(a,r,n){var i=a("./Uint8ArrayReader");function l(o){i.call(this,o)}a("../utils").inherits(l,i),l.prototype.readData=function(o){this.checkOffset(o);var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,r,n){var i=a("./DataReader");function l(o){i.call(this,o)}a("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./DataReader":18}],21:[function(a,r,n){var i=a("./ArrayReader");function l(o){i.call(this,o)}a("../utils").inherits(l,i),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(a,r,n){var i=a("../utils"),l=a("../support"),o=a("./ArrayReader"),d=a("./StringReader"),u=a("./NodeBufferReader"),h=a("./Uint8ArrayReader");r.exports=function(f){var x=i.getTypeOf(f);return i.checkSupport(x),x!=="string"||l.uint8array?x==="nodebuffer"?new u(f):l.uint8array?new h(i.transformTo("uint8array",f)):new o(i.transformTo("array",f)):new d(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,r,n){var i=a("./GenericWorker"),l=a("../utils");function o(d){i.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(o,i),o.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(a,r,n){var i=a("./GenericWorker"),l=a("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(o,i),o.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,r,n){var i=a("../utils"),l=a("./GenericWorker");function o(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}i.inherits(o,l),o.prototype.processChunk=function(d){if(d){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+d.data.length}l.prototype.processChunk.call(this,d)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(a,r,n){var i=a("../utils"),l=a("./GenericWorker");function o(d){l.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=i.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}i.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,u);break;case"uint8array":d=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":d=this.data.slice(this.index,u)}return this.index=u,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(a,r,n){function i(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(d){o.processChunk(d)}),l.on("end",function(){o.end()}),l.on("error",function(d){o.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},r.exports=i},{}],29:[function(a,r,n){var i=a("../utils"),l=a("./ConvertWorker"),o=a("./GenericWorker"),d=a("../base64"),u=a("../support"),h=a("../external"),f=null;if(u.nodestream)try{f=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(v,b){return new h.Promise(function(y,j){var w=[],S=v._internalType,O=v._outputType,_=v._mimeType;v.on("data",function(E,A){w.push(E),b&&b(A)}).on("error",function(E){w=[],j(E)}).on("end",function(){try{var E=(function(A,D,L){switch(A){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),L);case"base64":return d.encode(D);default:return i.transformTo(A,D)}})(O,(function(A,D){var L,B=0,I=null,T=0;for(L=0;L<D.length;L++)T+=D[L].length;switch(A){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(I=new Uint8Array(T),L=0;L<D.length;L++)I.set(D[L],B),B+=D[L].length;return I;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+A+"'")}})(S,w),_);y(E)}catch(A){j(A)}w=[]}).resume()})}function p(v,b,y){var j=b;switch(b){case"blob":case"arraybuffer":j="uint8array";break;case"base64":j="string"}try{this._internalType=j,this._outputType=b,this._mimeType=y,i.checkSupport(j),this._worker=v.pipe(new l(j)),v.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}p.prototype={accumulate:function(v){return x(this,v)},on:function(v,b){var y=this;return v==="data"?this._worker.on(v,function(j){b.call(y,j.data,j.meta)}):this._worker.on(v,function(){i.delay(b,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(i),n.blob=l.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!a("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(a,r,n){for(var i=a("./utils"),l=a("./support"),o=a("./nodejsUtils"),d=a("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function f(){d.call(this,"utf-8 decode"),this.leftOver=null}function x(){d.call(this,"utf-8 encode")}n.utf8encode=function(p){return l.nodebuffer?o.newBufferFrom(p,"utf-8"):(function(v){var b,y,j,w,S,O=v.length,_=0;for(w=0;w<O;w++)(64512&(y=v.charCodeAt(w)))==55296&&w+1<O&&(64512&(j=v.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(j-56320),w++),_+=y<128?1:y<2048?2:y<65536?3:4;for(b=l.uint8array?new Uint8Array(_):new Array(_),w=S=0;S<_;w++)(64512&(y=v.charCodeAt(w)))==55296&&w+1<O&&(64512&(j=v.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(j-56320),w++),y<128?b[S++]=y:(y<2048?b[S++]=192|y>>>6:(y<65536?b[S++]=224|y>>>12:(b[S++]=240|y>>>18,b[S++]=128|y>>>12&63),b[S++]=128|y>>>6&63),b[S++]=128|63&y);return b})(p)},n.utf8decode=function(p){return l.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):(function(v){var b,y,j,w,S=v.length,O=new Array(2*S);for(b=y=0;b<S;)if((j=v[b++])<128)O[y++]=j;else if(4<(w=u[j]))O[y++]=65533,b+=w-1;else{for(j&=w===2?31:w===3?15:7;1<w&&b<S;)j=j<<6|63&v[b++],w--;1<w?O[y++]=65533:j<65536?O[y++]=j:(j-=65536,O[y++]=55296|j>>10&1023,O[y++]=56320|1023&j)}return O.length!==y&&(O.subarray?O=O.subarray(0,y):O.length=y),i.applyFromCharCode(O)})(p=i.transformTo(l.uint8array?"uint8array":"array",p))},i.inherits(f,d),f.prototype.processChunk=function(p){var v=i.transformTo(l.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var y=(function(w,S){var O;for((S=S||w.length)>w.length&&(S=w.length),O=S-1;0<=O&&(192&w[O])==128;)O--;return O<0||O===0?S:O+u[w[O]]>S?O:S})(v),j=v;y!==v.length&&(l.uint8array?(j=v.subarray(0,y),this.leftOver=v.subarray(y,v.length)):(j=v.slice(0,y),this.leftOver=v.slice(y,v.length))),this.push({data:n.utf8decode(j),meta:p.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=f,i.inherits(x,d),x.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,r,n){var i=a("./support"),l=a("./base64"),o=a("./nodejsUtils"),d=a("./external");function u(b){return b}function h(b,y){for(var j=0;j<b.length;++j)y[j]=255&b.charCodeAt(j);return y}a("setimmediate"),n.newBlob=function(b,y){n.checkSupport("blob");try{return new Blob([b],{type:y})}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return j.append(b),j.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(b,y,j){var w=[],S=0,O=b.length;if(O<=j)return String.fromCharCode.apply(null,b);for(;S<O;)y==="array"||y==="nodebuffer"?w.push(String.fromCharCode.apply(null,b.slice(S,Math.min(S+j,O)))):w.push(String.fromCharCode.apply(null,b.subarray(S,Math.min(S+j,O)))),S+=j;return w.join("")},stringifyByChar:function(b){for(var y="",j=0;j<b.length;j++)y+=String.fromCharCode(b[j]);return y},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function x(b){var y=65536,j=n.getTypeOf(b),w=!0;if(j==="uint8array"?w=f.applyCanBeUsed.uint8array:j==="nodebuffer"&&(w=f.applyCanBeUsed.nodebuffer),w)for(;1<y;)try{return f.stringifyByChunk(b,j,y)}catch{y=Math.floor(y/2)}return f.stringifyByChar(b)}function p(b,y){for(var j=0;j<b.length;j++)y[j]=b[j];return y}n.applyFromCharCode=x;var v={};v.string={string:u,array:function(b){return h(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return h(b,new Uint8Array(b.length))},nodebuffer:function(b){return h(b,o.allocBuffer(b.length))}},v.array={string:x,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return x(new Uint8Array(b))},array:function(b){return p(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:x,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:x,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:u},n.transformTo=function(b,y){if(y=y||"",!b)return y;n.checkSupport(b);var j=n.getTypeOf(y);return v[j][b](y)},n.resolve=function(b){for(var y=b.split("/"),j=[],w=0;w<y.length;w++){var S=y[w];S==="."||S===""&&w!==0&&w!==y.length-1||(S===".."?j.pop():j.push(S))}return j.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var y,j,w="";for(j=0;j<(b||"").length;j++)w+="\\x"+((y=b.charCodeAt(j))<16?"0":"")+y.toString(16).toUpperCase();return w},n.delay=function(b,y,j){setImmediate(function(){b.apply(j||null,y||[])})},n.inherits=function(b,y){function j(){}j.prototype=y.prototype,b.prototype=new j},n.extend=function(){var b,y,j={};for(b=0;b<arguments.length;b++)for(y in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],y)&&j[y]===void 0&&(j[y]=arguments[b][y]);return j},n.prepareContent=function(b,y,j,w,S){return d.Promise.resolve(y).then(function(O){return i.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new d.Promise(function(_,E){var A=new FileReader;A.onload=function(D){_(D.target.result)},A.onerror=function(D){E(D.target.error)},A.readAsArrayBuffer(O)}):O}).then(function(O){var _=n.getTypeOf(O);return _?(_==="arraybuffer"?O=n.transformTo("uint8array",O):_==="string"&&(S?O=l.decode(O):j&&w!==!0&&(O=(function(E){return h(E,i.uint8array?new Uint8Array(E.length):new Array(E.length))})(O))),O):d.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,r,n){var i=a("./reader/readerFor"),l=a("./utils"),o=a("./signature"),d=a("./zipEntry"),u=a("./support");function h(f){this.files=[],this.loadOptions=f}h.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(x)+", expected "+l.pretty(f)+")")}},isSignature:function(f,x){var p=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===x;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),x=u.uint8array?"uint8array":"array",p=l.transformTo(x,f);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,x,p,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),x=this.reader.readInt(4),p=this.reader.readData(x),this.zip64ExtensibleData[f]={id:f,length:x,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,x;for(f=0;f<this.files.length;f++)x=this.files[f],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var x=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var v=x-p;if(0<v)this.isSignature(x,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,r,n){var i=a("./reader/readerFor"),l=a("./utils"),o=a("./compressedObject"),d=a("./crc32"),u=a("./utf8"),h=a("./compressions"),f=a("./support");function x(p,v){this.options=p,this.loadOptions=v}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var v,b;if(p.skip(22),this.fileNameLength=p.readInt(2),b=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=(function(y){for(var j in h)if(Object.prototype.hasOwnProperty.call(h,j)&&h[j].magic===y)return h[j];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v,b,y,j=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<j;)v=p.readInt(2),b=p.readInt(2),y=p.readData(b),this.extraFields[v]={id:v,length:b,value:y};p.setIndex(j)},handleUTF8:function(){var p=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=l.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var j=l.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(j)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=i(p.value);return v.readInt(1)!==1||d(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=i(p.value);return v.readInt(1)!==1||d(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(p.length-5))}return null}},r.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,r,n){function i(v,b,y){this.name=v,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=b,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var l=a("./stream/StreamHelper"),o=a("./stream/DataWorker"),d=a("./utf8"),u=a("./compressedObject"),h=a("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,y="string";try{if(!v)throw new Error("No output type specified.");var j=(y=v.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),b=this._decompressWorker();var w=!this._dataBinary;w&&!j&&(b=b.pipe(new d.Utf8EncodeWorker)),!w&&j&&(b=b.pipe(new d.Utf8DecodeWorker))}catch(S){(b=new h("error")).error(S)}return new l(b,y,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new d.Utf8EncodeWorker)),u.createWorkerFrom(y,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<f.length;p++)i.prototype[f[p]]=x;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,r,n){(function(i){var l,o,d=i.MutationObserver||i.WebKitMutationObserver;if(d){var u=0,h=new d(v),f=i.document.createTextNode("");h.observe(f,{characterData:!0}),l=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)l="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var x=new i.MessageChannel;x.port1.onmessage=v,l=function(){x.port2.postMessage(0)}}var p=[];function v(){var b,y;o=!0;for(var j=p.length;j;){for(y=p,p=[],b=-1;++b<j;)y[b]();j=p.length}o=!1}r.exports=function(b){p.push(b)!==1||o||l()}}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,r,n){var i=a("immediate");function l(){}var o={},d=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function f(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,j!==l&&b(this,j)}function x(j,w,S){this.promise=j,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function p(j,w,S){i(function(){var O;try{O=w(S)}catch(_){return o.reject(j,_)}O===j?o.reject(j,new TypeError("Cannot resolve promise with itself")):o.resolve(j,O)})}function v(j){var w=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof w=="function")return function(){w.apply(j,arguments)}}function b(j,w){var S=!1;function O(A){S||(S=!0,o.reject(j,A))}function _(A){S||(S=!0,o.resolve(j,A))}var E=y(function(){w(_,O)});E.status==="error"&&O(E.value)}function y(j,w){var S={};try{S.value=j(w),S.status="success"}catch(O){S.status="error",S.value=O}return S}(r.exports=f).prototype.finally=function(j){if(typeof j!="function")return this;var w=this.constructor;return this.then(function(S){return w.resolve(j()).then(function(){return S})},function(S){return w.resolve(j()).then(function(){throw S})})},f.prototype.catch=function(j){return this.then(null,j)},f.prototype.then=function(j,w){if(typeof j!="function"&&this.state===u||typeof w!="function"&&this.state===d)return this;var S=new this.constructor(l);return this.state!==h?p(S,this.state===u?j:w,this.outcome):this.queue.push(new x(S,j,w)),S},x.prototype.callFulfilled=function(j){o.resolve(this.promise,j)},x.prototype.otherCallFulfilled=function(j){p(this.promise,this.onFulfilled,j)},x.prototype.callRejected=function(j){o.reject(this.promise,j)},x.prototype.otherCallRejected=function(j){p(this.promise,this.onRejected,j)},o.resolve=function(j,w){var S=y(v,w);if(S.status==="error")return o.reject(j,S.value);var O=S.value;if(O)b(j,O);else{j.state=u,j.outcome=w;for(var _=-1,E=j.queue.length;++_<E;)j.queue[_].callFulfilled(w)}return j},o.reject=function(j,w){j.state=d,j.outcome=w;for(var S=-1,O=j.queue.length;++S<O;)j.queue[S].callRejected(w);return j},f.resolve=function(j){return j instanceof this?j:o.resolve(new this(l),j)},f.reject=function(j){var w=new this(l);return o.reject(w,j)},f.all=function(j){var w=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=j.length,O=!1;if(!S)return this.resolve([]);for(var _=new Array(S),E=0,A=-1,D=new this(l);++A<S;)L(j[A],A);return D;function L(B,I){w.resolve(B).then(function(T){_[I]=T,++E!==S||O||(O=!0,o.resolve(D,_))},function(T){O||(O=!0,o.reject(D,T))})}},f.race=function(j){var w=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=j.length,O=!1;if(!S)return this.resolve([]);for(var _=-1,E=new this(l);++_<S;)A=j[_],w.resolve(A).then(function(D){O||(O=!0,o.resolve(E,D))},function(D){O||(O=!0,o.reject(E,D))});var A;return E}},{immediate:36}],38:[function(a,r,n){var i={};(0,a("./lib/utils/common").assign)(i,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,r,n){var i=a("./zlib/deflate"),l=a("./utils/common"),o=a("./utils/strings"),d=a("./zlib/messages"),u=a("./zlib/zstream"),h=Object.prototype.toString,f=0,x=-1,p=0,v=8;function b(j){if(!(this instanceof b))return new b(j);this.options=l.assign({level:x,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},j||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var S=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(S!==f)throw new Error(d[S]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var O;if(O=typeof w.dictionary=="string"?o.string2buf(w.dictionary):h.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(S=i.deflateSetDictionary(this.strm,O))!==f)throw new Error(d[S]);this._dict_set=!0}}function y(j,w){var S=new b(w);if(S.push(j,!0),S.err)throw S.msg||d[S.err];return S.result}b.prototype.push=function(j,w){var S,O,_=this.strm,E=this.options.chunkSize;if(this.ended)return!1;O=w===~~w?w:w===!0?4:0,typeof j=="string"?_.input=o.string2buf(j):h.call(j)==="[object ArrayBuffer]"?_.input=new Uint8Array(j):_.input=j,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new l.Buf8(E),_.next_out=0,_.avail_out=E),(S=i.deflate(_,O))!==1&&S!==f)return this.onEnd(S),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(_.output,_.next_out))):this.onData(l.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&S!==1);return O===4?(S=i.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===f):O!==2||(this.onEnd(f),!(_.avail_out=0))},b.prototype.onData=function(j){this.chunks.push(j)},b.prototype.onEnd=function(j){j===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},n.Deflate=b,n.deflate=y,n.deflateRaw=function(j,w){return(w=w||{}).raw=!0,y(j,w)},n.gzip=function(j,w){return(w=w||{}).gzip=!0,y(j,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,r,n){var i=a("./zlib/inflate"),l=a("./utils/common"),o=a("./utils/strings"),d=a("./zlib/constants"),u=a("./zlib/messages"),h=a("./zlib/zstream"),f=a("./zlib/gzheader"),x=Object.prototype.toString;function p(b){if(!(this instanceof p))return new p(b);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},b||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||b&&b.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var j=i.inflateInit2(this.strm,y.windowBits);if(j!==d.Z_OK)throw new Error(u[j]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function v(b,y){var j=new p(y);if(j.push(b,!0),j.err)throw j.msg||u[j.err];return j.result}p.prototype.push=function(b,y){var j,w,S,O,_,E,A=this.strm,D=this.options.chunkSize,L=this.options.dictionary,B=!1;if(this.ended)return!1;w=y===~~y?y:y===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof b=="string"?A.input=o.binstring2buf(b):x.call(b)==="[object ArrayBuffer]"?A.input=new Uint8Array(b):A.input=b,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new l.Buf8(D),A.next_out=0,A.avail_out=D),(j=i.inflate(A,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&L&&(E=typeof L=="string"?o.string2buf(L):x.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,j=i.inflateSetDictionary(this.strm,E)),j===d.Z_BUF_ERROR&&B===!0&&(j=d.Z_OK,B=!1),j!==d.Z_STREAM_END&&j!==d.Z_OK)return this.onEnd(j),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&j!==d.Z_STREAM_END&&(A.avail_in!==0||w!==d.Z_FINISH&&w!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(A.output,A.next_out),O=A.next_out-S,_=o.buf2string(A.output,S),A.next_out=O,A.avail_out=D-O,O&&l.arraySet(A.output,A.output,S,O,0),this.onData(_)):this.onData(l.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(B=!0)}while((0<A.avail_in||A.avail_out===0)&&j!==d.Z_STREAM_END);return j===d.Z_STREAM_END&&(w=d.Z_FINISH),w===d.Z_FINISH?(j=i.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===d.Z_OK):w!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(A.avail_out=0))},p.prototype.onData=function(b){this.chunks.push(b)},p.prototype.onEnd=function(b){b===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=p,n.inflate=v,n.inflateRaw=function(b,y){return(y=y||{}).raw=!0,v(b,y)},n.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(d){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])}}return d},n.shrinkBuf=function(d,u){return d.length===u?d:d.subarray?d.subarray(0,u):(d.length=u,d)};var l={arraySet:function(d,u,h,f,x){if(u.subarray&&d.subarray)d.set(u.subarray(h,h+f),x);else for(var p=0;p<f;p++)d[x+p]=u[h+p]},flattenChunks:function(d){var u,h,f,x,p,v;for(u=f=0,h=d.length;u<h;u++)f+=d[u].length;for(v=new Uint8Array(f),u=x=0,h=d.length;u<h;u++)p=d[u],v.set(p,x),x+=p.length;return v}},o={arraySet:function(d,u,h,f,x){for(var p=0;p<f;p++)d[x+p]=u[h+p]},flattenChunks:function(d){return[].concat.apply([],d)}};n.setTyped=function(d){d?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,l)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(a,r,n){var i=a("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var d=new i.Buf8(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(f,x){if(x<65537&&(f.subarray&&o||!f.subarray&&l))return String.fromCharCode.apply(null,i.shrinkBuf(f,x));for(var p="",v=0;v<x;v++)p+=String.fromCharCode(f[v]);return p}d[254]=d[254]=1,n.string2buf=function(f){var x,p,v,b,y,j=f.length,w=0;for(b=0;b<j;b++)(64512&(p=f.charCodeAt(b)))==55296&&b+1<j&&(64512&(v=f.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),b++),w+=p<128?1:p<2048?2:p<65536?3:4;for(x=new i.Buf8(w),b=y=0;y<w;b++)(64512&(p=f.charCodeAt(b)))==55296&&b+1<j&&(64512&(v=f.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),b++),p<128?x[y++]=p:(p<2048?x[y++]=192|p>>>6:(p<65536?x[y++]=224|p>>>12:(x[y++]=240|p>>>18,x[y++]=128|p>>>12&63),x[y++]=128|p>>>6&63),x[y++]=128|63&p);return x},n.buf2binstring=function(f){return h(f,f.length)},n.binstring2buf=function(f){for(var x=new i.Buf8(f.length),p=0,v=x.length;p<v;p++)x[p]=f.charCodeAt(p);return x},n.buf2string=function(f,x){var p,v,b,y,j=x||f.length,w=new Array(2*j);for(p=v=0;p<j;)if((b=f[p++])<128)w[v++]=b;else if(4<(y=d[b]))w[v++]=65533,p+=y-1;else{for(b&=y===2?31:y===3?15:7;1<y&&p<j;)b=b<<6|63&f[p++],y--;1<y?w[v++]=65533:b<65536?w[v++]=b:(b-=65536,w[v++]=55296|b>>10&1023,w[v++]=56320|1023&b)}return h(w,v)},n.utf8border=function(f,x){var p;for((x=x||f.length)>f.length&&(x=f.length),p=x-1;0<=p&&(192&f[p])==128;)p--;return p<0||p===0?x:p+d[f[p]]>x?p:x}},{"./common":41}],43:[function(a,r,n){r.exports=function(i,l,o,d){for(var u=65535&i|0,h=i>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;h=h+(u=u+l[d++]|0)|0,--f;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(a,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,r,n){var i=(function(){for(var l,o=[],d=0;d<256;d++){l=d;for(var u=0;u<8;u++)l=1&l?3988292384^l>>>1:l>>>1;o[d]=l}return o})();r.exports=function(l,o,d,u){var h=i,f=u+d;l^=-1;for(var x=u;x<f;x++)l=l>>>8^h[255&(l^o[x])];return-1^l}},{}],46:[function(a,r,n){var i,l=a("../utils/common"),o=a("./trees"),d=a("./adler32"),u=a("./crc32"),h=a("./messages"),f=0,x=4,p=0,v=-2,b=-1,y=4,j=2,w=8,S=9,O=286,_=30,E=19,A=2*O+1,D=15,L=3,B=258,I=B+L+1,T=42,z=113,k=1,F=2,P=3,G=4;function Y(q,ce){return q.msg=h[ce],ce}function W(q){return(q<<1)-(4<q?9:0)}function ee(q){for(var ce=q.length;0<=--ce;)q[ce]=0}function H(q){var ce=q.state,fe=ce.pending;fe>q.avail_out&&(fe=q.avail_out),fe!==0&&(l.arraySet(q.output,ce.pending_buf,ce.pending_out,fe,q.next_out),q.next_out+=fe,ce.pending_out+=fe,q.total_out+=fe,q.avail_out-=fe,ce.pending-=fe,ce.pending===0&&(ce.pending_out=0))}function M(q,ce){o._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,ce),q.block_start=q.strstart,H(q.strm)}function X(q,ce){q.pending_buf[q.pending++]=ce}function K(q,ce){q.pending_buf[q.pending++]=ce>>>8&255,q.pending_buf[q.pending++]=255&ce}function Q(q,ce){var fe,ie,ne=q.max_chain_length,pe=q.strstart,Ee=q.prev_length,Ie=q.nice_match,_e=q.strstart>q.w_size-I?q.strstart-(q.w_size-I):0,Ge=q.window,Ae=q.w_mask,Ue=q.prev,Qe=q.strstart+B,_t=Ge[pe+Ee-1],lt=Ge[pe+Ee];q.prev_length>=q.good_match&&(ne>>=2),Ie>q.lookahead&&(Ie=q.lookahead);do if(Ge[(fe=ce)+Ee]===lt&&Ge[fe+Ee-1]===_t&&Ge[fe]===Ge[pe]&&Ge[++fe]===Ge[pe+1]){pe+=2,fe++;do;while(Ge[++pe]===Ge[++fe]&&Ge[++pe]===Ge[++fe]&&Ge[++pe]===Ge[++fe]&&Ge[++pe]===Ge[++fe]&&Ge[++pe]===Ge[++fe]&&Ge[++pe]===Ge[++fe]&&Ge[++pe]===Ge[++fe]&&Ge[++pe]===Ge[++fe]&&pe<Qe);if(ie=B-(Qe-pe),pe=Qe-B,Ee<ie){if(q.match_start=ce,Ie<=(Ee=ie))break;_t=Ge[pe+Ee-1],lt=Ge[pe+Ee]}}while((ce=Ue[ce&Ae])>_e&&--ne!=0);return Ee<=q.lookahead?Ee:q.lookahead}function se(q){var ce,fe,ie,ne,pe,Ee,Ie,_e,Ge,Ae,Ue=q.w_size;do{if(ne=q.window_size-q.lookahead-q.strstart,q.strstart>=Ue+(Ue-I)){for(l.arraySet(q.window,q.window,Ue,Ue,0),q.match_start-=Ue,q.strstart-=Ue,q.block_start-=Ue,ce=fe=q.hash_size;ie=q.head[--ce],q.head[ce]=Ue<=ie?ie-Ue:0,--fe;);for(ce=fe=Ue;ie=q.prev[--ce],q.prev[ce]=Ue<=ie?ie-Ue:0,--fe;);ne+=Ue}if(q.strm.avail_in===0)break;if(Ee=q.strm,Ie=q.window,_e=q.strstart+q.lookahead,Ge=ne,Ae=void 0,Ae=Ee.avail_in,Ge<Ae&&(Ae=Ge),fe=Ae===0?0:(Ee.avail_in-=Ae,l.arraySet(Ie,Ee.input,Ee.next_in,Ae,_e),Ee.state.wrap===1?Ee.adler=d(Ee.adler,Ie,Ae,_e):Ee.state.wrap===2&&(Ee.adler=u(Ee.adler,Ie,Ae,_e)),Ee.next_in+=Ae,Ee.total_in+=Ae,Ae),q.lookahead+=fe,q.lookahead+q.insert>=L)for(pe=q.strstart-q.insert,q.ins_h=q.window[pe],q.ins_h=(q.ins_h<<q.hash_shift^q.window[pe+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[pe+L-1])&q.hash_mask,q.prev[pe&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=pe,pe++,q.insert--,!(q.lookahead+q.insert<L)););}while(q.lookahead<I&&q.strm.avail_in!==0)}function V(q,ce){for(var fe,ie;;){if(q.lookahead<I){if(se(q),q.lookahead<I&&ce===f)return k;if(q.lookahead===0)break}if(fe=0,q.lookahead>=L&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,fe=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),fe!==0&&q.strstart-fe<=q.w_size-I&&(q.match_length=Q(q,fe)),q.match_length>=L)if(ie=o._tr_tally(q,q.strstart-q.match_start,q.match_length-L),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=L){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,fe=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,--q.match_length!=0;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else ie=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(ie&&(M(q,!1),q.strm.avail_out===0))return k}return q.insert=q.strstart<L-1?q.strstart:L-1,ce===x?(M(q,!0),q.strm.avail_out===0?P:G):q.last_lit&&(M(q,!1),q.strm.avail_out===0)?k:F}function te(q,ce){for(var fe,ie,ne;;){if(q.lookahead<I){if(se(q),q.lookahead<I&&ce===f)return k;if(q.lookahead===0)break}if(fe=0,q.lookahead>=L&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,fe=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=L-1,fe!==0&&q.prev_length<q.max_lazy_match&&q.strstart-fe<=q.w_size-I&&(q.match_length=Q(q,fe),q.match_length<=5&&(q.strategy===1||q.match_length===L&&4096<q.strstart-q.match_start)&&(q.match_length=L-1)),q.prev_length>=L&&q.match_length<=q.prev_length){for(ne=q.strstart+q.lookahead-L,ie=o._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-L),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=ne&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+L-1])&q.hash_mask,fe=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),--q.prev_length!=0;);if(q.match_available=0,q.match_length=L-1,q.strstart++,ie&&(M(q,!1),q.strm.avail_out===0))return k}else if(q.match_available){if((ie=o._tr_tally(q,0,q.window[q.strstart-1]))&&M(q,!1),q.strstart++,q.lookahead--,q.strm.avail_out===0)return k}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(ie=o._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<L-1?q.strstart:L-1,ce===x?(M(q,!0),q.strm.avail_out===0?P:G):q.last_lit&&(M(q,!1),q.strm.avail_out===0)?k:F}function Z(q,ce,fe,ie,ne){this.good_length=q,this.max_lazy=ce,this.nice_length=fe,this.max_chain=ie,this.func=ne}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*A),this.dyn_dtree=new l.Buf16(2*(2*_+1)),this.bl_tree=new l.Buf16(2*(2*E+1)),ee(this.dyn_ltree),ee(this.dyn_dtree),ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(D+1),this.heap=new l.Buf16(2*O+1),ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*O+1),ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function re(q){var ce;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=j,(ce=q.state).pending=0,ce.pending_out=0,ce.wrap<0&&(ce.wrap=-ce.wrap),ce.status=ce.wrap?T:z,q.adler=ce.wrap===2?0:1,ce.last_flush=f,o._tr_init(ce),p):Y(q,v)}function J(q){var ce=re(q);return ce===p&&(function(fe){fe.window_size=2*fe.w_size,ee(fe.head),fe.max_lazy_match=i[fe.level].max_lazy,fe.good_match=i[fe.level].good_length,fe.nice_match=i[fe.level].nice_length,fe.max_chain_length=i[fe.level].max_chain,fe.strstart=0,fe.block_start=0,fe.lookahead=0,fe.insert=0,fe.match_length=fe.prev_length=L-1,fe.match_available=0,fe.ins_h=0})(q.state),ce}function Ne(q,ce,fe,ie,ne,pe){if(!q)return v;var Ee=1;if(ce===b&&(ce=6),ie<0?(Ee=0,ie=-ie):15<ie&&(Ee=2,ie-=16),ne<1||S<ne||fe!==w||ie<8||15<ie||ce<0||9<ce||pe<0||y<pe)return Y(q,v);ie===8&&(ie=9);var Ie=new ue;return(q.state=Ie).strm=q,Ie.wrap=Ee,Ie.gzhead=null,Ie.w_bits=ie,Ie.w_size=1<<Ie.w_bits,Ie.w_mask=Ie.w_size-1,Ie.hash_bits=ne+7,Ie.hash_size=1<<Ie.hash_bits,Ie.hash_mask=Ie.hash_size-1,Ie.hash_shift=~~((Ie.hash_bits+L-1)/L),Ie.window=new l.Buf8(2*Ie.w_size),Ie.head=new l.Buf16(Ie.hash_size),Ie.prev=new l.Buf16(Ie.w_size),Ie.lit_bufsize=1<<ne+6,Ie.pending_buf_size=4*Ie.lit_bufsize,Ie.pending_buf=new l.Buf8(Ie.pending_buf_size),Ie.d_buf=1*Ie.lit_bufsize,Ie.l_buf=3*Ie.lit_bufsize,Ie.level=ce,Ie.strategy=pe,Ie.method=fe,J(q)}i=[new Z(0,0,0,0,function(q,ce){var fe=65535;for(fe>q.pending_buf_size-5&&(fe=q.pending_buf_size-5);;){if(q.lookahead<=1){if(se(q),q.lookahead===0&&ce===f)return k;if(q.lookahead===0)break}q.strstart+=q.lookahead,q.lookahead=0;var ie=q.block_start+fe;if((q.strstart===0||q.strstart>=ie)&&(q.lookahead=q.strstart-ie,q.strstart=ie,M(q,!1),q.strm.avail_out===0)||q.strstart-q.block_start>=q.w_size-I&&(M(q,!1),q.strm.avail_out===0))return k}return q.insert=0,ce===x?(M(q,!0),q.strm.avail_out===0?P:G):(q.strstart>q.block_start&&(M(q,!1),q.strm.avail_out),k)}),new Z(4,4,8,4,V),new Z(4,5,16,8,V),new Z(4,6,32,32,V),new Z(4,4,16,16,te),new Z(8,16,32,32,te),new Z(8,16,128,128,te),new Z(8,32,128,256,te),new Z(32,128,258,1024,te),new Z(32,258,258,4096,te)],n.deflateInit=function(q,ce){return Ne(q,ce,w,15,8,0)},n.deflateInit2=Ne,n.deflateReset=J,n.deflateResetKeep=re,n.deflateSetHeader=function(q,ce){return q&&q.state?q.state.wrap!==2?v:(q.state.gzhead=ce,p):v},n.deflate=function(q,ce){var fe,ie,ne,pe;if(!q||!q.state||5<ce||ce<0)return q?Y(q,v):v;if(ie=q.state,!q.output||!q.input&&q.avail_in!==0||ie.status===666&&ce!==x)return Y(q,q.avail_out===0?-5:v);if(ie.strm=q,fe=ie.last_flush,ie.last_flush=ce,ie.status===T)if(ie.wrap===2)q.adler=0,X(ie,31),X(ie,139),X(ie,8),ie.gzhead?(X(ie,(ie.gzhead.text?1:0)+(ie.gzhead.hcrc?2:0)+(ie.gzhead.extra?4:0)+(ie.gzhead.name?8:0)+(ie.gzhead.comment?16:0)),X(ie,255&ie.gzhead.time),X(ie,ie.gzhead.time>>8&255),X(ie,ie.gzhead.time>>16&255),X(ie,ie.gzhead.time>>24&255),X(ie,ie.level===9?2:2<=ie.strategy||ie.level<2?4:0),X(ie,255&ie.gzhead.os),ie.gzhead.extra&&ie.gzhead.extra.length&&(X(ie,255&ie.gzhead.extra.length),X(ie,ie.gzhead.extra.length>>8&255)),ie.gzhead.hcrc&&(q.adler=u(q.adler,ie.pending_buf,ie.pending,0)),ie.gzindex=0,ie.status=69):(X(ie,0),X(ie,0),X(ie,0),X(ie,0),X(ie,0),X(ie,ie.level===9?2:2<=ie.strategy||ie.level<2?4:0),X(ie,3),ie.status=z);else{var Ee=w+(ie.w_bits-8<<4)<<8;Ee|=(2<=ie.strategy||ie.level<2?0:ie.level<6?1:ie.level===6?2:3)<<6,ie.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,ie.status=z,K(ie,Ee),ie.strstart!==0&&(K(ie,q.adler>>>16),K(ie,65535&q.adler)),q.adler=1}if(ie.status===69)if(ie.gzhead.extra){for(ne=ie.pending;ie.gzindex<(65535&ie.gzhead.extra.length)&&(ie.pending!==ie.pending_buf_size||(ie.gzhead.hcrc&&ie.pending>ne&&(q.adler=u(q.adler,ie.pending_buf,ie.pending-ne,ne)),H(q),ne=ie.pending,ie.pending!==ie.pending_buf_size));)X(ie,255&ie.gzhead.extra[ie.gzindex]),ie.gzindex++;ie.gzhead.hcrc&&ie.pending>ne&&(q.adler=u(q.adler,ie.pending_buf,ie.pending-ne,ne)),ie.gzindex===ie.gzhead.extra.length&&(ie.gzindex=0,ie.status=73)}else ie.status=73;if(ie.status===73)if(ie.gzhead.name){ne=ie.pending;do{if(ie.pending===ie.pending_buf_size&&(ie.gzhead.hcrc&&ie.pending>ne&&(q.adler=u(q.adler,ie.pending_buf,ie.pending-ne,ne)),H(q),ne=ie.pending,ie.pending===ie.pending_buf_size)){pe=1;break}pe=ie.gzindex<ie.gzhead.name.length?255&ie.gzhead.name.charCodeAt(ie.gzindex++):0,X(ie,pe)}while(pe!==0);ie.gzhead.hcrc&&ie.pending>ne&&(q.adler=u(q.adler,ie.pending_buf,ie.pending-ne,ne)),pe===0&&(ie.gzindex=0,ie.status=91)}else ie.status=91;if(ie.status===91)if(ie.gzhead.comment){ne=ie.pending;do{if(ie.pending===ie.pending_buf_size&&(ie.gzhead.hcrc&&ie.pending>ne&&(q.adler=u(q.adler,ie.pending_buf,ie.pending-ne,ne)),H(q),ne=ie.pending,ie.pending===ie.pending_buf_size)){pe=1;break}pe=ie.gzindex<ie.gzhead.comment.length?255&ie.gzhead.comment.charCodeAt(ie.gzindex++):0,X(ie,pe)}while(pe!==0);ie.gzhead.hcrc&&ie.pending>ne&&(q.adler=u(q.adler,ie.pending_buf,ie.pending-ne,ne)),pe===0&&(ie.status=103)}else ie.status=103;if(ie.status===103&&(ie.gzhead.hcrc?(ie.pending+2>ie.pending_buf_size&&H(q),ie.pending+2<=ie.pending_buf_size&&(X(ie,255&q.adler),X(ie,q.adler>>8&255),q.adler=0,ie.status=z)):ie.status=z),ie.pending!==0){if(H(q),q.avail_out===0)return ie.last_flush=-1,p}else if(q.avail_in===0&&W(ce)<=W(fe)&&ce!==x)return Y(q,-5);if(ie.status===666&&q.avail_in!==0)return Y(q,-5);if(q.avail_in!==0||ie.lookahead!==0||ce!==f&&ie.status!==666){var Ie=ie.strategy===2?(function(_e,Ge){for(var Ae;;){if(_e.lookahead===0&&(se(_e),_e.lookahead===0)){if(Ge===f)return k;break}if(_e.match_length=0,Ae=o._tr_tally(_e,0,_e.window[_e.strstart]),_e.lookahead--,_e.strstart++,Ae&&(M(_e,!1),_e.strm.avail_out===0))return k}return _e.insert=0,Ge===x?(M(_e,!0),_e.strm.avail_out===0?P:G):_e.last_lit&&(M(_e,!1),_e.strm.avail_out===0)?k:F})(ie,ce):ie.strategy===3?(function(_e,Ge){for(var Ae,Ue,Qe,_t,lt=_e.window;;){if(_e.lookahead<=B){if(se(_e),_e.lookahead<=B&&Ge===f)return k;if(_e.lookahead===0)break}if(_e.match_length=0,_e.lookahead>=L&&0<_e.strstart&&(Ue=lt[Qe=_e.strstart-1])===lt[++Qe]&&Ue===lt[++Qe]&&Ue===lt[++Qe]){_t=_e.strstart+B;do;while(Ue===lt[++Qe]&&Ue===lt[++Qe]&&Ue===lt[++Qe]&&Ue===lt[++Qe]&&Ue===lt[++Qe]&&Ue===lt[++Qe]&&Ue===lt[++Qe]&&Ue===lt[++Qe]&&Qe<_t);_e.match_length=B-(_t-Qe),_e.match_length>_e.lookahead&&(_e.match_length=_e.lookahead)}if(_e.match_length>=L?(Ae=o._tr_tally(_e,1,_e.match_length-L),_e.lookahead-=_e.match_length,_e.strstart+=_e.match_length,_e.match_length=0):(Ae=o._tr_tally(_e,0,_e.window[_e.strstart]),_e.lookahead--,_e.strstart++),Ae&&(M(_e,!1),_e.strm.avail_out===0))return k}return _e.insert=0,Ge===x?(M(_e,!0),_e.strm.avail_out===0?P:G):_e.last_lit&&(M(_e,!1),_e.strm.avail_out===0)?k:F})(ie,ce):i[ie.level].func(ie,ce);if(Ie!==P&&Ie!==G||(ie.status=666),Ie===k||Ie===P)return q.avail_out===0&&(ie.last_flush=-1),p;if(Ie===F&&(ce===1?o._tr_align(ie):ce!==5&&(o._tr_stored_block(ie,0,0,!1),ce===3&&(ee(ie.head),ie.lookahead===0&&(ie.strstart=0,ie.block_start=0,ie.insert=0))),H(q),q.avail_out===0))return ie.last_flush=-1,p}return ce!==x?p:ie.wrap<=0?1:(ie.wrap===2?(X(ie,255&q.adler),X(ie,q.adler>>8&255),X(ie,q.adler>>16&255),X(ie,q.adler>>24&255),X(ie,255&q.total_in),X(ie,q.total_in>>8&255),X(ie,q.total_in>>16&255),X(ie,q.total_in>>24&255)):(K(ie,q.adler>>>16),K(ie,65535&q.adler)),H(q),0<ie.wrap&&(ie.wrap=-ie.wrap),ie.pending!==0?p:1)},n.deflateEnd=function(q){var ce;return q&&q.state?(ce=q.state.status)!==T&&ce!==69&&ce!==73&&ce!==91&&ce!==103&&ce!==z&&ce!==666?Y(q,v):(q.state=null,ce===z?Y(q,-3):p):v},n.deflateSetDictionary=function(q,ce){var fe,ie,ne,pe,Ee,Ie,_e,Ge,Ae=ce.length;if(!q||!q.state||(pe=(fe=q.state).wrap)===2||pe===1&&fe.status!==T||fe.lookahead)return v;for(pe===1&&(q.adler=d(q.adler,ce,Ae,0)),fe.wrap=0,Ae>=fe.w_size&&(pe===0&&(ee(fe.head),fe.strstart=0,fe.block_start=0,fe.insert=0),Ge=new l.Buf8(fe.w_size),l.arraySet(Ge,ce,Ae-fe.w_size,fe.w_size,0),ce=Ge,Ae=fe.w_size),Ee=q.avail_in,Ie=q.next_in,_e=q.input,q.avail_in=Ae,q.next_in=0,q.input=ce,se(fe);fe.lookahead>=L;){for(ie=fe.strstart,ne=fe.lookahead-(L-1);fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[ie+L-1])&fe.hash_mask,fe.prev[ie&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=ie,ie++,--ne;);fe.strstart=ie,fe.lookahead=L-1,se(fe)}return fe.strstart+=fe.lookahead,fe.block_start=fe.strstart,fe.insert=fe.lookahead,fe.lookahead=0,fe.match_length=fe.prev_length=L-1,fe.match_available=0,q.next_in=Ie,q.input=_e,q.avail_in=Ee,fe.wrap=pe,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,r,n){r.exports=function(i,l){var o,d,u,h,f,x,p,v,b,y,j,w,S,O,_,E,A,D,L,B,I,T,z,k,F;o=i.state,d=i.next_in,k=i.input,u=d+(i.avail_in-5),h=i.next_out,F=i.output,f=h-(l-i.avail_out),x=h+(i.avail_out-257),p=o.dmax,v=o.wsize,b=o.whave,y=o.wnext,j=o.window,w=o.hold,S=o.bits,O=o.lencode,_=o.distcode,E=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;e:do{S<15&&(w+=k[d++]<<S,S+=8,w+=k[d++]<<S,S+=8),D=O[w&E];t:for(;;){if(w>>>=L=D>>>24,S-=L,(L=D>>>16&255)===0)F[h++]=65535&D;else{if(!(16&L)){if((64&L)==0){D=O[(65535&D)+(w&(1<<L)-1)];continue t}if(32&L){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}B=65535&D,(L&=15)&&(S<L&&(w+=k[d++]<<S,S+=8),B+=w&(1<<L)-1,w>>>=L,S-=L),S<15&&(w+=k[d++]<<S,S+=8,w+=k[d++]<<S,S+=8),D=_[w&A];s:for(;;){if(w>>>=L=D>>>24,S-=L,!(16&(L=D>>>16&255))){if((64&L)==0){D=_[(65535&D)+(w&(1<<L)-1)];continue s}i.msg="invalid distance code",o.mode=30;break e}if(I=65535&D,S<(L&=15)&&(w+=k[d++]<<S,(S+=8)<L&&(w+=k[d++]<<S,S+=8)),p<(I+=w&(1<<L)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=L,S-=L,(L=h-f)<I){if(b<(L=I-L)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(z=j,(T=0)===y){if(T+=v-L,L<B){for(B-=L;F[h++]=j[T++],--L;);T=h-I,z=F}}else if(y<L){if(T+=v+y-L,(L-=y)<B){for(B-=L;F[h++]=j[T++],--L;);if(T=0,y<B){for(B-=L=y;F[h++]=j[T++],--L;);T=h-I,z=F}}}else if(T+=y-L,L<B){for(B-=L;F[h++]=j[T++],--L;);T=h-I,z=F}for(;2<B;)F[h++]=z[T++],F[h++]=z[T++],F[h++]=z[T++],B-=3;B&&(F[h++]=z[T++],1<B&&(F[h++]=z[T++]))}else{for(T=h-I;F[h++]=F[T++],F[h++]=F[T++],F[h++]=F[T++],2<(B-=3););B&&(F[h++]=F[T++],1<B&&(F[h++]=F[T++]))}break}}break}}while(d<u&&h<x);d-=B=S>>3,w&=(1<<(S-=B<<3))-1,i.next_in=d,i.next_out=h,i.avail_in=d<u?u-d+5:5-(d-u),i.avail_out=h<x?x-h+257:257-(h-x),o.hold=w,o.bits=S}},{}],49:[function(a,r,n){var i=a("../utils/common"),l=a("./adler32"),o=a("./crc32"),d=a("./inffast"),u=a("./inftrees"),h=1,f=2,x=0,p=-2,v=1,b=852,y=592;function j(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(T){var z;return T&&T.state?(z=T.state,T.total_in=T.total_out=z.total=0,T.msg="",z.wrap&&(T.adler=1&z.wrap),z.mode=v,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new i.Buf32(b),z.distcode=z.distdyn=new i.Buf32(y),z.sane=1,z.back=-1,x):p}function O(T){var z;return T&&T.state?((z=T.state).wsize=0,z.whave=0,z.wnext=0,S(T)):p}function _(T,z){var k,F;return T&&T.state?(F=T.state,z<0?(k=0,z=-z):(k=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?p:(F.window!==null&&F.wbits!==z&&(F.window=null),F.wrap=k,F.wbits=z,O(T))):p}function E(T,z){var k,F;return T?(F=new w,(T.state=F).window=null,(k=_(T,z))!==x&&(T.state=null),k):p}var A,D,L=!0;function B(T){if(L){var z;for(A=new i.Buf32(512),D=new i.Buf32(32),z=0;z<144;)T.lens[z++]=8;for(;z<256;)T.lens[z++]=9;for(;z<280;)T.lens[z++]=7;for(;z<288;)T.lens[z++]=8;for(u(h,T.lens,0,288,A,0,T.work,{bits:9}),z=0;z<32;)T.lens[z++]=5;u(f,T.lens,0,32,D,0,T.work,{bits:5}),L=!1}T.lencode=A,T.lenbits=9,T.distcode=D,T.distbits=5}function I(T,z,k,F){var P,G=T.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new i.Buf8(G.wsize)),F>=G.wsize?(i.arraySet(G.window,z,k-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(F<(P=G.wsize-G.wnext)&&(P=F),i.arraySet(G.window,z,k-F,P,G.wnext),(F-=P)?(i.arraySet(G.window,z,k-F,F,0),G.wnext=F,G.whave=G.wsize):(G.wnext+=P,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=P))),0}n.inflateReset=O,n.inflateReset2=_,n.inflateResetKeep=S,n.inflateInit=function(T){return E(T,15)},n.inflateInit2=E,n.inflate=function(T,z){var k,F,P,G,Y,W,ee,H,M,X,K,Q,se,V,te,Z,ue,re,J,Ne,q,ce,fe,ie,ne=0,pe=new i.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return p;(k=T.state).mode===12&&(k.mode=13),Y=T.next_out,P=T.output,ee=T.avail_out,G=T.next_in,F=T.input,W=T.avail_in,H=k.hold,M=k.bits,X=W,K=ee,ce=x;e:for(;;)switch(k.mode){case v:if(k.wrap===0){k.mode=13;break}for(;M<16;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(2&k.wrap&&H===35615){pe[k.check=0]=255&H,pe[1]=H>>>8&255,k.check=o(k.check,pe,2,0),M=H=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&H)<<8)+(H>>8))%31){T.msg="incorrect header check",k.mode=30;break}if((15&H)!=8){T.msg="unknown compression method",k.mode=30;break}if(M-=4,q=8+(15&(H>>>=4)),k.wbits===0)k.wbits=q;else if(q>k.wbits){T.msg="invalid window size",k.mode=30;break}k.dmax=1<<q,T.adler=k.check=1,k.mode=512&H?10:12,M=H=0;break;case 2:for(;M<16;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(k.flags=H,(255&k.flags)!=8){T.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){T.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=H>>8&1),512&k.flags&&(pe[0]=255&H,pe[1]=H>>>8&255,k.check=o(k.check,pe,2,0)),M=H=0,k.mode=3;case 3:for(;M<32;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}k.head&&(k.head.time=H),512&k.flags&&(pe[0]=255&H,pe[1]=H>>>8&255,pe[2]=H>>>16&255,pe[3]=H>>>24&255,k.check=o(k.check,pe,4,0)),M=H=0,k.mode=4;case 4:for(;M<16;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}k.head&&(k.head.xflags=255&H,k.head.os=H>>8),512&k.flags&&(pe[0]=255&H,pe[1]=H>>>8&255,k.check=o(k.check,pe,2,0)),M=H=0,k.mode=5;case 5:if(1024&k.flags){for(;M<16;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}k.length=H,k.head&&(k.head.extra_len=H),512&k.flags&&(pe[0]=255&H,pe[1]=H>>>8&255,k.check=o(k.check,pe,2,0)),M=H=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(W<(Q=k.length)&&(Q=W),Q&&(k.head&&(q=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),i.arraySet(k.head.extra,F,G,Q,q)),512&k.flags&&(k.check=o(k.check,F,Q,G)),W-=Q,G+=Q,k.length-=Q),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(W===0)break e;for(Q=0;q=F[G+Q++],k.head&&q&&k.length<65536&&(k.head.name+=String.fromCharCode(q)),q&&Q<W;);if(512&k.flags&&(k.check=o(k.check,F,Q,G)),W-=Q,G+=Q,q)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(W===0)break e;for(Q=0;q=F[G+Q++],k.head&&q&&k.length<65536&&(k.head.comment+=String.fromCharCode(q)),q&&Q<W;);if(512&k.flags&&(k.check=o(k.check,F,Q,G)),W-=Q,G+=Q,q)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;M<16;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(H!==(65535&k.check)){T.msg="header crc mismatch",k.mode=30;break}M=H=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),T.adler=k.check=0,k.mode=12;break;case 10:for(;M<32;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}T.adler=k.check=j(H),M=H=0,k.mode=11;case 11:if(k.havedict===0)return T.next_out=Y,T.avail_out=ee,T.next_in=G,T.avail_in=W,k.hold=H,k.bits=M,2;T.adler=k.check=1,k.mode=12;case 12:if(z===5||z===6)break e;case 13:if(k.last){H>>>=7&M,M-=7&M,k.mode=27;break}for(;M<3;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}switch(k.last=1&H,M-=1,3&(H>>>=1)){case 0:k.mode=14;break;case 1:if(B(k),k.mode=20,z!==6)break;H>>>=2,M-=2;break e;case 2:k.mode=17;break;case 3:T.msg="invalid block type",k.mode=30}H>>>=2,M-=2;break;case 14:for(H>>>=7&M,M-=7&M;M<32;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if((65535&H)!=(H>>>16^65535)){T.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&H,M=H=0,k.mode=15,z===6)break e;case 15:k.mode=16;case 16:if(Q=k.length){if(W<Q&&(Q=W),ee<Q&&(Q=ee),Q===0)break e;i.arraySet(P,F,G,Q,Y),W-=Q,G+=Q,ee-=Q,Y+=Q,k.length-=Q;break}k.mode=12;break;case 17:for(;M<14;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(k.nlen=257+(31&H),H>>>=5,M-=5,k.ndist=1+(31&H),H>>>=5,M-=5,k.ncode=4+(15&H),H>>>=4,M-=4,286<k.nlen||30<k.ndist){T.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;M<3;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}k.lens[Ee[k.have++]]=7&H,H>>>=3,M-=3}for(;k.have<19;)k.lens[Ee[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,fe={bits:k.lenbits},ce=u(0,k.lens,0,19,k.lencode,0,k.work,fe),k.lenbits=fe.bits,ce){T.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;Z=(ne=k.lencode[H&(1<<k.lenbits)-1])>>>16&255,ue=65535&ne,!((te=ne>>>24)<=M);){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(ue<16)H>>>=te,M-=te,k.lens[k.have++]=ue;else{if(ue===16){for(ie=te+2;M<ie;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(H>>>=te,M-=te,k.have===0){T.msg="invalid bit length repeat",k.mode=30;break}q=k.lens[k.have-1],Q=3+(3&H),H>>>=2,M-=2}else if(ue===17){for(ie=te+3;M<ie;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}M-=te,q=0,Q=3+(7&(H>>>=te)),H>>>=3,M-=3}else{for(ie=te+7;M<ie;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}M-=te,q=0,Q=11+(127&(H>>>=te)),H>>>=7,M-=7}if(k.have+Q>k.nlen+k.ndist){T.msg="invalid bit length repeat",k.mode=30;break}for(;Q--;)k.lens[k.have++]=q}}if(k.mode===30)break;if(k.lens[256]===0){T.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,fe={bits:k.lenbits},ce=u(h,k.lens,0,k.nlen,k.lencode,0,k.work,fe),k.lenbits=fe.bits,ce){T.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,fe={bits:k.distbits},ce=u(f,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,fe),k.distbits=fe.bits,ce){T.msg="invalid distances set",k.mode=30;break}if(k.mode=20,z===6)break e;case 20:k.mode=21;case 21:if(6<=W&&258<=ee){T.next_out=Y,T.avail_out=ee,T.next_in=G,T.avail_in=W,k.hold=H,k.bits=M,d(T,K),Y=T.next_out,P=T.output,ee=T.avail_out,G=T.next_in,F=T.input,W=T.avail_in,H=k.hold,M=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;Z=(ne=k.lencode[H&(1<<k.lenbits)-1])>>>16&255,ue=65535&ne,!((te=ne>>>24)<=M);){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(Z&&(240&Z)==0){for(re=te,J=Z,Ne=ue;Z=(ne=k.lencode[Ne+((H&(1<<re+J)-1)>>re)])>>>16&255,ue=65535&ne,!(re+(te=ne>>>24)<=M);){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}H>>>=re,M-=re,k.back+=re}if(H>>>=te,M-=te,k.back+=te,k.length=ue,Z===0){k.mode=26;break}if(32&Z){k.back=-1,k.mode=12;break}if(64&Z){T.msg="invalid literal/length code",k.mode=30;break}k.extra=15&Z,k.mode=22;case 22:if(k.extra){for(ie=k.extra;M<ie;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}k.length+=H&(1<<k.extra)-1,H>>>=k.extra,M-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;Z=(ne=k.distcode[H&(1<<k.distbits)-1])>>>16&255,ue=65535&ne,!((te=ne>>>24)<=M);){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if((240&Z)==0){for(re=te,J=Z,Ne=ue;Z=(ne=k.distcode[Ne+((H&(1<<re+J)-1)>>re)])>>>16&255,ue=65535&ne,!(re+(te=ne>>>24)<=M);){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}H>>>=re,M-=re,k.back+=re}if(H>>>=te,M-=te,k.back+=te,64&Z){T.msg="invalid distance code",k.mode=30;break}k.offset=ue,k.extra=15&Z,k.mode=24;case 24:if(k.extra){for(ie=k.extra;M<ie;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}k.offset+=H&(1<<k.extra)-1,H>>>=k.extra,M-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){T.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(ee===0)break e;if(Q=K-ee,k.offset>Q){if((Q=k.offset-Q)>k.whave&&k.sane){T.msg="invalid distance too far back",k.mode=30;break}se=Q>k.wnext?(Q-=k.wnext,k.wsize-Q):k.wnext-Q,Q>k.length&&(Q=k.length),V=k.window}else V=P,se=Y-k.offset,Q=k.length;for(ee<Q&&(Q=ee),ee-=Q,k.length-=Q;P[Y++]=V[se++],--Q;);k.length===0&&(k.mode=21);break;case 26:if(ee===0)break e;P[Y++]=k.length,ee--,k.mode=21;break;case 27:if(k.wrap){for(;M<32;){if(W===0)break e;W--,H|=F[G++]<<M,M+=8}if(K-=ee,T.total_out+=K,k.total+=K,K&&(T.adler=k.check=k.flags?o(k.check,P,K,Y-K):l(k.check,P,K,Y-K)),K=ee,(k.flags?H:j(H))!==k.check){T.msg="incorrect data check",k.mode=30;break}M=H=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;M<32;){if(W===0)break e;W--,H+=F[G++]<<M,M+=8}if(H!==(4294967295&k.total)){T.msg="incorrect length check",k.mode=30;break}M=H=0}k.mode=29;case 29:ce=1;break e;case 30:ce=-3;break e;case 31:return-4;case 32:default:return p}return T.next_out=Y,T.avail_out=ee,T.next_in=G,T.avail_in=W,k.hold=H,k.bits=M,(k.wsize||K!==T.avail_out&&k.mode<30&&(k.mode<27||z!==4))&&I(T,T.output,T.next_out,K-T.avail_out)?(k.mode=31,-4):(X-=T.avail_in,K-=T.avail_out,T.total_in+=X,T.total_out+=K,k.total+=K,k.wrap&&K&&(T.adler=k.check=k.flags?o(k.check,P,K,T.next_out-K):l(k.check,P,K,T.next_out-K)),T.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(X==0&&K===0||z===4)&&ce===x&&(ce=-5),ce)},n.inflateEnd=function(T){if(!T||!T.state)return p;var z=T.state;return z.window&&(z.window=null),T.state=null,x},n.inflateGetHeader=function(T,z){var k;return T&&T.state?(2&(k=T.state).wrap)==0?p:((k.head=z).done=!1,x):p},n.inflateSetDictionary=function(T,z){var k,F=z.length;return T&&T.state?(k=T.state).wrap!==0&&k.mode!==11?p:k.mode===11&&l(1,z,F,0)!==k.check?-3:I(T,z,F,F)?(k.mode=31,-4):(k.havedict=1,x):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,r,n){var i=a("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,f,x,p,v,b,y,j){var w,S,O,_,E,A,D,L,B,I=j.bits,T=0,z=0,k=0,F=0,P=0,G=0,Y=0,W=0,ee=0,H=0,M=null,X=0,K=new i.Buf16(16),Q=new i.Buf16(16),se=null,V=0;for(T=0;T<=15;T++)K[T]=0;for(z=0;z<p;z++)K[f[x+z]]++;for(P=I,F=15;1<=F&&K[F]===0;F--);if(F<P&&(P=F),F===0)return v[b++]=20971520,v[b++]=20971520,j.bits=1,0;for(k=1;k<F&&K[k]===0;k++);for(P<k&&(P=k),T=W=1;T<=15;T++)if(W<<=1,(W-=K[T])<0)return-1;if(0<W&&(h===0||F!==1))return-1;for(Q[1]=0,T=1;T<15;T++)Q[T+1]=Q[T]+K[T];for(z=0;z<p;z++)f[x+z]!==0&&(y[Q[f[x+z]]++]=z);if(A=h===0?(M=se=y,19):h===1?(M=l,X-=257,se=o,V-=257,256):(M=d,se=u,-1),T=k,E=b,Y=z=H=0,O=-1,_=(ee=1<<(G=P))-1,h===1&&852<ee||h===2&&592<ee)return 1;for(;;){for(D=T-Y,B=y[z]<A?(L=0,y[z]):y[z]>A?(L=se[V+y[z]],M[X+y[z]]):(L=96,0),w=1<<T-Y,k=S=1<<G;v[E+(H>>Y)+(S-=w)]=D<<24|L<<16|B|0,S!==0;);for(w=1<<T-1;H&w;)w>>=1;if(w!==0?(H&=w-1,H+=w):H=0,z++,--K[T]==0){if(T===F)break;T=f[x+y[z]]}if(P<T&&(H&_)!==O){for(Y===0&&(Y=P),E+=k,W=1<<(G=T-Y);G+Y<F&&!((W-=K[G+Y])<=0);)G++,W<<=1;if(ee+=1<<G,h===1&&852<ee||h===2&&592<ee)return 1;v[O=H&_]=P<<24|G<<16|E-b|0}}return H!==0&&(v[E+H]=T-Y<<24|64<<16|0),j.bits=P,0}},{"../utils/common":41}],51:[function(a,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,r,n){var i=a("../utils/common"),l=0,o=1;function d(ne){for(var pe=ne.length;0<=--pe;)ne[pe]=0}var u=0,h=29,f=256,x=f+1+h,p=30,v=19,b=2*x+1,y=15,j=16,w=7,S=256,O=16,_=17,E=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(x+2));d(I);var T=new Array(2*p);d(T);var z=new Array(512);d(z);var k=new Array(256);d(k);var F=new Array(h);d(F);var P,G,Y,W=new Array(p);function ee(ne,pe,Ee,Ie,_e){this.static_tree=ne,this.extra_bits=pe,this.extra_base=Ee,this.elems=Ie,this.max_length=_e,this.has_stree=ne&&ne.length}function H(ne,pe){this.dyn_tree=ne,this.max_code=0,this.stat_desc=pe}function M(ne){return ne<256?z[ne]:z[256+(ne>>>7)]}function X(ne,pe){ne.pending_buf[ne.pending++]=255&pe,ne.pending_buf[ne.pending++]=pe>>>8&255}function K(ne,pe,Ee){ne.bi_valid>j-Ee?(ne.bi_buf|=pe<<ne.bi_valid&65535,X(ne,ne.bi_buf),ne.bi_buf=pe>>j-ne.bi_valid,ne.bi_valid+=Ee-j):(ne.bi_buf|=pe<<ne.bi_valid&65535,ne.bi_valid+=Ee)}function Q(ne,pe,Ee){K(ne,Ee[2*pe],Ee[2*pe+1])}function se(ne,pe){for(var Ee=0;Ee|=1&ne,ne>>>=1,Ee<<=1,0<--pe;);return Ee>>>1}function V(ne,pe,Ee){var Ie,_e,Ge=new Array(y+1),Ae=0;for(Ie=1;Ie<=y;Ie++)Ge[Ie]=Ae=Ae+Ee[Ie-1]<<1;for(_e=0;_e<=pe;_e++){var Ue=ne[2*_e+1];Ue!==0&&(ne[2*_e]=se(Ge[Ue]++,Ue))}}function te(ne){var pe;for(pe=0;pe<x;pe++)ne.dyn_ltree[2*pe]=0;for(pe=0;pe<p;pe++)ne.dyn_dtree[2*pe]=0;for(pe=0;pe<v;pe++)ne.bl_tree[2*pe]=0;ne.dyn_ltree[2*S]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function Z(ne){8<ne.bi_valid?X(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function ue(ne,pe,Ee,Ie){var _e=2*pe,Ge=2*Ee;return ne[_e]<ne[Ge]||ne[_e]===ne[Ge]&&Ie[pe]<=Ie[Ee]}function re(ne,pe,Ee){for(var Ie=ne.heap[Ee],_e=Ee<<1;_e<=ne.heap_len&&(_e<ne.heap_len&&ue(pe,ne.heap[_e+1],ne.heap[_e],ne.depth)&&_e++,!ue(pe,Ie,ne.heap[_e],ne.depth));)ne.heap[Ee]=ne.heap[_e],Ee=_e,_e<<=1;ne.heap[Ee]=Ie}function J(ne,pe,Ee){var Ie,_e,Ge,Ae,Ue=0;if(ne.last_lit!==0)for(;Ie=ne.pending_buf[ne.d_buf+2*Ue]<<8|ne.pending_buf[ne.d_buf+2*Ue+1],_e=ne.pending_buf[ne.l_buf+Ue],Ue++,Ie===0?Q(ne,_e,pe):(Q(ne,(Ge=k[_e])+f+1,pe),(Ae=A[Ge])!==0&&K(ne,_e-=F[Ge],Ae),Q(ne,Ge=M(--Ie),Ee),(Ae=D[Ge])!==0&&K(ne,Ie-=W[Ge],Ae)),Ue<ne.last_lit;);Q(ne,S,pe)}function Ne(ne,pe){var Ee,Ie,_e,Ge=pe.dyn_tree,Ae=pe.stat_desc.static_tree,Ue=pe.stat_desc.has_stree,Qe=pe.stat_desc.elems,_t=-1;for(ne.heap_len=0,ne.heap_max=b,Ee=0;Ee<Qe;Ee++)Ge[2*Ee]!==0?(ne.heap[++ne.heap_len]=_t=Ee,ne.depth[Ee]=0):Ge[2*Ee+1]=0;for(;ne.heap_len<2;)Ge[2*(_e=ne.heap[++ne.heap_len]=_t<2?++_t:0)]=1,ne.depth[_e]=0,ne.opt_len--,Ue&&(ne.static_len-=Ae[2*_e+1]);for(pe.max_code=_t,Ee=ne.heap_len>>1;1<=Ee;Ee--)re(ne,Ge,Ee);for(_e=Qe;Ee=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],re(ne,Ge,1),Ie=ne.heap[1],ne.heap[--ne.heap_max]=Ee,ne.heap[--ne.heap_max]=Ie,Ge[2*_e]=Ge[2*Ee]+Ge[2*Ie],ne.depth[_e]=(ne.depth[Ee]>=ne.depth[Ie]?ne.depth[Ee]:ne.depth[Ie])+1,Ge[2*Ee+1]=Ge[2*Ie+1]=_e,ne.heap[1]=_e++,re(ne,Ge,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],(function(lt,Nt){var jt,Ft,Ce,ve,Ve,ot,le=Nt.dyn_tree,Ke=Nt.max_code,nt=Nt.stat_desc.static_tree,pt=Nt.stat_desc.has_stree,Ut=Nt.stat_desc.extra_bits,Ts=Nt.stat_desc.extra_base,Rt=Nt.stat_desc.max_length,Re=0;for(ve=0;ve<=y;ve++)lt.bl_count[ve]=0;for(le[2*lt.heap[lt.heap_max]+1]=0,jt=lt.heap_max+1;jt<b;jt++)Rt<(ve=le[2*le[2*(Ft=lt.heap[jt])+1]+1]+1)&&(ve=Rt,Re++),le[2*Ft+1]=ve,Ke<Ft||(lt.bl_count[ve]++,Ve=0,Ts<=Ft&&(Ve=Ut[Ft-Ts]),ot=le[2*Ft],lt.opt_len+=ot*(ve+Ve),pt&&(lt.static_len+=ot*(nt[2*Ft+1]+Ve)));if(Re!==0){do{for(ve=Rt-1;lt.bl_count[ve]===0;)ve--;lt.bl_count[ve]--,lt.bl_count[ve+1]+=2,lt.bl_count[Rt]--,Re-=2}while(0<Re);for(ve=Rt;ve!==0;ve--)for(Ft=lt.bl_count[ve];Ft!==0;)Ke<(Ce=lt.heap[--jt])||(le[2*Ce+1]!==ve&&(lt.opt_len+=(ve-le[2*Ce+1])*le[2*Ce],le[2*Ce+1]=ve),Ft--)}})(ne,pe),V(Ge,_t,ne.bl_count)}function q(ne,pe,Ee){var Ie,_e,Ge=-1,Ae=pe[1],Ue=0,Qe=7,_t=4;for(Ae===0&&(Qe=138,_t=3),pe[2*(Ee+1)+1]=65535,Ie=0;Ie<=Ee;Ie++)_e=Ae,Ae=pe[2*(Ie+1)+1],++Ue<Qe&&_e===Ae||(Ue<_t?ne.bl_tree[2*_e]+=Ue:_e!==0?(_e!==Ge&&ne.bl_tree[2*_e]++,ne.bl_tree[2*O]++):Ue<=10?ne.bl_tree[2*_]++:ne.bl_tree[2*E]++,Ge=_e,_t=(Ue=0)===Ae?(Qe=138,3):_e===Ae?(Qe=6,3):(Qe=7,4))}function ce(ne,pe,Ee){var Ie,_e,Ge=-1,Ae=pe[1],Ue=0,Qe=7,_t=4;for(Ae===0&&(Qe=138,_t=3),Ie=0;Ie<=Ee;Ie++)if(_e=Ae,Ae=pe[2*(Ie+1)+1],!(++Ue<Qe&&_e===Ae)){if(Ue<_t)for(;Q(ne,_e,ne.bl_tree),--Ue!=0;);else _e!==0?(_e!==Ge&&(Q(ne,_e,ne.bl_tree),Ue--),Q(ne,O,ne.bl_tree),K(ne,Ue-3,2)):Ue<=10?(Q(ne,_,ne.bl_tree),K(ne,Ue-3,3)):(Q(ne,E,ne.bl_tree),K(ne,Ue-11,7));Ge=_e,_t=(Ue=0)===Ae?(Qe=138,3):_e===Ae?(Qe=6,3):(Qe=7,4)}}d(W);var fe=!1;function ie(ne,pe,Ee,Ie){K(ne,(u<<1)+(Ie?1:0),3),(function(_e,Ge,Ae,Ue){Z(_e),X(_e,Ae),X(_e,~Ae),i.arraySet(_e.pending_buf,_e.window,Ge,Ae,_e.pending),_e.pending+=Ae})(ne,pe,Ee)}n._tr_init=function(ne){fe||((function(){var pe,Ee,Ie,_e,Ge,Ae=new Array(y+1);for(_e=Ie=0;_e<h-1;_e++)for(F[_e]=Ie,pe=0;pe<1<<A[_e];pe++)k[Ie++]=_e;for(k[Ie-1]=_e,_e=Ge=0;_e<16;_e++)for(W[_e]=Ge,pe=0;pe<1<<D[_e];pe++)z[Ge++]=_e;for(Ge>>=7;_e<p;_e++)for(W[_e]=Ge<<7,pe=0;pe<1<<D[_e]-7;pe++)z[256+Ge++]=_e;for(Ee=0;Ee<=y;Ee++)Ae[Ee]=0;for(pe=0;pe<=143;)I[2*pe+1]=8,pe++,Ae[8]++;for(;pe<=255;)I[2*pe+1]=9,pe++,Ae[9]++;for(;pe<=279;)I[2*pe+1]=7,pe++,Ae[7]++;for(;pe<=287;)I[2*pe+1]=8,pe++,Ae[8]++;for(V(I,x+1,Ae),pe=0;pe<p;pe++)T[2*pe+1]=5,T[2*pe]=se(pe,5);P=new ee(I,A,f+1,x,y),G=new ee(T,D,0,p,y),Y=new ee(new Array(0),L,0,v,w)})(),fe=!0),ne.l_desc=new H(ne.dyn_ltree,P),ne.d_desc=new H(ne.dyn_dtree,G),ne.bl_desc=new H(ne.bl_tree,Y),ne.bi_buf=0,ne.bi_valid=0,te(ne)},n._tr_stored_block=ie,n._tr_flush_block=function(ne,pe,Ee,Ie){var _e,Ge,Ae=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=(function(Ue){var Qe,_t=4093624447;for(Qe=0;Qe<=31;Qe++,_t>>>=1)if(1&_t&&Ue.dyn_ltree[2*Qe]!==0)return l;if(Ue.dyn_ltree[18]!==0||Ue.dyn_ltree[20]!==0||Ue.dyn_ltree[26]!==0)return o;for(Qe=32;Qe<f;Qe++)if(Ue.dyn_ltree[2*Qe]!==0)return o;return l})(ne)),Ne(ne,ne.l_desc),Ne(ne,ne.d_desc),Ae=(function(Ue){var Qe;for(q(Ue,Ue.dyn_ltree,Ue.l_desc.max_code),q(Ue,Ue.dyn_dtree,Ue.d_desc.max_code),Ne(Ue,Ue.bl_desc),Qe=v-1;3<=Qe&&Ue.bl_tree[2*B[Qe]+1]===0;Qe--);return Ue.opt_len+=3*(Qe+1)+5+5+4,Qe})(ne),_e=ne.opt_len+3+7>>>3,(Ge=ne.static_len+3+7>>>3)<=_e&&(_e=Ge)):_e=Ge=Ee+5,Ee+4<=_e&&pe!==-1?ie(ne,pe,Ee,Ie):ne.strategy===4||Ge===_e?(K(ne,2+(Ie?1:0),3),J(ne,I,T)):(K(ne,4+(Ie?1:0),3),(function(Ue,Qe,_t,lt){var Nt;for(K(Ue,Qe-257,5),K(Ue,_t-1,5),K(Ue,lt-4,4),Nt=0;Nt<lt;Nt++)K(Ue,Ue.bl_tree[2*B[Nt]+1],3);ce(Ue,Ue.dyn_ltree,Qe-1),ce(Ue,Ue.dyn_dtree,_t-1)})(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,Ae+1),J(ne,ne.dyn_ltree,ne.dyn_dtree)),te(ne),Ie&&Z(ne)},n._tr_tally=function(ne,pe,Ee){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=pe>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&pe,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Ee,ne.last_lit++,pe===0?ne.dyn_ltree[2*Ee]++:(ne.matches++,pe--,ne.dyn_ltree[2*(k[Ee]+f+1)]++,ne.dyn_dtree[2*M(pe)]++),ne.last_lit===ne.lit_bufsize-1},n._tr_align=function(ne){K(ne,2,3),Q(ne,S,I),(function(pe){pe.bi_valid===16?(X(pe,pe.bi_buf),pe.bi_buf=0,pe.bi_valid=0):8<=pe.bi_valid&&(pe.pending_buf[pe.pending++]=255&pe.bi_buf,pe.bi_buf>>=8,pe.bi_valid-=8)})(ne)}},{"../utils/common":41}],53:[function(a,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,r,n){(function(i){(function(l,o){if(!l.setImmediate){var d,u,h,f,x=1,p={},v=!1,b=l.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(l);y=y&&y.setTimeout?y:l,d={}.toString.call(l.process)==="[object process]"?function(O){process.nextTick(function(){w(O)})}:(function(){if(l.postMessage&&!l.importScripts){var O=!0,_=l.onmessage;return l.onmessage=function(){O=!1},l.postMessage("","*"),l.onmessage=_,O}})()?(f="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",S,!1):l.attachEvent("onmessage",S),function(O){l.postMessage(f+O,"*")}):l.MessageChannel?((h=new MessageChannel).port1.onmessage=function(O){w(O.data)},function(O){h.port2.postMessage(O)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(O){var _=b.createElement("script");_.onreadystatechange=function(){w(O),_.onreadystatechange=null,u.removeChild(_),_=null},u.appendChild(_)}):function(O){setTimeout(w,0,O)},y.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var _=new Array(arguments.length-1),E=0;E<_.length;E++)_[E]=arguments[E+1];var A={callback:O,args:_};return p[x]=A,d(x),x++},y.clearImmediate=j}function j(O){delete p[O]}function w(O){if(v)setTimeout(w,0,O);else{var _=p[O];if(_){v=!0;try{(function(E){var A=E.callback,D=E.args;switch(D.length){case 0:A();break;case 1:A(D[0]);break;case 2:A(D[0],D[1]);break;case 3:A(D[0],D[1],D[2]);break;default:A.apply(o,D)}})(_)}finally{j(O),v=!1}}}}function S(O){O.source===l&&typeof O.data=="string"&&O.data.indexOf(f)===0&&w(+O.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(A1)),A1.exports}var kme=_me();const GF=ra(kme),Ome=["image/jpeg","image/jpg","image/png","image/webp","image/gif","image/bmp","image/tiff"],K5=[".jpg",".jpeg",".png",".webp",".gif",".bmp",".tiff",".tif"],Ime=5,Rme=Ime*1024*1024,J5={enabled:!0,type:"BOTH",text:"SINI CAR",logoUrl:"",position:"CENTER",opacity:.3,fontSize:"MEDIUM",textColor:"#ffffff",rotation:-30,margin:20},Y5={PENDING:{ar:" ",en:"Pending Approval",color:"amber"},APPROVED:{ar:" ",en:"Approved",color:"green"},REJECTED:{ar:"",en:"Rejected",color:"red"},AUTO_MATCHED:{ar:" ",en:"Auto Matched",color:"blue"}},Pme={CENTER:{ar:"",en:"Center"},TOP_LEFT:{ar:" ",en:"Top Left"},TOP_RIGHT:{ar:" ",en:"Top Right"},BOTTOM_LEFT:{ar:" ",en:"Bottom Left"},BOTTOM_RIGHT:{ar:" ",en:"Bottom Right"},TILE:{ar:"",en:"Tile"}},WF={SMALL:{ar:"",en:"Small",px:16},MEDIUM:{ar:"",en:"Medium",px:24},LARGE:{ar:"",en:"Large",px:36}},QF=async(e,s=Rme,a=.8)=>new Promise((r,n)=>{const i=new FileReader;i.onload=l=>{var d;const o=new Image;o.onload=()=>{const u=document.createElement("canvas");let{width:h,height:f}=o;const x=2e3;if(h>x||f>x){const y=Math.min(x/h,x/f);h=Math.round(h*y),f=Math.round(f*y)}u.width=h,u.height=f;const p=u.getContext("2d");if(!p){n(new Error("Could not get canvas context"));return}p.drawImage(o,0,0,h,f);let v=a;const b=()=>{u.toBlob(y=>{if(!y){n(new Error("Could not compress image"));return}if(y.size>s&&v>.1)v-=.1,b();else{const j=u.toDataURL("image/jpeg",v);r({blob:y,dataUrl:j,width:h,height:f})}},"image/jpeg",v)};b()},o.onerror=()=>n(new Error("Could not load image")),o.src=(d=l.target)==null?void 0:d.result},i.onerror=()=>n(new Error("Could not read file")),i.readAsDataURL(e)}),KF=async(e,s=150)=>new Promise((a,r)=>{const n=new Image;n.onload=()=>{const i=document.createElement("canvas");let{width:l,height:o}=n;const d=Math.min(s/l,s/o);l=Math.round(l*d),o=Math.round(o*d),i.width=l,i.height=o;const u=i.getContext("2d");if(!u){r(new Error("Could not get canvas context"));return}u.drawImage(n,0,0,l,o),a(i.toDataURL("image/jpeg",.7))},n.onerror=()=>r(new Error("Could not create thumbnail")),n.src=e}),Ap=e=>{const a=e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9\-_]/g,"").trim().toUpperCase();return!a||a.length<3?null:a},X5=e=>Ome.includes(e.type),Dme=e=>{if(e===0)return"0 Bytes";const s=1024,a=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,r)).toFixed(2))+" "+a[r]},JF=()=>`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Mme=(e,s=400,a=300)=>{const r=document.createElement("canvas");r.width=s,r.height=a;const n=r.getContext("2d");if(!n)return r;n.fillStyle="#f0f0f0",n.fillRect(0,0,s,a),n.strokeStyle="#e0e0e0",n.lineWidth=1;for(let l=0;l<s;l+=20)n.beginPath(),n.moveTo(l,0),n.lineTo(l,a),n.stroke();for(let l=0;l<a;l+=20)n.beginPath(),n.moveTo(0,l),n.lineTo(s,l),n.stroke();if(!e.enabled)return r;const i=l=>{n.globalAlpha=e.opacity;const o=WF[e.fontSize].px;n.font=`bold ${o}px Arial`,n.fillStyle=e.textColor,n.textBaseline="middle",n.textAlign="center";const d=e.text||"",h=n.measureText(d).width,f=o*1.5,x=Math.min(s,a)*.15,p=10;if(e.position==="TILE"){n.save(),n.rotate(e.rotation*Math.PI/180);const v=Math.max(h,l?x:0)+e.margin*4,b=(l?x:0)+f+e.margin*4,y=Math.sqrt(s**2+a**2);for(let j=-y;j<y;j+=b)for(let w=-y;w<y;w+=v){const S=Math.floor(j/b)%2===0?0:v/2,O=w+S,_=j;if(l&&(e.type==="LOGO"||e.type==="BOTH")){const E=O-x/2,A=_-x/2-(e.type==="BOTH"?f/2:0);n.drawImage(l,E,A,x,x)}if(e.type==="TEXT"||e.type==="BOTH"){const E=l&&e.type==="BOTH"?_+x/2:_;n.fillText(d,O,E)}}n.restore()}else{let v=0,b=0;const y=e.margin;switch(e.position){case"TOP_LEFT":v=y,b=y,n.textAlign="left",n.textBaseline="top";break;case"TOP_RIGHT":v=s-y,b=y,n.textAlign="right",n.textBaseline="top";break;case"BOTTOM_LEFT":v=y,b=a-y,n.textAlign="left",n.textBaseline="bottom";break;case"BOTTOM_RIGHT":v=s-y,b=a-y,n.textAlign="right",n.textBaseline="bottom";break;default:v=s/2,b=a/2,n.textAlign="center",n.textBaseline="middle";break}n.save();const j=e.position==="CENTER";if(e.rotation!==0&&(n.translate(v,b),n.rotate(e.rotation*Math.PI/180),v=0,b=0),l&&(e.type==="LOGO"||e.type==="BOTH")){let w=v,S=b;j?(w=-x/2,S=-x/2-(e.type==="BOTH"?f/2:0)):e.position.includes("LEFT")?w=v:w=v-x,!j&&e.position.includes("BOTTOM")&&(S=b-x-(e.type==="BOTH"?f:0)),n.drawImage(l,w,S,x,x)}if(e.type==="TEXT"||e.type==="BOTH"){let w=v,S=b;j?(w=0,S=l&&e.type==="BOTH"?x/2+p:0):!j&&l&&e.type==="BOTH"&&(e.position.includes("BOTTOM")?S=b:S=b+x+p),n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(d,w,S)}n.restore()}};if((e.type==="LOGO"||e.type==="BOTH")&&e.logoUrl){const l=new Image;l.crossOrigin="Anonymous",l.onload=()=>i(l),l.onerror=()=>i(null),l.src=e.logoUrl}else i(null);return r},jm=50,Lme=()=>{const{t:e}=Kt(),{addToast:s}=It(),a=C.useRef(null),r=C.useRef(null),n=C.useRef(null),i=C.useRef(null),[l,o]=C.useState("IMAGES"),[d,u]=C.useState([]),[h,f]=C.useState(null),[x,p]=C.useState(J5),[v,b]=C.useState([]),[y,j]=C.useState(!0),[w,S]=C.useState(!1),[O,_]=C.useState(""),[E,A]=C.useState(""),[D,L]=C.useState("ALL"),[B,I]=C.useState(null),[T,z]=C.useState(1),[k,F]=C.useState(null),[P,G]=C.useState(""),[Y,W]=C.useState(null),[ee,H]=C.useState(""),M=C.useMemo(()=>new Set(d.filter(Ce=>Ce.partNumber&&Ce.isLinkedToProduct).map(Ce=>Ce.partNumber.toUpperCase())),[d]);C.useEffect(()=>{X()},[]);const X=async()=>{j(!0);try{const Ce=localStorage.getItem("sini_product_images"),ve=localStorage.getItem("sini_watermark_settings"),Ve=await he.searchProducts("");u(Ce?JSON.parse(Ce):[]),p(ve?JSON.parse(ve):J5),b(Ve),K(Ce?JSON.parse(Ce):[],Ve)}catch(Ce){console.error("Failed to load data:",Ce),s("    ","error")}finally{j(!1)}},K=(Ce,ve)=>{const Ve=Ce.filter(Ke=>Ke.status==="APPROVED"||Ke.status==="AUTO_MATCHED"),ot=new Set(Ve.filter(Ke=>Ke.isLinkedToProduct).map(Ke=>Ke.partNumber)),le={totalProducts:ve.length,productsWithImages:ot.size,productsWithoutImages:ve.length-ot.size,coveragePercent:ve.length>0?Math.round(ot.size/ve.length*100):0,pendingApproval:Ce.filter(Ke=>Ke.status==="PENDING").length,totalImages:Ce.length,imagesByUploader:{admin:Ce.filter(Ke=>Ke.uploaderType==="ADMIN").length,supplierLocal:Ce.filter(Ke=>Ke.uploaderType==="SUPPLIER_LOCAL").length,supplierInternational:Ce.filter(Ke=>Ke.uploaderType==="SUPPLIER_INTERNATIONAL").length,marketer:Ce.filter(Ke=>Ke.uploaderType==="MARKETER").length},unmatchedImages:Ce.filter(Ke=>!Ke.isLinkedToProduct).length};f(le)},Q=Ce=>{localStorage.setItem("sini_product_images",JSON.stringify(Ce)),u(Ce),K(Ce,v)},se=Ce=>{localStorage.setItem("sini_watermark_settings",JSON.stringify(Ce)),p(Ce),s("    ","success")},V=Ce=>M.has(Ce.toUpperCase()),te=async(Ce,ve)=>{try{const{dataUrl:Ve,width:ot,height:le,blob:Ke}=await QF(Ce),nt=await KF(Ve),pt=(ve==null?void 0:ve.trim().toUpperCase())||Ap(Ce.name)||"",Ut=v.find(Rt=>{var Re;return((Re=Rt.partNumber)==null?void 0:Re.toUpperCase())===pt}),Ts=V(pt);return{id:JF(),partNumber:pt,fileName:Ce.name,fileUrl:Ve,thumbnailUrl:nt,originalSize:Ce.size,compressedSize:Ke.size,width:ot,height:le,status:"AUTO_MATCHED",uploadedBy:"admin",uploaderType:"ADMIN",uploaderName:" ",isAutoMatched:!ve,isLinkedToProduct:!!Ut,createdAt:new Date().toISOString(),approvedAt:new Date().toISOString(),approvedBy:"admin",adminNotes:Ts?"  -    ":void 0}}catch(Ve){return console.error(`Failed to process ${Ce.name}:`,Ve),null}},Z=async Ce=>{var Ke;const ve=(Ke=Ce.target.files)==null?void 0:Ke[0];if(!ve)return;if(!X5(ve)){s("   ","error");return}const Ve=P.trim().toUpperCase(),ot=V(Ve);S(!0);const le=await te(ve,P);le&&(Q([le,...d]),s(ot?`   (    ${Ve})`:le.isLinkedToProduct?"    ":"   (  )","success")),G(""),a.current&&(a.current.value=""),S(!1)},ue=async Ce=>{const ve=Ce.target.files;if(!ve||ve.length===0)return;const Ve=Array.from(ve).filter(pt=>X5(pt));if(Ve.length===0){s("    ","error");return}S(!0),F({current:0,total:Ve.length,phase:"  ..."});const ot=[];let le=0,Ke=0,nt=0;for(let pt=0;pt<Ve.length;pt++){const Ut=Ve[pt];F({current:pt+1,total:Ve.length,phase:`: ${Ut.name}`});const Ts=Ap(Ut.name)||"";V(Ts)&&nt++;const Rt=await te(Ut);Rt&&(Rt.isLinkedToProduct?le++:Ke++,ot.push(Rt))}Q([...ot,...d]),s(`  ${ot.length}  (${le}  ${Ke} ${nt>0?` ${nt} `:""})`,"success"),F(null),S(!1),r.current&&(r.current.value="")},re=async Ce=>{var Ve;const ve=(Ve=Ce.target.files)==null?void 0:Ve[0];if(ve){if(!ve.name.toLowerCase().endsWith(".zip")){s("   ZIP","error");return}S(!0),F({current:0,total:100,phase:"  ..."});try{const ot=await GF.loadAsync(ve),le=[],Ke=Object.entries(ot.files);let nt=0;for(const[Re,ft]of Ke){if(ft.dir)continue;const Xt=Re.toLowerCase().split(".").pop();if(["jpg","jpeg","png","webp","gif","bmp"].includes(Xt||"")){const As=await ft.async("blob"),we=Re.split("/").pop()||Re;le.push({name:we,data:As})}nt++,F({current:Math.round(nt/Ke.length*30),total:100,phase:` : ${nt}/${Ke.length}`})}if(le.length===0){s("     ","error"),F(null),S(!1);return}const pt=[];let Ut=0,Ts=0,Rt=0;for(let Re=0;Re<le.length;Re++){const{name:ft,data:Xt}=le[Re];F({current:30+Math.round(Re/le.length*70),total:100,phase:`: ${Re+1}/${le.length} - ${ft}`});const As=new File([Xt],ft,{type:Xt.type||"image/jpeg"}),we=Ap(ft)||"";V(we)&&Rt++;const Pt=await te(As);Pt&&(Pt.isLinkedToProduct?Ut++:Ts++,pt.push(Pt))}Q([...pt,...d]),s(`  ${pt.length}   ZIP (${Ut}  ${Ts} ${Rt>0?` ${Rt} `:""})`,"success")}catch(ot){console.error("ZIP processing failed:",ot),s("    ","error")}finally{F(null),S(!1),n.current&&(n.current.value="")}}},J=Ce=>{const ve=d.map(Ve=>Ve.id===Ce?{...Ve,status:"APPROVED",approvedAt:new Date().toISOString(),approvedBy:"admin"}:Ve);Q(ve),s("   ","success")},Ne=Ce=>{const ve=d.map(Ve=>Ve.id===Ce?{...Ve,status:"REJECTED"}:Ve);Q(ve),s("  ","info")},q=Ce=>{if(!confirm("      "))return;const ve=d.map(Ve=>Ve.id===Ce?{...Ve,status:"REJECTED",adminNotes:" - "}:Ve);Q(ve),s("   ","success")},ce=Ce=>{confirm("         !")&&(Q(d.filter(ve=>ve.id!==Ce)),s("   ","success"))},fe=Ce=>{W(Ce),H(Ce.partNumber)},ie=()=>{if(!Y)return;const Ce=ee.trim().toUpperCase(),ve=v.find(le=>{var Ke;return((Ke=le.partNumber)==null?void 0:Ke.toUpperCase())===Ce}),Ve=Ce&&V(Ce)&&Ce!==Y.partNumber.toUpperCase(),ot=d.map(le=>le.id===Y.id?{...le,partNumber:Ce,isLinkedToProduct:!!ve,isAutoMatched:!1,adminNotes:Ve?`   -      ${Ce}`:le.adminNotes}:le);Q(ot),s(ve?`    ${Ce}`:Ce?"    (   )":"   ","success"),W(null)},ne=()=>{Y&&H("")},pe=C.useMemo(()=>d.filter(Ce=>{const ve=O===""||Ce.partNumber.toLowerCase().includes(O.toLowerCase())||Ce.fileName.toLowerCase().includes(O.toLowerCase())||Ce.uploaderName.toLowerCase().includes(O.toLowerCase()),Ve=D==="ALL"||Ce.status===D;return ve&&Ve}),[d,O,D]),Ee=Math.ceil(pe.length/jm),Ie=C.useMemo(()=>{const Ce=(T-1)*jm;return pe.slice(Ce,Ce+jm)},[pe,T]);C.useEffect(()=>{z(1)},[O,D]);const _e=C.useMemo(()=>{if(!E.trim())return[];const Ce=E.toLowerCase();return v.filter(ve=>{var Ve,ot;return((Ve=ve.partNumber)==null?void 0:Ve.toLowerCase().includes(Ce))||((ot=ve.name)==null?void 0:ot.toLowerCase().includes(Ce))}).slice(0,50)},[v,E]),Ge=()=>{const Ce=d.filter(ve=>ve.status==="PENDING");return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(ts,{className:"text-orange-500 animate-spin-slow"}),"   (",Ce.length,")"]}),t.jsx("div",{className:"flex gap-2"})]}),Ce.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white rounded-xl border border-dashed border-slate-300",children:[t.jsx(Mt,{size:48,className:"text-green-500 mb-4"}),t.jsx("h4",{className:"text-lg font-bold text-slate-700",children:"   "}),t.jsx("p",{className:"text-slate-500",children:"   "})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Ce.map(ve=>{const Ve=v.find(ot=>{var le,Ke;return((le=ot.partNumber)==null?void 0:le.toUpperCase())===((Ke=ve.partNumber)==null?void 0:Ke.toUpperCase())});return t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-all",children:[t.jsxs("div",{className:"flex h-32",children:[t.jsx("div",{className:"w-32 h-32 bg-slate-100 flex-shrink-0 cursor-pointer",onClick:()=>I(ve.fileUrl),children:t.jsx("img",{src:ve.thumbnailUrl||ve.fileUrl,alt:ve.fileName,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"})}),t.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:"  "}),t.jsx("p",{className:"font-bold text-slate-800 dir-ltr text-left",title:ve.partNumber,children:ve.partNumber||t.jsx("span",{className:"text-red-500 italic",children:" "})})]}),t.jsx("button",{onClick:()=>fe(ve),className:"p-1 hover:bg-slate-100 rounded text-blue-600",title:"",children:t.jsx(ql,{size:14})})]}),Ve?t.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[10px] text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100 w-fit",children:[t.jsx(Mt,{size:10}),t.jsx("span",{children:" "})]}):t.jsxs("div",{className:"mt-1 flex items-center gap-1 text-[10px] text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded border border-amber-100 w-fit",children:[t.jsx(Cs,{size:10}),t.jsx("span",{children:"  "})]})]}),t.jsxs("div",{className:"text-[10px] text-slate-400",children:[": ",ve.uploaderName||""]})]})]}),t.jsxs("div",{className:"flex border-t border-slate-100 divide-x divide-slate-100 divide-x-reverse",children:[t.jsxs("button",{onClick:()=>J(ve.id),className:"flex-1 py-2 flex items-center justify-center gap-2 text-green-600 hover:bg-green-50 font-medium text-sm transition-colors",children:[t.jsx(es,{size:16})," "]}),t.jsxs("button",{onClick:()=>Ne(ve.id),className:"flex-1 py-2 flex items-center justify-center gap-2 text-red-600 hover:bg-red-50 font-medium text-sm transition-colors",children:[t.jsx(vt,{size:16})," "]})]})]},ve.id)})})]})};C.useEffect(()=>{if(l==="WATERMARK"&&i.current){const Ce=Mme(x,400,300),ve=i.current.getContext("2d");ve&&(i.current.width=400,i.current.height=300,ve.drawImage(Ce,0,0))}},[x,l]);const Ae=()=>t.jsx("div",{className:"flex gap-2 border-b border-slate-200 mb-6",children:[{id:"PRODUCTS",icon:t.jsx(Yt,{size:18}),label:"",count:v.length},{id:"APPROVALS",icon:t.jsx(Mt,{size:18}),label:"",count:(h==null?void 0:h.pendingApproval)||0},{id:"IMAGES",icon:t.jsx(Li,{size:18}),label:" ",count:d.length},{id:"UPLOAD",icon:t.jsx(va,{size:18}),label:" "},{id:"WATERMARK",icon:t.jsx(aa,{size:18}),label:" "},{id:"REPORTS",icon:t.jsx(Dr,{size:18}),label:""}].map(Ce=>t.jsxs("button",{onClick:()=>o(Ce.id),className:`flex items-center gap-2 px-4 py-3 font-bold border-b-2 transition-colors ${l===Ce.id?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[Ce.icon," ",Ce.label,Ce.count!==void 0&&t.jsx("span",{className:"bg-slate-200 text-slate-700 px-2 py-0.5 rounded-full text-xs",children:Ce.count})]},Ce.id))}),Ue=()=>t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(_u,{size:20,className:"text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-purple-600",children:(h==null?void 0:h.totalImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(HS,{size:20,className:"text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-green-600",children:(h==null?void 0:h.productsWithImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:t.jsx(Dm,{size:20,className:"text-amber-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" ( )"}),t.jsx("p",{className:"text-xl font-black text-amber-600",children:(h==null?void 0:h.unmatchedImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-cyan-100 rounded-lg",children:t.jsx(Dr,{size:20,className:"text-cyan-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:""}),t.jsxs("p",{className:"text-xl font-black text-cyan-600",children:[(h==null?void 0:h.coveragePercent)||0,"%"]})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(Ks,{size:20,className:"text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-red-600",children:(h==null?void 0:h.productsWithoutImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm cursor-pointer hover:border-orange-300 transition-colors",onClick:()=>o("APPROVALS"),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:t.jsx(ts,{size:20,className:"text-orange-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-orange-600",children:(h==null?void 0:h.pendingApproval)||0})]})]})})]}),Qe=()=>Ee<=1?null:t.jsxs("div",{className:"flex items-center justify-between mt-6 px-4 py-3 bg-slate-50 rounded-lg",children:[t.jsxs("div",{className:"text-sm text-slate-600",children:[" ",(T-1)*jm+1," - ",Math.min(T*jm,pe.length),"  ",pe.length," "]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>z(Ce=>Math.max(1,Ce-1)),disabled:T===1,className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(hs,{size:18})}),t.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,Ee)},(Ce,ve)=>{let Ve;return Ee<=5||T<=3?Ve=ve+1:T>=Ee-2?Ve=Ee-4+ve:Ve=T-2+ve,t.jsx("button",{onClick:()=>z(Ve),className:`w-8 h-8 rounded-lg text-sm font-bold ${T===Ve?"bg-blue-600 text-white":"hover:bg-slate-100 text-slate-600"}`,children:Ve},Ve)}),Ee>5&&T<Ee-2&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"px-1",children:"..."}),t.jsx("button",{onClick:()=>z(Ee),className:"w-8 h-8 rounded-lg text-sm font-bold hover:bg-slate-100 text-slate-600",children:Ee})]})]}),t.jsx("button",{onClick:()=>z(Ce=>Math.min(Ee,Ce+1)),disabled:T===Ee,className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(Ns,{size:18})})]})]}),_t=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Lt,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",placeholder:"     ...",value:O,onChange:Ce=>_(Ce.target.value),className:"w-full pr-10 pl-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("select",{value:D,onChange:Ce=>L(Ce.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg",children:[t.jsxs("option",{value:"ALL",children:["  (",d.length,")"]}),Object.entries(Y5).map(([Ce,ve])=>t.jsx("option",{value:Ce,children:ve.ar},Ce))]}),t.jsxs("button",{onClick:X,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg flex items-center gap-2",children:[t.jsx(Gt,{size:18})," "]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-3",children:[Ie.map(Ce=>t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow group",children:[t.jsxs("div",{className:"relative aspect-square bg-slate-100",children:[t.jsx("img",{src:Ce.thumbnailUrl||Ce.fileUrl,alt:Ce.partNumber,className:"w-full h-full object-cover",loading:"lazy"}),t.jsx("div",{className:`absolute top-1 left-1 px-1.5 py-0.5 rounded text-[9px] font-bold text-white ${Ce.status==="APPROVED"||Ce.status==="AUTO_MATCHED"?"bg-green-500":Ce.status==="PENDING"?"bg-amber-500":"bg-red-500"}`,children:Y5[Ce.status].ar}),Ce.isLinkedToProduct?t.jsx("div",{className:"absolute top-1 right-1 p-1 bg-blue-500 rounded-full",title:" ",children:t.jsx(HS,{size:10,className:"text-white"})}):t.jsx("div",{className:"absolute top-1 right-1 p-1 bg-amber-500 rounded-full",title:" -  ",children:t.jsx(_u,{size:10,className:"text-white"})}),t.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-1.5",children:[t.jsx("button",{onClick:()=>I(Ce.fileUrl),className:"p-1.5 bg-white rounded-full hover:bg-slate-100",title:"",children:t.jsx(wF,{size:14,className:"text-slate-700"})}),t.jsx("button",{onClick:()=>fe(Ce),className:"p-1.5 bg-blue-500 rounded-full hover:bg-blue-600",title:"",children:t.jsx(ql,{size:14,className:"text-white"})}),Ce.status==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>J(Ce.id),className:"p-1.5 bg-green-500 rounded-full hover:bg-green-600",title:"",children:t.jsx(es,{size:14,className:"text-white"})}),t.jsx("button",{onClick:()=>Ne(Ce.id),className:"p-1.5 bg-red-500 rounded-full hover:bg-red-600",title:"",children:t.jsx(vt,{size:14,className:"text-white"})})]}),t.jsx("button",{onClick:()=>q(Ce.id),className:"p-1.5 bg-slate-700 rounded-full hover:bg-slate-800",title:"",children:t.jsx(At,{size:14,className:"text-white"})})]})]}),t.jsxs("div",{className:"p-2",children:[t.jsx("p",{className:"font-bold text-xs text-slate-800 truncate",children:Ce.partNumber||" "}),t.jsx("p",{className:"text-[10px] text-slate-500 truncate",children:Ce.fileName})]})]},Ce.id)),Ie.length===0&&t.jsxs("div",{className:"col-span-full py-16 text-center text-slate-400",children:[t.jsx(Dm,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"   "})]})]}),Qe()]}),lt=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl border-2 border-blue-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-blue-800 mb-4 flex items-center gap-2",children:[t.jsx($S,{size:24,className:"text-blue-600"}),"    (ZIP)",t.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:" "})]}),t.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"    !           ."}),t.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-xl p-8 text-center hover:border-blue-500 transition-colors cursor-pointer bg-white/50",onClick:()=>{var Ce;return(Ce=n.current)==null?void 0:Ce.click()},children:[k?t.jsxs("div",{className:"space-y-3",children:[t.jsx(ts,{size:40,className:"mx-auto text-blue-600 animate-spin"}),t.jsx("p",{className:"text-lg font-bold text-blue-800",children:k.phase}),t.jsx("div",{className:"w-64 mx-auto bg-blue-200 rounded-full h-3",children:t.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${k.current}%`}})}),t.jsxs("p",{className:"text-sm text-blue-600",children:[k.current,"%"]})]}):t.jsxs(t.Fragment,{children:[t.jsx($S,{size:48,className:"mx-auto text-blue-400 mb-3"}),t.jsx("p",{className:"text-lg font-bold text-blue-800 mb-2",children:"  ZIP    "}),t.jsx("p",{className:"text-sm text-blue-600",children:"  10,000+ "})]}),t.jsx("input",{ref:n,type:"file",accept:".zip",onChange:re,className:"hidden",disabled:w})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(va,{size:20,className:"text-green-600"}),"   "]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{type:"text",placeholder:" ",value:P,onChange:Ce=>G(Ce.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-lg"}),P&&V(P)&&t.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:t.jsx(Cs,{size:18,className:"text-amber-500",title:"    "})})]}),t.jsxs("label",{className:"px-6 py-3 bg-green-600 text-white rounded-lg font-bold cursor-pointer hover:bg-green-700 flex items-center gap-2",children:[t.jsx(va,{size:18}),"  ",t.jsx("input",{ref:a,type:"file",accept:K5.join(","),onChange:Z,className:"hidden",disabled:w})]})]}),P&&V(P)&&t.jsxs("p",{className:"mt-2 text-sm text-amber-600 flex items-center gap-1",children:[t.jsx(Cs,{size:14}),"     ",P," -    "]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Dm,{size:20,className:"text-purple-600"}),"   "]}),t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-purple-500 transition-colors cursor-pointer",onClick:()=>{var Ce;return(Ce=r.current)==null?void 0:Ce.click()},children:[t.jsx(va,{size:40,className:"mx-auto text-slate-400 mb-3"}),t.jsx("p",{className:"text-lg font-bold text-slate-700 mb-2",children:"    "}),t.jsx("p",{className:"text-sm text-slate-500",children:"       "}),t.jsx("input",{ref:r,type:"file",accept:K5.join(","),multiple:!0,onChange:ue,className:"hidden",disabled:w})]})]})]}),Nt=()=>t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 space-y-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(aa,{size:20,className:"text-purple-600"}),"   "]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:x.enabled,onChange:Ce=>p({...x,enabled:Ce.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:"  "})]}),x.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("button",{onClick:()=>p({...x,type:"TEXT"}),className:`flex-1 py-2 rounded-lg font-bold ${x.type==="TEXT"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700"}`,children:" "}),t.jsx("button",{onClick:()=>p({...x,type:"LOGO"}),className:`flex-1 py-2 rounded-lg font-bold ${x.type==="LOGO"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700"}`,children:" "}),t.jsx("button",{onClick:()=>p({...x,type:"BOTH"}),className:`flex-1 py-2 rounded-lg font-bold ${x.type==="BOTH"?"bg-blue-600 text-white":"bg-slate-100 text-slate-700"}`,children:" "})]}),(x.type==="LOGO"||x.type==="BOTH")&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:""}),t.jsxs("div",{className:"flex items-center gap-4",children:[x.logoUrl?t.jsxs("div",{className:"relative w-16 h-16 bg-slate-100 rounded-lg border border-slate-200",children:[t.jsx("img",{src:x.logoUrl,alt:"Logo",className:"w-full h-full object-contain p-1"}),t.jsx("button",{onClick:()=>p({...x,logoUrl:""}),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:t.jsx(vt,{size:12})})]}):t.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-lg border border-dashed border-slate-300 flex items-center justify-center text-slate-400",children:t.jsx(Li,{size:24})}),t.jsxs("label",{className:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg font-bold cursor-pointer hover:bg-slate-200",children:[" ",t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ce=>{var Ve;const ve=(Ve=Ce.target.files)==null?void 0:Ve[0];if(ve){const ot=new FileReader;ot.onload=le=>{var Ke;p({...x,logoUrl:(Ke=le.target)==null?void 0:Ke.result})},ot.readAsDataURL(ve)}}})]})]})]}),(x.type==="TEXT"||x.type==="BOTH")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsx("input",{type:"text",value:x.text,onChange:Ce=>p({...x,text:Ce.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:""}),t.jsx("select",{value:x.position,onChange:Ce=>p({...x,position:Ce.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg",children:Object.entries(Pme).map(([Ce,ve])=>t.jsx("option",{value:Ce,children:ve.ar},Ce))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:[": ",Math.round(x.opacity*100),"%"]}),t.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.1",value:x.opacity,onChange:Ce=>p({...x,opacity:parseFloat(Ce.target.value)}),className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsx("div",{className:"flex gap-2",children:Object.entries(WF).map(([Ce,ve])=>t.jsx("button",{onClick:()=>p({...x,fontSize:Ce}),className:`px-4 py-2 rounded-lg font-bold ${x.fontSize===Ce?"bg-blue-600 text-white":"bg-slate-100 text-slate-700"}`,children:ve.ar},Ce))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsx("input",{type:"color",value:x.textColor,onChange:Ce=>p({...x,textColor:Ce.target.value}),className:"w-full h-10 rounded-lg border border-slate-200 cursor-pointer"})]})]}),t.jsxs("button",{onClick:()=>se(x),className:"w-full py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 flex items-center justify-center gap-2",children:[t.jsx(es,{size:18})," "]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(ns,{size:20,className:"text-cyan-600"})," "]}),t.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:t.jsx("canvas",{ref:i,className:"w-full"})})]})]}),jt=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsxs("div",{className:"relative w-40 h-40",children:[t.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[t.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e2e8f0",strokeWidth:"8"}),t.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#22c55e",strokeWidth:"8",strokeDasharray:`${((h==null?void 0:h.coveragePercent)||0)*2.51} 251.2`,strokeLinecap:"round"})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("span",{className:"text-3xl font-black text-slate-800",children:[(h==null?void 0:h.coveragePercent)||0,"%"]})})]}),t.jsxs("div",{className:"space-y-4 flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[t.jsx("span",{className:"text-green-700 font-bold",children:" "}),t.jsx("span",{className:"text-2xl font-black text-green-600",children:(h==null?void 0:h.productsWithImages)||0})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsx("span",{className:"text-red-700 font-bold",children:"  "}),t.jsx("span",{className:"text-2xl font-black text-red-600",children:(h==null?void 0:h.productsWithoutImages)||0})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[t.jsx("span",{className:"text-amber-700 font-bold",children:"  "}),t.jsx("span",{className:"text-2xl font-black text-amber-600",children:(h==null?void 0:h.unmatchedImages)||0})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-blue-600",children:(h==null?void 0:h.imagesByUploader.admin)||0}),t.jsx("p",{className:"text-sm font-bold text-blue-700",children:""})]}),t.jsxs("div",{className:"p-4 bg-green-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-green-600",children:(h==null?void 0:h.imagesByUploader.supplierLocal)||0}),t.jsx("p",{className:"text-sm font-bold text-green-700",children:" "})]}),t.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-purple-600",children:(h==null?void 0:h.imagesByUploader.supplierInternational)||0}),t.jsx("p",{className:"text-sm font-bold text-purple-700",children:" "})]}),t.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-amber-600",children:(h==null?void 0:h.imagesByUploader.marketer)||0}),t.jsx("p",{className:"text-sm font-bold text-amber-700",children:""})]})]})]})]}),Ft=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Lt,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),t.jsx("input",{type:"text",value:E,onChange:Ce=>A(Ce.target.value),placeholder:"    ...",className:"w-full pr-10 pl-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-lg"})]})})}),E.trim()?_e.length>0?t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:" "}),t.jsx("th",{className:"p-4"})]})}),t.jsx("tbody",{children:_e.map(Ce=>{var Ve;const ve=M.has((Ve=Ce.partNumber)==null?void 0:Ve.toUpperCase());return t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"font-mono font-bold text-slate-800",children:Ce.partNumber})}),t.jsx("td",{className:"p-4 text-slate-600",children:Ce.name}),t.jsx("td",{className:"p-4 text-slate-500",children:Ce.brand||"-"}),t.jsx("td",{className:"p-4",children:ve?t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-emerald-50 text-emerald-700 rounded-full text-sm font-bold",children:[t.jsx(Mt,{size:14}),"  "]}):t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-amber-50 text-amber-700 rounded-full text-sm font-bold",children:[t.jsx(Ks,{size:14}),"  "]})}),t.jsx("td",{className:"p-4",children:t.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(va,{size:16}),ve?" ":" ",t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async ot=>{var Ke;const le=(Ke=ot.target.files)==null?void 0:Ke[0];if(le){const nt=await te(le,Ce.partNumber);nt&&(Q([...d,{...nt,isLinkedToProduct:!0}]),s(`    ${Ce.partNumber}`,"success"),A(""))}}})]})})]},Ce.id)})})]})}):t.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[t.jsx(Lt,{size:48,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-500 font-bold",children:"     "}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"    "})]}):t.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-xl border border-dashed border-blue-200",children:[t.jsx(Yt,{size:48,className:"mx-auto text-blue-300 mb-4"}),t.jsx("p",{className:"text-blue-600 font-bold",children:"     "}),t.jsxs("p",{className:"text-sm text-blue-400 mt-1",children:[" : ",v.length," "]})]})]});return y?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(ts,{size:48,className:"animate-spin text-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(Dm,{size:28,className:"text-blue-600"}),"  ",t.jsxs("span",{className:"bg-blue-100 text-blue-700 text-sm px-3 py-1 rounded-full",children:[d.length," "]})]})}),Ue(),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[Ae(),l==="PRODUCTS"&&Ft(),l==="APPROVALS"&&Ge(),l==="IMAGES"&&_t(),l==="UPLOAD"&&lt(),l==="WATERMARK"&&Nt(),l==="REPORTS"&&jt()]}),B&&t.jsx(ds,{onClose:()=>I(null),title:" ",children:t.jsx("div",{className:"p-4",children:t.jsx("img",{src:B,alt:"Preview",className:"max-w-full max-h-[70vh] mx-auto rounded-lg"})})}),Y&&t.jsx(ds,{onClose:()=>W(null),title:"  ",children:t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx("img",{src:Y.thumbnailUrl||Y.fileUrl,alt:Y.partNumber,className:"w-24 h-24 object-cover rounded-lg border"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800 truncate",children:Y.fileName}),t.jsx("p",{className:"text-sm text-slate-500 mt-2",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:Dme(Y.compressedSize)})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:ee,onChange:Ce=>H(Ce.target.value),placeholder:"      ",className:"w-full px-4 py-3 border border-slate-200 rounded-lg"}),ee&&V(ee)&&ee.toUpperCase()!==Y.partNumber.toUpperCase()&&t.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:t.jsx(Cs,{size:18,className:"text-amber-500"})})]}),ee&&V(ee)&&ee.toUpperCase()!==Y.partNumber.toUpperCase()&&t.jsxs("p",{className:"mt-1 text-sm text-amber-600 flex items-center gap-1",children:[t.jsx(Cs,{size:14}),"     "]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsxs("button",{onClick:ie,className:"flex-1 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 flex items-center justify-center gap-2",children:[t.jsx(es,{size:18})," "]}),t.jsxs("button",{onClick:ne,className:"px-4 py-3 border border-slate-200 rounded-lg font-bold hover:bg-slate-50 flex items-center gap-2",children:[t.jsx(ene,{size:18}),"  "]}),t.jsxs("button",{onClick:()=>{ce(Y.id),W(null)},className:"px-4 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 flex items-center gap-2",children:[t.jsx(At,{size:18}),"  "]})]})]})})]})},YF=C.createContext(null);function Fme({children:e}){const[s,a]=C.useState({orders:0,accounts:0,quotes:0,imports:0,missing:0,orderShortages:0}),r=C.useCallback(async()=>{const h=he.getNewItemCounts(),f=await he.getOrderShortagesStats();a({...h,orderShortages:f.new})},[]),n=C.useCallback(()=>{he.markOrdersAsSeen(),a(h=>({...h,orders:0}))},[]),i=C.useCallback(()=>{he.markAccountRequestsAsSeen(),a(h=>({...h,accounts:0}))},[]),l=C.useCallback(()=>{he.markQuoteRequestsAsSeen(),a(h=>({...h,quotes:0}))},[]),o=C.useCallback(()=>{he.markImportRequestsAsSeen(),a(h=>({...h,imports:0}))},[]),d=C.useCallback(()=>{he.markMissingRequestsAsSeen(),a(h=>({...h,missing:0}))},[]),u=C.useCallback(async()=>{await he.markOrderShortagesAsSeen(),a(h=>({...h,orderShortages:0}))},[]);return C.useEffect(()=>{r();const h=setInterval(r,3e4);return()=>clearInterval(h)},[r]),t.jsx(YF.Provider,{value:{badges:s,refreshBadges:r,markOrdersAsSeen:n,markAccountsAsSeen:i,markQuotesAsSeen:l,markImportsAsSeen:o,markMissingAsSeen:d,markOrderShortagesAsSeen:u},children:e})}function Ume(){const e=C.useContext(YF);if(!e)throw new Error("useAdminBadges must be used within an AdminBadgesProvider");return e}function XF(e){var s,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(s=0;s<n;s++)e[s]&&(a=XF(e[s]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Is(){for(var e,s,a=0,r="",n=arguments.length;a<n;a++)(e=arguments[a])&&(s=XF(e))&&(r&&(r+=" "),r+=s);return r}var E1,Z5;function Nn(){if(Z5)return E1;Z5=1;var e=Array.isArray;return E1=e,E1}var C1,eI;function ZF(){if(eI)return C1;eI=1;var e=typeof Oo=="object"&&Oo&&Oo.Object===Object&&Oo;return C1=e,C1}var T1,tI;function ol(){if(tI)return T1;tI=1;var e=ZF(),s=typeof self=="object"&&self&&self.Object===Object&&self,a=e||s||Function("return this")();return T1=a,T1}var _1,sI;function gh(){if(sI)return _1;sI=1;var e=ol(),s=e.Symbol;return _1=s,_1}var k1,aI;function zme(){if(aI)return k1;aI=1;var e=gh(),s=Object.prototype,a=s.hasOwnProperty,r=s.toString,n=e?e.toStringTag:void 0;function i(l){var o=a.call(l,n),d=l[n];try{l[n]=void 0;var u=!0}catch{}var h=r.call(l);return u&&(o?l[n]=d:delete l[n]),h}return k1=i,k1}var O1,rI;function Bme(){if(rI)return O1;rI=1;var e=Object.prototype,s=e.toString;function a(r){return s.call(r)}return O1=a,O1}var I1,nI;function Yl(){if(nI)return I1;nI=1;var e=gh(),s=zme(),a=Bme(),r="[object Null]",n="[object Undefined]",i=e?e.toStringTag:void 0;function l(o){return o==null?o===void 0?n:r:i&&i in Object(o)?s(o):a(o)}return I1=l,I1}var R1,iI;function Xl(){if(iI)return R1;iI=1;function e(s){return s!=null&&typeof s=="object"}return R1=e,R1}var P1,lI;function g0(){if(lI)return P1;lI=1;var e=Yl(),s=Xl(),a="[object Symbol]";function r(n){return typeof n=="symbol"||s(n)&&e(n)==a}return P1=r,P1}var D1,oI;function pE(){if(oI)return D1;oI=1;var e=Nn(),s=g0(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function n(i,l){if(e(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||s(i)?!0:r.test(i)||!a.test(i)||l!=null&&i in Object(l)}return D1=n,D1}var M1,cI;function rc(){if(cI)return M1;cI=1;function e(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}return M1=e,M1}var L1,dI;function gE(){if(dI)return L1;dI=1;var e=Yl(),s=rc(),a="[object AsyncFunction]",r="[object Function]",n="[object GeneratorFunction]",i="[object Proxy]";function l(o){if(!s(o))return!1;var d=e(o);return d==r||d==n||d==a||d==i}return L1=l,L1}var F1,uI;function $me(){if(uI)return F1;uI=1;var e=ol(),s=e["__core-js_shared__"];return F1=s,F1}var U1,mI;function qme(){if(mI)return U1;mI=1;var e=$me(),s=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function a(r){return!!s&&s in r}return U1=a,U1}var z1,fI;function e7(){if(fI)return z1;fI=1;var e=Function.prototype,s=e.toString;function a(r){if(r!=null){try{return s.call(r)}catch{}try{return r+""}catch{}}return""}return z1=a,z1}var B1,hI;function Hme(){if(hI)return B1;hI=1;var e=gE(),s=qme(),a=rc(),r=e7(),n=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,d=l.toString,u=o.hasOwnProperty,h=RegExp("^"+d.call(u).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(x){if(!a(x)||s(x))return!1;var p=e(x)?h:i;return p.test(r(x))}return B1=f,B1}var $1,xI;function Vme(){if(xI)return $1;xI=1;function e(s,a){return s==null?void 0:s[a]}return $1=e,$1}var q1,pI;function vd(){if(pI)return q1;pI=1;var e=Hme(),s=Vme();function a(r,n){var i=s(r,n);return e(i)?i:void 0}return q1=a,q1}var H1,gI;function nb(){if(gI)return H1;gI=1;var e=vd(),s=e(Object,"create");return H1=s,H1}var V1,bI;function Gme(){if(bI)return V1;bI=1;var e=nb();function s(){this.__data__=e?e(null):{},this.size=0}return V1=s,V1}var G1,vI;function Wme(){if(vI)return G1;vI=1;function e(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}return G1=e,G1}var W1,yI;function Qme(){if(yI)return W1;yI=1;var e=nb(),s="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function n(i){var l=this.__data__;if(e){var o=l[i];return o===s?void 0:o}return r.call(l,i)?l[i]:void 0}return W1=n,W1}var Q1,NI;function Kme(){if(NI)return Q1;NI=1;var e=nb(),s=Object.prototype,a=s.hasOwnProperty;function r(n){var i=this.__data__;return e?i[n]!==void 0:a.call(i,n)}return Q1=r,Q1}var K1,jI;function Jme(){if(jI)return K1;jI=1;var e=nb(),s="__lodash_hash_undefined__";function a(r,n){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&n===void 0?s:n,this}return K1=a,K1}var J1,wI;function Yme(){if(wI)return J1;wI=1;var e=Gme(),s=Wme(),a=Qme(),r=Kme(),n=Jme();function i(l){var o=-1,d=l==null?0:l.length;for(this.clear();++o<d;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=r,i.prototype.set=n,J1=i,J1}var Y1,SI;function Xme(){if(SI)return Y1;SI=1;function e(){this.__data__=[],this.size=0}return Y1=e,Y1}var X1,AI;function bE(){if(AI)return X1;AI=1;function e(s,a){return s===a||s!==s&&a!==a}return X1=e,X1}var Z1,EI;function ib(){if(EI)return Z1;EI=1;var e=bE();function s(a,r){for(var n=a.length;n--;)if(e(a[n][0],r))return n;return-1}return Z1=s,Z1}var eN,CI;function Zme(){if(CI)return eN;CI=1;var e=ib(),s=Array.prototype,a=s.splice;function r(n){var i=this.__data__,l=e(i,n);if(l<0)return!1;var o=i.length-1;return l==o?i.pop():a.call(i,l,1),--this.size,!0}return eN=r,eN}var tN,TI;function efe(){if(TI)return tN;TI=1;var e=ib();function s(a){var r=this.__data__,n=e(r,a);return n<0?void 0:r[n][1]}return tN=s,tN}var sN,_I;function tfe(){if(_I)return sN;_I=1;var e=ib();function s(a){return e(this.__data__,a)>-1}return sN=s,sN}var aN,kI;function sfe(){if(kI)return aN;kI=1;var e=ib();function s(a,r){var n=this.__data__,i=e(n,a);return i<0?(++this.size,n.push([a,r])):n[i][1]=r,this}return aN=s,aN}var rN,OI;function lb(){if(OI)return rN;OI=1;var e=Xme(),s=Zme(),a=efe(),r=tfe(),n=sfe();function i(l){var o=-1,d=l==null?0:l.length;for(this.clear();++o<d;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=r,i.prototype.set=n,rN=i,rN}var nN,II;function vE(){if(II)return nN;II=1;var e=vd(),s=ol(),a=e(s,"Map");return nN=a,nN}var iN,RI;function afe(){if(RI)return iN;RI=1;var e=Yme(),s=lb(),a=vE();function r(){this.size=0,this.__data__={hash:new e,map:new(a||s),string:new e}}return iN=r,iN}var lN,PI;function rfe(){if(PI)return lN;PI=1;function e(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}return lN=e,lN}var oN,DI;function ob(){if(DI)return oN;DI=1;var e=rfe();function s(a,r){var n=a.__data__;return e(r)?n[typeof r=="string"?"string":"hash"]:n.map}return oN=s,oN}var cN,MI;function nfe(){if(MI)return cN;MI=1;var e=ob();function s(a){var r=e(this,a).delete(a);return this.size-=r?1:0,r}return cN=s,cN}var dN,LI;function ife(){if(LI)return dN;LI=1;var e=ob();function s(a){return e(this,a).get(a)}return dN=s,dN}var uN,FI;function lfe(){if(FI)return uN;FI=1;var e=ob();function s(a){return e(this,a).has(a)}return uN=s,uN}var mN,UI;function ofe(){if(UI)return mN;UI=1;var e=ob();function s(a,r){var n=e(this,a),i=n.size;return n.set(a,r),this.size+=n.size==i?0:1,this}return mN=s,mN}var fN,zI;function yE(){if(zI)return fN;zI=1;var e=afe(),s=nfe(),a=ife(),r=lfe(),n=ofe();function i(l){var o=-1,d=l==null?0:l.length;for(this.clear();++o<d;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=r,i.prototype.set=n,fN=i,fN}var hN,BI;function t7(){if(BI)return hN;BI=1;var e=yE(),s="Expected a function";function a(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new TypeError(s);var i=function(){var l=arguments,o=n?n.apply(this,l):l[0],d=i.cache;if(d.has(o))return d.get(o);var u=r.apply(this,l);return i.cache=d.set(o,u)||d,u};return i.cache=new(a.Cache||e),i}return a.Cache=e,hN=a,hN}var xN,$I;function cfe(){if($I)return xN;$I=1;var e=t7(),s=500;function a(r){var n=e(r,function(l){return i.size===s&&i.clear(),l}),i=n.cache;return n}return xN=a,xN}var pN,qI;function dfe(){if(qI)return pN;qI=1;var e=cfe(),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=e(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(s,function(l,o,d,u){i.push(d?u.replace(a,"$1"):o||l)}),i});return pN=r,pN}var gN,HI;function NE(){if(HI)return gN;HI=1;function e(s,a){for(var r=-1,n=s==null?0:s.length,i=Array(n);++r<n;)i[r]=a(s[r],r,s);return i}return gN=e,gN}var bN,VI;function ufe(){if(VI)return bN;VI=1;var e=gh(),s=NE(),a=Nn(),r=g0(),n=e?e.prototype:void 0,i=n?n.toString:void 0;function l(o){if(typeof o=="string")return o;if(a(o))return s(o,l)+"";if(r(o))return i?i.call(o):"";var d=o+"";return d=="0"&&1/o==-1/0?"-0":d}return bN=l,bN}var vN,GI;function s7(){if(GI)return vN;GI=1;var e=ufe();function s(a){return a==null?"":e(a)}return vN=s,vN}var yN,WI;function a7(){if(WI)return yN;WI=1;var e=Nn(),s=pE(),a=dfe(),r=s7();function n(i,l){return e(i)?i:s(i,l)?[i]:a(r(i))}return yN=n,yN}var NN,QI;function cb(){if(QI)return NN;QI=1;var e=g0();function s(a){if(typeof a=="string"||e(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return NN=s,NN}var jN,KI;function jE(){if(KI)return jN;KI=1;var e=a7(),s=cb();function a(r,n){n=e(n,r);for(var i=0,l=n.length;r!=null&&i<l;)r=r[s(n[i++])];return i&&i==l?r:void 0}return jN=a,jN}var wN,JI;function r7(){if(JI)return wN;JI=1;var e=jE();function s(a,r,n){var i=a==null?void 0:e(a,r);return i===void 0?n:i}return wN=s,wN}var mfe=r7();const fi=ra(mfe);var SN,YI;function ffe(){if(YI)return SN;YI=1;function e(s){return s==null}return SN=e,SN}var hfe=ffe();const Ss=ra(hfe);var AN,XI;function xfe(){if(XI)return AN;XI=1;var e=Yl(),s=Nn(),a=Xl(),r="[object String]";function n(i){return typeof i=="string"||!s(i)&&a(i)&&e(i)==r}return AN=n,AN}var pfe=xfe();const od=ra(pfe);var gfe=gE();const cs=ra(gfe);var bfe=rc();const b0=ra(bfe);var EN={exports:{}},Ws={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZI;function vfe(){if(ZI)return Ws;ZI=1;var e=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function b(y){if(typeof y=="object"&&y!==null){var j=y.$$typeof;switch(j){case e:switch(y=y.type,y){case a:case n:case r:case u:case h:return y;default:switch(y=y&&y.$$typeof,y){case o:case l:case d:case x:case f:case i:return y;default:return j}}case s:return j}}}return Ws.ContextConsumer=l,Ws.ContextProvider=i,Ws.Element=e,Ws.ForwardRef=d,Ws.Fragment=a,Ws.Lazy=x,Ws.Memo=f,Ws.Portal=s,Ws.Profiler=n,Ws.StrictMode=r,Ws.Suspense=u,Ws.SuspenseList=h,Ws.isAsyncMode=function(){return!1},Ws.isConcurrentMode=function(){return!1},Ws.isContextConsumer=function(y){return b(y)===l},Ws.isContextProvider=function(y){return b(y)===i},Ws.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Ws.isForwardRef=function(y){return b(y)===d},Ws.isFragment=function(y){return b(y)===a},Ws.isLazy=function(y){return b(y)===x},Ws.isMemo=function(y){return b(y)===f},Ws.isPortal=function(y){return b(y)===s},Ws.isProfiler=function(y){return b(y)===n},Ws.isStrictMode=function(y){return b(y)===r},Ws.isSuspense=function(y){return b(y)===u},Ws.isSuspenseList=function(y){return b(y)===h},Ws.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===a||y===n||y===r||y===u||y===h||y===p||typeof y=="object"&&y!==null&&(y.$$typeof===x||y.$$typeof===f||y.$$typeof===i||y.$$typeof===l||y.$$typeof===d||y.$$typeof===v||y.getModuleId!==void 0)},Ws.typeOf=b,Ws}var eR;function yfe(){return eR||(eR=1,EN.exports=vfe()),EN.exports}var Nfe=yfe(),CN,tR;function n7(){if(tR)return CN;tR=1;var e=Yl(),s=Xl(),a="[object Number]";function r(n){return typeof n=="number"||s(n)&&e(n)==a}return CN=r,CN}var TN,sR;function jfe(){if(sR)return TN;sR=1;var e=n7();function s(a){return e(a)&&a!=+a}return TN=s,TN}var wfe=jfe();const v0=ra(wfe);var Sfe=n7();const Afe=ra(Sfe);var Ii=function(s){return s===0?0:s>0?1:-1},Mc=function(s){return od(s)&&s.indexOf("%")===s.length-1},dt=function(s){return Afe(s)&&!v0(s)},Efe=function(s){return Ss(s)},ur=function(s){return dt(s)||od(s)},Cfe=0,bh=function(s){var a=++Cfe;return"".concat(s||"").concat(a)},cd=function(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!dt(s)&&!od(s))return r;var i;if(Mc(s)){var l=s.indexOf("%");i=a*parseFloat(s.slice(0,l))/100}else i=+s;return v0(i)&&(i=r),n&&i>a&&(i=a),i},ko=function(s){if(!s)return null;var a=Object.keys(s);return a&&a.length?s[a[0]]:null},Tfe=function(s){if(!Array.isArray(s))return!1;for(var a=s.length,r={},n=0;n<a;n++)if(!r[s[n]])r[s[n]]=!0;else return!0;return!1},oi=function(s,a){return dt(s)&&dt(a)?function(r){return s+r*(a-s)}:function(){return a}};function Kp(e,s,a){return!e||!e.length?null:e.find(function(r){return r&&(typeof s=="function"?s(r):fi(r,s))===a})}var _fe=function(s,a){return dt(s)&&dt(a)?s-a:od(s)&&od(a)?s.localeCompare(a):s instanceof Date&&a instanceof Date?s.getTime()-a.getTime():String(s).localeCompare(String(a))};function Ou(e,s){for(var a in e)if({}.hasOwnProperty.call(e,a)&&(!{}.hasOwnProperty.call(s,a)||e[a]!==s[a]))return!1;for(var r in s)if({}.hasOwnProperty.call(s,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function t2(e){"@babel/helpers - typeof";return t2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t2(e)}var kfe=["viewBox","children"],Ofe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],aR=["points","pathLength"],_N={svg:kfe,polygon:aR,polyline:aR},wE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Jp=function(s,a){if(!s||typeof s=="function"||typeof s=="boolean")return null;var r=s;if(C.isValidElement(s)&&(r=s.props),!b0(r))return null;var n={};return Object.keys(r).forEach(function(i){wE.includes(i)&&(n[i]=a||function(l){return r[i](r,l)})}),n},Ife=function(s,a,r){return function(n){return s(a,r,n),null}},Yp=function(s,a,r){if(!b0(s)||t2(s)!=="object")return null;var n=null;return Object.keys(s).forEach(function(i){var l=s[i];wE.includes(i)&&typeof l=="function"&&(n||(n={}),n[i]=Ife(l,a,r))}),n},Rfe=["children"],Pfe=["children"];function rR(e,s){if(e==null)return{};var a=Dfe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dfe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function s2(e){"@babel/helpers - typeof";return s2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},s2(e)}var nR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ul=function(s){return typeof s=="string"?s:s?s.displayName||s.name||"Component":""},iR=null,kN=null,SE=function e(s){if(s===iR&&Array.isArray(kN))return kN;var a=[];return C.Children.forEach(s,function(r){Ss(r)||(Nfe.isFragment(r)?a=a.concat(e(r.props.children)):a.push(r))}),kN=a,iR=s,a};function Di(e,s){var a=[],r=[];return Array.isArray(s)?r=s.map(function(n){return Ul(n)}):r=[Ul(s)],SE(e).forEach(function(n){var i=fi(n,"type.displayName")||fi(n,"type.name");r.indexOf(i)!==-1&&a.push(n)}),a}function On(e,s){var a=Di(e,s);return a&&a[0]}var lR=function(s){if(!s||!s.props)return!1;var a=s.props,r=a.width,n=a.height;return!(!dt(r)||r<=0||!dt(n)||n<=0)},Mfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Lfe=function(s){return s&&s.type&&od(s.type)&&Mfe.indexOf(s.type)>=0},Ffe=function(s){return s&&s2(s)==="object"&&"clipDot"in s},Ufe=function(s,a,r,n){var i,l=(i=_N==null?void 0:_N[n])!==null&&i!==void 0?i:[];return a.startsWith("data-")||!cs(s)&&(n&&l.includes(a)||Ofe.includes(a))||r&&wE.includes(a)},ys=function(s,a,r){if(!s||typeof s=="function"||typeof s=="boolean")return null;var n=s;if(C.isValidElement(s)&&(n=s.props),!b0(n))return null;var i={};return Object.keys(n).forEach(function(l){var o;Ufe((o=n)===null||o===void 0?void 0:o[l],l,a,r)&&(i[l]=n[l])}),i},a2=function e(s,a){if(s===a)return!0;var r=C.Children.count(s);if(r!==C.Children.count(a))return!1;if(r===0)return!0;if(r===1)return oR(Array.isArray(s)?s[0]:s,Array.isArray(a)?a[0]:a);for(var n=0;n<r;n++){var i=s[n],l=a[n];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!oR(i,l))return!1}return!0},oR=function(s,a){if(Ss(s)&&Ss(a))return!0;if(!Ss(s)&&!Ss(a)){var r=s.props||{},n=r.children,i=rR(r,Rfe),l=a.props||{},o=l.children,d=rR(l,Pfe);return n&&o?Ou(i,d)&&a2(n,o):!n&&!o?Ou(i,d):!1}return!1},cR=function(s,a){var r=[],n={};return SE(s).forEach(function(i,l){if(Lfe(i))r.push(i);else if(i){var o=Ul(i.type),d=a[o]||{},u=d.handler,h=d.once;if(u&&(!h||!n[o])){var f=u(i,o,l);r.push(f),n[o]=!0}}}),r},zfe=function(s){var a=s&&s.type;return a&&nR[a]?nR[a]:null},Bfe=function(s,a){return SE(a).indexOf(s)},$fe=["children","width","height","viewBox","className","style","title","desc"];function r2(){return r2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},r2.apply(this,arguments)}function qfe(e,s){if(e==null)return{};var a=Hfe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hfe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function n2(e){var s=e.children,a=e.width,r=e.height,n=e.viewBox,i=e.className,l=e.style,o=e.title,d=e.desc,u=qfe(e,$fe),h=n||{width:a,height:r,x:0,y:0},f=Is("recharts-surface",i);return ke.createElement("svg",r2({},ys(u,!0,"svg"),{className:f,width:a,height:r,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),ke.createElement("title",null,o),ke.createElement("desc",null,d),s)}var Vfe=["children","className"];function i2(){return i2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},i2.apply(this,arguments)}function Gfe(e,s){if(e==null)return{};var a=Wfe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Wfe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var _a=ke.forwardRef(function(e,s){var a=e.children,r=e.className,n=Gfe(e,Vfe),i=Is("recharts-layer",r);return ke.createElement("g",i2({className:i},ys(n,!0),{ref:s}),a)}),zl=function(s,a){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]},ON,dR;function Qfe(){if(dR)return ON;dR=1;function e(s,a,r){var n=-1,i=s.length;a<0&&(a=-a>i?0:i+a),r=r>i?i:r,r<0&&(r+=i),i=a>r?0:r-a>>>0,a>>>=0;for(var l=Array(i);++n<i;)l[n]=s[n+a];return l}return ON=e,ON}var IN,uR;function Kfe(){if(uR)return IN;uR=1;var e=Qfe();function s(a,r,n){var i=a.length;return n=n===void 0?i:n,!r&&n>=i?a:e(a,r,n)}return IN=s,IN}var RN,mR;function i7(){if(mR)return RN;mR=1;var e="\\ud800-\\udfff",s="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",n=s+a+r,i="\\ufe0e\\ufe0f",l="\\u200d",o=RegExp("["+l+e+n+i+"]");function d(u){return o.test(u)}return RN=d,RN}var PN,fR;function Jfe(){if(fR)return PN;fR=1;function e(s){return s.split("")}return PN=e,PN}var DN,hR;function Yfe(){if(hR)return DN;hR=1;var e="\\ud800-\\udfff",s="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",n=s+a+r,i="\\ufe0e\\ufe0f",l="["+e+"]",o="["+n+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+d+")",h="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",v=u+"?",b="["+i+"]?",y="(?:"+p+"(?:"+[h,f,x].join("|")+")"+b+v+")*",j=b+v+y,w="(?:"+[h+o+"?",o,f,x,l].join("|")+")",S=RegExp(d+"(?="+d+")|"+w+j,"g");function O(_){return _.match(S)||[]}return DN=O,DN}var MN,xR;function Xfe(){if(xR)return MN;xR=1;var e=Jfe(),s=i7(),a=Yfe();function r(n){return s(n)?a(n):e(n)}return MN=r,MN}var LN,pR;function Zfe(){if(pR)return LN;pR=1;var e=Kfe(),s=i7(),a=Xfe(),r=s7();function n(i){return function(l){l=r(l);var o=s(l)?a(l):void 0,d=o?o[0]:l.charAt(0),u=o?e(o,1).join(""):l.slice(1);return d[i]()+u}}return LN=n,LN}var FN,gR;function ehe(){if(gR)return FN;gR=1;var e=Zfe(),s=e("toUpperCase");return FN=s,FN}var the=ehe();const db=ra(the);function ha(e){return function(){return e}}const l7=Math.cos,Xp=Math.sin,Fi=Math.sqrt,Zp=Math.PI,ub=2*Zp,l2=Math.PI,o2=2*l2,Ic=1e-6,she=o2-Ic;function o7(e){this._+=e[0];for(let s=1,a=e.length;s<a;++s)this._+=arguments[s]+e[s]}function ahe(e){let s=Math.floor(e);if(!(s>=0))throw new Error(`invalid digits: ${e}`);if(s>15)return o7;const a=10**s;return function(r){this._+=r[0];for(let n=1,i=r.length;n<i;++n)this._+=Math.round(arguments[n]*a)/a+r[n]}}class rhe{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?o7:ahe(s)}moveTo(s,a){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,a){this._append`L${this._x1=+s},${this._y1=+a}`}quadraticCurveTo(s,a,r,n){this._append`Q${+s},${+a},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(s,a,r,n,i,l){this._append`C${+s},${+a},${+r},${+n},${this._x1=+i},${this._y1=+l}`}arcTo(s,a,r,n,i){if(s=+s,a=+a,r=+r,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,d=r-s,u=n-a,h=l-s,f=o-a,x=h*h+f*f;if(this._x1===null)this._append`M${this._x1=s},${this._y1=a}`;else if(x>Ic)if(!(Math.abs(f*d-u*h)>Ic)||!i)this._append`L${this._x1=s},${this._y1=a}`;else{let p=r-l,v=n-o,b=d*d+u*u,y=p*p+v*v,j=Math.sqrt(b),w=Math.sqrt(x),S=i*Math.tan((l2-Math.acos((b+x-y)/(2*j*w)))/2),O=S/w,_=S/j;Math.abs(O-1)>Ic&&this._append`L${s+O*h},${a+O*f}`,this._append`A${i},${i},0,0,${+(f*p>h*v)},${this._x1=s+_*d},${this._y1=a+_*u}`}}arc(s,a,r,n,i,l){if(s=+s,a=+a,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(n),d=r*Math.sin(n),u=s+o,h=a+d,f=1^l,x=l?n-i:i-n;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Ic||Math.abs(this._y1-h)>Ic)&&this._append`L${u},${h}`,r&&(x<0&&(x=x%o2+o2),x>she?this._append`A${r},${r},0,1,${f},${s-o},${a-d}A${r},${r},0,1,${f},${this._x1=u},${this._y1=h}`:x>Ic&&this._append`A${r},${r},0,${+(x>=l2)},${f},${this._x1=s+r*Math.cos(i)},${this._y1=a+r*Math.sin(i)}`)}rect(s,a,r,n){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function AE(e){let s=3;return e.digits=function(a){if(!arguments.length)return s;if(a==null)s=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);s=r}return e},()=>new rhe(s)}function EE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function c7(e){this._context=e}c7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;default:this._context.lineTo(e,s);break}}};function mb(e){return new c7(e)}function d7(e){return e[0]}function u7(e){return e[1]}function m7(e,s){var a=ha(!0),r=null,n=mb,i=null,l=AE(o);e=typeof e=="function"?e:e===void 0?d7:ha(e),s=typeof s=="function"?s:s===void 0?u7:ha(s);function o(d){var u,h=(d=EE(d)).length,f,x=!1,p;for(r==null&&(i=n(p=l())),u=0;u<=h;++u)!(u<h&&a(f=d[u],u,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+e(f,u,d),+s(f,u,d));if(p)return i=null,p+""||null}return o.x=function(d){return arguments.length?(e=typeof d=="function"?d:ha(+d),o):e},o.y=function(d){return arguments.length?(s=typeof d=="function"?d:ha(+d),o):s},o.defined=function(d){return arguments.length?(a=typeof d=="function"?d:ha(!!d),o):a},o.curve=function(d){return arguments.length?(n=d,r!=null&&(i=n(r)),o):n},o.context=function(d){return arguments.length?(d==null?r=i=null:i=n(r=d),o):r},o}function ap(e,s,a){var r=null,n=ha(!0),i=null,l=mb,o=null,d=AE(u);e=typeof e=="function"?e:e===void 0?d7:ha(+e),s=typeof s=="function"?s:ha(s===void 0?0:+s),a=typeof a=="function"?a:a===void 0?u7:ha(+a);function u(f){var x,p,v,b=(f=EE(f)).length,y,j=!1,w,S=new Array(b),O=new Array(b);for(i==null&&(o=l(w=d())),x=0;x<=b;++x){if(!(x<b&&n(y=f[x],x,f))===j)if(j=!j)p=x,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=x-1;v>=p;--v)o.point(S[v],O[v]);o.lineEnd(),o.areaEnd()}j&&(S[x]=+e(y,x,f),O[x]=+s(y,x,f),o.point(r?+r(y,x,f):S[x],a?+a(y,x,f):O[x]))}if(w)return o=null,w+""||null}function h(){return m7().defined(n).curve(l).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ha(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ha(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ha(+f),u):r},u.y=function(f){return arguments.length?(s=typeof f=="function"?f:ha(+f),a=null,u):s},u.y0=function(f){return arguments.length?(s=typeof f=="function"?f:ha(+f),u):s},u.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:ha(+f),u):a},u.lineX0=u.lineY0=function(){return h().x(e).y(s)},u.lineY1=function(){return h().x(e).y(a)},u.lineX1=function(){return h().x(r).y(s)},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:ha(!!f),u):n},u.curve=function(f){return arguments.length?(l=f,i!=null&&(o=l(i)),u):l},u.context=function(f){return arguments.length?(f==null?i=o=null:o=l(i=f),u):i},u}class f7{constructor(s,a){this._context=s,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,a){switch(s=+s,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,a):this._context.moveTo(s,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,a,s,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,s,this._y0,s,a);break}}this._x0=s,this._y0=a}}function nhe(e){return new f7(e,!0)}function ihe(e){return new f7(e,!1)}const CE={draw(e,s){const a=Fi(s/Zp);e.moveTo(a,0),e.arc(0,0,a,0,ub)}},lhe={draw(e,s){const a=Fi(s/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},h7=Fi(1/3),ohe=h7*2,che={draw(e,s){const a=Fi(s/ohe),r=a*h7;e.moveTo(0,-a),e.lineTo(r,0),e.lineTo(0,a),e.lineTo(-r,0),e.closePath()}},dhe={draw(e,s){const a=Fi(s),r=-a/2;e.rect(r,r,a,a)}},uhe=.8908130915292852,x7=Xp(Zp/10)/Xp(7*Zp/10),mhe=Xp(ub/10)*x7,fhe=-l7(ub/10)*x7,hhe={draw(e,s){const a=Fi(s*uhe),r=mhe*a,n=fhe*a;e.moveTo(0,-a),e.lineTo(r,n);for(let i=1;i<5;++i){const l=ub*i/5,o=l7(l),d=Xp(l);e.lineTo(d*a,-o*a),e.lineTo(o*r-d*n,d*r+o*n)}e.closePath()}},UN=Fi(3),xhe={draw(e,s){const a=-Fi(s/(UN*3));e.moveTo(0,a*2),e.lineTo(-UN*a,-a),e.lineTo(UN*a,-a),e.closePath()}},Zn=-.5,ei=Fi(3)/2,c2=1/Fi(12),phe=(c2/2+1)*3,ghe={draw(e,s){const a=Fi(s/phe),r=a/2,n=a*c2,i=r,l=a*c2+a,o=-i,d=l;e.moveTo(r,n),e.lineTo(i,l),e.lineTo(o,d),e.lineTo(Zn*r-ei*n,ei*r+Zn*n),e.lineTo(Zn*i-ei*l,ei*i+Zn*l),e.lineTo(Zn*o-ei*d,ei*o+Zn*d),e.lineTo(Zn*r+ei*n,Zn*n-ei*r),e.lineTo(Zn*i+ei*l,Zn*l-ei*i),e.lineTo(Zn*o+ei*d,Zn*d-ei*o),e.closePath()}};function bhe(e,s){let a=null,r=AE(n);e=typeof e=="function"?e:ha(e||CE),s=typeof s=="function"?s:ha(s===void 0?64:+s);function n(){let i;if(a||(a=i=r()),e.apply(this,arguments).draw(a,+s.apply(this,arguments)),i)return a=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:ha(i),n):e},n.size=function(i){return arguments.length?(s=typeof i=="function"?i:ha(+i),n):s},n.context=function(i){return arguments.length?(a=i??null,n):a},n}function eg(){}function tg(e,s,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+s)/6,(e._y0+4*e._y1+a)/6)}function p7(e){this._context=e}p7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tg(this,e,s);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s}};function vhe(e){return new p7(e)}function g7(e){this._context=e}g7.prototype={areaStart:eg,areaEnd:eg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._x2=e,this._y2=s;break;case 1:this._point=2,this._x3=e,this._y3=s;break;case 2:this._point=3,this._x4=e,this._y4=s,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+s)/6);break;default:tg(this,e,s);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s}};function yhe(e){return new g7(e)}function b7(e){this._context=e}b7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:tg(this,e,s);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s}};function Nhe(e){return new b7(e)}function v7(e){this._context=e}v7.prototype={areaStart:eg,areaEnd:eg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,s){e=+e,s=+s,this._point?this._context.lineTo(e,s):(this._point=1,this._context.moveTo(e,s))}};function jhe(e){return new v7(e)}function bR(e){return e<0?-1:1}function vR(e,s,a){var r=e._x1-e._x0,n=s-e._x1,i=(e._y1-e._y0)/(r||n<0&&-0),l=(a-e._y1)/(n||r<0&&-0),o=(i*n+l*r)/(r+n);return(bR(i)+bR(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function yR(e,s){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-s)/2:s}function zN(e,s,a){var r=e._x0,n=e._y0,i=e._x1,l=e._y1,o=(i-r)/3;e._context.bezierCurveTo(r+o,n+o*s,i-o,l-o*a,i,l)}function sg(e){this._context=e}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zN(this,this._t0,yR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){var a=NaN;if(e=+e,s=+s,!(e===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;break;case 2:this._point=3,zN(this,yR(this,a=vR(this,e,s)),a);break;default:zN(this,this._t0,a=vR(this,e,s));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s,this._t0=a}}};function y7(e){this._context=new N7(e)}(y7.prototype=Object.create(sg.prototype)).point=function(e,s){sg.prototype.point.call(this,s,e)};function N7(e){this._context=e}N7.prototype={moveTo:function(e,s){this._context.moveTo(s,e)},closePath:function(){this._context.closePath()},lineTo:function(e,s){this._context.lineTo(s,e)},bezierCurveTo:function(e,s,a,r,n,i){this._context.bezierCurveTo(s,e,r,a,i,n)}};function whe(e){return new sg(e)}function She(e){return new y7(e)}function j7(e){this._context=e}j7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,s=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],s[0]):this._context.moveTo(e[0],s[0]),a===2)this._context.lineTo(e[1],s[1]);else for(var r=NR(e),n=NR(s),i=0,l=1;l<a;++i,++l)this._context.bezierCurveTo(r[0][i],n[0][i],r[1][i],n[1][i],e[l],s[l]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,s){this._x.push(+e),this._y.push(+s)}};function NR(e){var s,a=e.length-1,r,n=new Array(a),i=new Array(a),l=new Array(a);for(n[0]=0,i[0]=2,l[0]=e[0]+2*e[1],s=1;s<a-1;++s)n[s]=1,i[s]=4,l[s]=4*e[s]+2*e[s+1];for(n[a-1]=2,i[a-1]=7,l[a-1]=8*e[a-1]+e[a],s=1;s<a;++s)r=n[s]/i[s-1],i[s]-=r,l[s]-=r*l[s-1];for(n[a-1]=l[a-1]/i[a-1],s=a-2;s>=0;--s)n[s]=(l[s]-n[s+1])/i[s];for(i[a-1]=(e[a]+n[a-1])/2,s=0;s<a-1;++s)i[s]=2*e[s+1]-n[s+1];return[n,i]}function Ahe(e){return new j7(e)}function fb(e,s){this._context=e,this._t=s}fb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(e,s);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,s)}break}}this._x=e,this._y=s}};function Ehe(e){return new fb(e,.5)}function Che(e){return new fb(e,0)}function The(e){return new fb(e,1)}function $u(e,s){if((l=e.length)>1)for(var a=1,r,n,i=e[s[0]],l,o=i.length;a<l;++a)for(n=i,i=e[s[a]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function d2(e){for(var s=e.length,a=new Array(s);--s>=0;)a[s]=s;return a}function _he(e,s){return e[s]}function khe(e){const s=[];return s.key=e,s}function Ohe(){var e=ha([]),s=d2,a=$u,r=_he;function n(i){var l=Array.from(e.apply(this,arguments),khe),o,d=l.length,u=-1,h;for(const f of i)for(o=0,++u;o<d;++o)(l[o][u]=[0,+r(f,l[o].key,u,i)]).data=f;for(o=0,h=EE(s(l));o<d;++o)l[h[o]].index=o;return a(l,h),l}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ha(Array.from(i)),n):e},n.value=function(i){return arguments.length?(r=typeof i=="function"?i:ha(+i),n):r},n.order=function(i){return arguments.length?(s=i==null?d2:typeof i=="function"?i:ha(Array.from(i)),n):s},n.offset=function(i){return arguments.length?(a=i??$u,n):a},n}function Ihe(e,s){if((r=e.length)>0){for(var a,r,n=0,i=e[0].length,l;n<i;++n){for(l=a=0;a<r;++a)l+=e[a][n][1]||0;if(l)for(a=0;a<r;++a)e[a][n][1]/=l}$u(e,s)}}function Rhe(e,s){if((n=e.length)>0){for(var a=0,r=e[s[0]],n,i=r.length;a<i;++a){for(var l=0,o=0;l<n;++l)o+=e[l][a][1]||0;r[a][1]+=r[a][0]=-o/2}$u(e,s)}}function Phe(e,s){if(!(!((l=e.length)>0)||!((i=(n=e[s[0]]).length)>0))){for(var a=0,r=1,n,i,l;r<i;++r){for(var o=0,d=0,u=0;o<l;++o){for(var h=e[s[o]],f=h[r][1]||0,x=h[r-1][1]||0,p=(f-x)/2,v=0;v<o;++v){var b=e[s[v]],y=b[r][1]||0,j=b[r-1][1]||0;p+=y-j}d+=f,u+=p*f}n[r-1][1]+=n[r-1][0]=a,d&&(a-=u/d)}n[r-1][1]+=n[r-1][0]=a,$u(e,s)}}function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Sf(e)}var Dhe=["type","size","sizeType"];function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u2.apply(this,arguments)}function jR(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function wR(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?jR(Object(a),!0).forEach(function(r){Mhe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jR(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Mhe(e,s,a){return s=Lhe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Lhe(e){var s=Fhe(e,"string");return Sf(s)=="symbol"?s:s+""}function Fhe(e,s){if(Sf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Uhe(e,s){if(e==null)return{};var a=zhe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zhe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var w7={symbolCircle:CE,symbolCross:lhe,symbolDiamond:che,symbolSquare:dhe,symbolStar:hhe,symbolTriangle:xhe,symbolWye:ghe},Bhe=Math.PI/180,$he=function(s){var a="symbol".concat(db(s));return w7[a]||CE},qhe=function(s,a,r){if(a==="area")return s;switch(r){case"cross":return 5*s*s/9;case"diamond":return .5*s*s/Math.sqrt(3);case"square":return s*s;case"star":{var n=18*Bhe;return 1.25*s*s*(Math.tan(n)-Math.tan(n*2)*Math.pow(Math.tan(n),2))}case"triangle":return Math.sqrt(3)*s*s/4;case"wye":return(21-10*Math.sqrt(3))*s*s/8;default:return Math.PI*s*s/4}},Hhe=function(s,a){w7["symbol".concat(db(s))]=a},TE=function(s){var a=s.type,r=a===void 0?"circle":a,n=s.size,i=n===void 0?64:n,l=s.sizeType,o=l===void 0?"area":l,d=Uhe(s,Dhe),u=wR(wR({},d),{},{type:r,size:i,sizeType:o}),h=function(){var y=$he(r),j=bhe().type(y).size(qhe(i,o,r));return j()},f=u.className,x=u.cx,p=u.cy,v=ys(u,!0);return x===+x&&p===+p&&i===+i?ke.createElement("path",u2({},v,{className:Is("recharts-symbols",f),transform:"translate(".concat(x,", ").concat(p,")"),d:h()})):null};TE.registerSymbol=Hhe;function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},qu(e)}function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},m2.apply(this,arguments)}function SR(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Vhe(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?SR(Object(a),!0).forEach(function(r){Af(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SR(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ghe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function Whe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A7(r.key),r)}}function Qhe(e,s,a){return s&&Whe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Khe(e,s,a){return s=ag(s),Jhe(e,S7()?Reflect.construct(s,a||[],ag(e).constructor):s.apply(e,a))}function Jhe(e,s){if(s&&(qu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yhe(e)}function Yhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S7=function(){return!!e})()}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ag(e)}function Xhe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&f2(e,s)}function f2(e,s){return f2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},f2(e,s)}function Af(e,s,a){return s=A7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function A7(e){var s=Zhe(e,"string");return qu(s)=="symbol"?s:s+""}function Zhe(e,s){if(qu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ti=32,_E=(function(e){function s(){return Ghe(this,s),Khe(this,s,arguments)}return Xhe(s,e),Qhe(s,[{key:"renderIcon",value:function(r){var n=this.props.inactiveColor,i=ti/2,l=ti/6,o=ti/3,d=r.inactive?n:r.color;if(r.type==="plainline")return ke.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:ti,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return ke.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(ti,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return ke.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(ti/8,"h").concat(ti,"v").concat(ti*3/4,"h").concat(-ti,"z"),className:"recharts-legend-icon"});if(ke.isValidElement(r.legendIcon)){var u=Vhe({},r);return delete u.legendIcon,ke.cloneElement(r.legendIcon,u)}return ke.createElement(TE,{fill:d,cx:i,cy:i,size:ti,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,n=this.props,i=n.payload,l=n.iconSize,o=n.layout,d=n.formatter,u=n.inactiveColor,h={x:0,y:0,width:ti,height:ti},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,v){var b=p.formatter||d,y=Is(Af(Af({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var j=cs(p.value)?null:p.value;zl(!cs(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return ke.createElement("li",m2({className:y,style:f,key:"legend-item-".concat(v)},Yp(r.props,p,v)),ke.createElement(n2,{width:l,height:l,viewBox:h,style:x},r.renderIcon(p)),ke.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},b?b(j,p,v):j))})}},{key:"render",value:function(){var r=this.props,n=r.payload,i=r.layout,l=r.align;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return ke.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(C.PureComponent);Af(_E,"displayName","Legend");Af(_E,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var BN,AR;function exe(){if(AR)return BN;AR=1;var e=lb();function s(){this.__data__=new e,this.size=0}return BN=s,BN}var $N,ER;function txe(){if(ER)return $N;ER=1;function e(s){var a=this.__data__,r=a.delete(s);return this.size=a.size,r}return $N=e,$N}var qN,CR;function sxe(){if(CR)return qN;CR=1;function e(s){return this.__data__.get(s)}return qN=e,qN}var HN,TR;function axe(){if(TR)return HN;TR=1;function e(s){return this.__data__.has(s)}return HN=e,HN}var VN,_R;function rxe(){if(_R)return VN;_R=1;var e=lb(),s=vE(),a=yE(),r=200;function n(i,l){var o=this.__data__;if(o instanceof e){var d=o.__data__;if(!s||d.length<r-1)return d.push([i,l]),this.size=++o.size,this;o=this.__data__=new a(d)}return o.set(i,l),this.size=o.size,this}return VN=n,VN}var GN,kR;function E7(){if(kR)return GN;kR=1;var e=lb(),s=exe(),a=txe(),r=sxe(),n=axe(),i=rxe();function l(o){var d=this.__data__=new e(o);this.size=d.size}return l.prototype.clear=s,l.prototype.delete=a,l.prototype.get=r,l.prototype.has=n,l.prototype.set=i,GN=l,GN}var WN,OR;function nxe(){if(OR)return WN;OR=1;var e="__lodash_hash_undefined__";function s(a){return this.__data__.set(a,e),this}return WN=s,WN}var QN,IR;function ixe(){if(IR)return QN;IR=1;function e(s){return this.__data__.has(s)}return QN=e,QN}var KN,RR;function C7(){if(RR)return KN;RR=1;var e=yE(),s=nxe(),a=ixe();function r(n){var i=-1,l=n==null?0:n.length;for(this.__data__=new e;++i<l;)this.add(n[i])}return r.prototype.add=r.prototype.push=s,r.prototype.has=a,KN=r,KN}var JN,PR;function T7(){if(PR)return JN;PR=1;function e(s,a){for(var r=-1,n=s==null?0:s.length;++r<n;)if(a(s[r],r,s))return!0;return!1}return JN=e,JN}var YN,DR;function _7(){if(DR)return YN;DR=1;function e(s,a){return s.has(a)}return YN=e,YN}var XN,MR;function k7(){if(MR)return XN;MR=1;var e=C7(),s=T7(),a=_7(),r=1,n=2;function i(l,o,d,u,h,f){var x=d&r,p=l.length,v=o.length;if(p!=v&&!(x&&v>p))return!1;var b=f.get(l),y=f.get(o);if(b&&y)return b==o&&y==l;var j=-1,w=!0,S=d&n?new e:void 0;for(f.set(l,o),f.set(o,l);++j<p;){var O=l[j],_=o[j];if(u)var E=x?u(_,O,j,o,l,f):u(O,_,j,l,o,f);if(E!==void 0){if(E)continue;w=!1;break}if(S){if(!s(o,function(A,D){if(!a(S,D)&&(O===A||h(O,A,d,u,f)))return S.push(D)})){w=!1;break}}else if(!(O===_||h(O,_,d,u,f))){w=!1;break}}return f.delete(l),f.delete(o),w}return XN=i,XN}var ZN,LR;function lxe(){if(LR)return ZN;LR=1;var e=ol(),s=e.Uint8Array;return ZN=s,ZN}var ej,FR;function oxe(){if(FR)return ej;FR=1;function e(s){var a=-1,r=Array(s.size);return s.forEach(function(n,i){r[++a]=[i,n]}),r}return ej=e,ej}var tj,UR;function kE(){if(UR)return tj;UR=1;function e(s){var a=-1,r=Array(s.size);return s.forEach(function(n){r[++a]=n}),r}return tj=e,tj}var sj,zR;function cxe(){if(zR)return sj;zR=1;var e=gh(),s=lxe(),a=bE(),r=k7(),n=oxe(),i=kE(),l=1,o=2,d="[object Boolean]",u="[object Date]",h="[object Error]",f="[object Map]",x="[object Number]",p="[object RegExp]",v="[object Set]",b="[object String]",y="[object Symbol]",j="[object ArrayBuffer]",w="[object DataView]",S=e?e.prototype:void 0,O=S?S.valueOf:void 0;function _(E,A,D,L,B,I,T){switch(D){case w:if(E.byteLength!=A.byteLength||E.byteOffset!=A.byteOffset)return!1;E=E.buffer,A=A.buffer;case j:return!(E.byteLength!=A.byteLength||!I(new s(E),new s(A)));case d:case u:case x:return a(+E,+A);case h:return E.name==A.name&&E.message==A.message;case p:case b:return E==A+"";case f:var z=n;case v:var k=L&l;if(z||(z=i),E.size!=A.size&&!k)return!1;var F=T.get(E);if(F)return F==A;L|=o,T.set(E,A);var P=r(z(E),z(A),L,B,I,T);return T.delete(E),P;case y:if(O)return O.call(E)==O.call(A)}return!1}return sj=_,sj}var aj,BR;function O7(){if(BR)return aj;BR=1;function e(s,a){for(var r=-1,n=a.length,i=s.length;++r<n;)s[i+r]=a[r];return s}return aj=e,aj}var rj,$R;function dxe(){if($R)return rj;$R=1;var e=O7(),s=Nn();function a(r,n,i){var l=n(r);return s(r)?l:e(l,i(r))}return rj=a,rj}var nj,qR;function uxe(){if(qR)return nj;qR=1;function e(s,a){for(var r=-1,n=s==null?0:s.length,i=0,l=[];++r<n;){var o=s[r];a(o,r,s)&&(l[i++]=o)}return l}return nj=e,nj}var ij,HR;function mxe(){if(HR)return ij;HR=1;function e(){return[]}return ij=e,ij}var lj,VR;function fxe(){if(VR)return lj;VR=1;var e=uxe(),s=mxe(),a=Object.prototype,r=a.propertyIsEnumerable,n=Object.getOwnPropertySymbols,i=n?function(l){return l==null?[]:(l=Object(l),e(n(l),function(o){return r.call(l,o)}))}:s;return lj=i,lj}var oj,GR;function hxe(){if(GR)return oj;GR=1;function e(s,a){for(var r=-1,n=Array(s);++r<s;)n[r]=a(r);return n}return oj=e,oj}var cj,WR;function xxe(){if(WR)return cj;WR=1;var e=Yl(),s=Xl(),a="[object Arguments]";function r(n){return s(n)&&e(n)==a}return cj=r,cj}var dj,QR;function OE(){if(QR)return dj;QR=1;var e=xxe(),s=Xl(),a=Object.prototype,r=a.hasOwnProperty,n=a.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(l){return s(l)&&r.call(l,"callee")&&!n.call(l,"callee")};return dj=i,dj}var Lm={exports:{}},uj,KR;function pxe(){if(KR)return uj;KR=1;function e(){return!1}return uj=e,uj}Lm.exports;var JR;function I7(){return JR||(JR=1,(function(e,s){var a=ol(),r=pxe(),n=s&&!s.nodeType&&s,i=n&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===n,o=l?a.Buffer:void 0,d=o?o.isBuffer:void 0,u=d||r;e.exports=u})(Lm,Lm.exports)),Lm.exports}var mj,YR;function IE(){if(YR)return mj;YR=1;var e=9007199254740991,s=/^(?:0|[1-9]\d*)$/;function a(r,n){var i=typeof r;return n=n??e,!!n&&(i=="number"||i!="symbol"&&s.test(r))&&r>-1&&r%1==0&&r<n}return mj=a,mj}var fj,XR;function RE(){if(XR)return fj;XR=1;var e=9007199254740991;function s(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=e}return fj=s,fj}var hj,ZR;function gxe(){if(ZR)return hj;ZR=1;var e=Yl(),s=RE(),a=Xl(),r="[object Arguments]",n="[object Array]",i="[object Boolean]",l="[object Date]",o="[object Error]",d="[object Function]",u="[object Map]",h="[object Number]",f="[object Object]",x="[object RegExp]",p="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",j="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",O="[object Int8Array]",_="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",L="[object Uint16Array]",B="[object Uint32Array]",I={};I[w]=I[S]=I[O]=I[_]=I[E]=I[A]=I[D]=I[L]=I[B]=!0,I[r]=I[n]=I[y]=I[i]=I[j]=I[l]=I[o]=I[d]=I[u]=I[h]=I[f]=I[x]=I[p]=I[v]=I[b]=!1;function T(z){return a(z)&&s(z.length)&&!!I[e(z)]}return hj=T,hj}var xj,eP;function R7(){if(eP)return xj;eP=1;function e(s){return function(a){return s(a)}}return xj=e,xj}var Fm={exports:{}};Fm.exports;var tP;function bxe(){return tP||(tP=1,(function(e,s){var a=ZF(),r=s&&!s.nodeType&&s,n=r&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===r,l=i&&a.process,o=(function(){try{var d=n&&n.require&&n.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}})();e.exports=o})(Fm,Fm.exports)),Fm.exports}var pj,sP;function P7(){if(sP)return pj;sP=1;var e=gxe(),s=R7(),a=bxe(),r=a&&a.isTypedArray,n=r?s(r):e;return pj=n,pj}var gj,aP;function vxe(){if(aP)return gj;aP=1;var e=hxe(),s=OE(),a=Nn(),r=I7(),n=IE(),i=P7(),l=Object.prototype,o=l.hasOwnProperty;function d(u,h){var f=a(u),x=!f&&s(u),p=!f&&!x&&r(u),v=!f&&!x&&!p&&i(u),b=f||x||p||v,y=b?e(u.length,String):[],j=y.length;for(var w in u)(h||o.call(u,w))&&!(b&&(w=="length"||p&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||n(w,j)))&&y.push(w);return y}return gj=d,gj}var bj,rP;function yxe(){if(rP)return bj;rP=1;var e=Object.prototype;function s(a){var r=a&&a.constructor,n=typeof r=="function"&&r.prototype||e;return a===n}return bj=s,bj}var vj,nP;function D7(){if(nP)return vj;nP=1;function e(s,a){return function(r){return s(a(r))}}return vj=e,vj}var yj,iP;function Nxe(){if(iP)return yj;iP=1;var e=D7(),s=e(Object.keys,Object);return yj=s,yj}var Nj,lP;function jxe(){if(lP)return Nj;lP=1;var e=yxe(),s=Nxe(),a=Object.prototype,r=a.hasOwnProperty;function n(i){if(!e(i))return s(i);var l=[];for(var o in Object(i))r.call(i,o)&&o!="constructor"&&l.push(o);return l}return Nj=n,Nj}var jj,oP;function vh(){if(oP)return jj;oP=1;var e=gE(),s=RE();function a(r){return r!=null&&s(r.length)&&!e(r)}return jj=a,jj}var wj,cP;function hb(){if(cP)return wj;cP=1;var e=vxe(),s=jxe(),a=vh();function r(n){return a(n)?e(n):s(n)}return wj=r,wj}var Sj,dP;function wxe(){if(dP)return Sj;dP=1;var e=dxe(),s=fxe(),a=hb();function r(n){return e(n,a,s)}return Sj=r,Sj}var Aj,uP;function Sxe(){if(uP)return Aj;uP=1;var e=wxe(),s=1,a=Object.prototype,r=a.hasOwnProperty;function n(i,l,o,d,u,h){var f=o&s,x=e(i),p=x.length,v=e(l),b=v.length;if(p!=b&&!f)return!1;for(var y=p;y--;){var j=x[y];if(!(f?j in l:r.call(l,j)))return!1}var w=h.get(i),S=h.get(l);if(w&&S)return w==l&&S==i;var O=!0;h.set(i,l),h.set(l,i);for(var _=f;++y<p;){j=x[y];var E=i[j],A=l[j];if(d)var D=f?d(A,E,j,l,i,h):d(E,A,j,i,l,h);if(!(D===void 0?E===A||u(E,A,o,d,h):D)){O=!1;break}_||(_=j=="constructor")}if(O&&!_){var L=i.constructor,B=l.constructor;L!=B&&"constructor"in i&&"constructor"in l&&!(typeof L=="function"&&L instanceof L&&typeof B=="function"&&B instanceof B)&&(O=!1)}return h.delete(i),h.delete(l),O}return Aj=n,Aj}var Ej,mP;function Axe(){if(mP)return Ej;mP=1;var e=vd(),s=ol(),a=e(s,"DataView");return Ej=a,Ej}var Cj,fP;function Exe(){if(fP)return Cj;fP=1;var e=vd(),s=ol(),a=e(s,"Promise");return Cj=a,Cj}var Tj,hP;function M7(){if(hP)return Tj;hP=1;var e=vd(),s=ol(),a=e(s,"Set");return Tj=a,Tj}var _j,xP;function Cxe(){if(xP)return _j;xP=1;var e=vd(),s=ol(),a=e(s,"WeakMap");return _j=a,_j}var kj,pP;function Txe(){if(pP)return kj;pP=1;var e=Axe(),s=vE(),a=Exe(),r=M7(),n=Cxe(),i=Yl(),l=e7(),o="[object Map]",d="[object Object]",u="[object Promise]",h="[object Set]",f="[object WeakMap]",x="[object DataView]",p=l(e),v=l(s),b=l(a),y=l(r),j=l(n),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=x||s&&w(new s)!=o||a&&w(a.resolve())!=u||r&&w(new r)!=h||n&&w(new n)!=f)&&(w=function(S){var O=i(S),_=O==d?S.constructor:void 0,E=_?l(_):"";if(E)switch(E){case p:return x;case v:return o;case b:return u;case y:return h;case j:return f}return O}),kj=w,kj}var Oj,gP;function _xe(){if(gP)return Oj;gP=1;var e=E7(),s=k7(),a=cxe(),r=Sxe(),n=Txe(),i=Nn(),l=I7(),o=P7(),d=1,u="[object Arguments]",h="[object Array]",f="[object Object]",x=Object.prototype,p=x.hasOwnProperty;function v(b,y,j,w,S,O){var _=i(b),E=i(y),A=_?h:n(b),D=E?h:n(y);A=A==u?f:A,D=D==u?f:D;var L=A==f,B=D==f,I=A==D;if(I&&l(b)){if(!l(y))return!1;_=!0,L=!1}if(I&&!L)return O||(O=new e),_||o(b)?s(b,y,j,w,S,O):a(b,y,A,j,w,S,O);if(!(j&d)){var T=L&&p.call(b,"__wrapped__"),z=B&&p.call(y,"__wrapped__");if(T||z){var k=T?b.value():b,F=z?y.value():y;return O||(O=new e),S(k,F,j,w,O)}}return I?(O||(O=new e),r(b,y,j,w,S,O)):!1}return Oj=v,Oj}var Ij,bP;function PE(){if(bP)return Ij;bP=1;var e=_xe(),s=Xl();function a(r,n,i,l,o){return r===n?!0:r==null||n==null||!s(r)&&!s(n)?r!==r&&n!==n:e(r,n,i,l,a,o)}return Ij=a,Ij}var Rj,vP;function kxe(){if(vP)return Rj;vP=1;var e=E7(),s=PE(),a=1,r=2;function n(i,l,o,d){var u=o.length,h=u,f=!d;if(i==null)return!h;for(i=Object(i);u--;){var x=o[u];if(f&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++u<h;){x=o[u];var p=x[0],v=i[p],b=x[1];if(f&&x[2]){if(v===void 0&&!(p in i))return!1}else{var y=new e;if(d)var j=d(v,b,p,i,l,y);if(!(j===void 0?s(b,v,a|r,d,y):j))return!1}}return!0}return Rj=n,Rj}var Pj,yP;function L7(){if(yP)return Pj;yP=1;var e=rc();function s(a){return a===a&&!e(a)}return Pj=s,Pj}var Dj,NP;function Oxe(){if(NP)return Dj;NP=1;var e=L7(),s=hb();function a(r){for(var n=s(r),i=n.length;i--;){var l=n[i],o=r[l];n[i]=[l,o,e(o)]}return n}return Dj=a,Dj}var Mj,jP;function F7(){if(jP)return Mj;jP=1;function e(s,a){return function(r){return r==null?!1:r[s]===a&&(a!==void 0||s in Object(r))}}return Mj=e,Mj}var Lj,wP;function Ixe(){if(wP)return Lj;wP=1;var e=kxe(),s=Oxe(),a=F7();function r(n){var i=s(n);return i.length==1&&i[0][2]?a(i[0][0],i[0][1]):function(l){return l===n||e(l,n,i)}}return Lj=r,Lj}var Fj,SP;function Rxe(){if(SP)return Fj;SP=1;function e(s,a){return s!=null&&a in Object(s)}return Fj=e,Fj}var Uj,AP;function Pxe(){if(AP)return Uj;AP=1;var e=a7(),s=OE(),a=Nn(),r=IE(),n=RE(),i=cb();function l(o,d,u){d=e(d,o);for(var h=-1,f=d.length,x=!1;++h<f;){var p=i(d[h]);if(!(x=o!=null&&u(o,p)))break;o=o[p]}return x||++h!=f?x:(f=o==null?0:o.length,!!f&&n(f)&&r(p,f)&&(a(o)||s(o)))}return Uj=l,Uj}var zj,EP;function Dxe(){if(EP)return zj;EP=1;var e=Rxe(),s=Pxe();function a(r,n){return r!=null&&s(r,n,e)}return zj=a,zj}var Bj,CP;function Mxe(){if(CP)return Bj;CP=1;var e=PE(),s=r7(),a=Dxe(),r=pE(),n=L7(),i=F7(),l=cb(),o=1,d=2;function u(h,f){return r(h)&&n(f)?i(l(h),f):function(x){var p=s(x,h);return p===void 0&&p===f?a(x,h):e(f,p,o|d)}}return Bj=u,Bj}var $j,TP;function y0(){if(TP)return $j;TP=1;function e(s){return s}return $j=e,$j}var qj,_P;function Lxe(){if(_P)return qj;_P=1;function e(s){return function(a){return a==null?void 0:a[s]}}return qj=e,qj}var Hj,kP;function Fxe(){if(kP)return Hj;kP=1;var e=jE();function s(a){return function(r){return e(r,a)}}return Hj=s,Hj}var Vj,OP;function Uxe(){if(OP)return Vj;OP=1;var e=Lxe(),s=Fxe(),a=pE(),r=cb();function n(i){return a(i)?e(r(i)):s(i)}return Vj=n,Vj}var Gj,IP;function nc(){if(IP)return Gj;IP=1;var e=Ixe(),s=Mxe(),a=y0(),r=Nn(),n=Uxe();function i(l){return typeof l=="function"?l:l==null?a:typeof l=="object"?r(l)?s(l[0],l[1]):e(l):n(l)}return Gj=i,Gj}var Wj,RP;function U7(){if(RP)return Wj;RP=1;function e(s,a,r,n){for(var i=s.length,l=r+(n?1:-1);n?l--:++l<i;)if(a(s[l],l,s))return l;return-1}return Wj=e,Wj}var Qj,PP;function zxe(){if(PP)return Qj;PP=1;function e(s){return s!==s}return Qj=e,Qj}var Kj,DP;function Bxe(){if(DP)return Kj;DP=1;function e(s,a,r){for(var n=r-1,i=s.length;++n<i;)if(s[n]===a)return n;return-1}return Kj=e,Kj}var Jj,MP;function $xe(){if(MP)return Jj;MP=1;var e=U7(),s=zxe(),a=Bxe();function r(n,i,l){return i===i?a(n,i,l):e(n,s,l)}return Jj=r,Jj}var Yj,LP;function qxe(){if(LP)return Yj;LP=1;var e=$xe();function s(a,r){var n=a==null?0:a.length;return!!n&&e(a,r,0)>-1}return Yj=s,Yj}var Xj,FP;function Hxe(){if(FP)return Xj;FP=1;function e(s,a,r){for(var n=-1,i=s==null?0:s.length;++n<i;)if(r(a,s[n]))return!0;return!1}return Xj=e,Xj}var Zj,UP;function Vxe(){if(UP)return Zj;UP=1;function e(){}return Zj=e,Zj}var ew,zP;function Gxe(){if(zP)return ew;zP=1;var e=M7(),s=Vxe(),a=kE(),r=1/0,n=e&&1/a(new e([,-0]))[1]==r?function(i){return new e(i)}:s;return ew=n,ew}var tw,BP;function Wxe(){if(BP)return tw;BP=1;var e=C7(),s=qxe(),a=Hxe(),r=_7(),n=Gxe(),i=kE(),l=200;function o(d,u,h){var f=-1,x=s,p=d.length,v=!0,b=[],y=b;if(h)v=!1,x=a;else if(p>=l){var j=u?null:n(d);if(j)return i(j);v=!1,x=r,y=new e}else y=u?[]:b;e:for(;++f<p;){var w=d[f],S=u?u(w):w;if(w=h||w!==0?w:0,v&&S===S){for(var O=y.length;O--;)if(y[O]===S)continue e;u&&y.push(S),b.push(w)}else x(y,S,h)||(y!==b&&y.push(S),b.push(w))}return b}return tw=o,tw}var sw,$P;function Qxe(){if($P)return sw;$P=1;var e=nc(),s=Wxe();function a(r,n){return r&&r.length?s(r,e(n,2)):[]}return sw=a,sw}var Kxe=Qxe();const qP=ra(Kxe);function z7(e,s,a){return s===!0?qP(e,a):cs(s)?qP(e,s):e}function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Hu(e)}var Jxe=["ref"];function HP(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Cl(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?HP(Object(a),!0).forEach(function(r){xb(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HP(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Yxe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function VP(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$7(r.key),r)}}function Xxe(e,s,a){return s&&VP(e.prototype,s),a&&VP(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zxe(e,s,a){return s=rg(s),epe(e,B7()?Reflect.construct(s,a||[],rg(e).constructor):s.apply(e,a))}function epe(e,s){if(s&&(Hu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tpe(e)}function tpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B7=function(){return!!e})()}function rg(e){return rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},rg(e)}function spe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&h2(e,s)}function h2(e,s){return h2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},h2(e,s)}function xb(e,s,a){return s=$7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function $7(e){var s=ape(e,"string");return Hu(s)=="symbol"?s:s+""}function ape(e,s){if(Hu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function rpe(e,s){if(e==null)return{};var a=npe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function npe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function ipe(e){return e.value}function lpe(e,s){if(ke.isValidElement(e))return ke.cloneElement(e,s);if(typeof e=="function")return ke.createElement(e,s);s.ref;var a=rpe(s,Jxe);return ke.createElement(_E,a)}var GP=1,Iu=(function(e){function s(){var a;Yxe(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=Zxe(this,s,[].concat(n)),xb(a,"lastBoundingBox",{width:-1,height:-1}),a}return spe(s,e),Xxe(s,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,n=this.getBBox();n?(Math.abs(n.width-this.lastBoundingBox.width)>GP||Math.abs(n.height-this.lastBoundingBox.height)>GP)&&(this.lastBoundingBox.width=n.width,this.lastBoundingBox.height=n.height,r&&r(n)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Cl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var n=this.props,i=n.layout,l=n.align,o=n.verticalAlign,d=n.margin,u=n.chartWidth,h=n.chartHeight,f,x;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(l==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=l==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();x={top:((h||0)-v.height)/2}}else x=o==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Cl(Cl({},f),x)}},{key:"render",value:function(){var r=this,n=this.props,i=n.content,l=n.width,o=n.height,d=n.wrapperStyle,u=n.payloadUniqBy,h=n.payload,f=Cl(Cl({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(d)),d);return ke.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},lpe(i,Cl(Cl({},this.props),{},{payload:z7(h,u,ipe)})))}}],[{key:"getWithHeight",value:function(r,n){var i=Cl(Cl({},this.defaultProps),r.props),l=i.layout;return l==="vertical"&&dt(r.props.height)?{height:r.props.height}:l==="horizontal"?{width:r.props.width||n}:null}}])})(C.PureComponent);xb(Iu,"displayName","Legend");xb(Iu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var aw,WP;function ope(){if(WP)return aw;WP=1;var e=gh(),s=OE(),a=Nn(),r=e?e.isConcatSpreadable:void 0;function n(i){return a(i)||s(i)||!!(r&&i&&i[r])}return aw=n,aw}var rw,QP;function q7(){if(QP)return rw;QP=1;var e=O7(),s=ope();function a(r,n,i,l,o){var d=-1,u=r.length;for(i||(i=s),o||(o=[]);++d<u;){var h=r[d];n>0&&i(h)?n>1?a(h,n-1,i,l,o):e(o,h):l||(o[o.length]=h)}return o}return rw=a,rw}var nw,KP;function cpe(){if(KP)return nw;KP=1;function e(s){return function(a,r,n){for(var i=-1,l=Object(a),o=n(a),d=o.length;d--;){var u=o[s?d:++i];if(r(l[u],u,l)===!1)break}return a}}return nw=e,nw}var iw,JP;function dpe(){if(JP)return iw;JP=1;var e=cpe(),s=e();return iw=s,iw}var lw,YP;function H7(){if(YP)return lw;YP=1;var e=dpe(),s=hb();function a(r,n){return r&&e(r,n,s)}return lw=a,lw}var ow,XP;function upe(){if(XP)return ow;XP=1;var e=vh();function s(a,r){return function(n,i){if(n==null)return n;if(!e(n))return a(n,i);for(var l=n.length,o=r?l:-1,d=Object(n);(r?o--:++o<l)&&i(d[o],o,d)!==!1;);return n}}return ow=s,ow}var cw,ZP;function DE(){if(ZP)return cw;ZP=1;var e=H7(),s=upe(),a=s(e);return cw=a,cw}var dw,e3;function V7(){if(e3)return dw;e3=1;var e=DE(),s=vh();function a(r,n){var i=-1,l=s(r)?Array(r.length):[];return e(r,function(o,d,u){l[++i]=n(o,d,u)}),l}return dw=a,dw}var uw,t3;function mpe(){if(t3)return uw;t3=1;function e(s,a){var r=s.length;for(s.sort(a);r--;)s[r]=s[r].value;return s}return uw=e,uw}var mw,s3;function fpe(){if(s3)return mw;s3=1;var e=g0();function s(a,r){if(a!==r){var n=a!==void 0,i=a===null,l=a===a,o=e(a),d=r!==void 0,u=r===null,h=r===r,f=e(r);if(!u&&!f&&!o&&a>r||o&&d&&h&&!u&&!f||i&&d&&h||!n&&h||!l)return 1;if(!i&&!o&&!f&&a<r||f&&n&&l&&!i&&!o||u&&n&&l||!d&&l||!h)return-1}return 0}return mw=s,mw}var fw,a3;function hpe(){if(a3)return fw;a3=1;var e=fpe();function s(a,r,n){for(var i=-1,l=a.criteria,o=r.criteria,d=l.length,u=n.length;++i<d;){var h=e(l[i],o[i]);if(h){if(i>=u)return h;var f=n[i];return h*(f=="desc"?-1:1)}}return a.index-r.index}return fw=s,fw}var hw,r3;function xpe(){if(r3)return hw;r3=1;var e=NE(),s=jE(),a=nc(),r=V7(),n=mpe(),i=R7(),l=hpe(),o=y0(),d=Nn();function u(h,f,x){f.length?f=e(f,function(b){return d(b)?function(y){return s(y,b.length===1?b[0]:b)}:b}):f=[o];var p=-1;f=e(f,i(a));var v=r(h,function(b,y,j){var w=e(f,function(S){return S(b)});return{criteria:w,index:++p,value:b}});return n(v,function(b,y){return l(b,y,x)})}return hw=u,hw}var xw,n3;function ppe(){if(n3)return xw;n3=1;function e(s,a,r){switch(r.length){case 0:return s.call(a);case 1:return s.call(a,r[0]);case 2:return s.call(a,r[0],r[1]);case 3:return s.call(a,r[0],r[1],r[2])}return s.apply(a,r)}return xw=e,xw}var pw,i3;function gpe(){if(i3)return pw;i3=1;var e=ppe(),s=Math.max;function a(r,n,i){return n=s(n===void 0?r.length-1:n,0),function(){for(var l=arguments,o=-1,d=s(l.length-n,0),u=Array(d);++o<d;)u[o]=l[n+o];o=-1;for(var h=Array(n+1);++o<n;)h[o]=l[o];return h[n]=i(u),e(r,this,h)}}return pw=a,pw}var gw,l3;function bpe(){if(l3)return gw;l3=1;function e(s){return function(){return s}}return gw=e,gw}var bw,o3;function G7(){if(o3)return bw;o3=1;var e=vd(),s=(function(){try{var a=e(Object,"defineProperty");return a({},"",{}),a}catch{}})();return bw=s,bw}var vw,c3;function vpe(){if(c3)return vw;c3=1;var e=bpe(),s=G7(),a=y0(),r=s?function(n,i){return s(n,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:a;return vw=r,vw}var yw,d3;function ype(){if(d3)return yw;d3=1;var e=800,s=16,a=Date.now;function r(n){var i=0,l=0;return function(){var o=a(),d=s-(o-l);if(l=o,d>0){if(++i>=e)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}return yw=r,yw}var Nw,u3;function Npe(){if(u3)return Nw;u3=1;var e=vpe(),s=ype(),a=s(e);return Nw=a,Nw}var jw,m3;function jpe(){if(m3)return jw;m3=1;var e=y0(),s=gpe(),a=Npe();function r(n,i){return a(s(n,i,e),n+"")}return jw=r,jw}var ww,f3;function pb(){if(f3)return ww;f3=1;var e=bE(),s=vh(),a=IE(),r=rc();function n(i,l,o){if(!r(o))return!1;var d=typeof l;return(d=="number"?s(o)&&a(l,o.length):d=="string"&&l in o)?e(o[l],i):!1}return ww=n,ww}var Sw,h3;function wpe(){if(h3)return Sw;h3=1;var e=q7(),s=xpe(),a=jpe(),r=pb(),n=a(function(i,l){if(i==null)return[];var o=l.length;return o>1&&r(i,l[0],l[1])?l=[]:o>2&&r(l[0],l[1],l[2])&&(l=[l[0]]),s(i,e(l,1),[])});return Sw=n,Sw}var Spe=wpe();const ME=ra(Spe);function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ef(e)}function x2(){return x2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},x2.apply(this,arguments)}function Ape(e,s){return _pe(e)||Tpe(e,s)||Cpe(e,s)||Epe()}function Epe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cpe(e,s){if(e){if(typeof e=="string")return x3(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x3(e,s)}}function x3(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Tpe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function _pe(e){if(Array.isArray(e))return e}function p3(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Aw(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?p3(Object(a),!0).forEach(function(r){kpe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p3(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function kpe(e,s,a){return s=Ope(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Ope(e){var s=Ipe(e,"string");return Ef(s)=="symbol"?s:s+""}function Ipe(e,s){if(Ef(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Rpe(e){return Array.isArray(e)&&ur(e[0])&&ur(e[1])?e.join(" ~ "):e}var Ppe=function(s){var a=s.separator,r=a===void 0?" : ":a,n=s.contentStyle,i=n===void 0?{}:n,l=s.itemStyle,o=l===void 0?{}:l,d=s.labelStyle,u=d===void 0?{}:d,h=s.payload,f=s.formatter,x=s.itemSorter,p=s.wrapperClassName,v=s.labelClassName,b=s.label,y=s.labelFormatter,j=s.accessibilityLayer,w=j===void 0?!1:j,S=function(){if(h&&h.length){var T={padding:0,margin:0},z=(x?ME(h,x):h).map(function(k,F){if(k.type==="none")return null;var P=Aw({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},o),G=k.formatter||f||Rpe,Y=k.value,W=k.name,ee=Y,H=W;if(G&&ee!=null&&H!=null){var M=G(Y,W,k,F,h);if(Array.isArray(M)){var X=Ape(M,2);ee=X[0],H=X[1]}else ee=M}return ke.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:P},ur(H)?ke.createElement("span",{className:"recharts-tooltip-item-name"},H):null,ur(H)?ke.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ke.createElement("span",{className:"recharts-tooltip-item-value"},ee),ke.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return ke.createElement("ul",{className:"recharts-tooltip-item-list",style:T},z)}return null},O=Aw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),_=Aw({margin:0},u),E=!Ss(b),A=E?b:"",D=Is("recharts-default-tooltip",p),L=Is("recharts-tooltip-label",v);E&&y&&h!==void 0&&h!==null&&(A=y(b,h));var B=w?{role:"status","aria-live":"assertive"}:{};return ke.createElement("div",x2({className:D,style:O},B),ke.createElement("p",{className:L,style:_},ke.isValidElement(A)?A:"".concat(A)),S())};function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cf(e)}function rp(e,s,a){return s=Dpe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Dpe(e){var s=Mpe(e,"string");return Cf(s)=="symbol"?s:s+""}function Mpe(e,s){if(Cf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var wm="recharts-tooltip-wrapper",Lpe={visibility:"hidden"};function Fpe(e){var s=e.coordinate,a=e.translateX,r=e.translateY;return Is(wm,rp(rp(rp(rp({},"".concat(wm,"-right"),dt(a)&&s&&dt(s.x)&&a>=s.x),"".concat(wm,"-left"),dt(a)&&s&&dt(s.x)&&a<s.x),"".concat(wm,"-bottom"),dt(r)&&s&&dt(s.y)&&r>=s.y),"".concat(wm,"-top"),dt(r)&&s&&dt(s.y)&&r<s.y))}function g3(e){var s=e.allowEscapeViewBox,a=e.coordinate,r=e.key,n=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&dt(i[r]))return i[r];var h=a[r]-o-n,f=a[r]+n;if(s[r])return l[r]?h:f;if(l[r]){var x=h,p=d[r];return x<p?Math.max(f,d[r]):Math.max(h,d[r])}var v=f+o,b=d[r]+u;return v>b?Math.max(h,d[r]):Math.max(f,d[r])}function Upe(e){var s=e.translateX,a=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(s,"px, ").concat(a,"px, 0)"):"translate(".concat(s,"px, ").concat(a,"px)")}}function zpe(e){var s=e.allowEscapeViewBox,a=e.coordinate,r=e.offsetTopLeft,n=e.position,i=e.reverseDirection,l=e.tooltipBox,o=e.useTranslate3d,d=e.viewBox,u,h,f;return l.height>0&&l.width>0&&a?(h=g3({allowEscapeViewBox:s,coordinate:a,key:"x",offsetTopLeft:r,position:n,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),f=g3({allowEscapeViewBox:s,coordinate:a,key:"y",offsetTopLeft:r,position:n,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),u=Upe({translateX:h,translateY:f,useTranslate3d:o})):u=Lpe,{cssProperties:u,cssClasses:Fpe({translateX:h,translateY:f,coordinate:a})}}function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Vu(e)}function b3(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function v3(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?b3(Object(a),!0).forEach(function(r){g2(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b3(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Bpe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function $pe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q7(r.key),r)}}function qpe(e,s,a){return s&&$pe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hpe(e,s,a){return s=ng(s),Vpe(e,W7()?Reflect.construct(s,a||[],ng(e).constructor):s.apply(e,a))}function Vpe(e,s){if(s&&(Vu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gpe(e)}function Gpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W7=function(){return!!e})()}function ng(e){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ng(e)}function Wpe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&p2(e,s)}function p2(e,s){return p2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},p2(e,s)}function g2(e,s,a){return s=Q7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Q7(e){var s=Qpe(e,"string");return Vu(s)=="symbol"?s:s+""}function Qpe(e,s){if(Vu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var y3=1,Kpe=(function(e){function s(){var a;Bpe(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=Hpe(this,s,[].concat(n)),g2(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),g2(a,"handleKeyDown",function(l){if(l.key==="Escape"){var o,d,u,h;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(d=a.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&o!==void 0?o:0,y:(u=(h=a.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),a}return Wpe(s,e),qpe(s,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>y3||Math.abs(r.height-this.state.lastBoundingBox.height)>y3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,n;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,o=n.animationDuration,d=n.animationEasing,u=n.children,h=n.coordinate,f=n.hasPayload,x=n.isAnimationActive,p=n.offset,v=n.position,b=n.reverseDirection,y=n.useTranslate3d,j=n.viewBox,w=n.wrapperStyle,S=zpe({allowEscapeViewBox:l,coordinate:h,offsetTopLeft:p,position:v,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:j}),O=S.cssClasses,_=S.cssProperties,E=v3(v3({transition:x&&i?"transform ".concat(o,"ms ").concat(d):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return ke.createElement("div",{tabIndex:-1,className:O,style:E,ref:function(D){r.wrapperNode=D}},u)}}])})(C.PureComponent),Jpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},N0={isSsr:Jpe()};function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gu(e)}function N3(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function j3(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?N3(Object(a),!0).forEach(function(r){LE(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N3(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ype(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function Xpe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J7(r.key),r)}}function Zpe(e,s,a){return s&&Xpe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function ege(e,s,a){return s=ig(s),tge(e,K7()?Reflect.construct(s,a||[],ig(e).constructor):s.apply(e,a))}function tge(e,s){if(s&&(Gu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sge(e)}function sge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K7=function(){return!!e})()}function ig(e){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ig(e)}function age(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&b2(e,s)}function b2(e,s){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},b2(e,s)}function LE(e,s,a){return s=J7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function J7(e){var s=rge(e,"string");return Gu(s)=="symbol"?s:s+""}function rge(e,s){if(Gu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nge(e){return e.dataKey}function ige(e,s){return ke.isValidElement(e)?ke.cloneElement(e,s):typeof e=="function"?ke.createElement(e,s):ke.createElement(Ppe,s)}var Ci=(function(e){function s(){return Ype(this,s),ege(this,s,arguments)}return age(s,e),Zpe(s,[{key:"render",value:function(){var r=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,o=n.animationDuration,d=n.animationEasing,u=n.content,h=n.coordinate,f=n.filterNull,x=n.isAnimationActive,p=n.offset,v=n.payload,b=n.payloadUniqBy,y=n.position,j=n.reverseDirection,w=n.useTranslate3d,S=n.viewBox,O=n.wrapperStyle,_=v??[];f&&_.length&&(_=z7(v.filter(function(A){return A.value!=null&&(A.hide!==!0||r.props.includeHidden)}),b,nge));var E=_.length>0;return ke.createElement(Kpe,{allowEscapeViewBox:l,animationDuration:o,animationEasing:d,isAnimationActive:x,active:i,coordinate:h,hasPayload:E,offset:p,position:y,reverseDirection:j,useTranslate3d:w,viewBox:S,wrapperStyle:O},ige(u,j3(j3({},this.props),{},{payload:_})))}}])})(C.PureComponent);LE(Ci,"displayName","Tooltip");LE(Ci,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!N0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Ew,w3;function lge(){if(w3)return Ew;w3=1;var e=ol(),s=function(){return e.Date.now()};return Ew=s,Ew}var Cw,S3;function oge(){if(S3)return Cw;S3=1;var e=/\s/;function s(a){for(var r=a.length;r--&&e.test(a.charAt(r)););return r}return Cw=s,Cw}var Tw,A3;function cge(){if(A3)return Tw;A3=1;var e=oge(),s=/^\s+/;function a(r){return r&&r.slice(0,e(r)+1).replace(s,"")}return Tw=a,Tw}var _w,E3;function Y7(){if(E3)return _w;E3=1;var e=cge(),s=rc(),a=g0(),r=NaN,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function d(u){if(typeof u=="number")return u;if(a(u))return r;if(s(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=s(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=i.test(u);return f||l.test(u)?o(u.slice(2),f?2:8):n.test(u)?r:+u}return _w=d,_w}var kw,C3;function dge(){if(C3)return kw;C3=1;var e=rc(),s=lge(),a=Y7(),r="Expected a function",n=Math.max,i=Math.min;function l(o,d,u){var h,f,x,p,v,b,y=0,j=!1,w=!1,S=!0;if(typeof o!="function")throw new TypeError(r);d=a(d)||0,e(u)&&(j=!!u.leading,w="maxWait"in u,x=w?n(a(u.maxWait)||0,d):x,S="trailing"in u?!!u.trailing:S);function O(z){var k=h,F=f;return h=f=void 0,y=z,p=o.apply(F,k),p}function _(z){return y=z,v=setTimeout(D,d),j?O(z):p}function E(z){var k=z-b,F=z-y,P=d-k;return w?i(P,x-F):P}function A(z){var k=z-b,F=z-y;return b===void 0||k>=d||k<0||w&&F>=x}function D(){var z=s();if(A(z))return L(z);v=setTimeout(D,E(z))}function L(z){return v=void 0,S&&h?O(z):(h=f=void 0,p)}function B(){v!==void 0&&clearTimeout(v),y=0,h=b=f=v=void 0}function I(){return v===void 0?p:L(s())}function T(){var z=s(),k=A(z);if(h=arguments,f=this,b=z,k){if(v===void 0)return _(b);if(w)return clearTimeout(v),v=setTimeout(D,d),O(b)}return v===void 0&&(v=setTimeout(D,d)),p}return T.cancel=B,T.flush=I,T}return kw=l,kw}var Ow,T3;function uge(){if(T3)return Ow;T3=1;var e=dge(),s=rc(),a="Expected a function";function r(n,i,l){var o=!0,d=!0;if(typeof n!="function")throw new TypeError(a);return s(l)&&(o="leading"in l?!!l.leading:o,d="trailing"in l?!!l.trailing:d),e(n,i,{leading:o,maxWait:i,trailing:d})}return Ow=r,Ow}var mge=uge();const X7=ra(mge);function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tf(e)}function _3(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function np(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?_3(Object(a),!0).forEach(function(r){fge(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_3(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function fge(e,s,a){return s=hge(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function hge(e){var s=xge(e,"string");return Tf(s)=="symbol"?s:s+""}function xge(e,s){if(Tf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function pge(e,s){return yge(e)||vge(e,s)||bge(e,s)||gge()}function gge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(e,s){if(e){if(typeof e=="string")return k3(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k3(e,s)}}function k3(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function vge(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function yge(e){if(Array.isArray(e))return e}var O3=C.forwardRef(function(e,s){var a=e.aspect,r=e.initialDimension,n=r===void 0?{width:-1,height:-1}:r,i=e.width,l=i===void 0?"100%":i,o=e.height,d=o===void 0?"100%":o,u=e.minWidth,h=u===void 0?0:u,f=e.minHeight,x=e.maxHeight,p=e.children,v=e.debounce,b=v===void 0?0:v,y=e.id,j=e.className,w=e.onResize,S=e.style,O=S===void 0?{}:S,_=C.useRef(null),E=C.useRef();E.current=w,C.useImperativeHandle(s,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var A=C.useState({containerWidth:n.width,containerHeight:n.height}),D=pge(A,2),L=D[0],B=D[1],I=C.useCallback(function(z,k){B(function(F){var P=Math.round(z),G=Math.round(k);return F.containerWidth===P&&F.containerHeight===G?F:{containerWidth:P,containerHeight:G}})},[]);C.useEffect(function(){var z=function(W){var ee,H=W[0].contentRect,M=H.width,X=H.height;I(M,X),(ee=E.current)===null||ee===void 0||ee.call(E,M,X)};b>0&&(z=X7(z,b,{trailing:!0,leading:!1}));var k=new ResizeObserver(z),F=_.current.getBoundingClientRect(),P=F.width,G=F.height;return I(P,G),k.observe(_.current),function(){k.disconnect()}},[I,b]);var T=C.useMemo(function(){var z=L.containerWidth,k=L.containerHeight;if(z<0||k<0)return null;zl(Mc(l)||Mc(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,d),zl(!a||a>0,"The aspect(%s) must be greater than zero.",a);var F=Mc(l)?z:l,P=Mc(d)?k:d;a&&a>0&&(F?P=F/a:P&&(F=P*a),x&&P>x&&(P=x)),zl(F>0||P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,P,l,d,h,f,a);var G=!Array.isArray(p)&&Ul(p.type).endsWith("Chart");return ke.Children.map(p,function(Y){return ke.isValidElement(Y)?C.cloneElement(Y,np({width:F,height:P},G?{style:np({height:"100%",width:"100%",maxHeight:P,maxWidth:F},Y.props.style)}:{})):Y})},[a,p,d,x,f,h,L,l]);return ke.createElement("div",{id:y?"".concat(y):void 0,className:Is("recharts-responsive-container",j),style:np(np({},O),{},{width:l,height:d,minWidth:h,minHeight:f,maxHeight:x}),ref:_},T)}),Z7=function(s){return null};Z7.displayName="Cell";function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_f(e)}function I3(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function v2(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?I3(Object(a),!0).forEach(function(r){Nge(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I3(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Nge(e,s,a){return s=jge(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function jge(e){var s=wge(e,"string");return _f(s)=="symbol"?s:s+""}function wge(e,s){if(_f(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var hu={widthCache:{},cacheCount:0},Sge=2e3,Age={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},R3="recharts_measurement_span";function Ege(e){var s=v2({},e);return Object.keys(s).forEach(function(a){s[a]||delete s[a]}),s}var Xm=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s==null||N0.isSsr)return{width:0,height:0};var r=Ege(a),n=JSON.stringify({text:s,copyStyle:r});if(hu.widthCache[n])return hu.widthCache[n];try{var i=document.getElementById(R3);i||(i=document.createElement("span"),i.setAttribute("id",R3),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=v2(v2({},Age),r);Object.assign(i.style,l),i.textContent="".concat(s);var o=i.getBoundingClientRect(),d={width:o.width,height:o.height};return hu.widthCache[n]=d,++hu.cacheCount>Sge&&(hu.cacheCount=0,hu.widthCache={}),d}catch{return{width:0,height:0}}},Cge=function(s){return{top:s.top+window.scrollY-document.documentElement.clientTop,left:s.left+window.scrollX-document.documentElement.clientLeft}};function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},kf(e)}function lg(e,s){return Oge(e)||kge(e,s)||_ge(e,s)||Tge()}function Tge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ge(e,s){if(e){if(typeof e=="string")return P3(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P3(e,s)}}function P3(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function kge(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function Oge(e){if(Array.isArray(e))return e}function Ige(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function D3(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pge(r.key),r)}}function Rge(e,s,a){return s&&D3(e.prototype,s),a&&D3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pge(e){var s=Dge(e,"string");return kf(s)=="symbol"?s:s+""}function Dge(e,s){if(kf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var M3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,L3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Mge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Lge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,eU={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Fge=Object.keys(eU),Nu="NaN";function Uge(e,s){return e*eU[s]}var ip=(function(){function e(s,a){Ige(this,e),this.num=s,this.unit=a,this.num=s,this.unit=a,Number.isNaN(s)&&(this.unit=""),a!==""&&!Mge.test(a)&&(this.num=NaN,this.unit=""),Fge.includes(a)&&(this.num=Uge(s,a),this.unit="px")}return Rge(e,[{key:"add",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,n=(r=Lge.exec(a))!==null&&r!==void 0?r:[],i=lg(n,3),l=i[1],o=i[2];return new e(parseFloat(l),o??"")}}])})();function tU(e){if(e.includes(Nu))return Nu;for(var s=e;s.includes("*")||s.includes("/");){var a,r=(a=M3.exec(s))!==null&&a!==void 0?a:[],n=lg(r,4),i=n[1],l=n[2],o=n[3],d=ip.parse(i??""),u=ip.parse(o??""),h=l==="*"?d.multiply(u):d.divide(u);if(h.isNaN())return Nu;s=s.replace(M3,h.toString())}for(;s.includes("+")||/.-\d+(?:\.\d+)?/.test(s);){var f,x=(f=L3.exec(s))!==null&&f!==void 0?f:[],p=lg(x,4),v=p[1],b=p[2],y=p[3],j=ip.parse(v??""),w=ip.parse(y??""),S=b==="+"?j.add(w):j.subtract(w);if(S.isNaN())return Nu;s=s.replace(L3,S.toString())}return s}var F3=/\(([^()]*)\)/;function zge(e){for(var s=e;s.includes("(");){var a=F3.exec(s),r=lg(a,2),n=r[1];s=s.replace(F3,tU(n))}return s}function Bge(e){var s=e.replace(/\s+/g,"");return s=zge(s),s=tU(s),s}function $ge(e){try{return Bge(e)}catch{return Nu}}function Iw(e){var s=$ge(e.slice(5,-1));return s===Nu?"":s}var qge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Hge=["dx","dy","angle","className","breakAll"];function y2(){return y2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},y2.apply(this,arguments)}function U3(e,s){if(e==null)return{};var a=Vge(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vge(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function z3(e,s){return Kge(e)||Qge(e,s)||Wge(e,s)||Gge()}function Gge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wge(e,s){if(e){if(typeof e=="string")return B3(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B3(e,s)}}function B3(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Qge(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function Kge(e){if(Array.isArray(e))return e}var sU=/[ \f\n\r\t\v\u2028\u2029]+/,aU=function(s){var a=s.children,r=s.breakAll,n=s.style;try{var i=[];Ss(a)||(r?i=a.toString().split(""):i=a.toString().split(sU));var l=i.map(function(d){return{word:d,width:Xm(d,n).width}}),o=r?0:Xm("",n).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},Jge=function(s,a,r,n,i){var l=s.maxLines,o=s.children,d=s.style,u=s.breakAll,h=dt(l),f=o,x=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(P,G){var Y=G.word,W=G.width,ee=P[P.length-1];if(ee&&(n==null||i||ee.width+W+r<Number(n)))ee.words.push(Y),ee.width+=W+r;else{var H={words:[Y],width:W};P.push(H)}return P},[])},p=x(a),v=function(F){return F.reduce(function(P,G){return P.width>G.width?P:G})};if(!h)return p;for(var b="",y=function(F){var P=f.slice(0,F),G=aU({breakAll:u,style:d,children:P+b}).wordsWithComputedWidth,Y=x(G),W=Y.length>l||v(Y).width>Number(n);return[W,Y]},j=0,w=f.length-1,S=0,O;j<=w&&S<=f.length-1;){var _=Math.floor((j+w)/2),E=_-1,A=y(E),D=z3(A,2),L=D[0],B=D[1],I=y(_),T=z3(I,1),z=T[0];if(!L&&!z&&(j=_+1),L&&z&&(w=_-1),!L&&z){O=B;break}S++}return O||p},$3=function(s){var a=Ss(s)?[]:s.toString().split(sU);return[{words:a}]},Yge=function(s){var a=s.width,r=s.scaleToFit,n=s.children,i=s.style,l=s.breakAll,o=s.maxLines;if((a||r)&&!N0.isSsr){var d,u,h=aU({breakAll:l,children:n,style:i});if(h){var f=h.wordsWithComputedWidth,x=h.spaceWidth;d=f,u=x}else return $3(n);return Jge({breakAll:l,children:n,maxLines:o,style:i},d,u,a,r)}return $3(n)},q3="#808080",og=function(s){var a=s.x,r=a===void 0?0:a,n=s.y,i=n===void 0?0:n,l=s.lineHeight,o=l===void 0?"1em":l,d=s.capHeight,u=d===void 0?"0.71em":d,h=s.scaleToFit,f=h===void 0?!1:h,x=s.textAnchor,p=x===void 0?"start":x,v=s.verticalAnchor,b=v===void 0?"end":v,y=s.fill,j=y===void 0?q3:y,w=U3(s,qge),S=C.useMemo(function(){return Yge({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),O=w.dx,_=w.dy,E=w.angle,A=w.className,D=w.breakAll,L=U3(w,Hge);if(!ur(r)||!ur(i))return null;var B=r+(dt(O)?O:0),I=i+(dt(_)?_:0),T;switch(b){case"start":T=Iw("calc(".concat(u,")"));break;case"middle":T=Iw("calc(".concat((S.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:T=Iw("calc(".concat(S.length-1," * -").concat(o,")"));break}var z=[];if(f){var k=S[0].width,F=w.width;z.push("scale(".concat((dt(F)?F/k:1)/k,")"))}return E&&z.push("rotate(".concat(E,", ").concat(B,", ").concat(I,")")),z.length&&(L.transform=z.join(" ")),ke.createElement("text",y2({},ys(L,!0),{x:B,y:I,className:Is("recharts-text",A),textAnchor:p,fill:j.includes("url")?q3:j}),S.map(function(P,G){var Y=P.words.join(D?"":" ");return ke.createElement("tspan",{x:B,dy:G===0?T:o,key:"".concat(Y,"-").concat(G)},Y)}))};function Bo(e,s){return e==null||s==null?NaN:e<s?-1:e>s?1:e>=s?0:NaN}function Xge(e,s){return e==null||s==null?NaN:s<e?-1:s>e?1:s>=e?0:NaN}function FE(e){let s,a,r;e.length!==2?(s=Bo,a=(o,d)=>Bo(e(o),d),r=(o,d)=>e(o)-d):(s=e===Bo||e===Xge?e:Zge,a=e,r=e);function n(o,d,u=0,h=o.length){if(u<h){if(s(d,d)!==0)return h;do{const f=u+h>>>1;a(o[f],d)<0?u=f+1:h=f}while(u<h)}return u}function i(o,d,u=0,h=o.length){if(u<h){if(s(d,d)!==0)return h;do{const f=u+h>>>1;a(o[f],d)<=0?u=f+1:h=f}while(u<h)}return u}function l(o,d,u=0,h=o.length){const f=n(o,d,u,h-1);return f>u&&r(o[f-1],d)>-r(o[f],d)?f-1:f}return{left:n,center:l,right:i}}function Zge(){return 0}function rU(e){return e===null?NaN:+e}function*ebe(e,s){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const tbe=FE(Bo),yh=tbe.right;FE(rU).center;class H3 extends Map{constructor(s,a=rbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),s!=null)for(const[r,n]of s)this.set(r,n)}get(s){return super.get(V3(this,s))}has(s){return super.has(V3(this,s))}set(s,a){return super.set(sbe(this,s),a)}delete(s){return super.delete(abe(this,s))}}function V3({_intern:e,_key:s},a){const r=s(a);return e.has(r)?e.get(r):a}function sbe({_intern:e,_key:s},a){const r=s(a);return e.has(r)?e.get(r):(e.set(r,a),a)}function abe({_intern:e,_key:s},a){const r=s(a);return e.has(r)&&(a=e.get(r),e.delete(r)),a}function rbe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nbe(e=Bo){if(e===Bo)return nU;if(typeof e!="function")throw new TypeError("compare is not a function");return(s,a)=>{const r=e(s,a);return r||r===0?r:(e(a,a)===0)-(e(s,s)===0)}}function nU(e,s){return(e==null||!(e>=e))-(s==null||!(s>=s))||(e<s?-1:e>s?1:0)}const ibe=Math.sqrt(50),lbe=Math.sqrt(10),obe=Math.sqrt(2);function cg(e,s,a){const r=(s-e)/Math.max(0,a),n=Math.floor(Math.log10(r)),i=r/Math.pow(10,n),l=i>=ibe?10:i>=lbe?5:i>=obe?2:1;let o,d,u;return n<0?(u=Math.pow(10,-n)/l,o=Math.round(e*u),d=Math.round(s*u),o/u<e&&++o,d/u>s&&--d,u=-u):(u=Math.pow(10,n)*l,o=Math.round(e/u),d=Math.round(s/u),o*u<e&&++o,d*u>s&&--d),d<o&&.5<=a&&a<2?cg(e,s,a*2):[o,d,u]}function N2(e,s,a){if(s=+s,e=+e,a=+a,!(a>0))return[];if(e===s)return[e];const r=s<e,[n,i,l]=r?cg(s,e,a):cg(e,s,a);if(!(i>=n))return[];const o=i-n+1,d=new Array(o);if(r)if(l<0)for(let u=0;u<o;++u)d[u]=(i-u)/-l;else for(let u=0;u<o;++u)d[u]=(i-u)*l;else if(l<0)for(let u=0;u<o;++u)d[u]=(n+u)/-l;else for(let u=0;u<o;++u)d[u]=(n+u)*l;return d}function j2(e,s,a){return s=+s,e=+e,a=+a,cg(e,s,a)[2]}function w2(e,s,a){s=+s,e=+e,a=+a;const r=s<e,n=r?j2(s,e,a):j2(e,s,a);return(r?-1:1)*(n<0?1/-n:n)}function G3(e,s){let a;for(const r of e)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function W3(e,s){let a;for(const r of e)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function iU(e,s,a=0,r=1/0,n){if(s=Math.floor(s),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(e.length-1,r)),!(a<=s&&s<=r))return e;for(n=n===void 0?nU:nbe(n);r>a;){if(r-a>600){const d=r-a+1,u=s-a+1,h=Math.log(d),f=.5*Math.exp(2*h/3),x=.5*Math.sqrt(h*f*(d-f)/d)*(u-d/2<0?-1:1),p=Math.max(a,Math.floor(s-u*f/d+x)),v=Math.min(r,Math.floor(s+(d-u)*f/d+x));iU(e,s,p,v,n)}const i=e[s];let l=a,o=r;for(Sm(e,a,s),n(e[r],i)>0&&Sm(e,a,r);l<o;){for(Sm(e,l,o),++l,--o;n(e[l],i)<0;)++l;for(;n(e[o],i)>0;)--o}n(e[a],i)===0?Sm(e,a,o):(++o,Sm(e,o,r)),o<=s&&(a=o+1),s<=o&&(r=o-1)}return e}function Sm(e,s,a){const r=e[s];e[s]=e[a],e[a]=r}function cbe(e,s,a){if(e=Float64Array.from(ebe(e)),!(!(r=e.length)||isNaN(s=+s))){if(s<=0||r<2)return W3(e);if(s>=1)return G3(e);var r,n=(r-1)*s,i=Math.floor(n),l=G3(iU(e,i).subarray(0,i+1)),o=W3(e.subarray(i+1));return l+(o-l)*(n-i)}}function dbe(e,s,a=rU){if(!(!(r=e.length)||isNaN(s=+s))){if(s<=0||r<2)return+a(e[0],0,e);if(s>=1)return+a(e[r-1],r-1,e);var r,n=(r-1)*s,i=Math.floor(n),l=+a(e[i],i,e),o=+a(e[i+1],i+1,e);return l+(o-l)*(n-i)}}function ube(e,s,a){e=+e,s=+s,a=(n=arguments.length)<2?(s=e,e=0,1):n<3?1:+a;for(var r=-1,n=Math.max(0,Math.ceil((s-e)/a))|0,i=new Array(n);++r<n;)i[r]=e+r*a;return i}function yi(e,s){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(s).domain(e);break}return this}function Zl(e,s){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const S2=Symbol("implicit");function UE(){var e=new H3,s=[],a=[],r=S2;function n(i){let l=e.get(i);if(l===void 0){if(r!==S2)return r;e.set(i,l=s.push(i)-1)}return a[l%a.length]}return n.domain=function(i){if(!arguments.length)return s.slice();s=[],e=new H3;for(const l of i)e.has(l)||e.set(l,s.push(l)-1);return n},n.range=function(i){return arguments.length?(a=Array.from(i),n):a.slice()},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return UE(s,a).unknown(r)},yi.apply(n,arguments),n}function Of(){var e=UE().unknown(void 0),s=e.domain,a=e.range,r=0,n=1,i,l,o=!1,d=0,u=0,h=.5;delete e.unknown;function f(){var x=s().length,p=n<r,v=p?n:r,b=p?r:n;i=(b-v)/Math.max(1,x-d+u*2),o&&(i=Math.floor(i)),v+=(b-v-i*(x-d))*h,l=i*(1-d),o&&(v=Math.round(v),l=Math.round(l));var y=ube(x).map(function(j){return v+i*j});return a(p?y.reverse():y)}return e.domain=function(x){return arguments.length?(s(x),f()):s()},e.range=function(x){return arguments.length?([r,n]=x,r=+r,n=+n,f()):[r,n]},e.rangeRound=function(x){return[r,n]=x,r=+r,n=+n,o=!0,f()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(x){return arguments.length?(o=!!x,f()):o},e.padding=function(x){return arguments.length?(d=Math.min(1,u=+x),f()):d},e.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),f()):d},e.paddingOuter=function(x){return arguments.length?(u=+x,f()):u},e.align=function(x){return arguments.length?(h=Math.max(0,Math.min(1,x)),f()):h},e.copy=function(){return Of(s(),[r,n]).round(o).paddingInner(d).paddingOuter(u).align(h)},yi.apply(f(),arguments)}function lU(e){var s=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lU(s())},e}function Zm(){return lU(Of.apply(null,arguments).paddingInner(1))}function zE(e,s,a){e.prototype=s.prototype=a,a.constructor=e}function oU(e,s){var a=Object.create(e.prototype);for(var r in s)a[r]=s[r];return a}function Nh(){}var If=.7,dg=1/If,Ru="\\s*([+-]?\\d+)\\s*",Rf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",el="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mbe=/^#([0-9a-f]{3,8})$/,fbe=new RegExp(`^rgb\\(${Ru},${Ru},${Ru}\\)$`),hbe=new RegExp(`^rgb\\(${el},${el},${el}\\)$`),xbe=new RegExp(`^rgba\\(${Ru},${Ru},${Ru},${Rf}\\)$`),pbe=new RegExp(`^rgba\\(${el},${el},${el},${Rf}\\)$`),gbe=new RegExp(`^hsl\\(${Rf},${el},${el}\\)$`),bbe=new RegExp(`^hsla\\(${Rf},${el},${el},${Rf}\\)$`),Q3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zE(Nh,Pf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:K3,formatHex:K3,formatHex8:vbe,formatHsl:ybe,formatRgb:J3,toString:J3});function K3(){return this.rgb().formatHex()}function vbe(){return this.rgb().formatHex8()}function ybe(){return cU(this).formatHsl()}function J3(){return this.rgb().formatRgb()}function Pf(e){var s,a;return e=(e+"").trim().toLowerCase(),(s=mbe.exec(e))?(a=s[1].length,s=parseInt(s[1],16),a===6?Y3(s):a===3?new xn(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):a===8?lp(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):a===4?lp(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=fbe.exec(e))?new xn(s[1],s[2],s[3],1):(s=hbe.exec(e))?new xn(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=xbe.exec(e))?lp(s[1],s[2],s[3],s[4]):(s=pbe.exec(e))?lp(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=gbe.exec(e))?eD(s[1],s[2]/100,s[3]/100,1):(s=bbe.exec(e))?eD(s[1],s[2]/100,s[3]/100,s[4]):Q3.hasOwnProperty(e)?Y3(Q3[e]):e==="transparent"?new xn(NaN,NaN,NaN,0):null}function Y3(e){return new xn(e>>16&255,e>>8&255,e&255,1)}function lp(e,s,a,r){return r<=0&&(e=s=a=NaN),new xn(e,s,a,r)}function Nbe(e){return e instanceof Nh||(e=Pf(e)),e?(e=e.rgb(),new xn(e.r,e.g,e.b,e.opacity)):new xn}function A2(e,s,a,r){return arguments.length===1?Nbe(e):new xn(e,s,a,r??1)}function xn(e,s,a,r){this.r=+e,this.g=+s,this.b=+a,this.opacity=+r}zE(xn,A2,oU(Nh,{brighter(e){return e=e==null?dg:Math.pow(dg,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?If:Math.pow(If,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xn(Kc(this.r),Kc(this.g),Kc(this.b),ug(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:X3,formatHex:X3,formatHex8:jbe,formatRgb:Z3,toString:Z3}));function X3(){return`#${Lc(this.r)}${Lc(this.g)}${Lc(this.b)}`}function jbe(){return`#${Lc(this.r)}${Lc(this.g)}${Lc(this.b)}${Lc((isNaN(this.opacity)?1:this.opacity)*255)}`}function Z3(){const e=ug(this.opacity);return`${e===1?"rgb(":"rgba("}${Kc(this.r)}, ${Kc(this.g)}, ${Kc(this.b)}${e===1?")":`, ${e})`}`}function ug(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Kc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lc(e){return e=Kc(e),(e<16?"0":"")+e.toString(16)}function eD(e,s,a,r){return r<=0?e=s=a=NaN:a<=0||a>=1?e=s=NaN:s<=0&&(e=NaN),new _i(e,s,a,r)}function cU(e){if(e instanceof _i)return new _i(e.h,e.s,e.l,e.opacity);if(e instanceof Nh||(e=Pf(e)),!e)return new _i;if(e instanceof _i)return e;e=e.rgb();var s=e.r/255,a=e.g/255,r=e.b/255,n=Math.min(s,a,r),i=Math.max(s,a,r),l=NaN,o=i-n,d=(i+n)/2;return o?(s===i?l=(a-r)/o+(a<r)*6:a===i?l=(r-s)/o+2:l=(s-a)/o+4,o/=d<.5?i+n:2-i-n,l*=60):o=d>0&&d<1?0:l,new _i(l,o,d,e.opacity)}function wbe(e,s,a,r){return arguments.length===1?cU(e):new _i(e,s,a,r??1)}function _i(e,s,a,r){this.h=+e,this.s=+s,this.l=+a,this.opacity=+r}zE(_i,wbe,oU(Nh,{brighter(e){return e=e==null?dg:Math.pow(dg,e),new _i(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?If:Math.pow(If,e),new _i(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,s=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*s,n=2*a-r;return new xn(Rw(e>=240?e-240:e+120,n,r),Rw(e,n,r),Rw(e<120?e+240:e-120,n,r),this.opacity)},clamp(){return new _i(tD(this.h),op(this.s),op(this.l),ug(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ug(this.opacity);return`${e===1?"hsl(":"hsla("}${tD(this.h)}, ${op(this.s)*100}%, ${op(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tD(e){return e=(e||0)%360,e<0?e+360:e}function op(e){return Math.max(0,Math.min(1,e||0))}function Rw(e,s,a){return(e<60?s+(a-s)*e/60:e<180?a:e<240?s+(a-s)*(240-e)/60:s)*255}const BE=e=>()=>e;function Sbe(e,s){return function(a){return e+a*s}}function Abe(e,s,a){return e=Math.pow(e,a),s=Math.pow(s,a)-e,a=1/a,function(r){return Math.pow(e+r*s,a)}}function Ebe(e){return(e=+e)==1?dU:function(s,a){return a-s?Abe(s,a,e):BE(isNaN(s)?a:s)}}function dU(e,s){var a=s-e;return a?Sbe(e,a):BE(isNaN(e)?s:e)}const sD=(function e(s){var a=Ebe(s);function r(n,i){var l=a((n=A2(n)).r,(i=A2(i)).r),o=a(n.g,i.g),d=a(n.b,i.b),u=dU(n.opacity,i.opacity);return function(h){return n.r=l(h),n.g=o(h),n.b=d(h),n.opacity=u(h),n+""}}return r.gamma=e,r})(1);function Cbe(e,s){s||(s=[]);var a=e?Math.min(s.length,e.length):0,r=s.slice(),n;return function(i){for(n=0;n<a;++n)r[n]=e[n]*(1-i)+s[n]*i;return r}}function Tbe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _be(e,s){var a=s?s.length:0,r=e?Math.min(a,e.length):0,n=new Array(r),i=new Array(a),l;for(l=0;l<r;++l)n[l]=j0(e[l],s[l]);for(;l<a;++l)i[l]=s[l];return function(o){for(l=0;l<r;++l)i[l]=n[l](o);return i}}function kbe(e,s){var a=new Date;return e=+e,s=+s,function(r){return a.setTime(e*(1-r)+s*r),a}}function mg(e,s){return e=+e,s=+s,function(a){return e*(1-a)+s*a}}function Obe(e,s){var a={},r={},n;(e===null||typeof e!="object")&&(e={}),(s===null||typeof s!="object")&&(s={});for(n in s)n in e?a[n]=j0(e[n],s[n]):r[n]=s[n];return function(i){for(n in a)r[n]=a[n](i);return r}}var E2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pw=new RegExp(E2.source,"g");function Ibe(e){return function(){return e}}function Rbe(e){return function(s){return e(s)+""}}function Pbe(e,s){var a=E2.lastIndex=Pw.lastIndex=0,r,n,i,l=-1,o=[],d=[];for(e=e+"",s=s+"";(r=E2.exec(e))&&(n=Pw.exec(s));)(i=n.index)>a&&(i=s.slice(a,i),o[l]?o[l]+=i:o[++l]=i),(r=r[0])===(n=n[0])?o[l]?o[l]+=n:o[++l]=n:(o[++l]=null,d.push({i:l,x:mg(r,n)})),a=Pw.lastIndex;return a<s.length&&(i=s.slice(a),o[l]?o[l]+=i:o[++l]=i),o.length<2?d[0]?Rbe(d[0].x):Ibe(s):(s=d.length,function(u){for(var h=0,f;h<s;++h)o[(f=d[h]).i]=f.x(u);return o.join("")})}function j0(e,s){var a=typeof s,r;return s==null||a==="boolean"?BE(s):(a==="number"?mg:a==="string"?(r=Pf(s))?(s=r,sD):Pbe:s instanceof Pf?sD:s instanceof Date?kbe:Tbe(s)?Cbe:Array.isArray(s)?_be:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?Obe:mg)(e,s)}function $E(e,s){return e=+e,s=+s,function(a){return Math.round(e*(1-a)+s*a)}}function Dbe(e,s){s===void 0&&(s=e,e=j0);for(var a=0,r=s.length-1,n=s[0],i=new Array(r<0?0:r);a<r;)i[a]=e(n,n=s[++a]);return function(l){var o=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return i[o](l-o)}}function Mbe(e){return function(){return e}}function fg(e){return+e}var aD=[0,1];function an(e){return e}function C2(e,s){return(s-=e=+e)?function(a){return(a-e)/s}:Mbe(isNaN(s)?NaN:.5)}function Lbe(e,s){var a;return e>s&&(a=e,e=s,s=a),function(r){return Math.max(e,Math.min(s,r))}}function Fbe(e,s,a){var r=e[0],n=e[1],i=s[0],l=s[1];return n<r?(r=C2(n,r),i=a(l,i)):(r=C2(r,n),i=a(i,l)),function(o){return i(r(o))}}function Ube(e,s,a){var r=Math.min(e.length,s.length)-1,n=new Array(r),i=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),s=s.slice().reverse());++l<r;)n[l]=C2(e[l],e[l+1]),i[l]=a(s[l],s[l+1]);return function(o){var d=yh(e,o,1,r)-1;return i[d](n[d](o))}}function jh(e,s){return s.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gb(){var e=aD,s=aD,a=j0,r,n,i,l=an,o,d,u;function h(){var x=Math.min(e.length,s.length);return l!==an&&(l=Lbe(e[0],e[x-1])),o=x>2?Ube:Fbe,d=u=null,f}function f(x){return x==null||isNaN(x=+x)?i:(d||(d=o(e.map(r),s,a)))(r(l(x)))}return f.invert=function(x){return l(n((u||(u=o(s,e.map(r),mg)))(x)))},f.domain=function(x){return arguments.length?(e=Array.from(x,fg),h()):e.slice()},f.range=function(x){return arguments.length?(s=Array.from(x),h()):s.slice()},f.rangeRound=function(x){return s=Array.from(x),a=$E,h()},f.clamp=function(x){return arguments.length?(l=x?!0:an,h()):l!==an},f.interpolate=function(x){return arguments.length?(a=x,h()):a},f.unknown=function(x){return arguments.length?(i=x,f):i},function(x,p){return r=x,n=p,h()}}function qE(){return gb()(an,an)}function zbe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hg(e,s){if((a=(e=s?e.toExponential(s-1):e.toExponential()).indexOf("e"))<0)return null;var a,r=e.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+e.slice(a+1)]}function Wu(e){return e=hg(Math.abs(e)),e?e[1]:NaN}function Bbe(e,s){return function(a,r){for(var n=a.length,i=[],l=0,o=e[0],d=0;n>0&&o>0&&(d+o+1>r&&(o=Math.max(1,r-d)),i.push(a.substring(n-=o,n+o)),!((d+=o+1)>r));)o=e[l=(l+1)%e.length];return i.reverse().join(s)}}function $be(e){return function(s){return s.replace(/[0-9]/g,function(a){return e[+a]})}}var qbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Df(e){if(!(s=qbe.exec(e)))throw new Error("invalid format: "+e);var s;return new HE({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}Df.prototype=HE.prototype;function HE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}HE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hbe(e){e:for(var s=e.length,a=1,r=-1,n;a<s;++a)switch(e[a]){case".":r=n=a;break;case"0":r===0&&(r=a),n=a;break;default:if(!+e[a])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(n+1):e}var uU;function Vbe(e,s){var a=hg(e,s);if(!a)return e+"";var r=a[0],n=a[1],i=n-(uU=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,l=r.length;return i===l?r:i>l?r+new Array(i-l+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+hg(e,Math.max(0,s+i-1))[0]}function rD(e,s){var a=hg(e,s);if(!a)return e+"";var r=a[0],n=a[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const nD={"%":(e,s)=>(e*100).toFixed(s),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zbe,e:(e,s)=>e.toExponential(s),f:(e,s)=>e.toFixed(s),g:(e,s)=>e.toPrecision(s),o:e=>Math.round(e).toString(8),p:(e,s)=>rD(e*100,s),r:rD,s:Vbe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function iD(e){return e}var lD=Array.prototype.map,oD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Gbe(e){var s=e.grouping===void 0||e.thousands===void 0?iD:Bbe(lD.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?iD:$be(lD.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Df(f);var x=f.fill,p=f.align,v=f.sign,b=f.symbol,y=f.zero,j=f.width,w=f.comma,S=f.precision,O=f.trim,_=f.type;_==="n"?(w=!0,_="g"):nD[_]||(S===void 0&&(S=12),O=!0,_="g"),(y||x==="0"&&p==="=")&&(y=!0,x="0",p="=");var E=b==="$"?a:b==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",A=b==="$"?r:/[%p]/.test(_)?l:"",D=nD[_],L=/[defgprs%]/.test(_);S=S===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function B(I){var T=E,z=A,k,F,P;if(_==="c")z=D(I)+z,I="";else{I=+I;var G=I<0||1/I<0;if(I=isNaN(I)?d:D(Math.abs(I),S),O&&(I=Hbe(I)),G&&+I==0&&v!=="+"&&(G=!1),T=(G?v==="("?v:o:v==="-"||v==="("?"":v)+T,z=(_==="s"?oD[8+uU/3]:"")+z+(G&&v==="("?")":""),L){for(k=-1,F=I.length;++k<F;)if(P=I.charCodeAt(k),48>P||P>57){z=(P===46?n+I.slice(k+1):I.slice(k))+z,I=I.slice(0,k);break}}}w&&!y&&(I=s(I,1/0));var Y=T.length+I.length+z.length,W=Y<j?new Array(j-Y+1).join(x):"";switch(w&&y&&(I=s(W+I,W.length?j-z.length:1/0),W=""),p){case"<":I=T+I+z+W;break;case"=":I=T+W+I+z;break;case"^":I=W.slice(0,Y=W.length>>1)+T+I+z+W.slice(Y);break;default:I=W+T+I+z;break}return i(I)}return B.toString=function(){return f+""},B}function h(f,x){var p=u((f=Df(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Wu(x)/3)))*3,b=Math.pow(10,-v),y=oD[8+v/3];return function(j){return p(b*j)+y}}return{format:u,formatPrefix:h}}var cp,VE,mU;Wbe({thousands:",",grouping:[3],currency:["$",""]});function Wbe(e){return cp=Gbe(e),VE=cp.format,mU=cp.formatPrefix,cp}function Qbe(e){return Math.max(0,-Wu(Math.abs(e)))}function Kbe(e,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wu(s)/3)))*3-Wu(Math.abs(e)))}function Jbe(e,s){return e=Math.abs(e),s=Math.abs(s)-e,Math.max(0,Wu(s)-Wu(e))+1}function fU(e,s,a,r){var n=w2(e,s,a),i;switch(r=Df(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(s));return r.precision==null&&!isNaN(i=Kbe(n,l))&&(r.precision=i),mU(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Jbe(n,Math.max(Math.abs(e),Math.abs(s))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Qbe(n))&&(r.precision=i-(r.type==="%")*2);break}}return VE(r)}function ic(e){var s=e.domain;return e.ticks=function(a){var r=s();return N2(r[0],r[r.length-1],a??10)},e.tickFormat=function(a,r){var n=s();return fU(n[0],n[n.length-1],a??10,r)},e.nice=function(a){a==null&&(a=10);var r=s(),n=0,i=r.length-1,l=r[n],o=r[i],d,u,h=10;for(o<l&&(u=l,l=o,o=u,u=n,n=i,i=u);h-- >0;){if(u=j2(l,o,a),u===d)return r[n]=l,r[i]=o,s(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;d=u}return e},e}function xg(){var e=qE();return e.copy=function(){return jh(e,xg())},yi.apply(e,arguments),ic(e)}function hU(e){var s;function a(r){return r==null||isNaN(r=+r)?s:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(e=Array.from(r,fg),a):e.slice()},a.unknown=function(r){return arguments.length?(s=r,a):s},a.copy=function(){return hU(e).unknown(s)},e=arguments.length?Array.from(e,fg):[0,1],ic(a)}function xU(e,s){e=e.slice();var a=0,r=e.length-1,n=e[a],i=e[r],l;return i<n&&(l=a,a=r,r=l,l=n,n=i,i=l),e[a]=s.floor(n),e[r]=s.ceil(i),e}function cD(e){return Math.log(e)}function dD(e){return Math.exp(e)}function Ybe(e){return-Math.log(-e)}function Xbe(e){return-Math.exp(-e)}function Zbe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function eve(e){return e===10?Zbe:e===Math.E?Math.exp:s=>Math.pow(e,s)}function tve(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),s=>Math.log(s)/e)}function uD(e){return(s,a)=>-e(-s,a)}function GE(e){const s=e(cD,dD),a=s.domain;let r=10,n,i;function l(){return n=tve(r),i=eve(r),a()[0]<0?(n=uD(n),i=uD(i),e(Ybe,Xbe)):e(cD,dD),s}return s.base=function(o){return arguments.length?(r=+o,l()):r},s.domain=function(o){return arguments.length?(a(o),l()):a()},s.ticks=o=>{const d=a();let u=d[0],h=d[d.length-1];const f=h<u;f&&([u,h]=[h,u]);let x=n(u),p=n(h),v,b;const y=o==null?10:+o;let j=[];if(!(r%1)&&p-x<y){if(x=Math.floor(x),p=Math.ceil(p),u>0){for(;x<=p;++x)for(v=1;v<r;++v)if(b=x<0?v/i(-x):v*i(x),!(b<u)){if(b>h)break;j.push(b)}}else for(;x<=p;++x)for(v=r-1;v>=1;--v)if(b=x>0?v/i(-x):v*i(x),!(b<u)){if(b>h)break;j.push(b)}j.length*2<y&&(j=N2(u,h,y))}else j=N2(x,p,Math.min(p-x,y)).map(i);return f?j.reverse():j},s.tickFormat=(o,d)=>{if(o==null&&(o=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=Df(d)).precision==null&&(d.trim=!0),d=VE(d)),o===1/0)return d;const u=Math.max(1,r*o/s.ticks().length);return h=>{let f=h/i(Math.round(n(h)));return f*r<r-.5&&(f*=r),f<=u?d(h):""}},s.nice=()=>a(xU(a(),{floor:o=>i(Math.floor(n(o))),ceil:o=>i(Math.ceil(n(o)))})),s}function pU(){const e=GE(gb()).domain([1,10]);return e.copy=()=>jh(e,pU()).base(e.base()),yi.apply(e,arguments),e}function mD(e){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/e))}}function fD(e){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*e}}function WE(e){var s=1,a=e(mD(s),fD(s));return a.constant=function(r){return arguments.length?e(mD(s=+r),fD(s)):s},ic(a)}function gU(){var e=WE(gb());return e.copy=function(){return jh(e,gU()).constant(e.constant())},yi.apply(e,arguments)}function hD(e){return function(s){return s<0?-Math.pow(-s,e):Math.pow(s,e)}}function sve(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ave(e){return e<0?-e*e:e*e}function QE(e){var s=e(an,an),a=1;function r(){return a===1?e(an,an):a===.5?e(sve,ave):e(hD(a),hD(1/a))}return s.exponent=function(n){return arguments.length?(a=+n,r()):a},ic(s)}function KE(){var e=QE(gb());return e.copy=function(){return jh(e,KE()).exponent(e.exponent())},yi.apply(e,arguments),e}function rve(){return KE.apply(null,arguments).exponent(.5)}function xD(e){return Math.sign(e)*e*e}function nve(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function bU(){var e=qE(),s=[0,1],a=!1,r;function n(i){var l=nve(e(i));return isNaN(l)?r:a?Math.round(l):l}return n.invert=function(i){return e.invert(xD(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((s=Array.from(i,fg)).map(xD)),n):s.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(a=!!i,n):a},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return bU(e.domain(),s).round(a).clamp(e.clamp()).unknown(r)},yi.apply(n,arguments),ic(n)}function vU(){var e=[],s=[],a=[],r;function n(){var l=0,o=Math.max(1,s.length);for(a=new Array(o-1);++l<o;)a[l-1]=dbe(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?r:s[yh(a,l)]}return i.invertExtent=function(l){var o=s.indexOf(l);return o<0?[NaN,NaN]:[o>0?a[o-1]:e[0],o<a.length?a[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Bo),n()},i.range=function(l){return arguments.length?(s=Array.from(l),n()):s.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.quantiles=function(){return a.slice()},i.copy=function(){return vU().domain(e).range(s).unknown(r)},yi.apply(i,arguments)}function yU(){var e=0,s=1,a=1,r=[.5],n=[0,1],i;function l(d){return d!=null&&d<=d?n[yh(r,d,0,a)]:i}function o(){var d=-1;for(r=new Array(a);++d<a;)r[d]=((d+1)*s-(d-a)*e)/(a+1);return l}return l.domain=function(d){return arguments.length?([e,s]=d,e=+e,s=+s,o()):[e,s]},l.range=function(d){return arguments.length?(a=(n=Array.from(d)).length-1,o()):n.slice()},l.invertExtent=function(d){var u=n.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=a?[r[a-1],s]:[r[u-1],r[u]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return yU().domain([e,s]).range(n).unknown(i)},yi.apply(ic(l),arguments)}function NU(){var e=[.5],s=[0,1],a,r=1;function n(i){return i!=null&&i<=i?s[yh(e,i,0,r)]:a}return n.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,s.length-1),n):e.slice()},n.range=function(i){return arguments.length?(s=Array.from(i),r=Math.min(e.length,s.length-1),n):s.slice()},n.invertExtent=function(i){var l=s.indexOf(i);return[e[l-1],e[l]]},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return NU().domain(e).range(s).unknown(a)},yi.apply(n,arguments)}const Dw=new Date,Mw=new Date;function xr(e,s,a,r){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),s(i,1),e(i),i),n.round=i=>{const l=n(i),o=n.ceil(i);return i-l<o-i?l:o},n.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),n.range=(i,l,o)=>{const d=[];if(i=n.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return d;let u;do d.push(u=new Date(+i)),s(i,o),e(i);while(u<i&&i<l);return d},n.filter=i=>xr(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;s(l,-1),!i(l););else for(;--o>=0;)for(;s(l,1),!i(l););}),a&&(n.count=(i,l)=>(Dw.setTime(+i),Mw.setTime(+l),e(Dw),e(Mw),Math.floor(a(Dw,Mw))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(r?l=>r(l)%i===0:l=>n.count(0,l)%i===0):n)),n}const pg=xr(()=>{},(e,s)=>{e.setTime(+e+s)},(e,s)=>s-e);pg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xr(s=>{s.setTime(Math.floor(s/e)*e)},(s,a)=>{s.setTime(+s+a*e)},(s,a)=>(a-s)/e):pg);pg.range;const Ol=1e3,di=Ol*60,Il=di*60,Hl=Il*24,JE=Hl*7,pD=Hl*30,Lw=Hl*365,Fc=xr(e=>{e.setTime(e-e.getMilliseconds())},(e,s)=>{e.setTime(+e+s*Ol)},(e,s)=>(s-e)/Ol,e=>e.getUTCSeconds());Fc.range;const YE=xr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ol)},(e,s)=>{e.setTime(+e+s*di)},(e,s)=>(s-e)/di,e=>e.getMinutes());YE.range;const XE=xr(e=>{e.setUTCSeconds(0,0)},(e,s)=>{e.setTime(+e+s*di)},(e,s)=>(s-e)/di,e=>e.getUTCMinutes());XE.range;const ZE=xr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ol-e.getMinutes()*di)},(e,s)=>{e.setTime(+e+s*Il)},(e,s)=>(s-e)/Il,e=>e.getHours());ZE.range;const eC=xr(e=>{e.setUTCMinutes(0,0,0)},(e,s)=>{e.setTime(+e+s*Il)},(e,s)=>(s-e)/Il,e=>e.getUTCHours());eC.range;const wh=xr(e=>e.setHours(0,0,0,0),(e,s)=>e.setDate(e.getDate()+s),(e,s)=>(s-e-(s.getTimezoneOffset()-e.getTimezoneOffset())*di)/Hl,e=>e.getDate()-1);wh.range;const bb=xr(e=>{e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCDate(e.getUTCDate()+s)},(e,s)=>(s-e)/Hl,e=>e.getUTCDate()-1);bb.range;const jU=xr(e=>{e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCDate(e.getUTCDate()+s)},(e,s)=>(s-e)/Hl,e=>Math.floor(e/Hl));jU.range;function yd(e){return xr(s=>{s.setDate(s.getDate()-(s.getDay()+7-e)%7),s.setHours(0,0,0,0)},(s,a)=>{s.setDate(s.getDate()+a*7)},(s,a)=>(a-s-(a.getTimezoneOffset()-s.getTimezoneOffset())*di)/JE)}const vb=yd(0),gg=yd(1),ive=yd(2),lve=yd(3),Qu=yd(4),ove=yd(5),cve=yd(6);vb.range;gg.range;ive.range;lve.range;Qu.range;ove.range;cve.range;function Nd(e){return xr(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-e)%7),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCDate(s.getUTCDate()+a*7)},(s,a)=>(a-s)/JE)}const yb=Nd(0),bg=Nd(1),dve=Nd(2),uve=Nd(3),Ku=Nd(4),mve=Nd(5),fve=Nd(6);yb.range;bg.range;dve.range;uve.range;Ku.range;mve.range;fve.range;const tC=xr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,s)=>{e.setMonth(e.getMonth()+s)},(e,s)=>s.getMonth()-e.getMonth()+(s.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tC.range;const sC=xr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCMonth(e.getUTCMonth()+s)},(e,s)=>s.getUTCMonth()-e.getUTCMonth()+(s.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());sC.range;const Vl=xr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,s)=>{e.setFullYear(e.getFullYear()+s)},(e,s)=>s.getFullYear()-e.getFullYear(),e=>e.getFullYear());Vl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xr(s=>{s.setFullYear(Math.floor(s.getFullYear()/e)*e),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,a)=>{s.setFullYear(s.getFullYear()+a*e)});Vl.range;const Gl=xr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCFullYear(e.getUTCFullYear()+s)},(e,s)=>s.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Gl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xr(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/e)*e),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCFullYear(s.getUTCFullYear()+a*e)});Gl.range;function wU(e,s,a,r,n,i){const l=[[Fc,1,Ol],[Fc,5,5*Ol],[Fc,15,15*Ol],[Fc,30,30*Ol],[i,1,di],[i,5,5*di],[i,15,15*di],[i,30,30*di],[n,1,Il],[n,3,3*Il],[n,6,6*Il],[n,12,12*Il],[r,1,Hl],[r,2,2*Hl],[a,1,JE],[s,1,pD],[s,3,3*pD],[e,1,Lw]];function o(u,h,f){const x=h<u;x&&([u,h]=[h,u]);const p=f&&typeof f.range=="function"?f:d(u,h,f),v=p?p.range(u,+h+1):[];return x?v.reverse():v}function d(u,h,f){const x=Math.abs(h-u)/f,p=FE(([,,y])=>y).right(l,x);if(p===l.length)return e.every(w2(u/Lw,h/Lw,f));if(p===0)return pg.every(Math.max(w2(u,h,f),1));const[v,b]=l[x/l[p-1][2]<l[p][2]/x?p-1:p];return v.every(b)}return[o,d]}const[hve,xve]=wU(Gl,sC,yb,jU,eC,XE),[pve,gve]=wU(Vl,tC,vb,wh,ZE,YE);function Fw(e){if(0<=e.y&&e.y<100){var s=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return s.setFullYear(e.y),s}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Uw(e){if(0<=e.y&&e.y<100){var s=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return s.setUTCFullYear(e.y),s}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Am(e,s,a){return{y:e,m:s,d:a,H:0,M:0,S:0,L:0}}function bve(e){var s=e.dateTime,a=e.date,r=e.time,n=e.periods,i=e.days,l=e.shortDays,o=e.months,d=e.shortMonths,u=Em(n),h=Cm(n),f=Em(i),x=Cm(i),p=Em(l),v=Cm(l),b=Em(o),y=Cm(o),j=Em(d),w=Cm(d),S={a:G,A:Y,b:W,B:ee,c:null,d:jD,e:jD,f:Bve,g:Yve,G:Zve,H:Fve,I:Uve,j:zve,L:SU,m:$ve,M:qve,p:H,q:M,Q:AD,s:ED,S:Hve,u:Vve,U:Gve,V:Wve,w:Qve,W:Kve,x:null,X:null,y:Jve,Y:Xve,Z:eye,"%":SD},O={a:X,A:K,b:Q,B:se,c:null,d:wD,e:wD,f:rye,g:hye,G:pye,H:tye,I:sye,j:aye,L:EU,m:nye,M:iye,p:V,q:te,Q:AD,s:ED,S:lye,u:oye,U:cye,V:dye,w:uye,W:mye,x:null,X:null,y:fye,Y:xye,Z:gye,"%":SD},_={a:B,A:I,b:T,B:z,c:k,d:yD,e:yD,f:Pve,g:vD,G:bD,H:ND,I:ND,j:kve,L:Rve,m:_ve,M:Ove,p:L,q:Tve,Q:Mve,s:Lve,S:Ive,u:wve,U:Sve,V:Ave,w:jve,W:Eve,x:F,X:P,y:vD,Y:bD,Z:Cve,"%":Dve};S.x=E(a,S),S.X=E(r,S),S.c=E(s,S),O.x=E(a,O),O.X=E(r,O),O.c=E(s,O);function E(Z,ue){return function(re){var J=[],Ne=-1,q=0,ce=Z.length,fe,ie,ne;for(re instanceof Date||(re=new Date(+re));++Ne<ce;)Z.charCodeAt(Ne)===37&&(J.push(Z.slice(q,Ne)),(ie=gD[fe=Z.charAt(++Ne)])!=null?fe=Z.charAt(++Ne):ie=fe==="e"?" ":"0",(ne=ue[fe])&&(fe=ne(re,ie)),J.push(fe),q=Ne+1);return J.push(Z.slice(q,Ne)),J.join("")}}function A(Z,ue){return function(re){var J=Am(1900,void 0,1),Ne=D(J,Z,re+="",0),q,ce;if(Ne!=re.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ue&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(q=Uw(Am(J.y,0,1)),ce=q.getUTCDay(),q=ce>4||ce===0?bg.ceil(q):bg(q),q=bb.offset(q,(J.V-1)*7),J.y=q.getUTCFullYear(),J.m=q.getUTCMonth(),J.d=q.getUTCDate()+(J.w+6)%7):(q=Fw(Am(J.y,0,1)),ce=q.getDay(),q=ce>4||ce===0?gg.ceil(q):gg(q),q=wh.offset(q,(J.V-1)*7),J.y=q.getFullYear(),J.m=q.getMonth(),J.d=q.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),ce="Z"in J?Uw(Am(J.y,0,1)).getUTCDay():Fw(Am(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(ce+5)%7:J.w+J.U*7-(ce+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,Uw(J)):Fw(J)}}function D(Z,ue,re,J){for(var Ne=0,q=ue.length,ce=re.length,fe,ie;Ne<q;){if(J>=ce)return-1;if(fe=ue.charCodeAt(Ne++),fe===37){if(fe=ue.charAt(Ne++),ie=_[fe in gD?ue.charAt(Ne++):fe],!ie||(J=ie(Z,re,J))<0)return-1}else if(fe!=re.charCodeAt(J++))return-1}return J}function L(Z,ue,re){var J=u.exec(ue.slice(re));return J?(Z.p=h.get(J[0].toLowerCase()),re+J[0].length):-1}function B(Z,ue,re){var J=p.exec(ue.slice(re));return J?(Z.w=v.get(J[0].toLowerCase()),re+J[0].length):-1}function I(Z,ue,re){var J=f.exec(ue.slice(re));return J?(Z.w=x.get(J[0].toLowerCase()),re+J[0].length):-1}function T(Z,ue,re){var J=j.exec(ue.slice(re));return J?(Z.m=w.get(J[0].toLowerCase()),re+J[0].length):-1}function z(Z,ue,re){var J=b.exec(ue.slice(re));return J?(Z.m=y.get(J[0].toLowerCase()),re+J[0].length):-1}function k(Z,ue,re){return D(Z,s,ue,re)}function F(Z,ue,re){return D(Z,a,ue,re)}function P(Z,ue,re){return D(Z,r,ue,re)}function G(Z){return l[Z.getDay()]}function Y(Z){return i[Z.getDay()]}function W(Z){return d[Z.getMonth()]}function ee(Z){return o[Z.getMonth()]}function H(Z){return n[+(Z.getHours()>=12)]}function M(Z){return 1+~~(Z.getMonth()/3)}function X(Z){return l[Z.getUTCDay()]}function K(Z){return i[Z.getUTCDay()]}function Q(Z){return d[Z.getUTCMonth()]}function se(Z){return o[Z.getUTCMonth()]}function V(Z){return n[+(Z.getUTCHours()>=12)]}function te(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var ue=E(Z+="",S);return ue.toString=function(){return Z},ue},parse:function(Z){var ue=A(Z+="",!1);return ue.toString=function(){return Z},ue},utcFormat:function(Z){var ue=E(Z+="",O);return ue.toString=function(){return Z},ue},utcParse:function(Z){var ue=A(Z+="",!0);return ue.toString=function(){return Z},ue}}}var gD={"-":"",_:" ",0:"0"},jr=/^\s*\d+/,vve=/^%/,yve=/[\\^$*+?|[\]().{}]/g;function $s(e,s,a){var r=e<0?"-":"",n=(r?-e:e)+"",i=n.length;return r+(i<a?new Array(a-i+1).join(s)+n:n)}function Nve(e){return e.replace(yve,"\\$&")}function Em(e){return new RegExp("^(?:"+e.map(Nve).join("|")+")","i")}function Cm(e){return new Map(e.map((s,a)=>[s.toLowerCase(),a]))}function jve(e,s,a){var r=jr.exec(s.slice(a,a+1));return r?(e.w=+r[0],a+r[0].length):-1}function wve(e,s,a){var r=jr.exec(s.slice(a,a+1));return r?(e.u=+r[0],a+r[0].length):-1}function Sve(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.U=+r[0],a+r[0].length):-1}function Ave(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.V=+r[0],a+r[0].length):-1}function Eve(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.W=+r[0],a+r[0].length):-1}function bD(e,s,a){var r=jr.exec(s.slice(a,a+4));return r?(e.y=+r[0],a+r[0].length):-1}function vD(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function Cve(e,s,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(a,a+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function Tve(e,s,a){var r=jr.exec(s.slice(a,a+1));return r?(e.q=r[0]*3-3,a+r[0].length):-1}function _ve(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.m=r[0]-1,a+r[0].length):-1}function yD(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.d=+r[0],a+r[0].length):-1}function kve(e,s,a){var r=jr.exec(s.slice(a,a+3));return r?(e.m=0,e.d=+r[0],a+r[0].length):-1}function ND(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.H=+r[0],a+r[0].length):-1}function Ove(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.M=+r[0],a+r[0].length):-1}function Ive(e,s,a){var r=jr.exec(s.slice(a,a+2));return r?(e.S=+r[0],a+r[0].length):-1}function Rve(e,s,a){var r=jr.exec(s.slice(a,a+3));return r?(e.L=+r[0],a+r[0].length):-1}function Pve(e,s,a){var r=jr.exec(s.slice(a,a+6));return r?(e.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function Dve(e,s,a){var r=vve.exec(s.slice(a,a+1));return r?a+r[0].length:-1}function Mve(e,s,a){var r=jr.exec(s.slice(a));return r?(e.Q=+r[0],a+r[0].length):-1}function Lve(e,s,a){var r=jr.exec(s.slice(a));return r?(e.s=+r[0],a+r[0].length):-1}function jD(e,s){return $s(e.getDate(),s,2)}function Fve(e,s){return $s(e.getHours(),s,2)}function Uve(e,s){return $s(e.getHours()%12||12,s,2)}function zve(e,s){return $s(1+wh.count(Vl(e),e),s,3)}function SU(e,s){return $s(e.getMilliseconds(),s,3)}function Bve(e,s){return SU(e,s)+"000"}function $ve(e,s){return $s(e.getMonth()+1,s,2)}function qve(e,s){return $s(e.getMinutes(),s,2)}function Hve(e,s){return $s(e.getSeconds(),s,2)}function Vve(e){var s=e.getDay();return s===0?7:s}function Gve(e,s){return $s(vb.count(Vl(e)-1,e),s,2)}function AU(e){var s=e.getDay();return s>=4||s===0?Qu(e):Qu.ceil(e)}function Wve(e,s){return e=AU(e),$s(Qu.count(Vl(e),e)+(Vl(e).getDay()===4),s,2)}function Qve(e){return e.getDay()}function Kve(e,s){return $s(gg.count(Vl(e)-1,e),s,2)}function Jve(e,s){return $s(e.getFullYear()%100,s,2)}function Yve(e,s){return e=AU(e),$s(e.getFullYear()%100,s,2)}function Xve(e,s){return $s(e.getFullYear()%1e4,s,4)}function Zve(e,s){var a=e.getDay();return e=a>=4||a===0?Qu(e):Qu.ceil(e),$s(e.getFullYear()%1e4,s,4)}function eye(e){var s=e.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+$s(s/60|0,"0",2)+$s(s%60,"0",2)}function wD(e,s){return $s(e.getUTCDate(),s,2)}function tye(e,s){return $s(e.getUTCHours(),s,2)}function sye(e,s){return $s(e.getUTCHours()%12||12,s,2)}function aye(e,s){return $s(1+bb.count(Gl(e),e),s,3)}function EU(e,s){return $s(e.getUTCMilliseconds(),s,3)}function rye(e,s){return EU(e,s)+"000"}function nye(e,s){return $s(e.getUTCMonth()+1,s,2)}function iye(e,s){return $s(e.getUTCMinutes(),s,2)}function lye(e,s){return $s(e.getUTCSeconds(),s,2)}function oye(e){var s=e.getUTCDay();return s===0?7:s}function cye(e,s){return $s(yb.count(Gl(e)-1,e),s,2)}function CU(e){var s=e.getUTCDay();return s>=4||s===0?Ku(e):Ku.ceil(e)}function dye(e,s){return e=CU(e),$s(Ku.count(Gl(e),e)+(Gl(e).getUTCDay()===4),s,2)}function uye(e){return e.getUTCDay()}function mye(e,s){return $s(bg.count(Gl(e)-1,e),s,2)}function fye(e,s){return $s(e.getUTCFullYear()%100,s,2)}function hye(e,s){return e=CU(e),$s(e.getUTCFullYear()%100,s,2)}function xye(e,s){return $s(e.getUTCFullYear()%1e4,s,4)}function pye(e,s){var a=e.getUTCDay();return e=a>=4||a===0?Ku(e):Ku.ceil(e),$s(e.getUTCFullYear()%1e4,s,4)}function gye(){return"+0000"}function SD(){return"%"}function AD(e){return+e}function ED(e){return Math.floor(+e/1e3)}var xu,TU,_U;bye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bye(e){return xu=bve(e),TU=xu.format,xu.parse,_U=xu.utcFormat,xu.utcParse,xu}function vye(e){return new Date(e)}function yye(e){return e instanceof Date?+e:+new Date(+e)}function aC(e,s,a,r,n,i,l,o,d,u){var h=qE(),f=h.invert,x=h.domain,p=u(".%L"),v=u(":%S"),b=u("%I:%M"),y=u("%I %p"),j=u("%a %d"),w=u("%b %d"),S=u("%B"),O=u("%Y");function _(E){return(d(E)<E?p:o(E)<E?v:l(E)<E?b:i(E)<E?y:r(E)<E?n(E)<E?j:w:a(E)<E?S:O)(E)}return h.invert=function(E){return new Date(f(E))},h.domain=function(E){return arguments.length?x(Array.from(E,yye)):x().map(vye)},h.ticks=function(E){var A=x();return e(A[0],A[A.length-1],E??10)},h.tickFormat=function(E,A){return A==null?_:u(A)},h.nice=function(E){var A=x();return(!E||typeof E.range!="function")&&(E=s(A[0],A[A.length-1],E??10)),E?x(xU(A,E)):h},h.copy=function(){return jh(h,aC(e,s,a,r,n,i,l,o,d,u))},h}function Nye(){return yi.apply(aC(pve,gve,Vl,tC,vb,wh,ZE,YE,Fc,TU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jye(){return yi.apply(aC(hve,xve,Gl,sC,yb,bb,eC,XE,Fc,_U).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Nb(){var e=0,s=1,a,r,n,i,l=an,o=!1,d;function u(f){return f==null||isNaN(f=+f)?d:l(n===0?.5:(f=(i(f)-a)*n,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,s]=f,a=i(e=+e),r=i(s=+s),n=a===r?0:1/(r-a),u):[e,s]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(l=f,u):l};function h(f){return function(x){var p,v;return arguments.length?([p,v]=x,l=f(p,v),u):[l(0),l(1)]}}return u.range=h(j0),u.rangeRound=h($E),u.unknown=function(f){return arguments.length?(d=f,u):d},function(f){return i=f,a=f(e),r=f(s),n=a===r?0:1/(r-a),u}}function lc(e,s){return s.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kU(){var e=ic(Nb()(an));return e.copy=function(){return lc(e,kU())},Zl.apply(e,arguments)}function OU(){var e=GE(Nb()).domain([1,10]);return e.copy=function(){return lc(e,OU()).base(e.base())},Zl.apply(e,arguments)}function IU(){var e=WE(Nb());return e.copy=function(){return lc(e,IU()).constant(e.constant())},Zl.apply(e,arguments)}function rC(){var e=QE(Nb());return e.copy=function(){return lc(e,rC()).exponent(e.exponent())},Zl.apply(e,arguments)}function wye(){return rC.apply(null,arguments).exponent(.5)}function RU(){var e=[],s=an;function a(r){if(r!=null&&!isNaN(r=+r))return s((yh(e,r,1)-1)/(e.length-1))}return a.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let n of r)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(Bo),a},a.interpolator=function(r){return arguments.length?(s=r,a):s},a.range=function(){return e.map((r,n)=>s(n/(e.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(n,i)=>cbe(e,i/r))},a.copy=function(){return RU(s).domain(e)},Zl.apply(a,arguments)}function jb(){var e=0,s=.5,a=1,r=1,n,i,l,o,d,u=an,h,f=!1,x;function p(b){return isNaN(b=+b)?x:(b=.5+((b=+h(b))-i)*(r*b<r*i?o:d),u(f?Math.max(0,Math.min(1,b)):b))}p.domain=function(b){return arguments.length?([e,s,a]=b,n=h(e=+e),i=h(s=+s),l=h(a=+a),o=n===i?0:.5/(i-n),d=i===l?0:.5/(l-i),r=i<n?-1:1,p):[e,s,a]},p.clamp=function(b){return arguments.length?(f=!!b,p):f},p.interpolator=function(b){return arguments.length?(u=b,p):u};function v(b){return function(y){var j,w,S;return arguments.length?([j,w,S]=y,u=Dbe(b,[j,w,S]),p):[u(0),u(.5),u(1)]}}return p.range=v(j0),p.rangeRound=v($E),p.unknown=function(b){return arguments.length?(x=b,p):x},function(b){return h=b,n=b(e),i=b(s),l=b(a),o=n===i?0:.5/(i-n),d=i===l?0:.5/(l-i),r=i<n?-1:1,p}}function PU(){var e=ic(jb()(an));return e.copy=function(){return lc(e,PU())},Zl.apply(e,arguments)}function DU(){var e=GE(jb()).domain([.1,1,10]);return e.copy=function(){return lc(e,DU()).base(e.base())},Zl.apply(e,arguments)}function MU(){var e=WE(jb());return e.copy=function(){return lc(e,MU()).constant(e.constant())},Zl.apply(e,arguments)}function nC(){var e=QE(jb());return e.copy=function(){return lc(e,nC()).exponent(e.exponent())},Zl.apply(e,arguments)}function Sye(){return nC.apply(null,arguments).exponent(.5)}const CD=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Of,scaleDiverging:PU,scaleDivergingLog:DU,scaleDivergingPow:nC,scaleDivergingSqrt:Sye,scaleDivergingSymlog:MU,scaleIdentity:hU,scaleImplicit:S2,scaleLinear:xg,scaleLog:pU,scaleOrdinal:UE,scalePoint:Zm,scalePow:KE,scaleQuantile:vU,scaleQuantize:yU,scaleRadial:bU,scaleSequential:kU,scaleSequentialLog:OU,scaleSequentialPow:rC,scaleSequentialQuantile:RU,scaleSequentialSqrt:wye,scaleSequentialSymlog:IU,scaleSqrt:rve,scaleSymlog:gU,scaleThreshold:NU,scaleTime:Nye,scaleUtc:jye,tickFormat:fU},Symbol.toStringTag,{value:"Module"}));var zw,TD;function LU(){if(TD)return zw;TD=1;var e=g0();function s(a,r,n){for(var i=-1,l=a.length;++i<l;){var o=a[i],d=r(o);if(d!=null&&(u===void 0?d===d&&!e(d):n(d,u)))var u=d,h=o}return h}return zw=s,zw}var Bw,_D;function Aye(){if(_D)return Bw;_D=1;function e(s,a){return s>a}return Bw=e,Bw}var $w,kD;function Eye(){if(kD)return $w;kD=1;var e=LU(),s=Aye(),a=y0();function r(n){return n&&n.length?e(n,a,s):void 0}return $w=r,$w}var Cye=Eye();const Do=ra(Cye);var qw,OD;function Tye(){if(OD)return qw;OD=1;function e(s,a){return s<a}return qw=e,qw}var Hw,ID;function _ye(){if(ID)return Hw;ID=1;var e=LU(),s=Tye(),a=y0();function r(n){return n&&n.length?e(n,a,s):void 0}return Hw=r,Hw}var kye=_ye();const wb=ra(kye);var Vw,RD;function Oye(){if(RD)return Vw;RD=1;var e=NE(),s=nc(),a=V7(),r=Nn();function n(i,l){var o=r(i)?e:a;return o(i,s(l,3))}return Vw=n,Vw}var Gw,PD;function Iye(){if(PD)return Gw;PD=1;var e=q7(),s=Oye();function a(r,n){return e(s(r,n),1)}return Gw=a,Gw}var Rye=Iye();const Pye=ra(Rye);var Ww,DD;function Dye(){if(DD)return Ww;DD=1;var e=PE();function s(a,r){return e(a,r)}return Ww=s,Ww}var Mye=Dye();const Mf=ra(Mye);var w0=1e9,Lye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lC,Aa=!0,bi="[DecimalError] ",Jc=bi+"Invalid argument: ",iC=bi+"Exponent out of range: ",S0=Math.floor,Rc=Math.pow,Fye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mn,br=1e7,ga=7,FU=9007199254740991,vg=S0(FU/ga),yt={};yt.absoluteValue=yt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};yt.comparedTo=yt.cmp=function(e){var s,a,r,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,n=e.d.length,s=0,a=r<n?r:n;s<a;++s)if(i.d[s]!==e.d[s])return i.d[s]>e.d[s]^i.s<0?1:-1;return r===n?0:r>n^i.s<0?1:-1};yt.decimalPlaces=yt.dp=function(){var e=this,s=e.d.length-1,a=(s-e.e)*ga;if(s=e.d[s],s)for(;s%10==0;s/=10)a--;return a<0?0:a};yt.dividedBy=yt.div=function(e){return Bl(this,new this.constructor(e))};yt.dividedToIntegerBy=yt.idiv=function(e){var s=this,a=s.constructor;return fa(Bl(s,new a(e),0,1),a.precision)};yt.equals=yt.eq=function(e){return!this.cmp(e)};yt.exponent=function(){return sr(this)};yt.greaterThan=yt.gt=function(e){return this.cmp(e)>0};yt.greaterThanOrEqualTo=yt.gte=function(e){return this.cmp(e)>=0};yt.isInteger=yt.isint=function(){return this.e>this.d.length-2};yt.isNegative=yt.isneg=function(){return this.s<0};yt.isPositive=yt.ispos=function(){return this.s>0};yt.isZero=function(){return this.s===0};yt.lessThan=yt.lt=function(e){return this.cmp(e)<0};yt.lessThanOrEqualTo=yt.lte=function(e){return this.cmp(e)<1};yt.logarithm=yt.log=function(e){var s,a=this,r=a.constructor,n=r.precision,i=n+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Mn))throw Error(bi+"NaN");if(a.s<1)throw Error(bi+(a.s?"NaN":"-Infinity"));return a.eq(Mn)?new r(0):(Aa=!1,s=Bl(Lf(a,i),Lf(e,i),i),Aa=!0,fa(s,n))};yt.minus=yt.sub=function(e){var s=this;return e=new s.constructor(e),s.s==e.s?BU(s,e):UU(s,(e.s=-e.s,e))};yt.modulo=yt.mod=function(e){var s,a=this,r=a.constructor,n=r.precision;if(e=new r(e),!e.s)throw Error(bi+"NaN");return a.s?(Aa=!1,s=Bl(a,e,0,1).times(e),Aa=!0,a.minus(s)):fa(new r(a),n)};yt.naturalExponential=yt.exp=function(){return zU(this)};yt.naturalLogarithm=yt.ln=function(){return Lf(this)};yt.negated=yt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};yt.plus=yt.add=function(e){var s=this;return e=new s.constructor(e),s.s==e.s?UU(s,e):BU(s,(e.s=-e.s,e))};yt.precision=yt.sd=function(e){var s,a,r,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Jc+e);if(s=sr(n)+1,r=n.d.length-1,a=r*ga+1,r=n.d[r],r){for(;r%10==0;r/=10)a--;for(r=n.d[0];r>=10;r/=10)a++}return e&&s>a?s:a};yt.squareRoot=yt.sqrt=function(){var e,s,a,r,n,i,l,o=this,d=o.constructor;if(o.s<1){if(!o.s)return new d(0);throw Error(bi+"NaN")}for(e=sr(o),Aa=!1,n=Math.sqrt(+o),n==0||n==1/0?(s=Yi(o.d),(s.length+e)%2==0&&(s+="0"),n=Math.sqrt(s),e=S0((e+1)/2)-(e<0||e%2),n==1/0?s="5e"+e:(s=n.toExponential(),s=s.slice(0,s.indexOf("e")+1)+e),r=new d(s)):r=new d(n.toString()),a=d.precision,n=l=a+3;;)if(i=r,r=i.plus(Bl(o,i,l+2)).times(.5),Yi(i.d).slice(0,l)===(s=Yi(r.d)).slice(0,l)){if(s=s.slice(l-3,l+1),n==l&&s=="4999"){if(fa(i,a+1,0),i.times(i).eq(o)){r=i;break}}else if(s!="9999")break;l+=4}return Aa=!0,fa(r,a)};yt.times=yt.mul=function(e){var s,a,r,n,i,l,o,d,u,h=this,f=h.constructor,x=h.d,p=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,a=h.e+e.e,d=x.length,u=p.length,d<u&&(i=x,x=p,p=i,l=d,d=u,u=l),i=[],l=d+u,r=l;r--;)i.push(0);for(r=u;--r>=0;){for(s=0,n=d+r;n>r;)o=i[n]+p[r]*x[n-r-1]+s,i[n--]=o%br|0,s=o/br|0;i[n]=(i[n]+s)%br|0}for(;!i[--l];)i.pop();return s?++a:i.shift(),e.d=i,e.e=a,Aa?fa(e,f.precision):e};yt.toDecimalPlaces=yt.todp=function(e,s){var a=this,r=a.constructor;return a=new r(a),e===void 0?a:(nl(e,0,w0),s===void 0?s=r.rounding:nl(s,0,8),fa(a,e+sr(a)+1,s))};yt.toExponential=function(e,s){var a,r=this,n=r.constructor;return e===void 0?a=dd(r,!0):(nl(e,0,w0),s===void 0?s=n.rounding:nl(s,0,8),r=fa(new n(r),e+1,s),a=dd(r,!0,e+1)),a};yt.toFixed=function(e,s){var a,r,n=this,i=n.constructor;return e===void 0?dd(n):(nl(e,0,w0),s===void 0?s=i.rounding:nl(s,0,8),r=fa(new i(n),e+sr(n)+1,s),a=dd(r.abs(),!1,e+sr(r)+1),n.isneg()&&!n.isZero()?"-"+a:a)};yt.toInteger=yt.toint=function(){var e=this,s=e.constructor;return fa(new s(e),sr(e)+1,s.rounding)};yt.toNumber=function(){return+this};yt.toPower=yt.pow=function(e){var s,a,r,n,i,l,o=this,d=o.constructor,u=12,h=+(e=new d(e));if(!e.s)return new d(Mn);if(o=new d(o),!o.s){if(e.s<1)throw Error(bi+"Infinity");return o}if(o.eq(Mn))return o;if(r=d.precision,e.eq(Mn))return fa(o,r);if(s=e.e,a=e.d.length-1,l=s>=a,i=o.s,l){if((a=h<0?-h:h)<=FU){for(n=new d(Mn),s=Math.ceil(r/ga+4),Aa=!1;a%2&&(n=n.times(o),LD(n.d,s)),a=S0(a/2),a!==0;)o=o.times(o),LD(o.d,s);return Aa=!0,e.s<0?new d(Mn).div(n):fa(n,r)}}else if(i<0)throw Error(bi+"NaN");return i=i<0&&e.d[Math.max(s,a)]&1?-1:1,o.s=1,Aa=!1,n=e.times(Lf(o,r+u)),Aa=!0,n=zU(n),n.s=i,n};yt.toPrecision=function(e,s){var a,r,n=this,i=n.constructor;return e===void 0?(a=sr(n),r=dd(n,a<=i.toExpNeg||a>=i.toExpPos)):(nl(e,1,w0),s===void 0?s=i.rounding:nl(s,0,8),n=fa(new i(n),e,s),a=sr(n),r=dd(n,e<=a||a<=i.toExpNeg,e)),r};yt.toSignificantDigits=yt.tosd=function(e,s){var a=this,r=a.constructor;return e===void 0?(e=r.precision,s=r.rounding):(nl(e,1,w0),s===void 0?s=r.rounding:nl(s,0,8)),fa(new r(a),e,s)};yt.toString=yt.valueOf=yt.val=yt.toJSON=yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,s=sr(e),a=e.constructor;return dd(e,s<=a.toExpNeg||s>=a.toExpPos)};function UU(e,s){var a,r,n,i,l,o,d,u,h=e.constructor,f=h.precision;if(!e.s||!s.s)return s.s||(s=new h(e)),Aa?fa(s,f):s;if(d=e.d,u=s.d,l=e.e,n=s.e,d=d.slice(),i=l-n,i){for(i<0?(r=d,i=-i,o=u.length):(r=u,n=l,o=d.length),l=Math.ceil(f/ga),o=l>o?l+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=d.length,i=u.length,o-i<0&&(i=o,r=u,u=d,d=r),a=0;i;)a=(d[--i]=d[i]+u[i]+a)/br|0,d[i]%=br;for(a&&(d.unshift(a),++n),o=d.length;d[--o]==0;)d.pop();return s.d=d,s.e=n,Aa?fa(s,f):s}function nl(e,s,a){if(e!==~~e||e<s||e>a)throw Error(Jc+e)}function Yi(e){var s,a,r,n=e.length-1,i="",l=e[0];if(n>0){for(i+=l,s=1;s<n;s++)r=e[s]+"",a=ga-r.length,a&&(i+=_o(a)),i+=r;l=e[s],r=l+"",a=ga-r.length,a&&(i+=_o(a))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Bl=(function(){function e(r,n){var i,l=0,o=r.length;for(r=r.slice();o--;)i=r[o]*n+l,r[o]=i%br|0,l=i/br|0;return l&&r.unshift(l),r}function s(r,n,i,l){var o,d;if(i!=l)d=i>l?1:-1;else for(o=d=0;o<i;o++)if(r[o]!=n[o]){d=r[o]>n[o]?1:-1;break}return d}function a(r,n,i){for(var l=0;i--;)r[i]-=l,l=r[i]<n[i]?1:0,r[i]=l*br+r[i]-n[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,n,i,l){var o,d,u,h,f,x,p,v,b,y,j,w,S,O,_,E,A,D,L=r.constructor,B=r.s==n.s?1:-1,I=r.d,T=n.d;if(!r.s)return new L(r);if(!n.s)throw Error(bi+"Division by zero");for(d=r.e-n.e,A=T.length,_=I.length,p=new L(B),v=p.d=[],u=0;T[u]==(I[u]||0);)++u;if(T[u]>(I[u]||0)&&--d,i==null?w=i=L.precision:l?w=i+(sr(r)-sr(n))+1:w=i,w<0)return new L(0);if(w=w/ga+2|0,u=0,A==1)for(h=0,T=T[0],w++;(u<_||h)&&w--;u++)S=h*br+(I[u]||0),v[u]=S/T|0,h=S%T|0;else{for(h=br/(T[0]+1)|0,h>1&&(T=e(T,h),I=e(I,h),A=T.length,_=I.length),O=A,b=I.slice(0,A),y=b.length;y<A;)b[y++]=0;D=T.slice(),D.unshift(0),E=T[0],T[1]>=br/2&&++E;do h=0,o=s(T,b,A,y),o<0?(j=b[0],A!=y&&(j=j*br+(b[1]||0)),h=j/E|0,h>1?(h>=br&&(h=br-1),f=e(T,h),x=f.length,y=b.length,o=s(f,b,x,y),o==1&&(h--,a(f,A<x?D:T,x))):(h==0&&(o=h=1),f=T.slice()),x=f.length,x<y&&f.unshift(0),a(b,f,y),o==-1&&(y=b.length,o=s(T,b,A,y),o<1&&(h++,a(b,A<y?D:T,y))),y=b.length):o===0&&(h++,b=[0]),v[u++]=h,o&&b[0]?b[y++]=I[O]||0:(b=[I[O]],y=1);while((O++<_||b[0]!==void 0)&&w--)}return v[0]||v.shift(),p.e=d,fa(p,l?i+sr(p)+1:i)}})();function zU(e,s){var a,r,n,i,l,o,d=0,u=0,h=e.constructor,f=h.precision;if(sr(e)>16)throw Error(iC+sr(e));if(!e.s)return new h(Mn);for(Aa=!1,o=f,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),u+=5;for(r=Math.log(Rc(2,u))/Math.LN10*2+5|0,o+=r,a=n=i=new h(Mn),h.precision=o;;){if(n=fa(n.times(e),o),a=a.times(++d),l=i.plus(Bl(n,a,o)),Yi(l.d).slice(0,o)===Yi(i.d).slice(0,o)){for(;u--;)i=fa(i.times(i),o);return h.precision=f,s==null?(Aa=!0,fa(i,f)):i}i=l}}function sr(e){for(var s=e.e*ga,a=e.d[0];a>=10;a/=10)s++;return s}function Qw(e,s,a){if(s>e.LN10.sd())throw Aa=!0,a&&(e.precision=a),Error(bi+"LN10 precision limit exceeded");return fa(new e(e.LN10),s)}function _o(e){for(var s="";e--;)s+="0";return s}function Lf(e,s){var a,r,n,i,l,o,d,u,h,f=1,x=10,p=e,v=p.d,b=p.constructor,y=b.precision;if(p.s<1)throw Error(bi+(p.s?"NaN":"-Infinity"));if(p.eq(Mn))return new b(0);if(s==null?(Aa=!1,u=y):u=s,p.eq(10))return s==null&&(Aa=!0),Qw(b,u);if(u+=x,b.precision=u,a=Yi(v),r=a.charAt(0),i=sr(p),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)p=p.times(e),a=Yi(p.d),r=a.charAt(0),f++;i=sr(p),r>1?(p=new b("0."+a),i++):p=new b(r+"."+a.slice(1))}else return d=Qw(b,u+2,y).times(i+""),p=Lf(new b(r+"."+a.slice(1)),u-x).plus(d),b.precision=y,s==null?(Aa=!0,fa(p,y)):p;for(o=l=p=Bl(p.minus(Mn),p.plus(Mn),u),h=fa(p.times(p),u),n=3;;){if(l=fa(l.times(h),u),d=o.plus(Bl(l,new b(n),u)),Yi(d.d).slice(0,u)===Yi(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(Qw(b,u+2,y).times(i+""))),o=Bl(o,new b(f),u),b.precision=y,s==null?(Aa=!0,fa(o,y)):o;o=d,n+=2}}function MD(e,s){var a,r,n;for((a=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(a<0&&(a=r),a+=+s.slice(r+1),s=s.substring(0,r)):a<0&&(a=s.length),r=0;s.charCodeAt(r)===48;)++r;for(n=s.length;s.charCodeAt(n-1)===48;)--n;if(s=s.slice(r,n),s){if(n-=r,a=a-r-1,e.e=S0(a/ga),e.d=[],r=(a+1)%ga,a<0&&(r+=ga),r<n){for(r&&e.d.push(+s.slice(0,r)),n-=ga;r<n;)e.d.push(+s.slice(r,r+=ga));s=s.slice(r),r=ga-s.length}else r-=n;for(;r--;)s+="0";if(e.d.push(+s),Aa&&(e.e>vg||e.e<-vg))throw Error(iC+a)}else e.s=0,e.e=0,e.d=[0];return e}function fa(e,s,a){var r,n,i,l,o,d,u,h,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if(r=s-l,r<0)r+=ga,n=s,u=f[h=0];else{if(h=Math.ceil((r+1)/ga),i=f.length,h>=i)return e;for(u=i=f[h],l=1;i>=10;i/=10)l++;r%=ga,n=r-ga+l}if(a!==void 0&&(i=Rc(10,l-n-1),o=u/i%10|0,d=s<0||f[h+1]!==void 0||u%i,d=a<4?(o||d)&&(a==0||a==(e.s<0?3:2)):o>5||o==5&&(a==4||d||a==6&&(r>0?n>0?u/Rc(10,l-n):0:f[h-1])%10&1||a==(e.s<0?8:7))),s<1||!f[0])return d?(i=sr(e),f.length=1,s=s-i-1,f[0]=Rc(10,(ga-s%ga)%ga),e.e=S0(-s/ga)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=h,i=1,h--):(f.length=h+1,i=Rc(10,ga-r),f[h]=n>0?(u/Rc(10,l-n)%Rc(10,n)|0)*i:0),d)for(;;)if(h==0){(f[0]+=i)==br&&(f[0]=1,++e.e);break}else{if(f[h]+=i,f[h]!=br)break;f[h--]=0,i=1}for(r=f.length;f[--r]===0;)f.pop();if(Aa&&(e.e>vg||e.e<-vg))throw Error(iC+sr(e));return e}function BU(e,s){var a,r,n,i,l,o,d,u,h,f,x=e.constructor,p=x.precision;if(!e.s||!s.s)return s.s?s.s=-s.s:s=new x(e),Aa?fa(s,p):s;if(d=e.d,f=s.d,r=s.e,u=e.e,d=d.slice(),l=u-r,l){for(h=l<0,h?(a=d,l=-l,o=f.length):(a=f,r=u,o=d.length),n=Math.max(Math.ceil(p/ga),o)+2,l>n&&(l=n,a.length=1),a.reverse(),n=l;n--;)a.push(0);a.reverse()}else{for(n=d.length,o=f.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(d[n]!=f[n]){h=d[n]<f[n];break}l=0}for(h&&(a=d,d=f,f=a,s.s=-s.s),o=d.length,n=f.length-o;n>0;--n)d[o++]=0;for(n=f.length;n>l;){if(d[--n]<f[n]){for(i=n;i&&d[--i]===0;)d[i]=br-1;--d[i],d[n]+=br}d[n]-=f[n]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(s.d=d,s.e=r,Aa?fa(s,p):s):new x(0)}function dd(e,s,a){var r,n=sr(e),i=Yi(e.d),l=i.length;return s?(a&&(r=a-l)>0?i=i.charAt(0)+"."+i.slice(1)+_o(r):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+_o(-n-1)+i,a&&(r=a-l)>0&&(i+=_o(r))):n>=l?(i+=_o(n+1-l),a&&(r=a-n-1)>0&&(i=i+"."+_o(r))):((r=n+1)<l&&(i=i.slice(0,r)+"."+i.slice(r)),a&&(r=a-l)>0&&(n+1===l&&(i+="."),i+=_o(r))),e.s<0?"-"+i:i}function LD(e,s){if(e.length>s)return e.length=s,!0}function $U(e){var s,a,r;function n(i){var l=this;if(!(l instanceof n))return new n(i);if(l.constructor=n,i instanceof n){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Jc+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return MD(l,i.toString())}else if(typeof i!="string")throw Error(Jc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,Fye.test(i))MD(l,i);else throw Error(Jc+i)}if(n.prototype=yt,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=$U,n.config=n.set=Uye,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<r.length;)e.hasOwnProperty(a=r[s++])||(e[a]=this[a]);return n.config(e),n}function Uye(e){if(!e||typeof e!="object")throw Error(bi+"Object expected");var s,a,r,n=["precision",1,w0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(s=0;s<n.length;s+=3)if((r=e[a=n[s]])!==void 0)if(S0(r)===r&&r>=n[s+1]&&r<=n[s+2])this[a]=r;else throw Error(Jc+a+": "+r);if((r=e[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(Jc+a+": "+r);return this}var lC=$U(Lye);Mn=new lC(1);const ca=lC;function zye(e){return Hye(e)||qye(e)||$ye(e)||Bye()}function Bye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ye(e,s){if(e){if(typeof e=="string")return T2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return T2(e,s)}}function qye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Hye(e){if(Array.isArray(e))return T2(e)}function T2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}var Vye=function(s){return s},qU={},HU=function(s){return s===qU},FD=function(s){return function a(){return arguments.length===0||arguments.length===1&&HU(arguments.length<=0?void 0:arguments[0])?a:s.apply(void 0,arguments)}},Gye=function e(s,a){return s===1?a:FD(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var l=n.filter(function(o){return o!==qU}).length;return l>=s?a.apply(void 0,n):e(s-l,FD(function(){for(var o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];var h=n.map(function(f){return HU(f)?d.shift():f});return a.apply(void 0,zye(h).concat(d))}))})},Sb=function(s){return Gye(s.length,s)},_2=function(s,a){for(var r=[],n=s;n<a;++n)r[n-s]=n;return r},Wye=Sb(function(e,s){return Array.isArray(s)?s.map(e):Object.keys(s).map(function(a){return s[a]}).map(e)}),Qye=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];if(!a.length)return Vye;var n=a.reverse(),i=n[0],l=n.slice(1);return function(){return l.reduce(function(o,d){return d(o)},i.apply(void 0,arguments))}},k2=function(s){return Array.isArray(s)?s.reverse():s.split("").reverse.join("")},VU=function(s){var a=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return a&&i.every(function(o,d){return o===a[d]})||(a=i,r=s.apply(void 0,i)),r}};function Kye(e){var s;return e===0?s=1:s=Math.floor(new ca(e).abs().log(10).toNumber())+1,s}function Jye(e,s,a){for(var r=new ca(e),n=0,i=[];r.lt(s)&&n<1e5;)i.push(r.toNumber()),r=r.add(a),n++;return i}var Yye=Sb(function(e,s,a){var r=+e,n=+s;return r+a*(n-r)}),Xye=Sb(function(e,s,a){var r=s-+e;return r=r||1/0,(a-e)/r}),Zye=Sb(function(e,s,a){var r=s-+e;return r=r||1/0,Math.max(0,Math.min(1,(a-e)/r))});const Ab={rangeStep:Jye,getDigitCount:Kye,interpolateNumber:Yye,uninterpolateNumber:Xye,uninterpolateTruncation:Zye};function O2(e){return s1e(e)||t1e(e)||GU(e)||e1e()}function e1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t1e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function s1e(e){if(Array.isArray(e))return I2(e)}function Ff(e,s){return n1e(e)||r1e(e,s)||GU(e,s)||a1e()}function a1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GU(e,s){if(e){if(typeof e=="string")return I2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return I2(e,s)}}function I2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function r1e(e,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var a=[],r=!0,n=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(r=(o=l.next()).done)&&(a.push(o.value),!(s&&a.length===s));r=!0);}catch(d){n=!0,i=d}finally{try{!r&&l.return!=null&&l.return()}finally{if(n)throw i}}return a}}function n1e(e){if(Array.isArray(e))return e}function WU(e){var s=Ff(e,2),a=s[0],r=s[1],n=a,i=r;return a>r&&(n=r,i=a),[n,i]}function QU(e,s,a){if(e.lte(0))return new ca(0);var r=Ab.getDigitCount(e.toNumber()),n=new ca(10).pow(r),i=e.div(n),l=r!==1?.05:.1,o=new ca(Math.ceil(i.div(l).toNumber())).add(a).mul(l),d=o.mul(n);return s?d:new ca(Math.ceil(d))}function i1e(e,s,a){var r=1,n=new ca(e);if(!n.isint()&&a){var i=Math.abs(e);i<1?(r=new ca(10).pow(Ab.getDigitCount(e)-1),n=new ca(Math.floor(n.div(r).toNumber())).mul(r)):i>1&&(n=new ca(Math.floor(e)))}else e===0?n=new ca(Math.floor((s-1)/2)):a||(n=new ca(Math.floor(e)));var l=Math.floor((s-1)/2),o=Qye(Wye(function(d){return n.add(new ca(d-l).mul(r)).toNumber()}),_2);return o(0,s)}function KU(e,s,a,r){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-e)/(a-1)))return{step:new ca(0),tickMin:new ca(0),tickMax:new ca(0)};var i=QU(new ca(s).sub(e).div(a-1),r,n),l;e<=0&&s>=0?l=new ca(0):(l=new ca(e).add(s).div(2),l=l.sub(new ca(l).mod(i)));var o=Math.ceil(l.sub(e).div(i).toNumber()),d=Math.ceil(new ca(s).sub(l).div(i).toNumber()),u=o+d+1;return u>a?KU(e,s,a,r,n+1):(u<a&&(d=s>0?d+(a-u):d,o=s>0?o:o+(a-u)),{step:i,tickMin:l.sub(new ca(o).mul(i)),tickMax:l.add(new ca(d).mul(i))})}function l1e(e){var s=Ff(e,2),a=s[0],r=s[1],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(n,2),o=WU([a,r]),d=Ff(o,2),u=d[0],h=d[1];if(u===-1/0||h===1/0){var f=h===1/0?[u].concat(O2(_2(0,n-1).map(function(){return 1/0}))):[].concat(O2(_2(0,n-1).map(function(){return-1/0})),[h]);return a>r?k2(f):f}if(u===h)return i1e(u,n,i);var x=KU(u,h,l,i),p=x.step,v=x.tickMin,b=x.tickMax,y=Ab.rangeStep(v,b.add(new ca(.1).mul(p)),p);return a>r?k2(y):y}function o1e(e,s){var a=Ff(e,2),r=a[0],n=a[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=WU([r,n]),o=Ff(l,2),d=o[0],u=o[1];if(d===-1/0||u===1/0)return[r,n];if(d===u)return[d];var h=Math.max(s,2),f=QU(new ca(u).sub(d).div(h-1),i,0),x=[].concat(O2(Ab.rangeStep(new ca(d),new ca(u).sub(new ca(.99).mul(f)),f)),[u]);return r>n?k2(x):x}var c1e=VU(l1e),d1e=VU(o1e),u1e="Invariant failed";function ud(e,s){throw new Error(u1e)}var m1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ju(e)}function yg(){return yg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},yg.apply(this,arguments)}function f1e(e,s){return g1e(e)||p1e(e,s)||x1e(e,s)||h1e()}function h1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x1e(e,s){if(e){if(typeof e=="string")return UD(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return UD(e,s)}}function UD(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function p1e(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function g1e(e){if(Array.isArray(e))return e}function b1e(e,s){if(e==null)return{};var a=v1e(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function v1e(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function y1e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function N1e(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XU(r.key),r)}}function j1e(e,s,a){return s&&N1e(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function w1e(e,s,a){return s=Ng(s),S1e(e,JU()?Reflect.construct(s,a||[],Ng(e).constructor):s.apply(e,a))}function S1e(e,s){if(s&&(Ju(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A1e(e)}function A1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JU=function(){return!!e})()}function Ng(e){return Ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ng(e)}function E1e(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&R2(e,s)}function R2(e,s){return R2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},R2(e,s)}function YU(e,s,a){return s=XU(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function XU(e){var s=C1e(e,"string");return Ju(s)=="symbol"?s:s+""}function C1e(e,s){if(Ju(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Eb=(function(e){function s(){return y1e(this,s),w1e(this,s,arguments)}return E1e(s,e),j1e(s,[{key:"render",value:function(){var r=this.props,n=r.offset,i=r.layout,l=r.width,o=r.dataKey,d=r.data,u=r.dataPointFormatter,h=r.xAxis,f=r.yAxis,x=b1e(r,m1e),p=ys(x,!1);this.props.direction==="x"&&h.type!=="number"&&ud();var v=d.map(function(b){var y=u(b,o),j=y.x,w=y.y,S=y.value,O=y.errorVal;if(!O)return null;var _=[],E,A;if(Array.isArray(O)){var D=f1e(O,2);E=D[0],A=D[1]}else E=A=O;if(i==="vertical"){var L=h.scale,B=w+n,I=B+l,T=B-l,z=L(S-E),k=L(S+A);_.push({x1:k,y1:I,x2:k,y2:T}),_.push({x1:z,y1:B,x2:k,y2:B}),_.push({x1:z,y1:I,x2:z,y2:T})}else if(i==="horizontal"){var F=f.scale,P=j+n,G=P-l,Y=P+l,W=F(S-E),ee=F(S+A);_.push({x1:G,y1:ee,x2:Y,y2:ee}),_.push({x1:P,y1:W,x2:P,y2:ee}),_.push({x1:G,y1:W,x2:Y,y2:W})}return ke.createElement(_a,yg({className:"recharts-errorBar",key:"bar-".concat(_.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},p),_.map(function(H){return ke.createElement("line",yg({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return ke.createElement(_a,{className:"recharts-errorBars"},v)}}])})(ke.Component);YU(Eb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});YU(Eb,"displayName","ErrorBar");function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Uf(e)}function zD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function kc(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?zD(Object(a),!0).forEach(function(r){T1e(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function T1e(e,s,a){return s=_1e(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function _1e(e){var s=k1e(e,"string");return Uf(s)=="symbol"?s:s+""}function k1e(e,s){if(Uf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var ZU=function(s){var a=s.children,r=s.formattedGraphicalItems,n=s.legendWidth,i=s.legendContent,l=On(a,Iu);if(!l)return null;var o=Iu.defaultProps,d=o!==void 0?kc(kc({},o),l.props):{},u;return l.props&&l.props.payload?u=l.props&&l.props.payload:i==="children"?u=(r||[]).reduce(function(h,f){var x=f.item,p=f.props,v=p.sectors||p.data||[];return h.concat(v.map(function(b){return{type:l.props.iconType||x.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(r||[]).map(function(h){var f=h.item,x=f.type.defaultProps,p=x!==void 0?kc(kc({},x),f.props):{},v=p.dataKey,b=p.name,y=p.legendType,j=p.hide;return{inactive:j,dataKey:v,type:d.iconType||y||"square",color:oC(f),value:b||v,payload:p}}),kc(kc(kc({},d),Iu.getWithHeight(l,n)),{},{payload:u,item:l})};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},zf(e)}function BD(e){return P1e(e)||R1e(e)||I1e(e)||O1e()}function O1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I1e(e,s){if(e){if(typeof e=="string")return P2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P2(e,s)}}function R1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function P1e(e){if(Array.isArray(e))return P2(e)}function P2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function $D(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Da(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?$D(Object(a),!0).forEach(function(r){Pu(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$D(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Pu(e,s,a){return s=D1e(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function D1e(e){var s=M1e(e,"string");return zf(s)=="symbol"?s:s+""}function M1e(e,s){if(zf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Bn(e,s,a){return Ss(e)||Ss(s)?a:ur(s)?fi(e,s,a):cs(s)?s(e):a}function ef(e,s,a,r){var n=Pye(e,function(o){return Bn(o,s)});if(a==="number"){var i=n.filter(function(o){return dt(o)||parseFloat(o)});return i.length?[wb(i),Do(i)]:[1/0,-1/0]}var l=r?n.filter(function(o){return!Ss(o)}):n;return l.map(function(o){return ur(o)||o instanceof Date?o:""})}var L1e=function(s){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<o;u++){var h=u>0?n[u-1].coordinate:n[o-1].coordinate,f=n[u].coordinate,x=u>=o-1?n[0].coordinate:n[u+1].coordinate,p=void 0;if(Ii(f-h)!==Ii(x-f)){var v=[];if(Ii(x-f)===Ii(d[1]-d[0])){p=x;var b=f+d[1]-d[0];v[0]=Math.min(b,(b+h)/2),v[1]=Math.max(b,(b+h)/2)}else{p=h;var y=x+d[1]-d[0];v[0]=Math.min(f,(y+f)/2),v[1]=Math.max(f,(y+f)/2)}var j=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(s>j[0]&&s<=j[1]||s>=v[0]&&s<=v[1]){l=n[u].index;break}}else{var w=Math.min(h,x),S=Math.max(h,x);if(s>(w+f)/2&&s<=(S+f)/2){l=n[u].index;break}}}else for(var O=0;O<o;O++)if(O===0&&s<=(r[O].coordinate+r[O+1].coordinate)/2||O>0&&O<o-1&&s>(r[O].coordinate+r[O-1].coordinate)/2&&s<=(r[O].coordinate+r[O+1].coordinate)/2||O===o-1&&s>(r[O].coordinate+r[O-1].coordinate)/2){l=r[O].index;break}return l},oC=function(s){var a,r=s,n=r.type.displayName,i=(a=s.type)!==null&&a!==void 0&&a.defaultProps?Da(Da({},s.type.defaultProps),s.props):s.props,l=i.stroke,o=i.fill,d;switch(n){case"Line":d=l;break;case"Area":case"Radar":d=l&&l!=="none"?l:o;break;default:d=o;break}return d},F1e=function(s){var a=s.barSize,r=s.totalSize,n=s.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var l={},o=Object.keys(i),d=0,u=o.length;d<u;d++)for(var h=i[o[d]].stackGroups,f=Object.keys(h),x=0,p=f.length;x<p;x++){var v=h[f[x]],b=v.items,y=v.cateAxisId,j=b.filter(function(A){return Ul(A.type).indexOf("Bar")>=0});if(j&&j.length){var w=j[0].type.defaultProps,S=w!==void 0?Da(Da({},w),j[0].props):j[0].props,O=S.barSize,_=S[y];l[_]||(l[_]=[]);var E=Ss(O)?a:O;l[_].push({item:j[0],stackList:j.slice(1),barSize:Ss(E)?void 0:cd(E,r,0)})}}return l},U1e=function(s){var a=s.barGap,r=s.barCategoryGap,n=s.bandSize,i=s.sizeList,l=i===void 0?[]:i,o=s.maxBarSize,d=l.length;if(d<1)return null;var u=cd(a,n,0,!0),h,f=[];if(l[0].barSize===+l[0].barSize){var x=!1,p=n/d,v=l.reduce(function(O,_){return O+_.barSize||0},0);v+=(d-1)*u,v>=n&&(v-=(d-1)*u,u=0),v>=n&&p>0&&(x=!0,p*=.9,v=d*p);var b=(n-v)/2>>0,y={offset:b-u,size:0};h=l.reduce(function(O,_){var E={item:_.item,position:{offset:y.offset+y.size+u,size:x?p:_.barSize}},A=[].concat(BD(O),[E]);return y=A[A.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(D){A.push({item:D,position:y})}),A},f)}else{var j=cd(r,n,0,!0);n-2*j-(d-1)*u<=0&&(u=0);var w=(n-2*j-(d-1)*u)/d;w>1&&(w>>=0);var S=o===+o?Math.min(w,o):w;h=l.reduce(function(O,_,E){var A=[].concat(BD(O),[{item:_.item,position:{offset:j+(w+u)*E+(w-S)/2,size:S}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(D){A.push({item:D,position:A[A.length-1].position})}),A},f)}return h},z1e=function(s,a,r,n){var i=r.children,l=r.width,o=r.margin,d=l-(o.left||0)-(o.right||0),u=ZU({children:i,legendWidth:d});if(u){var h=n||{},f=h.width,x=h.height,p=u.align,v=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&v==="middle")&&p!=="center"&&dt(s[p]))return Da(Da({},s),{},Pu({},p,s[p]+(f||0)));if((b==="horizontal"||b==="vertical"&&p==="center")&&v!=="middle"&&dt(s[v]))return Da(Da({},s),{},Pu({},v,s[v]+(x||0)))}return s},B1e=function(s,a,r){return Ss(a)?!0:s==="horizontal"?a==="yAxis":s==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},ez=function(s,a,r,n,i){var l=a.props.children,o=Di(l,Eb).filter(function(u){return B1e(n,i,u.props.direction)});if(o&&o.length){var d=o.map(function(u){return u.props.dataKey});return s.reduce(function(u,h){var f=Bn(h,r);if(Ss(f))return u;var x=Array.isArray(f)?[wb(f),Do(f)]:[f,f],p=d.reduce(function(v,b){var y=Bn(h,b,0),j=x[0]-Math.abs(Array.isArray(y)?y[0]:y),w=x[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(j,v[0]),Math.max(w,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},$1e=function(s,a,r,n,i){var l=a.map(function(o){return ez(s,o,r,i,n)}).filter(function(o){return!Ss(o)});return l&&l.length?l.reduce(function(o,d){return[Math.min(o[0],d[0]),Math.max(o[1],d[1])]},[1/0,-1/0]):null},tz=function(s,a,r,n,i){var l=a.map(function(d){var u=d.props.dataKey;return r==="number"&&u&&ez(s,d,u,n)||ef(s,u,r,i)});if(r==="number")return l.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var o={};return l.reduce(function(d,u){for(var h=0,f=u.length;h<f;h++)o[u[h]]||(o[u[h]]=!0,d.push(u[h]));return d},[])},sz=function(s,a){return s==="horizontal"&&a==="xAxis"||s==="vertical"&&a==="yAxis"||s==="centric"&&a==="angleAxis"||s==="radial"&&a==="radiusAxis"},az=function(s,a,r,n){if(n)return s.map(function(d){return d.coordinate});var i,l,o=s.map(function(d){return d.coordinate===a&&(i=!0),d.coordinate===r&&(l=!0),d.coordinate});return i||o.push(a),l||o.push(r),o},Rl=function(s,a,r){if(!s)return null;var n=s.scale,i=s.duplicateDomain,l=s.type,o=s.range,d=s.realScaleType==="scaleBand"?n.bandwidth()/2:2,u=(a||r)&&l==="category"&&n.bandwidth?n.bandwidth()/d:0;if(u=s.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Ii(o[0]-o[1])*2*u:u,a&&(s.ticks||s.niceTicks)){var h=(s.ticks||s.niceTicks).map(function(f){var x=i?i.indexOf(f):f;return{coordinate:n(x)+u,value:f,offset:u}});return h.filter(function(f){return!v0(f.coordinate)})}return s.isCategorical&&s.categoricalDomain?s.categoricalDomain.map(function(f,x){return{coordinate:n(f)+u,value:f,index:x,offset:u}}):n.ticks&&!r?n.ticks(s.tickCount).map(function(f){return{coordinate:n(f)+u,value:f,offset:u}}):n.domain().map(function(f,x){return{coordinate:n(f)+u,value:i?i[f]:f,index:x,offset:u}})},Kw=new WeakMap,dp=function(s,a){if(typeof a!="function")return s;Kw.has(s)||Kw.set(s,new WeakMap);var r=Kw.get(s);if(r.has(a))return r.get(a);var n=function(){s.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,n),n},q1e=function(s,a,r){var n=s.scale,i=s.type,l=s.layout,o=s.axisType;if(n==="auto")return l==="radial"&&o==="radiusAxis"?{scale:Of(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:xg(),realScaleType:"linear"}:i==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:Zm(),realScaleType:"point"}:i==="category"?{scale:Of(),realScaleType:"band"}:{scale:xg(),realScaleType:"linear"};if(od(n)){var d="scale".concat(db(n));return{scale:(CD[d]||Zm)(),realScaleType:CD[d]?d:"point"}}return cs(n)?{scale:n}:{scale:Zm(),realScaleType:"point"}},qD=1e-4,H1e=function(s){var a=s.domain();if(!(!a||a.length<=2)){var r=a.length,n=s.range(),i=Math.min(n[0],n[1])-qD,l=Math.max(n[0],n[1])+qD,o=s(a[0]),d=s(a[r-1]);(o<i||o>l||d<i||d>l)&&s.domain([a[0],a[r-1]])}},V1e=function(s,a){if(!s)return null;for(var r=0,n=s.length;r<n;r++)if(s[r].item===a)return s[r].position;return null},G1e=function(s,a){if(!a||a.length!==2||!dt(a[0])||!dt(a[1]))return s;var r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),i=[s[0],s[1]];return(!dt(s[0])||s[0]<r)&&(i[0]=r),(!dt(s[1])||s[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},W1e=function(s){var a=s.length;if(!(a<=0))for(var r=0,n=s[0].length;r<n;++r)for(var i=0,l=0,o=0;o<a;++o){var d=v0(s[o][r][1])?s[o][r][0]:s[o][r][1];d>=0?(s[o][r][0]=i,s[o][r][1]=i+d,i=s[o][r][1]):(s[o][r][0]=l,s[o][r][1]=l+d,l=s[o][r][1])}},Q1e=function(s){var a=s.length;if(!(a<=0))for(var r=0,n=s[0].length;r<n;++r)for(var i=0,l=0;l<a;++l){var o=v0(s[l][r][1])?s[l][r][0]:s[l][r][1];o>=0?(s[l][r][0]=i,s[l][r][1]=i+o,i=s[l][r][1]):(s[l][r][0]=0,s[l][r][1]=0)}},K1e={sign:W1e,expand:Ihe,none:$u,silhouette:Rhe,wiggle:Phe,positive:Q1e},J1e=function(s,a,r){var n=a.map(function(o){return o.props.dataKey}),i=K1e[r],l=Ohe().keys(n).value(function(o,d){return+Bn(o,d,0)}).order(d2).offset(i);return l(s)},Y1e=function(s,a,r,n,i,l){if(!s)return null;var o=l?a.reverse():a,d={},u=o.reduce(function(f,x){var p,v=(p=x.type)!==null&&p!==void 0&&p.defaultProps?Da(Da({},x.type.defaultProps),x.props):x.props,b=v.stackId,y=v.hide;if(y)return f;var j=v[r],w=f[j]||{hasStack:!1,stackGroups:{}};if(ur(b)){var S=w.stackGroups[b]||{numericAxisId:r,cateAxisId:n,items:[]};S.items.push(x),w.hasStack=!0,w.stackGroups[b]=S}else w.stackGroups[bh("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[x]};return Da(Da({},f),{},Pu({},j,w))},d),h={};return Object.keys(u).reduce(function(f,x){var p=u[x];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(b,y){var j=p.stackGroups[y];return Da(Da({},b),{},Pu({},y,{numericAxisId:r,cateAxisId:n,items:j.items,stackedData:J1e(s,j.items,i)}))},v)}return Da(Da({},f),{},Pu({},x,p))},h)},X1e=function(s,a){var r=a.realScaleType,n=a.type,i=a.tickCount,l=a.originalDomain,o=a.allowDecimals,d=r||a.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&n==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var u=s.domain();if(!u.length)return null;var h=c1e(u,i,o);return s.domain([wb(h),Do(h)]),{niceTicks:h}}if(i&&n==="number"){var f=s.domain(),x=d1e(f,i,o);return{niceTicks:x}}return null};function HD(e){var s=e.axis,a=e.ticks,r=e.bandSize,n=e.entry,i=e.index,l=e.dataKey;if(s.type==="category"){if(!s.allowDuplicatedCategory&&s.dataKey&&!Ss(n[s.dataKey])){var o=Kp(a,"value",n[s.dataKey]);if(o)return o.coordinate+r/2}return a[i]?a[i].coordinate+r/2:null}var d=Bn(n,Ss(l)?s.dataKey:l);return Ss(d)?null:s.scale(d)}var VD=function(s){var a=s.axis,r=s.ticks,n=s.offset,i=s.bandSize,l=s.entry,o=s.index;if(a.type==="category")return r[o]?r[o].coordinate+n:null;var d=Bn(l,a.dataKey,a.domain[o]);return Ss(d)?null:a.scale(d)-i/2+n},Z1e=function(s){var a=s.numericAxis,r=a.scale.domain();if(a.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},eNe=function(s,a){var r,n=(r=s.type)!==null&&r!==void 0&&r.defaultProps?Da(Da({},s.type.defaultProps),s.props):s.props,i=n.stackId;if(ur(i)){var l=a[i];if(l){var o=l.items.indexOf(s);return o>=0?l.stackedData[o]:null}}return null},tNe=function(s){return s.reduce(function(a,r){return[wb(r.concat([a[0]]).filter(dt)),Do(r.concat([a[1]]).filter(dt))]},[1/0,-1/0])},rz=function(s,a,r){return Object.keys(s).reduce(function(n,i){var l=s[i],o=l.stackedData,d=o.reduce(function(u,h){var f=tNe(h.slice(a,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]).map(function(n){return n===1/0||n===-1/0?0:n})},GD=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WD=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,D2=function(s,a,r){if(cs(s))return s(a,r);if(!Array.isArray(s))return a;var n=[];if(dt(s[0]))n[0]=r?s[0]:Math.min(s[0],a[0]);else if(GD.test(s[0])){var i=+GD.exec(s[0])[1];n[0]=a[0]-i}else cs(s[0])?n[0]=s[0](a[0]):n[0]=a[0];if(dt(s[1]))n[1]=r?s[1]:Math.max(s[1],a[1]);else if(WD.test(s[1])){var l=+WD.exec(s[1])[1];n[1]=a[1]+l}else cs(s[1])?n[1]=s[1](a[1]):n[1]=a[1];return n},jg=function(s,a,r){if(s&&s.scale&&s.scale.bandwidth){var n=s.scale.bandwidth();if(!r||n>0)return n}if(s&&a&&a.length>=2){for(var i=ME(a,function(f){return f.coordinate}),l=1/0,o=1,d=i.length;o<d;o++){var u=i[o],h=i[o-1];l=Math.min((u.coordinate||0)-(h.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0},QD=function(s,a,r){return!s||!s.length||Mf(s,fi(r,"type.defaultProps.domain"))?a:s},nz=function(s,a){var r=s.type.defaultProps?Da(Da({},s.type.defaultProps),s.props):s.props,n=r.dataKey,i=r.name,l=r.unit,o=r.formatter,d=r.tooltipType,u=r.chartType,h=r.hide;return Da(Da({},ys(s,!1)),{},{dataKey:n,unit:l,formatter:o,name:i||n,color:oC(s),value:Bn(a,n),type:d,payload:a,chartType:u,hide:h})};function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Bf(e)}function KD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function JD(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?KD(Object(a),!0).forEach(function(r){sNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function sNe(e,s,a){return s=aNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function aNe(e){var s=rNe(e,"string");return Bf(s)=="symbol"?s:s+""}function rNe(e,s){if(Bf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var wg=Math.PI/180,nNe=function(s){return s*180/Math.PI},Pr=function(s,a,r,n){return{x:s+Math.cos(-wg*n)*r,y:a+Math.sin(-wg*n)*r}},iNe=function(s,a){var r=s.x,n=s.y,i=a.x,l=a.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(n-l,2))},lNe=function(s,a){var r=s.x,n=s.y,i=a.cx,l=a.cy,o=iNe({x:r,y:n},{x:i,y:l});if(o<=0)return{radius:o};var d=(r-i)/o,u=Math.acos(d);return n>l&&(u=2*Math.PI-u),{radius:o,angle:nNe(u),angleInRadian:u}},oNe=function(s){var a=s.startAngle,r=s.endAngle,n=Math.floor(a/360),i=Math.floor(r/360),l=Math.min(n,i);return{startAngle:a-l*360,endAngle:r-l*360}},cNe=function(s,a){var r=a.startAngle,n=a.endAngle,i=Math.floor(r/360),l=Math.floor(n/360),o=Math.min(i,l);return s+o*360},YD=function(s,a){var r=s.x,n=s.y,i=lNe({x:r,y:n},a),l=i.radius,o=i.angle,d=a.innerRadius,u=a.outerRadius;if(l<d||l>u)return!1;if(l===0)return!0;var h=oNe(a),f=h.startAngle,x=h.endAngle,p=o,v;if(f<=x){for(;p>x;)p-=360;for(;p<f;)p+=360;v=p>=f&&p<=x}else{for(;p>f;)p-=360;for(;p<x;)p+=360;v=p>=x&&p<=f}return v?JD(JD({},a),{},{radius:l,angle:cNe(p,a)}):null};function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$f(e)}var dNe=["offset"];function uNe(e){return xNe(e)||hNe(e)||fNe(e)||mNe()}function mNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fNe(e,s){if(e){if(typeof e=="string")return M2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return M2(e,s)}}function hNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xNe(e){if(Array.isArray(e))return M2(e)}function M2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function pNe(e,s){if(e==null)return{};var a=gNe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gNe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function XD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function or(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?XD(Object(a),!0).forEach(function(r){bNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):XD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function bNe(e,s,a){return s=vNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function vNe(e){var s=yNe(e,"string");return $f(s)=="symbol"?s:s+""}function yNe(e,s){if($f(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},qf.apply(this,arguments)}var NNe=function(s){var a=s.value,r=s.formatter,n=Ss(s.children)?a:s.children;return cs(r)?r(n):n},jNe=function(s,a){var r=Ii(a-s),n=Math.min(Math.abs(a-s),360);return r*n},wNe=function(s,a,r){var n=s.position,i=s.viewBox,l=s.offset,o=s.className,d=i,u=d.cx,h=d.cy,f=d.innerRadius,x=d.outerRadius,p=d.startAngle,v=d.endAngle,b=d.clockWise,y=(f+x)/2,j=jNe(p,v),w=j>=0?1:-1,S,O;n==="insideStart"?(S=p+w*l,O=b):n==="insideEnd"?(S=v-w*l,O=!b):n==="end"&&(S=v+w*l,O=b),O=j<=0?O:!O;var _=Pr(u,h,y,S),E=Pr(u,h,y,S+(O?1:-1)*359),A="M".concat(_.x,",").concat(_.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(O?0:1,`,
    `).concat(E.x,",").concat(E.y),D=Ss(s.id)?bh("recharts-radial-line-"):s.id;return ke.createElement("text",qf({},r,{dominantBaseline:"central",className:Is("recharts-radial-bar-label",o)}),ke.createElement("defs",null,ke.createElement("path",{id:D,d:A})),ke.createElement("textPath",{xlinkHref:"#".concat(D)},a))},SNe=function(s){var a=s.viewBox,r=s.offset,n=s.position,i=a,l=i.cx,o=i.cy,d=i.innerRadius,u=i.outerRadius,h=i.startAngle,f=i.endAngle,x=(h+f)/2;if(n==="outside"){var p=Pr(l,o,u+r,x),v=p.x,b=p.y;return{x:v,y:b,textAnchor:v>=l?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(d+u)/2,j=Pr(l,o,y,x),w=j.x,S=j.y;return{x:w,y:S,textAnchor:"middle",verticalAnchor:"middle"}},ANe=function(s){var a=s.viewBox,r=s.parentViewBox,n=s.offset,i=s.position,l=a,o=l.x,d=l.y,u=l.width,h=l.height,f=h>=0?1:-1,x=f*n,p=f>0?"end":"start",v=f>0?"start":"end",b=u>=0?1:-1,y=b*n,j=b>0?"end":"start",w=b>0?"start":"end";if(i==="top"){var S={x:o+u/2,y:d-f*n,textAnchor:"middle",verticalAnchor:p};return or(or({},S),r?{height:Math.max(d-r.y,0),width:u}:{})}if(i==="bottom"){var O={x:o+u/2,y:d+h+x,textAnchor:"middle",verticalAnchor:v};return or(or({},O),r?{height:Math.max(r.y+r.height-(d+h),0),width:u}:{})}if(i==="left"){var _={x:o-y,y:d+h/2,textAnchor:j,verticalAnchor:"middle"};return or(or({},_),r?{width:Math.max(_.x-r.x,0),height:h}:{})}if(i==="right"){var E={x:o+u+y,y:d+h/2,textAnchor:w,verticalAnchor:"middle"};return or(or({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:h}:{})}var A=r?{width:u,height:h}:{};return i==="insideLeft"?or({x:o+y,y:d+h/2,textAnchor:w,verticalAnchor:"middle"},A):i==="insideRight"?or({x:o+u-y,y:d+h/2,textAnchor:j,verticalAnchor:"middle"},A):i==="insideTop"?or({x:o+u/2,y:d+x,textAnchor:"middle",verticalAnchor:v},A):i==="insideBottom"?or({x:o+u/2,y:d+h-x,textAnchor:"middle",verticalAnchor:p},A):i==="insideTopLeft"?or({x:o+y,y:d+x,textAnchor:w,verticalAnchor:v},A):i==="insideTopRight"?or({x:o+u-y,y:d+x,textAnchor:j,verticalAnchor:v},A):i==="insideBottomLeft"?or({x:o+y,y:d+h-x,textAnchor:w,verticalAnchor:p},A):i==="insideBottomRight"?or({x:o+u-y,y:d+h-x,textAnchor:j,verticalAnchor:p},A):b0(i)&&(dt(i.x)||Mc(i.x))&&(dt(i.y)||Mc(i.y))?or({x:o+cd(i.x,u),y:d+cd(i.y,h),textAnchor:"end",verticalAnchor:"end"},A):or({x:o+u/2,y:d+h/2,textAnchor:"middle",verticalAnchor:"middle"},A)},ENe=function(s){return"cx"in s&&dt(s.cx)};function Hr(e){var s=e.offset,a=s===void 0?5:s,r=pNe(e,dNe),n=or({offset:a},r),i=n.viewBox,l=n.position,o=n.value,d=n.children,u=n.content,h=n.className,f=h===void 0?"":h,x=n.textBreakAll;if(!i||Ss(o)&&Ss(d)&&!C.isValidElement(u)&&!cs(u))return null;if(C.isValidElement(u))return C.cloneElement(u,n);var p;if(cs(u)){if(p=C.createElement(u,n),C.isValidElement(p))return p}else p=NNe(n);var v=ENe(i),b=ys(n,!0);if(v&&(l==="insideStart"||l==="insideEnd"||l==="end"))return wNe(n,p,b);var y=v?SNe(n):ANe(n);return ke.createElement(og,qf({className:Is("recharts-label",f)},b,y,{breakAll:x}),p)}Hr.displayName="Label";var iz=function(s){var a=s.cx,r=s.cy,n=s.angle,i=s.startAngle,l=s.endAngle,o=s.r,d=s.radius,u=s.innerRadius,h=s.outerRadius,f=s.x,x=s.y,p=s.top,v=s.left,b=s.width,y=s.height,j=s.clockWise,w=s.labelViewBox;if(w)return w;if(dt(b)&&dt(y)){if(dt(f)&&dt(x))return{x:f,y:x,width:b,height:y};if(dt(p)&&dt(v))return{x:p,y:v,width:b,height:y}}return dt(f)&&dt(x)?{x:f,y:x,width:0,height:0}:dt(a)&&dt(r)?{cx:a,cy:r,startAngle:i||n||0,endAngle:l||n||0,innerRadius:u||0,outerRadius:h||d||o||0,clockWise:j}:s.viewBox?s.viewBox:{}},CNe=function(s,a){return s?s===!0?ke.createElement(Hr,{key:"label-implicit",viewBox:a}):ur(s)?ke.createElement(Hr,{key:"label-implicit",viewBox:a,value:s}):C.isValidElement(s)?s.type===Hr?C.cloneElement(s,{key:"label-implicit",viewBox:a}):ke.createElement(Hr,{key:"label-implicit",content:s,viewBox:a}):cs(s)?ke.createElement(Hr,{key:"label-implicit",content:s,viewBox:a}):b0(s)?ke.createElement(Hr,qf({viewBox:a},s,{key:"label-implicit"})):null:null},TNe=function(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!s||!s.children&&r&&!s.label)return null;var n=s.children,i=iz(s),l=Di(n,Hr).map(function(d,u){return C.cloneElement(d,{viewBox:a||i,key:"label-".concat(u)})});if(!r)return l;var o=CNe(s.label,a||i);return[o].concat(uNe(l))};Hr.parseViewBox=iz;Hr.renderCallByParent=TNe;var Jw,ZD;function _Ne(){if(ZD)return Jw;ZD=1;function e(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}return Jw=e,Jw}var kNe=_Ne();const ONe=ra(kNe);function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Hf(e)}var INe=["valueAccessor"],RNe=["data","dataKey","clockWise","id","textBreakAll"];function PNe(e){return FNe(e)||LNe(e)||MNe(e)||DNe()}function DNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MNe(e,s){if(e){if(typeof e=="string")return L2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L2(e,s)}}function LNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FNe(e){if(Array.isArray(e))return L2(e)}function L2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Sg.apply(this,arguments)}function e6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function t6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?e6(Object(a),!0).forEach(function(r){UNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):e6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function UNe(e,s,a){return s=zNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function zNe(e){var s=BNe(e,"string");return Hf(s)=="symbol"?s:s+""}function BNe(e,s){if(Hf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function s6(e,s){if(e==null)return{};var a=$Ne(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $Ne(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var qNe=function(s){return Array.isArray(s.value)?ONe(s.value):s.value};function $o(e){var s=e.valueAccessor,a=s===void 0?qNe:s,r=s6(e,INe),n=r.data,i=r.dataKey,l=r.clockWise,o=r.id,d=r.textBreakAll,u=s6(r,RNe);return!n||!n.length?null:ke.createElement(_a,{className:"recharts-label-list"},n.map(function(h,f){var x=Ss(i)?a(h,f):Bn(h&&h.payload,i),p=Ss(o)?{}:{id:"".concat(o,"-").concat(f)};return ke.createElement(Hr,Sg({},ys(h,!0),u,p,{parentViewBox:h.parentViewBox,value:x,textBreakAll:d,viewBox:Hr.parseViewBox(Ss(l)?h:t6(t6({},h),{},{clockWise:l})),key:"label-".concat(f),index:f}))}))}$o.displayName="LabelList";function HNe(e,s){return e?e===!0?ke.createElement($o,{key:"labelList-implicit",data:s}):ke.isValidElement(e)||cs(e)?ke.createElement($o,{key:"labelList-implicit",data:s,content:e}):b0(e)?ke.createElement($o,Sg({data:s},e,{key:"labelList-implicit"})):null:null}function VNe(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var r=e.children,n=Di(r,$o).map(function(l,o){return C.cloneElement(l,{data:s,key:"labelList-".concat(o)})});if(!a)return n;var i=HNe(e.label,s);return[i].concat(PNe(n))}$o.renderCallByParent=VNe;function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Vf(e)}function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F2.apply(this,arguments)}function a6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function r6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?a6(Object(a),!0).forEach(function(r){GNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):a6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function GNe(e,s,a){return s=WNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function WNe(e){var s=QNe(e,"string");return Vf(s)=="symbol"?s:s+""}function QNe(e,s){if(Vf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var KNe=function(s,a){var r=Ii(a-s),n=Math.min(Math.abs(a-s),359.999);return r*n},up=function(s){var a=s.cx,r=s.cy,n=s.radius,i=s.angle,l=s.sign,o=s.isExternal,d=s.cornerRadius,u=s.cornerIsExternal,h=d*(o?1:-1)+n,f=Math.asin(d/h)/wg,x=u?i:i+l*f,p=Pr(a,r,h,x),v=Pr(a,r,n,x),b=u?i-l*f:i,y=Pr(a,r,h*Math.cos(f*wg),b);return{center:p,circleTangency:v,lineTangency:y,theta:f}},lz=function(s){var a=s.cx,r=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.startAngle,o=s.endAngle,d=KNe(l,o),u=l+d,h=Pr(a,r,i,l),f=Pr(a,r,i,u),x="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(l>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var p=Pr(a,r,n,l),v=Pr(a,r,n,u);x+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(l<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else x+="L ".concat(a,",").concat(r," Z");return x},JNe=function(s){var a=s.cx,r=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.cornerRadius,o=s.forceCornerRadius,d=s.cornerIsExternal,u=s.startAngle,h=s.endAngle,f=Ii(h-u),x=up({cx:a,cy:r,radius:i,angle:u,sign:f,cornerRadius:l,cornerIsExternal:d}),p=x.circleTangency,v=x.lineTangency,b=x.theta,y=up({cx:a,cy:r,radius:i,angle:h,sign:-f,cornerRadius:l,cornerIsExternal:d}),j=y.circleTangency,w=y.lineTangency,S=y.theta,O=d?Math.abs(u-h):Math.abs(u-h)-b-S;if(O<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):lz({cx:a,cy:r,innerRadius:n,outerRadius:i,startAngle:u,endAngle:h});var _="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(O>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var E=up({cx:a,cy:r,radius:n,angle:u,sign:f,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),A=E.circleTangency,D=E.lineTangency,L=E.theta,B=up({cx:a,cy:r,radius:n,angle:h,sign:-f,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),I=B.circleTangency,T=B.lineTangency,z=B.theta,k=d?Math.abs(u-h):Math.abs(u-h)-L-z;if(k<0&&l===0)return"".concat(_,"L").concat(a,",").concat(r,"Z");_+="L".concat(T.x,",").concat(T.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(f>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,"Z")}else _+="L".concat(a,",").concat(r,"Z");return _},YNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oz=function(s){var a=r6(r6({},YNe),s),r=a.cx,n=a.cy,i=a.innerRadius,l=a.outerRadius,o=a.cornerRadius,d=a.forceCornerRadius,u=a.cornerIsExternal,h=a.startAngle,f=a.endAngle,x=a.className;if(l<i||h===f)return null;var p=Is("recharts-sector",x),v=l-i,b=cd(o,v,0,!0),y;return b>0&&Math.abs(h-f)<360?y=JNe({cx:r,cy:n,innerRadius:i,outerRadius:l,cornerRadius:Math.min(b,v/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:h,endAngle:f}):y=lz({cx:r,cy:n,innerRadius:i,outerRadius:l,startAngle:h,endAngle:f}),ke.createElement("path",F2({},ys(a,!0),{className:p,d:y,role:"img"}))};function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gf(e)}function U2(){return U2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},U2.apply(this,arguments)}function n6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function i6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?n6(Object(a),!0).forEach(function(r){XNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function XNe(e,s,a){return s=ZNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function ZNe(e){var s=eje(e,"string");return Gf(s)=="symbol"?s:s+""}function eje(e,s){if(Gf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var l6={curveBasisClosed:yhe,curveBasisOpen:Nhe,curveBasis:vhe,curveBumpX:nhe,curveBumpY:ihe,curveLinearClosed:jhe,curveLinear:mb,curveMonotoneX:whe,curveMonotoneY:She,curveNatural:Ahe,curveStep:Ehe,curveStepAfter:The,curveStepBefore:Che},mp=function(s){return s.x===+s.x&&s.y===+s.y},Tm=function(s){return s.x},_m=function(s){return s.y},tje=function(s,a){if(cs(s))return s;var r="curve".concat(db(s));return(r==="curveMonotone"||r==="curveBump")&&a?l6["".concat(r).concat(a==="vertical"?"Y":"X")]:l6[r]||mb},sje=function(s){var a=s.type,r=a===void 0?"linear":a,n=s.points,i=n===void 0?[]:n,l=s.baseLine,o=s.layout,d=s.connectNulls,u=d===void 0?!1:d,h=tje(r,o),f=u?i.filter(function(b){return mp(b)}):i,x;if(Array.isArray(l)){var p=u?l.filter(function(b){return mp(b)}):l,v=f.map(function(b,y){return i6(i6({},b),{},{base:p[y]})});return o==="vertical"?x=ap().y(_m).x1(Tm).x0(function(b){return b.base.x}):x=ap().x(Tm).y1(_m).y0(function(b){return b.base.y}),x.defined(mp).curve(h),x(v)}return o==="vertical"&&dt(l)?x=ap().y(_m).x1(Tm).x0(l):dt(l)?x=ap().x(Tm).y1(_m).y0(l):x=m7().x(Tm).y(_m),x.defined(mp).curve(h),x(f)},tf=function(s){var a=s.className,r=s.points,n=s.path,i=s.pathRef;if((!r||!r.length)&&!n)return null;var l=r&&r.length?sje(s):n;return C.createElement("path",U2({},ys(s,!1),Jp(s),{className:Is("recharts-curve",a),d:l,ref:i}))},Yw={exports:{}},Xw,o6;function aje(){if(o6)return Xw;o6=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Xw=e,Xw}var Zw,c6;function rje(){if(c6)return Zw;c6=1;var e=aje();function s(){}function a(){}return a.resetWarningCache=s,Zw=function(){function r(l,o,d,u,h,f){if(f!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function n(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:a,resetWarningCache:s};return i.PropTypes=i,i},Zw}var d6;function nje(){return d6||(d6=1,Yw.exports=rje()()),Yw.exports}var ije=nje();const Qs=ra(ije);var lje=Object.getOwnPropertyNames,oje=Object.getOwnPropertySymbols,cje=Object.prototype.hasOwnProperty;function u6(e,s){return function(r,n,i){return e(r,n,i)&&s(r,n,i)}}function fp(e){return function(a,r,n){if(!a||!r||typeof a!="object"||typeof r!="object")return e(a,r,n);var i=n.cache,l=i.get(a),o=i.get(r);if(l&&o)return l===r&&o===a;i.set(a,r),i.set(r,a);var d=e(a,r,n);return i.delete(a),i.delete(r),d}}function dje(e){return e!=null?e[Symbol.toStringTag]:void 0}function m6(e){return lje(e).concat(oje(e))}var uje=Object.hasOwn||(function(e,s){return cje.call(e,s)});function jd(e,s){return e===s||!e&&!s&&e!==e&&s!==s}var mje="__v",fje="__o",hje="_owner",f6=Object.getOwnPropertyDescriptor,h6=Object.keys;function xje(e,s,a){var r=e.length;if(s.length!==r)return!1;for(;r-- >0;)if(!a.equals(e[r],s[r],r,r,e,s,a))return!1;return!0}function pje(e,s){return jd(e.getTime(),s.getTime())}function gje(e,s){return e.name===s.name&&e.message===s.message&&e.cause===s.cause&&e.stack===s.stack}function bje(e,s){return e===s}function x6(e,s,a){var r=e.size;if(r!==s.size)return!1;if(!r)return!0;for(var n=new Array(r),i=e.entries(),l,o,d=0;(l=i.next())&&!l.done;){for(var u=s.entries(),h=!1,f=0;(o=u.next())&&!o.done;){if(n[f]){f++;continue}var x=l.value,p=o.value;if(a.equals(x[0],p[0],d,f,e,s,a)&&a.equals(x[1],p[1],x[0],p[0],e,s,a)){h=n[f]=!0;break}f++}if(!h)return!1;d++}return!0}var vje=jd;function yje(e,s,a){var r=h6(e),n=r.length;if(h6(s).length!==n)return!1;for(;n-- >0;)if(!cz(e,s,a,r[n]))return!1;return!0}function km(e,s,a){var r=m6(e),n=r.length;if(m6(s).length!==n)return!1;for(var i,l,o;n-- >0;)if(i=r[n],!cz(e,s,a,i)||(l=f6(e,i),o=f6(s,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function Nje(e,s){return jd(e.valueOf(),s.valueOf())}function jje(e,s){return e.source===s.source&&e.flags===s.flags}function p6(e,s,a){var r=e.size;if(r!==s.size)return!1;if(!r)return!0;for(var n=new Array(r),i=e.values(),l,o;(l=i.next())&&!l.done;){for(var d=s.values(),u=!1,h=0;(o=d.next())&&!o.done;){if(!n[h]&&a.equals(l.value,o.value,l.value,o.value,e,s,a)){u=n[h]=!0;break}h++}if(!u)return!1}return!0}function wje(e,s){var a=e.length;if(s.length!==a)return!1;for(;a-- >0;)if(e[a]!==s[a])return!1;return!0}function Sje(e,s){return e.hostname===s.hostname&&e.pathname===s.pathname&&e.protocol===s.protocol&&e.port===s.port&&e.hash===s.hash&&e.username===s.username&&e.password===s.password}function cz(e,s,a,r){return(r===hje||r===fje||r===mje)&&(e.$$typeof||s.$$typeof)?!0:uje(s,r)&&a.equals(e[r],s[r],r,r,e,s,a)}var Aje="[object Arguments]",Eje="[object Boolean]",Cje="[object Date]",Tje="[object Error]",_je="[object Map]",kje="[object Number]",Oje="[object Object]",Ije="[object RegExp]",Rje="[object Set]",Pje="[object String]",Dje="[object URL]",Mje=Array.isArray,g6=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,b6=Object.assign,Lje=Object.prototype.toString.call.bind(Object.prototype.toString);function Fje(e){var s=e.areArraysEqual,a=e.areDatesEqual,r=e.areErrorsEqual,n=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,o=e.areObjectsEqual,d=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,h=e.areSetsEqual,f=e.areTypedArraysEqual,x=e.areUrlsEqual,p=e.unknownTagComparators;return function(b,y,j){if(b===y)return!0;if(b==null||y==null)return!1;var w=typeof b;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?l(b,y,j):w==="function"?n(b,y,j):!1;var S=b.constructor;if(S!==y.constructor)return!1;if(S===Object)return o(b,y,j);if(Mje(b))return s(b,y,j);if(g6!=null&&g6(b))return f(b,y,j);if(S===Date)return a(b,y,j);if(S===RegExp)return u(b,y,j);if(S===Map)return i(b,y,j);if(S===Set)return h(b,y,j);var O=Lje(b);if(O===Cje)return a(b,y,j);if(O===Ije)return u(b,y,j);if(O===_je)return i(b,y,j);if(O===Rje)return h(b,y,j);if(O===Oje)return typeof b.then!="function"&&typeof y.then!="function"&&o(b,y,j);if(O===Dje)return x(b,y,j);if(O===Tje)return r(b,y,j);if(O===Aje)return o(b,y,j);if(O===Eje||O===kje||O===Pje)return d(b,y,j);if(p){var _=p[O];if(!_){var E=dje(b);E&&(_=p[E])}if(_)return _(b,y,j)}return!1}}function Uje(e){var s=e.circular,a=e.createCustomConfig,r=e.strict,n={areArraysEqual:r?km:xje,areDatesEqual:pje,areErrorsEqual:gje,areFunctionsEqual:bje,areMapsEqual:r?u6(x6,km):x6,areNumbersEqual:vje,areObjectsEqual:r?km:yje,arePrimitiveWrappersEqual:Nje,areRegExpsEqual:jje,areSetsEqual:r?u6(p6,km):p6,areTypedArraysEqual:r?km:wje,areUrlsEqual:Sje,unknownTagComparators:void 0};if(a&&(n=b6({},n,a(n))),s){var i=fp(n.areArraysEqual),l=fp(n.areMapsEqual),o=fp(n.areObjectsEqual),d=fp(n.areSetsEqual);n=b6({},n,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:d})}return n}function zje(e){return function(s,a,r,n,i,l,o){return e(s,a,o)}}function Bje(e){var s=e.circular,a=e.comparator,r=e.createState,n=e.equals,i=e.strict;if(r)return function(d,u){var h=r(),f=h.cache,x=f===void 0?s?new WeakMap:void 0:f,p=h.meta;return a(d,u,{cache:x,equals:n,meta:p,strict:i})};if(s)return function(d,u){return a(d,u,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};var l={cache:void 0,equals:n,meta:void 0,strict:i};return function(d,u){return a(d,u,l)}}var $je=oc();oc({strict:!0});oc({circular:!0});oc({circular:!0,strict:!0});oc({createInternalComparator:function(){return jd}});oc({strict:!0,createInternalComparator:function(){return jd}});oc({circular:!0,createInternalComparator:function(){return jd}});oc({circular:!0,createInternalComparator:function(){return jd},strict:!0});function oc(e){e===void 0&&(e={});var s=e.circular,a=s===void 0?!1:s,r=e.createInternalComparator,n=e.createState,i=e.strict,l=i===void 0?!1:i,o=Uje(e),d=Fje(o),u=r?r(d):zje(d);return Bje({circular:a,comparator:d,createState:n,equals:u,strict:l})}function qje(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function v6(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function n(i){a<0&&(a=i),i-a>s?(e(i),a=-1):qje(n)};requestAnimationFrame(r)}function z2(e){"@babel/helpers - typeof";return z2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},z2(e)}function Hje(e){return Qje(e)||Wje(e)||Gje(e)||Vje()}function Vje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gje(e,s){if(e){if(typeof e=="string")return y6(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y6(e,s)}}function y6(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Wje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qje(e){if(Array.isArray(e))return e}function Kje(){var e={},s=function(){return null},a=!1,r=function n(i){if(!a){if(Array.isArray(i)){if(!i.length)return;var l=i,o=Hje(l),d=o[0],u=o.slice(1);if(typeof d=="number"){v6(n.bind(null,u),d);return}n(d),v6(n.bind(null,u));return}z2(i)==="object"&&(e=i,s(e)),typeof i=="function"&&i()}};return{stop:function(){a=!0},start:function(i){a=!1,r(i)},subscribe:function(i){return s=i,function(){s=function(){return null}}}}}function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wf(e)}function N6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function j6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?N6(Object(a),!0).forEach(function(r){dz(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function dz(e,s,a){return s=Jje(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Jje(e){var s=Yje(e,"string");return Wf(s)==="symbol"?s:String(s)}function Yje(e,s){if(Wf(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Wf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var Xje=function(s,a){return[Object.keys(s),Object.keys(a)].reduce(function(r,n){return r.filter(function(i){return n.includes(i)})})},Zje=function(s){return s},ewe=function(s){return s.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},sf=function(s,a){return Object.keys(a).reduce(function(r,n){return j6(j6({},r),{},dz({},n,s(n,a[n])))},{})},w6=function(s,a,r){return s.map(function(n){return"".concat(ewe(n)," ").concat(a,"ms ").concat(r)}).join(",")};function twe(e,s){return rwe(e)||awe(e,s)||uz(e,s)||swe()}function swe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function awe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function rwe(e){if(Array.isArray(e))return e}function nwe(e){return owe(e)||lwe(e)||uz(e)||iwe()}function iwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uz(e,s){if(e){if(typeof e=="string")return B2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B2(e,s)}}function lwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function owe(e){if(Array.isArray(e))return B2(e)}function B2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}var Ag=1e-4,mz=function(s,a){return[0,3*s,3*a-6*s,3*s-3*a+1]},fz=function(s,a){return s.map(function(r,n){return r*Math.pow(a,n)}).reduce(function(r,n){return r+n})},S6=function(s,a){return function(r){var n=mz(s,a);return fz(n,r)}},cwe=function(s,a){return function(r){var n=mz(s,a),i=[].concat(nwe(n.map(function(l,o){return l*o}).slice(1)),[0]);return fz(i,r)}},A6=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];var n=a[0],i=a[1],l=a[2],o=a[3];if(a.length===1)switch(a[0]){case"linear":n=0,i=0,l=1,o=1;break;case"ease":n=.25,i=.1,l=.25,o=1;break;case"ease-in":n=.42,i=0,l=1,o=1;break;case"ease-out":n=.42,i=0,l=.58,o=1;break;case"ease-in-out":n=0,i=0,l=.58,o=1;break;default:{var d=a[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),h=twe(u,4);n=h[0],i=h[1],l=h[2],o=h[3]}}}var f=S6(n,l),x=S6(i,o),p=cwe(n,l),v=function(j){return j>1?1:j<0?0:j},b=function(j){for(var w=j>1?1:j,S=w,O=0;O<8;++O){var _=f(S)-w,E=p(S);if(Math.abs(_-w)<Ag||E<Ag)return x(S);S=v(S-_/E)}return x(S)};return b.isStepper=!1,b},dwe=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=s.stiff,r=a===void 0?100:a,n=s.damping,i=n===void 0?8:n,l=s.dt,o=l===void 0?17:l,d=function(h,f,x){var p=-(h-f)*r,v=x*i,b=x+(p-v)*o/1e3,y=x*o/1e3+h;return Math.abs(y-f)<Ag&&Math.abs(b)<Ag?[f,0]:[y,b]};return d.isStepper=!0,d.dt=o,d},uwe=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];var n=a[0];if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A6(n);case"spring":return dwe();default:if(n.split("(")[0]==="cubic-bezier")return A6(n)}return typeof n=="function"?n:null};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qf(e)}function E6(e){return hwe(e)||fwe(e)||hz(e)||mwe()}function mwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hwe(e){if(Array.isArray(e))return q2(e)}function C6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function _r(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?C6(Object(a),!0).forEach(function(r){$2(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function $2(e,s,a){return s=xwe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function xwe(e){var s=pwe(e,"string");return Qf(s)==="symbol"?s:String(s)}function pwe(e,s){if(Qf(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Qf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function gwe(e,s){return ywe(e)||vwe(e,s)||hz(e,s)||bwe()}function bwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hz(e,s){if(e){if(typeof e=="string")return q2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return q2(e,s)}}function q2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function vwe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function ywe(e){if(Array.isArray(e))return e}var Eg=function(s,a,r){return s+(a-s)*r},H2=function(s){var a=s.from,r=s.to;return a!==r},Nwe=function e(s,a,r){var n=sf(function(i,l){if(H2(l)){var o=s(l.from,l.to,l.velocity),d=gwe(o,2),u=d[0],h=d[1];return _r(_r({},l),{},{from:u,velocity:h})}return l},a);return r<1?sf(function(i,l){return H2(l)?_r(_r({},l),{},{velocity:Eg(l.velocity,n[i].velocity,r),from:Eg(l.from,n[i].from,r)}):l},a):e(s,n,r-1)};const jwe=(function(e,s,a,r,n){var i=Xje(e,s),l=i.reduce(function(y,j){return _r(_r({},y),{},$2({},j,[e[j],s[j]]))},{}),o=i.reduce(function(y,j){return _r(_r({},y),{},$2({},j,{from:e[j],velocity:0,to:s[j]}))},{}),d=-1,u,h,f=function(){return null},x=function(){return sf(function(j,w){return w.from},o)},p=function(){return!Object.values(o).filter(H2).length},v=function(j){u||(u=j);var w=j-u,S=w/a.dt;o=Nwe(a,o,S),n(_r(_r(_r({},e),s),x())),u=j,p()||(d=requestAnimationFrame(f))},b=function(j){h||(h=j);var w=(j-h)/r,S=sf(function(_,E){return Eg.apply(void 0,E6(E).concat([a(w)]))},l);if(n(_r(_r(_r({},e),s),S)),w<1)d=requestAnimationFrame(f);else{var O=sf(function(_,E){return Eg.apply(void 0,E6(E).concat([a(1)]))},l);n(_r(_r(_r({},e),s),O))}};return f=a.isStepper?v:b,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(d)}}});function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Yu(e)}var wwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Swe(e,s){if(e==null)return{};var a=Awe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Awe(e,s){if(e==null)return{};var a={},r=Object.keys(e),n,i;for(i=0;i<r.length;i++)n=r[i],!(s.indexOf(n)>=0)&&(a[n]=e[n]);return a}function eS(e){return _we(e)||Twe(e)||Cwe(e)||Ewe()}function Ewe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(e,s){if(e){if(typeof e=="string")return V2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return V2(e,s)}}function Twe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _we(e){if(Array.isArray(e))return V2(e)}function V2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function T6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ei(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?T6(Object(a),!0).forEach(function(r){Um(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Um(e,s,a){return s=xz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function kwe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function Owe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xz(r.key),r)}}function Iwe(e,s,a){return s&&Owe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function xz(e){var s=Rwe(e,"string");return Yu(s)==="symbol"?s:String(s)}function Rwe(e,s){if(Yu(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Yu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Pwe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&G2(e,s)}function G2(e,s){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},G2(e,s)}function Dwe(e){var s=Mwe();return function(){var r=Cg(e),n;if(s){var i=Cg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W2(this,n)}}function W2(e,s){if(s&&(Yu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q2(e)}function Q2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cg(e){return Cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Cg(e)}var Wl=(function(e){Pwe(a,e);var s=Dwe(a);function a(r,n){var i;kwe(this,a),i=s.call(this,r,n);var l=i.props,o=l.isActive,d=l.attributeName,u=l.from,h=l.to,f=l.steps,x=l.children,p=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Q2(i)),i.changeStyle=i.changeStyle.bind(Q2(i)),!o||p<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:h}),W2(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof x=="function")return i.state={style:u},W2(i);i.state={style:d?Um({},d,u):u}}else i.state={style:{}};return i}return Iwe(a,[{key:"componentDidMount",value:function(){var n=this.props,i=n.isActive,l=n.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(n){var i=this.props,l=i.isActive,o=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,h=i.to,f=i.from,x=this.state.style;if(o){if(!l){var p={style:d?Um({},d,h):h};this.state&&x&&(d&&x[d]!==h||!d&&x!==h)&&this.setState(p);return}if(!($je(n.to,h)&&n.canBegin&&n.isActive)){var v=!n.canBegin||!n.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=v||u?f:n.to;if(this.state&&x){var y={style:d?Um({},d,b):b};(d&&x[d]!==b||!d&&x!==b)&&this.setState(y)}this.runAnimation(Ei(Ei({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var n=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),n&&n()}},{key:"handleStyleChange",value:function(n){this.changeStyle(n)}},{key:"changeStyle",value:function(n){this.mounted&&this.setState({style:n})}},{key:"runJSAnimation",value:function(n){var i=this,l=n.from,o=n.to,d=n.duration,u=n.easing,h=n.begin,f=n.onAnimationEnd,x=n.onAnimationStart,p=jwe(l,o,uwe(u),d,this.changeStyle),v=function(){i.stopJSAnimation=p()};this.manager.start([x,h,v,d,f])}},{key:"runStepAnimation",value:function(n){var i=this,l=n.steps,o=n.begin,d=n.onAnimationStart,u=l[0],h=u.style,f=u.duration,x=f===void 0?0:f,p=function(b,y,j){if(j===0)return b;var w=y.duration,S=y.easing,O=S===void 0?"ease":S,_=y.style,E=y.properties,A=y.onAnimationEnd,D=j>0?l[j-1]:y,L=E||Object.keys(_);if(typeof O=="function"||O==="spring")return[].concat(eS(b),[i.runJSAnimation.bind(i,{from:D.style,to:_,duration:w,easing:O}),w]);var B=w6(L,w,O),I=Ei(Ei(Ei({},D.style),_),{},{transition:B});return[].concat(eS(b),[I,w,A]).filter(Zje)};return this.manager.start([d].concat(eS(l.reduce(p,[h,Math.max(x,o)])),[n.onAnimationEnd]))}},{key:"runAnimation",value:function(n){this.manager||(this.manager=Kje());var i=n.begin,l=n.duration,o=n.attributeName,d=n.to,u=n.easing,h=n.onAnimationStart,f=n.onAnimationEnd,x=n.steps,p=n.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(n);return}if(x.length>1){this.runStepAnimation(n);return}var b=o?Um({},o,d):d,y=w6(Object.keys(b),l,u);v.start([h,i,Ei(Ei({},b),{},{transition:y}),l,f])}},{key:"render",value:function(){var n=this.props,i=n.children;n.begin;var l=n.duration;n.attributeName,n.easing;var o=n.isActive;n.steps,n.from,n.to,n.canBegin,n.onAnimationEnd,n.shouldReAnimate,n.onAnimationReStart;var d=Swe(n,wwe),u=C.Children.count(i),h=this.state.style;if(typeof i=="function")return i(h);if(!o||u===0||l<=0)return i;var f=function(p){var v=p.props,b=v.style,y=b===void 0?{}:b,j=v.className,w=C.cloneElement(p,Ei(Ei({},d),{},{style:Ei(Ei({},y),h),className:j}));return w};return u===1?f(C.Children.only(i)):ke.createElement("div",null,C.Children.map(i,function(x){return f(x)}))}}]),a})(C.PureComponent);Wl.displayName="Animate";Wl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wl.propTypes={from:Qs.oneOfType([Qs.object,Qs.string]),to:Qs.oneOfType([Qs.object,Qs.string]),attributeName:Qs.string,duration:Qs.number,begin:Qs.number,easing:Qs.oneOfType([Qs.string,Qs.func]),steps:Qs.arrayOf(Qs.shape({duration:Qs.number.isRequired,style:Qs.object.isRequired,easing:Qs.oneOfType([Qs.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Qs.func]),properties:Qs.arrayOf("string"),onAnimationEnd:Qs.func})),children:Qs.oneOfType([Qs.node,Qs.func]),isActive:Qs.bool,canBegin:Qs.bool,onAnimationEnd:Qs.func,shouldReAnimate:Qs.bool,onAnimationStart:Qs.func,onAnimationReStart:Qs.func};function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Kf(e)}function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Tg.apply(this,arguments)}function Lwe(e,s){return Bwe(e)||zwe(e,s)||Uwe(e,s)||Fwe()}function Fwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uwe(e,s){if(e){if(typeof e=="string")return _6(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _6(e,s)}}function _6(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function zwe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function Bwe(e){if(Array.isArray(e))return e}function k6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function O6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?k6(Object(a),!0).forEach(function(r){$we(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function $we(e,s,a){return s=qwe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function qwe(e){var s=Hwe(e,"string");return Kf(s)=="symbol"?s:s+""}function Hwe(e,s){if(Kf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var I6=function(s,a,r,n,i){var l=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,d=r>=0?1:-1,u=n>=0&&r>=0||n<0&&r<0?1:0,h;if(l>0&&i instanceof Array){for(var f=[0,0,0,0],x=0,p=4;x<p;x++)f[x]=i[x]>l?l:i[x];h="M".concat(s,",").concat(a+o*f[0]),f[0]>0&&(h+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(s+d*f[0],",").concat(a)),h+="L ".concat(s+r-d*f[1],",").concat(a),f[1]>0&&(h+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(s+r,",").concat(a+o*f[1])),h+="L ".concat(s+r,",").concat(a+n-o*f[2]),f[2]>0&&(h+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(s+r-d*f[2],",").concat(a+n)),h+="L ".concat(s+d*f[3],",").concat(a+n),f[3]>0&&(h+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(s,",").concat(a+n-o*f[3])),h+="Z"}else if(l>0&&i===+i&&i>0){var v=Math.min(l,i);h="M ".concat(s,",").concat(a+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s+d*v,",").concat(a,`
            L `).concat(s+r-d*v,",").concat(a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s+r,",").concat(a+o*v,`
            L `).concat(s+r,",").concat(a+n-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s+r-d*v,",").concat(a+n,`
            L `).concat(s+d*v,",").concat(a+n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s,",").concat(a+n-o*v," Z")}else h="M ".concat(s,",").concat(a," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return h},Vwe=function(s,a){if(!s||!a)return!1;var r=s.x,n=s.y,i=a.x,l=a.y,o=a.width,d=a.height;if(Math.abs(o)>0&&Math.abs(d)>0){var u=Math.min(i,i+o),h=Math.max(i,i+o),f=Math.min(l,l+d),x=Math.max(l,l+d);return r>=u&&r<=h&&n>=f&&n<=x}return!1},Gwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cC=function(s){var a=O6(O6({},Gwe),s),r=C.useRef(),n=C.useState(-1),i=Lwe(n,2),l=i[0],o=i[1];C.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var O=r.current.getTotalLength();O&&o(O)}catch{}},[]);var d=a.x,u=a.y,h=a.width,f=a.height,x=a.radius,p=a.className,v=a.animationEasing,b=a.animationDuration,y=a.animationBegin,j=a.isAnimationActive,w=a.isUpdateAnimationActive;if(d!==+d||u!==+u||h!==+h||f!==+f||h===0||f===0)return null;var S=Is("recharts-rectangle",p);return w?ke.createElement(Wl,{canBegin:l>0,from:{width:h,height:f,x:d,y:u},to:{width:h,height:f,x:d,y:u},duration:b,animationEasing:v,isActive:w},function(O){var _=O.width,E=O.height,A=O.x,D=O.y;return ke.createElement(Wl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,isActive:j,easing:v},ke.createElement("path",Tg({},ys(a,!0),{className:S,d:I6(A,D,_,E,x),ref:r})))}):ke.createElement("path",Tg({},ys(a,!0),{className:S,d:I6(d,u,h,f,x)}))};function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},K2.apply(this,arguments)}var dC=function(s){var a=s.cx,r=s.cy,n=s.r,i=s.className,l=Is("recharts-dot",i);return a===+a&&r===+r&&n===+n?C.createElement("circle",K2({},ys(s,!1),Jp(s),{className:l,cx:a,cy:r,r:n})):null};function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Jf(e)}var Wwe=["x","y","top","left","width","height","className"];function J2(){return J2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},J2.apply(this,arguments)}function R6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Qwe(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?R6(Object(a),!0).forEach(function(r){Kwe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Kwe(e,s,a){return s=Jwe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Jwe(e){var s=Ywe(e,"string");return Jf(s)=="symbol"?s:s+""}function Ywe(e,s){if(Jf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Xwe(e,s){if(e==null)return{};var a=Zwe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zwe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var eSe=function(s,a,r,n,i,l){return"M".concat(s,",").concat(i,"v").concat(n,"M").concat(l,",").concat(a,"h").concat(r)},tSe=function(s){var a=s.x,r=a===void 0?0:a,n=s.y,i=n===void 0?0:n,l=s.top,o=l===void 0?0:l,d=s.left,u=d===void 0?0:d,h=s.width,f=h===void 0?0:h,x=s.height,p=x===void 0?0:x,v=s.className,b=Xwe(s,Wwe),y=Qwe({x:r,y:i,top:o,left:u,width:f,height:p},b);return!dt(r)||!dt(i)||!dt(f)||!dt(p)||!dt(o)||!dt(u)?null:ke.createElement("path",J2({},ys(y,!0),{className:Is("recharts-cross",v),d:eSe(r,i,f,p,o,u)}))},tS,P6;function sSe(){if(P6)return tS;P6=1;var e=D7(),s=e(Object.getPrototypeOf,Object);return tS=s,tS}var sS,D6;function aSe(){if(D6)return sS;D6=1;var e=Yl(),s=sSe(),a=Xl(),r="[object Object]",n=Function.prototype,i=Object.prototype,l=n.toString,o=i.hasOwnProperty,d=l.call(Object);function u(h){if(!a(h)||e(h)!=r)return!1;var f=s(h);if(f===null)return!0;var x=o.call(f,"constructor")&&f.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==d}return sS=u,sS}var rSe=aSe();const nSe=ra(rSe);var aS,M6;function iSe(){if(M6)return aS;M6=1;var e=Yl(),s=Xl(),a="[object Boolean]";function r(n){return n===!0||n===!1||s(n)&&e(n)==a}return aS=r,aS}var lSe=iSe();const oSe=ra(lSe);function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Yf(e)}function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_g.apply(this,arguments)}function cSe(e,s){return fSe(e)||mSe(e,s)||uSe(e,s)||dSe()}function dSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uSe(e,s){if(e){if(typeof e=="string")return L6(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L6(e,s)}}function L6(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function mSe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function fSe(e){if(Array.isArray(e))return e}function F6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function U6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?F6(Object(a),!0).forEach(function(r){hSe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function hSe(e,s,a){return s=xSe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function xSe(e){var s=pSe(e,"string");return Yf(s)=="symbol"?s:s+""}function pSe(e,s){if(Yf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var z6=function(s,a,r,n,i){var l=r-n,o;return o="M ".concat(s,",").concat(a),o+="L ".concat(s+r,",").concat(a),o+="L ".concat(s+r-l/2,",").concat(a+i),o+="L ".concat(s+r-l/2-n,",").concat(a+i),o+="L ".concat(s,",").concat(a," Z"),o},gSe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bSe=function(s){var a=U6(U6({},gSe),s),r=C.useRef(),n=C.useState(-1),i=cSe(n,2),l=i[0],o=i[1];C.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&o(S)}catch{}},[]);var d=a.x,u=a.y,h=a.upperWidth,f=a.lowerWidth,x=a.height,p=a.className,v=a.animationEasing,b=a.animationDuration,y=a.animationBegin,j=a.isUpdateAnimationActive;if(d!==+d||u!==+u||h!==+h||f!==+f||x!==+x||h===0&&f===0||x===0)return null;var w=Is("recharts-trapezoid",p);return j?ke.createElement(Wl,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:u},to:{upperWidth:h,lowerWidth:f,height:x,x:d,y:u},duration:b,animationEasing:v,isActive:j},function(S){var O=S.upperWidth,_=S.lowerWidth,E=S.height,A=S.x,D=S.y;return ke.createElement(Wl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,easing:v},ke.createElement("path",_g({},ys(a,!0),{className:w,d:z6(A,D,O,_,E),ref:r})))}):ke.createElement("g",null,ke.createElement("path",_g({},ys(a,!0),{className:w,d:z6(d,u,h,f,x)})))},vSe=["option","shapeType","propTransformer","activeClassName","isActive"];function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xf(e)}function ySe(e,s){if(e==null)return{};var a=NSe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function NSe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function B6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function kg(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?B6(Object(a),!0).forEach(function(r){jSe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function jSe(e,s,a){return s=wSe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function wSe(e){var s=SSe(e,"string");return Xf(s)=="symbol"?s:s+""}function SSe(e,s){if(Xf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function ASe(e,s){return kg(kg({},s),e)}function ESe(e,s){return e==="symbols"}function $6(e){var s=e.shapeType,a=e.elementProps;switch(s){case"rectangle":return ke.createElement(cC,a);case"trapezoid":return ke.createElement(bSe,a);case"sector":return ke.createElement(oz,a);case"symbols":if(ESe(s))return ke.createElement(TE,a);break;default:return null}}function CSe(e){return C.isValidElement(e)?e.props:e}function TSe(e){var s=e.option,a=e.shapeType,r=e.propTransformer,n=r===void 0?ASe:r,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,o=e.isActive,d=ySe(e,vSe),u;if(C.isValidElement(s))u=C.cloneElement(s,kg(kg({},d),CSe(s)));else if(cs(s))u=s(d);else if(nSe(s)&&!oSe(s)){var h=n(s,d);u=ke.createElement($6,{shapeType:a,elementProps:h})}else{var f=d;u=ke.createElement($6,{shapeType:a,elementProps:f})}return o?ke.createElement(_a,{className:l},u):u}function Cb(e,s){return s!=null&&"trapezoids"in e.props}function Tb(e,s){return s!=null&&"sectors"in e.props}function Zf(e,s){return s!=null&&"points"in e.props}function _Se(e,s){var a,r,n=e.x===(s==null||(a=s.labelViewBox)===null||a===void 0?void 0:a.x)||e.x===s.x,i=e.y===(s==null||(r=s.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===s.y;return n&&i}function kSe(e,s){var a=e.endAngle===s.endAngle,r=e.startAngle===s.startAngle;return a&&r}function OSe(e,s){var a=e.x===s.x,r=e.y===s.y,n=e.z===s.z;return a&&r&&n}function ISe(e,s){var a;return Cb(e,s)?a=_Se:Tb(e,s)?a=kSe:Zf(e,s)&&(a=OSe),a}function RSe(e,s){var a;return Cb(e,s)?a="trapezoids":Tb(e,s)?a="sectors":Zf(e,s)&&(a="points"),a}function PSe(e,s){if(Cb(e,s)){var a;return(a=s.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(Tb(e,s)){var r;return(r=s.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Zf(e,s)?s.payload:{}}function DSe(e){var s=e.activeTooltipItem,a=e.graphicalItem,r=e.itemData,n=RSe(a,s),i=PSe(a,s),l=r.filter(function(d,u){var h=Mf(i,d),f=a.props[n].filter(function(v){var b=ISe(a,s);return b(v,s)}),x=a.props[n].indexOf(f[f.length-1]),p=u===x;return h&&p}),o=r.indexOf(l[l.length-1]);return o}var rS,q6;function MSe(){if(q6)return rS;q6=1;var e=Math.ceil,s=Math.max;function a(r,n,i,l){for(var o=-1,d=s(e((n-r)/(i||1)),0),u=Array(d);d--;)u[l?d:++o]=r,r+=i;return u}return rS=a,rS}var nS,H6;function pz(){if(H6)return nS;H6=1;var e=Y7(),s=1/0,a=17976931348623157e292;function r(n){if(!n)return n===0?n:0;if(n=e(n),n===s||n===-s){var i=n<0?-1:1;return i*a}return n===n?n:0}return nS=r,nS}var iS,V6;function LSe(){if(V6)return iS;V6=1;var e=MSe(),s=pb(),a=pz();function r(n){return function(i,l,o){return o&&typeof o!="number"&&s(i,l,o)&&(l=o=void 0),i=a(i),l===void 0?(l=i,i=0):l=a(l),o=o===void 0?i<l?1:-1:a(o),e(i,l,o,n)}}return iS=r,iS}var lS,G6;function FSe(){if(G6)return lS;G6=1;var e=LSe(),s=e();return lS=s,lS}var USe=FSe();const Og=ra(USe);function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},eh(e)}function W6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Q6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?W6(Object(a),!0).forEach(function(r){gz(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function gz(e,s,a){return s=zSe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function zSe(e){var s=BSe(e,"string");return eh(s)=="symbol"?s:s+""}function BSe(e,s){if(eh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var $Se=["Webkit","Moz","O","ms"],qSe=function(s,a){var r=s.replace(/(\w)/,function(i){return i.toUpperCase()}),n=$Se.reduce(function(i,l){return Q6(Q6({},i),{},gz({},l+r,a))},{});return n[s]=a,n};function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xu(e)}function Ig(){return Ig=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ig.apply(this,arguments)}function K6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function oS(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?K6(Object(a),!0).forEach(function(r){kn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function HSe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function J6(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vz(r.key),r)}}function VSe(e,s,a){return s&&J6(e.prototype,s),a&&J6(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function GSe(e,s,a){return s=Rg(s),WSe(e,bz()?Reflect.construct(s,a||[],Rg(e).constructor):s.apply(e,a))}function WSe(e,s){if(s&&(Xu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QSe(e)}function QSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bz=function(){return!!e})()}function Rg(e){return Rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rg(e)}function KSe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&Y2(e,s)}function Y2(e,s){return Y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Y2(e,s)}function kn(e,s,a){return s=vz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function vz(e){var s=JSe(e,"string");return Xu(s)=="symbol"?s:s+""}function JSe(e,s){if(Xu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var YSe=function(s){var a=s.data,r=s.startIndex,n=s.endIndex,i=s.x,l=s.width,o=s.travellerWidth;if(!a||!a.length)return{};var d=a.length,u=Zm().domain(Og(0,d)).range([i,i+l-o]),h=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(n),scale:u,scaleValues:h}},Y6=function(s){return s.changedTouches&&!!s.changedTouches.length},Zu=(function(e){function s(a){var r;return HSe(this,s),r=GSe(this,s,[a]),kn(r,"handleDrag",function(n){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(n):r.state.isSlideMoving&&r.handleSlideDrag(n)}),kn(r,"handleTouchMove",function(n){n.changedTouches!=null&&n.changedTouches.length>0&&r.handleDrag(n.changedTouches[0])}),kn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var n=r.props,i=n.endIndex,l=n.onDragEnd,o=n.startIndex;l==null||l({endIndex:i,startIndex:o})}),r.detachDragEndListener()}),kn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),kn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),kn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),kn(r,"handleSlideDragStart",function(n){var i=Y6(n)?n.changedTouches[0]:n;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return KSe(s,e),VSe(s,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var n=r.startX,i=r.endX,l=this.state.scaleValues,o=this.props,d=o.gap,u=o.data,h=u.length-1,f=Math.min(n,i),x=Math.max(n,i),p=s.getIndexInRange(l,f),v=s.getIndexInRange(l,x);return{startIndex:p-p%d,endIndex:v===h?h:v-v%d}}},{key:"getTextOfTick",value:function(r){var n=this.props,i=n.data,l=n.tickFormatter,o=n.dataKey,d=Bn(i[r],o,r);return cs(l)?l(d,r):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var n=this.state,i=n.slideMoveStartX,l=n.startX,o=n.endX,d=this.props,u=d.x,h=d.width,f=d.travellerWidth,x=d.startIndex,p=d.endIndex,v=d.onChange,b=r.pageX-i;b>0?b=Math.min(b,u+h-f-o,u+h-f-l):b<0&&(b=Math.max(b,u-l,u-o));var y=this.getIndex({startX:l+b,endX:o+b});(y.startIndex!==x||y.endIndex!==p)&&v&&v(y),this.setState({startX:l+b,endX:o+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,n){var i=Y6(n)?n.changedTouches[0]:n;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var n=this.state,i=n.brushMoveStartX,l=n.movingTravellerId,o=n.endX,d=n.startX,u=this.state[l],h=this.props,f=h.x,x=h.width,p=h.travellerWidth,v=h.onChange,b=h.gap,y=h.data,j={startX:this.state.startX,endX:this.state.endX},w=r.pageX-i;w>0?w=Math.min(w,f+x-p-u):w<0&&(w=Math.max(w,f-u)),j[l]=u+w;var S=this.getIndex(j),O=S.startIndex,_=S.endIndex,E=function(){var D=y.length-1;return l==="startX"&&(o>d?O%b===0:_%b===0)||o<d&&_===D||l==="endX"&&(o>d?_%b===0:O%b===0)||o>d&&_===D};this.setState(kn(kn({},l,u+w),"brushMoveStartX",r.pageX),function(){v&&E()&&v(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,n){var i=this,l=this.state,o=l.scaleValues,d=l.startX,u=l.endX,h=this.state[n],f=o.indexOf(h);if(f!==-1){var x=f+r;if(!(x===-1||x>=o.length)){var p=o[x];n==="startX"&&p>=u||n==="endX"&&p<=d||this.setState(kn({},n,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,o=r.height,d=r.fill,u=r.stroke;return ke.createElement("rect",{stroke:u,fill:d,x:n,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,o=r.height,d=r.data,u=r.children,h=r.padding,f=C.Children.only(u);return f?ke.cloneElement(f,{x:n,y:i,width:l,height:o,margin:h,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(r,n){var i,l,o=this,d=this.props,u=d.y,h=d.travellerWidth,f=d.height,x=d.traveller,p=d.ariaLabel,v=d.data,b=d.startIndex,y=d.endIndex,j=Math.max(r,this.props.x),w=oS(oS({},ys(this.props,!1)),{},{x:j,y:u,width:h,height:f}),S=p||"Min value: ".concat((i=v[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=v[y])===null||l===void 0?void 0:l.name);return ke.createElement(_a,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),o.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},s.renderTraveller(x,w))}},{key:"renderSlide",value:function(r,n){var i=this.props,l=i.y,o=i.height,d=i.stroke,u=i.travellerWidth,h=Math.min(r,n)+u,f=Math.max(Math.abs(n-r)-u,0);return ke.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:h,y:l,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,n=r.startIndex,i=r.endIndex,l=r.y,o=r.height,d=r.travellerWidth,u=r.stroke,h=this.state,f=h.startX,x=h.endX,p=5,v={pointerEvents:"none",fill:u};return ke.createElement(_a,{className:"recharts-brush-texts"},ke.createElement(og,Ig({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,x)-p,y:l+o/2},v),this.getTextOfTick(n)),ke.createElement(og,Ig({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,x)+d+p,y:l+o/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,n=r.data,i=r.className,l=r.children,o=r.x,d=r.y,u=r.width,h=r.height,f=r.alwaysShowText,x=this.state,p=x.startX,v=x.endX,b=x.isTextActive,y=x.isSlideMoving,j=x.isTravellerMoving,w=x.isTravellerFocused;if(!n||!n.length||!dt(o)||!dt(d)||!dt(u)||!dt(h)||u<=0||h<=0)return null;var S=Is("recharts-brush",i),O=ke.Children.count(l)===1,_=qSe("userSelect","none");return ke.createElement(_a,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(b||y||j||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var n=r.x,i=r.y,l=r.width,o=r.height,d=r.stroke,u=Math.floor(i+o/2)-1;return ke.createElement(ke.Fragment,null,ke.createElement("rect",{x:n,y:i,width:l,height:o,fill:d,stroke:"none"}),ke.createElement("line",{x1:n+1,y1:u,x2:n+l-1,y2:u,fill:"none",stroke:"#fff"}),ke.createElement("line",{x1:n+1,y1:u+2,x2:n+l-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,n){var i;return ke.isValidElement(r)?i=ke.cloneElement(r,n):cs(r)?i=r(n):i=s.renderDefaultTraveller(n),i}},{key:"getDerivedStateFromProps",value:function(r,n){var i=r.data,l=r.width,o=r.x,d=r.travellerWidth,u=r.updateId,h=r.startIndex,f=r.endIndex;if(i!==n.prevData||u!==n.prevUpdateId)return oS({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:o,prevWidth:l},i&&i.length?YSe({data:i,width:l,x:o,travellerWidth:d,startIndex:h,endIndex:f}):{scale:null,scaleValues:null});if(n.scale&&(l!==n.prevWidth||o!==n.prevX||d!==n.prevTravellerWidth)){n.scale.range([o,o+l-d]);var x=n.scale.domain().map(function(p){return n.scale(p)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:o,prevWidth:l,startX:n.scale(r.startIndex),endX:n.scale(r.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(r,n){for(var i=r.length,l=0,o=i-1;o-l>1;){var d=Math.floor((l+o)/2);r[d]>n?o=d:l=d}return n>=r[o]?o:l}}])})(C.PureComponent);kn(Zu,"displayName","Brush");kn(Zu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var cS,X6;function XSe(){if(X6)return cS;X6=1;var e=DE();function s(a,r){var n;return e(a,function(i,l,o){return n=r(i,l,o),!n}),!!n}return cS=s,cS}var dS,Z6;function ZSe(){if(Z6)return dS;Z6=1;var e=T7(),s=nc(),a=XSe(),r=Nn(),n=pb();function i(l,o,d){var u=r(l)?e:a;return d&&n(l,o,d)&&(o=void 0),u(l,s(o,3))}return dS=i,dS}var e2e=ZSe();const t2e=ra(e2e);var tl=function(s,a){var r=s.alwaysShow,n=s.ifOverflow;return r&&(n="extendDomain"),n===a},uS,eM;function s2e(){if(eM)return uS;eM=1;var e=G7();function s(a,r,n){r=="__proto__"&&e?e(a,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):a[r]=n}return uS=s,uS}var mS,tM;function a2e(){if(tM)return mS;tM=1;var e=s2e(),s=H7(),a=nc();function r(n,i){var l={};return i=a(i,3),s(n,function(o,d,u){e(l,d,i(o,d,u))}),l}return mS=r,mS}var r2e=a2e();const n2e=ra(r2e);var fS,sM;function i2e(){if(sM)return fS;sM=1;function e(s,a){for(var r=-1,n=s==null?0:s.length;++r<n;)if(!a(s[r],r,s))return!1;return!0}return fS=e,fS}var hS,aM;function l2e(){if(aM)return hS;aM=1;var e=DE();function s(a,r){var n=!0;return e(a,function(i,l,o){return n=!!r(i,l,o),n}),n}return hS=s,hS}var xS,rM;function o2e(){if(rM)return xS;rM=1;var e=i2e(),s=l2e(),a=nc(),r=Nn(),n=pb();function i(l,o,d){var u=r(l)?e:s;return d&&n(l,o,d)&&(o=void 0),u(l,a(o,3))}return xS=i,xS}var c2e=o2e();const yz=ra(c2e);var d2e=["x","y"];function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},th(e)}function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},X2.apply(this,arguments)}function nM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Om(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?nM(Object(a),!0).forEach(function(r){u2e(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function u2e(e,s,a){return s=m2e(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function m2e(e){var s=f2e(e,"string");return th(s)=="symbol"?s:s+""}function f2e(e,s){if(th(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function h2e(e,s){if(e==null)return{};var a=x2e(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function x2e(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function p2e(e,s){var a=e.x,r=e.y,n=h2e(e,d2e),i="".concat(a),l=parseInt(i,10),o="".concat(r),d=parseInt(o,10),u="".concat(s.height||n.height),h=parseInt(u,10),f="".concat(s.width||n.width),x=parseInt(f,10);return Om(Om(Om(Om(Om({},s),n),l?{x:l}:{}),d?{y:d}:{}),{},{height:h,width:x,name:s.name,radius:s.radius})}function iM(e){return ke.createElement(TSe,X2({shapeType:"rectangle",propTransformer:p2e,activeClassName:"recharts-active-bar"},e))}var g2e=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,n){if(typeof s=="number")return s;var i=dt(r)||Efe(r);return i?s(r,n):(i||ud(),a)}},b2e=["value","background"],Nz;function e0(e){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e0(e)}function v2e(e,s){if(e==null)return{};var a=y2e(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y2e(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function Pg(){return Pg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Pg.apply(this,arguments)}function lM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function er(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?lM(Object(a),!0).forEach(function(r){Mo(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function N2e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function oM(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wz(r.key),r)}}function j2e(e,s,a){return s&&oM(e.prototype,s),a&&oM(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function w2e(e,s,a){return s=Dg(s),S2e(e,jz()?Reflect.construct(s,a||[],Dg(e).constructor):s.apply(e,a))}function S2e(e,s){if(s&&(e0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A2e(e)}function A2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jz=function(){return!!e})()}function Dg(e){return Dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Dg(e)}function E2e(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&Z2(e,s)}function Z2(e,s){return Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Z2(e,s)}function Mo(e,s,a){return s=wz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function wz(e){var s=C2e(e,"string");return e0(s)=="symbol"?s:s+""}function C2e(e,s){if(e0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(e0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wd=(function(e){function s(){var a;N2e(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=w2e(this,s,[].concat(n)),Mo(a,"state",{isAnimationFinished:!1}),Mo(a,"id",bh("recharts-bar-")),Mo(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),l&&l()}),Mo(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),l&&l()}),a}return E2e(s,e),j2e(s,[{key:"renderRectanglesStatically",value:function(r){var n=this,i=this.props,l=i.shape,o=i.dataKey,d=i.activeIndex,u=i.activeBar,h=ys(this.props,!1);return r&&r.map(function(f,x){var p=x===d,v=p?u:l,b=er(er(er({},h),f),{},{isActive:p,option:v,index:x,dataKey:o,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return ke.createElement(_a,Pg({className:"recharts-bar-rectangle"},Yp(n.props,f,x),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(x)}),ke.createElement(iM,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,n=this.props,i=n.data,l=n.layout,o=n.isAnimationActive,d=n.animationBegin,u=n.animationDuration,h=n.animationEasing,f=n.animationId,x=this.state.prevData;return ke.createElement(Wl,{begin:d,duration:u,isActive:o,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,b=i.map(function(y,j){var w=x&&x[j];if(w){var S=oi(w.x,y.x),O=oi(w.y,y.y),_=oi(w.width,y.width),E=oi(w.height,y.height);return er(er({},y),{},{x:S(v),y:O(v),width:_(v),height:E(v)})}if(l==="horizontal"){var A=oi(0,y.height),D=A(v);return er(er({},y),{},{y:y.y+y.height-D,height:D})}var L=oi(0,y.width),B=L(v);return er(er({},y),{},{width:B})});return ke.createElement(_a,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,n=r.data,i=r.isAnimationActive,l=this.state.prevData;return i&&n&&n.length&&(!l||!Mf(l,n))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(n)}},{key:"renderBackground",value:function(){var r=this,n=this.props,i=n.data,l=n.dataKey,o=n.activeIndex,d=ys(this.props.background,!1);return i.map(function(u,h){u.value;var f=u.background,x=v2e(u,b2e);if(!f)return null;var p=er(er(er(er(er({},x),{},{fill:"#eee"},f),d),Yp(r.props,u,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:l,index:h,className:"recharts-bar-background-rectangle"});return ke.createElement(iM,Pg({key:"background-bar-".concat(h),option:r.props.background,isActive:h===o},p))})}},{key:"renderErrorBar",value:function(r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,d=i.yAxis,u=i.layout,h=i.children,f=Di(h,Eb);if(!f)return null;var x=u==="vertical"?l[0].height/2:l[0].width/2,p=function(y,j){var w=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:w,errorVal:Bn(y,j)}},v={clipPath:r?"url(#clipPath-".concat(n,")"):null};return ke.createElement(_a,v,f.map(function(b){return ke.cloneElement(b,{key:"error-bar-".concat(n,"-").concat(b.props.dataKey),data:l,xAxis:o,yAxis:d,layout:u,offset:x,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,n=r.hide,i=r.data,l=r.className,o=r.xAxis,d=r.yAxis,u=r.left,h=r.top,f=r.width,x=r.height,p=r.isAnimationActive,v=r.background,b=r.id;if(n||!i||!i.length)return null;var y=this.state.isAnimationFinished,j=Is("recharts-bar",l),w=o&&o.allowDataOverflow,S=d&&d.allowDataOverflow,O=w||S,_=Ss(b)?this.id:b;return ke.createElement(_a,{className:j},w||S?ke.createElement("defs",null,ke.createElement("clipPath",{id:"clipPath-".concat(_)},ke.createElement("rect",{x:w?u:u-f/2,y:S?h:h-x/2,width:w?f:f*2,height:S?x:x*2}))):null,ke.createElement(_a,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(_,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,_),(!p||y)&&$o.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:n.curData}:r.data!==n.curData?{curData:r.data}:null}}])})(C.PureComponent);Nz=wd;Mo(wd,"displayName","Bar");Mo(wd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!N0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Mo(wd,"getComposedData",function(e){var s=e.props,a=e.item,r=e.barPosition,n=e.bandSize,i=e.xAxis,l=e.yAxis,o=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,h=e.dataStartIndex,f=e.displayedData,x=e.offset,p=V1e(r,a);if(!p)return null;var v=s.layout,b=a.type.defaultProps,y=b!==void 0?er(er({},b),a.props):a.props,j=y.dataKey,w=y.children,S=y.minPointSize,O=v==="horizontal"?l:i,_=u?O.scale.domain():null,E=Z1e({numericAxis:O}),A=Di(w,Z7),D=f.map(function(L,B){var I,T,z,k,F,P;u?I=G1e(u[h+B],_):(I=Bn(L,j),Array.isArray(I)||(I=[E,I]));var G=g2e(S,Nz.defaultProps.minPointSize)(I[1],B);if(v==="horizontal"){var Y,W=[l.scale(I[0]),l.scale(I[1])],ee=W[0],H=W[1];T=VD({axis:i,ticks:o,bandSize:n,offset:p.offset,entry:L,index:B}),z=(Y=H??ee)!==null&&Y!==void 0?Y:void 0,k=p.size;var M=ee-H;if(F=Number.isNaN(M)?0:M,P={x:T,y:l.y,width:k,height:l.height},Math.abs(G)>0&&Math.abs(F)<Math.abs(G)){var X=Ii(F||G)*(Math.abs(G)-Math.abs(F));z-=X,F+=X}}else{var K=[i.scale(I[0]),i.scale(I[1])],Q=K[0],se=K[1];if(T=Q,z=VD({axis:l,ticks:d,bandSize:n,offset:p.offset,entry:L,index:B}),k=se-Q,F=p.size,P={x:i.x,y:z,width:i.width,height:F},Math.abs(G)>0&&Math.abs(k)<Math.abs(G)){var V=Ii(k||G)*(Math.abs(G)-Math.abs(k));k+=V}}return er(er(er({},L),{},{x:T,y:z,width:k,height:F,value:u?I:I[1],payload:L,background:P},A&&A[B]&&A[B].props),{},{tooltipPayload:[nz(a,L)],tooltipPosition:{x:T+k/2,y:z+F/2}})});return er({data:D,layout:v},x)});function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sh(e)}function T2e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function cM(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sz(r.key),r)}}function _2e(e,s,a){return s&&cM(e.prototype,s),a&&cM(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function dM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ti(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?dM(Object(a),!0).forEach(function(r){_b(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function _b(e,s,a){return s=Sz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Sz(e){var s=k2e(e,"string");return sh(s)=="symbol"?s:s+""}function k2e(e,s){if(sh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var Az=function(s,a,r,n,i){var l=s.width,o=s.height,d=s.layout,u=s.children,h=Object.keys(a),f={left:r.left,leftMirror:r.left,right:l-r.right,rightMirror:l-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},x=!!On(u,wd);return h.reduce(function(p,v){var b=a[v],y=b.orientation,j=b.domain,w=b.padding,S=w===void 0?{}:w,O=b.mirror,_=b.reversed,E="".concat(y).concat(O?"Mirror":""),A,D,L,B,I;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var T=j[1]-j[0],z=1/0,k=b.categoricalDomain.sort(_fe);if(k.forEach(function(K,Q){Q>0&&(z=Math.min((K||0)-(k[Q-1]||0),z))}),Number.isFinite(z)){var F=z/T,P=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(A=F*P/2),b.padding==="no-gap"){var G=cd(s.barCategoryGap,F*P),Y=F*P/2;A=Y-G-(Y-G)/P*G}}}n==="xAxis"?D=[r.left+(S.left||0)+(A||0),r.left+r.width-(S.right||0)-(A||0)]:n==="yAxis"?D=d==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(A||0),r.top+r.height-(S.bottom||0)-(A||0)]:D=b.range,_&&(D=[D[1],D[0]]);var W=q1e(b,i,x),ee=W.scale,H=W.realScaleType;ee.domain(j).range(D),H1e(ee);var M=X1e(ee,Ti(Ti({},b),{},{realScaleType:H}));n==="xAxis"?(I=y==="top"&&!O||y==="bottom"&&O,L=r.left,B=f[E]-I*b.height):n==="yAxis"&&(I=y==="left"&&!O||y==="right"&&O,L=f[E]-I*b.width,B=r.top);var X=Ti(Ti(Ti({},b),M),{},{realScaleType:H,x:L,y:B,scale:ee,width:n==="xAxis"?r.width:b.width,height:n==="yAxis"?r.height:b.height});return X.bandSize=jg(X,M),!b.hide&&n==="xAxis"?f[E]+=(I?-1:1)*X.height:b.hide||(f[E]+=(I?-1:1)*X.width),Ti(Ti({},p),{},_b({},v,X))},{})},Ez=function(s,a){var r=s.x,n=s.y,i=a.x,l=a.y;return{x:Math.min(r,i),y:Math.min(n,l),width:Math.abs(i-r),height:Math.abs(l-n)}},O2e=function(s){var a=s.x1,r=s.y1,n=s.x2,i=s.y2;return Ez({x:a,y:r},{x:n,y:i})},Cz=(function(){function e(s){T2e(this,e),this.scale=s}return _2e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.bandAware,i=r.position;if(a!==void 0){if(i)switch(i){case"start":return this.scale(a);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(a)+o}default:return this.scale(a)}if(n){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+d}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?a>=n&&a<=i:a>=i&&a<=n}}],[{key:"create",value:function(a){return new e(a)}}])})();_b(Cz,"EPS",1e-4);var uC=function(s){var a=Object.keys(s).reduce(function(r,n){return Ti(Ti({},r),{},_b({},n,Cz.create(s[n])))},{});return Ti(Ti({},a),{},{apply:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return n2e(n,function(d,u){return a[u].apply(d,{bandAware:l,position:o})})},isInRange:function(n){return yz(n,function(i,l){return a[l].isInRange(i)})}})};function I2e(e){return(e%180+180)%180}var R2e=function(s){var a=s.width,r=s.height,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=I2e(n),l=i*Math.PI/180,o=Math.atan(r/a),d=l>o&&l<Math.PI-o?r/Math.sin(l):a/Math.cos(l);return Math.abs(d)},pS,uM;function P2e(){if(uM)return pS;uM=1;var e=nc(),s=vh(),a=hb();function r(n){return function(i,l,o){var d=Object(i);if(!s(i)){var u=e(l,3);i=a(i),l=function(f){return u(d[f],f,d)}}var h=n(i,l,o);return h>-1?d[u?i[h]:h]:void 0}}return pS=r,pS}var gS,mM;function D2e(){if(mM)return gS;mM=1;var e=pz();function s(a){var r=e(a),n=r%1;return r===r?n?r-n:r:0}return gS=s,gS}var bS,fM;function M2e(){if(fM)return bS;fM=1;var e=U7(),s=nc(),a=D2e(),r=Math.max;function n(i,l,o){var d=i==null?0:i.length;if(!d)return-1;var u=o==null?0:a(o);return u<0&&(u=r(d+u,0)),e(i,s(l,3),u)}return bS=n,bS}var vS,hM;function L2e(){if(hM)return vS;hM=1;var e=P2e(),s=M2e(),a=e(s);return vS=a,vS}var F2e=L2e();const U2e=ra(F2e);var z2e=t7();const B2e=ra(z2e);var $2e=B2e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),mC=C.createContext(void 0),fC=C.createContext(void 0),Tz=C.createContext(void 0),_z=C.createContext({}),kz=C.createContext(void 0),Oz=C.createContext(0),Iz=C.createContext(0),xM=function(s){var a=s.state,r=a.xAxisMap,n=a.yAxisMap,i=a.offset,l=s.clipPathId,o=s.children,d=s.width,u=s.height,h=$2e(i);return ke.createElement(mC.Provider,{value:r},ke.createElement(fC.Provider,{value:n},ke.createElement(_z.Provider,{value:i},ke.createElement(Tz.Provider,{value:h},ke.createElement(kz.Provider,{value:l},ke.createElement(Oz.Provider,{value:u},ke.createElement(Iz.Provider,{value:d},o)))))))},q2e=function(){return C.useContext(kz)},Rz=function(s){var a=C.useContext(mC);a==null&&ud();var r=a[s];return r==null&&ud(),r},H2e=function(){var s=C.useContext(mC);return ko(s)},V2e=function(){var s=C.useContext(fC),a=U2e(s,function(r){return yz(r.domain,Number.isFinite)});return a||ko(s)},Pz=function(s){var a=C.useContext(fC);a==null&&ud();var r=a[s];return r==null&&ud(),r},G2e=function(){var s=C.useContext(Tz);return s},W2e=function(){return C.useContext(_z)},hC=function(){return C.useContext(Iz)},xC=function(){return C.useContext(Oz)};function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t0(e)}function Q2e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function K2e(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mz(r.key),r)}}function J2e(e,s,a){return s&&K2e(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y2e(e,s,a){return s=Mg(s),X2e(e,Dz()?Reflect.construct(s,a||[],Mg(e).constructor):s.apply(e,a))}function X2e(e,s){if(s&&(t0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z2e(e)}function Z2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dz=function(){return!!e})()}function Mg(e){return Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Mg(e)}function eAe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&eA(e,s)}function eA(e,s){return eA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},eA(e,s)}function pM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function gM(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?pM(Object(a),!0).forEach(function(r){pC(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function pC(e,s,a){return s=Mz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Mz(e){var s=tAe(e,"string");return t0(s)=="symbol"?s:s+""}function tAe(e,s){if(t0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(t0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function sAe(e,s){return iAe(e)||nAe(e,s)||rAe(e,s)||aAe()}function aAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rAe(e,s){if(e){if(typeof e=="string")return bM(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return bM(e,s)}}function bM(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function nAe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function iAe(e){if(Array.isArray(e))return e}function tA(){return tA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},tA.apply(this,arguments)}var lAe=function(s,a){var r;return ke.isValidElement(s)?r=ke.cloneElement(s,a):cs(s)?r=s(a):r=ke.createElement("line",tA({},a,{className:"recharts-reference-line-line"})),r},oAe=function(s,a,r,n,i,l,o,d,u){var h=i.x,f=i.y,x=i.width,p=i.height;if(r){var v=u.y,b=s.y.apply(v,{position:l});if(tl(u,"discard")&&!s.y.isInRange(b))return null;var y=[{x:h+x,y:b},{x:h,y:b}];return d==="left"?y.reverse():y}if(a){var j=u.x,w=s.x.apply(j,{position:l});if(tl(u,"discard")&&!s.x.isInRange(w))return null;var S=[{x:w,y:f+p},{x:w,y:f}];return o==="top"?S.reverse():S}if(n){var O=u.segment,_=O.map(function(E){return s.apply(E,{position:l})});return tl(u,"discard")&&t2e(_,function(E){return!s.isInRange(E)})?null:_}return null};function cAe(e){var s=e.x,a=e.y,r=e.segment,n=e.xAxisId,i=e.yAxisId,l=e.shape,o=e.className,d=e.alwaysShow,u=q2e(),h=Rz(n),f=Pz(i),x=G2e();if(!u||!x)return null;zl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=uC({x:h.scale,y:f.scale}),v=ur(s),b=ur(a),y=r&&r.length===2,j=oAe(p,v,b,y,x,e.position,h.orientation,f.orientation,e);if(!j)return null;var w=sAe(j,2),S=w[0],O=S.x,_=S.y,E=w[1],A=E.x,D=E.y,L=tl(e,"hidden")?"url(#".concat(u,")"):void 0,B=gM(gM({clipPath:L},ys(e,!0)),{},{x1:O,y1:_,x2:A,y2:D});return ke.createElement(_a,{className:Is("recharts-reference-line",o)},lAe(l,B),Hr.renderCallByParent(e,O2e({x1:O,y1:_,x2:A,y2:D})))}var gC=(function(e){function s(){return Q2e(this,s),Y2e(this,s,arguments)}return eAe(s,e),J2e(s,[{key:"render",value:function(){return ke.createElement(cAe,this.props)}}])})(ke.Component);pC(gC,"displayName","ReferenceLine");pC(gC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function sA(){return sA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},sA.apply(this,arguments)}function s0(e){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},s0(e)}function vM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function yM(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?vM(Object(a),!0).forEach(function(r){kb(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function dAe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function uAe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fz(r.key),r)}}function mAe(e,s,a){return s&&uAe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function fAe(e,s,a){return s=Lg(s),hAe(e,Lz()?Reflect.construct(s,a||[],Lg(e).constructor):s.apply(e,a))}function hAe(e,s){if(s&&(s0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xAe(e)}function xAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lz=function(){return!!e})()}function Lg(e){return Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Lg(e)}function pAe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&aA(e,s)}function aA(e,s){return aA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},aA(e,s)}function kb(e,s,a){return s=Fz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Fz(e){var s=gAe(e,"string");return s0(s)=="symbol"?s:s+""}function gAe(e,s){if(s0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(s0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bAe=function(s){var a=s.x,r=s.y,n=s.xAxis,i=s.yAxis,l=uC({x:n.scale,y:i.scale}),o=l.apply({x:a,y:r},{bandAware:!0});return tl(s,"discard")&&!l.isInRange(o)?null:o},Ob=(function(e){function s(){return dAe(this,s),fAe(this,s,arguments)}return pAe(s,e),mAe(s,[{key:"render",value:function(){var r=this.props,n=r.x,i=r.y,l=r.r,o=r.alwaysShow,d=r.clipPathId,u=ur(n),h=ur(i);if(zl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var f=bAe(this.props);if(!f)return null;var x=f.x,p=f.y,v=this.props,b=v.shape,y=v.className,j=tl(this.props,"hidden")?"url(#".concat(d,")"):void 0,w=yM(yM({clipPath:j},ys(this.props,!0)),{},{cx:x,cy:p});return ke.createElement(_a,{className:Is("recharts-reference-dot",y)},s.renderDot(b,w),Hr.renderCallByParent(this.props,{x:x-l,y:p-l,width:2*l,height:2*l}))}}])})(ke.Component);kb(Ob,"displayName","ReferenceDot");kb(Ob,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});kb(Ob,"renderDot",function(e,s){var a;return ke.isValidElement(e)?a=ke.cloneElement(e,s):cs(e)?a=e(s):a=ke.createElement(dC,sA({},s,{cx:s.cx,cy:s.cy,className:"recharts-reference-dot-dot"})),a});function rA(){return rA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},rA.apply(this,arguments)}function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a0(e)}function NM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function jM(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?NM(Object(a),!0).forEach(function(r){Ib(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function vAe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function yAe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zz(r.key),r)}}function NAe(e,s,a){return s&&yAe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function jAe(e,s,a){return s=Fg(s),wAe(e,Uz()?Reflect.construct(s,a||[],Fg(e).constructor):s.apply(e,a))}function wAe(e,s){if(s&&(a0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SAe(e)}function SAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uz=function(){return!!e})()}function Fg(e){return Fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Fg(e)}function AAe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&nA(e,s)}function nA(e,s){return nA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},nA(e,s)}function Ib(e,s,a){return s=zz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function zz(e){var s=EAe(e,"string");return a0(s)=="symbol"?s:s+""}function EAe(e,s){if(a0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(a0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var CAe=function(s,a,r,n,i){var l=i.x1,o=i.x2,d=i.y1,u=i.y2,h=i.xAxis,f=i.yAxis;if(!h||!f)return null;var x=uC({x:h.scale,y:f.scale}),p={x:s?x.x.apply(l,{position:"start"}):x.x.rangeMin,y:r?x.y.apply(d,{position:"start"}):x.y.rangeMin},v={x:a?x.x.apply(o,{position:"end"}):x.x.rangeMax,y:n?x.y.apply(u,{position:"end"}):x.y.rangeMax};return tl(i,"discard")&&(!x.isInRange(p)||!x.isInRange(v))?null:Ez(p,v)},Rb=(function(e){function s(){return vAe(this,s),jAe(this,s,arguments)}return AAe(s,e),NAe(s,[{key:"render",value:function(){var r=this.props,n=r.x1,i=r.x2,l=r.y1,o=r.y2,d=r.className,u=r.alwaysShow,h=r.clipPathId;zl(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ur(n),x=ur(i),p=ur(l),v=ur(o),b=this.props.shape;if(!f&&!x&&!p&&!v&&!b)return null;var y=CAe(f,x,p,v,this.props);if(!y&&!b)return null;var j=tl(this.props,"hidden")?"url(#".concat(h,")"):void 0;return ke.createElement(_a,{className:Is("recharts-reference-area",d)},s.renderRect(b,jM(jM({clipPath:j},ys(this.props,!0)),y)),Hr.renderCallByParent(this.props,y))}}])})(ke.Component);Ib(Rb,"displayName","ReferenceArea");Ib(Rb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ib(Rb,"renderRect",function(e,s){var a;return ke.isValidElement(e)?a=ke.cloneElement(e,s):cs(e)?a=e(s):a=ke.createElement(cC,rA({},s,{className:"recharts-reference-area-rect"})),a});function Bz(e,s,a){if(s<1)return[];if(s===1&&a===void 0)return e;for(var r=[],n=0;n<e.length;n+=s)r.push(e[n]);return r}function TAe(e,s,a){var r={width:e.width+s.width,height:e.height+s.height};return R2e(r,a)}function _Ae(e,s,a){var r=a==="width",n=e.x,i=e.y,l=e.width,o=e.height;return s===1?{start:r?n:i,end:r?n+l:i+o}:{start:r?n+l:i+o,end:r?n:i}}function Ug(e,s,a,r,n){if(e*s<e*r||e*s>e*n)return!1;var i=a();return e*(s-e*i/2-r)>=0&&e*(s+e*i/2-n)<=0}function kAe(e,s){return Bz(e,s+1)}function OAe(e,s,a,r,n){for(var i=(r||[]).slice(),l=s.start,o=s.end,d=0,u=1,h=l,f=function(){var v=r==null?void 0:r[d];if(v===void 0)return{v:Bz(r,u)};var b=d,y,j=function(){return y===void 0&&(y=a(v,b)),y},w=v.coordinate,S=d===0||Ug(e,w,j,h,o);S||(d=0,h=l,u+=1),S&&(h=w+e*(j()/2+n),d+=u)},x;u<=i.length;)if(x=f(),x)return x.v;return[]}function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ah(e)}function wM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function zr(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?wM(Object(a),!0).forEach(function(r){IAe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function IAe(e,s,a){return s=RAe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function RAe(e){var s=PAe(e,"string");return ah(s)=="symbol"?s:s+""}function PAe(e,s){if(ah(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function DAe(e,s,a,r,n){for(var i=(r||[]).slice(),l=i.length,o=s.start,d=s.end,u=function(x){var p=i[x],v,b=function(){return v===void 0&&(v=a(p,x)),v};if(x===l-1){var y=e*(p.coordinate+e*b()/2-d);i[x]=p=zr(zr({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else i[x]=p=zr(zr({},p),{},{tickCoord:p.coordinate});var j=Ug(e,p.tickCoord,b,o,d);j&&(d=p.tickCoord-e*(b()/2+n),i[x]=zr(zr({},p),{},{isShow:!0}))},h=l-1;h>=0;h--)u(h);return i}function MAe(e,s,a,r,n,i){var l=(r||[]).slice(),o=l.length,d=s.start,u=s.end;if(i){var h=r[o-1],f=a(h,o-1),x=e*(h.coordinate+e*f/2-u);l[o-1]=h=zr(zr({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate});var p=Ug(e,h.tickCoord,function(){return f},d,u);p&&(u=h.tickCoord-e*(f/2+n),l[o-1]=zr(zr({},h),{},{isShow:!0}))}for(var v=i?o-1:o,b=function(w){var S=l[w],O,_=function(){return O===void 0&&(O=a(S,w)),O};if(w===0){var E=e*(S.coordinate-e*_()/2-d);l[w]=S=zr(zr({},S),{},{tickCoord:E<0?S.coordinate-E*e:S.coordinate})}else l[w]=S=zr(zr({},S),{},{tickCoord:S.coordinate});var A=Ug(e,S.tickCoord,_,d,u);A&&(d=S.tickCoord+e*(_()/2+n),l[w]=zr(zr({},S),{},{isShow:!0}))},y=0;y<v;y++)b(y);return l}function bC(e,s,a){var r=e.tick,n=e.ticks,i=e.viewBox,l=e.minTickGap,o=e.orientation,d=e.interval,u=e.tickFormatter,h=e.unit,f=e.angle;if(!n||!n.length||!r)return[];if(dt(d)||N0.isSsr)return kAe(n,typeof d=="number"&&dt(d)?d:0);var x=[],p=o==="top"||o==="bottom"?"width":"height",v=h&&p==="width"?Xm(h,{fontSize:s,letterSpacing:a}):{width:0,height:0},b=function(S,O){var _=cs(u)?u(S.value,O):S.value;return p==="width"?TAe(Xm(_,{fontSize:s,letterSpacing:a}),v,f):Xm(_,{fontSize:s,letterSpacing:a})[p]},y=n.length>=2?Ii(n[1].coordinate-n[0].coordinate):1,j=_Ae(i,y,p);return d==="equidistantPreserveStart"?OAe(y,j,b,n,l):(d==="preserveStart"||d==="preserveStartEnd"?x=MAe(y,j,b,n,l,d==="preserveStartEnd"):x=DAe(y,j,b,n,l),x.filter(function(w){return w.isShow}))}var LAe=["viewBox"],FAe=["viewBox"],UAe=["ticks"];function r0(e){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},r0(e)}function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ju.apply(this,arguments)}function SM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function ir(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?SM(Object(a),!0).forEach(function(r){vC(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function yS(e,s){if(e==null)return{};var a=zAe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zAe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function BAe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function AM(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qz(r.key),r)}}function $Ae(e,s,a){return s&&AM(e.prototype,s),a&&AM(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function qAe(e,s,a){return s=zg(s),HAe(e,$z()?Reflect.construct(s,a||[],zg(e).constructor):s.apply(e,a))}function HAe(e,s){if(s&&(r0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VAe(e)}function VAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($z=function(){return!!e})()}function zg(e){return zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zg(e)}function GAe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&iA(e,s)}function iA(e,s){return iA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},iA(e,s)}function vC(e,s,a){return s=qz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function qz(e){var s=WAe(e,"string");return r0(s)=="symbol"?s:s+""}function WAe(e,s){if(r0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(r0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var A0=(function(e){function s(a){var r;return BAe(this,s),r=qAe(this,s,[a]),r.state={fontSize:"",letterSpacing:""},r}return GAe(s,e),$Ae(s,[{key:"shouldComponentUpdate",value:function(r,n){var i=r.viewBox,l=yS(r,LAe),o=this.props,d=o.viewBox,u=yS(o,FAe);return!Ou(i,d)||!Ou(l,u)||!Ou(n,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var n=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var n=this.props,i=n.x,l=n.y,o=n.width,d=n.height,u=n.orientation,h=n.tickSize,f=n.mirror,x=n.tickMargin,p,v,b,y,j,w,S=f?-1:1,O=r.tickSize||h,_=dt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=v=r.coordinate,y=l+ +!f*d,b=y-S*O,w=b-S*x,j=_;break;case"left":b=y=r.coordinate,v=i+ +!f*o,p=v-S*O,j=p-S*x,w=_;break;case"right":b=y=r.coordinate,v=i+ +f*o,p=v+S*O,j=p+S*x,w=_;break;default:p=v=r.coordinate,y=l+ +f*d,b=y+S*O,w=b+S*x,j=_;break}return{line:{x1:p,y1:b,x2:v,y2:y},tick:{x:j,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,n=r.orientation,i=r.mirror,l;switch(n){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,n=r.orientation,i=r.mirror,l="end";switch(n){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,o=r.height,d=r.orientation,u=r.mirror,h=r.axisLine,f=ir(ir(ir({},ys(this.props,!1)),ys(h,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!u||d==="bottom"&&u);f=ir(ir({},f),{},{x1:n,y1:i+x*o,x2:n+l,y2:i+x*o})}else{var p=+(d==="left"&&!u||d==="right"&&u);f=ir(ir({},f),{},{x1:n+p*l,y1:i,x2:n+p*l,y2:i+o})}return ke.createElement("line",ju({},f,{className:Is("recharts-cartesian-axis-line",fi(h,"className"))}))}},{key:"renderTicks",value:function(r,n,i){var l=this,o=this.props,d=o.tickLine,u=o.stroke,h=o.tick,f=o.tickFormatter,x=o.unit,p=bC(ir(ir({},this.props),{},{ticks:r}),n,i),v=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),y=ys(this.props,!1),j=ys(h,!1),w=ir(ir({},y),{},{fill:"none"},ys(d,!1)),S=p.map(function(O,_){var E=l.getTickLineCoord(O),A=E.line,D=E.tick,L=ir(ir(ir(ir({textAnchor:v,verticalAnchor:b},y),{},{stroke:"none",fill:u},j),D),{},{index:_,payload:O,visibleTicksCount:p.length,tickFormatter:f});return ke.createElement(_a,ju({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Yp(l.props,O,_)),d&&ke.createElement("line",ju({},w,A,{className:Is("recharts-cartesian-axis-tick-line",fi(d,"className"))})),h&&s.renderTickItem(h,L,"".concat(cs(f)?f(O.value,_):O.value).concat(x||"")))});return ke.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,n=this.props,i=n.axisLine,l=n.width,o=n.height,d=n.ticksGenerator,u=n.className,h=n.hide;if(h)return null;var f=this.props,x=f.ticks,p=yS(f,UAe),v=x;return cs(d)&&(v=x&&x.length>0?d(this.props):d(p)),l<=0||o<=0||!v||!v.length?null:ke.createElement(_a,{className:Is("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Hr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,n,i){var l,o=Is(n.className,"recharts-cartesian-axis-tick-value");return ke.isValidElement(r)?l=ke.cloneElement(r,ir(ir({},n),{},{className:o})):cs(r)?l=r(ir(ir({},n),{},{className:o})):l=ke.createElement(og,ju({},n,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])})(C.Component);vC(A0,"displayName","CartesianAxis");vC(A0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var QAe=["x1","y1","x2","y2","key"],KAe=["offset"];function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},md(e)}function EM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Vr(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?EM(Object(a),!0).forEach(function(r){JAe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):EM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function JAe(e,s,a){return s=YAe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function YAe(e){var s=XAe(e,"string");return md(s)=="symbol"?s:s+""}function XAe(e,s){if(md(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Uc(){return Uc=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Uc.apply(this,arguments)}function CM(e,s){if(e==null)return{};var a=ZAe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZAe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var eEe=function(s){var a=s.fill;if(!a||a==="none")return null;var r=s.fillOpacity,n=s.x,i=s.y,l=s.width,o=s.height,d=s.ry;return ke.createElement("rect",{x:n,y:i,ry:d,width:l,height:o,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Hz(e,s){var a;if(ke.isValidElement(e))a=ke.cloneElement(e,s);else if(cs(e))a=e(s);else{var r=s.x1,n=s.y1,i=s.x2,l=s.y2,o=s.key,d=CM(s,QAe),u=ys(d,!1);u.offset;var h=CM(u,KAe);a=ke.createElement("line",Uc({},h,{x1:r,y1:n,x2:i,y2:l,fill:"none",key:o}))}return a}function tEe(e){var s=e.x,a=e.width,r=e.horizontal,n=r===void 0?!0:r,i=e.horizontalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(o,d){var u=Vr(Vr({},e),{},{x1:s,y1:o,x2:s+a,y2:o,key:"line-".concat(d),index:d});return Hz(n,u)});return ke.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function sEe(e){var s=e.y,a=e.height,r=e.vertical,n=r===void 0?!0:r,i=e.verticalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(o,d){var u=Vr(Vr({},e),{},{x1:o,y1:s,x2:o,y2:s+a,key:"line-".concat(d),index:d});return Hz(n,u)});return ke.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function aEe(e){var s=e.horizontalFill,a=e.fillOpacity,r=e.x,n=e.y,i=e.width,l=e.height,o=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!s||!s.length)return null;var h=o.map(function(x){return Math.round(x+n-n)}).sort(function(x,p){return x-p});n!==h[0]&&h.unshift(0);var f=h.map(function(x,p){var v=!h[p+1],b=v?n+l-x:h[p+1]-x;if(b<=0)return null;var y=p%s.length;return ke.createElement("rect",{key:"react-".concat(p),y:x,x:r,height:b,width:i,stroke:"none",fill:s[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ke.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function rEe(e){var s=e.vertical,a=s===void 0?!0:s,r=e.verticalFill,n=e.fillOpacity,i=e.x,l=e.y,o=e.width,d=e.height,u=e.verticalPoints;if(!a||!r||!r.length)return null;var h=u.map(function(x){return Math.round(x+i-i)}).sort(function(x,p){return x-p});i!==h[0]&&h.unshift(0);var f=h.map(function(x,p){var v=!h[p+1],b=v?i+o-x:h[p+1]-x;if(b<=0)return null;var y=p%r.length;return ke.createElement("rect",{key:"react-".concat(p),x,y:l,width:b,height:d,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ke.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var nEe=function(s,a){var r=s.xAxis,n=s.width,i=s.height,l=s.offset;return az(bC(Vr(Vr(Vr({},A0.defaultProps),r),{},{ticks:Rl(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.left,l.left+l.width,a)},iEe=function(s,a){var r=s.yAxis,n=s.width,i=s.height,l=s.offset;return az(bC(Vr(Vr(Vr({},A0.defaultProps),r),{},{ticks:Rl(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.top,l.top+l.height,a)},pu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Vz(e){var s,a,r,n,i,l,o=hC(),d=xC(),u=W2e(),h=Vr(Vr({},e),{},{stroke:(s=e.stroke)!==null&&s!==void 0?s:pu.stroke,fill:(a=e.fill)!==null&&a!==void 0?a:pu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:pu.horizontal,horizontalFill:(n=e.horizontalFill)!==null&&n!==void 0?n:pu.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:pu.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:pu.verticalFill,x:dt(e.x)?e.x:u.left,y:dt(e.y)?e.y:u.top,width:dt(e.width)?e.width:u.width,height:dt(e.height)?e.height:u.height}),f=h.x,x=h.y,p=h.width,v=h.height,b=h.syncWithTicks,y=h.horizontalValues,j=h.verticalValues,w=H2e(),S=V2e();if(!dt(p)||p<=0||!dt(v)||v<=0||!dt(f)||f!==+f||!dt(x)||x!==+x)return null;var O=h.verticalCoordinatesGenerator||nEe,_=h.horizontalCoordinatesGenerator||iEe,E=h.horizontalPoints,A=h.verticalPoints;if((!E||!E.length)&&cs(_)){var D=y&&y.length,L=_({yAxis:S?Vr(Vr({},S),{},{ticks:D?y:S.ticks}):void 0,width:o,height:d,offset:u},D?!0:b);zl(Array.isArray(L),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(md(L),"]")),Array.isArray(L)&&(E=L)}if((!A||!A.length)&&cs(O)){var B=j&&j.length,I=O({xAxis:w?Vr(Vr({},w),{},{ticks:B?j:w.ticks}):void 0,width:o,height:d,offset:u},B?!0:b);zl(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(md(I),"]")),Array.isArray(I)&&(A=I)}return ke.createElement("g",{className:"recharts-cartesian-grid"},ke.createElement(eEe,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),ke.createElement(tEe,Uc({},h,{offset:u,horizontalPoints:E,xAxis:w,yAxis:S})),ke.createElement(sEe,Uc({},h,{offset:u,verticalPoints:A,xAxis:w,yAxis:S})),ke.createElement(aEe,Uc({},h,{horizontalPoints:E})),ke.createElement(rEe,Uc({},h,{verticalPoints:A})))}Vz.displayName="CartesianGrid";var lEe=["layout","type","stroke","connectNulls","isRange","ref"],oEe=["key"],Gz;function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},n0(e)}function Wz(e,s){if(e==null)return{};var a=cEe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cEe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},zc.apply(this,arguments)}function TM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function To(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?TM(Object(a),!0).forEach(function(r){Xi(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function dEe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _M(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kz(r.key),r)}}function uEe(e,s,a){return s&&_M(e.prototype,s),a&&_M(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function mEe(e,s,a){return s=Bg(s),fEe(e,Qz()?Reflect.construct(s,a||[],Bg(e).constructor):s.apply(e,a))}function fEe(e,s){if(s&&(n0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hEe(e)}function hEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qz=function(){return!!e})()}function Bg(e){return Bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Bg(e)}function xEe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&lA(e,s)}function lA(e,s){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},lA(e,s)}function Xi(e,s,a){return s=Kz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Kz(e){var s=pEe(e,"string");return n0(s)=="symbol"?s:s+""}function pEe(e,s){if(n0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(n0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cc=(function(e){function s(){var a;dEe(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=mEe(this,s,[].concat(n)),Xi(a,"state",{isAnimationFinished:!0}),Xi(a,"id",bh("recharts-area-")),Xi(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),cs(l)&&l()}),Xi(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),cs(l)&&l()}),a}return xEe(s,e),uEe(s,[{key:"renderDots",value:function(r,n,i){var l=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(l&&!o)return null;var d=this.props,u=d.dot,h=d.points,f=d.dataKey,x=ys(this.props,!1),p=ys(u,!0),v=h.map(function(y,j){var w=To(To(To({key:"dot-".concat(j),r:3},x),p),{},{index:j,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:h});return s.renderDotItem(u,w)}),b={clipPath:r?"url(#clipPath-".concat(n?"":"dots-").concat(i,")"):null};return ke.createElement(_a,zc({className:"recharts-area-dots"},b),v)}},{key:"renderHorizontalRect",value:function(r){var n=this.props,i=n.baseLine,l=n.points,o=n.strokeWidth,d=l[0].x,u=l[l.length-1].x,h=r*Math.abs(d-u),f=Do(l.map(function(x){return x.y||0}));return dt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Do(i.map(function(x){return x.y||0})),f)),dt(f)?ke.createElement("rect",{x:d<u?d:d-h,y:0,width:h,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var n=this.props,i=n.baseLine,l=n.points,o=n.strokeWidth,d=l[0].y,u=l[l.length-1].y,h=r*Math.abs(d-u),f=Do(l.map(function(x){return x.x||0}));return dt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Do(i.map(function(x){return x.x||0})),f)),dt(f)?ke.createElement("rect",{x:0,y:d<u?d:d-h,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(r){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,n,i,l){var o=this.props,d=o.layout,u=o.type,h=o.stroke,f=o.connectNulls,x=o.isRange;o.ref;var p=Wz(o,lEe);return ke.createElement(_a,{clipPath:i?"url(#clipPath-".concat(l,")"):null},ke.createElement(tf,zc({},ys(p,!0),{points:r,connectNulls:f,type:u,baseLine:n,layout:d,stroke:"none",className:"recharts-area-area"})),h!=="none"&&ke.createElement(tf,zc({},ys(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:f,fill:"none",points:r})),h!=="none"&&x&&ke.createElement(tf,zc({},ys(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:f,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(r,n){var i=this,l=this.props,o=l.points,d=l.baseLine,u=l.isAnimationActive,h=l.animationBegin,f=l.animationDuration,x=l.animationEasing,p=l.animationId,v=this.state,b=v.prevPoints,y=v.prevBaseLine;return ke.createElement(Wl,{begin:h,duration:f,isActive:u,easing:x,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var w=j.t;if(b){var S=b.length/o.length,O=o.map(function(D,L){var B=Math.floor(L*S);if(b[B]){var I=b[B],T=oi(I.x,D.x),z=oi(I.y,D.y);return To(To({},D),{},{x:T(w),y:z(w)})}return D}),_;if(dt(d)&&typeof d=="number"){var E=oi(y,d);_=E(w)}else if(Ss(d)||v0(d)){var A=oi(y,0);_=A(w)}else _=d.map(function(D,L){var B=Math.floor(L*S);if(y[B]){var I=y[B],T=oi(I.x,D.x),z=oi(I.y,D.y);return To(To({},D),{},{x:T(w),y:z(w)})}return D});return i.renderAreaStatically(O,_,r,n)}return ke.createElement(_a,null,ke.createElement("defs",null,ke.createElement("clipPath",{id:"animationClipPath-".concat(n)},i.renderClipRect(w))),ke.createElement(_a,{clipPath:"url(#animationClipPath-".concat(n,")")},i.renderAreaStatically(o,d,r,n)))})}},{key:"renderArea",value:function(r,n){var i=this.props,l=i.points,o=i.baseLine,d=i.isAnimationActive,u=this.state,h=u.prevPoints,f=u.prevBaseLine,x=u.totalLength;return d&&l&&l.length&&(!h&&x>0||!Mf(h,l)||!Mf(f,o))?this.renderAreaWithAnimation(r,n):this.renderAreaStatically(l,o,r,n)}},{key:"render",value:function(){var r,n=this.props,i=n.hide,l=n.dot,o=n.points,d=n.className,u=n.top,h=n.left,f=n.xAxis,x=n.yAxis,p=n.width,v=n.height,b=n.isAnimationActive,y=n.id;if(i||!o||!o.length)return null;var j=this.state.isAnimationFinished,w=o.length===1,S=Is("recharts-area",d),O=f&&f.allowDataOverflow,_=x&&x.allowDataOverflow,E=O||_,A=Ss(y)?this.id:y,D=(r=ys(l,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},L=D.r,B=L===void 0?3:L,I=D.strokeWidth,T=I===void 0?2:I,z=Ffe(l)?l:{},k=z.clipDot,F=k===void 0?!0:k,P=B*2+T;return ke.createElement(_a,{className:S},O||_?ke.createElement("defs",null,ke.createElement("clipPath",{id:"clipPath-".concat(A)},ke.createElement("rect",{x:O?h:h-p/2,y:_?u:u-v/2,width:O?p:p*2,height:_?v:v*2})),!F&&ke.createElement("clipPath",{id:"clipPath-dots-".concat(A)},ke.createElement("rect",{x:h-P/2,y:u-P/2,width:p+P,height:v+P}))):null,w?null:this.renderArea(E,A),(l||w)&&this.renderDots(E,F,A),(!b||j)&&$o.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:r.points!==n.curPoints||r.baseLine!==n.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(C.PureComponent);Gz=cc;Xi(cc,"displayName","Area");Xi(cc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!N0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Xi(cc,"getBaseValue",function(e,s,a,r){var n=e.layout,i=e.baseValue,l=s.props.baseValue,o=l??i;if(dt(o)&&typeof o=="number")return o;var d=n==="horizontal"?r:a,u=d.scale.domain();if(d.type==="number"){var h=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||h<0?h:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});Xi(cc,"getComposedData",function(e){var s=e.props,a=e.item,r=e.xAxis,n=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,d=e.dataKey,u=e.stackedData,h=e.dataStartIndex,f=e.displayedData,x=e.offset,p=s.layout,v=u&&u.length,b=Gz.getBaseValue(s,a,r,n),y=p==="horizontal",j=!1,w=f.map(function(O,_){var E;v?E=u[h+_]:(E=Bn(O,d),Array.isArray(E)?j=!0:E=[b,E]);var A=E[1]==null||v&&Bn(O,d)==null;return y?{x:HD({axis:r,ticks:i,bandSize:o,entry:O,index:_}),y:A?null:n.scale(E[1]),value:E,payload:O}:{x:A?null:r.scale(E[1]),y:HD({axis:n,ticks:l,bandSize:o,entry:O,index:_}),value:E,payload:O}}),S;return v||j?S=w.map(function(O){var _=Array.isArray(O.value)?O.value[0]:null;return y?{x:O.x,y:_!=null&&O.y!=null?n.scale(_):null}:{x:_!=null?r.scale(_):null,y:O.y}}):S=y?n.scale(b):r.scale(b),To({points:w,baseLine:S,layout:p,isRange:j},x)});Xi(cc,"renderDotItem",function(e,s){var a;if(ke.isValidElement(e))a=ke.cloneElement(e,s);else if(cs(e))a=e(s);else{var r=Is("recharts-area-dot",typeof e!="boolean"?e.className:""),n=s.key,i=Wz(s,oEe);a=ke.createElement(dC,zc({},i,{key:n,className:r}))}return a});function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},i0(e)}function gEe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function bEe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xz(r.key),r)}}function vEe(e,s,a){return s&&bEe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function yEe(e,s,a){return s=$g(s),NEe(e,Jz()?Reflect.construct(s,a||[],$g(e).constructor):s.apply(e,a))}function NEe(e,s){if(s&&(i0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jEe(e)}function jEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jz=function(){return!!e})()}function $g(e){return $g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},$g(e)}function wEe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&oA(e,s)}function oA(e,s){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},oA(e,s)}function Yz(e,s,a){return s=Xz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Xz(e){var s=SEe(e,"string");return i0(s)=="symbol"?s:s+""}function SEe(e,s){if(i0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(i0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},cA.apply(this,arguments)}function AEe(e){var s=e.xAxisId,a=hC(),r=xC(),n=Rz(s);return n==null?null:C.createElement(A0,cA({},n,{className:Is("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(l){return Rl(l,!0)}}))}var Sh=(function(e){function s(){return gEe(this,s),yEe(this,s,arguments)}return wEe(s,e),vEe(s,[{key:"render",value:function(){return C.createElement(AEe,this.props)}}])})(C.Component);Yz(Sh,"displayName","XAxis");Yz(Sh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function l0(e){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},l0(e)}function EEe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function CEe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tB(r.key),r)}}function TEe(e,s,a){return s&&CEe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Ee(e,s,a){return s=qg(s),kEe(e,Zz()?Reflect.construct(s,a||[],qg(e).constructor):s.apply(e,a))}function kEe(e,s){if(s&&(l0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OEe(e)}function OEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zz=function(){return!!e})()}function qg(e){return qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qg(e)}function IEe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&dA(e,s)}function dA(e,s){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},dA(e,s)}function eB(e,s,a){return s=tB(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function tB(e){var s=REe(e,"string");return l0(s)=="symbol"?s:s+""}function REe(e,s){if(l0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(l0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function uA(){return uA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},uA.apply(this,arguments)}var PEe=function(s){var a=s.yAxisId,r=hC(),n=xC(),i=Pz(a);return i==null?null:C.createElement(A0,uA({},i,{className:Is("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Rl(o,!0)}}))},Ah=(function(e){function s(){return EEe(this,s),_Ee(this,s,arguments)}return IEe(s,e),TEe(s,[{key:"render",value:function(){return C.createElement(PEe,this.props)}}])})(C.Component);eB(Ah,"displayName","YAxis");eB(Ah,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function kM(e){return FEe(e)||LEe(e)||MEe(e)||DEe()}function DEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MEe(e,s){if(e){if(typeof e=="string")return mA(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mA(e,s)}}function LEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FEe(e){if(Array.isArray(e))return mA(e)}function mA(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}var fA=function(s,a,r,n,i){var l=Di(s,gC),o=Di(s,Ob),d=[].concat(kM(l),kM(o)),u=Di(s,Rb),h="".concat(n,"Id"),f=n[0],x=a;if(d.length&&(x=d.reduce(function(b,y){if(y.props[h]===r&&tl(y.props,"extendDomain")&&dt(y.props[f])){var j=y.props[f];return[Math.min(b[0],j),Math.max(b[1],j)]}return b},x)),u.length){var p="".concat(f,"1"),v="".concat(f,"2");x=u.reduce(function(b,y){if(y.props[h]===r&&tl(y.props,"extendDomain")&&dt(y.props[p])&&dt(y.props[v])){var j=y.props[p],w=y.props[v];return[Math.min(b[0],j,w),Math.max(b[1],j,w)]}return b},x)}return i&&i.length&&(x=i.reduce(function(b,y){return dt(y)?[Math.min(b[0],y),Math.max(b[1],y)]:b},x)),x},NS={exports:{}},OM;function UEe(){return OM||(OM=1,(function(e){var s=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function n(d,u,h){this.fn=d,this.context=u,this.once=h||!1}function i(d,u,h,f,x){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new n(h,f||d,x),v=a?a+u:u;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],p]:d._events[v].push(p):(d._events[v]=p,d._eventsCount++),d}function l(d,u){--d._eventsCount===0?d._events=new r:delete d._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)s.call(h,f)&&u.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=a?a+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var x=0,p=f.length,v=new Array(p);x<p;x++)v[x]=f[x].fn;return v},o.prototype.listenerCount=function(u){var h=a?a+u:u,f=this._events[h];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,h,f,x,p,v){var b=a?a+u:u;if(!this._events[b])return!1;var y=this._events[b],j=arguments.length,w,S;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),j){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,f),!0;case 4:return y.fn.call(y.context,h,f,x),!0;case 5:return y.fn.call(y.context,h,f,x,p),!0;case 6:return y.fn.call(y.context,h,f,x,p,v),!0}for(S=1,w=new Array(j-1);S<j;S++)w[S-1]=arguments[S];y.fn.apply(y.context,w)}else{var O=y.length,_;for(S=0;S<O;S++)switch(y[S].once&&this.removeListener(u,y[S].fn,void 0,!0),j){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,h);break;case 3:y[S].fn.call(y[S].context,h,f);break;case 4:y[S].fn.call(y[S].context,h,f,x);break;default:if(!w)for(_=1,w=new Array(j-1);_<j;_++)w[_-1]=arguments[_];y[S].fn.apply(y[S].context,w)}}return!0},o.prototype.on=function(u,h,f){return i(this,u,h,f,!1)},o.prototype.once=function(u,h,f){return i(this,u,h,f,!0)},o.prototype.removeListener=function(u,h,f,x){var p=a?a+u:u;if(!this._events[p])return this;if(!h)return l(this,p),this;var v=this._events[p];if(v.fn)v.fn===h&&(!x||v.once)&&(!f||v.context===f)&&l(this,p);else{for(var b=0,y=[],j=v.length;b<j;b++)(v[b].fn!==h||x&&!v[b].once||f&&v[b].context!==f)&&y.push(v[b]);y.length?this._events[p]=y.length===1?y[0]:y:l(this,p)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=a?a+u:u,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=a,o.EventEmitter=o,e.exports=o})(NS)),NS.exports}var zEe=UEe();const BEe=ra(zEe);var jS=new BEe,wS="recharts.syncMouseEvents";function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rh(e)}function $Ee(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function qEe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sB(r.key),r)}}function HEe(e,s,a){return s&&qEe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function SS(e,s,a){return s=sB(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function sB(e){var s=VEe(e,"string");return rh(s)=="symbol"?s:s+""}function VEe(e,s){if(rh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GEe=(function(){function e(){$Ee(this,e),SS(this,"activeIndex",0),SS(this,"coordinateList",[]),SS(this,"layout","horizontal")}return HEe(e,[{key:"setDetails",value:function(a){var r,n=a.coordinateList,i=n===void 0?null:n,l=a.container,o=l===void 0?null:l,d=a.layout,u=d===void 0?null:d,h=a.offset,f=h===void 0?null:h,x=a.mouseHandlerCallback,p=x===void 0?null:x;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var n=this.container.getBoundingClientRect(),i=n.x,l=n.y,o=n.height,d=this.coordinateList[this.activeIndex].coordinate,u=((a=window)===null||a===void 0?void 0:a.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=i+d+u,x=l+this.offset.top+o/2+h;this.mouseHandlerCallback({pageX:f,pageY:x})}}}])})();function WEe(e,s,a){if(a==="number"&&s===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],n=e==null?void 0:e[1];if(r&&n&&dt(r)&&dt(n))return!0}return!1}function QEe(e,s,a,r){var n=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?s.x-n:a.left+.5,y:e==="horizontal"?a.top+.5:s.y-n,width:e==="horizontal"?r:a.width-1,height:e==="horizontal"?a.height-1:r}}function aB(e){var s=e.cx,a=e.cy,r=e.radius,n=e.startAngle,i=e.endAngle,l=Pr(s,a,r,n),o=Pr(s,a,r,i);return{points:[l,o],cx:s,cy:a,radius:r,startAngle:n,endAngle:i}}function KEe(e,s,a){var r,n,i,l;if(e==="horizontal")r=s.x,i=r,n=a.top,l=a.top+a.height;else if(e==="vertical")n=s.y,l=n,r=a.left,i=a.left+a.width;else if(s.cx!=null&&s.cy!=null)if(e==="centric"){var o=s.cx,d=s.cy,u=s.innerRadius,h=s.outerRadius,f=s.angle,x=Pr(o,d,u,f),p=Pr(o,d,h,f);r=x.x,n=x.y,i=p.x,l=p.y}else return aB(s);return[{x:r,y:n},{x:i,y:l}]}function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},nh(e)}function IM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function hp(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?IM(Object(a),!0).forEach(function(r){JEe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function JEe(e,s,a){return s=YEe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function YEe(e){var s=XEe(e,"string");return nh(s)=="symbol"?s:s+""}function XEe(e,s){if(nh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function ZEe(e){var s,a,r=e.element,n=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,d=e.offset,u=e.activeTooltipIndex,h=e.tooltipAxisBandSize,f=e.layout,x=e.chartName,p=(s=r.props.cursor)!==null&&s!==void 0?s:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!p||!i||!l||x!=="ScatterChart"&&n!=="axis")return null;var v,b=tf;if(x==="ScatterChart")v=l,b=tSe;else if(x==="BarChart")v=QEe(f,l,d,h),b=cC;else if(f==="radial"){var y=aB(l),j=y.cx,w=y.cy,S=y.radius,O=y.startAngle,_=y.endAngle;v={cx:j,cy:w,startAngle:O,endAngle:_,innerRadius:S,outerRadius:S},b=oz}else v={points:KEe(f,l,d)},b=tf;var E=hp(hp(hp(hp({stroke:"#ccc",pointerEvents:"none"},d),v),ys(p,!1)),{},{payload:o,payloadIndex:u,className:Is("recharts-tooltip-cursor",p.className)});return C.isValidElement(p)?C.cloneElement(p,E):C.createElement(b,E)}var eCe=["item"],tCe=["children","className","width","height","style","compact","title","desc"];function o0(e){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},o0(e)}function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},wu.apply(this,arguments)}function RM(e,s){return rCe(e)||aCe(e,s)||nB(e,s)||sCe()}function sCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function rCe(e){if(Array.isArray(e))return e}function PM(e,s){if(e==null)return{};var a=nCe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nCe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function iCe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function lCe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iB(r.key),r)}}function oCe(e,s,a){return s&&lCe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function cCe(e,s,a){return s=Hg(s),dCe(e,rB()?Reflect.construct(s,a||[],Hg(e).constructor):s.apply(e,a))}function dCe(e,s){if(s&&(o0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uCe(e)}function uCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rB=function(){return!!e})()}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Hg(e)}function mCe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&hA(e,s)}function hA(e,s){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},hA(e,s)}function c0(e){return xCe(e)||hCe(e)||nB(e)||fCe()}function fCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nB(e,s){if(e){if(typeof e=="string")return xA(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return xA(e,s)}}function hCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xCe(e){if(Array.isArray(e))return xA(e)}function xA(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function DM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ze(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?DM(Object(a),!0).forEach(function(r){qt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function qt(e,s,a){return s=iB(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function iB(e){var s=pCe(e,"string");return o0(s)=="symbol"?s:s+""}function pCe(e,s){if(o0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(o0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var gCe={xAxis:["bottom","top"],yAxis:["left","right"]},bCe={width:"100%",height:"100%"},lB={x:0,y:0};function xp(e){return e}var vCe=function(s,a){return a==="horizontal"?s.x:a==="vertical"?s.y:a==="centric"?s.angle:s.radius},yCe=function(s,a,r,n){var i=a.find(function(h){return h&&h.index===r});if(i){if(s==="horizontal")return{x:i.coordinate,y:n.y};if(s==="vertical")return{x:n.x,y:i.coordinate};if(s==="centric"){var l=i.coordinate,o=n.radius;return Ze(Ze(Ze({},n),Pr(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}var d=i.coordinate,u=n.angle;return Ze(Ze(Ze({},n),Pr(n.cx,n.cy,d,u)),{},{angle:u,radius:d})}return lB},Pb=function(s,a){var r=a.graphicalItems,n=a.dataStartIndex,i=a.dataEndIndex,l=(r??[]).reduce(function(o,d){var u=d.props.data;return u&&u.length?[].concat(c0(o),c0(u)):o},[]);return l.length>0?l:s&&s.length&&dt(n)&&dt(i)?s.slice(n,i+1):[]};function oB(e){return e==="number"?[0,"auto"]:void 0}var pA=function(s,a,r,n){var i=s.graphicalItems,l=s.tooltipAxis,o=Pb(a,s);return r<0||!i||!i.length||r>=o.length?null:i.reduce(function(d,u){var h,f=(h=u.props.data)!==null&&h!==void 0?h:a;f&&s.dataStartIndex+s.dataEndIndex!==0&&s.dataEndIndex-s.dataStartIndex>=r&&(f=f.slice(s.dataStartIndex,s.dataEndIndex+1));var x;if(l.dataKey&&!l.allowDuplicatedCategory){var p=f===void 0?o:f;x=Kp(p,l.dataKey,n)}else x=f&&f[r]||o[r];return x?[].concat(c0(d),[nz(u,x)]):d},[])},MM=function(s,a,r,n){var i=n||{x:s.chartX,y:s.chartY},l=vCe(i,r),o=s.orderedTooltipTicks,d=s.tooltipAxis,u=s.tooltipTicks,h=L1e(l,o,u,d);if(h>=0&&u){var f=u[h]&&u[h].value,x=pA(s,a,h,f),p=yCe(r,o,h,i);return{activeTooltipIndex:h,activeLabel:f,activePayload:x,activeCoordinate:p}}return null},NCe=function(s,a){var r=a.axes,n=a.graphicalItems,i=a.axisType,l=a.axisIdKey,o=a.stackGroups,d=a.dataStartIndex,u=a.dataEndIndex,h=s.layout,f=s.children,x=s.stackOffset,p=sz(h,i);return r.reduce(function(v,b){var y,j=b.type.defaultProps!==void 0?Ze(Ze({},b.type.defaultProps),b.props):b.props,w=j.type,S=j.dataKey,O=j.allowDataOverflow,_=j.allowDuplicatedCategory,E=j.scale,A=j.ticks,D=j.includeHidden,L=j[l];if(v[L])return v;var B=Pb(s.data,{graphicalItems:n.filter(function(M){var X,K=l in M.props?M.props[l]:(X=M.type.defaultProps)===null||X===void 0?void 0:X[l];return K===L}),dataStartIndex:d,dataEndIndex:u}),I=B.length,T,z,k;WEe(j.domain,O,w)&&(T=D2(j.domain,null,O),p&&(w==="number"||E!=="auto")&&(k=ef(B,S,"category")));var F=oB(w);if(!T||T.length===0){var P,G=(P=j.domain)!==null&&P!==void 0?P:F;if(S){if(T=ef(B,S,w),w==="category"&&p){var Y=Tfe(T);_&&Y?(z=T,T=Og(0,I)):_||(T=QD(G,T,b).reduce(function(M,X){return M.indexOf(X)>=0?M:[].concat(c0(M),[X])},[]))}else if(w==="category")_?T=T.filter(function(M){return M!==""&&!Ss(M)}):T=QD(G,T,b).reduce(function(M,X){return M.indexOf(X)>=0||X===""||Ss(X)?M:[].concat(c0(M),[X])},[]);else if(w==="number"){var W=$1e(B,n.filter(function(M){var X,K,Q=l in M.props?M.props[l]:(X=M.type.defaultProps)===null||X===void 0?void 0:X[l],se="hide"in M.props?M.props.hide:(K=M.type.defaultProps)===null||K===void 0?void 0:K.hide;return Q===L&&(D||!se)}),S,i,h);W&&(T=W)}p&&(w==="number"||E!=="auto")&&(k=ef(B,S,"category"))}else p?T=Og(0,I):o&&o[L]&&o[L].hasStack&&w==="number"?T=x==="expand"?[0,1]:rz(o[L].stackGroups,d,u):T=tz(B,n.filter(function(M){var X=l in M.props?M.props[l]:M.type.defaultProps[l],K="hide"in M.props?M.props.hide:M.type.defaultProps.hide;return X===L&&(D||!K)}),w,h,!0);if(w==="number")T=fA(f,T,L,i,A),G&&(T=D2(G,T,O));else if(w==="category"&&G){var ee=G,H=T.every(function(M){return ee.indexOf(M)>=0});H&&(T=ee)}}return Ze(Ze({},v),{},qt({},L,Ze(Ze({},j),{},{axisType:i,domain:T,categoricalDomain:k,duplicateDomain:z,originalDomain:(y=j.domain)!==null&&y!==void 0?y:F,isCategorical:p,layout:h})))},{})},jCe=function(s,a){var r=a.graphicalItems,n=a.Axis,i=a.axisType,l=a.axisIdKey,o=a.stackGroups,d=a.dataStartIndex,u=a.dataEndIndex,h=s.layout,f=s.children,x=Pb(s.data,{graphicalItems:r,dataStartIndex:d,dataEndIndex:u}),p=x.length,v=sz(h,i),b=-1;return r.reduce(function(y,j){var w=j.type.defaultProps!==void 0?Ze(Ze({},j.type.defaultProps),j.props):j.props,S=w[l],O=oB("number");if(!y[S]){b++;var _;return v?_=Og(0,p):o&&o[S]&&o[S].hasStack?(_=rz(o[S].stackGroups,d,u),_=fA(f,_,S,i)):(_=D2(O,tz(x,r.filter(function(E){var A,D,L=l in E.props?E.props[l]:(A=E.type.defaultProps)===null||A===void 0?void 0:A[l],B="hide"in E.props?E.props.hide:(D=E.type.defaultProps)===null||D===void 0?void 0:D.hide;return L===S&&!B}),"number",h),n.defaultProps.allowDataOverflow),_=fA(f,_,S,i)),Ze(Ze({},y),{},qt({},S,Ze(Ze({axisType:i},n.defaultProps),{},{hide:!0,orientation:fi(gCe,"".concat(i,".").concat(b%2),null),domain:_,originalDomain:O,isCategorical:v,layout:h})))}return y},{})},wCe=function(s,a){var r=a.axisType,n=r===void 0?"xAxis":r,i=a.AxisComp,l=a.graphicalItems,o=a.stackGroups,d=a.dataStartIndex,u=a.dataEndIndex,h=s.children,f="".concat(n,"Id"),x=Di(h,i),p={};return x&&x.length?p=NCe(s,{axes:x,graphicalItems:l,axisType:n,axisIdKey:f,stackGroups:o,dataStartIndex:d,dataEndIndex:u}):l&&l.length&&(p=jCe(s,{Axis:i,graphicalItems:l,axisType:n,axisIdKey:f,stackGroups:o,dataStartIndex:d,dataEndIndex:u})),p},SCe=function(s){var a=ko(s),r=Rl(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:ME(r,function(n){return n.coordinate}),tooltipAxis:a,tooltipAxisBandSize:jg(a,r)}},LM=function(s){var a=s.children,r=s.defaultShowTooltip,n=On(a,Zu),i=0,l=0;return s.data&&s.data.length!==0&&(l=s.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(i=n.props.startIndex),n.props.endIndex>=0&&(l=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!r}},ACe=function(s){return!s||!s.length?!1:s.some(function(a){var r=Ul(a&&a.type);return r&&r.indexOf("Bar")>=0})},FM=function(s){return s==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:s==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:s==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ECe=function(s,a){var r=s.props,n=s.graphicalItems,i=s.xAxisMap,l=i===void 0?{}:i,o=s.yAxisMap,d=o===void 0?{}:o,u=r.width,h=r.height,f=r.children,x=r.margin||{},p=On(f,Zu),v=On(f,Iu),b=Object.keys(d).reduce(function(_,E){var A=d[E],D=A.orientation;return!A.mirror&&!A.hide?Ze(Ze({},_),{},qt({},D,_[D]+A.width)):_},{left:x.left||0,right:x.right||0}),y=Object.keys(l).reduce(function(_,E){var A=l[E],D=A.orientation;return!A.mirror&&!A.hide?Ze(Ze({},_),{},qt({},D,fi(_,"".concat(D))+A.height)):_},{top:x.top||0,bottom:x.bottom||0}),j=Ze(Ze({},y),b),w=j.bottom;p&&(j.bottom+=p.props.height||Zu.defaultProps.height),v&&a&&(j=z1e(j,n,r,a));var S=u-j.left-j.right,O=h-j.top-j.bottom;return Ze(Ze({brushBottom:w},j),{},{width:Math.max(S,0),height:Math.max(O,0)})},CCe=function(s,a){if(a==="xAxis")return s[a].width;if(a==="yAxis")return s[a].height},cB=function(s){var a=s.chartName,r=s.GraphicalChild,n=s.defaultTooltipEventType,i=n===void 0?"axis":n,l=s.validateTooltipEventTypes,o=l===void 0?["axis"]:l,d=s.axisComponents,u=s.legendContent,h=s.formatAxisMap,f=s.defaultProps,x=function(j,w){var S=w.graphicalItems,O=w.stackGroups,_=w.offset,E=w.updateId,A=w.dataStartIndex,D=w.dataEndIndex,L=j.barSize,B=j.layout,I=j.barGap,T=j.barCategoryGap,z=j.maxBarSize,k=FM(B),F=k.numericAxisName,P=k.cateAxisName,G=ACe(S),Y=[];return S.forEach(function(W,ee){var H=Pb(j.data,{graphicalItems:[W],dataStartIndex:A,dataEndIndex:D}),M=W.type.defaultProps!==void 0?Ze(Ze({},W.type.defaultProps),W.props):W.props,X=M.dataKey,K=M.maxBarSize,Q=M["".concat(F,"Id")],se=M["".concat(P,"Id")],V={},te=d.reduce(function(Ie,_e){var Ge=w["".concat(_e.axisType,"Map")],Ae=M["".concat(_e.axisType,"Id")];Ge&&Ge[Ae]||_e.axisType==="zAxis"||ud();var Ue=Ge[Ae];return Ze(Ze({},Ie),{},qt(qt({},_e.axisType,Ue),"".concat(_e.axisType,"Ticks"),Rl(Ue)))},V),Z=te[P],ue=te["".concat(P,"Ticks")],re=O&&O[Q]&&O[Q].hasStack&&eNe(W,O[Q].stackGroups),J=Ul(W.type).indexOf("Bar")>=0,Ne=jg(Z,ue),q=[],ce=G&&F1e({barSize:L,stackGroups:O,totalSize:CCe(te,P)});if(J){var fe,ie,ne=Ss(K)?z:K,pe=(fe=(ie=jg(Z,ue,!0))!==null&&ie!==void 0?ie:ne)!==null&&fe!==void 0?fe:0;q=U1e({barGap:I,barCategoryGap:T,bandSize:pe!==Ne?pe:Ne,sizeList:ce[se],maxBarSize:ne}),pe!==Ne&&(q=q.map(function(Ie){return Ze(Ze({},Ie),{},{position:Ze(Ze({},Ie.position),{},{offset:Ie.position.offset-pe/2})})}))}var Ee=W&&W.type&&W.type.getComposedData;Ee&&Y.push({props:Ze(Ze({},Ee(Ze(Ze({},te),{},{displayedData:H,props:j,dataKey:X,item:W,bandSize:Ne,barPosition:q,offset:_,stackedData:re,layout:B,dataStartIndex:A,dataEndIndex:D}))),{},qt(qt(qt({key:W.key||"item-".concat(ee)},F,te[F]),P,te[P]),"animationId",E)),childIndex:Bfe(W,j.children),item:W})}),Y},p=function(j,w){var S=j.props,O=j.dataStartIndex,_=j.dataEndIndex,E=j.updateId;if(!lR({props:S}))return null;var A=S.children,D=S.layout,L=S.stackOffset,B=S.data,I=S.reverseStackOrder,T=FM(D),z=T.numericAxisName,k=T.cateAxisName,F=Di(A,r),P=Y1e(B,F,"".concat(z,"Id"),"".concat(k,"Id"),L,I),G=d.reduce(function(M,X){var K="".concat(X.axisType,"Map");return Ze(Ze({},M),{},qt({},K,wCe(S,Ze(Ze({},X),{},{graphicalItems:F,stackGroups:X.axisType===z&&P,dataStartIndex:O,dataEndIndex:_}))))},{}),Y=ECe(Ze(Ze({},G),{},{props:S,graphicalItems:F}),w==null?void 0:w.legendBBox);Object.keys(G).forEach(function(M){G[M]=h(S,G[M],Y,M.replace("Map",""),a)});var W=G["".concat(k,"Map")],ee=SCe(W),H=x(S,Ze(Ze({},G),{},{dataStartIndex:O,dataEndIndex:_,updateId:E,graphicalItems:F,stackGroups:P,offset:Y}));return Ze(Ze({formattedGraphicalItems:H,graphicalItems:F,offset:Y,stackGroups:P},ee),G)},v=(function(y){function j(w){var S,O,_;return iCe(this,j),_=cCe(this,j,[w]),qt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),qt(_,"accessibilityManager",new GEe),qt(_,"handleLegendBBoxUpdate",function(E){if(E){var A=_.state,D=A.dataStartIndex,L=A.dataEndIndex,B=A.updateId;_.setState(Ze({legendBBox:E},p({props:_.props,dataStartIndex:D,dataEndIndex:L,updateId:B},Ze(Ze({},_.state),{},{legendBBox:E}))))}}),qt(_,"handleReceiveSyncEvent",function(E,A,D){if(_.props.syncId===E){if(D===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(A)}}),qt(_,"handleBrushChange",function(E){var A=E.startIndex,D=E.endIndex;if(A!==_.state.dataStartIndex||D!==_.state.dataEndIndex){var L=_.state.updateId;_.setState(function(){return Ze({dataStartIndex:A,dataEndIndex:D},p({props:_.props,dataStartIndex:A,dataEndIndex:D,updateId:L},_.state))}),_.triggerSyncEvent({dataStartIndex:A,dataEndIndex:D})}}),qt(_,"handleMouseEnter",function(E){var A=_.getMouseInfo(E);if(A){var D=Ze(Ze({},A),{},{isTooltipActive:!0});_.setState(D),_.triggerSyncEvent(D);var L=_.props.onMouseEnter;cs(L)&&L(D,E)}}),qt(_,"triggeredAfterMouseMove",function(E){var A=_.getMouseInfo(E),D=A?Ze(Ze({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(D),_.triggerSyncEvent(D);var L=_.props.onMouseMove;cs(L)&&L(D,E)}),qt(_,"handleItemMouseEnter",function(E){_.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),qt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),qt(_,"handleMouseMove",function(E){E.persist(),_.throttleTriggeredAfterMouseMove(E)}),qt(_,"handleMouseLeave",function(E){_.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var D=_.props.onMouseLeave;cs(D)&&D(A,E)}),qt(_,"handleOuterEvent",function(E){var A=zfe(E),D=fi(_.props,"".concat(A));if(A&&cs(D)){var L,B;/.*touch.*/i.test(A)?B=_.getMouseInfo(E.changedTouches[0]):B=_.getMouseInfo(E),D((L=B)!==null&&L!==void 0?L:{},E)}}),qt(_,"handleClick",function(E){var A=_.getMouseInfo(E);if(A){var D=Ze(Ze({},A),{},{isTooltipActive:!0});_.setState(D),_.triggerSyncEvent(D);var L=_.props.onClick;cs(L)&&L(D,E)}}),qt(_,"handleMouseDown",function(E){var A=_.props.onMouseDown;if(cs(A)){var D=_.getMouseInfo(E);A(D,E)}}),qt(_,"handleMouseUp",function(E){var A=_.props.onMouseUp;if(cs(A)){var D=_.getMouseInfo(E);A(D,E)}}),qt(_,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),qt(_,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&_.handleMouseDown(E.changedTouches[0])}),qt(_,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&_.handleMouseUp(E.changedTouches[0])}),qt(_,"handleDoubleClick",function(E){var A=_.props.onDoubleClick;if(cs(A)){var D=_.getMouseInfo(E);A(D,E)}}),qt(_,"handleContextMenu",function(E){var A=_.props.onContextMenu;if(cs(A)){var D=_.getMouseInfo(E);A(D,E)}}),qt(_,"triggerSyncEvent",function(E){_.props.syncId!==void 0&&jS.emit(wS,_.props.syncId,E,_.eventEmitterSymbol)}),qt(_,"applySyncEvent",function(E){var A=_.props,D=A.layout,L=A.syncMethod,B=_.state.updateId,I=E.dataStartIndex,T=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)_.setState(Ze({dataStartIndex:I,dataEndIndex:T},p({props:_.props,dataStartIndex:I,dataEndIndex:T,updateId:B},_.state)));else if(E.activeTooltipIndex!==void 0){var z=E.chartX,k=E.chartY,F=E.activeTooltipIndex,P=_.state,G=P.offset,Y=P.tooltipTicks;if(!G)return;if(typeof L=="function")F=L(Y,E);else if(L==="value"){F=-1;for(var W=0;W<Y.length;W++)if(Y[W].value===E.activeLabel){F=W;break}}var ee=Ze(Ze({},G),{},{x:G.left,y:G.top}),H=Math.min(z,ee.x+ee.width),M=Math.min(k,ee.y+ee.height),X=Y[F]&&Y[F].value,K=pA(_.state,_.props.data,F),Q=Y[F]?{x:D==="horizontal"?Y[F].coordinate:H,y:D==="horizontal"?M:Y[F].coordinate}:lB;_.setState(Ze(Ze({},E),{},{activeLabel:X,activeCoordinate:Q,activePayload:K,activeTooltipIndex:F}))}else _.setState(E)}),qt(_,"renderCursor",function(E){var A,D=_.state,L=D.isTooltipActive,B=D.activeCoordinate,I=D.activePayload,T=D.offset,z=D.activeTooltipIndex,k=D.tooltipAxisBandSize,F=_.getTooltipEventType(),P=(A=E.props.active)!==null&&A!==void 0?A:L,G=_.props.layout,Y=E.key||"_recharts-cursor";return ke.createElement(ZEe,{key:Y,activeCoordinate:B,activePayload:I,activeTooltipIndex:z,chartName:a,element:E,isActive:P,layout:G,offset:T,tooltipAxisBandSize:k,tooltipEventType:F})}),qt(_,"renderPolarAxis",function(E,A,D){var L=fi(E,"type.axisType"),B=fi(_.state,"".concat(L,"Map")),I=E.type.defaultProps,T=I!==void 0?Ze(Ze({},I),E.props):E.props,z=B&&B[T["".concat(L,"Id")]];return C.cloneElement(E,Ze(Ze({},z),{},{className:Is(L,z.className),key:E.key||"".concat(A,"-").concat(D),ticks:Rl(z,!0)}))}),qt(_,"renderPolarGrid",function(E){var A=E.props,D=A.radialLines,L=A.polarAngles,B=A.polarRadius,I=_.state,T=I.radiusAxisMap,z=I.angleAxisMap,k=ko(T),F=ko(z),P=F.cx,G=F.cy,Y=F.innerRadius,W=F.outerRadius;return C.cloneElement(E,{polarAngles:Array.isArray(L)?L:Rl(F,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(B)?B:Rl(k,!0).map(function(ee){return ee.coordinate}),cx:P,cy:G,innerRadius:Y,outerRadius:W,key:E.key||"polar-grid",radialLines:D})}),qt(_,"renderLegend",function(){var E=_.state.formattedGraphicalItems,A=_.props,D=A.children,L=A.width,B=A.height,I=_.props.margin||{},T=L-(I.left||0)-(I.right||0),z=ZU({children:D,formattedGraphicalItems:E,legendWidth:T,legendContent:u});if(!z)return null;var k=z.item,F=PM(z,eCe);return C.cloneElement(k,Ze(Ze({},F),{},{chartWidth:L,chartHeight:B,margin:I,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),qt(_,"renderTooltip",function(){var E,A=_.props,D=A.children,L=A.accessibilityLayer,B=On(D,Ci);if(!B)return null;var I=_.state,T=I.isTooltipActive,z=I.activeCoordinate,k=I.activePayload,F=I.activeLabel,P=I.offset,G=(E=B.props.active)!==null&&E!==void 0?E:T;return C.cloneElement(B,{viewBox:Ze(Ze({},P),{},{x:P.left,y:P.top}),active:G,label:F,payload:G?k:[],coordinate:z,accessibilityLayer:L})}),qt(_,"renderBrush",function(E){var A=_.props,D=A.margin,L=A.data,B=_.state,I=B.offset,T=B.dataStartIndex,z=B.dataEndIndex,k=B.updateId;return C.cloneElement(E,{key:E.key||"_recharts-brush",onChange:dp(_.handleBrushChange,E.props.onChange),data:L,x:dt(E.props.x)?E.props.x:I.left,y:dt(E.props.y)?E.props.y:I.top+I.height+I.brushBottom-(D.bottom||0),width:dt(E.props.width)?E.props.width:I.width,startIndex:T,endIndex:z,updateId:"brush-".concat(k)})}),qt(_,"renderReferenceElement",function(E,A,D){if(!E)return null;var L=_,B=L.clipPathId,I=_.state,T=I.xAxisMap,z=I.yAxisMap,k=I.offset,F=E.type.defaultProps||{},P=E.props,G=P.xAxisId,Y=G===void 0?F.xAxisId:G,W=P.yAxisId,ee=W===void 0?F.yAxisId:W;return C.cloneElement(E,{key:E.key||"".concat(A,"-").concat(D),xAxis:T[Y],yAxis:z[ee],viewBox:{x:k.left,y:k.top,width:k.width,height:k.height},clipPathId:B})}),qt(_,"renderActivePoints",function(E){var A=E.item,D=E.activePoint,L=E.basePoint,B=E.childIndex,I=E.isRange,T=[],z=A.props.key,k=A.item.type.defaultProps!==void 0?Ze(Ze({},A.item.type.defaultProps),A.item.props):A.item.props,F=k.activeDot,P=k.dataKey,G=Ze(Ze({index:B,dataKey:P,cx:D.x,cy:D.y,r:4,fill:oC(A.item),strokeWidth:2,stroke:"#fff",payload:D.payload,value:D.value},ys(F,!1)),Jp(F));return T.push(j.renderActiveDot(F,G,"".concat(z,"-activePoint-").concat(B))),L?T.push(j.renderActiveDot(F,Ze(Ze({},G),{},{cx:L.x,cy:L.y}),"".concat(z,"-basePoint-").concat(B))):I&&T.push(null),T}),qt(_,"renderGraphicChild",function(E,A,D){var L=_.filterFormatItem(E,A,D);if(!L)return null;var B=_.getTooltipEventType(),I=_.state,T=I.isTooltipActive,z=I.tooltipAxis,k=I.activeTooltipIndex,F=I.activeLabel,P=_.props.children,G=On(P,Ci),Y=L.props,W=Y.points,ee=Y.isRange,H=Y.baseLine,M=L.item.type.defaultProps!==void 0?Ze(Ze({},L.item.type.defaultProps),L.item.props):L.item.props,X=M.activeDot,K=M.hide,Q=M.activeBar,se=M.activeShape,V=!!(!K&&T&&G&&(X||Q||se)),te={};B!=="axis"&&G&&G.props.trigger==="click"?te={onClick:dp(_.handleItemMouseEnter,E.props.onClick)}:B!=="axis"&&(te={onMouseLeave:dp(_.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:dp(_.handleItemMouseEnter,E.props.onMouseEnter)});var Z=C.cloneElement(E,Ze(Ze({},L.props),te));function ue(_e){return typeof z.dataKey=="function"?z.dataKey(_e.payload):null}if(V)if(k>=0){var re,J;if(z.dataKey&&!z.allowDuplicatedCategory){var Ne=typeof z.dataKey=="function"?ue:"payload.".concat(z.dataKey.toString());re=Kp(W,Ne,F),J=ee&&H&&Kp(H,Ne,F)}else re=W==null?void 0:W[k],J=ee&&H&&H[k];if(se||Q){var q=E.props.activeIndex!==void 0?E.props.activeIndex:k;return[C.cloneElement(E,Ze(Ze(Ze({},L.props),te),{},{activeIndex:q})),null,null]}if(!Ss(re))return[Z].concat(c0(_.renderActivePoints({item:L,activePoint:re,basePoint:J,childIndex:k,isRange:ee})))}else{var ce,fe=(ce=_.getItemByXY(_.state.activeCoordinate))!==null&&ce!==void 0?ce:{graphicalItem:Z},ie=fe.graphicalItem,ne=ie.item,pe=ne===void 0?E:ne,Ee=ie.childIndex,Ie=Ze(Ze(Ze({},L.props),te),{},{activeIndex:Ee});return[C.cloneElement(pe,Ie),null,null]}return ee?[Z,null,null]:[Z,null]}),qt(_,"renderCustomized",function(E,A,D){return C.cloneElement(E,Ze(Ze({key:"recharts-customized-".concat(D)},_.props),_.state))}),qt(_,"renderMap",{CartesianGrid:{handler:xp,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:xp},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:xp},YAxis:{handler:xp},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((S=w.id)!==null&&S!==void 0?S:bh("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=X7(_.triggeredAfterMouseMove,(O=w.throttleDelay)!==null&&O!==void 0?O:1e3/60),_.state={},_}return mCe(j,y),oCe(j,[{key:"componentDidMount",value:function(){var S,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,O=S.children,_=S.data,E=S.height,A=S.layout,D=On(O,Ci);if(D){var L=D.props.defaultIndex;if(!(typeof L!="number"||L<0||L>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[L]&&this.state.tooltipTicks[L].value,I=pA(this.state,_,L,B),T=this.state.tooltipTicks[L].coordinate,z=(this.state.offset.top+E)/2,k=A==="horizontal",F=k?{x:T,y:z}:{y:T,x:z},P=this.state.formattedGraphicalItems.find(function(Y){var W=Y.item;return W.type.name==="Scatter"});P&&(F=Ze(Ze({},F),P.props.points[L].tooltipPosition),I=P.props.points[L].tooltipPayload);var G={activeTooltipIndex:L,isTooltipActive:!0,activeLabel:B,activePayload:I,activeCoordinate:F};this.setState(G),this.renderCursor(D),this.accessibilityManager.setIndex(L)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var _,E;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(S){a2([On(S.children,Ci)],[On(this.props.children,Ci)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=On(this.props.children,Ci);if(S&&typeof S.props.shared=="boolean"){var O=S.props.shared?"axis":"item";return o.indexOf(O)>=0?O:i}return i}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var O=this.container,_=O.getBoundingClientRect(),E=Cge(_),A={chartX:Math.round(S.pageX-E.left),chartY:Math.round(S.pageY-E.top)},D=_.width/O.offsetWidth||1,L=this.inRange(A.chartX,A.chartY,D);if(!L)return null;var B=this.state,I=B.xAxisMap,T=B.yAxisMap,z=this.getTooltipEventType(),k=MM(this.state,this.props.data,this.props.layout,L);if(z!=="axis"&&I&&T){var F=ko(I).scale,P=ko(T).scale,G=F&&F.invert?F.invert(A.chartX):null,Y=P&&P.invert?P.invert(A.chartY):null;return Ze(Ze({},A),{},{xValue:G,yValue:Y},k)}return k?Ze(Ze({},A),k):null}},{key:"inRange",value:function(S,O){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,A=S/_,D=O/_;if(E==="horizontal"||E==="vertical"){var L=this.state.offset,B=A>=L.left&&A<=L.left+L.width&&D>=L.top&&D<=L.top+L.height;return B?{x:A,y:D}:null}var I=this.state,T=I.angleAxisMap,z=I.radiusAxisMap;if(T&&z){var k=ko(T);return YD({x:A,y:D},k)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,O=this.getTooltipEventType(),_=On(S,Ci),E={};_&&O==="axis"&&(_.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=Jp(this.props,this.handleOuterEvent);return Ze(Ze({},A),E)}},{key:"addListener",value:function(){jS.on(wS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){jS.removeListener(wS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,O,_){for(var E=this.state.formattedGraphicalItems,A=0,D=E.length;A<D;A++){var L=E[A];if(L.item===S||L.props.key===S.key||O===Ul(L.item.type)&&_===L.childIndex)return L}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,O=this.state.offset,_=O.left,E=O.top,A=O.height,D=O.width;return ke.createElement("defs",null,ke.createElement("clipPath",{id:S},ke.createElement("rect",{x:_,y:E,height:A,width:D})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(O,_){var E=RM(_,2),A=E[0],D=E[1];return Ze(Ze({},O),{},qt({},A,D.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(O,_){var E=RM(_,2),A=E[0],D=E[1];return Ze(Ze({},O),{},qt({},A,D.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[S])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(S){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[S])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(S){var O=this.state,_=O.formattedGraphicalItems,E=O.activeItem;if(_&&_.length)for(var A=0,D=_.length;A<D;A++){var L=_[A],B=L.props,I=L.item,T=I.type.defaultProps!==void 0?Ze(Ze({},I.type.defaultProps),I.props):I.props,z=Ul(I.type);if(z==="Bar"){var k=(B.data||[]).find(function(Y){return Vwe(S,Y)});if(k)return{graphicalItem:L,payload:k}}else if(z==="RadialBar"){var F=(B.data||[]).find(function(Y){return YD(S,Y)});if(F)return{graphicalItem:L,payload:F}}else if(Cb(L,E)||Tb(L,E)||Zf(L,E)){var P=DSe({graphicalItem:L,activeTooltipItem:E,itemData:T.data}),G=T.activeIndex===void 0?P:T.activeIndex;return{graphicalItem:Ze(Ze({},L),{},{childIndex:G}),payload:Zf(L,E)?T.data[P]:L.props.data[P]}}}return null}},{key:"render",value:function(){var S=this;if(!lR(this))return null;var O=this.props,_=O.children,E=O.className,A=O.width,D=O.height,L=O.style,B=O.compact,I=O.title,T=O.desc,z=PM(O,tCe),k=ys(z,!1);if(B)return ke.createElement(xM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ke.createElement(n2,wu({},k,{width:A,height:D,title:I,desc:T}),this.renderClipPath(),cR(_,this.renderMap)));if(this.props.accessibilityLayer){var F,P;k.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,k.role=(P=this.props.role)!==null&&P!==void 0?P:"application",k.onKeyDown=function(Y){S.accessibilityManager.keyboardEvent(Y)},k.onFocus=function(){S.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return ke.createElement(xM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ke.createElement("div",wu({className:Is("recharts-wrapper",E),style:Ze({position:"relative",cursor:"default",width:A,height:D},L)},G,{ref:function(W){S.container=W}}),ke.createElement(n2,wu({},k,{width:A,height:D,title:I,desc:T,style:bCe}),this.renderClipPath(),cR(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(C.Component);qt(v,"displayName",a),qt(v,"defaultProps",Ze({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),qt(v,"getDerivedStateFromProps",function(y,j){var w=y.dataKey,S=y.data,O=y.children,_=y.width,E=y.height,A=y.layout,D=y.stackOffset,L=y.margin,B=j.dataStartIndex,I=j.dataEndIndex;if(j.updateId===void 0){var T=LM(y);return Ze(Ze(Ze({},T),{},{updateId:0},p(Ze(Ze({props:y},T),{},{updateId:0}),j)),{},{prevDataKey:w,prevData:S,prevWidth:_,prevHeight:E,prevLayout:A,prevStackOffset:D,prevMargin:L,prevChildren:O})}if(w!==j.prevDataKey||S!==j.prevData||_!==j.prevWidth||E!==j.prevHeight||A!==j.prevLayout||D!==j.prevStackOffset||!Ou(L,j.prevMargin)){var z=LM(y),k={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},F=Ze(Ze({},MM(j,S,A)),{},{updateId:j.updateId+1}),P=Ze(Ze(Ze({},z),k),F);return Ze(Ze(Ze({},P),p(Ze({props:y},P),j)),{},{prevDataKey:w,prevData:S,prevWidth:_,prevHeight:E,prevLayout:A,prevStackOffset:D,prevMargin:L,prevChildren:O})}if(!a2(O,j.prevChildren)){var G,Y,W,ee,H=On(O,Zu),M=H&&(G=(Y=H.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&G!==void 0?G:B,X=H&&(W=(ee=H.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&W!==void 0?W:I,K=M!==B||X!==I,Q=!Ss(S),se=Q&&!K?j.updateId:j.updateId+1;return Ze(Ze({updateId:se},p(Ze(Ze({props:y},j),{},{updateId:se,dataStartIndex:M,dataEndIndex:X}),j)),{},{prevChildren:O,dataStartIndex:M,dataEndIndex:X})}return null}),qt(v,"renderActiveDot",function(y,j,w){var S;return C.isValidElement(y)?S=C.cloneElement(y,j):cs(y)?S=y(j):S=ke.createElement(dC,j),ke.createElement(_a,{className:"recharts-active-dot",key:w},S)});var b=C.forwardRef(function(j,w){return ke.createElement(v,wu({},j,{ref:w}))});return b.displayName=v.displayName,b},TCe=cB({chartName:"BarChart",GraphicalChild:wd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Sh},{axisType:"yAxis",AxisComp:Ah}],formatAxisMap:Az}),_Ce=cB({chartName:"AreaChart",GraphicalChild:cc,axisComponents:[{axisType:"xAxis",AxisComp:Sh},{axisType:"yAxis",AxisComp:Ah}],formatAxisMap:Az});const _s={DASHBOARD:"adminDashboard.views.dashboard",CUSTOMERS:"adminDashboard.views.customers",PRODUCTS:"adminDashboard.views.products",SETTINGS:"adminDashboard.views.settings",QUOTES:"adminDashboard.views.quotes",MISSING:"adminDashboard.views.missing",ORDER_SHORTAGES:"adminDashboard.views.orderShortages",IMPORT_REQUESTS:"adminDashboard.views.importRequests",ACCOUNT_REQUESTS:"adminDashboard.views.accountRequests",PARTNER_REQUESTS:"adminDashboard.views.partnerRequests",ACTIVITY_LOGS:"adminDashboard.views.activityLogs",FEEDBACK_CENTER:"adminDashboard.views.feedbackCenter",MESSAGING_CENTER:"adminDashboard.views.messagingCenter",ORDERS_MANAGER:"adminDashboard.views.ordersManager",ABANDONED_CARTS:"adminDashboard.views.abandonedCarts",ADMIN_USERS:"adminDashboard.views.adminUsers",MARKETING:"adminDashboard.views.marketing",PRICING:"adminDashboard.views.pricing",TRADER_TOOLS:"adminDashboard.views.traderTools",SUPPLIER_MARKETPLACE:"adminDashboard.views.supplierMarketplace",MARKETERS:"adminDashboard.views.marketers",INSTALLMENTS:"adminDashboard.views.installments",ADVERTISING:"adminDashboard.views.advertising",TEAM_SETTINGS:"adminDashboard.views.teamSettings",CUSTOMER_PORTAL:"adminDashboard.views.customerPortal",AI_SETTINGS:"adminDashboard.views.aiSettings",AI_TRAINING:"adminDashboard.views.aiTraining",AI_COMMAND_CENTER:"adminDashboard.views.aiCommandCenter",ALTERNATIVES:"adminDashboard.views.alternatives",PRODUCT_IMAGES:"adminDashboard.views.productImages",NOTIFICATIONS:"adminDashboard.views.notifications",INTERNATIONAL_PRICING:"adminDashboard.views.internationalPricing",PERMISSION_CENTER:"adminDashboard.views.permissionCenter",REPORTS_CENTER:"adminDashboard.views.reportsCenter"},pp={navy:"#0B1B3A",gold:"#C8A04F"},kCe=({onLogout:e})=>{const{t:s,i18n:a}=Kt(),[r,n]=C.useState(()=>{const ce=localStorage.getItem("admin_dashboard_view");return ce&&Object.keys(_s).includes(ce)?ce:"DASHBOARD"}),i=a.dir()==="rtl";C.useEffect(()=>{localStorage.setItem("admin_dashboard_view",r)},[r]);const{badges:l,markOrdersAsSeen:o,markAccountsAsSeen:d,markQuotesAsSeen:u,markImportsAsSeen:h,markMissingAsSeen:f,markOrderShortagesAsSeen:x}=Ume(),{canAccess:p,adminUser:v,role:b}=p0(),[y,j]=C.useState([]),[w,S]=C.useState([]),[O,_]=C.useState([]),[E,A]=C.useState([]),[D,L]=C.useState([]),[B,I]=C.useState([]),[T,z]=C.useState([]),[k,F]=C.useState([]),[P,G]=C.useState([]),[Y,W]=C.useState("CONNECTED"),[ee,H]=C.useState(0),[M,X]=C.useState(!1),[K,Q]=C.useState(1),{addToast:se}=It();C.useEffect(()=>{V();const ce=setInterval(te,3e4);return()=>clearInterval(ce)},[]);const V=async()=>{try{const[ce,fe,ie,ne,pe,Ee,Ie,_e,Ge]=await Promise.all([he.getAllOrders(),new Promise(Ae=>Ae(JSON.parse(localStorage.getItem("b2b_users_sini_v2")||"[]"))),he.searchProducts(""),he.getAllQuoteRequests(),he.getImportRequests(),he.getAccountOpeningRequests(),he.getActivityLogs(),he.getMissingProductRequests(),he.getAllNotifications()]);j(ce),S(fe),_(ie),A(ne),L(pe),I(Ee),z(Ie),F(_e),G(Ge),te()}catch(ce){console.error("Failed to load admin data",ce),W("DISCONNECTED")}},te=async()=>{X(!0);try{const ce=await he.checkHealth();H(ce.latency),ce.latency>500?W("SLOW"):W("CONNECTED")}catch{W("DISCONNECTED")}finally{X(!1)}},Z=C.useMemo(()=>{const ce=y.filter(Qe=>Qe.status!==xt.CANCELLED&&Qe.status!==xt.REJECTED).reduce((Qe,_t)=>Qe+_t.totalAmount,0),fe=y.filter(Qe=>new Date(Qe.date).toDateString()===new Date().toDateString()).filter(Qe=>Qe.status!==xt.CANCELLED&&Qe.status!==xt.REJECTED).reduce((Qe,_t)=>Qe+_t.totalAmount,0),ie=y.filter(Qe=>Qe.status===xt.PENDING).length,ne=y.filter(Qe=>Qe.status===xt.APPROVED).length,pe=y.filter(Qe=>Qe.status===xt.SHIPPED).length,Ee=y.filter(Qe=>Qe.status===xt.CANCELLED).length,Ie=O.filter(Qe=>Qe.stock<=0).length,_e=O.filter(Qe=>Qe.price===0).length,Ge=w.filter(Qe=>Qe.role==="CUSTOMER_OWNER"&&Qe.isActive).length,Ae=B.filter(Qe=>Qe.status==="NEW").length,Ue=E.filter(Qe=>Qe.status==="NEW"||Qe.status==="UNDER_REVIEW").length;return{totalRevenue:ce,todayRevenue:fe,pendingOrders:ie,approvedOrders:ne,shippedOrders:pe,cancelledOrders:Ee,totalOrders:y.length,totalProducts:O.length,outOfStock:Ie,needsPriceUpdate:_e,activeBusinesses:Ge,pendingAccounts:Ae,totalUsers:w.length,pendingQuotes:Ue}},[y,O,w,B,E]),ue=C.useMemo(()=>({dailyStats:[...Array(30)].map((ie,ne)=>{const pe=new Date;return pe.setDate(pe.getDate()-(29-ne)),pe.toISOString().split("T")[0]}).map(ie=>{const ne=y.filter(pe=>pe.date.startsWith(ie));return{date:ie.slice(5),orders:ne.length,revenue:ne.filter(pe=>pe.status!==xt.CANCELLED).reduce((pe,Ee)=>pe+Ee.totalAmount,0)}})}),[y]),re=C.useMemo(()=>{const ce={};k.filter(pe=>pe.source==="SEARCH").forEach(pe=>{const Ee=pe.query.trim().toLowerCase();ce[Ee]=(ce[Ee]||0)+1});const fe=Object.entries(ce).sort((pe,Ee)=>Ee[1]-pe[1]).slice(0,5),ie={};y.forEach(pe=>{pe.status!==xt.CANCELLED&&(ie[pe.createdByName||pe.userId]=(ie[pe.createdByName||pe.userId]||0)+pe.totalAmount)});const ne=Object.entries(ie).sort((pe,Ee)=>Ee[1]-pe[1]).slice(0,5);return{topMissing:fe,topCustomers:ne}},[k,y]),J=C.useMemo(()=>{const ce=new Date().toISOString().split("T")[0],fe=T.filter(ie=>ie.createdAt.startsWith(ce));return{logins:fe.filter(ie=>ie.eventType==="LOGIN").length,orders:fe.filter(ie=>ie.eventType==="ORDER_CREATED").length,quotes:fe.filter(ie=>ie.eventType==="QUOTE_REQUEST").length,searches:fe.filter(ie=>ie.eventType==="SEARCH_PERFORMED").length}},[T]),Ne=()=>t.jsxs("div",{className:`flex items-center gap-3 px-4 py-2 rounded-full border text-sm font-bold shadow-sm backdrop-blur-md transition-all ${Y==="CONNECTED"?"bg-emerald-50/90 border-emerald-200 text-emerald-700":Y==="SLOW"?"bg-amber-50/90 border-amber-200 text-amber-700":"bg-red-50/90 border-red-200 text-red-700"}`,children:[t.jsx("div",{className:`w-2.5 h-2.5 rounded-full animate-pulse ${Y==="CONNECTED"?"bg-emerald-500":Y==="SLOW"?"bg-amber-500":"bg-red-500"}`}),t.jsx("span",{className:"hidden md:inline",children:s(Y==="CONNECTED"?"adminDashboard.connected":Y==="SLOW"?"adminDashboard.slowConnection":"adminDashboard.disconnected")}),t.jsxs("span",{className:"font-mono text-xs opacity-70",children:["(",ee,"ms)"]}),t.jsx("button",{onClick:te,disabled:M,className:"p-1 hover:bg-black/5 rounded-full transition-colors",children:t.jsx(Gt,{size:14,className:M?"animate-spin":""})})]}),q=({title:ce,value:fe,subValue:ie,icon:ne,colorClass:pe,delay:Ee})=>t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all duration-300 group animate-slide-up",style:{animationDelay:Ee},children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:ce}),t.jsx("h3",{className:"text-2xl font-black text-slate-800 group-hover:text-brand-600 transition-colors",children:fe})]}),t.jsx("div",{className:`p-3 rounded-xl ${pe} bg-opacity-10 group-hover:scale-110 transition-transform`,children:ke.cloneElement(ne,{size:20,className:pe.replace("bg-","text-")})})]}),ie&&t.jsx("div",{className:"pt-3 border-t border-slate-50",children:t.jsx("p",{className:"text-xs font-bold text-slate-400",children:ie})})]});return t.jsxs("div",{className:"flex h-screen bg-slate-50 font-sans text-slate-900 overflow-hidden",dir:i?"rtl":"ltr",children:[t.jsxs("aside",{className:"w-72 bg-[#0B1B3A] text-white flex flex-col shadow-2xl z-20 flex-shrink-0",children:[t.jsxs("div",{className:"p-6 border-b border-slate-700/50 bg-[#08142b]",children:[t.jsxs("h1",{className:"text-xl font-black uppercase tracking-wider text-[#C8A04F] font-display flex items-center gap-2",children:[t.jsx(Fn,{size:24})," SINI ADMIN"]}),t.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-bold tracking-widest uppercase",children:"Wholesale Control Center"})]}),t.jsxs("nav",{className:"flex-1 p-4 space-y-1.5 overflow-y-auto custom-scrollbar",children:[t.jsx("p",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:s("adminDashboard.mainSection")}),p("dashboard")&&t.jsx(ks,{icon:t.jsx(iE,{size:20}),label:s("adminDashboard.dashboard"),active:r==="DASHBOARD",onClick:()=>n("DASHBOARD")}),p("activity_log")&&t.jsx(ks,{icon:t.jsx(Wr,{size:20}),label:s("adminDashboard.activityLog"),active:r==="ACTIVITY_LOGS",onClick:()=>n("ACTIVITY_LOGS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(ja,{size:20}),label:s("adminDashboard.feedbackCenter"," "),active:r==="FEEDBACK_CENTER",onClick:()=>n("FEEDBACK_CENTER")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(Nr,{size:20}),label:s("adminDashboard.messagingCenter"," "),active:r==="MESSAGING_CENTER",onClick:()=>n("MESSAGING_CENTER")}),t.jsx("p",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mt-4",children:s("adminDashboard.ordersCustomersSection")}),p("orders")&&t.jsx(ks,{icon:t.jsx(Bu,{size:20}),label:s("adminDashboard.customerOrders"),active:r==="ORDERS_MANAGER",onClick:()=>{n("ORDERS_MANAGER"),o()},badge:l.orders}),p("orders")&&t.jsx(ks,{icon:t.jsx(qa,{size:20}),label:s("adminDashboard.abandonedCarts"," "),active:r==="ABANDONED_CARTS",onClick:()=>n("ABANDONED_CARTS")}),p("account_requests")&&t.jsx(ks,{icon:t.jsx(al,{size:20}),label:s("adminDashboard.accountRequests"),active:r==="ACCOUNT_REQUESTS",onClick:()=>{n("ACCOUNT_REQUESTS"),d()},badge:l.accounts}),p("account_requests")&&t.jsx(ks,{icon:t.jsx(ld,{size:20}),label:s("adminDashboard.partnerRequests"," "),active:r==="PARTNER_REQUESTS",onClick:()=>n("PARTNER_REQUESTS")}),p("customers")&&t.jsx(ks,{icon:t.jsx(Wt,{size:20}),label:s("adminDashboard.customersCRM"),active:r==="CUSTOMERS",onClick:()=>n("CUSTOMERS")}),p("quotes")&&t.jsx(ks,{icon:t.jsx(zt,{size:20}),label:s("adminDashboard.quoteRequests"),active:r==="QUOTES",onClick:()=>{n("QUOTES"),u()},badge:l.quotes}),p("imports")&&t.jsx(ks,{icon:t.jsx(Ea,{size:20}),label:s("adminDashboard.importRequests"),active:r==="IMPORT_REQUESTS",onClick:()=>{n("IMPORT_REQUESTS"),h()},badge:l.imports}),p("missing")&&t.jsx(ks,{icon:t.jsx(e5,{size:20}),label:s("adminDashboard.missingParts"),active:r==="MISSING",onClick:()=>{n("MISSING"),f()},badge:l.missing}),p("orders")&&t.jsx(ks,{icon:t.jsx(Yt,{size:20}),label:s("adminDashboard.orderShortages"," "),active:r==="ORDER_SHORTAGES",onClick:()=>{n("ORDER_SHORTAGES"),x()},badge:l.orderShortages}),t.jsx("p",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mt-4",children:s("adminDashboard.settingsSection")}),p("products")&&t.jsx(ks,{icon:t.jsx(Wo,{size:20}),label:s("adminDashboard.products"),active:r==="PRODUCTS",onClick:()=>n("PRODUCTS")}),p("products")&&t.jsx(ks,{icon:t.jsx(Mr,{size:20}),label:s("adminDashboard.alternatives"," "),active:r==="ALTERNATIVES",onClick:()=>n("ALTERNATIVES")}),p("products")&&t.jsx(ks,{icon:t.jsx(Dm,{size:20}),label:s("adminDashboard.productImages"," "),active:r==="PRODUCT_IMAGES",onClick:()=>n("PRODUCT_IMAGES")}),p("users")&&t.jsx(ks,{icon:t.jsx(Wt,{size:20}),label:s("adminDashboard.users"),active:r==="ADMIN_USERS",onClick:()=>n("ADMIN_USERS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(aa,{size:20}),label:s("adminDashboard.systemSettings"),active:r==="SETTINGS",onClick:()=>n("SETTINGS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(ja,{size:20}),label:s("adminDashboard.marketingCenter"),active:r==="MARKETING",onClick:()=>n("MARKETING")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(mr,{size:20}),label:s("adminDashboard.pricingCenter"),active:r==="PRICING",onClick:()=>n("PRICING")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(ac,{size:20}),label:s("adminDashboard.traderTools"),active:r==="TRADER_TOOLS",onClick:()=>n("TRADER_TOOLS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(ld,{size:20}),label:s("adminDashboard.supplierMarketplace"),active:r==="SUPPLIER_MARKETPLACE",onClick:()=>n("SUPPLIER_MARKETPLACE")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(x0,{size:20}),label:s("adminDashboard.marketers"),active:r==="MARKETERS",onClick:()=>n("MARKETERS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(mr,{size:20}),label:s("adminDashboard.installments"),active:r==="INSTALLMENTS",onClick:()=>n("INSTALLMENTS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(ja,{size:20}),label:s("adminDashboard.advertising"),active:r==="ADVERTISING",onClick:()=>n("ADVERTISING")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(Wt,{size:20}),label:s("adminDashboard.teamSettings"),active:r==="TEAM_SETTINGS",onClick:()=>n("TEAM_SETTINGS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(Ko,{size:20}),label:s("adminDashboard.customerPortalSettings"),active:r==="CUSTOMER_PORTAL",onClick:()=>n("CUSTOMER_PORTAL")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(Ln,{size:20}),label:s("adminDashboard.aiSettings"),active:r==="AI_SETTINGS",onClick:()=>n("AI_SETTINGS")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(oF,{size:20}),label:s("adminDashboard.aiTraining","  "),active:r==="AI_TRAINING",onClick:()=>n("AI_TRAINING")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(wf,{size:20}),label:s("adminDashboard.aiCommandCenter","  AI"),active:r==="AI_COMMAND_CENTER",onClick:()=>n("AI_COMMAND_CENTER")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(Ea,{size:20}),label:s("adminDashboard.internationalPricing"," "),active:r==="INTERNATIONAL_PRICING",onClick:()=>n("INTERNATIONAL_PRICING")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(Bs,{size:20}),label:s("adminDashboard.permissionCenter"," "),active:r==="PERMISSION_CENTER",onClick:()=>n("PERMISSION_CENTER")}),p("settings_general")&&t.jsx(ks,{icon:t.jsx(Dr,{size:20}),label:s("adminDashboard.reportsCenter"," "),active:r==="REPORTS_CENTER",onClick:()=>n("REPORTS_CENTER")})]}),t.jsx("div",{className:"p-4 border-t border-slate-700/50 bg-[#08142b]",children:t.jsxs("button",{onClick:e,className:"flex items-center gap-3 text-red-400 hover:text-white text-sm font-bold w-full px-4 py-3 hover:bg-slate-800 rounded-xl transition-colors",children:[t.jsx(lE,{size:18})," ",s("nav.logout")]})})]}),t.jsxs("main",{className:"flex-1 overflow-y-auto bg-slate-50 relative scroll-smooth",children:[t.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex justify-between items-center shadow-sm",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:[r==="DASHBOARD"&&s("adminDashboard.pageTitles.dashboard"),r==="ORDERS_MANAGER"&&s("adminDashboard.pageTitles.ordersManager"),r==="ABANDONED_CARTS"&&s("adminDashboard.pageTitles.abandonedCarts"," "),r==="ACTIVITY_LOGS"&&s("adminDashboard.pageTitles.activityLogs"),r==="FEEDBACK_CENTER"&&s("adminDashboard.pageTitles.feedbackCenter"," "),r==="MESSAGING_CENTER"&&s("adminDashboard.pageTitles.messagingCenter"," "),r==="ACCOUNT_REQUESTS"&&s("adminDashboard.pageTitles.accountRequests"),r==="CUSTOMERS"&&s("adminDashboard.pageTitles.customers"),r==="QUOTES"&&s("adminDashboard.pageTitles.quotes"),r==="IMPORT_REQUESTS"&&s("adminDashboard.pageTitles.imports"),r==="MISSING"&&s("adminDashboard.pageTitles.missing"),r==="ORDER_SHORTAGES"&&s("adminDashboard.pageTitles.orderShortages"," "),r==="SETTINGS"&&s("adminDashboard.pageTitles.settings"),r==="ADMIN_USERS"&&s("adminDashboard.pageTitles.users"),r==="MARKETING"&&s("adminDashboard.pageTitles.marketing"),r==="PRICING"&&s("adminDashboard.pageTitles.pricing"),r==="TRADER_TOOLS"&&s("adminDashboard.pageTitles.traderTools"),r==="SUPPLIER_MARKETPLACE"&&s("adminDashboard.pageTitles.supplierMarketplace"),r==="MARKETERS"&&s("adminDashboard.pageTitles.marketers"),r==="INSTALLMENTS"&&s("adminDashboard.pageTitles.installments"),r==="ADVERTISING"&&s("adminDashboard.pageTitles.advertising"),r==="TEAM_SETTINGS"&&s("adminDashboard.pageTitles.teamSettings"),r==="CUSTOMER_PORTAL"&&s("adminDashboard.pageTitles.customerPortal"),r==="AI_SETTINGS"&&s("adminDashboard.pageTitles.aiSettings"),r==="NOTIFICATIONS"&&s("adminDashboard.pageTitles.notifications",""),r==="INTERNATIONAL_PRICING"&&s("adminDashboard.pageTitles.internationalPricing","  "),r==="PERMISSION_CENTER"&&s("adminDashboard.pageTitles.permissionCenter"," "),r==="REPORTS_CENTER"&&s("adminDashboard.pageTitles.reportsCenter"," "),["PRODUCTS"].includes(r)&&s("adminDashboard.pageTitles.products")]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Bce,{}),t.jsx(Ne,{}),v&&t.jsx(dE,{user:{id:v.id,username:v.username,email:v.email,phone:"",role:"ADMIN",status:v.isActive?"ACTIVE":"PENDING",createdAt:v.createdAt,hasProfile:!0},onViewAll:()=>n("NOTIFICATIONS")}),t.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"text-left hidden md:block",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:(v==null?void 0:v.fullName)||s("adminDashboard.generalManager")}),t.jsx("p",{className:"text-left text-[10px] text-slate-500 font-mono",children:(b==null?void 0:b.name)||"Super Admin"})]}),t.jsx("div",{className:"w-10 h-10 bg-[#0B1B3A] rounded-full flex items-center justify-center text-[#C8A04F] shadow-md border-2 border-[#C8A04F]",children:t.jsx(Fn,{size:20})})]})]})]}),t.jsxs("div",{className:"p-8 max-w-[1600px] mx-auto space-y-8",children:[r==="DASHBOARD"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(q,{title:s("adminDashboard.stats.todayRevenue"),value:`${Z.todayRevenue.toLocaleString()} ${s("customerDashboard.sar")}`,subValue:`${s("adminDashboard.stats.totalRevenue")}: ${Z.totalRevenue.toLocaleString()} ${s("customerDashboard.sar")}`,icon:t.jsx(Dr,{}),colorClass:"text-emerald-600 bg-emerald-100",delay:"0ms"}),t.jsx(q,{title:s("adminDashboard.stats.pendingOrders"),value:Z.pendingOrders,subValue:`${Z.approvedOrders} ${s("adminDashboard.stats.approvedOrders")} | ${Z.shippedOrders} ${s("adminDashboard.stats.shippedOrders")}`,icon:t.jsx(Bu,{}),colorClass:"text-blue-600 bg-blue-100",delay:"50ms"}),t.jsx(q,{title:s("adminDashboard.stats.activeBusinesses"),value:Z.activeBusinesses,subValue:`${Z.pendingAccounts} ${s("adminDashboard.stats.pendingAccounts")}`,icon:t.jsx(Wt,{}),colorClass:"text-[#C8A04F] bg-amber-100",delay:"100ms"}),t.jsx(q,{title:s("adminDashboard.stats.pendingQuotes"),value:Z.pendingQuotes,subValue:s("common.noData"),icon:t.jsx(zt,{}),colorClass:"text-slate-600 bg-slate-200",delay:"150ms"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm h-[400px] flex flex-col",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(gi,{size:20,className:"text-[#C8A04F]"})," ",s("adminDashboard.charts.dailyRevenue")," (30)"]})}),t.jsx("div",{className:"flex-1 w-full min-h-0",children:t.jsx(O3,{width:"100%",height:"100%",children:t.jsxs(_Ce,{data:ue.dailyStats,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"colorRev",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:pp.navy,stopOpacity:.2}),t.jsx("stop",{offset:"95%",stopColor:pp.navy,stopOpacity:0})]})}),t.jsx(Vz,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),t.jsx(Sh,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),t.jsx(Ah,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),t.jsx(Ci,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},formatter:ce=>[`${ce.toLocaleString()} ${s("customerDashboard.sar")}`,s("adminDashboard.charts.revenue")]}),t.jsx(cc,{type:"monotone",dataKey:"revenue",stroke:pp.navy,strokeWidth:3,fillOpacity:1,fill:"url(#colorRev)"})]})})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-[#0B1B3A] text-white p-6 rounded-2xl shadow-lg relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#C8A04F] rounded-full blur-[60px] opacity-20"}),t.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2 relative z-10",children:[t.jsx(rl,{size:20,className:"text-[#C8A04F]"})," ",s("dashboard.quickActions")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 relative z-10",children:[t.jsx(gp,{label:s("products.addProduct"),icon:t.jsx(kt,{size:16}),onClick:()=>n("PRODUCTS")}),t.jsx(gp,{label:s("common.refresh"),icon:t.jsx(Gt,{size:16}),onClick:()=>n("PRODUCTS")}),t.jsx(gp,{label:s("adminDashboard.stats.pendingOrders"),icon:t.jsx(is,{size:16}),onClick:()=>n("QUOTES")}),t.jsx(gp,{label:s("common.export"),icon:t.jsx(tr,{size:16}),onClick:()=>se(s("common.loading"),"success")})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm h-[200px] flex flex-col",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-sm mb-4",children:s("adminDashboard.charts.dailyOrders")}),t.jsx("div",{className:"flex-1 w-full min-h-0",children:t.jsx(O3,{width:"100%",height:"100%",children:t.jsxs(TCe,{data:ue.dailyStats,children:[t.jsx(wd,{dataKey:"orders",fill:pp.gold,radius:[4,4,0,0]}),t.jsx(Ci,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"8px"}})]})})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(e5,{size:20,className:"text-red-500"})," ",s("adminDashboard.charts.topMissingParts")]}),t.jsx("div",{className:"space-y-4",children:re.topMissing.length>0?re.topMissing.map(([ce,fe],ie)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-white border border-slate-200 flex items-center justify-center text-xs font-bold text-slate-500",children:ie+1}),t.jsx("span",{className:"font-bold text-slate-700",children:ce})]}),t.jsxs("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded-md",children:[fe," ",s("common.search")]})]},ie)):t.jsx("p",{className:"text-center text-slate-400 py-8",children:s("common.noData")})}),t.jsxs("button",{onClick:()=>n("MISSING"),className:"w-full mt-4 text-center text-sm font-bold text-brand-600 hover:text-brand-700 py-2",children:[s("common.view")," ",s("adminDashboard.missingParts")]})]}),t.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Wr,{size:20,className:"text-blue-500"})," ",s("adminDashboard.activityLog")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(bp,{label:s("adminDashboard.activity.logins"),value:J.logins,color:"blue"}),t.jsx(bp,{label:s("adminDashboard.activity.ordersCreated"),value:J.orders,color:"emerald"}),t.jsx(bp,{label:s("adminDashboard.activity.quotesRequested"),value:J.quotes,color:"amber"}),t.jsx(bp,{label:s("adminDashboard.activity.searchesPerformed"),value:J.searches,color:"slate"})]}),t.jsxs("button",{onClick:()=>n("ACTIVITY_LOGS"),className:"w-full mt-6 bg-slate-50 text-slate-600 font-bold py-3 rounded-xl hover:bg-slate-100 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Ll,{size:16})," ",s("common.view")," ",s("adminDashboard.activityLog")]})]}),t.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Nr,{size:20,className:"text-slate-400"})," ",s("nav.notifications")]}),t.jsxs("div",{className:"space-y-4",children:[P.slice(0,5).map(ce=>t.jsxs("div",{className:"flex gap-3 items-start border-b border-slate-50 pb-3 last:border-0 last:pb-0",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-500 mt-2 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 line-clamp-1",children:ce.title}),t.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:ce.message}),t.jsx("span",{className:"text-[10px] text-slate-400 mt-1 block",children:ms(ce.createdAt)})]})]},ce.id)),P.length===0&&t.jsx("p",{className:"text-center text-slate-400 py-8",children:s("notifications.noNotifications")})]})]})]})]}),r==="SETTINGS"&&(p("settings_general")?t.jsx(mue,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ADMIN_USERS"&&(p("users")?t.jsx(c0e,{onRefresh:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="MARKETING"&&(p("settings_general")?t.jsx(h0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="PRICING"&&(p("settings_general")?t.jsx(N0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="TRADER_TOOLS"&&(p("settings_general")?t.jsx(C0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="SUPPLIER_MARKETPLACE"&&(p("settings_general")?t.jsx(_0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="MARKETERS"&&(p("settings_general")?t.jsx(k0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="INSTALLMENTS"&&(p("settings_general")?t.jsx(R0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ADVERTISING"&&(p("settings_general")?t.jsx(U0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="TEAM_SETTINGS"&&(p("settings_general")?t.jsx(W0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="CUSTOMER_PORTAL"&&(p("settings_general")?t.jsx(K0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="AI_SETTINGS"&&(p("settings_general")?t.jsx(J0e,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="AI_TRAINING"&&(p("settings_general")?t.jsx(Eme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="AI_COMMAND_CENTER"&&(p("settings_general")?t.jsx(Tme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="INTERNATIONAL_PRICING"&&(p("settings_general")?t.jsx(wme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="PERMISSION_CENTER"&&(p("settings_general")?t.jsx(Sme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="REPORTS_CENTER"&&(p("settings_general")?t.jsx(Ame,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ORDERS_MANAGER"&&(p("orders")?t.jsx($ue,{orders:y,users:w,onUpdate:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ABANDONED_CARTS"&&(p("orders")?t.jsx(Y0e,{onRefresh:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ACCOUNT_REQUESTS"&&(p("account_requests")?t.jsx(Gue,{requests:B,onUpdate:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="PARTNER_REQUESTS"&&(p("account_requests")?t.jsx(Wue,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="CUSTOMERS"&&(p("customers")?t.jsx(Zue,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="QUOTES"&&(p("quotes")?t.jsx(Kue,{quotes:E,onUpdate:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="MISSING"&&(p("missing")?t.jsx(Yue,{missingRequests:k}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ORDER_SHORTAGES"&&(p("orders")?t.jsx(Xue,{onRefresh:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="IMPORT_REQUESTS"&&(p("imports")?t.jsx(r0e,{requests:D,onUpdate:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ACTIVITY_LOGS"&&(p("activity_log")?t.jsx(eme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="FEEDBACK_CENTER"&&(p("settings_general")?t.jsx(tme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="MESSAGING_CENTER"&&(p("settings_general")?t.jsx(hme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="PRODUCTS"&&(p("products")?t.jsx(o0e,{onRefresh:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="ALTERNATIVES"&&(p("products")?t.jsx(X0e,{onRefresh:V}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="PRODUCT_IMAGES"&&(p("products")?t.jsx(Lme,{}):t.jsx(Us,{resourceName:s(_s[r]),onGoHome:()=>n("DASHBOARD")})),r==="NOTIFICATIONS"&&v&&t.jsx(uE,{user:{id:v.id,username:v.username,email:v.email,phone:"",role:"ADMIN",status:v.isActive?"ACTIVE":"PENDING",createdAt:v.createdAt,hasProfile:!0},onBack:()=>n("DASHBOARD")})]})]})]})},ks=({icon:e,label:s,active:a,onClick:r,badge:n})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all mb-1 ${a?"bg-[#C8A04F] text-[#0B1B3A] font-black shadow-md":"text-slate-300 hover:bg-slate-800 hover:text-white font-medium"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e,t.jsx("span",{className:"text-sm",children:s})]}),n>0&&t.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:n})]}),gp=({label:e,icon:s,onClick:a})=>t.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-xl font-bold text-xs transition-all border border-white/5 backdrop-blur-sm",children:[s," ",e]}),bp=({label:e,value:s,color:a})=>{const r={blue:"bg-blue-50 text-blue-700",emerald:"bg-emerald-50 text-emerald-700",amber:"bg-amber-50 text-amber-700",slate:"bg-slate-100 text-slate-700"};return t.jsxs("div",{className:`p-4 rounded-xl ${r[a]} text-center`,children:[t.jsx("p",{className:"text-2xl font-black mb-1",children:s}),t.jsx("p",{className:"text-xs font-bold opacity-70",children:e})]})},OCe=e=>{const[s,a]=C.useState(null);return C.useEffect(()=>{(async()=>{try{const n=await he.getAdminUsers();if(n.length>0){const i=n.find(l=>l.isActive);a(i||n[0])}}catch(n){console.error("Failed to load admin user:",n)}})()},[]),t.jsx(Bue,{initialAdminUser:s,children:t.jsx(Fme,{children:t.jsx(kCe,{...e})})})},ICe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+PHJlY3QgZmlsbD0iI2YzZjRmNiIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIxMjAiLz48cGF0aCBmaWxsPSIjOWNhM2FmIiBkPSJNNjAgMzBjLTIwIDAtMzUgMTUtMzUgMzVzMTUgMzUgMzUgMzUgMzUtMTUgMzUtMzUtMTUtMzUtMzUtMzV6bTAgNjBjLTE0IDAtMjUtMTEtMjUtMjVzMTEtMjUgMjUtMjUgMjUgMTEgMjUgMjUtMTEgMjUtMjUgMjV6Ii8+PHBhdGggZmlsbD0iIzljYTNhZiIgZD0iTTYwIDQ1Yy0xMCAwLTIwIDgtMjAgMjBzMTAgMjAgMjAgMjAgMjAtOCAyMC0yMC0xMC0yMC0yMC0yMHptMCAzMGMtNSAwLTEwLTQtMTAtMTBzNS0xMCAxMC0xMCAxMCA0IDEwIDEwLTUgMTAtMTAgMTB6Ii8+PC9zdmc+",Tl=C.memo(({icon:e,label:s,active:a,onClick:r,badge:n,collapsed:i,testId:l})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center ${i?"justify-center":"justify-between"} px-3 py-3.5 rounded-2xl mb-2 transition-all duration-300 group relative overflow-hidden ${a?"bg-gradient-to-l from-emerald-600 to-emerald-700 text-white font-bold shadow-lg shadow-emerald-900/40 scale-[1.02]":"text-slate-300 hover:bg-white/10 hover:text-white font-medium hover:scale-[1.01]"}`,title:i?s:void 0,"data-testid":l,children:[a&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse opacity-50"}),t.jsxs("div",{className:`flex items-center relative z-10 ${i?"":"gap-3.5"}`,children:[t.jsx("span",{className:`shrink-0 transition-transform duration-300 ${a?"scale-110":"group-hover:scale-105"}`,children:e}),!i&&t.jsx("span",{className:"text-sm md:text-[15px] truncate tracking-wide",children:s})]}),n&&!i&&t.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-[11px] font-bold px-2.5 py-1 rounded-full flex items-center justify-center min-w-[22px] shadow-md animate-bounce relative z-10",children:n}),n&&i&&t.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-gradient-to-r from-orange-500 to-red-500 rounded-full animate-pulse shadow-lg"}),i&&t.jsxs("div",{className:"absolute left-full ml-3 px-4 py-2.5 bg-slate-800/95 backdrop-blur-sm text-white text-sm font-bold rounded-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-2xl border border-slate-700/50",children:[s,n&&t.jsxs("span",{className:"mr-2 text-orange-400 font-black",children:["(",n,")"]})]})]})),vp=C.memo(({icon:e,label:s,value:a,color:r,subValue:n})=>t.jsxs("div",{className:`bg-gradient-to-br ${r} rounded-2xl p-5 shadow-lg`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:e}),t.jsx("span",{className:"text-3xl font-black text-white",children:a})]}),t.jsx("p",{className:"text-white/80 text-sm font-medium",children:s}),n&&t.jsx("p",{className:"text-white/60 text-xs mt-1",children:n})]})),RCe=({user:e,onLogout:s})=>{const{t:a,i18n:r}=Kt(),n=Uo(r.language),{addToast:i}=It(),l=n==="rtl",[o,d]=C.useState(()=>{const Ee=localStorage.getItem("supplier_portal_view");return Ee&&["DASHBOARD","PRODUCTS","PURCHASE_ORDERS","REQUESTS","NOTIFICATIONS","SETTINGS","TEAM","IMAGES","QUICK_ORDER","EXCEL_PURCHASE"].includes(Ee)?Ee:"DASHBOARD"}),[u,h]=C.useState(!1),[f,x]=C.useState(!1),[p,v]=C.useState(!0);C.useEffect(()=>{localStorage.setItem("supplier_portal_view",o)},[o]);const[b,y]=C.useState(null),[j,w]=C.useState([]),[S,O]=C.useState(0),[_,E]=C.useState([]),[A,D]=C.useState(0),[L,B]=C.useState(null),[I,T]=C.useState({page:1,pageSize:20}),[z,k]=C.useState({page:1,pageSize:20}),[F,P]=C.useState(!1),[G,Y]=C.useState(null),[W,ee]=C.useState(!1),[H,M]=C.useState(null),[X,K]=C.useState(!1),[Q,se]=C.useState(null),V=C.useCallback(async()=>{const Ee=await he.getSupplierDashboard(e.id);y(Ee)},[e.id]),te=C.useCallback(async()=>{const Ee=await he.getSupplierProducts(e.id,I);w(Ee.items),O(Ee.total)},[e.id,I]),Z=C.useCallback(async()=>{const Ee=await he.getSupplierRequests(e.id,z);E(Ee.items),D(Ee.total)},[e.id,z]),ue=C.useCallback(async()=>{const Ee=await he.getSupplierSettings(e.id);B(Ee)},[e.id]);C.useEffect(()=>{(async()=>{v(!0),await Promise.all([V(),te(),Z(),ue()]),v(!1)})()},[V,te,Z,ue]),C.useEffect(()=>{te()},[I,te]),C.useEffect(()=>{Z()},[z,Z]);const re=async Ee=>{try{await he.addSupplierProduct(e.id,Ee),i(a("supplier.productAdded"),"success"),P(!1),te(),V()}catch{i(a("supplier.productAddError"),"error")}},J=async(Ee,Ie)=>{try{await he.updateSupplierProduct(e.id,Ee,Ie),i(a("supplier.productUpdated"),"success"),P(!1),Y(null),te()}catch{i(a("supplier.productUpdateError"),"error")}},Ne=async Ee=>{if(confirm(a("supplier.confirmDeleteProduct")))try{await he.deleteSupplierProduct(e.id,Ee),i(a("supplier.productDeleted"),"success"),te(),V()}catch{i(a("supplier.productDeleteError"),"error")}},q=async Ee=>{try{const Ie=await Ee.arrayBuffer(),_e=await he.importSupplierProductsFromExcel(e.id,Ie);se(_e),_e.success?(i(`${a("supplier.importSuccess")}: ${_e.insertedCount} ${a("supplier.added")}, ${_e.updatedCount} ${a("supplier.updated")}`,"success"),te(),V()):i(a("supplier.importFailed"),"error")}catch{i(a("supplier.importError"),"error")}},ce=()=>{const Ee=j.map(Ge=>({sku:Ge.sku,oemNumber:Ge.oemNumber,name:Ge.name,category:Ge.category,brand:Ge.brand,model:Ge.model||"",yearFrom:Ge.yearFrom||"",yearTo:Ge.yearTo||"",purchasePrice:Ge.purchasePrice,stock:Ge.stock,minOrderQty:Ge.minOrderQty,deliveryTime:Ge.deliveryTime})),Ie=Ta.json_to_sheet(Ee),_e=Ta.book_new();Ta.book_append_sheet(_e,Ie,"Products"),nd(_e,`supplier_products_${Date.now()}.xlsx`),i(a("supplier.exportSuccess"),"success")},fe=async Ee=>{try{const Ie=await he.updateSupplierSettings(e.id,Ee);B(Ie),i(a("supplier.settingsSaved"),"success")}catch{i(a("supplier.settingsError"),"error")}},ie=l?"right-0":"left-0",ne=l?u?"translate-x-0":"translate-x-full lg:translate-x-0":u?"translate-x-0":"-translate-x-full lg:translate-x-0",pe=f?"w-20":"w-72";return _.filter(Ee=>Ee.status==="NEW"||Ee.status==="VIEWED").length,p?t.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(ts,{className:"w-12 h-12 text-emerald-500 animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-white text-lg font-bold",children:a("loading.pleaseWait")})]})}):t.jsxs("div",{className:`flex h-screen bg-slate-100 ${n==="rtl"?"rtl":"ltr"}`,dir:n,children:[u&&t.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden",onClick:()=>h(!1)}),t.jsxs("aside",{className:`fixed lg:static inset-y-0 ${ie} ${pe} bg-gradient-to-b from-slate-900 via-slate-900 to-emerald-950 text-white transform transition-all duration-300 z-50 flex flex-col shadow-2xl lg:shadow-xl ${ne}`,children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-emerald-600/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-20 left-0 w-32 h-32 bg-teal-500/10 rounded-full blur-3xl"})]}),t.jsxs("div",{className:`relative p-4 ${f?"px-3":"p-5"} border-b border-white/10 flex items-center ${f?"justify-center":"justify-between"}`,children:[f?t.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:l?t.jsx(Ns,{size:18}):t.jsx(hs,{size:18})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-emerald-500/30 ring-2 ring-white/20",children:t.jsx(Yt,{size:22})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-black text-lg tracking-tight",children:a("supplier.portalTitle")}),t.jsx("p",{className:"text-xs text-slate-400",children:e.name})]})]}),t.jsx("button",{onClick:()=>x(!0),className:"p-2 hover:bg-white/10 rounded-lg transition-colors lg:block hidden",children:l?t.jsx(hs,{size:18}):t.jsx(Ns,{size:18})})]}),t.jsx("button",{onClick:()=>h(!1),className:"lg:hidden p-2 hover:bg-white/10 rounded-lg",children:t.jsx(vt,{size:20})})]}),t.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[t.jsx(Tl,{icon:t.jsx(iE,{size:20}),label:a("supplier.dashboard"),active:o==="DASHBOARD",onClick:()=>d("DASHBOARD"),collapsed:f,testId:"nav-dashboard"}),t.jsx(Tl,{icon:t.jsx(Yt,{size:20}),label:a("supplier.products"),active:o==="PRODUCTS",onClick:()=>d("PRODUCTS"),testId:"nav-products",collapsed:f}),t.jsx(Tl,{icon:t.jsx(zt,{size:20}),label:" ",active:o==="PURCHASE_ORDERS",onClick:()=>d("PURCHASE_ORDERS"),collapsed:f,testId:"nav-purchase-orders"}),t.jsx(Tl,{icon:t.jsx(Nr,{size:20}),label:a("supplier.notifications"),active:o==="NOTIFICATIONS",onClick:()=>d("NOTIFICATIONS"),collapsed:f,testId:"nav-notifications"}),t.jsx(Tl,{icon:t.jsx(Wt,{size:20}),label:a("supplier.team"),active:o==="TEAM",onClick:()=>d("TEAM"),collapsed:f,testId:"nav-team"}),t.jsx(Tl,{icon:t.jsx(aa,{size:20}),label:a("supplier.settings"),active:o==="SETTINGS",onClick:()=>d("SETTINGS"),collapsed:f,testId:"nav-settings"}),e.canAccessCustomerFeatures&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`${f?"mx-auto w-6":"mx-3"} my-3 border-t border-amber-500/30`}),t.jsx("div",{className:`${f?"hidden":"px-3 mb-2"}`,children:t.jsx("span",{className:"text-xs font-bold text-amber-400 uppercase tracking-wider",children:" "})}),t.jsx(Tl,{icon:t.jsx(Lt,{size:20}),label:" ",active:o==="QUICK_ORDER",onClick:()=>d("QUICK_ORDER"),badge:e.supplierSearchPoints||0,collapsed:f,testId:"nav-quick-order"}),t.jsx(Tl,{icon:t.jsx(yn,{size:20}),label:"  Excel",active:o==="EXCEL_PURCHASE",onClick:()=>d("EXCEL_PURCHASE"),collapsed:f,testId:"nav-excel-purchase"})]}),t.jsx(Tl,{icon:t.jsx(Li,{size:20}),label:a("supplier.images"," "),active:o==="IMAGES",onClick:()=>d("IMAGES"),collapsed:f,testId:"nav-images"})]}),t.jsx("div",{className:`p-3 border-t border-white/10 ${f?"flex justify-center":""}`,children:t.jsxs("button",{onClick:s,className:`${f?"p-3":"w-full px-4 py-3"} flex items-center ${f?"justify-center":"gap-3"} rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all`,title:a("logout"),"data-testid":"button-logout",children:[t.jsx(lE,{size:18}),!f&&t.jsx("span",{className:"font-bold text-sm",children:a("logout")})]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsxs("header",{className:"h-16 md:h-20 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-6 lg:px-8 flex-shrink-0 z-30 shadow-sm gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 min-w-0 flex-1",children:[t.jsx("button",{onClick:()=>h(!0),className:"lg:hidden text-slate-600 p-2 hover:bg-slate-100 rounded-lg shrink-0","data-testid":"button-open-sidebar",children:t.jsx(gF,{size:22})}),t.jsxs("h2",{className:"text-base md:text-xl lg:text-2xl font-bold md:font-black text-slate-800 tracking-tight truncate",children:[o==="DASHBOARD"&&a("supplier.dashboard"),o==="PRODUCTS"&&a("supplier.products"),o==="REQUESTS"&&a("supplier.requests"),o==="SETTINGS"&&a("supplier.settings"),o==="NOTIFICATIONS"&&a("supplier.notifications"),o==="TEAM"&&a("supplier.team"),o==="IMAGES"&&a("supplier.images"," ")]})]}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 shrink-0",children:[t.jsxs("div",{className:"hidden lg:flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-xl text-xs md:text-sm font-bold text-slate-700",children:[t.jsx(is,{size:16}),t.jsx("span",{children:ms(new Date().toISOString())})]}),t.jsx(dE,{user:e,onViewAll:()=>d("NOTIFICATIONS")}),t.jsx(ph,{})]})]}),t.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8",children:[o==="DASHBOARD"&&b&&t.jsx(DCe,{stats:b,t:a,onNavigate:d,recentRequests:_.slice(0,5)}),o==="PRODUCTS"&&t.jsx(MCe,{products:j,total:S,filters:I,onFiltersChange:T,onAdd:()=>{Y(null),P(!0)},onEdit:Ee=>{Y(Ee),P(!0)},onDelete:Ne,onImport:()=>K(!0),onExport:ce,t:a}),o==="SETTINGS"&&L&&t.jsx(LCe,{settings:L,onSave:fe,t:a}),o==="NOTIFICATIONS"&&t.jsx(uE,{user:e}),o==="PURCHASE_ORDERS"&&t.jsx(PCe,{orders:[],onUpdateStatus:(Ee,Ie)=>{i(`    ${Ee}  ${Ie}`,"success")},t:a}),o==="TEAM"&&t.jsx(zCe,{supplierId:e.id,t:a,currentUser:e}),o==="IMAGES"&&t.jsx(BCe,{supplierId:e.id,t:a})]})]}),F&&t.jsx(FCe,{product:G,onSave:G?Ee=>J(G.id,Ee):re,onClose:()=>{P(!1),Y(null)},t:a}),X&&t.jsx(UCe,{onImport:q,onClose:()=>{K(!1),se(null)},result:Q,t:a})]})},UM={NEW:{label:"",color:"bg-red-100 text-red-700 border-red-200",icon:""},PREPARING:{label:" ",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:""},READY:{label:" ",color:"bg-green-100 text-green-700 border-green-200",icon:""},SHIPPED:{label:" ",color:"bg-blue-100 text-blue-700 border-blue-200",icon:""},RECEIVED:{label:" ",color:"bg-slate-100 text-slate-700 border-slate-200",icon:""},PARTIAL_STOCK:{label:"  ",color:"bg-orange-100 text-orange-700 border-orange-200",icon:""}},PCe=C.memo(({orders:e,onUpdateStatus:s,t:a})=>{const[r,n]=C.useState(null),i=e.length>0?e:[{id:"po-001",orderNumber:"PO-2024-001",customerOrderNumber:"ORD-5678",status:"NEW",createdAt:new Date().toISOString(),totalItems:3,totalQuantity:15,totalAmount:1500,items:[{id:"1",partNumber:"ABC-001",productName:"  ",quantityRequested:5,supplierPrice:50,totalPrice:250,isAvailable:!0},{id:"2",partNumber:"DEF-002",productName:"  ",quantityRequested:3,supplierPrice:80,totalPrice:240,isAvailable:!0},{id:"3",partNumber:"GHI-003",productName:" ",quantityRequested:7,supplierPrice:144,totalPrice:1008,isAvailable:!0}]},{id:"po-002",orderNumber:"PO-2024-002",customerOrderNumber:"ORD-5679",status:"PREPARING",createdAt:new Date(Date.now()-864e5).toISOString(),totalItems:2,totalQuantity:8,totalAmount:720,items:[{id:"4",partNumber:"JKL-004",productName:"  ",quantityRequested:2,supplierPrice:200,totalPrice:400,isAvailable:!0},{id:"5",partNumber:"MNO-005",productName:"  5W-30",quantityRequested:6,supplierPrice:53,totalPrice:320,isAvailable:!0}]}];return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl text-white",children:t.jsx(zt,{size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"    "})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-full text-sm font-bold",children:[i.filter(l=>l.status==="NEW").length," "]}),t.jsxs("span",{className:"px-3 py-1.5 bg-yellow-100 text-yellow-700 rounded-full text-sm font-bold",children:[i.filter(l=>l.status==="PREPARING").length,"  "]})]})]}),t.jsx("div",{className:"space-y-4",children:i.map(l=>{const o=UM[l.status]||UM.NEW,d=r===l.id;return t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden",children:[t.jsx("div",{className:"p-4 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>n(d?null:l.id),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-2xl",children:o.icon}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-black text-slate-800",children:l.orderNumber}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold border ${o.color}`,children:o.label})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[l.totalItems,"   ",l.totalQuantity,"   ",l.totalAmount.toLocaleString()," ."]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs text-slate-400",children:new Date(l.createdAt).toLocaleDateString("ar-SA")}),t.jsx(hs,{size:20,className:`text-slate-400 transition-transform ${d?"rotate-90":""}`})]})]})}),d&&t.jsxs("div",{className:"border-t border-slate-100",children:[t.jsx("div",{className:"p-4",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50 text-slate-600",children:[t.jsx("th",{className:"text-right p-2 rounded-r-lg",children:" "}),t.jsx("th",{className:"text-right p-2",children:" "}),t.jsx("th",{className:"text-center p-2",children:""}),t.jsx("th",{className:"text-center p-2",children:""}),t.jsx("th",{className:"text-center p-2 rounded-l-lg",children:""})]})}),t.jsx("tbody",{children:l.items.map(u=>t.jsxs("tr",{className:"border-b border-slate-50",children:[t.jsx("td",{className:"p-2 font-mono text-xs text-slate-600",children:u.partNumber}),t.jsx("td",{className:"p-2 font-bold text-slate-800",children:u.productName}),t.jsx("td",{className:"p-2 text-center font-bold text-blue-600",children:u.quantityRequested}),t.jsxs("td",{className:"p-2 text-center text-slate-600",children:[u.supplierPrice," ."]}),t.jsxs("td",{className:"p-2 text-center font-bold text-emerald-600",children:[u.totalPrice," ."]})]},u.id))})]})}),t.jsxs("div",{className:"p-4 bg-slate-50 flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"text-sm text-slate-500",children:[" : ",t.jsxs("span",{className:"font-black text-slate-800",children:[l.totalAmount.toLocaleString()," ."]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="NEW"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>s(l.id,"PARTIAL_STOCK"),className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-xl font-bold text-sm hover:bg-orange-200 transition-colors",children:"   "}),t.jsx("button",{onClick:()=>s(l.id,"PREPARING"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold text-sm hover:bg-blue-600 transition-colors",children:"  "})]}),l.status==="PREPARING"&&t.jsx("button",{onClick:()=>s(l.id,"READY"),className:"px-4 py-2 bg-green-500 text-white rounded-xl font-bold text-sm hover:bg-green-600 transition-colors",children:"  "}),l.status==="READY"&&t.jsx("button",{onClick:()=>s(l.id,"SHIPPED"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold text-sm hover:bg-blue-600 transition-colors",children:"  "}),(l.status==="SHIPPED"||l.status==="RECEIVED")&&t.jsx("span",{className:"px-4 py-2 bg-slate-100 text-slate-500 rounded-xl font-bold text-sm",children:" "})]})]})]})]},l.id)})}),i.length===0&&t.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl",children:[t.jsx(Yt,{size:48,className:"mx-auto text-slate-300 mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-slate-600",children:"   "}),t.jsx("p",{className:"text-slate-400",children:"        "})]})]})}),DCe=C.memo(({stats:e,t:s,onNavigate:a,recentRequests:r})=>t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(vp,{icon:t.jsx(Yt,{size:24,className:"text-white"}),label:s("supplier.totalProducts"),value:e.totalProducts,color:"from-emerald-500 to-emerald-600",subValue:`${e.activeProducts} ${s("supplier.active")}`}),t.jsx(vp,{icon:t.jsx(zt,{size:24,className:"text-white"}),label:s("supplier.pendingRequests"),value:e.pendingRequests,color:"from-orange-500 to-orange-600"}),t.jsx(vp,{icon:t.jsx(Mt,{size:24,className:"text-white"}),label:s("supplier.quotesSubmitted"),value:e.quotesSubmitted,color:"from-blue-500 to-blue-600",subValue:`${e.quotesAccepted} ${s("supplier.accepted")}`}),t.jsx(vp,{icon:t.jsx(mr,{size:24,className:"text-white"}),label:s("supplier.totalRevenue"),value:`${e.totalRevenue.toLocaleString()} ${s("currency")}`,color:"from-purple-500 to-purple-600"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:s("supplier.recentRequests")}),t.jsx("button",{onClick:()=>a("REQUESTS"),className:"text-emerald-600 text-sm font-bold hover:underline","data-testid":"link-view-all-requests",children:s("supplier.viewAll")})]}),r.length===0?t.jsxs("div",{className:"text-center py-10 text-slate-400",children:[t.jsx(zt,{size:40,className:"mx-auto mb-3 opacity-50"}),t.jsx("p",{children:s("supplier.noRequests")})]}):t.jsx("div",{className:"space-y-3",children:r.map(n=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>a("REQUESTS"),"data-testid":`request-item-${n.id}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${n.status==="NEW"?"bg-orange-500":n.status==="QUOTED"?"bg-blue-500":n.status==="ACCEPTED"?"bg-green-500":"bg-slate-400"}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:n.partName||n.partNumber}),t.jsx("p",{className:"text-xs text-slate-500",children:n.customerName})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-slate-500",children:ms(n.createdAt)}),t.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-bold ${n.status==="NEW"?"bg-orange-100 text-orange-700":n.status==="QUOTED"?"bg-blue-100 text-blue-700":n.status==="ACCEPTED"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700"}`,children:s(`supplier.status.${n.status.toLowerCase()}`)})]})]},n.id))})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:s("supplier.quickActions")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>a("PRODUCTS"),className:"w-full flex items-center gap-3 px-4 py-3 bg-emerald-50 text-emerald-700 rounded-xl font-bold hover:bg-emerald-100 transition-colors","data-testid":"button-add-product-quick",children:[t.jsx(kt,{size:20}),s("supplier.addProduct")]}),t.jsxs("button",{onClick:()=>a("PRODUCTS"),className:"w-full flex items-center gap-3 px-4 py-3 bg-blue-50 text-blue-700 rounded-xl font-bold hover:bg-blue-100 transition-colors","data-testid":"button-import-products-quick",children:[t.jsx(va,{size:20}),s("supplier.importProducts")]}),t.jsxs("button",{onClick:()=>a("REQUESTS"),className:"w-full flex items-center gap-3 px-4 py-3 bg-orange-50 text-orange-700 rounded-xl font-bold hover:bg-orange-100 transition-colors","data-testid":"button-view-requests-quick",children:[t.jsx(zt,{size:20}),s("supplier.viewRequests")]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100",children:[t.jsx("h4",{className:"font-bold text-slate-700 mb-3",children:s("supplier.performance")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-600",children:s("supplier.avgResponseTime")}),t.jsxs("span",{className:"font-bold text-slate-800",children:[e.averageResponseTime,"h"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-600",children:s("supplier.rating")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(bn,{size:16,className:"text-yellow-500 fill-yellow-500"}),t.jsx("span",{className:"font-bold text-slate-800",children:e.supplierRating.toFixed(1)})]})]})]})]})]})]})]})),MCe=C.memo(({products:e,total:s,filters:a,onFiltersChange:r,onAdd:n,onEdit:i,onDelete:l,onImport:o,onExport:d,t:u})=>{const[h,f]=C.useState(a.search||""),x=()=>{r({...a,search:h,page:1})},p=Math.ceil(s/(a.pageSize||20));return t.jsxs("div",{className:"space-y-4 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Lt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:h,onChange:v=>f(v.target.value),onKeyDown:v=>v.key==="Enter"&&x(),placeholder:u("supplier.searchProducts"),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none","data-testid":"input-search-products"})]}),t.jsx("button",{onClick:x,className:"px-4 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-search-products",children:u("search")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-50 text-blue-700 rounded-xl font-bold hover:bg-blue-100 transition-colors","data-testid":"button-import-products",children:[t.jsx(va,{size:18}),u("supplier.import")]}),t.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-export-products",children:[t.jsx(tr,{size:18}),u("supplier.export")]}),t.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-add-product",children:[t.jsx(kt,{size:18}),u("supplier.addProduct")]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.length===0?t.jsxs("div",{className:"text-center py-16 text-slate-400",children:[t.jsx(Yt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:u("supplier.noProducts")}),t.jsx("p",{className:"text-sm",children:u("supplier.addFirstProduct")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.sku")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.productName")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.brand")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.price")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.stock")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.status")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-600 uppercase",children:u("actions")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(v=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`product-row-${v.id}`,children:[t.jsx("td",{className:"px-4 py-3 text-sm font-mono text-slate-600",children:v.sku}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"font-bold text-slate-800",children:v.name}),t.jsx("p",{className:"text-xs text-slate-500",children:v.oemNumber})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:v.brand}),t.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-emerald-600",children:[v.purchasePrice.toLocaleString()," ",u("currency")]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${v.stock>10?"bg-green-100 text-green-700":v.stock>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:v.stock})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${v.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:v.isActive?u("supplier.active"):u("supplier.inactive")})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx("button",{onClick:()=>i(v),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:u("edit"),"data-testid":`button-edit-product-${v.id}`,children:t.jsx(Ma,{size:16})}),t.jsx("button",{onClick:()=>l(v.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:u("delete"),"data-testid":`button-delete-product-${v.id}`,children:t.jsx(At,{size:16})})]})})]},v.id))})]})}),p>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("p",{className:"text-sm text-slate-600",children:[u("showing")," ",((a.page||1)-1)*(a.pageSize||20)+1," - ",Math.min((a.page||1)*(a.pageSize||20),s)," ",u("of")," ",s]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)-1}),disabled:(a.page||1)<=1,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-prev-page",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"px-3 py-1 bg-white rounded-lg border text-sm font-bold",children:[a.page||1," / ",p]}),t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)+1}),disabled:(a.page||1)>=p,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-next-page",children:t.jsx(Ns,{size:18})})]})]})]})]})});C.memo(({requests:e,total:s,filters:a,onFiltersChange:r,onQuote:n,onReject:i,t:l})=>{const[o,d]=C.useState(a.search||""),[u,h]=C.useState(a.status||"ALL"),f=()=>{r({...a,search:o,status:u,page:1})},x=Math.ceil(s/(a.pageSize||20));return t.jsxs("div",{className:"space-y-4 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsx("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Lt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:o,onChange:p=>d(p.target.value),onKeyDown:p=>p.key==="Enter"&&f(),placeholder:l("supplier.searchRequests"),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none","data-testid":"input-search-requests"})]})}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("select",{value:u,onChange:p=>{h(p.target.value),r({...a,status:p.target.value,page:1})},className:"px-4 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-700 focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:l("supplier.allStatuses")}),t.jsx("option",{value:"NEW",children:l("supplier.status.new")}),t.jsx("option",{value:"VIEWED",children:l("supplier.status.viewed")}),t.jsx("option",{value:"QUOTED",children:l("supplier.status.quoted")}),t.jsx("option",{value:"ACCEPTED",children:l("supplier.status.accepted")}),t.jsx("option",{value:"REJECTED",children:l("supplier.status.rejected")})]})})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.length===0?t.jsxs("div",{className:"text-center py-16 text-slate-400",children:[t.jsx(zt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:l("supplier.noRequests")})]}):t.jsx("div",{className:"divide-y divide-slate-100",children:e.map(p=>{var v,b;return t.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors","data-testid":`request-row-${p.id}`,children:t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${p.status==="NEW"?"bg-orange-500":p.status==="QUOTED"?"bg-blue-500":p.status==="ACCEPTED"?"bg-green-500":"bg-slate-400"}`}),t.jsx("h4",{className:"font-bold text-slate-800",children:p.partName||p.partNumber}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${p.urgency==="URGENT"?"bg-red-100 text-red-700":p.urgency==="HIGH"?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-600"}`,children:l(`supplier.urgency.${((v=p.urgency)==null?void 0:v.toLowerCase())||"normal"}`)})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-slate-600",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.customer"),": "]}),t.jsx("span",{className:"font-medium",children:p.customerName})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.quantity"),": "]}),t.jsx("span",{className:"font-medium",children:p.quantity})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.deadline"),": "]}),t.jsx("span",{className:"font-medium",children:p.deadline?ms(p.deadline):"-"})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.received"),": "]}),t.jsx("span",{className:"font-medium",children:ms(p.createdAt)})]})]}),p.notes&&t.jsx("p",{className:"mt-2 text-sm text-slate-500 bg-slate-50 p-2 rounded",children:p.notes})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[(p.status==="NEW"||p.status==="VIEWED")&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>n(p),className:"flex items-center gap-1 px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":`button-quote-${p.id}`,children:[t.jsx(xi,{size:16}),l("supplier.submitQuote")]}),t.jsxs("button",{onClick:()=>i(p.id),className:"flex items-center gap-1 px-4 py-2 bg-red-50 text-red-600 rounded-xl font-bold hover:bg-red-100 transition-colors","data-testid":`button-reject-${p.id}`,children:[t.jsx(sa,{size:16}),l("supplier.reject")]})]}),p.status==="QUOTED"&&t.jsxs("span",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-xl font-bold",children:[l("supplier.quotedAt"),": ",(b=p.quotedPrice)==null?void 0:b.toLocaleString()," ",l("currency")]}),p.status==="ACCEPTED"&&t.jsxs("span",{className:"flex items-center gap-1 px-4 py-2 bg-green-100 text-green-700 rounded-xl font-bold",children:[t.jsx(Mt,{size:16}),l("supplier.status.accepted")]})]})]})},p.id)})}),x>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("p",{className:"text-sm text-slate-600",children:[l("showing")," ",((a.page||1)-1)*(a.pageSize||20)+1," - ",Math.min((a.page||1)*(a.pageSize||20),s)," ",l("of")," ",s]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)-1}),disabled:(a.page||1)<=1,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(hs,{size:18})}),t.jsxs("span",{className:"px-3 py-1 bg-white rounded-lg border text-sm font-bold",children:[a.page||1," / ",x]}),t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)+1}),disabled:(a.page||1)>=x,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(Ns,{size:18})})]})]})]})]})});const LCe=C.memo(({settings:e,onSave:s,t:a})=>{const[r,n]=C.useState(e),i=l=>{l.preventDefault(),s(r)};return t.jsx("div",{className:"max-w-2xl mx-auto animate-fade-in",children:t.jsxs("form",{onSubmit:i,className:"bg-white rounded-2xl shadow-lg p-6 space-y-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 border-b pb-4",children:a("supplier.settingsTitle")}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:a("supplier.defaultDeliveryTime")}),t.jsx("input",{type:"number",value:r.defaultDeliveryTime||3,onChange:l=>n({...r,defaultDeliveryTime:parseInt(l.target.value)}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-default-delivery"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a("supplier.deliveryDaysHint")})]})}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsx("h4",{className:"font-bold text-slate-700 mb-4",children:a("supplier.notifications")}),t.jsx("div",{className:"space-y-3",children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:r.notifyOnDeadlineApproaching,onChange:l=>n({...r,notifyOnDeadlineApproaching:l.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"checkbox-notify-deadline"}),t.jsx("span",{className:"text-slate-700",children:a("supplier.notifyDeadline")})]})})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{type:"submit",className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-save-settings",children:a("save")})})]})})}),FCe=C.memo(({product:e,onSave:s,onClose:a,t:r})=>{const[n,i]=C.useState({sku:(e==null?void 0:e.sku)||"",oemNumber:(e==null?void 0:e.oemNumber)||"",name:(e==null?void 0:e.name)||"",category:(e==null?void 0:e.category)||"",brand:(e==null?void 0:e.brand)||"",model:(e==null?void 0:e.model)||"",yearFrom:e==null?void 0:e.yearFrom,yearTo:e==null?void 0:e.yearTo,purchasePrice:(e==null?void 0:e.purchasePrice)||0,minOrderQty:(e==null?void 0:e.minOrderQty)||1,stock:(e==null?void 0:e.stock)||0,deliveryTime:(e==null?void 0:e.deliveryTime)||3}),l=o=>{o.preventDefault(),s(n)};return t.jsx(ds,{isOpen:!0,onClose:a,title:r(e?"supplier.editProduct":"supplier.addProduct"),children:t.jsxs("form",{onSubmit:l,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.sku")," *"]}),t.jsx("input",{type:"text",value:n.sku,onChange:o=>i({...n,sku:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,"data-testid":"input-product-sku"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.oemNumber")}),t.jsx("input",{type:"text",value:n.oemNumber,onChange:o=>i({...n,oemNumber:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-product-oem"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.productName")," *"]}),t.jsx("input",{type:"text",value:n.name,onChange:o=>i({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,"data-testid":"input-product-name"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.category")}),t.jsx("input",{type:"text",value:n.category,onChange:o=>i({...n,category:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-product-category"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.brand")}),t.jsx("input",{type:"text",value:n.brand,onChange:o=>i({...n,brand:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-product-brand"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.price")," *"]}),t.jsx("input",{type:"number",value:n.purchasePrice,onChange:o=>i({...n,purchasePrice:parseFloat(o.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,min:"0",step:"0.01","data-testid":"input-product-price"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.stock")}),t.jsx("input",{type:"number",value:n.stock,onChange:o=>i({...n,stock:parseInt(o.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",min:"0","data-testid":"input-product-stock"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.minOrder")}),t.jsx("input",{type:"number",value:n.minOrderQty,onChange:o=>i({...n,minOrderQty:parseInt(o.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",min:"1","data-testid":"input-product-min-order"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-cancel-product",children:r("cancel")}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-save-product",children:r(e?"save":"supplier.add")})]})]})})});C.memo(({request:e,onSubmit:s,onClose:a,t:r})=>{const[n,i]=C.useState(0),[l,o]=C.useState(e.quantity),[d,u]=C.useState(""),h=f=>{f.preventDefault(),s({requestId:e.id,quotedPrice:n,stockAvailable:l,notes:d})};return t.jsx(ds,{isOpen:!0,onClose:a,title:r("supplier.submitQuoteTitle"),children:t.jsxs("form",{onSubmit:h,className:"space-y-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:r("supplier.requestDetails")}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.part"),": "]}),t.jsx("span",{className:"font-medium",children:e.partName||e.partNumber})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.quantity"),": "]}),t.jsx("span",{className:"font-medium",children:e.quantity})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.customer"),": "]}),t.jsx("span",{className:"font-medium",children:e.customerName})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.deadline"),": "]}),t.jsx("span",{className:"font-medium",children:e.deadline?ms(e.deadline):"-"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.yourPrice")," *"]}),t.jsx("input",{type:"number",value:n,onChange:f=>i(parseFloat(f.target.value)),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,min:"0",step:"0.01","data-testid":"input-quote-price"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.availableStock")}),t.jsx("input",{type:"number",value:l,onChange:f=>o(parseInt(f.target.value)),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",min:"0","data-testid":"input-quote-stock"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.quoteNotes")}),t.jsx("textarea",{value:d,onChange:f=>u(f.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none resize-none",rows:3,"data-testid":"input-quote-notes"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-cancel-quote",children:r("cancel")}),t.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-submit-quote",children:[t.jsx(xi,{size:16}),r("supplier.sendQuote")]})]})]})})});const UCe=C.memo(({onImport:e,onClose:s,result:a,t:r})=>{const[n,i]=C.useState(null),[l,o]=C.useState(!1),d=async()=>{n&&(o(!0),await e(n),o(!1))};return t.jsx(ds,{isOpen:!0,onClose:s,title:r("supplier.importProducts"),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-emerald-500 transition-colors",children:[t.jsx(va,{size:40,className:"mx-auto mb-3 text-slate-400"}),t.jsx("p",{className:"text-slate-600 mb-2",children:r("supplier.dropExcelFile")}),t.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:u=>{var h;return i(((h=u.target.files)==null?void 0:h[0])||null)},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-bold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100","data-testid":"input-import-file"})]}),n&&t.jsxs("div",{className:"flex items-center gap-2 bg-emerald-50 p-3 rounded-lg",children:[t.jsx(yn,{size:20,className:"text-emerald-600"}),t.jsx("span",{className:"text-sm font-medium text-emerald-800",children:n.name})]}),a&&t.jsxs("div",{className:`p-4 rounded-lg ${a.success?"bg-green-50":"bg-red-50"}`,children:[t.jsx("h4",{className:`font-bold mb-2 ${a.success?"text-green-800":"text-red-800"}`,children:a.success?r("supplier.importComplete"):r("supplier.importFailed")}),a.success&&t.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[t.jsxs("p",{children:[r("supplier.totalRows"),": ",a.totalRows]}),t.jsxs("p",{children:[r("supplier.inserted"),": ",a.insertedCount]}),t.jsxs("p",{children:[r("supplier.updated"),": ",a.updatedCount]}),a.skippedCount>0&&t.jsxs("p",{children:[r("supplier.skipped"),": ",a.skippedCount]})]}),a.errors.length>0&&t.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[t.jsxs("p",{className:"font-bold",children:[r("supplier.errors"),":"]}),t.jsx("ul",{className:"list-disc list-inside max-h-32 overflow-y-auto",children:a.errors.slice(0,10).map((u,h)=>t.jsxs("li",{children:[r("supplier.row")," ",u.row,": ",u.message]},h))})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-close-import",children:r(a?"close":"cancel")}),!a&&t.jsxs("button",{onClick:d,disabled:!n||l,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-start-import",children:[l?t.jsx(ts,{size:16,className:"animate-spin"}):t.jsx(va,{size:16}),r(l?"supplier.importing":"supplier.startImport")]})]})]})})}),zCe=C.memo(({supplierId:e,t:s,currentUser:a})=>{const[r,n]=C.useState([]),[i,l]=C.useState(!0),[o,d]=C.useState(!1),[u,h]=C.useState(null),[f,x]=C.useState(!1),[p,v]=C.useState(""),[b,y]=C.useState([]),[j,w]=C.useState(""),[S,O]=C.useState(!1),[_,E]=C.useState(!1),{addToast:A}=It(),{i18n:D}=Kt(),L=Uo(D.language)==="rtl",B=async()=>{var W;if(!(a!=null&&a.isSupplier)&&(a==null?void 0:a.role)!=="SUPPLIER")return console.error("Current user is not a supplier"),null;const P=`backend_token_${(a==null?void 0:a.id)||"default"}`;let G=localStorage.getItem(P);if(G)return G;const Y=a==null?void 0:a.clientId;if(!Y)return console.error("No clientId found for current user"),null;try{const ee=Y.replace("user-",""),M=await(await fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:Y,password:ee,loginType:"owner"})})).json();if(M.success&&((W=M.data)!=null&&W.accessToken))return localStorage.setItem(P,M.data.accessToken),M.data.accessToken}catch(ee){console.error("Failed to get backend token:",ee)}return null};C.useEffect(()=>{I(),T()},[e,a==null?void 0:a.id]);const I=async()=>{l(!0);try{const P=await B();if(!P){n([]),O(!1),E(!0),l(!1);return}const G={"Content-Type":"application/json"};G.Authorization=`Bearer ${P}`;const W=await(await fetch("/api/v1/suppliers/me/sub-users?page=1&limit=50",{headers:G})).json();W.success&&W.data?(n(W.data),O(!0)):(n([]),O(!1)),E(!0)}catch(P){console.error("Error loading employees:",P),n([]),E(!0)}finally{l(!1)}},T=async()=>{try{const P=await B(),G={"Content-Type":"application/json"};P&&(G.Authorization=`Bearer ${P}`);const W=await(await fetch("/api/v1/suppliers/me/sub-users/roles",{headers:G})).json();W.success&&W.data?y(W.data):y([{code:"SUPPLIER_OWNER",name:"Supplier Owner",nameAr:" "},{code:"SUPPLIER_MANAGER",name:"Supplier Manager",nameAr:" "},{code:"SUPPLIER_STAFF",name:"Supplier Staff",nameAr:" "}])}catch(P){console.error("Error loading roles:",P),y([{code:"SUPPLIER_OWNER",name:"Supplier Owner",nameAr:" "},{code:"SUPPLIER_MANAGER",name:"Supplier Manager",nameAr:" "},{code:"SUPPLIER_STAFF",name:"Supplier Staff",nameAr:" "}])}},z=async()=>{if(u){x(!0);try{const P=await B(),G={"Content-Type":"application/json"};if(P&&(G.Authorization=`Bearer ${P}`),u.id){const W=await(await fetch(`/api/v1/suppliers/me/sub-users/${u.id}`,{method:"PUT",headers:G,body:JSON.stringify({roleCode:u.roleCode,isActive:u.isActive,jobTitle:u.jobTitle})})).json();W.success?(A(L?"   ":"Member updated successfully","success"),d(!1),h(null),I()):A(W.error||s("error"),"error")}else{const W=await(await fetch("/api/v1/suppliers/me/sub-users",{method:"POST",headers:G,body:JSON.stringify({name:u.name,email:u.email,phone:u.phone,roleCode:u.roleCode,jobTitle:u.jobTitle,password:j||void 0})})).json();W.success?(A(L?"   ":"Member added successfully","success"),d(!1),h(null),w(""),I()):A(W.error||s("error"),"error")}}catch(P){console.error("Error saving employee:",P),A(s("error"),"error")}finally{x(!1)}}},k=async P=>{try{const G=await B(),Y={"Content-Type":"application/json"};G&&(Y.Authorization=`Bearer ${G}`);const ee=await(await fetch(`/api/v1/suppliers/me/sub-users/${P.id}`,{method:"PUT",headers:Y,body:JSON.stringify({isActive:!P.isActive})})).json();ee.success?(A(P.isActive?L?"  ":"Member deactivated":L?"  ":"Member activated","success"),I()):A(ee.error||s("error"),"error")}catch{A(s("error"),"error")}},F=r.filter(P=>P.name.toLowerCase().includes(p.toLowerCase())||P.email&&P.email.toLowerCase().includes(p.toLowerCase()));return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[t.jsxs("div",{className:"relative flex-1 w-full sm:max-w-md",children:[t.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:s("search"),value:p,onChange:P=>v(P.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl bg-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-search-employees"})]}),S&&t.jsxs("button",{onClick:()=>{h({name:"",email:"",phone:"",roleCode:"SUPPLIER_STAFF",isActive:!0,isOwner:!1}),w(""),d(!0)},className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-add-employee",children:[t.jsx(kt,{size:18}),s("supplier.addEmployee")]})]}),i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(ts,{className:"h-8 w-8 animate-spin text-emerald-600"})}):F.length===0?t.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl border border-slate-200",children:[t.jsx(Wt,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-slate-600 mb-2",children:s("supplier.noEmployees")}),t.jsx("p",{className:"text-slate-500",children:s("supplier.addFirstEmployee")})]}):t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("name")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("email")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("phone")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("role")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("status")}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-700"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:F.map(P=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-employee-${P.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-bold",children:P.name.charAt(0).toUpperCase()}),t.jsx("span",{className:"font-medium text-slate-900",children:P.name})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:P.email}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:P.phone||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 font-medium inline-block w-fit",children:L?P.roleNameAr||P.roleName||P.roleCode:P.roleName||P.roleCode}),P.isOwner&&t.jsx("span",{className:"px-2 py-0.5 mt-1 text-[10px] rounded-full bg-yellow-100 text-yellow-700 font-bold inline-block w-fit",children:L?"":"Owner"})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${P.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:P.isActive?s("active"):s("inactive")})}),t.jsx("td",{className:"px-4 py-3",children:S&&t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>{h(P),d(!0)},className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-employee-${P.id}`,children:t.jsx(Ma,{className:"h-4 w-4"})}),!P.isOwner&&t.jsx("button",{onClick:()=>k(P),className:`p-2 rounded-lg transition-colors ${P.isActive?"text-slate-500 hover:text-red-600 hover:bg-red-50":"text-slate-500 hover:text-green-600 hover:bg-green-50"}`,"data-testid":`button-toggle-employee-${P.id}`,title:P.isActive?L?"":"Deactivate":L?"":"Activate",children:P.isActive?t.jsx(sa,{className:"h-4 w-4"}):t.jsx(Mt,{className:"h-4 w-4"})})]})})]},P.id))})]})})}),o&&u&&t.jsxs(ds,{isOpen:!0,onClose:()=>{d(!1),h(null)},title:u.id?s("supplier.editEmployee"):s("supplier.addEmployee"),children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s("name")," *"]}),t.jsx("input",{type:"text",value:u.name,onChange:P=>h({...u,name:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-name"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s("email")," *"]}),t.jsx("input",{type:"email",value:u.email,onChange:P=>h({...u,email:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:s("phone")}),t.jsx("input",{type:"tel",value:u.phone||"",onChange:P=>h({...u,phone:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-phone"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s("role")," *"]}),t.jsxs("select",{value:u.roleCode||"",onChange:P=>h({...u,roleCode:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"select-employee-role",children:[t.jsx("option",{value:"",children:L?" ":"Select Role"}),b.map(P=>t.jsx("option",{value:P.code,children:L&&P.nameAr||P.name},P.code))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:L?" ":"Job Title"}),t.jsx("input",{type:"text",value:u.jobTitle||"",onChange:P=>h({...u,jobTitle:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-job-title"})]}),!u.id&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:L?" ":"Password"}),t.jsx("input",{type:"password",value:j,onChange:P=>w(P.target.value),placeholder:L?" -   ":"Optional - auto-generated if empty",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-password"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"employee-active",checked:u.isActive??!0,onChange:P=>h({...u,isActive:P.target.checked}),className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"checkbox-employee-active"}),t.jsx("label",{htmlFor:"employee-active",className:"text-sm text-slate-700",children:s("active")})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",children:[t.jsx("button",{onClick:()=>{d(!1),h(null),w("")},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-cancel-employee",children:s("cancel")}),t.jsxs("button",{onClick:z,disabled:f||!u.name||!u.roleCode,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors disabled:opacity-50","data-testid":"button-save-employee",children:[f&&t.jsx(ts,{size:16,className:"animate-spin"}),s(f?"saving":"save")]})]})]})]})}),BCe=C.memo(({supplierId:e,t:s})=>{const[a,r]=C.useState([]),[n,i]=C.useState([]),[l,o]=C.useState(!0),[d,u]=C.useState(""),[h,f]=C.useState(!1),[x,p]=C.useState(null),[v,b]=C.useState("ALL"),{addToast:y}=It();C.useRef(null);const j=C.useRef(null),w="sini_product_images";C.useEffect(()=>{(async()=>{o(!0);try{const B=await he.getSupplierProducts(e,{});r(B.items||[]);const I=localStorage.getItem(w),T=I?JSON.parse(I):[];i(T)}catch(B){console.error("Failed to load data",B)}finally{o(!1)}})()},[e]);const S=L=>{localStorage.setItem(w,JSON.stringify(L)),i(L)},O=async(L,B)=>{try{const{dataUrl:I,width:T,height:z,blob:k}=await QF(L),F=await KF(I),P=(B==null?void 0:B.trim().toUpperCase())||Ap(L.name)||"",G=a.find(Y=>{var W;return((W=Y.oemNumber||Y.sku)==null?void 0:W.toUpperCase())===P});return{id:JF(),partNumber:P,fileName:L.name,fileUrl:I,thumbnailUrl:F,originalSize:L.size,compressedSize:k.size,width:T,height:z,status:"PENDING",uploadedBy:e,uploaderType:"SUPPLIER_LOCAL",uploaderName:"Supplier",isAutoMatched:!B,isLinkedToProduct:!!G,createdAt:new Date().toISOString(),adminNotes:void 0}}catch(I){return console.error(`Failed to process ${L.name}:`,I),null}},_=async(L,B)=>{f(!0);try{const I=await O(B,L);I&&(S([I,...n]),y(s("supplier.imageUploaded","     "),"success"))}catch{y(s("supplier.imageUploadError","   "),"error")}finally{f(!1)}},E=async L=>{var I;const B=(I=L.target.files)==null?void 0:I[0];if(B){if(!B.name.toLowerCase().endsWith(".zip")){y("   ZIP","error");return}f(!0),p({current:0,total:100,phase:"  ..."});try{const T=await GF.loadAsync(B),z=[],k=Object.entries(T.files);let F=0;for(const[Y,W]of k){if(W.dir)continue;const ee=Y.toLowerCase().split(".").pop();if(["jpg","jpeg","png","webp","gif","bmp"].includes(ee||"")){const H=await W.async("blob"),M=Y.split("/").pop()||Y;z.push({name:M,data:H})}F++,F%10===0&&p({current:Math.round(F/k.length*20),total:100,phase:"  ..."})}if(z.length===0){y("       ","error"),f(!1),p(null);return}const P=[];let G=0;for(const Y of z){p({current:20+Math.round(G/z.length*80),total:100,phase:`: ${Y.name}`});const W=new File([Y.data],Y.name,{type:Y.data.type}),ee=await O(W);ee&&P.push(ee),G++}S([...P,...n]),y(`  ${P.length}    ZIP   `,"success")}catch(T){console.error("ZIP Error:",T),y("    ZIP","error")}finally{f(!1),p(null),j.current&&(j.current.value="")}}},A=a.filter(L=>{var B,I,T;return!d||((B=L.sku)==null?void 0:B.toLowerCase().includes(d.toLowerCase()))||((I=L.oemNumber)==null?void 0:I.toLowerCase().includes(d.toLowerCase()))||((T=L.name)==null?void 0:T.toLowerCase().includes(d.toLowerCase()))}),D=L=>L?n.filter(B=>{var I;return((I=B.partNumber)==null?void 0:I.toUpperCase())===L.toUpperCase()}):[];return l?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(ts,{className:"w-10 h-10 text-emerald-600 animate-spin"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(va,{size:20,className:"text-emerald-600"}),s("supplier.uploadActions"," ")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{onClick:()=>{var L;return!h&&((L=j.current)==null?void 0:L.click())},className:`border-2 border-dashed border-slate-300 rounded-xl p-6 flex flex-col items-center justify-center text-center cursor-pointer transition-colors ${h?"opacity-50 cursor-not-allowed":"hover:border-emerald-500 hover:bg-emerald-50"}`,children:[t.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-3",children:t.jsx($S,{size:24,className:"text-purple-600"})}),t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:s("supplier.uploadZip","   (ZIP)")}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:s("supplier.zipHint","        ")}),t.jsx("input",{ref:j,type:"file",accept:".zip",className:"hidden",onChange:E,disabled:h}),t.jsx("button",{disabled:h,className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-bold",children:s("supplier.selectFile"," ")})]}),t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-6 flex flex-col items-center justify-center text-center bg-slate-50",children:[t.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-full flex items-center justify-center mb-3",children:t.jsx(Li,{size:24,className:"text-slate-500"})}),t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:s("supplier.bulkManage"," ")}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:s("supplier.bulkHint","        ")})]})]}),h&&x&&t.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-bold text-slate-700",children:x.phase}),t.jsxs("span",{className:"text-sm font-mono text-slate-500",children:[Math.round(x.current),"%"]})]}),t.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${x.current}%`}})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.totalProducts"," ")}),t.jsx("p",{className:"text-2xl font-black text-slate-800",children:a.length})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.imagesPending"," ")}),t.jsx("p",{className:"text-2xl font-black text-amber-500",children:n.filter(L=>L.status==="PENDING"&&L.uploadedBy===e).length})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.imagesApproved"," ")}),t.jsx("p",{className:"text-2xl font-black text-emerald-500",children:n.filter(L=>L.status==="APPROVED"&&L.uploadedBy===e).length})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.imagesRejected"," ")}),t.jsx("p",{className:"text-2xl font-black text-red-500",children:n.filter(L=>L.status==="REJECTED"&&L.uploadedBy===e).length})]})]}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:t.jsxs("div",{className:"relative",children:[t.jsx(Lt,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:d,onChange:L=>u(L.target.value),placeholder:s("supplier.searchProducts","  ..."),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none"})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Li,{size:18}),s("supplier.productImages"," ")]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600",children:s("supplier.productInfo"," ")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600",children:s("supplier.currentImages"," ")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-600",children:s("actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:A.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:3,className:"px-4 py-12 text-center text-slate-400",children:[t.jsx(Yt,{size:40,className:"mx-auto mb-3 opacity-50"}),t.jsx("p",{children:s("supplier.noProducts","  ")})]})}):A.slice(0,20).map(L=>{const B=L.oemNumber||L.sku,I=D(B);return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-mono font-bold text-slate-800",children:L.oemNumber}),t.jsx("span",{className:"text-xs text-slate-500",children:L.sku}),t.jsx("span",{className:"text-sm text-slate-600",children:L.name})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:I.length>0?I.map(T=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:T.thumbnailUrl||T.fileUrl,alt:"product",className:`w-12 h-12 object-contain bg-white rounded-lg border-2 ${T.status==="APPROVED"?"border-emerald-500":T.status==="REJECTED"?"border-red-500":"border-amber-500"}`,onError:z=>{z.target.src=ICe}}),t.jsx("div",{className:`absolute -top-2 -right-2 w-4 h-4 rounded-full flex items-center justify-center text-[10px] text-white ${T.status==="APPROVED"?"bg-emerald-500":T.status==="REJECTED"?"bg-red-500":"bg-amber-500"}`,children:T.status==="APPROVED"?t.jsx(Mt,{size:10}):T.status==="REJECTED"?t.jsx(sa,{size:10}):t.jsx(is,{size:10})})]},T.id)):t.jsx("span",{className:"text-xs text-slate-400 italic",children:s("supplier.noImages","  ")})})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("label",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-lg text-xs font-bold cursor-pointer hover:bg-emerald-100 transition-colors",children:[t.jsx(kt,{size:14}),s("supplier.addImage"," "),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:T=>{var k;const z=(k=T.target.files)==null?void 0:k[0];z&&B&&_(B,z)}})]})})]},L.id)})})]})}),A.length>20&&t.jsx("div",{className:"p-3 border-t border-slate-100 text-center text-sm text-slate-500",children:s("supplier.showingFirst20","   20  ")})]})]})}),$Ce=({toast:e,onDismiss:s})=>{const{dir:a}=Hs(),r={success:t.jsx(Mt,{className:"w-5 h-5 text-green-600"}),error:t.jsx(sa,{className:"w-5 h-5 text-red-600"}),info:t.jsx(mi,{className:"w-5 h-5 text-blue-600"})},n={success:"border-green-500 bg-white shadow-green-100",error:"border-red-500 bg-white shadow-red-100",info:"border-blue-500 bg-white shadow-blue-100"};return t.jsxs("div",{className:`
        pointer-events-auto 
        flex items-center gap-3 w-auto min-w-[320px] max-w-md
        rounded-lg border-l-4 rtl:border-l-0 rtl:border-r-4 shadow-xl ring-1 ring-black ring-opacity-5 
        px-5 py-4 transform transition-all duration-500 ease-out animate-slide-up
        hover:scale-105 cursor-pointer
        ${n[e.type]}
      `,onClick:()=>s(e.id),role:"alert",children:[t.jsx("div",{className:"flex-shrink-0 animate-pulse",children:r[e.type]}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-bold text-gray-800 leading-snug",children:e.message})}),t.jsx("div",{className:"flex flex-shrink-0 ml-1 rtl:mr-1",children:t.jsxs("button",{className:"inline-flex rounded-md p-1 text-gray-400 hover:text-gray-600 focus:outline-none transition-colors",onClick:i=>{i.stopPropagation(),s(e.id)},children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx(vt,{className:"h-4 w-4"})]})})]})},qCe=()=>{const{toasts:e,removeToast:s}=It();return e.length===0?null:t.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col gap-3 items-center pointer-events-none w-full px-4",children:e.map(a=>t.jsx($Ce,{toast:a,onDismiss:s},a.id))})};function HCe({userId:e="guest",userName:s}){const{t:a}=Kt(),{language:r,dir:n}=Hs(),{addToast:i}=It(),l=n==="rtl",[o,d]=C.useState(!1),[u,h]=C.useState(!1),[f,x]=C.useState([]),[p,v]=C.useState(""),[b,y]=C.useState(!1),[j,w]=C.useState(null),S=C.useRef(null),O=C.useRef(null),_=()=>{var z;(z=S.current)==null||z.scrollIntoView({behavior:"smooth"})};C.useEffect(()=>{_()},[f]),C.useEffect(()=>{o&&!u&&O.current&&O.current.focus()},[o,u]);const E=()=>{d(!0),h(!1)},A=()=>{d(!1)},D=()=>{h(!u)},L=()=>{x([]),w(null)},B=async()=>{if(!p.trim()||b)return;const z={id:`msg-${Date.now()}`,role:"user",content:p.trim(),timestamp:new Date().toISOString()};x(k=>[...k,z]),v(""),y(!0);try{const k=r==="ar"?`     SINI CAR    B2B.
  :
-    
-   
-  
-  
${s?` : ${s}`:""}
  .`:`You are a friendly AI assistant for SINI CAR B2B auto parts platform.
Help customers with:
- Finding auto parts
- Order and shipping information
- Price comparisons
- General inquiries
${s?`Customer name: ${s}`:""}
Be concise and helpful.`,F=await he.sendAIMessage({message:p.trim(),conversationHistory:f,systemPrompt:k,userId:e,language:r}),P={id:`msg-${Date.now()}`,role:"assistant",content:F.content,timestamp:new Date().toISOString()};if(x(G=>[...G,P]),!j){const G=`conv-${Date.now()}`;w(G);const Y={id:G,userId:e,title:p.trim().substring(0,50),messages:[...f,z,P],provider:"openai",model:"gpt-4o-mini",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),totalTokensUsed:F.tokensUsed||0};await he.saveAIConversation(Y)}}catch(k){console.error("AI Error:",k),i(a("ai.errorMessage","    "),"error");const F={id:`msg-${Date.now()}`,role:"assistant",content:r==="ar"?"  .    .":"Sorry, an error occurred. Please try again.",timestamp:new Date().toISOString()};x(P=>[...P,F])}finally{y(!1)}},I=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),B())},T=[{label:r==="ar"?"  ":"Find a part",query:r==="ar"?"    ":"I want to find an auto part"},{label:r==="ar"?" ":"Order status",query:r==="ar"?"  ":"What is my order status?"},{label:r==="ar"?" ":"Compare prices",query:r==="ar"?"   ":"Help me compare prices"}];return o?t.jsxs("div",{className:`fixed bottom-6 ${l?"left-6":"right-6"} z-50 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden transition-all duration-300 ${u?"h-14":"h-[500px]"}`,"data-testid":"ai-assistant-container",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ln,{className:"w-5 h-5"}),t.jsx("span",{className:"font-semibold text-sm",children:a("ai.assistantName"," SINI ")})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:L,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",title:a("ai.clearChat"," "),"data-testid":"button-clear-chat",children:t.jsx(At,{className:"w-4 h-4"})}),t.jsx("button",{onClick:D,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-minimize-chat",children:u?t.jsx(vae,{className:"w-4 h-4"}):t.jsx(Eae,{className:"w-4 h-4"})}),t.jsx("button",{onClick:A,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-chat",children:t.jsx(vt,{className:"w-4 h-4"})})]})]}),!u&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 h-[380px] bg-slate-50",children:[f.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ln,{className:"w-12 h-12 mx-auto text-blue-500 mb-3"}),t.jsx("p",{className:"text-slate-600 text-sm mb-4",children:a("ai.welcomeMessage","!    ")}),t.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:T.map((z,k)=>t.jsx("button",{onClick:()=>{v(z.query),setTimeout(()=>B(),100)},className:"px-3 py-1.5 text-xs bg-white border border-slate-200 rounded-full hover:bg-blue-50 hover:border-blue-300 transition-colors","data-testid":`button-quick-action-${k}`,children:z.label},k))})]}):f.map(z=>t.jsx("div",{className:`flex ${z.role==="user"?"justify-end":"justify-start"}`,children:t.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${z.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white border border-slate-200 text-slate-800 rounded-bl-md"}`,children:t.jsxs("div",{className:"flex items-start gap-2",children:[z.role==="assistant"&&t.jsx(Ln,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),t.jsx("p",{className:"text-sm whitespace-pre-wrap",children:z.content}),z.role==="user"&&t.jsx(nn,{className:"w-4 h-4 text-blue-200 mt-0.5 flex-shrink-0"})]})})},z.id)),b&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl rounded-bl-md px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ln,{className:"w-4 h-4 text-blue-500"}),t.jsx(ts,{className:"w-4 h-4 animate-spin text-blue-500"}),t.jsx("span",{className:"text-sm text-slate-500",children:a("ai.thinking"," ...")})]})})}),t.jsx("div",{ref:S})]}),t.jsx("div",{className:"p-3 border-t border-slate-200 bg-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{ref:O,type:"text",value:p,onChange:z=>v(z.target.value),onKeyDown:I,placeholder:a("ai.inputPlaceholder"," ..."),className:"flex-1 px-4 py-2 border border-slate-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:b,"data-testid":"input-ai-message"}),t.jsx("button",{onClick:B,disabled:!p.trim()||b,className:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-send-message",children:t.jsx(xi,{className:`w-4 h-4 ${l?"rotate-180":""}`})})]})})]})]}):t.jsxs("button",{onClick:E,className:`fixed bottom-6 ${l?"left-6":"right-6"} z-50 w-14 h-14 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group`,"data-testid":"button-open-ai-assistant",children:[t.jsx(Rr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),t.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]})}const dB=C.createContext(void 0),zM="sini_car_programming_mode";function VCe({children:e}){const[s,a]=C.useState(()=>localStorage.getItem(zM)==="true"),[r,n]=C.useState("dashboard"),[i,l]=C.useState(!1),[o,d]=C.useState("command"),[u,h]=C.useState(!1);C.useEffect(()=>{localStorage.setItem(zM,String(s))},[s]);const f=()=>{a(w=>(w&&l(!1),!w))},x=()=>a(!0),p=()=>{l(!1),a(!1)},v=(w,S)=>{d(w||"command"),h(S||!1),l(!0)},b=()=>l(!1),y=()=>l(w=>!w),j=()=>h(!1);return t.jsx(dB.Provider,{value:{isProgrammingMode:s,toggleProgrammingMode:f,enableProgrammingMode:x,disableProgrammingMode:p,currentPage:r,setCurrentPage:n,isCommandCenterOpen:i,openCommandCenter:v,closeCommandCenter:b,toggleCommandCenter:y,initialTab:o,shouldAutoRunDiagnostics:u,clearAutoRunDiagnostics:j},children:e})}function uB(){const e=C.useContext(dB);if(!e)throw new Error("useProgrammingMode must be used within ProgrammingModeProvider");return e}function GCe({onOpenCommandCenter:e}){const{t:s}=Kt(),{language:a}=Hs(),r=a==="ar",{isProgrammingMode:n,toggleProgrammingMode:i,currentPage:l,isCommandCenterOpen:o,openCommandCenter:d}=uB(),[u,h]=C.useState(!1),[f,x]=C.useState(!1),[p,v]=C.useState(!0);if(C.useEffect(()=>{const y=setTimeout(()=>v(!1),5e3);return()=>clearTimeout(y)},[]),!n)return t.jsx("div",{className:`fixed bottom-6 z-[9999] ${r?"left-6":"right-6"}`,children:t.jsxs("button",{onClick:i,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),className:"group relative w-12 h-12 bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-full shadow-lg hover:shadow-cyan-500/20 transition-all duration-300 hover:scale-105 flex items-center justify-center","data-testid":"button-enable-programming-mode",children:[t.jsx(mF,{className:"w-5 h-5 text-slate-400 group-hover:text-cyan-400 transition-colors"}),f&&t.jsxs("div",{className:`absolute bottom-full mb-2 px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-lg text-xs text-white whitespace-nowrap ${r?"right-0":"left-0"}`,children:[r?"  ":"Enable Programming Mode",t.jsx("div",{className:`absolute top-full ${r?"right-4":"left-4"} w-2 h-2 bg-slate-800 border-r border-b border-slate-700 transform rotate-45 -translate-y-1`})]})]})});const b=[{id:"command",icon:wf,label:r?" ":"Command Center",color:"from-cyan-500 to-blue-600",action:()=>{d("command"),h(!1)}},{id:"scan",icon:Bs,label:r?" ":"Scan System",color:"from-green-500 to-emerald-600",action:()=>{d("diagnostics",!0),h(!1)}},{id:"files",icon:rb,label:r?" ":"Explore Files",color:"from-purple-500 to-violet-600",action:()=>{d("files"),h(!1)}},{id:"settings",icon:aa,label:r?" AI":"AI Settings",color:"from-amber-500 to-orange-600",action:()=>{d("history"),h(!1)}}];return t.jsxs("div",{className:`fixed bottom-6 z-[9999] ${r?"left-6":"right-6"}`,children:[u&&t.jsxs("div",{className:"absolute bottom-16 flex flex-col gap-3 animate-fade-in",children:[b.map((y,j)=>t.jsxs("button",{onClick:y.action,className:`group relative flex items-center gap-3 px-4 py-2.5 bg-gradient-to-r ${y.color} rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105`,style:{animationDelay:`${j*50}ms`},"data-testid":`button-quick-action-${y.id}`,children:[t.jsx(y.icon,{className:"w-5 h-5 text-white"}),t.jsx("span",{className:"text-sm font-medium text-white whitespace-nowrap",children:y.label})]},y.id)),t.jsxs("button",{onClick:()=>{i(),h(!1)},className:"group flex items-center gap-3 px-4 py-2.5 bg-gradient-to-r from-red-500 to-rose-600 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105","data-testid":"button-disable-programming-mode",children:[t.jsx(id,{className:"w-5 h-5 text-white"}),t.jsx("span",{className:"text-sm font-medium text-white whitespace-nowrap",children:r?"  ":"Exit Programming Mode"})]})]}),t.jsxs("div",{className:"relative",children:[p&&t.jsx("div",{className:"absolute inset-0 bg-cyan-500 rounded-full animate-ping opacity-30"}),t.jsxs("button",{onClick:()=>h(!u),className:`relative w-14 h-14 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all duration-300 hover:scale-105 flex items-center justify-center group ${u?"rotate-180":""}`,"data-testid":"button-floating-ai-main",children:[u?t.jsx(Qr,{className:"w-6 h-6 text-white transition-transform"}):t.jsx(Ln,{className:"w-6 h-6 text-white group-hover:animate-bounce"}),t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:t.jsx(rl,{className:"w-2.5 h-2.5 text-white"})})]})]}),t.jsxs("div",{className:`absolute ${r?"right-16":"left-16"} bottom-2 px-3 py-1.5 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/30 rounded-lg`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs font-medium text-cyan-400 whitespace-nowrap",children:r?"  ":"Programming Mode Active"})]}),t.jsx("div",{className:"text-[10px] text-slate-400 mt-0.5",children:r?`: ${l}`:`Page: ${l}`})]})]})}const WCe=[{name:"Authentication",nameAr:" ",description:"Handles user login, logout, session management, and password reset",descriptionAr:"          ",files:["src/App.tsx","src/components/Register.tsx","backend/src/modules/auth/"],mainEntry:"src/App.tsx"},{name:"Customer Dashboard",nameAr:"  ",description:"Main customer portal with product search, cart, orders, and organization management",descriptionAr:"       ",files:["src/components/Dashboard.tsx","src/components/ProductSearchPage.tsx","src/components/OrdersPage.tsx"],mainEntry:"src/components/Dashboard.tsx"},{name:"Admin Dashboard",nameAr:"  ",description:"Administrative control panel with customer management, orders, products, and settings",descriptionAr:"       ",files:["src/components/AdminDashboard.tsx","src/components/AdminCustomersPage.tsx","src/components/AdminOrdersManager.tsx"],mainEntry:"src/components/AdminDashboard.tsx"},{name:"Supplier Portal",nameAr:" ",description:"Portal for suppliers to manage products, quotes, and catalog",descriptionAr:"      ",files:["src/components/SupplierPortal.tsx","src/components/SupplierInstallmentPage.tsx"],mainEntry:"src/components/SupplierPortal.tsx"},{name:"Trader Tools",nameAr:" ",description:"Advanced tools including VIN extractor, price comparison, and PDF to Excel converter",descriptionAr:"    VIN    PDF  Excel",files:["src/components/TraderToolsHub.tsx","src/components/VinExtractorTool.tsx","src/components/PriceComparisonTool.tsx","src/components/PdfToExcelTool.tsx"],mainEntry:"src/components/TraderToolsHub.tsx"},{name:"Installment System",nameAr:" ",description:"Wholesale installment purchase system with credit profiles and payment schedules",descriptionAr:"        ",files:["src/components/AdminInstallmentsPage.tsx","src/components/CustomerInstallmentPage.tsx","src/components/SupplierInstallmentPage.tsx"],mainEntry:"src/components/AdminInstallmentsPage.tsx"},{name:"Marketing & Ads",nameAr:" ",description:"Marketing campaigns, ads management, and promotional content",descriptionAr:"     ",files:["src/components/AdminMarketingCenter.tsx","src/components/AdminAdvertisingPage.tsx","src/components/MarketingDisplay.tsx"],mainEntry:"src/components/AdminMarketingCenter.tsx"},{name:"AI System",nameAr:"  ",description:"AI assistant, command center, and AI training settings",descriptionAr:" AI     AI",files:["src/components/AIAssistant.tsx","src/components/AdminAICommandCenter.tsx","src/components/AdminAISettings.tsx","src/components/AdminAITrainingPage.tsx"],mainEntry:"src/components/AdminAICommandCenter.tsx"},{name:"Messaging",nameAr:" ",description:"Messaging center with WhatsApp, email, and notification templates",descriptionAr:"       ",files:["src/components/AdminMessagingCenter.tsx","backend/src/modules/messaging/"],mainEntry:"src/components/AdminMessagingCenter.tsx"},{name:"Permissions",nameAr:" ",description:"Role-based access control and permission management",descriptionAr:"       ",files:["src/components/AdminPermissionCenter.tsx","src/services/PermissionContext.tsx"],mainEntry:"src/components/AdminPermissionCenter.tsx"}],QCe=[{id:"api_connectivity",name:"API Connectivity",nameAr:" API",check:"Verify backend API is responding"},{id:"database_status",name:"Database Status",nameAr:"  ",check:"Check database connection and integrity"},{id:"localstorage_usage",name:"LocalStorage Usage",nameAr:"  ",check:"Monitor localStorage capacity"},{id:"translation_completeness",name:"Translation Coverage",nameAr:" ",check:"Check for missing translations"},{id:"component_errors",name:"Component Errors",nameAr:" ",check:"Detect React component errors"},{id:"security_audit",name:"Security Audit",nameAr:" ",check:"Check for security vulnerabilities"}],BM="ai_programming_command_history";function KCe(){const{t:e}=Kt(),{language:s}=Hs(),{showToast:a}=It(),{isCommandCenterOpen:r,closeCommandCenter:n,currentPage:i,initialTab:l,shouldAutoRunDiagnostics:o,clearAutoRunDiagnostics:d}=uB(),u=s==="ar",[h,f]=C.useState("command");C.useEffect(()=>{r&&f(l)},[r,l]);const[x,p]=C.useState(""),[v,b]=C.useState(!1),[y,j]=C.useState(null),[w,S]=C.useState([]),[O,_]=C.useState([]),[E,A]=C.useState(!1),[D,L]=C.useState(!1),[B,I]=C.useState(""),[T,z]=C.useState(null),k=C.useRef(null);C.useEffect(()=>{const V=localStorage.getItem(BM);if(V)try{S(JSON.parse(V))}catch{console.error("Failed to load command history")}},[]),C.useEffect(()=>{w.length>0&&localStorage.setItem(BM,JSON.stringify(w.slice(0,50)))},[w]);const F=V=>{S(te=>[V,...te].slice(0,50))},P=async V=>{await new Promise(fe=>setTimeout(fe,800));const te=V.toLowerCase();let Z="unknown",ue=" ",re="Analyzing command...",J="  ...",Ne=[],q=.5,ce="low";if(te.includes("create page")||te.includes("add page")||V.includes(" ")||V.includes(" ")){Z="Create Page",ue=" ";const fe=V.replace(/ |create page|add page| /gi,"").trim()||"New Page";re=`Create a new page: "${fe}"`,J=`  : "${fe}"`,Ne=[{type:"create",target:"Dynamic Page",details:`Page "${fe}" will be created`,detailsAr:`   "${fe}"`}],q=.9,ce="low"}else te.includes("add user")||V.includes(" ")?(Z="Add User",ue=" ",re="Add a new user to the system",J="   ",Ne=[{type:"create",target:"User",details:"New user will be created",detailsAr:"   "}],q=.85,ce="medium"):te.includes("change color")||V.includes(" ")||V.includes(" ")?(Z="Change Theme",ue=" ",re="Modify site color scheme",J="  ",Ne=[{type:"update",target:"Settings",details:"Theme colors will be updated",detailsAr:"   "}],q=.8,ce="low"):te.includes("scan")||te.includes("check")||V.includes("")||V.includes("")?(Z="System Scan",ue=" ",re="Perform system diagnostics",J="   ",Ne=[{type:"update",target:"Diagnostics",details:"System will be scanned for issues",detailsAr:"     "}],q=.95,ce="low"):te.includes("delete")||te.includes("remove")||V.includes("")||V.includes("")?(Z="Delete",ue="",re="Delete item from system",J="   ",Ne=[{type:"delete",target:"Item",details:"Item will be permanently deleted",detailsAr:"   "}],q=.7,ce="high"):(re=`Execute: "${V}"`,J=`: "${V}"`,Ne=[{type:"update",target:"System",details:"Custom command will be processed",detailsAr:"   "}]);return{id:`preview_${Date.now()}`,command:V,action:Z,actionAr:ue,description:re,descriptionAr:J,changes:Ne,confidence:q,estimatedTime:"< 5s",risk:ce}},G=async()=>{if(x.trim()){b(!0);try{const V=await P(x);j(V),f("preview")}catch{a(u?"   ":"Failed to parse command","error")}b(!1)}},Y=async()=>{if(!y)return;b(!0);const V={id:`cmd_${Date.now()}`,command:y.command,status:"executed",result:`Successfully executed: ${y.action}`,resultAr:`  : ${y.actionAr}`,timestamp:new Date().toISOString(),executedAt:new Date().toISOString()};await new Promise(te=>setTimeout(te,1e3)),F(V),a(u?"   !":"Command executed successfully!","success"),j(null),p(""),f("command"),b(!1)},W=()=>{if(!y)return;const V={id:`cmd_${Date.now()}`,command:y.command,status:"rejected",timestamp:new Date().toISOString()};F(V),a(u?"  ":"Command rejected","info"),j(null),f("command")},ee=()=>{y&&(I(y.command),L(!0))},H=async()=>{L(!1),p(B),b(!0);const V=await P(B);j(V),b(!1)},M=async()=>{A(!0),f("diagnostics");const V=QCe.map(te=>({id:te.id,name:te.name,nameAr:te.nameAr,status:"checking"}));_(V);for(let te=0;te<V.length;te++){await new Promise(re=>setTimeout(re,500));const Z=["passing","passing","passing","warning","passing","passing"],ue=[{en:"All endpoints responding",ar:"  "},{en:"Connected and healthy",ar:" "},{en:`Using ${Math.round(Math.random()*50+20)}% of quota`,ar:` ${Math.round(Math.random()*50+20)}%  `},{en:"3 keys missing translations",ar:"3   "},{en:"No errors detected",ar:"  "},{en:"No vulnerabilities found",ar:"  "}];_(re=>re.map((J,Ne)=>{var q,ce;return Ne===te?{...J,status:Z[te]||"passing",message:((q=ue[te])==null?void 0:q.en)||"OK",messageAr:((ce=ue[te])==null?void 0:ce.ar)||""}:J}))}A(!1),a(u?"  ":"System scan complete","success")};C.useEffect(()=>{r&&o&&h==="diagnostics"&&(d(),M())},[r,o,h]);const X=V=>{switch(V){case"high":return"text-red-500 bg-red-500/10 border-red-500/30";case"medium":return"text-amber-500 bg-amber-500/10 border-amber-500/30";default:return"text-green-500 bg-green-500/10 border-green-500/30"}},K=V=>{switch(V){case"passing":return t.jsx(Mt,{className:"w-4 h-4 text-green-500"});case"warning":return t.jsx(Ks,{className:"w-4 h-4 text-amber-500"});case"error":return t.jsx(sa,{className:"w-4 h-4 text-red-500"});case"checking":return t.jsx(ts,{className:"w-4 h-4 text-cyan-500 animate-spin"});default:return t.jsx(is,{className:"w-4 h-4 text-slate-400"})}};if(!r)return null;const Q=[{id:"command",icon:wf,label:u?" ":"New Command"},{id:"preview",icon:ns,label:u?"":"Preview",disabled:!y},{id:"history",icon:gn,label:u?"":"History"},{id:"diagnostics",icon:Bs,label:u?"":"Diagnostics"},{id:"files",icon:rb,label:u?"":"Files"}],se=[{ar:"   ",en:"Create a page for special offers"},{ar:"    ",en:"Add a new user named Ahmed"},{ar:"  ",en:"Scan system for errors"},{ar:"    ",en:"Change site color to blue"}];return t.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:t.jsxs("div",{className:"w-full max-w-4xl max-h-[90vh] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 border border-cyan-500/30 rounded-2xl shadow-2xl shadow-cyan-500/10 overflow-hidden flex flex-col",dir:u?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:t.jsx(Ln,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white",children:u?"  AI ":"AI Programming Command Center"}),t.jsx("p",{className:"text-xs text-slate-400",children:u?` : ${i}`:`Current page: ${i}`})]})]}),t.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors","data-testid":"button-close-command-center",children:t.jsx(vt,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"flex border-b border-slate-700 bg-slate-800/50 overflow-x-auto",children:Q.map(V=>t.jsxs("button",{onClick:()=>!V.disabled&&f(V.id),disabled:V.disabled,className:`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${h===V.id?"text-cyan-400 border-b-2 border-cyan-400 bg-slate-800":V.disabled?"text-slate-600 cursor-not-allowed":"text-slate-400 hover:text-white hover:bg-slate-700/50"}`,"data-testid":`tab-${V.id}`,children:[t.jsx(V.icon,{className:"w-4 h-4"}),V.label]},V.id))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[h==="command"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-sm font-medium text-slate-300",children:u?"  :":"Enter your command:"}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:k,value:x,onChange:V=>p(V.target.value),onKeyDown:V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),G())},placeholder:u?":    ...":"Example: Create a page for special offers...",className:"w-full h-32 p-4 bg-slate-800/50 border border-slate-600 rounded-xl text-white placeholder-slate-500 resize-none focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","data-testid":"input-command"}),t.jsx("button",{onClick:G,disabled:!x.trim()||v,className:"absolute bottom-3 left-3 p-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity","data-testid":"button-submit-command",children:v?t.jsx(ts,{className:"w-5 h-5 animate-spin"}):t.jsx(xi,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-slate-400",children:u?"  :":"Command Examples:"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:se.map((V,te)=>t.jsxs("button",{onClick:()=>p(u?V.ar:V.en),className:"p-3 text-start bg-slate-800/50 border border-slate-700 rounded-lg text-sm text-slate-300 hover:bg-slate-700/50 hover:border-cyan-500/30 transition-colors","data-testid":`button-example-${te}`,children:[t.jsx(pi,{className:"w-4 h-4 text-cyan-400 inline mr-2"}),u?V.ar:V.en]},te))})]}),t.jsxs("button",{onClick:M,className:"w-full p-4 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-xl text-green-400 hover:bg-green-500/30 transition-colors flex items-center justify-center gap-3","data-testid":"button-run-diagnostics",children:[t.jsx(Bs,{className:"w-5 h-5"}),u?"   ":"Scan System for Errors & Vulnerabilities"]})]}),h==="preview"&&y&&t.jsx("div",{className:"space-y-6",children:D?t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"text-sm font-medium text-slate-300",children:u?" :":"Edit Command:"}),t.jsx("textarea",{value:B,onChange:V=>I(V.target.value),className:"w-full h-24 p-4 bg-slate-800/50 border border-cyan-500 rounded-xl text-white resize-none focus:outline-none","data-testid":"input-edit-command"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:H,className:"flex-1 p-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors","data-testid":"button-save-edit",children:u?"  ":"Save & Re-analyze"}),t.jsx("button",{onClick:()=>L(!1),className:"px-4 py-3 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors","data-testid":"button-cancel-edit",children:u?"":"Cancel"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:u?y.actionAr:y.action}),t.jsx("p",{className:"text-sm text-slate-400",children:u?y.descriptionAr:y.description})]}),t.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${X(y.risk)}`,children:y.risk==="high"?u?" ":"High Risk":y.risk==="medium"?u?" ":"Medium Risk":u?" ":"Low Risk"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(rl,{className:"w-4 h-4 text-cyan-400"}),u?":":"Confidence:"," ",Math.round(y.confidence*100),"%"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(is,{className:"w-4 h-4 text-cyan-400"}),u?" :":"Est. Time:"," ",y.estimatedTime]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300",children:u?" :":"Expected Changes:"}),y.changes.map((V,te)=>t.jsxs("div",{className:"p-3 bg-slate-800/30 border border-slate-700 rounded-lg flex items-start gap-3",children:[t.jsx("div",{className:`p-1.5 rounded ${V.type==="create"?"bg-green-500/20 text-green-400":V.type==="update"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"}`,children:V.type==="create"?t.jsx(Yt,{className:"w-4 h-4"}):V.type==="update"?t.jsx(ql,{className:"w-4 h-4"}):t.jsx(At,{className:"w-4 h-4"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-white",children:V.target}),t.jsx("p",{className:"text-xs text-slate-400",children:u?V.detailsAr:V.details})]})]},te))]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-4",children:[t.jsx("button",{onClick:Y,disabled:v,className:"p-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-medium hover:opacity-90 disabled:opacity-50 transition-opacity flex items-center justify-center gap-2","data-testid":"button-approve",children:v?t.jsx(ts,{className:"w-5 h-5 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-5 h-5"}),u?"":"Approve"]})}),t.jsxs("button",{onClick:ee,className:"p-4 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2","data-testid":"button-edit",children:[t.jsx(ql,{className:"w-5 h-5"}),u?"":"Edit"]}),t.jsxs("button",{onClick:W,className:"p-4 bg-gradient-to-r from-red-500 to-rose-600 text-white rounded-xl font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2","data-testid":"button-reject",children:[t.jsx(sa,{className:"w-5 h-5"}),u?"":"Reject"]})]})]})}),h==="history"&&t.jsx("div",{className:"space-y-4",children:w.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(gn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:u?"    ":"No command history yet"})]}):w.map(V=>t.jsx("div",{className:"p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-white font-medium",children:V.command}),V.result&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:u?V.resultAr:V.result})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[V.status==="executed"&&t.jsx(Mt,{className:"w-4 h-4 text-green-500"}),V.status==="rejected"&&t.jsx(sa,{className:"w-4 h-4 text-red-500"}),V.status==="failed"&&t.jsx(Ks,{className:"w-4 h-4 text-amber-500"}),t.jsx("span",{className:"text-xs text-slate-500",children:new Date(V.timestamp).toLocaleString(u?"ar-SA":"en-US")})]})]})},V.id))}),h==="diagnostics"&&t.jsx("div",{className:"space-y-4",children:!E&&O.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Bs,{className:"w-12 h-12 mx-auto mb-3 text-slate-400 opacity-50"}),t.jsx("p",{className:"text-slate-400 mb-4",children:u?"   ":"Click to start system scan"}),t.jsx("button",{onClick:M,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-medium hover:opacity-90 transition-opacity","data-testid":"button-start-scan",children:u?" ":"Start Scan"})]}):t.jsxs(t.Fragment,{children:[O.map(V=>t.jsxs("div",{className:"p-4 bg-slate-800/50 border border-slate-700 rounded-xl flex items-center gap-4",children:[K(V.status),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-white",children:u?V.nameAr:V.name}),V.message&&t.jsx("p",{className:"text-xs text-slate-400",children:u?V.messageAr:V.message})]})]},V.id)),!E&&t.jsxs("button",{onClick:M,className:"w-full p-3 border border-slate-600 text-slate-400 rounded-xl hover:bg-slate-700/50 transition-colors flex items-center justify-center gap-2","data-testid":"button-rescan",children:[t.jsx(Gt,{className:"w-4 h-4"}),u?" ":"Rescan"]})]})}),h==="files"&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-slate-400 mb-4",children:u?"      :":"Explore project files and understand each file's purpose:"}),WCe.map(V=>t.jsxs("div",{className:"border border-slate-700 rounded-xl overflow-hidden",children:[t.jsxs("button",{onClick:()=>z(T===V.name?null:V.name),className:"w-full p-4 bg-slate-800/50 flex items-center justify-between hover:bg-slate-700/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(mF,{className:"w-5 h-5 text-cyan-400"}),t.jsxs("div",{className:"text-start",children:[t.jsx("p",{className:"text-sm font-medium text-white",children:u?V.nameAr:V.name}),t.jsxs("p",{className:"text-xs text-slate-400",children:[V.files.length," ",u?"":"files"]})]})]}),T===V.name?t.jsx(Qr,{className:"w-4 h-4 text-slate-400"}):t.jsx(Ir,{className:"w-4 h-4 text-slate-400"})]}),T===V.name&&t.jsxs("div",{className:"p-4 bg-slate-900/50 border-t border-slate-700 space-y-2",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-3",children:u?V.descriptionAr:V.description}),V.files.map(te=>t.jsx("div",{className:"p-2 bg-slate-800/30 rounded-lg text-xs font-mono text-slate-300",children:te},te))]})]},V.name))]})]})]})})}const $M=e=>[{icon:t.jsx(Sa,{size:32}),titleKey:"loading.verifyingCredentials"},{icon:t.jsx(Gp,{size:32}),titleKey:"loading.connectingWarehouse"},{icon:t.jsx(Yt,{size:32}),titleKey:"loading.loadingCatalog"},{icon:t.jsx(Lo,{size:32}),titleKey:"loading.applyingDiscounts"},{icon:t.jsx(Wo,{size:32}),titleKey:"loading.syncingInventory"},{icon:t.jsx(fr,{size:32}),titleKey:"loading.optimizingLogistics"},{icon:t.jsx(Wr,{size:32}),titleKey:"loading.finalizingSetup"},{icon:t.jsx(Un,{size:32}),titleKey:"loading.accessGranted"}];function JCe(){var ee,H,M,X,K,Q,se,V,te;const[e,s]=C.useState(null),[a,r]=C.useState(null),[n,i]=C.useState("LOGIN"),[l,o]=C.useState(!0),[d,u]=C.useState("OWNER"),[h,f]=C.useState(!0),[x,p]=C.useState(0),[v,b]=C.useState(!1),[y,j]=C.useState(0),[w,S]=C.useState(0),[O,_]=C.useState(""),[E,A]=C.useState(""),[D,L]=C.useState(!1),[B,I]=C.useState(null),{t:T}=Kt(),{i18n:z}=Kt(),k=Uo(z.language),{addToast:F}=It();C.useEffect(()=>{he.getSettings().then(I)},[]),C.useEffect(()=>{(async()=>{const ue=await he.getCurrentSession();if(ue){let J=null;if(ue.role!=="SUPER_ADMIN")try{const Ne=await he.getAllUsers(),q=ue.parentId||ue.id,ce=Ne.find(fe=>fe.user.id===q);J=(ce==null?void 0:ce.profile)||null}catch{console.log("Profile load optional")}s(ue),r(J),f(!1),o(!1);return}const re=localStorage.getItem("sini_car_persistent_session");if(re)try{const J=JSON.parse(re);if(J.expiresAt&&J.expiresAt>Date.now()&&J.sessionToken&&J.userId){if(he.validateSessionToken(J.userId,J.sessionToken)){const Ne=await he.getUserById(J.userId);if(Ne&&Ne.isActive){let q=null;if(Ne.role!=="SUPER_ADMIN"){const ce=await he.getAllUsers(),fe=Ne.parentId||Ne.id,ie=ce.find(ne=>ne.user.id===fe);q=(ie==null?void 0:ie.profile)||null}localStorage.setItem("b2b_session_sini_v2",JSON.stringify(Ne)),s(Ne),r(q),f(!1),o(!1);return}}localStorage.removeItem("sini_car_persistent_session")}else localStorage.removeItem("sini_car_persistent_session")}catch(J){console.error("Persistent session restore failed",J),localStorage.removeItem("sini_car_persistent_session")}o(!1)})()},[]);const P=async()=>{const Z=await he.getCurrentSession();Z&&s(Z)};C.useEffect(()=>{!e&&!l&&!v&&(setTimeout(()=>p(1),300),setTimeout(()=>p(2),1e3),setTimeout(()=>p(3),1700),setTimeout(()=>f(!1),2500))},[l,e,v]);const G=async Z=>{Z.preventDefault();try{const ue=await he.login(O,E,d);b(!0),j(0),S(0);const re=4e3,J=$M(T),Ne=re/J.length;let q=0;const ce=setInterval(()=>{q++,q<J.length&&j(q)},Ne),fe=setInterval(()=>{S(ie=>Math.min(ie+1,100))},re/100);setTimeout(()=>{if(clearInterval(ce),clearInterval(fe),D){const ie=`${ue.user.id}_${Date.now()}_${Math.random().toString(36).substring(2,15)}`,ne={sessionToken:ie,userId:ue.user.id,loginType:d,createdAt:Date.now(),expiresAt:Date.now()+720*60*60*1e3};localStorage.setItem("sini_car_persistent_session",JSON.stringify(ne)),he.storeSessionToken(ue.user.id,ie)}b(!1),s(ue.user),r(ue.profile),F(`${T("welcome")} ${ue.user.name}`,"success")},re)}catch(ue){F(ue.message,"error")}},Y=async()=>{await he.logout(),localStorage.removeItem("sini_car_persistent_session"),s(null),r(null),i("LOGIN"),_(""),A(""),L(!1),f(!1),b(!1),F(T("logout"),"info")},W=()=>{const Z={id:"guest_"+Date.now(),clientId:"GUEST",name:T("login.guest"),email:"",phone:"",role:"CUSTOMER_OWNER",isActive:!0,password:"",isGuest:!0};s(Z),r(null),F(T("login.guestWelcome"),"info")};if(l&&!h)return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#050A14]",children:t.jsx("div",{className:"flex flex-col items-center gap-4",children:t.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})})});if(e)return e.role==="SUPER_ADMIN"?t.jsx(OCe,{onLogout:Y}):e.isSupplier||e.extendedRole==="SUPPLIER_LOCAL"||e.extendedRole==="SUPPLIER_INTERNATIONAL"?t.jsx(RCe,{user:e,onLogout:Y}):t.jsx(tue,{children:t.jsx(iue,{user:e,profile:a,onLogout:Y,onRefreshUser:P})});if(n==="REGISTER")return t.jsx(Hce,{onSuccess:()=>i("LOGIN"),onSwitchToLogin:()=>i("LOGIN")});if(n==="PARTNER_REGISTER")return t.jsx(Wce,{onBack:()=>i("LOGIN")});if(v){const ue=$M()[y];return t.jsxs("div",{className:"fixed inset-0 bg-[#050A14] text-white flex flex-col items-center justify-center font-sans overflow-hidden z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-slate-900 via-[#050A14] to-[#050A14]"}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(6,182,212,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(6,182,212,0.05)_1px,transparent_1px)] bg-[size:30px_30px] opacity-20"}),t.jsxs("div",{className:"relative z-10 w-full max-w-lg px-8 text-center",children:[t.jsxs("div",{className:"mb-12 relative h-32 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-cyan-500/10 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"relative z-10 w-24 h-24 bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-cyan-500/30 flex items-center justify-center text-cyan-400 shadow-[0_0_30px_rgba(6,182,212,0.15)] transform transition-all duration-500 hover:scale-105",children:ue.icon}),t.jsx("div",{className:"absolute inset-0 animate-spin-slow",children:t.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-500 rounded-full shadow-[0_0_10px_#06b6d4]"})})]}),t.jsx("div",{className:"space-y-3 mb-12 min-h-[100px]",children:t.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight animate-fade-in key={loginStepIndex}",children:T(ue.titleKey)})}),t.jsx("div",{className:"relative w-full h-1.5 bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-cyan-600 via-cyan-400 to-cyan-300 transition-all duration-300 ease-out shadow-[0_0_10px_#22d3ee]",style:{width:`${w}%`}})}),t.jsxs("div",{className:"flex justify-between mt-2 text-xs font-mono text-slate-500",children:[t.jsx("span",{children:T("loading.systemInitialization")}),t.jsxs("span",{children:[Math.round(w),"%"]})]})]})]})}return h?t.jsxs("div",{className:"fixed inset-0 bg-[#050A14] text-white flex flex-col items-center justify-center font-sans overflow-hidden z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-slate-900 via-[#050A14] to-[#050A14]"}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,232,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(0,232,255,0.03)_1px,transparent_1px)] bg-[size:50px_50px]"}),t.jsxs("div",{className:"relative z-10 w-full max-w-md px-6",children:[t.jsx("div",{className:"flex justify-center mb-12",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 bg-cyan-500 blur-2xl opacity-20 rounded-full animate-pulse"}),t.jsx(Vc,{size:64,className:"text-cyan-400 relative z-10",strokeWidth:1})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:`flex items-center gap-4 transition-all duration-700 ${x>=1?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border ${x>1?"border-green-500 text-green-500":"border-cyan-500/30 text-cyan-400 animate-pulse"}`,children:x>1?t.jsx(Un,{size:16}):t.jsx(Gp,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-slate-200",children:T("intro.mainServer")}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:T("intro.connectingServer")})]})]}),t.jsxs("div",{className:`flex items-center gap-4 transition-all duration-700 delay-100 ${x>=2?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border ${x>2?"border-green-500 text-green-500":"border-cyan-500/30 text-cyan-400 animate-pulse"}`,children:x>2?t.jsx(Un,{size:16}):t.jsx(Wo,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-slate-200",children:T("intro.dataSync")}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:T("intro.syncingData")})]})]}),t.jsxs("div",{className:`flex items-center gap-4 transition-all duration-700 delay-200 ${x>=3?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border ${x>=3?"border-cyan-400 text-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.5)]":"border-slate-700 text-slate-600"}`,children:t.jsx(Ea,{size:16,className:x>=3?"animate-spin-slow":""})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-slate-200",children:T("intro.logistics")}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:T("intro.connectingWarehouses")})]})]})]}),t.jsx("div",{className:"mt-12 h-1 w-full bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-cyan-500 shadow-[0_0_10px_#06b6d4] transition-all duration-[4000ms] ease-out",style:{width:x>0?"100%":"0%"}})})]})]}):t.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#050A14] relative overflow-hidden font-sans",dir:k,children:[t.jsx("div",{className:`absolute top-4 z-50 ${k==="rtl"?"left-4":"right-4"}`,children:t.jsx(ph,{variant:"floating",size:"md"})}),t.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,232,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(0,232,255,0.03)_1px,transparent_1px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)]"}),t.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-cyan-900/20 rounded-full blur-[120px]"}),t.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-900/20 rounded-full blur-[120px]"}),t.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-cyan-400 rounded-full blur-[2px] animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1 h-1 bg-white rounded-full blur-[1px] animate-ping"})]}),t.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 animate-fade-in-up",children:[t.jsxs("div",{className:"group relative",children:[t.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000"}),t.jsxs("div",{className:"relative bg-[#0B1221]/90 backdrop-blur-xl border border-white/10 rounded-2xl p-8 md:p-12 shadow-2xl",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 mb-6 shadow-inner relative group-hover:scale-105 transition-transform duration-500",children:[t.jsx("div",{className:"absolute inset-0 bg-cyan-500/10 rounded-2xl animate-pulse"}),t.jsx(Vc,{size:40,className:"text-cyan-400 relative z-10",strokeWidth:1.5})]}),t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2 tracking-tight","data-testid":"text-login-title",children:((ee=B==null?void 0:B.authPageTexts)==null?void 0:ee.loginTitle)||T("login.wholesaleLogin")}),t.jsx("h2",{className:"text-lg text-cyan-400 font-bold mb-3",children:T("common.siniCar")}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-cyan-500/80 text-sm font-mono tracking-wider",children:[t.jsx(Wr,{size:14}),t.jsx("span",{children:((H=B==null?void 0:B.authPageTexts)==null?void 0:H.loginSubtitle)||T("login.b2bPortal")})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 p-1 bg-slate-900/60 rounded-lg mb-8 border border-slate-700",children:[t.jsx("button",{onClick:()=>{u("OWNER"),_(""),A("")},className:`py-2 rounded-md text-sm font-bold transition-all ${d==="OWNER"?"bg-cyan-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,"data-testid":"button-login-owner",children:T("login.ownerLogin")}),t.jsx("button",{onClick:()=>{u("STAFF"),_(""),A("")},className:`py-2 rounded-md text-sm font-bold transition-all ${d==="STAFF"?"bg-cyan-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,"data-testid":"button-login-staff",children:T("login.staffLogin")})]}),t.jsxs("form",{onSubmit:G,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[d==="OWNER"?((M=B==null?void 0:B.authPageTexts)==null?void 0:M.loginClientIdLabel)||T("login.clientId"):T("login.phoneNumber"),t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500 shadow-[0_0_5px_#06b6d4]"})]}),t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none text-slate-500 group-focus-within/input:text-cyan-400 transition-colors",children:d==="OWNER"?t.jsx(nn,{size:20}):t.jsx(Yr,{size:20})}),t.jsx("input",{type:d==="OWNER"?"text":"tel",required:!0,className:"block w-full pr-12 pl-4 py-4 bg-slate-900/50 border border-slate-700 text-white placeholder-slate-600 rounded-lg focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all font-mono",placeholder:d==="OWNER"?((X=B==null?void 0:B.authPageTexts)==null?void 0:X.loginClientIdPlaceholder)||"C-100200":"05xxxxxxxx",value:O,onChange:Z=>_(Z.target.value),"data-testid":"input-identifier"}),t.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:d==="OWNER"?((K=B==null?void 0:B.authPageTexts)==null?void 0:K.loginPasswordLabel)||T("login.password"):T("login.activationCode")}),t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none text-slate-500 group-focus-within/input:text-cyan-400 transition-colors",children:d==="OWNER"?t.jsx(Sa,{size:20}):t.jsx(Fn,{size:20})}),t.jsx("input",{type:d==="OWNER"?"password":"text",required:!0,className:"block w-full pr-12 pl-4 py-4 bg-slate-900/50 border border-slate-700 text-white placeholder-slate-600 rounded-lg focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all",placeholder:d==="OWNER"?((Q=B==null?void 0:B.authPageTexts)==null?void 0:Q.loginPasswordPlaceholder)||"":"123456",value:E,onChange:Z=>A(Z.target.value),"data-testid":"input-password"}),t.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[t.jsxs("div",{className:"relative flex items-center justify-center w-5 h-5 border border-slate-600 rounded bg-slate-900/50 group-hover:border-cyan-500 transition-colors",children:[t.jsx("input",{type:"checkbox",className:"peer appearance-none w-full h-full cursor-pointer",checked:D,onChange:Z=>L(Z.target.checked),"data-testid":"checkbox-remember-me"}),t.jsx(Un,{size:12,className:"text-cyan-400 opacity-0 peer-checked:opacity-100 absolute"})]}),t.jsx("span",{className:"text-sm text-slate-400 group-hover:text-cyan-400 transition-colors",children:T("login.rememberMe")})]}),d==="OWNER"&&t.jsx("a",{href:"#",className:"text-sm font-bold text-slate-500 hover:text-white transition-colors","data-testid":"link-forgot-password",children:((se=B==null?void 0:B.authPageTexts)==null?void 0:se.loginForgotPasswordText)||T("login.forgotPassword")})]}),t.jsxs("button",{type:"submit",disabled:l,className:"w-full py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold tracking-wide rounded-lg shadow-[0_0_20px_rgba(6,182,212,0.3)] hover:shadow-[0_0_30px_rgba(6,182,212,0.5)] transition-all flex items-center justify-center gap-3 group/btn relative overflow-hidden","data-testid":"button-login",children:[l?t.jsx("span",{className:"animate-pulse",children:T("login.verifying")}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"relative z-10",children:((V=B==null?void 0:B.authPageTexts)==null?void 0:V.loginButtonText)||T("login.enter")}),t.jsx(sl,{className:"w-5 h-5 rtl:rotate-180 relative z-10 group-hover/btn:translate-x-1 rtl:group-hover/btn:-translate-x-1 transition-transform"})]}),t.jsx("div",{className:"absolute top-0 -left-full w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 group-hover/btn:animate-shine"})]})]}),t.jsxs("div",{className:"mt-10 pt-6 border-t border-white/5 flex flex-col items-center gap-3 text-center",children:[t.jsxs("div",{className:"flex items-center gap-2 text-emerald-500/80 bg-emerald-500/5 px-3 py-1 rounded-full border border-emerald-500/10",children:[t.jsx(Fn,{size:14}),t.jsx("span",{className:"text-[10px] font-bold tracking-wider",children:T("login.secureConnection")})]}),t.jsx("p",{className:"text-xs text-slate-500",children:T("login.securityNote")}),d==="OWNER"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>i("REGISTER"),className:"mt-4 text-cyan-500 text-sm font-bold hover:text-cyan-400 hover:underline transition-all","data-testid":"button-open-account-request",children:((te=B==null?void 0:B.authPageTexts)==null?void 0:te.loginRegisterLinkText)||T("login.openNewAccount")}),t.jsxs("button",{onClick:()=>i("PARTNER_REGISTER"),className:"mt-3 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600/20 to-teal-600/20 border border-emerald-500/30 text-emerald-400 rounded-lg font-bold hover:bg-emerald-600/30 hover:border-emerald-400/50 hover:text-emerald-300 transition-all group","data-testid":"button-partner-register",children:[t.jsx(Vse,{size:18,className:"group-hover:scale-110 transition-transform"}),t.jsx("span",{children:" "})]})]}),(B==null?void 0:B.guestModeEnabled)&&t.jsxs("button",{onClick:W,className:"mt-4 flex items-center justify-center gap-2 px-6 py-3 bg-slate-800/50 border border-slate-600 text-slate-300 rounded-lg font-bold hover:bg-slate-700/50 hover:border-cyan-500/50 hover:text-white transition-all group","data-testid":"button-guest-login",children:[t.jsx(Ea,{size:18,className:"group-hover:text-cyan-400 transition-colors"}),t.jsx("span",{children:T("login.enterAsGuest")})]}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-white/5",children:[t.jsx("p",{className:"text-[10px] text-slate-500 text-center mb-3",children:T("login.quickLoginForTesting")}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{_("admin"),A("admin"),u("OWNER")},className:"px-2 py-2 bg-red-600/20 border border-red-500/30 text-red-400 text-xs rounded hover:bg-red-600/40 transition-all","data-testid":"quick-login-admin",children:" "}),t.jsx("button",{type:"button",onClick:()=>{_("1"),A("1"),u("OWNER")},className:"px-2 py-2 bg-yellow-600/20 border border-yellow-500/30 text-yellow-400 text-xs rounded hover:bg-yellow-600/40 transition-all","data-testid":"quick-login-manager",children:""}),t.jsx("button",{type:"button",onClick:()=>{_("user-5"),A("5"),u("OWNER")},className:"px-2 py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs rounded hover:bg-green-600/40 transition-all","data-testid":"quick-login-supplier",children:""}),t.jsx("button",{type:"button",onClick:()=>{_("0500056988"),A("381960"),u("STAFF")},className:"px-2 py-2 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs rounded hover:bg-blue-600/40 transition-all","data-testid":"quick-login-staff",children:""}),t.jsx("button",{type:"button",onClick:()=>{_("MKT-001"),A("marketer123"),u("OWNER")},className:"px-2 py-2 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs rounded hover:bg-purple-600/40 transition-all","data-testid":"quick-login-marketer",children:""}),t.jsx("button",{type:"button",onClick:()=>{_("ADV-001"),A("advertiser123"),u("OWNER")},className:"px-2 py-2 bg-pink-600/20 border border-pink-500/30 text-pink-400 text-xs rounded hover:bg-pink-600/40 transition-all","data-testid":"quick-login-advertiser",children:""})]})]})]})]})]}),t.jsx("div",{className:"text-center mt-6 text-slate-600 text-xs font-mono",children:" 2025 SINI CAR WHOLESALE SYSTEMS. V2.5.0"})]})]})}function YCe(){return t.jsx(Fce,{children:t.jsx(zce,{children:t.jsx(Zde,{children:t.jsxs(VCe,{children:[t.jsx(qCe,{}),t.jsx(JCe,{}),t.jsx(HCe,{}),t.jsx(GCe,{}),t.jsx(KCe,{})]})})})})}const mB=document.getElementById("root");if(!mB)throw new Error("Could not find root element to mount to");const XCe=kq.createRoot(mB);XCe.render(t.jsx(ke.StrictMode,{children:t.jsx(YCe,{})}));export{Qi as _,Oo as c,ra as g};
