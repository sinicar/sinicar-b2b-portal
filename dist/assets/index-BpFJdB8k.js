function gq(e,s){for(var a=0;a<s.length;a++){const r=s[a];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $y={exports:{}},mm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a4;function bq(){if(a4)return mm;a4=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function a(r,n,i){var l=null;if(i!==void 0&&(l=""+i),n.key!==void 0&&(l=""+n.key),"key"in n){i={};for(var o in n)o!=="key"&&(i[o]=n[o])}else i=n;return n=i.ref,{$$typeof:e,type:r,key:l,ref:n!==void 0?n:null,props:i}}return mm.Fragment=s,mm.jsx=a,mm.jsxs=a,mm}var r4;function vq(){return r4||(r4=1,$y.exports=bq()),$y.exports}var t=vq(),qy={exports:{}},Yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n4;function yq(){if(n4)return Yt;n4=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),x=Symbol.iterator;function g(V){return V===null||typeof V!="object"?null:(V=x&&V[x]||V["@@iterator"],typeof V=="function"?V:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function j(V,P,Y){this.props=V,this.context=P,this.refs=y,this.updater=Y||v}j.prototype.isReactComponent={},j.prototype.setState=function(V,P){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,P,"setState")},j.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function w(){}w.prototype=j.prototype;function A(V,P,Y){this.props=V,this.context=P,this.refs=y,this.updater=Y||v}var O=A.prototype=new w;O.constructor=A,b(O,j.prototype),O.isPureReactComponent=!0;var C=Array.isArray;function E(){}var S={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function M(V,P,Y){var J=Y.ref;return{$$typeof:e,type:V,key:P,ref:J!==void 0?J:null,props:Y}}function U(V,P){return M(V.type,P,V.props)}function I(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function k(V){var P={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Y){return P[Y]})}var z=/\/+/g;function _(V,P){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):P.toString(36)}function q(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(E,E):(V.status="pending",V.then(function(P){V.status==="pending"&&(V.status="fulfilled",V.value=P)},function(P){V.status==="pending"&&(V.status="rejected",V.reason=P)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function L(V,P,Y,J,K){var se=typeof V;(se==="undefined"||se==="boolean")&&(V=null);var G=!1;if(V===null)G=!0;else switch(se){case"bigint":case"string":case"number":G=!0;break;case"object":switch(V.$$typeof){case e:case s:G=!0;break;case h:return G=V._init,L(G(V._payload),P,Y,J,K)}}if(G)return K=K(V),G=J===""?"."+_(V,0):J,C(K)?(Y="",G!=null&&(Y=G.replace(z,"$&/")+"/"),L(K,P,Y,"",function(ue){return ue})):K!=null&&(I(K)&&(K=U(K,Y+(K.key==null||V&&V.key===K.key?"":(""+K.key).replace(z,"$&/")+"/")+G)),P.push(K)),1;G=0;var te=J===""?".":J+":";if(C(V))for(var Z=0;Z<V.length;Z++)J=V[Z],se=te+_(J,Z),G+=L(J,P,Y,se,K);else if(Z=g(V),typeof Z=="function")for(V=Z.call(V),Z=0;!(J=V.next()).done;)J=J.value,se=te+_(J,Z++),G+=L(J,P,Y,se,K);else if(se==="object"){if(typeof V.then=="function")return L(q(V),P,Y,J,K);throw P=String(V),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return G}function Q(V,P,Y){if(V==null)return V;var J=[],K=0;return L(V,J,"","",function(se){return P.call(Y,se,K++)}),J}function X(V){if(V._status===-1){var P=V._result;P=P(),P.then(function(Y){(V._status===0||V._status===-1)&&(V._status=1,V._result=Y)},function(Y){(V._status===0||V._status===-1)&&(V._status=2,V._result=Y)}),V._status===-1&&(V._status=0,V._result=P)}if(V._status===1)return V._result.default;throw V._result}var W=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ee={map:Q,forEach:function(V,P,Y){Q(V,function(){P.apply(this,arguments)},Y)},count:function(V){var P=0;return Q(V,function(){P++}),P},toArray:function(V){return Q(V,function(P){return P})||[]},only:function(V){if(!I(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Yt.Activity=f,Yt.Children=ee,Yt.Component=j,Yt.Fragment=a,Yt.Profiler=n,Yt.PureComponent=A,Yt.StrictMode=r,Yt.Suspense=d,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return S.H.useMemoCache(V)}},Yt.cache=function(V){return function(){return V.apply(null,arguments)}},Yt.cacheSignal=function(){return null},Yt.cloneElement=function(V,P,Y){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var J=b({},V.props),K=V.key;if(P!=null)for(se in P.key!==void 0&&(K=""+P.key),P)!D.call(P,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&P.ref===void 0||(J[se]=P[se]);var se=arguments.length-2;if(se===1)J.children=Y;else if(1<se){for(var G=Array(se),te=0;te<se;te++)G[te]=arguments[te+2];J.children=G}return M(V.type,K,J)},Yt.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:i,_context:V},V},Yt.createElement=function(V,P,Y){var J,K={},se=null;if(P!=null)for(J in P.key!==void 0&&(se=""+P.key),P)D.call(P,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(K[J]=P[J]);var G=arguments.length-2;if(G===1)K.children=Y;else if(1<G){for(var te=Array(G),Z=0;Z<G;Z++)te[Z]=arguments[Z+2];K.children=te}if(V&&V.defaultProps)for(J in G=V.defaultProps,G)K[J]===void 0&&(K[J]=G[J]);return M(V,se,K)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(V){return{$$typeof:o,render:V}},Yt.isValidElement=I,Yt.lazy=function(V){return{$$typeof:h,_payload:{_status:-1,_result:V},_init:X}},Yt.memo=function(V,P){return{$$typeof:u,type:V,compare:P===void 0?null:P}},Yt.startTransition=function(V){var P=S.T,Y={};S.T=Y;try{var J=V(),K=S.S;K!==null&&K(Y,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(E,W)}catch(se){W(se)}finally{P!==null&&Y.types!==null&&(P.types=Y.types),S.T=P}},Yt.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Yt.use=function(V){return S.H.use(V)},Yt.useActionState=function(V,P,Y){return S.H.useActionState(V,P,Y)},Yt.useCallback=function(V,P){return S.H.useCallback(V,P)},Yt.useContext=function(V){return S.H.useContext(V)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(V,P){return S.H.useDeferredValue(V,P)},Yt.useEffect=function(V,P){return S.H.useEffect(V,P)},Yt.useEffectEvent=function(V){return S.H.useEffectEvent(V)},Yt.useId=function(){return S.H.useId()},Yt.useImperativeHandle=function(V,P,Y){return S.H.useImperativeHandle(V,P,Y)},Yt.useInsertionEffect=function(V,P){return S.H.useInsertionEffect(V,P)},Yt.useLayoutEffect=function(V,P){return S.H.useLayoutEffect(V,P)},Yt.useMemo=function(V,P){return S.H.useMemo(V,P)},Yt.useOptimistic=function(V,P){return S.H.useOptimistic(V,P)},Yt.useReducer=function(V,P,Y){return S.H.useReducer(V,P,Y)},Yt.useRef=function(V){return S.H.useRef(V)},Yt.useState=function(V){return S.H.useState(V)},Yt.useSyncExternalStore=function(V,P,Y){return S.H.useSyncExternalStore(V,P,Y)},Yt.useTransition=function(){return S.H.useTransition()},Yt.version="19.2.0",Yt}var i4;function Hg(){return i4||(i4=1,qy.exports=yq()),qy.exports}var T=Hg();const Oe=ea(T),Nq=gq({__proto__:null,default:Oe},[T]);var Hy={exports:{}},fm={},Vy={exports:{}},Gy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4;function wq(){return l4||(l4=1,(function(e){function s(L,Q){var X=L.length;L.push(Q);e:for(;0<X;){var W=X-1>>>1,ee=L[W];if(0<n(ee,Q))L[W]=Q,L[X]=ee,X=W;else break e}}function a(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var Q=L[0],X=L.pop();if(X!==Q){L[0]=X;e:for(var W=0,ee=L.length,V=ee>>>1;W<V;){var P=2*(W+1)-1,Y=L[P],J=P+1,K=L[J];if(0>n(Y,X))J<ee&&0>n(K,Y)?(L[W]=K,L[J]=X,W=J):(L[W]=Y,L[P]=X,W=P);else if(J<ee&&0>n(K,X))L[W]=K,L[J]=X,W=J;else break e}}return Q}function n(L,Q){var X=L.sortIndex-Q.sortIndex;return X!==0?X:L.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],u=[],h=1,f=null,x=3,g=!1,v=!1,b=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function O(L){for(var Q=a(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=L)r(u),Q.sortIndex=Q.expirationTime,s(d,Q);else break;Q=a(u)}}function C(L){if(b=!1,O(L),!v)if(a(d)!==null)v=!0,E||(E=!0,k());else{var Q=a(u);Q!==null&&q(C,Q.startTime-L)}}var E=!1,S=-1,D=5,M=-1;function U(){return y?!0:!(e.unstable_now()-M<D)}function I(){if(y=!1,E){var L=e.unstable_now();M=L;var Q=!0;try{e:{v=!1,b&&(b=!1,w(S),S=-1),g=!0;var X=x;try{t:{for(O(L),f=a(d);f!==null&&!(f.expirationTime>L&&U());){var W=f.callback;if(typeof W=="function"){f.callback=null,x=f.priorityLevel;var ee=W(f.expirationTime<=L);if(L=e.unstable_now(),typeof ee=="function"){f.callback=ee,O(L),Q=!0;break t}f===a(d)&&r(d),O(L)}else r(d);f=a(d)}if(f!==null)Q=!0;else{var V=a(u);V!==null&&q(C,V.startTime-L),Q=!1}}break e}finally{f=null,x=X,g=!1}Q=void 0}}finally{Q?k():E=!1}}}var k;if(typeof A=="function")k=function(){A(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,_=z.port2;z.port1.onmessage=I,k=function(){_.postMessage(null)}}else k=function(){j(I,0)};function q(L,Q){S=j(function(){L(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(L){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var X=x;x=Q;try{return L()}finally{x=X}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var X=x;x=L;try{return Q()}finally{x=X}},e.unstable_scheduleCallback=function(L,Q,X){var W=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?W+X:W):X=W,L){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=X+ee,L={id:h++,callback:Q,priorityLevel:L,startTime:X,expirationTime:ee,sortIndex:-1},X>W?(L.sortIndex=X,s(u,L),a(d)===null&&L===a(u)&&(b?(w(S),S=-1):b=!0,q(C,X-W))):(L.sortIndex=ee,s(d,L),v||g||(v=!0,E||(E=!0,k()))),L},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(L){var Q=x;return function(){var X=x;x=Q;try{return L.apply(this,arguments)}finally{x=X}}}})(Gy)),Gy}var o4;function Sq(){return o4||(o4=1,Vy.exports=wq()),Vy.exports}var Wy={exports:{}},Lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4;function jq(){if(c4)return Lr;c4=1;var e=Hg();function s(d){var u="https://react.dev/errors/"+d;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+d+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(d,u,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:f==null?null:""+f,children:d,containerInfo:u,implementation:h}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(d,u){if(d==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Lr.createPortal=function(d,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(s(299));return i(d,u,null,h)},Lr.flushSync=function(d){var u=l.T,h=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=u,r.p=h,r.d.f()}},Lr.preconnect=function(d,u){typeof d=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(d,u))},Lr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Lr.preinit=function(d,u){if(typeof d=="string"&&u&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin),x=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?r.d.S(d,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:x,fetchPriority:g}):h==="script"&&r.d.X(d,{crossOrigin:f,integrity:x,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Lr.preinitModule=function(d,u){if(typeof d=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);r.d.M(d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(d)},Lr.preload=function(d,u){if(typeof d=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,f=o(h,u.crossOrigin);r.d.L(d,h,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Lr.preloadModule=function(d,u){if(typeof d=="string")if(u){var h=o(u.as,u.crossOrigin);r.d.m(d,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(d)},Lr.requestFormReset=function(d){r.d.r(d)},Lr.unstable_batchedUpdates=function(d,u){return d(u)},Lr.useFormState=function(d,u,h){return l.H.useFormState(d,u,h)},Lr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Lr.version="19.2.0",Lr}var d4;function BM(){if(d4)return Wy.exports;d4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Wy.exports=jq(),Wy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4;function Aq(){if(u4)return fm;u4=1;var e=Sq(),s=Hg(),a=BM();function r(c){var m="https://react.dev/errors/"+c;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var m=c,p=c;if(c.alternate)for(;m.return;)m=m.return;else{c=m;do m=c,(m.flags&4098)!==0&&(p=m.return),c=m.return;while(c)}return m.tag===3?p:null}function l(c){if(c.tag===13){var m=c.memoizedState;if(m===null&&(c=c.alternate,c!==null&&(m=c.memoizedState)),m!==null)return m.dehydrated}return null}function o(c){if(c.tag===31){var m=c.memoizedState;if(m===null&&(c=c.alternate,c!==null&&(m=c.memoizedState)),m!==null)return m.dehydrated}return null}function d(c){if(i(c)!==c)throw Error(r(188))}function u(c){var m=c.alternate;if(!m){if(m=i(c),m===null)throw Error(r(188));return m!==c?null:c}for(var p=c,N=m;;){var R=p.return;if(R===null)break;var F=R.alternate;if(F===null){if(N=R.return,N!==null){p=N;continue}break}if(R.child===F.child){for(F=R.child;F;){if(F===p)return d(R),c;if(F===N)return d(R),m;F=F.sibling}throw Error(r(188))}if(p.return!==N.return)p=R,N=F;else{for(var ae=!1,me=R.child;me;){if(me===p){ae=!0,p=R,N=F;break}if(me===N){ae=!0,N=R,p=F;break}me=me.sibling}if(!ae){for(me=F.child;me;){if(me===p){ae=!0,p=F,N=R;break}if(me===N){ae=!0,N=F,p=R;break}me=me.sibling}if(!ae)throw Error(r(189))}}if(p.alternate!==N)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?c:m}function h(c){var m=c.tag;if(m===5||m===26||m===27||m===6)return c;for(c=c.child;c!==null;){if(m=h(c),m!==null)return m;c=c.sibling}return null}var f=Object.assign,x=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function k(c){return c===null||typeof c!="object"?null:(c=I&&c[I]||c["@@iterator"],typeof c=="function"?c:null)}var z=Symbol.for("react.client.reference");function _(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===z?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case b:return"Fragment";case j:return"Profiler";case y:return"StrictMode";case C:return"Suspense";case E:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case v:return"Portal";case A:return c.displayName||"Context";case w:return(c._context.displayName||"Context")+".Consumer";case O:var m=c.render;return c=c.displayName,c||(c=m.displayName||m.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case S:return m=c.displayName||null,m!==null?m:_(c.type)||"Memo";case D:m=c._payload,c=c._init;try{return _(c(m))}catch{}}return null}var q=Array.isArray,L=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},W=[],ee=-1;function V(c){return{current:c}}function P(c){0>ee||(c.current=W[ee],W[ee]=null,ee--)}function Y(c,m){ee++,W[ee]=c.current,c.current=m}var J=V(null),K=V(null),se=V(null),G=V(null);function te(c,m){switch(Y(se,m),Y(K,c),Y(J,null),m.nodeType){case 9:case 11:c=(c=m.documentElement)&&(c=c.namespaceURI)?Ek(c):0;break;default:if(c=m.tagName,m=m.namespaceURI)m=Ek(m),c=Ck(m,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}P(J),Y(J,c)}function Z(){P(J),P(K),P(se)}function ue(c){c.memoizedState!==null&&Y(G,c);var m=J.current,p=Ck(m,c.type);m!==p&&(Y(K,c),Y(J,p))}function re(c){K.current===c&&(P(J),P(K)),G.current===c&&(P(G),om._currentValue=X)}var H,pe;function B(c){if(H===void 0)try{throw Error()}catch(p){var m=p.stack.trim().match(/\n( *(at )?)/);H=m&&m[1]||"",pe=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+H+c+pe}var oe=!1;function fe(c,m){if(!c||oe)return"";oe=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(m){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Ge){var Ve=Ge}Reflect.construct(c,[],tt)}else{try{tt.call()}catch(Ge){Ve=Ge}c.call(tt.prototype)}}else{try{throw Error()}catch(Ge){Ve=Ge}(tt=c())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Ge){if(Ge&&Ve&&typeof Ge.stack=="string")return[Ge.stack,Ve.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=N.DetermineComponentFrameRoot(),ae=F[0],me=F[1];if(ae&&me){var Ee=ae.split(`
`),Be=me.split(`
`);for(R=N=0;N<Ee.length&&!Ee[N].includes("DetermineComponentFrameRoot");)N++;for(;R<Be.length&&!Be[R].includes("DetermineComponentFrameRoot");)R++;if(N===Ee.length||R===Be.length)for(N=Ee.length-1,R=Be.length-1;1<=N&&0<=R&&Ee[N]!==Be[R];)R--;for(;1<=N&&0<=R;N--,R--)if(Ee[N]!==Be[R]){if(N!==1||R!==1)do if(N--,R--,0>R||Ee[N]!==Be[R]){var Je=`
`+Ee[N].replace(" at new "," at ");return c.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",c.displayName)),Je}while(1<=N&&0<=R);break}}}finally{oe=!1,Error.prepareStackTrace=p}return(p=c?c.displayName||c.name:"")?B(p):""}function ne(c,m){switch(c.tag){case 26:case 27:case 5:return B(c.type);case 16:return B("Lazy");case 13:return c.child!==m&&m!==null?B("Suspense Fallback"):B("Suspense");case 19:return B("SuspenseList");case 0:case 15:return fe(c.type,!1);case 11:return fe(c.type.render,!1);case 1:return fe(c.type,!0);case 31:return B("Activity");default:return""}}function de(c){try{var m="",p=null;do m+=ne(c,p),p=c,c=c.return;while(c);return m}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}var we=Object.prototype.hasOwnProperty,Ue=e.unstable_scheduleCallback,qe=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Le=e.unstable_requestPaint,Se=e.unstable_now,_e=e.unstable_getCurrentPriorityLevel,Ze=e.unstable_ImmediatePriority,Mt=e.unstable_UserBlockingPriority,lt=e.unstable_NormalPriority,yt=e.unstable_LowPriority,wt=e.unstable_IdlePriority,ke=e.log,We=e.unstable_setDisableYieldValue,Ne=null,at=null;function dt(c){if(typeof ke=="function"&&We(c),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(Ne,c)}catch{}}var ie=Math.clz32?Math.clz32:vt,rt=Math.log,it=Math.LN2;function vt(c){return c>>>=0,c===0?32:31-(rt(c)/it|0)|0}var Ie=256,ct=262144,gt=4194304;function Ot(c){var m=c&42;if(m!==0)return m;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Ls(c,m,p){var N=c.pendingLanes;if(N===0)return 0;var R=0,F=c.suspendedLanes,ae=c.pingedLanes;c=c.warmLanes;var me=N&134217727;return me!==0?(N=me&~F,N!==0?R=Ot(N):(ae&=me,ae!==0?R=Ot(ae):p||(p=me&~c,p!==0&&(R=Ot(p))))):(me=N&~F,me!==0?R=Ot(me):ae!==0?R=Ot(ae):p||(p=N&~c,p!==0&&(R=Ot(p)))),R===0?0:m!==0&&m!==R&&(m&F)===0&&(F=R&-R,p=m&-m,F>=p||F===32&&(p&4194048)!==0)?m:R}function La(c,m){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&m)===0}function Yr(c,m){switch(c){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ae(){var c=gt;return gt<<=1,(gt&62914560)===0&&(gt=4194304),c}function zt(c){for(var m=[],p=0;31>p;p++)m.push(c);return m}function es(c,m){c.pendingLanes|=m,m!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function xs(c,m,p,N,R,F){var ae=c.pendingLanes;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=p,c.entangledLanes&=p,c.errorRecoveryDisabledLanes&=p,c.shellSuspendCounter=0;var me=c.entanglements,Ee=c.expirationTimes,Be=c.hiddenUpdates;for(p=ae&~p;0<p;){var Je=31-ie(p),tt=1<<Je;me[Je]=0,Ee[Je]=-1;var Ve=Be[Je];if(Ve!==null)for(Be[Je]=null,Je=0;Je<Ve.length;Je++){var Ge=Ve[Je];Ge!==null&&(Ge.lane&=-536870913)}p&=~tt}N!==0&&Ts(c,N,0),F!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=F&~(ae&~m))}function Ts(c,m,p){c.pendingLanes|=m,c.suspendedLanes&=~m;var N=31-ie(m);c.entangledLanes|=m,c.entanglements[N]=c.entanglements[N]|1073741824|p&261930}function Aa(c,m){var p=c.entangledLanes|=m;for(c=c.entanglements;p;){var N=31-ie(p),R=1<<N;R&m|c[N]&m&&(c[N]|=m),p&=~R}}function tr(c,m){var p=m&-m;return p=(p&42)!==0?1:sr(p),(p&(c.suspendedLanes|m))!==0?0:p}function sr(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Xe(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function ce(){var c=Q.p;return c!==0?c:(c=window.event,c===void 0?32:Jk(c.type))}function ve(c,m){var p=Q.p;try{return Q.p=c,m()}finally{Q.p=p}}var he=Math.random().toString(36).slice(2),ge="__reactFiber$"+he,ye="__reactProps$"+he,je="__reactContainer$"+he,Me="__reactEvents$"+he,Qe="__reactListeners$"+he,Fe="__reactHandles$"+he,$e="__reactResources$"+he,He="__reactMarker$"+he;function nt(c){delete c[ge],delete c[ye],delete c[Me],delete c[Qe],delete c[Fe]}function ut(c){var m=c[ge];if(m)return m;for(var p=c.parentNode;p;){if(m=p[je]||p[ge]){if(p=m.alternate,m.child!==null||p!==null&&p.child!==null)for(c=Pk(c);c!==null;){if(p=c[ge])return p;c=Pk(c)}return m}c=p,p=c.parentNode}return null}function bt(c){if(c=c[ge]||c[je]){var m=c.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return c}return null}function ot(c){var m=c.tag;if(m===5||m===26||m===27||m===6)return c.stateNode;throw Error(r(33))}function xt(c){var m=c[$e];return m||(m=c[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function At(c){c[He]=!0}var ta=new Set,$s={};function _s(c,m){Nr(c,m),Nr(c+"Capture",m)}function Nr(c,m){for($s[c]=m,c=0;c<m.length;c++)ta.add(m[c])}var Fi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),be={},De={};function kt(c){return we.call(De,c)?!0:we.call(be,c)?!1:Fi.test(c)?De[c]=!0:(be[c]=!0,!1)}function Tt(c,m,p){if(kt(m))if(p===null)c.removeAttribute(m);else{switch(typeof p){case"undefined":case"function":case"symbol":c.removeAttribute(m);return;case"boolean":var N=m.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){c.removeAttribute(m);return}}c.setAttribute(m,""+p)}}function ks(c,m,p){if(p===null)c.removeAttribute(m);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttribute(m,""+p)}}function Fa(c,m,p,N){if(N===null)c.removeAttribute(p);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(p);return}c.setAttributeNS(m,p,""+N)}}function Xr(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function j0(c){var m=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Pb(c,m,p){var N=Object.getOwnPropertyDescriptor(c.constructor.prototype,m);if(!c.hasOwnProperty(m)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var R=N.get,F=N.set;return Object.defineProperty(c,m,{configurable:!0,get:function(){return R.call(this)},set:function(ae){p=""+ae,F.call(this,ae)}}),Object.defineProperty(c,m,{enumerable:N.enumerable}),{getValue:function(){return p},setValue:function(ae){p=""+ae},stopTracking:function(){c._valueTracker=null,delete c[m]}}}}function Db(c){if(!c._valueTracker){var m=j0(c)?"checked":"value";c._valueTracker=Pb(c,m,""+c[m])}}function vC(c){if(!c)return!1;var m=c._valueTracker;if(!m)return!0;var p=m.getValue(),N="";return c&&(N=j0(c)?c.checked?"true":"false":c.value),c=N,c!==p?(m.setValue(c),!0):!1}function Ah(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var uB=/[\n"\\]/g;function $n(c){return c.replace(uB,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Mb(c,m,p,N,R,F,ae,me){c.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?c.type=ae:c.removeAttribute("type"),m!=null?ae==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+Xr(m)):c.value!==""+Xr(m)&&(c.value=""+Xr(m)):ae!=="submit"&&ae!=="reset"||c.removeAttribute("value"),m!=null?Lb(c,ae,Xr(m)):p!=null?Lb(c,ae,Xr(p)):N!=null&&c.removeAttribute("value"),R==null&&F!=null&&(c.defaultChecked=!!F),R!=null&&(c.checked=R&&typeof R!="function"&&typeof R!="symbol"),me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?c.name=""+Xr(me):c.removeAttribute("name")}function yC(c,m,p,N,R,F,ae,me){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(c.type=F),m!=null||p!=null){if(!(F!=="submit"&&F!=="reset"||m!=null)){Db(c);return}p=p!=null?""+Xr(p):"",m=m!=null?""+Xr(m):p,me||m===c.value||(c.value=m),c.defaultValue=m}N=N??R,N=typeof N!="function"&&typeof N!="symbol"&&!!N,c.checked=me?c.checked:!!N,c.defaultChecked=!!N,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(c.name=ae),Db(c)}function Lb(c,m,p){m==="number"&&Ah(c.ownerDocument)===c||c.defaultValue===""+p||(c.defaultValue=""+p)}function Sd(c,m,p,N){if(c=c.options,m){m={};for(var R=0;R<p.length;R++)m["$"+p[R]]=!0;for(p=0;p<c.length;p++)R=m.hasOwnProperty("$"+c[p].value),c[p].selected!==R&&(c[p].selected=R),R&&N&&(c[p].defaultSelected=!0)}else{for(p=""+Xr(p),m=null,R=0;R<c.length;R++){if(c[R].value===p){c[R].selected=!0,N&&(c[R].defaultSelected=!0);return}m!==null||c[R].disabled||(m=c[R])}m!==null&&(m.selected=!0)}}function NC(c,m,p){if(m!=null&&(m=""+Xr(m),m!==c.value&&(c.value=m),p==null)){c.defaultValue!==m&&(c.defaultValue=m);return}c.defaultValue=p!=null?""+Xr(p):""}function wC(c,m,p,N){if(m==null){if(N!=null){if(p!=null)throw Error(r(92));if(q(N)){if(1<N.length)throw Error(r(93));N=N[0]}p=N}p==null&&(p=""),m=p}p=Xr(m),c.defaultValue=p,N=c.textContent,N===p&&N!==""&&N!==null&&(c.value=N),Db(c)}function jd(c,m){if(m){var p=c.firstChild;if(p&&p===c.lastChild&&p.nodeType===3){p.nodeValue=m;return}}c.textContent=m}var mB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function SC(c,m,p){var N=m.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?N?c.setProperty(m,""):m==="float"?c.cssFloat="":c[m]="":N?c.setProperty(m,p):typeof p!="number"||p===0||mB.has(m)?m==="float"?c.cssFloat=p:c[m]=(""+p).trim():c[m]=p+"px"}function jC(c,m,p){if(m!=null&&typeof m!="object")throw Error(r(62));if(c=c.style,p!=null){for(var N in p)!p.hasOwnProperty(N)||m!=null&&m.hasOwnProperty(N)||(N.indexOf("--")===0?c.setProperty(N,""):N==="float"?c.cssFloat="":c[N]="");for(var R in m)N=m[R],m.hasOwnProperty(R)&&p[R]!==N&&SC(c,R,N)}else for(var F in m)m.hasOwnProperty(F)&&SC(c,F,m[F])}function Fb(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eh(c){return hB.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function ol(){}var Ub=null;function zb(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ad=null,Ed=null;function AC(c){var m=bt(c);if(m&&(c=m.stateNode)){var p=c[ye]||null;e:switch(c=m.stateNode,m.type){case"input":if(Mb(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),m=p.name,p.type==="radio"&&m!=null){for(p=c;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+$n(""+m)+'"][type="radio"]'),m=0;m<p.length;m++){var N=p[m];if(N!==c&&N.form===c.form){var R=N[ye]||null;if(!R)throw Error(r(90));Mb(N,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(m=0;m<p.length;m++)N=p[m],N.form===c.form&&vC(N)}break e;case"textarea":NC(c,p.value,p.defaultValue);break e;case"select":m=p.value,m!=null&&Sd(c,!!p.multiple,m,!1)}}}var Bb=!1;function EC(c,m,p){if(Bb)return c(m,p);Bb=!0;try{var N=c(m);return N}finally{if(Bb=!1,(Ad!==null||Ed!==null)&&(fx(),Ad&&(m=Ad,c=Ed,Ed=Ad=null,AC(m),c)))for(m=0;m<c.length;m++)AC(c[m])}}function A0(c,m){var p=c.stateNode;if(p===null)return null;var N=p[ye]||null;if(N===null)return null;p=N[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(c=c.type,N=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!N;break e;default:c=!1}if(c)return null;if(p&&typeof p!="function")throw Error(r(231,m,typeof p));return p}var cl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$b=!1;if(cl)try{var E0={};Object.defineProperty(E0,"passive",{get:function(){$b=!0}}),window.addEventListener("test",E0,E0),window.removeEventListener("test",E0,E0)}catch{$b=!1}var Xl=null,qb=null,Ch=null;function CC(){if(Ch)return Ch;var c,m=qb,p=m.length,N,R="value"in Xl?Xl.value:Xl.textContent,F=R.length;for(c=0;c<p&&m[c]===R[c];c++);var ae=p-c;for(N=1;N<=ae&&m[p-N]===R[F-N];N++);return Ch=R.slice(c,1<N?1-N:void 0)}function Th(c){var m=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&m===13&&(c=13)):c=m,c===10&&(c=13),32<=c||c===13?c:0}function _h(){return!0}function TC(){return!1}function rn(c){function m(p,N,R,F,ae){this._reactName=p,this._targetInst=R,this.type=N,this.nativeEvent=F,this.target=ae,this.currentTarget=null;for(var me in c)c.hasOwnProperty(me)&&(p=c[me],this[me]=p?p(F):F[me]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?_h:TC,this.isPropagationStopped=TC,this}return f(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=_h)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=_h)},persist:function(){},isPersistent:_h}),m}var cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=rn(cc),C0=f({},cc,{view:0,detail:0}),xB=rn(C0),Hb,Vb,T0,Oh=f({},C0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wb,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==T0&&(T0&&c.type==="mousemove"?(Hb=c.screenX-T0.screenX,Vb=c.screenY-T0.screenY):Vb=Hb=0,T0=c),Hb)},movementY:function(c){return"movementY"in c?c.movementY:Vb}}),_C=rn(Oh),pB=f({},Oh,{dataTransfer:0}),gB=rn(pB),bB=f({},C0,{relatedTarget:0}),Gb=rn(bB),vB=f({},cc,{animationName:0,elapsedTime:0,pseudoElement:0}),yB=rn(vB),NB=f({},cc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),wB=rn(NB),SB=f({},cc,{data:0}),kC=rn(SB),jB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CB(c){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(c):(c=EB[c])?!!m[c]:!1}function Wb(){return CB}var TB=f({},C0,{key:function(c){if(c.key){var m=jB[c.key]||c.key;if(m!=="Unidentified")return m}return c.type==="keypress"?(c=Th(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?AB[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wb,charCode:function(c){return c.type==="keypress"?Th(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Th(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),_B=rn(TB),kB=f({},Oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OC=rn(kB),OB=f({},C0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wb}),IB=rn(OB),RB=f({},cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),PB=rn(RB),DB=f({},Oh,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),MB=rn(DB),LB=f({},cc,{newState:0,oldState:0}),FB=rn(LB),UB=[9,13,27,32],Qb=cl&&"CompositionEvent"in window,_0=null;cl&&"documentMode"in document&&(_0=document.documentMode);var zB=cl&&"TextEvent"in window&&!_0,IC=cl&&(!Qb||_0&&8<_0&&11>=_0),RC=" ",PC=!1;function DC(c,m){switch(c){case"keyup":return UB.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Cd=!1;function BB(c,m){switch(c){case"compositionend":return MC(m);case"keypress":return m.which!==32?null:(PC=!0,RC);case"textInput":return c=m.data,c===RC&&PC?null:c;default:return null}}function $B(c,m){if(Cd)return c==="compositionend"||!Qb&&DC(c,m)?(c=CC(),Ch=qb=Xl=null,Cd=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return IC&&m.locale!=="ko"?null:m.data;default:return null}}var qB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LC(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m==="input"?!!qB[c.type]:m==="textarea"}function FC(c,m,p,N){Ad?Ed?Ed.push(N):Ed=[N]:Ad=N,m=yx(m,"onChange"),0<m.length&&(p=new kh("onChange","change",null,p,N),c.push({event:p,listeners:m}))}var k0=null,O0=null;function HB(c){yk(c,0)}function Ih(c){var m=ot(c);if(vC(m))return c}function UC(c,m){if(c==="change")return m}var zC=!1;if(cl){var Kb;if(cl){var Jb="oninput"in document;if(!Jb){var BC=document.createElement("div");BC.setAttribute("oninput","return;"),Jb=typeof BC.oninput=="function"}Kb=Jb}else Kb=!1;zC=Kb&&(!document.documentMode||9<document.documentMode)}function $C(){k0&&(k0.detachEvent("onpropertychange",qC),O0=k0=null)}function qC(c){if(c.propertyName==="value"&&Ih(O0)){var m=[];FC(m,O0,c,zb(c)),EC(HB,m)}}function VB(c,m,p){c==="focusin"?($C(),k0=m,O0=p,k0.attachEvent("onpropertychange",qC)):c==="focusout"&&$C()}function GB(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Ih(O0)}function WB(c,m){if(c==="click")return Ih(m)}function QB(c,m){if(c==="input"||c==="change")return Ih(m)}function KB(c,m){return c===m&&(c!==0||1/c===1/m)||c!==c&&m!==m}var Nn=typeof Object.is=="function"?Object.is:KB;function I0(c,m){if(Nn(c,m))return!0;if(typeof c!="object"||c===null||typeof m!="object"||m===null)return!1;var p=Object.keys(c),N=Object.keys(m);if(p.length!==N.length)return!1;for(N=0;N<p.length;N++){var R=p[N];if(!we.call(m,R)||!Nn(c[R],m[R]))return!1}return!0}function HC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function VC(c,m){var p=HC(c);c=0;for(var N;p;){if(p.nodeType===3){if(N=c+p.textContent.length,c<=m&&N>=m)return{node:p,offset:m-c};c=N}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=HC(p)}}function GC(c,m){return c&&m?c===m?!0:c&&c.nodeType===3?!1:m&&m.nodeType===3?GC(c,m.parentNode):"contains"in c?c.contains(m):c.compareDocumentPosition?!!(c.compareDocumentPosition(m)&16):!1:!1}function WC(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var m=Ah(c.document);m instanceof c.HTMLIFrameElement;){try{var p=typeof m.contentWindow.location.href=="string"}catch{p=!1}if(p)c=m.contentWindow;else break;m=Ah(c.document)}return m}function Yb(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m&&(m==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||m==="textarea"||c.contentEditable==="true")}var JB=cl&&"documentMode"in document&&11>=document.documentMode,Td=null,Xb=null,R0=null,Zb=!1;function QC(c,m,p){var N=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Zb||Td==null||Td!==Ah(N)||(N=Td,"selectionStart"in N&&Yb(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),R0&&I0(R0,N)||(R0=N,N=yx(Xb,"onSelect"),0<N.length&&(m=new kh("onSelect","select",null,m,p),c.push({event:m,listeners:N}),m.target=Td)))}function dc(c,m){var p={};return p[c.toLowerCase()]=m.toLowerCase(),p["Webkit"+c]="webkit"+m,p["Moz"+c]="moz"+m,p}var _d={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionrun:dc("Transition","TransitionRun"),transitionstart:dc("Transition","TransitionStart"),transitioncancel:dc("Transition","TransitionCancel"),transitionend:dc("Transition","TransitionEnd")},ev={},KC={};cl&&(KC=document.createElement("div").style,"AnimationEvent"in window||(delete _d.animationend.animation,delete _d.animationiteration.animation,delete _d.animationstart.animation),"TransitionEvent"in window||delete _d.transitionend.transition);function uc(c){if(ev[c])return ev[c];if(!_d[c])return c;var m=_d[c],p;for(p in m)if(m.hasOwnProperty(p)&&p in KC)return ev[c]=m[p];return c}var JC=uc("animationend"),YC=uc("animationiteration"),XC=uc("animationstart"),YB=uc("transitionrun"),XB=uc("transitionstart"),ZB=uc("transitioncancel"),ZC=uc("transitionend"),eT=new Map,tv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tv.push("scrollEnd");function Ni(c,m){eT.set(c,m),_s(m,[c])}var Rh=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},qn=[],kd=0,sv=0;function Ph(){for(var c=kd,m=sv=kd=0;m<c;){var p=qn[m];qn[m++]=null;var N=qn[m];qn[m++]=null;var R=qn[m];qn[m++]=null;var F=qn[m];if(qn[m++]=null,N!==null&&R!==null){var ae=N.pending;ae===null?R.next=R:(R.next=ae.next,ae.next=R),N.pending=R}F!==0&&tT(p,R,F)}}function Dh(c,m,p,N){qn[kd++]=c,qn[kd++]=m,qn[kd++]=p,qn[kd++]=N,sv|=N,c.lanes|=N,c=c.alternate,c!==null&&(c.lanes|=N)}function av(c,m,p,N){return Dh(c,m,p,N),Mh(c)}function mc(c,m){return Dh(c,null,null,m),Mh(c)}function tT(c,m,p){c.lanes|=p;var N=c.alternate;N!==null&&(N.lanes|=p);for(var R=!1,F=c.return;F!==null;)F.childLanes|=p,N=F.alternate,N!==null&&(N.childLanes|=p),F.tag===22&&(c=F.stateNode,c===null||c._visibility&1||(R=!0)),c=F,F=F.return;return c.tag===3?(F=c.stateNode,R&&m!==null&&(R=31-ie(p),c=F.hiddenUpdates,N=c[R],N===null?c[R]=[m]:N.push(m),m.lane=p|536870912),F):null}function Mh(c){if(50<tm)throw tm=0,my=null,Error(r(185));for(var m=c.return;m!==null;)c=m,m=c.return;return c.tag===3?c.stateNode:null}var Od={};function e$(c,m,p,N){this.tag=c,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(c,m,p,N){return new e$(c,m,p,N)}function rv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function dl(c,m){var p=c.alternate;return p===null?(p=wn(c.tag,m,c.key,c.mode),p.elementType=c.elementType,p.type=c.type,p.stateNode=c.stateNode,p.alternate=c,c.alternate=p):(p.pendingProps=m,p.type=c.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=c.flags&65011712,p.childLanes=c.childLanes,p.lanes=c.lanes,p.child=c.child,p.memoizedProps=c.memoizedProps,p.memoizedState=c.memoizedState,p.updateQueue=c.updateQueue,m=c.dependencies,p.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},p.sibling=c.sibling,p.index=c.index,p.ref=c.ref,p.refCleanup=c.refCleanup,p}function sT(c,m){c.flags&=65011714;var p=c.alternate;return p===null?(c.childLanes=0,c.lanes=m,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=p.childLanes,c.lanes=p.lanes,c.child=p.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=p.memoizedProps,c.memoizedState=p.memoizedState,c.updateQueue=p.updateQueue,c.type=p.type,m=p.dependencies,c.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),c}function Lh(c,m,p,N,R,F){var ae=0;if(N=c,typeof c=="function")rv(c)&&(ae=1);else if(typeof c=="string")ae=nq(c,p,J.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case M:return c=wn(31,p,m,R),c.elementType=M,c.lanes=F,c;case b:return fc(p.children,R,F,m);case y:ae=8,R|=24;break;case j:return c=wn(12,p,m,R|2),c.elementType=j,c.lanes=F,c;case C:return c=wn(13,p,m,R),c.elementType=C,c.lanes=F,c;case E:return c=wn(19,p,m,R),c.elementType=E,c.lanes=F,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case A:ae=10;break e;case w:ae=9;break e;case O:ae=11;break e;case S:ae=14;break e;case D:ae=16,N=null;break e}ae=29,p=Error(r(130,c===null?"null":typeof c,"")),N=null}return m=wn(ae,p,m,R),m.elementType=c,m.type=N,m.lanes=F,m}function fc(c,m,p,N){return c=wn(7,c,N,m),c.lanes=p,c}function nv(c,m,p){return c=wn(6,c,null,m),c.lanes=p,c}function aT(c){var m=wn(18,null,null,0);return m.stateNode=c,m}function iv(c,m,p){return m=wn(4,c.children!==null?c.children:[],c.key,m),m.lanes=p,m.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},m}var rT=new WeakMap;function Hn(c,m){if(typeof c=="object"&&c!==null){var p=rT.get(c);return p!==void 0?p:(m={value:c,source:m,stack:de(m)},rT.set(c,m),m)}return{value:c,source:m,stack:de(m)}}var Id=[],Rd=0,Fh=null,P0=0,Vn=[],Gn=0,Zl=null,Ui=1,zi="";function ul(c,m){Id[Rd++]=P0,Id[Rd++]=Fh,Fh=c,P0=m}function nT(c,m,p){Vn[Gn++]=Ui,Vn[Gn++]=zi,Vn[Gn++]=Zl,Zl=c;var N=Ui;c=zi;var R=32-ie(N)-1;N&=~(1<<R),p+=1;var F=32-ie(m)+R;if(30<F){var ae=R-R%5;F=(N&(1<<ae)-1).toString(32),N>>=ae,R-=ae,Ui=1<<32-ie(m)+R|p<<R|N,zi=F+c}else Ui=1<<F|p<<R|N,zi=c}function lv(c){c.return!==null&&(ul(c,1),nT(c,1,0))}function ov(c){for(;c===Fh;)Fh=Id[--Rd],Id[Rd]=null,P0=Id[--Rd],Id[Rd]=null;for(;c===Zl;)Zl=Vn[--Gn],Vn[Gn]=null,zi=Vn[--Gn],Vn[Gn]=null,Ui=Vn[--Gn],Vn[Gn]=null}function iT(c,m){Vn[Gn++]=Ui,Vn[Gn++]=zi,Vn[Gn++]=Zl,Ui=m.id,zi=m.overflow,Zl=c}var wr=null,fa=null,js=!1,eo=null,Wn=!1,cv=Error(r(519));function to(c){var m=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw D0(Hn(m,c)),cv}function lT(c){var m=c.stateNode,p=c.type,N=c.memoizedProps;switch(m[ge]=c,m[ye]=N,p){case"dialog":gs("cancel",m),gs("close",m);break;case"iframe":case"object":case"embed":gs("load",m);break;case"video":case"audio":for(p=0;p<am.length;p++)gs(am[p],m);break;case"source":gs("error",m);break;case"img":case"image":case"link":gs("error",m),gs("load",m);break;case"details":gs("toggle",m);break;case"input":gs("invalid",m),yC(m,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0);break;case"select":gs("invalid",m);break;case"textarea":gs("invalid",m),wC(m,N.value,N.defaultValue,N.children)}p=N.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||m.textContent===""+p||N.suppressHydrationWarning===!0||jk(m.textContent,p)?(N.popover!=null&&(gs("beforetoggle",m),gs("toggle",m)),N.onScroll!=null&&gs("scroll",m),N.onScrollEnd!=null&&gs("scrollend",m),N.onClick!=null&&(m.onclick=ol),m=!0):m=!1,m||to(c,!0)}function oT(c){for(wr=c.return;wr;)switch(wr.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:wr=wr.return}}function Pd(c){if(c!==wr)return!1;if(!js)return oT(c),js=!0,!1;var m=c.tag,p;if((p=m!==3&&m!==27)&&((p=m===5)&&(p=c.type,p=!(p!=="form"&&p!=="button")||Cy(c.type,c.memoizedProps)),p=!p),p&&fa&&to(c),oT(c),m===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));fa=Rk(c)}else if(m===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));fa=Rk(c)}else m===27?(m=fa,po(c.type)?(c=Iy,Iy=null,fa=c):fa=m):fa=wr?Kn(c.stateNode.nextSibling):null;return!0}function hc(){fa=wr=null,js=!1}function dv(){var c=eo;return c!==null&&(cn===null?cn=c:cn.push.apply(cn,c),eo=null),c}function D0(c){eo===null?eo=[c]:eo.push(c)}var uv=V(null),xc=null,ml=null;function so(c,m,p){Y(uv,m._currentValue),m._currentValue=p}function fl(c){c._currentValue=uv.current,P(uv)}function mv(c,m,p){for(;c!==null;){var N=c.alternate;if((c.childLanes&m)!==m?(c.childLanes|=m,N!==null&&(N.childLanes|=m)):N!==null&&(N.childLanes&m)!==m&&(N.childLanes|=m),c===p)break;c=c.return}}function fv(c,m,p,N){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var F=R.dependencies;if(F!==null){var ae=R.child;F=F.firstContext;e:for(;F!==null;){var me=F;F=R;for(var Ee=0;Ee<m.length;Ee++)if(me.context===m[Ee]){F.lanes|=p,me=F.alternate,me!==null&&(me.lanes|=p),mv(F.return,p,c),N||(ae=null);break e}F=me.next}}else if(R.tag===18){if(ae=R.return,ae===null)throw Error(r(341));ae.lanes|=p,F=ae.alternate,F!==null&&(F.lanes|=p),mv(ae,p,c),ae=null}else ae=R.child;if(ae!==null)ae.return=R;else for(ae=R;ae!==null;){if(ae===c){ae=null;break}if(R=ae.sibling,R!==null){R.return=ae.return,ae=R;break}ae=ae.return}R=ae}}function Dd(c,m,p,N){c=null;for(var R=m,F=!1;R!==null;){if(!F){if((R.flags&524288)!==0)F=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var ae=R.alternate;if(ae===null)throw Error(r(387));if(ae=ae.memoizedProps,ae!==null){var me=R.type;Nn(R.pendingProps.value,ae.value)||(c!==null?c.push(me):c=[me])}}else if(R===G.current){if(ae=R.alternate,ae===null)throw Error(r(387));ae.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(om):c=[om])}R=R.return}c!==null&&fv(m,c,p,N),m.flags|=262144}function Uh(c){for(c=c.firstContext;c!==null;){if(!Nn(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function pc(c){xc=c,ml=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Sr(c){return cT(xc,c)}function zh(c,m){return xc===null&&pc(c),cT(c,m)}function cT(c,m){var p=m._currentValue;if(m={context:m,memoizedValue:p,next:null},ml===null){if(c===null)throw Error(r(308));ml=m,c.dependencies={lanes:0,firstContext:m},c.flags|=524288}else ml=ml.next=m;return p}var t$=typeof AbortController<"u"?AbortController:function(){var c=[],m=this.signal={aborted:!1,addEventListener:function(p,N){c.push(N)}};this.abort=function(){m.aborted=!0,c.forEach(function(p){return p()})}},s$=e.unstable_scheduleCallback,a$=e.unstable_NormalPriority,Va={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hv(){return{controller:new t$,data:new Map,refCount:0}}function M0(c){c.refCount--,c.refCount===0&&s$(a$,function(){c.controller.abort()})}var L0=null,xv=0,Md=0,Ld=null;function r$(c,m){if(L0===null){var p=L0=[];xv=0,Md=by(),Ld={status:"pending",value:void 0,then:function(N){p.push(N)}}}return xv++,m.then(dT,dT),m}function dT(){if(--xv===0&&L0!==null){Ld!==null&&(Ld.status="fulfilled");var c=L0;L0=null,Md=0,Ld=null;for(var m=0;m<c.length;m++)(0,c[m])()}}function n$(c,m){var p=[],N={status:"pending",value:null,reason:null,then:function(R){p.push(R)}};return c.then(function(){N.status="fulfilled",N.value=m;for(var R=0;R<p.length;R++)(0,p[R])(m)},function(R){for(N.status="rejected",N.reason=R,R=0;R<p.length;R++)(0,p[R])(void 0)}),N}var uT=L.S;L.S=function(c,m){Q_=Se(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&r$(c,m),uT!==null&&uT(c,m)};var gc=V(null);function pv(){var c=gc.current;return c!==null?c:oa.pooledCache}function Bh(c,m){m===null?Y(gc,gc.current):Y(gc,m.pool)}function mT(){var c=pv();return c===null?null:{parent:Va._currentValue,pool:c}}var Fd=Error(r(460)),gv=Error(r(474)),$h=Error(r(542)),qh={then:function(){}};function fT(c){return c=c.status,c==="fulfilled"||c==="rejected"}function hT(c,m,p){switch(p=c[p],p===void 0?c.push(m):p!==m&&(m.then(ol,ol),m=p),m.status){case"fulfilled":return m.value;case"rejected":throw c=m.reason,pT(c),c;default:if(typeof m.status=="string")m.then(ol,ol);else{if(c=oa,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=m,c.status="pending",c.then(function(N){if(m.status==="pending"){var R=m;R.status="fulfilled",R.value=N}},function(N){if(m.status==="pending"){var R=m;R.status="rejected",R.reason=N}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw c=m.reason,pT(c),c}throw vc=m,Fd}}function bc(c){try{var m=c._init;return m(c._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(vc=p,Fd):p}}var vc=null;function xT(){if(vc===null)throw Error(r(459));var c=vc;return vc=null,c}function pT(c){if(c===Fd||c===$h)throw Error(r(483))}var Ud=null,F0=0;function Hh(c){var m=F0;return F0+=1,Ud===null&&(Ud=[]),hT(Ud,c,m)}function U0(c,m){m=m.props.ref,c.ref=m!==void 0?m:null}function Vh(c,m){throw m.$$typeof===x?Error(r(525)):(c=Object.prototype.toString.call(m),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":c)))}function gT(c){function m(Re,Te){if(c){var ze=Re.deletions;ze===null?(Re.deletions=[Te],Re.flags|=16):ze.push(Te)}}function p(Re,Te){if(!c)return null;for(;Te!==null;)m(Re,Te),Te=Te.sibling;return null}function N(Re){for(var Te=new Map;Re!==null;)Re.key!==null?Te.set(Re.key,Re):Te.set(Re.index,Re),Re=Re.sibling;return Te}function R(Re,Te){return Re=dl(Re,Te),Re.index=0,Re.sibling=null,Re}function F(Re,Te,ze){return Re.index=ze,c?(ze=Re.alternate,ze!==null?(ze=ze.index,ze<Te?(Re.flags|=67108866,Te):ze):(Re.flags|=67108866,Te)):(Re.flags|=1048576,Te)}function ae(Re){return c&&Re.alternate===null&&(Re.flags|=67108866),Re}function me(Re,Te,ze,et){return Te===null||Te.tag!==6?(Te=nv(ze,Re.mode,et),Te.return=Re,Te):(Te=R(Te,ze),Te.return=Re,Te)}function Ee(Re,Te,ze,et){var Rt=ze.type;return Rt===b?Je(Re,Te,ze.props.children,et,ze.key):Te!==null&&(Te.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===D&&bc(Rt)===Te.type)?(Te=R(Te,ze.props),U0(Te,ze),Te.return=Re,Te):(Te=Lh(ze.type,ze.key,ze.props,null,Re.mode,et),U0(Te,ze),Te.return=Re,Te)}function Be(Re,Te,ze,et){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==ze.containerInfo||Te.stateNode.implementation!==ze.implementation?(Te=iv(ze,Re.mode,et),Te.return=Re,Te):(Te=R(Te,ze.children||[]),Te.return=Re,Te)}function Je(Re,Te,ze,et,Rt){return Te===null||Te.tag!==7?(Te=fc(ze,Re.mode,et,Rt),Te.return=Re,Te):(Te=R(Te,ze),Te.return=Re,Te)}function tt(Re,Te,ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=nv(""+Te,Re.mode,ze),Te.return=Re,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return ze=Lh(Te.type,Te.key,Te.props,null,Re.mode,ze),U0(ze,Te),ze.return=Re,ze;case v:return Te=iv(Te,Re.mode,ze),Te.return=Re,Te;case D:return Te=bc(Te),tt(Re,Te,ze)}if(q(Te)||k(Te))return Te=fc(Te,Re.mode,ze,null),Te.return=Re,Te;if(typeof Te.then=="function")return tt(Re,Hh(Te),ze);if(Te.$$typeof===A)return tt(Re,zh(Re,Te),ze);Vh(Re,Te)}return null}function Ve(Re,Te,ze,et){var Rt=Te!==null?Te.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return Rt!==null?null:me(Re,Te,""+ze,et);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case g:return ze.key===Rt?Ee(Re,Te,ze,et):null;case v:return ze.key===Rt?Be(Re,Te,ze,et):null;case D:return ze=bc(ze),Ve(Re,Te,ze,et)}if(q(ze)||k(ze))return Rt!==null?null:Je(Re,Te,ze,et,null);if(typeof ze.then=="function")return Ve(Re,Te,Hh(ze),et);if(ze.$$typeof===A)return Ve(Re,Te,zh(Re,ze),et);Vh(Re,ze)}return null}function Ge(Re,Te,ze,et,Rt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Re=Re.get(ze)||null,me(Te,Re,""+et,Rt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case g:return Re=Re.get(et.key===null?ze:et.key)||null,Ee(Te,Re,et,Rt);case v:return Re=Re.get(et.key===null?ze:et.key)||null,Be(Te,Re,et,Rt);case D:return et=bc(et),Ge(Re,Te,ze,et,Rt)}if(q(et)||k(et))return Re=Re.get(ze)||null,Je(Te,Re,et,Rt,null);if(typeof et.then=="function")return Ge(Re,Te,ze,Hh(et),Rt);if(et.$$typeof===A)return Ge(Re,Te,ze,zh(Te,et),Rt);Vh(Te,et)}return null}function Et(Re,Te,ze,et){for(var Rt=null,Os=null,_t=Te,rs=Te=0,Ns=null;_t!==null&&rs<ze.length;rs++){_t.index>rs?(Ns=_t,_t=null):Ns=_t.sibling;var Is=Ve(Re,_t,ze[rs],et);if(Is===null){_t===null&&(_t=Ns);break}c&&_t&&Is.alternate===null&&m(Re,_t),Te=F(Is,Te,rs),Os===null?Rt=Is:Os.sibling=Is,Os=Is,_t=Ns}if(rs===ze.length)return p(Re,_t),js&&ul(Re,rs),Rt;if(_t===null){for(;rs<ze.length;rs++)_t=tt(Re,ze[rs],et),_t!==null&&(Te=F(_t,Te,rs),Os===null?Rt=_t:Os.sibling=_t,Os=_t);return js&&ul(Re,rs),Rt}for(_t=N(_t);rs<ze.length;rs++)Ns=Ge(_t,Re,rs,ze[rs],et),Ns!==null&&(c&&Ns.alternate!==null&&_t.delete(Ns.key===null?rs:Ns.key),Te=F(Ns,Te,rs),Os===null?Rt=Ns:Os.sibling=Ns,Os=Ns);return c&&_t.forEach(function(No){return m(Re,No)}),js&&ul(Re,rs),Rt}function Bt(Re,Te,ze,et){if(ze==null)throw Error(r(151));for(var Rt=null,Os=null,_t=Te,rs=Te=0,Ns=null,Is=ze.next();_t!==null&&!Is.done;rs++,Is=ze.next()){_t.index>rs?(Ns=_t,_t=null):Ns=_t.sibling;var No=Ve(Re,_t,Is.value,et);if(No===null){_t===null&&(_t=Ns);break}c&&_t&&No.alternate===null&&m(Re,_t),Te=F(No,Te,rs),Os===null?Rt=No:Os.sibling=No,Os=No,_t=Ns}if(Is.done)return p(Re,_t),js&&ul(Re,rs),Rt;if(_t===null){for(;!Is.done;rs++,Is=ze.next())Is=tt(Re,Is.value,et),Is!==null&&(Te=F(Is,Te,rs),Os===null?Rt=Is:Os.sibling=Is,Os=Is);return js&&ul(Re,rs),Rt}for(_t=N(_t);!Is.done;rs++,Is=ze.next())Is=Ge(_t,Re,rs,Is.value,et),Is!==null&&(c&&Is.alternate!==null&&_t.delete(Is.key===null?rs:Is.key),Te=F(Is,Te,rs),Os===null?Rt=Is:Os.sibling=Is,Os=Is);return c&&_t.forEach(function(pq){return m(Re,pq)}),js&&ul(Re,rs),Rt}function ra(Re,Te,ze,et){if(typeof ze=="object"&&ze!==null&&ze.type===b&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case g:e:{for(var Rt=ze.key;Te!==null;){if(Te.key===Rt){if(Rt=ze.type,Rt===b){if(Te.tag===7){p(Re,Te.sibling),et=R(Te,ze.props.children),et.return=Re,Re=et;break e}}else if(Te.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===D&&bc(Rt)===Te.type){p(Re,Te.sibling),et=R(Te,ze.props),U0(et,ze),et.return=Re,Re=et;break e}p(Re,Te);break}else m(Re,Te);Te=Te.sibling}ze.type===b?(et=fc(ze.props.children,Re.mode,et,ze.key),et.return=Re,Re=et):(et=Lh(ze.type,ze.key,ze.props,null,Re.mode,et),U0(et,ze),et.return=Re,Re=et)}return ae(Re);case v:e:{for(Rt=ze.key;Te!==null;){if(Te.key===Rt)if(Te.tag===4&&Te.stateNode.containerInfo===ze.containerInfo&&Te.stateNode.implementation===ze.implementation){p(Re,Te.sibling),et=R(Te,ze.children||[]),et.return=Re,Re=et;break e}else{p(Re,Te);break}else m(Re,Te);Te=Te.sibling}et=iv(ze,Re.mode,et),et.return=Re,Re=et}return ae(Re);case D:return ze=bc(ze),ra(Re,Te,ze,et)}if(q(ze))return Et(Re,Te,ze,et);if(k(ze)){if(Rt=k(ze),typeof Rt!="function")throw Error(r(150));return ze=Rt.call(ze),Bt(Re,Te,ze,et)}if(typeof ze.then=="function")return ra(Re,Te,Hh(ze),et);if(ze.$$typeof===A)return ra(Re,Te,zh(Re,ze),et);Vh(Re,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Te!==null&&Te.tag===6?(p(Re,Te.sibling),et=R(Te,ze),et.return=Re,Re=et):(p(Re,Te),et=nv(ze,Re.mode,et),et.return=Re,Re=et),ae(Re)):p(Re,Te)}return function(Re,Te,ze,et){try{F0=0;var Rt=ra(Re,Te,ze,et);return Ud=null,Rt}catch(_t){if(_t===Fd||_t===$h)throw _t;var Os=wn(29,_t,null,Re.mode);return Os.lanes=et,Os.return=Re,Os}finally{}}}var yc=gT(!0),bT=gT(!1),ao=!1;function bv(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vv(c,m){c=c.updateQueue,m.updateQueue===c&&(m.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ro(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function no(c,m,p){var N=c.updateQueue;if(N===null)return null;if(N=N.shared,(Fs&2)!==0){var R=N.pending;return R===null?m.next=m:(m.next=R.next,R.next=m),N.pending=m,m=Mh(c),tT(c,null,p),m}return Dh(c,N,m,p),Mh(c)}function z0(c,m,p){if(m=m.updateQueue,m!==null&&(m=m.shared,(p&4194048)!==0)){var N=m.lanes;N&=c.pendingLanes,p|=N,m.lanes=p,Aa(c,p)}}function yv(c,m){var p=c.updateQueue,N=c.alternate;if(N!==null&&(N=N.updateQueue,p===N)){var R=null,F=null;if(p=p.firstBaseUpdate,p!==null){do{var ae={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};F===null?R=F=ae:F=F.next=ae,p=p.next}while(p!==null);F===null?R=F=m:F=F.next=m}else R=F=m;p={baseState:N.baseState,firstBaseUpdate:R,lastBaseUpdate:F,shared:N.shared,callbacks:N.callbacks},c.updateQueue=p;return}c=p.lastBaseUpdate,c===null?p.firstBaseUpdate=m:c.next=m,p.lastBaseUpdate=m}var Nv=!1;function B0(){if(Nv){var c=Ld;if(c!==null)throw c}}function $0(c,m,p,N){Nv=!1;var R=c.updateQueue;ao=!1;var F=R.firstBaseUpdate,ae=R.lastBaseUpdate,me=R.shared.pending;if(me!==null){R.shared.pending=null;var Ee=me,Be=Ee.next;Ee.next=null,ae===null?F=Be:ae.next=Be,ae=Ee;var Je=c.alternate;Je!==null&&(Je=Je.updateQueue,me=Je.lastBaseUpdate,me!==ae&&(me===null?Je.firstBaseUpdate=Be:me.next=Be,Je.lastBaseUpdate=Ee))}if(F!==null){var tt=R.baseState;ae=0,Je=Be=Ee=null,me=F;do{var Ve=me.lane&-536870913,Ge=Ve!==me.lane;if(Ge?(ys&Ve)===Ve:(N&Ve)===Ve){Ve!==0&&Ve===Md&&(Nv=!0),Je!==null&&(Je=Je.next={lane:0,tag:me.tag,payload:me.payload,callback:null,next:null});e:{var Et=c,Bt=me;Ve=m;var ra=p;switch(Bt.tag){case 1:if(Et=Bt.payload,typeof Et=="function"){tt=Et.call(ra,tt,Ve);break e}tt=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Bt.payload,Ve=typeof Et=="function"?Et.call(ra,tt,Ve):Et,Ve==null)break e;tt=f({},tt,Ve);break e;case 2:ao=!0}}Ve=me.callback,Ve!==null&&(c.flags|=64,Ge&&(c.flags|=8192),Ge=R.callbacks,Ge===null?R.callbacks=[Ve]:Ge.push(Ve))}else Ge={lane:Ve,tag:me.tag,payload:me.payload,callback:me.callback,next:null},Je===null?(Be=Je=Ge,Ee=tt):Je=Je.next=Ge,ae|=Ve;if(me=me.next,me===null){if(me=R.shared.pending,me===null)break;Ge=me,me=Ge.next,Ge.next=null,R.lastBaseUpdate=Ge,R.shared.pending=null}}while(!0);Je===null&&(Ee=tt),R.baseState=Ee,R.firstBaseUpdate=Be,R.lastBaseUpdate=Je,F===null&&(R.shared.lanes=0),uo|=ae,c.lanes=ae,c.memoizedState=tt}}function vT(c,m){if(typeof c!="function")throw Error(r(191,c));c.call(m)}function yT(c,m){var p=c.callbacks;if(p!==null)for(c.callbacks=null,c=0;c<p.length;c++)vT(p[c],m)}var zd=V(null),Gh=V(0);function NT(c,m){c=wl,Y(Gh,c),Y(zd,m),wl=c|m.baseLanes}function wv(){Y(Gh,wl),Y(zd,zd.current)}function Sv(){wl=Gh.current,P(zd),P(Gh)}var Sn=V(null),Qn=null;function io(c){var m=c.alternate;Y(Ua,Ua.current&1),Y(Sn,c),Qn===null&&(m===null||zd.current!==null||m.memoizedState!==null)&&(Qn=c)}function jv(c){Y(Ua,Ua.current),Y(Sn,c),Qn===null&&(Qn=c)}function wT(c){c.tag===22?(Y(Ua,Ua.current),Y(Sn,c),Qn===null&&(Qn=c)):lo()}function lo(){Y(Ua,Ua.current),Y(Sn,Sn.current)}function jn(c){P(Sn),Qn===c&&(Qn=null),P(Ua)}var Ua=V(0);function Wh(c){for(var m=c;m!==null;){if(m.tag===13){var p=m.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||ky(p)||Oy(p)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var hl=0,ts=null,sa=null,Ga=null,Qh=!1,Bd=!1,Nc=!1,Kh=0,q0=0,$d=null,i$=0;function ka(){throw Error(r(321))}function Av(c,m){if(m===null)return!1;for(var p=0;p<m.length&&p<c.length;p++)if(!Nn(c[p],m[p]))return!1;return!0}function Ev(c,m,p,N,R,F){return hl=F,ts=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,L.H=c===null||c.memoizedState===null?n_:Bv,Nc=!1,F=p(N,R),Nc=!1,Bd&&(F=jT(m,p,N,R)),ST(c),F}function ST(c){L.H=G0;var m=sa!==null&&sa.next!==null;if(hl=0,Ga=sa=ts=null,Qh=!1,q0=0,$d=null,m)throw Error(r(300));c===null||Wa||(c=c.dependencies,c!==null&&Uh(c)&&(Wa=!0))}function jT(c,m,p,N){ts=c;var R=0;do{if(Bd&&($d=null),q0=0,Bd=!1,25<=R)throw Error(r(301));if(R+=1,Ga=sa=null,c.updateQueue!=null){var F=c.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}L.H=i_,F=m(p,N)}while(Bd);return F}function l$(){var c=L.H,m=c.useState()[0];return m=typeof m.then=="function"?H0(m):m,c=c.useState()[0],(sa!==null?sa.memoizedState:null)!==c&&(ts.flags|=1024),m}function Cv(){var c=Kh!==0;return Kh=0,c}function Tv(c,m,p){m.updateQueue=c.updateQueue,m.flags&=-2053,c.lanes&=~p}function _v(c){if(Qh){for(c=c.memoizedState;c!==null;){var m=c.queue;m!==null&&(m.pending=null),c=c.next}Qh=!1}hl=0,Ga=sa=ts=null,Bd=!1,q0=Kh=0,$d=null}function Zr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ga===null?ts.memoizedState=Ga=c:Ga=Ga.next=c,Ga}function za(){if(sa===null){var c=ts.alternate;c=c!==null?c.memoizedState:null}else c=sa.next;var m=Ga===null?ts.memoizedState:Ga.next;if(m!==null)Ga=m,sa=c;else{if(c===null)throw ts.alternate===null?Error(r(467)):Error(r(310));sa=c,c={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},Ga===null?ts.memoizedState=Ga=c:Ga=Ga.next=c}return Ga}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function H0(c){var m=q0;return q0+=1,$d===null&&($d=[]),c=hT($d,c,m),m=ts,(Ga===null?m.memoizedState:Ga.next)===null&&(m=m.alternate,L.H=m===null||m.memoizedState===null?n_:Bv),c}function Yh(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return H0(c);if(c.$$typeof===A)return Sr(c)}throw Error(r(438,String(c)))}function kv(c){var m=null,p=ts.updateQueue;if(p!==null&&(m=p.memoCache),m==null){var N=ts.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(m={data:N.data.map(function(R){return R.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),p===null&&(p=Jh(),ts.updateQueue=p),p.memoCache=m,p=m.data[m.index],p===void 0)for(p=m.data[m.index]=Array(c),N=0;N<c;N++)p[N]=U;return m.index++,p}function xl(c,m){return typeof m=="function"?m(c):m}function Xh(c){var m=za();return Ov(m,sa,c)}function Ov(c,m,p){var N=c.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=p;var R=c.baseQueue,F=N.pending;if(F!==null){if(R!==null){var ae=R.next;R.next=F.next,F.next=ae}m.baseQueue=R=F,N.pending=null}if(F=c.baseState,R===null)c.memoizedState=F;else{m=R.next;var me=ae=null,Ee=null,Be=m,Je=!1;do{var tt=Be.lane&-536870913;if(tt!==Be.lane?(ys&tt)===tt:(hl&tt)===tt){var Ve=Be.revertLane;if(Ve===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),tt===Md&&(Je=!0);else if((hl&Ve)===Ve){Be=Be.next,Ve===Md&&(Je=!0);continue}else tt={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ee===null?(me=Ee=tt,ae=F):Ee=Ee.next=tt,ts.lanes|=Ve,uo|=Ve;tt=Be.action,Nc&&p(F,tt),F=Be.hasEagerState?Be.eagerState:p(F,tt)}else Ve={lane:tt,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ee===null?(me=Ee=Ve,ae=F):Ee=Ee.next=Ve,ts.lanes|=tt,uo|=tt;Be=Be.next}while(Be!==null&&Be!==m);if(Ee===null?ae=F:Ee.next=me,!Nn(F,c.memoizedState)&&(Wa=!0,Je&&(p=Ld,p!==null)))throw p;c.memoizedState=F,c.baseState=ae,c.baseQueue=Ee,N.lastRenderedState=F}return R===null&&(N.lanes=0),[c.memoizedState,N.dispatch]}function Iv(c){var m=za(),p=m.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=c;var N=p.dispatch,R=p.pending,F=m.memoizedState;if(R!==null){p.pending=null;var ae=R=R.next;do F=c(F,ae.action),ae=ae.next;while(ae!==R);Nn(F,m.memoizedState)||(Wa=!0),m.memoizedState=F,m.baseQueue===null&&(m.baseState=F),p.lastRenderedState=F}return[F,N]}function AT(c,m,p){var N=ts,R=za(),F=js;if(F){if(p===void 0)throw Error(r(407));p=p()}else p=m();var ae=!Nn((sa||R).memoizedState,p);if(ae&&(R.memoizedState=p,Wa=!0),R=R.queue,Dv(TT.bind(null,N,R,c),[c]),R.getSnapshot!==m||ae||Ga!==null&&Ga.memoizedState.tag&1){if(N.flags|=2048,qd(9,{destroy:void 0},CT.bind(null,N,R,p,m),null),oa===null)throw Error(r(349));F||(hl&127)!==0||ET(N,m,p)}return p}function ET(c,m,p){c.flags|=16384,c={getSnapshot:m,value:p},m=ts.updateQueue,m===null?(m=Jh(),ts.updateQueue=m,m.stores=[c]):(p=m.stores,p===null?m.stores=[c]:p.push(c))}function CT(c,m,p,N){m.value=p,m.getSnapshot=N,_T(m)&&kT(c)}function TT(c,m,p){return p(function(){_T(m)&&kT(c)})}function _T(c){var m=c.getSnapshot;c=c.value;try{var p=m();return!Nn(c,p)}catch{return!0}}function kT(c){var m=mc(c,2);m!==null&&dn(m,c,2)}function Rv(c){var m=Zr();if(typeof c=="function"){var p=c;if(c=p(),Nc){dt(!0);try{p()}finally{dt(!1)}}}return m.memoizedState=m.baseState=c,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:c},m}function OT(c,m,p,N){return c.baseState=p,Ov(c,sa,typeof N=="function"?N:xl)}function o$(c,m,p,N,R){if(tx(c))throw Error(r(485));if(c=m.action,c!==null){var F={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){F.listeners.push(ae)}};L.T!==null?p(!0):F.isTransition=!1,N(F),p=m.pending,p===null?(F.next=m.pending=F,IT(m,F)):(F.next=p.next,m.pending=p.next=F)}}function IT(c,m){var p=m.action,N=m.payload,R=c.state;if(m.isTransition){var F=L.T,ae={};L.T=ae;try{var me=p(R,N),Ee=L.S;Ee!==null&&Ee(ae,me),RT(c,m,me)}catch(Be){Pv(c,m,Be)}finally{F!==null&&ae.types!==null&&(F.types=ae.types),L.T=F}}else try{F=p(R,N),RT(c,m,F)}catch(Be){Pv(c,m,Be)}}function RT(c,m,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(N){PT(c,m,N)},function(N){return Pv(c,m,N)}):PT(c,m,p)}function PT(c,m,p){m.status="fulfilled",m.value=p,DT(m),c.state=p,m=c.pending,m!==null&&(p=m.next,p===m?c.pending=null:(p=p.next,m.next=p,IT(c,p)))}function Pv(c,m,p){var N=c.pending;if(c.pending=null,N!==null){N=N.next;do m.status="rejected",m.reason=p,DT(m),m=m.next;while(m!==N)}c.action=null}function DT(c){c=c.listeners;for(var m=0;m<c.length;m++)(0,c[m])()}function MT(c,m){return m}function LT(c,m){if(js){var p=oa.formState;if(p!==null){e:{var N=ts;if(js){if(fa){t:{for(var R=fa,F=Wn;R.nodeType!==8;){if(!F){R=null;break t}if(R=Kn(R.nextSibling),R===null){R=null;break t}}F=R.data,R=F==="F!"||F==="F"?R:null}if(R){fa=Kn(R.nextSibling),N=R.data==="F!";break e}}to(N)}N=!1}N&&(m=p[0])}}return p=Zr(),p.memoizedState=p.baseState=m,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:MT,lastRenderedState:m},p.queue=N,p=s_.bind(null,ts,N),N.dispatch=p,N=Rv(!1),F=zv.bind(null,ts,!1,N.queue),N=Zr(),R={state:m,dispatch:null,action:c,pending:null},N.queue=R,p=o$.bind(null,ts,R,F,p),R.dispatch=p,N.memoizedState=c,[m,p,!1]}function FT(c){var m=za();return UT(m,sa,c)}function UT(c,m,p){if(m=Ov(c,m,MT)[0],c=Xh(xl)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var N=H0(m)}catch(ae){throw ae===Fd?$h:ae}else N=m;m=za();var R=m.queue,F=R.dispatch;return p!==m.memoizedState&&(ts.flags|=2048,qd(9,{destroy:void 0},c$.bind(null,R,p),null)),[N,F,c]}function c$(c,m){c.action=m}function zT(c){var m=za(),p=sa;if(p!==null)return UT(m,p,c);za(),m=m.memoizedState,p=za();var N=p.queue.dispatch;return p.memoizedState=c,[m,N,!1]}function qd(c,m,p,N){return c={tag:c,create:p,deps:N,inst:m,next:null},m=ts.updateQueue,m===null&&(m=Jh(),ts.updateQueue=m),p=m.lastEffect,p===null?m.lastEffect=c.next=c:(N=p.next,p.next=c,c.next=N,m.lastEffect=c),c}function BT(){return za().memoizedState}function Zh(c,m,p,N){var R=Zr();ts.flags|=c,R.memoizedState=qd(1|m,{destroy:void 0},p,N===void 0?null:N)}function ex(c,m,p,N){var R=za();N=N===void 0?null:N;var F=R.memoizedState.inst;sa!==null&&N!==null&&Av(N,sa.memoizedState.deps)?R.memoizedState=qd(m,F,p,N):(ts.flags|=c,R.memoizedState=qd(1|m,F,p,N))}function $T(c,m){Zh(8390656,8,c,m)}function Dv(c,m){ex(2048,8,c,m)}function d$(c){ts.flags|=4;var m=ts.updateQueue;if(m===null)m=Jh(),ts.updateQueue=m,m.events=[c];else{var p=m.events;p===null?m.events=[c]:p.push(c)}}function qT(c){var m=za().memoizedState;return d$({ref:m,nextImpl:c}),function(){if((Fs&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}function HT(c,m){return ex(4,2,c,m)}function VT(c,m){return ex(4,4,c,m)}function GT(c,m){if(typeof m=="function"){c=c();var p=m(c);return function(){typeof p=="function"?p():m(null)}}if(m!=null)return c=c(),m.current=c,function(){m.current=null}}function WT(c,m,p){p=p!=null?p.concat([c]):null,ex(4,4,GT.bind(null,m,c),p)}function Mv(){}function QT(c,m){var p=za();m=m===void 0?null:m;var N=p.memoizedState;return m!==null&&Av(m,N[1])?N[0]:(p.memoizedState=[c,m],c)}function KT(c,m){var p=za();m=m===void 0?null:m;var N=p.memoizedState;if(m!==null&&Av(m,N[1]))return N[0];if(N=c(),Nc){dt(!0);try{c()}finally{dt(!1)}}return p.memoizedState=[N,m],N}function Lv(c,m,p){return p===void 0||(hl&1073741824)!==0&&(ys&261930)===0?c.memoizedState=m:(c.memoizedState=p,c=J_(),ts.lanes|=c,uo|=c,p)}function JT(c,m,p,N){return Nn(p,m)?p:zd.current!==null?(c=Lv(c,p,N),Nn(c,m)||(Wa=!0),c):(hl&42)===0||(hl&1073741824)!==0&&(ys&261930)===0?(Wa=!0,c.memoizedState=p):(c=J_(),ts.lanes|=c,uo|=c,m)}function YT(c,m,p,N,R){var F=Q.p;Q.p=F!==0&&8>F?F:8;var ae=L.T,me={};L.T=me,zv(c,!1,m,p);try{var Ee=R(),Be=L.S;if(Be!==null&&Be(me,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Je=n$(Ee,N);V0(c,m,Je,Cn(c))}else V0(c,m,N,Cn(c))}catch(tt){V0(c,m,{then:function(){},status:"rejected",reason:tt},Cn())}finally{Q.p=F,ae!==null&&me.types!==null&&(ae.types=me.types),L.T=ae}}function u$(){}function Fv(c,m,p,N){if(c.tag!==5)throw Error(r(476));var R=XT(c).queue;YT(c,R,m,X,p===null?u$:function(){return ZT(c),p(N)})}function XT(c){var m=c.memoizedState;if(m!==null)return m;m={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:X},next:null};var p={};return m.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:p},next:null},c.memoizedState=m,c=c.alternate,c!==null&&(c.memoizedState=m),m}function ZT(c){var m=XT(c);m.next===null&&(m=c.alternate.memoizedState),V0(c,m.next.queue,{},Cn())}function Uv(){return Sr(om)}function e_(){return za().memoizedState}function t_(){return za().memoizedState}function m$(c){for(var m=c.return;m!==null;){switch(m.tag){case 24:case 3:var p=Cn();c=ro(p);var N=no(m,c,p);N!==null&&(dn(N,m,p),z0(N,m,p)),m={cache:hv()},c.payload=m;return}m=m.return}}function f$(c,m,p){var N=Cn();p={lane:N,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},tx(c)?a_(m,p):(p=av(c,m,p,N),p!==null&&(dn(p,c,N),r_(p,m,N)))}function s_(c,m,p){var N=Cn();V0(c,m,p,N)}function V0(c,m,p,N){var R={lane:N,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(tx(c))a_(m,R);else{var F=c.alternate;if(c.lanes===0&&(F===null||F.lanes===0)&&(F=m.lastRenderedReducer,F!==null))try{var ae=m.lastRenderedState,me=F(ae,p);if(R.hasEagerState=!0,R.eagerState=me,Nn(me,ae))return Dh(c,m,R,0),oa===null&&Ph(),!1}catch{}finally{}if(p=av(c,m,R,N),p!==null)return dn(p,c,N),r_(p,m,N),!0}return!1}function zv(c,m,p,N){if(N={lane:2,revertLane:by(),gesture:null,action:N,hasEagerState:!1,eagerState:null,next:null},tx(c)){if(m)throw Error(r(479))}else m=av(c,p,N,2),m!==null&&dn(m,c,2)}function tx(c){var m=c.alternate;return c===ts||m!==null&&m===ts}function a_(c,m){Bd=Qh=!0;var p=c.pending;p===null?m.next=m:(m.next=p.next,p.next=m),c.pending=m}function r_(c,m,p){if((p&4194048)!==0){var N=m.lanes;N&=c.pendingLanes,p|=N,m.lanes=p,Aa(c,p)}}var G0={readContext:Sr,use:Yh,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useLayoutEffect:ka,useInsertionEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useSyncExternalStore:ka,useId:ka,useHostTransitionStatus:ka,useFormState:ka,useActionState:ka,useOptimistic:ka,useMemoCache:ka,useCacheRefresh:ka};G0.useEffectEvent=ka;var n_={readContext:Sr,use:Yh,useCallback:function(c,m){return Zr().memoizedState=[c,m===void 0?null:m],c},useContext:Sr,useEffect:$T,useImperativeHandle:function(c,m,p){p=p!=null?p.concat([c]):null,Zh(4194308,4,GT.bind(null,m,c),p)},useLayoutEffect:function(c,m){return Zh(4194308,4,c,m)},useInsertionEffect:function(c,m){Zh(4,2,c,m)},useMemo:function(c,m){var p=Zr();m=m===void 0?null:m;var N=c();if(Nc){dt(!0);try{c()}finally{dt(!1)}}return p.memoizedState=[N,m],N},useReducer:function(c,m,p){var N=Zr();if(p!==void 0){var R=p(m);if(Nc){dt(!0);try{p(m)}finally{dt(!1)}}}else R=m;return N.memoizedState=N.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},N.queue=c,c=c.dispatch=f$.bind(null,ts,c),[N.memoizedState,c]},useRef:function(c){var m=Zr();return c={current:c},m.memoizedState=c},useState:function(c){c=Rv(c);var m=c.queue,p=s_.bind(null,ts,m);return m.dispatch=p,[c.memoizedState,p]},useDebugValue:Mv,useDeferredValue:function(c,m){var p=Zr();return Lv(p,c,m)},useTransition:function(){var c=Rv(!1);return c=YT.bind(null,ts,c.queue,!0,!1),Zr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,m,p){var N=ts,R=Zr();if(js){if(p===void 0)throw Error(r(407));p=p()}else{if(p=m(),oa===null)throw Error(r(349));(ys&127)!==0||ET(N,m,p)}R.memoizedState=p;var F={value:p,getSnapshot:m};return R.queue=F,$T(TT.bind(null,N,F,c),[c]),N.flags|=2048,qd(9,{destroy:void 0},CT.bind(null,N,F,p,m),null),p},useId:function(){var c=Zr(),m=oa.identifierPrefix;if(js){var p=zi,N=Ui;p=(N&~(1<<32-ie(N)-1)).toString(32)+p,m="_"+m+"R_"+p,p=Kh++,0<p&&(m+="H"+p.toString(32)),m+="_"}else p=i$++,m="_"+m+"r_"+p.toString(32)+"_";return c.memoizedState=m},useHostTransitionStatus:Uv,useFormState:LT,useActionState:LT,useOptimistic:function(c){var m=Zr();m.memoizedState=m.baseState=c;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=p,m=zv.bind(null,ts,!0,p),p.dispatch=m,[c,m]},useMemoCache:kv,useCacheRefresh:function(){return Zr().memoizedState=m$.bind(null,ts)},useEffectEvent:function(c){var m=Zr(),p={impl:c};return m.memoizedState=p,function(){if((Fs&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},Bv={readContext:Sr,use:Yh,useCallback:QT,useContext:Sr,useEffect:Dv,useImperativeHandle:WT,useInsertionEffect:HT,useLayoutEffect:VT,useMemo:KT,useReducer:Xh,useRef:BT,useState:function(){return Xh(xl)},useDebugValue:Mv,useDeferredValue:function(c,m){var p=za();return JT(p,sa.memoizedState,c,m)},useTransition:function(){var c=Xh(xl)[0],m=za().memoizedState;return[typeof c=="boolean"?c:H0(c),m]},useSyncExternalStore:AT,useId:e_,useHostTransitionStatus:Uv,useFormState:FT,useActionState:FT,useOptimistic:function(c,m){var p=za();return OT(p,sa,c,m)},useMemoCache:kv,useCacheRefresh:t_};Bv.useEffectEvent=qT;var i_={readContext:Sr,use:Yh,useCallback:QT,useContext:Sr,useEffect:Dv,useImperativeHandle:WT,useInsertionEffect:HT,useLayoutEffect:VT,useMemo:KT,useReducer:Iv,useRef:BT,useState:function(){return Iv(xl)},useDebugValue:Mv,useDeferredValue:function(c,m){var p=za();return sa===null?Lv(p,c,m):JT(p,sa.memoizedState,c,m)},useTransition:function(){var c=Iv(xl)[0],m=za().memoizedState;return[typeof c=="boolean"?c:H0(c),m]},useSyncExternalStore:AT,useId:e_,useHostTransitionStatus:Uv,useFormState:zT,useActionState:zT,useOptimistic:function(c,m){var p=za();return sa!==null?OT(p,sa,c,m):(p.baseState=c,[c,p.queue.dispatch])},useMemoCache:kv,useCacheRefresh:t_};i_.useEffectEvent=qT;function $v(c,m,p,N){m=c.memoizedState,p=p(N,m),p=p==null?m:f({},m,p),c.memoizedState=p,c.lanes===0&&(c.updateQueue.baseState=p)}var qv={enqueueSetState:function(c,m,p){c=c._reactInternals;var N=Cn(),R=ro(N);R.payload=m,p!=null&&(R.callback=p),m=no(c,R,N),m!==null&&(dn(m,c,N),z0(m,c,N))},enqueueReplaceState:function(c,m,p){c=c._reactInternals;var N=Cn(),R=ro(N);R.tag=1,R.payload=m,p!=null&&(R.callback=p),m=no(c,R,N),m!==null&&(dn(m,c,N),z0(m,c,N))},enqueueForceUpdate:function(c,m){c=c._reactInternals;var p=Cn(),N=ro(p);N.tag=2,m!=null&&(N.callback=m),m=no(c,N,p),m!==null&&(dn(m,c,p),z0(m,c,p))}};function l_(c,m,p,N,R,F,ae){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(N,F,ae):m.prototype&&m.prototype.isPureReactComponent?!I0(p,N)||!I0(R,F):!0}function o_(c,m,p,N){c=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(p,N),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(p,N),m.state!==c&&qv.enqueueReplaceState(m,m.state,null)}function wc(c,m){var p=m;if("ref"in m){p={};for(var N in m)N!=="ref"&&(p[N]=m[N])}if(c=c.defaultProps){p===m&&(p=f({},p));for(var R in c)p[R]===void 0&&(p[R]=c[R])}return p}function c_(c){Rh(c)}function d_(c){console.error(c)}function u_(c){Rh(c)}function sx(c,m){try{var p=c.onUncaughtError;p(m.value,{componentStack:m.stack})}catch(N){setTimeout(function(){throw N})}}function m_(c,m,p){try{var N=c.onCaughtError;N(p.value,{componentStack:p.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function Hv(c,m,p){return p=ro(p),p.tag=3,p.payload={element:null},p.callback=function(){sx(c,m)},p}function f_(c){return c=ro(c),c.tag=3,c}function h_(c,m,p,N){var R=p.type.getDerivedStateFromError;if(typeof R=="function"){var F=N.value;c.payload=function(){return R(F)},c.callback=function(){m_(m,p,N)}}var ae=p.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(c.callback=function(){m_(m,p,N),typeof R!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var me=N.stack;this.componentDidCatch(N.value,{componentStack:me!==null?me:""})})}function h$(c,m,p,N,R){if(p.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(m=p.alternate,m!==null&&Dd(m,p,R,!0),p=Sn.current,p!==null){switch(p.tag){case 31:case 13:return Qn===null?hx():p.alternate===null&&Oa===0&&(Oa=3),p.flags&=-257,p.flags|=65536,p.lanes=R,N===qh?p.flags|=16384:(m=p.updateQueue,m===null?p.updateQueue=new Set([N]):m.add(N),xy(c,N,R)),!1;case 22:return p.flags|=65536,N===qh?p.flags|=16384:(m=p.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([N])},p.updateQueue=m):(p=m.retryQueue,p===null?m.retryQueue=new Set([N]):p.add(N)),xy(c,N,R)),!1}throw Error(r(435,p.tag))}return xy(c,N,R),hx(),!1}if(js)return m=Sn.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=R,N!==cv&&(c=Error(r(422),{cause:N}),D0(Hn(c,p)))):(N!==cv&&(m=Error(r(423),{cause:N}),D0(Hn(m,p))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,N=Hn(N,p),R=Hv(c.stateNode,N,R),yv(c,R),Oa!==4&&(Oa=2)),!1;var F=Error(r(520),{cause:N});if(F=Hn(F,p),em===null?em=[F]:em.push(F),Oa!==4&&(Oa=2),m===null)return!0;N=Hn(N,p),p=m;do{switch(p.tag){case 3:return p.flags|=65536,c=R&-R,p.lanes|=c,c=Hv(p.stateNode,N,c),yv(p,c),!1;case 1:if(m=p.type,F=p.stateNode,(p.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(mo===null||!mo.has(F))))return p.flags|=65536,R&=-R,p.lanes|=R,R=f_(R),h_(R,c,p,N),yv(p,R),!1}p=p.return}while(p!==null);return!1}var Vv=Error(r(461)),Wa=!1;function jr(c,m,p,N){m.child=c===null?bT(m,null,p,N):yc(m,c.child,p,N)}function x_(c,m,p,N,R){p=p.render;var F=m.ref;if("ref"in N){var ae={};for(var me in N)me!=="ref"&&(ae[me]=N[me])}else ae=N;return pc(m),N=Ev(c,m,p,ae,F,R),me=Cv(),c!==null&&!Wa?(Tv(c,m,R),pl(c,m,R)):(js&&me&&lv(m),m.flags|=1,jr(c,m,N,R),m.child)}function p_(c,m,p,N,R){if(c===null){var F=p.type;return typeof F=="function"&&!rv(F)&&F.defaultProps===void 0&&p.compare===null?(m.tag=15,m.type=F,g_(c,m,F,N,R)):(c=Lh(p.type,null,N,m,m.mode,R),c.ref=m.ref,c.return=m,m.child=c)}if(F=c.child,!Zv(c,R)){var ae=F.memoizedProps;if(p=p.compare,p=p!==null?p:I0,p(ae,N)&&c.ref===m.ref)return pl(c,m,R)}return m.flags|=1,c=dl(F,N),c.ref=m.ref,c.return=m,m.child=c}function g_(c,m,p,N,R){if(c!==null){var F=c.memoizedProps;if(I0(F,N)&&c.ref===m.ref)if(Wa=!1,m.pendingProps=N=F,Zv(c,R))(c.flags&131072)!==0&&(Wa=!0);else return m.lanes=c.lanes,pl(c,m,R)}return Gv(c,m,p,N,R)}function b_(c,m,p,N){var R=N.children,F=c!==null?c.memoizedState:null;if(c===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),N.mode==="hidden"){if((m.flags&128)!==0){if(F=F!==null?F.baseLanes|p:p,c!==null){for(N=m.child=c.child,R=0;N!==null;)R=R|N.lanes|N.childLanes,N=N.sibling;N=R&~F}else N=0,m.child=null;return v_(c,m,F,p,N)}if((p&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},c!==null&&Bh(m,F!==null?F.cachePool:null),F!==null?NT(m,F):wv(),wT(m);else return N=m.lanes=536870912,v_(c,m,F!==null?F.baseLanes|p:p,p,N)}else F!==null?(Bh(m,F.cachePool),NT(m,F),lo(),m.memoizedState=null):(c!==null&&Bh(m,null),wv(),lo());return jr(c,m,R,p),m.child}function W0(c,m){return c!==null&&c.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function v_(c,m,p,N,R){var F=pv();return F=F===null?null:{parent:Va._currentValue,pool:F},m.memoizedState={baseLanes:p,cachePool:F},c!==null&&Bh(m,null),wv(),wT(m),c!==null&&Dd(c,m,N,!0),m.childLanes=R,null}function ax(c,m){return m=nx({mode:m.mode,children:m.children},c.mode),m.ref=c.ref,c.child=m,m.return=c,m}function y_(c,m,p){return yc(m,c.child,null,p),c=ax(m,m.pendingProps),c.flags|=2,jn(m),m.memoizedState=null,c}function x$(c,m,p){var N=m.pendingProps,R=(m.flags&128)!==0;if(m.flags&=-129,c===null){if(js){if(N.mode==="hidden")return c=ax(m,N),m.lanes=536870912,W0(null,c);if(jv(m),(c=fa)?(c=Ik(c,Wn),c=c!==null&&c.data==="&"?c:null,c!==null&&(m.memoizedState={dehydrated:c,treeContext:Zl!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},p=aT(c),p.return=m,m.child=p,wr=m,fa=null)):c=null,c===null)throw to(m);return m.lanes=536870912,null}return ax(m,N)}var F=c.memoizedState;if(F!==null){var ae=F.dehydrated;if(jv(m),R)if(m.flags&256)m.flags&=-257,m=y_(c,m,p);else if(m.memoizedState!==null)m.child=c.child,m.flags|=128,m=null;else throw Error(r(558));else if(Wa||Dd(c,m,p,!1),R=(p&c.childLanes)!==0,Wa||R){if(N=oa,N!==null&&(ae=tr(N,p),ae!==0&&ae!==F.retryLane))throw F.retryLane=ae,mc(c,ae),dn(N,c,ae),Vv;hx(),m=y_(c,m,p)}else c=F.treeContext,fa=Kn(ae.nextSibling),wr=m,js=!0,eo=null,Wn=!1,c!==null&&iT(m,c),m=ax(m,N),m.flags|=4096;return m}return c=dl(c.child,{mode:N.mode,children:N.children}),c.ref=m.ref,m.child=c,c.return=m,c}function rx(c,m){var p=m.ref;if(p===null)c!==null&&c.ref!==null&&(m.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(c===null||c.ref!==p)&&(m.flags|=4194816)}}function Gv(c,m,p,N,R){return pc(m),p=Ev(c,m,p,N,void 0,R),N=Cv(),c!==null&&!Wa?(Tv(c,m,R),pl(c,m,R)):(js&&N&&lv(m),m.flags|=1,jr(c,m,p,R),m.child)}function N_(c,m,p,N,R,F){return pc(m),m.updateQueue=null,p=jT(m,N,p,R),ST(c),N=Cv(),c!==null&&!Wa?(Tv(c,m,F),pl(c,m,F)):(js&&N&&lv(m),m.flags|=1,jr(c,m,p,F),m.child)}function w_(c,m,p,N,R){if(pc(m),m.stateNode===null){var F=Od,ae=p.contextType;typeof ae=="object"&&ae!==null&&(F=Sr(ae)),F=new p(N,F),m.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=qv,m.stateNode=F,F._reactInternals=m,F=m.stateNode,F.props=N,F.state=m.memoizedState,F.refs={},bv(m),ae=p.contextType,F.context=typeof ae=="object"&&ae!==null?Sr(ae):Od,F.state=m.memoizedState,ae=p.getDerivedStateFromProps,typeof ae=="function"&&($v(m,p,ae,N),F.state=m.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(ae=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),ae!==F.state&&qv.enqueueReplaceState(F,F.state,null),$0(m,N,F,R),B0(),F.state=m.memoizedState),typeof F.componentDidMount=="function"&&(m.flags|=4194308),N=!0}else if(c===null){F=m.stateNode;var me=m.memoizedProps,Ee=wc(p,me);F.props=Ee;var Be=F.context,Je=p.contextType;ae=Od,typeof Je=="object"&&Je!==null&&(ae=Sr(Je));var tt=p.getDerivedStateFromProps;Je=typeof tt=="function"||typeof F.getSnapshotBeforeUpdate=="function",me=m.pendingProps!==me,Je||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(me||Be!==ae)&&o_(m,F,N,ae),ao=!1;var Ve=m.memoizedState;F.state=Ve,$0(m,N,F,R),B0(),Be=m.memoizedState,me||Ve!==Be||ao?(typeof tt=="function"&&($v(m,p,tt,N),Be=m.memoizedState),(Ee=ao||l_(m,p,Ee,N,Ve,Be,ae))?(Je||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(m.flags|=4194308)):(typeof F.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=N,m.memoizedState=Be),F.props=N,F.state=Be,F.context=ae,N=Ee):(typeof F.componentDidMount=="function"&&(m.flags|=4194308),N=!1)}else{F=m.stateNode,vv(c,m),ae=m.memoizedProps,Je=wc(p,ae),F.props=Je,tt=m.pendingProps,Ve=F.context,Be=p.contextType,Ee=Od,typeof Be=="object"&&Be!==null&&(Ee=Sr(Be)),me=p.getDerivedStateFromProps,(Be=typeof me=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ae!==tt||Ve!==Ee)&&o_(m,F,N,Ee),ao=!1,Ve=m.memoizedState,F.state=Ve,$0(m,N,F,R),B0();var Ge=m.memoizedState;ae!==tt||Ve!==Ge||ao||c!==null&&c.dependencies!==null&&Uh(c.dependencies)?(typeof me=="function"&&($v(m,p,me,N),Ge=m.memoizedState),(Je=ao||l_(m,p,Je,N,Ve,Ge,Ee)||c!==null&&c.dependencies!==null&&Uh(c.dependencies))?(Be||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(N,Ge,Ee),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(N,Ge,Ee)),typeof F.componentDidUpdate=="function"&&(m.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof F.componentDidUpdate!="function"||ae===c.memoizedProps&&Ve===c.memoizedState||(m.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&Ve===c.memoizedState||(m.flags|=1024),m.memoizedProps=N,m.memoizedState=Ge),F.props=N,F.state=Ge,F.context=Ee,N=Je):(typeof F.componentDidUpdate!="function"||ae===c.memoizedProps&&Ve===c.memoizedState||(m.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&Ve===c.memoizedState||(m.flags|=1024),N=!1)}return F=N,rx(c,m),N=(m.flags&128)!==0,F||N?(F=m.stateNode,p=N&&typeof p.getDerivedStateFromError!="function"?null:F.render(),m.flags|=1,c!==null&&N?(m.child=yc(m,c.child,null,R),m.child=yc(m,null,p,R)):jr(c,m,p,R),m.memoizedState=F.state,c=m.child):c=pl(c,m,R),c}function S_(c,m,p,N){return hc(),m.flags|=256,jr(c,m,p,N),m.child}var Wv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qv(c){return{baseLanes:c,cachePool:mT()}}function Kv(c,m,p){return c=c!==null?c.childLanes&~p:0,m&&(c|=En),c}function j_(c,m,p){var N=m.pendingProps,R=!1,F=(m.flags&128)!==0,ae;if((ae=F)||(ae=c!==null&&c.memoizedState===null?!1:(Ua.current&2)!==0),ae&&(R=!0,m.flags&=-129),ae=(m.flags&32)!==0,m.flags&=-33,c===null){if(js){if(R?io(m):lo(),(c=fa)?(c=Ik(c,Wn),c=c!==null&&c.data!=="&"?c:null,c!==null&&(m.memoizedState={dehydrated:c,treeContext:Zl!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},p=aT(c),p.return=m,m.child=p,wr=m,fa=null)):c=null,c===null)throw to(m);return Oy(c)?m.lanes=32:m.lanes=536870912,null}var me=N.children;return N=N.fallback,R?(lo(),R=m.mode,me=nx({mode:"hidden",children:me},R),N=fc(N,R,p,null),me.return=m,N.return=m,me.sibling=N,m.child=me,N=m.child,N.memoizedState=Qv(p),N.childLanes=Kv(c,ae,p),m.memoizedState=Wv,W0(null,N)):(io(m),Jv(m,me))}var Ee=c.memoizedState;if(Ee!==null&&(me=Ee.dehydrated,me!==null)){if(F)m.flags&256?(io(m),m.flags&=-257,m=Yv(c,m,p)):m.memoizedState!==null?(lo(),m.child=c.child,m.flags|=128,m=null):(lo(),me=N.fallback,R=m.mode,N=nx({mode:"visible",children:N.children},R),me=fc(me,R,p,null),me.flags|=2,N.return=m,me.return=m,N.sibling=me,m.child=N,yc(m,c.child,null,p),N=m.child,N.memoizedState=Qv(p),N.childLanes=Kv(c,ae,p),m.memoizedState=Wv,m=W0(null,N));else if(io(m),Oy(me)){if(ae=me.nextSibling&&me.nextSibling.dataset,ae)var Be=ae.dgst;ae=Be,N=Error(r(419)),N.stack="",N.digest=ae,D0({value:N,source:null,stack:null}),m=Yv(c,m,p)}else if(Wa||Dd(c,m,p,!1),ae=(p&c.childLanes)!==0,Wa||ae){if(ae=oa,ae!==null&&(N=tr(ae,p),N!==0&&N!==Ee.retryLane))throw Ee.retryLane=N,mc(c,N),dn(ae,c,N),Vv;ky(me)||hx(),m=Yv(c,m,p)}else ky(me)?(m.flags|=192,m.child=c.child,m=null):(c=Ee.treeContext,fa=Kn(me.nextSibling),wr=m,js=!0,eo=null,Wn=!1,c!==null&&iT(m,c),m=Jv(m,N.children),m.flags|=4096);return m}return R?(lo(),me=N.fallback,R=m.mode,Ee=c.child,Be=Ee.sibling,N=dl(Ee,{mode:"hidden",children:N.children}),N.subtreeFlags=Ee.subtreeFlags&65011712,Be!==null?me=dl(Be,me):(me=fc(me,R,p,null),me.flags|=2),me.return=m,N.return=m,N.sibling=me,m.child=N,W0(null,N),N=m.child,me=c.child.memoizedState,me===null?me=Qv(p):(R=me.cachePool,R!==null?(Ee=Va._currentValue,R=R.parent!==Ee?{parent:Ee,pool:Ee}:R):R=mT(),me={baseLanes:me.baseLanes|p,cachePool:R}),N.memoizedState=me,N.childLanes=Kv(c,ae,p),m.memoizedState=Wv,W0(c.child,N)):(io(m),p=c.child,c=p.sibling,p=dl(p,{mode:"visible",children:N.children}),p.return=m,p.sibling=null,c!==null&&(ae=m.deletions,ae===null?(m.deletions=[c],m.flags|=16):ae.push(c)),m.child=p,m.memoizedState=null,p)}function Jv(c,m){return m=nx({mode:"visible",children:m},c.mode),m.return=c,c.child=m}function nx(c,m){return c=wn(22,c,null,m),c.lanes=0,c}function Yv(c,m,p){return yc(m,c.child,null,p),c=Jv(m,m.pendingProps.children),c.flags|=2,m.memoizedState=null,c}function A_(c,m,p){c.lanes|=m;var N=c.alternate;N!==null&&(N.lanes|=m),mv(c.return,m,p)}function Xv(c,m,p,N,R,F){var ae=c.memoizedState;ae===null?c.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:N,tail:p,tailMode:R,treeForkCount:F}:(ae.isBackwards=m,ae.rendering=null,ae.renderingStartTime=0,ae.last=N,ae.tail=p,ae.tailMode=R,ae.treeForkCount=F)}function E_(c,m,p){var N=m.pendingProps,R=N.revealOrder,F=N.tail;N=N.children;var ae=Ua.current,me=(ae&2)!==0;if(me?(ae=ae&1|2,m.flags|=128):ae&=1,Y(Ua,ae),jr(c,m,N,p),N=js?P0:0,!me&&c!==null&&(c.flags&128)!==0)e:for(c=m.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&A_(c,p,m);else if(c.tag===19)A_(c,p,m);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===m)break e;for(;c.sibling===null;){if(c.return===null||c.return===m)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(R){case"forwards":for(p=m.child,R=null;p!==null;)c=p.alternate,c!==null&&Wh(c)===null&&(R=p),p=p.sibling;p=R,p===null?(R=m.child,m.child=null):(R=p.sibling,p.sibling=null),Xv(m,!1,R,p,F,N);break;case"backwards":case"unstable_legacy-backwards":for(p=null,R=m.child,m.child=null;R!==null;){if(c=R.alternate,c!==null&&Wh(c)===null){m.child=R;break}c=R.sibling,R.sibling=p,p=R,R=c}Xv(m,!0,p,null,F,N);break;case"together":Xv(m,!1,null,null,void 0,N);break;default:m.memoizedState=null}return m.child}function pl(c,m,p){if(c!==null&&(m.dependencies=c.dependencies),uo|=m.lanes,(p&m.childLanes)===0)if(c!==null){if(Dd(c,m,p,!1),(p&m.childLanes)===0)return null}else return null;if(c!==null&&m.child!==c.child)throw Error(r(153));if(m.child!==null){for(c=m.child,p=dl(c,c.pendingProps),m.child=p,p.return=m;c.sibling!==null;)c=c.sibling,p=p.sibling=dl(c,c.pendingProps),p.return=m;p.sibling=null}return m.child}function Zv(c,m){return(c.lanes&m)!==0?!0:(c=c.dependencies,!!(c!==null&&Uh(c)))}function p$(c,m,p){switch(m.tag){case 3:te(m,m.stateNode.containerInfo),so(m,Va,c.memoizedState.cache),hc();break;case 27:case 5:ue(m);break;case 4:te(m,m.stateNode.containerInfo);break;case 10:so(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,jv(m),null;break;case 13:var N=m.memoizedState;if(N!==null)return N.dehydrated!==null?(io(m),m.flags|=128,null):(p&m.child.childLanes)!==0?j_(c,m,p):(io(m),c=pl(c,m,p),c!==null?c.sibling:null);io(m);break;case 19:var R=(c.flags&128)!==0;if(N=(p&m.childLanes)!==0,N||(Dd(c,m,p,!1),N=(p&m.childLanes)!==0),R){if(N)return E_(c,m,p);m.flags|=128}if(R=m.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),Y(Ua,Ua.current),N)break;return null;case 22:return m.lanes=0,b_(c,m,p,m.pendingProps);case 24:so(m,Va,c.memoizedState.cache)}return pl(c,m,p)}function C_(c,m,p){if(c!==null)if(c.memoizedProps!==m.pendingProps)Wa=!0;else{if(!Zv(c,p)&&(m.flags&128)===0)return Wa=!1,p$(c,m,p);Wa=(c.flags&131072)!==0}else Wa=!1,js&&(m.flags&1048576)!==0&&nT(m,P0,m.index);switch(m.lanes=0,m.tag){case 16:e:{var N=m.pendingProps;if(c=bc(m.elementType),m.type=c,typeof c=="function")rv(c)?(N=wc(c,N),m.tag=1,m=w_(null,m,c,N,p)):(m.tag=0,m=Gv(null,m,c,N,p));else{if(c!=null){var R=c.$$typeof;if(R===O){m.tag=11,m=x_(null,m,c,N,p);break e}else if(R===S){m.tag=14,m=p_(null,m,c,N,p);break e}}throw m=_(c)||c,Error(r(306,m,""))}}return m;case 0:return Gv(c,m,m.type,m.pendingProps,p);case 1:return N=m.type,R=wc(N,m.pendingProps),w_(c,m,N,R,p);case 3:e:{if(te(m,m.stateNode.containerInfo),c===null)throw Error(r(387));N=m.pendingProps;var F=m.memoizedState;R=F.element,vv(c,m),$0(m,N,null,p);var ae=m.memoizedState;if(N=ae.cache,so(m,Va,N),N!==F.cache&&fv(m,[Va],p,!0),B0(),N=ae.element,F.isDehydrated)if(F={element:N,isDehydrated:!1,cache:ae.cache},m.updateQueue.baseState=F,m.memoizedState=F,m.flags&256){m=S_(c,m,N,p);break e}else if(N!==R){R=Hn(Error(r(424)),m),D0(R),m=S_(c,m,N,p);break e}else{switch(c=m.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(fa=Kn(c.firstChild),wr=m,js=!0,eo=null,Wn=!0,p=bT(m,null,N,p),m.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(hc(),N===R){m=pl(c,m,p);break e}jr(c,m,N,p)}m=m.child}return m;case 26:return rx(c,m),c===null?(p=Fk(m.type,null,m.pendingProps,null))?m.memoizedState=p:js||(p=m.type,c=m.pendingProps,N=Nx(se.current).createElement(p),N[ge]=m,N[ye]=c,Ar(N,p,c),At(N),m.stateNode=N):m.memoizedState=Fk(m.type,c.memoizedProps,m.pendingProps,c.memoizedState),null;case 27:return ue(m),c===null&&js&&(N=m.stateNode=Dk(m.type,m.pendingProps,se.current),wr=m,Wn=!0,R=fa,po(m.type)?(Iy=R,fa=Kn(N.firstChild)):fa=R),jr(c,m,m.pendingProps.children,p),rx(c,m),c===null&&(m.flags|=4194304),m.child;case 5:return c===null&&js&&((R=N=fa)&&(N=G$(N,m.type,m.pendingProps,Wn),N!==null?(m.stateNode=N,wr=m,fa=Kn(N.firstChild),Wn=!1,R=!0):R=!1),R||to(m)),ue(m),R=m.type,F=m.pendingProps,ae=c!==null?c.memoizedProps:null,N=F.children,Cy(R,F)?N=null:ae!==null&&Cy(R,ae)&&(m.flags|=32),m.memoizedState!==null&&(R=Ev(c,m,l$,null,null,p),om._currentValue=R),rx(c,m),jr(c,m,N,p),m.child;case 6:return c===null&&js&&((c=p=fa)&&(p=W$(p,m.pendingProps,Wn),p!==null?(m.stateNode=p,wr=m,fa=null,c=!0):c=!1),c||to(m)),null;case 13:return j_(c,m,p);case 4:return te(m,m.stateNode.containerInfo),N=m.pendingProps,c===null?m.child=yc(m,null,N,p):jr(c,m,N,p),m.child;case 11:return x_(c,m,m.type,m.pendingProps,p);case 7:return jr(c,m,m.pendingProps,p),m.child;case 8:return jr(c,m,m.pendingProps.children,p),m.child;case 12:return jr(c,m,m.pendingProps.children,p),m.child;case 10:return N=m.pendingProps,so(m,m.type,N.value),jr(c,m,N.children,p),m.child;case 9:return R=m.type._context,N=m.pendingProps.children,pc(m),R=Sr(R),N=N(R),m.flags|=1,jr(c,m,N,p),m.child;case 14:return p_(c,m,m.type,m.pendingProps,p);case 15:return g_(c,m,m.type,m.pendingProps,p);case 19:return E_(c,m,p);case 31:return x$(c,m,p);case 22:return b_(c,m,p,m.pendingProps);case 24:return pc(m),N=Sr(Va),c===null?(R=pv(),R===null&&(R=oa,F=hv(),R.pooledCache=F,F.refCount++,F!==null&&(R.pooledCacheLanes|=p),R=F),m.memoizedState={parent:N,cache:R},bv(m),so(m,Va,R)):((c.lanes&p)!==0&&(vv(c,m),$0(m,null,null,p),B0()),R=c.memoizedState,F=m.memoizedState,R.parent!==N?(R={parent:N,cache:N},m.memoizedState=R,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=R),so(m,Va,N)):(N=F.cache,so(m,Va,N),N!==R.cache&&fv(m,[Va],p,!0))),jr(c,m,m.pendingProps.children,p),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function gl(c){c.flags|=4}function ey(c,m,p,N,R){if((m=(c.mode&32)!==0)&&(m=!1),m){if(c.flags|=16777216,(R&335544128)===R)if(c.stateNode.complete)c.flags|=8192;else if(ek())c.flags|=8192;else throw vc=qh,gv}else c.flags&=-16777217}function T_(c,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!qk(m))if(ek())c.flags|=8192;else throw vc=qh,gv}function ix(c,m){m!==null&&(c.flags|=4),c.flags&16384&&(m=c.tag!==22?Ae():536870912,c.lanes|=m,Wd|=m)}function Q0(c,m){if(!js)switch(c.tailMode){case"hidden":m=c.tail;for(var p=null;m!==null;)m.alternate!==null&&(p=m),m=m.sibling;p===null?c.tail=null:p.sibling=null;break;case"collapsed":p=c.tail;for(var N=null;p!==null;)p.alternate!==null&&(N=p),p=p.sibling;N===null?m||c.tail===null?c.tail=null:c.tail.sibling=null:N.sibling=null}}function ha(c){var m=c.alternate!==null&&c.alternate.child===c.child,p=0,N=0;if(m)for(var R=c.child;R!==null;)p|=R.lanes|R.childLanes,N|=R.subtreeFlags&65011712,N|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)p|=R.lanes|R.childLanes,N|=R.subtreeFlags,N|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=N,c.childLanes=p,m}function g$(c,m,p){var N=m.pendingProps;switch(ov(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ha(m),null;case 1:return ha(m),null;case 3:return p=m.stateNode,N=null,c!==null&&(N=c.memoizedState.cache),m.memoizedState.cache!==N&&(m.flags|=2048),fl(Va),Z(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(c===null||c.child===null)&&(Pd(m)?gl(m):c===null||c.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,dv())),ha(m),null;case 26:var R=m.type,F=m.memoizedState;return c===null?(gl(m),F!==null?(ha(m),T_(m,F)):(ha(m),ey(m,R,null,N,p))):F?F!==c.memoizedState?(gl(m),ha(m),T_(m,F)):(ha(m),m.flags&=-16777217):(c=c.memoizedProps,c!==N&&gl(m),ha(m),ey(m,R,c,N,p)),null;case 27:if(re(m),p=se.current,R=m.type,c!==null&&m.stateNode!=null)c.memoizedProps!==N&&gl(m);else{if(!N){if(m.stateNode===null)throw Error(r(166));return ha(m),null}c=J.current,Pd(m)?lT(m):(c=Dk(R,N,p),m.stateNode=c,gl(m))}return ha(m),null;case 5:if(re(m),R=m.type,c!==null&&m.stateNode!=null)c.memoizedProps!==N&&gl(m);else{if(!N){if(m.stateNode===null)throw Error(r(166));return ha(m),null}if(F=J.current,Pd(m))lT(m);else{var ae=Nx(se.current);switch(F){case 1:F=ae.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:F=ae.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":F=ae.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":F=ae.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":F=ae.createElement("div"),F.innerHTML="<script><\/script>",F=F.removeChild(F.firstChild);break;case"select":F=typeof N.is=="string"?ae.createElement("select",{is:N.is}):ae.createElement("select"),N.multiple?F.multiple=!0:N.size&&(F.size=N.size);break;default:F=typeof N.is=="string"?ae.createElement(R,{is:N.is}):ae.createElement(R)}}F[ge]=m,F[ye]=N;e:for(ae=m.child;ae!==null;){if(ae.tag===5||ae.tag===6)F.appendChild(ae.stateNode);else if(ae.tag!==4&&ae.tag!==27&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===m)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===m)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}m.stateNode=F;e:switch(Ar(F,R,N),R){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}N&&gl(m)}}return ha(m),ey(m,m.type,c===null?null:c.memoizedProps,m.pendingProps,p),null;case 6:if(c&&m.stateNode!=null)c.memoizedProps!==N&&gl(m);else{if(typeof N!="string"&&m.stateNode===null)throw Error(r(166));if(c=se.current,Pd(m)){if(c=m.stateNode,p=m.memoizedProps,N=null,R=wr,R!==null)switch(R.tag){case 27:case 5:N=R.memoizedProps}c[ge]=m,c=!!(c.nodeValue===p||N!==null&&N.suppressHydrationWarning===!0||jk(c.nodeValue,p)),c||to(m,!0)}else c=Nx(c).createTextNode(N),c[ge]=m,m.stateNode=c}return ha(m),null;case 31:if(p=m.memoizedState,c===null||c.memoizedState!==null){if(N=Pd(m),p!==null){if(c===null){if(!N)throw Error(r(318));if(c=m.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(557));c[ge]=m}else hc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ha(m),c=!1}else p=dv(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=p),c=!0;if(!c)return m.flags&256?(jn(m),m):(jn(m),null);if((m.flags&128)!==0)throw Error(r(558))}return ha(m),null;case 13:if(N=m.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=Pd(m),N!==null&&N.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=m.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[ge]=m}else hc(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ha(m),R=!1}else R=dv(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return m.flags&256?(jn(m),m):(jn(m),null)}return jn(m),(m.flags&128)!==0?(m.lanes=p,m):(p=N!==null,c=c!==null&&c.memoizedState!==null,p&&(N=m.child,R=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(R=N.alternate.memoizedState.cachePool.pool),F=null,N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(F=N.memoizedState.cachePool.pool),F!==R&&(N.flags|=2048)),p!==c&&p&&(m.child.flags|=8192),ix(m,m.updateQueue),ha(m),null);case 4:return Z(),c===null&&wy(m.stateNode.containerInfo),ha(m),null;case 10:return fl(m.type),ha(m),null;case 19:if(P(Ua),N=m.memoizedState,N===null)return ha(m),null;if(R=(m.flags&128)!==0,F=N.rendering,F===null)if(R)Q0(N,!1);else{if(Oa!==0||c!==null&&(c.flags&128)!==0)for(c=m.child;c!==null;){if(F=Wh(c),F!==null){for(m.flags|=128,Q0(N,!1),c=F.updateQueue,m.updateQueue=c,ix(m,c),m.subtreeFlags=0,c=p,p=m.child;p!==null;)sT(p,c),p=p.sibling;return Y(Ua,Ua.current&1|2),js&&ul(m,N.treeForkCount),m.child}c=c.sibling}N.tail!==null&&Se()>ux&&(m.flags|=128,R=!0,Q0(N,!1),m.lanes=4194304)}else{if(!R)if(c=Wh(F),c!==null){if(m.flags|=128,R=!0,c=c.updateQueue,m.updateQueue=c,ix(m,c),Q0(N,!0),N.tail===null&&N.tailMode==="hidden"&&!F.alternate&&!js)return ha(m),null}else 2*Se()-N.renderingStartTime>ux&&p!==536870912&&(m.flags|=128,R=!0,Q0(N,!1),m.lanes=4194304);N.isBackwards?(F.sibling=m.child,m.child=F):(c=N.last,c!==null?c.sibling=F:m.child=F,N.last=F)}return N.tail!==null?(c=N.tail,N.rendering=c,N.tail=c.sibling,N.renderingStartTime=Se(),c.sibling=null,p=Ua.current,Y(Ua,R?p&1|2:p&1),js&&ul(m,N.treeForkCount),c):(ha(m),null);case 22:case 23:return jn(m),Sv(),N=m.memoizedState!==null,c!==null?c.memoizedState!==null!==N&&(m.flags|=8192):N&&(m.flags|=8192),N?(p&536870912)!==0&&(m.flags&128)===0&&(ha(m),m.subtreeFlags&6&&(m.flags|=8192)):ha(m),p=m.updateQueue,p!==null&&ix(m,p.retryQueue),p=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),N=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),N!==p&&(m.flags|=2048),c!==null&&P(gc),null;case 24:return p=null,c!==null&&(p=c.memoizedState.cache),m.memoizedState.cache!==p&&(m.flags|=2048),fl(Va),ha(m),null;case 25:return null;case 30:return null}throw Error(r(156,m.tag))}function b$(c,m){switch(ov(m),m.tag){case 1:return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 3:return fl(Va),Z(),c=m.flags,(c&65536)!==0&&(c&128)===0?(m.flags=c&-65537|128,m):null;case 26:case 27:case 5:return re(m),null;case 31:if(m.memoizedState!==null){if(jn(m),m.alternate===null)throw Error(r(340));hc()}return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 13:if(jn(m),c=m.memoizedState,c!==null&&c.dehydrated!==null){if(m.alternate===null)throw Error(r(340));hc()}return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 19:return P(Ua),null;case 4:return Z(),null;case 10:return fl(m.type),null;case 22:case 23:return jn(m),Sv(),c!==null&&P(gc),c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 24:return fl(Va),null;case 25:return null;default:return null}}function __(c,m){switch(ov(m),m.tag){case 3:fl(Va),Z();break;case 26:case 27:case 5:re(m);break;case 4:Z();break;case 31:m.memoizedState!==null&&jn(m);break;case 13:jn(m);break;case 19:P(Ua);break;case 10:fl(m.type);break;case 22:case 23:jn(m),Sv(),c!==null&&P(gc);break;case 24:fl(Va)}}function K0(c,m){try{var p=m.updateQueue,N=p!==null?p.lastEffect:null;if(N!==null){var R=N.next;p=R;do{if((p.tag&c)===c){N=void 0;var F=p.create,ae=p.inst;N=F(),ae.destroy=N}p=p.next}while(p!==R)}}catch(me){Qs(m,m.return,me)}}function oo(c,m,p){try{var N=m.updateQueue,R=N!==null?N.lastEffect:null;if(R!==null){var F=R.next;N=F;do{if((N.tag&c)===c){var ae=N.inst,me=ae.destroy;if(me!==void 0){ae.destroy=void 0,R=m;var Ee=p,Be=me;try{Be()}catch(Je){Qs(R,Ee,Je)}}}N=N.next}while(N!==F)}}catch(Je){Qs(m,m.return,Je)}}function k_(c){var m=c.updateQueue;if(m!==null){var p=c.stateNode;try{yT(m,p)}catch(N){Qs(c,c.return,N)}}}function O_(c,m,p){p.props=wc(c.type,c.memoizedProps),p.state=c.memoizedState;try{p.componentWillUnmount()}catch(N){Qs(c,m,N)}}function J0(c,m){try{var p=c.ref;if(p!==null){switch(c.tag){case 26:case 27:case 5:var N=c.stateNode;break;case 30:N=c.stateNode;break;default:N=c.stateNode}typeof p=="function"?c.refCleanup=p(N):p.current=N}}catch(R){Qs(c,m,R)}}function Bi(c,m){var p=c.ref,N=c.refCleanup;if(p!==null)if(typeof N=="function")try{N()}catch(R){Qs(c,m,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(R){Qs(c,m,R)}else p.current=null}function I_(c){var m=c.type,p=c.memoizedProps,N=c.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":p.autoFocus&&N.focus();break e;case"img":p.src?N.src=p.src:p.srcSet&&(N.srcset=p.srcSet)}}catch(R){Qs(c,c.return,R)}}function ty(c,m,p){try{var N=c.stateNode;z$(N,c.type,p,m),N[ye]=m}catch(R){Qs(c,c.return,R)}}function R_(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&po(c.type)||c.tag===4}function sy(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||R_(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&po(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ay(c,m,p){var N=c.tag;if(N===5||N===6)c=c.stateNode,m?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(c,m):(m=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,m.appendChild(c),p=p._reactRootContainer,p!=null||m.onclick!==null||(m.onclick=ol));else if(N!==4&&(N===27&&po(c.type)&&(p=c.stateNode,m=null),c=c.child,c!==null))for(ay(c,m,p),c=c.sibling;c!==null;)ay(c,m,p),c=c.sibling}function lx(c,m,p){var N=c.tag;if(N===5||N===6)c=c.stateNode,m?p.insertBefore(c,m):p.appendChild(c);else if(N!==4&&(N===27&&po(c.type)&&(p=c.stateNode),c=c.child,c!==null))for(lx(c,m,p),c=c.sibling;c!==null;)lx(c,m,p),c=c.sibling}function P_(c){var m=c.stateNode,p=c.memoizedProps;try{for(var N=c.type,R=m.attributes;R.length;)m.removeAttributeNode(R[0]);Ar(m,N,p),m[ge]=c,m[ye]=p}catch(F){Qs(c,c.return,F)}}var bl=!1,Qa=!1,ry=!1,D_=typeof WeakSet=="function"?WeakSet:Set,mr=null;function v$(c,m){if(c=c.containerInfo,Ay=Tx,c=WC(c),Yb(c)){if("selectionStart"in c)var p={start:c.selectionStart,end:c.selectionEnd};else e:{p=(p=c.ownerDocument)&&p.defaultView||window;var N=p.getSelection&&p.getSelection();if(N&&N.rangeCount!==0){p=N.anchorNode;var R=N.anchorOffset,F=N.focusNode;N=N.focusOffset;try{p.nodeType,F.nodeType}catch{p=null;break e}var ae=0,me=-1,Ee=-1,Be=0,Je=0,tt=c,Ve=null;t:for(;;){for(var Ge;tt!==p||R!==0&&tt.nodeType!==3||(me=ae+R),tt!==F||N!==0&&tt.nodeType!==3||(Ee=ae+N),tt.nodeType===3&&(ae+=tt.nodeValue.length),(Ge=tt.firstChild)!==null;)Ve=tt,tt=Ge;for(;;){if(tt===c)break t;if(Ve===p&&++Be===R&&(me=ae),Ve===F&&++Je===N&&(Ee=ae),(Ge=tt.nextSibling)!==null)break;tt=Ve,Ve=tt.parentNode}tt=Ge}p=me===-1||Ee===-1?null:{start:me,end:Ee}}else p=null}p=p||{start:0,end:0}}else p=null;for(Ey={focusedElem:c,selectionRange:p},Tx=!1,mr=m;mr!==null;)if(m=mr,c=m.child,(m.subtreeFlags&1028)!==0&&c!==null)c.return=m,mr=c;else for(;mr!==null;){switch(m=mr,F=m.alternate,c=m.flags,m.tag){case 0:if((c&4)!==0&&(c=m.updateQueue,c=c!==null?c.events:null,c!==null))for(p=0;p<c.length;p++)R=c[p],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&F!==null){c=void 0,p=m,R=F.memoizedProps,F=F.memoizedState,N=p.stateNode;try{var Et=wc(p.type,R);c=N.getSnapshotBeforeUpdate(Et,F),N.__reactInternalSnapshotBeforeUpdate=c}catch(Bt){Qs(p,p.return,Bt)}}break;case 3:if((c&1024)!==0){if(c=m.stateNode.containerInfo,p=c.nodeType,p===9)_y(c);else if(p===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":_y(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=m.sibling,c!==null){c.return=m.return,mr=c;break}mr=m.return}}function M_(c,m,p){var N=p.flags;switch(p.tag){case 0:case 11:case 15:yl(c,p),N&4&&K0(5,p);break;case 1:if(yl(c,p),N&4)if(c=p.stateNode,m===null)try{c.componentDidMount()}catch(ae){Qs(p,p.return,ae)}else{var R=wc(p.type,m.memoizedProps);m=m.memoizedState;try{c.componentDidUpdate(R,m,c.__reactInternalSnapshotBeforeUpdate)}catch(ae){Qs(p,p.return,ae)}}N&64&&k_(p),N&512&&J0(p,p.return);break;case 3:if(yl(c,p),N&64&&(c=p.updateQueue,c!==null)){if(m=null,p.child!==null)switch(p.child.tag){case 27:case 5:m=p.child.stateNode;break;case 1:m=p.child.stateNode}try{yT(c,m)}catch(ae){Qs(p,p.return,ae)}}break;case 27:m===null&&N&4&&P_(p);case 26:case 5:yl(c,p),m===null&&N&4&&I_(p),N&512&&J0(p,p.return);break;case 12:yl(c,p);break;case 31:yl(c,p),N&4&&U_(c,p);break;case 13:yl(c,p),N&4&&z_(c,p),N&64&&(c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(p=T$.bind(null,p),Q$(c,p))));break;case 22:if(N=p.memoizedState!==null||bl,!N){m=m!==null&&m.memoizedState!==null||Qa,R=bl;var F=Qa;bl=N,(Qa=m)&&!F?Nl(c,p,(p.subtreeFlags&8772)!==0):yl(c,p),bl=R,Qa=F}break;case 30:break;default:yl(c,p)}}function L_(c){var m=c.alternate;m!==null&&(c.alternate=null,L_(m)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(m=c.stateNode,m!==null&&nt(m)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Na=null,nn=!1;function vl(c,m,p){for(p=p.child;p!==null;)F_(c,m,p),p=p.sibling}function F_(c,m,p){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Ne,p)}catch{}switch(p.tag){case 26:Qa||Bi(p,m),vl(c,m,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Qa||Bi(p,m);var N=Na,R=nn;po(p.type)&&(Na=p.stateNode,nn=!1),vl(c,m,p),nm(p.stateNode),Na=N,nn=R;break;case 5:Qa||Bi(p,m);case 6:if(N=Na,R=nn,Na=null,vl(c,m,p),Na=N,nn=R,Na!==null)if(nn)try{(Na.nodeType===9?Na.body:Na.nodeName==="HTML"?Na.ownerDocument.body:Na).removeChild(p.stateNode)}catch(F){Qs(p,m,F)}else try{Na.removeChild(p.stateNode)}catch(F){Qs(p,m,F)}break;case 18:Na!==null&&(nn?(c=Na,kk(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,p.stateNode),tu(c)):kk(Na,p.stateNode));break;case 4:N=Na,R=nn,Na=p.stateNode.containerInfo,nn=!0,vl(c,m,p),Na=N,nn=R;break;case 0:case 11:case 14:case 15:oo(2,p,m),Qa||oo(4,p,m),vl(c,m,p);break;case 1:Qa||(Bi(p,m),N=p.stateNode,typeof N.componentWillUnmount=="function"&&O_(p,m,N)),vl(c,m,p);break;case 21:vl(c,m,p);break;case 22:Qa=(N=Qa)||p.memoizedState!==null,vl(c,m,p),Qa=N;break;default:vl(c,m,p)}}function U_(c,m){if(m.memoizedState===null&&(c=m.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{tu(c)}catch(p){Qs(m,m.return,p)}}}function z_(c,m){if(m.memoizedState===null&&(c=m.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{tu(c)}catch(p){Qs(m,m.return,p)}}function y$(c){switch(c.tag){case 31:case 13:case 19:var m=c.stateNode;return m===null&&(m=c.stateNode=new D_),m;case 22:return c=c.stateNode,m=c._retryCache,m===null&&(m=c._retryCache=new D_),m;default:throw Error(r(435,c.tag))}}function ox(c,m){var p=y$(c);m.forEach(function(N){if(!p.has(N)){p.add(N);var R=_$.bind(null,c,N);N.then(R,R)}})}function ln(c,m){var p=m.deletions;if(p!==null)for(var N=0;N<p.length;N++){var R=p[N],F=c,ae=m,me=ae;e:for(;me!==null;){switch(me.tag){case 27:if(po(me.type)){Na=me.stateNode,nn=!1;break e}break;case 5:Na=me.stateNode,nn=!1;break e;case 3:case 4:Na=me.stateNode.containerInfo,nn=!0;break e}me=me.return}if(Na===null)throw Error(r(160));F_(F,ae,R),Na=null,nn=!1,F=R.alternate,F!==null&&(F.return=null),R.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)B_(m,c),m=m.sibling}var wi=null;function B_(c,m){var p=c.alternate,N=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ln(m,c),on(c),N&4&&(oo(3,c,c.return),K0(3,c),oo(5,c,c.return));break;case 1:ln(m,c),on(c),N&512&&(Qa||p===null||Bi(p,p.return)),N&64&&bl&&(c=c.updateQueue,c!==null&&(N=c.callbacks,N!==null&&(p=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=p===null?N:p.concat(N))));break;case 26:var R=wi;if(ln(m,c),on(c),N&512&&(Qa||p===null||Bi(p,p.return)),N&4){var F=p!==null?p.memoizedState:null;if(N=c.memoizedState,p===null)if(N===null)if(c.stateNode===null){e:{N=c.type,p=c.memoizedProps,R=R.ownerDocument||R;t:switch(N){case"title":F=R.getElementsByTagName("title")[0],(!F||F[He]||F[ge]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=R.createElement(N),R.head.insertBefore(F,R.querySelector("head > title"))),Ar(F,N,p),F[ge]=c,At(F),N=F;break e;case"link":var ae=Bk("link","href",R).get(N+(p.href||""));if(ae){for(var me=0;me<ae.length;me++)if(F=ae[me],F.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&F.getAttribute("rel")===(p.rel==null?null:p.rel)&&F.getAttribute("title")===(p.title==null?null:p.title)&&F.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){ae.splice(me,1);break t}}F=R.createElement(N),Ar(F,N,p),R.head.appendChild(F);break;case"meta":if(ae=Bk("meta","content",R).get(N+(p.content||""))){for(me=0;me<ae.length;me++)if(F=ae[me],F.getAttribute("content")===(p.content==null?null:""+p.content)&&F.getAttribute("name")===(p.name==null?null:p.name)&&F.getAttribute("property")===(p.property==null?null:p.property)&&F.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&F.getAttribute("charset")===(p.charSet==null?null:p.charSet)){ae.splice(me,1);break t}}F=R.createElement(N),Ar(F,N,p),R.head.appendChild(F);break;default:throw Error(r(468,N))}F[ge]=c,At(F),N=F}c.stateNode=N}else $k(R,c.type,c.stateNode);else c.stateNode=zk(R,N,c.memoizedProps);else F!==N?(F===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):F.count--,N===null?$k(R,c.type,c.stateNode):zk(R,N,c.memoizedProps)):N===null&&c.stateNode!==null&&ty(c,c.memoizedProps,p.memoizedProps)}break;case 27:ln(m,c),on(c),N&512&&(Qa||p===null||Bi(p,p.return)),p!==null&&N&4&&ty(c,c.memoizedProps,p.memoizedProps);break;case 5:if(ln(m,c),on(c),N&512&&(Qa||p===null||Bi(p,p.return)),c.flags&32){R=c.stateNode;try{jd(R,"")}catch(Et){Qs(c,c.return,Et)}}N&4&&c.stateNode!=null&&(R=c.memoizedProps,ty(c,R,p!==null?p.memoizedProps:R)),N&1024&&(ry=!0);break;case 6:if(ln(m,c),on(c),N&4){if(c.stateNode===null)throw Error(r(162));N=c.memoizedProps,p=c.stateNode;try{p.nodeValue=N}catch(Et){Qs(c,c.return,Et)}}break;case 3:if(jx=null,R=wi,wi=wx(m.containerInfo),ln(m,c),wi=R,on(c),N&4&&p!==null&&p.memoizedState.isDehydrated)try{tu(m.containerInfo)}catch(Et){Qs(c,c.return,Et)}ry&&(ry=!1,$_(c));break;case 4:N=wi,wi=wx(c.stateNode.containerInfo),ln(m,c),on(c),wi=N;break;case 12:ln(m,c),on(c);break;case 31:ln(m,c),on(c),N&4&&(N=c.updateQueue,N!==null&&(c.updateQueue=null,ox(c,N)));break;case 13:ln(m,c),on(c),c.child.flags&8192&&c.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(dx=Se()),N&4&&(N=c.updateQueue,N!==null&&(c.updateQueue=null,ox(c,N)));break;case 22:R=c.memoizedState!==null;var Ee=p!==null&&p.memoizedState!==null,Be=bl,Je=Qa;if(bl=Be||R,Qa=Je||Ee,ln(m,c),Qa=Je,bl=Be,on(c),N&8192)e:for(m=c.stateNode,m._visibility=R?m._visibility&-2:m._visibility|1,R&&(p===null||Ee||bl||Qa||Sc(c)),p=null,m=c;;){if(m.tag===5||m.tag===26){if(p===null){Ee=p=m;try{if(F=Ee.stateNode,R)ae=F.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{me=Ee.stateNode;var tt=Ee.memoizedProps.style,Ve=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;me.style.display=Ve==null||typeof Ve=="boolean"?"":(""+Ve).trim()}}catch(Et){Qs(Ee,Ee.return,Et)}}}else if(m.tag===6){if(p===null){Ee=m;try{Ee.stateNode.nodeValue=R?"":Ee.memoizedProps}catch(Et){Qs(Ee,Ee.return,Et)}}}else if(m.tag===18){if(p===null){Ee=m;try{var Ge=Ee.stateNode;R?Ok(Ge,!0):Ok(Ee.stateNode,!1)}catch(Et){Qs(Ee,Ee.return,Et)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===c)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break e;for(;m.sibling===null;){if(m.return===null||m.return===c)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}N&4&&(N=c.updateQueue,N!==null&&(p=N.retryQueue,p!==null&&(N.retryQueue=null,ox(c,p))));break;case 19:ln(m,c),on(c),N&4&&(N=c.updateQueue,N!==null&&(c.updateQueue=null,ox(c,N)));break;case 30:break;case 21:break;default:ln(m,c),on(c)}}function on(c){var m=c.flags;if(m&2){try{for(var p,N=c.return;N!==null;){if(R_(N)){p=N;break}N=N.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var R=p.stateNode,F=sy(c);lx(c,F,R);break;case 5:var ae=p.stateNode;p.flags&32&&(jd(ae,""),p.flags&=-33);var me=sy(c);lx(c,me,ae);break;case 3:case 4:var Ee=p.stateNode.containerInfo,Be=sy(c);ay(c,Be,Ee);break;default:throw Error(r(161))}}catch(Je){Qs(c,c.return,Je)}c.flags&=-3}m&4096&&(c.flags&=-4097)}function $_(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var m=c;$_(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),c=c.sibling}}function yl(c,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)M_(c,m.alternate,m),m=m.sibling}function Sc(c){for(c=c.child;c!==null;){var m=c;switch(m.tag){case 0:case 11:case 14:case 15:oo(4,m,m.return),Sc(m);break;case 1:Bi(m,m.return);var p=m.stateNode;typeof p.componentWillUnmount=="function"&&O_(m,m.return,p),Sc(m);break;case 27:nm(m.stateNode);case 26:case 5:Bi(m,m.return),Sc(m);break;case 22:m.memoizedState===null&&Sc(m);break;case 30:Sc(m);break;default:Sc(m)}c=c.sibling}}function Nl(c,m,p){for(p=p&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var N=m.alternate,R=c,F=m,ae=F.flags;switch(F.tag){case 0:case 11:case 15:Nl(R,F,p),K0(4,F);break;case 1:if(Nl(R,F,p),N=F,R=N.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Be){Qs(N,N.return,Be)}if(N=F,R=N.updateQueue,R!==null){var me=N.stateNode;try{var Ee=R.shared.hiddenCallbacks;if(Ee!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ee.length;R++)vT(Ee[R],me)}catch(Be){Qs(N,N.return,Be)}}p&&ae&64&&k_(F),J0(F,F.return);break;case 27:P_(F);case 26:case 5:Nl(R,F,p),p&&N===null&&ae&4&&I_(F),J0(F,F.return);break;case 12:Nl(R,F,p);break;case 31:Nl(R,F,p),p&&ae&4&&U_(R,F);break;case 13:Nl(R,F,p),p&&ae&4&&z_(R,F);break;case 22:F.memoizedState===null&&Nl(R,F,p),J0(F,F.return);break;case 30:break;default:Nl(R,F,p)}m=m.sibling}}function ny(c,m){var p=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),c=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(c=m.memoizedState.cachePool.pool),c!==p&&(c!=null&&c.refCount++,p!=null&&M0(p))}function iy(c,m){c=null,m.alternate!==null&&(c=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==c&&(m.refCount++,c!=null&&M0(c))}function Si(c,m,p,N){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)q_(c,m,p,N),m=m.sibling}function q_(c,m,p,N){var R=m.flags;switch(m.tag){case 0:case 11:case 15:Si(c,m,p,N),R&2048&&K0(9,m);break;case 1:Si(c,m,p,N);break;case 3:Si(c,m,p,N),R&2048&&(c=null,m.alternate!==null&&(c=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==c&&(m.refCount++,c!=null&&M0(c)));break;case 12:if(R&2048){Si(c,m,p,N),c=m.stateNode;try{var F=m.memoizedProps,ae=F.id,me=F.onPostCommit;typeof me=="function"&&me(ae,m.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Ee){Qs(m,m.return,Ee)}}else Si(c,m,p,N);break;case 31:Si(c,m,p,N);break;case 13:Si(c,m,p,N);break;case 23:break;case 22:F=m.stateNode,ae=m.alternate,m.memoizedState!==null?F._visibility&2?Si(c,m,p,N):Y0(c,m):F._visibility&2?Si(c,m,p,N):(F._visibility|=2,Hd(c,m,p,N,(m.subtreeFlags&10256)!==0||!1)),R&2048&&ny(ae,m);break;case 24:Si(c,m,p,N),R&2048&&iy(m.alternate,m);break;default:Si(c,m,p,N)}}function Hd(c,m,p,N,R){for(R=R&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var F=c,ae=m,me=p,Ee=N,Be=ae.flags;switch(ae.tag){case 0:case 11:case 15:Hd(F,ae,me,Ee,R),K0(8,ae);break;case 23:break;case 22:var Je=ae.stateNode;ae.memoizedState!==null?Je._visibility&2?Hd(F,ae,me,Ee,R):Y0(F,ae):(Je._visibility|=2,Hd(F,ae,me,Ee,R)),R&&Be&2048&&ny(ae.alternate,ae);break;case 24:Hd(F,ae,me,Ee,R),R&&Be&2048&&iy(ae.alternate,ae);break;default:Hd(F,ae,me,Ee,R)}m=m.sibling}}function Y0(c,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var p=c,N=m,R=N.flags;switch(N.tag){case 22:Y0(p,N),R&2048&&ny(N.alternate,N);break;case 24:Y0(p,N),R&2048&&iy(N.alternate,N);break;default:Y0(p,N)}m=m.sibling}}var X0=8192;function Vd(c,m,p){if(c.subtreeFlags&X0)for(c=c.child;c!==null;)H_(c,m,p),c=c.sibling}function H_(c,m,p){switch(c.tag){case 26:Vd(c,m,p),c.flags&X0&&c.memoizedState!==null&&iq(p,wi,c.memoizedState,c.memoizedProps);break;case 5:Vd(c,m,p);break;case 3:case 4:var N=wi;wi=wx(c.stateNode.containerInfo),Vd(c,m,p),wi=N;break;case 22:c.memoizedState===null&&(N=c.alternate,N!==null&&N.memoizedState!==null?(N=X0,X0=16777216,Vd(c,m,p),X0=N):Vd(c,m,p));break;default:Vd(c,m,p)}}function V_(c){var m=c.alternate;if(m!==null&&(c=m.child,c!==null)){m.child=null;do m=c.sibling,c.sibling=null,c=m;while(c!==null)}}function Z0(c){var m=c.deletions;if((c.flags&16)!==0){if(m!==null)for(var p=0;p<m.length;p++){var N=m[p];mr=N,W_(N,c)}V_(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)G_(c),c=c.sibling}function G_(c){switch(c.tag){case 0:case 11:case 15:Z0(c),c.flags&2048&&oo(9,c,c.return);break;case 3:Z0(c);break;case 12:Z0(c);break;case 22:var m=c.stateNode;c.memoizedState!==null&&m._visibility&2&&(c.return===null||c.return.tag!==13)?(m._visibility&=-3,cx(c)):Z0(c);break;default:Z0(c)}}function cx(c){var m=c.deletions;if((c.flags&16)!==0){if(m!==null)for(var p=0;p<m.length;p++){var N=m[p];mr=N,W_(N,c)}V_(c)}for(c=c.child;c!==null;){switch(m=c,m.tag){case 0:case 11:case 15:oo(8,m,m.return),cx(m);break;case 22:p=m.stateNode,p._visibility&2&&(p._visibility&=-3,cx(m));break;default:cx(m)}c=c.sibling}}function W_(c,m){for(;mr!==null;){var p=mr;switch(p.tag){case 0:case 11:case 15:oo(8,p,m);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var N=p.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:M0(p.memoizedState.cache)}if(N=p.child,N!==null)N.return=p,mr=N;else e:for(p=c;mr!==null;){N=mr;var R=N.sibling,F=N.return;if(L_(N),N===p){mr=null;break e}if(R!==null){R.return=F,mr=R;break e}mr=F}}}var N$={getCacheForType:function(c){var m=Sr(Va),p=m.data.get(c);return p===void 0&&(p=c(),m.data.set(c,p)),p},cacheSignal:function(){return Sr(Va).controller.signal}},w$=typeof WeakMap=="function"?WeakMap:Map,Fs=0,oa=null,ps=null,ys=0,Ws=0,An=null,co=!1,Gd=!1,ly=!1,wl=0,Oa=0,uo=0,jc=0,oy=0,En=0,Wd=0,em=null,cn=null,cy=!1,dx=0,Q_=0,ux=1/0,mx=null,mo=null,ar=0,fo=null,Qd=null,Sl=0,dy=0,uy=null,K_=null,tm=0,my=null;function Cn(){return(Fs&2)!==0&&ys!==0?ys&-ys:L.T!==null?by():ce()}function J_(){if(En===0)if((ys&536870912)===0||js){var c=ct;ct<<=1,(ct&3932160)===0&&(ct=262144),En=c}else En=536870912;return c=Sn.current,c!==null&&(c.flags|=32),En}function dn(c,m,p){(c===oa&&(Ws===2||Ws===9)||c.cancelPendingCommit!==null)&&(Kd(c,0),ho(c,ys,En,!1)),es(c,p),((Fs&2)===0||c!==oa)&&(c===oa&&((Fs&2)===0&&(jc|=p),Oa===4&&ho(c,ys,En,!1)),$i(c))}function Y_(c,m,p){if((Fs&6)!==0)throw Error(r(327));var N=!p&&(m&127)===0&&(m&c.expiredLanes)===0||La(c,m),R=N?A$(c,m):hy(c,m,!0),F=N;do{if(R===0){Gd&&!N&&ho(c,m,0,!1);break}else{if(p=c.current.alternate,F&&!S$(p)){R=hy(c,m,!1),F=!1;continue}if(R===2){if(F=m,c.errorRecoveryDisabledLanes&F)var ae=0;else ae=c.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){m=ae;e:{var me=c;R=em;var Ee=me.current.memoizedState.isDehydrated;if(Ee&&(Kd(me,ae).flags|=256),ae=hy(me,ae,!1),ae!==2){if(ly&&!Ee){me.errorRecoveryDisabledLanes|=F,jc|=F,R=4;break e}F=cn,cn=R,F!==null&&(cn===null?cn=F:cn.push.apply(cn,F))}R=ae}if(F=!1,R!==2)continue}}if(R===1){Kd(c,0),ho(c,m,0,!0);break}e:{switch(N=c,F=R,F){case 0:case 1:throw Error(r(345));case 4:if((m&4194048)!==m)break;case 6:ho(N,m,En,!co);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((m&62914560)===m&&(R=dx+300-Se(),10<R)){if(ho(N,m,En,!co),Ls(N,0,!0)!==0)break e;Sl=m,N.timeoutHandle=Tk(X_.bind(null,N,p,cn,mx,cy,m,En,jc,Wd,co,F,"Throttled",-0,0),R);break e}X_(N,p,cn,mx,cy,m,En,jc,Wd,co,F,null,-0,0)}}break}while(!0);$i(c)}function X_(c,m,p,N,R,F,ae,me,Ee,Be,Je,tt,Ve,Ge){if(c.timeoutHandle=-1,tt=m.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ol},H_(m,F,tt);var Et=(F&62914560)===F?dx-Se():(F&4194048)===F?Q_-Se():0;if(Et=lq(tt,Et),Et!==null){Sl=F,c.cancelPendingCommit=Et(ik.bind(null,c,m,F,p,N,R,ae,me,Ee,Je,tt,null,Ve,Ge)),ho(c,F,ae,!Be);return}}ik(c,m,F,p,N,R,ae,me,Ee)}function S$(c){for(var m=c;;){var p=m.tag;if((p===0||p===11||p===15)&&m.flags&16384&&(p=m.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var N=0;N<p.length;N++){var R=p[N],F=R.getSnapshot;R=R.value;try{if(!Nn(F(),R))return!1}catch{return!1}}if(p=m.child,m.subtreeFlags&16384&&p!==null)p.return=m,m=p;else{if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function ho(c,m,p,N){m&=~oy,m&=~jc,c.suspendedLanes|=m,c.pingedLanes&=~m,N&&(c.warmLanes|=m),N=c.expirationTimes;for(var R=m;0<R;){var F=31-ie(R),ae=1<<F;N[F]=-1,R&=~ae}p!==0&&Ts(c,p,m)}function fx(){return(Fs&6)===0?(sm(0),!1):!0}function fy(){if(ps!==null){if(Ws===0)var c=ps.return;else c=ps,ml=xc=null,_v(c),Ud=null,F0=0,c=ps;for(;c!==null;)__(c.alternate,c),c=c.return;ps=null}}function Kd(c,m){var p=c.timeoutHandle;p!==-1&&(c.timeoutHandle=-1,q$(p)),p=c.cancelPendingCommit,p!==null&&(c.cancelPendingCommit=null,p()),Sl=0,fy(),oa=c,ps=p=dl(c.current,null),ys=m,Ws=0,An=null,co=!1,Gd=La(c,m),ly=!1,Wd=En=oy=jc=uo=Oa=0,cn=em=null,cy=!1,(m&8)!==0&&(m|=m&32);var N=c.entangledLanes;if(N!==0)for(c=c.entanglements,N&=m;0<N;){var R=31-ie(N),F=1<<R;m|=c[R],N&=~F}return wl=m,Ph(),p}function Z_(c,m){ts=null,L.H=G0,m===Fd||m===$h?(m=xT(),Ws=3):m===gv?(m=xT(),Ws=4):Ws=m===Vv?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,An=m,ps===null&&(Oa=1,sx(c,Hn(m,c.current)))}function ek(){var c=Sn.current;return c===null?!0:(ys&4194048)===ys?Qn===null:(ys&62914560)===ys||(ys&536870912)!==0?c===Qn:!1}function tk(){var c=L.H;return L.H=G0,c===null?G0:c}function sk(){var c=L.A;return L.A=N$,c}function hx(){Oa=4,co||(ys&4194048)!==ys&&Sn.current!==null||(Gd=!0),(uo&134217727)===0&&(jc&134217727)===0||oa===null||ho(oa,ys,En,!1)}function hy(c,m,p){var N=Fs;Fs|=2;var R=tk(),F=sk();(oa!==c||ys!==m)&&(mx=null,Kd(c,m)),m=!1;var ae=Oa;e:do try{if(Ws!==0&&ps!==null){var me=ps,Ee=An;switch(Ws){case 8:fy(),ae=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(m=!0);var Be=Ws;if(Ws=0,An=null,Jd(c,me,Ee,Be),p&&Gd){ae=0;break e}break;default:Be=Ws,Ws=0,An=null,Jd(c,me,Ee,Be)}}j$(),ae=Oa;break}catch(Je){Z_(c,Je)}while(!0);return m&&c.shellSuspendCounter++,ml=xc=null,Fs=N,L.H=R,L.A=F,ps===null&&(oa=null,ys=0,Ph()),ae}function j$(){for(;ps!==null;)ak(ps)}function A$(c,m){var p=Fs;Fs|=2;var N=tk(),R=sk();oa!==c||ys!==m?(mx=null,ux=Se()+500,Kd(c,m)):Gd=La(c,m);e:do try{if(Ws!==0&&ps!==null){m=ps;var F=An;t:switch(Ws){case 1:Ws=0,An=null,Jd(c,m,F,1);break;case 2:case 9:if(fT(F)){Ws=0,An=null,rk(m);break}m=function(){Ws!==2&&Ws!==9||oa!==c||(Ws=7),$i(c)},F.then(m,m);break e;case 3:Ws=7;break e;case 4:Ws=5;break e;case 7:fT(F)?(Ws=0,An=null,rk(m)):(Ws=0,An=null,Jd(c,m,F,7));break;case 5:var ae=null;switch(ps.tag){case 26:ae=ps.memoizedState;case 5:case 27:var me=ps;if(ae?qk(ae):me.stateNode.complete){Ws=0,An=null;var Ee=me.sibling;if(Ee!==null)ps=Ee;else{var Be=me.return;Be!==null?(ps=Be,xx(Be)):ps=null}break t}}Ws=0,An=null,Jd(c,m,F,5);break;case 6:Ws=0,An=null,Jd(c,m,F,6);break;case 8:fy(),Oa=6;break e;default:throw Error(r(462))}}E$();break}catch(Je){Z_(c,Je)}while(!0);return ml=xc=null,L.H=N,L.A=R,Fs=p,ps!==null?0:(oa=null,ys=0,Ph(),Oa)}function E$(){for(;ps!==null&&!Ce();)ak(ps)}function ak(c){var m=C_(c.alternate,c,wl);c.memoizedProps=c.pendingProps,m===null?xx(c):ps=m}function rk(c){var m=c,p=m.alternate;switch(m.tag){case 15:case 0:m=N_(p,m,m.pendingProps,m.type,void 0,ys);break;case 11:m=N_(p,m,m.pendingProps,m.type.render,m.ref,ys);break;case 5:_v(m);default:__(p,m),m=ps=sT(m,wl),m=C_(p,m,wl)}c.memoizedProps=c.pendingProps,m===null?xx(c):ps=m}function Jd(c,m,p,N){ml=xc=null,_v(m),Ud=null,F0=0;var R=m.return;try{if(h$(c,R,m,p,ys)){Oa=1,sx(c,Hn(p,c.current)),ps=null;return}}catch(F){if(R!==null)throw ps=R,F;Oa=1,sx(c,Hn(p,c.current)),ps=null;return}m.flags&32768?(js||N===1?c=!0:Gd||(ys&536870912)!==0?c=!1:(co=c=!0,(N===2||N===9||N===3||N===6)&&(N=Sn.current,N!==null&&N.tag===13&&(N.flags|=16384))),nk(m,c)):xx(m)}function xx(c){var m=c;do{if((m.flags&32768)!==0){nk(m,co);return}c=m.return;var p=g$(m.alternate,m,wl);if(p!==null){ps=p;return}if(m=m.sibling,m!==null){ps=m;return}ps=m=c}while(m!==null);Oa===0&&(Oa=5)}function nk(c,m){do{var p=b$(c.alternate,c);if(p!==null){p.flags&=32767,ps=p;return}if(p=c.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!m&&(c=c.sibling,c!==null)){ps=c;return}ps=c=p}while(c!==null);Oa=6,ps=null}function ik(c,m,p,N,R,F,ae,me,Ee){c.cancelPendingCommit=null;do px();while(ar!==0);if((Fs&6)!==0)throw Error(r(327));if(m!==null){if(m===c.current)throw Error(r(177));if(F=m.lanes|m.childLanes,F|=sv,xs(c,p,F,ae,me,Ee),c===oa&&(ps=oa=null,ys=0),Qd=m,fo=c,Sl=p,dy=F,uy=R,K_=N,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,k$(lt,function(){return uk(),null})):(c.callbackNode=null,c.callbackPriority=0),N=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||N){N=L.T,L.T=null,R=Q.p,Q.p=2,ae=Fs,Fs|=4;try{v$(c,m,p)}finally{Fs=ae,Q.p=R,L.T=N}}ar=1,lk(),ok(),ck()}}function lk(){if(ar===1){ar=0;var c=fo,m=Qd,p=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||p){p=L.T,L.T=null;var N=Q.p;Q.p=2;var R=Fs;Fs|=4;try{B_(m,c);var F=Ey,ae=WC(c.containerInfo),me=F.focusedElem,Ee=F.selectionRange;if(ae!==me&&me&&me.ownerDocument&&GC(me.ownerDocument.documentElement,me)){if(Ee!==null&&Yb(me)){var Be=Ee.start,Je=Ee.end;if(Je===void 0&&(Je=Be),"selectionStart"in me)me.selectionStart=Be,me.selectionEnd=Math.min(Je,me.value.length);else{var tt=me.ownerDocument||document,Ve=tt&&tt.defaultView||window;if(Ve.getSelection){var Ge=Ve.getSelection(),Et=me.textContent.length,Bt=Math.min(Ee.start,Et),ra=Ee.end===void 0?Bt:Math.min(Ee.end,Et);!Ge.extend&&Bt>ra&&(ae=ra,ra=Bt,Bt=ae);var Re=VC(me,Bt),Te=VC(me,ra);if(Re&&Te&&(Ge.rangeCount!==1||Ge.anchorNode!==Re.node||Ge.anchorOffset!==Re.offset||Ge.focusNode!==Te.node||Ge.focusOffset!==Te.offset)){var ze=tt.createRange();ze.setStart(Re.node,Re.offset),Ge.removeAllRanges(),Bt>ra?(Ge.addRange(ze),Ge.extend(Te.node,Te.offset)):(ze.setEnd(Te.node,Te.offset),Ge.addRange(ze))}}}}for(tt=[],Ge=me;Ge=Ge.parentNode;)Ge.nodeType===1&&tt.push({element:Ge,left:Ge.scrollLeft,top:Ge.scrollTop});for(typeof me.focus=="function"&&me.focus(),me=0;me<tt.length;me++){var et=tt[me];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Tx=!!Ay,Ey=Ay=null}finally{Fs=R,Q.p=N,L.T=p}}c.current=m,ar=2}}function ok(){if(ar===2){ar=0;var c=fo,m=Qd,p=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||p){p=L.T,L.T=null;var N=Q.p;Q.p=2;var R=Fs;Fs|=4;try{M_(c,m.alternate,m)}finally{Fs=R,Q.p=N,L.T=p}}ar=3}}function ck(){if(ar===4||ar===3){ar=0,Le();var c=fo,m=Qd,p=Sl,N=K_;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?ar=5:(ar=0,Qd=fo=null,dk(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(mo=null),Xe(p),m=m.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Ne,m,void 0,(m.current.flags&128)===128)}catch{}if(N!==null){m=L.T,R=Q.p,Q.p=2,L.T=null;try{for(var F=c.onRecoverableError,ae=0;ae<N.length;ae++){var me=N[ae];F(me.value,{componentStack:me.stack})}}finally{L.T=m,Q.p=R}}(Sl&3)!==0&&px(),$i(c),R=c.pendingLanes,(p&261930)!==0&&(R&42)!==0?c===my?tm++:(tm=0,my=c):tm=0,sm(0)}}function dk(c,m){(c.pooledCacheLanes&=m)===0&&(m=c.pooledCache,m!=null&&(c.pooledCache=null,M0(m)))}function px(){return lk(),ok(),ck(),uk()}function uk(){if(ar!==5)return!1;var c=fo,m=dy;dy=0;var p=Xe(Sl),N=L.T,R=Q.p;try{Q.p=32>p?32:p,L.T=null,p=uy,uy=null;var F=fo,ae=Sl;if(ar=0,Qd=fo=null,Sl=0,(Fs&6)!==0)throw Error(r(331));var me=Fs;if(Fs|=4,G_(F.current),q_(F,F.current,ae,p),Fs=me,sm(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Ne,F)}catch{}return!0}finally{Q.p=R,L.T=N,dk(c,m)}}function mk(c,m,p){m=Hn(p,m),m=Hv(c.stateNode,m,2),c=no(c,m,2),c!==null&&(es(c,2),$i(c))}function Qs(c,m,p){if(c.tag===3)mk(c,c,p);else for(;m!==null;){if(m.tag===3){mk(m,c,p);break}else if(m.tag===1){var N=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(mo===null||!mo.has(N))){c=Hn(p,c),p=f_(2),N=no(m,p,2),N!==null&&(h_(p,N,m,c),es(N,2),$i(N));break}}m=m.return}}function xy(c,m,p){var N=c.pingCache;if(N===null){N=c.pingCache=new w$;var R=new Set;N.set(m,R)}else R=N.get(m),R===void 0&&(R=new Set,N.set(m,R));R.has(p)||(ly=!0,R.add(p),c=C$.bind(null,c,m,p),m.then(c,c))}function C$(c,m,p){var N=c.pingCache;N!==null&&N.delete(m),c.pingedLanes|=c.suspendedLanes&p,c.warmLanes&=~p,oa===c&&(ys&p)===p&&(Oa===4||Oa===3&&(ys&62914560)===ys&&300>Se()-dx?(Fs&2)===0&&Kd(c,0):oy|=p,Wd===ys&&(Wd=0)),$i(c)}function fk(c,m){m===0&&(m=Ae()),c=mc(c,m),c!==null&&(es(c,m),$i(c))}function T$(c){var m=c.memoizedState,p=0;m!==null&&(p=m.retryLane),fk(c,p)}function _$(c,m){var p=0;switch(c.tag){case 31:case 13:var N=c.stateNode,R=c.memoizedState;R!==null&&(p=R.retryLane);break;case 19:N=c.stateNode;break;case 22:N=c.stateNode._retryCache;break;default:throw Error(r(314))}N!==null&&N.delete(m),fk(c,p)}function k$(c,m){return Ue(c,m)}var gx=null,Yd=null,py=!1,bx=!1,gy=!1,xo=0;function $i(c){c!==Yd&&c.next===null&&(Yd===null?gx=Yd=c:Yd=Yd.next=c),bx=!0,py||(py=!0,I$())}function sm(c,m){if(!gy&&bx){gy=!0;do for(var p=!1,N=gx;N!==null;){if(c!==0){var R=N.pendingLanes;if(R===0)var F=0;else{var ae=N.suspendedLanes,me=N.pingedLanes;F=(1<<31-ie(42|c)+1)-1,F&=R&~(ae&~me),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(p=!0,gk(N,F))}else F=ys,F=Ls(N,N===oa?F:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(F&3)===0||La(N,F)||(p=!0,gk(N,F));N=N.next}while(p);gy=!1}}function O$(){hk()}function hk(){bx=py=!1;var c=0;xo!==0&&$$()&&(c=xo);for(var m=Se(),p=null,N=gx;N!==null;){var R=N.next,F=xk(N,m);F===0?(N.next=null,p===null?gx=R:p.next=R,R===null&&(Yd=p)):(p=N,(c!==0||(F&3)!==0)&&(bx=!0)),N=R}ar!==0&&ar!==5||sm(c),xo!==0&&(xo=0)}function xk(c,m){for(var p=c.suspendedLanes,N=c.pingedLanes,R=c.expirationTimes,F=c.pendingLanes&-62914561;0<F;){var ae=31-ie(F),me=1<<ae,Ee=R[ae];Ee===-1?((me&p)===0||(me&N)!==0)&&(R[ae]=Yr(me,m)):Ee<=m&&(c.expiredLanes|=me),F&=~me}if(m=oa,p=ys,p=Ls(c,c===m?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),N=c.callbackNode,p===0||c===m&&(Ws===2||Ws===9)||c.cancelPendingCommit!==null)return N!==null&&N!==null&&qe(N),c.callbackNode=null,c.callbackPriority=0;if((p&3)===0||La(c,p)){if(m=p&-p,m===c.callbackPriority)return m;switch(N!==null&&qe(N),Xe(p)){case 2:case 8:p=Mt;break;case 32:p=lt;break;case 268435456:p=wt;break;default:p=lt}return N=pk.bind(null,c),p=Ue(p,N),c.callbackPriority=m,c.callbackNode=p,m}return N!==null&&N!==null&&qe(N),c.callbackPriority=2,c.callbackNode=null,2}function pk(c,m){if(ar!==0&&ar!==5)return c.callbackNode=null,c.callbackPriority=0,null;var p=c.callbackNode;if(px()&&c.callbackNode!==p)return null;var N=ys;return N=Ls(c,c===oa?N:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),N===0?null:(Y_(c,N,m),xk(c,Se()),c.callbackNode!=null&&c.callbackNode===p?pk.bind(null,c):null)}function gk(c,m){if(px())return null;Y_(c,m,!0)}function I$(){H$(function(){(Fs&6)!==0?Ue(Ze,O$):hk()})}function by(){if(xo===0){var c=Md;c===0&&(c=Ie,Ie<<=1,(Ie&261888)===0&&(Ie=256)),xo=c}return xo}function bk(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Eh(""+c)}function vk(c,m){var p=m.ownerDocument.createElement("input");return p.name=m.name,p.value=m.value,c.id&&p.setAttribute("form",c.id),m.parentNode.insertBefore(p,m),c=new FormData(c),p.parentNode.removeChild(p),c}function R$(c,m,p,N,R){if(m==="submit"&&p&&p.stateNode===R){var F=bk((R[ye]||null).action),ae=N.submitter;ae&&(m=(m=ae[ye]||null)?bk(m.formAction):ae.getAttribute("formAction"),m!==null&&(F=m,ae=null));var me=new kh("action","action",null,N,R);c.push({event:me,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(xo!==0){var Ee=ae?vk(R,ae):new FormData(R);Fv(p,{pending:!0,data:Ee,method:R.method,action:F},null,Ee)}}else typeof F=="function"&&(me.preventDefault(),Ee=ae?vk(R,ae):new FormData(R),Fv(p,{pending:!0,data:Ee,method:R.method,action:F},F,Ee))},currentTarget:R}]})}}for(var vy=0;vy<tv.length;vy++){var yy=tv[vy],P$=yy.toLowerCase(),D$=yy[0].toUpperCase()+yy.slice(1);Ni(P$,"on"+D$)}Ni(JC,"onAnimationEnd"),Ni(YC,"onAnimationIteration"),Ni(XC,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(YB,"onTransitionRun"),Ni(XB,"onTransitionStart"),Ni(ZB,"onTransitionCancel"),Ni(ZC,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var am="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(am));function yk(c,m){m=(m&4)!==0;for(var p=0;p<c.length;p++){var N=c[p],R=N.event;N=N.listeners;e:{var F=void 0;if(m)for(var ae=N.length-1;0<=ae;ae--){var me=N[ae],Ee=me.instance,Be=me.currentTarget;if(me=me.listener,Ee!==F&&R.isPropagationStopped())break e;F=me,R.currentTarget=Be;try{F(R)}catch(Je){Rh(Je)}R.currentTarget=null,F=Ee}else for(ae=0;ae<N.length;ae++){if(me=N[ae],Ee=me.instance,Be=me.currentTarget,me=me.listener,Ee!==F&&R.isPropagationStopped())break e;F=me,R.currentTarget=Be;try{F(R)}catch(Je){Rh(Je)}R.currentTarget=null,F=Ee}}}}function gs(c,m){var p=m[Me];p===void 0&&(p=m[Me]=new Set);var N=c+"__bubble";p.has(N)||(Nk(m,c,2,!1),p.add(N))}function Ny(c,m,p){var N=0;m&&(N|=4),Nk(p,c,N,m)}var vx="_reactListening"+Math.random().toString(36).slice(2);function wy(c){if(!c[vx]){c[vx]=!0,ta.forEach(function(p){p!=="selectionchange"&&(M$.has(p)||Ny(p,!1,c),Ny(p,!0,c))});var m=c.nodeType===9?c:c.ownerDocument;m===null||m[vx]||(m[vx]=!0,Ny("selectionchange",!1,m))}}function Nk(c,m,p,N){switch(Jk(m)){case 2:var R=dq;break;case 8:R=uq;break;default:R=Ly}p=R.bind(null,m,p,c),R=void 0,!$b||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(R=!0),N?R!==void 0?c.addEventListener(m,p,{capture:!0,passive:R}):c.addEventListener(m,p,!0):R!==void 0?c.addEventListener(m,p,{passive:R}):c.addEventListener(m,p,!1)}function Sy(c,m,p,N,R){var F=N;if((m&1)===0&&(m&2)===0&&N!==null)e:for(;;){if(N===null)return;var ae=N.tag;if(ae===3||ae===4){var me=N.stateNode.containerInfo;if(me===R)break;if(ae===4)for(ae=N.return;ae!==null;){var Ee=ae.tag;if((Ee===3||Ee===4)&&ae.stateNode.containerInfo===R)return;ae=ae.return}for(;me!==null;){if(ae=ut(me),ae===null)return;if(Ee=ae.tag,Ee===5||Ee===6||Ee===26||Ee===27){N=F=ae;continue e}me=me.parentNode}}N=N.return}EC(function(){var Be=F,Je=zb(p),tt=[];e:{var Ve=eT.get(c);if(Ve!==void 0){var Ge=kh,Et=c;switch(c){case"keypress":if(Th(p)===0)break e;case"keydown":case"keyup":Ge=_B;break;case"focusin":Et="focus",Ge=Gb;break;case"focusout":Et="blur",Ge=Gb;break;case"beforeblur":case"afterblur":Ge=Gb;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=_C;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=gB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=IB;break;case JC:case YC:case XC:Ge=yB;break;case ZC:Ge=PB;break;case"scroll":case"scrollend":Ge=xB;break;case"wheel":Ge=MB;break;case"copy":case"cut":case"paste":Ge=wB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=OC;break;case"toggle":case"beforetoggle":Ge=FB}var Bt=(m&4)!==0,ra=!Bt&&(c==="scroll"||c==="scrollend"),Re=Bt?Ve!==null?Ve+"Capture":null:Ve;Bt=[];for(var Te=Be,ze;Te!==null;){var et=Te;if(ze=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||ze===null||Re===null||(et=A0(Te,Re),et!=null&&Bt.push(rm(Te,et,ze))),ra)break;Te=Te.return}0<Bt.length&&(Ve=new Ge(Ve,Et,null,p,Je),tt.push({event:Ve,listeners:Bt}))}}if((m&7)===0){e:{if(Ve=c==="mouseover"||c==="pointerover",Ge=c==="mouseout"||c==="pointerout",Ve&&p!==Ub&&(Et=p.relatedTarget||p.fromElement)&&(ut(Et)||Et[je]))break e;if((Ge||Ve)&&(Ve=Je.window===Je?Je:(Ve=Je.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,Ge?(Et=p.relatedTarget||p.toElement,Ge=Be,Et=Et?ut(Et):null,Et!==null&&(ra=i(Et),Bt=Et.tag,Et!==ra||Bt!==5&&Bt!==27&&Bt!==6)&&(Et=null)):(Ge=null,Et=Be),Ge!==Et)){if(Bt=_C,et="onMouseLeave",Re="onMouseEnter",Te="mouse",(c==="pointerout"||c==="pointerover")&&(Bt=OC,et="onPointerLeave",Re="onPointerEnter",Te="pointer"),ra=Ge==null?Ve:ot(Ge),ze=Et==null?Ve:ot(Et),Ve=new Bt(et,Te+"leave",Ge,p,Je),Ve.target=ra,Ve.relatedTarget=ze,et=null,ut(Je)===Be&&(Bt=new Bt(Re,Te+"enter",Et,p,Je),Bt.target=ze,Bt.relatedTarget=ra,et=Bt),ra=et,Ge&&Et)t:{for(Bt=L$,Re=Ge,Te=Et,ze=0,et=Re;et;et=Bt(et))ze++;et=0;for(var Rt=Te;Rt;Rt=Bt(Rt))et++;for(;0<ze-et;)Re=Bt(Re),ze--;for(;0<et-ze;)Te=Bt(Te),et--;for(;ze--;){if(Re===Te||Te!==null&&Re===Te.alternate){Bt=Re;break t}Re=Bt(Re),Te=Bt(Te)}Bt=null}else Bt=null;Ge!==null&&wk(tt,Ve,Ge,Bt,!1),Et!==null&&ra!==null&&wk(tt,ra,Et,Bt,!0)}}e:{if(Ve=Be?ot(Be):window,Ge=Ve.nodeName&&Ve.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ve.type==="file")var Os=UC;else if(LC(Ve))if(zC)Os=QB;else{Os=GB;var _t=VB}else Ge=Ve.nodeName,!Ge||Ge.toLowerCase()!=="input"||Ve.type!=="checkbox"&&Ve.type!=="radio"?Be&&Fb(Be.elementType)&&(Os=UC):Os=WB;if(Os&&(Os=Os(c,Be))){FC(tt,Os,p,Je);break e}_t&&_t(c,Ve,Be),c==="focusout"&&Be&&Ve.type==="number"&&Be.memoizedProps.value!=null&&Lb(Ve,"number",Ve.value)}switch(_t=Be?ot(Be):window,c){case"focusin":(LC(_t)||_t.contentEditable==="true")&&(Td=_t,Xb=Be,R0=null);break;case"focusout":R0=Xb=Td=null;break;case"mousedown":Zb=!0;break;case"contextmenu":case"mouseup":case"dragend":Zb=!1,QC(tt,p,Je);break;case"selectionchange":if(JB)break;case"keydown":case"keyup":QC(tt,p,Je)}var rs;if(Qb)e:{switch(c){case"compositionstart":var Ns="onCompositionStart";break e;case"compositionend":Ns="onCompositionEnd";break e;case"compositionupdate":Ns="onCompositionUpdate";break e}Ns=void 0}else Cd?DC(c,p)&&(Ns="onCompositionEnd"):c==="keydown"&&p.keyCode===229&&(Ns="onCompositionStart");Ns&&(IC&&p.locale!=="ko"&&(Cd||Ns!=="onCompositionStart"?Ns==="onCompositionEnd"&&Cd&&(rs=CC()):(Xl=Je,qb="value"in Xl?Xl.value:Xl.textContent,Cd=!0)),_t=yx(Be,Ns),0<_t.length&&(Ns=new kC(Ns,c,null,p,Je),tt.push({event:Ns,listeners:_t}),rs?Ns.data=rs:(rs=MC(p),rs!==null&&(Ns.data=rs)))),(rs=zB?BB(c,p):$B(c,p))&&(Ns=yx(Be,"onBeforeInput"),0<Ns.length&&(_t=new kC("onBeforeInput","beforeinput",null,p,Je),tt.push({event:_t,listeners:Ns}),_t.data=rs)),R$(tt,c,Be,p,Je)}yk(tt,m)})}function rm(c,m,p){return{instance:c,listener:m,currentTarget:p}}function yx(c,m){for(var p=m+"Capture",N=[];c!==null;){var R=c,F=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||F===null||(R=A0(c,p),R!=null&&N.unshift(rm(c,R,F)),R=A0(c,m),R!=null&&N.push(rm(c,R,F))),c.tag===3)return N;c=c.return}return[]}function L$(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function wk(c,m,p,N,R){for(var F=m._reactName,ae=[];p!==null&&p!==N;){var me=p,Ee=me.alternate,Be=me.stateNode;if(me=me.tag,Ee!==null&&Ee===N)break;me!==5&&me!==26&&me!==27||Be===null||(Ee=Be,R?(Be=A0(p,F),Be!=null&&ae.unshift(rm(p,Be,Ee))):R||(Be=A0(p,F),Be!=null&&ae.push(rm(p,Be,Ee)))),p=p.return}ae.length!==0&&c.push({event:m,listeners:ae})}var F$=/\r\n?/g,U$=/\u0000|\uFFFD/g;function Sk(c){return(typeof c=="string"?c:""+c).replace(F$,`
`).replace(U$,"")}function jk(c,m){return m=Sk(m),Sk(c)===m}function aa(c,m,p,N,R,F){switch(p){case"children":typeof N=="string"?m==="body"||m==="textarea"&&N===""||jd(c,N):(typeof N=="number"||typeof N=="bigint")&&m!=="body"&&jd(c,""+N);break;case"className":ks(c,"class",N);break;case"tabIndex":ks(c,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":ks(c,p,N);break;case"style":jC(c,N,F);break;case"data":if(m!=="object"){ks(c,"data",N);break}case"src":case"href":if(N===""&&(m!=="a"||p!=="href")){c.removeAttribute(p);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){c.removeAttribute(p);break}N=Eh(""+N),c.setAttribute(p,N);break;case"action":case"formAction":if(typeof N=="function"){c.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(p==="formAction"?(m!=="input"&&aa(c,m,"name",R.name,R,null),aa(c,m,"formEncType",R.formEncType,R,null),aa(c,m,"formMethod",R.formMethod,R,null),aa(c,m,"formTarget",R.formTarget,R,null)):(aa(c,m,"encType",R.encType,R,null),aa(c,m,"method",R.method,R,null),aa(c,m,"target",R.target,R,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){c.removeAttribute(p);break}N=Eh(""+N),c.setAttribute(p,N);break;case"onClick":N!=null&&(c.onclick=ol);break;case"onScroll":N!=null&&gs("scroll",c);break;case"onScrollEnd":N!=null&&gs("scrollend",c);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(p=N.__html,p!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=p}}break;case"multiple":c.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":c.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){c.removeAttribute("xlink:href");break}p=Eh(""+N),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?c.setAttribute(p,""+N):c.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?c.setAttribute(p,""):c.removeAttribute(p);break;case"capture":case"download":N===!0?c.setAttribute(p,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?c.setAttribute(p,N):c.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?c.setAttribute(p,N):c.removeAttribute(p);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?c.removeAttribute(p):c.setAttribute(p,N);break;case"popover":gs("beforetoggle",c),gs("toggle",c),Tt(c,"popover",N);break;case"xlinkActuate":Fa(c,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":Fa(c,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":Fa(c,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":Fa(c,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":Fa(c,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":Fa(c,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":Fa(c,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":Fa(c,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":Fa(c,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Tt(c,"is",N);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=fB.get(p)||p,Tt(c,p,N))}}function jy(c,m,p,N,R,F){switch(p){case"style":jC(c,N,F);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(r(61));if(p=N.__html,p!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=p}}break;case"children":typeof N=="string"?jd(c,N):(typeof N=="number"||typeof N=="bigint")&&jd(c,""+N);break;case"onScroll":N!=null&&gs("scroll",c);break;case"onScrollEnd":N!=null&&gs("scrollend",c);break;case"onClick":N!=null&&(c.onclick=ol);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$s.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(R=p.endsWith("Capture"),m=p.slice(2,R?p.length-7:void 0),F=c[ye]||null,F=F!=null?F[p]:null,typeof F=="function"&&c.removeEventListener(m,F,R),typeof N=="function")){typeof F!="function"&&F!==null&&(p in c?c[p]=null:c.hasAttribute(p)&&c.removeAttribute(p)),c.addEventListener(m,N,R);break e}p in c?c[p]=N:N===!0?c.setAttribute(p,""):Tt(c,p,N)}}}function Ar(c,m,p){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gs("error",c),gs("load",c);var N=!1,R=!1,F;for(F in p)if(p.hasOwnProperty(F)){var ae=p[F];if(ae!=null)switch(F){case"src":N=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:aa(c,m,F,ae,p,null)}}R&&aa(c,m,"srcSet",p.srcSet,p,null),N&&aa(c,m,"src",p.src,p,null);return;case"input":gs("invalid",c);var me=F=ae=R=null,Ee=null,Be=null;for(N in p)if(p.hasOwnProperty(N)){var Je=p[N];if(Je!=null)switch(N){case"name":R=Je;break;case"type":ae=Je;break;case"checked":Ee=Je;break;case"defaultChecked":Be=Je;break;case"value":F=Je;break;case"defaultValue":me=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(r(137,m));break;default:aa(c,m,N,Je,p,null)}}yC(c,F,me,Ee,Be,ae,R,!1);return;case"select":gs("invalid",c),N=ae=F=null;for(R in p)if(p.hasOwnProperty(R)&&(me=p[R],me!=null))switch(R){case"value":F=me;break;case"defaultValue":ae=me;break;case"multiple":N=me;default:aa(c,m,R,me,p,null)}m=F,p=ae,c.multiple=!!N,m!=null?Sd(c,!!N,m,!1):p!=null&&Sd(c,!!N,p,!0);return;case"textarea":gs("invalid",c),F=R=N=null;for(ae in p)if(p.hasOwnProperty(ae)&&(me=p[ae],me!=null))switch(ae){case"value":N=me;break;case"defaultValue":R=me;break;case"children":F=me;break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(91));break;default:aa(c,m,ae,me,p,null)}wC(c,N,R,F);return;case"option":for(Ee in p)if(p.hasOwnProperty(Ee)&&(N=p[Ee],N!=null))switch(Ee){case"selected":c.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:aa(c,m,Ee,N,p,null)}return;case"dialog":gs("beforetoggle",c),gs("toggle",c),gs("cancel",c),gs("close",c);break;case"iframe":case"object":gs("load",c);break;case"video":case"audio":for(N=0;N<am.length;N++)gs(am[N],c);break;case"image":gs("error",c),gs("load",c);break;case"details":gs("toggle",c);break;case"embed":case"source":case"link":gs("error",c),gs("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in p)if(p.hasOwnProperty(Be)&&(N=p[Be],N!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,m));default:aa(c,m,Be,N,p,null)}return;default:if(Fb(m)){for(Je in p)p.hasOwnProperty(Je)&&(N=p[Je],N!==void 0&&jy(c,m,Je,N,p,void 0));return}}for(me in p)p.hasOwnProperty(me)&&(N=p[me],N!=null&&aa(c,m,me,N,p,null))}function z$(c,m,p,N){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,F=null,ae=null,me=null,Ee=null,Be=null,Je=null;for(Ge in p){var tt=p[Ge];if(p.hasOwnProperty(Ge)&&tt!=null)switch(Ge){case"checked":break;case"value":break;case"defaultValue":Ee=tt;default:N.hasOwnProperty(Ge)||aa(c,m,Ge,null,N,tt)}}for(var Ve in N){var Ge=N[Ve];if(tt=p[Ve],N.hasOwnProperty(Ve)&&(Ge!=null||tt!=null))switch(Ve){case"type":F=Ge;break;case"name":R=Ge;break;case"checked":Be=Ge;break;case"defaultChecked":Je=Ge;break;case"value":ae=Ge;break;case"defaultValue":me=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,m));break;default:Ge!==tt&&aa(c,m,Ve,Ge,N,tt)}}Mb(c,ae,me,Ee,Be,Je,F,R);return;case"select":Ge=ae=me=Ve=null;for(F in p)if(Ee=p[F],p.hasOwnProperty(F)&&Ee!=null)switch(F){case"value":break;case"multiple":Ge=Ee;default:N.hasOwnProperty(F)||aa(c,m,F,null,N,Ee)}for(R in N)if(F=N[R],Ee=p[R],N.hasOwnProperty(R)&&(F!=null||Ee!=null))switch(R){case"value":Ve=F;break;case"defaultValue":me=F;break;case"multiple":ae=F;default:F!==Ee&&aa(c,m,R,F,N,Ee)}m=me,p=ae,N=Ge,Ve!=null?Sd(c,!!p,Ve,!1):!!N!=!!p&&(m!=null?Sd(c,!!p,m,!0):Sd(c,!!p,p?[]:"",!1));return;case"textarea":Ge=Ve=null;for(me in p)if(R=p[me],p.hasOwnProperty(me)&&R!=null&&!N.hasOwnProperty(me))switch(me){case"value":break;case"children":break;default:aa(c,m,me,null,N,R)}for(ae in N)if(R=N[ae],F=p[ae],N.hasOwnProperty(ae)&&(R!=null||F!=null))switch(ae){case"value":Ve=R;break;case"defaultValue":Ge=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==F&&aa(c,m,ae,R,N,F)}NC(c,Ve,Ge);return;case"option":for(var Et in p)if(Ve=p[Et],p.hasOwnProperty(Et)&&Ve!=null&&!N.hasOwnProperty(Et))switch(Et){case"selected":c.selected=!1;break;default:aa(c,m,Et,null,N,Ve)}for(Ee in N)if(Ve=N[Ee],Ge=p[Ee],N.hasOwnProperty(Ee)&&Ve!==Ge&&(Ve!=null||Ge!=null))switch(Ee){case"selected":c.selected=Ve&&typeof Ve!="function"&&typeof Ve!="symbol";break;default:aa(c,m,Ee,Ve,N,Ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in p)Ve=p[Bt],p.hasOwnProperty(Bt)&&Ve!=null&&!N.hasOwnProperty(Bt)&&aa(c,m,Bt,null,N,Ve);for(Be in N)if(Ve=N[Be],Ge=p[Be],N.hasOwnProperty(Be)&&Ve!==Ge&&(Ve!=null||Ge!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(r(137,m));break;default:aa(c,m,Be,Ve,N,Ge)}return;default:if(Fb(m)){for(var ra in p)Ve=p[ra],p.hasOwnProperty(ra)&&Ve!==void 0&&!N.hasOwnProperty(ra)&&jy(c,m,ra,void 0,N,Ve);for(Je in N)Ve=N[Je],Ge=p[Je],!N.hasOwnProperty(Je)||Ve===Ge||Ve===void 0&&Ge===void 0||jy(c,m,Je,Ve,N,Ge);return}}for(var Re in p)Ve=p[Re],p.hasOwnProperty(Re)&&Ve!=null&&!N.hasOwnProperty(Re)&&aa(c,m,Re,null,N,Ve);for(tt in N)Ve=N[tt],Ge=p[tt],!N.hasOwnProperty(tt)||Ve===Ge||Ve==null&&Ge==null||aa(c,m,tt,Ve,N,Ge)}function Ak(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function B$(){if(typeof performance.getEntriesByType=="function"){for(var c=0,m=0,p=performance.getEntriesByType("resource"),N=0;N<p.length;N++){var R=p[N],F=R.transferSize,ae=R.initiatorType,me=R.duration;if(F&&me&&Ak(ae)){for(ae=0,me=R.responseEnd,N+=1;N<p.length;N++){var Ee=p[N],Be=Ee.startTime;if(Be>me)break;var Je=Ee.transferSize,tt=Ee.initiatorType;Je&&Ak(tt)&&(Ee=Ee.responseEnd,ae+=Je*(Ee<me?1:(me-Be)/(Ee-Be)))}if(--N,m+=8*(F+ae)/(R.duration/1e3),c++,10<c)break}}if(0<c)return m/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var Ay=null,Ey=null;function Nx(c){return c.nodeType===9?c:c.ownerDocument}function Ek(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ck(c,m){if(c===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&m==="foreignObject"?0:c}function Cy(c,m){return c==="textarea"||c==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Ty=null;function $$(){var c=window.event;return c&&c.type==="popstate"?c===Ty?!1:(Ty=c,!0):(Ty=null,!1)}var Tk=typeof setTimeout=="function"?setTimeout:void 0,q$=typeof clearTimeout=="function"?clearTimeout:void 0,_k=typeof Promise=="function"?Promise:void 0,H$=typeof queueMicrotask=="function"?queueMicrotask:typeof _k<"u"?function(c){return _k.resolve(null).then(c).catch(V$)}:Tk;function V$(c){setTimeout(function(){throw c})}function po(c){return c==="head"}function kk(c,m){var p=m,N=0;do{var R=p.nextSibling;if(c.removeChild(p),R&&R.nodeType===8)if(p=R.data,p==="/$"||p==="/&"){if(N===0){c.removeChild(R),tu(m);return}N--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")N++;else if(p==="html")nm(c.ownerDocument.documentElement);else if(p==="head"){p=c.ownerDocument.head,nm(p);for(var F=p.firstChild;F;){var ae=F.nextSibling,me=F.nodeName;F[He]||me==="SCRIPT"||me==="STYLE"||me==="LINK"&&F.rel.toLowerCase()==="stylesheet"||p.removeChild(F),F=ae}}else p==="body"&&nm(c.ownerDocument.body);p=R}while(p);tu(m)}function Ok(c,m){var p=c;c=0;do{var N=p.nextSibling;if(p.nodeType===1?m?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(m?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),N&&N.nodeType===8)if(p=N.data,p==="/$"){if(c===0)break;c--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||c++;p=N}while(p)}function _y(c){var m=c.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var p=m;switch(m=m.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":_y(p),nt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}c.removeChild(p)}}function G$(c,m,p,N){for(;c.nodeType===1;){var R=p;if(c.nodeName.toLowerCase()!==m.toLowerCase()){if(!N&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(N){if(!c[He])switch(m){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(F=c.getAttribute("rel"),F==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(F!==R.rel||c.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||c.getAttribute("title")!==(R.title==null?null:R.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(F=c.getAttribute("src"),(F!==(R.src==null?null:R.src)||c.getAttribute("type")!==(R.type==null?null:R.type)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&F&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(m==="input"&&c.type==="hidden"){var F=R.name==null?null:""+R.name;if(R.type==="hidden"&&c.getAttribute("name")===F)return c}else return c;if(c=Kn(c.nextSibling),c===null)break}return null}function W$(c,m,p){if(m==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!p||(c=Kn(c.nextSibling),c===null))return null;return c}function Ik(c,m){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Kn(c.nextSibling),c===null))return null;return c}function ky(c){return c.data==="$?"||c.data==="$~"}function Oy(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function Q$(c,m){var p=c.ownerDocument;if(c.data==="$~")c._reactRetry=m;else if(c.data!=="$?"||p.readyState!=="loading")m();else{var N=function(){m(),p.removeEventListener("DOMContentLoaded",N)};p.addEventListener("DOMContentLoaded",N),c._reactRetry=N}}function Kn(c){for(;c!=null;c=c.nextSibling){var m=c.nodeType;if(m===1||m===3)break;if(m===8){if(m=c.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return c}var Iy=null;function Rk(c){c=c.nextSibling;for(var m=0;c;){if(c.nodeType===8){var p=c.data;if(p==="/$"||p==="/&"){if(m===0)return Kn(c.nextSibling);m--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||m++}c=c.nextSibling}return null}function Pk(c){c=c.previousSibling;for(var m=0;c;){if(c.nodeType===8){var p=c.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(m===0)return c;m--}else p!=="/$"&&p!=="/&"||m++}c=c.previousSibling}return null}function Dk(c,m,p){switch(m=Nx(p),c){case"html":if(c=m.documentElement,!c)throw Error(r(452));return c;case"head":if(c=m.head,!c)throw Error(r(453));return c;case"body":if(c=m.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function nm(c){for(var m=c.attributes;m.length;)c.removeAttributeNode(m[0]);nt(c)}var Jn=new Map,Mk=new Set;function wx(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var jl=Q.d;Q.d={f:K$,r:J$,D:Y$,C:X$,L:Z$,m:eq,X:sq,S:tq,M:aq};function K$(){var c=jl.f(),m=fx();return c||m}function J$(c){var m=bt(c);m!==null&&m.tag===5&&m.type==="form"?ZT(m):jl.r(c)}var Xd=typeof document>"u"?null:document;function Lk(c,m,p){var N=Xd;if(N&&typeof m=="string"&&m){var R=$n(m);R='link[rel="'+c+'"][href="'+R+'"]',typeof p=="string"&&(R+='[crossorigin="'+p+'"]'),Mk.has(R)||(Mk.add(R),c={rel:c,crossOrigin:p,href:m},N.querySelector(R)===null&&(m=N.createElement("link"),Ar(m,"link",c),At(m),N.head.appendChild(m)))}}function Y$(c){jl.D(c),Lk("dns-prefetch",c,null)}function X$(c,m){jl.C(c,m),Lk("preconnect",c,m)}function Z$(c,m,p){jl.L(c,m,p);var N=Xd;if(N&&c&&m){var R='link[rel="preload"][as="'+$n(m)+'"]';m==="image"&&p&&p.imageSrcSet?(R+='[imagesrcset="'+$n(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(R+='[imagesizes="'+$n(p.imageSizes)+'"]')):R+='[href="'+$n(c)+'"]';var F=R;switch(m){case"style":F=Zd(c);break;case"script":F=eu(c)}Jn.has(F)||(c=f({rel:"preload",href:m==="image"&&p&&p.imageSrcSet?void 0:c,as:m},p),Jn.set(F,c),N.querySelector(R)!==null||m==="style"&&N.querySelector(im(F))||m==="script"&&N.querySelector(lm(F))||(m=N.createElement("link"),Ar(m,"link",c),At(m),N.head.appendChild(m)))}}function eq(c,m){jl.m(c,m);var p=Xd;if(p&&c){var N=m&&typeof m.as=="string"?m.as:"script",R='link[rel="modulepreload"][as="'+$n(N)+'"][href="'+$n(c)+'"]',F=R;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=eu(c)}if(!Jn.has(F)&&(c=f({rel:"modulepreload",href:c},m),Jn.set(F,c),p.querySelector(R)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(lm(F)))return}N=p.createElement("link"),Ar(N,"link",c),At(N),p.head.appendChild(N)}}}function tq(c,m,p){jl.S(c,m,p);var N=Xd;if(N&&c){var R=xt(N).hoistableStyles,F=Zd(c);m=m||"default";var ae=R.get(F);if(!ae){var me={loading:0,preload:null};if(ae=N.querySelector(im(F)))me.loading=5;else{c=f({rel:"stylesheet",href:c,"data-precedence":m},p),(p=Jn.get(F))&&Ry(c,p);var Ee=ae=N.createElement("link");At(Ee),Ar(Ee,"link",c),Ee._p=new Promise(function(Be,Je){Ee.onload=Be,Ee.onerror=Je}),Ee.addEventListener("load",function(){me.loading|=1}),Ee.addEventListener("error",function(){me.loading|=2}),me.loading|=4,Sx(ae,m,N)}ae={type:"stylesheet",instance:ae,count:1,state:me},R.set(F,ae)}}}function sq(c,m){jl.X(c,m);var p=Xd;if(p&&c){var N=xt(p).hoistableScripts,R=eu(c),F=N.get(R);F||(F=p.querySelector(lm(R)),F||(c=f({src:c,async:!0},m),(m=Jn.get(R))&&Py(c,m),F=p.createElement("script"),At(F),Ar(F,"link",c),p.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},N.set(R,F))}}function aq(c,m){jl.M(c,m);var p=Xd;if(p&&c){var N=xt(p).hoistableScripts,R=eu(c),F=N.get(R);F||(F=p.querySelector(lm(R)),F||(c=f({src:c,async:!0,type:"module"},m),(m=Jn.get(R))&&Py(c,m),F=p.createElement("script"),At(F),Ar(F,"link",c),p.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},N.set(R,F))}}function Fk(c,m,p,N){var R=(R=se.current)?wx(R):null;if(!R)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(m=Zd(p.href),p=xt(R).hoistableStyles,N=p.get(m),N||(N={type:"style",instance:null,count:0,state:null},p.set(m,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){c=Zd(p.href);var F=xt(R).hoistableStyles,ae=F.get(c);if(ae||(R=R.ownerDocument||R,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(c,ae),(F=R.querySelector(im(c)))&&!F._p&&(ae.instance=F,ae.state.loading=5),Jn.has(c)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Jn.set(c,p),F||rq(R,c,p,ae.state))),m&&N===null)throw Error(r(528,""));return ae}if(m&&N!==null)throw Error(r(529,""));return null;case"script":return m=p.async,p=p.src,typeof p=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=eu(p),p=xt(R).hoistableScripts,N=p.get(m),N||(N={type:"script",instance:null,count:0,state:null},p.set(m,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Zd(c){return'href="'+$n(c)+'"'}function im(c){return'link[rel="stylesheet"]['+c+"]"}function Uk(c){return f({},c,{"data-precedence":c.precedence,precedence:null})}function rq(c,m,p,N){c.querySelector('link[rel="preload"][as="style"]['+m+"]")?N.loading=1:(m=c.createElement("link"),N.preload=m,m.addEventListener("load",function(){return N.loading|=1}),m.addEventListener("error",function(){return N.loading|=2}),Ar(m,"link",p),At(m),c.head.appendChild(m))}function eu(c){return'[src="'+$n(c)+'"]'}function lm(c){return"script[async]"+c}function zk(c,m,p){if(m.count++,m.instance===null)switch(m.type){case"style":var N=c.querySelector('style[data-href~="'+$n(p.href)+'"]');if(N)return m.instance=N,At(N),N;var R=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return N=(c.ownerDocument||c).createElement("style"),At(N),Ar(N,"style",R),Sx(N,p.precedence,c),m.instance=N;case"stylesheet":R=Zd(p.href);var F=c.querySelector(im(R));if(F)return m.state.loading|=4,m.instance=F,At(F),F;N=Uk(p),(R=Jn.get(R))&&Ry(N,R),F=(c.ownerDocument||c).createElement("link"),At(F);var ae=F;return ae._p=new Promise(function(me,Ee){ae.onload=me,ae.onerror=Ee}),Ar(F,"link",N),m.state.loading|=4,Sx(F,p.precedence,c),m.instance=F;case"script":return F=eu(p.src),(R=c.querySelector(lm(F)))?(m.instance=R,At(R),R):(N=p,(R=Jn.get(F))&&(N=f({},p),Py(N,R)),c=c.ownerDocument||c,R=c.createElement("script"),At(R),Ar(R,"link",N),c.head.appendChild(R),m.instance=R);case"void":return null;default:throw Error(r(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(N=m.instance,m.state.loading|=4,Sx(N,p.precedence,c));return m.instance}function Sx(c,m,p){for(var N=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=N.length?N[N.length-1]:null,F=R,ae=0;ae<N.length;ae++){var me=N[ae];if(me.dataset.precedence===m)F=me;else if(F!==R)break}F?F.parentNode.insertBefore(c,F.nextSibling):(m=p.nodeType===9?p.head:p,m.insertBefore(c,m.firstChild))}function Ry(c,m){c.crossOrigin==null&&(c.crossOrigin=m.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=m.referrerPolicy),c.title==null&&(c.title=m.title)}function Py(c,m){c.crossOrigin==null&&(c.crossOrigin=m.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=m.referrerPolicy),c.integrity==null&&(c.integrity=m.integrity)}var jx=null;function Bk(c,m,p){if(jx===null){var N=new Map,R=jx=new Map;R.set(p,N)}else R=jx,N=R.get(p),N||(N=new Map,R.set(p,N));if(N.has(c))return N;for(N.set(c,null),p=p.getElementsByTagName(c),R=0;R<p.length;R++){var F=p[R];if(!(F[He]||F[ge]||c==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=F.getAttribute(m)||"";ae=c+ae;var me=N.get(ae);me?me.push(F):N.set(ae,[F])}}return N}function $k(c,m,p){c=c.ownerDocument||c,c.head.insertBefore(p,m==="title"?c.querySelector("head > title"):null)}function nq(c,m,p){if(p===1||m.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return c=m.disabled,typeof m.precedence=="string"&&c==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function qk(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function iq(c,m,p,N){if(p.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var R=Zd(N.href),F=m.querySelector(im(R));if(F){m=F._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(c.count++,c=Ax.bind(c),m.then(c,c)),p.state.loading|=4,p.instance=F,At(F);return}F=m.ownerDocument||m,N=Uk(N),(R=Jn.get(R))&&Ry(N,R),F=F.createElement("link"),At(F);var ae=F;ae._p=new Promise(function(me,Ee){ae.onload=me,ae.onerror=Ee}),Ar(F,"link",N),p.instance=F}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(p,m),(m=p.state.preload)&&(p.state.loading&3)===0&&(c.count++,p=Ax.bind(c),m.addEventListener("load",p),m.addEventListener("error",p))}}var Dy=0;function lq(c,m){return c.stylesheets&&c.count===0&&Cx(c,c.stylesheets),0<c.count||0<c.imgCount?function(p){var N=setTimeout(function(){if(c.stylesheets&&Cx(c,c.stylesheets),c.unsuspend){var F=c.unsuspend;c.unsuspend=null,F()}},6e4+m);0<c.imgBytes&&Dy===0&&(Dy=62500*B$());var R=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&Cx(c,c.stylesheets),c.unsuspend)){var F=c.unsuspend;c.unsuspend=null,F()}},(c.imgBytes>Dy?50:800)+m);return c.unsuspend=p,function(){c.unsuspend=null,clearTimeout(N),clearTimeout(R)}}:null}function Ax(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cx(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Ex=null;function Cx(c,m){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Ex=new Map,m.forEach(oq,c),Ex=null,Ax.call(c))}function oq(c,m){if(!(m.state.loading&4)){var p=Ex.get(c);if(p)var N=p.get(null);else{p=new Map,Ex.set(c,p);for(var R=c.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<R.length;F++){var ae=R[F];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(p.set(ae.dataset.precedence,ae),N=ae)}N&&p.set(null,N)}R=m.instance,ae=R.getAttribute("data-precedence"),F=p.get(ae)||N,F===N&&p.set(null,R),p.set(ae,R),this.count++,N=Ax.bind(this),R.addEventListener("load",N),R.addEventListener("error",N),F?F.parentNode.insertBefore(R,F.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(R,c.firstChild)),m.state.loading|=4}}var om={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function cq(c,m,p,N,R,F,ae,me,Ee){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=N,this.onUncaughtError=R,this.onCaughtError=F,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function Hk(c,m,p,N,R,F,ae,me,Ee,Be,Je,tt){return c=new cq(c,m,p,ae,Ee,Be,Je,tt,me),m=1,F===!0&&(m|=24),F=wn(3,null,null,m),c.current=F,F.stateNode=c,m=hv(),m.refCount++,c.pooledCache=m,m.refCount++,F.memoizedState={element:N,isDehydrated:p,cache:m},bv(F),c}function Vk(c){return c?(c=Od,c):Od}function Gk(c,m,p,N,R,F){R=Vk(R),N.context===null?N.context=R:N.pendingContext=R,N=ro(m),N.payload={element:p},F=F===void 0?null:F,F!==null&&(N.callback=F),p=no(c,N,m),p!==null&&(dn(p,c,m),z0(p,c,m))}function Wk(c,m){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var p=c.retryLane;c.retryLane=p!==0&&p<m?p:m}}function My(c,m){Wk(c,m),(c=c.alternate)&&Wk(c,m)}function Qk(c){if(c.tag===13||c.tag===31){var m=mc(c,67108864);m!==null&&dn(m,c,67108864),My(c,67108864)}}function Kk(c){if(c.tag===13||c.tag===31){var m=Cn();m=sr(m);var p=mc(c,m);p!==null&&dn(p,c,m),My(c,m)}}var Tx=!0;function dq(c,m,p,N){var R=L.T;L.T=null;var F=Q.p;try{Q.p=2,Ly(c,m,p,N)}finally{Q.p=F,L.T=R}}function uq(c,m,p,N){var R=L.T;L.T=null;var F=Q.p;try{Q.p=8,Ly(c,m,p,N)}finally{Q.p=F,L.T=R}}function Ly(c,m,p,N){if(Tx){var R=Fy(N);if(R===null)Sy(c,m,N,_x,p),Yk(c,N);else if(fq(R,c,m,p,N))N.stopPropagation();else if(Yk(c,N),m&4&&-1<mq.indexOf(c)){for(;R!==null;){var F=bt(R);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var ae=Ot(F.pendingLanes);if(ae!==0){var me=F;for(me.pendingLanes|=2,me.entangledLanes|=2;ae;){var Ee=1<<31-ie(ae);me.entanglements[1]|=Ee,ae&=~Ee}$i(F),(Fs&6)===0&&(ux=Se()+500,sm(0))}}break;case 31:case 13:me=mc(F,2),me!==null&&dn(me,F,2),fx(),My(F,2)}if(F=Fy(N),F===null&&Sy(c,m,N,_x,p),F===R)break;R=F}R!==null&&N.stopPropagation()}else Sy(c,m,N,null,p)}}function Fy(c){return c=zb(c),Uy(c)}var _x=null;function Uy(c){if(_x=null,c=ut(c),c!==null){var m=i(c);if(m===null)c=null;else{var p=m.tag;if(p===13){if(c=l(m),c!==null)return c;c=null}else if(p===31){if(c=o(m),c!==null)return c;c=null}else if(p===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;c=null}else m!==c&&(c=null)}}return _x=c,null}function Jk(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case Ze:return 2;case Mt:return 8;case lt:case yt:return 32;case wt:return 268435456;default:return 32}default:return 32}}var zy=!1,go=null,bo=null,vo=null,cm=new Map,dm=new Map,yo=[],mq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yk(c,m){switch(c){case"focusin":case"focusout":go=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":cm.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":dm.delete(m.pointerId)}}function um(c,m,p,N,R,F){return c===null||c.nativeEvent!==F?(c={blockedOn:m,domEventName:p,eventSystemFlags:N,nativeEvent:F,targetContainers:[R]},m!==null&&(m=bt(m),m!==null&&Qk(m)),c):(c.eventSystemFlags|=N,m=c.targetContainers,R!==null&&m.indexOf(R)===-1&&m.push(R),c)}function fq(c,m,p,N,R){switch(m){case"focusin":return go=um(go,c,m,p,N,R),!0;case"dragenter":return bo=um(bo,c,m,p,N,R),!0;case"mouseover":return vo=um(vo,c,m,p,N,R),!0;case"pointerover":var F=R.pointerId;return cm.set(F,um(cm.get(F)||null,c,m,p,N,R)),!0;case"gotpointercapture":return F=R.pointerId,dm.set(F,um(dm.get(F)||null,c,m,p,N,R)),!0}return!1}function Xk(c){var m=ut(c.target);if(m!==null){var p=i(m);if(p!==null){if(m=p.tag,m===13){if(m=l(p),m!==null){c.blockedOn=m,ve(c.priority,function(){Kk(p)});return}}else if(m===31){if(m=o(p),m!==null){c.blockedOn=m,ve(c.priority,function(){Kk(p)});return}}else if(m===3&&p.stateNode.current.memoizedState.isDehydrated){c.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}c.blockedOn=null}function kx(c){if(c.blockedOn!==null)return!1;for(var m=c.targetContainers;0<m.length;){var p=Fy(c.nativeEvent);if(p===null){p=c.nativeEvent;var N=new p.constructor(p.type,p);Ub=N,p.target.dispatchEvent(N),Ub=null}else return m=bt(p),m!==null&&Qk(m),c.blockedOn=p,!1;m.shift()}return!0}function Zk(c,m,p){kx(c)&&p.delete(m)}function hq(){zy=!1,go!==null&&kx(go)&&(go=null),bo!==null&&kx(bo)&&(bo=null),vo!==null&&kx(vo)&&(vo=null),cm.forEach(Zk),dm.forEach(Zk)}function Ox(c,m){c.blockedOn===m&&(c.blockedOn=null,zy||(zy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hq)))}var Ix=null;function e4(c){Ix!==c&&(Ix=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ix===c&&(Ix=null);for(var m=0;m<c.length;m+=3){var p=c[m],N=c[m+1],R=c[m+2];if(typeof N!="function"){if(Uy(N||p)===null)continue;break}var F=bt(p);F!==null&&(c.splice(m,3),m-=3,Fv(F,{pending:!0,data:R,method:p.method,action:N},N,R))}}))}function tu(c){function m(Ee){return Ox(Ee,c)}go!==null&&Ox(go,c),bo!==null&&Ox(bo,c),vo!==null&&Ox(vo,c),cm.forEach(m),dm.forEach(m);for(var p=0;p<yo.length;p++){var N=yo[p];N.blockedOn===c&&(N.blockedOn=null)}for(;0<yo.length&&(p=yo[0],p.blockedOn===null);)Xk(p),p.blockedOn===null&&yo.shift();if(p=(c.ownerDocument||c).$$reactFormReplay,p!=null)for(N=0;N<p.length;N+=3){var R=p[N],F=p[N+1],ae=R[ye]||null;if(typeof F=="function")ae||e4(p);else if(ae){var me=null;if(F&&F.hasAttribute("formAction")){if(R=F,ae=F[ye]||null)me=ae.formAction;else if(Uy(R)!==null)continue}else me=ae.action;typeof me=="function"?p[N+1]=me:(p.splice(N,3),N-=3),e4(p)}}}function t4(){function c(F){F.canIntercept&&F.info==="react-transition"&&F.intercept({handler:function(){return new Promise(function(ae){return R=ae})},focusReset:"manual",scroll:"manual"})}function m(){R!==null&&(R(),R=null),N||setTimeout(p,20)}function p(){if(!N&&!navigation.transition){var F=navigation.currentEntry;F&&F.url!=null&&navigation.navigate(F.url,{state:F.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var N=!1,R=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(p,100),function(){N=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),R!==null&&(R(),R=null)}}}function By(c){this._internalRoot=c}Rx.prototype.render=By.prototype.render=function(c){var m=this._internalRoot;if(m===null)throw Error(r(409));var p=m.current,N=Cn();Gk(p,N,c,m,null,null)},Rx.prototype.unmount=By.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var m=c.containerInfo;Gk(c.current,2,null,c,null,null),fx(),m[je]=null}};function Rx(c){this._internalRoot=c}Rx.prototype.unstable_scheduleHydration=function(c){if(c){var m=ce();c={blockedOn:null,target:c,priority:m};for(var p=0;p<yo.length&&m!==0&&m<yo[p].priority;p++);yo.splice(p,0,c),p===0&&Xk(c)}};var s4=s.version;if(s4!=="19.2.0")throw Error(r(527,s4,"19.2.0"));Q.findDOMNode=function(c){var m=c._reactInternals;if(m===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=u(m),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var xq={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Px=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Px.isDisabled&&Px.supportsFiber)try{Ne=Px.inject(xq),at=Px}catch{}}return fm.createRoot=function(c,m){if(!n(c))throw Error(r(299));var p=!1,N="",R=c_,F=d_,ae=u_;return m!=null&&(m.unstable_strictMode===!0&&(p=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(F=m.onCaughtError),m.onRecoverableError!==void 0&&(ae=m.onRecoverableError)),m=Hk(c,1,!1,null,null,p,N,null,R,F,ae,t4),c[je]=m.current,wy(c),new By(m)},fm.hydrateRoot=function(c,m,p){if(!n(c))throw Error(r(299));var N=!1,R="",F=c_,ae=d_,me=u_,Ee=null;return p!=null&&(p.unstable_strictMode===!0&&(N=!0),p.identifierPrefix!==void 0&&(R=p.identifierPrefix),p.onUncaughtError!==void 0&&(F=p.onUncaughtError),p.onCaughtError!==void 0&&(ae=p.onCaughtError),p.onRecoverableError!==void 0&&(me=p.onRecoverableError),p.formState!==void 0&&(Ee=p.formState)),m=Hk(c,1,!0,m,p??null,N,R,Ee,F,ae,me,t4),m.context=Vk(null),p=m.current,N=Cn(),N=sr(N),R=ro(N),R.callback=null,no(p,R,N),p=N,m.current.lanes=p,es(m,p),$i(m),c[je]=m.current,wy(c),new Rx(m)},fm.version="19.2.0",fm}var m4;function Eq(){if(m4)return Hy.exports;m4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),Hy.exports=Aq(),Hy.exports}var Cq=Eq();const Tq=ea(Cq),Kt=e=>typeof e=="string",hm=()=>{let e,s;const a=new Promise((r,n)=>{e=r,s=n});return a.resolve=e,a.reject=s,a},f4=e=>e==null?"":""+e,_q=(e,s,a)=>{e.forEach(r=>{s[r]&&(a[r]=s[r])})},kq=/###/g,h4=e=>e&&e.indexOf("###")>-1?e.replace(kq,"."):e,x4=e=>!e||Kt(e),Fm=(e,s,a)=>{const r=Kt(s)?s.split("."):s;let n=0;for(;n<r.length-1;){if(x4(e))return{};const i=h4(r[n]);!e[i]&&a&&(e[i]=new a),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++n}return x4(e)?{}:{obj:e,k:h4(r[n])}},p4=(e,s,a)=>{const{obj:r,k:n}=Fm(e,s,Object);if(r!==void 0||s.length===1){r[n]=a;return}let i=s[s.length-1],l=s.slice(0,s.length-1),o=Fm(e,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=Fm(e,l,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=a},Oq=(e,s,a,r)=>{const{obj:n,k:i}=Fm(e,s,Object);n[i]=n[i]||[],n[i].push(a)},Ap=(e,s)=>{const{obj:a,k:r}=Fm(e,s);if(a&&Object.prototype.hasOwnProperty.call(a,r))return a[r]},Iq=(e,s,a)=>{const r=Ap(e,a);return r!==void 0?r:Ap(s,a)},$M=(e,s,a)=>{for(const r in s)r!=="__proto__"&&r!=="constructor"&&(r in e?Kt(e[r])||e[r]instanceof String||Kt(s[r])||s[r]instanceof String?a&&(e[r]=s[r]):$M(e[r],s[r],a):e[r]=s[r]);return e},su=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Rq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Pq=e=>Kt(e)?e.replace(/[&<>"'\/]/g,s=>Rq[s]):e;class Dq{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const a=this.regExpMap.get(s);if(a!==void 0)return a;const r=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,r),this.regExpQueue.push(s),r}}const Mq=[" ",",","?","!",";"],Lq=new Dq(20),Fq=(e,s,a)=>{s=s||"",a=a||"";const r=Mq.filter(l=>s.indexOf(l)<0&&a.indexOf(l)<0);if(r.length===0)return!0;const n=Lq.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!n.test(e);if(!i){const l=e.indexOf(a);l>0&&!n.test(e.substring(0,l))&&(i=!0)}return i},jj=(e,s,a=".")=>{if(!e)return;if(e[s])return Object.prototype.hasOwnProperty.call(e,s)?e[s]:void 0;const r=s.split(a);let n=e;for(let i=0;i<r.length;){if(!n||typeof n!="object")return;let l,o="";for(let d=i;d<r.length;++d)if(d!==i&&(o+=a),o+=r[d],l=n[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<r.length-1)continue;i+=d-i+1;break}n=l}return n},sf=e=>e==null?void 0:e.replace("_","-"),Uq={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,s){var a,r;(r=(a=console==null?void 0:console[e])==null?void 0:a.apply)==null||r.call(a,console,s)}};class Ep{constructor(s,a={}){this.init(s,a)}init(s,a={}){this.prefix=a.prefix||"i18next:",this.logger=s||Uq,this.options=a,this.debug=a.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,a,r,n){return n&&!this.debug?null:(Kt(s[0])&&(s[0]=`${r}${this.prefix} ${s[0]}`),this.logger[a](s))}create(s){return new Ep(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new Ep(this.logger,s)}}var Wi=new Ep;let Vg=class{constructor(){this.observers={}}on(s,a){return s.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const n=this.observers[r].get(a)||0;this.observers[r].set(a,n+1)}),this}off(s,a){if(this.observers[s]){if(!a){delete this.observers[s];return}this.observers[s].delete(a)}}emit(s,...a){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([n,i])=>{for(let l=0;l<i;l++)n(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,i])=>{for(let l=0;l<i;l++)n.apply(n,[s,...a])})}};class g4 extends Vg{constructor(s,a={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const a=this.options.ns.indexOf(s);a>-1&&this.options.ns.splice(a,1)}getResource(s,a,r,n={}){var u,h;const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,l=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;s.indexOf(".")>-1?o=s.split("."):(o=[s,a],r&&(Array.isArray(r)?o.push(...r):Kt(r)&&i?o.push(...r.split(i)):o.push(r)));const d=Ap(this.data,o);return!d&&!a&&!r&&s.indexOf(".")>-1&&(s=o[0],a=o[1],r=o.slice(2).join(".")),d||!l||!Kt(r)?d:jj((h=(u=this.data)==null?void 0:u[s])==null?void 0:h[a],r,i)}addResource(s,a,r,n,i={silent:!1}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[s,a];r&&(o=o.concat(l?r.split(l):r)),s.indexOf(".")>-1&&(o=s.split("."),n=a,a=o[1]),this.addNamespaces(a),p4(this.data,o,n),i.silent||this.emit("added",s,a,r,n)}addResources(s,a,r,n={silent:!1}){for(const i in r)(Kt(r[i])||Array.isArray(r[i]))&&this.addResource(s,a,i,r[i],{silent:!0});n.silent||this.emit("added",s,a,r)}addResourceBundle(s,a,r,n,i,l={silent:!1,skipCopy:!1}){let o=[s,a];s.indexOf(".")>-1&&(o=s.split("."),n=r,r=a,a=o[1]),this.addNamespaces(a);let d=Ap(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?$M(d,r,i):d={...d,...r},p4(this.data,o,d),l.silent||this.emit("added",s,a,r)}removeResourceBundle(s,a){this.hasResourceBundle(s,a)&&delete this.data[s][a],this.removeNamespaces(a),this.emit("removed",s,a)}hasResourceBundle(s,a){return this.getResource(s,a)!==void 0}getResourceBundle(s,a){return a||(a=this.options.defaultNS),this.getResource(s,a)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const a=this.getDataByLanguage(s);return!!(a&&Object.keys(a)||[]).find(n=>a[n]&&Object.keys(a[n]).length>0)}toJSON(){return this.data}}var qM={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,s,a,r,n){return e.forEach(i=>{var l;s=((l=this.processors[i])==null?void 0:l.process(s,a,r,n))??s}),s}};const HM=Symbol("i18next/PATH_KEY");function zq(){const e=[],s=Object.create(null);let a;return s.get=(r,n)=>{var i;return(i=a==null?void 0:a.revoke)==null||i.call(a),n===HM?e:(e.push(n),a=Proxy.revocable(r,s),a.proxy)},Proxy.revocable(Object.create(null),s).proxy}function Aj(e,s){const{[HM]:a}=e(zq());return a.join((s==null?void 0:s.keySeparator)??".")}const b4={},Qy=e=>!Kt(e)&&typeof e!="boolean"&&typeof e!="number";class Cp extends Vg{constructor(s,a={}){super(),_q(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Wi.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,a={interpolation:{}}){const r={...a};if(s==null)return!1;const n=this.resolve(s,r);if((n==null?void 0:n.res)===void 0)return!1;const i=Qy(n.res);return!(r.returnObjects===!1&&i)}extractFromKey(s,a){let r=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const n=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let i=a.ns||this.options.defaultNS||[];const l=r&&s.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!Fq(s,r,n);if(l&&!o){const d=s.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:s,namespaces:Kt(i)?[i]:i};const u=s.split(r);(r!==n||r===n&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),s=u.join(n)}return{key:s,namespaces:Kt(i)?[i]:i}}translate(s,a,r){let n=typeof a=="object"?{...a}:a;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),s==null)return"";typeof s=="function"&&(s=Aj(s,{...this.options,...n})),Array.isArray(s)||(s=[String(s)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:d}=this.extractFromKey(s[s.length-1],n),u=d[d.length-1];let h=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const f=n.lng||this.language,x=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode")return x?i?{res:`${u}${h}${o}`,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:`${u}${h}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:o;const g=this.resolve(s,n);let v=g==null?void 0:g.res;const b=(g==null?void 0:g.usedKey)||o,y=(g==null?void 0:g.exactUsedKey)||o,j=["[object Number]","[object Function]","[object RegExp]"],w=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,O=n.count!==void 0&&!Kt(n.count),C=Cp.hasDefaultValue(n),E=O?this.pluralResolver.getSuffix(f,n.count,n):"",S=n.ordinal&&O?this.pluralResolver.getSuffix(f,n.count,{ordinal:!1}):"",D=O&&!n.ordinal&&n.count===0,M=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${E}`]||n[`defaultValue${S}`]||n.defaultValue;let U=v;A&&!v&&C&&(U=M);const I=Qy(U),k=Object.prototype.toString.apply(U);if(A&&U&&I&&j.indexOf(k)<0&&!(Kt(w)&&Array.isArray(U))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,U,{...n,ns:d}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(g.res=z,g.usedParams=this.getUsedParamsDetails(n),g):z}if(l){const z=Array.isArray(U),_=z?[]:{},q=z?y:b;for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L)){const Q=`${q}${l}${L}`;C&&!v?_[L]=this.translate(Q,{...n,defaultValue:Qy(M)?M[L]:void 0,joinArrays:!1,ns:d}):_[L]=this.translate(Q,{...n,joinArrays:!1,ns:d}),_[L]===Q&&(_[L]=U[L])}v=_}}else if(A&&Kt(w)&&Array.isArray(v))v=v.join(w),v&&(v=this.extendTranslation(v,s,n,r));else{let z=!1,_=!1;!this.isValidLookup(v)&&C&&(z=!0,v=M),this.isValidLookup(v)||(_=!0,v=o);const L=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&_?void 0:v,Q=C&&M!==v&&this.options.updateMissing;if(_||z||Q){if(this.logger.log(Q?"updateKey":"missingKey",f,u,o,Q?M:v),l){const V=this.resolve(o,{...n,keySeparator:!1});V&&V.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let X=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let V=0;V<W.length;V++)X.push(W[V]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(n.lng||this.language):X.push(n.lng||this.language);const ee=(V,P,Y)=>{var K;const J=C&&Y!==v?Y:L;this.options.missingKeyHandler?this.options.missingKeyHandler(V,u,P,J,Q,n):(K=this.backendConnector)!=null&&K.saveMissing&&this.backendConnector.saveMissing(V,u,P,J,Q,n),this.emit("missingKey",V,u,P,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?X.forEach(V=>{const P=this.pluralResolver.getSuffixes(V,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&P.indexOf(`${this.options.pluralSeparator}zero`)<0&&P.push(`${this.options.pluralSeparator}zero`),P.forEach(Y=>{ee([V],o+Y,n[`defaultValue${Y}`]||M)})}):ee(X,o,M))}v=this.extendTranslation(v,s,n,g,r),_&&v===o&&this.options.appendNamespaceToMissingKey&&(v=`${u}${h}${o}`),(_||z)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${h}${o}`:o,z?v:void 0,n))}return i?(g.res=v,g.usedParams=this.getUsedParamsDetails(n),g):v}extendTranslation(s,a,r,n,i){var d,u;if((d=this.i18nFormat)!=null&&d.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=Kt(s)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(h){const g=s.match(this.interpolator.nestingRegexp);f=g&&g.length}let x=r.replace&&!Kt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),s=this.interpolator.interpolate(s,x,r.lng||this.language||n.usedLng,r),h){const g=s.match(this.interpolator.nestingRegexp),v=g&&g.length;f<v&&(r.nest=!1)}!r.lng&&n&&n.res&&(r.lng=this.language||n.usedLng),r.nest!==!1&&(s=this.interpolator.nest(s,(...g)=>(i==null?void 0:i[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${a[0]}`),null):this.translate(...g,a),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,o=Kt(l)?[l]:l;return s!=null&&(o!=null&&o.length)&&r.applyPostProcessor!==!1&&(s=qM.handle(o,s,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),s}resolve(s,a={}){let r,n,i,l,o;return Kt(s)&&(s=[s]),s.forEach(d=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(d,a),h=u.key;n=h;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const x=a.count!==void 0&&!Kt(a.count),g=x&&!a.ordinal&&a.count===0,v=a.context!==void 0&&(Kt(a.context)||typeof a.context=="number")&&a.context!=="",b=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);f.forEach(y=>{var j,w;this.isValidLookup(r)||(o=y,!b4[`${b[0]}-${y}`]&&((j=this.utils)!=null&&j.hasLoadedNamespace)&&!((w=this.utils)!=null&&w.hasLoadedNamespace(o))&&(b4[`${b[0]}-${y}`]=!0,this.logger.warn(`key "${n}" for languages "${b.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(A=>{var E;if(this.isValidLookup(r))return;l=A;const O=[h];if((E=this.i18nFormat)!=null&&E.addLookupKeys)this.i18nFormat.addLookupKeys(O,h,A,y,a);else{let S;x&&(S=this.pluralResolver.getSuffix(A,a.count,a));const D=`${this.options.pluralSeparator}zero`,M=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(a.ordinal&&S.indexOf(M)===0&&O.push(h+S.replace(M,this.options.pluralSeparator)),O.push(h+S),g&&O.push(h+D)),v){const U=`${h}${this.options.contextSeparator||"_"}${a.context}`;O.push(U),x&&(a.ordinal&&S.indexOf(M)===0&&O.push(U+S.replace(M,this.options.pluralSeparator)),O.push(U+S),g&&O.push(U+D))}}let C;for(;C=O.pop();)this.isValidLookup(r)||(i=C,r=this.getResource(A,y,C,a))}))})}),{res:r,usedKey:n,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,a,r,n={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(s,a,r,n):this.resourceStore.getResource(s,a,r,n)}getUsedParamsDetails(s={}){const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=s.replace&&!Kt(s.replace);let n=r?s.replace:s;if(r&&typeof s.count<"u"&&(n.count=s.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const i of a)delete n[i]}return n}static hasDefaultValue(s){const a="defaultValue";for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&a===r.substring(0,a.length)&&s[r]!==void 0)return!0;return!1}}class v4{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Wi.create("languageUtils")}getScriptPartFromCode(s){if(s=sf(s),!s||s.indexOf("-")<0)return null;const a=s.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(s){if(s=sf(s),!s||s.indexOf("-")<0)return s;const a=s.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(s){if(Kt(s)&&s.indexOf("-")>-1){let a;try{a=Intl.getCanonicalLocales(s)[0]}catch{}return a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let a;return s.forEach(r=>{if(a)return;const n=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(n))&&(a=n)}),!a&&this.options.supportedLngs&&s.forEach(r=>{if(a)return;const n=this.getScriptPartFromCode(r);if(this.isSupportedCode(n))return a=n;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return a=i;a=this.options.supportedLngs.find(l=>{if(l===i)return l;if(!(l.indexOf("-")<0&&i.indexOf("-")<0)&&(l.indexOf("-")>0&&i.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===i||l.indexOf(i)===0&&i.length>1))return l})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(s,a){if(!s)return[];if(typeof s=="function"&&(s=s(a)),Kt(s)&&(s=[s]),Array.isArray(s))return s;if(!a)return s.default||[];let r=s[a];return r||(r=s[this.getScriptPartFromCode(a)]),r||(r=s[this.formatLanguageCode(a)]),r||(r=s[this.getLanguagePartFromCode(a)]),r||(r=s.default),r||[]}toResolveHierarchy(s,a){const r=this.getFallbackCodes((a===!1?[]:a)||this.options.fallbackLng||[],s),n=[],i=l=>{l&&(this.isSupportedCode(l)?n.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Kt(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(s))):Kt(s)&&i(this.formatLanguageCode(s)),r.forEach(l=>{n.indexOf(l)<0&&i(this.formatLanguageCode(l))}),n}}const y4={zero:0,one:1,two:2,few:3,many:4,other:5},N4={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Bq{constructor(s,a={}){this.languageUtils=s,this.options=a,this.logger=Wi.create("pluralResolver"),this.pluralRulesCache={}}addRule(s,a){this.rules[s]=a}clearCache(){this.pluralRulesCache={}}getRule(s,a={}){const r=sf(s==="dev"?"en":s),n=a.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(r,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),N4;if(!s.match(/-|_/))return N4;const d=this.languageUtils.getLanguagePartFromCode(s);l=this.getRule(d,a)}return this.pluralRulesCache[i]=l,l}needsPlural(s,a={}){let r=this.getRule(s,a);return r||(r=this.getRule("dev",a)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(s,a,r={}){return this.getSuffixes(s,r).map(n=>`${a}${n}`)}getSuffixes(s,a={}){let r=this.getRule(s,a);return r||(r=this.getRule("dev",a)),r?r.resolvedOptions().pluralCategories.sort((n,i)=>y4[n]-y4[i]).map(n=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(s,a,r={}){const n=this.getRule(s,r);return n?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(a)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",a,r))}}const w4=(e,s,a,r=".",n=!0)=>{let i=Iq(e,s,a);return!i&&n&&Kt(a)&&(i=jj(e,a,r),i===void 0&&(i=jj(s,a,r))),i},Ky=e=>e.replace(/\$/g,"$$$$");class S4{constructor(s={}){var a;this.logger=Wi.create("interpolator"),this.options=s,this.format=((a=s==null?void 0:s.interpolation)==null?void 0:a.format)||(r=>r),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:a,escapeValue:r,useRawValueToEscape:n,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:d,formatSeparator:u,unescapeSuffix:h,unescapePrefix:f,nestingPrefix:x,nestingPrefixEscaped:g,nestingSuffix:v,nestingSuffixEscaped:b,nestingOptionsSeparator:y,maxReplaces:j,alwaysFormat:w}=s.interpolation;this.escape=a!==void 0?a:Pq,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?su(i):l||"{{",this.suffix=o?su(o):d||"}}",this.formatSeparator=u||",",this.unescapePrefix=h?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=x?su(x):g||su("$t("),this.nestingSuffix=v?su(v):b||su(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=j||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(a,r)=>(a==null?void 0:a.source)===r?(a.lastIndex=0,a):new RegExp(r,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(s,a,r,n){var g;let i,l,o;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=v=>{if(v.indexOf(this.formatSeparator)<0){const w=w4(a,d,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...n,...a,interpolationkey:v}):w}const b=v.split(this.formatSeparator),y=b.shift().trim(),j=b.join(this.formatSeparator).trim();return this.format(w4(a,d,y,this.options.keySeparator,this.options.ignoreJSONStructure),j,r,{...n,...a,interpolationkey:y})};this.resetRegExp();const h=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,f=((g=n==null?void 0:n.interpolation)==null?void 0:g.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>Ky(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?Ky(this.escape(v)):Ky(v)}].forEach(v=>{for(o=0;i=v.regex.exec(s);){const b=i[1].trim();if(l=u(b),l===void 0)if(typeof h=="function"){const j=h(s,i,n);l=Kt(j)?j:""}else if(n&&Object.prototype.hasOwnProperty.call(n,b))l="";else if(f){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${s}`),l="";else!Kt(l)&&!this.useRawValueToEscape&&(l=f4(l));const y=v.safeValue(l);if(s=s.replace(i[0],y),f?(v.regex.lastIndex+=l.length,v.regex.lastIndex-=i[0].length):v.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),s}nest(s,a,r={}){let n,i,l;const o=(d,u)=>{const h=this.nestingOptionsSeparator;if(d.indexOf(h)<0)return d;const f=d.split(new RegExp(`${h}[ ]*{`));let x=`{${f[1]}`;d=f[0],x=this.interpolate(x,l);const g=x.match(/'/g),v=x.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!v||v.length%2!==0)&&(x=x.replace(/'/g,'"'));try{l=JSON.parse(x),u&&(l={...u,...l})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,b),`${d}${h}${x}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;n=this.nestingRegexp.exec(s);){let d=[];l={...r},l=l.replace&&!Kt(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const u=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(u!==-1&&(d=n[1].slice(u).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),n[1]=n[1].slice(0,u)),i=a(o.call(this,n[1].trim(),l),l),i&&n[0]===s&&!Kt(i))return i;Kt(i)||(i=f4(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${s}`),i=""),d.length&&(i=d.reduce((h,f)=>this.format(h,f,r.lng,{...r,interpolationkey:n[1].trim()}),i.trim())),s=s.replace(n[0],i),this.regexp.lastIndex=0}return s}}const $q=e=>{let s=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const r=e.split("(");s=r[0].toLowerCase().trim();const n=r[1].substring(0,r[1].length-1);s==="currency"&&n.indexOf(":")<0?a.currency||(a.currency=n.trim()):s==="relativetime"&&n.indexOf(":")<0?a.range||(a.range=n.trim()):n.split(";").forEach(l=>{if(l){const[o,...d]=l.split(":"),u=d.join(":").trim().replace(/^'+|'+$/g,""),h=o.trim();a[h]||(a[h]=u),u==="false"&&(a[h]=!1),u==="true"&&(a[h]=!0),isNaN(u)||(a[h]=parseInt(u,10))}})}return{formatName:s,formatOptions:a}},j4=e=>{const s={};return(a,r,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const l=r+JSON.stringify(i);let o=s[l];return o||(o=e(sf(r),n),s[l]=o),o(a)}},qq=e=>(s,a,r)=>e(sf(a),r)(s);class Hq{constructor(s={}){this.logger=Wi.create("formatter"),this.options=s,this.init(s)}init(s,a={interpolation:{}}){this.formatSeparator=a.interpolation.formatSeparator||",";const r=a.cacheInBuiltFormats?j4:qq;this.formats={number:r((n,i)=>{const l=new Intl.NumberFormat(n,{...i});return o=>l.format(o)}),currency:r((n,i)=>{const l=new Intl.NumberFormat(n,{...i,style:"currency"});return o=>l.format(o)}),datetime:r((n,i)=>{const l=new Intl.DateTimeFormat(n,{...i});return o=>l.format(o)}),relativetime:r((n,i)=>{const l=new Intl.RelativeTimeFormat(n,{...i});return o=>l.format(o,i.range||"day")}),list:r((n,i)=>{const l=new Intl.ListFormat(n,{...i});return o=>l.format(o)})}}add(s,a){this.formats[s.toLowerCase().trim()]=a}addCached(s,a){this.formats[s.toLowerCase().trim()]=j4(a)}format(s,a,r,n={}){const i=a.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(d=>d.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,d)=>{var f;const{formatName:u,formatOptions:h}=$q(d);if(this.formats[u]){let x=o;try{const g=((f=n==null?void 0:n.formatParams)==null?void 0:f[n.interpolationkey])||{},v=g.locale||g.lng||n.locale||n.lng||r;x=this.formats[u](o,v,{...h,...n,...g})}catch(g){this.logger.warn(g)}return x}else this.logger.warn(`there was no format function for ${u}`);return o},s)}}const Vq=(e,s)=>{e.pending[s]!==void 0&&(delete e.pending[s],e.pendingCount--)};class Gq extends Vg{constructor(s,a,r,n={}){var i,l;super(),this.backend=s,this.store=a,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=Wi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(l=(i=this.backend)==null?void 0:i.init)==null||l.call(i,r,n.backend,n)}queueLoad(s,a,r,n){const i={},l={},o={},d={};return s.forEach(u=>{let h=!0;a.forEach(f=>{const x=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?l[x]===void 0&&(l[x]=!0):(this.state[x]=1,h=!1,l[x]===void 0&&(l[x]=!0),i[x]===void 0&&(i[x]=!0),d[f]===void 0&&(d[f]=!0)))}),h||(o[u]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(d)}}loaded(s,a,r){const n=s.split("|"),i=n[0],l=n[1];a&&this.emit("failedLoading",i,l,a),!a&&r&&this.store.addResourceBundle(i,l,r,void 0,void 0,{skipCopy:!0}),this.state[s]=a?-1:2,a&&r&&(this.state[s]=0);const o={};this.queue.forEach(d=>{Oq(d.loaded,[i],l),Vq(d,s),a&&d.errors.push(a),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(u=>{o[u]||(o[u]={});const h=d.loaded[u];h.length&&h.forEach(f=>{o[u][f]===void 0&&(o[u][f]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(d=>!d.done)}read(s,a,r,n=0,i=this.retryTimeout,l){if(!s.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:a,fcName:r,tried:n,wait:i,callback:l});return}this.readingCalls++;const o=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&h&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,s,a,r,n+1,i*2,l)},i);return}l(u,h)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const u=d(s,a);u&&typeof u.then=="function"?u.then(h=>o(null,h)).catch(o):o(null,u)}catch(u){o(u)}return}return d(s,a,o)}prepareLoading(s,a,r={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();Kt(s)&&(s=this.languageUtils.toResolveHierarchy(s)),Kt(a)&&(a=[a]);const i=this.queueLoad(s,a,r,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(s,a,r){this.prepareLoading(s,a,{},r)}reload(s,a,r){this.prepareLoading(s,a,{reload:!0},r)}loadOne(s,a=""){const r=s.split("|"),n=r[0],i=r[1];this.read(n,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${a}loading namespace ${i} for language ${n} failed`,l),!l&&o&&this.logger.log(`${a}loaded namespace ${i} for language ${n}`,o),this.loaded(s,l,o)})}saveMissing(s,a,r,n,i,l={},o=()=>{}){var d,u,h,f,x;if((u=(d=this.services)==null?void 0:d.utils)!=null&&u.hasLoadedNamespace&&!((f=(h=this.services)==null?void 0:h.utils)!=null&&f.hasLoadedNamespace(a))){this.logger.warn(`did not save key "${r}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((x=this.backend)!=null&&x.create){const g={...l,isUpdate:i},v=this.backend.create.bind(this.backend);if(v.length<6)try{let b;v.length===5?b=v(s,a,r,n,g):b=v(s,a,r,n),b&&typeof b.then=="function"?b.then(y=>o(null,y)).catch(o):o(null,b)}catch(b){o(b)}else v(s,a,r,n,o,g)}!s||!s[0]||this.store.addResource(s[0],a,r,n)}}}const A4=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let s={};if(typeof e[1]=="object"&&(s=e[1]),Kt(e[1])&&(s.defaultValue=e[1]),Kt(e[2])&&(s.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const a=e[3]||e[2];Object.keys(a).forEach(r=>{s[r]=a[r]})}return s},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),E4=e=>{var s,a;return Kt(e.ns)&&(e.ns=[e.ns]),Kt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Kt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((a=(s=e.supportedLngs)==null?void 0:s.indexOf)==null?void 0:a.call(s,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},Dx=()=>{},Wq=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(a=>{typeof e[a]=="function"&&(e[a]=e[a].bind(e))})};class Um extends Vg{constructor(s={},a){if(super(),this.options=E4(s),this.services={},this.logger=Wi,this.modules={external:[]},Wq(this),a&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,a),this;setTimeout(()=>{this.init(s,a)},0)}}init(s={},a){this.isInitializing=!0,typeof s=="function"&&(a=s,s={}),s.defaultNS==null&&s.ns&&(Kt(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const r=A4();this.options={...r,...this.options,...E4(s)},this.options.interpolation={...r.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const n=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Wi.init(n(this.modules.logger),this.options):Wi.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Hq;const h=new v4(this.options);this.store=new g4(this.options.resources,this.options);const f=this.services;f.logger=Wi,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new Bq(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=n(u),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new S4(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Gq(n(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(g,...v)=>{this.emit(g,...v)}),this.modules.languageDetector&&(f.languageDetector=n(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=n(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Cp(this.services,this.options),this.translator.on("*",(g,...v)=>{this.emit(g,...v)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Dx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...h)=>this.store[u](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...h)=>(this.store[u](...h),this)});const o=hm(),d=()=>{const u=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(f),a(h,f)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),o}loadResources(s,a=Dx){var i,l;let r=a;const n=Kt(s)?s:this.language;if(typeof s=="function"&&(r=s),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],d=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&o.indexOf(f)<0&&o.push(f)})};n?d(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>d(h)),(l=(i=this.options.preload)==null?void 0:i.forEach)==null||l.call(i,u=>d(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(s,a,r){const n=hm();return typeof s=="function"&&(r=s,s=void 0),typeof a=="function"&&(r=a,a=void 0),s||(s=this.languages),a||(a=this.options.ns),r||(r=Dx),this.services.backendConnector.reload(s,a,i=>{n.resolve(),r(i)}),n}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&qM.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let a=0;a<this.languages.length;a++){const r=this.languages[a];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,a){this.isLanguageChangingTo=s;const r=hm();this.emit("languageChanging",s);const n=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,d)=>{d?this.isLanguageChangingTo===s&&(n(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),a&&a(o,(...u)=>this.t(...u))},l=o=>{var h,f;!s&&!o&&this.services.languageDetector&&(o=[]);const d=Kt(o)?o:o&&o[0],u=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Kt(o)?[o]:o);u&&(this.language||n(u),this.translator.language||this.translator.changeLanguage(u),(f=(h=this.services.languageDetector)==null?void 0:h.cacheUserLanguage)==null||f.call(h,u)),this.loadResources(u,x=>{i(x,u)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(s),r}getFixedT(s,a,r){const n=(i,l,...o)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([i,l].concat(o)):d={...l},d.lng=d.lng||n.lng,d.lngs=d.lngs||n.lngs,d.ns=d.ns||n.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||n.keyPrefix);const u=this.options.keySeparator||".";let h;return d.keyPrefix&&Array.isArray(i)?h=i.map(f=>(typeof f=="function"&&(f=Aj(f,{...this.options,...l})),`${d.keyPrefix}${u}${f}`)):(typeof i=="function"&&(i=Aj(i,{...this.options,...l})),h=d.keyPrefix?`${d.keyPrefix}${u}${i}`:i),this.t(h,d)};return Kt(s)?n.lng=s:n.lngs=s,n.ns=a,n.keyPrefix=r,n}t(...s){var a;return(a=this.translator)==null?void 0:a.translate(...s)}exists(...s){var a;return(a=this.translator)==null?void 0:a.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,a={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=a.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,d)=>{const u=this.services.backendConnector.state[`${o}|${d}`];return u===-1||u===0||u===2};if(a.precheck){const o=a.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,s)&&(!n||l(i,s)))}loadNamespaces(s,a){const r=hm();return this.options.ns?(Kt(s)&&(s=[s]),s.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{r.resolve(),a&&a(n)}),r):(a&&a(),Promise.resolve())}loadLanguages(s,a){const r=hm();Kt(s)&&(s=[s]);const n=this.options.preload||[],i=s.filter(l=>n.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=n.concat(i),this.loadResources(l=>{r.resolve(),a&&a(l)}),r):(a&&a(),Promise.resolve())}dir(s){var n,i;if(s||(s=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!s)return"rtl";try{const l=new Intl.Locale(s);if(l&&l.getTextInfo){const o=l.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new v4(A4());return s.toLowerCase().indexOf("-latn")>1?"ltr":a.indexOf(r.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},a){const r=new Um(s,a);return r.createInstance=Um.createInstance,r}cloneInstance(s={},a=Dx){const r=s.forkResourceStore;r&&delete s.forkResourceStore;const n={...this.options,...s,isClone:!0},i=new Um(n);if((s.debug!==void 0||s.prefix!==void 0)&&(i.logger=i.logger.clone(s)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const o=Object.keys(this.store.data).reduce((d,u)=>(d[u]={...this.store.data[u]},d[u]=Object.keys(d[u]).reduce((h,f)=>(h[f]={...d[u][f]},h),d[u]),d),{});i.store=new g4(o,n),i.services.resourceStore=i.store}return s.interpolation&&(i.services.interpolator=new S4(n)),i.translator=new Cp(i.services,n),i.translator.on("*",(o,...d)=>{i.emit(o,...d)}),i.init(n,a),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Mr=Um.createInstance();Mr.createInstance;Mr.dir;Mr.init;Mr.loadResources;Mr.reloadResources;Mr.use;Mr.changeLanguage;Mr.getFixedT;Mr.t;Mr.exists;Mr.setDefaultNamespace;Mr.hasLoadedNamespace;Mr.loadNamespaces;Mr.loadLanguages;const Qq=(e,s,a,r)=>{var i,l,o,d;const n=[a,{code:s,...r||{}}];if((l=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&l.forward)return e.services.logger.forward(n,"warn","react-i18next::",!0);Jc(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),(d=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&d.warn?e.services.logger.warn(...n):console!=null&&console.warn&&console.warn(...n)},C4={},VM=(e,s,a,r)=>{Jc(a)&&C4[a]||(Jc(a)&&(C4[a]=new Date),Qq(e,s,a,r))},GM=(e,s)=>()=>{if(e.isInitialized)s();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),s()};e.on("initialized",a)}},Ej=(e,s,a)=>{e.loadNamespaces(s,GM(e,a))},T4=(e,s,a,r)=>{if(Jc(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(s)>-1)return Ej(e,a,r);a.forEach(n=>{e.options.ns.indexOf(n)<0&&e.options.ns.push(n)}),e.loadLanguages(s,GM(e,r))},Kq=(e,s,a={})=>!s.languages||!s.languages.length?(VM(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(e,{lng:a.lng,precheck:(r,n)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!n(r.isLanguageChangingTo,e))return!1}}),Jc=e=>typeof e=="string",Jq=e=>typeof e=="object"&&e!==null,Yq=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Xq={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Zq=e=>Xq[e],e9=e=>e.replace(Yq,Zq);let Cj={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e9};const t9=(e={})=>{Cj={...Cj,...e}},s9=()=>Cj;let WM;const a9=e=>{WM=e},r9=()=>WM,n9={type:"3rdParty",init(e){t9(e.options.react),a9(e)}},i9=T.createContext();class l9{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Jy={exports:{}},Yy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _4;function o9(){if(_4)return Yy;_4=1;var e=Hg();function s(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var a=typeof Object.is=="function"?Object.is:s,r=e.useState,n=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function o(f,x){var g=x(),v=r({inst:{value:g,getSnapshot:x}}),b=v[0].inst,y=v[1];return i(function(){b.value=g,b.getSnapshot=x,d(b)&&y({inst:b})},[f,g,x]),n(function(){return d(b)&&y({inst:b}),f(function(){d(b)&&y({inst:b})})},[f]),l(g),g}function d(f){var x=f.getSnapshot;f=f.value;try{var g=x();return!a(f,g)}catch{return!0}}function u(f,x){return x()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Yy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,Yy}var k4;function c9(){return k4||(k4=1,Jy.exports=o9()),Jy.exports}var QM=c9();const d9=(e,s)=>Jc(s)?s:Jq(s)&&Jc(s.defaultValue)?s.defaultValue:Array.isArray(e)?e[e.length-1]:e,u9={t:d9,ready:!1},m9=()=>()=>{},Jt=(e,s={})=>{var M,U,I;const{i18n:a}=s,{i18n:r,defaultNS:n}=T.useContext(i9)||{},i=a||r||r9();i&&!i.reportNamespaces&&(i.reportNamespaces=new l9),i||VM(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=T.useMemo(()=>{var k;return{...s9(),...(k=i==null?void 0:i.options)==null?void 0:k.react,...s}},[i,s]),{useSuspense:o,keyPrefix:d}=l,u=n||((M=i==null?void 0:i.options)==null?void 0:M.defaultNS),h=Jc(u)?[u]:u||["translation"],f=T.useMemo(()=>h,h);(I=(U=i==null?void 0:i.reportNamespaces)==null?void 0:U.addUsedNamespaces)==null||I.call(U,f);const x=T.useRef(0),g=T.useCallback(k=>{if(!i)return m9;const{bindI18n:z,bindI18nStore:_}=l,q=()=>{x.current+=1,k()};return z&&i.on(z,q),_&&i.store.on(_,q),()=>{z&&z.split(" ").forEach(L=>i.off(L,q)),_&&_.split(" ").forEach(L=>i.store.off(L,q))}},[i,l]),v=T.useRef(),b=T.useCallback(()=>{if(!i)return u9;const k=!!(i.isInitialized||i.initializedStoreOnce)&&f.every(X=>Kq(X,i,l)),z=s.lng||i.language,_=x.current,q=v.current;if(q&&q.ready===k&&q.lng===z&&q.keyPrefix===d&&q.revision===_)return q;const Q={t:i.getFixedT(z,l.nsMode==="fallback"?f:f[0],d),ready:k,lng:z,keyPrefix:d,revision:_};return v.current=Q,Q},[i,f,d,l,s.lng]),[y,j]=T.useState(0),{t:w,ready:A}=QM.useSyncExternalStore(g,b,b);T.useEffect(()=>{if(i&&!A&&!o){const k=()=>j(z=>z+1);s.lng?T4(i,s.lng,f,k):Ej(i,f,k)}},[i,s.lng,f,A,o,y]);const O=i||{},C=T.useRef(null),E=T.useRef(),S=k=>{const z=Object.getOwnPropertyDescriptors(k);z.__original&&delete z.__original;const _=Object.create(Object.getPrototypeOf(k),z);if(!Object.prototype.hasOwnProperty.call(_,"__original"))try{Object.defineProperty(_,"__original",{value:k,writable:!1,enumerable:!1,configurable:!1})}catch{}return _},D=T.useMemo(()=>{const k=O,z=k==null?void 0:k.language;let _=k;k&&(C.current&&C.current.__original===k?E.current!==z?(_=S(k),C.current=_,E.current=z):_=C.current:(_=S(k),C.current=_,E.current=z));const q=[w,_,A];return q.t=w,q.i18n=_,q.ready=A,q},[w,O,A,O.resolvedLanguage,O.language,O.languages]);if(i&&o&&!A)throw new Promise(k=>{const z=()=>k();s.lng?T4(i,s.lng,f,z):Ej(i,f,z)});return D};var Tn=(e=>(e.MANAGER="MANAGER",e.BUYER="BUYER",e))(Tn||{}),KM=(e=>(e.SPARE_PARTS_SHOP="  ",e.RENTAL_COMPANY="  ",e.SALES_REP=" ",e.MAINTENANCE_CENTER=" ",e.INSURANCE_COMPANY=" ",e))(KM||{}),pt=(e=>(e.PENDING=" ",e.APPROVED=" ",e.REJECTED="",e.SHIPPED=" ",e.DELIVERED=" ",e.CANCELLED=" ",e))(pt||{});const Mx=[{key:"partNumber",label:" ",required:!0},{key:"name",label:" ",required:!0},{key:"brand",label:"",required:!1},{key:"qtyTotal",label:"",required:!0},{key:"priceWholesale",label:" ",required:!1},{key:"priceRetail",label:" ",required:!1},{key:"priceWholeWholesale",label:"  ",required:!1},{key:"priceEcommerce",label:"  ",required:!1},{key:"qtyStore103",label:"  103",required:!1},{key:"qtyStore105",label:"  105",required:!1},{key:"rack103",label:"  103",required:!1},{key:"rack105",label:"  105",required:!1},{key:"carName",label:" ",required:!1},{key:"description",label:"",required:!1},{key:"manufacturerPartNumber",label:" ",required:!1},{key:"globalCategory",label:" ",required:!1},{key:"modelYear",label:" ",required:!1},{key:"quality",label:"",required:!1}],Xy={dashboard:" ",products:"",customers:"",customer_requests:" ",account_requests:"  ",quotes:" ",orders:"",imports:" ",missing:"",crm:" ",activity_log:" ",notifications:"",settings_general:" ",settings_status_labels:" ",settings_api:" API",settings_backup:" ",settings_security:" ",users:"",roles:" ",export_center:" ",content_management:" ",other:""},O4={view:"",create:"",edit:"",delete:"",approve:"",reject:"",export:"",import:"",configure:"",manage_status:" ",manage_users:" ",manage_roles:" ",run_backup:"  ",manage_api:" API",other:""},I4={dashboard:["view"],products:["view","create","edit","delete","export","import"],customers:["view","create","edit","delete","export","manage_status"],customer_requests:["view","edit","approve","reject","export"],account_requests:["view","approve","reject","export"],quotes:["view","create","edit","delete","approve","reject","export"],orders:["view","create","edit","delete","approve","reject","export","manage_status"],imports:["view","create","edit","delete","approve","reject","export","manage_status"],missing:["view","create","edit","delete","export","manage_status"],crm:["view","create","edit","delete","export"],activity_log:["view","export"],notifications:["view","create","delete"],settings_general:["view","configure"],settings_status_labels:["view","create","edit","delete"],settings_api:["view","configure","manage_api"],settings_backup:["view","run_backup"],settings_security:["view","configure"],users:["view","create","edit","delete","manage_users"],roles:["view","create","edit","delete","manage_roles"],export_center:["view","export"],content_management:["view","create","edit","delete"],other:["view","other"]};function f9(e){return e.replace(/[-]/g,s=>String("".indexOf(s)))}function Yi(e){if(!e)return"";let s=f9(e);return s=s.toUpperCase(),s=s.replace(/[^A-Z0-9]/g,""),s}function af(e){return Yi(e).replace(/[^0-9]/g,"")}function h9(e){return{clean:Yi(e),numericCore:af(e)}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Tp={};Tp.version="0.18.5";var JM=1252,x9=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],pA={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},gA=function(e){x9.indexOf(e)!=-1&&(JM=pA[0]=e)};function p9(){gA(1252)}var ki=function(e){gA(e)};function bA(){ki(1200),p9()}function R4(e){for(var s=[],a=0,r=e.length;a<r;++a)s[a]=e.charCodeAt(a);return s}function g9(e){for(var s=[],a=0;a<e.length>>1;++a)s[a]=String.fromCharCode(e.charCodeAt(2*a)+(e.charCodeAt(2*a+1)<<8));return s.join("")}function YM(e){for(var s=[],a=0;a<e.length>>1;++a)s[a]=String.fromCharCode(e.charCodeAt(2*a+1)+(e.charCodeAt(2*a)<<8));return s.join("")}var km=function(e){var s=e.charCodeAt(0),a=e.charCodeAt(1);return s==255&&a==254?g9(e.slice(2)):s==254&&a==255?YM(e.slice(2)):s==65279?e.slice(1):e},Lx=function(s){return String.fromCharCode(s)},P4=function(s){return String.fromCharCode(s)},rf,ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function nf(e){for(var s="",a=0,r=0,n=0,i=0,l=0,o=0,d=0,u=0;u<e.length;)a=e.charCodeAt(u++),i=a>>2,r=e.charCodeAt(u++),l=(a&3)<<4|r>>4,n=e.charCodeAt(u++),o=(r&15)<<2|n>>6,d=n&63,isNaN(r)?o=d=64:isNaN(n)&&(d=64),s+=ko.charAt(i)+ko.charAt(l)+ko.charAt(o)+ko.charAt(d);return s}function Un(e){var s="",a=0,r=0,n=0,i=0,l=0,o=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=ko.indexOf(e.charAt(u++)),l=ko.indexOf(e.charAt(u++)),a=i<<2|l>>4,s+=String.fromCharCode(a),o=ko.indexOf(e.charAt(u++)),r=(l&15)<<4|o>>2,o!==64&&(s+=String.fromCharCode(r)),d=ko.indexOf(e.charAt(u++)),n=(o&3)<<6|d,d!==64&&(s+=String.fromCharCode(n));return s}var cs=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Gl=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(s,a){return a?new Buffer(s,a):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}})();function Bo(e){return cs?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function D4(e){return cs?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Rn=function(s){return cs?Gl(s,"binary"):s.split("").map(function(a){return a.charCodeAt(0)&255})};function Gg(e){if(typeof ArrayBuffer>"u")return Rn(e);for(var s=new ArrayBuffer(e.length),a=new Uint8Array(s),r=0;r!=e.length;++r)a[r]=e.charCodeAt(r)&255;return s}function Xo(e){if(Array.isArray(e))return e.map(function(r){return String.fromCharCode(r)}).join("");for(var s=[],a=0;a<e.length;++a)s[a]=String.fromCharCode(e[a]);return s.join("")}function b9(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function vA(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return vA(new Uint8Array(e));for(var s=new Array(e.length),a=0;a<e.length;++a)s[a]=e[a];return s}var pr=cs?function(e){return Buffer.concat(e.map(function(s){return Buffer.isBuffer(s)?s:Gl(s)}))}:function(e){if(typeof Uint8Array<"u"){var s=0,a=0;for(s=0;s<e.length;++s)a+=e[s].length;var r=new Uint8Array(a),n=0;for(s=0,a=0;s<e.length;a+=n,++s)if(n=e[s].length,e[s]instanceof Uint8Array)r.set(e[s],a);else{if(typeof e[s]=="string")throw"wtf";r.set(new Uint8Array(e[s]),a)}return r}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function v9(e){for(var s=[],a=0,r=e.length+250,n=Bo(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)n[a++]=l;else if(l<2048)n[a++]=192|l>>6&31,n[a++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;n[a++]=240|l>>8&7,n[a++]=128|l>>2&63,n[a++]=128|o>>6&15|(l&3)<<4,n[a++]=128|o&63}else n[a++]=224|l>>12&15,n[a++]=128|l>>6&63,n[a++]=128|l&63;a>r&&(s.push(n.slice(0,a)),a=0,n=Bo(65535),r=65530)}return s.push(n.slice(0,a)),pr(s)}var an=/\u0000/g,Om=/[\u0001-\u0006]/g;function Su(e){for(var s="",a=e.length-1;a>=0;)s+=e.charAt(a--);return s}function Oi(e,s){var a=""+e;return a.length>=s?a:Ia("0",s-a.length)+a}function yA(e,s){var a=""+e;return a.length>=s?a:Ia(" ",s-a.length)+a}function _p(e,s){var a=""+e;return a.length>=s?a:a+Ia(" ",s-a.length)}function y9(e,s){var a=""+Math.round(e);return a.length>=s?a:Ia("0",s-a.length)+a}function N9(e,s){var a=""+e;return a.length>=s?a:Ia("0",s-a.length)+a}var M4=Math.pow(2,32);function au(e,s){if(e>M4||e<-M4)return y9(e,s);var a=Math.round(e);return N9(a,s)}function kp(e,s){return s=s||0,e.length>=7+s&&(e.charCodeAt(s)|32)===103&&(e.charCodeAt(s+1)|32)===101&&(e.charCodeAt(s+2)|32)===110&&(e.charCodeAt(s+3)|32)===101&&(e.charCodeAt(s+4)|32)===114&&(e.charCodeAt(s+5)|32)===97&&(e.charCodeAt(s+6)|32)===108}var L4=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Zy=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function w9(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Ht={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},F4={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},S9={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Op(e,s,a){for(var r=e<0?-1:1,n=e*r,i=0,l=1,o=0,d=1,u=0,h=0,f=Math.floor(n);u<s&&(f=Math.floor(n),o=f*l+i,h=f*u+d,!(n-f<5e-8));)n=1/(n-f),i=l,l=o,d=u,u=h;if(h>s&&(u>s?(h=d,o=i):(h=u,o=l)),!a)return[0,r*o,h];var x=Math.floor(r*o/h);return[x,r*o-x*h,h]}function Pc(e,s,a){if(e>2958465||e<0)return null;var r=e|0,n=Math.floor(86400*(e-r)),i=0,l=[],o={D:r,T:n,u:86400*(e-r)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),s&&s.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++n==86400&&(o.T=n=0,++r,++o.D)),r===60)l=a?[1317,10,29]:[1900,2,29],i=3;else if(r===0)l=a?[1317,8,29]:[1900,1,0],i=6;else{r>60&&--r;var d=new Date(1900,0,1);d.setDate(d.getDate()+r-1),l=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),r<60&&(i=(i+6)%7),a&&(i=_9(d,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=n%60,n=Math.floor(n/60),o.M=n%60,n=Math.floor(n/60),o.H=n,o.q=i,o}var XM=new Date(1899,11,31,0,0,0),j9=XM.getTime(),A9=new Date(1900,2,1,0,0,0);function ZM(e,s){var a=e.getTime();return s?a-=1461*24*60*60*1e3:e>=A9&&(a+=1440*60*1e3),(a-(j9+(e.getTimezoneOffset()-XM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function NA(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function E9(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function C9(e){var s=e<0?12:11,a=NA(e.toFixed(12));return a.length<=s||(a=e.toPrecision(10),a.length<=s)?a:e.toExponential(5)}function T9(e){var s=NA(e.toFixed(11));return s.length>(e<0?12:11)||s==="0"||s==="-0"?e.toPrecision(6):s}function lf(e){var s=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),a;return s>=-4&&s<=-1?a=e.toPrecision(10+s):Math.abs(s)<=9?a=C9(e):s===10?a=e.toFixed(10).substr(0,12):a=T9(e),NA(E9(a.toUpperCase()))}function Yc(e,s){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):lf(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return hi(14,ZM(e,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+e)}function _9(e,s){s[0]-=581;var a=e.getDay();return e<60&&(a=(a+6)%7),a}function k9(e,s,a,r){var n="",i=0,l=0,o=a.y,d,u=0;switch(e){case 98:o=a.y+543;case 121:switch(s.length){case 1:case 2:d=o%100,u=2;break;default:d=o%1e4,u=4;break}break;case 109:switch(s.length){case 1:case 2:d=a.m,u=s.length;break;case 3:return Zy[a.m-1][1];case 5:return Zy[a.m-1][0];default:return Zy[a.m-1][2]}break;case 100:switch(s.length){case 1:case 2:d=a.d,u=s.length;break;case 3:return L4[a.q][0];default:return L4[a.q][1]}break;case 104:switch(s.length){case 1:case 2:d=1+(a.H+11)%12,u=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:d=a.H,u=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:d=a.M,u=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return a.u===0&&(s=="s"||s=="ss")?Oi(a.S,s.length):(r>=2?l=r===3?1e3:100:l=r===1?10:1,i=Math.round(l*(a.S+a.u)),i>=60*l&&(i=0),s==="s"?i===0?"0":""+i/l:(n=Oi(i,2+r),s==="ss"?n.substr(0,2):"."+n.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":d=a.D*24+a.H;break;case"[m]":case"[mm]":d=(a.D*24+a.H)*60+a.M;break;case"[s]":case"[ss]":d=((a.D*24+a.H)*60+a.M)*60+Math.round(a.S+a.u);break;default:throw"bad abstime format: "+s}u=s.length===3?1:2;break;case 101:d=o,u=1;break}var h=u>0?Oi(d,u):"";return h}function Oo(e){var s=3;if(e.length<=s)return e;for(var a=e.length%s,r=e.substr(0,a);a!=e.length;a+=s)r+=(r.length>0?",":"")+e.substr(a,s);return r}var e8=/%/g;function O9(e,s,a){var r=s.replace(e8,""),n=s.length-r.length;return Rl(e,r,a*Math.pow(10,2*n))+Ia("%",n)}function I9(e,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Rl(e,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function t8(e,s){var a,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+t8(e,-s);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),a=(s/Math.pow(10,i)).toPrecision(r+1+(n+i)%n),a.indexOf("e")===-1){var l=Math.floor(Math.log(s)*Math.LOG10E);for(a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(l-a.length+i):a+="E+"+(l-i);a.substr(0,2)==="0.";)a=a.charAt(0)+a.substr(2,n)+"."+a.substr(2+n),a=a.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,d,u,h){return d+u+h.substr(0,(n+i)%n)+"."+h.substr(i)+"E"})}else a=s.toExponential(r);return e.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),e.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}var s8=/# (\?+)( ?)\/( ?)(\d+)/;function R9(e,s,a){var r=parseInt(e[4],10),n=Math.round(s*r),i=Math.floor(n/r),l=n-i*r,o=r;return a+(i===0?"":""+i)+" "+(l===0?Ia(" ",e[1].length+1+e[4].length):yA(l,e[1].length)+e[2]+"/"+e[3]+Oi(o,e[4].length))}function P9(e,s,a){return a+(s===0?"":""+s)+Ia(" ",e[1].length+2+e[4].length)}var a8=/^#*0*\.([0#]+)/,r8=/\).*[0#]/,n8=/\(###\) ###\\?-####/;function en(e){for(var s="",a,r=0;r!=e.length;++r)switch(a=e.charCodeAt(r)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(a)}return s}function U4(e,s){var a=Math.pow(10,s);return""+Math.round(e*a)/a}function z4(e,s){var a=e-Math.floor(e),r=Math.pow(10,s);return s<(""+Math.round(a*r)).length?0:Math.round(a*r)}function D9(e,s){return s<(""+Math.round((e-Math.floor(e))*Math.pow(10,s))).length?1:0}function M9(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function si(e,s,a){if(e.charCodeAt(0)===40&&!s.match(r8)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?si("n",r,a):"("+si("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return I9(e,s,a);if(s.indexOf("%")!==-1)return O9(e,s,a);if(s.indexOf("E")!==-1)return t8(s,a);if(s.charCodeAt(0)===36)return"$"+si(e,s.substr(s.charAt(1)==" "?2:1),a);var n,i,l,o,d=Math.abs(a),u=a<0?"-":"";if(s.match(/^00+$/))return u+au(d,s.length);if(s.match(/^[#?]+$/))return n=au(a,0),n==="0"&&(n=""),n.length>s.length?n:en(s.substr(0,s.length-n.length))+n;if(i=s.match(s8))return R9(i,d,u);if(s.match(/^#+0+$/))return u+au(d,s.length-s.indexOf("0"));if(i=s.match(a8))return n=U4(a,i[1].length).replace(/^([^\.]+)$/,"$1."+en(i[1])).replace(/\.$/,"."+en(i[1])).replace(/\.(\d*)$/,function(v,b){return"."+b+Ia("0",en(i[1]).length-b.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return u+U4(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return u+Oo(au(d,0));if(i=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+si(e,s,-a):Oo(""+(Math.floor(a)+D9(a,i[1].length)))+"."+Oi(z4(a,i[1].length),i[1].length);if(i=s.match(/^#,#*,#0/))return si(e,s.replace(/^#,#*,/,""),a);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Su(si(e,s.replace(/[\\-]/g,""),a)),l=0,Su(Su(s.replace(/\\/g,"")).replace(/[0#]/g,function(v){return l<n.length?n.charAt(l++):v==="0"?"0":""}));if(s.match(n8))return n=si(e,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var h="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Op(d,Math.pow(10,l)-1,!1),n=""+u,h=Rl("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),n+=h+i[2]+"/"+i[3],h=_p(o[2],l),h.length<i[4].length&&(h=en(i[4].substr(i[4].length-h.length))+h),n+=h,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Op(d,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?yA(o[1],l)+i[2]+"/"+i[3]+_p(o[2],l):Ia(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=au(a,0),s.length<=n.length?n:en(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0?]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var f=s.indexOf(".")-l,x=s.length-n.length-f;return en(s.substr(0,f)+n+s.substr(s.length-x))}if(i=s.match(/^00,000\.([#0]*0)$/))return l=z4(a,i[1].length),a<0?"-"+si(e,s,-a):Oo(M9(a)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Oi(0,3-v.length):"")+v})+"."+Oi(l,i[1].length);switch(s){case"###,##0.00":return si(e,"#,##0.00",a);case"###,###":case"##,###":case"#,###":var g=Oo(au(d,0));return g!=="0"?u+g:"";case"###,###.00":return si(e,"###,##0.00",a).replace(/^0\./,".");case"#,###.00":return si(e,"#,##0.00",a).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function L9(e,s,a){for(var r=s.length-1;s.charCodeAt(r-1)===44;)--r;return Rl(e,s.substr(0,r),a/Math.pow(10,3*(s.length-r)))}function F9(e,s,a){var r=s.replace(e8,""),n=s.length-r.length;return Rl(e,r,a*Math.pow(10,2*n))+Ia("%",n)}function i8(e,s){var a,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+i8(e,-s);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var i=Math.floor(Math.log(s)*Math.LOG10E)%n;if(i<0&&(i+=n),a=(s/Math.pow(10,i)).toPrecision(r+1+(n+i)%n),!a.match(/[Ee]/)){var l=Math.floor(Math.log(s)*Math.LOG10E);a.indexOf(".")===-1?a=a.charAt(0)+"."+a.substr(1)+"E+"+(l-a.length+i):a+="E+"+(l-i),a=a.replace(/\+-/,"-")}a=a.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,d,u,h){return d+u+h.substr(0,(n+i)%n)+"."+h.substr(i)+"E"})}else a=s.toExponential(r);return e.match(/E\+00$/)&&a.match(/e[+-]\d$/)&&(a=a.substr(0,a.length-1)+"0"+a.charAt(a.length-1)),e.match(/E\-/)&&a.match(/e\+/)&&(a=a.replace(/e\+/,"e")),a.replace("e","E")}function Vi(e,s,a){if(e.charCodeAt(0)===40&&!s.match(r8)){var r=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return a>=0?Vi("n",r,a):"("+Vi("n",r,-a)+")"}if(s.charCodeAt(s.length-1)===44)return L9(e,s,a);if(s.indexOf("%")!==-1)return F9(e,s,a);if(s.indexOf("E")!==-1)return i8(s,a);if(s.charCodeAt(0)===36)return"$"+Vi(e,s.substr(s.charAt(1)==" "?2:1),a);var n,i,l,o,d=Math.abs(a),u=a<0?"-":"";if(s.match(/^00+$/))return u+Oi(d,s.length);if(s.match(/^[#?]+$/))return n=""+a,a===0&&(n=""),n.length>s.length?n:en(s.substr(0,s.length-n.length))+n;if(i=s.match(s8))return P9(i,d,u);if(s.match(/^#+0+$/))return u+Oi(d,s.length-s.indexOf("0"));if(i=s.match(a8))return n=(""+a).replace(/^([^\.]+)$/,"$1."+en(i[1])).replace(/\.$/,"."+en(i[1])),n=n.replace(/\.(\d*)$/,function(v,b){return"."+b+Ia("0",en(i[1]).length-b.length)}),s.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),i=s.match(/^(0*)\.(#*)$/))return u+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=s.match(/^#{1,3},##0(\.?)$/))return u+Oo(""+d);if(i=s.match(/^#,##0\.([#0]*0)$/))return a<0?"-"+Vi(e,s,-a):Oo(""+a)+"."+Ia("0",i[1].length);if(i=s.match(/^#,#*,#0/))return Vi(e,s.replace(/^#,#*,/,""),a);if(i=s.match(/^([0#]+)(\\?-([0#]+))+$/))return n=Su(Vi(e,s.replace(/[\\-]/g,""),a)),l=0,Su(Su(s.replace(/\\/g,"")).replace(/[0#]/g,function(v){return l<n.length?n.charAt(l++):v==="0"?"0":""}));if(s.match(n8))return n=Vi(e,"##########",a),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var h="";if(i=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=Op(d,Math.pow(10,l)-1,!1),n=""+u,h=Rl("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),n+=h+i[2]+"/"+i[3],h=_p(o[2],l),h.length<i[4].length&&(h=en(i[4].substr(i[4].length-h.length))+h),n+=h,n;if(i=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=Op(d,Math.pow(10,l)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?yA(o[1],l)+i[2]+"/"+i[3]+_p(o[2],l):Ia(" ",2*l+1+i[2].length+i[3].length));if(i=s.match(/^[#0?]+$/))return n=""+a,s.length<=n.length?n:en(s.substr(0,s.length-n.length))+n;if(i=s.match(/^([#0]+)\.([#0]+)$/)){n=""+a.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=n.indexOf(".");var f=s.indexOf(".")-l,x=s.length-n.length-f;return en(s.substr(0,f)+n+s.substr(s.length-x))}if(i=s.match(/^00,000\.([#0]*0)$/))return a<0?"-"+Vi(e,s,-a):Oo(""+a).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Oi(0,3-v.length):"")+v})+"."+Oi(0,i[1].length);switch(s){case"###,###":case"##,###":case"#,###":var g=Oo(""+d);return g!=="0"?u+g:"";default:if(s.match(/\.[0#?]*$/))return Vi(e,s.slice(0,s.lastIndexOf(".")),a)+en(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Rl(e,s,a){return(a|0)===a?Vi(e,s,a):si(e,s,a)}function U9(e){for(var s=[],a=!1,r=0,n=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:a=!a;break;case 95:case 42:case 92:++r;break;case 59:s[s.length]=e.substr(n,r-n),n=r+1}if(s[s.length]=e.substr(n),a===!0)throw new Error("Format |"+e+"| unterminated string ");return s}var l8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function o0(e){for(var s=0,a="",r="";s<e.length;)switch(a=e.charAt(s)){case"G":kp(e,s)&&(s+=6),s++;break;case'"':for(;e.charCodeAt(++s)!==34&&s<e.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(s,3).toUpperCase()==="A/P"||e.substr(s,5).toUpperCase()==="AM/PM"||e.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(r=a;e.charAt(s++)!=="]"&&s<e.length;)r+=e.charAt(s);if(r.match(l8))return!0;break;case".":case"0":case"#":for(;s<e.length&&("0#?.,E+-%".indexOf(a=e.charAt(++s))>-1||a=="\\"&&e.charAt(s+1)=="-"&&"0#".indexOf(e.charAt(s+2))>-1););break;case"?":for(;e.charAt(++s)===a;);break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function z9(e,s,a,r){for(var n=[],i="",l=0,o="",d="t",u,h,f,x="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!kp(e,l))throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(f=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(f);n[n.length]={t:"t",v:i},++l;break;case"\\":var g=e.charAt(++l),v=g==="("||g===")"?g:"t";n[n.length]={t:v,v:g},++l;break;case"_":n[n.length]={t:"t",v:" "},l+=2;break;case"@":n[n.length]={t:"T",v:s},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(u==null&&(u=Pc(s,a,e.charAt(l+1)==="2"),u==null))return"";n[n.length]={t:"X",v:e.substr(l,2)},d=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||u==null&&(u=Pc(s,a),u==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&d.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=x),n[n.length]={t:o,v:i},d=o;break;case"A":case"a":case"":var b={t:o,v:o};if(u==null&&(u=Pc(s,a)),e.substr(l,3).toUpperCase()==="A/P"?(u!=null&&(b.v=u.H>=12?"P":"A"),b.t="T",x="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(u!=null&&(b.v=u.H>=12?"PM":"AM"),b.t="T",l+=5,x="h"):e.substr(l,5).toUpperCase()==="/"?(u!=null&&(b.v=u.H>=12?"":""),b.t="T",l+=5,x="h"):(b.t="t",++l),u==null&&b.t==="T")return"";n[n.length]=b,d=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(l8)){if(u==null&&(u=Pc(s,a),u==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",o0(e)||(n[n.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;n[n.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;n[n.length]={t:o,v:i},d=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":n[n.length]={t:r===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:o,v:o},++l;break;case"$":n[n.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);n[n.length]={t:"t",v:o},++l;break}var y=0,j=0,w;for(l=n.length-1,d="t";l>=0;--l)switch(n[l].t){case"h":case"H":n[l].t=x,d="h",y<1&&(y=1);break;case"s":(w=n[l].v.match(/\.0+$/))&&(j=Math.max(j,w[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":d=n[l].t;break;case"m":d==="s"&&(n[l].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&n[l].v.match(/[Hh]/)&&(y=1),y<2&&n[l].v.match(/[Mm]/)&&(y=2),y<3&&n[l].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var A="",O;for(l=0;l<n.length;++l)switch(n[l].t){case"t":case"T":case" ":case"D":break;case"X":n[l].v="",n[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[l].v=k9(n[l].t.charCodeAt(0),n[l].v,u,j),n[l].t="t";break;case"n":case"?":for(O=l+1;n[O]!=null&&((o=n[O].t)==="?"||o==="D"||(o===" "||o==="t")&&n[O+1]!=null&&(n[O+1].t==="?"||n[O+1].t==="t"&&n[O+1].v==="/")||n[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(n[O].v==="/"||n[O].v===" "&&n[O+1]!=null&&n[O+1].t=="?"));)n[l].v+=n[O].v,n[O]={v:"",t:";"},++O;A+=n[l].v,l=O-1;break;case"G":n[l].t="t",n[l].v=Yc(s,a);break}var C="",E,S;if(A.length>0){A.charCodeAt(0)==40?(E=s<0&&A.charCodeAt(0)===45?-s:s,S=Rl("n",A,E)):(E=s<0&&r>1?-s:s,S=Rl("n",A,E),E<0&&n[0]&&n[0].t=="t"&&(S=S.substr(1),n[0].v="-"+n[0].v)),O=S.length-1;var D=n.length;for(l=0;l<n.length;++l)if(n[l]!=null&&n[l].t!="t"&&n[l].v.indexOf(".")>-1){D=l;break}var M=n.length;if(D===n.length&&S.indexOf("E")===-1){for(l=n.length-1;l>=0;--l)n[l]==null||"n?".indexOf(n[l].t)===-1||(O>=n[l].v.length-1?(O-=n[l].v.length,n[l].v=S.substr(O+1,n[l].v.length)):O<0?n[l].v="":(n[l].v=S.substr(0,O+1),O=-1),n[l].t="t",M=l);O>=0&&M<n.length&&(n[M].v=S.substr(0,O+1)+n[M].v)}else if(D!==n.length&&S.indexOf("E")===-1){for(O=S.indexOf(".")-1,l=D;l>=0;--l)if(!(n[l]==null||"n?".indexOf(n[l].t)===-1)){for(h=n[l].v.indexOf(".")>-1&&l===D?n[l].v.indexOf(".")-1:n[l].v.length-1,C=n[l].v.substr(h+1);h>=0;--h)O>=0&&(n[l].v.charAt(h)==="0"||n[l].v.charAt(h)==="#")&&(C=S.charAt(O--)+C);n[l].v=C,n[l].t="t",M=l}for(O>=0&&M<n.length&&(n[M].v=S.substr(0,O+1)+n[M].v),O=S.indexOf(".")+1,l=D;l<n.length;++l)if(!(n[l]==null||"n?(".indexOf(n[l].t)===-1&&l!==D)){for(h=n[l].v.indexOf(".")>-1&&l===D?n[l].v.indexOf(".")+1:0,C=n[l].v.substr(0,h);h<n[l].v.length;++h)O<S.length&&(C+=S.charAt(O++));n[l].v=C,n[l].t="t",M=l}}}for(l=0;l<n.length;++l)n[l]!=null&&"n?".indexOf(n[l].t)>-1&&(E=r>1&&s<0&&l>0&&n[l-1].v==="-"?-s:s,n[l].v=Rl(n[l].t,n[l].v,E),n[l].t="t");var U="";for(l=0;l!==n.length;++l)n[l]!=null&&(U+=n[l].v);return U}var B4=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function $4(e,s){if(s==null)return!1;var a=parseFloat(s[2]);switch(s[1]){case"=":if(e==a)return!0;break;case">":if(e>a)return!0;break;case"<":if(e<a)return!0;break;case"<>":if(e!=a)return!0;break;case">=":if(e>=a)return!0;break;case"<=":if(e<=a)return!0;break}return!1}function B9(e,s){var a=U9(e),r=a.length,n=a[r-1].indexOf("@");if(r<4&&n>-1&&--r,a.length>4)throw new Error("cannot find right format for |"+a.join("|")+"|");if(typeof s!="number")return[4,a.length===4||n>-1?a[a.length-1]:"@"];switch(a.length){case 1:a=n>-1?["General","General","General",a[0]]:[a[0],a[0],a[0],"@"];break;case 2:a=n>-1?[a[0],a[0],a[0],a[1]]:[a[0],a[1],a[0],"@"];break;case 3:a=n>-1?[a[0],a[1],a[0],a[2]]:[a[0],a[1],a[2],"@"];break}var i=s>0?a[0]:s<0?a[1]:a[2];if(a[0].indexOf("[")===-1&&a[1].indexOf("[")===-1)return[r,i];if(a[0].match(/\[[=<>]/)!=null||a[1].match(/\[[=<>]/)!=null){var l=a[0].match(B4),o=a[1].match(B4);return $4(s,l)?[r,a[0]]:$4(s,o)?[r,a[1]]:[r,a[l!=null&&o!=null?2:1]]}return[r,i]}function hi(e,s,a){a==null&&(a={});var r="";switch(typeof e){case"string":e=="m/d/yy"&&a.dateNF?r=a.dateNF:r=e;break;case"number":e==14&&a.dateNF?r=a.dateNF:r=(a.table!=null?a.table:Ht)[e],r==null&&(r=a.table&&a.table[F4[e]]||Ht[F4[e]]),r==null&&(r=S9[e]||"General");break}if(kp(r,0))return Yc(s,a);s instanceof Date&&(s=ZM(s,a.date1904));var n=B9(r,s);if(kp(n[1]))return Yc(s,a);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return z9(n[1],s,a,n[0])}function Pl(e,s){if(typeof s!="number"){s=+s||-1;for(var a=0;a<392;++a){if(Ht[a]==null){s<0&&(s=a);continue}if(Ht[a]==e){s=a;break}}s<0&&(s=391)}return Ht[s]=e,s}function Wg(e){for(var s=0;s!=392;++s)e[s]!==void 0&&Pl(e[s],s)}function c0(){Ht=w9()}var $9={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},o8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function q9(e){var s=typeof e=="number"?Ht[e]:e;return s=s.replace(o8,"(\\d+)"),new RegExp("^"+s+"$")}function H9(e,s,a){var r=-1,n=-1,i=-1,l=-1,o=-1,d=-1;(s.match(o8)||[]).forEach(function(f,x){var g=parseInt(a[x+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=g;break;case"d":i=g;break;case"h":l=g;break;case"s":d=g;break;case"m":l>=0?o=g:n=g;break}}),d>=0&&o==-1&&n>=0&&(o=n,n=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var h=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return l==-1&&o==-1&&d==-1?u:r==-1&&n==-1&&i==-1?h:u+"T"+h}var V9=(function(){var e={};e.version="1.2.0";function s(){for(var S=0,D=new Array(256),M=0;M!=256;++M)S=M,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,D[M]=S;return typeof Int32Array<"u"?new Int32Array(D):D}var a=s();function r(S){var D=0,M=0,U=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)I[U]=S[U];for(U=0;U!=256;++U)for(M=S[U],D=256+U;D<4096;D+=256)M=I[D]=M>>>8^S[M&255];var k=[];for(U=1;U!=16;++U)k[U-1]=typeof Int32Array<"u"?I.subarray(U*256,U*256+256):I.slice(U*256,U*256+256);return k}var n=r(a),i=n[0],l=n[1],o=n[2],d=n[3],u=n[4],h=n[5],f=n[6],x=n[7],g=n[8],v=n[9],b=n[10],y=n[11],j=n[12],w=n[13],A=n[14];function O(S,D){for(var M=D^-1,U=0,I=S.length;U<I;)M=M>>>8^a[(M^S.charCodeAt(U++))&255];return~M}function C(S,D){for(var M=D^-1,U=S.length-15,I=0;I<U;)M=A[S[I++]^M&255]^w[S[I++]^M>>8&255]^j[S[I++]^M>>16&255]^y[S[I++]^M>>>24]^b[S[I++]]^v[S[I++]]^g[S[I++]]^x[S[I++]]^f[S[I++]]^h[S[I++]]^u[S[I++]]^d[S[I++]]^o[S[I++]]^l[S[I++]]^i[S[I++]]^a[S[I++]];for(U+=15;I<U;)M=M>>>8^a[(M^S[I++])&255];return~M}function E(S,D){for(var M=D^-1,U=0,I=S.length,k=0,z=0;U<I;)k=S.charCodeAt(U++),k<128?M=M>>>8^a[(M^k)&255]:k<2048?(M=M>>>8^a[(M^(192|k>>6&31))&255],M=M>>>8^a[(M^(128|k&63))&255]):k>=55296&&k<57344?(k=(k&1023)+64,z=S.charCodeAt(U++)&1023,M=M>>>8^a[(M^(240|k>>8&7))&255],M=M>>>8^a[(M^(128|k>>2&63))&255],M=M>>>8^a[(M^(128|z>>6&15|(k&3)<<4))&255],M=M>>>8^a[(M^(128|z&63))&255]):(M=M>>>8^a[(M^(224|k>>12&15))&255],M=M>>>8^a[(M^(128|k>>6&63))&255],M=M>>>8^a[(M^(128|k&63))&255]);return~M}return e.table=a,e.bstr=O,e.buf=C,e.str=E,e})(),It=(function(){var s={};s.version="1.2.1";function a(ce,ve){for(var he=ce.split("/"),ge=ve.split("/"),ye=0,je=0,Me=Math.min(he.length,ge.length);ye<Me;++ye){if(je=he[ye].length-ge[ye].length)return je;if(he[ye]!=ge[ye])return he[ye]<ge[ye]?-1:1}return he.length-ge.length}function r(ce){if(ce.charAt(ce.length-1)=="/")return ce.slice(0,-1).indexOf("/")===-1?ce:r(ce.slice(0,-1));var ve=ce.lastIndexOf("/");return ve===-1?ce:ce.slice(0,ve+1)}function n(ce){if(ce.charAt(ce.length-1)=="/")return n(ce.slice(0,-1));var ve=ce.lastIndexOf("/");return ve===-1?ce:ce.slice(ve+1)}function i(ce,ve){typeof ve=="string"&&(ve=new Date(ve));var he=ve.getHours();he=he<<6|ve.getMinutes(),he=he<<5|ve.getSeconds()>>>1,ce.write_shift(2,he);var ge=ve.getFullYear()-1980;ge=ge<<4|ve.getMonth()+1,ge=ge<<5|ve.getDate(),ce.write_shift(2,ge)}function l(ce){var ve=ce.read_shift(2)&65535,he=ce.read_shift(2)&65535,ge=new Date,ye=he&31;he>>>=5;var je=he&15;he>>>=4,ge.setMilliseconds(0),ge.setFullYear(he+1980),ge.setMonth(je-1),ge.setDate(ye);var Me=ve&31;ve>>>=5;var Qe=ve&63;return ve>>>=6,ge.setHours(ve),ge.setMinutes(Qe),ge.setSeconds(Me<<1),ge}function o(ce){Tr(ce,0);for(var ve={},he=0;ce.l<=ce.length-4;){var ge=ce.read_shift(2),ye=ce.read_shift(2),je=ce.l+ye,Me={};switch(ge){case 21589:he=ce.read_shift(1),he&1&&(Me.mtime=ce.read_shift(4)),ye>5&&(he&2&&(Me.atime=ce.read_shift(4)),he&4&&(Me.ctime=ce.read_shift(4))),Me.mtime&&(Me.mt=new Date(Me.mtime*1e3));break}ce.l=je,ve[ge]=Me}return ve}var d;function u(){return d||(d={})}function h(ce,ve){if(ce[0]==80&&ce[1]==75)return Ie(ce,ve);if((ce[0]|32)==109&&(ce[1]|32)==105)return es(ce,ve);if(ce.length<512)throw new Error("CFB file size "+ce.length+" < 512");var he=3,ge=512,ye=0,je=0,Me=0,Qe=0,Fe=0,$e=[],He=ce.slice(0,512);Tr(He,0);var nt=f(He);switch(he=nt[0],he){case 3:ge=512;break;case 4:ge=4096;break;case 0:if(nt[1]==0)return Ie(ce,ve);default:throw new Error("Major Version: Expected 3 or 4 saw "+he)}ge!==512&&(He=ce.slice(0,ge),Tr(He,28));var ut=ce.slice(0,ge);x(He,he);var bt=He.read_shift(4,"i");if(he===3&&bt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+bt);He.l+=4,Me=He.read_shift(4,"i"),He.l+=4,He.chk("00100000","Mini Stream Cutoff Size: "),Qe=He.read_shift(4,"i"),ye=He.read_shift(4,"i"),Fe=He.read_shift(4,"i"),je=He.read_shift(4,"i");for(var ot=-1,xt=0;xt<109&&(ot=He.read_shift(4,"i"),!(ot<0));++xt)$e[xt]=ot;var At=g(ce,ge);y(Fe,je,At,ge,$e);var ta=w(At,Me,$e,ge);ta[Me].name="!Directory",ye>0&&Qe!==z&&(ta[Qe].name="!MiniFAT"),ta[$e[0]].name="!FAT",ta.fat_addrs=$e,ta.ssz=ge;var $s={},_s=[],Nr=[],Fi=[];A(Me,ta,At,_s,ye,$s,Nr,Qe),v(Nr,Fi,_s),_s.shift();var be={FileIndex:Nr,FullPaths:Fi};return ve&&ve.raw&&(be.raw={header:ut,sectors:At}),be}function f(ce){if(ce[ce.l]==80&&ce[ce.l+1]==75)return[0,0];ce.chk(_,"Header Signature: "),ce.l+=16;var ve=ce.read_shift(2,"u");return[ce.read_shift(2,"u"),ve]}function x(ce,ve){var he=9;switch(ce.l+=2,he=ce.read_shift(2)){case 9:if(ve!=3)throw new Error("Sector Shift: Expected 9 saw "+he);break;case 12:if(ve!=4)throw new Error("Sector Shift: Expected 12 saw "+he);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+he)}ce.chk("0600","Mini Sector Shift: "),ce.chk("000000000000","Reserved: ")}function g(ce,ve){for(var he=Math.ceil(ce.length/ve)-1,ge=[],ye=1;ye<he;++ye)ge[ye-1]=ce.slice(ye*ve,(ye+1)*ve);return ge[he-1]=ce.slice(he*ve),ge}function v(ce,ve,he){for(var ge=0,ye=0,je=0,Me=0,Qe=0,Fe=he.length,$e=[],He=[];ge<Fe;++ge)$e[ge]=He[ge]=ge,ve[ge]=he[ge];for(;Qe<He.length;++Qe)ge=He[Qe],ye=ce[ge].L,je=ce[ge].R,Me=ce[ge].C,$e[ge]===ge&&(ye!==-1&&$e[ye]!==ye&&($e[ge]=$e[ye]),je!==-1&&$e[je]!==je&&($e[ge]=$e[je])),Me!==-1&&($e[Me]=ge),ye!==-1&&ge!=$e[ge]&&($e[ye]=$e[ge],He.lastIndexOf(ye)<Qe&&He.push(ye)),je!==-1&&ge!=$e[ge]&&($e[je]=$e[ge],He.lastIndexOf(je)<Qe&&He.push(je));for(ge=1;ge<Fe;++ge)$e[ge]===ge&&(je!==-1&&$e[je]!==je?$e[ge]=$e[je]:ye!==-1&&$e[ye]!==ye&&($e[ge]=$e[ye]));for(ge=1;ge<Fe;++ge)if(ce[ge].type!==0){if(Qe=ge,Qe!=$e[Qe])do Qe=$e[Qe],ve[ge]=ve[Qe]+"/"+ve[ge];while(Qe!==0&&$e[Qe]!==-1&&Qe!=$e[Qe]);$e[ge]=-1}for(ve[0]+="/",ge=1;ge<Fe;++ge)ce[ge].type!==2&&(ve[ge]+="/")}function b(ce,ve,he){for(var ge=ce.start,ye=ce.size,je=[],Me=ge;he&&ye>0&&Me>=0;)je.push(ve.slice(Me*k,Me*k+k)),ye-=k,Me=Rc(he,Me*4);return je.length===0?Ke(0):pr(je).slice(0,ce.size)}function y(ce,ve,he,ge,ye){var je=z;if(ce===z){if(ve!==0)throw new Error("DIFAT chain shorter than expected")}else if(ce!==-1){var Me=he[ce],Qe=(ge>>>2)-1;if(!Me)return;for(var Fe=0;Fe<Qe&&(je=Rc(Me,Fe*4))!==z;++Fe)ye.push(je);y(Rc(Me,ge-4),ve-1,he,ge,ye)}}function j(ce,ve,he,ge,ye){var je=[],Me=[];ye||(ye=[]);var Qe=ge-1,Fe=0,$e=0;for(Fe=ve;Fe>=0;){ye[Fe]=!0,je[je.length]=Fe,Me.push(ce[Fe]);var He=he[Math.floor(Fe*4/ge)];if($e=Fe*4&Qe,ge<4+$e)throw new Error("FAT boundary crossed: "+Fe+" 4 "+ge);if(!ce[He])break;Fe=Rc(ce[He],$e)}return{nodes:je,data:eO([Me])}}function w(ce,ve,he,ge){var ye=ce.length,je=[],Me=[],Qe=[],Fe=[],$e=ge-1,He=0,nt=0,ut=0,bt=0;for(He=0;He<ye;++He)if(Qe=[],ut=He+ve,ut>=ye&&(ut-=ye),!Me[ut]){Fe=[];var ot=[];for(nt=ut;nt>=0;){ot[nt]=!0,Me[nt]=!0,Qe[Qe.length]=nt,Fe.push(ce[nt]);var xt=he[Math.floor(nt*4/ge)];if(bt=nt*4&$e,ge<4+bt)throw new Error("FAT boundary crossed: "+nt+" 4 "+ge);if(!ce[xt]||(nt=Rc(ce[xt],bt),ot[nt]))break}je[ut]={nodes:Qe,data:eO([Fe])}}return je}function A(ce,ve,he,ge,ye,je,Me,Qe){for(var Fe=0,$e=ge.length?2:0,He=ve[ce].data,nt=0,ut=0,bt;nt<He.length;nt+=128){var ot=He.slice(nt,nt+128);Tr(ot,64),ut=ot.read_shift(2),bt=TA(ot,0,ut-$e),ge.push(bt);var xt={name:bt,type:ot.read_shift(1),color:ot.read_shift(1),L:ot.read_shift(4,"i"),R:ot.read_shift(4,"i"),C:ot.read_shift(4,"i"),clsid:ot.read_shift(16),state:ot.read_shift(4,"i"),start:0,size:0},At=ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2);At!==0&&(xt.ct=O(ot,ot.l-8));var ta=ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2)+ot.read_shift(2);ta!==0&&(xt.mt=O(ot,ot.l-8)),xt.start=ot.read_shift(4,"i"),xt.size=ot.read_shift(4,"i"),xt.size<0&&xt.start<0&&(xt.size=xt.type=0,xt.start=z,xt.name=""),xt.type===5?(Fe=xt.start,ye>0&&Fe!==z&&(ve[Fe].name="!StreamData")):xt.size>=4096?(xt.storage="fat",ve[xt.start]===void 0&&(ve[xt.start]=j(he,xt.start,ve.fat_addrs,ve.ssz)),ve[xt.start].name=xt.name,xt.content=ve[xt.start].data.slice(0,xt.size)):(xt.storage="minifat",xt.size<0?xt.size=0:Fe!==z&&xt.start!==z&&ve[Fe]&&(xt.content=b(xt,ve[Fe].data,(ve[Qe]||{}).data))),xt.content&&Tr(xt.content,0),je[bt]=xt,Me.push(xt)}}function O(ce,ve){return new Date((In(ce,ve+4)/1e7*Math.pow(2,32)+In(ce,ve)/1e7-11644473600)*1e3)}function C(ce,ve){return u(),h(d.readFileSync(ce),ve)}function E(ce,ve){var he=ve&&ve.type;switch(he||cs&&Buffer.isBuffer(ce)&&(he="buffer"),he||"base64"){case"file":return C(ce,ve);case"base64":return h(Rn(Un(ce)),ve);case"binary":return h(Rn(ce),ve)}return h(ce,ve)}function S(ce,ve){var he=ve||{},ge=he.root||"Root Entry";if(ce.FullPaths||(ce.FullPaths=[]),ce.FileIndex||(ce.FileIndex=[]),ce.FullPaths.length!==ce.FileIndex.length)throw new Error("inconsistent CFB structure");ce.FullPaths.length===0&&(ce.FullPaths[0]=ge+"/",ce.FileIndex[0]={name:ge,type:5}),he.CLSID&&(ce.FileIndex[0].clsid=he.CLSID),D(ce)}function D(ce){var ve="Sh33tJ5";if(!It.find(ce,"/"+ve)){var he=Ke(4);he[0]=55,he[1]=he[3]=50,he[2]=54,ce.FileIndex.push({name:ve,type:2,content:he,size:4,L:69,R:69,C:69}),ce.FullPaths.push(ce.FullPaths[0]+ve),M(ce)}}function M(ce,ve){S(ce);for(var he=!1,ge=!1,ye=ce.FullPaths.length-1;ye>=0;--ye){var je=ce.FileIndex[ye];switch(je.type){case 0:ge?he=!0:(ce.FileIndex.pop(),ce.FullPaths.pop());break;case 1:case 2:case 5:ge=!0,isNaN(je.R*je.L*je.C)&&(he=!0),je.R>-1&&je.L>-1&&je.R==je.L&&(he=!0);break;default:he=!0;break}}if(!(!he&&!ve)){var Me=new Date(1987,1,19),Qe=0,Fe=Object.create?Object.create(null):{},$e=[];for(ye=0;ye<ce.FullPaths.length;++ye)Fe[ce.FullPaths[ye]]=!0,ce.FileIndex[ye].type!==0&&$e.push([ce.FullPaths[ye],ce.FileIndex[ye]]);for(ye=0;ye<$e.length;++ye){var He=r($e[ye][0]);ge=Fe[He],ge||($e.push([He,{name:n(He).replace("/",""),type:1,clsid:L,ct:Me,mt:Me,content:null}]),Fe[He]=!0)}for($e.sort(function(bt,ot){return a(bt[0],ot[0])}),ce.FullPaths=[],ce.FileIndex=[],ye=0;ye<$e.length;++ye)ce.FullPaths[ye]=$e[ye][0],ce.FileIndex[ye]=$e[ye][1];for(ye=0;ye<$e.length;++ye){var nt=ce.FileIndex[ye],ut=ce.FullPaths[ye];if(nt.name=n(ut).replace("/",""),nt.L=nt.R=nt.C=-(nt.color=1),nt.size=nt.content?nt.content.length:0,nt.start=0,nt.clsid=nt.clsid||L,ye===0)nt.C=$e.length>1?1:-1,nt.size=0,nt.type=5;else if(ut.slice(-1)=="/"){for(Qe=ye+1;Qe<$e.length&&r(ce.FullPaths[Qe])!=ut;++Qe);for(nt.C=Qe>=$e.length?-1:Qe,Qe=ye+1;Qe<$e.length&&r(ce.FullPaths[Qe])!=r(ut);++Qe);nt.R=Qe>=$e.length?-1:Qe,nt.type=1}else r(ce.FullPaths[ye+1]||"")==r(ut)&&(nt.R=ye+1),nt.type=2}}}function U(ce,ve){var he=ve||{};if(he.fileType=="mad")return xs(ce,he);switch(M(ce),he.fileType){case"zip":return gt(ce,he)}var ge=(function(bt){for(var ot=0,xt=0,At=0;At<bt.FileIndex.length;++At){var ta=bt.FileIndex[At];if(ta.content){var $s=ta.content.length;$s>0&&($s<4096?ot+=$s+63>>6:xt+=$s+511>>9)}}for(var _s=bt.FullPaths.length+3>>2,Nr=ot+7>>3,Fi=ot+127>>7,be=Nr+xt+_s+Fi,De=be+127>>7,kt=De<=109?0:Math.ceil((De-109)/127);be+De+kt+127>>7>De;)kt=++De<=109?0:Math.ceil((De-109)/127);var Tt=[1,kt,De,Fi,_s,xt,ot,0];return bt.FileIndex[0].size=ot<<6,Tt[7]=(bt.FileIndex[0].start=Tt[0]+Tt[1]+Tt[2]+Tt[3]+Tt[4]+Tt[5])+(Tt[6]+7>>3),Tt})(ce),ye=Ke(ge[7]<<9),je=0,Me=0;{for(je=0;je<8;++je)ye.write_shift(1,q[je]);for(je=0;je<8;++je)ye.write_shift(2,0);for(ye.write_shift(2,62),ye.write_shift(2,3),ye.write_shift(2,65534),ye.write_shift(2,9),ye.write_shift(2,6),je=0;je<3;++je)ye.write_shift(2,0);for(ye.write_shift(4,0),ye.write_shift(4,ge[2]),ye.write_shift(4,ge[0]+ge[1]+ge[2]+ge[3]-1),ye.write_shift(4,0),ye.write_shift(4,4096),ye.write_shift(4,ge[3]?ge[0]+ge[1]+ge[2]-1:z),ye.write_shift(4,ge[3]),ye.write_shift(-4,ge[1]?ge[0]-1:z),ye.write_shift(4,ge[1]),je=0;je<109;++je)ye.write_shift(-4,je<ge[2]?ge[1]+je:-1)}if(ge[1])for(Me=0;Me<ge[1];++Me){for(;je<236+Me*127;++je)ye.write_shift(-4,je<ge[2]?ge[1]+je:-1);ye.write_shift(-4,Me===ge[1]-1?z:Me+1)}var Qe=function(bt){for(Me+=bt;je<Me-1;++je)ye.write_shift(-4,je+1);bt&&(++je,ye.write_shift(-4,z))};for(Me=je=0,Me+=ge[1];je<Me;++je)ye.write_shift(-4,Q.DIFSECT);for(Me+=ge[2];je<Me;++je)ye.write_shift(-4,Q.FATSECT);Qe(ge[3]),Qe(ge[4]);for(var Fe=0,$e=0,He=ce.FileIndex[0];Fe<ce.FileIndex.length;++Fe)He=ce.FileIndex[Fe],He.content&&($e=He.content.length,!($e<4096)&&(He.start=Me,Qe($e+511>>9)));for(Qe(ge[6]+7>>3);ye.l&511;)ye.write_shift(-4,Q.ENDOFCHAIN);for(Me=je=0,Fe=0;Fe<ce.FileIndex.length;++Fe)He=ce.FileIndex[Fe],He.content&&($e=He.content.length,!(!$e||$e>=4096)&&(He.start=Me,Qe($e+63>>6)));for(;ye.l&511;)ye.write_shift(-4,Q.ENDOFCHAIN);for(je=0;je<ge[4]<<2;++je){var nt=ce.FullPaths[je];if(!nt||nt.length===0){for(Fe=0;Fe<17;++Fe)ye.write_shift(4,0);for(Fe=0;Fe<3;++Fe)ye.write_shift(4,-1);for(Fe=0;Fe<12;++Fe)ye.write_shift(4,0);continue}He=ce.FileIndex[je],je===0&&(He.start=He.size?He.start-1:z);var ut=je===0&&he.root||He.name;if($e=2*(ut.length+1),ye.write_shift(64,ut,"utf16le"),ye.write_shift(2,$e),ye.write_shift(1,He.type),ye.write_shift(1,He.color),ye.write_shift(-4,He.L),ye.write_shift(-4,He.R),ye.write_shift(-4,He.C),He.clsid)ye.write_shift(16,He.clsid,"hex");else for(Fe=0;Fe<4;++Fe)ye.write_shift(4,0);ye.write_shift(4,He.state||0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,He.start),ye.write_shift(4,He.size),ye.write_shift(4,0)}for(je=1;je<ce.FileIndex.length;++je)if(He=ce.FileIndex[je],He.size>=4096)if(ye.l=He.start+1<<9,cs&&Buffer.isBuffer(He.content))He.content.copy(ye,ye.l,0,He.size),ye.l+=He.size+511&-512;else{for(Fe=0;Fe<He.size;++Fe)ye.write_shift(1,He.content[Fe]);for(;Fe&511;++Fe)ye.write_shift(1,0)}for(je=1;je<ce.FileIndex.length;++je)if(He=ce.FileIndex[je],He.size>0&&He.size<4096)if(cs&&Buffer.isBuffer(He.content))He.content.copy(ye,ye.l,0,He.size),ye.l+=He.size+63&-64;else{for(Fe=0;Fe<He.size;++Fe)ye.write_shift(1,He.content[Fe]);for(;Fe&63;++Fe)ye.write_shift(1,0)}if(cs)ye.l=ye.length;else for(;ye.l<ye.length;)ye.write_shift(1,0);return ye}function I(ce,ve){var he=ce.FullPaths.map(function(Fe){return Fe.toUpperCase()}),ge=he.map(function(Fe){var $e=Fe.split("/");return $e[$e.length-(Fe.slice(-1)=="/"?2:1)]}),ye=!1;ve.charCodeAt(0)===47?(ye=!0,ve=he[0].slice(0,-1)+ve):ye=ve.indexOf("/")!==-1;var je=ve.toUpperCase(),Me=ye===!0?he.indexOf(je):ge.indexOf(je);if(Me!==-1)return ce.FileIndex[Me];var Qe=!je.match(Om);for(je=je.replace(an,""),Qe&&(je=je.replace(Om,"!")),Me=0;Me<he.length;++Me)if((Qe?he[Me].replace(Om,"!"):he[Me]).replace(an,"")==je||(Qe?ge[Me].replace(Om,"!"):ge[Me]).replace(an,"")==je)return ce.FileIndex[Me];return null}var k=64,z=-2,_="d0cf11e0a1b11ae1",q=[208,207,17,224,161,177,26,225],L="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:z,FREESECT:-1,HEADER_SIGNATURE:_,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:L,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(ce,ve,he){u();var ge=U(ce,he);d.writeFileSync(ve,ge)}function W(ce){for(var ve=new Array(ce.length),he=0;he<ce.length;++he)ve[he]=String.fromCharCode(ce[he]);return ve.join("")}function ee(ce,ve){var he=U(ce,ve);switch(ve&&ve.type||"buffer"){case"file":return u(),d.writeFileSync(ve.filename,he),he;case"binary":return typeof he=="string"?he:W(he);case"base64":return nf(typeof he=="string"?he:W(he));case"buffer":if(cs)return Buffer.isBuffer(he)?he:Gl(he);case"array":return typeof he=="string"?Rn(he):he}return he}var V;function P(ce){try{var ve=ce.InflateRaw,he=new ve;if(he._processChunk(new Uint8Array([3,0]),he._finishFlushFlag),he.bytesRead)V=ce;else throw new Error("zlib does not expose bytesRead")}catch(ge){console.error("cannot use native zlib: "+(ge.message||ge))}}function Y(ce,ve){if(!V)return it(ce,ve);var he=V.InflateRaw,ge=new he,ye=ge._processChunk(ce.slice(ce.l),ge._finishFlushFlag);return ce.l+=ge.bytesRead,ye}function J(ce){return V?V.deflateRawSync(ce):wt(ce)}var K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function te(ce){var ve=(ce<<1|ce<<11)&139536|(ce<<5|ce<<15)&558144;return(ve>>16|ve>>8|ve)&255}for(var Z=typeof Uint8Array<"u",ue=Z?new Uint8Array(256):[],re=0;re<256;++re)ue[re]=te(re);function H(ce,ve){var he=ue[ce&255];return ve<=8?he>>>8-ve:(he=he<<8|ue[ce>>8&255],ve<=16?he>>>16-ve:(he=he<<8|ue[ce>>16&255],he>>>24-ve))}function pe(ce,ve){var he=ve&7,ge=ve>>>3;return(ce[ge]|(he<=6?0:ce[ge+1]<<8))>>>he&3}function B(ce,ve){var he=ve&7,ge=ve>>>3;return(ce[ge]|(he<=5?0:ce[ge+1]<<8))>>>he&7}function oe(ce,ve){var he=ve&7,ge=ve>>>3;return(ce[ge]|(he<=4?0:ce[ge+1]<<8))>>>he&15}function fe(ce,ve){var he=ve&7,ge=ve>>>3;return(ce[ge]|(he<=3?0:ce[ge+1]<<8))>>>he&31}function ne(ce,ve){var he=ve&7,ge=ve>>>3;return(ce[ge]|(he<=1?0:ce[ge+1]<<8))>>>he&127}function de(ce,ve,he){var ge=ve&7,ye=ve>>>3,je=(1<<he)-1,Me=ce[ye]>>>ge;return he<8-ge||(Me|=ce[ye+1]<<8-ge,he<16-ge)||(Me|=ce[ye+2]<<16-ge,he<24-ge)||(Me|=ce[ye+3]<<24-ge),Me&je}function we(ce,ve,he){var ge=ve&7,ye=ve>>>3;return ge<=5?ce[ye]|=(he&7)<<ge:(ce[ye]|=he<<ge&255,ce[ye+1]=(he&7)>>8-ge),ve+3}function Ue(ce,ve,he){var ge=ve&7,ye=ve>>>3;return he=(he&1)<<ge,ce[ye]|=he,ve+1}function qe(ce,ve,he){var ge=ve&7,ye=ve>>>3;return he<<=ge,ce[ye]|=he&255,he>>>=8,ce[ye+1]=he,ve+8}function Ce(ce,ve,he){var ge=ve&7,ye=ve>>>3;return he<<=ge,ce[ye]|=he&255,he>>>=8,ce[ye+1]=he&255,ce[ye+2]=he>>>8,ve+16}function Le(ce,ve){var he=ce.length,ge=2*he>ve?2*he:ve+5,ye=0;if(he>=ve)return ce;if(cs){var je=D4(ge);if(ce.copy)ce.copy(je);else for(;ye<ce.length;++ye)je[ye]=ce[ye];return je}else if(Z){var Me=new Uint8Array(ge);if(Me.set)Me.set(ce);else for(;ye<he;++ye)Me[ye]=ce[ye];return Me}return ce.length=ge,ce}function Se(ce){for(var ve=new Array(ce),he=0;he<ce;++he)ve[he]=0;return ve}function _e(ce,ve,he){var ge=1,ye=0,je=0,Me=0,Qe=0,Fe=ce.length,$e=Z?new Uint16Array(32):Se(32);for(je=0;je<32;++je)$e[je]=0;for(je=Fe;je<he;++je)ce[je]=0;Fe=ce.length;var He=Z?new Uint16Array(Fe):Se(Fe);for(je=0;je<Fe;++je)$e[ye=ce[je]]++,ge<ye&&(ge=ye),He[je]=0;for($e[0]=0,je=1;je<=ge;++je)$e[je+16]=Qe=Qe+$e[je-1]<<1;for(je=0;je<Fe;++je)Qe=ce[je],Qe!=0&&(He[je]=$e[Qe+16]++);var nt=0;for(je=0;je<Fe;++je)if(nt=ce[je],nt!=0)for(Qe=H(He[je],ge)>>ge-nt,Me=(1<<ge+4-nt)-1;Me>=0;--Me)ve[Qe|Me<<nt]=nt&15|je<<4;return ge}var Ze=Z?new Uint16Array(512):Se(512),Mt=Z?new Uint16Array(32):Se(32);if(!Z){for(var lt=0;lt<512;++lt)Ze[lt]=0;for(lt=0;lt<32;++lt)Mt[lt]=0}(function(){for(var ce=[],ve=0;ve<32;ve++)ce.push(5);_e(ce,Mt,32);var he=[];for(ve=0;ve<=143;ve++)he.push(8);for(;ve<=255;ve++)he.push(9);for(;ve<=279;ve++)he.push(7);for(;ve<=287;ve++)he.push(8);_e(he,Ze,288)})();var yt=(function(){for(var ve=Z?new Uint8Array(32768):[],he=0,ge=0;he<G.length-1;++he)for(;ge<G[he+1];++ge)ve[ge]=he;for(;ge<32768;++ge)ve[ge]=29;var ye=Z?new Uint8Array(259):[];for(he=0,ge=0;he<se.length-1;++he)for(;ge<se[he+1];++ge)ye[ge]=he;function je(Qe,Fe){for(var $e=0;$e<Qe.length;){var He=Math.min(65535,Qe.length-$e),nt=$e+He==Qe.length;for(Fe.write_shift(1,+nt),Fe.write_shift(2,He),Fe.write_shift(2,~He&65535);He-- >0;)Fe[Fe.l++]=Qe[$e++]}return Fe.l}function Me(Qe,Fe){for(var $e=0,He=0,nt=Z?new Uint16Array(32768):[];He<Qe.length;){var ut=Math.min(65535,Qe.length-He);if(ut<10){for($e=we(Fe,$e,+(He+ut==Qe.length)),$e&7&&($e+=8-($e&7)),Fe.l=$e/8|0,Fe.write_shift(2,ut),Fe.write_shift(2,~ut&65535);ut-- >0;)Fe[Fe.l++]=Qe[He++];$e=Fe.l*8;continue}$e=we(Fe,$e,+(He+ut==Qe.length)+2);for(var bt=0;ut-- >0;){var ot=Qe[He];bt=(bt<<5^ot)&32767;var xt=-1,At=0;if((xt=nt[bt])&&(xt|=He&-32768,xt>He&&(xt-=32768),xt<He))for(;Qe[xt+At]==Qe[He+At]&&At<250;)++At;if(At>2){ot=ye[At],ot<=22?$e=qe(Fe,$e,ue[ot+1]>>1)-1:(qe(Fe,$e,3),$e+=5,qe(Fe,$e,ue[ot-23]>>5),$e+=3);var ta=ot<8?0:ot-4>>2;ta>0&&(Ce(Fe,$e,At-se[ot]),$e+=ta),ot=ve[He-xt],$e=qe(Fe,$e,ue[ot]>>3),$e-=3;var $s=ot<4?0:ot-2>>1;$s>0&&(Ce(Fe,$e,He-xt-G[ot]),$e+=$s);for(var _s=0;_s<At;++_s)nt[bt]=He&32767,bt=(bt<<5^Qe[He])&32767,++He;ut-=At-1}else ot<=143?ot=ot+48:$e=Ue(Fe,$e,1),$e=qe(Fe,$e,ue[ot]),nt[bt]=He&32767,++He}$e=qe(Fe,$e,0)-1}return Fe.l=($e+7)/8|0,Fe.l}return function(Fe,$e){return Fe.length<8?je(Fe,$e):Me(Fe,$e)}})();function wt(ce){var ve=Ke(50+Math.floor(ce.length*1.1)),he=yt(ce,ve);return ve.slice(0,he)}var ke=Z?new Uint16Array(32768):Se(32768),We=Z?new Uint16Array(32768):Se(32768),Ne=Z?new Uint16Array(128):Se(128),at=1,dt=1;function ie(ce,ve){var he=fe(ce,ve)+257;ve+=5;var ge=fe(ce,ve)+1;ve+=5;var ye=oe(ce,ve)+4;ve+=4;for(var je=0,Me=Z?new Uint8Array(19):Se(19),Qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Fe=1,$e=Z?new Uint8Array(8):Se(8),He=Z?new Uint8Array(8):Se(8),nt=Me.length,ut=0;ut<ye;++ut)Me[K[ut]]=je=B(ce,ve),Fe<je&&(Fe=je),$e[je]++,ve+=3;var bt=0;for($e[0]=0,ut=1;ut<=Fe;++ut)He[ut]=bt=bt+$e[ut-1]<<1;for(ut=0;ut<nt;++ut)(bt=Me[ut])!=0&&(Qe[ut]=He[bt]++);var ot=0;for(ut=0;ut<nt;++ut)if(ot=Me[ut],ot!=0){bt=ue[Qe[ut]]>>8-ot;for(var xt=(1<<7-ot)-1;xt>=0;--xt)Ne[bt|xt<<ot]=ot&7|ut<<3}var At=[];for(Fe=1;At.length<he+ge;)switch(bt=Ne[ne(ce,ve)],ve+=bt&7,bt>>>=3){case 16:for(je=3+pe(ce,ve),ve+=2,bt=At[At.length-1];je-- >0;)At.push(bt);break;case 17:for(je=3+B(ce,ve),ve+=3;je-- >0;)At.push(0);break;case 18:for(je=11+ne(ce,ve),ve+=7;je-- >0;)At.push(0);break;default:At.push(bt),Fe<bt&&(Fe=bt);break}var ta=At.slice(0,he),$s=At.slice(he);for(ut=he;ut<286;++ut)ta[ut]=0;for(ut=ge;ut<30;++ut)$s[ut]=0;return at=_e(ta,ke,286),dt=_e($s,We,30),ve}function rt(ce,ve){if(ce[0]==3&&!(ce[1]&3))return[Bo(ve),2];for(var he=0,ge=0,ye=D4(ve||1<<18),je=0,Me=ye.length>>>0,Qe=0,Fe=0;(ge&1)==0;){if(ge=B(ce,he),he+=3,ge>>>1)ge>>1==1?(Qe=9,Fe=5):(he=ie(ce,he),Qe=at,Fe=dt);else{he&7&&(he+=8-(he&7));var $e=ce[he>>>3]|ce[(he>>>3)+1]<<8;if(he+=32,$e>0)for(!ve&&Me<je+$e&&(ye=Le(ye,je+$e),Me=ye.length);$e-- >0;)ye[je++]=ce[he>>>3],he+=8;continue}for(;;){!ve&&Me<je+32767&&(ye=Le(ye,je+32767),Me=ye.length);var He=de(ce,he,Qe),nt=ge>>>1==1?Ze[He]:ke[He];if(he+=nt&15,nt>>>=4,(nt>>>8&255)===0)ye[je++]=nt;else{if(nt==256)break;nt-=257;var ut=nt<8?0:nt-4>>2;ut>5&&(ut=0);var bt=je+se[nt];ut>0&&(bt+=de(ce,he,ut),he+=ut),He=de(ce,he,Fe),nt=ge>>>1==1?Mt[He]:We[He],he+=nt&15,nt>>>=4;var ot=nt<4?0:nt-2>>1,xt=G[nt];for(ot>0&&(xt+=de(ce,he,ot),he+=ot),!ve&&Me<bt&&(ye=Le(ye,bt+100),Me=ye.length);je<bt;)ye[je]=ye[je-xt],++je}}}return ve?[ye,he+7>>>3]:[ye.slice(0,je),he+7>>>3]}function it(ce,ve){var he=ce.slice(ce.l||0),ge=rt(he,ve);return ce.l+=ge[1],ge[0]}function vt(ce,ve){if(ce)typeof console<"u"&&console.error(ve);else throw new Error(ve)}function Ie(ce,ve){var he=ce;Tr(he,0);var ge=[],ye=[],je={FileIndex:ge,FullPaths:ye};S(je,{root:ve.root});for(var Me=he.length-4;(he[Me]!=80||he[Me+1]!=75||he[Me+2]!=5||he[Me+3]!=6)&&Me>=0;)--Me;he.l=Me+4,he.l+=4;var Qe=he.read_shift(2);he.l+=6;var Fe=he.read_shift(4);for(he.l=Fe,Me=0;Me<Qe;++Me){he.l+=20;var $e=he.read_shift(4),He=he.read_shift(4),nt=he.read_shift(2),ut=he.read_shift(2),bt=he.read_shift(2);he.l+=8;var ot=he.read_shift(4),xt=o(he.slice(he.l+nt,he.l+nt+ut));he.l+=nt+ut+bt;var At=he.l;he.l=ot+4,ct(he,$e,He,je,xt),he.l=At}return je}function ct(ce,ve,he,ge,ye){ce.l+=2;var je=ce.read_shift(2),Me=ce.read_shift(2),Qe=l(ce);if(je&8257)throw new Error("Unsupported ZIP encryption");for(var Fe=ce.read_shift(4),$e=ce.read_shift(4),He=ce.read_shift(4),nt=ce.read_shift(2),ut=ce.read_shift(2),bt="",ot=0;ot<nt;++ot)bt+=String.fromCharCode(ce[ce.l++]);if(ut){var xt=o(ce.slice(ce.l,ce.l+ut));(xt[21589]||{}).mt&&(Qe=xt[21589].mt),((ye||{})[21589]||{}).mt&&(Qe=ye[21589].mt)}ce.l+=ut;var At=ce.slice(ce.l,ce.l+$e);switch(Me){case 8:At=Y(ce,He);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Me)}var ta=!1;je&8&&(Fe=ce.read_shift(4),Fe==134695760&&(Fe=ce.read_shift(4),ta=!0),$e=ce.read_shift(4),He=ce.read_shift(4)),$e!=ve&&vt(ta,"Bad compressed size: "+ve+" != "+$e),He!=he&&vt(ta,"Bad uncompressed size: "+he+" != "+He),Aa(ge,bt,At,{unsafe:!0,mt:Qe})}function gt(ce,ve){var he=ve||{},ge=[],ye=[],je=Ke(1),Me=he.compression?8:0,Qe=0,Fe=0,$e=0,He=0,nt=0,ut=ce.FullPaths[0],bt=ut,ot=ce.FileIndex[0],xt=[],At=0;for(Fe=1;Fe<ce.FullPaths.length;++Fe)if(bt=ce.FullPaths[Fe].slice(ut.length),ot=ce.FileIndex[Fe],!(!ot.size||!ot.content||bt=="Sh33tJ5")){var ta=He,$s=Ke(bt.length);for($e=0;$e<bt.length;++$e)$s.write_shift(1,bt.charCodeAt($e)&127);$s=$s.slice(0,$s.l),xt[nt]=V9.buf(ot.content,0);var _s=ot.content;Me==8&&(_s=J(_s)),je=Ke(30),je.write_shift(4,67324752),je.write_shift(2,20),je.write_shift(2,Qe),je.write_shift(2,Me),ot.mt?i(je,ot.mt):je.write_shift(4,0),je.write_shift(-4,xt[nt]),je.write_shift(4,_s.length),je.write_shift(4,ot.content.length),je.write_shift(2,$s.length),je.write_shift(2,0),He+=je.length,ge.push(je),He+=$s.length,ge.push($s),He+=_s.length,ge.push(_s),je=Ke(46),je.write_shift(4,33639248),je.write_shift(2,0),je.write_shift(2,20),je.write_shift(2,Qe),je.write_shift(2,Me),je.write_shift(4,0),je.write_shift(-4,xt[nt]),je.write_shift(4,_s.length),je.write_shift(4,ot.content.length),je.write_shift(2,$s.length),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(4,0),je.write_shift(4,ta),At+=je.l,ye.push(je),At+=$s.length,ye.push($s),++nt}return je=Ke(22),je.write_shift(4,101010256),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,nt),je.write_shift(2,nt),je.write_shift(4,At),je.write_shift(4,He),je.write_shift(2,0),pr([pr(ge),pr(ye),je])}var Ot={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ls(ce,ve){if(ce.ctype)return ce.ctype;var he=ce.name||"",ge=he.match(/\.([^\.]+)$/);return ge&&Ot[ge[1]]||ve&&(ge=(he=ve).match(/[\.\\]([^\.\\])+$/),ge&&Ot[ge[1]])?Ot[ge[1]]:"application/octet-stream"}function La(ce){for(var ve=nf(ce),he=[],ge=0;ge<ve.length;ge+=76)he.push(ve.slice(ge,ge+76));return he.join(`\r
`)+`\r
`}function Yr(ce){var ve=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function($e){var He=$e.charCodeAt(0).toString(16).toUpperCase();return"="+(He.length==1?"0"+He:He)});ve=ve.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ve.charAt(0)==`
`&&(ve="=0D"+ve.slice(1)),ve=ve.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var he=[],ge=ve.split(`\r
`),ye=0;ye<ge.length;++ye){var je=ge[ye];if(je.length==0){he.push("");continue}for(var Me=0;Me<je.length;){var Qe=76,Fe=je.slice(Me,Me+Qe);Fe.charAt(Qe-1)=="="?Qe--:Fe.charAt(Qe-2)=="="?Qe-=2:Fe.charAt(Qe-3)=="="&&(Qe-=3),Fe=je.slice(Me,Me+Qe),Me+=Qe,Me<je.length&&(Fe+="="),he.push(Fe)}}return he.join(`\r
`)}function Ae(ce){for(var ve=[],he=0;he<ce.length;++he){for(var ge=ce[he];he<=ce.length&&ge.charAt(ge.length-1)=="=";)ge=ge.slice(0,ge.length-1)+ce[++he];ve.push(ge)}for(var ye=0;ye<ve.length;++ye)ve[ye]=ve[ye].replace(/[=][0-9A-Fa-f]{2}/g,function(je){return String.fromCharCode(parseInt(je.slice(1),16))});return Rn(ve.join(`\r
`))}function zt(ce,ve,he){for(var ge="",ye="",je="",Me,Qe=0;Qe<10;++Qe){var Fe=ve[Qe];if(!Fe||Fe.match(/^\s*$/))break;var $e=Fe.match(/^(.*?):\s*([^\s].*)$/);if($e)switch($e[1].toLowerCase()){case"content-location":ge=$e[2].trim();break;case"content-type":je=$e[2].trim();break;case"content-transfer-encoding":ye=$e[2].trim();break}}switch(++Qe,ye.toLowerCase()){case"base64":Me=Rn(Un(ve.slice(Qe).join("")));break;case"quoted-printable":Me=Ae(ve.slice(Qe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ye)}var He=Aa(ce,ge.slice(he.length),Me,{unsafe:!0});je&&(He.ctype=je)}function es(ce,ve){if(W(ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var he=ve&&ve.root||"",ge=(cs&&Buffer.isBuffer(ce)?ce.toString("binary"):W(ce)).split(`\r
`),ye=0,je="";for(ye=0;ye<ge.length;++ye)if(je=ge[ye],!!/^Content-Location:/i.test(je)&&(je=je.slice(je.indexOf("file")),he||(he=je.slice(0,je.lastIndexOf("/")+1)),je.slice(0,he.length)!=he))for(;he.length>0&&(he=he.slice(0,he.length-1),he=he.slice(0,he.lastIndexOf("/")+1),je.slice(0,he.length)!=he););var Me=(ge[1]||"").match(/boundary="(.*?)"/);if(!Me)throw new Error("MAD cannot find boundary");var Qe="--"+(Me[1]||""),Fe=[],$e=[],He={FileIndex:Fe,FullPaths:$e};S(He);var nt,ut=0;for(ye=0;ye<ge.length;++ye){var bt=ge[ye];bt!==Qe&&bt!==Qe+"--"||(ut++&&zt(He,ge.slice(nt,ye),he),nt=ye)}return He}function xs(ce,ve){var he=ve||{},ge=he.boundary||"SheetJS";ge="------="+ge;for(var ye=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ge.slice(2)+'"',"","",""],je=ce.FullPaths[0],Me=je,Qe=ce.FileIndex[0],Fe=1;Fe<ce.FullPaths.length;++Fe)if(Me=ce.FullPaths[Fe].slice(je.length),Qe=ce.FileIndex[Fe],!(!Qe.size||!Qe.content||Me=="Sh33tJ5")){Me=Me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(At){return"_x"+At.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(At){return"_u"+At.charCodeAt(0).toString(16)+"_"});for(var $e=Qe.content,He=cs&&Buffer.isBuffer($e)?$e.toString("binary"):W($e),nt=0,ut=Math.min(1024,He.length),bt=0,ot=0;ot<=ut;++ot)(bt=He.charCodeAt(ot))>=32&&bt<128&&++nt;var xt=nt>=ut*4/5;ye.push(ge),ye.push("Content-Location: "+(he.root||"file:///C:/SheetJS/")+Me),ye.push("Content-Transfer-Encoding: "+(xt?"quoted-printable":"base64")),ye.push("Content-Type: "+Ls(Qe,Me)),ye.push(""),ye.push(xt?Yr(He):La(He))}return ye.push(ge+`--\r
`),ye.join(`\r
`)}function Ts(ce){var ve={};return S(ve,ce),ve}function Aa(ce,ve,he,ge){var ye=ge&&ge.unsafe;ye||S(ce);var je=!ye&&It.find(ce,ve);if(!je){var Me=ce.FullPaths[0];ve.slice(0,Me.length)==Me?Me=ve:(Me.slice(-1)!="/"&&(Me+="/"),Me=(Me+ve).replace("//","/")),je={name:n(ve),type:2},ce.FileIndex.push(je),ce.FullPaths.push(Me),ye||It.utils.cfb_gc(ce)}return je.content=he,je.size=he?he.length:0,ge&&(ge.CLSID&&(je.clsid=ge.CLSID),ge.mt&&(je.mt=ge.mt),ge.ct&&(je.ct=ge.ct)),je}function tr(ce,ve){S(ce);var he=It.find(ce,ve);if(he){for(var ge=0;ge<ce.FileIndex.length;++ge)if(ce.FileIndex[ge]==he)return ce.FileIndex.splice(ge,1),ce.FullPaths.splice(ge,1),!0}return!1}function sr(ce,ve,he){S(ce);var ge=It.find(ce,ve);if(ge){for(var ye=0;ye<ce.FileIndex.length;++ye)if(ce.FileIndex[ye]==ge)return ce.FileIndex[ye].name=n(he),ce.FullPaths[ye]=he,!0}return!1}function Xe(ce){M(ce,!0)}return s.find=I,s.read=E,s.parse=h,s.write=ee,s.writeFile=X,s.utils={cfb_new:Ts,cfb_add:Aa,cfb_del:tr,cfb_mov:sr,cfb_gc:Xe,ReadShift:zm,CheckField:k8,prep_blob:Tr,bconcat:pr,use_zlib:P,_deflateRaw:wt,_inflateRaw:it,consts:Q},s})();function G9(e){return typeof e=="string"?Gg(e):Array.isArray(e)?b9(e):e}function nh(e,s,a){if(typeof Deno<"u"){if(a&&typeof s=="string")switch(a){case"utf8":s=new TextEncoder(a).encode(s);break;case"binary":s=Gg(s);break;default:throw new Error("Unsupported encoding "+a)}return Deno.writeFileSync(e,s)}var r=a=="utf8"?Qi(s):s;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,e);if(typeof Blob<"u"){var n=new Blob([G9(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(n,e);if(typeof saveAs<"u")return saveAs(n,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(n);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(s)&&(s=Xo(s)),o.write(s),o.close(),s}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+e)}function W9(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(e);s.open("r"),s.encoding="binary";var a=s.read();return s.close(),a}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+e)}function Ma(e){for(var s=Object.keys(e),a=[],r=0;r<s.length;++r)Object.prototype.hasOwnProperty.call(e,s[r])&&a.push(s[r]);return a}function q4(e,s){for(var a=[],r=Ma(e),n=0;n!==r.length;++n)a[e[r[n]][s]]==null&&(a[e[r[n]][s]]=r[n]);return a}function Qg(e){for(var s=[],a=Ma(e),r=0;r!==a.length;++r)s[e[a[r]]]=a[r];return s}function Kg(e){for(var s=[],a=Ma(e),r=0;r!==a.length;++r)s[e[a[r]]]=parseInt(a[r],10);return s}function Q9(e){for(var s=[],a=Ma(e),r=0;r!==a.length;++r)s[e[a[r]]]==null&&(s[e[a[r]]]=[]),s[e[a[r]]].push(a[r]);return s}var Ip=new Date(1899,11,30,0,0,0);function dr(e,s){var a=e.getTime(),r=Ip.getTime()+(e.getTimezoneOffset()-Ip.getTimezoneOffset())*6e4;return(a-r)/(1440*60*1e3)}var c8=new Date,K9=Ip.getTime()+(c8.getTimezoneOffset()-Ip.getTimezoneOffset())*6e4,H4=c8.getTimezoneOffset();function Jg(e){var s=new Date;return s.setTime(e*24*60*60*1e3+K9),s.getTimezoneOffset()!==H4&&s.setTime(s.getTime()+(s.getTimezoneOffset()-H4)*6e4),s}function J9(e){var s=0,a=0,r=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(a=1,i>3&&(r=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":a*=24;case"H":a*=60;case"M":if(r)a*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=a*parseInt(n[i],10)}return s}var V4=new Date("2017-02-19T19:06:09.000Z"),d8=isNaN(V4.getFullYear())?new Date("2/19/17"):V4,Y9=d8.getFullYear()==2017;function ba(e,s){var a=new Date(e);if(Y9)return s>0?a.setTime(a.getTime()+a.getTimezoneOffset()*60*1e3):s<0&&a.setTime(a.getTime()-a.getTimezoneOffset()*60*1e3),a;if(e instanceof Date)return e;if(d8.getFullYear()==1917&&!isNaN(a.getFullYear())){var r=a.getFullYear();return e.indexOf(""+r)>-1||a.setFullYear(a.getFullYear()+100),a}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Xc(e,s){if(cs&&Buffer.isBuffer(e)){if(s){if(e[0]==255&&e[1]==254)return Qi(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Qi(YM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(e[0]==255&&e[1]==254)return Qi(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Qi(new TextDecoder("utf-16be").decode(e.slice(2)))}var a={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return a[i]||i})}catch{}for(var r=[],n=0;n!=e.length;++n)r.push(String.fromCharCode(e[n]));return r.join("")}function va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=va(e[a]));return s}function Ia(e,s){for(var a="";a.length<s;)a+=e;return a}function Ri(e){var s=Number(e);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(e))return s;var a=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return a*=100,""});return!isNaN(s=Number(r))||(r=r.replace(/[(](.*)[)]/,function(n,i){return a=-a,i}),!isNaN(s=Number(r)))?s/a:s}var X9=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ru(e){var s=new Date(e),a=new Date(NaN),r=s.getYear(),n=s.getMonth(),i=s.getDate();if(isNaN(i))return a;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&X9.indexOf(l)==-1)return a}else if(l.match(/[a-z]/))return a;return r<0||r>8099?a:(n>0||i>1)&&r!=101?s:e.match(/[^-0-9:,\/\\]/)?a:s}var Z9=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(a,r,n){if(e||typeof r=="string")return a.split(r);for(var i=a.split(r),l=[i[0]],o=1;o<i.length;++o)l.push(n),l.push(i[o]);return l}})();function u8(e){return e?e.content&&e.type?Xc(e.content,!0):e.data?km(e.data):e.asNodeBuffer&&cs?km(e.asNodeBuffer().toString("binary")):e.asBinary?km(e.asBinary()):e._data&&e._data.getContent?km(Xc(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function m8(e){if(!e)return null;if(e.data)return R4(e.data);if(e.asNodeBuffer&&cs)return e.asNodeBuffer();if(e._data&&e._data.getContent){var s=e._data.getContent();return typeof s=="string"?R4(s):Array.prototype.slice.call(s)}return e.content&&e.type?e.content:null}function eH(e){return e&&e.name.slice(-4)===".bin"?m8(e):u8(e)}function ii(e,s){for(var a=e.FullPaths||Ma(e.files),r=s.toLowerCase().replace(/[\/]/g,"\\"),n=r.replace(/\\/g,"/"),i=0;i<a.length;++i){var l=a[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==l||n==l)return e.files?e.files[a[i]]:e.FileIndex[i]}return null}function wA(e,s){var a=ii(e,s);if(a==null)throw new Error("Cannot find file "+s+" in zip");return a}function Ya(e,s,a){if(!a)return eH(wA(e,s));if(!s)return null;try{return Ya(e,s)}catch{return null}}function Pn(e,s,a){if(!a)return u8(wA(e,s));if(!s)return null;try{return Pn(e,s)}catch{return null}}function tH(e,s,a){return m8(wA(e,s))}function G4(e){for(var s=e.FullPaths||Ma(e.files),a=[],r=0;r<s.length;++r)s[r].slice(-1)!="/"&&a.push(s[r].replace(/^Root Entry[\/]/,""));return a.sort()}function ns(e,s,a){if(e.FullPaths){if(typeof a=="string"){var r;return cs?r=Gl(a):r=v9(a),It.utils.cfb_add(e,s,r)}It.utils.cfb_add(e,s,a)}else e.file(s,a)}function SA(){return It.utils.cfb_new()}function f8(e,s){switch(s.type){case"base64":return It.read(e,{type:"base64"});case"binary":return It.read(e,{type:"binary"});case"buffer":case"array":return It.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Im(e,s){if(e.charAt(0)=="/")return e.slice(1);var a=s.split("/");s.slice(-1)!="/"&&a.pop();for(var r=e.split("/");r.length!==0;){var n=r.shift();n===".."?a.pop():n!=="."&&a.push(n)}return a.join("/")}var Ha=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,sH=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,W4=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,aH=/<[^>]*>/g,Jr=Ha.match(W4)?W4:aH,rH=/<\w*:/,nH=/<(\/?)\w+:/;function Wt(e,s,a){for(var r={},n=0,i=0;n!==e.length&&!((i=e.charCodeAt(n))===32||i===10||i===13);++n);if(s||(r[0]=e.slice(0,n)),n===e.length)return r;var l=e.match(sH),o=0,d="",u=0,h="",f="",x=1;if(l)for(u=0;u!=l.length;++u){for(f=l[u],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(h=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(x=(n=f.charCodeAt(i+1))==34||n==39?1:0,d=f.slice(i+1+x,f.length-x),o=0;o!=h.length&&h.charCodeAt(o)!==58;++o);if(o===h.length)h.indexOf("_")>0&&(h=h.slice(0,h.indexOf("_"))),r[h]=d,r[h.toLowerCase()]=d;else{var g=(o===5&&h.slice(0,5)==="xmlns"?"xmlns":"")+h.slice(o+1);if(r[g]&&h.slice(o-3,o)=="ext")continue;r[g]=d,r[g.toLowerCase()]=d}}return r}function nl(e){return e.replace(nH,"<$1")}var h8={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},jA=Qg(h8),As=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function a(r){var n=r+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(e,function(o,d){return h8[o]||String.fromCharCode(parseInt(d,o.indexOf("x")>-1?16:10))||o}).replace(s,function(o,d){return String.fromCharCode(parseInt(d,16))});var l=n.indexOf("]]>");return a(n.slice(0,i))+n.slice(i+9,l)+a(n.slice(l+3))}})(),AA=/[&<>'"]/g,iH=/[\u0000-\u0008\u000b-\u001f]/g;function Ys(e){var s=e+"";return s.replace(AA,function(a){return jA[a]}).replace(iH,function(a){return"_x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Q4(e){return Ys(e).replace(/ /g,"_x0020_")}var x8=/[\u0000-\u001f]/g;function EA(e){var s=e+"";return s.replace(AA,function(a){return jA[a]}).replace(/\n/g,"<br/>").replace(x8,function(a){return"&#x"+("000"+a.charCodeAt(0).toString(16)).slice(-4)+";"})}function lH(e){var s=e+"";return s.replace(AA,function(a){return jA[a]}).replace(x8,function(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"})}var K4=(function(){var e=/&#(\d+);/g;function s(a,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(e,s)}})();function oH(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function pa(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function e1(e){for(var s="",a=0,r=0,n=0,i=0,l=0,o=0;a<e.length;){if(r=e.charCodeAt(a++),r<128){s+=String.fromCharCode(r);continue}if(n=e.charCodeAt(a++),r>191&&r<224){l=(r&31)<<6,l|=n&63,s+=String.fromCharCode(l);continue}if(i=e.charCodeAt(a++),r<240){s+=String.fromCharCode((r&15)<<12|(n&63)<<6|i&63);continue}l=e.charCodeAt(a++),o=((r&7)<<18|(n&63)<<12|(i&63)<<6|l&63)-65536,s+=String.fromCharCode(55296+(o>>>10&1023)),s+=String.fromCharCode(56320+(o&1023))}return s}function J4(e){var s=Bo(2*e.length),a,r,n=1,i=0,l=0,o;for(r=0;r<e.length;r+=n)n=1,(o=e.charCodeAt(r))<128?a=o:o<224?(a=(o&31)*64+(e.charCodeAt(r+1)&63),n=2):o<240?(a=(o&15)*4096+(e.charCodeAt(r+1)&63)*64+(e.charCodeAt(r+2)&63),n=3):(n=4,a=(o&7)*262144+(e.charCodeAt(r+1)&63)*4096+(e.charCodeAt(r+2)&63)*64+(e.charCodeAt(r+3)&63),a-=65536,l=55296+(a>>>10&1023),a=56320+(a&1023)),l!==0&&(s[i++]=l&255,s[i++]=l>>>8,l=0),s[i++]=a%256,s[i++]=a>>>8;return s.slice(0,i).toString("ucs2")}function Y4(e){return Gl(e,"binary").toString("utf8")}var Fx="foo bar baz",ia=cs&&(Y4(Fx)==e1(Fx)&&Y4||J4(Fx)==e1(Fx)&&J4)||e1,Qi=cs?function(e){return Gl(e,"utf8").toString("binary")}:function(e){for(var s=[],a=0,r=0,n=0;a<e.length;)switch(r=e.charCodeAt(a++),!0){case r<128:s.push(String.fromCharCode(r));break;case r<2048:s.push(String.fromCharCode(192+(r>>6))),s.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,n=e.charCodeAt(a++)-56320+(r<<10),s.push(String.fromCharCode(240+(n>>18&7))),s.push(String.fromCharCode(144+(n>>12&63))),s.push(String.fromCharCode(128+(n>>6&63))),s.push(String.fromCharCode(128+(n&63)));break;default:s.push(String.fromCharCode(224+(r>>12))),s.push(String.fromCharCode(128+(r>>6&63))),s.push(String.fromCharCode(128+(r&63)))}return s.join("")},of=(function(){var e={};return function(a,r){var n=a+"|"+(r||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+a+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+a+">",r||"")}})(),p8=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(a){for(var r=a.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}})(),cH=(function(){var e={};return function(a){return e[a]!==void 0?e[a]:e[a]=new RegExp("<(?:vt:)?"+a+">([\\s\\S]*?)</(?:vt:)?"+a+">","g")}})(),dH=/<\/?(?:vt:)?variant>/g,uH=/<(?:vt:)([^>]*)>([\s\S]*)</;function X4(e,s){var a=Wt(e),r=e.match(cH(a.baseType))||[],n=[];if(r.length!=a.size){if(s.WTF)throw new Error("unexpected vector length "+r.length+" != "+a.size);return n}return r.forEach(function(i){var l=i.replace(dH,"").match(uH);l&&n.push({v:ia(l[2]),t:l[1]})}),n}var g8=/(^\s|\s$|\n)/;function _r(e,s){return"<"+e+(s.match(g8)?' xml:space="preserve"':"")+">"+s+"</"+e+">"}function cf(e){return Ma(e).map(function(s){return" "+s+'="'+e[s]+'"'}).join("")}function ft(e,s,a){return"<"+e+(a!=null?cf(a):"")+(s!=null?(s.match(g8)?' xml:space="preserve"':"")+">"+s+"</"+e:"/")+">"}function Tj(e,s){try{return e.toISOString().replace(/\.\d*/,"")}catch(a){if(s)throw a}return""}function mH(e,s){switch(typeof e){case"string":var a=ft("vt:lpwstr",Ys(e));return a=a.replace(/&quot;/g,"_x0022_"),a;case"number":return ft((e|0)==e?"vt:i4":"vt:r8",Ys(String(e)));case"boolean":return ft("vt:bool",e?"true":"false")}if(e instanceof Date)return ft("vt:filetime",Tj(e));throw new Error("Unable to serialize "+e)}function CA(e){if(cs&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ia(Xo(vA(e)));throw new Error("Bad input format: expected Buffer or string")}var df=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ir={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},md=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],On={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function fH(e,s){for(var a=1-2*(e[s+7]>>>7),r=((e[s+7]&127)<<4)+(e[s+6]>>>4&15),n=e[s+6]&15,i=5;i>=0;--i)n=n*256+e[s+i];return r==2047?n==0?a*(1/0):NaN:(r==0?r=-1022:(r-=1023,n+=Math.pow(2,52)),a*Math.pow(2,r-52)*n)}function hH(e,s,a){var r=(s<0||1/s==-1/0?1:0)<<7,n=0,i=0,l=r?-s:s;isFinite(l)?l==0?n=i=0:(n=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(s)?26985:0);for(var o=0;o<=5;++o,i/=256)e[a+o]=i&255;e[a+6]=(n&15)<<4|i&15,e[a+7]=n>>4|r}var Z4=function(e){for(var s=[],a=10240,r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,i=e[0][r].length;n<i;n+=a)s.push.apply(s,e[0][r].slice(n,n+a));return s},eO=cs?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(s){return Buffer.isBuffer(s)?s:Gl(s)})):Z4(e)}:Z4,tO=function(e,s,a){for(var r=[],n=s;n<a;n+=2)r.push(String.fromCharCode(_l(e,n)));return r.join("").replace(an,"")},TA=cs?function(e,s,a){return Buffer.isBuffer(e)?e.toString("utf16le",s,a).replace(an,""):tO(e,s,a)}:tO,sO=function(e,s,a){for(var r=[],n=s;n<s+a;++n)r.push(("0"+e[n].toString(16)).slice(-2));return r.join("")},b8=cs?function(e,s,a){return Buffer.isBuffer(e)?e.toString("hex",s,s+a):sO(e,s,a)}:sO,aO=function(e,s,a){for(var r=[],n=s;n<a;n++)r.push(String.fromCharCode(pu(e,n)));return r.join("")},ih=cs?function(s,a,r){return Buffer.isBuffer(s)?s.toString("utf8",a,r):aO(s,a,r)}:aO,v8=function(e,s){var a=In(e,s);return a>0?ih(e,s+4,s+4+a-1):""},y8=v8,N8=function(e,s){var a=In(e,s);return a>0?ih(e,s+4,s+4+a-1):""},w8=N8,S8=function(e,s){var a=2*In(e,s);return a>0?ih(e,s+4,s+4+a-1):""},j8=S8,A8=function(s,a){var r=In(s,a);return r>0?TA(s,a+4,a+4+r):""},E8=A8,C8=function(e,s){var a=In(e,s);return a>0?ih(e,s+4,s+4+a):""},T8=C8,_8=function(e,s){return fH(e,s)},Rp=_8,_A=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};cs&&(y8=function(s,a){if(!Buffer.isBuffer(s))return v8(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},w8=function(s,a){if(!Buffer.isBuffer(s))return N8(s,a);var r=s.readUInt32LE(a);return r>0?s.toString("utf8",a+4,a+4+r-1):""},j8=function(s,a){if(!Buffer.isBuffer(s))return S8(s,a);var r=2*s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r-1)},E8=function(s,a){if(!Buffer.isBuffer(s))return A8(s,a);var r=s.readUInt32LE(a);return s.toString("utf16le",a+4,a+4+r)},T8=function(s,a){if(!Buffer.isBuffer(s))return C8(s,a);var r=s.readUInt32LE(a);return s.toString("utf8",a+4,a+4+r)},Rp=function(s,a){return Buffer.isBuffer(s)?s.readDoubleLE(a):_8(s,a)},_A=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var pu=function(e,s){return e[s]},_l=function(e,s){return e[s+1]*256+e[s]},xH=function(e,s){var a=e[s+1]*256+e[s];return a<32768?a:(65535-a+1)*-1},In=function(e,s){return e[s+3]*(1<<24)+(e[s+2]<<16)+(e[s+1]<<8)+e[s]},Rc=function(e,s){return e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]},pH=function(e,s){return e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]};function zm(e,s){var a="",r,n,i=[],l,o,d,u;switch(s){case"dbcs":if(u=this.l,cs&&Buffer.isBuffer(this))a=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)a+=String.fromCharCode(_l(this,u)),u+=2;e*=2;break;case"utf8":a=ih(this,this.l,this.l+e);break;case"utf16le":e*=2,a=TA(this,this.l,this.l+e);break;case"wstr":return zm.call(this,e,"dbcs");case"lpstr-ansi":a=y8(this,this.l),e=4+In(this,this.l);break;case"lpstr-cp":a=w8(this,this.l),e=4+In(this,this.l);break;case"lpwstr":a=j8(this,this.l),e=4+2*In(this,this.l);break;case"lpp4":e=4+In(this,this.l),a=E8(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+In(this,this.l),a=T8(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,a="";(l=pu(this,this.l+e++))!==0;)i.push(Lx(l));a=i.join("");break;case"_wstr":for(e=0,a="";(l=_l(this,this.l+e))!==0;)i.push(Lx(l)),e+=2;e+=2,a=i.join("");break;case"dbcs-cont":for(a="",u=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return l=pu(this,u),this.l=u+1,o=zm.call(this,e-d,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Lx(_l(this,u))),u+=2}a=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(a="",u=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(u)!==-1)return l=pu(this,u),this.l=u+1,o=zm.call(this,e-d,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Lx(pu(this,u))),u+=1}a=i.join("");break;default:switch(e){case 1:return r=pu(this,this.l),this.l++,r;case 2:return r=(s==="i"?xH:_l)(this,this.l),this.l+=2,r;case 4:case-4:return s==="i"||(this[this.l+3]&128)===0?(r=(e>0?Rc:pH)(this,this.l),this.l+=4,r):(n=In(this,this.l),this.l+=4,n);case 8:case-8:if(s==="f")return e==8?n=Rp(this,this.l):n=Rp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:a=b8(this,this.l,e);break}}return this.l+=e,a}var gH=function(e,s,a){e[a]=s&255,e[a+1]=s>>>8&255,e[a+2]=s>>>16&255,e[a+3]=s>>>24&255},bH=function(e,s,a){e[a]=s&255,e[a+1]=s>>8&255,e[a+2]=s>>16&255,e[a+3]=s>>24&255},vH=function(e,s,a){e[a]=s&255,e[a+1]=s>>>8&255};function yH(e,s,a){var r=0,n=0;if(a==="dbcs"){for(n=0;n!=s.length;++n)vH(this,s.charCodeAt(n),this.l+2*n);r=2*s.length}else if(a==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=s.length;++n)this[this.l+n]=s.charCodeAt(n)&255;r=s.length}else if(a==="hex"){for(;n<e;++n)this[this.l++]=parseInt(s.slice(2*n,2*n+2),16)||0;return this}else if(a==="utf16le"){var i=Math.min(this.l+e,this.length);for(n=0;n<Math.min(s.length,e);++n){var l=s.charCodeAt(n);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:r=1,this[this.l]=s&255;break;case 2:r=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:r=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:r=4,gH(this,s,this.l);break;case 8:if(r=8,a==="f"){hH(this,s,this.l);break}case 16:break;case-4:r=4,bH(this,s,this.l);break}return this.l+=r,this}function k8(e,s){var a=b8(this,this.l,e.length>>1);if(a!==e)throw new Error(s+"Expected "+e+" saw "+a);this.l+=e.length>>1}function Tr(e,s){e.l=s,e.read_shift=zm,e.chk=k8,e.write_shift=yH}function Kr(e,s){e.l+=s}function Ke(e){var s=Bo(e);return Tr(s,0),s}function Wl(e,s,a){if(e){var r,n,i;Tr(e,e.l||0);for(var l=e.length,o=0,d=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=pf[o]||pf[65535];for(r=e.read_shift(1),i=r&127,n=1;n<4&&r&128;++n)i+=((r=e.read_shift(1))&127)<<7*n;d=e.l+i;var h=u.f&&u.f(e,i,a);if(e.l=d,s(h,u,o))return}}}function hn(){var e=[],s=cs?256:2048,a=function(u){var h=Ke(u);return Tr(h,0),h},r=a(s),n=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&e.push(r),r=null)},i=function(u){return r&&u<r.length-r.l?r:(n(),r=a(Math.max(u+1,s)))},l=function(){return n(),pr(e)},o=function(u){n(),r=u,r.l==null&&(r.l=r.length),i(s)};return{next:i,push:o,end:l,_bufs:e}}function st(e,s,a,r){var n=+s,i;if(!isNaN(n)){r||(r=pf[n].p||(a||[]).length||0),i=1+(n>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var l=e.next(i);n<=127?l.write_shift(1,n):(l.write_shift(1,(n&127)+128),l.write_shift(1,n>>7));for(var o=0;o!=4;++o)if(r>=128)l.write_shift(1,(r&127)+128),r>>=7;else{l.write_shift(1,r);break}r>0&&_A(a)&&e.push(a)}}function Bm(e,s,a){var r=va(e);if(s.s?(r.cRel&&(r.c+=s.s.c),r.rRel&&(r.r+=s.s.r)):(r.cRel&&(r.c+=s.c),r.rRel&&(r.r+=s.r)),!a||a.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function rO(e,s,a){var r=va(e);return r.s=Bm(r.s,s.s,a),r.e=Bm(r.e,s.s,a),r}function $m(e,s){if(e.cRel&&e.c<0)for(e=va(e);e.c<0;)e.c+=s>8?16384:256;if(e.rRel&&e.r<0)for(e=va(e);e.r<0;)e.r+=s>8?1048576:s>5?65536:16384;var a=Vt(e);return!e.cRel&&e.cRel!=null&&(a=SH(a)),!e.rRel&&e.rRel!=null&&(a=NH(a)),a}function t1(e,s){return e.s.r==0&&!e.s.rRel&&e.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ta(e.s.c)+":"+(e.e.cRel?"":"$")+Ta(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(s.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+qa(e.s.r)+":"+(e.e.rRel?"":"$")+qa(e.e.r):$m(e.s,s.biff)+":"+$m(e.e,s.biff)}function kA(e){return parseInt(wH(e),10)-1}function qa(e){return""+(e+1)}function NH(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function wH(e){return e.replace(/\$(\d+)$/,"$1")}function OA(e){for(var s=jH(e),a=0,r=0;r!==s.length;++r)a=26*a+s.charCodeAt(r)-64;return a-1}function Ta(e){if(e<0)throw new Error("invalid column "+e);var s="";for(++e;e;e=Math.floor((e-1)/26))s=String.fromCharCode((e-1)%26+65)+s;return s}function SH(e){return e.replace(/^([A-Z])/,"$$$1")}function jH(e){return e.replace(/^\$([A-Z])/,"$1")}function AH(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function _a(e){for(var s=0,a=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=48&&n<=57?s=10*s+(n-48):n>=65&&n<=90&&(a=26*a+(n-64))}return{c:a-1,r:s-1}}function Vt(e){for(var s=e.c+1,a="";s;s=(s-1)/26|0)a=String.fromCharCode((s-1)%26+65)+a;return a+(e.r+1)}function gn(e){var s=e.indexOf(":");return s==-1?{s:_a(e),e:_a(e)}:{s:_a(e.slice(0,s)),e:_a(e.slice(s+1))}}function ss(e,s){return typeof s>"u"||typeof s=="number"?ss(e.s,e.e):(typeof e!="string"&&(e=Vt(e)),typeof s!="string"&&(s=Vt(s)),e==s?e:e+":"+s)}function Cs(e){var s={s:{c:0,r:0},e:{c:0,r:0}},a=0,r=0,n=0,i=e.length;for(a=0;r<i&&!((n=e.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.s.c=--a,a=0;r<i&&!((n=e.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;if(s.s.r=--a,r===i||n!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++r,a=0;r!=i&&!((n=e.charCodeAt(r)-64)<1||n>26);++r)a=26*a+n;for(s.e.c=--a,a=0;r!=i&&!((n=e.charCodeAt(r)-48)<0||n>9);++r)a=10*a+n;return s.e.r=--a,s}function nO(e,s){var a=e.t=="d"&&s instanceof Date;if(e.z!=null)try{return e.w=hi(e.z,a?dr(s):s)}catch{}try{return e.w=hi((e.XF||{}).numFmtId||(a?14:0),a?dr(s):s)}catch{return""+s}}function Bl(e,s,a){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&a&&a.dateNF&&(e.z=a.dateNF),e.t=="e"?Ql[e.v]||e.v:s==null?nO(e,e.v):nO(e,s))}function Zo(e,s){var a=s&&s.sheet?s.sheet:"Sheet1",r={};return r[a]=e,{SheetNames:[a],Sheets:r}}function O8(e,s,a){var r=a||{},n=e?Array.isArray(e):r.dense,i=e||(n?[]:{}),l=0,o=0;if(i&&r.origin!=null){if(typeof r.origin=="number")l=r.origin;else{var d=typeof r.origin=="string"?_a(r.origin):r.origin;l=d.r,o=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var h=Cs(i["!ref"]);u.s.c=h.s.c,u.s.r=h.s.r,u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),l==-1&&(u.e.r=l=h.e.r+1)}for(var f=0;f!=s.length;++f)if(s[f]){if(!Array.isArray(s[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=s[f].length;++x)if(!(typeof s[f][x]>"u")){var g={v:s[f][x]},v=l+f,b=o+x;if(u.s.r>v&&(u.s.r=v),u.s.c>b&&(u.s.c=b),u.e.r<v&&(u.e.r=v),u.e.c<b&&(u.e.c=b),s[f][x]&&typeof s[f][x]=="object"&&!Array.isArray(s[f][x])&&!(s[f][x]instanceof Date))g=s[f][x];else if(Array.isArray(g.v)&&(g.f=s[f][x][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||Ht[14],r.cellDates?(g.t="d",g.w=hi(g.z,dr(g.v))):(g.t="n",g.v=dr(g.v),g.w=hi(g.z,g.v))):g.t="s";if(n)i[v]||(i[v]=[]),i[v][b]&&i[v][b].z&&(g.z=i[v][b].z),i[v][b]=g;else{var y=Vt({c:b,r:v});i[y]&&i[y].z&&(g.z=i[y].z),i[y]=g}}}return u.s.c<1e7&&(i["!ref"]=ss(u)),i}function d0(e,s){return O8(null,e,s)}function EH(e){return e.read_shift(4,"i")}function Pi(e,s){return s||(s=Ke(4)),s.write_shift(4,e),s}function Qr(e){var s=e.read_shift(4);return s===0?"":e.read_shift(s,"dbcs")}function br(e,s){var a=!1;return s==null&&(a=!0,s=Ke(4+2*e.length)),s.write_shift(4,e.length),e.length>0&&s.write_shift(0,e,"dbcs"),a?s.slice(0,s.l):s}function CH(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function TH(e,s){return s||(s=Ke(4)),s.write_shift(2,0),s.write_shift(2,0),s}function IA(e,s){var a=e.l,r=e.read_shift(1),n=Qr(e),i=[],l={t:n,h:n};if((r&1)!==0){for(var o=e.read_shift(4),d=0;d!=o;++d)i.push(CH(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=a+s,l}function _H(e,s){var a=!1;return s==null&&(a=!0,s=Ke(15+4*e.t.length)),s.write_shift(1,0),br(e.t,s),a?s.slice(0,s.l):s}var kH=IA;function OH(e,s){var a=!1;return s==null&&(a=!0,s=Ke(23+4*e.t.length)),s.write_shift(1,1),br(e.t,s),s.write_shift(4,1),TH({},s),a?s.slice(0,s.l):s}function vi(e){var s=e.read_shift(4),a=e.read_shift(2);return a+=e.read_shift(1)<<16,e.l++,{c:s,iStyleRef:a}}function fd(e,s){return s==null&&(s=Ke(8)),s.write_shift(-4,e.c),s.write_shift(3,e.iStyleRef||e.s),s.write_shift(1,0),s}function hd(e){var s=e.read_shift(2);return s+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:s}}function xd(e,s){return s==null&&(s=Ke(4)),s.write_shift(3,e.iStyleRef||e.s),s.write_shift(1,0),s}var IH=Qr,I8=br;function RA(e){var s=e.read_shift(4);return s===0||s===4294967295?"":e.read_shift(s,"dbcs")}function Pp(e,s){var a=!1;return s==null&&(a=!0,s=Ke(127)),s.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&s.write_shift(0,e,"dbcs"),a?s.slice(0,s.l):s}var RH=Qr,_j=RA,PA=Pp;function DA(e){var s=e.slice(e.l,e.l+4),a=s[0]&1,r=s[0]&2;e.l+=4;var n=r===0?Rp([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):Rc(s,0)>>2;return a?n/100:n}function R8(e,s){s==null&&(s=Ke(4));var a=0,r=0,n=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?r=1:n==(n|0)&&n>=-536870912&&n<1<<29&&(r=1,a=1),r)s.write_shift(-4,((a?n:e)<<2)+(a+2));else throw new Error("unsupported RkNumber "+e)}function P8(e){var s={s:{},e:{}};return s.s.r=e.read_shift(4),s.e.r=e.read_shift(4),s.s.c=e.read_shift(4),s.e.c=e.read_shift(4),s}function PH(e,s){return s||(s=Ke(16)),s.write_shift(4,e.s.r),s.write_shift(4,e.e.r),s.write_shift(4,e.s.c),s.write_shift(4,e.e.c),s}var pd=P8,u0=PH;function Vr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Zc(e,s){return(s||Ke(8)).write_shift(8,e,"f")}function DH(e){var s={},a=e.read_shift(1),r=a>>>1,n=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),d=e.read_shift(1);switch(e.l++,r){case 0:s.auto=1;break;case 1:s.index=n;var u=zc[n];u&&(s.rgb=mf(u));break;case 2:s.rgb=mf([l,o,d]);break;case 3:s.theme=n;break}return i!=0&&(s.tint=i>0?i/32767:i/32768),s}function Dp(e,s){if(s||(s=Ke(8)),!e||e.auto)return s.write_shift(4,0),s.write_shift(4,0),s;e.index!=null?(s.write_shift(1,2),s.write_shift(1,e.index)):e.theme!=null?(s.write_shift(1,6),s.write_shift(1,e.theme)):(s.write_shift(1,5),s.write_shift(1,0));var a=e.tint||0;if(a>0?a*=32767:a<0&&(a*=32768),s.write_shift(2,a),!e.rgb||e.theme!=null)s.write_shift(2,0),s.write_shift(1,0),s.write_shift(1,0);else{var r=e.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),s.write_shift(1,parseInt(r.slice(0,2),16)),s.write_shift(1,parseInt(r.slice(2,4),16)),s.write_shift(1,parseInt(r.slice(4,6),16)),s.write_shift(1,255)}return s}function MH(e){var s=e.read_shift(1);e.l++;var a={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return a}function LH(e,s){s||(s=Ke(2));var a=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return s.write_shift(1,a),s.write_shift(1,0),s}function D8(e,s){var a={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return a[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,s==1?"lpstr":"lpwstr")}function FH(e){return D8(e,1)}function UH(e){return D8(e,2)}var MA=2,mn=3,Ux=11,iO=12,Mp=19,zx=64,zH=65,BH=71,$H=4108,qH=4126,hr=80,M8=81,HH=[hr,M8],kj={1:{n:"CodePage",t:MA},2:{n:"Category",t:hr},3:{n:"PresentationFormat",t:hr},4:{n:"ByteCount",t:mn},5:{n:"LineCount",t:mn},6:{n:"ParagraphCount",t:mn},7:{n:"SlideCount",t:mn},8:{n:"NoteCount",t:mn},9:{n:"HiddenCount",t:mn},10:{n:"MultimediaClipCount",t:mn},11:{n:"ScaleCrop",t:Ux},12:{n:"HeadingPairs",t:$H},13:{n:"TitlesOfParts",t:qH},14:{n:"Manager",t:hr},15:{n:"Company",t:hr},16:{n:"LinksUpToDate",t:Ux},17:{n:"CharacterCount",t:mn},19:{n:"SharedDoc",t:Ux},22:{n:"HyperlinksChanged",t:Ux},23:{n:"AppVersion",t:mn,p:"version"},24:{n:"DigSig",t:zH},26:{n:"ContentType",t:hr},27:{n:"ContentStatus",t:hr},28:{n:"Language",t:hr},29:{n:"Version",t:hr},255:{},2147483648:{n:"Locale",t:Mp},2147483651:{n:"Behavior",t:Mp},1919054434:{}},Oj={1:{n:"CodePage",t:MA},2:{n:"Title",t:hr},3:{n:"Subject",t:hr},4:{n:"Author",t:hr},5:{n:"Keywords",t:hr},6:{n:"Comments",t:hr},7:{n:"Template",t:hr},8:{n:"LastAuthor",t:hr},9:{n:"RevNumber",t:hr},10:{n:"EditTime",t:zx},11:{n:"LastPrinted",t:zx},12:{n:"CreatedDate",t:zx},13:{n:"ModifiedDate",t:zx},14:{n:"PageCount",t:mn},15:{n:"WordCount",t:mn},16:{n:"CharCount",t:mn},17:{n:"Thumbnail",t:BH},18:{n:"Application",t:hr},19:{n:"DocSecurity",t:mn},255:{},2147483648:{n:"Locale",t:Mp},2147483651:{n:"Behavior",t:Mp},1919054434:{}},lO={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},VH=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function GH(e){return e.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var WH=GH([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),zc=va(WH),Ql={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},L8={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Ij={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Bx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function LA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function QH(e){var s=LA();if(!e||!e.match)return s;var a={};if((e.match(Jr)||[]).forEach(function(r){var n=Wt(r);switch(n[0].replace(rH,"<")){case"<?xml":break;case"<Types":s.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":a[n.Extension]=n.ContentType;break;case"<Override":s[Ij[n.ContentType]]!==void 0&&s[Ij[n.ContentType]].push(n.PartName);break}}),s.xmlns!==ir.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=a,delete s.calcchains,s}function F8(e,s){var a=Q9(Ij),r=[],n;r[r.length]=Ha,r[r.length]=ft("Types",null,{xmlns:ir.CT,"xmlns:xsd":ir.xsd,"xmlns:xsi":ir.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(d){return ft("Default",null,{Extension:d[0],ContentType:d[1]})}));var i=function(d){e[d]&&e[d].length>0&&(n=e[d][0],r[r.length]=ft("Override",null,{PartName:(n[0]=="/"?"":"/")+n,ContentType:Bx[d][s.bookType]||Bx[d].xlsx}))},l=function(d){(e[d]||[]).forEach(function(u){r[r.length]=ft("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Bx[d][s.bookType]||Bx[d].xlsx})})},o=function(d){(e[d]||[]).forEach(function(u){r[r.length]=ft("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:a[d][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var ms={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function uf(e){var s=e.lastIndexOf("/");return e.slice(0,s+1)+"_rels/"+e.slice(s+1)+".rels"}function qm(e,s){var a={"!id":{}};if(!e)return a;s.charAt(0)!=="/"&&(s="/"+s);var r={};return(e.match(Jr)||[]).forEach(function(n){var i=Wt(n);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:Im(i.Target,s);a[o]=l,r[i.Id]=l}}),a["!id"]=r,a}function ju(e){var s=[Ha,ft("Relationships",null,{xmlns:ir.RELS})];return Ma(e["!id"]).forEach(function(a){s[s.length]=ft("Relationship",null,e["!id"][a])}),s.length>2&&(s[s.length]="</Relationships>",s[1]=s[1].replace("/>",">")),s.join("")}function Js(e,s,a,r,n,i){if(n||(n={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),s<0)for(s=e["!idx"];e["!id"]["rId"+s];++s);if(e["!idx"]=s+1,n.Id="rId"+s,n.Type=r,n.Target=a,[ms.HLINK,ms.XPATH,ms.XMISS].indexOf(n.Type)>-1&&(n.TargetMode="External"),e["!id"][n.Id])throw new Error("Cannot rewrite rId "+s);return e["!id"][n.Id]=n,e[("/"+n.Target).replace("//","/")]=n,s}var KH="application/vnd.oasis.opendocument.spreadsheet";function JH(e,s){for(var a=CA(e),r,n;r=df.exec(a);)switch(r[3]){case"manifest":break;case"file-entry":if(n=Wt(r[0],!1),n.path=="/"&&n.type!==KH)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw r}}function YH(e){var s=[Ha];s.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),s.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var a=0;a<e.length;++a)s.push('  <manifest:file-entry manifest:full-path="'+e[a][0]+'" manifest:media-type="'+e[a][1]+`"/>
`);return s.push("</manifest:manifest>"),s.join("")}function oO(e,s,a){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(a||"odf")+"#"+s+`"/>
`,`  </rdf:Description>
`].join("")}function XH(e,s){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+s+`"/>
`,`  </rdf:Description>
`].join("")}function ZH(e){var s=[Ha];s.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var a=0;a!=e.length;++a)s.push(oO(e[a][0],e[a][1])),s.push(XH("",e[a][0]));return s.push(oO("","Document","pkg")),s.push("</rdf:RDF>"),s.join("")}function U8(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Tp.version+"</meta:generator></office:meta></office:document-meta>"}var ui=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],eV=(function(){for(var e=new Array(ui.length),s=0;s<ui.length;++s){var a=ui[s],r="(?:"+a[0].slice(0,a[0].indexOf(":"))+":)"+a[0].slice(a[0].indexOf(":")+1);e[s]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return e})();function z8(e){var s={};e=ia(e);for(var a=0;a<ui.length;++a){var r=ui[a],n=e.match(eV[a]);n!=null&&n.length>0&&(s[r[1]]=As(n[1])),r[2]==="date"&&s[r[1]]&&(s[r[1]]=ba(s[r[1]]))}return s}function s1(e,s,a,r,n){n[e]!=null||s==null||s===""||(n[e]=s,s=Ys(s),r[r.length]=a?ft(e,s,a):_r(e,s))}function B8(e,s){var a=s||{},r=[Ha,ft("cp:coreProperties",null,{"xmlns:cp":ir.CORE_PROPS,"xmlns:dc":ir.dc,"xmlns:dcterms":ir.dcterms,"xmlns:dcmitype":ir.dcmitype,"xmlns:xsi":ir.xsi})],n={};if(!e&&!a.Props)return r.join("");e&&(e.CreatedDate!=null&&s1("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Tj(e.CreatedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,n),e.ModifiedDate!=null&&s1("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Tj(e.ModifiedDate,a.WTF),{"xsi:type":"dcterms:W3CDTF"},r,n));for(var i=0;i!=ui.length;++i){var l=ui[i],o=a.Props&&a.Props[l[1]]!=null?a.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&s1(l[0],o,null,r,n)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Bc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],$8=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function q8(e,s,a,r){var n=[];if(typeof e=="string")n=X4(e,r);else for(var i=0;i<e.length;++i)n=n.concat(e[i].map(function(h){return{v:h}}));var l=typeof s=="string"?X4(s,r).map(function(h){return h.v}):s,o=0,d=0;if(l.length>0)for(var u=0;u!==n.length;u+=2){switch(d=+n[u+1].v,n[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":a.Worksheets=d,a.SheetNames=l.slice(o,o+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":a.NamedRanges=d,a.DefinedNames=l.slice(o,o+d);break;case"Charts":case"Diagramme":a.Chartsheets=d,a.ChartNames=l.slice(o,o+d);break}o+=d}}function tV(e,s,a){var r={};return s||(s={}),e=ia(e),Bc.forEach(function(n){var i=(e.match(of(n[0]))||[])[1];switch(n[2]){case"string":i&&(s[n[1]]=As(i));break;case"bool":s[n[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));l&&l.length>0&&(r[n[1]]=l[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&q8(r.HeadingPairs,r.TitlesOfParts,s,a),s}function H8(e){var s=[],a=ft;return e||(e={}),e.Application="SheetJS",s[s.length]=Ha,s[s.length]=ft("Properties",null,{xmlns:ir.EXT_PROPS,"xmlns:vt":ir.vt}),Bc.forEach(function(r){if(e[r[1]]!==void 0){var n;switch(r[2]){case"string":n=Ys(String(e[r[1]]));break;case"bool":n=e[r[1]]?"true":"false";break}n!==void 0&&(s[s.length]=a(r[0],n))}}),s[s.length]=a("HeadingPairs",a("vt:vector",a("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+a("vt:variant",a("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),s[s.length]=a("TitlesOfParts",a("vt:vector",e.SheetNames.map(function(r){return"<vt:lpstr>"+Ys(r)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var sV=/<[^>]+>[^<]*/g;function aV(e,s){var a={},r="",n=e.match(sV);if(n)for(var i=0;i!=n.length;++i){var l=n[i],o=Wt(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=As(o.name);break;case"</property>":r=null;break;default:if(l.indexOf("<vt:")===0){var d=l.split(">"),u=d[0].slice(4),h=d[1];switch(u){case"lpstr":case"bstr":case"lpwstr":a[r]=As(h);break;case"bool":a[r]=pa(h);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":a[r]=parseInt(h,10);break;case"r4":case"r8":case"decimal":a[r]=parseFloat(h);break;case"filetime":case"date":a[r]=ba(h);break;case"cy":case"error":a[r]=As(h);break;default:if(u.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",l,u,d)}}else if(l.slice(0,2)!=="</"){if(s.WTF)throw new Error(l)}}}return a}function V8(e){var s=[Ha,ft("Properties",null,{xmlns:ir.CUST_PROPS,"xmlns:vt":ir.vt})];if(!e)return s.join("");var a=1;return Ma(e).forEach(function(n){++a,s[s.length]=ft("property",mH(e[n]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:a,name:Ys(n)})}),s.length>2&&(s[s.length]="</Properties>",s[1]=s[1].replace("/>",">")),s.join("")}var Rj={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},a1;function rV(e,s,a){a1||(a1=Qg(Rj)),s=a1[s]||s,e[s]=a}function nV(e,s){var a=[];return Ma(Rj).map(function(r){for(var n=0;n<ui.length;++n)if(ui[n][1]==r)return ui[n];for(n=0;n<Bc.length;++n)if(Bc[n][1]==r)return Bc[n];throw r}).forEach(function(r){if(e[r[1]]!=null){var n=s&&s.Props&&s.Props[r[1]]!=null?s.Props[r[1]]:e[r[1]];switch(r[2]){case"date":n=new Date(n).toISOString().replace(/\.\d*Z/,"Z");break}typeof n=="number"?n=String(n):n===!0||n===!1?n=n?"1":"0":n instanceof Date&&(n=new Date(n).toISOString().replace(/\.\d*Z/,"")),a.push(_r(Rj[r[1]]||r[1],n))}}),ft("DocumentProperties",a.join(""),{xmlns:On.o})}function iV(e,s){var a=["Worksheets","SheetNames"],r="CustomDocumentProperties",n=[];return e&&Ma(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<ui.length;++l)if(i==ui[l][1])return;for(l=0;l<Bc.length;++l)if(i==Bc[l][1])return;for(l=0;l<a.length;++l)if(i==a[l])return;var o=e[i],d="string";typeof o=="number"?(d="float",o=String(o)):o===!0||o===!1?(d="boolean",o=o?"1":"0"):o=String(o),n.push(ft(Q4(i),o,{"dt:dt":d}))}}),s&&Ma(s).forEach(function(i){if(Object.prototype.hasOwnProperty.call(s,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=s[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),n.push(ft(Q4(i),l,{"dt:dt":o}))}}),"<"+r+' xmlns="'+On.o+'">'+n.join("")+"</"+r+">"}function FA(e){var s=e.read_shift(4),a=e.read_shift(4);return new Date((a/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function lV(e){var s=typeof e=="string"?new Date(Date.parse(e)):e,a=s.getTime()/1e3+11644473600,r=a%Math.pow(2,32),n=(a-r)/Math.pow(2,32);r*=1e7,n*=1e7;var i=r/Math.pow(2,32)|0;i>0&&(r=r%Math.pow(2,32),n+=i);var l=Ke(8);return l.write_shift(4,r),l.write_shift(4,n),l}function G8(e,s,a){var r=e.l,n=e.read_shift(0,"lpstr-cp");if(a)for(;e.l-r&3;)++e.l;return n}function W8(e,s,a){var r=e.read_shift(0,"lpwstr");return r}function Q8(e,s,a){return s===31?W8(e):G8(e,s,a)}function Pj(e,s,a){return Q8(e,s,a===!1?0:4)}function oV(e,s){if(!s)throw new Error("VtUnalignedString must have positive length");return Q8(e,s,0)}function cV(e){for(var s=e.read_shift(4),a=[],r=0;r!=s;++r){var n=e.l;a[r]=e.read_shift(0,"lpwstr").replace(an,""),e.l-n&2&&(e.l+=2)}return a}function dV(e){for(var s=e.read_shift(4),a=[],r=0;r!=s;++r)a[r]=e.read_shift(0,"lpstr-cp").replace(an,"");return a}function uV(e){var s=e.l,a=Lp(e,M8);e[e.l]==0&&e[e.l+1]==0&&e.l-s&2&&(e.l+=2);var r=Lp(e,mn);return[a,r]}function mV(e){for(var s=e.read_shift(4),a=[],r=0;r<s/2;++r)a.push(uV(e));return a}function cO(e,s){for(var a=e.read_shift(4),r={},n=0;n!=a;++n){var i=e.read_shift(4),l=e.read_shift(4);r[i]=e.read_shift(l,s===1200?"utf16le":"utf8").replace(an,"").replace(Om,"!"),s===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),r}function K8(e){var s=e.read_shift(4),a=e.slice(e.l,e.l+s);return e.l+=s,(s&3)>0&&(e.l+=4-(s&3)&3),a}function fV(e){var s={};return s.Size=e.read_shift(4),e.l+=s.Size+3-(s.Size-1)%4,s}function Lp(e,s,a){var r=e.read_shift(2),n,i=a||{};if(e.l+=2,s!==iO&&r!==s&&HH.indexOf(s)===-1&&!((s&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+s+" saw "+r);switch(s===iO?r:s){case 2:return n=e.read_shift(2,"i"),i.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return G8(e,r,4).replace(an,"");case 31:return W8(e);case 64:return FA(e);case 65:return K8(e);case 71:return fV(e);case 80:return Pj(e,r,!i.raw).replace(an,"");case 81:return oV(e,r).replace(an,"");case 4108:return mV(e);case 4126:case 4127:return r==4127?cV(e):dV(e);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+r)}}function dO(e,s){var a=Ke(4),r=Ke(4);switch(a.write_shift(4,e==80?31:e),e){case 3:r.write_shift(-4,s);break;case 5:r=Ke(8),r.write_shift(8,s,"f");break;case 11:r.write_shift(4,s?1:0);break;case 64:r=lV(s);break;case 31:case 80:for(r=Ke(4+2*(s.length+1)+(s.length%2?0:2)),r.write_shift(4,s.length+1),r.write_shift(0,s,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+s)}return pr([a,r])}function uO(e,s){var a=e.l,r=e.read_shift(4),n=e.read_shift(4),i=[],l=0,o=0,d=-1,u={};for(l=0;l!=n;++l){var h=e.read_shift(4),f=e.read_shift(4);i[l]=[h,f+a]}i.sort(function(w,A){return w[1]-A[1]});var x={};for(l=0;l!=n;++l){if(e.l!==i[l][1]){var g=!0;if(l>0&&s)switch(s[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,g=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],g=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],g=!1);break}if((!s||l==0)&&e.l<=i[l][1]&&(g=!1,e.l=i[l][1]),g)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(s){var v=s[i[l][0]];if(x[v.n]=Lp(e,v.t,{raw:!0}),v.p==="version"&&(x[v.n]=String(x[v.n]>>16)+"."+("0000"+String(x[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(x[v.n]){case 0:x[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ki(o=x[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+x[v.n])}}else if(i[l][0]===1){if(o=x.CodePage=Lp(e,MA),ki(o),d!==-1){var b=e.l;e.l=i[d][1],u=cO(e,o),e.l=b}}else if(i[l][0]===0){if(o===0){d=l,e.l=i[l+1][1];continue}u=cO(e,o)}else{var y=u[i[l][0]],j;switch(e[e.l]){case 65:e.l+=4,j=K8(e);break;case 30:e.l+=4,j=Pj(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,j=Pj(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,j=e.read_shift(4,"i");break;case 19:e.l+=4,j=e.read_shift(4);break;case 5:e.l+=4,j=e.read_shift(8,"f");break;case 11:e.l+=4,j=Ba(e,4);break;case 64:e.l+=4,j=ba(FA(e));break;default:throw new Error("unparsed value: "+e[e.l])}x[y]=j}}return e.l=a+r,x}var J8=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function hV(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function mO(e,s,a){var r=Ke(8),n=[],i=[],l=8,o=0,d=Ke(8),u=Ke(8);if(d.write_shift(4,2),d.write_shift(4,1200),u.write_shift(4,1),i.push(d),n.push(u),l+=8+d.length,!s){u=Ke(8),u.write_shift(4,0),n.unshift(u);var h=[Ke(4)];for(h[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(d=Ke(8+2*(f.length+1)+(f.length%2?0:2)),d.write_shift(4,o+2),d.write_shift(4,f.length+1),d.write_shift(0,f,"dbcs");d.l!=d.length;)d.write_shift(1,0);h.push(d)}d=pr(h),i.unshift(d),l+=8+d.length}for(o=0;o<e.length;++o)if(!(s&&!s[e[o][0]])&&!(J8.indexOf(e[o][0])>-1||$8.indexOf(e[o][0])>-1)&&e[o][1]!=null){var x=e[o][1],g=0;if(s){g=+s[e[o][0]];var v=a[g];if(v.p=="version"&&typeof x=="string"){var b=x.split(".");x=(+b[0]<<16)+(+b[1]||0)}d=dO(v.t,x)}else{var y=hV(x);y==-1&&(y=31,x=String(x)),d=dO(y,x)}i.push(d),u=Ke(8),u.write_shift(4,s?g:2+o),n.push(u),l+=8+d.length}var j=8*(i.length+1);for(o=0;o<i.length;++o)n[o].write_shift(4,j),j+=i[o].length;return r.write_shift(4,l),r.write_shift(4,i.length),pr([r].concat(n).concat(i))}function fO(e,s,a){var r=e.content;if(!r)return{};Tr(r,0);var n,i,l,o,d=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),h=r.read_shift(16);if(h!==It.utils.consts.HEADER_CLSID&&h!==a)throw new Error("Bad PropertySet CLSID "+h);if(n=r.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=r.read_shift(16),o=r.read_shift(4),n===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);n===2&&(l=r.read_shift(16),d=r.read_shift(4));var f=uO(r,s),x={SystemIdentifier:u};for(var g in f)x[g]=f[g];if(x.FMTID=i,n===1)return x;if(d-r.l==2&&(r.l+=2),r.l!==d)throw new Error("Length mismatch 2: "+r.l+" !== "+d);var v;try{v=uO(r,null)}catch{}for(g in v)x[g]=v[g];return x.FMTID=[i,l],x}function hO(e,s,a,r,n,i){var l=Ke(n?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,It.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,n?2:1),l.write_shift(16,s,"hex"),l.write_shift(4,n?68:48);var d=mO(e,a,r);if(o.push(d),n){var u=mO(n,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+d.length),o.push(u)}return pr(o)}function wo(e,s){return e.read_shift(s),null}function xV(e,s){s||(s=Ke(e));for(var a=0;a<e;++a)s.write_shift(1,0);return s}function pV(e,s,a){for(var r=[],n=e.l+s;e.l<n;)r.push(a(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return r}function Ba(e,s){return e.read_shift(s)===1}function tn(e,s){return s||(s=Ke(2)),s.write_shift(2,+!!e),s}function Xa(e){return e.read_shift(2,"u")}function li(e,s){return s||(s=Ke(2)),s.write_shift(2,e),s}function Y8(e,s){return pV(e,s,Xa)}function gV(e){var s=e.read_shift(1),a=e.read_shift(1);return a===1?s:s===1}function X8(e,s,a){return a||(a=Ke(2)),a.write_shift(1,s=="e"?+e:+!!e),a.write_shift(1,s=="e"?1:0),a}function lh(e,s,a){var r=e.read_shift(a&&a.biff>=12?2:1),n="sbcs-cont";if(a&&a.biff>=8,!a||a.biff==8){var i=e.read_shift(1);i&&(n="dbcs-cont")}else a.biff==12&&(n="wstr");a.biff>=2&&a.biff<=5&&(n="cpstr");var l=r?e.read_shift(r,n):"";return l}function bV(e){var s=e.read_shift(2),a=e.read_shift(1),r=a&4,n=a&8,i=1+(a&1),l=0,o,d={};n&&(l=e.read_shift(2)),r&&(o=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",h=s===0?"":e.read_shift(s,u);return n&&(e.l+=4*l),r&&(e.l+=o),d.t=h,n||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function vV(e){var s=e.t||"",a=Ke(3);a.write_shift(2,s.length),a.write_shift(1,1);var r=Ke(2*s.length);r.write_shift(2*s.length,s,"utf16le");var n=[a,r];return pr(n)}function ed(e,s,a){var r;if(a){if(a.biff>=2&&a.biff<=5)return e.read_shift(s,"cpstr");if(a.biff>=12)return e.read_shift(s,"dbcs-cont")}var n=e.read_shift(1);return n===0?r=e.read_shift(s,"sbcs-cont"):r=e.read_shift(s,"dbcs-cont"),r}function oh(e,s,a){var r=e.read_shift(a&&a.biff==2?1:2);return r===0?(e.l++,""):ed(e,r,a)}function gd(e,s,a){if(a.biff>5)return oh(e,s,a);var r=e.read_shift(1);return r===0?(e.l++,""):e.read_shift(r,a.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Z8(e,s,a){return a||(a=Ke(3+2*e.length)),a.write_shift(2,e.length),a.write_shift(1,1),a.write_shift(31,e,"utf16le"),a}function yV(e){var s=e.read_shift(1);e.l++;var a=e.read_shift(2);return e.l+=2,[s,a]}function NV(e){var s=e.read_shift(4),a=e.l,r=!1;s>24&&(e.l+=s-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),e.l=a);var n=e.read_shift((r?s-24:s)>>1,"utf16le").replace(an,"");return r&&(e.l+=24),n}function wV(e){for(var s=e.read_shift(2),a="";s-- >0;)a+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return a+r.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(an,"");return a+l}function SV(e,s){var a=e.read_shift(16);switch(a){case"e0c9ea79f9bace118c8200aa004ba90b":return NV(e);case"0303000000000000c000000000000046":return wV(e);default:throw new Error("Unsupported Moniker "+a)}}function $x(e){var s=e.read_shift(4),a=s>0?e.read_shift(s,"utf16le").replace(an,""):"";return a}function xO(e,s){s||(s=Ke(6+e.length*2)),s.write_shift(4,1+e.length);for(var a=0;a<e.length;++a)s.write_shift(2,e.charCodeAt(a));return s.write_shift(2,0),s}function jV(e,s){var a=e.l+s,r=e.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var n=e.read_shift(2);e.l+=2;var i,l,o,d,u="",h,f;n&16&&(i=$x(e,a-e.l)),n&128&&(l=$x(e,a-e.l)),(n&257)===257&&(o=$x(e,a-e.l)),(n&257)===1&&(d=SV(e,a-e.l)),n&8&&(u=$x(e,a-e.l)),n&32&&(h=e.read_shift(16)),n&64&&(f=FA(e)),e.l=a;var x=l||o||d||"";x&&u&&(x+="#"+u),x||(x="#"+u),n&2&&x.charAt(0)=="/"&&x.charAt(1)!="/"&&(x="file://"+x);var g={Target:x};return h&&(g.guid=h),f&&(g.time=f),i&&(g.Tooltip=i),g}function AV(e){var s=Ke(512),a=0,r=e.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var n=r.indexOf("#"),i=n>-1?31:23;switch(r.charAt(0)){case"#":i=28;break;case".":i&=-3;break}s.write_shift(4,2),s.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(a=0;a<l.length;++a)s.write_shift(4,l[a]);if(i==28)r=r.slice(1),xO(r,s);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<l.length;++a)s.write_shift(1,parseInt(l[a],16));var o=n>-1?r.slice(0,n):r;for(s.write_shift(4,2*(o.length+1)),a=0;a<o.length;++a)s.write_shift(2,o.charCodeAt(a));s.write_shift(2,0),i&8&&xO(n>-1?r.slice(n+1):"",s)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),a=0;a<l.length;++a)s.write_shift(1,parseInt(l[a],16));for(var d=0;r.slice(d*3,d*3+3)=="../"||r.slice(d*3,d*3+3)=="..\\";)++d;for(s.write_shift(2,d),s.write_shift(4,r.length-3*d+1),a=0;a<r.length-3*d;++a)s.write_shift(1,r.charCodeAt(a+3*d)&255);for(s.write_shift(1,0),s.write_shift(2,65535),s.write_shift(2,57005),a=0;a<6;++a)s.write_shift(4,0)}return s.slice(0,s.l)}function eL(e){var s=e.read_shift(1),a=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1);return[s,a,r,n]}function tL(e,s){var a=eL(e);return a[3]=0,a}function il(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return{r:s,c:a,ixfe:r}}function td(e,s,a,r){return r||(r=Ke(6)),r.write_shift(2,e),r.write_shift(2,s),r.write_shift(2,a||0),r}function EV(e){var s=e.read_shift(2),a=e.read_shift(2);return e.l+=8,{type:s,flags:a}}function CV(e,s,a){return s===0?"":gd(e,s,a)}function TV(e,s,a){var r=a.biff>8?4:2,n=e.read_shift(r),i=e.read_shift(r,"i"),l=e.read_shift(r,"i");return[n,i,l]}function sL(e){var s=e.read_shift(2),a=DA(e);return[s,a]}function _V(e,s,a){e.l+=4,s-=4;var r=e.l+s,n=lh(e,s,a),i=e.read_shift(2);if(r-=e.l,i!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+i);return e.l+=i,n}function Yg(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{s:{c:r,r:s},e:{c:n,r:a}}}function aL(e,s){return s||(s=Ke(8)),s.write_shift(2,e.s.r),s.write_shift(2,e.e.r),s.write_shift(2,e.s.c),s.write_shift(2,e.e.c),s}function rL(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(1),n=e.read_shift(1);return{s:{c:r,r:s},e:{c:n,r:a}}}var kV=rL;function nL(e){e.l+=4;var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[a,s,r]}function OV(e){var s={};return e.l+=4,e.l+=16,s.fSharedNote=e.read_shift(2),e.l+=4,s}function IV(e){var s={};return e.l+=4,e.cf=e.read_shift(2),s}function Fr(e){e.l+=2,e.l+=e.read_shift(2)}var RV={0:Fr,4:Fr,5:Fr,6:Fr,7:IV,8:Fr,9:Fr,10:Fr,11:Fr,12:Fr,13:OV,14:Fr,15:Fr,16:Fr,17:Fr,18:Fr,19:Fr,20:Fr,21:nL};function PV(e,s){for(var a=e.l+s,r=[];e.l<a;){var n=e.read_shift(2);e.l-=2;try{r.push(RV[n](e,a-e.l))}catch{return e.l=a,r}}return e.l!=a&&(e.l=a),r}function qx(e,s){var a={BIFFVer:0,dt:0};switch(a.BIFFVer=e.read_shift(2),s-=2,s>=2&&(a.dt=e.read_shift(2),e.l-=2),a.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+a.BIFFVer)}return e.read_shift(s),a}function UA(e,s,a){var r=1536,n=16;switch(a.bookType){case"biff8":break;case"biff5":r=1280,n=8;break;case"biff4":r=4,n=6;break;case"biff3":r=3,n=6;break;case"biff2":r=2,n=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ke(n);return i.write_shift(2,r),i.write_shift(2,s),n>4&&i.write_shift(2,29282),n>6&&i.write_shift(2,1997),n>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function DV(e,s){return s===0||e.read_shift(2),1200}function MV(e,s,a){if(a.enc)return e.l+=s,"";var r=e.l,n=gd(e,0,a);return e.read_shift(s+r-e.l),n}function LV(e,s){var a=!s||s.biff==8,r=Ke(a?112:54);for(r.write_shift(s.biff==8?2:1,7),a&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(a?0:536870912));r.l<r.length;)r.write_shift(1,a?0:32);return r}function FV(e,s,a){var r=a&&a.biff==8||s==2?e.read_shift(2):(e.l+=s,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function UV(e,s,a){var r=e.read_shift(4),n=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=lh(e,0,a);return l.length===0&&(l="Sheet1"),{pos:r,hs:n,dt:i,name:l}}function zV(e,s){var a=!s||s.biff>=8?2:1,r=Ke(8+a*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),s.biff>=8&&r.write_shift(1,1),r.write_shift(a*e.name.length,e.name,s.biff<8?"sbcs":"utf16le");var n=r.slice(0,r.l);return n.l=r.l,n}function BV(e,s){for(var a=e.l+s,r=e.read_shift(4),n=e.read_shift(4),i=[],l=0;l!=n&&e.l<a;++l)i.push(bV(e));return i.Count=r,i.Unique=n,i}function $V(e,s){var a=Ke(8);a.write_shift(4,e.Count),a.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=vV(e[n]);var i=pr([a].concat(r));return i.parts=[a.length].concat(r.map(function(l){return l.length})),i}function qV(e,s){var a={};return a.dsst=e.read_shift(2),e.l+=s-2,a}function HV(e){var s={};s.r=e.read_shift(2),s.c=e.read_shift(2),s.cnt=e.read_shift(2)-s.c;var a=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,r&7&&(s.level=r&7),r&32&&(s.hidden=!0),r&64&&(s.hpt=a/20),s}function VV(e){var s=EV(e);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var a=e.read_shift(4);return a!==0}function GV(e){return e.read_shift(2),e.read_shift(4)}function pO(e,s,a){var r=0;a&&a.biff==2||(r=e.read_shift(2));var n=e.read_shift(2);a&&a.biff==2&&(r=1-(n>>15),n&=32767);var i={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[i,n]}function WV(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),d=e.read_shift(2),u=e.read_shift(2);return{Pos:[s,a],Dim:[r,n],Flags:i,CurTab:l,FirstTab:o,Selected:d,TabRatio:u}}function QV(){var e=Ke(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function KV(e,s,a){if(a&&a.biff>=2&&a.biff<5)return{};var r=e.read_shift(2);return{RTL:r&64}}function JV(e){var s=Ke(18),a=1718;return e&&e.RTL&&(a|=64),s.write_shift(2,a),s.write_shift(4,0),s.write_shift(4,64),s.write_shift(4,0),s.write_shift(4,0),s}function YV(){}function XV(e,s,a){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(a&&a.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return r.name=lh(e,0,a),r}function ZV(e,s){var a=e.name||"Arial",r=s&&s.biff==5,n=r?15+a.length:16+2*a.length,i=Ke(n);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,a.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*a.length,a,r?"sbcs":"utf16le"),i}function eG(e){var s=il(e);return s.isst=e.read_shift(4),s}function tG(e,s,a,r){var n=Ke(10);return td(e,s,r,n),n.write_shift(4,a),n}function sG(e,s,a){a.biffguess&&a.biff==2&&(a.biff=5);var r=e.l+s,n=il(e);a.biff==2&&e.l++;var i=oh(e,r-e.l,a);return n.val=i,n}function aG(e,s,a,r,n){var i=!n||n.biff==8,l=Ke(8+ +i+(1+i)*a.length);return td(e,s,r,l),l.write_shift(2,a.length),i&&l.write_shift(1,1),l.write_shift((1+i)*a.length,a,i?"utf16le":"sbcs"),l}function rG(e,s,a){var r=e.read_shift(2),n=gd(e,0,a);return[r,n]}function nG(e,s,a,r){var n=a&&a.biff==5;r||(r=Ke(n?3+s.length:5+2*s.length)),r.write_shift(2,e),r.write_shift(n?1:2,s.length),n||r.write_shift(1,1),r.write_shift((n?1:2)*s.length,s,n?"sbcs":"utf16le");var i=r.length>r.l?r.slice(0,r.l):r;return i.l==null&&(i.l=i.length),i}var iG=gd;function gO(e,s,a){var r=e.l+s,n=a.biff==8||!a.biff?4:2,i=e.read_shift(n),l=e.read_shift(n),o=e.read_shift(2),d=e.read_shift(2);return e.l=r,{s:{r:i,c:o},e:{r:l,c:d}}}function lG(e,s){var a=s.biff==8||!s.biff?4:2,r=Ke(2*a+6);return r.write_shift(a,e.s.r),r.write_shift(a,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}function oG(e){var s=e.read_shift(2),a=e.read_shift(2),r=sL(e);return{r:s,c:a,ixfe:r[0],rknum:r[1]}}function cG(e,s){for(var a=e.l+s-2,r=e.read_shift(2),n=e.read_shift(2),i=[];e.l<a;)i.push(sL(e));if(e.l!==a)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-n+1)throw new Error("MulRK length mismatch");return{r,c:n,C:l,rkrec:i}}function dG(e,s){for(var a=e.l+s-2,r=e.read_shift(2),n=e.read_shift(2),i=[];e.l<a;)i.push(e.read_shift(2));if(e.l!==a)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-n+1)throw new Error("MulBlank length mismatch");return{r,c:n,C:l,ixfe:i}}function uG(e,s,a,r){var n={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),d=e.read_shift(2);return n.patternType=VH[o>>26],r.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=l&15,n.dgRight=l>>4&15,n.dgTop=l>>8&15,n.dgBottom=l>>12&15,n.icvLeft=l>>16&127,n.icvRight=l>>23&127,n.grbitDiag=l>>30&3,n.icvTop=o&127,n.icvBottom=o>>7&127,n.icvDiag=o>>14&127,n.dgDiag=o>>21&15,n.icvFore=d&127,n.icvBack=d>>7&127,n.fsxButton=d>>14&1),n}function mG(e,s,a){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,s-=6,r.data=uG(e,s,r.fStyle,a),r}function bO(e,s,a,r){var n=a&&a.biff==5;r||(r=Ke(n?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,s<<4));var i=0;return e.numFmtId>0&&n&&(i|=1024),r.write_shift(4,i),r.write_shift(4,0),n||r.write_shift(4,0),r.write_shift(2,0),r}function fG(e){e.l+=4;var s=[e.read_shift(2),e.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function hG(e){var s=Ke(8);return s.write_shift(4,0),s.write_shift(2,0),s.write_shift(2,0),s}function vO(e,s,a){var r=il(e);(a.biff==2||s==9)&&++e.l;var n=gV(e);return r.val=n,r.t=n===!0||n===!1?"b":"e",r}function xG(e,s,a,r,n,i){var l=Ke(8);return td(e,s,r,l),X8(a,i,l),l}function pG(e,s,a){a.biffguess&&a.biff==2&&(a.biff=5);var r=il(e),n=Vr(e);return r.val=n,r}function gG(e,s,a,r){var n=Ke(14);return td(e,s,r,n),Zc(a,n),n}var yO=CV;function bG(e,s,a){var r=e.l+s,n=e.read_shift(2),i=e.read_shift(2);if(a.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=ed(e,i),o=[];r>e.l;)o.push(oh(e));return[i,n,l,o]}function NO(e,s,a){var r=e.read_shift(2),n,i={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return a.sbcch===14849&&(n=_V(e,s-2,a)),i.body=n||e.read_shift(s-2),typeof n=="string"&&(i.Name=n),i}var vG=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function wO(e,s,a){var r=e.l+s,n=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(a&&a.biff==2?1:2),d=0;(!a||a.biff>=5)&&(a.biff!=5&&(e.l+=2),d=e.read_shift(2),a.biff==5&&(e.l+=2),e.l+=4);var u=ed(e,l,a);n&32&&(u=vG[u.charCodeAt(0)]);var h=r-e.l;a&&a.biff==2&&--h;var f=r==e.l||o===0||!(h>0)?[]:PJ(e,h,a,o);return{chKey:i,Name:u,itab:d,rgce:f}}function iL(e,s,a){if(a.biff<8)return yG(e,s,a);for(var r=[],n=e.l+s,i=e.read_shift(a.biff>8?4:2);i--!==0;)r.push(TV(e,a.biff>8?12:6,a));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return r}function yG(e,s,a){e[e.l+1]==3&&e[e.l]++;var r=lh(e,s,a);return r.charCodeAt(0)==3?r.slice(1):r}function NG(e,s,a){if(a.biff<8){e.l+=s;return}var r=e.read_shift(2),n=e.read_shift(2),i=ed(e,r,a),l=ed(e,n,a);return[i,l]}function wG(e,s,a){var r=rL(e);e.l++;var n=e.read_shift(1);return s-=8,[DJ(e,s,a),n,r]}function SO(e,s,a){var r=kV(e);switch(a.biff){case 2:e.l++,s-=7;break;case 3:case 4:e.l+=2,s-=8;break;default:e.l+=6,s-=12}return[r,IJ(e,s,a)]}function SG(e){var s=e.read_shift(4)!==0,a=e.read_shift(4)!==0,r=e.read_shift(4);return[s,a,r]}function jG(e,s,a){if(!(a.biff<8)){var r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=gd(e,0,a);return a.biff<8&&e.read_shift(1),[{r,c:n},o,l,i]}}function AG(e,s,a){return jG(e,s,a)}function EG(e,s){for(var a=[],r=e.read_shift(2);r--;)a.push(Yg(e));return a}function CG(e){var s=Ke(2+e.length*8);s.write_shift(2,e.length);for(var a=0;a<e.length;++a)aL(e[a],s);return s}function TG(e,s,a){if(a&&a.biff<8)return kG(e,s,a);var r=nL(e),n=PV(e,s-22,r[1]);return{cmo:r,ft:n}}var _G={8:function(e,s){var a=e.l+s;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=a,{fmt:r}}};function kG(e,s,a){e.l+=4;var r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,s-=36;var l=[];return l.push((_G[r]||Kr)(e,s,a)),{cmo:[n,r,i],ft:l}}function OG(e,s,a){var r=e.l,n="";try{e.l+=4;var i=(a.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=yV(e,6,a);var o=e.read_shift(2);e.read_shift(2),Xa(e,2);var d=e.read_shift(2);e.l+=d;for(var u=1;u<e.lens.length-1;++u){if(e.l-r!=e.lens[u])throw new Error("TxO: bad continue record");var h=e[e.l],f=ed(e,e.lens[u+1]-e.lens[u]-1);if(n+=f,n.length>=(h?o:2*o))break}if(n.length!==o&&n.length!==o*2)throw new Error("cchText: "+o+" != "+n.length);return e.l=r+s,{t:n}}catch{return e.l=r+s,{t:n}}}function IG(e,s){var a=Yg(e);e.l+=16;var r=jV(e,s-24);return[a,r]}function RG(e){var s=Ke(24),a=_a(e[0]);s.write_shift(2,a.r),s.write_shift(2,a.r),s.write_shift(2,a.c),s.write_shift(2,a.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<16;++n)s.write_shift(1,parseInt(r[n],16));return pr([s,AV(e[1])])}function PG(e,s){e.read_shift(2);var a=Yg(e),r=e.read_shift((s-10)/2,"dbcs-cont");return r=r.replace(an,""),[a,r]}function DG(e){var s=e[1].Tooltip,a=Ke(10+2*(s.length+1));a.write_shift(2,2048);var r=_a(e[0]);a.write_shift(2,r.r),a.write_shift(2,r.r),a.write_shift(2,r.c),a.write_shift(2,r.c);for(var n=0;n<s.length;++n)a.write_shift(2,s.charCodeAt(n));return a.write_shift(2,0),a}function MG(e){var s=[0,0],a;return a=e.read_shift(2),s[0]=lO[a]||a,a=e.read_shift(2),s[1]=lO[a]||a,s}function LG(e){return e||(e=Ke(4)),e.write_shift(2,1),e.write_shift(2,1),e}function FG(e){for(var s=e.read_shift(2),a=[];s-- >0;)a.push(tL(e));return a}function UG(e){for(var s=e.read_shift(2),a=[];s-- >0;)a.push(tL(e));return a}function zG(e){e.l+=2;var s={cxfs:0,crc:0};return s.cxfs=e.read_shift(2),s.crc=e.read_shift(4),s}function lL(e,s,a){if(!a.cellStyles)return Kr(e,s);var r=a&&a.biff>=12?4:2,n=e.read_shift(r),i=e.read_shift(r),l=e.read_shift(r),o=e.read_shift(r),d=e.read_shift(2);r==2&&(e.l+=2);var u={s:n,e:i,w:l,ixfe:o,flags:d};return(a.biff>=5||!a.biff)&&(u.level=d>>8&7),u}function BG(e,s){var a=Ke(12);a.write_shift(2,s),a.write_shift(2,s),a.write_shift(2,e.width*256),a.write_shift(2,0);var r=0;return e.hidden&&(r|=1),a.write_shift(1,r),r=e.level||0,a.write_shift(1,r),a.write_shift(2,0),a}function $G(e,s){var a={};return s<32||(e.l+=16,a.header=Vr(e),a.footer=Vr(e),e.l+=2),a}function qG(e,s,a){var r={area:!1};if(a.biff!=5)return e.l+=s,r;var n=e.read_shift(1);return e.l+=3,n&16&&(r.area=!0),r}function HG(e){for(var s=Ke(2*e),a=0;a<e;++a)s.write_shift(2,a+1);return s}var VG=il,GG=Y8,WG=oh;function QG(e){var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(4),n={fmt:s,env:a,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,n}function KG(e,s,a){a.biffguess&&a.biff==5&&(a.biff=2);var r=il(e);++e.l;var n=gd(e,s-7,a);return r.t="str",r.val=n,r}function JG(e){var s=il(e);++e.l;var a=Vr(e);return s.t="n",s.val=a,s}function YG(e,s,a){var r=Ke(15);return mh(r,e,s),r.write_shift(8,a,"f"),r}function XG(e){var s=il(e);++e.l;var a=e.read_shift(2);return s.t="n",s.val=a,s}function ZG(e,s,a){var r=Ke(9);return mh(r,e,s),r.write_shift(2,a),r}function eW(e){var s=e.read_shift(1);return s===0?(e.l++,""):e.read_shift(s,"sbcs-cont")}function tW(e,s){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=s-13}function sW(e,s,a){var r=e.l+s,n=il(e),i=e.read_shift(2),l=ed(e,i,a);return e.l=r,n.t="str",n.val=l,n}var aW=[2,3,48,49,131,139,140,245],Dj=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=Qg({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function a(o,d){var u=[],h=Bo(1);switch(d.type){case"base64":h=Rn(Un(o));break;case"binary":h=Rn(o);break;case"buffer":case"array":h=o;break}Tr(h,0);var f=h.read_shift(1),x=!!(f&136),g=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,x=!0;break;case 49:g=!0,x=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var b=0,y=521;f==2&&(b=h.read_shift(2)),h.l+=3,f!=2&&(b=h.read_shift(4)),b>1048576&&(b=1e6),f!=2&&(y=h.read_shift(2));var j=h.read_shift(2),w=d.codepage||1252;f!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(w=e[h[h.l]]),h.l+=1,h.l+=2),v&&(h.l+=36);for(var A=[],O={},C=Math.min(h.length,f==2?521:y-10-(g?264:0)),E=v?32:11;h.l<C&&h[h.l]!=13;)switch(O={},O.name=rf.utils.decode(w,h.slice(h.l,h.l+E)).replace(/[\u0000\r\n].*$/g,""),h.l+=E,O.type=String.fromCharCode(h.read_shift(1)),f!=2&&!v&&(O.offset=h.read_shift(4)),O.len=h.read_shift(1),f==2&&(O.offset=h.read_shift(2)),O.dec=h.read_shift(1),O.name.length&&A.push(O),f!=2&&(h.l+=v?13:14),O.type){case"B":(!g||O.len!=8)&&d.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+O.name+":"+O.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+O.type)}if(h[h.l]!==13&&(h.l=y-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=y;var S=0,D=0;for(u[0]=[],D=0;D!=A.length;++D)u[0][D]=A[D].name;for(;b-- >0;){if(h[h.l]===42){h.l+=j;continue}for(++h.l,u[++S]=[],D=0,D=0;D!=A.length;++D){var M=h.slice(h.l,h.l+A[D].len);h.l+=A[D].len,Tr(M,0);var U=rf.utils.decode(w,M);switch(A[D].type){case"C":U.trim().length&&(u[S][D]=U.replace(/\s+$/,""));break;case"D":U.length===8?u[S][D]=new Date(+U.slice(0,4),+U.slice(4,6)-1,+U.slice(6,8)):u[S][D]=U;break;case"F":u[S][D]=parseFloat(U.trim());break;case"+":case"I":u[S][D]=v?M.read_shift(-4,"i")^2147483648:M.read_shift(4,"i");break;case"L":switch(U.trim().toUpperCase()){case"Y":case"T":u[S][D]=!0;break;case"N":case"F":u[S][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+U+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[S][D]="##MEMO##"+(v?parseInt(U.trim(),10):M.read_shift(4));break;case"N":U=U.replace(/\u0000/g,"").trim(),U&&U!="."&&(u[S][D]=+U||0);break;case"@":u[S][D]=new Date(M.read_shift(-8,"f")-621356832e5);break;case"T":u[S][D]=new Date((M.read_shift(4)-2440588)*864e5+M.read_shift(4));break;case"Y":u[S][D]=M.read_shift(4,"i")/1e4+M.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[S][D]=-M.read_shift(-8,"f");break;case"B":if(g&&A[D].len==8){u[S][D]=M.read_shift(8,"f");break}case"G":case"P":M.l+=A[D].len;break;case"0":if(A[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+A[D].type)}}}if(f!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return d&&d.sheetRows&&(u=u.slice(0,d.sheetRows)),d.DBF=A,u}function r(o,d){var u=d||{};u.dateNF||(u.dateNF="yyyymmdd");var h=d0(a(o,u),u);return h["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,h}function n(o,d){try{return Zo(r(o,d),d)}catch(u){if(d&&d.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,d){var u=d||{};if(+u.codepage>=0&&ki(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var h=hn(),f=zp(o,{header:1,raw:!0,cellDates:!0}),x=f[0],g=f.slice(1),v=o["!cols"]||[],b=0,y=0,j=0,w=1;for(b=0;b<x.length;++b){if(((v[b]||{}).DBF||{}).name){x[b]=v[b].DBF.name,++j;continue}if(x[b]!=null){if(++j,typeof x[b]=="number"&&(x[b]=x[b].toString(10)),typeof x[b]!="string")throw new Error("DBF Invalid column name "+x[b]+" |"+typeof x[b]+"|");if(x.indexOf(x[b])!==b){for(y=0;y<1024;++y)if(x.indexOf(x[b]+"_"+y)==-1){x[b]+="_"+y;break}}}}var A=Cs(o["!ref"]),O=[],C=[],E=[];for(b=0;b<=A.e.c-A.s.c;++b){var S="",D="",M=0,U=[];for(y=0;y<g.length;++y)g[y][b]!=null&&U.push(g[y][b]);if(U.length==0||x[b]==null){O[b]="?";continue}for(y=0;y<U.length;++y){switch(typeof U[y]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=U[y]instanceof Date?"D":"C";break;default:D="C"}M=Math.max(M,String(U[y]).length),S=S&&S!=D?"C":D}M>250&&(M=250),D=((v[b]||{}).DBF||{}).type,D=="C"&&v[b].DBF.len>M&&(M=v[b].DBF.len),S=="B"&&D=="N"&&(S="N",E[b]=v[b].DBF.dec,M=v[b].DBF.len),C[b]=S=="C"||D=="N"?M:i[S]||0,w+=C[b],O[b]=S}var I=h.next(32);for(I.write_shift(4,318902576),I.write_shift(4,g.length),I.write_shift(2,296+32*j),I.write_shift(2,w),b=0;b<4;++b)I.write_shift(4,0);for(I.write_shift(4,0|(+s[JM]||3)<<8),b=0,y=0;b<x.length;++b)if(x[b]!=null){var k=h.next(32),z=(x[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);k.write_shift(1,z,"sbcs"),k.write_shift(1,O[b]=="?"?"C":O[b],"sbcs"),k.write_shift(4,y),k.write_shift(1,C[b]||i[O[b]]||0),k.write_shift(1,E[b]||0),k.write_shift(1,2),k.write_shift(4,0),k.write_shift(1,0),k.write_shift(4,0),k.write_shift(4,0),y+=C[b]||i[O[b]]||0}var _=h.next(264);for(_.write_shift(4,13),b=0;b<65;++b)_.write_shift(4,0);for(b=0;b<g.length;++b){var q=h.next(w);for(q.write_shift(1,0),y=0;y<x.length;++y)if(x[y]!=null)switch(O[y]){case"L":q.write_shift(1,g[b][y]==null?63:g[b][y]?84:70);break;case"B":q.write_shift(8,g[b][y]||0,"f");break;case"N":var L="0";for(typeof g[b][y]=="number"&&(L=g[b][y].toFixed(E[y]||0)),j=0;j<C[y]-L.length;++j)q.write_shift(1,32);q.write_shift(1,L,"sbcs");break;case"D":g[b][y]?(q.write_shift(4,("0000"+g[b][y].getFullYear()).slice(-4),"sbcs"),q.write_shift(2,("00"+(g[b][y].getMonth()+1)).slice(-2),"sbcs"),q.write_shift(2,("00"+g[b][y].getDate()).slice(-2),"sbcs")):q.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(g[b][y]!=null?g[b][y]:"").slice(0,C[y]);for(q.write_shift(1,Q,"sbcs"),j=0;j<C[y]-Q.length;++j)q.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:n,to_sheet:r,from_sheet:l}})(),oL=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+Ma(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),a=function(x,g){var v=e[g];return typeof v=="number"?P4(v):v},r=function(x,g,v){var b=g.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return b==59?x:P4(b)};e["|"]=254;function n(x,g){switch(g.type){case"base64":return i(Un(x),g);case"binary":return i(x,g);case"buffer":return i(cs&&Buffer.isBuffer(x)?x.toString("binary"):Xo(x),g);case"array":return i(Xc(x),g)}throw new Error("Unrecognized type "+g.type)}function i(x,g){var v=x.split(/[\n\r]+/),b=-1,y=-1,j=0,w=0,A=[],O=[],C=null,E={},S=[],D=[],M=[],U=0,I;for(+g.codepage>=0&&ki(+g.codepage);j!==v.length;++j){U=0;var k=v[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(s,a),z=k.replace(/;;/g,"\0").split(";").map(function(K){return K.replace(/\u0000/g,";")}),_=z[0],q;if(k.length>0)switch(_){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":z[1].charAt(0)=="P"&&O.push(k.slice(3).replace(/;;/g,";"));break;case"C":var L=!1,Q=!1,X=!1,W=!1,ee=-1,V=-1;for(w=1;w<z.length;++w)switch(z[w].charAt(0)){case"A":break;case"X":y=parseInt(z[w].slice(1))-1,Q=!0;break;case"Y":for(b=parseInt(z[w].slice(1))-1,Q||(y=0),I=A.length;I<=b;++I)A[I]=[];break;case"K":q=z[w].slice(1),q.charAt(0)==='"'?q=q.slice(1,q.length-1):q==="TRUE"?q=!0:q==="FALSE"?q=!1:isNaN(Ri(q))?isNaN(Ru(q).getDate())||(q=ba(q)):(q=Ri(q),C!==null&&o0(C)&&(q=Jg(q))),L=!0;break;case"E":W=!0;var P=Au(z[w].slice(1),{r:b,c:y});A[b][y]=[A[b][y],P];break;case"S":X=!0,A[b][y]=[A[b][y],"S5S"];break;case"G":break;case"R":ee=parseInt(z[w].slice(1))-1;break;case"C":V=parseInt(z[w].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+k)}if(L&&(A[b][y]&&A[b][y].length==2?A[b][y][0]=q:A[b][y]=q,C=null),X){if(W)throw new Error("SYLK shared formula cannot have own formula");var Y=ee>-1&&A[ee][V];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");A[b][y][1]=EL(Y[1],{r:b-ee,c:y-V})}break;case"F":var J=0;for(w=1;w<z.length;++w)switch(z[w].charAt(0)){case"X":y=parseInt(z[w].slice(1))-1,++J;break;case"Y":for(b=parseInt(z[w].slice(1))-1,I=A.length;I<=b;++I)A[I]=[];break;case"M":U=parseInt(z[w].slice(1))/20;break;case"F":break;case"G":break;case"P":C=O[parseInt(z[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(M=z[w].slice(1).split(" "),I=parseInt(M[0],10);I<=parseInt(M[1],10);++I)U=parseInt(M[2],10),D[I-1]=U===0?{hidden:!0}:{wch:U},$o(D[I-1]);break;case"C":y=parseInt(z[w].slice(1))-1,D[y]||(D[y]={});break;case"R":b=parseInt(z[w].slice(1))-1,S[b]||(S[b]={}),U>0?(S[b].hpt=U,S[b].hpx=Du(U)):U===0&&(S[b].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+k)}J<1&&(C=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+k)}}return S.length>0&&(E["!rows"]=S),D.length>0&&(E["!cols"]=D),g&&g.sheetRows&&(A=A.slice(0,g.sheetRows)),[A,E]}function l(x,g){var v=n(x,g),b=v[0],y=v[1],j=d0(b,g);return Ma(y).forEach(function(w){j[w]=y[w]}),j}function o(x,g){return Zo(l(x,g),g)}function d(x,g,v,b){var y="C;Y"+(v+1)+";X"+(b+1)+";K";switch(x.t){case"n":y+=x.v||0,x.f&&!x.F&&(y+=";E"+VA(x.f,{r:v,c:b}));break;case"b":y+=x.v?"TRUE":"FALSE";break;case"e":y+=x.w||x.v;break;case"d":y+='"'+(x.w||x.v)+'"';break;case"s":y+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(x,g){g.forEach(function(v,b){var y="F;W"+(b+1)+" "+(b+1)+" ";v.hidden?y+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=ff(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=hf(v.wpx)),typeof v.wch=="number"&&(y+=Math.round(v.wch))),y.charAt(y.length-1)!=" "&&x.push(y)})}function h(x,g){g.forEach(function(v,b){var y="F;";v.hidden?y+="M0;":v.hpt?y+="M"+20*v.hpt+";":v.hpx&&(y+="M"+20*xf(v.hpx)+";"),y.length>2&&x.push(y+"R"+(b+1))})}function f(x,g){var v=["ID;PWXL;N;E"],b=[],y=Cs(x["!ref"]),j,w=Array.isArray(x),A=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),x["!cols"]&&u(v,x["!cols"]),x["!rows"]&&h(v,x["!rows"]),v.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var O=y.s.r;O<=y.e.r;++O)for(var C=y.s.c;C<=y.e.c;++C){var E=Vt({r:O,c:C});j=w?(x[O]||[])[C]:x[E],!(!j||j.v==null&&(!j.f||j.F))&&b.push(d(j,x,O,C))}return v.join(A)+A+b.join(A)+A+"E"+A}return{to_workbook:o,to_sheet:l,from_sheet:f}})(),cL=(function(){function e(i,l){switch(l.type){case"base64":return s(Un(i),l);case"binary":return s(i,l);case"buffer":return s(cs&&Buffer.isBuffer(i)?i.toString("binary"):Xo(i),l);case"array":return s(Xc(i),l)}throw new Error("Unrecognized type "+l.type)}function s(i,l){for(var o=i.split(`
`),d=-1,u=-1,h=0,f=[];h!==o.length;++h){if(o[h].trim()==="BOT"){f[++d]=[],u=0;continue}if(!(d<0)){var x=o[h].trim().split(","),g=x[0],v=x[1];++h;for(var b=o[h]||"";(b.match(/["]/g)||[]).length&1&&h<o.length-1;)b+=`
`+o[++h];switch(b=b.trim(),+g){case-1:if(b==="BOT"){f[++d]=[],u=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?f[d][u]=!0:b==="FALSE"?f[d][u]=!1:isNaN(Ri(v))?isNaN(Ru(v).getDate())?f[d][u]=v:f[d][u]=ba(v):f[d][u]=Ri(v),++u;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),f[d][u++]=b!==""?b:null;break}if(b==="EOD")break}}return l&&l.sheetRows&&(f=f.slice(0,l.sheetRows)),f}function a(i,l){return d0(e(i,l),l)}function r(i,l){return Zo(a(i,l),l)}var n=(function(){var i=function(d,u,h,f,x){d.push(u),d.push(h+","+f),d.push('"'+x.replace(/"/g,'""')+'"')},l=function(d,u,h,f){d.push(u+","+h),d.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(d){var u=[],h=Cs(d["!ref"]),f,x=Array.isArray(d);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,h.e.r-h.s.r+1,""),i(u,"TUPLES",0,h.e.c-h.s.c+1,""),i(u,"DATA",0,0,"");for(var g=h.s.r;g<=h.e.r;++g){l(u,-1,0,"BOT");for(var v=h.s.c;v<=h.e.c;++v){var b=Vt({r:g,c:v});if(f=x?(d[g]||[])[v]:d[b],!f){l(u,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?l(u,1,0,"="+f.f):l(u,1,0,""):l(u,0,y,"V");break;case"b":l(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":l(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=hi(f.z||Ht[14],dr(ba(f.v)))),l(u,0,f.w,"V");break;default:l(u,1,0,"")}}}l(u,-1,0,"EOD");var j=`\r
`,w=u.join(j);return w}})();return{to_workbook:r,to_sheet:a,from_sheet:n}})(),dL=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function a(f,x){for(var g=f.split(`
`),v=-1,b=-1,y=0,j=[];y!==g.length;++y){var w=g[y].trim().split(":");if(w[0]==="cell"){var A=_a(w[1]);if(j.length<=A.r)for(v=j.length;v<=A.r;++v)j[v]||(j[v]=[]);switch(v=A.r,b=A.c,w[2]){case"t":j[v][b]=e(w[3]);break;case"v":j[v][b]=+w[3];break;case"vtf":var O=w[w.length-1];case"vtc":switch(w[3]){case"nl":j[v][b]=!!+w[4];break;default:j[v][b]=+w[4];break}w[2]=="vtf"&&(j[v][b]=[j[v][b],O])}}}return x&&x.sheetRows&&(j=j.slice(0,x.sheetRows)),j}function r(f,x){return d0(a(f,x),x)}function n(f,x){return Zo(r(f,x),x)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var x=[],g=[],v,b="",y=gn(f["!ref"]),j=Array.isArray(f),w=y.s.r;w<=y.e.r;++w)for(var A=y.s.c;A<=y.e.c;++A)if(b=Vt({r:w,c:A}),v=j?(f[w]||[])[A]:f[b],!(!v||v.v==null||v.t==="z")){switch(g=["cell",b,"t"],v.t){case"s":case"str":g.push(s(v.v));break;case"n":v.f?(g[2]="vtf",g[3]="n",g[4]=v.v,g[5]=s(v.f)):(g[2]="v",g[3]=v.v);break;case"b":g[2]="vt"+(v.f?"f":"c"),g[3]="nl",g[4]=v.v?"1":"0",g[5]=s(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var O=dr(ba(v.v));g[2]="vtc",g[3]="nd",g[4]=""+O,g[5]=v.w||hi(v.z||Ht[14],O);break;case"e":continue}x.push(g.join(":"))}return x.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function h(f){return[i,l,o,l,u(f),d].join(`
`)}return{to_workbook:n,to_sheet:r,from_sheet:h}})(),Pu=(function(){function e(h,f,x,g,v){v.raw?f[x][g]=h:h===""||(h==="TRUE"?f[x][g]=!0:h==="FALSE"?f[x][g]=!1:isNaN(Ri(h))?isNaN(Ru(h).getDate())?f[x][g]=h:f[x][g]=ba(h):f[x][g]=Ri(h))}function s(h,f){var x=f||{},g=[];if(!h||h.length===0)return g;for(var v=h.split(/[\r\n]/),b=v.length-1;b>=0&&v[b].length===0;)--b;for(var y=10,j=0,w=0;w<=b;++w)j=v[w].indexOf(" "),j==-1?j=v[w].length:j++,y=Math.max(y,j);for(w=0;w<=b;++w){g[w]=[];var A=0;for(e(v[w].slice(0,y).trim(),g,w,A,x),A=1;A<=(v[w].length-y)/10+1;++A)e(v[w].slice(y+(A-1)*10,y+A*10).trim(),g,w,A,x)}return x.sheetRows&&(g=g.slice(0,x.sheetRows)),g}var a={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(h){for(var f={},x=!1,g=0,v=0;g<h.length;++g)(v=h.charCodeAt(g))==34?x=!x:!x&&v in a&&(f[v]=(f[v]||0)+1);v=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&v.push([f[g],g]);if(!v.length){f=r;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&v.push([f[g],g])}return v.sort(function(b,y){return b[0]-y[0]||r[b[1]]-r[y[1]]}),a[v.pop()[1]]||44}function i(h,f){var x=f||{},g="",v=x.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(g=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(g=h.charAt(4),h=h.slice(6)):g=n(h.slice(0,1024)):x&&x.FS?g=x.FS:g=n(h.slice(0,1024));var y=0,j=0,w=0,A=0,O=0,C=g.charCodeAt(0),E=!1,S=0,D=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var M=x.dateNF!=null?q9(x.dateNF):null;function U(){var I=h.slice(A,O),k={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)k.t="z";else if(x.raw)k.t="s",k.v=I;else if(I.trim().length===0)k.t="s",k.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(k.t="s",k.v=I.slice(2,-1).replace(/""/g,'"')):bK(I)?(k.t="n",k.f=I.slice(1)):(k.t="s",k.v=I);else if(I=="TRUE")k.t="b",k.v=!0;else if(I=="FALSE")k.t="b",k.v=!1;else if(!isNaN(w=Ri(I)))k.t="n",x.cellText!==!1&&(k.w=I),k.v=w;else if(!isNaN(Ru(I).getDate())||M&&I.match(M)){k.z=x.dateNF||Ht[14];var z=0;M&&I.match(M)&&(I=H9(I,x.dateNF,I.match(M)||[]),z=1),x.cellDates?(k.t="d",k.v=ba(I,z)):(k.t="n",k.v=dr(ba(I,z))),x.cellText!==!1&&(k.w=hi(k.z,k.v instanceof Date?dr(k.v):k.v)),x.cellNF||delete k.z}else k.t="s",k.v=I;if(k.t=="z"||(x.dense?(v[y]||(v[y]=[]),v[y][j]=k):v[Vt({c:j,r:y})]=k),A=O+1,D=h.charCodeAt(A),b.e.c<j&&(b.e.c=j),b.e.r<y&&(b.e.r=y),S==C)++j;else if(j=0,++y,x.sheetRows&&x.sheetRows<=y)return!0}e:for(;O<h.length;++O)switch(S=h.charCodeAt(O)){case 34:D===34&&(E=!E);break;case C:case 10:case 13:if(!E&&U())break e;break}return O-A>0&&U(),v["!ref"]=ss(b),v}function l(h,f){return!(f&&f.PRN)||f.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?i(h,f):d0(s(h,f),f)}function o(h,f){var x="",g=f.type=="string"?[0,0,0,0]:eE(h,f);switch(f.type){case"base64":x=Un(h);break;case"binary":x=h;break;case"buffer":f.codepage==65001?x=h.toString("utf8"):f.codepage&&typeof rf<"u"||(x=cs&&Buffer.isBuffer(h)?h.toString("binary"):Xo(h));break;case"array":x=Xc(h);break;case"string":x=h;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?x=ia(x.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?x=ia(x):f.type=="binary"&&typeof rf<"u",x.slice(0,19)=="socialcalc:version:"?dL.to_sheet(f.type=="string"?x:ia(x),f):l(x,f)}function d(h,f){return Zo(o(h,f),f)}function u(h){for(var f=[],x=Cs(h["!ref"]),g,v=Array.isArray(h),b=x.s.r;b<=x.e.r;++b){for(var y=[],j=x.s.c;j<=x.e.c;++j){var w=Vt({r:b,c:j});if(g=v?(h[b]||[])[j]:h[w],!g||g.v==null){y.push("          ");continue}for(var A=(g.w||(Bl(g),g.w)||"").slice(0,10);A.length<10;)A+=" ";y.push(A+(j===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:d,to_sheet:o,from_sheet:u}})();function rW(e,s){var a=s||{},r=!!a.WTF;a.WTF=!0;try{var n=oL.to_workbook(e,a);return a.WTF=r,n}catch(i){if(a.WTF=r,!i.message.match(/SYLK bad record ID/)&&r)throw i;return Pu.to_workbook(e,s)}}var $c=(function(){function e(P,Y,J){if(P){Tr(P,P.l||0);for(var K=J.Enum||ee;P.l<P.length;){var se=P.read_shift(2),G=K[se]||K[65535],te=P.read_shift(2),Z=P.l+te,ue=G.f&&G.f(P,te,J);if(P.l=Z,Y(ue,G,se))return}}}function s(P,Y){switch(Y.type){case"base64":return a(Rn(Un(P)),Y);case"binary":return a(Rn(P),Y);case"buffer":case"array":return a(P,Y)}throw"Unsupported type "+Y.type}function a(P,Y){if(!P)return P;var J=Y||{},K=J.dense?[]:{},se="Sheet1",G="",te=0,Z={},ue=[],re=[],H={s:{r:0,c:0},e:{r:0,c:0}},pe=J.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)J.Enum=ee,e(P,function(ne,de,we){switch(we){case 0:J.vers=ne,ne>=4096&&(J.qpro=!0);break;case 6:H=ne;break;case 204:ne&&(G=ne);break;case 222:G=ne;break;case 15:case 51:J.qpro||(ne[1].v=ne[1].v.slice(1));case 13:case 14:case 16:we==14&&(ne[2]&112)==112&&(ne[2]&15)>1&&(ne[2]&15)<15&&(ne[1].z=J.dateNF||Ht[14],J.cellDates&&(ne[1].t="d",ne[1].v=Jg(ne[1].v))),J.qpro&&ne[3]>te&&(K["!ref"]=ss(H),Z[se]=K,ue.push(se),K=J.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},te=ne[3],se=G||"Sheet"+(te+1),G="");var Ue=J.dense?(K[ne[0].r]||[])[ne[0].c]:K[Vt(ne[0])];if(Ue){Ue.t=ne[1].t,Ue.v=ne[1].v,ne[1].z!=null&&(Ue.z=ne[1].z),ne[1].f!=null&&(Ue.f=ne[1].f);break}J.dense?(K[ne[0].r]||(K[ne[0].r]=[]),K[ne[0].r][ne[0].c]=ne[1]):K[Vt(ne[0])]=ne[1];break}},J);else if(P[2]==26||P[2]==14)J.Enum=V,P[2]==14&&(J.qpro=!0,P.l=0),e(P,function(ne,de,we){switch(we){case 204:se=ne;break;case 22:ne[1].v=ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ne[3]>te&&(K["!ref"]=ss(H),Z[se]=K,ue.push(se),K=J.dense?[]:{},H={s:{r:0,c:0},e:{r:0,c:0}},te=ne[3],se="Sheet"+(te+1)),pe>0&&ne[0].r>=pe)break;J.dense?(K[ne[0].r]||(K[ne[0].r]=[]),K[ne[0].r][ne[0].c]=ne[1]):K[Vt(ne[0])]=ne[1],H.e.c<ne[0].c&&(H.e.c=ne[0].c),H.e.r<ne[0].r&&(H.e.r=ne[0].r);break;case 27:ne[14e3]&&(re[ne[14e3][0]]=ne[14e3][1]);break;case 1537:re[ne[0]]=ne[1],ne[0]==te&&(se=ne[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(K["!ref"]=ss(H),Z[G||se]=K,ue.push(G||se),!re.length)return{SheetNames:ue,Sheets:Z};for(var B={},oe=[],fe=0;fe<re.length;++fe)Z[ue[fe]]?(oe.push(re[fe]||ue[fe]),B[re[fe]]=Z[re[fe]]||Z[ue[fe]]):(oe.push(re[fe]),B[re[fe]]={"!ref":"A1"});return{SheetNames:oe,Sheets:B}}function r(P,Y){var J=Y||{};if(+J.codepage>=0&&ki(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var K=hn(),se=Cs(P["!ref"]),G=Array.isArray(P),te=[];ht(K,0,i(1030)),ht(K,6,d(se));for(var Z=Math.min(se.e.r,8191),ue=se.s.r;ue<=Z;++ue)for(var re=qa(ue),H=se.s.c;H<=se.e.c;++H){ue===se.s.r&&(te[H]=Ta(H));var pe=te[H]+re,B=G?(P[ue]||[])[H]:P[pe];if(!(!B||B.t=="z"))if(B.t=="n")(B.v|0)==B.v&&B.v>=-32768&&B.v<=32767?ht(K,13,g(ue,H,B.v)):ht(K,14,b(ue,H,B.v));else{var oe=Bl(B);ht(K,15,f(ue,H,oe.slice(0,239)))}}return ht(K,1),K.end()}function n(P,Y){var J=Y||{};if(+J.codepage>=0&&ki(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var K=hn();ht(K,0,l(P));for(var se=0,G=0;se<P.SheetNames.length;++se)(P.Sheets[P.SheetNames[se]]||{})["!ref"]&&ht(K,27,W(P.SheetNames[se],G++));var te=0;for(se=0;se<P.SheetNames.length;++se){var Z=P.Sheets[P.SheetNames[se]];if(!(!Z||!Z["!ref"])){for(var ue=Cs(Z["!ref"]),re=Array.isArray(Z),H=[],pe=Math.min(ue.e.r,8191),B=ue.s.r;B<=pe;++B)for(var oe=qa(B),fe=ue.s.c;fe<=ue.e.c;++fe){B===ue.s.r&&(H[fe]=Ta(fe));var ne=H[fe]+oe,de=re?(Z[B]||[])[fe]:Z[ne];if(!(!de||de.t=="z"))if(de.t=="n")ht(K,23,U(B,fe,te,de.v));else{var we=Bl(de);ht(K,22,S(B,fe,te,we.slice(0,239)))}}++te}}return ht(K,1),K.end()}function i(P){var Y=Ke(2);return Y.write_shift(2,P),Y}function l(P){var Y=Ke(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var J=0,K=0,se=0,G=0;G<P.SheetNames.length;++G){var te=P.SheetNames[G],Z=P.Sheets[te];if(!(!Z||!Z["!ref"])){++se;var ue=gn(Z["!ref"]);J<ue.e.r&&(J=ue.e.r),K<ue.e.c&&(K=ue.e.c)}}return J>8191&&(J=8191),Y.write_shift(2,J),Y.write_shift(1,se),Y.write_shift(1,K),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(P,Y,J){var K={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&J.qpro?(K.s.c=P.read_shift(1),P.l++,K.s.r=P.read_shift(2),K.e.c=P.read_shift(1),P.l++,K.e.r=P.read_shift(2),K):(K.s.c=P.read_shift(2),K.s.r=P.read_shift(2),Y==12&&J.qpro&&(P.l+=2),K.e.c=P.read_shift(2),K.e.r=P.read_shift(2),Y==12&&J.qpro&&(P.l+=2),K.s.c==65535&&(K.s.c=K.e.c=K.s.r=K.e.r=0),K)}function d(P){var Y=Ke(8);return Y.write_shift(2,P.s.c),Y.write_shift(2,P.s.r),Y.write_shift(2,P.e.c),Y.write_shift(2,P.e.r),Y}function u(P,Y,J){var K=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(K[0].c=P.read_shift(1),K[3]=P.read_shift(1),K[0].r=P.read_shift(2),P.l+=2):(K[2]=P.read_shift(1),K[0].c=P.read_shift(2),K[0].r=P.read_shift(2)),K}function h(P,Y,J){var K=P.l+Y,se=u(P,Y,J);if(se[1].t="s",J.vers==20768){P.l++;var G=P.read_shift(1);return se[1].v=P.read_shift(G,"utf8"),se}return J.qpro&&P.l++,se[1].v=P.read_shift(K-P.l,"cstr"),se}function f(P,Y,J){var K=Ke(7+J.length);K.write_shift(1,255),K.write_shift(2,Y),K.write_shift(2,P),K.write_shift(1,39);for(var se=0;se<K.length;++se){var G=J.charCodeAt(se);K.write_shift(1,G>=128?95:G)}return K.write_shift(1,0),K}function x(P,Y,J){var K=u(P,Y,J);return K[1].v=P.read_shift(2,"i"),K}function g(P,Y,J){var K=Ke(7);return K.write_shift(1,255),K.write_shift(2,Y),K.write_shift(2,P),K.write_shift(2,J,"i"),K}function v(P,Y,J){var K=u(P,Y,J);return K[1].v=P.read_shift(8,"f"),K}function b(P,Y,J){var K=Ke(13);return K.write_shift(1,255),K.write_shift(2,Y),K.write_shift(2,P),K.write_shift(8,J,"f"),K}function y(P,Y,J){var K=P.l+Y,se=u(P,Y,J);if(se[1].v=P.read_shift(8,"f"),J.qpro)P.l=K;else{var G=P.read_shift(2);O(P.slice(P.l,P.l+G),se),P.l+=G}return se}function j(P,Y,J){var K=Y&32768;return Y&=-32769,Y=(K?P:0)+(Y>=8192?Y-16384:Y),(K?"":"$")+(J?Ta(Y):qa(Y))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},A=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function O(P,Y){Tr(P,0);for(var J=[],K=0,se="",G="",te="",Z="";P.l<P.length;){var ue=P[P.l++];switch(ue){case 0:J.push(P.read_shift(8,"f"));break;case 1:G=j(Y[0].c,P.read_shift(2),!0),se=j(Y[0].r,P.read_shift(2),!1),J.push(G+se);break;case 2:{var re=j(Y[0].c,P.read_shift(2),!0),H=j(Y[0].r,P.read_shift(2),!1);G=j(Y[0].c,P.read_shift(2),!0),se=j(Y[0].r,P.read_shift(2),!1),J.push(re+H+":"+G+se)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(P.read_shift(2));break;case 6:{for(var pe="";ue=P[P.l++];)pe+=String.fromCharCode(ue);J.push('"'+pe.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:Z=J.pop(),te=J.pop(),J.push(["AND","OR"][ue-20]+"("+te+","+Z+")");break;default:if(ue<32&&A[ue])Z=J.pop(),te=J.pop(),J.push(te+A[ue]+Z);else if(w[ue]){if(K=w[ue][1],K==69&&(K=P[P.l++]),K>J.length){console.error("WK1 bad formula parse 0x"+ue.toString(16)+":|"+J.join("|")+"|");return}var B=J.slice(-K);J.length-=K,J.push(w[ue][0]+"("+B.join(",")+")")}else return ue<=7?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=24?console.error("WK1 unsupported op "+ue.toString(16)):ue<=30?console.error("WK1 invalid opcode "+ue.toString(16)):ue<=115?console.error("WK1 unsupported function opcode "+ue.toString(16)):console.error("WK1 unrecognized opcode "+ue.toString(16))}}J.length==1?Y[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function C(P){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=P.read_shift(2),Y[3]=P[P.l++],Y[0].c=P[P.l++],Y}function E(P,Y){var J=C(P);return J[1].t="s",J[1].v=P.read_shift(Y-4,"cstr"),J}function S(P,Y,J,K){var se=Ke(6+K.length);se.write_shift(2,P),se.write_shift(1,J),se.write_shift(1,Y),se.write_shift(1,39);for(var G=0;G<K.length;++G){var te=K.charCodeAt(G);se.write_shift(1,te>=128?95:te)}return se.write_shift(1,0),se}function D(P,Y){var J=C(P);J[1].v=P.read_shift(2);var K=J[1].v>>1;if(J[1].v&1)switch(K&7){case 0:K=(K>>3)*5e3;break;case 1:K=(K>>3)*500;break;case 2:K=(K>>3)/20;break;case 3:K=(K>>3)/200;break;case 4:K=(K>>3)/2e3;break;case 5:K=(K>>3)/2e4;break;case 6:K=(K>>3)/16;break;case 7:K=(K>>3)/64;break}return J[1].v=K,J}function M(P,Y){var J=C(P),K=P.read_shift(4),se=P.read_shift(4),G=P.read_shift(2);if(G==65535)return K===0&&se===3221225472?(J[1].t="e",J[1].v=15):K===0&&se===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var te=G&32768;return G=(G&32767)-16446,J[1].v=(1-te*2)*(se*Math.pow(2,G+32)+K*Math.pow(2,G)),J}function U(P,Y,J,K){var se=Ke(14);if(se.write_shift(2,P),se.write_shift(1,J),se.write_shift(1,Y),K==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var G=0,te=0,Z=0,ue=0;return K<0&&(G=1,K=-K),te=Math.log2(K)|0,K/=Math.pow(2,te-31),ue=K>>>0,(ue&2147483648)==0&&(K/=2,++te,ue=K>>>0),K-=ue,ue|=2147483648,ue>>>=0,K*=Math.pow(2,32),Z=K>>>0,se.write_shift(4,Z),se.write_shift(4,ue),te+=16383+(G?32768:0),se.write_shift(2,te),se}function I(P,Y){var J=M(P);return P.l+=Y-14,J}function k(P,Y){var J=C(P),K=P.read_shift(4);return J[1].v=K>>6,J}function z(P,Y){var J=C(P),K=P.read_shift(8,"f");return J[1].v=K,J}function _(P,Y){var J=z(P);return P.l+=Y-10,J}function q(P,Y){return P[P.l+Y-1]==0?P.read_shift(Y,"cstr"):""}function L(P,Y){var J=P[P.l++];J>Y-1&&(J=Y-1);for(var K="";K.length<J;)K+=String.fromCharCode(P[P.l++]);return K}function Q(P,Y,J){if(!(!J.qpro||Y<21)){var K=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var se=P.read_shift(Y-21,"cstr");return[K,se]}}function X(P,Y){for(var J={},K=P.l+Y;P.l<K;){var se=P.read_shift(2);if(se==14e3){for(J[se]=[0,""],J[se][0]=P.read_shift(2);P[P.l];)J[se][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return J}function W(P,Y){var J=Ke(5+P.length);J.write_shift(2,14e3),J.write_shift(2,Y);for(var K=0;K<P.length;++K){var se=P.charCodeAt(K);J[J.l++]=se>127?95:se}return J[J.l++]=0,J}var ee={0:{n:"BOF",f:Xa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:q},222:{n:"SHEETNAMELP",f:L},65535:{n:""}},V={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:z},40:{n:"FORMULA28",f:_},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:q},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:n,to_workbook:s}})();function nW(e){var s={},a=e.match(Jr),r=0,n=!1;if(a)for(;r!=a.length;++r){var i=Wt(a[r]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;s.cp=pA[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=i.val;break;case"<sz":s.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":i.rgb&&(s.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return s}var iW=(function(){var e=of("t"),s=of("rPr");function a(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:As(l[1])},d=i.match(s);return d&&(o.s=nW(d[1])),o}var r=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(l){return l.replace(r,"").split(n).map(a).filter(function(o){return o.v})}})(),lW=(function(){var s=/(\r\n|\n)/g;function a(n,i,l){var o=[];n.u&&o.push("text-decoration: underline;"),n.uval&&o.push("text-underline-style:"+n.uval+";"),n.sz&&o.push("font-size:"+n.sz+"pt;"),n.outline&&o.push("text-effect: outline;"),n.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),n.b&&(i.push("<b>"),l.push("</b>")),n.i&&(i.push("<i>"),l.push("</i>")),n.strike&&(i.push("<s>"),l.push("</s>"));var d=n.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(i.push("<"+d+">"),l.push("</"+d+">")),l.push("</span>"),n}function r(n){var i=[[],n.v,[]];return n.v?(n.s&&a(n.s,i[0],i[2]),i[0].join("")+i[1].replace(s,"<br/>")+i[2].join("")):""}return function(i){return i.map(r).join("")}})(),oW=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,cW=/<(?:\w+:)?r>/,dW=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function zA(e,s){var a=s?s.cellHTML:!0,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=As(ia(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=ia(e),a&&(r.h=EA(r.t))):e.match(cW)&&(r.r=ia(e),r.t=As(ia((e.replace(dW,"").match(oW)||[]).join("").replace(Jr,""))),a&&(r.h=lW(iW(r.r)))),r):{t:""}}var uW=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,mW=/<(?:\w+:)?(?:si|sstItem)>/g,fW=/<\/(?:\w+:)?(?:si|sstItem)>/;function hW(e,s){var a=[],r="";if(!e)return a;var n=e.match(uW);if(n){r=n[2].replace(mW,"").split(fW);for(var i=0;i!=r.length;++i){var l=zA(r[i].trim(),s);l!=null&&(a[a.length]=l)}n=Wt(n[1]),a.Count=n.count,a.Unique=n.uniqueCount}return a}var xW=/^\s|\s$|[\t\n\r]/;function uL(e,s){if(!s.bookSST)return"";var a=[Ha];a[a.length]=ft("sst",null,{xmlns:md[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(e[r]!=null){var n=e[r],i="<si>";n.r?i+=n.r:(i+="<t",n.t||(n.t=""),n.t.match(xW)&&(i+=' xml:space="preserve"'),i+=">"+Ys(n.t)+"</t>"),i+="</si>",a[a.length]=i}return a.length>2&&(a[a.length]="</sst>",a[1]=a[1].replace("/>",">")),a.join("")}function pW(e){return[e.read_shift(4),e.read_shift(4)]}function gW(e,s){var a=[],r=!1;return Wl(e,function(i,l,o){switch(o){case 159:a.Count=i[0],a.Unique=i[1];break;case 19:a.push(i);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(l.T,!r||s.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),a}function bW(e,s){return s||(s=Ke(8)),s.write_shift(4,e.Count),s.write_shift(4,e.Unique),s}var vW=_H;function yW(e){var s=hn();st(s,159,bW(e));for(var a=0;a<e.length;++a)st(s,19,vW(e[a]));return st(s,160),s.end()}function mL(e){for(var s=[],a=e.split(""),r=0;r<a.length;++r)s[r]=a[r].charCodeAt(0);return s}function Dl(e,s){var a={};return a.Major=e.read_shift(2),a.Minor=e.read_shift(2),s>=4&&(e.l+=s-4),a}function NW(e){var s={};return s.id=e.read_shift(0,"lpp4"),s.R=Dl(e,4),s.U=Dl(e,4),s.W=Dl(e,4),s}function wW(e){for(var s=e.read_shift(4),a=e.l+s-4,r={},n=e.read_shift(4),i=[];n-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=i,e.l!=a)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+a);return r}function SW(e){var s=[];e.l+=4;for(var a=e.read_shift(4);a-- >0;)s.push(wW(e));return s}function jW(e){var s=[];e.l+=4;for(var a=e.read_shift(4);a-- >0;)s.push(e.read_shift(0,"lpp4"));return s}function AW(e){var s={};return e.read_shift(4),e.l+=4,s.id=e.read_shift(0,"lpp4"),s.name=e.read_shift(0,"lpp4"),s.R=Dl(e,4),s.U=Dl(e,4),s.W=Dl(e,4),s}function EW(e){var s=AW(e);if(s.ename=e.read_shift(0,"8lpp4"),s.blksz=e.read_shift(4),s.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function fL(e,s){var a=e.l+s,r={};r.Flags=e.read_shift(4)&63,e.l+=4,r.AlgID=e.read_shift(4);var n=!1;switch(r.AlgID){case 26126:case 26127:case 26128:n=r.Flags==36;break;case 26625:n=r.Flags==4;break;case 0:n=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(a-e.l>>1,"utf16le"),e.l=a,r}function hL(e,s){var a={},r=e.l+s;return e.l+=4,a.Salt=e.slice(e.l,e.l+16),e.l+=16,a.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),a.VerifierHash=e.slice(e.l,r),e.l=r,a}function CW(e){var s=Dl(e);switch(s.Minor){case 2:return[s.Minor,TW(e)];case 3:return[s.Minor,_W()];case 4:return[s.Minor,kW(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function TW(e){var s=e.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var a=e.read_shift(4),r=fL(e,a),n=hL(e,e.length-e.l);return{t:"Std",h:r,v:n}}function _W(){throw new Error("File is password-protected: ECMA-376 Extensible")}function kW(e){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var a=e.read_shift(e.length-e.l,"utf8"),r={};return a.replace(Jr,function(i){var l=Wt(i);switch(nl(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(o){r[o]=l[o]});break;case"<dataIntegrity":r.encryptedHmacKey=l.encryptedHmacKey,r.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(l);break;default:throw l[0]}}),r}function OW(e,s){var a={},r=a.EncryptionVersionInfo=Dl(e,4);if(s-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);a.Flags=e.read_shift(4),s-=4;var n=e.read_shift(4);return s-=4,a.EncryptionHeader=fL(e,n),s-=n,a.EncryptionVerifier=hL(e,s),a}function IW(e){var s={},a=s.EncryptionVersionInfo=Dl(e,4);if(a.Major!=1||a.Minor!=1)throw"unrecognized version code "+a.Major+" : "+a.Minor;return s.Salt=e.read_shift(16),s.EncryptedVerifier=e.read_shift(16),s.EncryptedVerifierHash=e.read_shift(16),s}function BA(e){var s=0,a,r=mL(e),n=r.length+1,i,l,o,d,u;for(a=Bo(n),a[0]=r.length,i=1;i!=n;++i)a[i]=r[i-1];for(i=n-1;i>=0;--i)l=a[i],o=(s&16384)===0?0:1,d=s<<1&32767,u=o|d,s=u^l;return s^52811}var xL=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],a=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(l){return(l/2|l*128)&255},n=function(l,o){return r(l^o)},i=function(l){for(var o=s[l.length-1],d=104,u=l.length-1;u>=0;--u)for(var h=l[u],f=0;f!=7;++f)h&64&&(o^=a[d]),h*=2,--d;return o};return function(l){for(var o=mL(l),d=i(o),u=o.length,h=Bo(16),f=0;f!=16;++f)h[f]=0;var x,g,v;for((u&1)===1&&(x=d>>8,h[u]=n(e[0],x),--u,x=d&255,g=o[o.length-1],h[u]=n(g,x));u>0;)--u,x=d>>8,h[u]=n(o[u],x),--u,x=d&255,h[u]=n(o[u],x);for(u=15,v=15-o.length;v>0;)x=d>>8,h[u]=n(e[v],x),--u,--v,x=d&255,h[u]=n(o[u],x),--u,--v;return h}})(),RW=function(e,s,a,r,n){n||(n=s),r||(r=xL(e));var i,l;for(i=0;i!=s.length;++i)l=s[i],l^=r[a],l=(l>>5|l<<3)&255,n[i]=l,++a;return[n,a,r]},PW=function(e){var s=0,a=xL(e);return function(r){var n=RW("",r,s,a);return s=n[1],n[0]}};function DW(e,s,a,r){var n={key:Xa(e),verificationBytes:Xa(e)};return a.password&&(n.verifier=BA(a.password)),r.valid=n.verificationBytes===n.verifier,r.valid&&(r.insitu=PW(a.password)),n}function MW(e,s,a){var r=a||{};return r.Info=e.read_shift(2),e.l-=2,r.Info===1?r.Data=IW(e):r.Data=OW(e,s),r}function LW(e,s,a){var r={Type:a.biff>=8?e.read_shift(2):0};return r.Type?MW(e,s-2,r):DW(e,a.biff>=8?s:s-2,a,r),r}var pL=(function(){function e(n,i){switch(i.type){case"base64":return s(Un(n),i);case"binary":return s(n,i);case"buffer":return s(cs&&Buffer.isBuffer(n)?n.toString("binary"):Xo(n),i);case"array":return s(Xc(n),i)}throw new Error("Unrecognized type "+i.type)}function s(n,i){var l=i||{},o=l.dense?[]:{},d=n.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(h,f){Array.isArray(o)&&(o[f]=[]);for(var x=/\\\w+\b/g,g=0,v,b=-1;v=x.exec(h);){switch(v[0]){case"\\cell":var y=h.slice(g,x.lastIndex-v[0].length);if(y[0]==" "&&(y=y.slice(1)),++b,y.length){var j={v:y,t:"s"};Array.isArray(o)?o[f][b]=j:o[Vt({r:f,c:b})]=j}break}g=x.lastIndex}b>u.e.c&&(u.e.c=b)}),o["!ref"]=ss(u),o}function a(n,i){return Zo(e(n,i),i)}function r(n){for(var i=["{\\rtf1\\ansi"],l=Cs(n["!ref"]),o,d=Array.isArray(n),u=l.s.r;u<=l.e.r;++u){i.push("\\trowd\\trautofit1");for(var h=l.s.c;h<=l.e.c;++h)i.push("\\cellx"+(h+1));for(i.push("\\pard\\intbl"),h=l.s.c;h<=l.e.c;++h){var f=Vt({r:u,c:h});o=d?(n[u]||[])[h]:n[f],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Bl(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:a,to_sheet:e,from_sheet:r}})();function FW(e){var s=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function mf(e){for(var s=0,a=1;s!=3;++s)a=a*256+(e[s]>255?255:e[s]<0?0:e[s]);return a.toString(16).toUpperCase().slice(1)}function UW(e){var s=e[0]/255,a=e[1]/255,r=e[2]/255,n=Math.max(s,a,r),i=Math.min(s,a,r),l=n-i;if(l===0)return[0,0,s];var o=0,d=0,u=n+i;switch(d=l/(u>1?2-u:u),n){case s:o=((a-r)/l+6)%6;break;case a:o=(r-s)/l+2;break;case r:o=(s-a)/l+4;break}return[o/6,d,u/2]}function zW(e){var s=e[0],a=e[1],r=e[2],n=a*2*(r<.5?r:1-r),i=r-n/2,l=[i,i,i],o=6*s,d;if(a!==0)switch(o|0){case 0:case 6:d=n*o,l[0]+=n,l[1]+=d;break;case 1:d=n*(2-o),l[0]+=d,l[1]+=n;break;case 2:d=n*(o-2),l[1]+=n,l[2]+=d;break;case 3:d=n*(4-o),l[1]+=d,l[2]+=n;break;case 4:d=n*(o-4),l[2]+=n,l[0]+=d;break;case 5:d=n*(6-o),l[2]+=d,l[0]+=n;break}for(var u=0;u!=3;++u)l[u]=Math.round(l[u]*255);return l}function Fp(e,s){if(s===0)return e;var a=UW(FW(e));return s<0?a[2]=a[2]*(1+s):a[2]=1-(1-a[2])*(1-s),mf(zW(a))}var gL=6,BW=15,$W=1,$r=gL;function ff(e){return Math.floor((e+Math.round(128/$r)/256)*$r)}function hf(e){return Math.floor((e-5)/$r*100+.5)/100}function Up(e){return Math.round((e*$r+5)/$r*256)/256}function r1(e){return Up(hf(ff(e)))}function $A(e){var s=Math.abs(e-r1(e)),a=$r;if(s>.005)for($r=$W;$r<BW;++$r)Math.abs(e-r1(e))<=s&&(s=Math.abs(e-r1(e)),a=$r);$r=a}function $o(e){e.width?(e.wpx=ff(e.width),e.wch=hf(e.wpx),e.MDW=$r):e.wpx?(e.wch=hf(e.wpx),e.width=Up(e.wch),e.MDW=$r):typeof e.wch=="number"&&(e.width=Up(e.wch),e.wpx=ff(e.width),e.MDW=$r),e.customWidth&&delete e.customWidth}var qW=96,bL=qW;function xf(e){return e*96/bL}function Du(e){return e*bL/96}var HW={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function VW(e,s,a,r){s.Borders=[];var n={},i=!1;(e[0].match(Jr)||[]).forEach(function(l){var o=Wt(l);switch(nl(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},o.diagonalUp&&(n.diagonalUp=pa(o.diagonalUp)),o.diagonalDown&&(n.diagonalDown=pa(o.diagonalDown)),s.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function GW(e,s,a,r){s.Fills=[];var n={},i=!1;(e[0].match(Jr)||[]).forEach(function(l){var o=Wt(l);switch(nl(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},s.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":o.patternType&&(n.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),o.indexed&&(n.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(n.bgColor.theme=parseInt(o.theme,10)),o.tint&&(n.bgColor.tint=parseFloat(o.tint)),o.rgb&&(n.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),o.theme&&(n.fgColor.theme=parseInt(o.theme,10)),o.tint&&(n.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(n.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function WW(e,s,a,r){s.Fonts=[];var n={},i=!1;(e[0].match(Jr)||[]).forEach(function(l){var o=Wt(l);switch(nl(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(n),n={};break;case"<name":o.val&&(n.name=ia(o.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=o.val?pa(o.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=o.val?pa(o.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(o.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=o.val?pa(o.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=o.val?pa(o.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=o.val?pa(o.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=o.val?pa(o.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=o.val?pa(o.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":o.val&&(n.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(n.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(n.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(n.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=pA[parseInt(o.val,10)];break;case"<color":if(n.color||(n.color={}),o.auto&&(n.color.auto=pa(o.auto)),o.rgb)n.color.rgb=o.rgb.slice(-6);else if(o.indexed){n.color.index=parseInt(o.indexed,10);var d=zc[n.color.index];n.color.index==81&&(d=zc[1]),d||(d=zc[1]),n.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else o.theme&&(n.color.theme=parseInt(o.theme,10),o.tint&&(n.color.tint=parseFloat(o.tint)),o.theme&&a.themeElements&&a.themeElements.clrScheme&&(n.color.rgb=Fp(a.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function QW(e,s,a){s.NumberFmt=[];for(var r=Ma(Ht),n=0;n<r.length;++n)s.NumberFmt[r[n]]=Ht[r[n]];var i=e[0].match(Jr);if(i)for(n=0;n<i.length;++n){var l=Wt(i[n]);switch(nl(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=As(ia(l.formatCode)),d=parseInt(l.numFmtId,10);if(s.NumberFmt[d]=o,d>0){if(d>392){for(d=392;d>60&&s.NumberFmt[d]!=null;--d);s.NumberFmt[d]=o}Pl(o,d)}}break;case"</numFmt>":break;default:if(a.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function KW(e){var s=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var r=a[0];r<=a[1];++r)e[r]!=null&&(s[s.length]=ft("numFmt",null,{numFmtId:r,formatCode:Ys(e[r])}))}),s.length===1?"":(s[s.length]="</numFmts>",s[0]=ft("numFmts",null,{count:s.length-2}).replace("/>",">"),s.join(""))}var Hx=["numFmtId","fillId","fontId","borderId","xfId"],Vx=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function JW(e,s,a){s.CellXf=[];var r,n=!1;(e[0].match(Jr)||[]).forEach(function(i){var l=Wt(i),o=0;switch(nl(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=l,delete r[0],o=0;o<Hx.length;++o)r[Hx[o]]&&(r[Hx[o]]=parseInt(r[Hx[o]],10));for(o=0;o<Vx.length;++o)r[Vx[o]]&&(r[Vx[o]]=pa(r[Vx[o]]));if(s.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(s.NumberFmt[r.numFmtId]==s.NumberFmt[o]){r.numFmtId=o;break}}s.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};l.vertical&&(d.vertical=l.vertical),l.horizontal&&(d.horizontal=l.horizontal),l.textRotation!=null&&(d.textRotation=l.textRotation),l.indent&&(d.indent=l.indent),l.wrapText&&(d.wrapText=pa(l.wrapText)),r.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(a&&a.WTF&&!n)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function YW(e){var s=[];return s[s.length]=ft("cellXfs",null),e.forEach(function(a){s[s.length]=ft("xf",null,a)}),s[s.length]="</cellXfs>",s.length===2?"":(s[0]=ft("cellXfs",null,{count:s.length-2}).replace("/>",">"),s.join(""))}var XW=(function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,a=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,d,u){var h={};if(!o)return h;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(s))&&QW(f,h,u),(f=o.match(n))&&WW(f,h,d,u),(f=o.match(r))&&GW(f,h,d,u),(f=o.match(i))&&VW(f,h,d,u),(f=o.match(a))&&JW(f,h,u),h}})();function vL(e,s){var a=[Ha,ft("styleSheet",null,{xmlns:md[0],"xmlns:vt":ir.vt})],r;return e.SSF&&(r=KW(e.SSF))!=null&&(a[a.length]=r),a[a.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',a[a.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',a[a.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',a[a.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=YW(s.cellXfs))&&(a[a.length]=r),a[a.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',a[a.length]='<dxfs count="0"/>',a[a.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',a.length>2&&(a[a.length]="</styleSheet>",a[1]=a[1].replace("/>",">")),a.join("")}function ZW(e,s){var a=e.read_shift(2),r=Qr(e);return[a,r]}function eQ(e,s,a){a||(a=Ke(6+4*s.length)),a.write_shift(2,e),br(s,a);var r=a.length>a.l?a.slice(0,a.l):a;return a.l==null&&(a.l=a.length),r}function tQ(e,s,a){var r={};r.sz=e.read_shift(2)/20;var n=MH(e);n.fItalic&&(r.italic=1),n.fCondense&&(r.condense=1),n.fExtend&&(r.extend=1),n.fShadow&&(r.shadow=1),n.fOutline&&(r.outline=1),n.fStrikeout&&(r.strike=1);var i=e.read_shift(2);switch(i===700&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(r.underline=l);var o=e.read_shift(1);o>0&&(r.family=o);var d=e.read_shift(1);switch(d>0&&(r.charset=d),e.l++,r.color=DH(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Qr(e),r}function sQ(e,s){s||(s=Ke(153)),s.write_shift(2,e.sz*20),LH(e,s),s.write_shift(2,e.bold?700:400);var a=0;e.vertAlign=="superscript"?a=1:e.vertAlign=="subscript"&&(a=2),s.write_shift(2,a),s.write_shift(1,e.underline||0),s.write_shift(1,e.family||0),s.write_shift(1,e.charset||0),s.write_shift(1,0),Dp(e.color,s);var r=0;return r=2,s.write_shift(1,r),br(e.name,s),s.length>s.l?s.slice(0,s.l):s}var aQ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],n1,rQ=Kr;function jO(e,s){s||(s=Ke(84)),n1||(n1=Qg(aQ));var a=n1[e.patternType];a==null&&(a=40),s.write_shift(4,a);var r=0;if(a!=40)for(Dp({auto:1},s),Dp({auto:1},s);r<12;++r)s.write_shift(4,0);else{for(;r<4;++r)s.write_shift(4,0);for(;r<12;++r)s.write_shift(4,0)}return s.length>s.l?s.slice(0,s.l):s}function nQ(e,s){var a=e.l+s,r=e.read_shift(2),n=e.read_shift(2);return e.l=a,{ixfe:r,numFmtId:n}}function yL(e,s,a){a||(a=Ke(16)),a.write_shift(2,s||0),a.write_shift(2,e.numFmtId||0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);var r=0;return a.write_shift(1,r),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(1,0),a}function xm(e,s){return s||(s=Ke(10)),s.write_shift(1,0),s.write_shift(1,0),s.write_shift(4,0),s.write_shift(4,0),s}var iQ=Kr;function lQ(e,s){return s||(s=Ke(51)),s.write_shift(1,0),xm(null,s),xm(null,s),xm(null,s),xm(null,s),xm(null,s),s.length>s.l?s.slice(0,s.l):s}function oQ(e,s){return s||(s=Ke(52)),s.write_shift(4,e.xfId),s.write_shift(2,1),s.write_shift(1,0),s.write_shift(1,0),Pp(e.name||"",s),s.length>s.l?s.slice(0,s.l):s}function cQ(e,s,a){var r=Ke(2052);return r.write_shift(4,e),Pp(s,r),Pp(a,r),r.length>r.l?r.slice(0,r.l):r}function dQ(e,s,a){var r={};r.NumberFmt=[];for(var n in Ht)r.NumberFmt[n]=Ht[n];r.CellXf=[],r.Fonts=[];var i=[],l=!1;return Wl(e,function(d,u,h){switch(h){case 44:r.NumberFmt[d[0]]=d[1],Pl(d[1],d[0]);break;case 43:r.Fonts.push(d),d.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(d.color.rgb=Fp(s.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&r.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(h),l=!0;break;case 38:i.pop(),l=!1;break;default:if(u.T>0)i.push(h);else if(u.T<0)i.pop();else if(!l||a.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function uQ(e,s){if(s){var a=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&++a}),a!=0&&(st(e,615,Pi(a)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&st(e,44,eQ(n,s[n]))}),st(e,616))}}function mQ(e){var s=1;st(e,611,Pi(s)),st(e,43,sQ({sz:12,color:{theme:1},name:"Calibri",family:2})),st(e,612)}function fQ(e){var s=2;st(e,603,Pi(s)),st(e,45,jO({patternType:"none"})),st(e,45,jO({patternType:"gray125"})),st(e,604)}function hQ(e){var s=1;st(e,613,Pi(s)),st(e,46,lQ()),st(e,614)}function xQ(e){var s=1;st(e,626,Pi(s)),st(e,47,yL({numFmtId:0},65535)),st(e,627)}function pQ(e,s){st(e,617,Pi(s.length)),s.forEach(function(a){st(e,47,yL(a,0))}),st(e,618)}function gQ(e){var s=1;st(e,619,Pi(s)),st(e,48,oQ({xfId:0,name:"Normal"})),st(e,620)}function bQ(e){var s=0;st(e,505,Pi(s)),st(e,506)}function vQ(e){var s=0;st(e,508,cQ(s,"TableStyleMedium9","PivotStyleMedium4")),st(e,509)}function yQ(e,s){var a=hn();return st(a,278),uQ(a,e.SSF),mQ(a),fQ(a),hQ(a),xQ(a),pQ(a,s.cellXfs),gQ(a),bQ(a),vQ(a),st(a,279),a.end()}var NQ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function wQ(e,s,a){s.themeElements.clrScheme=[];var r={};(e[0].match(Jr)||[]).forEach(function(n){var i=Wt(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=i.val;break;case"<a:sysClr":r.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(s.themeElements.clrScheme[NQ.indexOf(i[0])]=r,r={}):r.name=i[0].slice(3,i[0].length-1);break;default:if(a&&a.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function SQ(){}function jQ(){}var AQ=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,EQ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,CQ=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function TQ(e,s,a){s.themeElements={};var r;[["clrScheme",AQ,wQ],["fontScheme",EQ,SQ],["fmtScheme",CQ,jQ]].forEach(function(n){if(!(r=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](r,s,a)})}var _Q=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function NL(e,s){(!e||e.length===0)&&(e=qA());var a,r={};if(!(a=e.match(_Q)))throw new Error("themeElements not found in theme");return TQ(a[0],r,s),r.raw=e,r}function qA(e,s){if(s&&s.themeXLSX)return s.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var a=[Ha];return a[a.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',a[a.length]="<a:themeElements>",a[a.length]='<a:clrScheme name="Office">',a[a.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',a[a.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',a[a.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',a[a.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',a[a.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',a[a.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',a[a.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',a[a.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',a[a.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',a[a.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',a[a.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',a[a.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',a[a.length]="</a:clrScheme>",a[a.length]='<a:fontScheme name="Office">',a[a.length]="<a:majorFont>",a[a.length]='<a:latin typeface="Cambria"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Times New Roman"/>',a[a.length]='<a:font script="Hebr" typeface="Times New Roman"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="MoolBoran"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Times New Roman"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:majorFont>",a[a.length]="<a:minorFont>",a[a.length]='<a:latin typeface="Calibri"/>',a[a.length]='<a:ea typeface=""/>',a[a.length]='<a:cs typeface=""/>',a[a.length]='<a:font script="Jpan" typeface=" "/>',a[a.length]='<a:font script="Hang" typeface=" "/>',a[a.length]='<a:font script="Hans" typeface=""/>',a[a.length]='<a:font script="Hant" typeface=""/>',a[a.length]='<a:font script="Arab" typeface="Arial"/>',a[a.length]='<a:font script="Hebr" typeface="Arial"/>',a[a.length]='<a:font script="Thai" typeface="Tahoma"/>',a[a.length]='<a:font script="Ethi" typeface="Nyala"/>',a[a.length]='<a:font script="Beng" typeface="Vrinda"/>',a[a.length]='<a:font script="Gujr" typeface="Shruti"/>',a[a.length]='<a:font script="Khmr" typeface="DaunPenh"/>',a[a.length]='<a:font script="Knda" typeface="Tunga"/>',a[a.length]='<a:font script="Guru" typeface="Raavi"/>',a[a.length]='<a:font script="Cans" typeface="Euphemia"/>',a[a.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',a[a.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',a[a.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',a[a.length]='<a:font script="Thaa" typeface="MV Boli"/>',a[a.length]='<a:font script="Deva" typeface="Mangal"/>',a[a.length]='<a:font script="Telu" typeface="Gautami"/>',a[a.length]='<a:font script="Taml" typeface="Latha"/>',a[a.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',a[a.length]='<a:font script="Orya" typeface="Kalinga"/>',a[a.length]='<a:font script="Mlym" typeface="Kartika"/>',a[a.length]='<a:font script="Laoo" typeface="DokChampa"/>',a[a.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',a[a.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',a[a.length]='<a:font script="Viet" typeface="Arial"/>',a[a.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',a[a.length]='<a:font script="Geor" typeface="Sylfaen"/>',a[a.length]="</a:minorFont>",a[a.length]="</a:fontScheme>",a[a.length]='<a:fmtScheme name="Office">',a[a.length]="<a:fillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="1"/>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:lin ang="16200000" scaled="0"/>',a[a.length]="</a:gradFill>",a[a.length]="</a:fillStyleLst>",a[a.length]="<a:lnStyleLst>",a[a.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',a[a.length]="</a:lnStyleLst>",a[a.length]="<a:effectStyleLst>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]="</a:effectStyle>",a[a.length]="<a:effectStyle>",a[a.length]="<a:effectLst>",a[a.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',a[a.length]="</a:effectLst>",a[a.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',a[a.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',a[a.length]="</a:effectStyle>",a[a.length]="</a:effectStyleLst>",a[a.length]="<a:bgFillStyleLst>",a[a.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]='<a:gradFill rotWithShape="1">',a[a.length]="<a:gsLst>",a[a.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',a[a.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',a[a.length]="</a:gsLst>",a[a.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',a[a.length]="</a:gradFill>",a[a.length]="</a:bgFillStyleLst>",a[a.length]="</a:fmtScheme>",a[a.length]="</a:themeElements>",a[a.length]="<a:objectDefaults>",a[a.length]="<a:spDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',a[a.length]="</a:spDef>",a[a.length]="<a:lnDef>",a[a.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',a[a.length]="</a:lnDef>",a[a.length]="</a:objectDefaults>",a[a.length]="<a:extraClrSchemeLst/>",a[a.length]="</a:theme>",a.join("")}function kQ(e,s,a){var r=e.l+s,n=e.read_shift(4);if(n!==124226){if(!a.cellStyles){e.l=r;return}var i=e.slice(e.l);e.l=r;var l;try{l=f8(i,{type:"array"})}catch{return}var o=Pn(l,"theme/theme/theme1.xml",!0);if(o)return NL(o,a)}}function OQ(e){return e.read_shift(4)}function IQ(e){var s={};switch(s.xclrType=e.read_shift(2),s.nTintShade=e.read_shift(2),s.xclrType){case 0:e.l+=4;break;case 1:s.xclrValue=RQ(e,4);break;case 2:s.xclrValue=eL(e);break;case 3:s.xclrValue=OQ(e);break;case 4:e.l+=4;break}return e.l+=8,s}function RQ(e,s){return Kr(e,s)}function PQ(e,s){return Kr(e,s)}function DQ(e){var s=e.read_shift(2),a=e.read_shift(2)-4,r=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=IQ(e);break;case 6:r[1]=PQ(e,a);break;case 14:case 15:r[1]=e.read_shift(a===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+a)}return r}function MQ(e,s){var a=e.l+s;e.l+=2;var r=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),i=[];n-- >0;)i.push(DQ(e,a-e.l));return{ixfe:r,ext:i}}function LQ(e,s){s.forEach(function(a){a[0]})}function FQ(e,s){return{flags:e.read_shift(4),version:e.read_shift(4),name:Qr(e)}}function UQ(e){var s=Ke(12+2*e.name.length);return s.write_shift(4,e.flags),s.write_shift(4,e.version),br(e.name,s),s.slice(0,s.l)}function zQ(e){for(var s=[],a=e.read_shift(4);a-- >0;)s.push([e.read_shift(4),e.read_shift(4)]);return s}function BQ(e){var s=Ke(4+8*e.length);s.write_shift(4,e.length);for(var a=0;a<e.length;++a)s.write_shift(4,e[a][0]),s.write_shift(4,e[a][1]);return s}function $Q(e,s){var a=Ke(8+2*s.length);return a.write_shift(4,e),br(s,a),a.slice(0,a.l)}function qQ(e){return e.l+=4,e.read_shift(4)!=0}function HQ(e,s){var a=Ke(8);return a.write_shift(4,e),a.write_shift(4,1),a}function VQ(e,s,a){var r={Types:[],Cell:[],Value:[]},n=a||{},i=[],l=!1,o=2;return Wl(e,function(d,u,h){switch(h){case 335:r.Types.push({name:d.name});break;case 51:d.forEach(function(f){o==1?r.Cell.push({type:r.Types[f[0]-1].name,index:f[1]}):o==0&&r.Value.push({type:r.Types[f[0]-1].name,index:f[1]})});break;case 337:o=d?1:0;break;case 338:o=2;break;case 35:i.push(h),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!u.T){if(!l||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+h.toString(16))}}}),r}function GQ(){var e=hn();return st(e,332),st(e,334,Pi(1)),st(e,335,UQ({name:"XLDAPR",version:12e4,flags:3496657072})),st(e,336),st(e,339,$Q(1,"XLDAPR")),st(e,52),st(e,35,Pi(514)),st(e,4096,Pi(0)),st(e,4097,li(1)),st(e,36),st(e,53),st(e,340),st(e,337,HQ(1)),st(e,51,BQ([[1,0]])),st(e,338),st(e,333),e.end()}function WQ(e,s,a){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var n=!1,i=2,l;return e.replace(Jr,function(o){var d=Wt(o);switch(nl(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<r.Types.length;++u)r.Types[u].name==d.name&&(l=r.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?r.Cell.push({type:r.Types[d.t-1].name,index:+d.v}):i==0&&r.Value.push({type:r.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+d.i);break;default:if(!n&&a.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return o}),r}function wL(){var e=[Ha];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function QQ(e){var s=[];if(!e)return s;var a=1;return(e.match(Jr)||[]).forEach(function(r){var n=Wt(r);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?a=n.i:n.i=a,s.push(n);break}}),s}function KQ(e){var s={};s.i=e.read_shift(4);var a={};a.r=e.read_shift(4),a.c=e.read_shift(4),s.r=Vt(a);var r=e.read_shift(1);return r&2&&(s.l="1"),r&8&&(s.a="1"),s}function JQ(e,s,a){var r=[];return Wl(e,function(i,l,o){switch(o){case 63:r.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function YQ(e,s,a,r){if(!e)return e;var n=r||{},i=!1;Wl(e,function(o,d,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!d.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},n)}function XQ(e,s){if(!e)return"??";var a=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][a].Target}var gu=1024;function SL(e,s){for(var a=[21600,21600],r=["m0,0l0",a[1],a[0],a[1],a[0],"0xe"].join(","),n=[ft("xml",null,{"xmlns:v":On.v,"xmlns:o":On.o,"xmlns:x":On.x,"xmlns:mv":On.mv}).replace(/\/>/,">"),ft("o:shapelayout",ft("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ft("v:shapetype",[ft("v:stroke",null,{joinstyle:"miter"}),ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:a.join(","),path:r})];gu<e*1e3;)gu+=1e3;return s.forEach(function(i){var l=_a(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var d=o.type=="gradient"?ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ft("v:fill",d,o),h={on:"t",obscured:"t"};++gu,n=n.concat(["<v:shape"+cf({id:"_x0000_s"+gu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ft("v:shadow",null,h),ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",_r("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),_r("x:AutoFill","False"),_r("x:Row",String(l.r)),_r("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),n.push("</xml>"),n.join("")}function AO(e,s,a,r){var n=Array.isArray(e),i;s.forEach(function(l){var o=_a(l.ref);if(n?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},n?e[o.r][o.c]=i:e[l.ref]=i;var d=Cs(e["!ref"]||"BDWGO1000001:A1");d.s.r>o.r&&(d.s.r=o.r),d.e.r<o.r&&(d.e.r=o.r),d.s.c>o.c&&(d.s.c=o.c),d.e.c<o.c&&(d.e.c=o.c);var u=ss(d);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var h={a:l.author,t:l.t,r:l.r,T:a};l.h&&(h.h=l.h);for(var f=i.c.length-1;f>=0;--f){if(!a&&i.c[f].T)return;a&&!i.c[f].T&&i.c.splice(f,1)}if(a&&r){for(f=0;f<r.length;++f)if(h.a==r[f].id){h.a=r[f].name||h.a;break}}i.c.push(h)})}function ZQ(e,s){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var a=[],r=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&a.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var d=Wt(o[0]),u={author:d.authorId&&a[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},h=_a(d.ref);if(!(s.sheetRows&&s.sheetRows<=h.r)){var f=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),x=!!f&&!!f[1]&&zA(f[1])||{r:"",t:"",h:""};u.r=x.r,x.r=="<t></t>"&&(x.t=x.h=""),u.t=(x.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(u.h=x.h),r.push(u)}}}}),r}function jL(e){var s=[Ha,ft("comments",null,{xmlns:md[0]})],a=[];return s.push("<authors>"),e.forEach(function(r){r[1].forEach(function(n){var i=Ys(n.a);a.indexOf(i)==-1&&(a.push(i),s.push("<author>"+i+"</author>")),n.T&&n.ID&&a.indexOf("tc="+n.ID)==-1&&(a.push("tc="+n.ID),s.push("<author>tc="+n.ID+"</author>"))})}),a.length==0&&(a.push("SheetJ5"),s.push("<author>SheetJ5</author>")),s.push("</authors>"),s.push("<commentList>"),e.forEach(function(r){var n=0,i=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?n=a.indexOf("tc="+r[1][0].ID):r[1].forEach(function(d){d.a&&(n=a.indexOf(Ys(d.a))),i.push(d.t||"")}),s.push('<comment ref="'+r[0]+'" authorId="'+n+'"><text>'),i.length<=1)s.push(_r("t",Ys(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;s.push(_r("t",Ys(l)))}s.push("</text></comment>")}),s.push("</commentList>"),s.length>2&&(s[s.length]="</comments>",s[1]=s[1].replace("/>",">")),s.join("")}function eK(e,s){var a=[],r=!1,n={},i=0;return e.replace(Jr,function(o,d){var u=Wt(o);switch(nl(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":n.t!=null&&a.push(n);break;case"<text>":case"<text":i=d+o.length;break;case"</text>":n.t=e.slice(i,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&s.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),a}function tK(e,s,a){var r=[Ha,ft("ThreadedComments",null,{xmlns:ir.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(n){var i="";(n[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&s.indexOf(l.a)==-1&&s.push(l.a);var d={ref:n[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+a.tcid++).slice(-12)+"}"};o==0?i=d.id:d.parentId=i,l.ID=d.id,l.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+s.indexOf(l.a)).slice(-12)+"}"),r.push(ft("threadedComment",_r("text",l.t||""),d))})}),r.push("</ThreadedComments>"),r.join("")}function sK(e,s){var a=[],r=!1;return e.replace(Jr,function(i){var l=Wt(i);switch(nl(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":a.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&s.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),a}function aK(e){var s=[Ha,ft("personList",null,{xmlns:ir.TCMNT,"xmlns:x":md[0]}).replace(/[\/]>/,">")];return e.forEach(function(a,r){s.push(ft("person",null,{displayName:a,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:a,providerId:"None"}))}),s.push("</personList>"),s.join("")}function rK(e){var s={};s.iauthor=e.read_shift(4);var a=pd(e);return s.rfx=a.s,s.ref=Vt(a.s),e.l+=16,s}function nK(e,s){return s==null&&(s=Ke(36)),s.write_shift(4,e[1].iauthor),u0(e[0],s),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s}var iK=Qr;function lK(e){return br(e.slice(0,54))}function oK(e,s){var a=[],r=[],n={},i=!1;return Wl(e,function(o,d,u){switch(u){case 632:r.push(o);break;case 635:n=o;break;case 637:n.t=o.t,n.h=o.h,n.r=o.r;break;case 636:if(n.author=r[n.iauthor],delete n.iauthor,s.sheetRows&&n.rfx&&s.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,a.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function cK(e){var s=hn(),a=[];return st(s,628),st(s,630),e.forEach(function(r){r[1].forEach(function(n){a.indexOf(n.a)>-1||(a.push(n.a.slice(0,54)),st(s,632,lK(n.a)))})}),st(s,631),st(s,633),e.forEach(function(r){r[1].forEach(function(n){n.iauthor=a.indexOf(n.a);var i={s:_a(r[0]),e:_a(r[0])};st(s,635,nK([i,n])),n.t&&n.t.length>0&&st(s,637,OH(n)),st(s,636),delete n.iauthor})}),st(s,634),st(s,629),s.end()}var dK="application/vnd.ms-office.vbaProject";function uK(e){var s=It.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(a,r){if(!(a.slice(-1)==="/"||!a.match(/_VBA_PROJECT_CUR/))){var n=a.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");It.utils.cfb_add(s,n,e.FileIndex[r].content)}}),It.write(s)}function mK(e,s){s.FullPaths.forEach(function(a,r){if(r!=0){var n=a.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");n.slice(-1)!=="/"&&It.utils.cfb_add(e,n,s.FileIndex[r].content)}})}var AL=["xlsb","xlsm","xlam","biff8","xla"];function fK(){return{"!type":"dialog"}}function hK(){return{"!type":"dialog"}}function xK(){return{"!type":"macro"}}function pK(){return{"!type":"macro"}}var Au=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function a(r,n,i,l){var o=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,h=l.length>0?parseInt(l,10)|0:0;return o?h+=s.c:--h,d?u+=s.r:--u,n+(o?"":"$")+Ta(h)+(d?"":"$")+qa(u)}return function(n,i){return s=i,n.replace(e,a)}})(),HA=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,VA=(function(){return function(s,a){return s.replace(HA,function(r,n,i,l,o,d){var u=OA(l)-(i?0:a.c),h=kA(d)-(o?0:a.r),f=h==0?"":o?h+1:"["+h+"]",x=u==0?"":i?u+1:"["+u+"]";return n+"R"+f+"C"+x})}})();function EL(e,s){return e.replace(HA,function(a,r,n,i,l,o){return r+(n=="$"?n+i:Ta(OA(i)+s.c))+(l=="$"?l+o:qa(kA(o)+s.r))})}function gK(e,s,a){var r=gn(s),n=r.s,i=_a(a),l={r:i.r-n.r,c:i.c-n.c};return EL(e,l)}function bK(e){return e.length!=1}function EO(e){return e.replace(/_xlfn\./g,"")}function Ka(e){e.l+=1}function qo(e,s){var a=e.read_shift(2);return[a&16383,a>>14&1,a>>15&1]}function CL(e,s,a){var r=2;if(a){if(a.biff>=2&&a.biff<=5)return TL(e);a.biff==12&&(r=4)}var n=e.read_shift(r),i=e.read_shift(r),l=qo(e),o=qo(e);return{s:{r:n,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function TL(e){var s=qo(e),a=qo(e),r=e.read_shift(1),n=e.read_shift(1);return{s:{r:s[0],c:r,cRel:s[1],rRel:s[2]},e:{r:a[0],c:n,cRel:a[1],rRel:a[2]}}}function vK(e,s,a){if(a.biff<8)return TL(e);var r=e.read_shift(a.biff==12?4:2),n=e.read_shift(a.biff==12?4:2),i=qo(e),l=qo(e);return{s:{r,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:l[0],cRel:l[1],rRel:l[2]}}}function _L(e,s,a){if(a&&a.biff>=2&&a.biff<=5)return yK(e);var r=e.read_shift(a&&a.biff==12?4:2),n=qo(e);return{r,c:n[0],cRel:n[1],rRel:n[2]}}function yK(e){var s=qo(e),a=e.read_shift(1);return{r:s[0],c:a,cRel:s[1],rRel:s[2]}}function NK(e){var s=e.read_shift(2),a=e.read_shift(2);return{r:s,c:a&255,fQuoted:!!(a&16384),cRel:a>>15,rRel:a>>15}}function wK(e,s,a){var r=a&&a.biff?a.biff:8;if(r>=2&&r<=5)return SK(e);var n=e.read_shift(r>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;n>524287;)n-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:l,rRel:o}}function SK(e){var s=e.read_shift(2),a=e.read_shift(1),r=(s&32768)>>15,n=(s&16384)>>14;return s&=16383,r==1&&s>=8192&&(s=s-16384),n==1&&a>=128&&(a=a-256),{r:s,c:a,cRel:n,rRel:r}}function jK(e,s,a){var r=(e[e.l++]&96)>>5,n=CL(e,a.biff>=2&&a.biff<=5?6:8,a);return[r,n]}function AK(e,s,a){var r=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),i=8;if(a)switch(a.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=CL(e,i,a);return[r,n,l]}function EK(e,s,a){var r=(e[e.l++]&96)>>5;return e.l+=a&&a.biff>8?12:a.biff<8?6:8,[r]}function CK(e,s,a){var r=(e[e.l++]&96)>>5,n=e.read_shift(2),i=8;if(a)switch(a.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[r,n]}function TK(e,s,a){var r=(e[e.l++]&96)>>5,n=vK(e,s-1,a);return[r,n]}function _K(e,s,a){var r=(e[e.l++]&96)>>5;return e.l+=a.biff==2?6:a.biff==12?14:7,[r]}function CO(e){var s=e[e.l+1]&1,a=1;return e.l+=4,[s,a]}function kK(e,s,a){e.l+=2;for(var r=e.read_shift(a&&a.biff==2?1:2),n=[],i=0;i<=r;++i)n.push(e.read_shift(a&&a.biff==2?1:2));return n}function OK(e,s,a){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(a&&a.biff==2?1:2)]}function IK(e,s,a){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(a&&a.biff==2?1:2)]}function RK(e){var s=e[e.l+1]&255?1:0;return e.l+=2,[s,e.read_shift(2)]}function PK(e,s,a){var r=e[e.l+1]&255?1:0;return e.l+=a&&a.biff==2?3:4,[r]}function kL(e){var s=e.read_shift(1),a=e.read_shift(1);return[s,a]}function DK(e){return e.read_shift(2),kL(e)}function MK(e){return e.read_shift(2),kL(e)}function LK(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=_L(e,0,a);return[r,n]}function FK(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=wK(e,0,a);return[r,n]}function UK(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);a&&a.biff==5&&(e.l+=12);var i=_L(e,0,a);return[r,n,i]}function zK(e,s,a){var r=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(a&&a.biff<=3?1:2);return[qJ[n],RL[n],r]}function BK(e,s,a){var r=e[e.l++],n=e.read_shift(1),i=a&&a.biff<=3?[r==88?-1:0,e.read_shift(1)]:$K(e);return[n,(i[0]===0?RL:$J)[i[1]]]}function $K(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function qK(e,s,a){e.l+=a&&a.biff==2?3:4}function HK(e,s,a){if(e.l++,a&&a.biff==12)return[e.read_shift(4,"i"),0];var r=e.read_shift(2),n=e.read_shift(a&&a.biff==2?1:2);return[r,n]}function VK(e){return e.l++,Ql[e.read_shift(1)]}function GK(e){return e.l++,e.read_shift(2)}function WK(e){return e.l++,e.read_shift(1)!==0}function QK(e){return e.l++,Vr(e)}function KK(e,s,a){return e.l++,lh(e,s-1,a)}function JK(e,s){var a=[e.read_shift(1)];if(s==12)switch(a[0]){case 2:a[0]=4;break;case 4:a[0]=16;break;case 0:a[0]=1;break;case 1:a[0]=2;break}switch(a[0]){case 4:a[1]=Ba(e,1)?"TRUE":"FALSE",s!=12&&(e.l+=7);break;case 37:case 16:a[1]=Ql[e[e.l]],e.l+=s==12?4:8;break;case 0:e.l+=8;break;case 1:a[1]=Vr(e);break;case 2:a[1]=gd(e,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+a[0])}return a}function YK(e,s,a){for(var r=e.read_shift(a.biff==12?4:2),n=[],i=0;i!=r;++i)n.push((a.biff==12?pd:Yg)(e));return n}function XK(e,s,a){var r=0,n=0;a.biff==12?(r=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),r=1+e.read_shift(2)),a.biff>=2&&a.biff<8&&(--r,--n==0&&(n=256));for(var i=0,l=[];i!=r&&(l[i]=[]);++i)for(var o=0;o!=n;++o)l[i][o]=JK(e,a.biff);return l}function ZK(e,s,a){var r=e.read_shift(1)>>>5&3,n=!a||a.biff>=8?4:2,i=e.read_shift(n);switch(a.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[r,0,i]}function eJ(e,s,a){if(a.biff==5)return tJ(e);var r=e.read_shift(1)>>>5&3,n=e.read_shift(2),i=e.read_shift(4);return[r,n,i]}function tJ(e){var s=e.read_shift(1)>>>5&3,a=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[s,a,r]}function sJ(e,s,a){var r=e.read_shift(1)>>>5&3;e.l+=a&&a.biff==2?3:4;var n=e.read_shift(a&&a.biff==2?1:2);return[r,n]}function aJ(e,s,a){var r=e.read_shift(1)>>>5&3,n=e.read_shift(a&&a.biff==2?1:2);return[r,n]}function rJ(e,s,a){var r=e.read_shift(1)>>>5&3;return e.l+=4,a.biff<8&&e.l--,a.biff==12&&(e.l+=2),[r]}function nJ(e,s,a){var r=(e[e.l++]&96)>>5,n=e.read_shift(2),i=4;if(a)switch(a.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[r,n]}var iJ=Kr,lJ=Kr,oJ=Kr;function ch(e,s,a){return e.l+=2,[NK(e)]}function GA(e){return e.l+=6,[]}var cJ=ch,dJ=GA,uJ=GA,mJ=ch;function OL(e){return e.l+=2,[Xa(e),e.read_shift(2)&1]}var fJ=ch,hJ=OL,xJ=GA,pJ=ch,gJ=ch,bJ=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function vJ(e){e.l+=2;var s=e.read_shift(2),a=e.read_shift(2),r=e.read_shift(4),n=e.read_shift(2),i=e.read_shift(2),l=bJ[a>>2&31];return{ixti:s,coltype:a&3,rt:l,idx:r,c:n,C:i}}function yJ(e){return e.l+=2,[e.read_shift(4)]}function NJ(e,s,a){return e.l+=5,e.l+=2,e.l+=a.biff==2?1:4,["PTGSHEET"]}function wJ(e,s,a){return e.l+=a.biff==2?4:5,["PTGENDSHEET"]}function SJ(e){var s=e.read_shift(1)>>>5&3,a=e.read_shift(2);return[s,a]}function jJ(e){var s=e.read_shift(1)>>>5&3,a=e.read_shift(2);return[s,a]}function AJ(e){return e.l+=4,[0,0]}var TO={1:{n:"PtgExp",f:HK},2:{n:"PtgTbl",f:oJ},3:{n:"PtgAdd",f:Ka},4:{n:"PtgSub",f:Ka},5:{n:"PtgMul",f:Ka},6:{n:"PtgDiv",f:Ka},7:{n:"PtgPower",f:Ka},8:{n:"PtgConcat",f:Ka},9:{n:"PtgLt",f:Ka},10:{n:"PtgLe",f:Ka},11:{n:"PtgEq",f:Ka},12:{n:"PtgGe",f:Ka},13:{n:"PtgGt",f:Ka},14:{n:"PtgNe",f:Ka},15:{n:"PtgIsect",f:Ka},16:{n:"PtgUnion",f:Ka},17:{n:"PtgRange",f:Ka},18:{n:"PtgUplus",f:Ka},19:{n:"PtgUminus",f:Ka},20:{n:"PtgPercent",f:Ka},21:{n:"PtgParen",f:Ka},22:{n:"PtgMissArg",f:Ka},23:{n:"PtgStr",f:KK},26:{n:"PtgSheet",f:NJ},27:{n:"PtgEndSheet",f:wJ},28:{n:"PtgErr",f:VK},29:{n:"PtgBool",f:WK},30:{n:"PtgInt",f:GK},31:{n:"PtgNum",f:QK},32:{n:"PtgArray",f:_K},33:{n:"PtgFunc",f:zK},34:{n:"PtgFuncVar",f:BK},35:{n:"PtgName",f:ZK},36:{n:"PtgRef",f:LK},37:{n:"PtgArea",f:jK},38:{n:"PtgMemArea",f:sJ},39:{n:"PtgMemErr",f:iJ},40:{n:"PtgMemNoMem",f:lJ},41:{n:"PtgMemFunc",f:aJ},42:{n:"PtgRefErr",f:rJ},43:{n:"PtgAreaErr",f:EK},44:{n:"PtgRefN",f:FK},45:{n:"PtgAreaN",f:TK},46:{n:"PtgMemAreaN",f:SJ},47:{n:"PtgMemNoMemN",f:jJ},57:{n:"PtgNameX",f:eJ},58:{n:"PtgRef3d",f:UK},59:{n:"PtgArea3d",f:AK},60:{n:"PtgRefErr3d",f:nJ},61:{n:"PtgAreaErr3d",f:CK},255:{}},EJ={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},CJ={1:{n:"PtgElfLel",f:OL},2:{n:"PtgElfRw",f:pJ},3:{n:"PtgElfCol",f:cJ},6:{n:"PtgElfRwV",f:gJ},7:{n:"PtgElfColV",f:mJ},10:{n:"PtgElfRadical",f:fJ},11:{n:"PtgElfRadicalS",f:xJ},13:{n:"PtgElfColS",f:dJ},15:{n:"PtgElfColSV",f:uJ},16:{n:"PtgElfRadicalLel",f:hJ},25:{n:"PtgList",f:vJ},29:{n:"PtgSxName",f:yJ},255:{}},TJ={0:{n:"PtgAttrNoop",f:AJ},1:{n:"PtgAttrSemi",f:PK},2:{n:"PtgAttrIf",f:IK},4:{n:"PtgAttrChoose",f:kK},8:{n:"PtgAttrGoto",f:OK},16:{n:"PtgAttrSum",f:qK},32:{n:"PtgAttrBaxcel",f:CO},33:{n:"PtgAttrBaxcel",f:CO},64:{n:"PtgAttrSpace",f:DK},65:{n:"PtgAttrSpaceSemi",f:MK},128:{n:"PtgAttrIfError",f:RK},255:{}};function dh(e,s,a,r){if(r.biff<8)return Kr(e,s);for(var n=e.l+s,i=[],l=0;l!==a.length;++l)switch(a[l][0]){case"PtgArray":a[l][1]=XK(e,0,r),i.push(a[l][1]);break;case"PtgMemArea":a[l][2]=YK(e,a[l][1],r),i.push(a[l][2]);break;case"PtgExp":r&&r.biff==12&&(a[l][1][1]=e.read_shift(4),i.push(a[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+a[l][0]}return s=n-e.l,s!==0&&i.push(Kr(e,s)),i}function uh(e,s,a){for(var r=e.l+s,n,i,l=[];r!=e.l;)s=r-e.l,i=e[e.l],n=TO[i]||TO[EJ[i]],(i===24||i===25)&&(n=(i===24?CJ:TJ)[e[e.l+1]]),!n||!n.f?Kr(e,s):l.push([n.n,n.f(e,s,a)]);return l}function _J(e){for(var s=[],a=0;a<e.length;++a){for(var r=e[a],n=[],i=0;i<r.length;++i){var l=r[i];if(l)switch(l[0]){case 2:n.push('"'+l[1].replace(/"/g,'""')+'"');break;default:n.push(l[1])}else n.push("")}s.push(n.join(","))}return s.join(";")}var kJ={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function OJ(e,s){if(!e&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function IL(e,s,a){if(!e)return"SH33TJSERR0";if(a.biff>8&&(!e.XTI||!e.XTI[s]))return e.SheetNames[s];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[s];if(a.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":e.XTI[s-1];if(!r)return"SH33TJSERR1";var n="";if(a.biff>8)switch(e[r[0]][0]){case 357:return n=r[1]==-1?"#REF":e.SheetNames[r[1]],r[1]==r[2]?n:n+":"+e.SheetNames[r[2]];case 358:return a.SID!=null?e.SheetNames[a.SID]:"SH33TJSSAME"+e[r[0]][0];case 355:default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return n=r[1]==-1?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?n:n+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[r[0]][0][3]?(n=r[1]==-1?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?n:n+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function _O(e,s,a){var r=IL(e,s,a);return r=="#REF"?r:OJ(r,a)}function Br(e,s,a,r,n){var i=n&&n.biff||8,l={s:{c:0,r:0}},o=[],d,u,h,f=0,x=0,g,v="";if(!e[0]||!e[0][0])return"";for(var b=-1,y="",j=0,w=e[0].length;j<w;++j){var A=e[0][j];switch(A[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=o.pop(),u=o.pop(),b>=0){switch(e[0][b][1][0]){case 0:y=Ia(" ",e[0][b][1][1]);break;case 1:y=Ia("\r",e[0][b][1][1]);break;default:if(y="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}u=u+y,b=-1}o.push(u+kJ[A[0]]+d);break;case"PtgIsect":d=o.pop(),u=o.pop(),o.push(u+" "+d);break;case"PtgUnion":d=o.pop(),u=o.pop(),o.push(u+","+d);break;case"PtgRange":d=o.pop(),u=o.pop(),o.push(u+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=Bm(A[1][1],l,n),o.push($m(h,i));break;case"PtgRefN":h=a?Bm(A[1][1],a,n):A[1][1],o.push($m(h,i));break;case"PtgRef3d":f=A[1][1],h=Bm(A[1][2],l,n),v=_O(r,f,n),o.push(v+"!"+$m(h,i));break;case"PtgFunc":case"PtgFuncVar":var O=A[1][0],C=A[1][1];O||(O=0),O&=127;var E=O==0?[]:o.slice(-O);o.length-=O,C==="User"&&(C=E.shift()),o.push(C+"("+E.join(",")+")");break;case"PtgBool":o.push(A[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(A[1]);break;case"PtgNum":o.push(String(A[1]));break;case"PtgStr":o.push('"'+A[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(A[1]);break;case"PtgAreaN":g=rO(A[1][1],a?{s:a}:l,n),o.push(t1(g,n));break;case"PtgArea":g=rO(A[1][1],l,n),o.push(t1(g,n));break;case"PtgArea3d":f=A[1][1],g=A[1][2],v=_O(r,f,n),o.push(v+"!"+t1(g,n));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=A[1][2];var S=(r.names||[])[x-1]||(r[0]||[])[x],D=S?S.Name:"SH33TJSNAME"+String(x);D&&D.slice(0,6)=="_xlfn."&&!n.xlfn&&(D=D.slice(6)),o.push(D);break;case"PtgNameX":var M=A[1][1];x=A[1][2];var U;if(n.biff<=5)M<0&&(M=-M),r[M]&&(U=r[M][x]);else{var I="";if(((r[M]||[])[0]||[])[0]==14849||(((r[M]||[])[0]||[])[0]==1025?r[M][x]&&r[M][x].itab>0&&(I=r.SheetNames[r[M][x].itab-1]+"!"):I=r.SheetNames[x-1]+"!"),r[M]&&r[M][x])I+=r[M][x].Name;else if(r[0]&&r[0][x])I+=r[0][x].Name;else{var k=(IL(r,M,n)||"").split(";;");k[x-1]?I=k[x-1]:I+="SH33TJSERRX"}o.push(I);break}U||(U={Name:"SH33TJSERRY"}),o.push(U.Name);break;case"PtgParen":var z="(",_=")";if(b>=0){switch(y="",e[0][b][1][0]){case 2:z=Ia(" ",e[0][b][1][1])+z;break;case 3:z=Ia("\r",e[0][b][1][1])+z;break;case 4:_=Ia(" ",e[0][b][1][1])+_;break;case 5:_=Ia("\r",e[0][b][1][1])+_;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][b][1][0])}b=-1}o.push(z+o.pop()+_);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:A[1][1],r:A[1][0]};var q={c:a.c,r:a.r};if(r.sharedf[Vt(h)]){var L=r.sharedf[Vt(h)];o.push(Br(L,l,q,r,n))}else{var Q=!1;for(d=0;d!=r.arrayf.length;++d)if(u=r.arrayf[d],!(h.c<u[0].s.c||h.c>u[0].e.c)&&!(h.r<u[0].s.r||h.r>u[0].e.r)){o.push(Br(u[1],l,q,r,n)),Q=!0;break}Q||o.push(A[1])}break;case"PtgArray":o.push("{"+_J(A[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+A[1].idx+"[#"+A[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(A));default:throw new Error("Unrecognized Formula Token: "+String(A))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&b>=0&&X.indexOf(e[0][j][0])==-1){A=e[0][b];var W=!0;switch(A[1][0]){case 4:W=!1;case 0:y=Ia(" ",A[1][1]);break;case 5:W=!1;case 1:y=Ia("\r",A[1][1]);break;default:if(y="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+A[1][0])}o.push((W?y:"")+o.pop()+(W?"":y)),b=-1}}if(o.length>1&&n.WTF)throw new Error("bad formula stack");return o[0]}function IJ(e,s,a){var r=e.l+s,n=a.biff==2?1:2,i,l=e.read_shift(n);if(l==65535)return[[],Kr(e,s-2)];var o=uh(e,l,a);return s!==l+n&&(i=dh(e,s-l-n,o,a)),e.l=r,[o,i]}function RJ(e,s,a){var r=e.l+s,n=a.biff==2?1:2,i,l=e.read_shift(n);if(l==65535)return[[],Kr(e,s-2)];var o=uh(e,l,a);return s!==l+n&&(i=dh(e,s-l-n,o,a)),e.l=r,[o,i]}function PJ(e,s,a,r){var n=e.l+s,i=uh(e,r,a),l;return n!==e.l&&(l=dh(e,n-e.l,i,a)),[i,l]}function DJ(e,s,a){var r=e.l+s,n,i=e.read_shift(2),l=uh(e,i,a);return i==65535?[[],Kr(e,s-2)]:(s!==i+2&&(n=dh(e,r-i-2,l,a)),[l,n])}function MJ(e){var s;if(_l(e,e.l+6)!==65535)return[Vr(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return s=e[e.l+2]===1,e.l+=8,[s,"b"];case 2:return s=e[e.l+2],e.l+=8,[s,"e"];case 3:return e.l+=8,["","s"]}return[]}function LJ(e){if(e==null){var s=Ke(8);return s.write_shift(1,3),s.write_shift(1,0),s.write_shift(2,0),s.write_shift(2,0),s.write_shift(2,65535),s}else if(typeof e=="number")return Zc(e);return Zc(0)}function i1(e,s,a){var r=e.l+s,n=il(e);a.biff==2&&++e.l;var i=MJ(e),l=e.read_shift(1);a.biff!=2&&(e.read_shift(1),a.biff>=5&&e.read_shift(4));var o=RJ(e,r-e.l,a);return{cell:n,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function FJ(e,s,a,r,n){var i=td(s,a,n),l=LJ(e.v),o=Ke(6),d=33;o.write_shift(2,d),o.write_shift(4,0);for(var u=Ke(e.bf.length),h=0;h<e.bf.length;++h)u[h]=e.bf[h];var f=pr([i,l,o,u]);return f}function Xg(e,s,a){var r=e.read_shift(4),n=uh(e,r,a),i=e.read_shift(4),l=i>0?dh(e,i,n,a):null;return[n,l]}var UJ=Xg,Zg=Xg,zJ=Xg,BJ=Xg,$J={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},RL={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qJ={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function kO(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,a){return a.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function HJ(e){var s="of:="+e.replace(HA,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return s.replace(/;/g,"|").replace(/,/g,";")}function l1(e){var s=e.split(":"),a=s[0].split(".")[0];return[a,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}function VJ(e){return e.replace(/\./,"!")}var Hm={},Eu={},Vm=typeof Map<"u";function WA(e,s,a){var r=0,n=e.length;if(a){if(Vm?a.has(s):Object.prototype.hasOwnProperty.call(a,s)){for(var i=Vm?a.get(s):a[s];r<i.length;++r)if(e[i[r]].t===s)return e.Count++,i[r]}}else for(;r<n;++r)if(e[r].t===s)return e.Count++,r;return e[n]={t:s},e.Count++,e.Unique++,a&&(Vm?(a.has(s)||a.set(s,[]),a.get(s).push(n)):(Object.prototype.hasOwnProperty.call(a,s)||(a[s]=[]),a[s].push(n))),n}function eb(e,s){var a={min:e+1,max:e+1},r=-1;return s.MDW&&($r=s.MDW),s.width!=null?a.customWidth=1:s.wpx!=null?r=hf(s.wpx):s.wch!=null&&(r=s.wch),r>-1?(a.width=Up(r),a.customWidth=1):s.width!=null&&(a.width=s.width),s.hidden&&(a.hidden=!0),s.level!=null&&(a.outlineLevel=a.level=s.level),a}function qc(e,s){if(e){var a=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(a=[1,1,1,1,.5,.5]),e.left==null&&(e.left=a[0]),e.right==null&&(e.right=a[1]),e.top==null&&(e.top=a[2]),e.bottom==null&&(e.bottom=a[3]),e.header==null&&(e.header=a[4]),e.footer==null&&(e.footer=a[5])}}function ec(e,s,a){var r=a.revssf[s.z!=null?s.z:"General"],n=60,i=e.length;if(r==null&&a.ssf){for(;n<392;++n)if(a.ssf[n]==null){Pl(s.z,n),a.ssf[n]=s.z,a.revssf[s.z]=r=n;break}}for(n=0;n!=i;++n)if(e[n].numFmtId===r)return n;return e[i]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function PL(e,s,a,r,n,i){try{r.cellNF&&(e.z=Ht[s])}catch(o){if(r.WTF)throw o}if(!(e.t==="z"&&!r.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ba(e.v)),(!r||r.cellText!==!1)&&e.t!=="z")try{if(Ht[s]==null&&Pl($9[s]||"General",s),e.t==="e")e.w=e.w||Ql[e.v];else if(s===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lf(e.v);else if(e.t==="d"){var l=dr(e.v);(l|0)===l?e.w=l.toString(10):e.w=lf(l)}else{if(e.v===void 0)return"";e.w=Yc(e.v,Eu)}else e.t==="d"?e.w=hi(s,dr(e.v),Eu):e.w=hi(s,e.v,Eu)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&a!=null)try{e.s=i.Fills[a],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Fp(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Fp(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&i.Fills)throw o}}}function GJ(e,s,a){if(e&&e["!ref"]){var r=Cs(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+a+"): "+e["!ref"])}}function WJ(e,s){var a=Cs(s);a.s.r<=a.e.r&&a.s.c<=a.e.c&&a.s.r>=0&&a.s.c>=0&&(e["!ref"]=ss(a))}var QJ=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,KJ=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,JJ=/<(?:\w:)?hyperlink [^>]*>/mg,YJ=/"(\w*:\w*)"/,XJ=/<(?:\w:)?col\b[^>]*[\/]?>/g,ZJ=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,eY=/<(?:\w:)?pageMargins[^>]*\/>/g,DL=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,tY=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,sY=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function aY(e,s,a,r,n,i,l){if(!e)return e;r||(r={"!id":{}});var o=s.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",h="",f=e.match(KJ);f?(u=e.slice(0,f.index),h=e.slice(f.index+f[0].length)):u=h=e;var x=u.match(DL);x?QA(x[0],o,n,a):(x=u.match(tY))&&nY(x[0],x[1]||"",o,n,a);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var v=u.slice(g,g+50).match(YJ);v&&WJ(o,v[1])}var b=u.match(sY);b&&b[1]&&bY(b[1],n);var y=[];if(s.cellStyles){var j=u.match(XJ);j&&fY(y,j)}f&&NY(f[1],o,s,d,i,l);var w=h.match(ZJ);w&&(o["!autofilter"]=xY(w[0]));var A=[],O=h.match(QJ);if(O)for(g=0;g!=O.length;++g)A[g]=Cs(O[g].slice(O[g].indexOf('"')+1));var C=h.match(JJ);C&&dY(o,C,r);var E=h.match(eY);if(E&&(o["!margins"]=uY(Wt(E[0]))),!o["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(o["!ref"]=ss(d)),s.sheetRows>0&&o["!ref"]){var S=Cs(o["!ref"]);s.sheetRows<=+S.e.r&&(S.e.r=s.sheetRows-1,S.e.r>d.e.r&&(S.e.r=d.e.r),S.e.r<S.s.r&&(S.s.r=S.e.r),S.e.c>d.e.c&&(S.e.c=d.e.c),S.e.c<S.s.c&&(S.s.c=S.e.c),o["!fullref"]=o["!ref"],o["!ref"]=ss(S))}return y.length>0&&(o["!cols"]=y),A.length>0&&(o["!merges"]=A),o}function rY(e){if(e.length===0)return"";for(var s='<mergeCells count="'+e.length+'">',a=0;a!=e.length;++a)s+='<mergeCell ref="'+ss(e[a])+'"/>';return s+"</mergeCells>"}function QA(e,s,a,r){var n=Wt(e);a.Sheets[r]||(a.Sheets[r]={}),n.codeName&&(a.Sheets[r].CodeName=As(ia(n.codeName)))}function nY(e,s,a,r,n){QA(e.slice(0,e.indexOf(">")),a,r,n)}function iY(e,s,a,r,n){var i=!1,l={},o=null;if(r.bookType!=="xlsx"&&s.vbaraw){var d=s.SheetNames[a];try{s.Workbook&&(d=s.Workbook.Sheets[a].CodeName||d)}catch{}i=!0,l.codeName=Qi(Ys(d))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+ft("outlinePr",null,u)}!i&&!o||(n[n.length]=ft("sheetPr",o,l))}var lY=["objects","scenarios","selectLockedCells","selectUnlockedCells"],oY=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function cY(e){var s={sheet:1};return lY.forEach(function(a){e[a]!=null&&e[a]&&(s[a]="1")}),oY.forEach(function(a){e[a]!=null&&!e[a]&&(s[a]="0")}),e.password&&(s.password=BA(e.password).toString(16).toUpperCase()),ft("sheetProtection",null,s)}function dY(e,s,a){for(var r=Array.isArray(e),n=0;n!=s.length;++n){var i=Wt(ia(s[n]),!0);if(!i.ref)return;var l=((a||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+As(i.location))):(i.Target="#"+As(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Cs(i.ref),d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var h=Vt({c:u,r:d});r?(e[d]||(e[d]=[]),e[d][u]||(e[d][u]={t:"z",v:void 0}),e[d][u].l=i):(e[h]||(e[h]={t:"z",v:void 0}),e[h].l=i)}}}function uY(e){var s={};return["left","right","top","bottom","header","footer"].forEach(function(a){e[a]&&(s[a]=parseFloat(e[a]))}),s}function mY(e){return qc(e),ft("pageMargins",null,e)}function fY(e,s){for(var a=!1,r=0;r!=s.length;++r){var n=Wt(s[r],!0);n.hidden&&(n.hidden=pa(n.hidden));var i=parseInt(n.min,10)-1,l=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!a&&n.width&&(a=!0,$A(n.width)),$o(n);i<=l;)e[i++]=va(n)}}function hY(e,s){for(var a=["<cols>"],r,n=0;n!=s.length;++n)(r=s[n])&&(a[a.length]=ft("col",null,eb(n,r)));return a[a.length]="</cols>",a.join("")}function xY(e){var s={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return s}function pY(e,s,a,r){var n=typeof e.ref=="string"?e.ref:ss(e.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var i=a.Workbook.Names,l=gn(n);l.s.r==l.e.r&&(l.e.r=gn(s["!ref"]).e.r,n=ss(l));for(var o=0;o<i.length;++o){var d=i[o];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==r){d.Ref="'"+a.SheetNames[r]+"'!"+n;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+n}),ft("autoFilter",null,{ref:n})}var gY=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function bY(e,s){s.Views||(s.Views=[{}]),(e.match(gY)||[]).forEach(function(a,r){var n=Wt(a);s.Views[r]||(s.Views[r]={}),+n.zoomScale&&(s.Views[r].zoom=+n.zoomScale),pa(n.rightToLeft)&&(s.Views[r].RTL=!0)})}function vY(e,s,a,r){var n={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(n.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),ft("sheetViews",ft("sheetView",null,n),{})}function yY(e,s,a,r){if(e.c&&a["!comments"].push([s,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var n="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":n=e.v?"1":"0";break;case"n":n=""+e.v;break;case"e":n=Ql[e.v];break;case"d":r&&r.cellDates?n=ba(e.v,-1).toISOString():(e=va(e),e.t="n",n=""+(e.v=dr(ba(e.v)))),typeof e.z>"u"&&(e.z=Ht[14]);break;default:n=e.v;break}var o=_r("v",Ys(n)),d={r:s},u=ec(r.cellXfs,e,r);switch(u!==0&&(d.s=u),e.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=_r("v",""+WA(r.Strings,e.v,r.revStrings)),d.t="s";break}d.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var h=e.F&&e.F.slice(0,s.length)==s?{t:"array",ref:e.F}:null;o=ft("f",Ys(e.f),h)+(e.v!=null?o:"")}return e.l&&a["!links"].push([s,e.l]),e.D&&(d.cm=1),ft("c",o,d)}var NY=(function(){var e=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,a=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=of("v"),l=of("f");return function(d,u,h,f,x,g){for(var v=0,b="",y=[],j=[],w=0,A=0,O=0,C="",E,S,D=0,M=0,U,I,k=0,z=0,_=Array.isArray(g.CellXf),q,L=[],Q=[],X=Array.isArray(u),W=[],ee={},V=!1,P=!!h.sheetStubs,Y=d.split(s),J=0,K=Y.length;J!=K;++J){b=Y[J].trim();var se=b.length;if(se!==0){var G=0;e:for(v=0;v<se;++v)switch(b[v]){case">":if(b[v-1]!="/"){++v;break e}if(h&&h.cellStyles){if(S=Wt(b.slice(G,v),!0),D=S.r!=null?parseInt(S.r,10):D+1,M=-1,h.sheetRows&&h.sheetRows<D)continue;ee={},V=!1,S.ht&&(V=!0,ee.hpt=parseFloat(S.ht),ee.hpx=Du(ee.hpt)),S.hidden=="1"&&(V=!0,ee.hidden=!0),S.outlineLevel!=null&&(V=!0,ee.level=+S.outlineLevel),V&&(W[D-1]=ee)}break;case"<":G=v;break}if(G>=v)break;if(S=Wt(b.slice(G,v),!0),D=S.r!=null?parseInt(S.r,10):D+1,M=-1,!(h.sheetRows&&h.sheetRows<D)){f.s.r>D-1&&(f.s.r=D-1),f.e.r<D-1&&(f.e.r=D-1),h&&h.cellStyles&&(ee={},V=!1,S.ht&&(V=!0,ee.hpt=parseFloat(S.ht),ee.hpx=Du(ee.hpt)),S.hidden=="1"&&(V=!0,ee.hidden=!0),S.outlineLevel!=null&&(V=!0,ee.level=+S.outlineLevel),V&&(W[D-1]=ee)),y=b.slice(v).split(e);for(var te=0;te!=y.length&&y[te].trim().charAt(0)=="<";++te);for(y=y.slice(te),v=0;v!=y.length;++v)if(b=y[v].trim(),b.length!==0){if(j=b.match(a),w=v,A=0,O=0,b="<c "+(b.slice(0,1)=="<"?">":"")+b,j!=null&&j.length===2){for(w=0,C=j[1],A=0;A!=C.length&&!((O=C.charCodeAt(A)-64)<1||O>26);++A)w=26*w+O;--w,M=w}else++M;for(A=0;A!=b.length&&b.charCodeAt(A)!==62;++A);if(++A,S=Wt(b.slice(0,A),!0),S.r||(S.r=Vt({r:D-1,c:M})),C=b.slice(A),E={t:""},(j=C.match(i))!=null&&j[1]!==""&&(E.v=As(j[1])),h.cellFormula){if((j=C.match(l))!=null&&j[1]!==""){if(E.f=As(ia(j[1])).replace(/\r\n/g,`
`),h.xlfn||(E.f=EO(E.f)),j[0].indexOf('t="array"')>-1)E.F=(C.match(n)||[])[1],E.F.indexOf(":")>-1&&L.push([Cs(E.F),E.F]);else if(j[0].indexOf('t="shared"')>-1){I=Wt(j[0]);var Z=As(ia(j[1]));h.xlfn||(Z=EO(Z)),Q[parseInt(I.si,10)]=[I,Z,S.r]}}else(j=C.match(/<f[^>]*\/>/))&&(I=Wt(j[0]),Q[I.si]&&(E.f=gK(Q[I.si][1],Q[I.si][2],S.r)));var ue=_a(S.r);for(A=0;A<L.length;++A)ue.r>=L[A][0].s.r&&ue.r<=L[A][0].e.r&&ue.c>=L[A][0].s.c&&ue.c<=L[A][0].e.c&&(E.F=L[A][1])}if(S.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(P)E.t="z";else continue;else E.t=S.t||"n";switch(f.s.c>M&&(f.s.c=M),f.e.c<M&&(f.e.c=M),E.t){case"n":if(E.v==""||E.v==null){if(!P)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!P)continue;E.t="z"}else U=Hm[parseInt(E.v,10)],E.v=U.t,E.r=U.r,h.cellHTML&&(E.h=U.h);break;case"str":E.t="s",E.v=E.v!=null?ia(E.v):"",h.cellHTML&&(E.h=EA(E.v));break;case"inlineStr":j=C.match(r),E.t="s",j!=null&&(U=zA(j[1]))?(E.v=U.t,h.cellHTML&&(E.h=U.h)):E.v="";break;case"b":E.v=pa(E.v);break;case"d":h.cellDates?E.v=ba(E.v,1):(E.v=dr(ba(E.v,1)),E.t="n");break;case"e":(!h||h.cellText!==!1)&&(E.w=E.v),E.v=L8[E.v];break}if(k=z=0,q=null,_&&S.s!==void 0&&(q=g.CellXf[S.s],q!=null&&(q.numFmtId!=null&&(k=q.numFmtId),h.cellStyles&&q.fillId!=null&&(z=q.fillId))),PL(E,k,z,h,x,g),h.cellDates&&_&&E.t=="n"&&o0(Ht[k])&&(E.t="d",E.v=Jg(E.v)),S.cm&&h.xlmeta){var re=(h.xlmeta.Cell||[])[+S.cm-1];re&&re.type=="XLDAPR"&&(E.D=!0)}if(X){var H=_a(S.r);u[H.r]||(u[H.r]=[]),u[H.r][H.c]=E}else u[S.r]=E}}}}W.length>0&&(u["!rows"]=W)}})();function wY(e,s,a,r){var n=[],i=[],l=Cs(e["!ref"]),o="",d,u="",h=[],f=0,x=0,g=e["!rows"],v=Array.isArray(e),b={r:u},y,j=-1;for(x=l.s.c;x<=l.e.c;++x)h[x]=Ta(x);for(f=l.s.r;f<=l.e.r;++f){for(i=[],u=qa(f),x=l.s.c;x<=l.e.c;++x){d=h[x]+u;var w=v?(e[f]||[])[x]:e[d];w!==void 0&&(o=yY(w,d,e,s))!=null&&i.push(o)}(i.length>0||g&&g[f])&&(b={r:u},g&&g[f]&&(y=g[f],y.hidden&&(b.hidden=1),j=-1,y.hpx?j=xf(y.hpx):y.hpt&&(j=y.hpt),j>-1&&(b.ht=j,b.customHeight=1),y.level&&(b.outlineLevel=y.level)),n[n.length]=ft("row",i.join(""),b))}if(g)for(;f<g.length;++f)g&&g[f]&&(b={r:f+1},y=g[f],y.hidden&&(b.hidden=1),j=-1,y.hpx?j=xf(y.hpx):y.hpt&&(j=y.hpt),j>-1&&(b.ht=j,b.customHeight=1),y.level&&(b.outlineLevel=y.level),n[n.length]=ft("row","",b));return n.join("")}function ML(e,s,a,r){var n=[Ha,ft("worksheet",null,{xmlns:md[0],"xmlns:r":ir.r})],i=a.SheetNames[e],l=0,o="",d=a.Sheets[i];d==null&&(d={});var u=d["!ref"]||"A1",h=Cs(u);if(h.e.c>16383||h.e.r>1048575){if(s.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),u=ss(h)}r||(r={}),d["!comments"]=[];var f=[];iY(d,a,e,s,n),n[n.length]=ft("dimension",null,{ref:u}),n[n.length]=vY(d,s,e,a),s.sheetFormat&&(n[n.length]=ft("sheetFormatPr",null,{defaultRowHeight:s.sheetFormat.defaultRowHeight||"16",baseColWidth:s.sheetFormat.baseColWidth||"10",outlineLevelRow:s.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(n[n.length]=hY(d,d["!cols"])),n[l=n.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(o=wY(d,s),o.length>0&&(n[n.length]=o)),n.length>l+1&&(n[n.length]="</sheetData>",n[l]=n[l].replace("/>",">")),d["!protect"]&&(n[n.length]=cY(d["!protect"])),d["!autofilter"]!=null&&(n[n.length]=pY(d["!autofilter"],d,a,e)),d["!merges"]!=null&&d["!merges"].length>0&&(n[n.length]=rY(d["!merges"]));var x=-1,g,v=-1;return d["!links"].length>0&&(n[n.length]="<hyperlinks>",d["!links"].forEach(function(b){b[1].Target&&(g={ref:b[0]},b[1].Target.charAt(0)!="#"&&(v=Js(r,-1,Ys(b[1].Target).replace(/#.*$/,""),ms.HLINK),g["r:id"]="rId"+v),(x=b[1].Target.indexOf("#"))>-1&&(g.location=Ys(b[1].Target.slice(x+1))),b[1].Tooltip&&(g.tooltip=Ys(b[1].Tooltip)),n[n.length]=ft("hyperlink",null,g))}),n[n.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(n[n.length]=mY(d["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&(n[n.length]=_r("ignoredErrors",ft("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(v=Js(r,-1,"../drawings/drawing"+(e+1)+".xml",ms.DRAW),n[n.length]=ft("drawing",null,{"r:id":"rId"+v}),d["!drawing"]=f),d["!comments"].length>0&&(v=Js(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ms.VML),n[n.length]=ft("legacyDrawing",null,{"r:id":"rId"+v}),d["!legacy"]=v),n.length>1&&(n[n.length]="</worksheet>",n[1]=n[1].replace("/>",">")),n.join("")}function SY(e,s){var a={},r=e.l+s;a.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=r,i&7&&(a.level=i&7),i&16&&(a.hidden=!0),i&32&&(a.hpt=n/20),a}function jY(e,s,a){var r=Ke(145),n=(a["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var i=320;n.hpx?i=xf(n.hpx)*20:n.hpt&&(i=n.hpt*20),r.write_shift(2,i),r.write_shift(1,0);var l=0;n.level&&(l|=n.level),n.hidden&&(l|=16),(n.hpx||n.hpt)&&(l|=32),r.write_shift(1,l),r.write_shift(1,0);var o=0,d=r.l;r.l+=4;for(var u={r:e,c:0},h=0;h<16;++h)if(!(s.s.c>h+1<<10||s.e.c<h<<10)){for(var f=-1,x=-1,g=h<<10;g<h+1<<10;++g){u.c=g;var v=Array.isArray(a)?(a[u.r]||[])[u.c]:a[Vt(u)];v&&(f<0&&(f=g),x=g)}f<0||(++o,r.write_shift(4,f),r.write_shift(4,x))}var b=r.l;return r.l=d,r.write_shift(4,o),r.l=b,r.length>r.l?r.slice(0,r.l):r}function AY(e,s,a,r){var n=jY(r,a,s);(n.length>17||(s["!rows"]||[])[r])&&st(e,0,n)}var EY=pd,CY=u0;function TY(){}function _Y(e,s){var a={},r=e[e.l];return++e.l,a.above=!(r&64),a.left=!(r&128),e.l+=18,a.name=IH(e),a}function kY(e,s,a){a==null&&(a=Ke(84+4*e.length));var r=192;s&&(s.above&&(r&=-65),s.left&&(r&=-129)),a.write_shift(1,r);for(var n=1;n<3;++n)a.write_shift(1,0);return Dp({auto:1},a),a.write_shift(-4,-1),a.write_shift(-4,-1),I8(e,a),a.slice(0,a.l)}function OY(e){var s=vi(e);return[s]}function IY(e,s,a){return a==null&&(a=Ke(8)),fd(s,a)}function RY(e){var s=hd(e);return[s]}function PY(e,s,a){return a==null&&(a=Ke(4)),xd(s,a)}function DY(e){var s=vi(e),a=e.read_shift(1);return[s,a,"b"]}function MY(e,s,a){return a==null&&(a=Ke(9)),fd(s,a),a.write_shift(1,e.v?1:0),a}function LY(e){var s=hd(e),a=e.read_shift(1);return[s,a,"b"]}function FY(e,s,a){return a==null&&(a=Ke(5)),xd(s,a),a.write_shift(1,e.v?1:0),a}function UY(e){var s=vi(e),a=e.read_shift(1);return[s,a,"e"]}function zY(e,s,a){return a==null&&(a=Ke(9)),fd(s,a),a.write_shift(1,e.v),a}function BY(e){var s=hd(e),a=e.read_shift(1);return[s,a,"e"]}function $Y(e,s,a){return a==null&&(a=Ke(8)),xd(s,a),a.write_shift(1,e.v),a.write_shift(2,0),a.write_shift(1,0),a}function qY(e){var s=vi(e),a=e.read_shift(4);return[s,a,"s"]}function HY(e,s,a){return a==null&&(a=Ke(12)),fd(s,a),a.write_shift(4,s.v),a}function VY(e){var s=hd(e),a=e.read_shift(4);return[s,a,"s"]}function GY(e,s,a){return a==null&&(a=Ke(8)),xd(s,a),a.write_shift(4,s.v),a}function WY(e){var s=vi(e),a=Vr(e);return[s,a,"n"]}function QY(e,s,a){return a==null&&(a=Ke(16)),fd(s,a),Zc(e.v,a),a}function LL(e){var s=hd(e),a=Vr(e);return[s,a,"n"]}function KY(e,s,a){return a==null&&(a=Ke(12)),xd(s,a),Zc(e.v,a),a}function JY(e){var s=vi(e),a=DA(e);return[s,a,"n"]}function YY(e,s,a){return a==null&&(a=Ke(12)),fd(s,a),R8(e.v,a),a}function XY(e){var s=hd(e),a=DA(e);return[s,a,"n"]}function ZY(e,s,a){return a==null&&(a=Ke(8)),xd(s,a),R8(e.v,a),a}function eX(e){var s=vi(e),a=IA(e);return[s,a,"is"]}function tX(e){var s=vi(e),a=Qr(e);return[s,a,"str"]}function sX(e,s,a){return a==null&&(a=Ke(12+4*e.v.length)),fd(s,a),br(e.v,a),a.length>a.l?a.slice(0,a.l):a}function aX(e){var s=hd(e),a=Qr(e);return[s,a,"str"]}function rX(e,s,a){return a==null&&(a=Ke(8+4*e.v.length)),xd(s,a),br(e.v,a),a.length>a.l?a.slice(0,a.l):a}function nX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=e.read_shift(1),l=[n,i,"b"];if(a.cellFormula){e.l+=2;var o=Zg(e,r-e.l,a);l[3]=Br(o,null,n,a.supbooks,a)}else e.l=r;return l}function iX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=e.read_shift(1),l=[n,i,"e"];if(a.cellFormula){e.l+=2;var o=Zg(e,r-e.l,a);l[3]=Br(o,null,n,a.supbooks,a)}else e.l=r;return l}function lX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=Vr(e),l=[n,i,"n"];if(a.cellFormula){e.l+=2;var o=Zg(e,r-e.l,a);l[3]=Br(o,null,n,a.supbooks,a)}else e.l=r;return l}function oX(e,s,a){var r=e.l+s,n=vi(e);n.r=a["!row"];var i=Qr(e),l=[n,i,"str"];if(a.cellFormula){e.l+=2;var o=Zg(e,r-e.l,a);l[3]=Br(o,null,n,a.supbooks,a)}else e.l=r;return l}var cX=pd,dX=u0;function uX(e,s){return s==null&&(s=Ke(4)),s.write_shift(4,e),s}function mX(e,s){var a=e.l+s,r=pd(e),n=RA(e),i=Qr(e),l=Qr(e),o=Qr(e);e.l=a;var d={rfx:r,relId:n,loc:i,display:o};return l&&(d.Tooltip=l),d}function fX(e,s){var a=Ke(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));u0({s:_a(e[0]),e:_a(e[0])},a),PA("rId"+s,a);var r=e[1].Target.indexOf("#"),n=r==-1?"":e[1].Target.slice(r+1);return br(n||"",a),br(e[1].Tooltip||"",a),br("",a),a.slice(0,a.l)}function hX(){}function xX(e,s,a){var r=e.l+s,n=P8(e),i=e.read_shift(1),l=[n];if(l[2]=i,a.cellFormula){var o=UJ(e,r-e.l,a);l[1]=o}else e.l=r;return l}function pX(e,s,a){var r=e.l+s,n=pd(e),i=[n];if(a.cellFormula){var l=BJ(e,r-e.l,a);i[1]=l,e.l=r}else e.l=r;return i}function gX(e,s,a){a==null&&(a=Ke(18));var r=eb(e,s);a.write_shift(-4,e),a.write_shift(-4,e),a.write_shift(4,(r.width||10)*256),a.write_shift(4,0);var n=0;return s.hidden&&(n|=1),typeof r.width=="number"&&(n|=2),s.level&&(n|=s.level<<8),a.write_shift(2,n),a}var FL=["left","right","top","bottom","header","footer"];function bX(e){var s={};return FL.forEach(function(a){s[a]=Vr(e)}),s}function vX(e,s){return s==null&&(s=Ke(48)),qc(e),FL.forEach(function(a){Zc(e[a],s)}),s}function yX(e){var s=e.read_shift(2);return e.l+=28,{RTL:s&32}}function NX(e,s,a){a==null&&(a=Ke(30));var r=924;return(((s||{}).Views||[])[0]||{}).RTL&&(r|=32),a.write_shift(2,r),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,100),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a}function wX(e){var s=Ke(24);return s.write_shift(4,4),s.write_shift(4,1),u0(e,s),s}function SX(e,s){return s==null&&(s=Ke(66)),s.write_shift(2,e.password?BA(e.password):0),s.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(a){a[1]?s.write_shift(4,e[a[0]]!=null&&!e[a[0]]?1:0):s.write_shift(4,e[a[0]]!=null&&e[a[0]]?0:1)}),s}function jX(){}function AX(){}function EX(e,s,a,r,n,i,l){if(!e)return e;var o=s||{};r||(r={"!id":{}});var d=o.dense?[]:{},u,h={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,x=!1,g,v,b,y,j,w,A,O,C,E=[];o.biff=12,o["!row"]=0;var S=0,D=!1,M=[],U={},I=o.supbooks||n.supbooks||[[]];if(I.sharedf=U,I.arrayf=M,I.SheetNames=n.SheetNames||n.Sheets.map(function(X){return X.name}),!o.supbooks&&(o.supbooks=I,n.Names))for(var k=0;k<n.Names.length;++k)I[0][k+1]=n.Names[k];var z=[],_=[],q=!1;pf[16]={n:"BrtShortReal",f:LL};var L;if(Wl(e,function(W,ee,V){if(!x)switch(V){case 148:u=W;break;case 0:g=W,o.sheetRows&&o.sheetRows<=g.r&&(x=!0),O=qa(y=g.r),o["!row"]=g.r,(W.hidden||W.hpt||W.level!=null)&&(W.hpt&&(W.hpx=Du(W.hpt)),_[W.r]=W);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:W[2]},W[2]){case"n":v.v=W[1];break;case"s":A=Hm[W[1]],v.v=A.t,v.r=A.r;break;case"b":v.v=!!W[1];break;case"e":v.v=W[1],o.cellText!==!1&&(v.w=Ql[v.v]);break;case"str":v.t="s",v.v=W[1];break;case"is":v.t="s",v.v=W[1].t;break}if((b=l.CellXf[W[0].iStyleRef])&&PL(v,b.numFmtId,null,o,i,l),j=W[0].c==-1?j+1:W[0].c,o.dense?(d[y]||(d[y]=[]),d[y][j]=v):d[Ta(j)+O]=v,o.cellFormula){for(D=!1,S=0;S<M.length;++S){var P=M[S];g.r>=P[0].s.r&&g.r<=P[0].e.r&&j>=P[0].s.c&&j<=P[0].e.c&&(v.F=ss(P[0]),D=!0)}!D&&W.length>3&&(v.f=W[3])}if(h.s.r>g.r&&(h.s.r=g.r),h.s.c>j&&(h.s.c=j),h.e.r<g.r&&(h.e.r=g.r),h.e.c<j&&(h.e.c=j),o.cellDates&&b&&v.t=="n"&&o0(Ht[b.numFmtId])){var Y=Pc(v.v);Y&&(v.t="d",v.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}L&&(L.type=="XLDAPR"&&(v.D=!0),L=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;v={t:"z",v:void 0},j=W[0].c==-1?j+1:W[0].c,o.dense?(d[y]||(d[y]=[]),d[y][j]=v):d[Ta(j)+O]=v,h.s.r>g.r&&(h.s.r=g.r),h.s.c>j&&(h.s.c=j),h.e.r<g.r&&(h.e.r=g.r),h.e.c<j&&(h.e.c=j),L&&(L.type=="XLDAPR"&&(v.D=!0),L=void 0);break;case 176:E.push(W);break;case 49:L=((o.xlmeta||{}).Cell||[])[W-1];break;case 494:var J=r["!id"][W.relId];for(J?(W.Target=J.Target,W.loc&&(W.Target+="#"+W.loc),W.Rel=J):W.relId==""&&(W.Target="#"+W.loc),y=W.rfx.s.r;y<=W.rfx.e.r;++y)for(j=W.rfx.s.c;j<=W.rfx.e.c;++j)o.dense?(d[y]||(d[y]=[]),d[y][j]||(d[y][j]={t:"z",v:void 0}),d[y][j].l=W):(w=Vt({c:j,r:y}),d[w]||(d[w]={t:"z",v:void 0}),d[w].l=W);break;case 426:if(!o.cellFormula)break;M.push(W),C=o.dense?d[y][j]:d[Ta(j)+O],C.f=Br(W[1],h,{r:g.r,c:j},I,o),C.F=ss(W[0]);break;case 427:if(!o.cellFormula)break;U[Vt(W[0].s)]=W[1],C=o.dense?d[y][j]:d[Ta(j)+O],C.f=Br(W[1],h,{r:g.r,c:j},I,o);break;case 60:if(!o.cellStyles)break;for(;W.e>=W.s;)z[W.e--]={width:W.w/256,hidden:!!(W.flags&1),level:W.level},q||(q=!0,$A(W.w/256)),$o(z[W.e+1]);break;case 161:d["!autofilter"]={ref:ss(W)};break;case 476:d["!margins"]=W;break;case 147:n.Sheets[a]||(n.Sheets[a]={}),W.name&&(n.Sheets[a].CodeName=W.name),(W.above||W.left)&&(d["!outline"]={above:W.above,left:W.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),W.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!ee.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+V.toString(16))}}},o),delete o.supbooks,delete o["!row"],!d["!ref"]&&(h.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(d["!ref"]=ss(u||h)),o.sheetRows&&d["!ref"]){var Q=Cs(d["!ref"]);o.sheetRows<=+Q.e.r&&(Q.e.r=o.sheetRows-1,Q.e.r>h.e.r&&(Q.e.r=h.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>h.e.c&&(Q.e.c=h.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),d["!fullref"]=d["!ref"],d["!ref"]=ss(Q))}return E.length>0&&(d["!merges"]=E),z.length>0&&(d["!cols"]=z),_.length>0&&(d["!rows"]=_),d}function CX(e,s,a,r,n,i,l){if(s.v===void 0)return!1;var o="";switch(s.t){case"b":o=s.v?"1":"0";break;case"d":s=va(s),s.z=s.z||Ht[14],s.v=dr(ba(s.v)),s.t="n";break;case"n":case"e":o=""+s.v;break;default:o=s.v;break}var d={r:a,c:r};switch(d.s=ec(n.cellXfs,s,n),s.l&&i["!links"].push([Vt(d),s.l]),s.c&&i["!comments"].push([Vt(d),s.c]),s.t){case"s":case"str":return n.bookSST?(o=WA(n.Strings,s.v,n.revStrings),d.t="s",d.v=o,l?st(e,18,GY(s,d)):st(e,7,HY(s,d))):(d.t="str",l?st(e,17,rX(s,d)):st(e,6,sX(s,d))),!0;case"n":return s.v==(s.v|0)&&s.v>-1e3&&s.v<1e3?l?st(e,13,ZY(s,d)):st(e,2,YY(s,d)):l?st(e,16,KY(s,d)):st(e,5,QY(s,d)),!0;case"b":return d.t="b",l?st(e,15,FY(s,d)):st(e,4,MY(s,d)),!0;case"e":return d.t="e",l?st(e,14,$Y(s,d)):st(e,3,zY(s,d)),!0}return l?st(e,12,PY(s,d)):st(e,1,IY(s,d)),!0}function TX(e,s,a,r){var n=Cs(s["!ref"]||"A1"),i,l="",o=[];st(e,145);var d=Array.isArray(s),u=n.e.r;s["!rows"]&&(u=Math.max(n.e.r,s["!rows"].length-1));for(var h=n.s.r;h<=u;++h){l=qa(h),AY(e,s,n,h);var f=!1;if(h<=n.e.r)for(var x=n.s.c;x<=n.e.c;++x){h===n.s.r&&(o[x]=Ta(x)),i=o[x]+l;var g=d?(s[h]||[])[x]:s[i];if(!g){f=!1;continue}f=CX(e,g,h,x,r,s,f)}}st(e,146)}function _X(e,s){!s||!s["!merges"]||(st(e,177,uX(s["!merges"].length)),s["!merges"].forEach(function(a){st(e,176,dX(a))}),st(e,178))}function kX(e,s){!s||!s["!cols"]||(st(e,390),s["!cols"].forEach(function(a,r){a&&st(e,60,gX(r,a))}),st(e,391))}function OX(e,s){!s||!s["!ref"]||(st(e,648),st(e,649,wX(Cs(s["!ref"]))),st(e,650))}function IX(e,s,a){s["!links"].forEach(function(r){if(r[1].Target){var n=Js(a,-1,r[1].Target.replace(/#.*$/,""),ms.HLINK);st(e,494,fX(r,n))}}),delete s["!links"]}function RX(e,s,a,r){if(s["!comments"].length>0){var n=Js(r,-1,"../drawings/vmlDrawing"+(a+1)+".vml",ms.VML);st(e,551,PA("rId"+n)),s["!legacy"]=n}}function PX(e,s,a,r){if(s["!autofilter"]){var n=s["!autofilter"],i=typeof n.ref=="string"?n.ref:ss(n.ref);a.Workbook||(a.Workbook={Sheets:[]}),a.Workbook.Names||(a.Workbook.Names=[]);var l=a.Workbook.Names,o=gn(i);o.s.r==o.e.r&&(o.e.r=gn(s["!ref"]).e.r,i=ss(o));for(var d=0;d<l.length;++d){var u=l[d];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+a.SheetNames[r]+"'!"+i;break}}d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+a.SheetNames[r]+"'!"+i}),st(e,161,u0(Cs(i))),st(e,162)}}function DX(e,s,a){st(e,133),st(e,137,NX(s,a)),st(e,138),st(e,134)}function MX(e,s){s["!protect"]&&st(e,535,SX(s["!protect"]))}function LX(e,s,a,r){var n=hn(),i=a.SheetNames[e],l=a.Sheets[i]||{},o=i;try{a&&a.Workbook&&(o=a.Workbook.Sheets[e].CodeName||o)}catch{}var d=Cs(l["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(s.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],st(n,129),(a.vbaraw||l["!outline"])&&st(n,147,kY(o,l["!outline"])),st(n,148,CY(d)),DX(n,l,a.Workbook),kX(n,l),TX(n,l,e,s),MX(n,l),PX(n,l,a,e),_X(n,l),IX(n,l,r),l["!margins"]&&st(n,476,vX(l["!margins"])),(!s||s.ignoreEC||s.ignoreEC==null)&&OX(n,l),RX(n,l,e,r),st(n,130),n.end()}function FX(e){var s=[],a=e.match(/^<c:numCache>/),r;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(s[+l[1]]=a?+l[2]:l[2])});var n=As((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){r=i.replace(/<.*?>/g,"")}),[s,n,r]}function UX(e,s,a,r,n,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,d=0,u="A",h={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var x=FX(f);h.s.r=h.s.c=0,h.e.c=o,u=Ta(o),x[0].forEach(function(g,v){l[u+qa(v)]={t:"n",v:g,z:x[1]},d=v}),h.e.r<d&&(h.e.r=d),++o}),o>0&&(l["!ref"]=ss(h)),l}function zX(e,s,a,r,n){if(!e)return e;r||(r={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(DL);return o&&QA(o[0],i,n,a),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}function BX(e,s){e.l+=10;var a=Qr(e);return{name:a}}function $X(e,s,a,r,n){if(!e)return e;r||(r={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return Wl(e,function(d,u,h){switch(h){case 550:i["!rel"]=d;break;case 651:n.Sheets[a]||(n.Sheets[a]={}),d.name&&(n.Sheets[a].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!l||s.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}}},s),r["!id"][i["!rel"]]&&(i["!drawel"]=r["!id"][i["!rel"]]),i}var KA=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],qX=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],HX=[],VX=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function OO(e,s){for(var a=0;a!=e.length;++a)for(var r=e[a],n=0;n!=s.length;++n){var i=s[n];if(r[i[0]]==null)r[i[0]]=i[1];else switch(i[2]){case"bool":typeof r[i[0]]=="string"&&(r[i[0]]=pa(r[i[0]]));break;case"int":typeof r[i[0]]=="string"&&(r[i[0]]=parseInt(r[i[0]],10));break}}}function IO(e,s){for(var a=0;a!=s.length;++a){var r=s[a];if(e[r[0]]==null)e[r[0]]=r[1];else switch(r[2]){case"bool":typeof e[r[0]]=="string"&&(e[r[0]]=pa(e[r[0]]));break;case"int":typeof e[r[0]]=="string"&&(e[r[0]]=parseInt(e[r[0]],10));break}}}function UL(e){IO(e.WBProps,KA),IO(e.CalcPr,VX),OO(e.WBView,qX),OO(e.Sheets,HX),Eu.date1904=pa(e.WBProps.date1904)}function GX(e){return!e.Workbook||!e.Workbook.WBProps?"false":pa(e.Workbook.WBProps.date1904)?"true":"false"}var WX="][*?/\\".split("");function zL(e,s){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var a=!0;return WX.forEach(function(r){if(e.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),a}function QX(e,s,a){e.forEach(function(r,n){zL(r);for(var i=0;i<n;++i)if(r==e[i])throw new Error("Duplicate Sheet Name: "+r);if(a){var l=s&&s[n]&&s[n].CodeName||r;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function KX(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var s=e.Workbook&&e.Workbook.Sheets||[];QX(e.SheetNames,s,!!e.vbaraw);for(var a=0;a<e.SheetNames.length;++a)GJ(e.Sheets[e.SheetNames[a]],e.SheetNames[a],a)}var JX=/<\w+:workbook/;function YX(e,s){if(!e)throw new Error("Could not find file");var a={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,n="xmlns",i={},l=0;if(e.replace(Jr,function(d,u){var h=Wt(d);switch(nl(h[0])){case"<?xml":break;case"<workbook":d.match(JX)&&(n="xmlns"+d.match(/<(\w+):/)[1]),a.xmlns=h[n];break;case"</workbook>":break;case"<fileVersion":delete h[0],a.AppVersion=h;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":KA.forEach(function(f){if(h[f[0]]!=null)switch(f[2]){case"bool":a.WBProps[f[0]]=pa(h[f[0]]);break;case"int":a.WBProps[f[0]]=parseInt(h[f[0]],10);break;default:a.WBProps[f[0]]=h[f[0]]}}),h.codeName&&(a.WBProps.CodeName=ia(h.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete h[0],a.WBView.push(h);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(h.state){case"hidden":h.Hidden=1;break;case"veryHidden":h.Hidden=2;break;default:h.Hidden=0}delete h.state,h.name=As(ia(h.name)),delete h[0],a.Sheets.push(h);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":i={},i.Name=ia(h.name),h.comment&&(i.Comment=h.comment),h.localSheetId&&(i.Sheet=+h.localSheetId),pa(h.hidden||"0")&&(i.Hidden=!0),l=u+d.length;break;case"</definedName>":i.Ref=As(ia(e.slice(l,u))),a.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete h[0],a.CalcPr=h;break;case"<calcPr/>":delete h[0],a.CalcPr=h;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&s.WTF)throw new Error("unrecognized "+h[0]+" in workbook")}return d}),md.indexOf(a.xmlns)===-1)throw new Error("Unknown Namespace: "+a.xmlns);return UL(a),a}function BL(e){var s=[Ha];s[s.length]=ft("workbook",null,{xmlns:md[0],"xmlns:r":ir.r});var a=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(KA.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),s[s.length]=ft("workbookPr",null,r);var n=e.Workbook&&e.Workbook.Sheets||[],i=0;if(n&&n[0]&&n[0].Hidden){for(s[s.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!n[i]||!n[i].Hidden);++i);i==e.SheetNames.length&&(i=0),s[s.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',s[s.length]="</bookViews>"}for(s[s.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:Ys(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),n[i])switch(n[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}s[s.length]=ft("sheet",null,l)}return s[s.length]="</sheets>",a&&(s[s.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var d={name:o.Name};o.Comment&&(d.comment=o.Comment),o.Sheet!=null&&(d.localSheetId=""+o.Sheet),o.Hidden&&(d.hidden="1"),o.Ref&&(s[s.length]=ft("definedName",Ys(o.Ref),d))}),s[s.length]="</definedNames>"),s.length>2&&(s[s.length]="</workbook>",s[1]=s[1].replace("/>",">")),s.join("")}function XX(e,s){var a={};return a.Hidden=e.read_shift(4),a.iTabID=e.read_shift(4),a.strRelID=_j(e),a.name=Qr(e),a}function ZX(e,s){return s||(s=Ke(127)),s.write_shift(4,e.Hidden),s.write_shift(4,e.iTabID),PA(e.strRelID,s),br(e.name.slice(0,31),s),s.length>s.l?s.slice(0,s.l):s}function eZ(e,s){var a={},r=e.read_shift(4);a.defaultThemeVersion=e.read_shift(4);var n=s>8?Qr(e):"";return n.length>0&&(a.CodeName=n),a.autoCompressPictures=!!(r&65536),a.backupFile=!!(r&64),a.checkCompatibility=!!(r&4096),a.date1904=!!(r&1),a.filterPrivacy=!!(r&8),a.hidePivotFieldList=!!(r&1024),a.promptedSolutions=!!(r&16),a.publishItems=!!(r&2048),a.refreshAllConnections=!!(r&262144),a.saveExternalLinkValues=!!(r&128),a.showBorderUnselectedTables=!!(r&4),a.showInkAnnotation=!!(r&32),a.showObjects=["all","placeholders","none"][r>>13&3],a.showPivotChartFilter=!!(r&32768),a.updateLinks=["userSet","never","always"][r>>8&3],a}function tZ(e,s){s||(s=Ke(72));var a=0;return e&&e.filterPrivacy&&(a|=8),s.write_shift(4,a),s.write_shift(4,0),I8(e&&e.CodeName||"ThisWorkbook",s),s.slice(0,s.l)}function sZ(e,s){var a={};return e.read_shift(4),a.ArchID=e.read_shift(4),e.l+=s-8,a}function aZ(e,s,a){var r=e.l+s;e.l+=4,e.l+=1;var n=e.read_shift(4),i=RH(e),l=zJ(e,0,a),o=RA(e);e.l=r;var d={Name:i,Ptg:l};return n<268435455&&(d.Sheet=n),o&&(d.Comment=o),d}function rZ(e,s){var a={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],n=!1;s||(s={}),s.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],pf[16]={n:"BrtFRTArchID$",f:sZ},Wl(e,function(d,u,h){switch(h){case 156:l.SheetNames.push(d.name),a.Sheets.push(d);break;case 153:a.WBProps=d;break;case 39:d.Sheet!=null&&(s.SID=d.Sheet),d.Ref=Br(d.Ptg,null,null,l,s),delete s.SID,delete d.Ptg,i.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([h,d]):l[0]=[h,d],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(d),l.XTI=l.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(h),n=!0;break;case 36:r.pop(),n=!1;break;case 37:r.push(h),n=!0;break;case 38:r.pop(),n=!1;break;case 16:break;default:if(!u.T){if(!n||s.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+h.toString(16))}}},s),UL(a),a.Names=i,a.supbooks=l,a}function nZ(e,s){st(e,143);for(var a=0;a!=s.SheetNames.length;++a){var r=s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[a]&&s.Workbook.Sheets[a].Hidden||0,n={Hidden:r,iTabID:a+1,strRelID:"rId"+(a+1),name:s.SheetNames[a]};st(e,156,ZX(n))}st(e,144)}function iZ(e,s){s||(s=Ke(127));for(var a=0;a!=4;++a)s.write_shift(4,0);return br("SheetJS",s),br(Tp.version,s),br(Tp.version,s),br("7262",s),s.length>s.l?s.slice(0,s.l):s}function lZ(e,s){s||(s=Ke(29)),s.write_shift(-4,0),s.write_shift(-4,460),s.write_shift(4,28800),s.write_shift(4,17600),s.write_shift(4,500),s.write_shift(4,e),s.write_shift(4,e);var a=120;return s.write_shift(1,a),s.length>s.l?s.slice(0,s.l):s}function oZ(e,s){if(!(!s.Workbook||!s.Workbook.Sheets)){for(var a=s.Workbook.Sheets,r=0,n=-1,i=-1;r<a.length;++r)!a[r]||!a[r].Hidden&&n==-1?n=r:a[r].Hidden==1&&i==-1&&(i=r);i>n||(st(e,135),st(e,158,lZ(n)),st(e,136))}}function cZ(e,s){var a=hn();return st(a,131),st(a,128,iZ()),st(a,153,tZ(e.Workbook&&e.Workbook.WBProps||null)),oZ(a,e),nZ(a,e),st(a,132),a.end()}function dZ(e,s,a){return s.slice(-4)===".bin"?rZ(e,a):YX(e,a)}function uZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?EX(e,r,a,n,i,l,o):aY(e,r,a,n,i,l,o)}function mZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?$X(e,r,a,n,i):zX(e,r,a,n,i)}function fZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?xK():pK()}function hZ(e,s,a,r,n,i,l,o){return s.slice(-4)===".bin"?fK():hK()}function xZ(e,s,a,r){return s.slice(-4)===".bin"?dQ(e,a,r):XW(e,a,r)}function pZ(e,s,a){return NL(e,a)}function gZ(e,s,a){return s.slice(-4)===".bin"?gW(e,a):hW(e,a)}function bZ(e,s,a){return s.slice(-4)===".bin"?oK(e,a):ZQ(e,a)}function vZ(e,s,a){return s.slice(-4)===".bin"?JQ(e):QQ(e)}function yZ(e,s,a,r){return a.slice(-4)===".bin"?YQ(e,s,a,r):void 0}function NZ(e,s,a){return s.slice(-4)===".bin"?VQ(e,s,a):WQ(e,s,a)}function wZ(e,s,a){return(s.slice(-4)===".bin"?cZ:BL)(e)}function SZ(e,s,a,r,n){return(s.slice(-4)===".bin"?LX:ML)(e,a,r,n)}function jZ(e,s,a){return(s.slice(-4)===".bin"?yQ:vL)(e,a)}function AZ(e,s,a){return(s.slice(-4)===".bin"?yW:uL)(e,a)}function EZ(e,s,a){return(s.slice(-4)===".bin"?cK:jL)(e)}function CZ(e){return(e.slice(-4)===".bin"?GQ:wL)()}var $L=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,qL=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ji(e,s){var a=e.split(/\s+/),r=[];if(r[0]=a[0],a.length===1)return r;var n=e.match($L),i,l,o,d;if(n)for(d=0;d!=n.length;++d)i=n[d].match(qL),(l=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),r[o]=i[2].slice(1,i[2].length-1));return r}function TZ(e){var s=e.split(/\s+/),a={};if(s.length===1)return a;var r=e.match($L),n,i,l,o;if(r)for(o=0;o!=r.length;++o)n=r[o].match(qL),(i=n[1].indexOf(":"))===-1?a[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?l="xmlns"+n[1].slice(6):l=n[1].slice(i+1),a[l]=n[2].slice(1,n[2].length-1));return a}var Gm;function _Z(e,s){var a=Gm[e]||As(e);return a==="General"?Yc(s):hi(a,s)}function kZ(e,s,a,r){var n=r;switch((a[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=pa(r);break;case"i2":case"int":n=parseInt(r,10);break;case"r4":case"float":n=parseFloat(r);break;case"date":case"dateTime.tz":n=ba(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+a[0])}e[As(s)]=n}function OZ(e,s,a){if(e.t!=="z"){if(!a||a.cellText!==!1)try{e.t==="e"?e.w=e.w||Ql[e.v]:s==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lf(e.v):e.w=Yc(e.v):e.w=_Z(s||"General",e.v)}catch(i){if(a.WTF)throw i}try{var r=Gm[s]||s||"General";if(a.cellNF&&(e.z=r),a.cellDates&&e.t=="n"&&o0(r)){var n=Pc(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(a.WTF)throw i}}}function IZ(e,s,a){if(a.cellStyles&&s.Interior){var r=s.Interior;r.Pattern&&(r.patternType=HW[r.Pattern]||r.Pattern)}e[s.ID]=s}function RZ(e,s,a,r,n,i,l,o,d,u){var h="General",f=r.StyleID,x={};u=u||{};var g=[],v=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&l&&(f=l.StyleID);i[f]!==void 0&&(i[f].nf&&(h=i[f].nf),i[f].Interior&&g.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(a.Type){case"Boolean":r.t="b",r.v=pa(e);break;case"String":r.t="s",r.r=K4(As(e)),r.v=e.indexOf("<")>-1?As(s||e).replace(/<.*?>/g,""):r.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),r.v=(ba(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=As(e):r.v<60&&(r.v=r.v-1),(!h||h=="General")&&(h="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=L8[e],u.cellText!==!1&&(r.w=e);break;default:e==""&&s==""?r.t="z":(r.t="s",r.v=K4(s||e));break}if(OZ(r,h,u),u.cellFormula!==!1)if(r.Formula){var b=As(r.Formula);b.charCodeAt(0)==61&&(b=b.slice(1)),r.f=Au(b,n),delete r.Formula,r.ArrayRange=="RC"?r.F=Au("RC:RC",n):r.ArrayRange&&(r.F=Au(r.ArrayRange,n),d.push([Cs(r.F),r.F]))}else for(v=0;v<d.length;++v)n.r>=d[v][0].s.r&&n.r<=d[v][0].e.r&&n.c>=d[v][0].s.c&&n.c<=d[v][0].e.c&&(r.F=d[v][1]);u.cellStyles&&(g.forEach(function(y){!x.patternType&&y.patternType&&(x.patternType=y.patternType)}),r.s=x),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function PZ(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function o1(e,s){var a=s||{};c0();var r=km(CA(e));(a.type=="binary"||a.type=="array"||a.type=="base64")&&(r=ia(r));var n=r.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var l=va(a);return l.type="string",Pu.to_workbook(r,l)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(de){n.indexOf("<"+de)>=0&&(i=!0)}),i)return vee(r,a);Gm={"General Number":"General","General Date":Ht[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ht[15],"Short Date":Ht[14],"Long Time":Ht[19],"Medium Time":Ht[18],"Short Time":Ht[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ht[2],Standard:Ht[4],Percent:Ht[10],Scientific:Ht[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,d=[],u,h={},f=[],x=a.dense?[]:{},g="",v={},b={},y=ji('<Data ss:Type="String">'),j=0,w=0,A=0,O={s:{r:2e6,c:2e6},e:{r:0,c:0}},C={},E={},S="",D=0,M=[],U={},I={},k=0,z=[],_=[],q={},L=[],Q,X=!1,W=[],ee=[],V={},P=0,Y=0,J={Sheets:[],WBProps:{date1904:!1}},K={};df.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var se="";o=df.exec(r);)switch(o[3]=(se=o[3]).toLowerCase()){case"data":if(se=="data"){if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break}if(d[d.length-1][1])break;o[1]==="/"?RZ(r.slice(j,o.index),S,y,d[d.length-1][0]=="comment"?q:v,{c:w,r:A},C,L[w],b,W,a):(S="",y=ji(o[0]),j=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(_.length>0&&(v.c=_),(!a.sheetRows||a.sheetRows>A)&&v.v!==void 0&&(a.dense?(x[A]||(x[A]=[]),x[A][w]=v):x[Ta(w)+qa(A)]=v),v.HRef&&(v.l={Target:As(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(P=w+(parseInt(v.MergeAcross,10)|0),Y=A+(parseInt(v.MergeDown,10)|0),M.push({s:{c:w,r:A},e:{c:P,r:Y}})),!a.sheetStubs)v.MergeAcross?w=P+1:++w;else if(v.MergeAcross||v.MergeDown){for(var G=w;G<=P;++G)for(var te=A;te<=Y;++te)(G>w||te>A)&&(a.dense?(x[te]||(x[te]=[]),x[te][G]={t:"z"}):x[Ta(G)+qa(te)]={t:"z"});w=P+1}else++w;else v=TZ(o[0]),v.Index&&(w=+v.Index-1),w<O.s.c&&(O.s.c=w),w>O.e.c&&(O.e.c=w),o[0].slice(-2)==="/>"&&++w,_=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(A<O.s.r&&(O.s.r=A),A>O.e.r&&(O.e.r=A),o[0].slice(-2)==="/>"&&(b=ji(o[0]),b.Index&&(A=+b.Index-1)),w=0,++A):(b=ji(o[0]),b.Index&&(A=+b.Index-1),V={},(b.AutoFitHeight=="0"||b.Height)&&(V.hpx=parseInt(b.Height,10),V.hpt=xf(V.hpx),ee[A]=V),b.Hidden=="1"&&(V.hidden=!0,ee[A]=V));break;case"worksheet":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(g),O.s.r<=O.e.r&&O.s.c<=O.e.c&&(x["!ref"]=ss(O),a.sheetRows&&a.sheetRows<=O.e.r&&(x["!fullref"]=x["!ref"],O.e.r=a.sheetRows-1,x["!ref"]=ss(O))),M.length&&(x["!merges"]=M),L.length>0&&(x["!cols"]=L),ee.length>0&&(x["!rows"]=ee),h[g]=x}else O={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=w=0,d.push([o[3],!1]),u=ji(o[0]),g=As(u.Name),x=a.dense?[]:{},M=[],W=[],ee=[],K={name:g,Hidden:0},J.Sheets.push(K);break;case"table":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;d.push([o[3],!1]),L=[],X=!1}break;case"style":o[1]==="/"?IZ(C,E,a):E=ji(o[0]);break;case"numberformat":E.nf=As(ji(o[0]).Format||"General"),Gm[E.nf]&&(E.nf=Gm[E.nf]);for(var Z=0;Z!=392&&Ht[Z]!=E.nf;++Z);if(Z==392){for(Z=57;Z!=392;++Z)if(Ht[Z]==null){Pl(E.nf,Z);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(Q=ji(o[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!X&&Q.wpx>10){X=!0,$r=gL;for(var ue=0;ue<L.length;++ue)L[ue]&&$o(L[ue])}X&&$o(Q),L[Q.Index-1||L.length]=Q;for(var re=0;re<+Q.Span;++re)L[L.length]=va(Q);break;case"namedrange":if(o[1]==="/")break;J.Names||(J.Names=[]);var H=Wt(o[0]),pe={Name:H.Name,Ref:Au(H.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(pe.Sheet=J.Sheets.length-1),J.Names.push(pe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?S+=r.slice(D,o.index):D=o.index+o[0].length;break;case"interior":if(!a.cellStyles)break;E.Interior=ji(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?rV(U,se,r.slice(k,o.index)):k=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else d.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));PZ(q),_.push(q)}else d.push([o[3],!1]),u=ji(o[0]),q={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var B=ji(o[0]);x["!autofilter"]={ref:Au(B.Range).replace(/\$/g,"")},d.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=d.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&d.push([o[3],!0]);break;case"null":break;default:if(d.length==0&&o[3]=="document"||d.length==0&&o[3]=="uof")return LO(r,a);var oe=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:oe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:oe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:oe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:oe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(k,o.index)){case"SheetHidden":K.Hidden=1;break;case"SheetVeryHidden":K.Hidden=2;break}else k=o.index+o[0].length;break;case"header":x["!margins"]||qc(x["!margins"]={},"xlml"),isNaN(+Wt(o[0]).Margin)||(x["!margins"].header=+Wt(o[0]).Margin);break;case"footer":x["!margins"]||qc(x["!margins"]={},"xlml"),isNaN(+Wt(o[0]).Margin)||(x["!margins"].footer=+Wt(o[0]).Margin);break;case"pagemargins":var fe=Wt(o[0]);x["!margins"]||qc(x["!margins"]={},"xlml"),isNaN(+fe.Top)||(x["!margins"].top=+fe.Top),isNaN(+fe.Left)||(x["!margins"].left=+fe.Left),isNaN(+fe.Right)||(x["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(x["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:oe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:oe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:oe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:oe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:oe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:oe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:oe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:oe=!1}break;case"smarttags":break;default:oe=!1;break}if(oe||o[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?kZ(I,se,z,r.slice(k,o.index)):(z=o,k=o.index+o[0].length);break}if(a.WTF)throw"Unrecognized tag: "+o[3]+"|"+d.join("|")}var ne={};return!a.bookSheets&&!a.bookProps&&(ne.Sheets=h),ne.SheetNames=f,ne.Workbook=J,ne.SSF=va(Ht),ne.Props=U,ne.Custprops=I,ne}function Mj(e,s){switch(XA(s=s||{}),s.type||"base64"){case"base64":return o1(Un(e),s);case"binary":case"buffer":case"file":return o1(e,s);case"array":return o1(Xo(e),s)}}function DZ(e,s){var a=[];return e.Props&&a.push(nV(e.Props,s)),e.Custprops&&a.push(iV(e.Props,e.Custprops)),a.join("")}function MZ(){return""}function LZ(e,s){var a=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return s.cellXfs.forEach(function(r,n){var i=[];i.push(ft("NumberFormat",null,{"ss:Format":Ys(Ht[r.numFmtId])}));var l={"ss:ID":"s"+(21+n)};a.push(ft("Style",i.join(""),l))}),ft("Styles",a.join(""))}function HL(e){return ft("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+VA(e.Ref,{r:0,c:0})})}function FZ(e){if(!((e||{}).Workbook||{}).Names)return"";for(var s=e.Workbook.Names,a=[],r=0;r<s.length;++r){var n=s[r];n.Sheet==null&&(n.Name.match(/^_xlfn\./)||a.push(HL(n)))}return ft("Names",a.join(""))}function UZ(e,s,a,r){if(!e||!((r||{}).Workbook||{}).Names)return"";for(var n=r.Workbook.Names,i=[],l=0;l<n.length;++l){var o=n[l];o.Sheet==a&&(o.Name.match(/^_xlfn\./)||i.push(HL(o)))}return i.join("")}function zZ(e,s,a,r){if(!e)return"";var n=[];if(e["!margins"]&&(n.push("<PageSetup>"),e["!margins"].header&&n.push(ft("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&n.push(ft("Footer",null,{"x:Margin":e["!margins"].footer})),n.push(ft("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),n.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[a])if(r.Workbook.Sheets[a].Hidden)n.push(ft("Visible",r.Workbook.Sheets[a].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<a&&!(r.Workbook.Sheets[i]&&!r.Workbook.Sheets[i].Hidden);++i);i==a&&n.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&n.push("<DisplayRightToLeft/>"),e["!protect"]&&(n.push(_r("ProtectContents","True")),e["!protect"].objects&&n.push(_r("ProtectObjects","True")),e["!protect"].scenarios&&n.push(_r("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?n.push(_r("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&n.push(_r("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&n.push("<"+l[1]+"/>")})),n.length==0?"":ft("WorksheetOptions",n.join(""),{xmlns:On.x})}function BZ(e){return e.map(function(s){var a=oH(s.t||""),r=ft("ss:Data",a,{xmlns:"http://www.w3.org/TR/REC-html40"});return ft("Comment",r,{"ss:Author":s.a})}).join("")}function $Z(e,s,a,r,n,i,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Ys(VA(e.f,l))),e.F&&e.F.slice(0,s.length)==s){var d=_a(e.F.slice(s.length+1));o["ss:ArrayRange"]="RC:R"+(d.r==l.r?"":"["+(d.r-l.r)+"]")+"C"+(d.c==l.c?"":"["+(d.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Ys(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Ys(e.l.Tooltip))),a["!merges"])for(var u=a["!merges"],h=0;h!=u.length;++h)u[h].s.c!=l.c||u[h].s.r!=l.r||(u[h].e.c>u[h].s.c&&(o["ss:MergeAcross"]=u[h].e.c-u[h].s.c),u[h].e.r>u[h].s.r&&(o["ss:MergeDown"]=u[h].e.r-u[h].s.r));var f="",x="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":f="Number",x=String(e.v);break;case"b":f="Boolean",x=e.v?"1":"0";break;case"e":f="Error",x=Ql[e.v];break;case"d":f="DateTime",x=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Ht[14]);break;case"s":f="String",x=lH(e.v||"");break}var g=ec(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=l.c+1;var v=e.v!=null?x:"",b=e.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(e.c||[]).length>0&&(b+=BZ(e.c)),ft("Cell",b,o)}function qZ(e,s){var a='<Row ss:Index="'+(e+1)+'"';return s&&(s.hpt&&!s.hpx&&(s.hpx=Du(s.hpt)),s.hpx&&(a+=' ss:AutoFitHeight="0" ss:Height="'+s.hpx+'"'),s.hidden&&(a+=' ss:Hidden="1"')),a+">"}function HZ(e,s,a,r){if(!e["!ref"])return"";var n=Cs(e["!ref"]),i=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(y,j){$o(y);var w=!!y.width,A=eb(j,y),O={"ss:Index":j+1};w&&(O["ss:Width"]=ff(A.width)),y.hidden&&(O["ss:Hidden"]="1"),o.push(ft("Column",null,O))});for(var d=Array.isArray(e),u=n.s.r;u<=n.e.r;++u){for(var h=[qZ(u,(e["!rows"]||[])[u])],f=n.s.c;f<=n.e.c;++f){var x=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>f)&&!(i[l].s.r>u)&&!(i[l].e.c<f)&&!(i[l].e.r<u)){(i[l].s.c!=f||i[l].s.r!=u)&&(x=!0);break}if(!x){var g={r:u,c:f},v=Vt(g),b=d?(e[u]||[])[f]:e[v];h.push($Z(b,v,e,s,a,r,g))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function VZ(e,s,a){var r=[],n=a.SheetNames[e],i=a.Sheets[n],l=i?UZ(i,s,e,a):"";return l.length>0&&r.push("<Names>"+l+"</Names>"),l=i?HZ(i,s,e,a):"",l.length>0&&r.push("<Table>"+l+"</Table>"),r.push(zZ(i,s,e,a)),r.join("")}function GZ(e,s){s||(s={}),e.SSF||(e.SSF=va(Ht)),e.SSF&&(c0(),Wg(e.SSF),s.revssf=Kg(e.SSF),s.revssf[e.SSF[65535]]=0,s.ssf=e.SSF,s.cellXfs=[],ec(s.cellXfs,{},{revssf:{General:0}}));var a=[];a.push(DZ(e,s)),a.push(MZ()),a.push(""),a.push("");for(var r=0;r<e.SheetNames.length;++r)a.push(ft("Worksheet",VZ(r,s,e),{"ss:Name":Ys(e.SheetNames[r])}));return a[2]=LZ(e,s),a[3]=FZ(e),Ha+ft("Workbook",a.join(""),{xmlns:On.ss,"xmlns:o":On.o,"xmlns:x":On.x,"xmlns:ss":On.ss,"xmlns:dt":On.dt,"xmlns:html":On.html})}function WZ(e){var s={},a=e.content;if(a.l=28,s.AnsiUserType=a.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=FH(a),a.length-a.l<=4)return s;var r=a.read_shift(4);if(r==0||r>40||(a.l-=4,s.Reserved1=a.read_shift(0,"lpstr-ansi"),a.length-a.l<=4)||(r=a.read_shift(4),r!==1907505652)||(s.UnicodeClipboardFormat=UH(a),r=a.read_shift(4),r==0||r>40))return s;a.l-=4,s.Reserved2=a.read_shift(0,"lpwstr")}var QZ=[60,1084,2066,2165,2175];function KZ(e,s,a,r,n){var i=r,l=[],o=a.slice(a.l,a.l+i);if(n&&n.enc&&n.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(o)}l.push(o),a.l+=i;for(var d=_l(a,a.l),u=Lj[d],h=0;u!=null&&QZ.indexOf(d)>-1;)i=_l(a,a.l+2),h=a.l+4,d==2066?h+=4:(d==2165||d==2175)&&(h+=12),o=a.slice(h,a.l+4+i),l.push(o),a.l+=4+i,u=Lj[d=_l(a,a.l)];var f=pr(l);Tr(f,0);var x=0;f.lens=[];for(var g=0;g<l.length;++g)f.lens.push(x),x+=l[g].length;if(f.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+r;return s.f(f,f.length,n)}function qi(e,s,a){if(e.t!=="z"&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,s.cellNF&&(e.z=Ht[r])}catch(i){if(s.WTF)throw i}if(!s||s.cellText!==!1)try{e.t==="e"?e.w=e.w||Ql[e.v]:r===0||r=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=lf(e.v):e.w=Yc(e.v):e.w=hi(r,e.v,{date1904:!!a,dateNF:s&&s.dateNF})}catch(i){if(s.WTF)throw i}if(s.cellDates&&r&&e.t=="n"&&o0(Ht[r]||String(r))){var n=Pc(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function Gx(e,s,a){return{v:e,ixfe:s,t:a}}function JZ(e,s){var a={opts:{}},r={},n=s.dense?[]:{},i={},l={},o=null,d=[],u="",h={},f,x="",g,v,b,y,j={},w=[],A,O,C=[],E=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},D={},M=function(wt){return wt<8?zc[wt]:wt<64&&E[wt-8]||zc[wt]},U=function(wt,ke,We){var Ne=ke.XF.data;if(!(!Ne||!Ne.patternType||!We||!We.cellStyles)){ke.s={},ke.s.patternType=Ne.patternType;var at;(at=mf(M(Ne.icvFore)))&&(ke.s.fgColor={rgb:at}),(at=mf(M(Ne.icvBack)))&&(ke.s.bgColor={rgb:at})}},I=function(wt,ke,We){if(!(V>1)&&!(We.sheetRows&&wt.r>=We.sheetRows)){if(We.cellStyles&&ke.XF&&ke.XF.data&&U(wt,ke,We),delete ke.ixfe,delete ke.XF,f=wt,x=Vt(wt),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),wt.r<l.s.r&&(l.s.r=wt.r),wt.c<l.s.c&&(l.s.c=wt.c),wt.r+1>l.e.r&&(l.e.r=wt.r+1),wt.c+1>l.e.c&&(l.e.c=wt.c+1),We.cellFormula&&ke.f){for(var Ne=0;Ne<w.length;++Ne)if(!(w[Ne][0].s.c>wt.c||w[Ne][0].s.r>wt.r)&&!(w[Ne][0].e.c<wt.c||w[Ne][0].e.r<wt.r)){ke.F=ss(w[Ne][0]),(w[Ne][0].s.c!=wt.c||w[Ne][0].s.r!=wt.r)&&delete ke.f,ke.f&&(ke.f=""+Br(w[Ne][1],l,wt,W,k));break}}We.dense?(n[wt.r]||(n[wt.r]=[]),n[wt.r][wt.c]=ke):n[x]=ke}},k={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(k.password=s.password);var z,_=[],q=[],L=[],Q=[],X=!1,W=[];W.SheetNames=k.snames,W.sharedf=k.sharedf,W.arrayf=k.arrayf,W.names=[],W.XTI=[];var ee=0,V=0,P=0,Y=[],J=[],K;k.codepage=1200,ki(1200);for(var se=!1;e.l<e.length-1;){var G=e.l,te=e.read_shift(2);if(te===0&&ee===10)break;var Z=e.l===e.length?0:e.read_shift(2),ue=Lj[te];if(ue&&ue.f){if(s.bookSheets&&ee===133&&te!==133)break;if(ee=te,ue.r===2||ue.r==12){var re=e.read_shift(2);if(Z-=2,!k.enc&&re!==te&&((re&255)<<8|re>>8)!==te)throw new Error("rt mismatch: "+re+"!="+te);ue.r==12&&(e.l+=10,Z-=10)}var H={};if(te===10?H=ue.f(e,Z,k):H=KZ(te,ue,e,Z,k),V==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(te){case 34:a.opts.Date1904=S.WBProps.date1904=H;break;case 134:a.opts.WriteProtect=!0;break;case 47:if(k.enc||(e.l=0),k.enc=H,!s.password)throw new Error("File is password-protected");if(H.valid==null)throw new Error("Encryption scheme unsupported");if(!H.valid)throw new Error("Password is incorrect");break;case 92:k.lastuser=H;break;case 66:var pe=Number(H);switch(pe){case 21010:pe=1200;break;case 32768:pe=1e4;break;case 32769:pe=1252;break}ki(k.codepage=pe),se=!0;break;case 317:k.rrtabid=H;break;case 25:k.winlocked=H;break;case 439:a.opts.RefreshAll=H;break;case 12:a.opts.CalcCount=H;break;case 16:a.opts.CalcDelta=H;break;case 17:a.opts.CalcIter=H;break;case 13:a.opts.CalcMode=H;break;case 14:a.opts.CalcPrecision=H;break;case 95:a.opts.CalcSaveRecalc=H;break;case 15:k.CalcRefMode=H;break;case 2211:a.opts.FullCalc=H;break;case 129:H.fDialog&&(n["!type"]="dialog"),H.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),H.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:C.push(H);break;case 430:W.push([H]),W[W.length-1].XTI=[];break;case 35:case 547:W[W.length-1].push(H);break;case 24:case 536:K={Name:H.Name,Ref:Br(H.rgce,l,null,W,k)},H.itab>0&&(K.Sheet=H.itab-1),W.names.push(K),W[0]||(W[0]=[],W[0].XTI=[]),W[W.length-1].push(H),H.Name=="_xlnm._FilterDatabase"&&H.itab>0&&H.rgce&&H.rgce[0]&&H.rgce[0][0]&&H.rgce[0][0][0]=="PtgArea3d"&&(J[H.itab-1]={ref:ss(H.rgce[0][0][1][2])});break;case 22:k.ExternCount=H;break;case 23:W.length==0&&(W[0]=[],W[0].XTI=[]),W[W.length-1].XTI=W[W.length-1].XTI.concat(H),W.XTI=W.XTI.concat(H);break;case 2196:if(k.biff<8)break;K!=null&&(K.Comment=H[1]);break;case 18:n["!protect"]=H;break;case 19:H!==0&&k.WTF&&console.error("Password verifier: "+H);break;case 133:i[H.pos]=H,k.snames.push(H.name);break;case 10:{if(--V)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,n["!ref"]=ss(l),s.sheetRows&&s.sheetRows<=l.e.r){var B=l.e.r;l.e.r=s.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=ss(l),l.e.r=B}l.e.r++,l.e.c++}_.length>0&&(n["!merges"]=_),q.length>0&&(n["!objects"]=q),L.length>0&&(n["!cols"]=L),Q.length>0&&(n["!rows"]=Q),S.Sheets.push(D)}u===""?h=n:r[u]=n,n=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(k.biff===8&&(k.biff={9:2,521:3,1033:4}[te]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[H.BIFFVer]||8),k.biffguess=H.BIFFVer==0,H.BIFFVer==0&&H.dt==4096&&(k.biff=5,se=!0,ki(k.codepage=28591)),k.biff==8&&H.BIFFVer==0&&H.dt==16&&(k.biff=2),V++)break;if(n=s.dense?[]:{},k.biff<8&&!se&&(se=!0,ki(k.codepage=s.codepage||1252)),k.biff<5||H.BIFFVer==0&&H.dt==4096){u===""&&(u="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var oe={pos:e.l-Z,name:u};i[oe.pos]=oe,k.snames.push(u)}else u=(i[G]||{name:""}).name;H.dt==32&&(n["!type"]="chart"),H.dt==64&&(n["!type"]="macro"),_=[],q=[],k.arrayf=w=[],L=[],Q=[],X=!1,D={Hidden:(i[G]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(s.dense?(n[H.r]||[])[H.c]:n[Vt({c:H.c,r:H.r})])&&++H.c,A={ixfe:H.ixfe,XF:C[H.ixfe]||{},v:H.val,t:"n"},P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:H.c,r:H.r},A,s);break;case 5:case 517:A={ixfe:H.ixfe,XF:C[H.ixfe],v:H.val,t:H.t},P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:H.c,r:H.r},A,s);break;case 638:A={ixfe:H.ixfe,XF:C[H.ixfe],v:H.rknum,t:"n"},P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:H.c,r:H.r},A,s);break;case 189:for(var fe=H.c;fe<=H.C;++fe){var ne=H.rkrec[fe-H.c][0];A={ixfe:ne,XF:C[ne],v:H.rkrec[fe-H.c][1],t:"n"},P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:fe,r:H.r},A,s)}break;case 6:case 518:case 1030:{if(H.val=="String"){o=H;break}if(A=Gx(H.val,H.cell.ixfe,H.tt),A.XF=C[A.ixfe],s.cellFormula){var de=H.formula;if(de&&de[0]&&de[0][0]&&de[0][0][0]=="PtgExp"){var we=de[0][0][1][0],Ue=de[0][0][1][1],qe=Vt({r:we,c:Ue});j[qe]?A.f=""+Br(H.formula,l,H.cell,W,k):A.F=((s.dense?(n[we]||[])[Ue]:n[qe])||{}).F}else A.f=""+Br(H.formula,l,H.cell,W,k)}P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I(H.cell,A,s),o=H}break;case 7:case 519:if(o)o.val=H,A=Gx(H,o.cell.ixfe,"s"),A.XF=C[A.ixfe],s.cellFormula&&(A.f=""+Br(o.formula,l,o.cell,W,k)),P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I(o.cell,A,s),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(H);var Ce=Vt(H[0].s);if(g=s.dense?(n[H[0].s.r]||[])[H[0].s.c]:n[Ce],s.cellFormula&&g){if(!o||!Ce||!g)break;g.f=""+Br(H[1],l,H[0],W,k),g.F=ss(H[0])}}break;case 1212:{if(!s.cellFormula)break;if(x){if(!o)break;j[Vt(o.cell)]=H[0],g=s.dense?(n[o.cell.r]||[])[o.cell.c]:n[Vt(o.cell)],(g||{}).f=""+Br(H[0],l,f,W,k)}}break;case 253:A=Gx(d[H.isst].t,H.ixfe,"s"),d[H.isst].h&&(A.h=d[H.isst].h),A.XF=C[A.ixfe],P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:H.c,r:H.r},A,s);break;case 513:s.sheetStubs&&(A={ixfe:H.ixfe,XF:C[H.ixfe],t:"z"},P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:H.c,r:H.r},A,s));break;case 190:if(s.sheetStubs)for(var Le=H.c;Le<=H.C;++Le){var Se=H.ixfe[Le-H.c];A={ixfe:Se,XF:C[Se],t:"z"},P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:Le,r:H.r},A,s)}break;case 214:case 516:case 4:A=Gx(H.val,H.ixfe,"s"),A.XF=C[A.ixfe],P>0&&(A.z=Y[A.ixfe>>8&63]),qi(A,s,a.opts.Date1904),I({c:H.c,r:H.r},A,s);break;case 0:case 512:V===1&&(l=H);break;case 252:d=H;break;case 1054:if(k.biff==4){Y[P++]=H[1];for(var _e=0;_e<P+163&&Ht[_e]!=H[1];++_e);_e>=163&&Pl(H[1],P+163)}else Pl(H[1],H[0]);break;case 30:{Y[P++]=H;for(var Ze=0;Ze<P+163&&Ht[Ze]!=H;++Ze);Ze>=163&&Pl(H,P+163)}break;case 229:_=_.concat(H);break;case 93:q[H.cmo[0]]=k.lastobj=H;break;case 438:k.lastobj.TxO=H;break;case 127:k.lastobj.ImData=H;break;case 440:for(y=H[0].s.r;y<=H[0].e.r;++y)for(b=H[0].s.c;b<=H[0].e.c;++b)g=s.dense?(n[y]||[])[b]:n[Vt({c:b,r:y})],g&&(g.l=H[1]);break;case 2048:for(y=H[0].s.r;y<=H[0].e.r;++y)for(b=H[0].s.c;b<=H[0].e.c;++b)g=s.dense?(n[y]||[])[b]:n[Vt({c:b,r:y})],g&&g.l&&(g.l.Tooltip=H[1]);break;case 28:{if(k.biff<=5&&k.biff>=2)break;g=s.dense?(n[H[0].r]||[])[H[0].c]:n[Vt(H[0])];var Mt=q[H[2]];g||(s.dense?(n[H[0].r]||(n[H[0].r]=[]),g=n[H[0].r][H[0].c]={t:"z"}):g=n[Vt(H[0])]={t:"z"},l.e.r=Math.max(l.e.r,H[0].r),l.s.r=Math.min(l.s.r,H[0].r),l.e.c=Math.max(l.e.c,H[0].c),l.s.c=Math.min(l.s.c,H[0].c)),g.c||(g.c=[]),v={a:H[1],t:Mt.TxO.t},g.c.push(v)}break;case 2173:LQ(C[H.ixfe],H.ext);break;case 125:{if(!k.cellStyles)break;for(;H.e>=H.s;)L[H.e--]={width:H.w/256,level:H.level||0,hidden:!!(H.flags&1)},X||(X=!0,$A(H.w/256)),$o(L[H.e+1])}break;case 520:{var lt={};H.level!=null&&(Q[H.r]=lt,lt.level=H.level),H.hidden&&(Q[H.r]=lt,lt.hidden=!0),H.hpt&&(Q[H.r]=lt,lt.hpt=H.hpt,lt.hpx=Du(H.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||qc(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[te]]=H;break;case 161:n["!margins"]||qc(n["!margins"]={}),n["!margins"].header=H.header,n["!margins"].footer=H.footer;break;case 574:H.RTL&&(S.Views[0].RTL=!0);break;case 146:E=H;break;case 2198:z=H;break;case 140:O=H;break;case 442:u?D.CodeName=H||D.name:S.WBProps.CodeName=H||"ThisWorkbook";break}}else ue||console.error("Missing Info for XLS Record 0x"+te.toString(16)),e.l+=Z}return a.SheetNames=Ma(i).sort(function(yt,wt){return Number(yt)-Number(wt)}).map(function(yt){return i[yt].name}),s.bookSheets||(a.Sheets=r),!a.SheetNames.length&&h["!ref"]?(a.SheetNames.push("Sheet1"),a.Sheets&&(a.Sheets.Sheet1=h)):a.Preamble=h,a.Sheets&&J.forEach(function(yt,wt){a.Sheets[a.SheetNames[wt]]["!autofilter"]=yt}),a.Strings=d,a.SSF=va(Ht),k.enc&&(a.Encryption=k.enc),z&&(a.Themes=z),a.Metadata={},O!==void 0&&(a.Metadata.Country=O),W.names.length>0&&(S.Names=W.names),a.Workbook=S,a}var Wm={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function YZ(e,s,a){var r=It.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var n=fO(r,kj,Wm.DSI);for(var i in n)s[i]=n[i]}catch(u){if(a.WTF)throw u}var l=It.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=fO(l,Oj,Wm.SI);for(var d in o)s[d]==null&&(s[d]=o[d])}catch(u){if(a.WTF)throw u}s.HeadingPairs&&s.TitlesOfParts&&(q8(s.HeadingPairs,s.TitlesOfParts,s,a),delete s.HeadingPairs,delete s.TitlesOfParts)}function XZ(e,s){var a=[],r=[],n=[],i=0,l,o=q4(kj,"n"),d=q4(Oj,"n");if(e.Props)for(l=Ma(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?a:Object.prototype.hasOwnProperty.call(d,l[i])?r:n).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=Ma(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?a:Object.prototype.hasOwnProperty.call(d,l[i])?r:n).push([l[i],e.Custprops[l[i]]]);var u=[];for(i=0;i<n.length;++i)J8.indexOf(n[i][0])>-1||$8.indexOf(n[i][0])>-1||n[i][1]!=null&&u.push(n[i]);r.length&&It.utils.cfb_add(s,"/SummaryInformation",hO(r,Wm.SI,d,Oj)),(a.length||u.length)&&It.utils.cfb_add(s,"/DocumentSummaryInformation",hO(a,Wm.DSI,o,kj,u.length?u:null,Wm.UDI))}function JA(e,s){s||(s={}),XA(s),bA(),s.codepage&&gA(s.codepage);var a,r;if(e.FullPaths){if(It.find(e,"/encryption"))throw new Error("File is password-protected");a=It.find(e,"!CompObj"),r=It.find(e,"/Workbook")||It.find(e,"/Book")}else{switch(s.type){case"base64":e=Rn(Un(e));break;case"binary":e=Rn(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Tr(e,0),r={content:e}}var n,i;if(a&&WZ(a),s.bookProps&&!s.bookSheets)n={};else{var l=cs?"buffer":"array";if(r&&r.content)n=JZ(r.content,s);else if((i=It.find(e,"PerfectOffice_MAIN"))&&i.content)n=$c.to_workbook(i.content,(s.type=l,s));else if((i=It.find(e,"NativeContent_MAIN"))&&i.content)n=$c.to_workbook(i.content,(s.type=l,s));else throw(i=It.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&e.FullPaths&&It.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=uK(e))}var o={};return e.FullPaths&&YZ(e,o,s),n.Props=n.Custprops=o,s.bookFiles&&(n.cfb=e),n}function ZZ(e,s){var a=s||{},r=It.utils.cfb_new({root:"R"}),n="/Workbook";switch(a.bookType||"xls"){case"xls":a.bookType="biff8";case"xla":a.bookType||(a.bookType="xla");case"biff8":n="/Workbook",a.biff=8;break;case"biff5":n="/Book",a.biff=5;break;default:throw new Error("invalid type "+a.bookType+" for XLS CFB")}return It.utils.cfb_add(r,n,VL(e,a)),a.biff==8&&(e.Props||e.Custprops)&&XZ(e,r),a.biff==8&&e.vbaraw&&mK(r,It.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),r}var pf={0:{f:SY},1:{f:OY},2:{f:JY},3:{f:UY},4:{f:DY},5:{f:WY},6:{f:tX},7:{f:qY},8:{f:oX},9:{f:lX},10:{f:nX},11:{f:iX},12:{f:RY},13:{f:XY},14:{f:BY},15:{f:LY},16:{f:LL},17:{f:aX},18:{f:VY},19:{f:IA},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:aZ},40:{},42:{},43:{f:tQ},44:{f:ZW},45:{f:rQ},46:{f:iQ},47:{f:nQ},48:{},49:{f:EH},50:{},51:{f:zQ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:lL},62:{f:eX},63:{f:KQ},64:{f:jX},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Kr,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:yX},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:_Y},148:{f:EY,p:16},151:{f:hX},152:{},153:{f:eZ},154:{},155:{},156:{f:XX},157:{},158:{},159:{T:1,f:pW},160:{T:-1},161:{T:1,f:pd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:cX},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:FQ},336:{T:-1},337:{f:qQ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:_j},357:{},358:{},359:{},360:{T:1},361:{},362:{f:iL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:xX},427:{f:pX},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:bX},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:TY},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:mX},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:_j},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:iK},633:{T:1},634:{T:-1},635:{T:1,f:rK},636:{T:-1},637:{f:kH},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:BX},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:AX},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Lj={6:{f:i1},10:{f:wo},12:{f:Xa},13:{f:Xa},14:{f:Ba},15:{f:Ba},16:{f:Vr},17:{f:Ba},18:{f:Ba},19:{f:Xa},20:{f:yO},21:{f:yO},23:{f:iL},24:{f:wO},25:{f:Ba},26:{},27:{},28:{f:AG},29:{},34:{f:Ba},35:{f:NO},38:{f:Vr},39:{f:Vr},40:{f:Vr},41:{f:Vr},42:{f:Ba},43:{f:Ba},47:{f:LW},49:{f:XV},51:{f:Xa},60:{},61:{f:WV},64:{f:Ba},65:{f:YV},66:{f:Xa},77:{},80:{},81:{},82:{},85:{f:Xa},89:{},90:{},91:{},92:{f:MV},93:{f:TG},94:{},95:{f:Ba},96:{},97:{},99:{f:Ba},125:{f:lL},128:{f:fG},129:{f:FV},130:{f:Xa},131:{f:Ba},132:{f:Ba},133:{f:UV},134:{},140:{f:MG},141:{f:Xa},144:{},146:{f:UG},151:{},152:{},153:{},154:{},155:{},156:{f:Xa},157:{},158:{},160:{f:GG},161:{f:$G},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:cG},190:{f:dG},193:{f:wo},197:{},198:{},199:{},200:{},201:{},202:{f:Ba},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Xa},220:{},221:{f:Ba},222:{},224:{f:mG},225:{f:DV},226:{f:wo},227:{},229:{f:EG},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:BV},253:{f:eG},255:{f:qV},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Y8},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ba},353:{f:wo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:bG},431:{f:Ba},432:{},433:{},434:{},437:{},438:{f:OG},439:{f:Ba},440:{f:IG},441:{},442:{f:oh},443:{},444:{f:Xa},445:{},446:{},448:{f:wo},449:{f:GV,r:2},450:{f:wo},512:{f:gO},513:{f:VG},515:{f:pG},516:{f:sG},517:{f:vO},519:{f:WG},520:{f:HV},523:{},545:{f:SO},549:{f:pO},566:{},574:{f:KV},638:{f:oG},659:{},1048:{},1054:{f:rG},1084:{},1212:{f:wG},2048:{f:PG},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:qx},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:wo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:zG,r:12},2173:{f:MQ,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ba,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:NG,r:12},2197:{},2198:{f:kQ,r:12},2199:{},2200:{},2201:{},2202:{f:SG,r:12},2203:{f:wo},2204:{},2205:{},2206:{},2207:{},2211:{f:VV},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Xa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:qG},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:FG},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:gO},1:{},2:{f:XG},3:{f:JG},4:{f:KG},5:{f:vO},7:{f:eW},8:{},9:{f:qx},11:{},22:{f:Xa},30:{f:iG},31:{},32:{},33:{f:SO},36:{},37:{f:pO},50:{f:tW},62:{},52:{},67:{},68:{f:Xa},69:{},86:{},126:{},127:{f:QG},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:sW},223:{},234:{},354:{},421:{},518:{f:i1},521:{f:qx},536:{f:wO},547:{f:NO},561:{},579:{},1030:{f:i1},1033:{f:qx},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ht(e,s,a,r){var n=s;if(!isNaN(n)){var i=r||(a||[]).length||0,l=e.next(4);l.write_shift(2,n),l.write_shift(2,i),i>0&&_A(a)&&e.push(a)}}function eee(e,s,a,r){var n=(a||[]).length||0;if(n<=8224)return ht(e,s,a,n);var i=s;if(!isNaN(i)){for(var l=a.parts||[],o=0,d=0,u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;var h=e.next(4);for(h.write_shift(2,i),h.write_shift(2,u),e.push(a.slice(d,d+u)),d+=u;d<n;){for(h=e.next(4),h.write_shift(2,60),u=0;u+(l[o]||8224)<=8224;)u+=l[o]||8224,o++;h.write_shift(2,u),e.push(a.slice(d,d+u)),d+=u}}}function mh(e,s,a){return e||(e=Ke(7)),e.write_shift(2,s),e.write_shift(2,a),e.write_shift(2,0),e.write_shift(1,0),e}function tee(e,s,a,r){var n=Ke(9);return mh(n,e,s),X8(a,r||"b",n),n}function see(e,s,a){var r=Ke(8+2*a.length);return mh(r,e,s),r.write_shift(1,a.length),r.write_shift(a.length,a,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function aee(e,s,a,r){if(s.v!=null)switch(s.t){case"d":case"n":var n=s.t=="d"?dr(ba(s.v)):s.v;n==(n|0)&&n>=0&&n<65536?ht(e,2,ZG(a,r,n)):ht(e,3,YG(a,r,n));return;case"b":case"e":ht(e,5,tee(a,r,s.v,s.t));return;case"s":case"str":ht(e,4,see(a,r,(s.v||"").slice(0,255)));return}ht(e,1,mh(null,a,r))}function ree(e,s,a,r){var n=Array.isArray(s),i=Cs(s["!ref"]||"A1"),l,o="",d=[];if(i.e.c>255||i.e.r>16383){if(r.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=ss(i)}for(var u=i.s.r;u<=i.e.r;++u){o=qa(u);for(var h=i.s.c;h<=i.e.c;++h){u===i.s.r&&(d[h]=Ta(h)),l=d[h]+o;var f=n?(s[u]||[])[h]:s[l];f&&aee(e,f,u,h)}}}function nee(e,s){for(var a=s||{},r=hn(),n=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==a.sheet&&(n=i);if(n==0&&a.sheet&&e.SheetNames[0]!=a.sheet)throw new Error("Sheet not found: "+a.sheet);return ht(r,a.biff==4?1033:a.biff==3?521:9,UA(e,16,a)),ree(r,e.Sheets[e.SheetNames[n]],n,a),ht(r,10),r.end()}function iee(e,s,a){ht(e,49,ZV({sz:12,name:"Arial"},a))}function lee(e,s,a){s&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)s[n]!=null&&ht(e,1054,nG(n,s[n],a))})}function oee(e,s){var a=Ke(19);a.write_shift(4,2151),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,1),a.write_shift(4,0),ht(e,2151,a),a=Ke(39),a.write_shift(4,2152),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,3),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(2,1),a.write_shift(4,4),a.write_shift(2,0),aL(Cs(s["!ref"]||"A1"),a),a.write_shift(4,4),ht(e,2152,a)}function cee(e,s){for(var a=0;a<16;++a)ht(e,224,bO({numFmtId:0,style:!0},0,s));s.cellXfs.forEach(function(r){ht(e,224,bO(r,0,s))})}function dee(e,s){for(var a=0;a<s["!links"].length;++a){var r=s["!links"][a];ht(e,440,RG(r)),r[1].Tooltip&&ht(e,2048,DG(r))}delete s["!links"]}function uee(e,s){if(s){var a=0;s.forEach(function(r,n){++a<=256&&r&&ht(e,125,BG(eb(n,r),n))})}}function mee(e,s,a,r,n){var i=16+ec(n.cellXfs,s,n);if(s.v==null&&!s.bf){ht(e,513,td(a,r,i));return}if(s.bf)ht(e,6,FJ(s,a,r,n,i));else switch(s.t){case"d":case"n":var l=s.t=="d"?dr(ba(s.v)):s.v;ht(e,515,gG(a,r,l,i));break;case"b":case"e":ht(e,517,xG(a,r,s.v,i,n,s.t));break;case"s":case"str":if(n.bookSST){var o=WA(n.Strings,s.v,n.revStrings);ht(e,253,tG(a,r,o,i))}else ht(e,516,aG(a,r,(s.v||"").slice(0,255),i,n));break;default:ht(e,513,td(a,r,i))}}function fee(e,s,a){var r=hn(),n=a.SheetNames[e],i=a.Sheets[n]||{},l=(a||{}).Workbook||{},o=(l.Sheets||[])[e]||{},d=Array.isArray(i),u=s.biff==8,h,f="",x=[],g=Cs(i["!ref"]||"A1"),v=u?65536:16384;if(g.e.c>255||g.e.r>=v){if(s.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,v-1)}ht(r,2057,UA(a,16,s)),ht(r,13,li(1)),ht(r,12,li(100)),ht(r,15,tn(!0)),ht(r,17,tn(!1)),ht(r,16,Zc(.001)),ht(r,95,tn(!0)),ht(r,42,tn(!1)),ht(r,43,tn(!1)),ht(r,130,li(1)),ht(r,128,hG()),ht(r,131,tn(!1)),ht(r,132,tn(!1)),u&&uee(r,i["!cols"]),ht(r,512,lG(g,s)),u&&(i["!links"]=[]);for(var b=g.s.r;b<=g.e.r;++b){f=qa(b);for(var y=g.s.c;y<=g.e.c;++y){b===g.s.r&&(x[y]=Ta(y)),h=x[y]+f;var j=d?(i[b]||[])[y]:i[h];j&&(mee(r,j,b,y,s),u&&j.l&&i["!links"].push([h,j.l]))}}var w=o.CodeName||o.name||n;return u&&ht(r,574,JV((l.Views||[])[0])),u&&(i["!merges"]||[]).length&&ht(r,229,CG(i["!merges"])),u&&dee(r,i),ht(r,442,Z8(w)),u&&oee(r,i),ht(r,10),r.end()}function hee(e,s,a){var r=hn(),n=(e||{}).Workbook||{},i=n.Sheets||[],l=n.WBProps||{},o=a.biff==8,d=a.biff==5;if(ht(r,2057,UA(e,5,a)),a.bookType=="xla"&&ht(r,135),ht(r,225,o?li(1200):null),ht(r,193,xV(2)),d&&ht(r,191),d&&ht(r,192),ht(r,226),ht(r,92,LV("SheetJS",a)),ht(r,66,li(o?1200:1252)),o&&ht(r,353,li(0)),o&&ht(r,448),ht(r,317,HG(e.SheetNames.length)),o&&e.vbaraw&&ht(r,211),o&&e.vbaraw){var u=l.CodeName||"ThisWorkbook";ht(r,442,Z8(u))}ht(r,156,li(17)),ht(r,25,tn(!1)),ht(r,18,tn(!1)),ht(r,19,li(0)),o&&ht(r,431,tn(!1)),o&&ht(r,444,li(0)),ht(r,61,QV()),ht(r,64,tn(!1)),ht(r,141,li(0)),ht(r,34,tn(GX(e)=="true")),ht(r,14,tn(!0)),o&&ht(r,439,tn(!1)),ht(r,218,li(0)),iee(r,e,a),lee(r,e.SSF,a),cee(r,a),o&&ht(r,352,tn(!1));var h=r.end(),f=hn();o&&ht(f,140,LG()),o&&a.Strings&&eee(f,252,$V(a.Strings)),ht(f,10);var x=f.end(),g=hn(),v=0,b=0;for(b=0;b<e.SheetNames.length;++b)v+=(o?12:11)+(o?2:1)*e.SheetNames[b].length;var y=h.length+v+x.length;for(b=0;b<e.SheetNames.length;++b){var j=i[b]||{};ht(g,133,zV({pos:y,hs:j.Hidden||0,dt:0,name:e.SheetNames[b]},a)),y+=s[b].length}var w=g.end();if(v!=w.length)throw new Error("BS8 "+v+" != "+w.length);var A=[];return h.length&&A.push(h),w.length&&A.push(w),x.length&&A.push(x),pr(A)}function xee(e,s){var a=s||{},r=[];e&&!e.SSF&&(e.SSF=va(Ht)),e&&e.SSF&&(c0(),Wg(e.SSF),a.revssf=Kg(e.SSF),a.revssf[e.SSF[65535]]=0,a.ssf=e.SSF),a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,ZA(a),a.cellXfs=[],ec(a.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var n=0;n<e.SheetNames.length;++n)r[r.length]=fee(n,a,e);return r.unshift(hee(e,r,a)),pr(r)}function VL(e,s){for(var a=0;a<=e.SheetNames.length;++a){var r=e.Sheets[e.SheetNames[a]];if(!(!r||!r["!ref"])){var n=gn(r["!ref"]);n.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[a]+"' extends beyond column IV (255).  Data may be lost.")}}var i=s||{};switch(i.biff||2){case 8:case 5:return xee(e,s);case 4:case 3:case 2:return nee(e,s)}throw new Error("invalid type "+i.bookType+" for BIFF")}function RO(e,s){var a=s||{},r=a.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=n.index,o=i&&i.index||e.length,d=Z9(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,h=0,f=0,x=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(l=0;l<d.length;++l){var b=d[l].trim(),y=b.slice(0,3).toLowerCase();if(y=="<tr"){if(++u,a.sheetRows&&a.sheetRows<=u){--u;break}h=0;continue}if(!(y!="<td"&&y!="<th")){var j=b.split(/<\/t[dh]>/i);for(o=0;o<j.length;++o){var w=j[o].trim();if(w.match(/<t[dh]/i)){for(var A=w,O=0;A.charAt(0)=="<"&&(O=A.indexOf(">"))>-1;)A=A.slice(O+1);for(var C=0;C<v.length;++C){var E=v[C];E.s.c==h&&E.s.r<u&&u<=E.e.r&&(h=E.e.c+1,C=-1)}var S=Wt(w.slice(0,w.indexOf(">")));x=S.colspan?+S.colspan:1,((f=+S.rowspan)>1||x>1)&&v.push({s:{r:u,c:h},e:{r:u+(f||1)-1,c:h+x-1}});var D=S.t||S["data-t"]||"";if(!A.length){h+=x;continue}if(A=p8(A),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>h&&(g.s.c=h),g.e.c<h&&(g.e.c=h),!A.length){h+=x;continue}var M={t:"s",v:A};a.raw||!A.trim().length||D=="s"||(A==="TRUE"?M={t:"b",v:!0}:A==="FALSE"?M={t:"b",v:!1}:isNaN(Ri(A))?isNaN(Ru(A).getDate())||(M={t:"d",v:ba(A)},a.cellDates||(M={t:"n",v:dr(M.v)}),M.z=a.dateNF||Ht[14]):M={t:"n",v:Ri(A)}),a.dense?(r[u]||(r[u]=[]),r[u][h]=M):r[Vt({r:u,c:h})]=M,h+=x}}}}return r["!ref"]=ss(g),v.length&&(r["!merges"]=v),r}function pee(e,s,a,r){for(var n=e["!merges"]||[],i=[],l=s.s.c;l<=s.e.c;++l){for(var o=0,d=0,u=0;u<n.length;++u)if(!(n[u].s.r>a||n[u].s.c>l)&&!(n[u].e.r<a||n[u].e.c<l)){if(n[u].s.r<a||n[u].s.c<l){o=-1;break}o=n[u].e.r-n[u].s.r+1,d=n[u].e.c-n[u].s.c+1;break}if(!(o<0)){var h=Vt({r:a,c:l}),f=r.dense?(e[a]||[])[l]:e[h],x=f&&f.v!=null&&(f.h||EA(f.w||(Bl(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),d>1&&(g.colspan=d),r.editable?x='<span contenteditable="true">'+x+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+f.l.Target+'">'+x+"</a>")),g.id=(r.id||"sjs")+"-"+h,i.push(ft("td",x,g))}}var v="<tr>";return v+i.join("")+"</tr>"}var gee='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',bee="</body></html>";function vee(e,s){var a=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!a||a.length==0)throw new Error("Invalid HTML: could not find <table>");if(a.length==1)return Zo(RO(a[0],s),s);var r=sE();return a.forEach(function(n,i){aE(r,RO(n,s),"Sheet"+(i+1))}),r}function yee(e,s,a){var r=[];return r.join("")+"<table"+(a&&a.id?' id="'+a.id+'"':"")+">"}function GL(e,s){var a=s||{},r=a.header!=null?a.header:gee,n=a.footer!=null?a.footer:bee,i=[r],l=gn(e["!ref"]);a.dense=Array.isArray(e),i.push(yee(e,l,a));for(var o=l.s.r;o<=l.e.r;++o)i.push(pee(e,l,o,a));return i.push("</table>"+n),i.join("")}function WL(e,s,a){var r=a||{},n=0,i=0;if(r.origin!=null)if(typeof r.origin=="number")n=r.origin;else{var l=typeof r.origin=="string"?_a(r.origin):r.origin;n=l.r,i=l.c}var o=s.getElementsByTagName("tr"),d=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:n,c:i}};if(e["!ref"]){var h=gn(e["!ref"]);u.s.r=Math.min(u.s.r,h.s.r),u.s.c=Math.min(u.s.c,h.s.c),u.e.r=Math.max(u.e.r,h.e.r),u.e.c=Math.max(u.e.c,h.e.c),n==-1&&(u.e.r=n=h.e.r+1)}var f=[],x=0,g=e["!rows"]||(e["!rows"]=[]),v=0,b=0,y=0,j=0,w=0,A=0;for(e["!cols"]||(e["!cols"]=[]);v<o.length&&b<d;++v){var O=o[v];if(PO(O)){if(r.display)continue;g[b]={hidden:!0}}var C=O.children;for(y=j=0;y<C.length;++y){var E=C[y];if(!(r.display&&PO(E))){var S=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):p8(E.innerHTML),D=E.getAttribute("data-z")||E.getAttribute("z");for(x=0;x<f.length;++x){var M=f[x];M.s.c==j+i&&M.s.r<b+n&&b+n<=M.e.r&&(j=M.e.c+1-i,x=-1)}A=+E.getAttribute("colspan")||1,((w=+E.getAttribute("rowspan")||1)>1||A>1)&&f.push({s:{r:b+n,c:j+i},e:{r:b+n+(w||1)-1,c:j+i+(A||1)-1}});var U={t:"s",v:S},I=E.getAttribute("data-t")||E.getAttribute("t")||"";S!=null&&(S.length==0?U.t=I||"z":r.raw||S.trim().length==0||I=="s"||(S==="TRUE"?U={t:"b",v:!0}:S==="FALSE"?U={t:"b",v:!1}:isNaN(Ri(S))?isNaN(Ru(S).getDate())||(U={t:"d",v:ba(S)},r.cellDates||(U={t:"n",v:dr(U.v)}),U.z=r.dateNF||Ht[14]):U={t:"n",v:Ri(S)})),U.z===void 0&&D!=null&&(U.z=D);var k="",z=E.getElementsByTagName("A");if(z&&z.length)for(var _=0;_<z.length&&!(z[_].hasAttribute("href")&&(k=z[_].getAttribute("href"),k.charAt(0)!="#"));++_);k&&k.charAt(0)!="#"&&(U.l={Target:k}),r.dense?(e[b+n]||(e[b+n]=[]),e[b+n][j+i]=U):e[Vt({c:j+i,r:b+n})]=U,u.e.c<j+i&&(u.e.c=j+i),j+=A}}++b}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,b-1+n),e["!ref"]=ss(u),b>=d&&(e["!fullref"]=ss((u.e.r=o.length-v+b-1+n,u))),e}function QL(e,s){var a=s||{},r=a.dense?[]:{};return WL(r,e,s)}function Nee(e,s){return Zo(QL(e,s),s)}function PO(e){var s="",a=wee(e);return a&&(s=a(e).getPropertyValue("display")),s||(s=e.style&&e.style.display),s==="none"}function wee(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function See(e){var s=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),a=As(s.replace(/<[^>]*>/g,""));return[a]}var DO={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function KL(e,s){var a=s||{},r=CA(e),n=[],i,l,o={name:""},d="",u=0,h,f,x={},g=[],v=a.dense?[]:{},b,y,j={value:""},w="",A=0,O=[],C=-1,E=-1,S={s:{r:1e6,c:1e7},e:{r:0,c:0}},D=0,M={},U=[],I={},k=0,z=0,_=[],q=1,L=1,Q=[],X={Names:[]},W={},ee=["",""],V=[],P={},Y="",J=0,K=!1,se=!1,G=0;for(df.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");b=df.exec(r);)switch(b[3]=b[3].replace(/_.*$/,"")){case"table":case"":b[1]==="/"?(S.e.c>=S.s.c&&S.e.r>=S.s.r?v["!ref"]=ss(S):v["!ref"]="A1:A1",a.sheetRows>0&&a.sheetRows<=S.e.r&&(v["!fullref"]=v["!ref"],S.e.r=a.sheetRows-1,v["!ref"]=ss(S)),U.length&&(v["!merges"]=U),_.length&&(v["!rows"]=_),h.name=h.||h.name,typeof JSON<"u"&&JSON.stringify(h),g.push(h.name),x[h.name]=v,se=!1):b[0].charAt(b[0].length-2)!=="/"&&(h=Wt(b[0],!1),C=E=-1,S.s.r=S.s.c=1e7,S.e.r=S.e.c=0,v=a.dense?[]:{},U=[],_=[],se=!0);break;case"table-row-group":b[1]==="/"?--D:++D;break;case"table-row":case"":if(b[1]==="/"){C+=q,q=1;break}if(f=Wt(b[0],!1),f.?C=f.-1:C==-1&&(C=0),q=+f["number-rows-repeated"]||1,q<10)for(G=0;G<q;++G)D>0&&(_[C+G]={level:D});E=-1;break;case"covered-table-cell":b[1]!=="/"&&++E,a.sheetStubs&&(a.dense?(v[C]||(v[C]=[]),v[C][E]={t:"z"}):v[Vt({r:C,c:E})]={t:"z"}),w="",O=[];break;case"table-cell":case"":if(b[0].charAt(b[0].length-2)==="/")++E,j=Wt(b[0],!1),L=parseInt(j["number-columns-repeated"]||"1",10),y={t:"z",v:null},j.formula&&a.cellFormula!=!1&&(y.f=kO(As(j.formula))),(j.||j["value-type"])=="string"&&(y.t="s",y.v=As(j["string-value"]||""),a.dense?(v[C]||(v[C]=[]),v[C][E]=y):v[Vt({r:C,c:E})]=y),E+=L-1;else if(b[1]!=="/"){++E,w="",A=0,O=[],L=1;var te=q?C+q-1:C;if(E>S.e.c&&(S.e.c=E),E<S.s.c&&(S.s.c=E),C<S.s.r&&(S.s.r=C),te>S.e.r&&(S.e.r=te),j=Wt(b[0],!1),V=[],P={},y={t:j.||j["value-type"],v:null},a.cellFormula)if(j.formula&&(j.formula=As(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(k=parseInt(j["number-matrix-rows-spanned"],10)||0,z=parseInt(j["number-matrix-columns-spanned"],10)||0,I={s:{r:C,c:E},e:{r:C+k-1,c:E+z-1}},y.F=ss(I),Q.push([I,y.F])),j.formula)y.f=kO(j.formula);else for(G=0;G<Q.length;++G)C>=Q[G][0].s.r&&C<=Q[G][0].e.r&&E>=Q[G][0].s.c&&E<=Q[G][0].e.c&&(y.F=Q[G][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(k=parseInt(j["number-rows-spanned"],10)||0,z=parseInt(j["number-columns-spanned"],10)||0,I={s:{r:C,c:E},e:{r:C+k-1,c:E+z-1}},U.push(I)),j["number-columns-repeated"]&&(L=parseInt(j["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=pa(j["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(j.value);break;case"percentage":y.t="n",y.v=parseFloat(j.value);break;case"currency":y.t="n",y.v=parseFloat(j.value);break;case"date":y.t="d",y.v=ba(j["date-value"]),a.cellDates||(y.t="n",y.v=dr(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=J9(j["time-value"])/86400,a.cellDates&&(y.t="d",y.v=Jg(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(j.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",j["string-value"]!=null&&(w=As(j["string-value"]),O=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(K=!1,y.t==="s"&&(y.v=w||"",O.length&&(y.R=O),K=A==0),W.Target&&(y.l=W),V.length>0&&(y.c=V,V=[]),w&&a.cellText!==!1&&(y.w=w),K&&(y.t="z",delete y.v),(!K||a.sheetStubs)&&!(a.sheetRows&&a.sheetRows<=C))for(var Z=0;Z<q;++Z){if(L=parseInt(j["number-columns-repeated"]||"1",10),a.dense)for(v[C+Z]||(v[C+Z]=[]),v[C+Z][E]=Z==0?y:va(y);--L>0;)v[C+Z][E+L]=va(y);else for(v[Vt({r:C+Z,c:E})]=y;--L>0;)v[Vt({r:C+Z,c:E+L})]=va(y);S.e.c<=E&&(S.e.c=E)}L=parseInt(j["number-columns-repeated"]||"1",10),E+=L-1,L=0,y={},w="",O=[]}W={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(b[1]==="/"){if((i=n.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&n.push([b[3],!0]);break;case"annotation":if(b[1]==="/"){if((i=n.pop())[0]!==b[3])throw"Bad state: "+i;P.t=w,O.length&&(P.R=O),P.a=Y,V.push(P)}else b[0].charAt(b[0].length-2)!=="/"&&n.push([b[3],!1]);Y="",J=0,w="",A=0,O=[];break;case"creator":b[1]==="/"?Y=r.slice(J,b.index):J=b.index+b[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(b[1]==="/"){if((i=n.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&n.push([b[3],!1]);w="",A=0,O=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(b[1]==="/"){if(M[o.name]=d,(i=n.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&(d="",o=Wt(b[0],!1),n.push([b[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Wt(b[0],!1),d+=DO[b[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":l=Wt(b[0],!1),d+=DO[b[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(b[0].slice(-2)==="/>")break;if(b[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":d+=r.slice(u,b.index);break}else u=b.index+b[0].length;break;case"named-range":l=Wt(b[0],!1),ee=l1(l["cell-range-address"]);var ue={Name:l.name,Ref:ee[0]+"!"+ee[1]};se&&(ue.Sheet=g.length),X.Names.push(ue);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(b[1]==="/"&&(!j||!j["string-value"])){var re=See(r.slice(A,b.index));w=(w.length>0?w+`
`:"")+re[0]}else Wt(b[0],!1),A=b.index+b[0].length;break;case"s":break;case"database-range":if(b[1]==="/")break;try{ee=l1(Wt(b[0])["target-range-address"]),x[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(b[1]!=="/"){if(W=Wt(b[0],!1),!W.href)break;W.Target=As(W.href),delete W.href,W.Target.charAt(0)=="#"&&W.Target.indexOf(".")>-1?(ee=l1(W.Target.slice(1)),W.Target="#"+ee[0]+"!"+ee[1]):W.Target.match(/^\.\.[\\\/]/)&&(W.Target=W.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(b[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(a.WTF)throw new Error(b)}}var H={Sheets:x,SheetNames:g,Workbook:X};return a.bookSheets&&delete H.Sheets,H}function MO(e,s){s=s||{},ii(e,"META-INF/manifest.xml")&&JH(Ya(e,"META-INF/manifest.xml"),s);var a=Pn(e,"content.xml");if(!a)throw new Error("Missing content.xml in ODS / UOF file");var r=KL(ia(a),s);return ii(e,"meta.xml")&&(r.Props=z8(Ya(e,"meta.xml"))),r}function LO(e,s){return KL(e,s)}var jee=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),s="<office:document-styles "+cf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ha+s}})(),FO=(function(){var e=function(i){return Ys(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},s=`          <table:table-cell />
`,a=`          <table:covered-table-cell/>
`,r=function(i,l,o){var d=[];d.push('      <table:table table:name="'+Ys(l.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,h=0,f=gn(i["!ref"]||"A1"),x=i["!merges"]||[],g=0,v=Array.isArray(i);if(i["!cols"])for(h=0;h<=f.e.c;++h)d.push("        <table:table-column"+(i["!cols"][h]?' table:style-name="co'+i["!cols"][h].ods+'"':"")+`></table:table-column>
`);var b="",y=i["!rows"]||[];for(u=0;u<f.s.r;++u)b=y[u]?' table:style-name="ro'+y[u].ods+'"':"",d.push("        <table:table-row"+b+`></table:table-row>
`);for(;u<=f.e.r;++u){for(b=y[u]?' table:style-name="ro'+y[u].ods+'"':"",d.push("        <table:table-row"+b+`>
`),h=0;h<f.s.c;++h)d.push(s);for(;h<=f.e.c;++h){var j=!1,w={},A="";for(g=0;g!=x.length;++g)if(!(x[g].s.c>h)&&!(x[g].s.r>u)&&!(x[g].e.c<h)&&!(x[g].e.r<u)){(x[g].s.c!=h||x[g].s.r!=u)&&(j=!0),w["table:number-columns-spanned"]=x[g].e.c-x[g].s.c+1,w["table:number-rows-spanned"]=x[g].e.r-x[g].s.r+1;break}if(j){d.push(a);continue}var O=Vt({r:u,c:h}),C=v?(i[u]||[])[h]:i[O];if(C&&C.f&&(w["table:formula"]=Ys(HJ(C.f)),C.F&&C.F.slice(0,O.length)==O)){var E=gn(C.F);w["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,w["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!C){d.push(s);continue}switch(C.t){case"b":A=C.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=C.v?"true":"false";break;case"n":A=C.w||String(C.v||0),w["office:value-type"]="float",w["office:value"]=C.v||0;break;case"s":case"str":A=C.v==null?"":C.v,w["office:value-type"]="string";break;case"d":A=C.w||ba(C.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=ba(C.v).toISOString(),w["table:style-name"]="ce1";break;default:d.push(s);continue}var S=e(A);if(C.l&&C.l.Target){var D=C.l.Target;D=D.charAt(0)=="#"?"#"+VJ(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),S=ft("text:a",S,{"xlink:href":D.replace(/&/g,"&amp;")})}d.push("          "+ft("table:table-cell",ft("text:p",S,{}),w)+`
`)}d.push(`        </table:table-row>
`)}return d.push(`      </table:table>
`),d.join("")},n=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var h=0;h<u["!cols"].length;++h)if(u["!cols"][h]){var f=u["!cols"][h];if(f.width==null&&f.wpx==null&&f.wch==null)continue;$o(f),f.ods=o;var x=u["!cols"][h].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),i.push(`  </style:style>
`),++o}}});var d=0;l.SheetNames.map(function(u){return l.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var h=0;h<u["!rows"].length;++h)if(u["!rows"][h]){u["!rows"][h].ods=d;var f=u["!rows"][h].hpx+"px";i.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++d}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var d=[Ha],u=cf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=cf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(d.push("<office:document"+u+h+`>
`),d.push(U8().replace(/office:document-meta/g,"office:meta"))):d.push("<office:document-content"+u+`>
`),n(d,l),d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`);for(var f=0;f!=l.SheetNames.length;++f)d.push(r(l.Sheets[l.SheetNames[f]],l,f));return d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),o.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}})();function JL(e,s){if(s.bookType=="fods")return FO(e,s);var a=SA(),r="",n=[],i=[];return r="mimetype",ns(a,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",ns(a,r,FO(e,s)),n.push([r,"text/xml"]),i.push([r,"ContentFile"]),r="styles.xml",ns(a,r,jee(e,s)),n.push([r,"text/xml"]),i.push([r,"StylesFile"]),r="meta.xml",ns(a,r,Ha+U8()),n.push([r,"text/xml"]),i.push([r,"MetadataFile"]),r="manifest.rdf",ns(a,r,ZH(i)),n.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",ns(a,r,YH(n)),a}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function sd(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Fj(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ia(Xo(e))}function Aee(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Rn(Qi(e))}function Eee(e,s){e:for(var a=0;a<=e.length-s.length;++a){for(var r=0;r<s.length;++r)if(e[a+r]!=s[r])continue e;return!0}return!1}function Ho(e){var s=e.reduce(function(n,i){return n+i.length},0),a=new Uint8Array(s),r=0;return e.forEach(function(n){a.set(n,r),r+=n.length}),a}function UO(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Cee(e,s){for(var a=(e[s+15]&127)<<7|e[s+14]>>1,r=e[s+14]&1,n=s+13;n>=s;--n)r=r*256+e[n];return(e[s+15]&128?-r:r)*Math.pow(10,a-6176)}function Tee(e,s,a){var r=Math.floor(a==0?0:Math.LOG10E*Math.log(Math.abs(a)))+6176-20,n=a/Math.pow(10,r-6176);e[s+15]|=r>>7,e[s+14]|=(r&127)<<1;for(var i=0;n>=1;++i,n/=256)e[s+i]=n&255;e[s+15]|=a>=0?0:128}function gf(e,s){var a=s?s[0]:0,r=e[a]&127;e:if(e[a++]>=128&&(r|=(e[a]&127)<<7,e[a++]<128||(r|=(e[a]&127)<<14,e[a++]<128)||(r|=(e[a]&127)<<21,e[a++]<128)||(r+=(e[a]&127)*Math.pow(2,28),++a,e[a++]<128)||(r+=(e[a]&127)*Math.pow(2,35),++a,e[a++]<128)||(r+=(e[a]&127)*Math.pow(2,42),++a,e[a++]<128)))break e;return s&&(s[0]=a),r}function Ks(e){var s=new Uint8Array(7);s[0]=e&127;var a=1;e:if(e>127){if(s[a-1]|=128,s[a]=e>>7&127,++a,e<=16383||(s[a-1]|=128,s[a]=e>>14&127,++a,e<=2097151)||(s[a-1]|=128,s[a]=e>>21&127,++a,e<=268435455)||(s[a-1]|=128,s[a]=e/256>>>21&127,++a,e<=34359738367)||(s[a-1]|=128,s[a]=e/65536>>>21&127,++a,e<=4398046511103))break e;s[a-1]|=128,s[a]=e/16777216>>>21&127,++a}return s.slice(0,a)}function Da(e){var s=0,a=e[s]&127;e:if(e[s++]>=128){if(a|=(e[s]&127)<<7,e[s++]<128||(a|=(e[s]&127)<<14,e[s++]<128)||(a|=(e[s]&127)<<21,e[s++]<128))break e;a|=(e[s]&127)<<28}return a}function Ps(e){for(var s=[],a=[0];a[0]<e.length;){var r=a[0],n=gf(e,a),i=n&7;n=Math.floor(n/8);var l=0,o;if(n==0)break;switch(i){case 0:{for(var d=a[0];e[a[0]++]>=128;);o=e.slice(d,a[0])}break;case 5:l=4,o=e.slice(a[0],a[0]+l),a[0]+=l;break;case 1:l=8,o=e.slice(a[0],a[0]+l),a[0]+=l;break;case 2:l=gf(e,a),o=e.slice(a[0],a[0]+l),a[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(r))}var u={data:o,type:i};s[n]==null?s[n]=[u]:s[n].push(u)}return s}function Er(e){var s=[];return e.forEach(function(a,r){a.forEach(function(n){n.data&&(s.push(Ks(r*8+n.type)),n.type==2&&s.push(Ks(n.data.length)),s.push(n.data))})}),Ho(s)}function YA(e,s){return(e==null?void 0:e.map(function(a){return s(a.data)}))||[]}function ai(e){for(var s,a=[],r=[0];r[0]<e.length;){var n=gf(e,r),i=Ps(e.slice(r[0],r[0]+n));r[0]+=n;var l={id:Da(i[1][0].data),messages:[]};i[2].forEach(function(o){var d=Ps(o.data),u=Da(d[3][0].data);l.messages.push({meta:d,data:e.slice(r[0],r[0]+u)}),r[0]+=u}),(s=i[3])!=null&&s[0]&&(l.merge=Da(i[3][0].data)>>>0>0),a.push(l)}return a}function ru(e){var s=[];return e.forEach(function(a){var r=[];r[1]=[{data:Ks(a.id),type:0}],r[2]=[],a.merge!=null&&(r[3]=[{data:Ks(+!!a.merge),type:0}]);var n=[];a.messages.forEach(function(l){n.push(l.data),l.meta[3]=[{type:0,data:Ks(l.data.length)}],r[2].push({data:Er(l.meta),type:2})});var i=Er(r);s.push(Ks(i.length)),s.push(i),n.forEach(function(l){return s.push(l)})}),Ho(s)}function _ee(e,s){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var a=[0],r=gf(s,a),n=[];a[0]<s.length;){var i=s[a[0]]&3;if(i==0){var l=s[a[0]++]>>2;if(l<60)++l;else{var o=l-59;l=s[a[0]],o>1&&(l|=s[a[0]+1]<<8),o>2&&(l|=s[a[0]+2]<<16),o>3&&(l|=s[a[0]+3]<<24),l>>>=0,l++,a[0]+=o}n.push(s.slice(a[0],a[0]+l)),a[0]+=l;continue}else{var d=0,u=0;if(i==1?(u=(s[a[0]]>>2&7)+4,d=(s[a[0]++]&224)<<3,d|=s[a[0]++]):(u=(s[a[0]++]>>2)+1,i==2?(d=s[a[0]]|s[a[0]+1]<<8,a[0]+=2):(d=(s[a[0]]|s[a[0]+1]<<8|s[a[0]+2]<<16|s[a[0]+3]<<24)>>>0,a[0]+=4)),n=[Ho(n)],d==0)throw new Error("Invalid offset 0");if(d>n[0].length)throw new Error("Invalid offset beyond length");if(u>=d)for(n.push(n[0].slice(-d)),u-=d;u>=n[n.length-1].length;)n.push(n[n.length-1]),u-=n[n.length-1].length;n.push(n[0].slice(-d,-d+u))}}var h=Ho(n);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function ri(e){for(var s=[],a=0;a<e.length;){var r=e[a++],n=e[a]|e[a+1]<<8|e[a+2]<<16;a+=3,s.push(_ee(r,e.slice(a,a+n))),a+=n}if(a!==e.length)throw new Error("data is not a valid framed stream!");return Ho(s)}function nu(e){for(var s=[],a=0;a<e.length;){var r=Math.min(e.length-a,268435455),n=new Uint8Array(4);s.push(n);var i=Ks(r),l=i.length;s.push(i),r<=60?(l++,s.push(new Uint8Array([r-1<<2]))):r<=256?(l+=2,s.push(new Uint8Array([240,r-1&255]))):r<=65536?(l+=3,s.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(l+=4,s.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(l+=5,s.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),s.push(e.slice(a,a+r)),l+=r,n[0]=0,n[1]=l&255,n[2]=l>>8&255,n[3]=l>>16&255,a+=r}return Ho(s)}function kee(e,s,a,r){var n=sd(e),i=n.getUint32(4,!0),l=(r>1?12:8)+UO(i&(r>1?3470:398))*4,o=-1,d=-1,u=NaN,h=new Date(2001,0,1);i&512&&(o=n.getUint32(l,!0),l+=4),l+=UO(i&(r>1?12288:4096))*4,i&16&&(d=n.getUint32(l,!0),l+=4),i&32&&(u=n.getFloat64(l,!0),l+=8),i&64&&(h.setTime(h.getTime()+n.getFloat64(l,!0)*1e3),l+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:s[d]};break;case 5:f={t:"d",v:h};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:a[o]};else if(d>-1)f={t:"s",v:s[d]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Oee(e,s,a){var r=sd(e),n=r.getUint32(8,!0),i=12,l=-1,o=-1,d=NaN,u=NaN,h=new Date(2001,0,1);n&1&&(d=Cee(e,i),i+=16),n&2&&(u=r.getFloat64(i,!0),i+=8),n&4&&(h.setTime(h.getTime()+r.getFloat64(i,!0)*1e3),i+=8),n&8&&(o=r.getUint32(i,!0),i+=4),n&16&&(l=r.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:s[o]};break;case 5:f={t:"d",v:h};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:a[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return f}function c1(e,s){var a=new Uint8Array(32),r=sd(a),n=12,i=0;switch(a[0]=5,e.t){case"n":a[1]=2,Tee(a,n,e.v),i|=1,n+=16;break;case"b":a[1]=6,r.setFloat64(n,e.v?1:0,!0),i|=2,n+=8;break;case"s":if(s.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));a[1]=3,r.setUint32(n,s.indexOf(e.v),!0),i|=8,n+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,i,!0),a.slice(0,n)}function d1(e,s){var a=new Uint8Array(32),r=sd(a),n=12,i=0;switch(a[0]=3,e.t){case"n":a[2]=2,r.setFloat64(n,e.v,!0),i|=32,n+=8;break;case"b":a[2]=6,r.setFloat64(n,e.v?1:0,!0),i|=32,n+=8;break;case"s":if(s.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));a[2]=3,r.setUint32(n,s.indexOf(e.v),!0),i|=16,n+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,i,!0),a.slice(0,n)}function Iee(e,s,a){switch(e[0]){case 0:case 1:case 2:case 3:return kee(e,s,a,e[0]);case 5:return Oee(e,s,a);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function zr(e){var s=Ps(e);return gf(s[1][0].data)}function zO(e,s){var a=Ps(s.data),r=Da(a[1][0].data),n=a[3],i=[];return(n||[]).forEach(function(l){var o=Ps(l.data),d=Da(o[1][0].data)>>>0;switch(r){case 1:i[d]=Fj(o[3][0].data);break;case 8:{var u=e[zr(o[9][0].data)][0],h=Ps(u.data),f=e[zr(h[1][0].data)][0],x=Da(f.meta[1][0].data);if(x!=2001)throw new Error("2000 unexpected reference to ".concat(x));var g=Ps(f.data);i[d]=g[3].map(function(v){return Fj(v.data)}).join("")}break}}),i}function Ree(e,s){var a,r,n,i,l,o,d,u,h,f,x,g,v,b,y=Ps(e),j=Da(y[1][0].data)>>>0,w=Da(y[2][0].data)>>>0,A=((r=(a=y[8])==null?void 0:a[0])==null?void 0:r.data)&&Da(y[8][0].data)>0||!1,O,C;if((i=(n=y[7])==null?void 0:n[0])!=null&&i.data&&s!=0)O=(o=(l=y[7])==null?void 0:l[0])==null?void 0:o.data,C=(u=(d=y[6])==null?void 0:d[0])==null?void 0:u.data;else if((f=(h=y[4])==null?void 0:h[0])!=null&&f.data&&s!=1)O=(g=(x=y[4])==null?void 0:x[0])==null?void 0:g.data,C=(b=(v=y[3])==null?void 0:v[0])==null?void 0:b.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var E=A?4:1,S=sd(O),D=[],M=0;M<O.length/2;++M){var U=S.getUint16(M*2,!0);U<65535&&D.push([M,U])}if(D.length!=w)throw"Expected ".concat(w," cells, found ").concat(D.length);var I=[];for(M=0;M<D.length-1;++M)I[D[M][0]]=C.subarray(D[M][1]*E,D[M+1][1]*E);return D.length>=1&&(I[D[D.length-1][0]]=C.subarray(D[D.length-1][1]*E)),{R:j,cells:I}}function Pee(e,s){var a,r=Ps(s.data),n=(a=r==null?void 0:r[7])!=null&&a[0]?Da(r[7][0].data)>>>0>0?1:0:-1,i=YA(r[5],function(l){return Ree(l,n)});return{nrows:Da(r[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(d,u){if(l[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));l[o.R][u]=d}),l},[])}}function Dee(e,s,a){var r,n=Ps(s.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Da(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(Da(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));a["!ref"]=ss(i);var l=Ps(n[4][0].data),o=zO(e,e[zr(l[4][0].data)][0]),d=(r=l[17])!=null&&r[0]?zO(e,e[zr(l[17][0].data)][0]):[],u=Ps(l[3][0].data),h=0;u[1].forEach(function(f){var x=Ps(f.data),g=e[zr(x[2][0].data)][0],v=Da(g.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var b=Pee(e,g);b.data.forEach(function(y,j){y.forEach(function(w,A){var O=Vt({r:h+j,c:A}),C=Iee(w,o,d);C&&(a[O]=C)})}),h+=b.nrows})}function Mee(e,s){var a=Ps(s.data),r={"!ref":"A1"},n=e[zr(a[2][0].data)],i=Da(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Dee(e,n[0],r),r}function Lee(e,s){var a,r=Ps(s.data),n={name:(a=r[1])!=null&&a[0]?Fj(r[1][0].data):"",sheets:[]},i=YA(r[2],zr);return i.forEach(function(l){e[l].forEach(function(o){var d=Da(o.meta[1][0].data);d==6e3&&n.sheets.push(Mee(e,o))})}),n}function Fee(e,s){var a=sE(),r=Ps(s.data),n=YA(r[1],zr);if(n.forEach(function(i){e[i].forEach(function(l){var o=Da(l.meta[1][0].data);if(o==2){var d=Lee(e,l);d.sheets.forEach(function(u,h){aE(a,u,h==0?d.name:d.name+"_"+h,!0)})}})}),a.SheetNames.length==0)throw new Error("Empty NUMBERS file");return a}function u1(e){var s,a,r,n,i={},l=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var u;try{u=ri(d.content)}catch(f){return console.log("?? "+d.content.length+" "+(f.message||f))}var h;try{h=ai(u)}catch(f){return console.log("## "+(f.message||f))}h.forEach(function(f){i[f.id]=f.messages,l.push(f.id)})}}),!l.length)throw new Error("File has no messages");var o=((n=(r=(a=(s=i==null?void 0:i[1])==null?void 0:s[0])==null?void 0:a.meta)==null?void 0:r[1])==null?void 0:n[0].data)&&Da(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(d){i[d].forEach(function(u){var h=Da(u.meta[1][0].data)>>>0;if(h==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Fee(i,o)}function Uee(e,s,a){var r,n,i,l;if(!((r=e[6])!=null&&r[0])||!((n=e[7])!=null&&n[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&Da(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var d=0,u=sd(e[7][0].data),h=0,f=[],x=sd(e[4][0].data),g=0,v=[],b=0;b<s.length;++b){if(s[b]==null){u.setUint16(b*2,65535,!0),x.setUint16(b*2,65535);continue}u.setUint16(b*2,h,!0),x.setUint16(b*2,g,!0);var y,j;switch(typeof s[b]){case"string":y=c1({t:"s",v:s[b]},a),j=d1({t:"s",v:s[b]},a);break;case"number":y=c1({t:"n",v:s[b]},a),j=d1({t:"n",v:s[b]},a);break;case"boolean":y=c1({t:"b",v:s[b]},a),j=d1({t:"b",v:s[b]},a);break;default:throw new Error("Unsupported value "+s[b])}f.push(y),h+=y.length,v.push(j),g+=j.length,++d}for(e[2][0].data=Ks(d);b<e[7][0].data.length/2;++b)u.setUint16(b*2,65535,!0),x.setUint16(b*2,65535,!0);return e[6][0].data=Ho(f),e[3][0].data=Ho(v),d}function zee(e,s){if(!s||!s.numbers)throw new Error("Must pass a `numbers` option -- check the README");var a=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=gn(a["!ref"]);r.s.r=r.s.c=0;var n=!1;r.e.c>9&&(n=!0,r.e.c=9),r.e.r>49&&(n=!0,r.e.r=49),n&&console.error("The Numbers writer is currently limited to ".concat(ss(r)));var i=zp(a,{range:r,header:1}),l=["~Sh33tJ5~"];i.forEach(function(Y){return Y.forEach(function(J){typeof J=="string"&&l.push(J)})});var o={},d=[],u=It.read(s.numbers,{type:"base64"});u.FileIndex.map(function(Y,J){return[Y,u.FullPaths[J]]}).forEach(function(Y){var J=Y[0],K=Y[1];if(J.type==2&&J.name.match(/\.iwa/)){var se=J.content,G=ri(se),te=ai(G);te.forEach(function(Z){d.push(Z.id),o[Z.id]={deps:[],location:K,type:Da(Z.messages[0].meta[1][0].data)}})}}),d.sort(function(Y,J){return Y-J});var h=d.filter(function(Y){return Y>1}).map(function(Y){return[Y,Ks(Y)]});u.FileIndex.map(function(Y,J){return[Y,u.FullPaths[J]]}).forEach(function(Y){var J=Y[0];if(Y[1],!!J.name.match(/\.iwa/)){var K=ai(ri(J.content));K.forEach(function(se){se.messages.forEach(function(G){h.forEach(function(te){se.messages.some(function(Z){return Da(Z.meta[1][0].data)!=11006&&Eee(Z.data,te[1])})&&o[te[0]].deps.push(se.id)})})})}});for(var f=It.find(u,o[1].location),x=ai(ri(f.content)),g,v=0;v<x.length;++v){var b=x[v];b.id==1&&(g=b)}var y=zr(Ps(g.messages[0].data)[1][0].data);for(f=It.find(u,o[y].location),x=ai(ri(f.content)),v=0;v<x.length;++v)b=x[v],b.id==y&&(g=b);for(y=zr(Ps(g.messages[0].data)[2][0].data),f=It.find(u,o[y].location),x=ai(ri(f.content)),v=0;v<x.length;++v)b=x[v],b.id==y&&(g=b);for(y=zr(Ps(g.messages[0].data)[2][0].data),f=It.find(u,o[y].location),x=ai(ri(f.content)),v=0;v<x.length;++v)b=x[v],b.id==y&&(g=b);var j=Ps(g.messages[0].data);{j[6][0].data=Ks(r.e.r+1),j[7][0].data=Ks(r.e.c+1);var w=zr(j[46][0].data),A=It.find(u,o[w].location),O=ai(ri(A.content));{for(var C=0;C<O.length&&O[C].id!=w;++C);if(O[C].id!=w)throw"Bad ColumnRowUIDMapArchive";var E=Ps(O[C].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var S=0;S<=r.e.c;++S){var D=[];D[1]=D[2]=[{type:0,data:Ks(S+420690)}],E[1].push({type:2,data:Er(D)}),E[2].push({type:0,data:Ks(S)}),E[3].push({type:0,data:Ks(S)})}E[4]=[],E[5]=[],E[6]=[];for(var M=0;M<=r.e.r;++M)D=[],D[1]=D[2]=[{type:0,data:Ks(M+726270)}],E[4].push({type:2,data:Er(D)}),E[5].push({type:0,data:Ks(M)}),E[6].push({type:0,data:Ks(M)});O[C].messages[0].data=Er(E)}A.content=nu(ru(O)),A.size=A.content.length,delete j[46];var U=Ps(j[4][0].data);{U[7][0].data=Ks(r.e.r+1);var I=Ps(U[1][0].data),k=zr(I[2][0].data);A=It.find(u,o[k].location),O=ai(ri(A.content));{if(O[0].id!=k)throw"Bad HeaderStorageBucket";var z=Ps(O[0].messages[0].data);for(M=0;M<i.length;++M){var _=Ps(z[2][0].data);_[1][0].data=Ks(M),_[4][0].data=Ks(i[M].length),z[2][M]={type:z[2][0].type,data:Er(_)}}O[0].messages[0].data=Er(z)}A.content=nu(ru(O)),A.size=A.content.length;var q=zr(U[2][0].data);A=It.find(u,o[q].location),O=ai(ri(A.content));{if(O[0].id!=q)throw"Bad HeaderStorageBucket";for(z=Ps(O[0].messages[0].data),S=0;S<=r.e.c;++S)_=Ps(z[2][0].data),_[1][0].data=Ks(S),_[4][0].data=Ks(r.e.r+1),z[2][S]={type:z[2][0].type,data:Er(_)};O[0].messages[0].data=Er(z)}A.content=nu(ru(O)),A.size=A.content.length;var L=zr(U[4][0].data);(function(){for(var Y=It.find(u,o[L].location),J=ai(ri(Y.content)),K,se=0;se<J.length;++se){var G=J[se];G.id==L&&(K=G)}var te=Ps(K.messages[0].data);{te[3]=[];var Z=[];l.forEach(function(H,pe){Z[1]=[{type:0,data:Ks(pe)}],Z[2]=[{type:0,data:Ks(1)}],Z[3]=[{type:2,data:Aee(H)}],te[3].push({type:2,data:Er(Z)})})}K.messages[0].data=Er(te);var ue=ru(J),re=nu(ue);Y.content=re,Y.size=Y.content.length})();var Q=Ps(U[3][0].data);{var X=Q[1][0];delete Q[2];var W=Ps(X.data);{var ee=zr(W[2][0].data);(function(){for(var Y=It.find(u,o[ee].location),J=ai(ri(Y.content)),K,se=0;se<J.length;++se){var G=J[se];G.id==ee&&(K=G)}var te=Ps(K.messages[0].data);{delete te[6],delete Q[7];var Z=new Uint8Array(te[5][0].data);te[5]=[];for(var ue=0,re=0;re<=r.e.r;++re){var H=Ps(Z);ue+=Uee(H,i[re],l),H[1][0].data=Ks(re),te[5].push({data:Er(H),type:2})}te[1]=[{type:0,data:Ks(r.e.c+1)}],te[2]=[{type:0,data:Ks(r.e.r+1)}],te[3]=[{type:0,data:Ks(ue)}],te[4]=[{type:0,data:Ks(r.e.r+1)}]}K.messages[0].data=Er(te);var pe=ru(J),B=nu(pe);Y.content=B,Y.size=Y.content.length})()}X.data=Er(W)}U[3][0].data=Er(Q)}j[4][0].data=Er(U)}g.messages[0].data=Er(j);var V=ru(x),P=nu(V);return f.content=P,f.size=f.content.length,u}function YL(e){return function(a){for(var r=0;r!=e.length;++r){var n=e[r];a[n[0]]===void 0&&(a[n[0]]=n[1]),n[2]==="n"&&(a[n[0]]=Number(a[n[0]]))}}}function XA(e){YL([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function ZA(e){YL([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Bee(e){return ms.WS.indexOf(e)>-1?"sheet":e==ms.CS?"chart":e==ms.DS?"dialog":e==ms.MS?"macro":e&&e.length?e:"sheet"}function $ee(e,s){if(!e)return 0;try{e=s.map(function(r){return r.id||(r.id=r.strRelID),[r.name,e["!id"][r.id].Target,Bee(e["!id"][r.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function qee(e,s,a,r,n,i,l,o,d,u,h,f){try{i[r]=qm(Pn(e,a,!0),s);var x=Ya(e,s),g;switch(o){case"sheet":g=uZ(x,s,n,d,i[r],u,h,f);break;case"chart":if(g=mZ(x,s,n,d,i[r],u,h,f),!g||!g["!drawel"])break;var v=Im(g["!drawel"].Target,s),b=uf(v),y=XQ(Pn(e,v,!0),qm(Pn(e,b,!0),v)),j=Im(y,v),w=uf(j);g=UX(Pn(e,j,!0),j,d,qm(Pn(e,w,!0),j),u,g);break;case"macro":g=fZ(x,s,n,d,i[r],u,h,f);break;case"dialog":g=hZ(x,s,n,d,i[r],u,h,f);break;default:throw new Error("Unrecognized sheet type "+o)}l[r]=g;var A=[];i&&i[r]&&Ma(i[r]).forEach(function(O){var C="";if(i[r][O].Type==ms.CMNT){C=Im(i[r][O].Target,s);var E=bZ(Ya(e,C,!0),C,d);if(!E||!E.length)return;AO(g,E,!1)}i[r][O].Type==ms.TCMNT&&(C=Im(i[r][O].Target,s),A=A.concat(eK(Ya(e,C,!0),d)))}),A&&A.length&&AO(g,A,!0,d.people||[])}catch(O){if(d.WTF)throw O}}function Yn(e){return e.charAt(0)=="/"?e.slice(1):e}function XL(e,s){if(c0(),s=s||{},XA(s),ii(e,"META-INF/manifest.xml")||ii(e,"objectdata.xml"))return MO(e,s);if(ii(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof u1<"u"){if(e.FileIndex)return u1(e);var a=It.utils.cfb_new();return G4(e).forEach(function(_){ns(a,_,tH(e,_))}),u1(a)}throw new Error("Unsupported NUMBERS file")}if(!ii(e,"[Content_Types].xml"))throw ii(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):ii(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=G4(e),n=QH(Pn(e,"[Content_Types].xml")),i=!1,l,o;if(n.workbooks.length===0&&(o="xl/workbook.xml",Ya(e,o,!0)&&n.workbooks.push(o)),n.workbooks.length===0){if(o="xl/workbook.bin",!Ya(e,o,!0))throw new Error("Could not find workbook");n.workbooks.push(o),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var d={},u={};if(!s.bookSheets&&!s.bookProps){if(Hm=[],n.sst)try{Hm=gZ(Ya(e,Yn(n.sst)),n.sst,s)}catch(_){if(s.WTF)throw _}s.cellStyles&&n.themes.length&&(d=pZ(Pn(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],s)),n.style&&(u=xZ(Ya(e,Yn(n.style)),n.style,d,s))}n.links.map(function(_){try{var q=qm(Pn(e,uf(Yn(_))),_);return yZ(Ya(e,Yn(_)),q,_,s)}catch{}});var h=dZ(Ya(e,Yn(n.workbooks[0])),n.workbooks[0],s),f={},x="";n.coreprops.length&&(x=Ya(e,Yn(n.coreprops[0]),!0),x&&(f=z8(x)),n.extprops.length!==0&&(x=Ya(e,Yn(n.extprops[0]),!0),x&&tV(x,f,s)));var g={};(!s.bookSheets||s.bookProps)&&n.custprops.length!==0&&(x=Pn(e,Yn(n.custprops[0]),!0),x&&(g=aV(x,s)));var v={};if((s.bookSheets||s.bookProps)&&(h.Sheets?l=h.Sheets.map(function(q){return q.name}):f.Worksheets&&f.SheetNames.length>0&&(l=f.SheetNames),s.bookProps&&(v.Props=f,v.Custprops=g),s.bookSheets&&typeof l<"u"&&(v.SheetNames=l),s.bookSheets?v.SheetNames:s.bookProps))return v;l={};var b={};s.bookDeps&&n.calcchain&&(b=vZ(Ya(e,Yn(n.calcchain)),n.calcchain));var y=0,j={},w,A;{var O=h.Sheets;f.Worksheets=O.length,f.SheetNames=[];for(var C=0;C!=O.length;++C)f.SheetNames[C]=O[C].name}var E=i?"bin":"xml",S=n.workbooks[0].lastIndexOf("/"),D=(n.workbooks[0].slice(0,S+1)+"_rels/"+n.workbooks[0].slice(S+1)+".rels").replace(/^\//,"");ii(e,D)||(D="xl/_rels/workbook."+E+".rels");var M=qm(Pn(e,D,!0),D.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(s.xlmeta=NZ(Ya(e,Yn(n.metadata[0])),n.metadata[0],s)),(n.people||[]).length>=1&&(s.people=sK(Ya(e,Yn(n.people[0])),s)),M&&(M=$ee(M,h.Sheets));var U=Ya(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var I="sheet";if(M&&M[y]?(w="xl/"+M[y][1].replace(/[\/]?xl\//,""),ii(e,w)||(w=M[y][1]),ii(e,w)||(w=D.replace(/_rels\/.*$/,"")+M[y][1]),I=M[y][2]):(w="xl/worksheets/sheet"+(y+1-U)+"."+E,w=w.replace(/sheet0\./,"sheet.")),A=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(y!=s.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var k=!1,z=0;z!=s.sheets.length;++z)typeof s.sheets[z]=="number"&&s.sheets[z]==y&&(k=1),typeof s.sheets[z]=="string"&&s.sheets[z].toLowerCase()==f.SheetNames[y].toLowerCase()&&(k=1);if(!k)continue e}}qee(e,w,A,f.SheetNames[y],y,j,l,I,s,h,d,u)}return v={Directory:n,Workbook:h,Props:f,Custprops:g,Deps:b,Sheets:l,SheetNames:f.SheetNames,Strings:Hm,Styles:u,Themes:d,SSF:va(Ht)},s&&s.bookFiles&&(e.files?(v.keys=r,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(_,q){_=_.replace(/^Root Entry[\/]/,""),v.keys.push(_),v.files[_]=e.FileIndex[q]}))),s&&s.bookVBA&&(n.vba.length>0?v.vbaraw=Ya(e,Yn(n.vba[0]),!0):n.defaults&&n.defaults.bin===dK&&(v.vbaraw=Ya(e,"xl/vbaProject.bin",!0))),v}function Hee(e,s){var a=s||{},r="Workbook",n=It.find(e,r);try{if(r="/!DataSpaces/Version",n=It.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(NW(n.content),r="/!DataSpaces/DataSpaceMap",n=It.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var i=SW(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=It.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var l=jW(n.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=It.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);EW(n.content)}catch{}if(r="/EncryptionInfo",n=It.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=CW(n.content);if(r="/EncryptedPackage",n=It.find(e,r),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],n.content,a.password||"",a);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],n.content,a.password||"",a);throw new Error("File is password-protected")}function Vee(e,s){return s.bookType=="ods"?JL(e,s):s.bookType=="numbers"?zee(e,s):s.bookType=="xlsb"?Gee(e,s):Wee(e,s)}function Gee(e,s){gu=1024,e&&!e.SSF&&(e.SSF=va(Ht)),e&&e.SSF&&(c0(),Wg(e.SSF),s.revssf=Kg(e.SSF),s.revssf[e.SSF[65535]]=0,s.ssf=e.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Vm?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a=s.bookType=="xlsb"?"bin":"xml",r=AL.indexOf(s.bookType)>-1,n=LA();ZA(s=s||{});var i=SA(),l="",o=0;if(s.cellXfs=[],ec(s.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",ns(i,l,B8(e.Props,s)),n.coreprops.push(l),Js(s.rels,2,l,ms.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&d.push(e.SheetNames[u]);e.Props.SheetNames=d}for(e.Props.Worksheets=e.Props.SheetNames.length,ns(i,l,H8(e.Props)),n.extprops.push(l),Js(s.rels,3,l,ms.EXT_PROPS),e.Custprops!==e.Props&&Ma(e.Custprops||{}).length>0&&(l="docProps/custom.xml",ns(i,l,V8(e.Custprops)),n.custprops.push(l),Js(s.rels,4,l,ms.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var h={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],x=(f||{})["!type"]||"sheet";switch(x){case"chart":default:l="xl/worksheets/sheet"+o+"."+a,ns(i,l,SZ(o-1,l,s,e,h)),n.sheets.push(l),Js(s.wbrels,-1,"worksheets/sheet"+o+"."+a,ms.WS[0])}if(f){var g=f["!comments"],v=!1,b="";g&&g.length>0&&(b="xl/comments"+o+"."+a,ns(i,b,EZ(g,b)),n.comments.push(b),Js(h,-1,"../comments"+o+"."+a,ms.CMNT),v=!0),f["!legacy"]&&v&&ns(i,"xl/drawings/vmlDrawing"+o+".vml",SL(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&ns(i,uf(l),ju(h))}return s.Strings!=null&&s.Strings.length>0&&(l="xl/sharedStrings."+a,ns(i,l,AZ(s.Strings,l,s)),n.strs.push(l),Js(s.wbrels,-1,"sharedStrings."+a,ms.SST)),l="xl/workbook."+a,ns(i,l,wZ(e,l)),n.workbooks.push(l),Js(s.rels,1,l,ms.WB),l="xl/theme/theme1.xml",ns(i,l,qA(e.Themes,s)),n.themes.push(l),Js(s.wbrels,-1,"theme/theme1.xml",ms.THEME),l="xl/styles."+a,ns(i,l,jZ(e,l,s)),n.styles.push(l),Js(s.wbrels,-1,"styles."+a,ms.STY),e.vbaraw&&r&&(l="xl/vbaProject.bin",ns(i,l,e.vbaraw),n.vba.push(l),Js(s.wbrels,-1,"vbaProject.bin",ms.VBA)),l="xl/metadata."+a,ns(i,l,CZ(l)),n.metadata.push(l),Js(s.wbrels,-1,"metadata."+a,ms.XLMETA),ns(i,"[Content_Types].xml",F8(n,s)),ns(i,"_rels/.rels",ju(s.rels)),ns(i,"xl/_rels/workbook."+a+".rels",ju(s.wbrels)),delete s.revssf,delete s.ssf,i}function Wee(e,s){gu=1024,e&&!e.SSF&&(e.SSF=va(Ht)),e&&e.SSF&&(c0(),Wg(e.SSF),s.revssf=Kg(e.SSF),s.revssf[e.SSF[65535]]=0,s.ssf=e.SSF),s.rels={},s.wbrels={},s.Strings=[],s.Strings.Count=0,s.Strings.Unique=0,Vm?s.revStrings=new Map:(s.revStrings={},s.revStrings.foo=[],delete s.revStrings.foo);var a="xml",r=AL.indexOf(s.bookType)>-1,n=LA();ZA(s=s||{});var i=SA(),l="",o=0;if(s.cellXfs=[],ec(s.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",ns(i,l,B8(e.Props,s)),n.coreprops.push(l),Js(s.rels,2,l,ms.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&d.push(e.SheetNames[u]);e.Props.SheetNames=d}e.Props.Worksheets=e.Props.SheetNames.length,ns(i,l,H8(e.Props)),n.extprops.push(l),Js(s.rels,3,l,ms.EXT_PROPS),e.Custprops!==e.Props&&Ma(e.Custprops||{}).length>0&&(l="docProps/custom.xml",ns(i,l,V8(e.Custprops)),n.custprops.push(l),Js(s.rels,4,l,ms.CUST_PROPS));var h=["SheetJ5"];for(s.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},x=e.Sheets[e.SheetNames[o-1]],g=(x||{})["!type"]||"sheet";switch(g){case"chart":default:l="xl/worksheets/sheet"+o+"."+a,ns(i,l,ML(o-1,s,e,f)),n.sheets.push(l),Js(s.wbrels,-1,"worksheets/sheet"+o+"."+a,ms.WS[0])}if(x){var v=x["!comments"],b=!1,y="";if(v&&v.length>0){var j=!1;v.forEach(function(w){w[1].forEach(function(A){A.T==!0&&(j=!0)})}),j&&(y="xl/threadedComments/threadedComment"+o+"."+a,ns(i,y,tK(v,h,s)),n.threadedcomments.push(y),Js(f,-1,"../threadedComments/threadedComment"+o+"."+a,ms.TCMNT)),y="xl/comments"+o+"."+a,ns(i,y,jL(v)),n.comments.push(y),Js(f,-1,"../comments"+o+"."+a,ms.CMNT),b=!0}x["!legacy"]&&b&&ns(i,"xl/drawings/vmlDrawing"+o+".vml",SL(o,x["!comments"])),delete x["!comments"],delete x["!legacy"]}f["!id"].rId1&&ns(i,uf(l),ju(f))}return s.Strings!=null&&s.Strings.length>0&&(l="xl/sharedStrings."+a,ns(i,l,uL(s.Strings,s)),n.strs.push(l),Js(s.wbrels,-1,"sharedStrings."+a,ms.SST)),l="xl/workbook."+a,ns(i,l,BL(e)),n.workbooks.push(l),Js(s.rels,1,l,ms.WB),l="xl/theme/theme1.xml",ns(i,l,qA(e.Themes,s)),n.themes.push(l),Js(s.wbrels,-1,"theme/theme1.xml",ms.THEME),l="xl/styles."+a,ns(i,l,vL(e,s)),n.styles.push(l),Js(s.wbrels,-1,"styles."+a,ms.STY),e.vbaraw&&r&&(l="xl/vbaProject.bin",ns(i,l,e.vbaraw),n.vba.push(l),Js(s.wbrels,-1,"vbaProject.bin",ms.VBA)),l="xl/metadata."+a,ns(i,l,wL()),n.metadata.push(l),Js(s.wbrels,-1,"metadata."+a,ms.XLMETA),h.length>1&&(l="xl/persons/person.xml",ns(i,l,aK(h)),n.people.push(l),Js(s.wbrels,-1,"persons/person.xml",ms.PEOPLE)),ns(i,"[Content_Types].xml",F8(n,s)),ns(i,"_rels/.rels",ju(s.rels)),ns(i,"xl/_rels/workbook."+a+".rels",ju(s.wbrels)),delete s.revssf,delete s.ssf,i}function eE(e,s){var a="";switch((s||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":a=Un(e.slice(0,12));break;case"binary":a=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3),a.charCodeAt(4),a.charCodeAt(5),a.charCodeAt(6),a.charCodeAt(7)]}function Qee(e,s){return It.find(e,"EncryptedPackage")?Hee(e,s):JA(e,s)}function Kee(e,s){var a,r=e,n=s||{};return n.type||(n.type=cs&&Buffer.isBuffer(e)?"buffer":"base64"),a=f8(r,n),XL(a,n)}function ZL(e,s){var a=0;e:for(;a<e.length;)switch(e.charCodeAt(a)){case 10:case 13:case 32:++a;break;case 60:return Mj(e.slice(a),s);default:break e}return Pu.to_workbook(e,s)}function Jee(e,s){var a="",r=eE(e,s);switch(s.type){case"base64":a=Un(e);break;case"binary":a=e;break;case"buffer":a=e.toString("binary");break;case"array":a=Xc(e);break;default:throw new Error("Unrecognized type "+s.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(a=ia(a)),s.type="binary",ZL(a,s)}function Yee(e,s){var a=e;return s.type=="base64"&&(a=Un(a)),a=rf.utils.decode(1200,a.slice(2),"str"),s.type="binary",ZL(a,s)}function Xee(e){return e.match(/[^\x00-\x7F]/)?Qi(e):e}function m1(e,s,a,r){return r?(a.type="string",Pu.to_workbook(e,a)):Pu.to_workbook(s,a)}function ad(e,s){bA();var a=s||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return ad(new Uint8Array(e),(a=va(a),a.type="array",a));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!a.type&&(a.type=typeof Deno<"u"?"buffer":"array");var r=e,n=[0,0,0,0],i=!1;if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),Eu={},a.dateNF&&(Eu.dateNF=a.dateNF),a.type||(a.type=cs&&Buffer.isBuffer(e)?"buffer":"base64"),a.type=="file"&&(a.type=cs?"buffer":"binary",r=W9(e),typeof Uint8Array<"u"&&!cs&&(a.type="array")),a.type=="string"&&(i=!0,a.type="binary",a.codepage=65001,r=Xee(e)),a.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return a=va(a),a.type="array",ad(vA(r),a)}switch((n=eE(r,a))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return Qee(It.read(r,a),a);break;case 9:if(n[1]<=8)return JA(r,a);break;case 60:return Mj(r,a);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return rW(r,a);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return cL.to_workbook(r,a);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?Kee(r,a):m1(e,r,a,i);case 239:return n[3]===60?Mj(r,a):m1(e,r,a,i);case 255:if(n[1]===254)return Yee(r,a);if(n[1]===0&&n[2]===2&&n[3]===0)return $c.to_workbook(r,a);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return $c.to_workbook(r,a);break;case 3:case 131:case 139:case 140:return Dj.to_workbook(r,a);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return pL.to_workbook(r,a);break;case 10:case 13:case 32:return Jee(r,a);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return aW.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?Dj.to_workbook(r,a):m1(e,r,a,i)}function eF(e,s){switch(s.type){case"base64":case"binary":break;case"buffer":case"array":s.type="";break;case"file":return nh(s.file,It.write(e,{type:cs?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");default:throw new Error("Unrecognized type "+s.type)}return It.write(e,s)}function Zee(e,s){var a=va(s||{}),r=Vee(e,a);return ete(r,a)}function ete(e,s){var a={},r=cs?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(s.compression&&(a.compression="DEFLATE"),s.password)a.type=r;else switch(s.type){case"base64":a.type="base64";break;case"binary":a.type="string";break;case"string":throw new Error("'string' output type invalid for '"+s.bookType+"' files");case"buffer":case"file":a.type=r;break;default:throw new Error("Unrecognized type "+s.type)}var n=e.FullPaths?It.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[a.type]||a.type,compression:!!s.compression}):e.generate(a);if(typeof Deno<"u"&&typeof n=="string"){if(s.type=="binary"||s.type=="base64")return n;n=new Uint8Array(Gg(n))}return s.password&&typeof encrypt_agile<"u"?eF(encrypt_agile(n,s.password),s):s.type==="file"?nh(s.file,n):s.type=="string"?ia(n):n}function tte(e,s){var a=s||{},r=ZZ(e,a);return eF(r,a)}function Gi(e,s,a){a||(a="");var r=a+e;switch(s.type){case"base64":return nf(Qi(r));case"binary":return Qi(r);case"string":return e;case"file":return nh(s.file,r,"utf8");case"buffer":return cs?Gl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Gi(r,{type:"binary"}).split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function ste(e,s){switch(s.type){case"base64":return nf(e);case"binary":return e;case"string":return e;case"file":return nh(s.file,e,"binary");case"buffer":return cs?Gl(e,"binary"):e.split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+s.type)}function Wx(e,s){switch(s.type){case"string":case"base64":case"binary":for(var a="",r=0;r<e.length;++r)a+=String.fromCharCode(e[r]);return s.type=="base64"?nf(a):s.type=="string"?ia(a):a;case"file":return nh(s.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+s.type)}}function tb(e,s){bA(),KX(e);var a=va(s||{});if(a.cellStyles&&(a.cellNF=!0,a.sheetStubs=!0),a.type=="array"){a.type="binary";var r=tb(e,a);return a.type="array",Gg(r)}var n=0;if(a.sheet&&(typeof a.sheet=="number"?n=a.sheet:n=e.SheetNames.indexOf(a.sheet),!e.SheetNames[n]))throw new Error("Sheet not found: "+a.sheet+" : "+typeof a.sheet);switch(a.bookType||"xlsb"){case"xml":case"xlml":return Gi(GZ(e,a),a);case"slk":case"sylk":return Gi(oL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"htm":case"html":return Gi(GL(e.Sheets[e.SheetNames[n]],a),a);case"txt":return ste(tF(e.Sheets[e.SheetNames[n]],a),a);case"csv":return Gi(tE(e.Sheets[e.SheetNames[n]],a),a,"\uFEFF");case"dif":return Gi(cL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"dbf":return Wx(Dj.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"prn":return Gi(Pu.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"rtf":return Gi(pL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"eth":return Gi(dL.from_sheet(e.Sheets[e.SheetNames[n]],a),a);case"fods":return Gi(JL(e,a),a);case"wk1":return Wx($c.sheet_to_wk1(e.Sheets[e.SheetNames[n]],a),a);case"wk3":return Wx($c.book_to_wk3(e,a),a);case"biff2":a.biff||(a.biff=2);case"biff3":a.biff||(a.biff=3);case"biff4":return a.biff||(a.biff=4),Wx(VL(e,a),a);case"biff5":a.biff||(a.biff=5);case"biff8":case"xla":case"xls":return a.biff||(a.biff=8),tte(e,a);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Zee(e,a);default:throw new Error("Unrecognized bookType |"+a.bookType+"|")}}function ate(e){if(!e.bookType){var s={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},a=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();a.match(/^\.[a-z]+$/)&&(e.bookType=a.slice(1)),e.bookType=s[e.bookType]||e.bookType}}function rd(e,s,a){var r=a||{};return r.type="file",r.file=s,ate(r),tb(e,r)}function rte(e,s,a,r,n,i,l,o){var d=qa(a),u=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,x=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:a,enumerable:!1})}catch{x.__rowNum__=a}else x.__rowNum__=a;if(!l||e[a])for(var g=s.s.c;g<=s.e.c;++g){var v=l?e[a][g]:e[r[g]+d];if(v===void 0||v.t===void 0){if(u===void 0)continue;i[g]!=null&&(x[i[g]]=u);continue}var b=v.v;switch(v.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[g]!=null){if(b==null)if(v.t=="e"&&b===null)x[i[g]]=null;else if(u!==void 0)x[i[g]]=u;else if(h&&b===null)x[i[g]]=null;else continue;else x[i[g]]=h&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?b:Bl(v,b,o);b!=null&&(f=!1)}}return{row:x,isempty:f}}function zp(e,s){if(e==null||e["!ref"]==null)return[];var a={t:"n",v:0},r=0,n=1,i=[],l=0,o="",d={s:{r:0,c:0},e:{r:0,c:0}},u=s||{},h=u.range!=null?u.range:e["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof h){case"string":d=Cs(h);break;case"number":d=Cs(e["!ref"]),d.s.r=h;break;default:d=h}r>0&&(n=0);var f=qa(d.s.r),x=[],g=[],v=0,b=0,y=Array.isArray(e),j=d.s.r,w=0,A={};y&&!e[j]&&(e[j]=[]);var O=u.skipHidden&&e["!cols"]||[],C=u.skipHidden&&e["!rows"]||[];for(w=d.s.c;w<=d.e.c;++w)if(!(O[w]||{}).hidden)switch(x[w]=Ta(w),a=y?e[j][w]:e[x[w]+f],r){case 1:i[w]=w-d.s.c;break;case 2:i[w]=x[w];break;case 3:i[w]=u.header[w-d.s.c];break;default:if(a==null&&(a={w:"__EMPTY",t:"s"}),o=l=Bl(a,null,u),b=A[l]||0,!b)A[l]=1;else{do o=l+"_"+b++;while(A[o]);A[l]=b,A[o]=1}i[w]=o}for(j=d.s.r+n;j<=d.e.r;++j)if(!(C[j]||{}).hidden){var E=rte(e,d,j,x,r,i,y,u);(E.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(g[v++]=E.row)}return g.length=v,g}var BO=/"/g;function nte(e,s,a,r,n,i,l,o){for(var d=!0,u=[],h="",f=qa(a),x=s.s.c;x<=s.e.c;++x)if(r[x]){var g=o.dense?(e[a]||[])[x]:e[r[x]+f];if(g==null)h="";else if(g.v!=null){d=!1,h=""+(o.rawNumbers&&g.t=="n"?g.v:Bl(g,null,o));for(var v=0,b=0;v!==h.length;++v)if((b=h.charCodeAt(v))===n||b===i||b===34||o.forceQuotes){h='"'+h.replace(BO,'""')+'"';break}h=="ID"&&(h='"ID"')}else g.f!=null&&!g.F?(d=!1,h="="+g.f,h.indexOf(",")>=0&&(h='"'+h.replace(BO,'""')+'"')):h="";u.push(h)}return o.blankrows===!1&&d?null:u.join(l)}function tE(e,s){var a=[],r=s??{};if(e==null||e["!ref"]==null)return"";var n=Cs(e["!ref"]),i=r.FS!==void 0?r.FS:",",l=i.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,d=o.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),h="",f=[];r.dense=Array.isArray(e);for(var x=r.skipHidden&&e["!cols"]||[],g=r.skipHidden&&e["!rows"]||[],v=n.s.c;v<=n.e.c;++v)(x[v]||{}).hidden||(f[v]=Ta(v));for(var b=0,y=n.s.r;y<=n.e.r;++y)(g[y]||{}).hidden||(h=nte(e,n,y,f,l,d,i,r),h!=null&&(r.strip&&(h=h.replace(u,"")),(h||r.blankrows!==!1)&&a.push((b++?o:"")+h)));return delete r.dense,a.join("")}function tF(e,s){s||(s={}),s.FS="	",s.RS=`
`;var a=tE(e,s);return a}function ite(e){var s="",a,r="";if(e==null||e["!ref"]==null)return[];var n=Cs(e["!ref"]),i="",l=[],o,d=[],u=Array.isArray(e);for(o=n.s.c;o<=n.e.c;++o)l[o]=Ta(o);for(var h=n.s.r;h<=n.e.r;++h)for(i=qa(h),o=n.s.c;o<=n.e.c;++o)if(s=l[o]+i,a=u?(e[h]||[])[o]:e[s],r="",a!==void 0){if(a.F!=null){if(s=a.F,!a.f)continue;r=a.f,s.indexOf(":")==-1&&(s=s+":"+s)}if(a.f!=null)r=a.f;else{if(a.t=="z")continue;if(a.t=="n"&&a.v!=null)r=""+a.v;else if(a.t=="b")r=a.v?"TRUE":"FALSE";else if(a.w!==void 0)r="'"+a.w;else{if(a.v===void 0)continue;a.t=="s"?r="'"+a.v:r=""+a.v}}d[d.length]=s+"="+r}return d}function sF(e,s,a){var r=a||{},n=+!r.skipHeader,i=e||{},l=0,o=0;if(i&&r.origin!=null)if(typeof r.origin=="number")l=r.origin;else{var d=typeof r.origin=="string"?_a(r.origin):r.origin;l=d.r,o=d.c}var u,h={s:{c:0,r:0},e:{c:o,r:l+s.length-1+n}};if(i["!ref"]){var f=Cs(i["!ref"]);h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),l==-1&&(l=f.e.r+1,h.e.r=l+s.length-1+n)}else l==-1&&(l=0,h.e.r=s.length-1+n);var x=r.header||[],g=0;s.forEach(function(b,y){Ma(b).forEach(function(j){(g=x.indexOf(j))==-1&&(x[g=x.length]=j);var w=b[j],A="z",O="",C=Vt({c:o+g,r:l+y+n});u=bf(i,C),w&&typeof w=="object"&&!(w instanceof Date)?i[C]=w:(typeof w=="number"?A="n":typeof w=="boolean"?A="b":typeof w=="string"?A="s":w instanceof Date?(A="d",r.cellDates||(A="n",w=dr(w)),O=r.dateNF||Ht[14]):w===null&&r.nullError&&(A="e",w=0),u?(u.t=A,u.v=w,delete u.w,delete u.R,O&&(u.z=O)):i[C]=u={t:A,v:w},O&&(u.z=O))})}),h.e.c=Math.max(h.e.c,o+x.length-1);var v=qa(l);if(n)for(g=0;g<x.length;++g)i[Ta(g+o)+v]={t:"s",v:x[g]};return i["!ref"]=ss(h),i}function lte(e,s){return sF(null,e,s)}function bf(e,s,a){if(typeof s=="string"){if(Array.isArray(e)){var r=_a(s);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[s]||(e[s]={t:"z"})}return typeof s!="number"?bf(e,Vt(s)):bf(e,Vt({r:s,c:a||0}))}function ote(e,s){if(typeof s=="number"){if(s>=0&&e.SheetNames.length>s)return s;throw new Error("Cannot find sheet # "+s)}else if(typeof s=="string"){var a=e.SheetNames.indexOf(s);if(a>-1)return a;throw new Error("Cannot find sheet name |"+s+"|")}else throw new Error("Cannot find sheet |"+s+"|")}function sE(){return{SheetNames:[],Sheets:{}}}function aE(e,s,a,r){var n=1;if(!a)for(;n<=65535&&e.SheetNames.indexOf(a="Sheet"+n)!=-1;++n,a=void 0);if(!a||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(a)>=0){var i=a.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var l=i&&i[1]||a;for(++n;n<=65535&&e.SheetNames.indexOf(a=l+n)!=-1;++n);}if(zL(a),e.SheetNames.indexOf(a)>=0)throw new Error("Worksheet with name |"+a+"| already exists!");return e.SheetNames.push(a),e.Sheets[a]=s,a}function cte(e,s,a){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=ote(e,s);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),a){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+a)}e.Workbook.Sheets[r].Hidden=a}function dte(e,s){return e.z=s,e}function aF(e,s,a){return s?(e.l={Target:s},a&&(e.l.Tooltip=a)):delete e.l,e}function ute(e,s,a){return aF(e,"#"+s,a)}function mte(e,s,a){e.c||(e.c=[]),e.c.push({t:s,a:a||"SheetJS"})}function fte(e,s,a,r){for(var n=typeof s!="string"?s:Cs(s),i=typeof s=="string"?s:ss(s),l=n.s.r;l<=n.e.r;++l)for(var o=n.s.c;o<=n.e.c;++o){var d=bf(e,l,o);d.t="n",d.F=i,delete d.v,l==n.s.r&&o==n.s.c&&(d.f=a,r&&(d.D=!0))}return e}var Ea={encode_col:Ta,encode_row:qa,encode_cell:Vt,encode_range:ss,decode_col:OA,decode_row:kA,split_cell:AH,decode_cell:_a,decode_range:gn,format_cell:Bl,sheet_add_aoa:O8,sheet_add_json:sF,sheet_add_dom:WL,aoa_to_sheet:d0,json_to_sheet:lte,table_to_sheet:QL,table_to_book:Nee,sheet_to_csv:tE,sheet_to_txt:tF,sheet_to_json:zp,sheet_to_html:GL,sheet_to_formulae:ite,sheet_to_row_object_array:zp,sheet_get_cell:bf,book_new:sE,book_append_sheet:aE,book_set_sheet_visibility:cte,cell_set_number_format:dte,cell_set_hyperlink:aF,cell_set_internal_link:ute,cell_add_comment:mte,sheet_set_array_formula:fte,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Qm=Object.freeze(Object.defineProperty({__proto__:null,CFB:It,parse_xlscfb:JA,parse_zip:XL,read:ad,utils:Ea,write:tb,writeFile:rd,writeFileSync:rd},Symbol.toStringTag,{value:"Module"})),le={USERS:"b2b_users_sini_v2",PROFILES:"b2b_profiles_sini_v2",ORDERS:"b2b_orders_sini_v2",QUOTE_REQUESTS:"b2b_quotes_sini_v2",SESSION:"b2b_session_sini_v2",SETTINGS:"b2b_settings_sini_v2",PRODUCTS:"b2b_products_sini_v2",BANNERS:"b2b_banners_sini_v2",NEWS:"b2b_news_sini_v2",LOGS:"b2b_logs_sini_v2",SEARCH_HISTORY:"b2b_search_history_sini_v2",MISSING_REQUESTS:"b2b_missing_requests_sini_v2",IMPORT_REQUESTS:"b2b_import_requests_sini_v2",ACCOUNT_REQUESTS:"siniCar_account_opening_requests",NOTIFICATIONS:"siniCar_notifications_v2",ACTIVITY_LOGS:"siniCar_activity_logs",EXCEL_COLUMN_PRESETS:"siniCar_excel_column_presets",STATUS_LABELS:"siniCar_status_labels_v1",ADMIN_USERS:"siniCar_admin_users_v2",ADMIN_ROLES:"siniCar_admin_roles_v1",CAMPAIGNS:"siniCar_marketing_campaigns",PRICE_LEVELS:"sini_price_levels",PRODUCT_PRICE_MATRIX:"sini_price_matrix",GLOBAL_PRICING_SETTINGS:"sini_global_pricing_settings",CUSTOMER_PRICING_PROFILES:"sini_customer_pricing_profiles",PRICING_AUDIT_LOG:"sini_pricing_audit_log",TOOL_CONFIGS:"sini_tool_configs",CUSTOMER_TOOLS_OVERRIDES:"sini_customer_tools_overrides",TOOL_USAGE_RECORDS:"sini_tool_usage_records",SUPPLIER_PRICE_RECORDS:"sini_supplier_price_records",VIN_EXTRACTIONS:"sini_vin_extractions",PRICE_COMPARISON_SESSIONS:"sini_price_comparison_sessions",SUPPLIER_CATALOG_ITEMS:"sini_supplier_catalog_items",SUPPLIER_MARKETPLACE_SETTINGS:"sini_supplier_marketplace_settings",SUPPLIER_PROFILES:"sini_supplier_profiles",MARKETERS:"sini_marketers",CUSTOMER_REFERRALS:"sini_customer_referrals",MARKETER_COMMISSIONS:"sini_marketer_commissions",MARKETER_SETTINGS:"sini_marketer_settings",ADVERTISERS:"sini_advertisers",AD_CAMPAIGNS:"sini_ad_campaigns",AD_SLOTS:"sini_ad_slots",AD_SLOT_ROTATIONS:"sini_ad_slot_rotations",INSTALLMENT_REQUESTS:"sini_installment_requests",INSTALLMENT_OFFERS:"sini_installment_offers",CUSTOMER_CREDIT_PROFILES:"sini_customer_credit_profiles",INSTALLMENT_SETTINGS:"sini_installment_settings",ORGANIZATIONS:"sini_organizations",ORGANIZATION_USERS:"sini_organization_users",ORGANIZATION_SETTINGS:"sini_organization_settings",ORGANIZATION_ACTIVITY_LOGS:"sini_organization_activity_logs",TEAM_INVITATIONS:"sini_team_invitations",ABANDONED_CARTS:"sini_abandoned_carts",ALTERNATIVE_PARTS:"sini_alternative_parts",PURCHASE_REQUESTS:"sini_purchase_requests",SUPPLIER_PORTAL_PRODUCTS:"sini_supplier_portal_products",SUPPLIER_PORTAL_REQUESTS:"sini_supplier_portal_requests",SUPPLIER_PORTAL_SETTINGS:"sini_supplier_portal_settings",TRADER_TOOL_ACTIONS:"sini_trader_tool_actions",FEEDBACK:"sini_feedback",FEEDBACK_REPLIES:"sini_feedback_replies",FEEDBACK_SETTINGS:"sini_feedback_settings"},hte={"dashboard.hero.title":"  ","dashboard.hero.subtitle":"   ","dashboard.search.placeholder":"    ...","sidebar.home":"","sidebar.orders":" ","sidebar.quotes":" ","sidebar.history":" ","sidebar.import":"  ","sidebar.organization":" ","sidebar.support":" ","cart.title":" ","cart.empty":"  ","cart.checkout":" ","features.card1.title":"  ","features.card1.desc":"        .","features.card2.title":"  ","features.card2.desc":"  24     .","features.card3.title":"  ","features.card3.desc":"      ."},ca={siteName:"Sini Pro -  ",description:"     ",supportPhone:"920000000",supportWhatsapp:"0500000000",supportEmail:"support@sinipro.com",announcementBarColor:"bg-primary-900",fontFamily:"Cairo",maintenanceMode:!1,primaryColor:"#2563eb",logoUrl:"",uiTexts:hte,tickerEnabled:!0,tickerText:"      -      .     5000 .",tickerSpeed:4,tickerBgColor:"#0f172a",tickerTextColor:"#fb923c",apiConfig:{baseUrl:"https://api.sini-pro-erp.com/v1",authToken:"",enableLiveSync:!0,endpoints:{products:"/inventory/products",orders:"/sales/orders",customers:"/crm/customers"},webhookSecret:"",environment:"PRODUCTION",syncInterval:"REALTIME",syncEntities:{products:!0,inventory:!0,prices:!0,customers:!0,orders:!0},webhooks:[],fieldMapping:`{
  "sku": "item_code",
  "price": "unit_price",
  "stock": "qty_on_hand"
}`,debugMode:!1,rateLimit:"120"},statusLabels:{orderStatus:{PENDING:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,isDefault:!0,sortOrder:1},APPROVED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:2},REJECTED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3},SHIPPED:{label:" ",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:4},DELIVERED:{label:" ",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:5},CANCELLED:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:6}},orderInternalStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},SENT_TO_WAREHOUSE:{label:"  ",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:2},WAITING_PAYMENT:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:3},PAYMENT_CONFIRMED:{label:"  ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:4},SALES_INVOICE_CREATED:{label:"  ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:5},READY_FOR_SHIPMENT:{label:" ",color:"#0ea5e9",bgColor:"#e0f2fe",isSystem:!0,sortOrder:6},COMPLETED_INTERNAL:{label:" ",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:7},CANCELLED_INTERNAL:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:8}},accountRequestStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},APPROVED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:3},REJECTED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:4},ON_HOLD:{label:"",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:5}},quoteRequestStatus:{NEW:{label:"",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},PARTIALLY_APPROVED:{label:" ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:3},APPROVED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:4},QUOTED:{label:" ",color:"#10b981",bgColor:"#d1fae5",sortOrder:5},PROCESSED:{label:" ",color:"#059669",bgColor:"#a7f3d0",sortOrder:6},REJECTED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:7}},quoteItemStatus:{PENDING:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,isDefault:!0,sortOrder:1},MATCHED:{label:" ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:2},NOT_FOUND:{label:" ",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3},APPROVED:{label:"",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:4},REJECTED:{label:"",color:"#dc2626",bgColor:"#fecaca",isSystem:!0,sortOrder:5},MISSING:{label:"",color:"#ea580c",bgColor:"#ffedd5",isSystem:!0,sortOrder:6}},missingStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},ORDER_PLANNED:{label:"  ",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:3},ORDERED:{label:" ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:4},ADDED_TO_STOCK:{label:"  ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:5},IGNORED:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:6}},importRequestStatus:{NEW:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,isDefault:!0,sortOrder:1},UNDER_REVIEW:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},WAITING_CUSTOMER_EXCEL:{label:"  Excel",color:"#3b82f6",bgColor:"#dbeafe",isSystem:!0,sortOrder:3},PRICING_IN_PROGRESS:{label:" ",color:"#06b6d4",bgColor:"#cffafe",isSystem:!0,sortOrder:4},PRICING_SENT:{label:"  ",color:"#0ea5e9",bgColor:"#e0f2fe",isSystem:!0,sortOrder:5},WAITING_CUSTOMER_APPROVAL:{label:"  ",color:"#a855f7",bgColor:"#f3e8ff",isSystem:!0,sortOrder:6},APPROVED_BY_CUSTOMER:{label:"  ",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,sortOrder:7},IN_FACTORY:{label:" ",color:"#f97316",bgColor:"#ffedd5",isSystem:!0,sortOrder:8},SHIPMENT_BOOKED:{label:"  ",color:"#0284c7",bgColor:"#e0f2fe",isSystem:!0,sortOrder:9},ON_THE_SEA:{label:"  ",color:"#0369a1",bgColor:"#bae6fd",isSystem:!0,sortOrder:10},IN_PORT:{label:" ",color:"#0891b2",bgColor:"#cffafe",isSystem:!0,sortOrder:11},CUSTOMS_CLEARED:{label:"  ",color:"#059669",bgColor:"#d1fae5",isSystem:!0,sortOrder:12},ON_THE_WAY:{label:"  ",color:"#16a34a",bgColor:"#bbf7d0",isSystem:!0,sortOrder:13},DELIVERED:{label:" ",color:"#059669",bgColor:"#a7f3d0",isSystem:!0,sortOrder:14},CANCELLED:{label:"",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:15}},customerStatus:{ACTIVE:{label:"",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,isDefault:!0,sortOrder:1},SUSPENDED:{label:" ",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},BLOCKED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3},PENDING:{label:" ",color:"#8b5cf6",bgColor:"#ede9fe",isSystem:!0,sortOrder:4},INACTIVE:{label:" ",color:"#6b7280",bgColor:"#f3f4f6",isSystem:!0,sortOrder:5}},staffStatus:{ACTIVE:{label:"",color:"#10b981",bgColor:"#d1fae5",isSystem:!0,isDefault:!0,sortOrder:1},SUSPENDED:{label:"",color:"#f59e0b",bgColor:"#fef3c7",isSystem:!0,sortOrder:2},BLOCKED:{label:"",color:"#ef4444",bgColor:"#fee2e2",isSystem:!0,sortOrder:3}}},guestModeEnabled:!0,guestSettings:{showBusinessTypes:!0,showMainServices:!0,showHowItWorks:!0,showWhySiniCar:!0,showCart:!1,showMarketingCards:!0,blurIntensity:"medium",showBlurOverlay:!0,allowedPages:[],allowSearch:!0,showSearchResults:!0},orderStatusPointsConfig:{enabled:!0,pointsPerStatus:{DELIVERED:5,APPROVED:2,SHIPPED:1}}},Cl=[{id:"1",partNumber:"CN-102030",name:"    -  CS95",brand:"Changan",price:150,oldPrice:180,isOnSale:!0,stock:50,isNew:!1,category:"",description:"         2020-2023"},{id:"2",partNumber:"CN-550011",name:"  -   2022",brand:"Changan",price:850,stock:10,isNew:!0,category:"",description:"       100%"},{id:"3",partNumber:"CN-CS85-09",name:"   - CS85",brand:"Changan",price:420,stock:15,category:" "},{id:"4",partNumber:"CN-UNIK-FILT",name:"   (++) -  ",brand:"Changan",price:180,stock:40,category:""},{id:"5",partNumber:"CN-ALT-95",name:"  -  CS95",brand:"Changan",price:1200,stock:5,category:""},{id:"6",partNumber:"CN-RAD-75",name:"  -  CS75",brand:"Changan",price:550,stock:8,category:""},{id:"7",partNumber:"MG-998877",name:"    - MG All Models",brand:"MG",price:35,stock:200,category:"",description:"         "},{id:"8",partNumber:"MG-RX5-01",name:"   LED - MG RX5",brand:"MG",price:1800,oldPrice:2100,isOnSale:!0,stock:5,category:""},{id:"9",partNumber:"MG-GT-SPOILER",name:"    - MG GT",brand:"MG",price:600,stock:3,isNew:!0,category:""},{id:"10",partNumber:"MG-ZS-BUMP",name:"  - MG ZS 2021",brand:"MG",price:450,stock:12,category:""},{id:"11",partNumber:"MG-HS-PADS",name:"  - MG HS",brand:"MG",price:140,stock:60,category:""},{id:"12",partNumber:"MG-ENG-MNT",name:"   - MG 6",brand:"MG",price:900,stock:4,category:""},{id:"13",partNumber:"GL-COOL-01",name:"   -  ",brand:"Geely",price:650,stock:8,category:"",isNew:!0},{id:"14",partNumber:"GL-MON-BUMP",name:"    -  ",brand:"Geely",price:1100,stock:4,category:"",isNew:!0},{id:"15",partNumber:"GL-TUG-HL",name:"   -  ",brand:"Geely",price:2200,stock:2,category:""},{id:"16",partNumber:"GL-EMG-BRK",name:"  ABS -  ",brand:"Geely",price:180,stock:25,category:""},{id:"17",partNumber:"GL-OKA-FDR",name:"   -  ",brand:"Geely",price:700,stock:6,category:""},{id:"18",partNumber:"HV-H6-BRK",name:"  -  H6",brand:"Haval",price:120,stock:80,category:""},{id:"19",partNumber:"HV-JOLION-LGT",name:"   -  ",brand:"Haval",price:750,oldPrice:900,isOnSale:!0,stock:6,category:""},{id:"20",partNumber:"HV-H9-TURBO",name:"  -  H9",brand:"Haval",price:3500,stock:2,category:""},{id:"21",partNumber:"HV-DARGO-MAT",name:"   -  ",brand:"Haval",price:250,stock:15,category:""},{id:"22",partNumber:"CH-TIGGO-OIL",name:"  CVT -   8",brand:"Chery",price:60,stock:100,category:""},{id:"23",partNumber:"CH-ARRIZO-DR",name:"   -   6",brand:"Chery",price:85,stock:30,category:""},{id:"24",partNumber:"GW-POER-FLT",name:"  -   ",brand:"Great Wall",price:55,stock:45,category:""},{id:"25",partNumber:"GEN-SPK-PLG",name:"   - ",brand:"Generic",price:45,stock:500,category:""},{id:"26",partNumber:"GEN-BAT-70",name:" 70  - ",brand:"Generic",price:350,stock:20,category:""},{id:"27",partNumber:"CN-EADO-MIR",name:"   () - ",brand:"Changan",price:650,stock:12,category:""},{id:"28",partNumber:"MG-5-CVT",name:"  - MG 5",brand:"MG",price:320,stock:8,category:""},{id:"29",partNumber:"HV-JUL-SEN",name:"    - ",brand:"Haval",price:120,stock:50,category:""},{id:"30",partNumber:"GL-COOL-PMP",name:"  - ",brand:"Geely",price:280,stock:14,category:""}],xte=[{id:"1",title:" ..  ",subtitle:"     MG      ",colorClass:"from-primary-700 to-primary-900",buttonText:"  ",isActive:!0},{id:"2",title:" :   ",subtitle:"      H6 ",colorClass:"from-slate-700 to-slate-900",buttonText:" ",isActive:!0},{id:"3",title:"  ",subtitle:"      ",colorClass:"from-secondary-600 to-secondary-800",buttonText:" ",isActive:!0},{id:"4",title:"   ",subtitle:"       5000 ",colorClass:"from-green-600 to-green-800",buttonText:" ",isActive:!0}],$O=[":      MG     "," :       2024   "," :        ( )"," :  10%      ",":      8   8 "],iu=[{id:"ORD-99201",userId:"demo-user-id",businessId:"demo-user-id",items:[{...Cl[0],quantity:10},{...Cl[6],quantity:20}],totalAmount:2200,status:pt.SHIPPED,date:"2023-10-15T10:30:00Z",branchId:"b1",internalStatus:"READY_FOR_SHIPMENT",internalStatusHistory:[{status:"NEW",changedAt:"2023-10-15T10:30:00Z",changedBy:"system"},{status:"READY_FOR_SHIPMENT",changedAt:"2023-10-16T09:00:00Z",changedBy:"Ahmed"}]},{id:"ORD-99255",userId:"demo-user-id",businessId:"demo-user-id",items:[{...Cl[1],quantity:1}],totalAmount:850,status:pt.APPROVED,date:"2023-10-20T14:15:00Z",branchId:"b1",internalStatus:"PAYMENT_CONFIRMED",internalStatusHistory:[{status:"NEW",changedAt:"2023-10-20T14:15:00Z",changedBy:"system"},{status:"PAYMENT_CONFIRMED",changedAt:"2023-10-20T15:30:00Z",changedBy:"Finance"}]},{id:"ORD-99310",userId:"demo-user-id",businessId:"demo-user-id",items:[{...Cl[2],quantity:5},{...Cl[7],quantity:2}],totalAmount:5700,status:pt.PENDING,date:new Date().toISOString(),branchId:"b1",internalStatus:"NEW",internalStatusHistory:[{status:"NEW",changedAt:new Date().toISOString(),changedBy:"system"}]}],f1=[{id:"Q-5001",userId:"demo-user-id",userName:"  ()",companyName:"   ",date:"2023-09-01T09:00:00Z",status:"PROCESSED",priceType:"BOTH",items:[{partNumber:"CN-102030",partName:" ",requestedQty:100,matchedPrice:140,status:"MATCHED",approvalStatus:"APPROVED",matchedProductName:"  ",isAvailable:!0},{partNumber:"UNK-999",partName:"  ",requestedQty:10,status:"NOT_FOUND",approvalStatus:"MISSING",notes:"    "}],totalQuotedAmount:14e3,resultReady:!0}],$t=(e=0)=>e===0?Promise.resolve():new Promise(s=>setTimeout(s,e)),pte=()=>"C-"+Math.floor(1e4+Math.random()*9e4),gte=()=>Math.floor(1e5+Math.random()*9e5).toString(),Nt=e=>{try{const s=JSON.parse(localStorage.getItem(le.ACTIVITY_LOGS)||"[]");let a=e.userName,r=e.role;if(!a||!r){const l=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(o=>o.id===e.userId);l?(a||(a=l.name),r||(r=l.role)):e.userId==="super-admin"&&(a=" ",r="SUPER_ADMIN")}const n={id:`LOG-${Date.now()}-${Math.floor(Math.random()*1e3)}`,createdAt:new Date().toISOString(),userId:e.userId,userName:a,role:r,eventType:e.eventType,description:e.description,page:e.page,metadata:e.metadata};s.unshift(n),s.length>1e3&&(s.length=1e3),localStorage.setItem(le.ACTIVITY_LOGS,JSON.stringify(s))}catch(s){console.error("Failed to record activity",s)}},lu=(e,s)=>{try{const a=JSON.parse(localStorage.getItem(le.LOGS)||"[]");a.push({type:e,data:s,timestamp:new Date().toISOString()}),a.length>100&&a.shift(),localStorage.setItem(le.LOGS,JSON.stringify(a))}catch(a){console.error("Failed to log activity",a)}},fr=(e,s,a,r,n,i,l)=>{const o=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]"),d={id:`NOTIF-${Date.now()}-${Math.floor(Math.random()*1e3)}`,userId:e,type:s,title:a,message:r,createdAt:new Date().toISOString(),isRead:!1,relatedType:n,relatedId:i,link:l};return o.unshift(d),o.length>500&&(o.length=500),localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(o)),d},qO=e=>fr(e.userId,e.type,e.title,e.message,e.relatedType,e.relatedId,e.link),ou=()=>JSON.parse(localStorage.getItem(le.USERS)||"[]").filter(s=>{const a=s.role;return a==="SUPER_ADMIN"||a==="ADMIN"||a==="EMPLOYEE"}).map(s=>s.id),HO=e=>{const s=new Date().toISOString().split("T")[0];return e.status,e.lastSearchDate!==s&&(e.searchUsed=0,e.lastSearchDate=s),e},Ai=e=>{const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=s.findIndex(r=>r.id===e.id);a!==-1&&(s[a]=e,localStorage.setItem(le.USERS,JSON.stringify(s)),JSON.parse(localStorage.getItem(le.SESSION)||"{}").id===e.id&&localStorage.setItem(le.SESSION,JSON.stringify(e)))},xe={async checkHealth(){const e=performance.now();await new Promise(a=>setTimeout(a,Math.random()*50));const s=performance.now();return{status:"ok",latency:Math.round(s-e)}},async recordActivity(e){Nt(e)},async getActivityLogs(){return JSON.parse(localStorage.getItem(le.ACTIVITY_LOGS)||"[]")},async getCustomerActivityLogs(e){return(await this.getActivityLogs()).filter(a=>{var r;return a.userId===e||((r=a.metadata)==null?void 0:r.targetUserId)===e})},async recordHeartbeat(e){const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=s.findIndex(r=>r.id===e);a!==-1&&(s[a].lastActiveAt=new Date().toISOString(),localStorage.setItem(le.USERS,JSON.stringify(s)))},async getOnlineUsers(e=5){const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=new Date().getTime(),r=e*60*1e3;return s.filter(n=>{if(!n.lastActiveAt||n.role==="SUPER_ADMIN")return!1;const i=new Date(n.lastActiveAt).getTime();return a-i<=r})},async getSettings(){var r,n,i,l,o,d,u,h,f;const e=localStorage.getItem(le.SETTINGS);if(!e)return localStorage.setItem(le.SETTINGS,JSON.stringify(ca)),ca;const s=JSON.parse(e),a=ca.statusLabels?{orderStatus:{...ca.statusLabels.orderStatus,...((r=s.statusLabels)==null?void 0:r.orderStatus)||{}},orderInternalStatus:{...ca.statusLabels.orderInternalStatus,...((n=s.statusLabels)==null?void 0:n.orderInternalStatus)||{}},accountRequestStatus:{...ca.statusLabels.accountRequestStatus,...((i=s.statusLabels)==null?void 0:i.accountRequestStatus)||{}},quoteRequestStatus:{...ca.statusLabels.quoteRequestStatus,...((l=s.statusLabels)==null?void 0:l.quoteRequestStatus)||{}},quoteItemStatus:{...ca.statusLabels.quoteItemStatus,...((o=s.statusLabels)==null?void 0:o.quoteItemStatus)||{}},missingStatus:{...ca.statusLabels.missingStatus,...((d=s.statusLabels)==null?void 0:d.missingStatus)||{}},importRequestStatus:{...ca.statusLabels.importRequestStatus,...((u=s.statusLabels)==null?void 0:u.importRequestStatus)||{}},customerStatus:{...ca.statusLabels.customerStatus,...((h=s.statusLabels)==null?void 0:h.customerStatus)||{}},staffStatus:{...ca.statusLabels.staffStatus,...((f=s.statusLabels)==null?void 0:f.staffStatus)||{}}}:s.statusLabels;return{...ca,...s,apiConfig:{...ca.apiConfig,...s.apiConfig},uiTexts:{...ca.uiTexts,...s.uiTexts||{}},statusLabels:a}},async updateSettings(e){localStorage.setItem(le.SETTINGS,JSON.stringify(e))},async updateBanners(e){localStorage.setItem(le.BANNERS,JSON.stringify(e))},async updateNews(e){localStorage.setItem(le.NEWS,JSON.stringify(e))},async getStatusLabels(){const e=localStorage.getItem(le.STATUS_LABELS);if(!e)return localStorage.setItem(le.STATUS_LABELS,JSON.stringify(ca.statusLabels)),ca.statusLabels;const s=JSON.parse(e);return{orderStatus:{...ca.statusLabels.orderStatus,...s.orderStatus},orderInternalStatus:{...ca.statusLabels.orderInternalStatus,...s.orderInternalStatus},accountRequestStatus:{...ca.statusLabels.accountRequestStatus,...s.accountRequestStatus},quoteRequestStatus:{...ca.statusLabels.quoteRequestStatus,...s.quoteRequestStatus},quoteItemStatus:{...ca.statusLabels.quoteItemStatus,...s.quoteItemStatus},missingStatus:{...ca.statusLabels.missingStatus,...s.missingStatus},importRequestStatus:{...ca.statusLabels.importRequestStatus,...s.importRequestStatus},customerStatus:{...ca.statusLabels.customerStatus,...s.customerStatus},staffStatus:{...ca.statusLabels.staffStatus,...s.staffStatus}}},async updateStatusLabels(e){localStorage.setItem(le.STATUS_LABELS,JSON.stringify(e));const s=await this.getSettings();s.statusLabels=e,await this.updateSettings(s)},async addStatusLabel(e,s,a){const r=await this.getStatusLabels();if(r[e][s])return{success:!1,error:"     "};const i=Object.values(r[e]).reduce((l,o)=>Math.max(l,o.sortOrder||0),0);return r[e][s]={...a,sortOrder:a.sortOrder||i+1,isSystem:!1},a.isDefault&&Object.keys(r[e]).forEach(l=>{l!==s&&(r[e][l].isDefault=!1)}),await this.updateStatusLabels(r),{success:!0}},async updateStatusLabel(e,s,a){const r=await this.getStatusLabels();if(!r[e][s])return{success:!1,error:"  "};const n=r[e][s];return r[e][s]={...n,label:a.label,color:a.color,bgColor:a.bgColor,icon:a.icon,sortOrder:a.sortOrder??n.sortOrder},a.isDefault&&(Object.keys(r[e]).forEach(i=>{i!==s&&(r[e][i].isDefault=!1)}),r[e][s].isDefault=!0),await this.updateStatusLabels(r),{success:!0}},async deleteStatusLabel(e,s){const a=await this.getStatusLabels();if(!a[e][s])return{success:!1,error:"  "};if(a[e][s].isSystem)return{success:!1,error:"    "};const r=await this.checkStatusUsage(e,s);return r>0?{success:!1,error:`    ${r}    `}:(delete a[e][s],await this.updateStatusLabels(a),{success:!0})},async checkStatusUsage(e,s){let a=0;switch(e){case"orderStatus":a=(await this.getAllOrders()).filter(f=>f.status===s||f.status===pt[s]).length;break;case"orderInternalStatus":a=(await this.getAllOrders()).filter(f=>f.internalStatus===s).length;break;case"accountRequestStatus":a=(await this.getAccountOpeningRequests()).filter(f=>f.status===s).length;break;case"quoteRequestStatus":a=(await this.getAllQuoteRequests()).filter(f=>f.status===s).length;break;case"importRequestStatus":a=(await this.getImportRequests()).filter(f=>f.status===s).length;break;case"missingStatus":a=(await this.getMissingProductRequests()).filter(f=>f.status===s).length;break;case"customerStatus":a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]").filter(f=>f.status===s).length;break;case"staffStatus":a=JSON.parse(localStorage.getItem(le.USERS)||"[]").filter(f=>f.role==="CUSTOMER_STAFF"&&f.status===s).length;break}return a},async getAdminStats(){const e=await this.getAllOrders(),s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=await this.searchProducts(""),r=await this.getAllQuoteRequests(),n=await this.getAccountOpeningRequests();return{totalOrders:e.length,pendingOrders:e.filter(i=>i.status===pt.PENDING).length,totalRevenue:e.reduce((i,l)=>i+l.totalAmount,0),totalUsers:s.length,totalProducts:a.length,pendingQuotes:r.filter(i=>i.status==="NEW"||i.status==="UNDER_REVIEW").length,newAccountRequests:n.filter(i=>i.status==="NEW").length}},async getAllUsers(){const e=JSON.parse(localStorage.getItem(le.USERS)||"[]"),s=JSON.parse(localStorage.getItem(le.PROFILES)||"[]");return e.map(a=>({user:a,profile:s.find(r=>r.userId===(a.role==="CUSTOMER_STAFF"?a.parentId:a.id))})).filter(a=>a.user.role!=="SUPER_ADMIN")},async getCustomersDatabase(){const e=JSON.parse(localStorage.getItem(le.USERS)||"[]"),s=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),a=await this.getAllOrders(),r=await this.getAllQuoteRequests(),n=await this.getImportRequests(),i=await this.getActivityLogs(),l=await this.getMissingProductRequests(),o=await this.getAccountOpeningRequests();return s.map(u=>{const h=e.filter(S=>S.businessId===u.userId||S.id===u.userId),f=e.find(S=>S.id===u.userId),x=o.find(S=>S.status==="APPROVED"&&(S.phone===(f==null?void 0:f.phone)||S.businessName===u.companyName)),g=(x==null?void 0:x.documents)||u.documents||[],v=a.filter(S=>S.businessId===u.userId||S.userId===u.userId),b=v.length,y=v.filter(S=>S.internalStatus==="SALES_INVOICE_CREATED"||S.internalStatus==="COMPLETED_INTERNAL").length,j=r.filter(S=>S.userId===u.userId).length,w=n.filter(S=>S.customerId===u.userId).length,A=i.filter(S=>S.eventType==="SEARCH_PERFORMED"&&h.some(D=>D.id===S.userId)).length,O=l.filter(S=>h.some(D=>D.id===S.userId)).length,C=(f==null?void 0:f.lastLoginAt)||null,E=(f==null?void 0:f.failedLoginAttempts)||0;return{...u,status:u.status||(f==null?void 0:f.status)||(f!=null&&f.isActive?"ACTIVE":"SUSPENDED"),assignedPriceLevel:u.assignedPriceLevel||(f==null?void 0:f.priceLevel)||"LEVEL_2",businessCustomerType:u.businessCustomerType||(f==null?void 0:f.customerType),customerType:u.customerType,searchPointsTotal:u.searchPointsTotal||((f==null?void 0:f.searchLimit)??50),searchPointsRemaining:u.searchPointsRemaining||((f==null?void 0:f.searchLimit)||50)-((f==null?void 0:f.searchUsed)||0),staffLimit:u.staffLimit||5,staffUsersCount:h.filter(S=>S.role==="CUSTOMER_STAFF").length,lastLoginAt:C,failedLoginAttempts:E,riskyLoginFlag:E>5,totalOrdersCount:b,totalQuotesCount:j,totalImportRequestsCount:w,totalInvoicesCount:y,totalSearchesCount:A,missingRequestsCount:O,documents:g}})},async updateCustomerStatus(e,s,a){const r=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),n=JSON.parse(localStorage.getItem(le.USERS)||"[]"),i=r.findIndex(o=>o.userId===e);i!==-1&&(r[i].status=s,a?r[i].suspendedUntil=a:r[i].suspendedUntil=null);const l=n.findIndex(o=>o.id===e);l!==-1&&(n[l].status=s,n[l].isActive=s==="ACTIVE"),(s==="BLOCKED"||s==="SUSPENDED")&&n.forEach(o=>{o.businessId===e&&(o.status=s,o.isActive=!1)}),localStorage.setItem(le.PROFILES,JSON.stringify(r)),localStorage.setItem(le.USERS,JSON.stringify(n)),Nt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:s==="ACTIVE"?"CUSTOMER_REACTIVATED":"CUSTOMER_SUSPENDED",description:`    ${s}`,metadata:{targetUserId:e,suspendedUntil:a}})},async addCustomerSearchPoints(e,s){await this.adminGrantPoints(e,s);const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);r!==-1&&(a[r].searchPointsTotal=(a[r].searchPointsTotal||0)+s,a[r].searchPointsRemaining=(a[r].searchPointsRemaining||0)+s,localStorage.setItem(le.PROFILES,JSON.stringify(a))),Nt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"SEARCH_POINTS_ADDED",description:`  ${s}   `,metadata:{targetUserId:e,pointsAdded:s}})},async deductCustomerSearchPoints(e,s){const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(o=>o.userId===e);if(r===-1)return!1;const n=a[r].searchPointsRemaining||0;if(s>n)return!1;a[r].searchPointsRemaining=n-s,localStorage.setItem(le.PROFILES,JSON.stringify(a));const i=JSON.parse(localStorage.getItem(le.USERS)||"[]"),l=i.findIndex(o=>o.id===e);return l!==-1&&(i[l].searchLimit=a[r].searchPointsRemaining,localStorage.setItem(le.USERS,JSON.stringify(i))),Nt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"SEARCH_POINTS_DEDUCTED",description:`  ${s}    `,metadata:{targetUserId:e,pointsDeducted:s,newBalance:a[r].searchPointsRemaining}}),!0},async createCustomerFromAdmin(e){await $t(100);const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=`cust-${Date.now().toString().slice(-8)}`,n=new Date().toISOString(),i={id:r,name:e.companyName,phone:e.phone,email:e.email||"",password:"123456",role:"CUSTOMER",status:e.status||"ACTIVE",isActive:e.status!=="SUSPENDED"&&e.status!=="BLOCKED",searchLimit:e.searchPointsTotal||0,priceLevel:e.priceLevel||"LEVEL_1",createdAt:n,updatedAt:n,clientId:`CLT-${Date.now().toString().slice(-6)}`},l={userId:r,companyName:e.companyName,phone:e.phone,email:e.email,region:e.region||"",city:e.city,crNumber:e.crNumber||"",taxNumber:e.taxNumber||"",nationalAddress:e.nationalAddress||"",customerType:e.customerType,deviceFingerprint:"",branches:[],isApproved:!0,status:e.status||"ACTIVE",assignedPriceLevel:e.priceLevel||"LEVEL_1",priceVisibility:"VISIBLE",searchPointsTotal:e.searchPointsTotal||0,searchPointsRemaining:e.searchPointsTotal||0,staffLimit:5,internalNotes:e.internalNotes,totalOrdersCount:0,totalQuotesCount:0,totalSearchesCount:0,lastLoginAt:null,lastActivityAt:n,completionPercent:100};return s.push(i),a.push(l),localStorage.setItem(le.USERS,JSON.stringify(s)),localStorage.setItem(le.PROFILES,JSON.stringify(a)),Nt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"OTHER",description:`    : ${e.companyName}`,metadata:{newCustomerId:r,companyName:e.companyName}}),l},async updateCustomerPriceVisibility(e,s){const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);r!==-1&&(a[r].priceVisibility=s,localStorage.setItem(le.PROFILES,JSON.stringify(a)),Nt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"OTHER",description:`      ${s==="VISIBLE"?"":""}`,metadata:{targetUserId:e,priceVisibility:s}}))},async updateStaffStatus(e,s){const a=JSON.parse(localStorage.getItem(le.USERS)||"[]"),r=a.findIndex(n=>n.id===e);r!==-1&&(a[r].status=s,a[r].isActive=s==="ACTIVE",localStorage.setItem(le.USERS,JSON.stringify(a)),Nt({userId:"super-admin",eventType:s==="ACTIVE"?"USER_REACTIVATED":"USER_SUSPENDED",description:`   ${a[r].name}  ${s}`,metadata:{targetUserId:e}}))},async resetFailedLogin(e){const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=s.findIndex(r=>r.id===e);a!==-1&&(s[a].failedLoginAttempts=0,s[a].riskyLoginFlag=!1,localStorage.setItem(le.USERS,JSON.stringify(s)))},async getAdminCustomers(e){let s=await this.getCustomersDatabase();if(e.search){const d=e.search.toLowerCase();s=s.filter(u=>{var h,f,x,g;return u.companyName.toLowerCase().includes(d)||((h=u.phone)==null?void 0:h.includes(d))||((f=u.email)==null?void 0:f.toLowerCase().includes(d))||((x=u.whatsapp)==null?void 0:x.includes(d))||((g=u.city)==null?void 0:g.toLowerCase().includes(d))})}if(e.customerType&&e.customerType!=="ALL"&&(s=s.filter(d=>d.customerType===e.customerType)),e.status&&e.status!=="ALL"&&(s=s.filter(d=>d.status===e.status)),e.assignedMarketerId&&(s=s.filter(d=>d.assignedMarketerId===e.assignedMarketerId)),e.assignedEmployeeId&&(s=s.filter(d=>d.assignedEmployeeId===e.assignedEmployeeId)),e.dateFrom&&(s=s.filter(d=>(d.lastLoginAt||"")>=e.dateFrom)),e.dateTo&&(s=s.filter(d=>(d.lastLoginAt||"")<=e.dateTo)),e.activityLevel&&e.activityLevel!=="ALL"){const d=new Date,u=new Date(d.getFullYear(),d.getMonth(),d.getDate()).toISOString(),h=new Date(d.getTime()-10080*60*1e3).toISOString(),f=new Date(d.getTime()-720*60*60*1e3).toISOString();e.activityLevel==="ACTIVE_TODAY"?s=s.filter(x=>(x.lastActivityAt||x.lastLoginAt||"")>=u):e.activityLevel==="ACTIVE_WEEK"?s=s.filter(x=>(x.lastActivityAt||x.lastLoginAt||"")>=h):e.activityLevel==="INACTIVE_30"&&(s=s.filter(x=>(x.lastActivityAt||x.lastLoginAt||"")<f))}e.orderBehavior&&e.orderBehavior!=="ALL"&&(e.orderBehavior==="HIGH_VOLUME"?s=s.filter(d=>(d.totalOrdersCount||0)>10):e.orderBehavior==="REJECTED_REQUESTS"?s=s.filter(d=>(d.totalRejectedOrders||0)>0):e.orderBehavior==="ABANDONED_CARTS"&&(s=s.filter(d=>(d.abandonedCartsCount||0)>0)));const a=e.sortBy||"lastActivityAt",r=e.sortDirection||"desc";s.sort((d,u)=>{let h,f;switch(a){case"name":case"companyName":h=d.companyName,f=u.companyName;break;case"lastActivityAt":h=d.lastActivityAt||d.lastLoginAt||"",f=u.lastActivityAt||u.lastLoginAt||"";break;case"lastLoginAt":h=d.lastLoginAt||"",f=u.lastLoginAt||"";break;case"createdAt":h=d.lastLoginAt||"",f=u.lastLoginAt||"";break;case"totalOrdersCount":h=d.totalOrdersCount||0,f=u.totalOrdersCount||0;break;case"totalSearchesCount":h=d.totalSearchesCount||0,f=u.totalSearchesCount||0;break;case"city":h=d.city||"",f=u.city||"";break;case"status":h=d.status||"",f=u.status||"";break;case"customerType":h=d.customerType||"",f=u.customerType||"";break;default:h=d.lastLoginAt||"",f=u.lastLoginAt||""}return h<f?r==="asc"?-1:1:h>f?r==="asc"?1:-1:0});const n=e.page||1,i=e.pageSize||15,l=(n-1)*i;return{items:s.slice(l,l+i),page:n,pageSize:i,total:s.length}},async getCustomerStats(){const e=await this.getCustomersDatabase();return{total:e.length,active:e.filter(s=>s.status==="ACTIVE").length,suspended:e.filter(s=>s.status==="SUSPENDED").length,blocked:e.filter(s=>s.status==="BLOCKED").length}},async getCustomerById(e){const a=(await this.getCustomersDatabase()).find(x=>x.userId===e);if(!a)return null;const n=(await this.getAllOrders()).filter(x=>x.userId===e||x.businessId===e),l=(await this.getAllQuoteRequests()).filter(x=>x.userId===e),d=(await this.getAbandonedCarts()).filter(x=>x.userId===e),u={totalOrders:n.length,totalRequests:l.length,totalApproved:n.filter(x=>x.status==="APPROVED"||x.status==="DELIVERED").length,totalRejected:n.filter(x=>x.status==="CANCELLED").length,totalSpent:n.reduce((x,g)=>x+g.totalAmount,0),abandonedCartsCount:d.length,activeRequestsCount:l.filter(x=>x.status==="NEW"||x.status==="UNDER_REVIEW").length},f=(await this.getActivityLogs()).filter(x=>x.userId===e).sort((x,g)=>new Date(g.timestamp).getTime()-new Date(x.timestamp).getTime()).slice(0,20);return{profile:a,summary:u,recentActivity:f}},async updateCustomerProfileAdmin(e,s){const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);r!==-1&&(["companyName","phone","whatsapp","email","customerType","assignedMarketerId","assignedEmployeeId","completionPercent","city","region","status","assignedPriceLevel"].forEach(i=>{s[i]!==void 0&&(a[r][i]=s[i])}),localStorage.setItem(le.PROFILES,JSON.stringify(a)),Nt({userId:"super-admin",userName:"System Admin",role:"SUPER_ADMIN",eventType:"OTHER",description:"   ",metadata:{targetUserId:e,updates:s}}))},async addCustomerNote(e,s,a,r){const n=JSON.parse(localStorage.getItem("CUSTOMER_NOTES")||"[]"),i={id:`note-${Date.now()}`,customerId:e,text:s,createdBy:a,createdByName:r,createdAt:new Date().toISOString()};return n.push(i),localStorage.setItem("CUSTOMER_NOTES",JSON.stringify(n)),Nt({userId:a,userName:r,role:"SUPER_ADMIN",eventType:"OTHER",description:"   ",metadata:{targetUserId:e,noteId:i.id}}),i},async getCustomerNotes(e,s=1,a=10){const n=JSON.parse(localStorage.getItem("CUSTOMER_NOTES")||"[]").filter(l=>l.customerId===e).sort((l,o)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime()),i=(s-1)*a;return{notes:n.slice(i,i+a),total:n.length}},async getCustomerOrdersSummary(e){const s=await this.getAllOrders(),a=s.filter(n=>n.userId===e||n.businessId===e).sort((n,i)=>new Date(i.date).getTime()-new Date(n.date).getTime()).slice(0,10),r=s.filter(n=>n.userId===e||n.businessId===e);return{orders:a,stats:{pending:r.filter(n=>n.status==="PENDING").length,approved:r.filter(n=>n.status==="APPROVED"||n.status==="DELIVERED").length,rejected:r.filter(n=>n.status==="CANCELLED").length,total:r.length}}},async getMarketersForDropdown(){return(await this.getMarketers()).map(s=>({id:s.id,name:s.name}))},async getEmployeesForDropdown(){return(await this.getAdminUsers()).map(s=>({id:s.id,name:s.fullName}))},async getAllOrders(){const e=localStorage.getItem(le.ORDERS);return e?JSON.parse(e):(localStorage.setItem(le.ORDERS,JSON.stringify(iu)),iu)},async cancelOrder(e,s){const a=JSON.parse(localStorage.getItem(le.ORDERS)||"[]"),r=a.findIndex(l=>l.id===e);if(r===-1)throw new Error("  ");const n=a[r];if(s==="CUSTOMER"&&[pt.SHIPPED,pt.DELIVERED].includes(n.status))throw new Error("CANNOT_CANCEL_SENSITIVE_STATUS");const i={...n,status:pt.CANCELLED,cancelledBy:s,cancelledAt:new Date().toISOString()};if(a[r]=i,localStorage.setItem(le.ORDERS,JSON.stringify(a)),lu("ORDER_CANCELLED",{orderId:e,by:s}),Nt({userId:i.userId,eventType:"ORDER_CANCELLED",description:`   #${i.id}  ${s==="CUSTOMER"?"":""}`,metadata:{orderId:i.id,cancelledBy:s}}),s==="ADMIN"){fr(i.userId,"ORDER_STATUS_CHANGED"," ",`    ${i.id}   .`);const l=JSON.parse(localStorage.getItem(le.USERS)||"[]"),o=l.findIndex(d=>d.id===i.userId);if(o!==-1){const d=l[o];d.hasUnreadOrders=!0,Ai(d)}}return i},async deleteOrder(e){const s=JSON.parse(localStorage.getItem(le.ORDERS)||"[]"),a=s.find(n=>n.id===e),r=s.filter(n=>n.id!==e);localStorage.setItem(le.ORDERS,JSON.stringify(r)),lu("ORDER_DELETED",{orderId:e}),a&&Nt({userId:a.userId,eventType:"ORDER_DELETED",description:`   #${e}  `,metadata:{orderId:e}})},async getNotificationsForUser(e,s){const a=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]");let r=a.filter(h=>h.userId===e);(s==null?void 0:s.isRead)!==void 0&&(r=r.filter(h=>h.isRead===s.isRead)),s!=null&&s.types&&s.types.length>0?r=r.filter(h=>s.types.includes(h.type)):s!=null&&s.type&&(r=r.filter(h=>h.type===s.type)),r.sort((h,f)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());const n=r.length,i=a.filter(h=>h.userId===e&&!h.isRead).length,l=(s==null?void 0:s.limit)||20,d=(((s==null?void 0:s.page)||1)-1)*l;return{items:r.slice(d,d+l),unreadCount:i,total:n}},async getAllNotifications(){return JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]")},async markNotificationAsRead(e,s){const a=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]"),r=a.findIndex(n=>n.id===s&&n.userId===e);return r===-1?null:(a[r]={...a[r],isRead:!0,readAt:new Date().toISOString()},localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(a)),a[r])},async markAllNotificationsAsRead(e){const s=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]"),a=new Date().toISOString();let r=0;const n=s.map(i=>i.userId===e&&!i.isRead?(r++,{...i,isRead:!0,readAt:a}):i);return localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(n)),r},async markNotificationsAsRead(e){await this.markAllNotificationsAsRead(e)},async clearNotificationsForUser(e){const a=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]").filter(r=>r.userId!==e);localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(a))},async deleteNotification(e,s){const r=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]").filter(n=>!(n.id===s&&n.userId===e));localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(r))},async createNotification(e){return fr(e.userId,e.type,e.title,e.message,e.relatedType,e.relatedId,e.link)},async notifyAdmins(e,s,a,r,n){ou().forEach(l=>{fr(l,e,s,a,r,n)})},async getUnreadNotificationCount(e){return JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]").filter(a=>a.userId===e&&!a.isRead).length},async markOrdersAsReadForUser(e){const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a!==-1){const r=s[a];r.hasUnreadOrders&&(r.hasUnreadOrders=!1,r.lastOrdersViewedAt=new Date().toISOString(),Ai(r))}},async markQuotesAsReadForUser(e){const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a!==-1){const r=s[a];r.hasUnreadQuotes&&(r.hasUnreadQuotes=!1,r.lastQuotesViewedAt=new Date().toISOString(),Ai(r))}},async adminGrantPoints(e,s){const a=JSON.parse(localStorage.getItem(le.USERS)||"[]"),r=a.findIndex(n=>n.id===e);if(r!==-1){const n=a[r];n.searchLimit=(n.searchLimit||0)+s,Ai(n),fr(e,"SEARCH_POINTS_ADDED","   ",`  ${s}    .  : ${n.searchLimit}`),Nt({userId:"super-admin",eventType:"SEARCH_POINTS_ADDED",description:` ${s}    ${n.name}`,metadata:{targetUserId:e,pointsAdded:s}})}},async saveProduct(e){let s=await this.searchProducts("");const a=s.findIndex(r=>r.id===e.id);a>=0?s[a]=e:s.push({...e,id:crypto.randomUUID()}),localStorage.setItem(le.PRODUCTS,JSON.stringify(s))},async login(e,s,a){if(await $t(20),e==="admin"&&s==="admin"){if(lu("LOGIN_ADMIN",{user:"admin"}),localStorage.getItem(le.TOOL_CONFIGS)||localStorage.setItem(le.TOOL_CONFIGS,JSON.stringify(this.getDefaultToolConfigs())),localStorage.getItem(le.ORDERS)||localStorage.setItem(le.ORDERS,JSON.stringify(iu)),localStorage.getItem(le.QUOTE_REQUESTS)||localStorage.setItem(le.QUOTE_REQUESTS,JSON.stringify(f1)),localStorage.getItem(le.SETTINGS)||localStorage.setItem(le.SETTINGS,JSON.stringify(ca)),localStorage.getItem(le.ADMIN_ROLES)||localStorage.setItem(le.ADMIN_ROLES,JSON.stringify(this.getDefaultRoles())),!localStorage.getItem(le.ADMIN_USERS)){const v={id:"super-admin",username:"admin",email:"admin@system.com",fullName:" ",roleId:"role-super-admin",isActive:!0,isSuperAdmin:!0,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString()};localStorage.setItem(le.ADMIN_USERS,JSON.stringify([v]))}Nt({userId:"super-admin",userName:" ",role:"SUPER_ADMIN",eventType:"LOGIN",description:"  "});const g={id:"super-admin",clientId:"admin",name:" ",email:"admin@system.com",role:"SUPER_ADMIN",extendedRole:"SUPER_ADMIN",searchLimit:0,searchUsed:0,isSuperAdmin:!0,isApproved:!0,status:"ACTIVE"};return localStorage.setItem(le.SESSION,JSON.stringify(g)),{user:g,profile:null}}let r=JSON.parse(localStorage.getItem(le.USERS)||"[]"),n=JSON.parse(localStorage.getItem(le.PROFILES)||"[]");if(!r.find(g=>g.phone==="0500056988"&&g.role==="CUSTOMER_STAFF")){const g={id:"demo-staff-id",clientId:"STAFF-001",name:" ",email:"staff@sinicar.com",phone:"0500056988",activationCode:"381960",role:"CUSTOMER_STAFF",parentId:"demo-user-id",businessId:"demo-user-id",searchLimit:20,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE"};r.push(g),localStorage.setItem(le.USERS,JSON.stringify(r))}if(!r.find(g=>g.clientId==="user-5")){const g={id:"supplier-user-5",clientId:"user-5",name:"  ",email:"5@sinicar.com",phone:"050000005",password:"5",role:"CUSTOMER_OWNER",searchLimit:100,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",isSupplier:!0,extendedRole:"SUPPLIER_LOCAL"};r.push(g),localStorage.setItem(le.USERS,JSON.stringify(r))}if(!r.find(g=>g.clientId==="SL-20001")){const g={id:"supplier-1",clientId:"SL-20001",name:"  ",email:"supplier1@alamal.com",phone:"0560000001",password:"supplier123",role:"CUSTOMER_OWNER",searchLimit:100,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",isSupplier:!0,extendedRole:"SUPPLIER_LOCAL"};r.push(g),localStorage.setItem(le.USERS,JSON.stringify(r))}if(!r.find(g=>g.clientId==="MKT-001")){const g={id:"marketer-demo-1",clientId:"MKT-001",name:" ",email:"marketer@sinicar.com",phone:"0555555551",password:"marketer123",role:"CUSTOMER_OWNER",searchLimit:75,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",extendedRole:"MARKETER"};r.push(g),localStorage.setItem(le.USERS,JSON.stringify(r))}if(!r.find(g=>g.clientId==="ADV-001")){const g={id:"advertiser-demo-1",clientId:"ADV-001",name:" ",email:"advertiser@sinicar.com",phone:"0555555552",password:"advertiser123",role:"CUSTOMER_OWNER",searchLimit:60,searchUsed:0,status:"ACTIVE",isApproved:!0,accountStatus:"ACTIVE",extendedRole:"EMPLOYEE"};r.push(g),localStorage.setItem(le.USERS,JSON.stringify(r))}if(e==="1"&&s==="1"&&a==="OWNER"&&!r.find(v=>v.clientId==="1")){const v="demo-user-id",b={id:v,clientId:"1",password:"1",name:"  ()",email:"admin@sinicar.com",role:"CUSTOMER_OWNER",searchLimit:50,searchUsed:0,lastSearchDate:new Date().toISOString().split("T")[0],priceLevel:"A",isApproved:!0,accountStatus:"ACTIVE",customerType:"WHOLESALE",businessId:v,hasUnreadOrders:!1,status:"ACTIVE",lastLoginAt:new Date().toISOString()},y={userId:v,companyName:"   ",phone:"0500000000",region:"",city:"",crNumber:"1010101010",taxNumber:"300055566600003",nationalAddress:"1234   ",customerType:KM.SPARE_PARTS_SHOP,deviceFingerprint:"DEMO",branches:[{id:"b1",name:"",city:"",address:" ",phone:"0500000000"}],isApproved:!0,status:"ACTIVE",searchPointsTotal:50,searchPointsRemaining:50};r.push(b),n.push(y),localStorage.setItem(le.USERS,JSON.stringify(r)),localStorage.setItem(le.PROFILES,JSON.stringify(n)),localStorage.getItem(le.ORDERS)||localStorage.setItem(le.ORDERS,JSON.stringify(iu)),localStorage.getItem(le.QUOTE_REQUESTS)||localStorage.setItem(le.QUOTE_REQUESTS,JSON.stringify(f1))}let h;if(a==="OWNER"){if(h=r.find(g=>g.clientId===e),!h)throw new Error("   ");if(h.role==="ADMIN"&&(h.role="CUSTOMER_OWNER"),h.password!==s)throw h.failedLoginAttempts=(h.failedLoginAttempts||0)+1,Ai(h),Nt({userId:h.id,userName:h.name,role:h.role,eventType:"FAILED_LOGIN",description:"    "}),new Error("   ");if(h.role!=="CUSTOMER_OWNER"&&h.role!=="SUPER_ADMIN")throw new Error("     ")}else if(a==="STAFF"){if(h=r.find(g=>g.phone===e&&(g.role==="CUSTOMER_STAFF"||g.role==="EMPLOYEE")),!h)throw new Error("    ");if(h.role==="EMPLOYEE"&&(h.role="CUSTOMER_STAFF"),h.activationCode!==s&&h.password!==s)throw h.failedLoginAttempts=(h.failedLoginAttempts||0)+1,Ai(h),new Error("   ")}if(!h)throw new Error("  ");if(h.isActive===!1||h.status==="BLOCKED"||h.status==="SUSPENDED")throw new Error("     ");h.searchLimit===void 0&&(h.searchLimit=50,h.searchUsed=0,h.lastSearchDate=new Date().toISOString().split("T")[0],h.priceLevel="B",h.accountStatus="ACTIVE"),h.failedLoginAttempts=0,h.lastLoginAt=new Date().toISOString(),h=HO(h),Ai(h);const f=h.role==="CUSTOMER_STAFF"?h.parentId:h.id,x=n.find(g=>g.userId===f);if(x&&a==="OWNER"){x.lastLoginAt=h.lastLoginAt;const g=n.findIndex(v=>v.userId===x.userId);g!==-1&&(n[g]=x,localStorage.setItem(le.PROFILES,JSON.stringify(n)))}return localStorage.setItem(le.SESSION,JSON.stringify(h)),lu("LOGIN_SUCCESS",{userId:h.id,type:a}),Nt({userId:h.id,userName:h.name,role:h.role,eventType:"LOGIN",description:"  "}),{user:h,profile:x||null}},async registerBusiness(e,s){await $t(100);const a=JSON.parse(localStorage.getItem(le.USERS)||"[]");if(a.find(d=>d.email===e.email))throw new Error("   ");const r=crypto.randomUUID(),n=pte(),i={...e,id:r,clientId:n,role:"CUSTOMER_OWNER",businessId:r,searchLimit:50,searchUsed:0,lastSearchDate:new Date().toISOString().split("T")[0],priceLevel:"C",accountStatus:"PENDING",isApproved:!1,hasUnreadOrders:!1,status:"PENDING"},l={...s,userId:r,branches:[{id:crypto.randomUUID(),name:" ",city:s.city,address:s.nationalAddress,phone:e.phone}],isApproved:!1};a.push(i);const o=JSON.parse(localStorage.getItem(le.PROFILES)||"[]");return o.push(l),localStorage.setItem(le.USERS,JSON.stringify(a)),localStorage.setItem(le.PROFILES,JSON.stringify(o)),{success:!0,message:"  ",clientId:n}},async getCurrentSession(){const e=localStorage.getItem(le.SESSION);if(!e)return null;const s=JSON.parse(e);let r=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(n=>n.id===s.id);return r?(r.searchLimit===void 0&&(r.searchLimit=50,r.searchUsed=0,r.lastSearchDate=new Date().toISOString().split("T")[0]),r=HO(r),Ai(r),r):s},async logout(){const e=localStorage.getItem(le.SESSION);if(e){const s=JSON.parse(e);lu("LOGOUT",{userId:s.id}),Nt({userId:s.id,userName:s.name,role:s.role,eventType:"LOGOUT",description:" "})}localStorage.removeItem(le.SESSION)},canShowPrice(e){if(!e)return!1;if(e.role==="SUPER_ADMIN")return!0;const s=e.searchLimit??50,a=e.searchUsed??0;return s===0?!0:a<s},async incrementSearchUsage(e){const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a!==-1){let r=s[a];const n=new Date().toISOString().split("T")[0];r.lastSearchDate!==n&&(r.searchUsed=0,r.lastSearchDate=n);const i=r.searchLimit??50;if(i!==0){const l=r.searchUsed||0;if(l>=i)throw new Error("NO_POINTS_LEFT");r.searchUsed=l+1}return Ai(r),r}throw new Error("User not found")},hasRecentPriceView(e,s){const a=JSON.parse(localStorage.getItem(le.SEARCH_HISTORY)||"[]"),r=Date.now()-7200*60*1e3;return!!a.find(i=>i.userId===e&&i.productId===s&&new Date(i.viewedAt).getTime()>r)},async logPriceView(e,s){const r=JSON.parse(localStorage.getItem(le.SEARCH_HISTORY)||"[]").filter(i=>!(i.userId===e.id&&i.productId===s.id)),n={id:crypto.randomUUID(),userId:e.id,productId:s.id,partNumber:s.partNumber,productName:s.name,viewedAt:new Date().toISOString(),priceSnapshot:s.price};r.unshift(n),r.length>500&&r.pop(),localStorage.setItem(le.SEARCH_HISTORY,JSON.stringify(r)),Nt({userId:e.id,userName:e.name,role:e.role,eventType:"SEARCH_PERFORMED",description:`  : ${s.partNumber} - ${s.name}`,metadata:{productId:s.id,partNumber:s.partNumber}})},getSearchHistoryForUser(e){return JSON.parse(localStorage.getItem(le.SEARCH_HISTORY)||"[]").filter(a=>a.userId===e)},async logMissingProduct(e,s,a,r="SEARCH",n){const i=JSON.parse(localStorage.getItem(le.MISSING_REQUESTS)||"[]"),l=Yi(s),o=new Date().toISOString(),d=i.findIndex(u=>u.normalizedPartNumber&&u.normalizedPartNumber===l&&l.length>3||u.query.trim().toLowerCase()===s.trim().toLowerCase());if(d!==-1){const u=i[d],h=new Set(u.customerIds||[]);h.add(e);const f={...u,totalRequestsCount:(u.totalRequestsCount||1)+1,uniqueCustomersCount:h.size,customerIds:Array.from(h),lastRequestedAt:o,source:r==="QUOTE"?"QUOTE":u.source,quoteRequestId:n||u.quoteRequestId};i[d]=f}else{const u={id:crypto.randomUUID(),userId:e,userName:a,query:s,normalizedPartNumber:l,partNumber:l.length>3?s:void 0,name:l.length<=3?s:void 0,createdAt:o,source:r,quoteRequestId:n,status:"NEW",totalRequestsCount:1,uniqueCustomersCount:1,customerIds:[e],lastRequestedAt:o,isNew:!0};i.push(u)}localStorage.setItem(le.MISSING_REQUESTS,JSON.stringify(i)),r==="SEARCH"&&Nt({userId:e,userName:a,eventType:"SEARCH_PERFORMED",description:`    : ${s}`,metadata:{query:s}})},async getMissingProductRequests(){return JSON.parse(localStorage.getItem(le.MISSING_REQUESTS)||"[]")},async updateMissingProductStatus(e,s,a){const r=await this.getMissingProductRequests(),n=r.findIndex(l=>l.id===e);if(n===-1)throw new Error("Record not found");const i={...r[n],status:s,adminNotes:a??r[n].adminNotes};return r[n]=i,localStorage.setItem(le.MISSING_REQUESTS,JSON.stringify(r)),i},getStockThreshold(){return JSON.parse(localStorage.getItem(le.SETTINGS)||"{}").stockThreshold??0},getMinVisibleQty(){return JSON.parse(localStorage.getItem(le.SETTINGS)||"{}").minVisibleQty??1},async logMissingPartFromSearch(e){const s=new Date().toISOString().split("T")[0],a=JSON.parse(localStorage.getItem(le.MISSING_REQUESTS)||"[]"),r=a.findIndex(n=>n.normalizedPartNumber===e.normalizedPartNumber&&n.userId===(e.customerId||"guest")&&n.lastSearchDate===s);if(r>=0){const n=a[r];a[r]={...n,searchCount:(n.searchCount||1)+1,lastRequestedAt:new Date().toISOString(),totalRequestsCount:(n.totalRequestsCount||1)+1,availabilityStatus:e.availabilityStatus,searchSource:e.searchSource}}else{const n={id:crypto.randomUUID(),userId:e.customerId||"guest",userName:e.customerName,query:e.partNumber,partNumber:e.partNumber,normalizedPartNumber:e.normalizedPartNumber,name:e.productName,brand:e.brand,carModel:e.carInfo,branchId:e.branchId,productId:e.productId,createdAt:new Date().toISOString(),source:"SEARCH",availabilityStatus:e.availabilityStatus,searchSource:e.searchSource,searchCount:1,lastSearchDate:s,status:"NEW",totalRequestsCount:1,uniqueCustomersCount:1,customerIds:e.customerId?[e.customerId]:[],lastRequestedAt:new Date().toISOString(),isNew:!0};a.push(n)}localStorage.setItem(le.MISSING_REQUESTS,JSON.stringify(a))},getExcelColumnPresets(){const e=localStorage.getItem(le.EXCEL_COLUMN_PRESETS);if(!e){const s={id:"default-preset",name:" ",isDefault:!0,mappings:[{internalField:"partNumber",excelHeader:" ",isEnabled:!0,isRequired:!0},{internalField:"name",excelHeader:" ",isEnabled:!0,isRequired:!0},{internalField:"brand",excelHeader:"",isEnabled:!0,isRequired:!1},{internalField:"qtyTotal",excelHeader:"",isEnabled:!0,isRequired:!0},{internalField:"priceWholesale",excelHeader:" ",isEnabled:!0,isRequired:!1},{internalField:"priceRetail",excelHeader:" ",isEnabled:!0,isRequired:!1}],createdAt:new Date().toISOString()};return localStorage.setItem(le.EXCEL_COLUMN_PRESETS,JSON.stringify([s])),[s]}return JSON.parse(e)},getDefaultExcelColumnPreset(){const e=this.getExcelColumnPresets();return e.find(s=>s.isDefault)||e[0]||null},createExcelColumnPreset(e){const s=this.getExcelColumnPresets(),a={...e,id:`preset-${Date.now()}`,createdAt:new Date().toISOString()};return e.isDefault&&s.forEach(r=>r.isDefault=!1),s.push(a),localStorage.setItem(le.EXCEL_COLUMN_PRESETS,JSON.stringify(s)),a},updateExcelColumnPreset(e,s){const a=this.getExcelColumnPresets(),r=a.findIndex(n=>n.id===e);return r===-1?null:(s.isDefault&&a.forEach(n=>n.isDefault=!1),a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(le.EXCEL_COLUMN_PRESETS,JSON.stringify(a)),a[r])},deleteExcelColumnPreset(e){const s=this.getExcelColumnPresets(),a=s.findIndex(n=>n.id===e);if(a===-1)return!1;const r=s[a].isDefault;return s.splice(a,1),r&&s.length>0&&(s[0].isDefault=!0),localStorage.setItem(le.EXCEL_COLUMN_PRESETS,JSON.stringify(s)),!0},setDefaultExcelColumnPreset(e){const s=this.getExcelColumnPresets(),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.forEach(r=>r.isDefault=!1),s[a].isDefault=!0,localStorage.setItem(le.EXCEL_COLUMN_PRESETS,JSON.stringify(s)),!0)},async getImportRequests(){return JSON.parse(localStorage.getItem(le.IMPORT_REQUESTS)||"[]")},async createImportRequest(e){await $t(100);const s=JSON.parse(localStorage.getItem(le.IMPORT_REQUESTS)||"[]"),a={status:"NEW",note:"     ",changedAt:new Date().toISOString(),changedBy:e.businessName||"Customer",actorRole:"CUSTOMER"},r={...e,id:`IMP-${Math.floor(1e4+Math.random()*9e4)}`,status:"NEW",createdAt:new Date().toISOString(),timeline:[a],isNew:!0};return s.push(r),localStorage.setItem(le.IMPORT_REQUESTS,JSON.stringify(s)),Nt({userId:e.customerId,eventType:"IMPORT_REQUEST",description:`   (${e.serviceMode})`,metadata:{importId:r.id}}),r},async updateImportRequestStatus(e,s,a){const r=JSON.parse(localStorage.getItem(le.IMPORT_REQUESTS)||"[]"),n=r.findIndex(u=>u.id===e);if(n===-1)throw new Error("  ");const i=r[n],l=i.status,o={status:s,note:(a==null?void 0:a.note)||null,changedAt:new Date().toISOString(),changedBy:(a==null?void 0:a.changedBy)||"System",actorRole:(a==null?void 0:a.actorRole)||"ADMIN"},d={...i,status:s,updatedAt:new Date().toISOString(),timeline:[...i.timeline||[],o]};return r[n]=d,localStorage.setItem(le.IMPORT_REQUESTS,JSON.stringify(r)),(a==null?void 0:a.actorRole)==="ADMIN"&&s!==l&&fr(d.customerId,"IMPORT_UPDATE","  ",`    #${d.id}  ${s}`),Nt({userId:(a==null?void 0:a.actorRole)==="ADMIN"?"super-admin":d.customerId,eventType:"IMPORT_STATUS_CHANGED",description:`     ${s}`,metadata:{importId:e,oldStatus:l,newStatus:s}}),d},async uploadImportRequestExcel(e,s,a){await $t(500);const r=JSON.parse(localStorage.getItem(le.IMPORT_REQUESTS)||"[]"),n=r.findIndex(d=>d.id===e);if(n===-1)throw new Error("Request not found");const i=r[n],l={status:i.status,note:`   : ${s}`,changedAt:new Date().toISOString(),changedBy:a,actorRole:"CUSTOMER"},o={...i,customerExcelFileName:s,customerExcelUploadedAt:new Date().toISOString(),timeline:[...i.timeline||[],l]};return r[n]=o,localStorage.setItem(le.IMPORT_REQUESTS,JSON.stringify(r)),o},async completeImportRequestPricing(e,s){const a=JSON.parse(localStorage.getItem(le.IMPORT_REQUESTS)||"[]"),r=a.findIndex(o=>o.id===e);if(r===-1)throw new Error("Request not found");const n=a[r],i={status:"PRICING_SENT",note:`    (${s.totalAmount} .)`,changedAt:new Date().toISOString(),changedBy:s.adminName,actorRole:"ADMIN"},l={...n,status:"PRICING_SENT",pricingFileNameForCustomer:s.pricingFileName,pricingTotalAmount:s.totalAmount,pricingPreparedBy:s.adminName,pricingPreparedAt:new Date().toISOString(),timeline:[...n.timeline||[],i]};return a[r]=l,localStorage.setItem(le.IMPORT_REQUESTS,JSON.stringify(a)),fr(l.customerId,"IMPORT_UPDATE","  ",`      #${e}.   .`),l},async confirmImportRequestByCustomer(e,s){return this.updateImportRequestStatus(e,"APPROVED_BY_CUSTOMER",{note:s.approvalNote||"    ",changedBy:s.customerName,actorRole:"CUSTOMER"})},async getAccountOpeningRequests(){return JSON.parse(localStorage.getItem(le.ACCOUNT_REQUESTS)||"[]")},async createAccountOpeningRequest(e){await $t(100);const s=JSON.parse(localStorage.getItem(le.ACCOUNT_REQUESTS)||"[]"),a={...e,id:`REQ-${Date.now().toString().slice(-6)}${Math.floor(Math.random()*9)}`,status:"NEW",createdAt:new Date().toISOString(),isNew:!0};return s.push(a),localStorage.setItem(le.ACCOUNT_REQUESTS,JSON.stringify(s)),Nt({userId:"GUEST",userName:e.fullName||e.businessName,eventType:"ACCOUNT_REQUEST",description:`   : ${e.businessName||e.fullName}`,metadata:{requestId:a.id,category:e.category}}),ou().forEach(n=>{fr(n,"NEW_ACCOUNT_REQUEST","   ",`    : ${e.businessName||e.fullName}`,"ACCOUNT",a.id)}),a},async updateAccountOpeningRequestStatus(e,s,a){const r=JSON.parse(localStorage.getItem(le.ACCOUNT_REQUESTS)||"[]"),n=r.findIndex(l=>l.id===e);if(n===-1)throw new Error("    ");const i={...r[n],status:s,updatedAt:new Date().toISOString(),...a};return r[n]=i,localStorage.setItem(le.ACCOUNT_REQUESTS,JSON.stringify(r)),i.userId&&(s==="APPROVED"?fr(i.userId,"ACCOUNT_APPROVED","  ","     SINI CAR.      .","ACCOUNT",i.id):s==="REJECTED"&&fr(i.userId,"ACCOUNT_REJECTED","   ","     .       .","ACCOUNT",i.id)),i},async reviewAccountRequest(e,s){const a=JSON.parse(localStorage.getItem(le.ACCOUNT_REQUESTS)||"[]"),r=a.findIndex(i=>i.id===e);if(r===-1)throw new Error("Request not found");const n={...a[r],...s,reviewedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a[r]=n,localStorage.setItem(le.ACCOUNT_REQUESTS,JSON.stringify(a)),Nt({userId:s.reviewedBy,userName:s.reviewedBy,role:"SUPER_ADMIN",eventType:"ACCOUNT_REQUEST_REVIEWED",description:` ${s.status==="APPROVED"?"":s.status==="REJECTED"?"":""}     ${n.businessName||n.fullName}`,metadata:{requestId:e,status:s.status}}),n.userId&&(s.status==="APPROVED"?fr(n.userId,"ACCOUNT_APPROVED","  ","     SINI CAR.      .","ACCOUNT",e):s.status==="REJECTED"&&fr(n.userId,"ACCOUNT_REJECTED","   ","     .       .","ACCOUNT",e)),n},async searchProducts(e){const s=localStorage.getItem(le.PRODUCTS);let a=s?JSON.parse(s):Cl;return s||(a=Cl,localStorage.setItem(le.PRODUCTS,JSON.stringify(a))),a.map(r=>{if(!r.normalizedPart||!r.numericPartCore){const n=h9(r.partNumber);return{...r,normalizedPart:n.clean,numericPartCore:n.numericCore}}return r})},async getFeaturedProducts(){const e=await this.searchProducts("");return{newArrivals:e.filter(s=>s.isNew),onSale:e.filter(s=>s.isOnSale)}},async getBanners(){const e=localStorage.getItem(le.BANNERS);if(e)return JSON.parse(e);const s=xte.map((a,r)=>({...a,id:a.id||`b-${r}`,isActive:a.isActive!==void 0?a.isActive:!0,colorClass:a.colorClass.replace("red","primary").replace("blue","secondary")}));return localStorage.setItem(le.BANNERS,JSON.stringify(s)),s},async getNews(){const e=localStorage.getItem(le.NEWS);return e?JSON.parse(e):(localStorage.setItem(le.NEWS,JSON.stringify($O)),$O)},async createOrder(e){const s=JSON.parse(localStorage.getItem(le.ORDERS)||"[]"),a=JSON.parse(localStorage.getItem(le.SESSION)||"{}"),r=e.businessId||a.businessId||a.id,n={...e,id:`ORD-${Math.floor(Math.random()*1e5)}`,status:pt.PENDING,date:new Date().toISOString(),businessId:r,createdByUserId:a.id,createdByName:a.name,internalStatus:"NEW",internalStatusHistory:[{status:"NEW",changedAt:new Date().toISOString(),changedBy:"system"}],isNew:!0};return s.push(n),localStorage.setItem(le.ORDERS,JSON.stringify(s)),lu("ORDER_CREATED",{orderId:n.id,amount:n.totalAmount}),Nt({userId:a.id,userName:a.name,role:a.role,eventType:"ORDER_CREATED",description:`     ${n.totalAmount.toLocaleString()} .`,metadata:{orderId:n.id,itemCount:n.items.length}}),n},async getOrders(e){const s=JSON.parse(localStorage.getItem(le.ORDERS)||"[]");if(s.length===0&&e==="demo-user-id")return localStorage.setItem(le.ORDERS,JSON.stringify(iu)),iu;const r=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(n=>n.id===e);return r&&r.businessId?s.filter(n=>n.businessId===r.businessId||n.userId===e).reverse():s.filter(n=>n.userId===e).reverse()},async updateOrderInternalStatus(e,s,a,r){const n=await this.getAllOrders(),i=n.findIndex(d=>d.id===e);if(i===-1)throw new Error("ORDER_NOT_FOUND");const l=n[i],o={...l,internalStatus:s,internalNotes:r??l.internalNotes,internalStatusHistory:[...l.internalStatusHistory??[],{status:s,changedAt:new Date().toISOString(),changedBy:a}]};return n[i]=o,localStorage.setItem(le.ORDERS,JSON.stringify(n)),Nt({userId:"super-admin",userName:a,role:"SUPER_ADMIN",eventType:"ORDER_INTERNAL_STATUS_CHANGED",description:`    #${l.id}  ${s}`,metadata:{orderId:l.id,newStatus:s}}),o},async adminUpdateOrderStatus(e,s,a){var x;const r=await this.getAllOrders(),n=r.findIndex(g=>g.id===e);if(n===-1)throw new Error("ORDER_NOT_FOUND");const i=r[n],l=i.status,o={...i,status:s};r[n]=o,localStorage.setItem(le.ORDERS,JSON.stringify(r)),fr(i.userId,"ORDER_STATUS_CHANGED","  ",`     ${i.id}  ${l}  ${s}`),Nt({userId:"super-admin",userName:a,role:"SUPER_ADMIN",eventType:"ORDER_STATUS_CHANGED",description:`   #${i.id} ()  ${s}`,metadata:{orderId:i.id,newStatus:s}});const d=JSON.parse(localStorage.getItem(le.USERS)||"[]"),u=d.findIndex(g=>g.id===i.userId);if(u!==-1){const g=d[u];g.hasUnreadOrders=!0,Ai(g)}const f=(await this.getSettings()).orderStatusPointsConfig;if(f!=null&&f.enabled){const g=(x=Object.entries(pt).find(([b,y])=>y===s))==null?void 0:x[0],v=g?f.pointsPerStatus[g]:0;if(v&&v>0){const b=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),y=d.find(j=>j.id===i.userId);if(y){const j=y.role==="CUSTOMER_STAFF"?y.parentId:y.id,w=b.findIndex(A=>A.userId===j);w!==-1&&(b[w].searchPointsRemaining=(b[w].searchPointsRemaining||0)+v,b[w].searchPointsTotal=(b[w].searchPointsTotal||0)+v,localStorage.setItem(le.PROFILES,JSON.stringify(b)),fr(i.userId,"SEARCH_POINTS_ADDED","   ",`  ${v}       #${i.id}  "${s}"`),Nt({userId:"super-admin",userName:"",role:"SUPER_ADMIN",eventType:"SEARCH_POINTS_ADDED",description:` : ${v}       "${s}"`,metadata:{orderId:i.id,pointsAdded:v,targetUserId:j}}))}}}return o},async getAbandonedCarts(){const e=JSON.parse(localStorage.getItem(le.ABANDONED_CARTS)||"[]"),s=Date.now()-900*1e3;return e.filter(a=>a.status==="ACTIVE"&&new Date(a.lastUpdatedAt).getTime()<s)},async saveAbandonedCart(e,s,a){if(!e||s.length===0)return null;const r=JSON.parse(localStorage.getItem(le.ABANDONED_CARTS)||"[]"),i=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(u=>u.id===e),l=new Date().toISOString(),o=r.findIndex(u=>u.userId===e&&u.status==="ACTIVE");if(o!==-1)return r[o].items=s,r[o].totalAmount=a,r[o].lastUpdatedAt=l,i&&(r[o].userName=i.name,r[o].whatsapp=i.whatsapp||i.phone,r[o].phone=i.phone,r[o].extendedRole=i.extendedRole),localStorage.setItem(le.ABANDONED_CARTS,JSON.stringify(r)),r[o];const d={id:`AC-${Date.now()}-${Math.floor(Math.random()*1e3)}`,userId:e,userName:i==null?void 0:i.name,whatsapp:(i==null?void 0:i.whatsapp)||(i==null?void 0:i.phone),phone:i==null?void 0:i.phone,extendedRole:i==null?void 0:i.extendedRole,items:s,totalAmount:a,lastUpdatedAt:l,status:"ACTIVE",createdAt:l};return r.push(d),localStorage.setItem(le.ABANDONED_CARTS,JSON.stringify(r)),d},async convertAbandonedCart(e){const s=JSON.parse(localStorage.getItem(le.ABANDONED_CARTS)||"[]"),a=s.findIndex(r=>r.userId===e&&r.status==="ACTIVE");return a===-1?!1:(s.splice(a,1),localStorage.setItem(le.ABANDONED_CARTS,JSON.stringify(s)),!0)},async clearAbandonedCart(e){const s=JSON.parse(localStorage.getItem(le.ABANDONED_CARTS)||"[]"),a=s.findIndex(r=>r.userId===e&&r.status==="ACTIVE");return a===-1?!1:(s.splice(a,1),localStorage.setItem(le.ABANDONED_CARTS,JSON.stringify(s)),!0)},async getAbandonedCartById(e){return JSON.parse(localStorage.getItem(le.ABANDONED_CARTS)||"[]").find(a=>a.id===e)||null},async uploadAlternatives(e,s,a){const r=JSON.parse(localStorage.getItem(le.ALTERNATIVE_PARTS)||"[]"),n=new Date().toISOString();let i=0,l=0;const o=[];for(let d=0;d<e.length;d++){const u=e[d],h=(u.mainPart||"").trim().toUpperCase(),f=(u.altPart||"").trim().toUpperCase();if(!h||!f){l++,o.push(`Row ${d+1}: Missing main or alternative part number`);continue}if(h===f){l++,o.push(`Row ${d+1}: Main and alternative part numbers are the same`);continue}const x=r.find(g=>g.mainPartNumber===h&&g.altPartNumber===f);x?(x.description=u.description||x.description,x.brand=u.brand||x.brand,x.updatedAt=n,i++):(r.push({id:`ALT-${Date.now()}-${Math.random().toString(36).substr(2,6)}`,mainPartNumber:h,altPartNumber:f,description:u.description||void 0,brand:u.brand||void 0,sourceType:"CUSTOMER_UPLOAD",sourceUserId:s,sourceUserName:a,createdAt:n,updatedAt:n}),i++)}return localStorage.setItem(le.ALTERNATIVE_PARTS,JSON.stringify(r)),{success:!0,rowsProcessed:e.length,rowsInserted:i,rowsSkipped:l,errors:o.slice(0,10)}},async searchAlternatives(e){const s=JSON.parse(localStorage.getItem(le.ALTERNATIVE_PARTS)||"[]"),a=(e||"").trim().toUpperCase();return a?s.filter(r=>r.mainPartNumber===a||r.altPartNumber===a):[]},async getAllAlternatives(e=1,s=50){const a=JSON.parse(localStorage.getItem(le.ALTERNATIVE_PARTS)||"[]"),r=a.sort((l,o)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime()),n=(e-1)*s,i=n+s;return{data:r.slice(n,i),total:a.length}},async deleteAlternative(e){const s=JSON.parse(localStorage.getItem(le.ALTERNATIVE_PARTS)||"[]"),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.splice(a,1),localStorage.setItem(le.ALTERNATIVE_PARTS,JSON.stringify(s)),!0)},async deleteAllAlternativesByUser(e){const s=JSON.parse(localStorage.getItem(le.ALTERNATIVE_PARTS)||"[]"),a=s.filter(n=>n.sourceUserId!==e),r=s.length-a.length;return localStorage.setItem(le.ALTERNATIVE_PARTS,JSON.stringify(a)),r},async advancedSearchProducts(e){const{q:s="",brand:a,make:r,model:n,year:i,page:l=1,pageSize:o=20}=e;let u=await this.searchProducts("");if(s.trim()){const g=s.toLowerCase().trim();u=u.filter(v=>v.partNumber.toLowerCase().includes(g)||v.name.toLowerCase().includes(g)||v.manufacturerPartNumber&&v.manufacturerPartNumber.toLowerCase().includes(g)||v.description&&v.description.toLowerCase().includes(g))}a&&(u=u.filter(g=>{var v;return((v=g.brand)==null?void 0:v.toLowerCase())===a.toLowerCase()})),r&&(u=u.filter(g=>{var v;return(v=g.carName)==null?void 0:v.toLowerCase().includes(r.toLowerCase())})),n&&(u=u.filter(g=>{var v;return(v=g.carName)==null?void 0:v.toLowerCase().includes(n.toLowerCase())})),i&&(u=u.filter(g=>{var v;return(v=g.modelYear)==null?void 0:v.includes(i)}));const h=u.length,f=(l-1)*o;return{items:u.slice(f,f+o),page:l,pageSize:o,total:h}},async createPurchaseRequest(e,s,a,r,n){const i=JSON.parse(localStorage.getItem(le.PURCHASE_REQUESTS)||"[]"),l=`PR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,o={id:l,customerId:e,customerName:s,companyName:a,createdAt:new Date().toISOString(),status:"NEW",source:"PRODUCT_SEARCH_PAGE",items:r.map((u,h)=>({id:`${l}-item-${h}`,productId:u.productId,partNumber:u.partNumber,productName:u.productName,quantity:u.quantity,priceAtRequest:u.priceAtRequest,notes:u.notes})),totalItemsCount:r.length,notes:n,createdByUserId:e,createdByName:s,isNew:!0};return i.push(o),localStorage.setItem(le.PURCHASE_REQUESTS,JSON.stringify(i)),Nt({userId:e,userName:s,role:"CUSTOMER_OWNER",eventType:"PURCHASE_REQUEST_CREATED",description:`       ${r.length} `,metadata:{requestId:l,itemsCount:r.length}}),ou().forEach(u=>{fr(u,"NEW_PURCHASE_REQUEST","  ",`    ${s} (${a}) - ${r.length} `,"REQUEST",l)}),{success:!0,requestId:l}},async getPurchaseRequests(e,s=1,a=20){let n=JSON.parse(localStorage.getItem(le.PURCHASE_REQUESTS)||"[]");e!=null&&e.customerId&&(n=n.filter(d=>d.customerId===e.customerId)),e!=null&&e.status&&(n=n.filter(d=>d.status===e.status)),n.sort((d,u)=>new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime());const i=n.length,l=(s-1)*a;return{items:n.slice(l,l+a),total:i,page:s,pageSize:a}},async getPurchaseRequestById(e){return JSON.parse(localStorage.getItem(le.PURCHASE_REQUESTS)||"[]").find(a=>a.id===e)||null},async updatePurchaseRequestStatus(e,s,a,r){const n=JSON.parse(localStorage.getItem(le.PURCHASE_REQUESTS)||"[]"),i=n.findIndex(o=>o.id===e);if(i===-1)return null;const l=n[i].status;if(n[i]={...n[i],status:s,updatedAt:new Date().toISOString(),adminReviewedBy:a,adminReviewedAt:new Date().toISOString(),adminNote:r||n[i].adminNote,isNew:!1},localStorage.setItem(le.PURCHASE_REQUESTS,JSON.stringify(n)),n[i].customerId&&l!==s){const o={NEW:"",PROCESSING:" ",COMPLETED:"",CANCELLED:""};fr(n[i].customerId,"ORDER_STATUS_CHANGED","   ",`     #${e} : ${o[s]||s}`,"REQUEST",e)}return n[i]},async getNewPurchaseRequestsCount(){return JSON.parse(localStorage.getItem(le.PURCHASE_REQUESTS)||"[]").filter(s=>s.isNew).length},async createQuoteRequest(e){const s=JSON.parse(localStorage.getItem(le.QUOTE_REQUESTS)||"[]"),a=await this.searchProducts(""),r=e.items.map((i,l)=>{const o=Yi(i.partNumber),d=a.find(u=>Yi(u.partNumber)===o||u.partNumber===i.partNumber);return{...i,rowIndex:l,status:"PENDING",approvalStatus:"PENDING",matchedProductId:d?d.id:void 0,matchedProductName:d?d.name:void 0,matchedPrice:d?d.price:void 0,isAvailable:d?d.stock>0:void 0}}),n={...e,items:r,id:`Q-${Math.floor(1e3+Math.random()*9e3)}`,date:new Date().toISOString(),status:"NEW",totalQuotedAmount:0,resultReady:!1,isNew:!0};return s.push(n),localStorage.setItem(le.QUOTE_REQUESTS,JSON.stringify(s)),Nt({userId:e.userId,userName:e.userName,eventType:"QUOTE_REQUEST",description:`    (${e.priceType})`,metadata:{quoteId:n.id,itemCount:n.items.length}}),n},async getAllQuoteRequests(){const e=JSON.parse(localStorage.getItem(le.QUOTE_REQUESTS)||"[]");return e.length===0?f1:e},async updateQuoteRequest(e){const s=JSON.parse(localStorage.getItem(le.QUOTE_REQUESTS)||"[]"),a=s.findIndex(r=>r.id===e.id);a!==-1&&(s[a]=e,localStorage.setItem(le.QUOTE_REQUESTS,JSON.stringify(s)))},async finalizeQuoteRequest(e,s,a){const r=JSON.parse(localStorage.getItem(le.QUOTE_REQUESTS)||"[]"),n=r.findIndex(g=>g.id===e);if(n===-1)throw new Error("Quote request not found");const i=r[n],l=i.items.filter(g=>g.approvalStatus==="APPROVED"),o=i.items.filter(g=>g.approvalStatus==="MISSING"),d=l.reduce((g,v)=>g+(v.matchedPrice||0)*v.requestedQty,0);let u="APPROVED";l.length===0&&o.length>0?u="REJECTED":o.length>0&&(u="PARTIALLY_APPROVED");const h={...i,status:u,totalQuotedAmount:d,approvedItemsCount:l.length,missingItemsCount:o.length,processedDate:new Date().toISOString(),adminReviewedBy:s,adminReviewedAt:new Date().toISOString(),adminGeneralNote:a,resultReady:!0};for(const g of o)await this.logMissingProduct(i.userId,g.partNumber,i.userName,"QUOTE",i.id);r[n]=h,localStorage.setItem(le.QUOTE_REQUESTS,JSON.stringify(r)),fr(i.userId,"QUOTE_PROCESSED","   ",`       ${i.id}.     .`);const f=JSON.parse(localStorage.getItem(le.USERS)||"[]"),x=f.findIndex(g=>g.id===i.userId);if(x!==-1){const g=f[x];g.hasUnreadQuotes=!0,Ai(g)}return Nt({userId:"super-admin",userName:s,role:"SUPER_ADMIN",eventType:"QUOTE_REVIEWED",description:`    #${i.id}`,metadata:{quoteId:i.id,approved:l.length,missing:o.length,total:d}}),h},async addBranch(e,s){await $t(100);const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r===-1)throw new Error("User not found");return a[r].branches.push({...s,id:crypto.randomUUID()}),localStorage.setItem(le.PROFILES,JSON.stringify(a)),a[r].branches},async deleteBranch(e,s){const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r===-1)throw new Error("User not found");return a[r].branches=a[r].branches.filter(n=>n.id!==s),localStorage.setItem(le.PROFILES,JSON.stringify(a)),a[r].branches},async updateCustomerProfile(e,s){await $t(200);const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r===-1)throw new Error("User not found");return s.companyName!==void 0&&(a[r].companyName=s.companyName),s.crNumber!==void 0&&(a[r].crNumber=s.crNumber),s.taxNumber!==void 0&&(a[r].taxNumber=s.taxNumber),s.nationalAddress!==void 0&&(a[r].nationalAddress=s.nationalAddress),s.city!==void 0&&(a[r].city=s.city),s.region!==void 0&&(a[r].region=s.region),s.phone!==void 0&&(a[r].phone=s.phone),localStorage.setItem(le.PROFILES,JSON.stringify(a)),a[r]},async addEmployee(e,s){await $t(100);const a=JSON.parse(localStorage.getItem(le.USERS)||"[]");if(a.find(l=>l.phone===s.phone))throw new Error("    ");if(!s.phone||!s.name)throw new Error("Missing required employee fields");const r=crypto.randomUUID(),n=gte(),i={id:r,clientId:s.phone,name:s.name,email:`${s.phone}@employee.com`,phone:s.phone,role:"CUSTOMER_STAFF",parentId:e,businessId:e,activationCode:n,isActive:!0,branchId:s.branchId,employeeRole:s.employeeRole||Tn.BUYER,searchLimit:50,searchUsed:0,lastSearchDate:new Date().toISOString().split("T")[0],hasUnreadOrders:!1,status:"ACTIVE"};return a.push(i),localStorage.setItem(le.USERS,JSON.stringify(a)),{user:i,activationCode:n}},async toggleEmployeeStatus(e){const s=JSON.parse(localStorage.getItem(le.USERS)||"[]"),a=s.findIndex(r=>r.id===e);if(a>=0)return s[a].isActive=!s[a].isActive,s[a].status=s[a].isActive?"ACTIVE":"SUSPENDED",localStorage.setItem(le.USERS,JSON.stringify(s)),s[a];throw new Error("Employee not found")},async deleteEmployee(e){const a=JSON.parse(localStorage.getItem(le.USERS)||"[]").filter(r=>r.id!==e);localStorage.setItem(le.USERS,JSON.stringify(a))},async changePassword(e,s,a){const r=JSON.parse(localStorage.getItem(le.USERS)||"[]"),n=r.findIndex(l=>l.id===e);if(n===-1)return{success:!1,message:"  "};const i=r[n];return i.password!==s?{success:!1,message:"    "}:!a||a.length<4?{success:!1,message:"      4   "}:(r[n].password=a,localStorage.setItem(le.USERS,JSON.stringify(r)),Nt({userId:e,userName:i.name,role:i.role,eventType:"PASSWORD_CHANGED",description:"    "}),this.invalidateSessionTokens(e),{success:!0,message:"    "})},async adminResetPassword(e,s,a){const r=JSON.parse(localStorage.getItem(le.USERS)||"[]"),n=r.find(o=>o.id===e),i=r.findIndex(o=>o.id===s);if(!n||n.role!=="SUPER_ADMIN"&&n.role!=="CUSTOMER_OWNER")return{success:!1,message:"      "};if(i===-1)return{success:!1,message:"   "};if(!a||a.length<4)return{success:!1,message:"      4   "};const l=r[i];return r[i].password=a,localStorage.setItem(le.USERS,JSON.stringify(r)),Nt({userId:e,userName:n.name,role:n.role,eventType:"PASSWORD_RESET",description:`     : ${l.name}`,metadata:{targetUserId:s,targetUserName:l.name}}),fr(s,"SYSTEM","    ","         .      ."),this.invalidateSessionTokens(s),{success:!0,message:"     "}},storeSessionToken(e,s){const a=JSON.parse(localStorage.getItem("sini_car_session_tokens")||"{}");a[e]||(a[e]=[]),a[e]=[...a[e].slice(-4),s],localStorage.setItem("sini_car_session_tokens",JSON.stringify(a))},validateSessionToken(e,s){var r;return((r=JSON.parse(localStorage.getItem("sini_car_session_tokens")||"{}")[e])==null?void 0:r.includes(s))||!1},invalidateSessionTokens(e){const s=JSON.parse(localStorage.getItem("sini_car_session_tokens")||"{}");delete s[e],localStorage.setItem("sini_car_session_tokens",JSON.stringify(s))},async getUserById(e){return JSON.parse(localStorage.getItem(le.USERS)||"[]").find(a=>a.id===e)||null},async getEmployees(e){return JSON.parse(localStorage.getItem(le.USERS)||"[]").filter(a=>a.parentId===e&&a.role==="CUSTOMER_STAFF")},async importProductsFromOnyxExcel(e,s){const a=d=>{if(d==null||d==="")return null;const u=typeof d=="number"?d:parseFloat(String(d).replace(/,/g,""));return isNaN(u)?null:u},r=()=>`P-${Date.now()}-${Math.floor(Math.random()*1e4)}`,n=s?this.getExcelColumnPresets().find(d=>d.id===s):this.getDefaultExcelColumnPreset(),i=d=>{if(!n)return{partNumber:" ",name:" ",brand:" ",qtyTotal:"",priceWholesale:" ",priceRetail:" ",priceWholeWholesale:"  ",priceEcommerce:"  ",qtyStore103:"    103",qtyStore105:"    105",rack103:"  103",rack105:"  105",carName:"  ",description:" ",manufacturerPartNumber:" ",globalCategory:"  ",modelYear:"  ",quality:""}[d]||d;const u=n.mappings.find(h=>h.internalField===d&&h.isEnabled);return(u==null?void 0:u.excelHeader)||d},l=d=>{if(!n)return;const u=n.mappings.find(h=>h.internalField===d);return u==null?void 0:u.defaultValue},o=d=>{if(!n)return!0;const u=n.mappings.find(h=>h.internalField===d);return(u==null?void 0:u.isEnabled)??!1};return new Promise((d,u)=>{const h=new FileReader;h.onload=async f=>{var x,g,v,b,y,j,w,A,O,C,E,S;try{const D=new Uint8Array((x=f.target)==null?void 0:x.result),M=ad(D,{type:"array"}),U=M.SheetNames[0],I=M.Sheets[U],k=Ea.sheet_to_json(I),z=JSON.parse(localStorage.getItem(le.PRODUCTS)||"[]");let _=0,q=0,L=0;const Q=[];for(let X=0;X<k.length;X++){const W=k[X],ee=X+2,V=i("partNumber"),P=i("name"),Y=((g=W[V])==null?void 0:g.toString().trim())||l("partNumber"),J=((v=W[P])==null?void 0:v.toString().trim())||l("name");if(!Y){L++;continue}if(!J){Q.push(` ${ee}:      ${Y}`),L++;continue}const K={id:r(),partNumber:Y,name:J,priceRetail:o("priceRetail")?a(W[i("priceRetail")])??a(l("priceRetail")):null,priceWholesale:o("priceWholesale")?a(W[i("priceWholesale")])??a(l("priceWholesale")):null,priceWholeWholesale:o("priceWholeWholesale")?a(W[i("priceWholeWholesale")])??a(l("priceWholeWholesale")):null,priceEcommerce:o("priceEcommerce")?a(W[i("priceEcommerce")])??a(l("priceEcommerce")):null,qtyStore103:o("qtyStore103")?a(W[i("qtyStore103")])??a(l("qtyStore103")):null,qtyStore105:o("qtyStore105")?a(W[i("qtyStore105")])??a(l("qtyStore105")):null,qtyTotal:o("qtyTotal")?a(W[i("qtyTotal")])??a(l("qtyTotal")):0,price:a(W[i("priceWholesale")])||a(W[i("priceRetail")])||0,stock:a(W[i("qtyTotal")])||0,brand:o("brand")?((b=W[i("brand")])==null?void 0:b.toString().trim())||l("brand"):void 0,description:o("description")?((y=W[i("description")])==null?void 0:y.toString().trim())||l("description"):void 0,carName:o("carName")?((j=W[i("carName")])==null?void 0:j.toString().trim())||l("carName"):null,globalCategory:o("globalCategory")?((w=W[i("globalCategory")])==null?void 0:w.toString().trim())||l("globalCategory"):null,modelYear:o("modelYear")?((A=W[i("modelYear")])==null?void 0:A.toString().trim())||l("modelYear"):null,quality:o("quality")?((O=W[i("quality")])==null?void 0:O.toString().trim())||l("quality"):null,manufacturerPartNumber:o("manufacturerPartNumber")?((C=W[i("manufacturerPartNumber")])==null?void 0:C.toString().trim())||l("manufacturerPartNumber"):null,rack103:o("rack103")?((E=W[i("rack103")])==null?void 0:E.toString().trim())||l("rack103"):null,rack105:o("rack105")?((S=W[i("rack105")])==null?void 0:S.toString().trim())||l("rack105"):null,createdAt:new Date().toISOString()},se=z.findIndex(G=>G.partNumber===Y);se!==-1?(z[se]={...z[se],...K,id:z[se].id,createdAt:z[se].createdAt,updatedAt:new Date().toISOString()},q++):(z.push(K),_++)}localStorage.setItem(le.PRODUCTS,JSON.stringify(z)),d({imported:_,updated:q,skipped:L,errors:Q})}catch(D){u(new Error(`   : ${D.message}`))}},h.onerror=()=>u(new Error("   ")),h.readAsArrayBuffer(e)})},async getProducts(){const e=localStorage.getItem(le.PRODUCTS);return e?JSON.parse(e):(localStorage.setItem(le.PRODUCTS,JSON.stringify(Cl)),Cl)},async addProduct(e){const s=await this.getProducts(),a={...e,id:`P-${Date.now()}-${Math.floor(Math.random()*1e4)}`,createdAt:new Date().toISOString()};return s.push(a),localStorage.setItem(le.PRODUCTS,JSON.stringify(s)),a},async updateProduct(e,s){const a=await this.getProducts(),r=a.findIndex(n=>n.id===e);if(r===-1)throw new Error("  ");return a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(le.PRODUCTS,JSON.stringify(a)),a[r]},async deleteProduct(e){const a=(await this.getProducts()).filter(r=>r.id!==e);localStorage.setItem(le.PRODUCTS,JSON.stringify(a))},async bulkUpdateProductVisibility(e,s){const a=await this.getProducts();let r=0;const n=a.map(i=>e.includes(i.id)?(r++,{...i,useVisibilityRuleForQty:s,updatedAt:new Date().toISOString()}):i);return localStorage.setItem(le.PRODUCTS,JSON.stringify(n)),r},generateOnyxExcelTemplate(){const e=[" "," "," "," ","  ","  ","    103","    105",""],s=Ea.book_new();Ea.book_append_sheet(s,Ea.aoa_to_sheet([e]),"Products"),rd(s,"__.xlsx")},markOrdersAsSeen(){const s=JSON.parse(localStorage.getItem(le.ORDERS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(le.ORDERS,JSON.stringify(s))},markAccountRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(le.ACCOUNT_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(le.ACCOUNT_REQUESTS,JSON.stringify(s))},markQuoteRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(le.QUOTE_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(le.QUOTE_REQUESTS,JSON.stringify(s))},markImportRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(le.IMPORT_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(le.IMPORT_REQUESTS,JSON.stringify(s))},markMissingRequestsAsSeen(){const s=JSON.parse(localStorage.getItem(le.MISSING_REQUESTS)||"[]").map(a=>({...a,isNew:!1}));localStorage.setItem(le.MISSING_REQUESTS,JSON.stringify(s))},getNewItemCounts(){const e=JSON.parse(localStorage.getItem(le.ORDERS)||"[]"),s=JSON.parse(localStorage.getItem(le.ACCOUNT_REQUESTS)||"[]"),a=JSON.parse(localStorage.getItem(le.QUOTE_REQUESTS)||"[]"),r=JSON.parse(localStorage.getItem(le.IMPORT_REQUESTS)||"[]"),n=JSON.parse(localStorage.getItem(le.MISSING_REQUESTS)||"[]");return{orders:e.filter(i=>i.isNew===!0).length,accounts:s.filter(i=>i.isNew===!0).length,quotes:a.filter(i=>i.isNew===!0).length,imports:r.filter(i=>i.isNew===!0).length,missing:n.filter(i=>i.isNew===!0).length}},getDefaultAdminUsers(){return[{id:"admin-1",fullName:"  ",username:"admin",phone:"0500000001",email:"admin@sinicar.com",password:"admin123",roleId:"role-super-admin",isActive:!0,lastLoginAt:new Date().toISOString(),createdAt:new Date(Date.now()-2160*60*60*1e3).toISOString(),extendedRole:"ADMIN",accountStatus:"APPROVED",completionPercent:100,whatsapp:"+966500000001",clientCode:"ADM-001"},{id:"admin-2",fullName:"  ",username:"sales_manager",phone:"0500000002",email:"sales@sinicar.com",password:"sales123",roleId:"role-sales-manager",isActive:!0,lastLoginAt:new Date(Date.now()-2880*60*1e3).toISOString(),createdAt:new Date(Date.now()-1440*60*60*1e3).toISOString(),extendedRole:"EMPLOYEE",accountStatus:"APPROVED",completionPercent:85,whatsapp:"+966500000002",clientCode:"EMP-002"},{id:"admin-3",fullName:"  ",username:"sales_agent",phone:"0500000003",password:"agent123",roleId:"role-sales-agent",isActive:!0,createdAt:new Date(Date.now()-1080*60*60*1e3).toISOString(),extendedRole:"EMPLOYEE",accountStatus:"APPROVED",completionPercent:70,whatsapp:"+966500000003"},{id:"admin-4",fullName:" ",username:"viewer",phone:"0500000004",password:"viewer123",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-720*60*60*1e3).toISOString(),extendedRole:"EMPLOYEE",accountStatus:"BLOCKED",completionPercent:50},{id:"customer-1",fullName:" ",username:"customer1",phone:"0550000001",email:"customer1@example.com",password:"customer123",roleId:"role-viewer",isActive:!0,createdAt:new Date(Date.now()-14400*60*1e3).toISOString(),extendedRole:"CUSTOMER",accountStatus:"APPROVED",completionPercent:90,whatsapp:"+966550000001",clientCode:"C-10001",isCustomer:!0},{id:"customer-2",fullName:" ",username:"customer2",phone:"0550000002",password:"customer123",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-2880*60*1e3).toISOString(),extendedRole:"CUSTOMER",accountStatus:"PENDING",completionPercent:40,whatsapp:"+966550000002",clientCode:"C-10002",isCustomer:!0},{id:"supplier-1",clientId:"SL-20001",fullName:"  ",name:"  ",username:"supplier1",phone:"0560000001",email:"supplier1@alamal.com",password:"supplier123",role:"CUSTOMER_OWNER",roleId:"role-viewer",isActive:!0,createdAt:new Date(Date.now()-480*60*60*1e3).toISOString(),extendedRole:"SUPPLIER_LOCAL",accountStatus:"APPROVED",completionPercent:95,whatsapp:"+966560000001",clientCode:"SL-20001",isSupplier:!0,searchLimit:100,searchUsed:0},{id:"supplier-2",clientId:"SI-30001",fullName:" ",name:" ",username:"guangzhou_supplier",phone:"+8613800000001",email:"supplier@guangzhou.cn",password:"supplier123",role:"CUSTOMER_OWNER",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-7200*60*1e3).toISOString(),extendedRole:"SUPPLIER_INTERNATIONAL",accountStatus:"PENDING",completionPercent:60,whatsapp:"+8613800000001",clientCode:"SI-30001",isSupplier:!0,searchLimit:100,searchUsed:0},{id:"marketer-1",fullName:" ",username:"marketer1",phone:"0570000001",password:"marketer123",roleId:"role-viewer",isActive:!0,createdAt:new Date(Date.now()-360*60*60*1e3).toISOString(),extendedRole:"MARKETER",accountStatus:"APPROVED",completionPercent:80,whatsapp:"+966570000001",clientCode:"M-40001"},{id:"marketer-2",fullName:" ",username:"marketer2",phone:"0570000002",password:"marketer123",roleId:"role-viewer",isActive:!1,createdAt:new Date(Date.now()-1440*60*1e3).toISOString(),extendedRole:"MARKETER",accountStatus:"REJECTED",completionPercent:30,whatsapp:"+966570000002",clientCode:"M-40002"}]},async getAdminUsers(){let e=JSON.parse(localStorage.getItem(le.ADMIN_USERS)||"null");e||(e=this.getDefaultAdminUsers(),localStorage.setItem(le.ADMIN_USERS,JSON.stringify(e)));let s=!1;return e=e.map(a=>{const r={...a};return r.extendedRole||(r.extendedRole="EMPLOYEE",s=!0),r.accountStatus||(r.accountStatus=r.isActive?"APPROVED":"PENDING",s=!0),r.completionPercent===void 0&&(r.completionPercent=50,s=!0),r}),s&&localStorage.setItem(le.ADMIN_USERS,JSON.stringify(e)),e},async createAdminUser(e){const s=await this.getAdminUsers();if(s.some(n=>n.username===e.username))throw new Error("   ");if(!e.password||e.password.trim()==="")throw new Error("  ");const a=n=>{const i=Date.now().toString(36).slice(-4).toUpperCase();switch(n){case"CUSTOMER":return`C-${i}`;case"SUPPLIER_LOCAL":return`SL-${i}`;case"SUPPLIER_INTERNATIONAL":return`SI-${i}`;case"MARKETER":return`M-${i}`;case"ADMIN":return`ADM-${i}`;case"EMPLOYEE":return`EMP-${i}`;default:return`U-${i}`}},r={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString(),extendedRole:e.extendedRole||"EMPLOYEE",accountStatus:e.accountStatus||"PENDING",completionPercent:e.completionPercent??50,whatsapp:e.whatsapp||e.phone,clientCode:e.clientCode||a(e.extendedRole)};return s.push(r),localStorage.setItem(le.ADMIN_USERS,JSON.stringify(s)),Nt({userId:"system",userName:"",eventType:"OTHER",description:`   : ${r.fullName} (${r.username})`,metadata:{adminUserId:r.id,action:"create_admin_user"}}),r},async updateAdminUser(e,s){const a=await this.getAdminUsers(),r=a.findIndex(n=>n.id===e);if(r===-1)return null;if(s.username&&s.username!==a[r].username&&a.some(n=>n.username===s.username&&n.id!==e))throw new Error("   ");return a[r]={...a[r],...s},localStorage.setItem(le.ADMIN_USERS,JSON.stringify(a)),Nt({userId:"system",userName:"",eventType:"OTHER",description:`   : ${a[r].fullName}`,metadata:{adminUserId:e,action:"update_admin_user",updates:s}}),a[r]},async resetAdminUserPassword(e,s){if(!s||s.trim()==="")throw new Error("   ");const a=await this.getAdminUsers(),r=a.findIndex(n=>n.id===e);return r===-1?!1:(a[r].password=s,localStorage.setItem(le.ADMIN_USERS,JSON.stringify(a)),Nt({userId:"system",userName:"",eventType:"OTHER",description:`     : ${a[r].fullName}`,metadata:{adminUserId:e,action:"reset_admin_password"}}),!0)},async toggleAdminUserStatus(e){const s=await this.getAdminUsers(),a=s.findIndex(n=>n.id===e);if(a===-1)return null;if(s[a].role==="SUPER_ADMIN"&&s[a].isActive&&s.filter(i=>i.role==="SUPER_ADMIN"&&i.isActive).length<=1)throw new Error("      ");s[a].isActive=!s[a].isActive,localStorage.setItem(le.ADMIN_USERS,JSON.stringify(s));const r=s[a].isActive?"":"";return Nt({userId:"system",userName:"",eventType:s[a].isActive?"USER_REACTIVATED":"USER_SUSPENDED",description:` ${r} : ${s[a].fullName}`,metadata:{adminUserId:e,action:"toggle_admin_user_status"}}),s[a]},async approveAdminUser(e){const s=await this.getAdminUsers(),a=s.findIndex(r=>r.id===e);return a===-1?null:(s[a].accountStatus="APPROVED",s[a].isActive=!0,localStorage.setItem(le.ADMIN_USERS,JSON.stringify(s)),Nt({userId:"system",userName:"",eventType:"USER_APPROVED",description:`   : ${s[a].fullName}`,metadata:{adminUserId:e,action:"approve_admin_user"}}),s[a])},async rejectAdminUser(e){const s=await this.getAdminUsers(),a=s.findIndex(r=>r.id===e);return a===-1?null:(s[a].accountStatus="REJECTED",s[a].isActive=!1,localStorage.setItem(le.ADMIN_USERS,JSON.stringify(s)),Nt({userId:"system",userName:"",eventType:"USER_REJECTED",description:`   : ${s[a].fullName}`,metadata:{adminUserId:e,action:"reject_admin_user"}}),s[a])},async blockAdminUser(e){const s=await this.getAdminUsers(),a=s.findIndex(r=>r.id===e);if(a===-1)return null;if(s[a].roleId==="role-super-admin")throw new Error("    ");return s[a].accountStatus="BLOCKED",s[a].isActive=!1,localStorage.setItem(le.ADMIN_USERS,JSON.stringify(s)),Nt({userId:"system",userName:"",eventType:"USER_SUSPENDED",description:`   : ${s[a].fullName}`,metadata:{adminUserId:e,action:"block_admin_user"}}),s[a]},async deleteAdminUser(e){const s=await this.getAdminUsers(),a=s.find(n=>n.id===e);if(!a)return!1;if(a.roleId==="role-super-admin"&&s.filter(i=>i.roleId==="role-super-admin").length<=1)throw new Error("     ");const r=s.filter(n=>n.id!==e);return localStorage.setItem(le.ADMIN_USERS,JSON.stringify(r)),Nt({userId:"system",userName:"",eventType:"OTHER",description:`  : ${a.fullName} (${a.username})`,metadata:{adminUserId:e,action:"delete_admin_user"}}),!0},async getAdminUserById(e){return(await this.getAdminUsers()).find(a=>a.id===e)||null},getDefaultRoles(){const e=["dashboard","products","customers","customer_requests","account_requests","quotes","orders","imports","missing","crm","activity_log","notifications","settings_general","settings_status_labels","settings_api","settings_backup","settings_security","users","roles","export_center","content_management","other"],s=["view","create","edit","delete","approve","reject","export","import","configure","manage_status","manage_users","manage_roles","run_backup","manage_api","other"],a=e.map(l=>({resource:l,actions:[...s]})),r=["dashboard","products","customers","customer_requests","quotes","orders","imports","missing","crm","notifications"],n=["view","create","edit","approve","reject","export"],i=["view","create","edit"];return[{id:"role-super-admin",name:" ",description:"   ",permissions:a,isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-admin",name:" ",description:"     ",permissions:e.filter(l=>l!=="roles").map(l=>({resource:l,actions:s.filter(o=>o!=="manage_roles")})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-sales-manager",name:" ",description:"   ",permissions:r.map(l=>({resource:l,actions:n})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-sales-agent",name:" ",description:"      ",permissions:r.map(l=>({resource:l,actions:i})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()},{id:"role-viewer",name:" ",description:"    ",permissions:e.map(l=>({resource:l,actions:["view"]})),isSystem:!0,createdAt:new Date(Date.now()-365*24*60*60*1e3).toISOString()}]},async getRoles(){let e=JSON.parse(localStorage.getItem(le.ADMIN_ROLES)||"null");return e||(e=this.getDefaultRoles(),localStorage.setItem(le.ADMIN_ROLES,JSON.stringify(e))),e},async getRoleById(e){return(await this.getRoles()).find(a=>a.id===e)||null},async createRole(e){const s=await this.getRoles();if(s.some(r=>r.name===e.name))throw new Error("   ");const a={...e,id:crypto.randomUUID(),createdAt:new Date().toISOString()};return s.push(a),localStorage.setItem(le.ADMIN_ROLES,JSON.stringify(s)),Nt({userId:"system",userName:"",eventType:"OTHER",description:`   : ${a.name}`,metadata:{roleId:a.id,action:"create_role"}}),a},async updateRole(e,s){const a=await this.getRoles(),r=a.findIndex(n=>n.id===e);if(r===-1)return null;if(s.name&&s.name!==a[r].name&&a.some(n=>n.name===s.name&&n.id!==e))throw new Error("   ");return delete s.isSystem,a[r]={...a[r],...s},localStorage.setItem(le.ADMIN_ROLES,JSON.stringify(a)),Nt({userId:"system",userName:"",eventType:"OTHER",description:`  : ${a[r].name}`,metadata:{roleId:e,action:"update_role",updates:s}}),a[r]},async deleteRole(e){const s=await this.getRoles(),a=s.find(l=>l.id===e);if(!a)return!1;if(a.isSystem)throw new Error("    ");if((await this.getAdminUsers()).filter(l=>l.roleId===e).length>0)throw new Error("        ");const i=s.filter(l=>l.id!==e);return localStorage.setItem(le.ADMIN_ROLES,JSON.stringify(i)),Nt({userId:"system",userName:"",eventType:"OTHER",description:`  : ${a.name}`,metadata:{roleId:e,action:"delete_role"}}),!0},async getUserCountByRole(e){return(await this.getAdminUsers()).filter(a=>a.roleId===e).length},async exportAllData(){return{exportDate:new Date().toISOString(),version:"1.0",data:{products:await this.getProducts(),orders:await this.getOrders(),customers:await this.getCustomersDatabase(),settings:await this.getSettings(),banners:await this.getBanners(),quoteRequests:await this.getQuoteRequests(),accountRequests:await this.getAccountRequests(),notifications:JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]"),activityLogs:JSON.parse(localStorage.getItem(le.ACTIVITY_LOGS)||"[]")}}},async resetAllData(){Object.values(le).forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem(le.PRODUCTS,JSON.stringify([])),localStorage.setItem(le.ORDERS,JSON.stringify([])),localStorage.setItem(le.PROFILES,JSON.stringify([])),localStorage.setItem(le.QUOTE_REQUESTS,JSON.stringify([])),localStorage.setItem(le.ACCOUNT_REQUESTS,JSON.stringify([])),localStorage.setItem(le.ACTIVITY_LOGS,JSON.stringify([])),localStorage.setItem(le.NOTIFICATIONS,JSON.stringify([])),Nt({userId:"system",userName:"",eventType:"OTHER",description:"     ()",metadata:{action:"reset_all_data"}})},async getAllCampaigns(){try{const e=localStorage.getItem(le.CAMPAIGNS);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading campaigns:",e),[]}},async createCampaign(e){const s=await this.getAllCampaigns(),a={id:`CAMP-${Date.now()}`,title:e.title||"",message:e.message||"",displayType:e.displayType||"POPUP",skippable:e.skippable??!0,contentType:e.contentType||"TEXT",mediaUrl:e.mediaUrl,htmlContent:e.htmlContent,ctaLabel:e.ctaLabel,ctaUrl:e.ctaUrl,audienceType:e.audienceType||"ALL",status:e.status||"DRAFT",priority:e.priority||1,createdAt:new Date().toISOString(),startsAt:e.startsAt,expiresAt:e.expiresAt};return s.push(a),localStorage.setItem(le.CAMPAIGNS,JSON.stringify(s)),Nt({userId:"admin",userName:"",eventType:"OTHER",description:`    : ${a.title}`,metadata:{campaignId:a.id,action:"create_campaign"}}),a},async updateCampaign(e,s){const a=await this.getAllCampaigns(),r=a.findIndex(i=>i.id===e);if(r===-1)throw new Error("Campaign not found");const n={...a[r],...s};return a[r]=n,localStorage.setItem(le.CAMPAIGNS,JSON.stringify(a)),n},async updateCampaignStatus(e,s){const a=await this.updateCampaign(e,{status:s});return Nt({userId:"admin",userName:"",eventType:"OTHER",description:`    "${a.title}"  ${s}`,metadata:{campaignId:e,status:s,action:"update_campaign_status"}}),a},async deleteCampaign(e){const s=await this.getAllCampaigns(),a=s.find(n=>n.id===e),r=s.filter(n=>n.id!==e);localStorage.setItem(le.CAMPAIGNS,JSON.stringify(r)),a&&Nt({userId:"admin",userName:"",eventType:"OTHER",description:`   : ${a.title}`,metadata:{campaignId:e,action:"delete_campaign"}})},async dismissCampaignForUser(e,s){try{const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),r=a.findIndex(n=>n.userId===e);if(r!==-1){const n=a[r].dismissedCampaignIds||[];n.includes(s)||(n.push(s),a[r].dismissedCampaignIds=n,localStorage.setItem(le.PROFILES,JSON.stringify(a)))}}catch(a){console.error("Error dismissing campaign:",a)}},async getDismissedCampaignIds(e){try{const a=JSON.parse(localStorage.getItem(le.PROFILES)||"[]").find(r=>r.userId===e);return(a==null?void 0:a.dismissedCampaignIds)||[]}catch(s){return console.error("Error getting dismissed campaigns:",s),[]}},async getActiveCampaignsForUser(e,s){try{const a=await this.getAllCampaigns(),r=await this.getDismissedCampaignIds(e),n=new Date;return a.filter(i=>{if(i.status!=="ACTIVE"||r.includes(i.id)||i.startsAt&&new Date(i.startsAt)>n||i.expiresAt&&new Date(i.expiresAt)<n)return!1;if(i.audienceType==="ALL"||!s)return!0;const o={"  ":"SPARE_PARTS_SHOP","  ":"RENTAL_COMPANY"," ":"MAINTENANCE_CENTER"," ":"INSURANCE_COMPANY"," ":"SALES_REP"}[s];return i.audienceType===o}).sort((i,l)=>l.priority-i.priority)}catch(a){return console.error("Error getting active campaigns:",a),[]}},async getPriceLevels(){try{const e=localStorage.getItem(le.PRICE_LEVELS);if(e)return JSON.parse(e);const s={id:"L1",code:"1",name:" 1 ",description:"  ",isBaseLevel:!0,isActive:!0,sortOrder:1,color:"#2563eb",createdAt:new Date().toISOString()};return localStorage.setItem(le.PRICE_LEVELS,JSON.stringify([s])),[s]}catch(e){return console.error("Error getting price levels:",e),[]}},async savePriceLevels(e){try{localStorage.setItem(le.PRICE_LEVELS,JSON.stringify(e)),Nt({userId:"admin",userName:"",eventType:"OTHER",description:"   ",metadata:{action:"update_price_levels",count:e.length}})}catch(s){throw console.error("Error saving price levels:",s),s}},async addPriceLevel(e){try{const s=await this.getPriceLevels(),a={...e,id:`L${Date.now()}`,createdAt:new Date().toISOString()};return s.push(a),await this.savePriceLevels(s),a}catch(s){throw console.error("Error adding price level:",s),s}},async updatePriceLevel(e,s){try{const a=await this.getPriceLevels(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.savePriceLevels(a),a[r])}catch(a){throw console.error("Error updating price level:",a),a}},async deletePriceLevel(e){try{const s=await this.getPriceLevels(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(await this.savePriceLevels(a),!0)}catch(s){return console.error("Error deleting price level:",s),!1}},async getProductPriceMatrix(){try{const e=localStorage.getItem(le.PRODUCT_PRICE_MATRIX);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting price matrix:",e),[]}},async saveProductPriceMatrix(e){try{localStorage.setItem(le.PRODUCT_PRICE_MATRIX,JSON.stringify(e)),Nt({userId:"admin",userName:"",eventType:"OTHER",description:"   ",metadata:{action:"update_price_matrix",count:e.length}})}catch(s){throw console.error("Error saving price matrix:",s),s}},async addProductPriceEntry(e){try{const s=await this.getProductPriceMatrix(),a={...e,id:`PE${Date.now()}`,createdAt:new Date().toISOString()};return s.push(a),await this.saveProductPriceMatrix(s),a}catch(s){throw console.error("Error adding price entry:",s),s}},async updateProductPriceEntry(e,s){try{const a=await this.getProductPriceMatrix(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveProductPriceMatrix(a),a[r])}catch(a){throw console.error("Error updating price entry:",a),a}},async deleteProductPriceEntry(e){try{const s=await this.getProductPriceMatrix(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(await this.saveProductPriceMatrix(a),!0)}catch(s){return console.error("Error deleting price entry:",s),!1}},async getProductPriceForLevel(e,s){try{const r=(await this.getProductPriceMatrix()).find(n=>n.productId===e&&n.priceLevelId===s);return r?r.price:null}catch(a){return console.error("Error getting product price for level:",a),null}},async getGlobalPricingSettings(){try{const e=localStorage.getItem(le.GLOBAL_PRICING_SETTINGS);if(e)return JSON.parse(e);const s=await this.getPriceLevels(),a={defaultPriceLevelId:s.length>0?s[0].id:null,currency:"SAR",currencySymbol:".",roundingMode:"ROUND",roundingDecimals:2,pricePrecedenceOrder:["CUSTOM_RULE","LEVEL_EXPLICIT","LEVEL_DERIVED"],allowNegativeDiscounts:!1,allowFallbackToOtherLevels:!0,fallbackLevelId:null,enableVolumeDiscounts:!1,volumeDiscountRules:[],enableTimePromotions:!1,timePromotions:[],showPriceBreakdown:!1,taxRate:15,taxIncluded:!0};return localStorage.setItem(le.GLOBAL_PRICING_SETTINGS,JSON.stringify(a)),a}catch(e){return console.error("Error getting global pricing settings:",e),{defaultPriceLevelId:null,currency:"SAR",currencySymbol:".",roundingMode:"ROUND",roundingDecimals:2,pricePrecedenceOrder:["CUSTOM_RULE","LEVEL_EXPLICIT","LEVEL_DERIVED"],allowNegativeDiscounts:!1,allowFallbackToOtherLevels:!0}}},async saveGlobalPricingSettings(e){try{e.lastModifiedAt=new Date().toISOString(),localStorage.setItem(le.GLOBAL_PRICING_SETTINGS,JSON.stringify(e)),Nt({userId:"admin",userName:"",eventType:"OTHER",description:"    ",metadata:{action:"update_pricing_settings"}})}catch(s){throw console.error("Error saving global pricing settings:",s),s}},async getAllCustomerPricingProfiles(){try{const e=localStorage.getItem(le.CUSTOMER_PRICING_PROFILES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer pricing profiles:",e),[]}},async getCustomerPricingProfile(e){try{return(await this.getAllCustomerPricingProfiles()).find(a=>a.customerId===e)||null}catch(s){return console.error("Error getting customer pricing profile:",s),null}},async upsertCustomerPricingProfile(e){try{const s=await this.getAllCustomerPricingProfiles(),a=s.findIndex(r=>r.customerId===e.customerId);e.lastModifiedAt=new Date().toISOString(),a===-1?s.push(e):s[a]=e,localStorage.setItem(le.CUSTOMER_PRICING_PROFILES,JSON.stringify(s)),Nt({userId:"admin",userName:"",eventType:"OTHER",description:`    : ${e.customerId}`,metadata:{action:"upsert_customer_pricing",customerId:e.customerId}})}catch(s){throw console.error("Error upserting customer pricing profile:",s),s}},async deleteCustomerPricingProfile(e){try{const s=await this.getAllCustomerPricingProfiles(),a=s.filter(r=>r.customerId!==e);return a.length===s.length?!1:(localStorage.setItem(le.CUSTOMER_PRICING_PROFILES,JSON.stringify(a)),!0)}catch(s){return console.error("Error deleting customer pricing profile:",s),!1}},async copyCustomerPricingProfile(e,s){try{const a=await this.getCustomerPricingProfile(e);if(!a)return!1;const r={...a,customerId:s,lastModifiedAt:new Date().toISOString(),notes:`   ${e}`};return await this.upsertCustomerPricingProfile(r),!0}catch(a){return console.error("Error copying customer pricing profile:",a),!1}},async getPricingAuditLog(){try{const e=localStorage.getItem(le.PRICING_AUDIT_LOG);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting pricing audit log:",e),[]}},async addPricingAuditEntry(e){try{const s=await this.getPricingAuditLog(),a={...e,id:`PAL${Date.now()}`,changedAt:new Date().toISOString()};s.unshift(a),s.length>500&&(s.length=500),localStorage.setItem(le.PRICING_AUDIT_LOG,JSON.stringify(s))}catch(s){console.error("Error adding pricing audit entry:",s)}},async bulkImportPriceMatrix(e){try{const s=await this.getProductPriceMatrix();let a=0,r=0;const n=[];for(const i of e){if(!i.productId||!i.priceLevelId||typeof i.price!="number"){n.push(`  : ${JSON.stringify(i)}`);continue}const l=s.findIndex(o=>o.productId===i.productId&&o.priceLevelId===i.priceLevelId);l!==-1?(s[l].price=i.price,s[l].updatedAt=new Date().toISOString(),r++):(s.push({id:`PE${Date.now()}-${Math.random().toString(36).substr(2,5)}`,productId:i.productId,priceLevelId:i.priceLevelId,price:i.price,createdAt:new Date().toISOString()}),a++)}return await this.saveProductPriceMatrix(s),{imported:a,updated:r,errors:n}}catch(s){throw console.error("Error bulk importing price matrix:",s),s}},async exportPriceMatrixForLevel(e){try{const s=await this.getProductPriceMatrix(),a=await this.searchProducts("");return s.filter(n=>n.priceLevelId===e).map(n=>{const i=a.find(l=>l.id===n.productId);return{productId:n.productId,productName:(i==null?void 0:i.name)||" ",partNumber:(i==null?void 0:i.partNumber)||"",price:n.price}})}catch(s){return console.error("Error exporting price matrix:",s),[]}},getDefaultToolConfigs(){return[{toolKey:"PDF_TO_EXCEL",enabled:!0,allowedCustomerTypes:["PARTS_SHOP","RENTAL_COMPANY","INSURANCE_COMPANY","SALES_AGENT","FLEET_CUSTOMER","  ","  "," "," "," "],blockedCustomerIds:[],maxFilesPerDay:10,maxFilesPerMonth:100,logUsageForAnalytics:!0,showInDashboardShortcuts:!0,toolNameAr:" PDF  Excel",toolNameEn:"PDF to Excel Converter",descriptionAr:"  PDF     Excel  ",descriptionEn:"Convert PDF price lists to editable Excel spreadsheets",iconName:"FileSpreadsheet",sortOrder:1},{toolKey:"VIN_EXTRACTOR",enabled:!0,allowedCustomerTypes:["PARTS_SHOP","RENTAL_COMPANY","INSURANCE_COMPANY","MAINTENANCE_CENTER","  ","  "," "," "],blockedCustomerIds:[],maxFilesPerDay:20,maxFilesPerMonth:200,logUsageForAnalytics:!0,showInDashboardShortcuts:!0,toolNameAr:"  ",toolNameEn:"VIN Extractor",descriptionAr:"   (VIN)     ",descriptionEn:"Extract VIN numbers from car images or documents",iconName:"Car",sortOrder:2},{toolKey:"PRICE_COMPARISON",enabled:!0,allowedCustomerTypes:["PARTS_SHOP","RENTAL_COMPANY","INSURANCE_COMPANY","SALES_AGENT","  ","  "," "," "],blockedCustomerIds:[],maxFilesPerDay:5,maxFilesPerMonth:50,logUsageForAnalytics:!0,showInDashboardShortcuts:!0,toolNameAr:" ",toolNameEn:"Price Comparison",descriptionAr:"     ",descriptionEn:"Compare supplier prices and find the best deals",iconName:"Scale",sortOrder:3}]},async getToolConfigs(){try{const e=localStorage.getItem(le.TOOL_CONFIGS);if(!e){const s=this.getDefaultToolConfigs();return localStorage.setItem(le.TOOL_CONFIGS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting tool configs:",e),this.getDefaultToolConfigs()}},async saveToolConfigs(e){try{localStorage.setItem(le.TOOL_CONFIGS,JSON.stringify(e))}catch(s){console.error("Error saving tool configs:",s)}},async getToolConfig(e){return(await this.getToolConfigs()).find(a=>a.toolKey===e)||null},async updateToolConfig(e,s){const a=await this.getToolConfigs(),r=a.findIndex(n=>n.toolKey===e);r!==-1&&(a[r]={...a[r],...s},await this.saveToolConfigs(a))},async getCustomerToolsOverrides(){try{const e=localStorage.getItem(le.CUSTOMER_TOOLS_OVERRIDES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer tools overrides:",e),[]}},async getCustomerToolsOverride(e){return(await this.getCustomerToolsOverrides()).find(a=>a.customerId===e)||null},async saveCustomerToolsOverride(e){try{const s=await this.getCustomerToolsOverrides(),a=s.findIndex(r=>r.customerId===e.customerId);a!==-1?s[a]={...e,updatedAt:new Date().toISOString()}:s.push({...e,updatedAt:new Date().toISOString()}),localStorage.setItem(le.CUSTOMER_TOOLS_OVERRIDES,JSON.stringify(s))}catch(s){console.error("Error saving customer tools override:",s)}},async deleteCustomerToolsOverride(e){try{const a=(await this.getCustomerToolsOverrides()).filter(r=>r.customerId!==e);localStorage.setItem(le.CUSTOMER_TOOLS_OVERRIDES,JSON.stringify(a))}catch(s){console.error("Error deleting customer tools override:",s)}},async getToolUsageRecords(e,s){try{const a=localStorage.getItem(le.TOOL_USAGE_RECORDS);let r=a?JSON.parse(a):[];return e&&(r=r.filter(n=>n.customerId===e)),s&&(r=r.filter(n=>n.toolKey===s)),r.sort((n,i)=>new Date(i.usedAt).getTime()-new Date(n.usedAt).getTime())}catch(a){return console.error("Error getting tool usage records:",a),[]}},async addToolUsageRecord(e){try{const s=await this.getToolUsageRecords(),a={...e,id:`TU${Date.now()}-${Math.random().toString(36).substr(2,5)}`};return s.unshift(a),s.length>1e3&&(s.length=1e3),localStorage.setItem(le.TOOL_USAGE_RECORDS,JSON.stringify(s)),a}catch(s){throw console.error("Error adding tool usage record:",s),s}},async getCustomerToolUsageToday(e,s){const a=new Date().toISOString().split("T")[0];return(await this.getToolUsageRecords(e,s)).filter(n=>n.usedAt.startsWith(a)&&n.success).length},async getCustomerToolUsageThisMonth(e,s){const a=new Date().toISOString().slice(0,7);return(await this.getToolUsageRecords(e,s)).filter(n=>n.usedAt.startsWith(a)&&n.success).length},async getSupplierPriceRecords(e){try{const s=localStorage.getItem(le.SUPPLIER_PRICE_RECORDS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.ownerCustomerId===e)),a.sort((r,n)=>new Date(n.parsedAt).getTime()-new Date(r.parsedAt).getTime())}catch(s){return console.error("Error getting supplier price records:",s),[]}},async saveSupplierPriceRecord(e){try{const s=await this.getSupplierPriceRecords(),a=s.findIndex(r=>r.id===e.id);a!==-1?s[a]=e:s.unshift(e),localStorage.setItem(le.SUPPLIER_PRICE_RECORDS,JSON.stringify(s))}catch(s){console.error("Error saving supplier price record:",s)}},async deleteSupplierPriceRecord(e){try{const a=(await this.getSupplierPriceRecords()).filter(r=>r.id!==e);localStorage.setItem(le.SUPPLIER_PRICE_RECORDS,JSON.stringify(a))}catch(s){console.error("Error deleting supplier price record:",s)}},async getVinExtractionRecords(e){try{const s=localStorage.getItem(le.VIN_EXTRACTIONS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.ownerCustomerId===e)),a.sort((r,n)=>new Date(n.uploadedAt).getTime()-new Date(r.uploadedAt).getTime())}catch(s){return console.error("Error getting VIN extraction records:",s),[]}},async saveVinExtractionRecord(e){try{const s=await this.getVinExtractionRecords(),a=s.findIndex(r=>r.id===e.id);a!==-1?s[a]=e:s.unshift(e),localStorage.setItem(le.VIN_EXTRACTIONS,JSON.stringify(s))}catch(s){console.error("Error saving VIN extraction record:",s)}},async deleteVinExtractionRecord(e){try{const a=(await this.getVinExtractionRecords()).filter(r=>r.id!==e);localStorage.setItem(le.VIN_EXTRACTIONS,JSON.stringify(a))}catch(s){console.error("Error deleting VIN extraction record:",s)}},async getPriceComparisonSessions(e){try{const s=localStorage.getItem(le.PRICE_COMPARISON_SESSIONS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.ownerCustomerId===e)),a.sort((r,n)=>new Date(n.createdAt).getTime()-new Date(r.createdAt).getTime())}catch(s){return console.error("Error getting price comparison sessions:",s),[]}},async savePriceComparisonSession(e){try{const s=await this.getPriceComparisonSessions(),a=s.findIndex(r=>r.id===e.id);a!==-1?s[a]=e:s.unshift(e),localStorage.setItem(le.PRICE_COMPARISON_SESSIONS,JSON.stringify(s))}catch(s){console.error("Error saving price comparison session:",s)}},async deletePriceComparisonSession(e){try{const a=(await this.getPriceComparisonSessions()).filter(r=>r.id!==e);localStorage.setItem(le.PRICE_COMPARISON_SESSIONS,JSON.stringify(a))}catch(s){console.error("Error deleting price comparison session:",s)}},getDefaultSupplierMarketplaceSettings(){return{enabled:!1,selectionMode:"SINI_FIRST_THEN_SUPPLIERS",hideRealSupplierFromCustomer:!0,supplierPriorities:[],defaultMarkupPercent:15,minProfitMargin:5,maxLeadTimeDays:14,autoApproveSupplierItems:!1,showSupplierStockLevel:!1,enableSupplierRating:!1,notifyAdminOnNewSupplierItem:!0}},async getSupplierMarketplaceSettings(){try{const e=localStorage.getItem(le.SUPPLIER_MARKETPLACE_SETTINGS);if(!e){const s=this.getDefaultSupplierMarketplaceSettings();return localStorage.setItem(le.SUPPLIER_MARKETPLACE_SETTINGS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting supplier marketplace settings:",e),this.getDefaultSupplierMarketplaceSettings()}},async saveSupplierMarketplaceSettings(e){try{e.lastModifiedAt=new Date().toISOString(),localStorage.setItem(le.SUPPLIER_MARKETPLACE_SETTINGS,JSON.stringify(e))}catch(s){console.error("Error saving supplier marketplace settings:",s)}},async getSupplierCatalogItems(e){try{const s=localStorage.getItem(le.SUPPLIER_CATALOG_ITEMS);let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.supplierId===e)),a}catch(s){return console.error("Error getting supplier catalog items:",s),[]}},async saveSupplierCatalogItems(e){try{localStorage.setItem(le.SUPPLIER_CATALOG_ITEMS,JSON.stringify(e))}catch(s){console.error("Error saving supplier catalog items:",s)}},async addSupplierCatalogItem(e){try{const s=await this.getSupplierCatalogItems(),a={...e,id:`SCI${Date.now()}-${Math.random().toString(36).substr(2,5)}`,lastUpdatedAt:new Date().toISOString(),isActive:e.isActive??!0};return s.push(a),await this.saveSupplierCatalogItems(s),a}catch(s){throw console.error("Error adding supplier catalog item:",s),s}},async updateSupplierCatalogItem(e,s){try{const a=await this.getSupplierCatalogItems(),r=a.findIndex(n=>n.id===e);r!==-1&&(a[r]={...a[r],...s,lastUpdatedAt:new Date().toISOString()},await this.saveSupplierCatalogItems(a))}catch(a){console.error("Error updating supplier catalog item:",a)}},async deleteSupplierCatalogItem(e){try{const a=(await this.getSupplierCatalogItems()).filter(r=>r.id!==e);await this.saveSupplierCatalogItems(a)}catch(s){console.error("Error deleting supplier catalog item:",s)}},async searchSupplierCatalog(e){const s=await this.getSupplierCatalogItems(),a=e.toUpperCase().replace(/[^A-Z0-9]/g,"");return s.filter(r=>{if(!r.isActive)return!1;const n=r.partNumber.toUpperCase().replace(/[^A-Z0-9]/g,""),i=(r.oemNumber||"").toUpperCase().replace(/[^A-Z0-9]/g,"");return n.includes(a)||i.includes(a)})},async getSupplierProfiles(){try{const e=localStorage.getItem(le.SUPPLIER_PROFILES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting supplier profiles:",e),[]}},async getSupplierProfile(e){return(await this.getSupplierProfiles()).find(a=>a.supplierId===e)||null},async saveSupplierProfile(e){try{const s=await this.getSupplierProfiles(),a=s.findIndex(r=>r.supplierId===e.supplierId);a!==-1?s[a]=e:s.push(e),localStorage.setItem(le.SUPPLIER_PROFILES,JSON.stringify(s))}catch(s){console.error("Error saving supplier profile:",s)}},getDefaultMarketerSettings(){return{enabled:!1,attributionWindowDays:90,defaultCommissionType:"PERCENT",defaultCommissionValue:2,multiAttributionMode:"SINGLE",marketerCanViewCustomerNames:!1,marketerCanViewOrderTotals:!1,marketerCanViewOrderDetails:!1,marketerCanExportData:!1,autoApproveCommissions:!1,autoApproveThreshold:100,minPayoutAmount:500,paymentCycleDays:30,enableTierCommissions:!1,enableCategoryCommissions:!1,showReferralBanner:!1,notifyMarketerOnReferral:!0,notifyMarketerOnCommission:!0,notifyAdminOnNewMarketer:!0,requireMarketerApproval:!0,allowSelfRegistration:!1}},async getMarketerSettings(){try{const e=localStorage.getItem(le.MARKETER_SETTINGS);if(!e){const s=this.getDefaultMarketerSettings();return localStorage.setItem(le.MARKETER_SETTINGS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting marketer settings:",e),this.getDefaultMarketerSettings()}},async saveMarketerSettings(e){try{e.lastModifiedAt=new Date().toISOString(),localStorage.setItem(le.MARKETER_SETTINGS,JSON.stringify(e))}catch(s){console.error("Error saving marketer settings:",s)}},async getMarketers(){try{const e=localStorage.getItem(le.MARKETERS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting marketers:",e),[]}},async saveMarketers(e){try{localStorage.setItem(le.MARKETERS,JSON.stringify(e))}catch(s){console.error("Error saving marketers:",s)}},async getMarketer(e){return(await this.getMarketers()).find(a=>a.id===e)||null},async getMarketerByReferralCode(e){return(await this.getMarketers()).find(a=>a.referralCode.toUpperCase()===e.toUpperCase())||null},async addMarketer(e){try{const s=await this.getMarketers(),a=`${e.name.substring(0,3).toUpperCase()}${Date.now().toString(36).toUpperCase().slice(-4)}`,r=window.location.origin,n={...e,id:`MKT${Date.now()}`,referralCode:a,referralUrl:`${r}/?ref=${a}`,createdAt:new Date().toISOString(),totalReferrals:0,totalEarnings:0,pendingEarnings:0,paidEarnings:0};return s.push(n),await this.saveMarketers(s),n}catch(s){throw console.error("Error adding marketer:",s),s}},async updateMarketer(e,s){try{const a=await this.getMarketers(),r=a.findIndex(n=>n.id===e);r!==-1&&(a[r]={...a[r],...s},await this.saveMarketers(a))}catch(a){console.error("Error updating marketer:",a)}},async deleteMarketer(e){try{const a=(await this.getMarketers()).filter(r=>r.id!==e);await this.saveMarketers(a)}catch(s){console.error("Error deleting marketer:",s)}},async getCustomerReferrals(){try{const e=localStorage.getItem(le.CUSTOMER_REFERRALS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer referrals:",e),[]}},async getCustomerReferralsByCustomerId(e){return(await this.getCustomerReferrals()).filter(a=>a.customerId===e)},async getCustomerReferralsByMarketerId(e){return(await this.getCustomerReferrals()).filter(a=>a.marketerId===e)},async addCustomerReferral(e){try{const s=await this.getCustomerReferrals();s.push(e),localStorage.setItem(le.CUSTOMER_REFERRALS,JSON.stringify(s));const a=await this.getMarketers(),r=a.findIndex(n=>n.id===e.marketerId);r!==-1&&(a[r].totalReferrals=(a[r].totalReferrals||0)+1,await this.saveMarketers(a))}catch(s){console.error("Error adding customer referral:",s)}},async getActiveReferralForCustomer(e){const s=await this.getCustomerReferralsByCustomerId(e),a=new Date;return s.find(r=>r.isActive&&new Date(r.attributionExpiresAt)>a)||null},async getMarketerCommissions(){try{const e=localStorage.getItem(le.MARKETER_COMMISSIONS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting marketer commissions:",e),[]}},async getMarketerCommissionsByMarketerId(e){return(await this.getMarketerCommissions()).filter(a=>a.marketerId===e).sort((a,r)=>new Date(r.calculatedAt).getTime()-new Date(a.calculatedAt).getTime())},async addMarketerCommissionEntry(e){try{const s=await this.getMarketerCommissions(),a={...e,id:`COM${Date.now()}-${Math.random().toString(36).substr(2,5)}`,calculatedAt:new Date().toISOString()};s.push(a),localStorage.setItem(le.MARKETER_COMMISSIONS,JSON.stringify(s));const r=await this.getMarketers(),n=r.findIndex(i=>i.id===e.marketerId);return n!==-1&&(r[n].totalEarnings=(r[n].totalEarnings||0)+e.commissionAmount,r[n].pendingEarnings=(r[n].pendingEarnings||0)+e.commissionAmount,await this.saveMarketers(r)),a}catch(s){throw console.error("Error adding marketer commission entry:",s),s}},async updateMarketerCommissionStatus(e,s,a,r,n){try{const i=await this.getMarketerCommissions(),l=i.findIndex(o=>o.id===e);if(l!==-1){const o=i[l],d=o.status;if(o.status=s,s==="APPROVED")o.approvedAt=new Date().toISOString(),o.approvedBy=a;else if(s==="PAID"){o.paidAt=new Date().toISOString(),o.paidBy=r,o.paymentReference=n;const u=await this.getMarketers(),h=u.findIndex(f=>f.id===o.marketerId);h!==-1&&(u[h].pendingEarnings=(u[h].pendingEarnings||0)-o.commissionAmount,u[h].paidEarnings=(u[h].paidEarnings||0)+o.commissionAmount,u[h].lastPaymentDate=new Date().toISOString(),await this.saveMarketers(u))}localStorage.setItem(le.MARKETER_COMMISSIONS,JSON.stringify(i))}}catch(i){console.error("Error updating marketer commission status:",i)}},async calculateOrderCommission(e,s,a){try{const r=await this.getMarketerSettings();if(!r.enabled)return null;const n=await this.getActiveReferralForCustomer(s);if(!n)return null;const i=await this.getMarketer(n.marketerId);if(!i||!i.active)return null;const l=i.commissionType||r.defaultCommissionType,o=i.commissionValue||r.defaultCommissionValue;let d;return l==="PERCENT"?d=a*(o/100):d=o,await this.addMarketerCommissionEntry({marketerId:i.id,customerId:s,orderId:e,orderTotal:a,commissionAmount:d,commissionType:l,commissionRate:o,status:r.autoApproveCommissions&&d<=(r.autoApproveThreshold||100)?"APPROVED":"PENDING"})}catch(r){return console.error("Error calculating order commission:",r),null}},getDefaultAdSlots(){const e=new Date().toISOString();return[{id:"slot-home-top",slotKey:"HOME_TOP_BANNER",nameAr:"   ",nameEn:"Home Top Banner",descriptionAr:"     ",descriptionEn:"Ad banner at the top of the home page",isEnabled:!0,maxAds:3,selectionMode:"rotate",createdAt:e,updatedAt:e},{id:"slot-dashboard-sidebar",slotKey:"CUSTOMER_DASHBOARD_SIDEBAR",nameAr:"   ",nameEn:"Customer Dashboard Sidebar",descriptionAr:"      ",descriptionEn:"Ads in the customer dashboard sidebar",isEnabled:!0,maxAds:2,selectionMode:"by_priority",createdAt:e,updatedAt:e},{id:"slot-tools-banner",slotKey:"TOOLS_PAGE_BANNER",nameAr:"  ",nameEn:"Tools Page Banner",descriptionAr:"     ",descriptionEn:"Ad banner on the trader tools page",isEnabled:!0,maxAds:1,selectionMode:"by_priority",createdAt:e,updatedAt:e},{id:"slot-products-card",slotKey:"PRODUCTS_PAGE_CARD",nameAr:"  ",nameEn:"Products Page Card",descriptionAr:"       ",descriptionEn:"Ad card appearing within product search results",isEnabled:!0,maxAds:2,selectionMode:"random",createdAt:e,updatedAt:e}]},async getAdvertisers(){try{const e=localStorage.getItem(le.ADVERTISERS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting advertisers:",e),[]}},async saveAdvertisers(e){try{localStorage.setItem(le.ADVERTISERS,JSON.stringify(e))}catch(s){console.error("Error saving advertisers:",s)}},async getAdvertiserById(e){return(await this.getAdvertisers()).find(a=>a.id===e)||null},async createAdvertiser(e){const s=await this.getAdvertisers(),a=new Date().toISOString(),r={...e,id:`adv-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:a,updatedAt:a};return s.push(r),await this.saveAdvertisers(s),r},async updateAdvertiser(e,s){const a=await this.getAdvertisers(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveAdvertisers(a),a[r])},async deleteAdvertiser(e){const s=await this.getAdvertisers(),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.splice(a,1),await this.saveAdvertisers(s),!0)},async getAdCampaigns(){try{const e=localStorage.getItem(le.AD_CAMPAIGNS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting ad campaigns:",e),[]}},async saveAdCampaigns(e){try{localStorage.setItem(le.AD_CAMPAIGNS,JSON.stringify(e))}catch(s){console.error("Error saving ad campaigns:",s)}},async getAdCampaignById(e){return(await this.getAdCampaigns()).find(a=>a.id===e)||null},async createAdCampaign(e){const s=await this.getAdCampaigns(),a=new Date().toISOString(),r={...e,id:`camp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,currentViews:0,currentClicks:0,createdAt:a,updatedAt:a};return s.push(r),await this.saveAdCampaigns(s),r},async updateAdCampaign(e,s){const a=await this.getAdCampaigns(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveAdCampaigns(a),a[r])},async deleteAdCampaign(e){const s=await this.getAdCampaigns(),a=s.findIndex(r=>r.id===e);return a===-1?!1:(s.splice(a,1),await this.saveAdCampaigns(s),!0)},async getAdSlots(){try{const e=localStorage.getItem(le.AD_SLOTS);if(!e){const s=this.getDefaultAdSlots();return localStorage.setItem(le.AD_SLOTS,JSON.stringify(s)),s}return JSON.parse(e)}catch(e){return console.error("Error getting ad slots:",e),this.getDefaultAdSlots()}},async saveAdSlots(e){try{localStorage.setItem(le.AD_SLOTS,JSON.stringify(e))}catch(s){console.error("Error saving ad slots:",s)}},async getAdSlotByKey(e){return(await this.getAdSlots()).find(a=>a.slotKey===e)||null},async createAdSlot(e){const s=await this.getAdSlots(),a=new Date().toISOString(),r={...e,id:`slot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:a,updatedAt:a};return s.push(r),await this.saveAdSlots(s),r},async updateAdSlot(e,s){const a=await this.getAdSlots(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},await this.saveAdSlots(a),a[r])},async getActiveAdsBySlot(e,s){try{const a=await this.getAdSlotByKey(e);if(!a||!a.isEnabled)return[];const r=await this.getAdCampaigns(),n=new Date().toISOString().split("T")[0];let i=r.filter(l=>!(l.status!=="running"||l.startDate>n||l.endDate&&l.endDate<n||!({HOME_TOP_BANNER:["banner_top"],CUSTOMER_DASHBOARD_SIDEBAR:["banner_sidebar"],TOOLS_PAGE_BANNER:["banner_top","banner_sidebar"],PRODUCTS_PAGE_CARD:["card_in_products"]}[e]||[]).includes(l.type)||l.maxViews&&(l.currentViews||0)>=l.maxViews||l.maxClicks&&(l.currentClicks||0)>=l.maxClicks));if(a.selectionMode==="by_priority")i.sort((l,o)=>l.priority-o.priority);else if(a.selectionMode==="random")i=i.sort(()=>Math.random()-.5);else if(a.selectionMode==="rotate"){const l=JSON.parse(localStorage.getItem(le.AD_SLOT_ROTATIONS)||"[]");let o=l.find(u=>u.slotKey===e);o||(o={slotKey:e,currentIndex:0,lastRotatedAt:new Date().toISOString()},l.push(o));const d=o.currentIndex%i.length||0;i=[...i.slice(d),...i.slice(0,d)],o.currentIndex=(o.currentIndex+1)%Math.max(i.length,1),o.lastRotatedAt=new Date().toISOString(),localStorage.setItem(le.AD_SLOT_ROTATIONS,JSON.stringify(l))}return i.slice(0,a.maxAds)}catch(a){return console.error("Error getting active ads by slot:",a),[]}},async recordAdView(e){const s=await this.getAdCampaignById(e);s&&await this.updateAdCampaign(e,{currentViews:(s.currentViews||0)+1})},async recordAdClick(e){const s=await this.getAdCampaignById(e);s&&await this.updateAdCampaign(e,{currentClicks:(s.currentClicks||0)+1})},async getAdvertisingStats(){const e=await this.getAdvertisers(),s=await this.getAdCampaigns();return{totalAdvertisers:e.length,activeAdvertisers:e.filter(a=>a.status==="active").length,totalCampaigns:s.length,runningCampaigns:s.filter(a=>a.status==="running").length,totalViews:s.reduce((a,r)=>a+(r.currentViews||0),0),totalClicks:s.reduce((a,r)=>a+(r.currentClicks||0),0)}},getDefaultInstallmentSettings(){return{enabled:!0,sinicarHasFirstPriority:!0,allowPartialApprovalBySinicar:!0,allowPartialApprovalBySuppliers:!0,autoForwardToSuppliersOnSinicarReject:!1,autoForwardToSuppliersOnSinicarPartialRemainder:!1,onCustomerRejectsSinicarPartial:"forward_to_suppliers",onCustomerRejectsSupplierOffer:"keep_waiting_for_other_suppliers",maxDurationMonths:12,minDurationMonths:1,maxDurationWeeks:52,minDurationWeeks:4,requireDownPayment:!1,minDownPaymentPercent:10,maxDownPaymentPercent:50,minRequestAmount:1e3,maxRequestAmount:5e5,requireCreditCheck:!1,minCreditScoreForApproval:"medium",autoRejectLowCredit:!1,allowedCustomerTypes:[],blockedCustomerIds:[],autoSelectAllSuppliers:!1,defaultSupplierIds:[],maxSuppliersPerRequest:5,requireAdminApprovalForSinicar:!0,autoGeneratePaymentSchedule:!0,defaultPaymentFrequency:"monthly",notifyCustomerOnNewOffer:!0,notifyCustomerOnStatusChange:!0,notifyAdminOnNewRequest:!0,notifyAdminOnCustomerDecision:!0,notifySuppliersOnForward:!0,notifySuppliersOnCustomerDecision:!0,showInstallmentInSidebar:!0,showInstallmentInDashboard:!0,showCreditProfileToCustomer:!1,showPaymentHistoryToCustomer:!0,termsAndConditionsAr:"      ...",termsAndConditionsEn:"Terms and conditions for installment purchases from SINI CAR...",requireTermsAcceptance:!0,overdueGracePeriodDays:7,autoMarkOverdue:!0,notifyOnOverdue:!0}},async getInstallmentSettings(){try{const e=localStorage.getItem(le.INSTALLMENT_SETTINGS);return e?{...this.getDefaultInstallmentSettings(),...JSON.parse(e)}:this.getDefaultInstallmentSettings()}catch(e){return console.error("Error getting installment settings:",e),this.getDefaultInstallmentSettings()}},async updateInstallmentSettings(e){try{const a={...await this.getInstallmentSettings(),...e,lastModifiedAt:new Date().toISOString()};return localStorage.setItem(le.INSTALLMENT_SETTINGS,JSON.stringify(a)),Nt({userId:"admin",userName:"",eventType:"OTHER",description:"    ",metadata:{action:"update_installment_settings"}}),a}catch(s){throw console.error("Error updating installment settings:",s),s}},async getInstallmentRequests(){try{const e=localStorage.getItem(le.INSTALLMENT_REQUESTS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting installment requests:",e),[]}},async getInstallmentRequestById(e){return(await this.getInstallmentRequests()).find(a=>a.id===e)||null},async getInstallmentRequestsByCustomerId(e){return(await this.getInstallmentRequests()).filter(a=>a.customerId===e)},async getInstallmentRequestsByStatus(e){return(await this.getInstallmentRequests()).filter(a=>a.status===e)},async createInstallmentRequest(e){try{if(!(await this.getInstallmentSettings()).enabled)throw new Error("    ");const a=await this.getInstallmentRequests(),r=new Date().toISOString(),n={...e,id:`IR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,status:"PENDING_SINICAR_REVIEW",sinicarDecision:"pending",allowedForSuppliers:!1,createdAt:r,updatedAt:r};return a.push(n),localStorage.setItem(le.INSTALLMENT_REQUESTS,JSON.stringify(a)),Nt({userId:e.customerId,userName:e.customerName||"",eventType:"OTHER",description:`      ${e.totalRequestedValue||0} `,metadata:{action:"create_installment_request",requestId:n.id}}),n}catch(s){throw console.error("Error creating installment request:",s),s}},async updateInstallmentRequest(e,s){try{const a=await this.getInstallmentRequests(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(le.INSTALLMENT_REQUESTS,JSON.stringify(a)),a[r])}catch(a){return console.error("Error updating installment request:",a),null}},async deleteInstallmentRequest(e){try{const s=await this.getInstallmentRequests(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(localStorage.setItem(le.INSTALLMENT_REQUESTS,JSON.stringify(a)),!0)}catch(s){return console.error("Error deleting installment request:",s),!1}},async getInstallmentOffers(){try{const e=localStorage.getItem(le.INSTALLMENT_OFFERS);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting installment offers:",e),[]}},async getInstallmentOfferById(e){return(await this.getInstallmentOffers()).find(a=>a.id===e)||null},async getOffersByRequestId(e){return(await this.getInstallmentOffers()).filter(a=>a.requestId===e)},async createInstallmentOffer(e){try{const s=await this.getInstallmentOffers(),a=new Date().toISOString(),r={...e,id:`IO-${Date.now()}-${Math.floor(Math.random()*1e3)}`,createdAt:a,updatedAt:a};return s.push(r),localStorage.setItem(le.INSTALLMENT_OFFERS,JSON.stringify(s)),Nt({userId:"admin",userName:e.sourceType==="sinicar"?" ":e.supplierName||"",eventType:"OTHER",description:`   ${e.type==="full"?"":""}  ${e.requestId}`,metadata:{action:"create_installment_offer",offerId:r.id,requestId:e.requestId}}),r}catch(s){throw console.error("Error creating installment offer:",s),s}},async updateInstallmentOffer(e,s){try{const a=await this.getInstallmentOffers(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(le.INSTALLMENT_OFFERS,JSON.stringify(a)),a[r])}catch(a){return console.error("Error updating installment offer:",a),null}},async getCustomerCreditProfiles(){try{const e=localStorage.getItem(le.CUSTOMER_CREDIT_PROFILES);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting customer credit profiles:",e),[]}},async getCustomerCreditProfile(e){return(await this.getCustomerCreditProfiles()).find(a=>a.customerId===e)||null},async upsertCustomerCreditProfile(e){try{const s=await this.getCustomerCreditProfiles(),a=s.findIndex(i=>i.customerId===e.customerId),r=new Date().toISOString(),n={customerId:e.customerId,customerName:e.customerName,scoreLevel:e.scoreLevel||"medium",totalInstallmentRequests:e.totalInstallmentRequests||0,totalActiveContracts:e.totalActiveContracts||0,totalOverdueInstallments:e.totalOverdueInstallments||0,totalPaidAmount:e.totalPaidAmount||0,totalRemainingAmount:e.totalRemainingAmount||0,paymentHistoryScore:e.paymentHistoryScore,notes:e.notes,lastUpdated:r};return a===-1?s.push(n):s[a]={...s[a],...n,lastUpdated:r},localStorage.setItem(le.CUSTOMER_CREDIT_PROFILES,JSON.stringify(s)),a===-1?n:s[a]}catch(s){throw console.error("Error upserting customer credit profile:",s),s}},generatePaymentSchedule(e,s,a,r){var o,d;const n=r?new Date(r):new Date;n.setDate(n.getDate()+7);const i=Math.ceil(e/a),l=[];for(let u=0;u<a;u++){const h=new Date(n);s==="monthly"?h.setMonth(h.getMonth()+u):h.setDate(h.getDate()+u*7),l.push({id:`INS-${Date.now()}-${u}`,dueDate:h.toISOString(),amount:u===a-1?e-i*(a-1):i,status:"pending"})}return{frequency:s,numberOfInstallments:a,installmentAmount:i,startDate:((o=l[0])==null?void 0:o.dueDate)||n.toISOString(),endDate:((d=l[l.length-1])==null?void 0:d.dueDate)||n.toISOString(),installments:l}},async recordSinicarDecision(e,s){var o,d,u,h,f,x;const a=await this.getInstallmentSettings(),r=await this.getInstallmentRequestById(e);if(!r)throw new Error("   ");const n=new Date().toISOString();let i={...r},l;if(s.decisionType==="approve_full"){const g=this.generatePaymentSchedule(((o=s.offer)==null?void 0:o.totalApprovedValue)||r.totalRequestedValue||0,r.paymentFrequency,r.requestedDurationMonths||3);l=await this.createInstallmentOffer({requestId:e,sourceType:"sinicar",type:"full",itemsApproved:((d=s.offer)==null?void 0:d.itemsApproved)||r.items.map(v=>({id:`OI-${Date.now()}-${Math.random()}`,offerId:"",requestItemId:v.id,productId:v.productId,productName:v.productName,quantityApproved:v.quantityRequested,unitPriceApproved:v.unitPriceRequested||0})),totalApprovedValue:((u=s.offer)==null?void 0:u.totalApprovedValue)||r.totalRequestedValue||0,schedule:g,status:"WAITING_FOR_CUSTOMER",adminNotes:s.adminNotes}),i.sinicarDecision="approved_full",i.status="WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR",i.reviewedAt=n,i.adminNotes=s.adminNotes}else if(s.decisionType==="approve_partial"){if(!a.allowPartialApprovalBySinicar)throw new Error("     ");const g=this.generatePaymentSchedule(((h=s.offer)==null?void 0:h.totalApprovedValue)||0,r.paymentFrequency,r.requestedDurationMonths||3);l=await this.createInstallmentOffer({requestId:e,sourceType:"sinicar",type:"partial",itemsApproved:((f=s.offer)==null?void 0:f.itemsApproved)||[],totalApprovedValue:((x=s.offer)==null?void 0:x.totalApprovedValue)||0,schedule:g,status:"WAITING_FOR_CUSTOMER",adminNotes:s.adminNotes}),i.sinicarDecision="approved_partial",i.status="WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR",i.reviewedAt=n,i.adminNotes=s.adminNotes}else s.decisionType==="reject"&&(i.sinicarDecision="rejected",i.reviewedAt=n,i.adminNotes=s.adminNotes,a.autoForwardToSuppliersOnSinicarReject&&s.forwardToSuppliers!==!1?(i.status="FORWARDED_TO_SUPPLIERS",i.allowedForSuppliers=!0,i.forwardedToSupplierIds=s.supplierIds||[]):i.status="REJECTED_BY_SINICAR");return await this.updateInstallmentRequest(e,i),Nt({userId:"admin",userName:" ",eventType:"OTHER",description:`      ${e}: ${s.decisionType}`,metadata:{action:"sinicar_decision",requestId:e,decision:s.decisionType}}),{request:i,offer:l}},async forwardRequestToSuppliers(e,s){const a=await this.getInstallmentRequestById(e);if(!a)return null;if(a.sinicarDecision==="pending")throw new Error("     ");const r=await this.updateInstallmentRequest(e,{status:"FORWARDED_TO_SUPPLIERS",allowedForSuppliers:!0,forwardedToSupplierIds:s});return Nt({userId:"admin",userName:"",eventType:"OTHER",description:`    ${e}  ${s.length} `,metadata:{action:"forward_to_suppliers",requestId:e,supplierIds:s}}),r},async supplierSubmitOffer(e,s,a,r){const n=await this.getInstallmentSettings(),i=await this.getInstallmentRequestById(e);if(!i)throw new Error("   ");if(!i.allowedForSuppliers)throw new Error("    ");if(r.type==="partial"&&!n.allowPartialApprovalBySuppliers)throw new Error("    ");const l=this.generatePaymentSchedule(r.totalApprovedValue,r.frequency,r.numberOfInstallments),o=await this.createInstallmentOffer({requestId:e,sourceType:"supplier",supplierId:s,supplierName:a,type:r.type,itemsApproved:r.itemsApproved,totalApprovedValue:r.totalApprovedValue,schedule:l,status:"WAITING_FOR_CUSTOMER",notes:r.notes});return await this.updateInstallmentRequest(e,{status:"WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER"}),o},async customerRespondToOffer(e,s){const a=await this.getInstallmentSettings(),r=await this.getInstallmentOfferById(e);if(!r)throw new Error("  ");const n=await this.getInstallmentRequestById(r.requestId);if(!n)throw new Error("   ");if(s==="accept"){await this.updateInstallmentOffer(e,{status:"ACCEPTED_BY_CUSTOMER"}),await this.updateInstallmentRequest(r.requestId,{status:"ACTIVE_CONTRACT",acceptedOfferId:e});const i=await this.getCustomerCreditProfile(n.customerId);return await this.upsertCustomerCreditProfile({customerId:n.customerId,customerName:n.customerName,totalInstallmentRequests:((i==null?void 0:i.totalInstallmentRequests)||0)+1,totalActiveContracts:((i==null?void 0:i.totalActiveContracts)||0)+1,totalRemainingAmount:((i==null?void 0:i.totalRemainingAmount)||0)+r.totalApprovedValue,scoreLevel:(i==null?void 0:i.scoreLevel)||"medium"}),Nt({userId:n.customerId,userName:n.customerName||"",eventType:"OTHER",description:`     ${r.sourceType==="sinicar"?" ":r.supplierName}`,metadata:{action:"customer_accept_offer",offerId:e,requestId:r.requestId}}),{offer:{...r,status:"ACCEPTED_BY_CUSTOMER"},request:{...n,status:"ACTIVE_CONTRACT",acceptedOfferId:e}}}else{await this.updateInstallmentOffer(e,{status:"REJECTED_BY_CUSTOMER"});let i=n.status;r.sourceType==="sinicar"?a.onCustomerRejectsSinicarPartial==="forward_to_suppliers"?(i="FORWARDED_TO_SUPPLIERS",await this.updateInstallmentRequest(r.requestId,{status:i,allowedForSuppliers:!0})):(i="CLOSED",await this.updateInstallmentRequest(r.requestId,{status:i,closedAt:new Date().toISOString(),closedReason:"    "})):a.onCustomerRejectsSupplierOffer==="keep_waiting_for_other_suppliers"?(await this.getOffersByRequestId(r.requestId)).filter(u=>u.id!==e&&u.status==="WAITING_FOR_CUSTOMER").length>0?i="WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER":i="WAITING_FOR_SUPPLIER_OFFERS":(i="CLOSED",await this.updateInstallmentRequest(r.requestId,{status:i,closedAt:new Date().toISOString(),closedReason:"   "})),Nt({userId:n.customerId,userName:n.customerName||"",eventType:"OTHER",description:`     ${r.sourceType==="sinicar"?" ":r.supplierName}`,metadata:{action:"customer_reject_offer",offerId:e,requestId:r.requestId}});const l=await this.getInstallmentRequestById(r.requestId);return{offer:{...r,status:"REJECTED_BY_CUSTOMER"},request:l||n}}},async markInstallmentAsPaid(e,s,a){const r=await this.getInstallmentOfferById(e);if(!r)return null;const n=r.schedule.installments.findIndex(o=>o.id===s);if(n===-1)return null;r.schedule.installments[n]={...r.schedule.installments[n],status:"paid",paidAt:new Date().toISOString(),paymentMethod:a==null?void 0:a.method,paymentReference:a==null?void 0:a.reference};const i=await this.updateInstallmentOffer(e,{schedule:r.schedule}),l=await this.getInstallmentRequestById(r.requestId);if(l){const o=await this.getCustomerCreditProfile(l.customerId),d=r.schedule.installments[n].amount;await this.upsertCustomerCreditProfile({customerId:l.customerId,totalPaidAmount:((o==null?void 0:o.totalPaidAmount)||0)+d,totalRemainingAmount:Math.max(0,((o==null?void 0:o.totalRemainingAmount)||0)-d),scoreLevel:(o==null?void 0:o.scoreLevel)||"medium"})}return i},async getInstallmentStats(){const e=await this.getInstallmentRequests(),s=await this.getInstallmentOffers(),a=e.filter(h=>h.status==="ACTIVE_CONTRACT"),r=e.filter(h=>h.status==="CLOSED");let n=0,i=0;for(const h of s)if(h.status==="ACCEPTED_BY_CUSTOMER")for(const f of h.schedule.installments)f.status==="paid"?n+=f.amount:f.status==="overdue"&&(i+=f.amount);const l=s.filter(h=>h.status==="ACCEPTED_BY_CUSTOMER").length,o=s.length,d={};for(const h of e)d[h.status]=(d[h.status]||0)+1;const u={};for(const h of e){const f=h.createdAt.substring(0,7);u[f]||(u[f]={count:0,value:0}),u[f].count++,u[f].value+=h.totalRequestedValue||0}return{totalRequests:e.length,pendingRequests:e.filter(h=>h.status==="PENDING_SINICAR_REVIEW").length,activeContracts:a.length,closedContracts:r.length,totalRequestedValue:e.reduce((h,f)=>h+(f.totalRequestedValue||0),0),totalApprovedValue:s.filter(h=>h.status==="ACCEPTED_BY_CUSTOMER").reduce((h,f)=>h+f.totalApprovedValue,0),totalPaidAmount:n,totalOverdueAmount:i,avgApprovalRate:o>0?l/o*100:0,avgProcessingDays:3,byStatus:Object.entries(d).map(([h,f])=>({status:h,count:f})),byMonth:Object.entries(u).sort((h,f)=>h[0].localeCompare(f[0])).map(([h,f])=>({month:h,count:f.count,value:f.value}))}},async getInstallmentRequestsForSupplier(e){return(await this.getInstallmentRequests()).filter(a=>{var r,n;return a.allowedForSuppliers&&(((r=a.forwardedToSupplierIds)==null?void 0:r.includes(e))||((n=a.forwardedToSupplierIds)==null?void 0:n.length)===0)})},async closeInstallmentRequest(e,s){return await this.updateInstallmentRequest(e,{status:"CLOSED",closedAt:new Date().toISOString(),closedReason:s})},async cancelInstallmentRequest(e){const s=await this.getInstallmentRequestById(e);if(!s)return null;if(s.status==="ACTIVE_CONTRACT")throw new Error("    ");return await this.updateInstallmentRequest(e,{status:"CANCELLED",closedAt:new Date().toISOString(),closedReason:"   "})},getDefaultOrganizationSettings(){return{enableTeamsForCustomers:!0,enableTeamsForSuppliers:!0,enableTeamsForAdvertisers:!0,enableTeamsForAffiliates:!0,maxCustomerEmployees:10,maxSupplierEmployees:5,maxAdvertiserEmployees:3,maxAffiliateEmployees:3,defaultCustomerManagerPermissions:["cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_prices","cust_manage_cart","org_view_logs"],defaultCustomerStaffPermissions:["cust_create_orders","cust_view_orders","cust_view_prices","cust_manage_cart"],defaultCustomerReadonlyPermissions:["cust_view_orders","cust_view_prices"],defaultSupplierManagerPermissions:["sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics","org_view_logs"],defaultSupplierStaffPermissions:["sup_view_forwarded_requests","sup_submit_offers"],defaultSupplierReadonlyPermissions:["sup_view_forwarded_requests","sup_view_analytics"],defaultAdvertiserManagerPermissions:["adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports","org_view_logs"],defaultAdvertiserStaffPermissions:["adv_view_campaigns","adv_manage_campaigns","adv_view_reports"],defaultAdvertiserReadonlyPermissions:["adv_view_campaigns","adv_view_reports"],defaultAffiliateManagerPermissions:["aff_view_links","aff_manage_links","aff_view_commissions","aff_view_analytics","org_view_logs"],defaultAffiliateStaffPermissions:["aff_view_links","aff_manage_links","aff_view_commissions"],defaultAffiliateReadonlyPermissions:["aff_view_links","aff_view_commissions"],allowCustomPermissionsForCustomers:!0,allowCustomPermissionsForSuppliers:!0,allowCustomPermissionsForAdvertisers:!0,allowCustomPermissionsForAffiliates:!0,trackTeamActivityPerOrganization:!0,activityLogRetentionDays:90,requireEmailVerification:!1,invitationExpiryHours:72}},async getOrganizationSettings(){const e=localStorage.getItem(le.ORGANIZATION_SETTINGS);if(e)return JSON.parse(e);const s=this.getDefaultOrganizationSettings();return localStorage.setItem(le.ORGANIZATION_SETTINGS,JSON.stringify(s)),s},async updateOrganizationSettings(e){const a={...await this.getOrganizationSettings(),...e,lastModifiedAt:new Date().toISOString()};return localStorage.setItem(le.ORGANIZATION_SETTINGS,JSON.stringify(a)),a},async getOrganizations(){const e=localStorage.getItem(le.ORGANIZATIONS);return e?JSON.parse(e):[]},async getOrganizationById(e){return(await this.getOrganizations()).find(a=>a.id===e)||null},async getOrganizationByCustomer(e){return(await this.getOrganizations()).find(a=>a.type==="customer"&&a.customerId===e)||null},async getOrganizationBySupplier(e){return(await this.getOrganizations()).find(a=>a.type==="supplier"&&a.supplierId===e)||null},async getOrganizationByAdvertiser(e){return(await this.getOrganizations()).find(a=>a.type==="advertiser"&&a.advertiserId===e)||null},async getOrganizationByAffiliate(e){return(await this.getOrganizations()).find(a=>a.type==="affiliate"&&a.affiliateId===e)||null},async getOrganizationByOwnerUserId(e){return(await this.getOrganizations()).find(a=>a.ownerUserId===e)||null},async getOrCreateOrganizationForEntity(e,s,a,r){let n=null;if(e==="customer"?n=await this.getOrganizationByCustomer(s):e==="supplier"?n=await this.getOrganizationBySupplier(s):e==="advertiser"?n=await this.getOrganizationByAdvertiser(s):e==="affiliate"&&(n=await this.getOrganizationByAffiliate(s)),n)return n;const i=new Date().toISOString(),l={id:`org_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,name:a,ownerUserId:r,isActive:!0,createdAt:i,updatedAt:i};e==="customer"?l.customerId=s:e==="supplier"?l.supplierId=s:e==="advertiser"?l.advertiserId=s:e==="affiliate"&&(l.affiliateId=s);const o=await this.getOrganizations();return o.push(l),localStorage.setItem(le.ORGANIZATIONS,JSON.stringify(o)),await this.createOrganizationUser(l.id,{userId:r,role:"owner",permissions:[]}),l},async createOrganization(e){const s=new Date().toISOString(),a={...e,id:`org_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:s,updatedAt:s},r=await this.getOrganizations();return r.push(a),localStorage.setItem(le.ORGANIZATIONS,JSON.stringify(r)),a},async updateOrganization(e,s){const a=await this.getOrganizations(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(le.ORGANIZATIONS,JSON.stringify(a)),a[r])},async getOrganizationUsers(e){const s=localStorage.getItem(le.ORGANIZATION_USERS),a=s?JSON.parse(s):[];return e?a.filter(r=>r.organizationId===e):a},async getOrganizationUser(e,s){return(await this.getOrganizationUsers(e)).find(r=>r.userId===s)||null},async getOrganizationUserById(e){return(await this.getOrganizationUsers()).find(a=>a.id===e)||null},async getOrganizationsByUserId(e){const a=(await this.getOrganizationUsers()).filter(n=>n.userId===e&&n.isActive).map(n=>n.organizationId);return(await this.getOrganizations()).filter(n=>a.includes(n.id)||n.ownerUserId===e)},async createOrganizationUser(e,s){const a=new Date().toISOString(),r={id:`orguser_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,organizationId:e,userId:s.userId,role:s.role,permissions:s.permissions,jobTitle:s.jobTitle,department:s.department,isActive:!0,joinedAt:a,createdAt:a,updatedAt:a},n=await this.getOrganizationUsers();return n.push(r),localStorage.setItem(le.ORGANIZATION_USERS,JSON.stringify(n)),await this.logOrganizationActivity(e,s.userId,"team_member_added","team",{newMemberRole:s.role,newMemberUserId:s.userId}),r},async updateOrganizationUser(e,s){const a=await this.getOrganizationUsers(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s,updatedAt:new Date().toISOString()},localStorage.setItem(le.ORGANIZATION_USERS,JSON.stringify(a)),a[r])},async deactivateOrganizationUser(e){return await this.updateOrganizationUser(e,{isActive:!1})},async reactivateOrganizationUser(e){return await this.updateOrganizationUser(e,{isActive:!0})},async removeOrganizationUser(e){const s=await this.getOrganizationUsers(),a=s.filter(r=>r.id!==e);return a.length===s.length?!1:(localStorage.setItem(le.ORGANIZATION_USERS,JSON.stringify(a)),!0)},async getTeamInvitations(e){const s=localStorage.getItem(le.TEAM_INVITATIONS),a=s?JSON.parse(s):[];return e?a.filter(r=>r.organizationId===e):a},async getTeamInvitationByCode(e){return(await this.getTeamInvitations()).find(a=>a.invitationCode===e)||null},async createTeamInvitation(e,s,a){const r=await this.getOrganizationSettings(),n=new Date().toISOString(),i=new Date(Date.now()+r.invitationExpiryHours*60*60*1e3).toISOString(),l={id:`inv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,organizationId:e,invitedByUserId:s,email:a.email,phone:a.phone,name:a.name,role:a.role,permissions:a.permissions,status:"pending",invitationCode:Math.random().toString(36).substr(2,8).toUpperCase(),expiresAt:i,createdAt:n},o=await this.getTeamInvitations();return o.push(l),localStorage.setItem(le.TEAM_INVITATIONS,JSON.stringify(o)),l},async acceptTeamInvitation(e,s){const a=await this.getTeamInvitationByCode(e);if(!a)return{success:!1,message:"   "};if(a.status!=="pending")return{success:!1,message:"    "};if(new Date(a.expiresAt)<new Date)return await this.updateTeamInvitation(a.id,{status:"expired"}),{success:!1,message:"  "};const r=await this.createOrganizationUser(a.organizationId,{userId:s,role:a.role,permissions:a.permissions});return await this.updateTeamInvitation(a.id,{status:"accepted",acceptedAt:new Date().toISOString()}),{success:!0,message:"   ",orgUser:r}},async updateTeamInvitation(e,s){const a=await this.getTeamInvitations(),r=a.findIndex(n=>n.id===e);return r===-1?null:(a[r]={...a[r],...s},localStorage.setItem(le.TEAM_INVITATIONS,JSON.stringify(a)),a[r])},async cancelTeamInvitation(e){return await this.updateTeamInvitation(e,{status:"cancelled"})!==null},async getOrganizationActivityLogs(e,s=100){const a=localStorage.getItem(le.ORGANIZATION_ACTIVITY_LOGS);let r=a?JSON.parse(a):[];return e&&(r=r.filter(n=>n.organizationId===e)),r.sort((n,i)=>new Date(i.createdAt).getTime()-new Date(n.createdAt).getTime()).slice(0,s)},async logOrganizationActivity(e,s,a,r,n){const i=await this.getOrganizationSettings();if(!i.trackTeamActivityPerOrganization)return{id:"",organizationId:e,userId:s,actionType:a,actionCategory:r,description:"",metadata:n,createdAt:new Date().toISOString()};const o=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(x=>x.id===s),d={id:`orglog_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,organizationId:e,userId:s,userName:(o==null?void 0:o.name)||"",actionType:a,actionCategory:r,description:this.getActivityDescription(a,r,n),metadata:n,createdAt:new Date().toISOString()},u=JSON.parse(localStorage.getItem(le.ORGANIZATION_ACTIVITY_LOGS)||"[]");u.unshift(d);const h=new Date;h.setDate(h.getDate()-i.activityLogRetentionDays);const f=u.filter(x=>new Date(x.createdAt)>h);return localStorage.setItem(le.ORGANIZATION_ACTIVITY_LOGS,JSON.stringify(f)),d},getActivityDescription(e,s,a){return{team_member_added:"    ",team_member_removed:"    ",team_member_updated:"    ",order_created:"   ",order_updated:"  ",installment_request_created:"   ",installment_offer_submitted:"   ",campaign_created:"   ",campaign_updated:"   ",offer_submitted:"  ",link_created:"   ",profile_updated:"   "}[e]||e},async hasScopedPermission(e,s,a){const r=await this.getOrganizationUser(s,e);if(!r){const n=await this.getOrganizationById(s);return!!(n&&n.ownerUserId===e)}return r.isActive?r.role==="owner"?!0:r.permissions.includes(a):!1},async getUserScopedPermissions(e,s){const a=await this.getOrganizationById(s);if(a&&a.ownerUserId===e)return this.getAllPermissionKeys();const r=await this.getOrganizationUser(s,e);return!r||!r.isActive?[]:r.role==="owner"?this.getAllPermissionKeys():r.permissions},getAllPermissionKeys(){return["adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports","sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics","cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart","aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"]},getPermissionsByOrganizationType(e){const s=["org_manage_team","org_view_logs","org_view_settings","org_edit_profile"];switch(e){case"customer":return[...s,"cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart"];case"supplier":return[...s,"sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics"];case"advertiser":return[...s,"adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports"];case"affiliate":return[...s,"aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics"];default:return s}},async getDefaultPermissionsForRole(e,s){const a=await this.getOrganizationSettings();if(s==="owner")return this.getPermissionsByOrganizationType(e);switch(e){case"customer":return s==="manager"?a.defaultCustomerManagerPermissions:s==="staff"?a.defaultCustomerStaffPermissions:a.defaultCustomerReadonlyPermissions;case"supplier":return s==="manager"?a.defaultSupplierManagerPermissions:s==="staff"?a.defaultSupplierStaffPermissions:a.defaultSupplierReadonlyPermissions;case"advertiser":return s==="manager"?a.defaultAdvertiserManagerPermissions:s==="staff"?a.defaultAdvertiserStaffPermissions:a.defaultAdvertiserReadonlyPermissions;case"affiliate":return s==="manager"?a.defaultAffiliateManagerPermissions:s==="staff"?a.defaultAffiliateStaffPermissions:a.defaultAffiliateReadonlyPermissions;default:return[]}},async getOrganizationStats(e){const s=await this.getOrganizationUsers(e),a=await this.getTeamInvitations(e),r=await this.getOrganizationActivityLogs(e,100),n=s.filter(u=>u.isActive),i=a.filter(u=>u.status==="pending"),l=new Date;l.setDate(l.getDate()-1);const o=r.filter(u=>new Date(u.createdAt)>l),d={owner:0,manager:0,staff:0,readonly:0};return n.forEach(u=>{d[u.role]++}),{totalMembers:s.length,activeMembers:n.length,pendingInvitations:i.length,recentActivities:o.length,membersByRole:Object.entries(d).map(([u,h])=>({role:u,count:h}))}},async canAddTeamMember(e){const s=await this.getOrganizationById(e);if(!s)return{allowed:!1,reason:"  "};const a=await this.getOrganizationSettings();if(!(s.type==="customer"&&a.enableTeamsForCustomers||s.type==="supplier"&&a.enableTeamsForSuppliers||s.type==="advertiser"&&a.enableTeamsForAdvertisers||s.type==="affiliate"&&a.enableTeamsForAffiliates))return{allowed:!1,reason:"       "};const i=(await this.getOrganizationUsers(e)).filter(o=>o.isActive),l=s.type==="customer"?a.maxCustomerEmployees:s.type==="supplier"?a.maxSupplierEmployees:s.type==="advertiser"?a.maxAdvertiserEmployees:a.maxAffiliateEmployees;return i.length>=l?{allowed:!1,reason:`       (${l})`}:{allowed:!0}},async canManageTeam(e,s){const a=await this.getOrganizationById(s);return a?a.ownerUserId===e?!0:await this.hasScopedPermission(e,s,"org_manage_team"):!1},async getCustomerPortalSettings(){const e=localStorage.getItem("b2b_customer_portal_settings_v1");return e?JSON.parse(e):this.getDefaultCustomerPortalSettings()},async saveCustomerPortalSettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_customer_portal_settings_v1",JSON.stringify(e)),e},getDefaultCustomerPortalSettings(){return{id:"portal-settings-1",design:{themeMode:"light",primaryColor:"#0B1B3A",accentColor:"#C8A04F",backgroundColor:"#f8fafc",sidebarColor:"#0B1B3A",fontFamily:"Cairo",borderRadius:"medium",enableAnimations:!0},dashboardSections:[{id:"hero",key:"HERO_BANNERS",enabled:!0,order:1,title:{ar:" ",en:"Hero Banners",hi:" ",zh:""}},{id:"search",key:"SEARCH_BAR",enabled:!0,order:2,title:{ar:" ",en:"Search Bar",hi:" ",zh:""}},{id:"business-types",key:"BUSINESS_TYPES",enabled:!0,order:3,title:{ar:" ",en:"Who We Serve",hi:"    ",zh:""}},{id:"services",key:"MAIN_SERVICES",enabled:!0,order:4,title:{ar:" ",en:"Our Main Services",hi:"  ",zh:""}},{id:"how-it-works",key:"HOW_IT_WORKS",enabled:!0,order:5,title:{ar:"  ",en:"How It Works",hi:"    ",zh:""}},{id:"why-sinicar",key:"WHY_SINICAR",enabled:!0,order:6,title:{ar:"  ",en:"Why SINI CAR",hi:"  ",zh:"SINI CAR"}},{id:"marketing-cards",key:"MARKETING_CARDS",enabled:!0,order:7,title:{ar:" ",en:"Marketing Cards",hi:" ",zh:""}}],navigationMenu:[{id:"nav-home",key:"HOME",enabled:!0,order:1,label:{ar:"",en:"Home",hi:"",zh:""},icon:"Home",requiresAuth:!1},{id:"nav-orders",key:"ORDERS",enabled:!0,order:2,label:{ar:" ",en:"Order History",hi:" ",zh:""},icon:"ShoppingBag",requiresAuth:!0},{id:"nav-quotes",key:"QUOTE_REQUEST",enabled:!0,order:3,label:{ar:" ",en:"Quote Requests",hi:" ",zh:""},icon:"FileText",requiresAuth:!0},{id:"nav-import",key:"IMPORT_CHINA",enabled:!0,order:4,label:{ar:"  ",en:"Import from China",hi:"  ",zh:""},icon:"Globe",requiresAuth:!0},{id:"nav-tools",key:"TRADER_TOOLS",enabled:!0,order:5,label:{ar:" ",en:"Trader Tools",hi:" ",zh:""},icon:"Wrench",requiresAuth:!0},{id:"nav-org",key:"ORGANIZATION",enabled:!0,order:6,label:{ar:" ",en:"Organization",hi:"",zh:""},icon:"Building2",requiresAuth:!0,requiredPermission:"org_view_dashboard"},{id:"nav-team",key:"TEAM_MANAGEMENT",enabled:!0,order:7,label:{ar:" ",en:"Team Management",hi:" ",zh:""},icon:"Users",requiresAuth:!0,requiredPermission:"org_manage_team"},{id:"nav-history",key:"HISTORY",enabled:!0,order:8,label:{ar:" ",en:"Search History",hi:" ",zh:""},icon:"Clock",requiresAuth:!0},{id:"nav-about",key:"ABOUT",enabled:!0,order:9,label:{ar:" ",en:"About Us",hi:"  ",zh:""},icon:"Info",requiresAuth:!1}],features:{enableSearch:!0,enableCart:!0,enableOrders:!0,enableQuoteRequests:!0,enableImportFromChina:!0,enableVinDecoder:!0,enablePdfToExcel:!0,enablePriceComparison:!0,enableSupplierMarketplace:!0,enableInstallments:!0,enableOrganization:!0,enableTeamManagement:!0,enableMarketingBanners:!0,enableMarketingPopups:!0,enableMarketingCards:!0,enableAnnouncementTicker:!0,enableGuestMode:!0,guestCanSearch:!0,guestCanViewPrices:!1},heroBanners:[{id:"banner-1",enabled:!0,order:1,title:{ar:" ..  ",en:"SINI CAR.. Your Gateway to Warehouse",hi:" ..     ",zh:"SINI CAR.."},subtitle:{ar:"     MG      ",en:"Order Changan & MG parts directly and save waiting time",hi:"      ",zh:"MG"},buttonText:{ar:"  ",en:"Start Ordering Now",hi:"  ",zh:""},buttonUrl:"#search",colorClass:"from-primary-700 to-primary-900"},{id:"banner-2",enabled:!0,order:2,title:{ar:" :   ",en:"New Arrivals: Geely & Haval Parts",hi:" :    ",zh:""},subtitle:{ar:"      H6 ",en:"Comprehensive coverage for new Geely Monjaro and Haval H6 models",hi:"     H6     ",zh:"MonjaroH6"},buttonText:{ar:" ",en:"Browse Parts",hi:"  ",zh:""},buttonUrl:"#search",colorClass:"from-slate-700 to-slate-900"},{id:"banner-3",enabled:!0,order:3,title:{ar:"  ",en:"Special Wholesale Offers",hi:"  ",zh:""},subtitle:{ar:"      ",en:"Special prices for wholesale orders and authorized service centers",hi:"         ",zh:""},buttonText:{ar:" ",en:"Bulk Offers",hi:" ",zh:""},buttonUrl:"#offers",colorClass:"from-secondary-600 to-secondary-800"}],announcements:[{id:"announcement-1",enabled:!0,type:"ticker",content:{ar:"      -      .     5000 .",en:"Welcome to SINI CAR B2B Portal - Your trusted source for Chinese auto parts. Free shipping for orders over 5000 SAR.",hi:"  B2B      -        ",zh:"SINI CAR B2B - "},backgroundColor:"#0f172a",textColor:"#fb923c",dismissible:!1}],infoCards:[{id:"card-1",enabled:!0,order:1,icon:"Shield",title:{ar:"  ",en:"Genuine & Guaranteed Parts",hi:"   ",zh:""},description:{ar:"        .",en:"Authorized distributor for Changan, MG, Geely, and Haval parts.",hi:", ,       ",zh:"MG"},colorClass:"bg-green-50 text-green-600"},{id:"card-2",enabled:!0,order:2,icon:"Truck",title:{ar:"  ",en:"Fast Regional Shipping",hi:"  ",zh:""},description:{ar:"  24       .",en:"24-hour shipping to major cities with refrigerated shipping for remote areas.",hi:"   24   ",zh:"24"},colorClass:"bg-blue-50 text-blue-600"},{id:"card-3",enabled:!0,order:3,icon:"BadgeDollarSign",title:{ar:"  ",en:"Competitive Wholesale Prices",hi:"  ",zh:""},description:{ar:"      .",en:"Smart pricing system based on your purchase volume.",hi:"        ",zh:""},colorClass:"bg-amber-50 text-amber-600"}],lastModifiedAt:new Date().toISOString()}},async resetCustomerPortalSettings(){const e=this.getDefaultCustomerPortalSettings();return localStorage.setItem("b2b_customer_portal_settings_v1",JSON.stringify(e)),e},async getAISettings(){const e=localStorage.getItem("b2b_ai_settings_v1");return e?JSON.parse(e):this.getDefaultAISettings()},async saveAISettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_ai_settings_v1",JSON.stringify(e)),e},getDefaultAISettings(){return{id:"ai-settings-1",enabled:!0,defaultProvider:"openai",providers:[{id:"openai-provider",provider:"openai",displayName:{ar:"OpenAI",en:"OpenAI",hi:"OpenAI",zh:"OpenAI"},enabled:!0,isDefault:!0,model:"gpt-4o-mini",maxTokens:4096,maxRequestsPerMinute:60,maxRequestsPerDay:1e3,supportsChat:!0,supportsImageGeneration:!0,supportsVision:!0,supportsAudio:!1,inputTokenCost:.15,outputTokenCost:.6},{id:"gemini-provider",provider:"gemini",displayName:{ar:"Google Gemini",en:"Google Gemini",hi:"Google Gemini",zh:"Google Gemini"},enabled:!1,isDefault:!1,model:"gemini-2.5-flash",maxTokens:8192,maxRequestsPerMinute:60,maxRequestsPerDay:1500,supportsChat:!0,supportsImageGeneration:!0,supportsVision:!0,supportsAudio:!0,inputTokenCost:.075,outputTokenCost:.3},{id:"anthropic-provider",provider:"anthropic",displayName:{ar:"Anthropic Claude",en:"Anthropic Claude",hi:"Anthropic Claude",zh:"Anthropic Claude"},enabled:!1,isDefault:!1,model:"claude-sonnet-4-5",maxTokens:4096,maxRequestsPerMinute:50,maxRequestsPerDay:500,supportsChat:!0,supportsImageGeneration:!1,supportsVision:!0,supportsAudio:!1,inputTokenCost:3,outputTokenCost:15}],features:{enableAIAssistant:!0,enableAIProductSearch:!0,enableAIPartMatching:!0,enableAIVinDecoding:!0,enableAIPriceAnalysis:!0,enableAITranslation:!0,enableAIOrderAnalysis:!0,enableAICustomerInsights:!0,enableAIReports:!0,enableAIFraudDetection:!1,enableAIInventoryPrediction:!1,enableAIContentGeneration:!0,enableAICampaignOptimization:!1},usageLimits:[{role:"SUPER_ADMIN",dailyRequests:500,monthlyRequests:1e4,maxTokensPerRequest:8192,allowedFeatures:["all"]},{role:"CUSTOMER_OWNER",dailyRequests:100,monthlyRequests:2e3,maxTokensPerRequest:4096,allowedFeatures:["enableAIAssistant","enableAIProductSearch","enableAIPartMatching","enableAIVinDecoding","enableAIPriceAnalysis"]},{role:"CUSTOMER_STAFF",dailyRequests:50,monthlyRequests:1e3,maxTokensPerRequest:2048,allowedFeatures:["enableAIAssistant","enableAIProductSearch"]}],systemPrompts:{customerAssistant:{ar:"      B2B.          .   .",en:"You are an AI assistant for SINI CAR B2B customers. Help customers find spare parts, prices, and order status. Be polite and helpful.",hi:"   B2B           ,        ",zh:"SINI CAR B2BAI"},productSearch:{ar:"        .         MG  .",en:"Help the user search for Chinese car spare parts. Use part numbers and brand names like Changan, MG, Geely, Haval.",hi:"          , , ,          ",zh:"MG"},partMatching:{ar:"      VIN   .      .",en:"Match parts based on VIN number or vehicle description. Identify parts compatible with the model and year.",hi:"VIN                     ",zh:"VIN"}},enableContentModeration:!0,blockedTopics:["weapons","drugs","violence","politics"],maxConversationLength:50,trackUsage:!0,trackCosts:!0,lastModifiedAt:new Date().toISOString()}},async resetAISettings(){const e=this.getDefaultAISettings();return localStorage.setItem("b2b_ai_settings_v1",JSON.stringify(e)),e},async getAIConversations(e){const s=localStorage.getItem(`b2b_ai_conversations_${e}`);return s?JSON.parse(s):[]},async saveAIConversation(e){const s=await this.getAIConversations(e.userId),a=s.findIndex(n=>n.id===e.id);a>=0?s[a]=e:s.unshift(e);const r=s.slice(0,50);return localStorage.setItem(`b2b_ai_conversations_${e.userId}`,JSON.stringify(r)),e},async sendAIMessage(e){await new Promise(o=>setTimeout(o,800+Math.random()*700));const{message:s,language:a="ar"}=e,r={search:{ar:"      .             .",en:"I can help you search for auto parts. What type of part are you looking for? Please tell me the vehicle type or part number."},order:{ar:"      .          .",en:"To check your order status, please provide your order number. You can find it in your email or on the My Orders page."},price:{ar:"   .          .",en:"I will help you compare prices. Tell me the part name or number and I will show you the best available options."},default:{ar:"  !               .",en:"Thank you for contacting us! How can I help you today? I can assist with finding parts, tracking orders, and comparing prices."}},n=s.toLowerCase();let i="default";n.includes("")||n.includes("")||n.includes("search")||n.includes("find")||n.includes("part")?i="search":n.includes("")||n.includes("order")||n.includes("status")?i="order":(n.includes("")||n.includes("")||n.includes("price")||n.includes("compare"))&&(i="price");const l=a==="ar"?"ar":"en";return{content:r[i][l],tokensUsed:Math.floor(50+Math.random()*100)}},async deleteAIConversation(e,s){const r=(await this.getAIConversations(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_ai_conversations_${e}`,JSON.stringify(r)),!0},async getAIUsageLogs(e){const s=localStorage.getItem("b2b_ai_usage_logs");let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.userId===e)),a.sort((r,n)=>new Date(n.timestamp).getTime()-new Date(r.timestamp).getTime())},async logAIUsage(e){const s=await this.getAIUsageLogs();s.unshift(e);const a=s.slice(0,1e3);localStorage.setItem("b2b_ai_usage_logs",JSON.stringify(a))},async getSavedPriceComparisons(e){const s=localStorage.getItem(`b2b_saved_comparisons_${e}`);return s?JSON.parse(s):[]},async savePriceComparison(e){const s=await this.getSavedPriceComparisons(e.userId),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]={...e,updatedAt:new Date().toISOString()}:(e.createdAt=new Date().toISOString(),e.updatedAt=e.createdAt,s.unshift(e)),localStorage.setItem(`b2b_saved_comparisons_${e.userId}`,JSON.stringify(s)),e},async deletePriceComparison(e,s){const r=(await this.getSavedPriceComparisons(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_saved_comparisons_${e}`,JSON.stringify(r)),!0},async getSavedVinExtractions(e){const s=localStorage.getItem(`b2b_saved_vins_${e}`);return s?JSON.parse(s):[]},async saveVinExtraction(e){const s=await this.getSavedVinExtractions(e.userId),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]={...e,updatedAt:new Date().toISOString()}:(e.createdAt=new Date().toISOString(),e.updatedAt=e.createdAt,s.unshift(e)),localStorage.setItem(`b2b_saved_vins_${e.userId}`,JSON.stringify(s)),e},async deleteVinExtraction(e,s){const r=(await this.getSavedVinExtractions(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_saved_vins_${e}`,JSON.stringify(r)),!0},async getSavedQuoteTemplates(e){const s=localStorage.getItem(`b2b_quote_templates_${e}`);return s?JSON.parse(s):[]},async saveQuoteTemplate(e){const s=await this.getSavedQuoteTemplates(e.userId),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]={...e,updatedAt:new Date().toISOString()}:(e.createdAt=new Date().toISOString(),e.updatedAt=e.createdAt,e.usageCount=0,s.unshift(e)),localStorage.setItem(`b2b_quote_templates_${e.userId}`,JSON.stringify(s)),e},async deleteQuoteTemplate(e,s){const r=(await this.getSavedQuoteTemplates(e)).filter(n=>n.id!==s);return localStorage.setItem(`b2b_quote_templates_${e}`,JSON.stringify(r)),!0},async getFileConversionHistory(e){const s=localStorage.getItem(`b2b_file_conversions_${e}`);return s?JSON.parse(s):[]},async saveFileConversion(e){const s=await this.getFileConversionHistory(e.userId);s.unshift(e);const a=s.slice(0,100);return localStorage.setItem(`b2b_file_conversions_${e.userId}`,JSON.stringify(a)),e},async getSecuritySettings(){const e=localStorage.getItem("b2b_security_settings_v1");return e?JSON.parse(e):this.getDefaultSecuritySettings()},async saveSecuritySettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_security_settings_v1",JSON.stringify(e)),e},getDefaultSecuritySettings(){return{id:"security-settings-1",passwordMinLength:8,passwordRequireUppercase:!0,passwordRequireLowercase:!0,passwordRequireNumbers:!0,passwordRequireSymbols:!1,passwordExpiryDays:90,passwordHistoryCount:3,maxLoginAttempts:5,lockoutDurationMinutes:30,sessionTimeoutMinutes:60,allowMultipleSessions:!0,twoFactor:{enabled:!1,method:"email",requiredForAdmins:!0,requiredForFinancial:!0,graceLoginCount:3},enableIPWhitelist:!1,ipWhitelist:[],enableGeoBlocking:!1,blockedCountries:[],enableRiskDetection:!0,riskThreshold:70,notifyOnSuspiciousLogin:!0,enableAuditLog:!0,auditRetentionDays:90,lastModifiedAt:new Date().toISOString()}},async getLoginHistory(e){const s=localStorage.getItem("b2b_login_history");let a=s?JSON.parse(s):[];return e&&(a=a.filter(r=>r.userId===e)),a.sort((r,n)=>new Date(n.timestamp).getTime()-new Date(r.timestamp).getTime())},async logLogin(e){const s=await this.getLoginHistory();s.unshift(e);const a=s.slice(0,1e3);localStorage.setItem("b2b_login_history",JSON.stringify(a))},async getCoupons(){const e=localStorage.getItem("b2b_coupons");return e?JSON.parse(e):[]},async saveCoupon(e){const s=await this.getCoupons(),a=s.findIndex(r=>r.id===e.id);return a>=0?s[a]=e:(e.createdAt=new Date().toISOString(),e.usageCount=0,s.push(e)),localStorage.setItem("b2b_coupons",JSON.stringify(s)),e},async deleteCoupon(e){const a=(await this.getCoupons()).filter(r=>r.id!==e);return localStorage.setItem("b2b_coupons",JSON.stringify(a)),!0},async getLoyaltySettings(){const e=localStorage.getItem("b2b_loyalty_settings");return e?JSON.parse(e):this.getDefaultLoyaltySettings()},async saveLoyaltySettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_loyalty_settings",JSON.stringify(e)),e},getDefaultLoyaltySettings(){return{id:"loyalty-settings-1",enabled:!0,programName:{ar:"   ",en:"SINI CAR Loyalty Program",hi:"   ",zh:"SINI CAR "},pointsPerCurrency:1,pointsRedemptionRate:.1,levels:[{id:"bronze",name:{ar:"",en:"Bronze",hi:"",zh:""},minPoints:0,maxPoints:999,benefits:[{type:"discount",value:2,description:{ar:" 2%   ",en:"2% discount on all orders",hi:"   2% ",zh:"2%"}}],color:"#CD7F32"},{id:"silver",name:{ar:"",en:"Silver",hi:"",zh:""},minPoints:1e3,maxPoints:4999,benefits:[{type:"discount",value:5,description:{ar:" 5%   ",en:"5% discount on all orders",hi:"   5% ",zh:"5%"}},{type:"priority_support",description:{ar:"  ",en:"Priority support",hi:" ",zh:""}}],color:"#C0C0C0"},{id:"gold",name:{ar:"",en:"Gold",hi:"",zh:""},minPoints:5e3,maxPoints:14999,benefits:[{type:"discount",value:10,description:{ar:" 10%   ",en:"10% discount on all orders",hi:"   10% ",zh:"10%"}},{type:"free_shipping",description:{ar:" ",en:"Free shipping",hi:" ",zh:""}},{type:"priority_support",description:{ar:"  VIP",en:"VIP support",hi:" ",zh:"VIP"}}],color:"#FFD700"},{id:"platinum",name:{ar:"",en:"Platinum",hi:"",zh:""},minPoints:15e3,benefits:[{type:"discount",value:15,description:{ar:" 15%   ",en:"15% discount on all orders",hi:"   15% ",zh:"15%"}},{type:"free_shipping",description:{ar:"  ",en:"Free express shipping",hi:"  ",zh:""}},{type:"exclusive_access",description:{ar:"  ",en:"Exclusive offer access",hi:"  ",zh:""}},{type:"priority_support",description:{ar:"  ",en:"Personal account manager",hi:"  ",zh:""}}],color:"#E5E4E2"}],pointsExpiryDays:365,allowPartialRedemption:!0,minimumRedemptionPoints:100,lastModifiedAt:new Date().toISOString()}},async getCustomerLoyalty(e){const s=localStorage.getItem(`b2b_customer_loyalty_${e}`);return s?JSON.parse(s):null},async saveCustomerLoyalty(e){return e.lastActivityAt=new Date().toISOString(),localStorage.setItem(`b2b_customer_loyalty_${e.userId}`,JSON.stringify(e)),e},async getAdvancedNotificationSettings(){const e=localStorage.getItem("b2b_advanced_notification_settings_v1");return e?JSON.parse(e):this.getDefaultAdvancedNotificationSettings()},async saveAdvancedNotificationSettings(e){return e.lastModifiedAt=new Date().toISOString(),localStorage.setItem("b2b_advanced_notification_settings_v1",JSON.stringify(e)),e},getDefaultAdvancedNotificationSettings(){return{id:"notification-settings-1",enabled:!0,defaultChannels:["toast","bell"],emailConfig:{enabled:!0,senderName:"SINI CAR B2B",senderEmail:"noreply@sinicar.com"},smsConfig:{enabled:!1,provider:"twilio"},whatsappConfig:{enabled:!1,provider:"twilio"},pushConfig:{enabled:!1},templates:[],defaultPreferences:[],lastModifiedAt:new Date().toISOString()}},determineActorType(e){var s;return e.extendedRole==="ADMIN"||e.role==="SUPER_ADMIN"?"ADMIN":e.extendedRole==="EMPLOYEE"||e.employeeRole?"EMPLOYEE":e.extendedRole==="MARKETER"?"MARKETER":e.isSupplier||(s=e.extendedRole)!=null&&s.startsWith("SUPPLIER_")?"SUPPLIER":"CUSTOMER"},async logActivityExtended(e){const s=await this.getActivityLogs(),a={id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:e.actorId,userName:e.actorName,eventType:e.actionType,actorType:e.actorType,entityType:e.entityType,entityId:e.entityId,description:e.description,page:e.page,metadata:e.metadata,ipAddress:e.ipAddress,userAgent:e.userAgent,createdAt:new Date().toISOString()};return s.unshift(a),s.length>1e4&&(s.length=1e4),localStorage.setItem(le.ACTIVITY_LOGS,JSON.stringify(s)),a},async getActivityLogsFiltered(e){const s=await this.getActivityLogs(),a=e.page||1,r=e.pageSize||50;let n=s.filter(d=>{if(e.actorType&&d.actorType!==e.actorType||e.actorId&&d.userId!==e.actorId||e.actionType&&d.eventType!==e.actionType||e.entityType&&d.entityType!==e.entityType||e.entityId&&d.entityId!==e.entityId)return!1;if(e.dateFrom){const u=new Date(d.createdAt),h=new Date(e.dateFrom);if(u<h)return!1}if(e.dateTo){const u=new Date(d.createdAt),h=new Date(e.dateTo);if(h.setHours(23,59,59,999),u>h)return!1}return!0});n.sort((d,u)=>new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime());const i=n.length,l=(a-1)*r;return{items:n.slice(l,l+r),page:a,pageSize:r,total:i}},async updateUserLastActivity(e){const s=this.getUsers(),a=s.findIndex(r=>r.id===e);if(a!==-1){const r=s[a],n=new Date,i=r.lastActiveAt?new Date(r.lastActiveAt):null;(!i||n.getTime()-i.getTime()>120*1e3)&&(s[a]={...r,lastActiveAt:n.toISOString()},this.saveUsers(s))}},async getOnlineUsersGrouped(e=5){const s=this.getUsers(),a=new Date(Date.now()-e*60*1e3),r=s.filter(i=>i.lastActiveAt?new Date(i.lastActiveAt)>=a:!1),n={onlineCustomers:[],onlineSuppliers:[],onlineMarketers:[],onlineEmployees:[],onlineAdmins:[]};for(const i of r){const l={id:i.id,name:i.name,actorType:this.determineActorType(i),role:i.role,lastActivityAt:i.lastActiveAt||""};switch(l.actorType){case"ADMIN":n.onlineAdmins.push(l);break;case"EMPLOYEE":n.onlineEmployees.push(l);break;case"MARKETER":n.onlineMarketers.push(l);break;case"SUPPLIER":n.onlineSuppliers.push(l);break;default:n.onlineCustomers.push(l)}}return n},async getActivityStats(){const e=await this.getActivityLogs(),s=new Date;s.setHours(0,0,0,0);const a=e.filter(i=>new Date(i.createdAt)>=s),r={CUSTOMER:0,SUPPLIER:0,MARKETER:0,EMPLOYEE:0,ADMIN:0},n={};for(const i of e)i.actorType&&r[i.actorType]++,i.eventType&&(n[i.eventType]=(n[i.eventType]||0)+1);return{totalLogs:e.length,todayLogs:a.length,logsByActorType:r,logsByActionType:n}},async getHomepageConfig(e){const s=e||"DEFAULT",a=[{id:"banner-1",title:{ar:"    ",en:"Genuine Parts at Wholesale Prices",hi:"    ",zh:""},subtitle:{ar:"     ",en:"Authorized Dealer for Chinese Auto Parts",hi:"     ",zh:""},backgroundColor:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",ctaLabel:{ar:" ",en:"Shop Now",hi:" ",zh:""},ctaLink:"PRODUCT_SEARCH",ctaVariant:"primary",isActive:!0,order:1},{id:"banner-2",title:{ar:"   ",en:"Import Service from China",hi:"   ",zh:""},subtitle:{ar:"      ",en:"Get any part not available locally",hi:"        ",zh:""},backgroundColor:"linear-gradient(135deg, #065f46 0%, #10b981 100%)",ctaLabel:{ar:" ",en:"Request Import",hi:" ",zh:""},ctaLink:"IMPORT_CHINA",ctaVariant:"secondary",isActive:!0,order:2},{id:"banner-3",title:{ar:"  ",en:"Advanced Trader Tools",hi:"  ",zh:""},subtitle:{ar:"   VIN ",en:"Price comparison, VIN decode, and more",hi:" , VIN ,  ",zh:"VIN"},backgroundColor:"linear-gradient(135deg, #7c2d12 0%, #f97316 100%)",ctaLabel:{ar:" ",en:"Explore Tools",hi:" ",zh:""},ctaLink:"TRADER_TOOLS",ctaVariant:"outline",isActive:!0,order:3}],r={WORKSHOP:{heroTitle:{ar:"  ",en:"Welcome Workshop",hi:"    ",zh:""},heroSubtitle:{ar:"     ",en:"Parts you need, delivered fast",hi:"   ,  ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showQuoteRequest:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders","tools"]},RENTAL:{heroTitle:{ar:"  ",en:"Rental Companies Portal",hi:"   ",zh:""},heroSubtitle:{ar:"   ",en:"Manage your fleet efficiently",hi:"      ",zh:""},showProductSearchShortcut:!0,showTraderTools:!1,showQuoteRequest:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders"]},INSURANCE:{heroTitle:{ar:"  ",en:"Insurance Companies Portal",hi:"   ",zh:""},heroSubtitle:{ar:"    ",en:"Fast claims and accurate price comparison",hi:"     ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showQuoteRequest:!0,sectionsOrder:["hero","banners","keyActions","stats","tools"]},SUPPLIER:{heroTitle:{ar:" ",en:"Supplier Portal",hi:" ",zh:""},heroSubtitle:{ar:"   ",en:"Manage customer requests and your products",hi:"       ",zh:""},showProductSearchShortcut:!1,showTraderTools:!1,showQuoteRequest:!1,sectionsOrder:["hero","banners","supplierStats","incomingRequests"]},MARKETER:{heroTitle:{ar:" ",en:"Marketer Portal",hi:" ",zh:""},heroSubtitle:{ar:"   ",en:"Track your commissions and referral links",hi:"       ",zh:""},showProductSearchShortcut:!1,showTraderTools:!1,showQuoteRequest:!1,sectionsOrder:["hero","banners","marketerStats","referralSection"]},PARTS_SHOP:{heroTitle:{ar:"  ",en:"Parts Shop Portal",hi:"  ",zh:""},heroSubtitle:{ar:"    ",en:"Competitive wholesale prices and fast delivery",hi:"     ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showQuoteRequest:!0,showOrderHistory:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders","tools"]},DEFAULT:{heroTitle:{ar:"  ",en:"SINI CAR System",hi:"  ",zh:""},heroSubtitle:{ar:"   ",en:"Authorized Wholesale Portal",hi:"  ",zh:""},showProductSearchShortcut:!0,showTraderTools:!0,showImportServices:!0,showQuoteRequest:!0,showOrderHistory:!0,sectionsOrder:["hero","banners","keyActions","stats","recentOrders","tools","feedback"]}},n=r[s]||r.DEFAULT,i=[{id:"shortcut-search",icon:"search",title:{ar:" ",en:"Parts Search",hi:" ",zh:""},description:{ar:"       ",en:"Search parts by number or description",hi:"     ",zh:""},link:"PRODUCT_SEARCH",colorClass:"bg-blue-600",isActive:!0,order:1},{id:"shortcut-quote",icon:"file-text",title:{ar:" ",en:"Quote Request",hi:" ",zh:""},description:{ar:"      ",en:"Upload Excel file for full quote",hi:"       ",zh:"Excel"},link:"QUOTE_REQUEST",colorClass:"bg-emerald-600",isActive:!0,order:2},{id:"shortcut-orders",icon:"package",title:{ar:" ",en:"Order History",hi:" ",zh:""},description:{ar:"    ",en:"Track all your past and current orders",hi:"        ",zh:""},link:"ORDERS",colorClass:"bg-orange-600",isActive:!0,order:3},{id:"shortcut-import",icon:"globe",title:{ar:"  ",en:"Import from China",hi:"  ",zh:""},description:{ar:"    ",en:"Order parts not available locally",hi:"      ",zh:""},link:"IMPORT_CHINA",colorClass:"bg-purple-600",isActive:!0,order:4},{id:"shortcut-tools",icon:"wrench",title:{ar:" ",en:"Trader Tools",hi:" ",zh:""},description:{ar:"   ",en:"Advanced comparison and analysis tools",hi:"    ",zh:""},link:"TRADER_TOOLS",colorClass:"bg-indigo-600",isActive:!0,order:5},{id:"shortcut-alternatives",icon:"refresh-cw",title:{ar:" ",en:"Part Alternatives",hi:" ",zh:""},description:{ar:"    ",en:"Find compatible part alternatives",hi:"   ",zh:""},link:"ALTERNATIVES",colorClass:"bg-teal-600",isActive:!0,order:6}];return{customerType:s,layoutConfig:{heroTitle:n.heroTitle||r.DEFAULT.heroTitle,heroSubtitle:n.heroSubtitle||r.DEFAULT.heroSubtitle,heroBackgroundGradient:"linear-gradient(135deg, #081a33 0%, #102b57 100%)",showProductSearchShortcut:n.showProductSearchShortcut??!0,showTraderTools:n.showTraderTools??!0,showImportServices:n.showImportServices??!0,showQuoteRequest:n.showQuoteRequest??!0,showOrderHistory:n.showOrderHistory??!0,sectionsOrder:n.sectionsOrder||["hero","banners","keyActions","stats","recentOrders","tools"],primaryCtaLabel:{ar:"   ",en:"Search Parts",hi:" ",zh:""},primaryCtaLink:"PRODUCT_SEARCH",secondaryCtaLabel:{ar:" ",en:"Request Quote",hi:"   ",zh:""},secondaryCtaLink:"QUOTE_REQUEST"},bannersConfig:{autoPlayInterval:5e3,showDots:!0,showArrows:!0,transitionType:"slide",banners:a},shortcutsConfig:{shortcuts:i.filter(l=>!(l.link==="PRODUCT_SEARCH"&&!n.showProductSearchShortcut||l.link==="TRADER_TOOLS"&&!n.showTraderTools||l.link==="QUOTE_REQUEST"&&!n.showQuoteRequest||l.link==="IMPORT_CHINA"&&!n.showImportServices))}}},async getHomepageStats(e){const s=await this.getOrders(e);return{pendingRequests:(await this.getAllQuoteRequests()).filter(n=>n.customerId===e).filter(n=>n.status==="NEW"||n.status==="UNDER_REVIEW").length,approvedOrders:s.filter(n=>n.status==="APPROVED").length,inProgressOrders:s.filter(n=>n.status==="PENDING").length,totalOrders:s.length}},async getSupplierProducts(e,s){await $t(50);let r=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]").filter(f=>f.supplierId===e);if(s!=null&&s.search){const f=s.search.toLowerCase();r=r.filter(x=>x.name.toLowerCase().includes(f)||x.sku.toLowerCase().includes(f)||x.oemNumber.toLowerCase().includes(f)||x.brand.toLowerCase().includes(f))}s!=null&&s.category&&(r=r.filter(f=>f.category===s.category)),s!=null&&s.brand&&(r=r.filter(f=>f.brand===s.brand)),(s==null?void 0:s.availability)==="IN_STOCK"?r=r.filter(f=>f.stock>0):(s==null?void 0:s.availability)==="OUT_OF_STOCK"&&(r=r.filter(f=>f.stock===0)),(s==null?void 0:s.isActive)!==void 0&&(r=r.filter(f=>f.isActive===s.isActive));const n=(s==null?void 0:s.sortBy)||"createdAt",i=(s==null?void 0:s.sortDirection)||"desc";r.sort((f,x)=>{const g=f[n]??"",v=x[n]??"";return typeof g=="string"&&typeof v=="string"?i==="asc"?g.localeCompare(v):v.localeCompare(g):typeof g=="number"&&typeof v=="number"?i==="asc"?g-v:v-g:0});const l=r.length,o=(s==null?void 0:s.page)||1,d=(s==null?void 0:s.pageSize)||20,u=(o-1)*d;return{items:r.slice(u,u+d),total:l}},async addSupplierProduct(e,s){await $t(50);const a=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]"),r={id:`SP-${Date.now()}-${Math.floor(Math.random()*1e3)}`,supplierId:e,...s,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return a.push(r),localStorage.setItem(le.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(a)),Nt({eventType:"PRODUCT_ADDED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:r.id,description:`  : ${s.name}`,metadata:{productSku:s.sku}}),r},async updateSupplierProduct(e,s,a){await $t(50);const r=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]"),n=r.findIndex(i=>i.id===s&&i.supplierId===e);return n===-1?null:(r[n]={...r[n],...a,updatedAt:new Date().toISOString()},localStorage.setItem(le.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(r)),Nt({eventType:"PRODUCT_UPDATED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:s,description:` : ${r[n].name}`,metadata:{updates:Object.keys(a)}}),r[n])},async deleteSupplierProduct(e,s){await $t(50);const a=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]"),r=a.findIndex(n=>n.id===s&&n.supplierId===e);return r===-1?!1:(a[r].isActive=!1,a[r].updatedAt=new Date().toISOString(),localStorage.setItem(le.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(a)),Nt({eventType:"PRODUCT_DELETED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:s,description:` : ${a[r].name}`,metadata:{}}),!0)},async importSupplierProductsFromExcel(e,s){await $t(100);try{const a=ad(s,{type:"array"}),r=a.SheetNames[0],n=a.Sheets[r],i=Ea.sheet_to_json(n,{defval:""}),l=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]");let o=0,d=0,u=0;const h=[];return i.forEach((f,x)=>{const g=String(f.sku||f.SKU||f[" "]||"").trim(),v=String(f.oemNumber||f.OEM||f[" OEM"]||f[" "]||"").trim(),b=String(f.name||f.||f[" "]||"").trim(),y=parseFloat(f.price||f.||f.purchasePrice||"0"),j=parseInt(f.stock||f.||f.||"0"),w=String(f.category||f.||"").trim(),A=String(f.brand||f.||f.||"").trim(),O=String(f.model||f.||"").trim(),C=parseInt(f.yearFrom||f[" "]||"0")||void 0,E=parseInt(f.yearTo||f[" "]||"0")||void 0,S=parseInt(f.deliveryTime||f[" "]||"3"),D=parseInt(f.minOrderQty||f[" "]||"1");if(!g&&!v){h.push({row:x+2,field:"sku/oemNumber",message:"      OEM"}),u++;return}if(!b){h.push({row:x+2,field:"name",message:"  "}),u++;return}if(isNaN(y)||y<0){h.push({row:x+2,field:"price",message:"  "}),u++;return}const M=l.findIndex(U=>U.supplierId===e&&(g&&U.sku===g||v&&U.oemNumber===v));if(M!==-1)l[M]={...l[M],name:b,purchasePrice:y,stock:j,category:w||l[M].category,brand:A||l[M].brand,model:O||l[M].model,yearFrom:C||l[M].yearFrom,yearTo:E||l[M].yearTo,deliveryTime:S,minOrderQty:D,updatedAt:new Date().toISOString()},d++;else{const U={id:`SP-${Date.now()}-${Math.floor(Math.random()*1e4)}`,supplierId:e,sku:g||`AUTO-${Date.now()}`,oemNumber:v||"",name:b,category:w||"",brand:A||" ",model:O,yearFrom:C,yearTo:E,purchasePrice:y,minOrderQty:D,stock:j,deliveryTime:S,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l.push(U),o++}}),localStorage.setItem(le.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(l)),Nt({eventType:"PRODUCT_IMPORTED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"PRODUCT",entityId:"",description:` ${o+d}    Excel`,metadata:{insertedCount:o,updatedCount:d,skippedCount:u}}),{success:!0,totalRows:i.length,insertedCount:o,updatedCount:d,skippedCount:u,errors:h}}catch{return{success:!1,totalRows:0,insertedCount:0,updatedCount:0,skippedCount:0,errors:[{row:0,field:"file",message:"   "}]}}},async getSupplierRequests(e,s){await $t(50);let r=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_REQUESTS)||"[]").filter(f=>f.supplierId===e);if(s!=null&&s.status&&s.status!=="ALL"&&(r=r.filter(f=>f.status===s.status)),s!=null&&s.urgency&&s.urgency!=="ALL"&&(r=r.filter(f=>f.urgency===s.urgency)),s!=null&&s.dateFrom&&(r=r.filter(f=>f.createdAt>=s.dateFrom)),s!=null&&s.dateTo&&(r=r.filter(f=>f.createdAt<=s.dateTo)),s!=null&&s.search){const f=s.search.toLowerCase();r=r.filter(x=>{var g,v,b;return((g=x.partNumber)==null?void 0:g.toLowerCase().includes(f))||((v=x.partName)==null?void 0:v.toLowerCase().includes(f))||((b=x.customerName)==null?void 0:b.toLowerCase().includes(f))})}const n=(s==null?void 0:s.sortBy)||"createdAt",i=(s==null?void 0:s.sortDirection)||"desc";r.sort((f,x)=>{const g=f[n]??"",v=x[n]??"";return typeof g=="string"&&typeof v=="string"?i==="asc"?g.localeCompare(v):v.localeCompare(g):0});const l=r.length,o=(s==null?void 0:s.page)||1,d=(s==null?void 0:s.pageSize)||20,u=(o-1)*d;return{items:r.slice(u,u+d),total:l}},async submitSupplierQuote(e,s){await $t(50);const a=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_REQUESTS)||"[]"),r=a.findIndex(i=>i.id===s.requestId&&i.supplierId===e);return r===-1?null:(a[r]={...a[r],status:"QUOTED",quotedPrice:s.quotedPrice,stockAvailable:s.stockAvailable,notes:s.notes,respondedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},localStorage.setItem(le.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(a)),Nt({eventType:"QUOTE_SENT",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"REQUEST",entityId:s.requestId,description:`  : ${s.quotedPrice} `,metadata:{quotedPrice:s.quotedPrice,stockAvailable:s.stockAvailable}}),ou().forEach(i=>{qO({userId:i,type:"SUPPLIER_REQUEST_ASSIGNED",title:"    ",message:`    ${s.quotedPrice} `,relatedType:"REQUEST",relatedId:s.requestId})}),a[r])},async rejectSupplierRequest(e,s,a){await $t(50);const r=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_REQUESTS)||"[]"),n=r.findIndex(i=>i.id===s&&i.supplierId===e);return n===-1?null:(r[n]={...r[n],status:"REJECTED",notes:a||"  ",respondedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},localStorage.setItem(le.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(r)),Nt({eventType:"QUOTE_REQUEST_REJECTED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"REQUEST",entityId:s,description:"  ",metadata:{reason:a}}),r[n])},initializeSupplierDemoData(e){const s=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]");if(!s.some(i=>i.supplierId===e)){const i=[{id:"SP-demo-1",supplierId:e,sku:"CN-BRK-001",oemNumber:"11223344",name:"   -  CS75",category:"",brand:"Changan",model:"CS75",yearFrom:2020,yearTo:2024,purchasePrice:120,stock:50,minOrderQty:1,deliveryTime:2,isActive:!0,createdAt:new Date(Date.now()-2592e6).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-2",supplierId:e,sku:"MG-FLT-002",oemNumber:"55667788",name:"   - MG RX5",category:"",brand:"MG",model:"RX5",yearFrom:2021,yearTo:2024,purchasePrice:35,stock:200,minOrderQty:5,deliveryTime:1,isActive:!0,createdAt:new Date(Date.now()-216e7).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-3",supplierId:e,sku:"GL-RAD-003",oemNumber:"99887766",name:"  -  ",category:"",brand:"Geely",model:"Coolray",yearFrom:2022,yearTo:2024,purchasePrice:550,stock:15,minOrderQty:1,deliveryTime:3,isActive:!0,createdAt:new Date(Date.now()-1728e6).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-4",supplierId:e,sku:"HV-SUSP-004",oemNumber:"44556677",name:"  -  H6",category:" ",brand:"Haval",model:"H6",yearFrom:2020,yearTo:2023,purchasePrice:380,stock:10,minOrderQty:1,deliveryTime:2,isActive:!0,createdAt:new Date(Date.now()-1296e6).toISOString(),updatedAt:new Date().toISOString()},{id:"SP-demo-5",supplierId:e,sku:"CN-ALT-005",oemNumber:"33445566",name:"  -  CS95",category:"",brand:"Changan",model:"CS95",yearFrom:2019,yearTo:2024,purchasePrice:950,stock:5,minOrderQty:1,deliveryTime:4,isActive:!1,createdAt:new Date(Date.now()-864e6).toISOString(),updatedAt:new Date().toISOString()}],l=[...s,...i];localStorage.setItem(le.SUPPLIER_PORTAL_PRODUCTS,JSON.stringify(l))}const r=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_REQUESTS)||"[]");if(!r.some(i=>i.supplierId===e)){const i=[{id:"SR-demo-1",supplierId:e,customerId:"cust-001",customerName:"  ",partNumber:"CN-BRK-001",partName:"  ",quantity:20,status:"NEW",urgency:"HIGH",deadline:new Date(Date.now()+2592e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString()},{id:"SR-demo-2",supplierId:e,customerId:"cust-002",customerName:"  ",partNumber:"MG-FLT-002",partName:"  MG",quantity:50,status:"NEW",urgency:"MEDIUM",deadline:new Date(Date.now()+432e6).toISOString(),createdAt:new Date(Date.now()-18e6).toISOString()},{id:"SR-demo-3",supplierId:e,customerId:"cust-003",customerName:"  ",partNumber:"GL-RAD-003",partName:" ",quantity:5,status:"QUOTED",quotedPrice:3e3,stockAvailable:5,urgency:"NORMAL",respondedAt:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-2592e5).toISOString()},{id:"SR-demo-4",supplierId:e,customerId:"cust-004",customerName:"  ",partNumber:"HV-SUSP-004",partName:"  H6",quantity:10,status:"ACCEPTED",quotedPrice:4200,stockAvailable:10,urgency:"HIGH",respondedAt:new Date(Date.now()-432e6).toISOString(),createdAt:new Date(Date.now()-6048e5).toISOString()},{id:"SR-demo-5",supplierId:e,customerId:"cust-005",customerName:"  ",partNumber:"CN-ALT-005",partName:" ",quantity:2,status:"REJECTED",notes:"  ",urgency:"URGENT",respondedAt:new Date(Date.now()-1728e5).toISOString(),createdAt:new Date(Date.now()-3456e5).toISOString()}],l=[...r,...i];localStorage.setItem(le.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(l))}},async getSupplierDashboard(e){await $t(50),this.initializeSupplierDemoData(e);const s=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]"),a=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_REQUESTS)||"[]"),r=s.filter(g=>g.supplierId===e),n=a.filter(g=>g.supplierId===e),i=new Date().toISOString().split("T")[0],l=n.filter(g=>g.createdAt.startsWith(i)),o=n.filter(g=>g.status==="QUOTED"),d=n.filter(g=>g.status==="ACCEPTED"),u=n.filter(g=>g.status==="REJECTED"),h=n.filter(g=>g.status==="NEW"||g.status==="VIEWED");let f=0,x=0;return o.forEach(g=>{if(g.respondedAt&&g.createdAt){const v=new Date(g.createdAt).getTime(),b=new Date(g.respondedAt).getTime();f+=(b-v)/(1e3*60*60),x++}}),{totalProducts:r.length,activeProducts:r.filter(g=>g.isActive).length,inactiveProducts:r.filter(g=>!g.isActive).length,requestsAssignedToday:l.length,quotesSubmitted:o.length,quotesAccepted:d.length,quotesRejected:u.length,pendingRequests:h.length,averageResponseTime:x>0?Math.round(f/x):0,supplierRating:4.2,totalRevenue:d.reduce((g,v)=>g+(v.quotedPrice||0),0),thisMonthRevenue:d.filter(g=>{var v;return(v=g.respondedAt)==null?void 0:v.startsWith(new Date().toISOString().slice(0,7))}).reduce((g,v)=>g+(v.quotedPrice||0),0)}},async getSupplierSettings(e){await $t(30);const a=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_SETTINGS)||"[]").find(r=>r.supplierId===e);return a||{id:`SS-${e}`,supplierId:e,defaultPriceMarkup:10,defaultDeliveryTime:3,autoResponseEnabled:!1,notifyOnNewRequest:!0,notifyOnQuoteAccepted:!0,notifyOnDeadlineApproaching:!0}},async updateSupplierSettings(e,s){await $t(50);const a=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_SETTINGS)||"[]"),r=a.findIndex(i=>i.supplierId===e);let n;return r!==-1?(a[r]={...a[r],...s},n=a[r]):(n={id:`SS-${e}`,supplierId:e,defaultPriceMarkup:10,defaultDeliveryTime:3,autoResponseEnabled:!1,notifyOnNewRequest:!0,notifyOnQuoteAccepted:!0,notifyOnDeadlineApproaching:!0,...s},a.push(n)),localStorage.setItem(le.SUPPLIER_PORTAL_SETTINGS,JSON.stringify(a)),Nt({eventType:"SETTINGS_UPDATED",userId:e,userName:"",role:"CUSTOMER_OWNER",entityType:"USER",entityId:e,description:"  ",metadata:{updates:Object.keys(s)}}),n},async createSupplierRequest(e){await $t(30);const s=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_REQUESTS)||"[]"),a={id:`SR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s.push(a),localStorage.setItem(le.SUPPLIER_PORTAL_REQUESTS,JSON.stringify(s)),qO({userId:e.supplierId,type:"SUPPLIER_REQUEST_ASSIGNED",title:"  ",message:`    : ${e.partName||e.partNumber}`,relatedType:"REQUEST",relatedId:a.id,link:"/supplier/requests"}),a},async getSupplierPortalProfile(e){await $t(30);const a=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(o=>o.id===e);if(!a||!a.isSupplier)return null;const r=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]"),n=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_REQUESTS)||"[]"),i=r.filter(o=>o.supplierId===e),l=n.filter(o=>o.supplierId===e);return{userId:e,supplierType:a.extendedRole==="SUPPLIER_INTERNATIONAL"?"INTERNATIONAL":"LOCAL",supplierCompanyName:a.name||"",supplierVat:"",supplierCrNumber:"",supplierRating:4.2,supplierActiveProductsCount:i.filter(o=>o.isActive).length,supplierTotalQuotesSubmitted:l.filter(o=>o.status==="QUOTED").length,supplierTotalQuotesAccepted:l.filter(o=>o.status==="ACCEPTED").length,supplierJoinedAt:new Date().toISOString(),supplierStatus:"ACTIVE",contactEmail:a.email,contactPhone:a.phone}},async getSupplierProductCategories(e){const s=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]");return[...new Set(s.filter(r=>r.supplierId===e).map(r=>r.category))].filter(Boolean)},async getSupplierProductBrands(e){const s=JSON.parse(localStorage.getItem(le.SUPPLIER_PORTAL_PRODUCTS)||"[]");return[...new Set(s.filter(r=>r.supplierId===e).map(r=>r.brand))].filter(Boolean)},async logTraderToolAction(e,s,a,r,n){await $t(10);const i=JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]"),o=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(h=>h.id===e),d={id:`TTA-${Date.now()}-${Math.floor(Math.random()*1e3)}`,customerId:e,customerName:(o==null?void 0:o.name)||" ",toolType:s,inputData:a,outputData:r,inputFileUrl:n==null?void 0:n.inputFileUrl,inputFileName:n==null?void 0:n.inputFileName,outputFileUrl:n==null?void 0:n.outputFileUrl,outputFileName:n==null?void 0:n.outputFileName,createdAt:new Date().toISOString(),createdFromIp:"192.168.1."+Math.floor(Math.random()*255),deviceType:"WEB",status:(n==null?void 0:n.status)||"SUCCESS",errorMessage:n==null?void 0:n.errorMessage,processingTimeMs:n==null?void 0:n.processingTimeMs,metadata:n==null?void 0:n.metadata};i.push(d),localStorage.setItem(le.TRADER_TOOL_ACTIONS,JSON.stringify(i));const u={VIN:"  VIN",PDF_EXCEL:"  PDF  Excel",COMPARISON:"  ",ALTERNATIVES:"  ",SEARCH:"   ",EXCEL_QUOTE:"   Excel"};return Nt({eventType:"TRADER_TOOL_USED",userId:e,userName:o==null?void 0:o.name,role:(o==null?void 0:o.role)||"CUSTOMER_OWNER",entityType:"TRADER_TOOL",entityId:d.id,description:` ${u[s]}`,metadata:{toolType:s,status:d.status,inputSummary:JSON.stringify(a).substring(0,200)}}),d},async getTraderToolActionsAdmin(e){await $t(30);let s=JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]");if(s=s.filter(x=>!x.isDeleted),e.customerId&&(s=s.filter(x=>x.customerId===e.customerId)),e.toolType&&e.toolType!=="ALL"&&(s=s.filter(x=>x.toolType===e.toolType)),e.status&&e.status!=="ALL"&&(s=s.filter(x=>x.status===e.status)),e.deviceType&&e.deviceType!=="ALL"&&(s=s.filter(x=>x.deviceType===e.deviceType)),e.dateFrom&&(s=s.filter(x=>x.createdAt>=e.dateFrom)),e.dateTo&&(s=s.filter(x=>x.createdAt<=e.dateTo)),e.hasFiles!==void 0&&(e.hasFiles?s=s.filter(x=>x.inputFileUrl||x.outputFileUrl):s=s.filter(x=>!x.inputFileUrl&&!x.outputFileUrl)),e.search){const x=e.search.toLowerCase();s=s.filter(g=>{var v,b,y,j,w,A,O,C,E;return((v=g.customerName)==null?void 0:v.toLowerCase().includes(x))||((b=g.inputFileName)==null?void 0:b.toLowerCase().includes(x))||((y=g.outputFileName)==null?void 0:y.toLowerCase().includes(x))||((w=(j=g.metadata)==null?void 0:j.vin)==null?void 0:w.toLowerCase().includes(x))||((O=(A=g.metadata)==null?void 0:A.partNumber)==null?void 0:O.toLowerCase().includes(x))||((E=(C=g.metadata)==null?void 0:C.searchQuery)==null?void 0:E.toLowerCase().includes(x))||JSON.stringify(g.inputData).toLowerCase().includes(x)})}const a=s.length,r={VIN:s.filter(x=>x.toolType==="VIN").length,PDF_EXCEL:s.filter(x=>x.toolType==="PDF_EXCEL").length,COMPARISON:s.filter(x=>x.toolType==="COMPARISON").length,ALTERNATIVES:s.filter(x=>x.toolType==="ALTERNATIVES").length,SEARCH:s.filter(x=>x.toolType==="SEARCH").length,EXCEL_QUOTE:s.filter(x=>x.toolType==="EXCEL_QUOTE").length},n={SUCCESS:s.filter(x=>x.status==="SUCCESS").length,FAILED:s.filter(x=>x.status==="FAILED").length,PENDING:s.filter(x=>x.status==="PENDING").length,PROCESSING:s.filter(x=>x.status==="PROCESSING").length},i=a>0?n.SUCCESS/a*100:0,l=e.sortBy||"createdAt",o=e.sortDirection||"desc";s.sort((x,g)=>{let v=0;switch(l){case"createdAt":v=new Date(x.createdAt).getTime()-new Date(g.createdAt).getTime();break;case"toolType":v=x.toolType.localeCompare(g.toolType);break;case"status":v=x.status.localeCompare(g.status);break;case"customerName":v=(x.customerName||"").localeCompare(g.customerName||"");break}return o==="asc"?v:-v});const d=e.page||1,u=e.pageSize||20,h=(d-1)*u;return{items:s.slice(h,h+u),total:a,page:d,pageSize:u,summary:{total:a,byToolType:r,byStatus:n,successRate:i}}},async getTraderToolActionById(e){return await $t(10),JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]").find(a=>a.id===e&&!a.isDeleted)||null},async deleteTraderToolAction(e){await $t(10);const s=JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]"),a=s.findIndex(r=>r.id===e);return a!==-1?(s[a].isDeleted=!0,localStorage.setItem(le.TRADER_TOOL_ACTIONS,JSON.stringify(s)),Nt({eventType:"ADMIN_ACTION",userId:"super-admin",userName:" ",role:"SUPER_ADMIN",entityType:"TRADER_TOOL",entityId:e,description:`   : ${e}`,metadata:{}}),!0):!1},async getTraderToolActionsCustomer(e,s){await $t(20);let a=JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]");a=a.filter(d=>d.customerId===e&&!d.isDeleted),s.toolType&&s.toolType!=="ALL"&&(a=a.filter(d=>d.toolType===s.toolType)),s.status&&s.status!=="ALL"&&(a=a.filter(d=>d.status===s.status)),s.dateFrom&&(a=a.filter(d=>d.createdAt>=s.dateFrom)),s.dateTo&&(a=a.filter(d=>d.createdAt<=s.dateTo)),a.sort((d,u)=>new Date(u.createdAt).getTime()-new Date(d.createdAt).getTime());const r=a.length,n=s.page||1,i=s.pageSize||20,l=(n-1)*i;return{items:a.slice(l,l+i),total:r,page:n,pageSize:i}},async exportTraderToolActions(e){return await $t(30),(await this.getTraderToolActionsAdmin({...e,page:1,pageSize:1e4})).items.map(a=>({id:a.id,customerId:a.customerId,customerName:a.customerName||"",toolType:a.toolType,inputSummary:JSON.stringify(a.inputData).substring(0,200),outputSummary:a.outputData?JSON.stringify(a.outputData).substring(0,200):"",status:a.status,deviceType:a.deviceType,createdAt:a.createdAt,hasInputFile:!!a.inputFileUrl,hasOutputFile:!!a.outputFileUrl}))},async getTraderToolsUsageReport(e,s,a,r){await $t(50);let n=JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]");n=n.filter(C=>!C.isDeleted);const i=new Date;let l,o=i;if(s&&a)l=new Date(s),o=new Date(a);else switch(e){case"day":l=new Date(i.getFullYear(),i.getMonth(),i.getDate());break;case"week":l=new Date(i.getTime()-10080*60*1e3);break;case"month":l=new Date(i.getFullYear(),i.getMonth(),1);break;case"quarter":l=new Date(i.getFullYear(),Math.floor(i.getMonth()/3)*3,1);break;case"year":l=new Date(i.getFullYear(),0,1);break}if(n=n.filter(C=>{const E=new Date(C.createdAt);return E>=l&&E<=o}),r){const E=JSON.parse(localStorage.getItem(le.PROFILES)||"[]").filter(S=>S.customerType===r).map(S=>S.userId);n=n.filter(S=>E.includes(S.customerId))}const d=n.length,u=new Set(n.map(C=>C.customerId)).size,h=n.filter(C=>C.status==="SUCCESS").length,f=d>0?h/d*100:0,g=["VIN","PDF_EXCEL","COMPARISON","ALTERNATIVES","SEARCH","EXCEL_QUOTE"].map(C=>{const E=n.filter(U=>U.toolType===C),S=E.filter(U=>U.status==="SUCCESS"),D=E.filter(U=>U.status==="FAILED"),M=E.reduce((U,I)=>U+(I.processingTimeMs||0),0);return{toolType:C,count:E.length,successCount:S.length,failedCount:D.length,avgProcessingTime:E.length>0?M/E.length:0}}),v=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),b=new Map;n.forEach(C=>{const E=v.find(D=>D.userId===C.customerId),S=(E==null?void 0:E.customerType)||" ";b.set(S,(b.get(S)||0)+1)});const y=Array.from(b.entries()).map(([C,E])=>({customerType:C,count:E})),j=new Map;n.forEach(C=>{const E=C.createdAt.split("T")[0];j.set(E,(j.get(E)||0)+1)});const w=Array.from(j.entries()).map(([C,E])=>({date:C,count:E})).sort((C,E)=>C.date.localeCompare(E.date)),A=new Map;n.forEach(C=>{const E=A.get(C.customerId);E?E.count++:A.set(C.customerId,{name:C.customerName||" ",count:1})});const O=Array.from(A.entries()).map(([C,E])=>({customerId:C,customerName:E.name,usageCount:E.count})).sort((C,E)=>E.usageCount-C.usageCount).slice(0,10);return{period:e,dateFrom:l.toISOString(),dateTo:o.toISOString(),totalActions:d,uniqueCustomers:u,successRate:f,byToolType:g,byCustomerType:y,byDate:w,topCustomers:O}},async initializeTraderToolsDemoData(e){await $t(10);const s=JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]");if(s.some(l=>l.customerId===e))return;const r=JSON.parse(localStorage.getItem(le.USERS)||"[]").find(l=>l.id===e),n=(r==null?void 0:r.name)||" ",i=[{id:`TTA-demo-${e}-1`,customerId:e,customerName:n,toolType:"VIN",inputData:{imageFile:"vin_photo.jpg"},outputData:{vin:"JT2BG22K0W0012345",manufacturer:"Toyota",year:"2022"},createdAt:new Date(Date.now()-2880*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:2340,metadata:{vin:"JT2BG22K0W0012345",manufacturer:"Toyota",model:"Camry",year:"2022",confidence:94}},{id:`TTA-demo-${e}-2`,customerId:e,customerName:n,toolType:"PDF_EXCEL",inputData:{fileName:"price_list.pdf",pageCount:5},outputData:{rows:150,columns:8},inputFileName:"price_list.pdf",outputFileName:"price_list.xlsx",createdAt:new Date(Date.now()-1440*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:8750,metadata:{rowCount:150,columnCount:8,pageCount:5}},{id:`TTA-demo-${e}-3`,customerId:e,customerName:n,toolType:"COMPARISON",inputData:{partNumber:"CN-102030"},outputData:{suppliersCount:5,lowestPrice:120,highestPrice:180},createdAt:new Date(Date.now()-720*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:1560,metadata:{partNumber:"CN-102030",partName:" ",suppliersCount:5,lowestPrice:120,highestPrice:180}},{id:`TTA-demo-${e}-4`,customerId:e,customerName:n,toolType:"SEARCH",inputData:{query:"  "},outputData:{resultsCount:12},createdAt:new Date(Date.now()-360*60*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:890,metadata:{searchQuery:"  ",resultsCount:12}},{id:`TTA-demo-${e}-5`,customerId:e,customerName:n,toolType:"EXCEL_QUOTE",inputData:{fileName:"parts_request.xlsx",itemsCount:25},outputData:{processedItems:25,quotedTotal:15750},inputFileName:"parts_request.xlsx",createdAt:new Date(Date.now()-10800*1e3).toISOString(),deviceType:"WEB",status:"SUCCESS",processingTimeMs:4200,metadata:{itemsCount:25,quotedTotal:15750}}];s.push(...i),localStorage.setItem(le.TRADER_TOOL_ACTIONS,JSON.stringify(s))},async getCustomerToolUsageSummary(e){var i;await $t(10);let s=JSON.parse(localStorage.getItem(le.TRADER_TOOL_ACTIONS)||"[]");s=s.filter(l=>l.customerId===e&&!l.isDeleted);const a={VIN:s.filter(l=>l.toolType==="VIN").length,PDF_EXCEL:s.filter(l=>l.toolType==="PDF_EXCEL").length,COMPARISON:s.filter(l=>l.toolType==="COMPARISON").length,ALTERNATIVES:s.filter(l=>l.toolType==="ALTERNATIVES").length,SEARCH:s.filter(l=>l.toolType==="SEARCH").length,EXCEL_QUOTE:s.filter(l=>l.toolType==="EXCEL_QUOTE").length};s.sort((l,o)=>new Date(o.createdAt).getTime()-new Date(l.createdAt).getTime());let r,n=0;return Object.entries(a).forEach(([l,o])=>{o>n&&(n=o,r=l)}),{totalUsage:s.length,byToolType:a,lastUsed:(i=s[0])==null?void 0:i.createdAt,mostUsedTool:r}},async getFeedbackSettings(){await $t(10);const e=localStorage.getItem(le.FEEDBACK_SETTINGS);if(e)return JSON.parse(e);const s={enabled:!0,showForRoles:["CUSTOMER","SUPPLIER","MARKETER","EMPLOYEE","ADMIN"],defaultCategory:"SUGGESTION",defaultPriority:"MEDIUM",allowGuestFeedback:!0};return localStorage.setItem(le.FEEDBACK_SETTINGS,JSON.stringify(s)),s},async saveFeedbackSettings(e){await $t(50),localStorage.setItem(le.FEEDBACK_SETTINGS,JSON.stringify(e))},async createFeedback(e,s,a,r,n){await $t(100);const i=JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]"),l=await this.getFeedbackSettings();let o="CUSTOMER";n==="ADMIN"||n==="SUPER_ADMIN"?o="ADMIN":n==="EMPLOYEE"||n==="CUSTOMER_STAFF"?o="EMPLOYEE":n.includes("SUPPLIER")?o="SUPPLIER":n==="MARKETER"&&(o="MARKETER");const d=new Date().toISOString(),u={id:`FB-${Date.now()}-${Math.floor(Math.random()*1e3)}`,senderUserId:s,senderName:a,senderContact:e.senderContact||r,senderType:o,pageContext:e.pageContext,category:e.category,priority:e.priority,subject:e.subject,message:e.message,status:"NEW",adminAssignedId:l.assignedDefaultAdminId||null,createdAt:d,updatedAt:d};i.push(u),localStorage.setItem(le.FEEDBACK,JSON.stringify(i)),Nt({userId:s,userName:a,role:n,eventType:"CREATE",entityType:"FEEDBACK",entityId:u.id,description:`  : ${e.subject}`,metadata:{category:e.category,priority:e.priority}});const h=ou(),f=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]");return h.forEach(x=>{const g={id:`NOTIF-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:x,type:"SYSTEM",title:" ",message:`   ${a}: ${e.subject}`,isRead:!1,createdAt:d,metadata:{feedbackId:u.id,category:e.category}};f.push(g)}),localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(f)),{success:!0,feedbackId:u.id}},async createPublicFeedback(e){await $t(100);const s=JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]"),a=await this.getFeedbackSettings(),r=new Date().toISOString(),n={id:`FB-${Date.now()}-${Math.floor(Math.random()*1e3)}`,senderUserId:null,senderName:e.senderName,senderContact:e.senderContact,senderType:"GUEST",pageContext:e.pageContext,category:e.category,priority:e.priority,subject:e.subject,message:e.message,status:"NEW",adminAssignedId:a.assignedDefaultAdminId||null,createdAt:r,updatedAt:r};return s.push(n),localStorage.setItem(le.FEEDBACK,JSON.stringify(s)),Nt({userId:"guest",userName:e.senderName,role:"GUEST",eventType:"CREATE",entityType:"FEEDBACK",entityId:n.id,description:`  : ${e.subject}`,metadata:{category:e.category,priority:e.priority}}),{success:!0,feedbackId:n.id}},async getAdminFeedbackList(e){await $t(50);let s=JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]");if(e.status&&(s=s.filter(o=>o.status===e.status)),e.category&&(s=s.filter(o=>o.category===e.category)),e.senderType&&(s=s.filter(o=>o.senderType===e.senderType)),e.assignedTo&&(s=s.filter(o=>o.adminAssignedId===e.assignedTo)),e.dateFrom&&(s=s.filter(o=>new Date(o.createdAt)>=new Date(e.dateFrom))),e.dateTo&&(s=s.filter(o=>new Date(o.createdAt)<=new Date(e.dateTo))),e.search){const o=e.search.toLowerCase();s=s.filter(d=>d.subject.toLowerCase().includes(o)||d.message.toLowerCase().includes(o)||d.senderName.toLowerCase().includes(o))}s.sort((o,d)=>new Date(d.createdAt).getTime()-new Date(o.createdAt).getTime());const a=e.page||1,r=e.pageSize||20,n=s.length,i=(a-1)*r;return{items:s.slice(i,i+r),page:a,pageSize:r,total:n}},async getFeedbackById(e){return await $t(10),JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]").find(a=>a.id===e)||null},async updateFeedback(e,s,a,r){await $t(50);const n=JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]"),i=n.findIndex(d=>d.id===e);if(i===-1)return null;const l=n[i],o={...l,...s,updatedAt:new Date().toISOString()};if(n[i]=o,localStorage.setItem(le.FEEDBACK,JSON.stringify(n)),s.status&&s.status!==l.status&&(Nt({userId:a,userName:r,role:"ADMIN",eventType:"UPDATE",entityType:"FEEDBACK",entityId:e,description:`    : ${s.status}`,metadata:{oldStatus:l.status,newStatus:s.status}}),s.status==="RESOLVED"&&l.senderUserId)){const d={id:`NOTIF-${Date.now()}`,userId:l.senderUserId,type:"SYSTEM",title:"  ",message:`  : ${l.subject}`,isRead:!1,createdAt:new Date().toISOString(),metadata:{feedbackId:e}},u=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]");u.push(d),localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(u))}return o},async deleteFeedback(e){await $t(50);let s=JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]");const a=s.findIndex(r=>r.id===e);return a===-1?!1:(s[a].status="DISMISSED",s[a].updatedAt=new Date().toISOString(),localStorage.setItem(le.FEEDBACK,JSON.stringify(s)),!0)},async getFeedbackReplies(e){return await $t(10),JSON.parse(localStorage.getItem(le.FEEDBACK_REPLIES)||"[]").filter(a=>a.feedbackId===e).sort((a,r)=>new Date(a.createdAt).getTime()-new Date(r.createdAt).getTime())},async addFeedbackReply(e,s,a,r){await $t(50);const n=JSON.parse(localStorage.getItem(le.FEEDBACK_REPLIES)||"[]"),i={id:`FBR-${Date.now()}`,feedbackId:e,senderUserId:a,senderName:r,message:s,createdAt:new Date().toISOString()};n.push(i),localStorage.setItem(le.FEEDBACK_REPLIES,JSON.stringify(n));const l=JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]"),o=l.findIndex(d=>d.id===e);return o!==-1&&(l[o].updatedAt=new Date().toISOString(),localStorage.setItem(le.FEEDBACK,JSON.stringify(l))),i},async getFeedbackStats(){await $t(10);const e=JSON.parse(localStorage.getItem(le.FEEDBACK)||"[]"),s=new Date,a=new Date(s.getTime()-10080*60*1e3),r=new Date(s.getTime()-720*60*60*1e3),n={NEW:0,IN_REVIEW:0,RESOLVED:0,DISMISSED:0},i={BUG:0,SUGGESTION:0,COMPLAINT:0,QUESTION:0,OTHER:0},l={CUSTOMER:0,SUPPLIER:0,MARKETER:0,EMPLOYEE:0,ADMIN:0,GUEST:0};let o=0,d=0;return e.forEach(u=>{n[u.status]++,i[u.category]++,l[u.senderType]++;const h=new Date(u.createdAt);h>=a&&o++,h>=r&&d++}),{total:e.length,byStatus:n,byCategory:i,bySenderType:l,thisWeek:o,thisMonth:d}},async exportFeedbackToCsv(e){await $t(50);const s=await this.getAdminFeedbackList({...e,page:1,pageSize:1e4}),a=["ID","Date","Sender","Contact","Type","Category","Priority","Subject","Status","Assigned To"],r=s.items.map(i=>[i.id,new Date(i.createdAt).toLocaleDateString("ar-SA"),i.senderName,i.senderContact,i.senderType,i.category,i.priority,i.subject.replace(/,/g,";"),i.status,i.adminAssignedId||"-"]);return[a.join(","),...r.map(i=>i.join(","))].join(`
`)},async createPartnerRequest(e){await $t(100);const s=JSON.parse(localStorage.getItem("partner_requests")||"[]"),a={id:`PR-${Date.now()}-${Math.floor(Math.random()*1e3)}`,...e,status:"NEW",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.push(a),localStorage.setItem("partner_requests",JSON.stringify(s)),Nt({userId:"guest",userName:e.companyName||e.fullName||" ",role:"GUEST",eventType:"CREATE",entityType:"PARTNER_REQUEST",entityId:a.id,description:`  : ${e.type}`,metadata:{type:e.type,phone:e.phone}});const r=ou(),n=JSON.parse(localStorage.getItem(le.NOTIFICATIONS)||"[]"),i={LOCAL_SUPPLIER:" ",INTERNATIONAL_SUPPLIER:" ",MARKETER:"",ADVERTISER:""};return r.forEach(l=>{const o={id:`NOTIF-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,userId:l,type:"SYSTEM",title:"  ",message:`   ${i[e.type]||e.type}: ${e.companyName||e.fullName}`,isRead:!1,createdAt:new Date().toISOString(),metadata:{partnerRequestId:a.id,type:e.type}};n.push(o)}),localStorage.setItem(le.NOTIFICATIONS,JSON.stringify(n)),a},async checkPartnerRequestStatus(e,s){await $t(100);const r=JSON.parse(localStorage.getItem("partner_requests")||"[]").find(i=>i.phone===e&&i.password===s);if(!r)throw new Error("      ");return{NEW:{status:"NEW",message:"     "},UNDER_REVIEW:{status:"UNDER_REVIEW",message:"      "},APPROVED:{status:"APPROVED",message:"   !    "},REJECTED:{status:"REJECTED",message:`  . : ${r.rejectionReason||" "}`},NEEDS_MODIFICATION:{status:"NEEDS_MODIFICATION",message:`  : ${r.modificationNote||"  "}`}}[r.status]||{status:r.status,message:"  "}},async getPartnerRequests(e){await $t(50);let s=JSON.parse(localStorage.getItem("partner_requests")||"[]");if(e!=null&&e.type&&e.type!=="ALL"&&(s=s.filter(o=>o.type===e.type)),e!=null&&e.status&&e.status!=="ALL"&&(s=s.filter(o=>o.status===e.status)),e!=null&&e.search){const o=e.search.toLowerCase();s=s.filter(d=>(d.companyName||"").toLowerCase().includes(o)||(d.fullName||"").toLowerCase().includes(o)||(d.phone||"").includes(o))}s.sort((o,d)=>new Date(d.createdAt).getTime()-new Date(o.createdAt).getTime());const a=s.length,r=(e==null?void 0:e.page)||1,n=(e==null?void 0:e.pageSize)||20,i=(r-1)*n;return{items:s.slice(i,i+n),total:a,page:r,pageSize:n}},async getPartnerRequestById(e){return await $t(10),JSON.parse(localStorage.getItem("partner_requests")||"[]").find(a=>a.id===e)||null},async updatePartnerRequestStatus(e,s,a,r,n){await $t(50);const i=JSON.parse(localStorage.getItem("partner_requests")||"[]"),l=i.findIndex(d=>d.id===e);if(l===-1)return null;const o=i[l];return i[l]={...o,status:s,adminNotes:a||o.adminNotes,rejectionReason:r||o.rejectionReason,modificationNote:n||o.modificationNote,reviewedAt:new Date().toISOString(),updatedAt:new Date().toISOString()},localStorage.setItem("partner_requests",JSON.stringify(i)),Nt({userId:"admin",userName:"",role:"ADMIN",eventType:"UPDATE",entityType:"PARTNER_REQUEST",entityId:e,description:`     : ${s}`,metadata:{oldStatus:o.status,newStatus:s}}),i[l]},async approvePartnerRequest(e,s){await $t(100);const a=JSON.parse(localStorage.getItem("partner_requests")||"[]"),r=a.findIndex(d=>d.id===e);if(r===-1)throw new Error("  ");const n=a[r],i=JSON.parse(localStorage.getItem(le.USERS)||"[]");let l;switch(n.type){case"LOCAL_SUPPLIER":l="SUPPLIER_LOCAL";break;case"INTERNATIONAL_SUPPLIER":l="SUPPLIER_INTERNATIONAL";break;case"MARKETER":l="MARKETER";break;case"ADVERTISER":l="ADVERTISER";break;default:l="SUPPLIER"}const o={id:`user-${Date.now()}`,username:n.phone,password:n.password,name:n.companyName||n.fullName,role:l,status:"ACTIVE",permissions:s||{},createdAt:new Date().toISOString(),partnerRequestId:e};if(i.push(o),localStorage.setItem(le.USERS,JSON.stringify(i)),a[r]={...n,status:"APPROVED",approvedAt:new Date().toISOString(),createdUserId:o.id,updatedAt:new Date().toISOString()},localStorage.setItem("partner_requests",JSON.stringify(a)),n.type==="LOCAL_SUPPLIER"){const d=JSON.parse(localStorage.getItem(le.PROFILES)||"[]"),u={userId:o.id,companyName:n.companyName,city:n.city,commercialRegNumber:n.commercialRegNumber,vatNumber:n.vatNumber,nationalAddress:n.nationalAddressNumber,phone:n.phone,status:"ACTIVE",carBrands:n.carBrands||[],ownBrands:n.ownBrands||[],isSupplier:!0,searchPointsBalance:(s==null?void 0:s.searchPoints)||100,createdAt:new Date().toISOString()};d.push(u),localStorage.setItem(le.PROFILES,JSON.stringify(d))}return Nt({userId:"admin",userName:"",role:"ADMIN",eventType:"CREATE",entityType:"USER",entityId:o.id,description:`      : ${o.name}`,metadata:{type:n.type,phone:n.phone}}),{user:o,request:a[r]}},async getPartnerRequestsStats(){await $t(10);const e=JSON.parse(localStorage.getItem("partner_requests")||"[]"),s=new Date,a=new Date(s.getTime()-10080*60*1e3),r=new Date(s.getTime()-720*60*60*1e3),n={LOCAL_SUPPLIER:0,INTERNATIONAL_SUPPLIER:0,MARKETER:0,ADVERTISER:0},i={NEW:0,UNDER_REVIEW:0,APPROVED:0,REJECTED:0,NEEDS_MODIFICATION:0};let l=0,o=0;return e.forEach(d=>{n[d.type]!==void 0&&n[d.type]++,i[d.status]!==void 0&&i[d.status]++;const u=new Date(d.createdAt);u>=a&&l++,u>=r&&o++}),{total:e.length,byType:n,byStatus:i,thisWeek:l,thisMonth:o}}};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vte=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,r)=>r?r.toUpperCase():a.toLowerCase()),VO=e=>{const s=vte(e);return s.charAt(0).toUpperCase()+s.slice(1)},rF=(...e)=>e.filter((s,a,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===a).join(" ").trim(),yte=e=>{for(const s in e)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=T.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:l,...o},d)=>T.createElement("svg",{ref:d,...Nte,width:s,height:s,stroke:e,strokeWidth:r?Number(a)*24/Number(s):a,className:rF("lucide",n),...!i&&!yte(o)&&{"aria-hidden":"true"},...o},[...l.map(([u,h])=>T.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(e,s)=>{const a=T.forwardRef(({className:r,...n},i)=>T.createElement(wte,{ref:i,iconNode:s,className:rF(`lucide-${bte(VO(e))}`,`lucide-${e}`,r),...n}));return a.displayName=VO(e),a};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Gr=Pe("activity",Ste);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=[["path",{d:"M12 6v16",key:"nqf5sj"}],["path",{d:"m19 13 2-1a9 9 0 0 1-18 0l2 1",key:"y7qv08"}],["path",{d:"M9 11h6",key:"1fldmi"}],["circle",{cx:"12",cy:"4",r:"2",key:"muu5ef"}]],nF=Pe("anchor",jte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Cu=Pe("archive",Ate);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],Cte=Pe("arrow-left-right",Ete);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vf=Pe("arrow-left",Tte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _te=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],el=Pe("arrow-right",_te);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kte=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Ote=Pe("arrow-up-down",kte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Uj=Pe("award",Ite);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],Pte=Pe("badge-dollar-sign",Rte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bp=Pe("ban",Dte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],vr=Pe("bell",Mte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Qx=Pe("book-open",Lte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Mn=Pe("bot",Fte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Hc=Pe("box",Ute);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],iF=Pe("brain",zte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Mu=Pe("briefcase",Bte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],lF=Pe("bug",$te);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Xs=Pe("building-2",qte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],oF=Pe("building",Hte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],GO=Pe("calculator",Vte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fh=Pe("calendar",Gte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Qte=Pe("camera",Wte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Mi=Pe("car",Kte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Rr=Pe("chart-column",Jte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Xte=Pe("check-check",Yte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zt=Pe("check",Zte);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kr=Pe("chevron-down",ese);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vs=Pe("chevron-right",tse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ws=Pe("chevron-left",sse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Wr=Pe("chevron-up",ase);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ma=Pe("circle-alert",rse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],cF=Pe("circle-arrow-down",nse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],zj=Pe("circle-arrow-up",ise);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ut=Pe("circle-check-big",lse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fn=Pe("circle-check",ose);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],m0=Pe("circle-question-mark",cse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],use=Pe("circle-stop",dse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Zs=Pe("circle-x",mse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fse=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],vp=Pe("clipboard-list",fse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],os=Pe("clock",hse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xse=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],dF=Pe("code-xml",xse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],WO=Pe("code",pse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],bse=Pe("cog",gse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vse=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$p=Pe("copy",vse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yse=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],sb=Pe("credit-card",yse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Vo=Pe("database",Nse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],or=Pe("dollar-sign",wse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sse=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cr=Pe("download",Sse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jse=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uF=Pe("earth",jse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ase=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],mF=Pe("ellipsis",Ase);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ese=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ml=Pe("external-link",Ese);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cse=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gr=Pe("eye-off",Cse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fs=Pe("eye",Tse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["path",{d:"M13.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v11.5",key:"4pqfef"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 12v-1",key:"1ej8lb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M8 7V6",key:"1nbb54"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]],Bj=Pe("file-archive",_se);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Rm=Pe("file-image",kse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ose=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],ab=Pe("file-search",Ose);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ise=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],zn=Pe("file-spreadsheet",Ise);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Lt=Pe("file-text",Rse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],$j=Pe("file",Pse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],Mse=Pe("forward",Dse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lse=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],tc=Pe("funnel",Lse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ja=Pe("globe",Fse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],QO=Pe("grip-vertical",Use);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],Bse=Pe("handshake",zse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],qse=Pe("hard-drive",$se);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hse=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],fF=Pe("hash",Hse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],yf=Pe("headphones",Vse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gse=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],xn=Pe("history",Gse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wse=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],rE=Pe("house",Wse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],tl=Pe("image",Qse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mi=Pe("info",Kse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Vc=Pe("key",Jse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],hF=Pe("languages",Yse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Pr=Pe("layers",Xse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zse=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],nE=Pe("layout-dashboard",Zse);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],tae=Pe("layout-grid",eae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],qp=Pe("lightbulb",sae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],qj=Pe("link-2",aae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rae=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],as=Pe("loader-circle",rae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],iae=Pe("lock-open",nae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],h1=Pe("lock-keyhole",lae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wa=Pe("lock",oae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],iE=Pe("log-out",cae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dae=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ll=Pe("mail",dae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Go=Pe("map-pin",uae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mae=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],fae=Pe("map-pinned",mae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hae=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],xae=Pe("maximize-2",hae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pae=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],ya=Pe("megaphone",pae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],xF=Pe("menu",gae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Tu=Pe("message-circle",bae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vae=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],KO=Pe("message-square-plus",vae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Or=Pe("message-square",yae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],wae=Pe("minimize-2",Nae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=[["path",{d:"M5 12h14",key:"1ays0h"}]],lE=Pe("minus",Sae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],pF=Pe("monitor",jae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aae=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],JO=Pe("moon",Aae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eae=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],YO=Pe("move",Eae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],XO=Pe("navigation",Cae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],_ae=Pe("package-plus",Tae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Xt=Pe("package",kae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oae=[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]],Iae=Pe("package-x",Oae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rae=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Wo=Pe("palette",Rae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Gc=Pe("panels-top-left",Pae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dae=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],gF=Pe("pause",Dae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mae=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Qo=Pe("pen-line",Mae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pa=Pe("pen",Lae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Hp=Pe("pencil",Fae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Do=Pe("percent",Uae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vn=Pe("phone",zae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Lu=Pe("play",Bae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pt=Pe("plus",$ae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Fu=Pe("power-off",qae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],nd=Pe("power",Hae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Wc=Pe("printer",Vae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Wae=Pe("receipt",Gae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Ko=Pe("refresh-ccw",Qae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qt=Pe("refresh-cw",Kae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bF=Pe("rotate-ccw",Jae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ds=Pe("save",Yae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Mo=Pe("scale",Xae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ZO=Pe("search-x",Zae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ft=Pe("search",ere);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xi=Pe("send",tre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sre=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Vp=Pe("server",sre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const are=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Km=Pe("settings-2",are);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rre=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],la=Pe("settings",rre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Nf=Pe("shield-alert",nre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ire=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ln=Pe("shield-check",ire);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],ore=Pe("shield-x",lre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ds=Pe("shield",cre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dre=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],ure=Pe("ship",dre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Uu=Pe("shopping-bag",mre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fre=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],$a=Pe("shopping-cart",fre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hre=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],xre=Pe("smartphone",hre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pre=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],pi=Pe("sparkles",pre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gre=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],x1=Pe("square-check-big",gre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bre=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],vre=Pe("square-pen",bre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],e5=Pe("square",yre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nre=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],wre=Pe("star-off",Nre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sre=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pn=Pe("star",Sre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],Hj=Pe("sticky-note",jre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],id=Pe("store",Are);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Cre=Pe("sun",Ere);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],oE=Pe("table",Tre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Vj=Pe("tag",_re);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],vF=Pe("tags",kre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ore=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],hh=Pe("target",Ore);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],wf=Pe("terminal",Ire);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],bu=Pe("test-tube",Rre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],Dre=Pe("text-align-center",Pre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],Lre=Pe("text-align-end",Mre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Ure=Pe("text-align-start",Fre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Jm=Pe("toggle-left",zre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ct=Pe("trash-2",Bre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],qre=Pe("trending-down",$re);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gi=Pe("trending-up",Hre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Gs=Pe("triangle-alert",Vre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Dr=Pe("truck",Gre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],t5=Pe("type",Wre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],s5=Pe("undo-2",Qre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],Jre=Pe("unlink",Kre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ga=Pe("upload",Yre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],f0=Pe("user-check",Xre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sl=Pe("user-plus",Zre);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],vu=Pe("user-x",ene);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bn=Pe("user",tne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gt=Pe("users",sne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],rne=Pe("volume-2",ane);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ine=Pe("wallet",nne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lne=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],one=Pe("wand-sparkles",lne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],yF=Pe("warehouse",cne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dne=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],une=Pe("webhook",dne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mne=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],fne=Pe("wifi",mne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hne=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],sc=Pe("wrench",hne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xne=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],St=Pe("x",xne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pne=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],NF=Pe("zoom-in",pne);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gne=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],al=Pe("zap",gne),{slice:bne,forEach:vne}=[];function yne(e){return vne.call(bne.call(arguments,1),s=>{if(s)for(const a in s)e[a]===void 0&&(e[a]=s[a])}),e}function Nne(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(a=>a.test(e))}const a5=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,wne=function(e,s){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(s);let i=`${e}=${n}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!a5.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!a5.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},r5={create(e,s,a,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+a*60*1e3)),r&&(n.domain=r),document.cookie=wne(e,s,n)},read(e){const s=`${e}=`,a=document.cookie.split(";");for(let r=0;r<a.length;r++){let n=a[r];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(s)===0)return n.substring(s.length,n.length)}return null},remove(e,s){this.create(e,"",-1,s)}};var Sne={name:"cookie",lookup(e){let{lookupCookie:s}=e;if(s&&typeof document<"u")return r5.read(s)||void 0},cacheUserLanguage(e,s){let{lookupCookie:a,cookieMinutes:r,cookieDomain:n,cookieOptions:i}=s;a&&typeof document<"u"&&r5.create(a,e,r,n,i)}},jne={name:"querystring",lookup(e){var r;let{lookupQuerystring:s}=e,a;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const l=n.substring(1).split("&");for(let o=0;o<l.length;o++){const d=l[o].indexOf("=");d>0&&l[o].substring(0,d)===s&&(a=l[o].substring(d+1))}}return a}},Ane={name:"hash",lookup(e){var n;let{lookupHash:s,lookupFromHashIndex:a}=e,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const l=i.substring(1);if(s){const o=l.split("&");for(let d=0;d<o.length;d++){const u=o[d].indexOf("=");u>0&&o[d].substring(0,u)===s&&(r=o[d].substring(u+1))}}if(r)return r;if(!r&&a>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(n=o[typeof a=="number"?a:0])==null?void 0:n.replace("/",""):void 0}}}return r}};let cu=null;const n5=()=>{if(cu!==null)return cu;try{if(cu=typeof window<"u"&&window.localStorage!==null,!cu)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{cu=!1}return cu};var Ene={name:"localStorage",lookup(e){let{lookupLocalStorage:s}=e;if(s&&n5())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(e,s){let{lookupLocalStorage:a}=s;a&&n5()&&window.localStorage.setItem(a,e)}};let du=null;const i5=()=>{if(du!==null)return du;try{if(du=typeof window<"u"&&window.sessionStorage!==null,!du)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{du=!1}return du};var Cne={name:"sessionStorage",lookup(e){let{lookupSessionStorage:s}=e;if(s&&i5())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(e,s){let{lookupSessionStorage:a}=s;a&&i5()&&window.sessionStorage.setItem(a,e)}},Tne={name:"navigator",lookup(e){const s=[];if(typeof navigator<"u"){const{languages:a,userLanguage:r,language:n}=navigator;if(a)for(let i=0;i<a.length;i++)s.push(a[i]);r&&s.push(r),n&&s.push(n)}return s.length>0?s:void 0}},_ne={name:"htmlTag",lookup(e){let{htmlTag:s}=e,a;const r=s||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(a=r.getAttribute("lang")),a}},kne={name:"path",lookup(e){var n;let{lookupFromPathIndex:s}=e;if(typeof window>"u")return;const a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(n=a[typeof s=="number"?s:0])==null?void 0:n.replace("/",""):void 0}},One={name:"subdomain",lookup(e){var n,i;let{lookupFromSubdomainIndex:s}=e;const a=typeof s=="number"?s+1:1,r=typeof window<"u"&&((i=(n=window.location)==null?void 0:n.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[a]}};let wF=!1;try{document.cookie,wF=!0}catch{}const SF=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];wF||SF.splice(1,1);const Ine=()=>({order:SF,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class jF{constructor(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,a)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s,this.options=yne(a,this.options||{},Ine()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Sne),this.addDetector(jne),this.addDetector(Ene),this.addDetector(Cne),this.addDetector(Tne),this.addDetector(_ne),this.addDetector(kne),this.addDetector(One),this.addDetector(Ane)}addDetector(s){return this.detectors[s.name]=s,this}detect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,a=[];return s.forEach(r=>{if(this.detectors[r]){let n=this.detectors[r].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(a=a.concat(n))}}),a=a.filter(r=>r!=null&&!Nne(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}cacheUserLanguage(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||a.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(s,this.options)}))}}jF.type="languageDetector";const Rne={appName:" ",siniCar:" ",appSlogan:"  ",loading:" ...",save:"",cancel:"",confirm:"",delete:"",edit:"",add:"",search:"",filter:"",reset:" ",back:"",next:"",previous:"",close:"",submit:"",yes:"",no:"",all:"",none:" ",export:"",import:"",refresh:"",view:"",details:"",actions:"",status:"",date:"",time:"",total:"",price:"",quantity:"",name:"",email:" ",phone:"",address:"",city:"",region:"",country:"",notes:"",description:"",active:"",inactive:" ",enabled:"",disabled:"",success:" ",error:"",warning:"",info:"",noData:"  ",noResults:"  ",selectOption:" ",required:"",optional:"",language:"",welcome:"",page:"",of:"",currency:".",order:"",notSpecified:" ",sort:"",download:"",upload:"",first:"",last:"",selectAll:" ",deselectAll:" "},Pne={wholesaleLogin:"   ",b2bPortal:"   ",ownerLogin:" ",staffLogin:" ",clientId:" ",phoneNumber:" ",password:" ",activationCode:" ",rememberMe:"",forgotPassword:"  ",enter:"",verifying:" ...",secureConnection:"  ",securityNote:"      .    .",openNewAccount:"   ",invalidCredentials:"   ",loginSuccess:"   ",logoutSuccess:"   ",enterAsGuest:" ",guest:"",guestWelcome:"  !    ",title:" ",subtitle:"   ",phone:" ",phonePlaceholder:"  ",passwordPlaceholder:"  ",loginButton:"",loggingIn:" ...",noAccount:"  ",registerHere:" ",errors:{phoneRequired:"  ",passwordRequired:"  ",invalidCredentials:"   ",accountSuspended:" ",tooManyAttempts:" .  "},success:"   ",quickLoginForTesting:"  ",quickAdmin:" ",quickManager:"",quickStaff:"",quickCustomer:"",quickSupplier:"",quickMarketer:""},Dne={verifyingCredentials:"   ...",connectingWarehouse:"  ...",loadingCatalog:"   ...",applyingDiscounts:"    ...",syncingInventory:"   ...",optimizingLogistics:"   ...",finalizingSetup:"   ...",accessGranted:"   !"},Mne={mainServer:" ",connectingServer:"   ...",dataSync:" ",syncingData:"    ...",logistics:" ",connectingWarehouses:"      ..."},Lne={dismiss:"",campaignOf:" {{current}}  {{total}}",next:"",understood:""},Fne={restrictedTitle:"   ",restrictedSubtitle:"    B2B",restrictedMessage:"   :",targetAudience:{partsStores:"  ",insuranceCompanies:" ",rentalCompanies:"  ",salesReps:"  "},benefitsTitle:"  ",benefits:{prices:"  ",catalog:"   ",orders:"   ",support:"  "},callToAction:"           !",loginButton:" ",requestAccountButton:"   ",browseOnly:" ",blurredResultsNote:"   ",loginToAccess:"   ",searchDisabled:"    "},Une={title:"   ",openNewAccount:"  ",subtitle:"               .",businessInfo:" ",businessName:" ",businessNameAr:"  ()",businessNameEn:"  ()",commercialRegister:" ",taxNumber:" ",businessType:" ",selectBusinessType:"  ",contactInfo:" ",ownerName:" ",ownerPhone:"  ",ownerEmail:"  ()",addressInfo:" ",fullAddress:" ",nationalAddress:"  ",nationalAddressPlaceholder:": RDJ2929",city:"",region:"",postalCode:" ",branchesCount:" ",submitRequest:"   ",backToLogin:"  ",requestSuccess:"   !",requestPending:"  ",requestSuccessMessage:" .                .",backToHome:" ",benefits:{exclusivePrices:"  ",instantAccess:"  ",taxInvoices:"  "},businessTypes:{sparePartsShop:"  ",maintenanceCenter:" ",insuranceCompany:" ",rentalCompany:" ",salesRep:" ",workshop:" ",store:"  ",distributor:"",agency:"",other:""},salesRepFields:{fullName:" ",phone:" ",region:" /  ",email:"  ()",clientsType:"  ( ...)",clientsCount:"  "},documents:{title:" ",requiredDocuments:" ",instructions:"     PDF   .      .",uploadNotice:"     PDF   .      .",crCertificate:"  ",vatCertificate:"  ",nationalId:"  ",nationalAddressCert:"  ",clickToUpload:"  ",fileTypes:"PDF, JPEG, PNG, WebP (  5MB)",uploadSuccess:"  ",invalidFileType:"   .   PDF   (JPEG, PNG, WebP)",fileTooLarge:"   .   5 "},businessFields:{businessName:" ",branchesCount:" ",city:"",nationalAddress:"  ",nationalAddressPlaceholder:": RDJ2929",commercialReg:" ",vatNumber:" ",contactPerson:" ",phone:" ",emailOptional:"  ()"},success:{title:"   !",message:" .                .",backToHome:" "},validation:{phoneRequired:"  ",fullNameRequired:"  ",regionRequired:"   ",businessNameRequired:"  ",cityRequired:" ",contactPersonRequired:"  ",commercialRegRequired:"  ",vatRequired:"  ",nationalAddressRequired:"  ",documentRequired:""},additionalNotes:" ",submitting:" ...",submitError:"   "},zne={home:"",dashboard:" ",products:"",catalog:"",orders:"",myOrders:"",cart:"",customers:"",users:"",roles:"",settings:"",profile:" ",notifications:"",reports:"",analytics:"",help:"",support:"",about:"",contact:" ",logout:" ",accountRequests:" ",statusLabels:" ",systemSettings:" "},Bne={title:" ",welcome:"",overview:" ",statistics:"",recentOrders:" ",recentActivity:" ",quickActions:" ",totalSales:" ",totalOrders:" ",totalCustomers:" ",totalProducts:" ",pendingOrders:" ",processingOrders:"  ",completedOrders:" ",cancelledOrders:" ",revenue:"",salesChart:" ",topProducts:"  ",topCustomers:" ",lowStock:" ",newCustomers:" ",monthlyRevenue:" ",weeklyOrders:" ",dailySales:" ",customerDashboard:"  ",adminDashboard:"  "},$ne={title:"",catalog:" ",addProduct:" ",editProduct:" ",deleteProduct:" ",productDetails:" ",productName:" ",productNameAr:"  ()",productNameEn:"  ()",sku:" ",barcode:"",category:"",subcategory:" ",brand:" ",manufacturer:" ",price:"",wholesalePrice:" ",retailPrice:" ",costPrice:" ",stock:"",stockQuantity:" ",minStock:"  ",maxStock:"  ",unit:"",weight:"",dimensions:"",image:"",images:"",specifications:"",description:"",shortDescription:" ",longDescription:" ",tags:"",status:"",available:"",outOfStock:" ",discontinued:"",featured:"",newArrival:" ",bestSeller:" ",onSale:"",discount:"",addToCart:" ",buyNow:" ",quantity:"",totalPrice:" ",searchProducts:"  ...",filterByCategory:"  ",filterByBrand:"   ",filterByPrice:"  ",sortBy:" ",priceAsc:":   ",priceDesc:":   ",nameAsc:": -",nameDesc:": -",newest:"",oldest:"",noProducts:"  ",productAdded:"   ",productUpdated:"   ",productDeleted:"   "},qne={title:"",myOrders:"",allOrders:" ",newOrder:" ",createOrder:" ",orderDetails:" ",orderNumber:" ",orderDate:" ",orderStatus:" ",orderItems:" ",orderTotal:" ",subtotal:" ",tax:"",shipping:"",discount:"",grandTotal:" ",paymentMethod:" ",paymentStatus:" ",shippingAddress:" ",billingAddress:" ",trackOrder:" ",cancelOrder:" ",reorder:" ",printInvoice:" ",downloadInvoice:" ",orderConfirmed:"  ",orderShipped:" ",orderDelivered:" ",orderCancelled:" ",orderPending:" ",orderProcessing:" ",orderCompleted:"",orderRefunded:"",noOrders:"  ",searchOrders:"  ...",filterByStatus:"  ",filterByDate:"  ",orderCreated:"   ",orderUpdated:"   ",orderCancelledSuccess:"   "},Hne={title:" ",emptyCart:" ",addItems:"  ",continueShopping:" ",checkout:" ",clearCart:" ",updateCart:" ",itemAdded:"   ",itemRemoved:"    ",cartUpdated:"  ",cartCleared:"  ",proceedToCheckout:" ",estimatedTotal:" "},Vne={title:"",allCustomers:" ",addCustomer:" ",editCustomer:" ",customerDetails:" ",customerName:" ",clientId:" ",businessName:" ",contactPerson:" ",phone:"",email:" ",address:"",city:"",region:"",creditLimit:" ",currentBalance:" ",totalPurchases:" ",lastOrder:" ",status:"",activeCustomer:" ",inactiveCustomer:"  ",blockedCustomer:" ",verifiedCustomer:" ",pendingVerification:" ",searchCustomers:"  ...",noCustomers:"  ",customerAdded:"   ",customerUpdated:"   ",customerDeleted:"   "},Gne={title:"",allUsers:" ",addUser:" ",editUser:" ",deleteUser:" ",userDetails:" ",username:" ",fullName:" ",email:" ",phone:"",role:"",permissions:"",status:"",activeUser:" ",inactiveUser:"  ",lastLogin:" ",createdAt:" ",searchUsers:"  ...",noUsers:"  ",userAdded:"   ",userUpdated:"   ",userDeleted:"   ",passwordReset:"    ",sendPasswordReset:"   "},Wne={title:" ",allRoles:" ",addRole:" ",editRole:" ",deleteRole:" ",roleDetails:" ",roleName:" ",roleDescription:" ",permissions:"",assignedUsers:" ",superAdmin:" ",admin:"",manager:"",salesManager:" ",salesAgent:" ",viewer:"",customer:"",staff:"",noRoles:"  ",roleAdded:"   ",roleUpdated:"   ",roleDeleted:"   "},Qne={title:"",viewDashboard:"  ",viewProducts:" ",manageProducts:" ",viewOrders:" ",manageOrders:" ",viewCustomers:" ",manageCustomers:" ",viewUsers:" ",manageUsers:" ",viewRoles:" ",manageRoles:" ",viewSettings:" ",manageSettings:" ",viewReports:" ",exportData:" ",importData:" ",deleteData:" ",fullAccess:" "},Kne={title:"",general:"",appearance:"",language:"",selectLanguage:" ",notifications:"",security:"",privacy:"",account:"",profile:" ",changePassword:"  ",twoFactorAuth:" ",sessions:"",apiKeys:" API",webhooks:"Webhooks",integrations:"",backup:" ",restore:"",export:"",import:"",theme:"",darkMode:" ",lightMode:" ",autoMode:"",timezone:" ",dateFormat:" ",currency:"",settingsSaved:"  ",settingsReset:"   "},Jne={title:"  ",pending:" ",approved:" ",rejected:"",underReview:" ",requestDate:" ",reviewDate:" ",reviewedBy:"",approve:"",reject:"",requestDetails:" ",noRequests:"  ",requestApproved:"   ",requestRejected:"  "},Yne={title:" ",addLabel:" ",editLabel:" ",deleteLabel:" ",labelName:" ",labelNameAr:"  ()",labelNameEn:"  ()",labelColor:" ",labelType:" ",orderStatus:" ",customerStatus:" ",productStatus:" ",noLabels:"  ",labelAdded:"   ",labelUpdated:"   ",labelDeleted:"   "},Xne={title:"",salesReport:" ",ordersReport:" ",customersReport:" ",productsReport:" ",inventoryReport:" ",financialReport:" ",generateReport:" ",downloadReport:" ",printReport:" ",dateRange:" ",from:"",to:"",today:"",yesterday:"",thisWeek:" ",lastWeek:" ",thisMonth:" ",lastMonth:" ",thisYear:" ",custom:""},Zne={title:"",allNotifications:" ",unread:" ",read:"",markAsRead:" ",markAllAsRead:"  ",clearAll:" ",noNotifications:"  ",newOrder:" ",orderUpdate:" ",newCustomer:" ",lowStock:" ",paymentReceived:"  ",systemUpdate:" "},eie={somethingWrong:"  ",tryAgain:"   ",pageNotFound:"  ",accessDenied:"   ",sessionExpired:"  ",networkError:"  ",serverError:"  ",validationError:"  ",requiredField:"  ",invalidEmail:"   ",invalidPhone:"   ",passwordMismatch:"   ",weakPassword:"  "},tie={deleteItem:"      ",deleteItems:"      ",cancelOrder:"      ",logout:"     ",clearCart:"     ",discardChanges:"     ",actionCannotBeUndone:"     "},sie={panel:" ",systemSettings:" ",manageAll:" ",superAdmin:" ",salesManager:" ",salesAgent:" ",viewer:" "},aie={welcomeBack:"  {{name}}",totalOrders:" ",pendingRequests:"  ",approvedOrders:"  ",quickActions:" ",fastShipping:" ",fastShippingDesc:"  24-48   ",qualityGuarantee:" ",qualityGuaranteeDesc:"      ",support:"  ",supportDesc:"      ",needHelp:" ",needHelpDesc:"     ",callUs:" ",whatsapp:""},rie={mainMenu:" ",management:"",supportSection:"",home:"",orders:" ",quotes:" ",import:"  ",traderTools:" ",history:" ",organization:" ",teamManagement:" ",support:"  / ",searchCredits:"  ",unlimitedSearch:" "},nie={heroTitle:"    ",heroSubtitle:"                .",searchTip:"       ",searchPlaceholder:"    ...",searching:" ...",noResults:"  ",pressSearch:"      :",partNotAvailable:"   ",noResultsFor:"     :",outOfStock:" ",outOfStockMessage:"     ",available:"",priceNotAvailable:"  ",showPrice:"",addToCartTip:"  ()    ",whoWeServe:" ",whoWeServeSubtitle:"    ",partsStores:"  ",partsStoresDesc:"          .",insuranceCompanies:" ",insuranceDesc:"         .",rentalCompanies:" ",rentalDesc:"         .",salesReps:" ",salesRepsDesc:"         .",mainServices:"   ",mainServicesSubtitle:"   ",quoteRequests:"  (Excel)",quoteRequestsDesc:"            .",importFromChina:"  ",importFromChinaDesc:"             .",wholesaleOrders:"  ",wholesaleOrdersDesc:"           PDF.",staffBranches:"  ",staffBranchesDesc:"          .",howItWorks:"  ",howItWorksSubtitle:"   ",step1Title:"  ",step1Desc:"        .",step2Title:" ",step2Desc:"      .",step3Title:" ",step3Desc:"        .",step4Title:" ",step4Desc:"       .",whySiniCar:"  ",whySiniCarSubtitle:"   ",expertiseTitle:" ",expertiseDesc:"         .",techTitle:" ",techDesc:"       .",globalTitle:" ",globalDesc:"     3   .",supportTitle:"  B2B",supportDesc:"        .",wholesaleCart:"  ",emptyCart:" ",useSearchToAdd:"   ",estimatedTotal:" ()",submitOrder:" ",fastShipping:" ",fastShippingDesc:"  24       .",techSupport:"  ",techSupportDesc:"        .",searchHistory:"  ",partNumber:" ",productName:" ",viewDate:" ",recordedPrice:" ",noSearchHistory:"     ",sar:".",enterValidPartNumber:"     .",unexpectedError:"       .",orderSubmitError:"    ",pageView:" :",addToCart:" ",priceModal:{productDetails:" ",wholesalePrice:" ",quantity:"",total:"",addToCart:" ",close:""},duplicateConfirm:{title:" ",message:"     .    ",confirm:"  ",cancel:""},orderSuccess:{title:"   !",message:"     "},welcome:"",dashboard:" ",searchProducts:"  ",search:"",recentOrders:" ",viewAll:" ",noRecentOrders:"   ",recentQuotes:"  ",noRecentQuotes:"    ",quickActions:" ",newOrder:" ",newQuote:" ",myAccount:"",support:"",stats:{totalOrders:" ",pendingOrders:"  ",totalSpent:" ",searchPoints:" "},searchResults:" ",cart:"",checkout:" ",total:"",currency:"."},iie={mainSection:"",ordersCustomersSection:" ",settingsSection:"",dashboard:" ",activityLog:" ",customerOrders:" ",accountRequests:" ",customersCRM:"  (CRM)",quoteRequests:" ",importRequests:" ",missingParts:"",products:"",users:"",systemSettings:" ",marketingCenter:" ",pricingCenter:" ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",customerPortalSettings:"  ",aiSettings:"  ",aiTraining:"  ",aiCommandCenter:"  AI",connected:" ",slowConnection:" ",disconnected:" ",pageTitles:{dashboard:"  ",ordersManager:"  ",activityLogs:" ",accountRequests:"   ",customers:"   (CRM)",quotes:"  ",imports:" ",missing:"",settings:" ",users:" ",products:" ",marketing:" ",pricing:" ",traderTools:"  ",supplierMarketplace:"  ",marketers:" ",installments:"  ",advertising:" ",customerPortal:"  ",teamSettings:" ",aiSettings:"  ",aiTraining:"   ",aiCommandCenter:"   "},stats:{totalRevenue:" ",todayRevenue:" ",pendingOrders:" ",approvedOrders:"  ",shippedOrders:" ",cancelledOrders:" ",totalProducts:" ",outOfStock:" ",activeBusinesses:" ",pendingAccounts:" ",pendingQuotes:" "},kpi:{revenue:"",orders:"",inventory:"",customers:""},activity:{logins:" ",ordersCreated:" ",quotesRequested:" ",searchesPerformed:" "},charts:{dailyOrders:" ",dailyRevenue:" ",topCustomers:" ",topMissingParts:"  ",revenue:""},views:{dashboard:" ",customers:" ",products:"",settings:"",quotes:" ",missing:"",importRequests:" ",accountRequests:" ",activityLogs:" ",ordersManager:" ",adminUsers:"",marketing:" ",pricing:" ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",teamSettings:" ",customerPortal:" ",aiSettings:" ",aiTraining:"  ",aiCommandCenter:"  AI"},onlineUsers:{title:"  ",subtitle:"   5 ",now:"",minutesAgo:" {{mins}} ",online:"",noOnlineUsers:"    ",moreOnline:" {{count}}   ..."},activityLogs:{title:" ",activity:"",time:"",user:"",event:"",details:"",noActivities:"   "},generalManager:" ",teamSettings:" "},lie={title:"   (CRM)",loading:"  ...",stats:{totalCustomers:" ",activeCustomers:" ",blockedSuspended:"/",mostActiveCustomer:" "},searchPlaceholder:"      ...",allStatuses:" ",filters:{searchPlaceholder:"    ...",allStatuses:" ",advanced:" ",customerType:" ",allTypes:" ",activityLevel:" ",allActivity:" ",activeToday:" ",activeWeek:"  ",inactive30:"  (+30 )",marketer:" ",allMarketers:" ",employee:" ",allEmployees:" ",clearAll:" ",resultsCount:"   {{count}} ",mostOrders:" ",mostSearches:" ",lastActive:" "},table:{customer:"",city:"",priceLevel:" ",ordersCount:" ",totalPurchases:" ",status:"",actions:""},view:"",noMatchingCustomers:"   ",status:{active:"",suspended:"",blocked:"",pending:" ",inactive:" "},addCustomer:{button:"  ",title:"  ",subtitle:"   ",saving:" ...",submit:" ",success:"    ",fields:{companyName:" ",phone:" ",email:" ",city:"",region:"",customerType:" ",priceLevel:" ",crNumber:"  ",taxNumber:" ",nationalAddress:" ",contactPerson:" ",searchPoints:" ",branchesCount:" ",status:" ",internalNotes:" "},placeholders:{companyName:"    ",selectCity:" ",selectRegion:" ",nationalAddress:": RRRD1234, 1234,  , ",contactPerson:"  ",internalNotes:"   ..."},types:{autoPartsShop:"  ",maintenanceCenter:" ",autoShowroom:" ",carRental:"  ",government:" ",other:""},priceLevels:{level1:"  ()",level2:" ",level3:" ",special:" "},errors:{companyNameRequired:"  ",phoneRequired:"  ",cityRequired:" ",failed:"    "}},errors:{loadFailed:"    "},panel:{title:" ",tabs:{overview:" ",orders:"",activity:""},businessInfo:" ",companyName:" ",city:"",phone:"",crNumber:" ",priceLevel:" ",customerType:" ",accountStatus:" ",searchBalance:" ",staffUsers:"",accessValidity:" ",ordersHistory:" ",activityLog:" "},toast:{loadError:"    "},detail:{tabs:{overview:" ",orders:"",quotes:"",staff:"",security:" ",notes:""},accountManagement:" ",changeStatus:" ",statusActive:" (Active)",statusSuspended:"  (Suspend)",statusBlocked:"  (Block)",suspendUntil:"  ",saving:" ...",saveChanges:" ",statusUpdated:"   ",errorOccurred:" ",priceDisplayType:"  ",pricesVisible:"   -   ",pricesHidden:"  -    ",visibleNoPoints:"  ( )",hiddenWithPoints:"  ()",visible:"",hidden:"",priceDisplayChanged:"     ",searchWallet:" ",addBalance:" ",deductBalance:" ",totalBalance:" ",used:"",remaining:"",joinDate:" ",lastLogin:"  ",customerDocs:" ",commercialRegistration:" ",vatCertificate:" ",nationalId:" ",notAttached:" ",noDocument:" ",enterPointsToAdd:"   :",pointsAddedSuccess:"  {{points}}  ",currentBalance:" :",points:"",enterPointsToDeduct:"   :",cannotDeductMoreThan:"      ",pointsDeductedSuccess:"  {{points}}  ",errorDeductingPoints:"    ",staffStatusUpdated:"   ",customerOrders:" ",noOrders:"  ",orderNumber:" ",date:"",amount:"",orderStatus:"",priceQuotes:" ",noQuotes:"   ",quoteNumber:" ",items:"",staffMembers:" ",noStaff:"   ",staffName:" ",role:"",lastActive:" ",action:"",suspend:"",activate:"",securityAccessLogs:"  ",loginHistory:" ",device:"",ipAddress:"IP",location:"",adminNotes:" ",noNotes:"  ",addNote:" ...",writeNote:"  ...",notePlaceholder:"  ...",addNoteBtn:" ",docs:{commercialReg:" ",taxNumber:" ",nationalAddress:" ",notAttached:" ",notAvailable:" "},staff:{staffMembers:" ",maxLimit:" ",owner:"",active:"",suspended:"",suspendBtn:"",activateBtn:""},orders:{customerOrders:" ",completed:"",ongoing:"",loadingOrders:"  ...",noOrders:"    ",unspecified:" ",products:"",item:"",total:"",date:"",currency:".",showingOf:" {{shown}}  {{total}} "},quotes:{pricingRequests:" ",approved:"",new:"",loadingQuotes:"   ...",noQuotes:"     ",unspecified:" ",items:"",item:"",total:"",date:"",currency:".",pendingPricing:" ",showingOf:" {{shown}}  {{total}}  ",missing:"",reviewedBy:""},security:{securityIndicators:" ",failedLoginAttempts:"  ",suspiciousBehavior:"  (Flag)",yes:"",no:"",resetCounter:"    (Reset)",counterReset:"  ",passwordReset:"   ",passwordResetDesc:"        .        .",enterNewPassword:"    (4   ):",adminNotFound:":      ",passwordResetError:"      ",passwordMinLength:"     4   ",resetPasswordBtn:"   ",recentLoginHistory:"  ",successfulLogin:" ",failedLogin:" ",passwordChanged:"  ",passwordResetAdmin:"  (Admin)",noLogsAvailable:"   "},notes:{adminNotes:" ",addNew:"  ",placeholder:"  ...",addNote:" ",adding:" ...",addedSuccess:"   ",addError:"   ",emptyError:"  ",previousNotes:" ",noNotes:"   ",addFirst:"    ",saveNote:" "}}},oie={systemSettings:" ",generalSettings:" ",bannerManagement:" ",whySiniCar:"  ",textManagement:" ",statusLabels:" ",apiIntegration:"  (API)",appearanceIdentity:" ",siteSettings:"  ",saveChanges:" ",saving:" ...",siteName:"  / ",supportPhone:"  ",salesWhatsApp:"  ",supportEmail:"  ",newsTicker:"  ",enableTicker:" ",tickerText:" ",tickerSpeed:" (1-10)",bgColor:"  (Hex)",textColor:"  (Hex)",productDisplaySettings:"   ",minVisibleQty:"    ",minVisibleQtyNote:"          (: 1)",stockThreshold:"  ( )",stockThresholdNote:'           " " (: 0)',settingsNote:"        .       .",maintenanceMode:" ",maintenanceModeDesc:'       " "  .',bannerAds:"  ",bannerAdsDesc:"        ",addNewBanner:"  ",newBannerData:"  ",mainTitle:" ",subtitle:" ",buttonText:"  (:  )",colorScheme:"",imageUrl:"  ()",saveAndPublish:" ",uiTextManagement:"   ",uiTextManagementDesc:"        .",saveTexts:" ",erpIntegration:"  (ERP Integration)",erpIntegrationDesc:"   Onyx ERP    ",connectionSettings:" ",erpUrl:"   (Cloud ERP URL)",apiToken:"  (API Token)",syncFrequency:"  (Sync Frequency)",realtime:" (Real-time)",every15Min:" 15 ",hourly:" ",daily:"",environment:" ",production:"Production (Live)",sandbox:"Sandbox (Test)",testConnection:"  ",connecting:" ...",connectionSuccess:"    (200 OK)",connectionFailed:" :   ",sharedData:"   API",sharedDataDesc:"        ",productsItems:" ",productsItemsDesc:"  ",ordersData:"",ordersDataDesc:"  ",customersData:"",customersDataDesc:"  ",quotesData:" ",quotesDataDesc:"  ",inventoryData:"",inventoryDataDesc:"  ",priceLists:" ",priceListsDesc:"  ",syncDirection:" ",pullOnly:"  ERP ",pullOnlyDesc:"    ",pushOnly:"  ERP ",pushOnlyDesc:"   ",bidirectional:" ",bidirectionalDesc:"   ",webhooks:"Webhooks ( )",webhooksDesc:"        ",addWebhook:"",events:"",webhookAdded:"  Webhook ",loadingFailed:"   ",settingsSaved:"   ",saveError:"   ",fillTitleAndDesc:"   ",bannerAdded:"  ",bannerDeleted:"  ",confirmDeleteBanner:"      ",hide:"",show:"",darkGray:"  ()",royalBlue:" ",vibrantOrange:" ",darkGreen:" ",loading:" ...",advancedSettings:" ",loggingLevel:" ",loggingLevelBasic:"Basic",loggingLevelDetailed:"Detailed",loggingLevelDebug:"Debug ()",retryOnFail:"   ",retryAttempts:"",timeout:"  (Timeout)",seconds:"",featureManagement:'  "  "',featureManagementDesc:"      .     .",addNewFeature:"  ",fillAllFields:"   ",featureAdded:"   ",featureDeleted:"  ",title:"",description:"",icon:"",iconBox:"",iconChart:"",iconAnchor:"",iconHeadphones:"",iconTruck:"",iconShield:"",iconGlobe:" ",iconStar:"",iconClock:"",iconAward:"",iconColor:" ",colorCyan:"",colorGreen:"",colorGold:"",colorPurple:"",colorRed:"",colorBlue:"",colorPink:"",colorOrange:"",appearanceCustomization:" ",primaryColor:"  ",primaryColorDesc:"       .",siteLogo:"  (Logo)",uploadNotAvailable:"      ",clickToUploadLogo:"  ",livePreview:" ",livePreviewDesc:"     ",primaryButtonExample:"  ",statusLabelsManagement:"  ",statusLabelsDescription:"            .           .",addNewStatus:"  ",statusKey:" ()",statusLabel:" ",newStatus:" ",backgroundColor:"",preview:"",add:"",statusUpdated:"   ",fillKeyAndName:"   ",keyExists:"   ",statusAdded:"    ",cannotDeleteSystem:"    ",cannotDeleteInUse:"    {{count}}    ",statusDeleted:"   ",defaultStatusSet:"   ",checkingUsage:"   ...",confirmDelete:"    ",yesDelete:" ",systemStatus:"",defaultStatus:"",setAsDefault:" ",systemStatuses:" ",systemStatusesDesc:"         .      .",defaultStatusInfo:" ",defaultStatusInfoDesc:"    .        .",statusCategories:{orderStatus:"  ( )",orderInternalStatus:"  ",accountRequestStatus:"  ",quoteRequestStatus:"  ",quoteItemStatus:"  ",missingStatus:" ",importRequestStatus:"  ",customerStatus:" ",staffStatus:" "},guestMode:" ",guestModeSettings:"  ",guestModeSettingsDesc:"         .  /     .",guestBrowsingEnabled:"  ",guestBrowsingEnabledDesc:"      ",visibleSections:"  ( )",visibleSectionsDesc:"       ",showBusinessTypes:' " " ( )',showMainServices:"  ",showHowItWorks:' "  "',showWhySiniCar:' "  "',showCart:"  ",showMarketingCards:"  ",blurSettings:" ",blurIntensity:" ",blurLight:"",blurMedium:"",blurHeavy:"",showBlurOverlay:"    ",showBlurOverlayDesc:'  " "   ',searchSettings:"  ",allowSearch:" ",allowSearchDesc:"    ( )",showSearchResults:"  ",showSearchResultsDesc:"     ",guestSettingsSaved:"     ",general:{title:" ",siteName:" ",siteDescription:" ",contactEmail:"  ",contactPhone:" ",currency:"",language:"",timezone:" ",save:"",saved:"  "},business:{title:" ",minOrderAmount:"  ",maxOrderAmount:"  ",deliveryFee:" ",taxRate:" "},notifications:{title:" ",emailNotifications:" ",smsNotifications:" ",pushNotifications:" "},security:{title:" ",twoFactorAuth:" ",sessionTimeout:" ",maxLoginAttempts:"   "}},cie={title:" ",newOrders:" ",inProgress:" ",readyToShip:" ",totalOrders:" ",searchOrder:"     ...",allStatuses:" ",allInternalStatuses:"  ",orderNumber:" ",customer:"",date:"",total:"",status:"",internalStatus:" ",actions:"",noOrders:"  ",orderDetails:" ",customerInfo:" ",orderItems:" ",statusHistory:" ",internalNotes:" ",updateStatus:" ",updateInternalStatus:"  ",externalStatusUpdated:"    ",internalStatusUpdated:"    ",updateFailed:"  ",statusLabels:{pending:" ",approved:" ",shipped:" ",delivered:" ",rejected:"",cancelled:""},internalStatusLabels:{new:"",sentToWarehouse:" ",waitingPayment:" ",paymentConfirmed:" ",salesInvoiceCreated:"  ",readyForShipment:" ",completedInternal:" ",cancelledInternal:" "},details:"",name:"",userId:"",product:"",quantity:"",price:"",itemTotal:"",grandTotal:" ",changedStatusTo:"  ",noHistory:"   ",externalStatus:"  (External)",externalStatusDesc:"      .",noStatusPermission:"    ",internalStatusTitle:"  (Internal)",internalStatusDesc:"  .   .",notesPlaceholder:"     ...",saveNotes:" ",noInternalPermission:"     ",dangerZone:" ",cancelOrder:"  ",noPermission:"  ",stats:{pending:" ",processing:" ",shipped:" ",delivered:" ",cancelled:"",total:"",new:"",ready:" "},searchPlaceholder:"    ...",table:{orderId:" ",customer:"",items:"",total:"",date:"",status:"",actions:""},view:"",approve:"",ship:"",deliver:"",cancel:"",orderUpdated:"  ",shippingInfo:" ",paymentInfo:" ",noteAdded:"  "},die={title:"   ",newRequests:" ",underReview:" ",approved:" ",rejected:"",searchAccount:"     ...",allStatuses:" ",businessName:" ",phone:"",requestDate:" ",status:"",actions:"",noRequests:"  ",requestDetails:" ",businessInfo:" ",contactInfo:" ",documents:"",decision:"",priceLevel:" ",customerType:" ",searchPoints:" ",initialPoints:" ",monthlyPoints:" ",portalAccess:" ",startDate:" ",endDate:" ",openEnded:"",staffAccess:" ",canCreateStaff:"  ",maxStaffUsers:"  ",adminNotes:" ",saveDecision:" ",decisionSaved:"   ",saveError:"   ",statusLabels:{new:" ",underReview:" ",approved:" ",rejected:"",onHold:""},documentTypes:{crCertificate:" ",vatCertificate:"  ",nationalId:" ",authorizationLetter:" ",other:" "}},uie={stats:{newRequests:" ",underReview:" ",approved:" ",rejected:""},status:{new:" ",underReview:" ",approved:" ",rejected:"",onHold:""},docTypes:{crCertificate:" ",vatCertificate:"  ",nationalId:" ",authLetter:" ",other:" "},categories:{spareParts:"  ",rental:" ",insurance:" ",agent:""},searchPlaceholder:"   ...",allStatuses:" ",table:{businessName:"  / ",activityType:" ",city:"",date:"",status:"",actions:""},approvedAccount:" ",view:"",noMatchingRequests:"   ",panel:{title:"  ",customerData:" ",businessName:" ",activity:"",city:"",contactNumber:" ",crNumber:" ",vatNumber:" ",customerNotes:" ",attachedDocuments:" ",adminDecision:"  "},form:{requestStatus:" ",statusNew:"",statusUnderReview:" ",statusApproved:" ()",statusRejected:"",statusOnHold:"",customerType:" ",typePartsShop:"  ",typeRentalCompany:" ",typeInsuranceCompany:" ",typeSalesAgent:"",typeFleetCustomer:" ",typeOther:"",priceLevel:" ",level1:"Level 1 (VIP -  )",level2:"Level 2 ()",level3:"Level 3 (/)",levelSpecial:"",accessValidity:" ",to:"",openEnded:"  (  )",searchPoints:"  ",initialBalance:" ",monthlyRenewal:" ",allowAddStaff:"  ",maxLimit:" ",adminNotes:"  ( )",notesPlaceholder:"    ...",saveDecision:" ",cancel:""},toast:{saveSuccess:"   ",saveError:"   "}},mie={title:"  ",pendingQuotes:" ",completedQuotes:" ",searchQuote:"     ...",allStatuses:" ",quoteNumber:" ",customer:"",date:"",itemsCount:" ",status:"",actions:"",noQuotes:"   ",quoteDetails:"  ",requestedItems:" ",response:"",sendResponse:" ",stats:{new:"",inProgress:" ",completed:"",approved:""},searchPlaceholder:"    ...",table:{quoteId:"  ",customer:"",items:"",priceType:" ",date:"",status:"",actions:""},view:"",process:"",complete:"",approve:"",quoteUpdated:"   ",pricedItems:" ",missingItems:" "},fie={title:" ",subtitle:"    ",searchPlaceholder:"  ...",addProduct:" ",importExcel:" Excel",exportExcel:" Excel",columnSettings:" ",visibilitySettings:" ",stats:{totalProducts:" ",inStock:"",outOfStock:" ",hidden:""},table:{partNumber:" ",name:" ",brand:"",quantity:"",price:"",visibility:"",actions:""},modal:{addTitle:"  ",editTitle:" ",deleteConfirm:" ",deleteMessage:"      ",importTitle:"  Excel",columnSettingsTitle:"  Excel"},form:{partNumber:" ",name:" ",brand:"",quantity:"",price:"",costPrice:" ",description:"",isVisible:" ",save:"",cancel:""},import:{selectFile:"  Excel",dragDrop:"    ",processing:" ...",success:"  ",imported:" ",updated:" ",skipped:" ",errors:""},validation:{partNumberRequired:"  ",nameRequired:"  ",priceInvalid:"  ",quantityInvalid:"  "},toast:{productCreated:"   ",productUpdated:"   ",productDeleted:"   ",importSuccess:"   ",createError:"   ",updateError:"   ",deleteError:"   ",importError:"   ",loadError:"   ",visibilityThresholdSaved:"     "},presets:{title:"  ",name:" ",isDefault:"",mappings:" ",internalField:" ",excelHeader:" Excel",enabled:"",required:"",addPreset:"  ",editPreset:" ",deletePreset:" ",savePreset:" ",toast:{presetCreated:"   ",presetUpdated:"   ",presetDeleted:"   ",presetSetDefault:"   "}},uploadExcel:" Excel",downloadTemplate:" ",loading:" ...",noProducts:"  ",noMatchingProducts:"   ",partNumber:" ",productName:" ",quantity:"",price:"",category:"",actions:"",edit:"",delete:"",deleteConfirm:"      ",productDeleted:"  ",productSaved:"  ",productCreated:"  ",importModal:{title:" ",selectFile:"  Excel",importing:" ...",importSuccess:"  ",imported:" ",updated:" ",skipped:" ",errors:""},productModal:{editTitle:" ",addTitle:"  ",save:"",cancel:""},columnPresets:{title:"  Excel",presetName:" ",enterPresetName:"   ",created:"   ",saved:"  ",deleteConfirm:"      ",deleted:"  ",setDefault:" ",isDefault:""},visibility:{title:" ",threshold:"  ",saved:"   "},pagination:{showing:"",of:"",products:"",previous:"",next:""},selectProductsFirst:"   ",selectedCount:"  {{count}} ",visibilityApplied:"      {{count}} ",visibilityRemoved:"      {{count}} ",loadFailed:"   ",importFailed:"  ",templateDownloaded:"   Excel",templateDownloadFailed:"   ",partAndNameRequired:"   ",deleteFailed:"   "},hie={title:" ",subtitle:"     ",tabs:{users:"",roles:" "},searchPlaceholder:"  ...",allRoles:" ",allStatuses:" ",addUser:" ",exportUsers:" ",table:{user:"",role:"",contact:"",lastLogin:" ",status:"",actions:"",name:"",email:" ",phone:""},status:{active:"",inactive:" ",ACTIVE:"",SUSPENDED:"",PENDING:" "},modal:{addTitle:"  ",editTitle:" ",deleteConfirm:" ",deleteMessage:"      ",resetPassword:"   ",toggleStatus:" "},form:{fullName:" ",username:" ",email:" ",phone:" ",role:"",password:" ",newPassword:"  ",confirmPassword:"  ",save:"",cancel:""},validation:{nameRequired:" ",usernameRequired:"  ",emailRequired:"  ",emailInvalid:"   ",passwordRequired:"  ",passwordMinLength:"     6   ",roleRequired:" "},toast:{userCreated:"   ",userUpdated:"   ",userDeleted:"   ",passwordReset:"    ",statusChanged:"   ",createError:"   ",updateError:"   ",deleteError:"   ",loadError:"   "},roles:{title:" ",addRole:"  ",editRole:" ",deleteRole:" ",roleName:" ",roleDescription:" ",permissions:"",usersCount:" ",isSystemRole:" ",noRoles:"  ",toast:{roleCreated:"   ",roleUpdated:"   ",roleDeleted:"   "},SUPER_ADMIN:" ",ADMIN:"",MANAGER:"",STAFF:"",CUSTOMER_OWNER:" ",CUSTOMER_STAFF:" "},stats:{total:" ",admins:"",staff:"",active:""},noUsers:"  ",editUser:" ",deleteUser:" ",deleteConfirm:"      ",userCreated:"  ",userUpdated:"  ",userDeleted:"  ",resetPassword:"   ",passwordReset:"    "},xie={title:"   ",message:"         ",contactAdmin:"    ",requestedPage:" ",goBack:"",goHome:" ",errorCode:" "},pie={searchPlaceholder:"    ...",allStatuses:" ",table:{requestNumber:" ",businessCustomer:" / ",uploadDate:" ",itemsCount:" ",priceType:" ",status:"",actions:""},reviewDetails:" / ",noRequests:"  ",panel:{reviewRequest:" ",proposedTotal:" ",approving:" ...",approveAndSend:"  ",selectAll:" ",changeSelectedStatus:"  ",available:" (Approved)",unavailable:"  (Missing)",rejected:" (Rejected)",customerPartNumber:"  ()",customerPartName:"  ()",quantity:"",matchedProduct:" ( )",price:"",decision:"",notes:"",generalNotes:"  ",notesPlaceholder:"   ...",itemStatus:{approved:"",missing:" ",rejected:"",pending:""}},status:{new:"",underReview:" ",partiallyApproved:" ",approved:" ",quoted:" ",processed:" ",rejected:""},toast:{itemsUpdated:"  {{count}} ",approvedWithoutPriceWarning:"    .   ",pricingSentSuccess:"     ",saveError:"   ",quoteSaved:"   ",quoteSaveFailed:"    "}},gie={tabs:{all:"",fromSearch:" ",fromQuote:" "},stats:{totalMissing:" ",newMissing:" ",underReview:" ",ordered:" ",solved:" ",orderedImport:"  / ",addedToStock:" ",fromQuote:" ",fromSearch:" "},searchPlaceholder:"  ...",allStatuses:" ",noMatchingMissing:"   ",table:{partNumber:"  / ",partInfo:" ",requestCount:" ",requestFrequency:" ",interestedCustomers:" ",source:"",date:"",lastRequest:" ",status:"",actions:""},source:{search:"",quote:""},actions:{details:"",linkToImport:"  ",addToStock:" ",saving:" ...",saveChanges:" "},view:"",noMatchingParts:"   ",pagination:{page:"",of:""},export:{partNumber:" ",itemName:" ",source:"",requestCount:" ",customerCount:" ",status:"",lastRequest:" ",adminNotes:" "},panel:{title:"  ",missingDetails:" ",partDetails:" ",requestedItem:" ",suggestedName:" ",brand:"",searchQuery:" ",partNumber:" ",partName:" ",requestCount:"  ",differentCustomers:" ",source:" ",sourceQuote:":  ",firstRequest:" ",lastRequest:" ",requestingCustomers:" ",updateStatus:" ",followUp:" ",internalNotes:" ",adminNotes:" ",notesPlaceholder:"   (:    ...)",saving:" ...",saveStatus:" "},status:{new:" ",underReview:" ",orderPlanned:" ",ordered:" ",addedToStock:" ",ignored:" "},sourceLabels:{search:"",quote:""},toast:{statusUpdated:"    ",saveError:"   ",exportSuccess:"   ",exportFailed:" ",linkImportSoon:"    ",redirectToAddProduct:"    ..."}},bie={stats:{newRequests:" ",pending:"",inProgress:" ",awaitingCustomer:" ",completed:"",delivered:" "},table:{requestNumber:" ",customer:"",service:"",requestDate:" ",date:"",category:"",status:"",action:"",actions:""},serviceType:{fullService:"",processingOnly:" ",fullImport:" ",goodsPreparation:" "},actions:{manageRequest:" ",startReview:" ",requestItemsFile:"  ",cancelRequest:" "},viewDetails:" ",noRequests:"   ",modal:{manageRequest:"  ",currentStatus:" ",timeline:"  (Timeline)"},pricing:{preparePricing:"  ",customerFile:" ",download:"",waitingForFile:"     ...",totalOffer:"  (.)",sendToCustomer:"  "},details:{title:" ",requestedBrands:" ",serviceType:" ",branchesCount:" ",estimatedValue:" ",customerNotes:" "},statusControl:{title:"  ()",hint:"       (  ...)"},panel:{title:"  ",requestInfo:" ",customer:"",category:"",description:"",estimatedQuantity:" ",timeline:" ",updateStatus:" ",pricingSection:" ",totalAmount:" ",enterAmount:" ",note:"",notePlaceholder:" ...",sendPricing:"  "},status:{new:" ",underReview:" ",waitingCustomerExcel:"  ",pricingInProgress:" ",pricingSent:"  ",waitingCustomerApproval:" ",approvedByCustomer:"  ",inFactory:" ",shipmentBooked:"  ",onTheSea:" ",inPort:" ",customsCleared:" ",onTheWay:" ",delivered:" ",cancelled:""},toast:{statusUpdated:"   ",updateFailed:" ",enterValidAmount:"   ",pricingSent:"    ",sendFailed:" "}},vie={title:"  ",subtitle:"    ",adminTitle:"  ",adminSubtitle:"    ",supplierTitle:"  ",supplierSubtitle:"     ",newRequest:" ",myRequests:"",noRequests:"   ",createFirst:"  ",requestDetails:" ",requestedValue:" ",duration:"",frequency:"",downPayment:" ",requestedItems:" ",product:"",quantity:"",price:"",notes:"",createdAt:" ",cancelRequest:" ",confirmCancel:"     ",requestCancelled:"  ",months:"",monthly:"",weekly:"",pendingOffers:"  ",sinicarOffer:"  ",supplierOffer:"",fullApproval:" ",partialApproval:" ",approvedValue:"  ",installments:" ",installmentAmount:" ",startDate:" ",acceptOffer:" ",rejectOffer:" ",offerAccepted:"   ",offerRejected:"  ",activeContract:" ",totalPaid:"",remaining:"",paidInstallments:" ",overdueInstallments:" ",installmentNumber:" ",dueDate:" ",amount:"",status:"",paid:"",overdue:"",pending:" ",enterTotalValue:"  ",selectProducts:" ",totalValue:"  ",selectProduct:"--   --",total:"",paymentFrequency:" ",minMax:" ",max:" ",unlimited:" ",minDownPayment:" ",paymentPreview:"  ",afterDownPayment:"  ",estimatedInstallment:" ",acceptTerms:"   ",submitRequest:" ",requestCreated:"   ",loadError:"    ",actionError:" ",cancelError:"   ",createError:"    ",minAmountError:"     ",maxAmountError:"     ",minDownPaymentError:"     ",disabled:"    ",disabledDesc:"      ",notesPlaceholder:"  ...",totalRequests:" ",pendingRequests:" ",activeContracts:" ",closedContracts:" ",overdueAmount:"",noRequestsInTab:"     ",requestId:" ",customer:"",date:"",actions:"",review:"",reviewRequest:"  ",yourDecision:"",approveFullAction:" ",approveFullDesc:"   ",approvePartialAction:" ",approvePartialDesc:"    ",rejectAction:"",rejectDesc:" ",approvedAmount:"  ",forwardOnReject:"    ",adminNotes:" ",confirmDecision:" ",decisionRecorded:"  ",requestRejected:"  ",forwarded:"   ",customerNotes:" ",generalSettings:" ",enableSystem:"  ",sinicarPriority:"   ",allowPartialSinicar:"     ",allowPartialSuppliers:"    ",forwardingSettings:" ",autoForwardOnReject:"    ",autoForwardOnPartial:"     ",onCustomerRejectsSinicar:"     ",forwardToSuppliers:" ",closeRequest:" ",financialLimits:" ",minAmount:" ",maxAmount:" ",requireDownPayment:"  ",minDownPercent:"  %",maxDownPercent:"  %",durationSettings:" ",minMonths:"  ()",maxMonths:"  ()",defaultFrequency:" ",settingsSaved:"  ",settingsError:"    ",noCreditProfiles:"   ",creditScore:" ",availableRequests:" ",submittedOffers:" ",pendingDecisions:" ",availableForOffer:"  ",noAvailableRequests:"    ",submitOffer:" ",mySubmittedOffers:" ",myOffer:"",perInstallment:"",anonymousCustomer:"",requestedDuration:" ",fullOffer:" ",partialOffer:" ",offerAmount:" ",numberOfInstallments:" ",offerSummary:" ",offerSubmitted:"   ",offerError:"    ",invalidAmount:"  "},yie={title:" ",stats:{total:" ",active:"",pending:" ",suspended:""},searchPlaceholder:"   ...",allStatuses:" ",table:{name:"",phone:"",referralCode:" ",referrals:"",earnings:"",status:"",actions:""},status:{ACTIVE:"",PENDING:" ",SUSPENDED:""},noMarketers:"  ",view:"",activate:"",suspend:"",delete:"",addMarketer:" ",marketerDetails:" ",referralHistory:" ",commissionHistory:" ",payoutHistory:" ",pendingPayout:" ",totalEarnings:" ",marketerUpdated:"  ",marketerCreated:"  "},Nie={title:" ",stats:{total:" ",active:"",scheduled:"",expired:""},searchPlaceholder:"  ...",allStatuses:" ",table:{title:"",type:"",placement:"",startDate:" ",endDate:" ",status:"",actions:""},status:{ACTIVE:"",SCHEDULED:"",PAUSED:" ",EXPIRED:""},noAds:"  ",addAd:" ",editAd:" ",deleteAd:" ",deleteConfirm:"      ",adCreated:"  ",adUpdated:"  ",adDeleted:"  ",uploadImage:" ",adDetails:" "},wie={title:" ",stats:{totalRequests:" ",pending:" ",approved:"",rejected:"",active:""},searchPlaceholder:"   ...",allStatuses:" ",table:{requestId:" ",customer:"",product:"",amount:"",installments:"",status:"",actions:""},status:{PENDING:" ",APPROVED:"",REJECTED:"",ACTIVE:"",COMPLETED:"",DEFAULTED:""},noRequests:"   ",view:"",approve:"",reject:"",requestDetails:" ",customerInfo:" ",productInfo:" ",paymentSchedule:" ",paymentHistory:" ",monthlyPayment:" ",totalAmount:" ",remainingAmount:" ",dueDate:" ",requestApproved:"   ",requestRejected:"  "},Sie={title:"  ",description:"     ",resetDefaults:" ",saveChanges:" ",confirmReset:"          ",unsavedChanges:"   ",savedSuccess:"   ",tabs:{design:" ",layout:"  ",navigation:" ",features:"",content:""},design:{themeMode:" ",colors:" "},layout:{sections:"  ",reorder:"  "},navigation:{menu:"  "},features:{tools:" ",ordering:"",marketing:"",guest:" "},banners:{hero:"  "},announcements:{title:""},cards:{info:" "}},jie={title:"  ",description:"    ",globalEnable:"  ",globalEnableDesc:"      ",unsavedChanges:"  ",resetDefaults:" ",saveChanges:" ",savedSuccess:"     ",resetSuccess:"   ",confirmReset:"         ",tabs:{providers:" ",features:"",limits:" ",prompts:" ",safety:" "},providers:{title:"  ",description:"  OpenAI  Gemini  Anthropic",default:"",enabled:"",disabled:"",apiKey:" API",apiKeyPlaceholder:"  API",apiKeyNote:"      Replit AI",model:"",maxTokens:"  ",rateLimit:" ",perMinute:" ",perDay:" ",chat:"",imageGen:" ",vision:"",audio:"",setDefault:" "},features:{customerTitle:" ",customerDesc:"    ",adminTitle:" ",adminDesc:"    ",marketingTitle:" ",enableAIAssistant:" ",enableAIAssistantDesc:"     ",enableAIProductSearch:" ",enableAIProductSearchDesc:"     ",enableAIPartMatching:" ",enableAIPartMatchingDesc:"   ",enableAIVinDecoding:"  VIN",enableAIVinDecodingDesc:"     ",enableAIPriceAnalysis:" ",enableAIPriceAnalysisDesc:"  ",enableAITranslation:" ",enableAITranslationDesc:"  ",enableAIOrderAnalysis:" ",enableAIOrderAnalysisDesc:"   ",enableAICustomerInsights:" ",enableAICustomerInsightsDesc:"  ",enableAIReports:" ",enableAIReportsDesc:"  ",enableAIFraudDetection:" ",enableAIFraudDetectionDesc:"  ",enableAIInventoryPrediction:" ",enableAIInventoryPredictionDesc:"  ",enableAIContentGeneration:" ",enableAIContentGenerationDesc:"   ",enableAICampaignOptimization:" ",enableAICampaignOptimizationDesc:"   "},limits:{title:" ",description:"     ",dailyRequests:" ",monthlyRequests:" ",maxTokens:"    ",role:{customer:"",admin:"",super_admin:" "}},prompts:{title:" ",description:"    ",customerAssistant:"  ",customerAssistantDesc:"   ",productSearch:"  ",productSearchDesc:"   ",partMatching:" ",partMatchingDesc:"    "},safety:{title:" ",description:"   ",contentModeration:" ",contentModerationDesc:"   ",blockedTopics:" ",blockedTopicsDesc:"      ",addTopic:"   Enter",maxConversation:"  ",maxConversationDesc:"     ",trackUsage:" ",trackUsageDesc:"   ",trackCosts:" ",trackCostsDesc:"  API"}},Aie={portalTitle:" ",dashboard:" ",products:"",requests:" ",settings:"",notifications:"",totalProducts:" ",activeProducts:" ",pendingRequests:" ",quotesSubmitted:" ",quotesAccepted:" ",totalRevenue:" ",active:"",inactive:" ",accepted:"",recentRequests:" ",viewAll:" ",noRequests:"  ",quickActions:" ",addProduct:" ",importProducts:" ",viewRequests:" ",performance:"",avgResponseTime:"  ",rating:"",searchProducts:"  ...",searchRequests:"  ...",import:"",export:"",noProducts:"  ",addFirstProduct:"   ",sku:" ",productName:" ",brand:"",price:"",stock:"",minOrder:" ",category:"",oemNumber:" OEM",editProduct:" ",add:"",allStatuses:" ",customer:"",quantity:"",deadline:" ",received:" ",submitQuote:" ",reject:"",quotedAt:" ",status:{new:"",viewed:" ",quoted:" ",accepted:"",rejected:""},urgency:{low:"",medium:"",high:"",urgent:"",normal:""},settingsTitle:" ",defaultPriceMarkup:"  ",defaultDeliveryTime:"  ",deliveryDaysHint:" ",notifyNewRequest:"    ",notifyQuoteAccepted:"   ",notifyDeadline:"    ",submitQuoteTitle:"  ",requestDetails:" ",part:"",yourPrice:"",availableStock:" ",quoteNotes:" ",sendQuote:" ",importComplete:" ",importFailed:" ",totalRows:" ",inserted:" ",updated:" ",skipped:" ",errors:"",row:"",dropExcelFile:"  Excel    ",startImport:" ",importing:" ...",productAdded:"   ",productUpdated:"   ",productDeleted:"  ",productAddError:"   ",productUpdateError:"   ",productDeleteError:"   ",confirmDeleteProduct:"      ",quoteSent:"   ",quoteError:"   ",requestRejected:"  ",rejectError:"   ",rejectReason:"  ()",settingsSaved:"  ",settingsError:"   ",importSuccess:"  ",importError:"   ",exportSuccess:"   ",added:"",thisMonthRevenue:"  ",team:"",addEmployee:" ",editEmployee:" ",employeeAdded:"   ",employeeUpdated:"   ",noEmployees:"    ",addFirstEmployee:"     "},Eie={title:"  ",subtitle:"     ",filters:"",toolType:" ",status:"",dateFrom:" ",dateTo:" ",totalUsage:"",noRecords:"  ",noRecordsDesc:"     ",detailsTitle:" ",loadError:"    ",col:{date:"",tool:"",input:"",output:"",status:"",actions:""},processingTime:" ",inputFile:" ",outputFile:" ",errorMessage:" ",deviceType:"",additionalInfo:" ",confidence:"",suppliersCompared:" ",pagesProcessed:""},Cie={title:"  ",subtitle:"/    ",settingsTab:"",analyticsTab:"",usageLogTab:" ",filters:"",search:"",searchPlaceholder:" VIN ...",toolType:" ",status:"",dateFrom:" ",dateTo:" ",clearFilters:"",export:"",totalActions:" ",successful:"",failed:"",successRate:" ",noRecords:"  ",exportSuccess:"   ",exportError:"   ",loadError:"    ",col:{date:"",customer:"",tool:"",input:"",output:"",status:"",actions:""},detailTitle:" ",processingTime:" ",inputDetails:"",outputDetails:"",showing:""},Tie={VIN:" VIN",PDF_EXCEL:" PDF  Excel",COMPARISON:" ",ALTERNATIVES:" ",SEARCH:" ",EXCEL_QUOTE:"  Excel"},_ie={SUCCESS:"",FAILED:"",PENDING:" ",PROCESSING:" "},kie={viewImage:" ",noImage:"  ",loadError:"  ",magnifierHint:"    ",uploadImage:" ",addToGallery:" ",removeImage:" ",setAsMain:"  ",mainImage:" ",gallery:"",imageOf:" {{current}}  {{total}}",settings:{title:"  ",enabled:"  ",enabledDesc:"      ",supplierUpload:"  ",supplierUploadDesc:"    ",maxSize:"   ()",maxSizeDesc:"   "}},Oie={button:" ",title:" ",subtitle:"    ",typeLabel:" ",subjectLabel:"",subjectPlaceholder:"  ...",descriptionLabel:"",descriptionPlaceholder:"  ...",submitButton:" ",submitting:" ...",successTitle:"   ",successMessage:" !      ",errorMessage:"    ",guest:"",types:{BUG:" ",FEATURE:"  ",IMPROVEMENT:"",COMPLAINT:"",OTHER:""},categories:{bug:" ",suggestion:"",complaint:"",question:"",other:""},priorities:{low:"",medium:"",high:"",critical:""}},Iie={title:" ",subtitle:"   ",allFeedback:" ",filters:"",type:"",status:{NEW:"",IN_PROGRESS:" ",IN_REVIEW:" ",RESOLVED:" ",CLOSED:"",DISMISSED:""},priority:{LOW:"",MEDIUM:"",HIGH:"",CRITICAL:""},dateRange:" ",search:"...",noFeedback:"  ",loading:" ...",export:"",refresh:"",markAsRead:" ",delete:"",adminNotes:" ",adminNotesPlaceholder:"  ...",saveNotes:" ",updateStatus:" ",updatePriority:" ",customerInfo:" ",feedbackDetails:" ",submittedAt:" ",lastUpdated:" ",actions:"",stats:{total:" ",new:"",inProgress:" ",resolved:" ",closed:"",byType:" ",byPriority:" "},senderType:{CUSTOMER:"",SUPPLIER:"",MARKETER:"",EMPLOYEE:"",ADMIN:"",GUEST:""},exportSuccess:"   ",exportError:"   ",updateSuccess:"  ",updateError:"  ",deleteConfirm:"      ",deleteSuccess:"   ",deleteError:"   "},Rie={title:" ",subtitle:"   ",tabs:{templates:"",logs:" ",settings:""},channels:{WHATSAPP:"",EMAIL:" ",NOTIFICATION:""},events:{QUOTE_CREATED:"  ",QUOTE_APPROVED:"   ",ORDER_CREATED:" ",ORDER_SHIPPED:" ",PASSWORD_RESET:"   ",ACCOUNT_ACTIVATED:" ",WELCOME_MESSAGE:" ",PAYMENT_REMINDER:" ",SUPPLIER_APPLICATION_APPROVED:"  "},status:{PENDING:"",SENT:" ",DELIVERED:" ",FAILED:""},table:{event:"",template:"",status:"",actions:""},logs:{recipient:"",event:"",channel:"",status:"",sentAt:" ",empty:"    ",unknown:" "},settings:{channels:" ",defaultLanguage:"  "},form:{name:" ",subject:" ",body:" ",variables:" ",isActive:" "},default:"",noTemplate:"  ",active:"",inactive:"",createTemplate:" ",editTemplate:" ",preview:" ",sendTest:" ",send:"",test:{phone:" ",email:" ",userId:" "},testSuccess:"    ",testFailed:"  ",confirmDelete:"      ",searchLogs:"   ..."},Pie={common:Rne,login:Pne,loading:Dne,intro:Mne,marketing:Lne,guestMode:Fne,register:Une,nav:zne,dashboard:Bne,products:$ne,orders:qne,cart:Hne,customers:Vne,users:Gne,roles:Wne,permissions:Qne,settings:Kne,accountRequests:Jne,statusLabels:Yne,reports:Xne,notifications:Zne,errors:eie,confirmations:tie,admin:sie,homepage:aie,sidebar:rie,customerDashboard:nie,adminDashboard:iie,adminCustomers:lie,adminSettings:oie,adminOrders:cie,adminAccounts:die,adminAccountRequests:uie,adminQuotes:mie,adminProducts:fie,adminUsers:hie,accessDenied:xie,adminQuoteManager:pie,adminMissingParts:gie,adminImport:bie,installment:vie,adminMarketers:yie,adminAdvertising:Nie,adminInstallments:wie,adminPortalSettings:Sie,aiSettings:jie,supplier:Aie,traderHistory:Eie,traderToolsAdmin:Cie,toolTypes:Tie,toolStatus:_ie,productImages:kie,feedback:Oie,feedbackAdmin:Iie,messaging:Rie},Die={appName:"Sini Car",siniCar:"Sini Car",appSlogan:"Wholesale Auto Parts Portal",loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",delete:"Delete",edit:"Edit",add:"Add",search:"Search",filter:"Filter",reset:"Reset",back:"Back",next:"Next",previous:"Previous",close:"Close",submit:"Submit",yes:"Yes",no:"No",all:"All",none:"None",export:"Export",import:"Import",refresh:"Refresh",view:"View",details:"Details",actions:"Actions",status:"Status",date:"Date",time:"Time",total:"Total",price:"Price",quantity:"Quantity",name:"Name",email:"Email",phone:"Phone",address:"Address",city:"City",region:"Region",country:"Country",notes:"Notes",description:"Description",active:"Active",inactive:"Inactive",enabled:"Enabled",disabled:"Disabled",success:"Success",error:"Error",warning:"Warning",info:"Info",noData:"No data",noResults:"No results found",selectOption:"Select an option",required:"Required",optional:"Optional",language:"Language",welcome:"Welcome",page:"Page",of:"of",currency:"SAR",order:"Order",notSpecified:"Not specified",sort:"Sort",download:"Download",upload:"Upload",first:"First",last:"Last",selectAll:"Select All",deselectAll:"Deselect All"},Mie={wholesaleLogin:"Wholesale Customer Login",b2bPortal:"SINI CAR B2B PORTAL",ownerLogin:"Business Owner",staffLogin:"Staff Login",clientId:"Client ID",phoneNumber:"Phone Number",password:"Password",activationCode:"Activation Code",rememberMe:"Remember me",forgotPassword:"Forgot password?",enter:"Login",verifying:"Verifying...",secureConnection:"SECURE CONNECTION ENCRYPTED",securityNote:"This system is protected with high-level security protocols. All operations are logged and monitored.",openNewAccount:"Request New Account",invalidCredentials:"Invalid credentials",loginSuccess:"Login successful",logoutSuccess:"Logout successful",enterAsGuest:"Browse as Guest",guest:"Guest",guestWelcome:"Welcome as a guest! You can browse products only",title:"Login",subtitle:"Enter your credentials to continue",phone:"Phone Number",phonePlaceholder:"Enter phone number",passwordPlaceholder:"Enter password",loginButton:"Login",loggingIn:"Logging in...",noAccount:"Don't have an account?",registerHere:"Register here",errors:{phoneRequired:"Phone number is required",passwordRequired:"Password is required",invalidCredentials:"Invalid credentials",accountSuspended:"Account is suspended",tooManyAttempts:"Too many attempts. Try later"},success:"Login successful",quickLoginForTesting:"Quick Login for Testing",quickAdmin:"Super Admin",quickManager:"Admin",quickStaff:"Staff",quickCustomer:"Customer",quickSupplier:"Supplier",quickMarketer:"Marketer"},Lie={verifyingCredentials:"Verifying Secure Credentials",connectingWarehouse:"Connecting to Global Warehouse",loadingCatalog:"Fetching Product Catalog",applyingDiscounts:"Applying Exclusive Wholesale Rates",syncingInventory:"Syncing Real-time Inventory",optimizingLogistics:"Optimizing Logistics Routes",finalizingSetup:"Finalizing Dashboard Setup",accessGranted:"Access Granted"},Fie={mainServer:"Main Server",connectingServer:"Connecting and verifying identity...",dataSync:"Data Sync",syncingData:"Updating price lists and inventory...",logistics:"Logistics Connection",connectingWarehouses:"Connecting to Sini Car central warehouses..."},Uie={dismiss:"Dismiss",campaignOf:"Campaign {{current}} of {{total}}",next:"Next",understood:"Got it"},zie={restrictedTitle:"Exclusive B2B Wholesale Service",restrictedSubtitle:"Sini Car Business Platform",restrictedMessage:"We exclusively serve:",targetAudience:{partsStores:"Auto Parts Stores",insuranceCompanies:"Insurance Companies",rentalCompanies:"Car Rental Companies",salesReps:"Sales Representatives & Agents"},benefitsTitle:"Full Membership Benefits",benefits:{prices:"Competitive wholesale prices",catalog:"Complete parts catalog",orders:"Fast orders with real-time tracking",support:"Dedicated technical support"},callToAction:"If you're in one of these industries, register now for full membership access!",loginButton:"Login",requestAccountButton:"Request New Account",browseOnly:"Continue Browsing",blurredResultsNote:"Register to view details and prices",loginToAccess:"Login for full access",searchDisabled:"Login to search products"},Bie={title:"New Account Request",openNewAccount:"Open New Account",subtitle:"Join Sini Car certified network and benefit from wholesale prices, fast shipping, and specialized technical support.",businessInfo:"Business Information",businessName:"Business Name",businessNameAr:"Business Name (Arabic)",businessNameEn:"Business Name (English)",commercialRegister:"Commercial Register",taxNumber:"Tax Number",businessType:"Business Type",selectBusinessType:"Select Business Type",contactInfo:"Contact Information",ownerName:"Contact Person Name",ownerPhone:"Owner Phone",ownerEmail:"Email Address (Optional)",addressInfo:"Address Information",fullAddress:"Full Address",nationalAddress:"National Address (Short)",nationalAddressPlaceholder:"e.g., RDJ2929",city:"City",region:"Region",postalCode:"Postal Code",branchesCount:"Number of Branches",submitRequest:"Submit Account Request",backToLogin:"Back to Login",requestSuccess:"Your request has been received successfully!",requestPending:"Your request is under review",requestSuccessMessage:"Thank you for your interest. Sini Car customer relations team will review the data and contact you to activate your account and send login credentials.",backToHome:"Back to Home",benefits:{exclusivePrices:"Exclusive wholesale prices",instantAccess:"Instant inventory access",taxInvoices:"Certified tax invoices"},businessTypes:{sparePartsShop:"Spare Parts Shop",maintenanceCenter:"Maintenance Center",insuranceCompany:"Insurance Company",rentalCompany:"Car Rental",salesRep:"Sales Representative",workshop:"Maintenance Workshop",store:"Parts Store",distributor:"Distributor",agency:"Agency",other:"Other"},salesRepFields:{fullName:"Full Name",phone:"Phone Number",region:"Region / Cities Covered",email:"Email (Optional)",clientsType:"Clients Type (workshops, shops...)",clientsCount:"Approximate Clients Count"},documents:{title:"Required Documents",requiredDocuments:"Required Documents",instructions:"Please upload the following documents in PDF or clear image format. They will be reviewed by the approval team.",uploadNotice:"Please upload the following documents in PDF or clear image format. They will be reviewed by the approval team.",crCertificate:"Commercial Register Certificate",vatCertificate:"VAT Registration Certificate",nationalId:"National ID Copy",nationalAddressCert:"National Address Certificate",clickToUpload:"Click to upload file",fileTypes:"PDF, JPEG, PNG, WebP (max 5MB)",uploadSuccess:"uploaded successfully",invalidFileType:"Invalid file type. Please use PDF or images (JPEG, PNG, WebP)",fileTooLarge:"File too large. Maximum size is 5MB"},businessFields:{businessName:"Business Name",branchesCount:"Number of Branches",city:"City",nationalAddress:"National Address (Short)",nationalAddressPlaceholder:"e.g., RDJ2929",commercialReg:"Commercial Register",vatNumber:"VAT Number",contactPerson:"Contact Person",phone:"Phone Number",emailOptional:"Email (Optional)"},success:{title:"Your request has been received successfully!",message:"Thank you for your interest. Sini Car customer relations team will review the data and contact you to activate your account and send login credentials.",backToHome:"Back to Home"},validation:{phoneRequired:"Phone number is required",fullNameRequired:"Full name is required",regionRequired:"Region is required",businessNameRequired:"Business name is required",cityRequired:"City is required",contactPersonRequired:"Contact person name is required",commercialRegRequired:"Commercial register is required",vatRequired:"VAT number is required",nationalAddressRequired:"National address is required",documentRequired:"is required"},additionalNotes:"Additional Notes",submitting:"Submitting...",submitError:"An error occurred during submission"},$ie={home:"Home",dashboard:"Dashboard",products:"Products",catalog:"Catalog",orders:"Orders",myOrders:"My Orders",cart:"Cart",customers:"Customers",users:"Users",roles:"Roles",settings:"Settings",profile:"Profile",notifications:"Notifications",reports:"Reports",analytics:"Analytics",help:"Help",support:"Support",about:"About",contact:"Contact Us",logout:"Logout",accountRequests:"Account Requests",statusLabels:"Status Labels",systemSettings:"System Settings"},qie={title:"Dashboard",welcome:"Welcome",overview:"Overview",statistics:"Statistics",recentOrders:"Recent Orders",recentActivity:"Recent Activity",quickActions:"Quick Actions",totalSales:"Total Sales",totalOrders:"Total Orders",totalCustomers:"Total Customers",totalProducts:"Total Products",pendingOrders:"Pending Orders",processingOrders:"Processing Orders",completedOrders:"Completed Orders",cancelledOrders:"Cancelled Orders",revenue:"Revenue",salesChart:"Sales Chart",topProducts:"Top Selling Products",topCustomers:"Top Customers",lowStock:"Low Stock",newCustomers:"New Customers",monthlyRevenue:"Monthly Revenue",weeklyOrders:"Weekly Orders",dailySales:"Daily Sales",customerDashboard:"Customer Dashboard",adminDashboard:"Admin Dashboard"},Hie={title:"Products",catalog:"Product Catalog",addProduct:"Add Product",editProduct:"Edit Product",deleteProduct:"Delete Product",productDetails:"Product Details",productName:"Product Name",productNameAr:"Product Name (Arabic)",productNameEn:"Product Name (English)",sku:"SKU",barcode:"Barcode",category:"Category",subcategory:"Subcategory",brand:"Brand",manufacturer:"Manufacturer",price:"Price",wholesalePrice:"Wholesale Price",retailPrice:"Retail Price",costPrice:"Cost Price",stock:"Stock",stockQuantity:"Stock Quantity",minStock:"Minimum Stock",maxStock:"Maximum Stock",unit:"Unit",weight:"Weight",dimensions:"Dimensions",image:"Image",images:"Images",specifications:"Specifications",description:"Description",shortDescription:"Short Description",longDescription:"Long Description",tags:"Tags",status:"Status",available:"Available",outOfStock:"Out of Stock",discontinued:"Discontinued",featured:"Featured",newArrival:"New Arrival",bestSeller:"Best Seller",onSale:"On Sale",discount:"Discount",addToCart:"Add to Cart",buyNow:"Buy Now",quantity:"Quantity",totalPrice:"Total Price",searchProducts:"Search products...",filterByCategory:"Filter by Category",filterByBrand:"Filter by Brand",filterByPrice:"Filter by Price",sortBy:"Sort by",priceAsc:"Price: Low to High",priceDesc:"Price: High to Low",nameAsc:"Name: A-Z",nameDesc:"Name: Z-A",newest:"Newest",oldest:"Oldest",noProducts:"No products found",productAdded:"Product added successfully",productUpdated:"Product updated successfully",productDeleted:"Product deleted successfully"},Vie={title:"Orders",myOrders:"My Orders",allOrders:"All Orders",newOrder:"New Order",createOrder:"Create Order",orderDetails:"Order Details",orderNumber:"Order Number",orderDate:"Order Date",orderStatus:"Order Status",orderItems:"Order Items",orderTotal:"Order Total",subtotal:"Subtotal",tax:"Tax",shipping:"Shipping",discount:"Discount",grandTotal:"Grand Total",paymentMethod:"Payment Method",paymentStatus:"Payment Status",shippingAddress:"Shipping Address",billingAddress:"Billing Address",trackOrder:"Track Order",cancelOrder:"Cancel Order",reorder:"Reorder",printInvoice:"Print Invoice",downloadInvoice:"Download Invoice",orderConfirmed:"Order Confirmed",orderShipped:"Shipped",orderDelivered:"Delivered",orderCancelled:"Cancelled",orderPending:"Pending",orderProcessing:"Processing",orderCompleted:"Completed",orderRefunded:"Refunded",noOrders:"No orders found",searchOrders:"Search orders...",filterByStatus:"Filter by Status",filterByDate:"Filter by Date",orderCreated:"Order created successfully",orderUpdated:"Order updated successfully",orderCancelledSuccess:"Order cancelled successfully"},Gie={title:"Shopping Cart",emptyCart:"Your cart is empty",addItems:"Add products to your cart",continueShopping:"Continue Shopping",checkout:"Checkout",clearCart:"Clear Cart",updateCart:"Update Cart",itemAdded:"Item added to cart",itemRemoved:"Item removed from cart",cartUpdated:"Cart updated",cartCleared:"Cart cleared",proceedToCheckout:"Proceed to Checkout",estimatedTotal:"Estimated Total"},Wie={title:"Customers",allCustomers:"All Customers",addCustomer:"Add Customer",editCustomer:"Edit Customer",customerDetails:"Customer Details",customerName:"Customer Name",clientId:"Client ID",businessName:"Business Name",contactPerson:"Contact Person",phone:"Phone",email:"Email",address:"Address",city:"City",region:"Region",creditLimit:"Credit Limit",currentBalance:"Current Balance",totalPurchases:"Total Purchases",lastOrder:"Last Order",status:"Status",activeCustomer:"Active Customer",inactiveCustomer:"Inactive Customer",blockedCustomer:"Blocked Customer",verifiedCustomer:"Verified Customer",pendingVerification:"Pending Verification",searchCustomers:"Search customers...",noCustomers:"No customers found",customerAdded:"Customer added successfully",customerUpdated:"Customer updated successfully",customerDeleted:"Customer deleted successfully"},Qie={title:"Users",allUsers:"All Users",addUser:"Add User",editUser:"Edit User",deleteUser:"Delete User",userDetails:"User Details",username:"Username",fullName:"Full Name",email:"Email",phone:"Phone",role:"Role",permissions:"Permissions",status:"Status",activeUser:"Active User",inactiveUser:"Inactive User",lastLogin:"Last Login",createdAt:"Created At",searchUsers:"Search users...",noUsers:"No users found",userAdded:"User added successfully",userUpdated:"User updated successfully",userDeleted:"User deleted successfully",passwordReset:"Password reset successfully",sendPasswordReset:"Send Password Reset"},Kie={title:"Roles & Permissions",allRoles:"All Roles",addRole:"Add Role",editRole:"Edit Role",deleteRole:"Delete Role",roleDetails:"Role Details",roleName:"Role Name",roleDescription:"Role Description",permissions:"Permissions",assignedUsers:"Assigned Users",superAdmin:"Super Admin",admin:"Admin",manager:"Manager",salesManager:"Sales Manager",salesAgent:"Sales Agent",viewer:"Viewer",customer:"Customer",staff:"Staff",noRoles:"No roles found",roleAdded:"Role added successfully",roleUpdated:"Role updated successfully",roleDeleted:"Role deleted successfully"},Jie={title:"Permissions",viewDashboard:"View Dashboard",viewProducts:"View Products",manageProducts:"Manage Products",viewOrders:"View Orders",manageOrders:"Manage Orders",viewCustomers:"View Customers",manageCustomers:"Manage Customers",viewUsers:"View Users",manageUsers:"Manage Users",viewRoles:"View Roles",manageRoles:"Manage Roles",viewSettings:"View Settings",manageSettings:"Manage Settings",viewReports:"View Reports",exportData:"Export Data",importData:"Import Data",deleteData:"Delete Data",fullAccess:"Full Access"},Yie={title:"Settings",general:"General",appearance:"Appearance",language:"Language",selectLanguage:"Select Language",notifications:"Notifications",security:"Security",privacy:"Privacy",account:"Account",profile:"Profile",changePassword:"Change Password",twoFactorAuth:"Two-Factor Authentication",sessions:"Sessions",apiKeys:"API Keys",webhooks:"Webhooks",integrations:"Integrations",backup:"Backup",restore:"Restore",export:"Export",import:"Import",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",autoMode:"Auto",timezone:"Timezone",dateFormat:"Date Format",currency:"Currency",settingsSaved:"Settings saved",settingsReset:"Settings reset"},Xie={title:"Account Requests",pending:"Pending",approved:"Approved",rejected:"Rejected",underReview:"Under Review",requestDate:"Request Date",reviewDate:"Review Date",reviewedBy:"Reviewed By",approve:"Approve",reject:"Reject",requestDetails:"Request Details",noRequests:"No requests found",requestApproved:"Request approved",requestRejected:"Request rejected"},Zie={title:"Status Labels",addLabel:"Add Label",editLabel:"Edit Label",deleteLabel:"Delete Label",labelName:"Label Name",labelNameAr:"Label Name (Arabic)",labelNameEn:"Label Name (English)",labelColor:"Label Color",labelType:"Label Type",orderStatus:"Order Status",customerStatus:"Customer Status",productStatus:"Product Status",noLabels:"No labels found",labelAdded:"Label added successfully",labelUpdated:"Label updated successfully",labelDeleted:"Label deleted successfully"},ele={title:"Reports",salesReport:"Sales Report",ordersReport:"Orders Report",customersReport:"Customers Report",productsReport:"Products Report",inventoryReport:"Inventory Report",financialReport:"Financial Report",generateReport:"Generate Report",downloadReport:"Download Report",printReport:"Print Report",dateRange:"Date Range",from:"From",to:"To",today:"Today",yesterday:"Yesterday",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",lastMonth:"Last Month",thisYear:"This Year",custom:"Custom"},tle={title:"Notifications",allNotifications:"All Notifications",unread:"Unread",read:"Read",markAsRead:"Mark as Read",markAllAsRead:"Mark All as Read",clearAll:"Clear All",noNotifications:"No notifications",newOrder:"New Order",orderUpdate:"Order Update",newCustomer:"New Customer",lowStock:"Low Stock",paymentReceived:"Payment Received",systemUpdate:"System Update"},sle={somethingWrong:"Something went wrong",tryAgain:"Please try again",pageNotFound:"Page not found",accessDenied:"Access denied",sessionExpired:"Session expired",networkError:"Network error",serverError:"Server error",validationError:"Validation error",requiredField:"This field is required",invalidEmail:"Invalid email address",invalidPhone:"Invalid phone number",passwordMismatch:"Passwords do not match",weakPassword:"Password is too weak"},ale={deleteItem:"Are you sure you want to delete this item?",deleteItems:"Are you sure you want to delete selected items?",cancelOrder:"Are you sure you want to cancel this order?",logout:"Are you sure you want to logout?",clearCart:"Are you sure you want to clear the cart?",discardChanges:"Are you sure you want to discard changes?",actionCannotBeUndone:"This action cannot be undone"},rle={panel:"Admin Panel",systemSettings:"System Settings",manageAll:"Full Management",superAdmin:"Super Admin",salesManager:"Sales Manager",salesAgent:"Sales Agent",viewer:"Viewer Only"},nle={welcomeBack:"Welcome back, {{name}}",totalOrders:"Total Orders",pendingRequests:"Pending Requests",approvedOrders:"Approved Orders",quickActions:"Quick Actions",fastShipping:"Fast Shipping",fastShippingDesc:"Delivery within 24-48 hours to major cities",qualityGuarantee:"Quality Guarantee",qualityGuaranteeDesc:"All parts guaranteed with clear return policy",support:"Expert Support",supportDesc:"Support team available 24/7 to help you",needHelp:"Need Help?",needHelpDesc:"Our team is ready to assist you with any inquiries",callUs:"Call Us",whatsapp:"WhatsApp"},ile={mainMenu:"Main Menu",management:"Management",supportSection:"Support",home:"Home",orders:"Order History",quotes:"Quote Requests",import:"Import from China",traderTools:"Trader Tools",history:"Search History",organization:"Organization Management",teamManagement:"Team Management",support:"About / Support",searchCredits:"Remaining Search Credits",unlimitedSearch:"Unlimited Search"},lle={heroTitle:"Sini Car Wholesale Platform",heroSubtitle:"Unified system for ordering and pricing Chinese auto parts for wholesale customers, insurance companies, rental companies, and parts stores.",searchTip:"Best results when searching by part number",searchPlaceholder:"Enter part number or description...",searching:"Searching...",noResults:"No results",pressSearch:"Press search button for exact search:",partNotAvailable:"Part currently unavailable",noResultsFor:"No results found for:",outOfStock:"Out of Stock",outOfStockMessage:"This part is currently out of stock",available:"Available",priceNotAvailable:"Price unavailable",showPrice:"Price",addToCartTip:"Click (Price) to view details and add product",whoWeServe:"Who We Serve?",partsStores:"Parts Stores",partsStoresDesc:"Organize wholesale orders, manage quotes, and track each order status accurately.",insuranceCompanies:"Insurance Companies",insuranceDesc:"Unified platform for parts requests for accident cases and official approvals management.",rentalCompanies:"Rental Companies",rentalDesc:"Prepare parts for vehicle fleets with complete records of previous orders.",salesReps:"Sales Representatives",salesRepsDesc:"Tool for organizing customer orders you manage in different regions and cities.",mainServices:"Sini Car Main Services",quoteRequests:"Quote Requests (Excel)",quoteRequestsDesc:"Upload your items file and get a complete quote for available and unavailable items in seconds.",importFromChina:"Import from China",importFromChinaDesc:"Custom form for import requests, with our import/export company in three Chinese cities.",wholesaleOrders:"Wholesale Order Management",wholesaleOrdersDesc:"Complete record for each order, with order status, invoice printing, and PDF download.",staffBranches:"Staff & Branch Linking",staffBranchesDesc:"Add staff to your account, set their permissions, and link orders to each branch or rep.",howItWorks:"How Does It Work?",step1Title:"Request Account",step1Desc:"Submit an account request via a form customized for your business type.",step2Title:"Approval & Activation",step2Desc:"We review your data and grant you search and wholesale ordering permissions.",step3Title:"Search & Pricing",step3Desc:"Use smart search by part number or upload Excel files.",step4Title:"Execution & Shipping",step4Desc:"We contact you to complete orders and shipping or special import.",whySiniCar:"Why Sini Car?",expertiseTitle:"Specialized Expertise",expertiseDesc:"Specialists in Chinese auto parts only, ensuring part accuracy.",techTitle:"Technical Integration",techDesc:"Direct link with inventory and accounting system for instant updates.",globalTitle:"Global Presence",globalDesc:"Private import/export offices in 3 major Chinese cities.",supportTitle:"B2B Technical Support",supportDesc:"Dedicated wholesale sales team available all week.",wholesaleCart:"Wholesale Orders Cart",emptyCart:"Cart is empty",useSearchToAdd:"Use search to add items",estimatedTotal:"Estimated Total",submitOrder:"Submit Order",fastShipping:"Fast Shipping",fastShippingDesc:"24-hour delivery to major cities and refrigerated shipping to remote areas.",techSupport:"Specialized Technical Support",techSupportDesc:"Dedicated wholesale sales team available all week.",searchHistory:"Search & View History",partNumber:"Part Number",productName:"Product Name",viewDate:"View Date",recordedPrice:"Recorded Price",noSearchHistory:"No search history yet",sar:"SAR",enterValidPartNumber:"Please enter a valid part number.",unexpectedError:"An unexpected error occurred. Please try again.",orderSubmitError:"Error submitting order",pageView:"Opened page:",addToCart:"Add to Cart",priceModal:{productDetails:"Product Details",wholesalePrice:"Wholesale Price",quantity:"Quantity",total:"Total",addToCart:"Add to Cart",close:"Close"},duplicateConfirm:{title:"Confirm Addition",message:"This product is already in the cart. Add more quantity?",confirm:"Yes, Add Quantity",cancel:"Cancel"},orderSuccess:{title:"Order Submitted Successfully!",message:"We will contact you soon to complete the order"},welcome:"Welcome",dashboard:"Dashboard",searchProducts:"Search Products",search:"Search",recentOrders:"Recent Orders",viewAll:"View All",noRecentOrders:"No recent orders",recentQuotes:"Recent Quote Requests",noRecentQuotes:"No recent quote requests",quickActions:"Quick Actions",newOrder:"New Order",newQuote:"Quote Request",myAccount:"My Account",support:"Support",stats:{totalOrders:"Total Orders",pendingOrders:"Pending Orders",totalSpent:"Total Spent",searchPoints:"Search Points"},searchResults:"Search Results",cart:"Cart",checkout:"Checkout",total:"Total",currency:"SAR"},ole={mainSection:"Main",ordersCustomersSection:"Orders & Customers",settingsSection:"Settings",dashboard:"Dashboard",activityLog:"Activity Log",customerOrders:"Customer Orders",accountRequests:"Account Requests",customersCRM:"Customers (CRM)",quoteRequests:"Quote Requests",importRequests:"Import Requests",missingParts:"Missing Parts",products:"Products",users:"Users",systemSettings:"System Settings",marketingCenter:"Marketing Center",pricingCenter:"Pricing Center",traderTools:"Trader Tools",supplierMarketplace:"Supplier Marketplace",marketers:"Marketers",installments:"Installment Requests",advertising:"Advertising",customerPortalSettings:"Customer Portal Settings",aiSettings:"AI Settings",aiTraining:"AI Training",aiCommandCenter:"AI Command Center",connected:"System Connected",slowConnection:"Slow Connection",disconnected:"Disconnected",pageTitles:{dashboard:"Central Dashboard",ordersManager:"Customer Orders Management",activityLogs:"Activity Logs",accountRequests:"Account Opening Requests",customers:"Customer Database (CRM)",quotes:"Quote Requests Management",imports:"Import Requests",missing:"Missing Parts",settings:"General Settings",users:"User Management",products:"Products Management",marketing:"Marketing Center",pricing:"Pricing Center",traderTools:"Trader Tools Management",supplierMarketplace:"Supplier Marketplace Settings",marketers:"Marketers Management",installments:"Installment Requests Management",advertising:"Advertising Management",customerPortal:"Customer Portal Settings",teamSettings:"Organizations & Teams",aiSettings:"AI Settings",aiTraining:"AI Training Management",aiCommandCenter:"AI Command Center"},stats:{totalRevenue:"Total Revenue",todayRevenue:"Today's Revenue",pendingOrders:"Pending Orders",approvedOrders:"Approved Orders",shippedOrders:"Shipped Orders",cancelledOrders:"Cancelled Orders",totalProducts:"Total Products",outOfStock:"Out of Stock",activeBusinesses:"Active Businesses",pendingAccounts:"Pending Accounts",pendingQuotes:"Pending Quotes"},kpi:{revenue:"Revenue",orders:"Orders",inventory:"Inventory",customers:"Customers"},activity:{logins:"Logins",ordersCreated:"New Orders",quotesRequested:"Quote Requests",searchesPerformed:"Searches"},charts:{dailyOrders:"Daily Orders",dailyRevenue:"Daily Revenue",topCustomers:"Top Customers",topMissingParts:"Most Requested Parts",revenue:"Revenue"},views:{dashboard:"Dashboard",customers:"Customers",products:"Products",settings:"Settings",quotes:"Quote Requests",missing:"Missing Parts",importRequests:"Import Requests",accountRequests:"Account Requests",activityLogs:"Activity Log",ordersManager:"Customer Orders",adminUsers:"Users",marketing:"Marketing Center",pricing:"Pricing Center",traderTools:"Trader Tools",supplierMarketplace:"Supplier Marketplace",marketers:"Marketers",installments:"Installment Requests",advertising:"Advertising",teamSettings:"Organizations & Teams",customerPortal:"Customer Portal",aiSettings:"AI Settings",aiTraining:"AI Training",aiCommandCenter:"AI Command Center"},onlineUsers:{title:"Online Customers",subtitle:"Active in last 5 minutes",now:"Now",minutesAgo:"{{mins}} minutes ago",online:"Online",noOnlineUsers:"No customers online currently",moreOnline:"And {{count}} more customers online..."},activityLogs:{title:"Activity Log",activity:"activity",time:"Time",user:"User",event:"Event",details:"Details",noActivities:"No activities recorded"},generalManager:"General Manager",teamSettings:"Organizations & Teams"},cle={title:"Customer Database (CRM)",loading:"Loading data...",stats:{totalCustomers:"Total Customers",activeCustomers:"Active Customers",suspendedBlocked:"Suspended/Blocked",mostActiveCustomer:"Most Active Customer"},searchPlaceholder:"Search by business name, phone, or city...",allStatuses:"All Statuses",filters:{searchPlaceholder:"Search by name, phone, email, city...",allStatuses:"All Statuses",advanced:"Advanced Filters",customerType:"Customer Type",allTypes:"All Types",activityLevel:"Activity Level",allActivity:"All Activity",activeToday:"Active Today",activeWeek:"Active This Week",inactive30:"Inactive (30+ days)",marketer:"Assigned Marketer",allMarketers:"All Marketers",employee:"Assigned Employee",allEmployees:"All Employees",clearAll:"Clear All",resultsCount:"{{count}} customers found",mostOrders:"Most Orders",mostSearches:"Most Searches",lastActive:"Last Active"},table:{customer:"Customer",city:"City",priceLevel:"Price Level",ordersCount:"Orders Count",totalPurchases:"Total Purchases",status:"Status",actions:"Actions"},view:"View",noMatchingCustomers:"No matching customers found",status:{active:"Active",suspended:"Suspended",blocked:"Blocked",pending:"Pending Activation",inactive:"Inactive"},addCustomer:{button:"Add New Customer",title:"Add New Customer",subtitle:"Enter the new customer details",saving:"Saving...",submit:"Save Customer",success:"Customer account created successfully",fields:{companyName:"Company Name",phone:"Phone Number",email:"Email Address",city:"City",region:"Region",customerType:"Business Type",priceLevel:"Price Level",crNumber:"Commercial Register Number",taxNumber:"Tax Number",nationalAddress:"National Address",contactPerson:"Contact Person",searchPoints:"Search Points",branchesCount:"Number of Branches",status:"Account Status",internalNotes:"Internal Notes"},placeholders:{companyName:"Enter company or business name",selectCity:"Select city",selectRegion:"Select region",nationalAddress:"e.g., RRRD1234, 1234, Al Nakheel, Riyadh",contactPerson:"Contact person name",internalNotes:"Internal notes for admin only..."},types:{autoPartsShop:"Auto Parts Shop",maintenanceCenter:"Maintenance Center",autoShowroom:"Auto Showroom",carRental:"Car Rental Company",government:"Government Entity",other:"Other"},priceLevels:{level1:"Level 1 (Default)",level2:"Level 2",level3:"Level 3",special:"Special Pricing"},errors:{companyNameRequired:"Company name is required",phoneRequired:"Phone number is required",cityRequired:"City is required",failed:"Failed to create customer account"}},errors:{loadFailed:"Failed to load customer data"},panel:{title:"Customer Profile",tabs:{overview:"Overview",orders:"Orders",activity:"Activity"},businessInfo:"Business Information",companyName:"Company Name",city:"City",phone:"Phone",crNumber:"Commercial Register",priceLevel:"Price Level",customerType:"Customer Type",accountStatus:"Account Status",searchBalance:"Search Balance",staffUsers:"Staff Users",accessValidity:"Access Validity",ordersHistory:"Orders History",activityLog:"Activity Log"},toast:{loadError:"Failed to load database"},detail:{tabs:{overview:"Overview",orders:"Orders",quotes:"Quotes",staff:"Staff",security:"Security & Access",notes:"Notes"},accountManagement:"Account Management",changeStatus:"Change Status",statusActive:"Active",statusSuspended:"Suspend",statusBlocked:"Block",suspendUntil:"Suspend Until Date",saving:"Saving...",saveChanges:"Save Changes",statusUpdated:"Customer status updated",errorOccurred:"An error occurred",priceDisplayType:"Price Display Type",pricesVisible:"Prices always visible - No points system",pricesHidden:"Prices hidden - Requires search points to reveal",visibleNoPoints:"Visible prices (No points)",hiddenWithPoints:"Hidden prices (With points)",visible:"visible",hidden:"hidden",priceDisplayChanged:"Price display changed to",searchWallet:"Search Wallet",addBalance:"Add Balance",deductBalance:"Deduct Balance",totalBalance:"Total Balance",used:"Used",remaining:"Remaining",joinDate:"Join Date",lastLogin:"Last Login",customerDocs:"Customer Documents",commercialRegistration:"Commercial Registration",vatCertificate:"VAT Certificate",nationalId:"National ID",notAttached:"Not attached",noDocument:"No document",enterPointsToAdd:"Enter points to add:",pointsAddedSuccess:"{{points}} points added successfully",currentBalance:"Current balance:",points:"points",enterPointsToDeduct:"Enter points to deduct:",cannotDeductMoreThan:"Cannot deduct more than remaining balance",pointsDeductedSuccess:"{{points}} points deducted successfully",errorDeductingPoints:"Error deducting points",staffStatusUpdated:"Staff status updated",customerOrders:"Customer Orders",noOrders:"No orders",orderNumber:"Order #",date:"Date",amount:"Amount",orderStatus:"Status",priceQuotes:"Price Quote Requests",noQuotes:"No quote requests",quoteNumber:"Quote #",items:"Items",staffMembers:"Customer Staff",noStaff:"No registered staff",staffName:"Staff Name",role:"Role",lastActive:"Last Active",action:"Action",suspend:"Suspend",activate:"Activate",securityAccessLogs:"Security & Access Logs",loginHistory:"Login History",device:"Device",ipAddress:"IP",location:"Location",adminNotes:"Admin Notes",notes:{adminNotes:"Admin Notes",noNotes:"No internal notes",addNote:"Add a new note...",placeholder:"Write admin notes here...",saveNote:"Save Note"},docs:{commercialReg:"Commercial Registration",taxNumber:"Tax Number",nationalAddress:"National Address",notAttached:"Not attached",notAvailable:"Not available"},staff:{staffMembers:"Staff Members",maxLimit:"Max Limit",owner:"Owner",active:"Active",suspended:"Suspended",suspendBtn:"Suspend",activateBtn:"Activate"},orders:{customerOrders:"Customer Orders",completed:"Completed",ongoing:"Ongoing",loadingOrders:"Loading orders...",noOrders:"No orders for this customer",unspecified:"Unspecified",products:"Products",item:"item",total:"Total",date:"Date",currency:"SAR",showingOf:"Showing {{shown}} of {{total}} orders"},quotes:{pricingRequests:"Quote Requests",approved:"Approved",new:"New",loadingQuotes:"Loading quote requests...",noQuotes:"No quote requests for this customer",unspecified:"Unspecified",items:"Items",item:"item",total:"Total",date:"Date",currency:"SAR",pendingPricing:"Pending Pricing",showingOf:"Showing {{shown}} of {{total}} quote requests",missing:"Missing",reviewedBy:"By"},security:{securityIndicators:"Security Indicators",failedLoginAttempts:"Failed Login Attempts",suspiciousBehavior:"Suspicious Behavior (Flag)",yes:"Yes",no:"No",resetCounter:"Reset Failure Counter",counterReset:"Counter reset",passwordReset:"Password Reset",passwordResetDesc:"You can reset the account owner's password here. A new password will be generated and the customer will be notified.",enterNewPassword:"Enter new password (at least 4 characters):",adminNotFound:"Error: Admin data not found",passwordResetError:"Error resetting password",passwordMinLength:"Password must be at least 4 characters",resetPasswordBtn:"Reset Password",recentLoginHistory:"Recent Login History",successfulLogin:"Successful Login",failedLogin:"Failed Login",passwordChanged:"Password Changed",passwordResetAdmin:"Reset (Admin)",noLogsAvailable:"No logs available"}}},dle={systemSettings:"System Settings",generalSettings:"General Settings",bannerManagement:"Banner Management",whySiniCar:"Why Sini Car?",textManagement:"Text Management",statusLabels:"System Statuses",apiIntegration:"API Integration",appearanceIdentity:"Appearance & Identity",siteSettings:"Basic Site Settings",saveChanges:"Save Changes",saving:"Saving...",siteName:"Site/Store Name",supportPhone:"Support Phone",salesWhatsApp:"Sales WhatsApp",supportEmail:"Support Email",newsTicker:"News Ticker",enableTicker:"Enable Ticker",tickerText:"Ticker Text",tickerSpeed:"Speed (1-10)",bgColor:"Background Color (Hex)",textColor:"Text Color (Hex)",productDisplaySettings:"Product Display & Search Settings",minVisibleQty:"Min Quantity for Product Visibility",minVisibleQtyNote:"Products with quantity below this will not be visible to customers (Default: 1)",stockThreshold:"Stock Threshold (Out of Stock)",stockThresholdNote:"Products with quantity at or below this will show as 'Out of Stock' (Default: 0)",settingsNote:"These settings affect search results and product display. Low stock products will show without price.",maintenanceMode:"Maintenance Mode",maintenanceModeDesc:"When enabled, the site will show as 'Closed for Maintenance' to all customers.",bannerAds:"Banner Ads Management",bannerAdsDesc:"Control images and offers displayed on the homepage",addNewBanner:"Add New Banner",newBannerData:"New Banner Data",mainTitle:"Main Title",subtitle:"Subtitle",buttonText:"Button Text (e.g., Shop Now)",colorScheme:"Color",imageUrl:"Image URL (Optional)",saveAndPublish:"Save & Publish",uiTextManagement:"UI Text Management",uiTextManagementDesc:"Edit labels and titles visible to customers directly here.",saveTexts:"Save Texts",erpIntegration:"ERP Integration Settings",erpIntegrationDesc:"Connect with Onyx ERP or any external system",connectionSettings:"Connection Settings",erpUrl:"Cloud ERP URL",apiToken:"API Token",syncFrequency:"Sync Frequency",realtime:"Real-time",every15Min:"Every 15 minutes",hourly:"Hourly",daily:"Daily",environment:"Environment",production:"Production (Live)",sandbox:"Sandbox (Test)",testConnection:"Test System Connection",connecting:"Connecting...",connectionSuccess:"Server connection successful (200 OK)",connectionFailed:"Connection failed: Auth token missing",sharedData:"Shared Data via API",sharedDataDesc:"Select data types to sync with external system",productsItems:"Products & Items",productsItemsDesc:"Names, prices, quantities",ordersData:"Orders",ordersDataDesc:"Customer orders and statuses",customersData:"Customers",customersDataDesc:"Customer data and accounts",quotesData:"Quote Requests",quotesDataDesc:"Custom price quotes",inventoryData:"Inventory",inventoryDataDesc:"Warehouse quantities",priceLists:"Price Lists",priceListsDesc:"Wholesale and retail prices",syncDirection:"Sync Direction",pullOnly:"Pull from ERP Only",pullOnlyDesc:"Import data from accounting system",pushOnly:"Push to ERP Only",pushOnlyDesc:"Send data to accounting system",bidirectional:"Bidirectional",bidirectionalDesc:"Full sync in both directions",webhooks:"Webhooks (Instant Notifications)",webhooksDesc:"Add URLs to receive instant notifications on events",addWebhook:"Add",events:"events",webhookAdded:"Webhook added successfully",loadingFailed:"Failed to load settings",settingsSaved:"Settings saved successfully",saveError:"Error saving settings",fillTitleAndDesc:"Please fill in title and description",bannerAdded:"Banner added",bannerDeleted:"Banner deleted",confirmDeleteBanner:"Are you sure you want to delete this banner?",hide:"Hide",show:"Show",darkGray:"Dark Gray (Default)",royalBlue:"Royal Blue",vibrantOrange:"Vibrant Orange",darkGreen:"Dark Green",loading:"Loading...",advancedSettings:"Advanced Settings",loggingLevel:"Logging Level",loggingLevelBasic:"Basic",loggingLevelDetailed:"Detailed",loggingLevelDebug:"Debug (For Developers)",retryOnFail:"Retry on Failure",retryAttempts:"attempts",timeout:"Response Timeout",seconds:"seconds",featureManagement:'"Why Sini Car?" Feature Management',featureManagementDesc:"Customize features displayed on the homepage. You can change texts, icons and colors.",addNewFeature:"Add New Feature",fillAllFields:"Please fill all fields",featureAdded:"Feature added successfully",featureDeleted:"Feature deleted",title:"Settings",description:"Description",icon:"Icon",iconBox:"Box",iconChart:"Chart",iconAnchor:"Anchor",iconHeadphones:"Headphones",iconTruck:"Truck",iconShield:"Shield",iconGlobe:"Globe",iconStar:"Star",iconClock:"Clock",iconAward:"Award",iconColor:"Icon Color",colorCyan:"Cyan",colorGreen:"Green",colorGold:"Gold",colorPurple:"Purple",colorRed:"Red",colorBlue:"Blue",colorPink:"Pink",colorOrange:"Orange",appearanceCustomization:"Appearance & Customization",primaryColor:"Primary Brand Color",primaryColorDesc:"This color affects buttons, links, and main headings.",siteLogo:"Site Logo",uploadNotAvailable:"Upload feature not available in demo version",clickToUploadLogo:"Click to upload logo",livePreview:"Live Preview",livePreviewDesc:"This is how the main button will look with the selected color",primaryButtonExample:"Primary Button Example",statusLabelsManagement:"System Status Labels Management",statusLabelsDescription:"Customize status labels and colors displayed in the dashboard and to customers. System statuses are protected and cannot be deleted, but you can modify their names and colors.",addNewStatus:"Add New Status",statusKey:"Key (English)",statusLabel:"Status Name",newStatus:"New Status",backgroundColor:"Background",preview:"Preview",add:"Add",statusUpdated:"Status updated successfully",fillKeyAndName:"Please fill in key and name",keyExists:"This key already exists",statusAdded:"New status added successfully",cannotDeleteSystem:"Cannot delete system status",cannotDeleteInUse:"Cannot delete, {{count}} records using this status",statusDeleted:"Status deleted successfully",defaultStatusSet:"Default status set",checkingUsage:"Checking usage...",confirmDelete:"Are you sure you want to delete?",yesDelete:"Yes, Delete",systemStatus:"System",defaultStatus:"Default",setAsDefault:"Set as Default",systemStatuses:"System Statuses",systemStatusesDesc:"Protected and cannot be deleted, but you can modify name and color only. These statuses are linked to core system logic.",defaultStatusInfo:"Default Status",defaultStatusInfoDesc:"Used when creating new records. You can set any status as default via the star icon.",statusCategories:{orderStatus:"Order Statuses (Customer Visible)",orderInternalStatus:"Internal Order Statuses",accountRequestStatus:"Account Request Statuses",quoteRequestStatus:"Quote Request Statuses",quoteItemStatus:"Quote Item Statuses",missingStatus:"Missing Parts Statuses",importRequestStatus:"Import Request Statuses",customerStatus:"Customer Statuses",staffStatus:"Staff Statuses"},guestMode:"Guest Mode",guestModeSettings:"Guest Mode Settings",guestModeSettingsDesc:"Control what unregistered visitors see when browsing the site. You can enable/disable different sections and adjust blur intensity.",guestBrowsingEnabled:"Enable Guest Browsing",guestBrowsingEnabledDesc:"Allow visitors to browse the site without logging in",visibleSections:"Visible Sections (with blur)",visibleSectionsDesc:"Select sections that will be visible to guests with blurred content",showBusinessTypes:'"Who We Serve" Section (Business Types)',showMainServices:"Main Services Section",showHowItWorks:'"How It Works" Section',showWhySiniCar:'"Why Sini Car" Section',showCart:"Side Shopping Cart",showMarketingCards:"Side Marketing Cards",blurSettings:"Blur Settings",blurIntensity:"Blur Intensity",blurLight:"Light",blurMedium:"Medium",blurHeavy:"Heavy",showBlurOverlay:"Show overlay on blurred content",showBlurOverlayDesc:'Shows "Login" button over blurred content',searchSettings:"Guest Search Settings",allowSearch:"Allow Search",allowSearchDesc:"Guests can use search (results are blurred)",showSearchResults:"Show Search Results",showSearchResultsDesc:"Display search results with blurred details",guestSettingsSaved:"Guest mode settings saved successfully",general:{title:"General Settings",siteName:"Site Name",siteDescription:"Site Description",contactEmail:"Contact Email",contactPhone:"Contact Phone",currency:"Currency",language:"Language",timezone:"Timezone",save:"Save",saved:"Settings saved"},business:{title:"Business Settings",minOrderAmount:"Minimum Order Amount",maxOrderAmount:"Maximum Order Amount",deliveryFee:"Delivery Fee",taxRate:"Tax Rate"},notifications:{title:"Notification Settings",emailNotifications:"Email Notifications",smsNotifications:"SMS Notifications",pushNotifications:"Push Notifications"},security:{title:"Security Settings",twoFactorAuth:"Two-Factor Authentication",sessionTimeout:"Session Timeout",maxLoginAttempts:"Max Login Attempts"}},ule={title:"Order Management",newOrders:"New Orders",inProgress:"In Progress",readyToShip:"Ready to Ship",totalOrders:"Total Orders",searchOrder:"Search by order number or customer name...",allStatuses:"All Statuses",allInternalStatuses:"All Internal Statuses",orderNumber:"Order Number",customer:"Customer",date:"Date",total:"Total",status:"Status",internalStatus:"Internal Status",actions:"Actions",noOrders:"No orders",orderDetails:"Order Details",customerInfo:"Customer Information",orderItems:"Order Items",statusHistory:"Status History",internalNotes:"Internal Notes",updateStatus:"Update Status",updateInternalStatus:"Update Internal Status",externalStatusUpdated:"External order status updated",internalStatusUpdated:"Internal order status updated",updateFailed:"Update failed",statusLabels:{pending:"Pending",approved:"Approved",shipped:"Shipped",delivered:"Delivered",rejected:"Rejected",cancelled:"Cancelled"},internalStatusLabels:{new:"New",sentToWarehouse:"Sent to Warehouse",waitingPayment:"Waiting Payment",paymentConfirmed:"Payment Confirmed",salesInvoiceCreated:"Sales Invoice Created",readyForShipment:"Ready for Shipment",completedInternal:"Completed Internally",cancelledInternal:"Cancelled Internally"},details:"Details",name:"Name",userId:"ID",product:"Product",quantity:"Quantity",price:"Price",itemTotal:"Total",grandTotal:"Grand Total",changedStatusTo:"changed status to",noHistory:"No previous history",externalStatus:"Customer Status (External)",externalStatusDesc:"Customer will be notified when this status changes.",noStatusPermission:"You don't have permission to change status",internalStatusTitle:"Internal Status",internalStatusDesc:"For admin use only. Not visible to customer.",notesPlaceholder:"Write a note about the status change...",saveNotes:"Save Notes",noInternalPermission:"You don't have permission to edit internal status",dangerZone:"Danger Zone",cancelOrder:"Cancel Order Permanently",noPermission:"No Permission",stats:{pending:"Pending",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled",total:"Total",new:"New",ready:"Ready for Shipment"},searchPlaceholder:"Search by order number or customer...",table:{orderId:"Order ID",customer:"Customer",items:"Items",total:"Total",date:"Date",status:"Status",actions:"Actions"},view:"View",approve:"Approve",ship:"Ship",deliver:"Deliver",cancel:"Cancel",orderUpdated:"Order updated",shippingInfo:"Shipping Info",paymentInfo:"Payment Info",noteAdded:"Note added"},mle={title:"Account Opening Requests",newRequests:"New Requests",underReview:"Under Review",approved:"Approved",rejected:"Rejected",searchAccount:"Search by business name or phone...",allStatuses:"All Statuses",businessName:"Business Name",phone:"Phone",requestDate:"Request Date",status:"Status",actions:"Actions",noRequests:"No requests found",requestDetails:"Request Details",businessInfo:"Business Information",contactInfo:"Contact Information",documents:"Documents",decision:"Decision",priceLevel:"Price Level",customerType:"Customer Type",searchPoints:"Search Points",initialPoints:"Initial Points",monthlyPoints:"Monthly Points",portalAccess:"Portal Access",startDate:"Start Date",endDate:"End Date",openEnded:"Open Ended",staffAccess:"Staff Access",canCreateStaff:"Can Create Staff",maxStaffUsers:"Max Staff Users",adminNotes:"Admin Notes",saveDecision:"Save Decision",decisionSaved:"Decision saved successfully",saveError:"Error saving decision",statusLabels:{new:"New Request",underReview:"Under Review",approved:"Approved",rejected:"Rejected",onHold:"On Hold"},documentTypes:{crCertificate:"Commercial Register",vatCertificate:"VAT Certificate",nationalId:"National ID",authorizationLetter:"Authorization Letter",other:"Other Document"}},fle={stats:{newRequests:"New Requests",underReview:"Under Review",approved:"Approved",rejected:"Rejected"},status:{new:"New Request",underReview:"Under Review",approved:"Approved",rejected:"Rejected",onHold:"On Hold"},docTypes:{crCertificate:"Commercial Registration",vatCertificate:"VAT Certificate",nationalId:"National ID",authLetter:"Authorization Letter",other:"Other Document"},categories:{spareParts:"Spare Parts Shop",rental:"Car Rental",insurance:"Insurance Company",agent:"Agent"},searchPlaceholder:"Search by business name, phone...",allStatuses:"All Statuses",table:{businessName:"Business / Customer Name",activityType:"Activity Type",city:"City",date:"Date",status:"Status",actions:"Actions"},approvedAccount:"Approved Account",view:"View",noMatchingRequests:"No matching requests",panel:{title:"Approval Request Details",customerData:"Customer Data",businessName:"Business Name",activity:"Activity",city:"City",contactNumber:"Contact Number",crNumber:"Commercial Registration",vatNumber:"VAT Number",customerNotes:"Customer Notes",attachedDocuments:"Attached Documents",adminDecision:"Admin Decision & Permissions"},form:{requestStatus:"Request Status",statusNew:"New",statusUnderReview:"Under Review",statusApproved:"Approved",statusRejected:"Rejected",statusOnHold:"On Hold",customerType:"Customer Type",typePartsShop:"Parts Shop",typeRentalCompany:"Rental Company",typeInsuranceCompany:"Insurance Company",typeSalesAgent:"Sales Agent",typeFleetCustomer:"Fleet Customer",typeOther:"Other",priceLevel:"Price Level",level1:"Level 1 (VIP - Best Price)",level2:"Level 2 (Wholesale)",level3:"Level 3 (Retail/Small)",levelSpecial:"Special",accessValidity:"Access Validity",to:"to",openEnded:"Open-ended (no expiry date)",searchPoints:"Search Points Balance",initialBalance:"Initial Balance",monthlyRenewal:"Monthly Renewal",allowAddStaff:"Allow Adding Staff",maxLimit:"Maximum Limit",adminNotes:"Admin Notes (Internal Use)",notesPlaceholder:"Write any notes about the review...",saveDecision:"Save Decision",cancel:"Cancel"},toast:{saveSuccess:"Decision saved successfully",saveError:"Error saving decision"}},hle={title:"Quote Request Management",pendingQuotes:"Pending Quotes",completedQuotes:"Completed Quotes",searchQuote:"Search by request number or customer...",allStatuses:"All Statuses",quoteNumber:"Request Number",customer:"Customer",date:"Date",itemsCount:"Items Count",status:"Status",actions:"Actions",noQuotes:"No quote requests",quoteDetails:"Quote Details",requestedItems:"Requested Items",response:"Response",sendResponse:"Send Response",stats:{new:"New",inProgress:"In Progress",completed:"Completed",approved:"Approved"},searchPlaceholder:"Search by quote ID, customer name...",table:{quoteId:"Quote ID",customer:"Customer",items:"Items",priceType:"Price Type",date:"Date",status:"Status",actions:"Actions"},view:"View",process:"Process",complete:"Complete",approve:"Approve",quoteUpdated:"Quote request updated",pricedItems:"Priced Items",missingItems:"Missing Items"},xle={title:"Product Management",subtitle:"Manage product catalog, prices and inventory",searchPlaceholder:"Search for product...",addProduct:"Add Product",importExcel:"Import Excel",exportExcel:"Export Excel",columnSettings:"Column Settings",visibilitySettings:"Visibility Settings",stats:{totalProducts:"Total Products",inStock:"In Stock",outOfStock:"Out of Stock",hidden:"Hidden"},table:{partNumber:"Part Number",name:"Product Name",brand:"Brand",quantity:"Quantity",price:"Price",visibility:"Visibility",actions:"Actions"},modal:{addTitle:"Add New Product",editTitle:"Edit Product",deleteConfirm:"Confirm Delete",deleteMessage:"Are you sure you want to delete this product?",importTitle:"Import from Excel",columnSettingsTitle:"Excel Column Settings"},form:{partNumber:"Part Number",name:"Product Name",brand:"Brand",quantity:"Quantity",price:"Price",costPrice:"Cost Price",description:"Description",isVisible:"Visible to Customers",save:"Save",cancel:"Cancel"},import:{selectFile:"Select Excel File",dragDrop:"Or drag and drop file here",processing:"Processing...",success:"Import successful",imported:"Imported",updated:"Updated",skipped:"Skipped",errors:"Errors"},validation:{partNumberRequired:"Part number is required",nameRequired:"Product name is required",priceInvalid:"Price is invalid",quantityInvalid:"Quantity is invalid"},toast:{productCreated:"Product added successfully",productUpdated:"Product updated successfully",productDeleted:"Product deleted successfully",importSuccess:"Products imported successfully",createError:"Failed to add product",updateError:"Failed to update product",deleteError:"Failed to delete product",importError:"Failed to import file",loadError:"Failed to load products",visibilityThresholdSaved:"Minimum display quantity saved"},presets:{title:"Import Column Settings",name:"Preset Name",isDefault:"Default",mappings:"Column Mappings",internalField:"Internal Field",excelHeader:"Excel Column",enabled:"Enabled",required:"Required",addPreset:"Add New Preset",editPreset:"Edit Preset",deletePreset:"Delete Preset",savePreset:"Save Preset",toast:{presetCreated:"Preset created successfully",presetUpdated:"Preset updated successfully",presetDeleted:"Preset deleted successfully",presetSetDefault:"Preset set as default"}},uploadExcel:"Upload Excel",downloadTemplate:"Download Template",loading:"Loading...",noProducts:"No products",noMatchingProducts:"No matching products",partNumber:"Part Number",productName:"Product Name",quantity:"Quantity",price:"Price",category:"Category",actions:"Actions",edit:"Edit",delete:"Delete",deleteConfirm:"Are you sure you want to delete this product?",productDeleted:"Product deleted",productSaved:"Product saved",productCreated:"Product created",importModal:{title:"Import Products",selectFile:"Select Excel file",importing:"Importing...",importSuccess:"Import successful",imported:"Added",updated:"Updated",skipped:"Skipped",errors:"Errors"},productModal:{editTitle:"Edit Product",addTitle:"Add New Product",save:"Save",cancel:"Cancel"},columnPresets:{title:"Excel Column Settings",presetName:"Preset Name",enterPresetName:"Please enter preset name",created:"Preset created successfully",saved:"Changes saved",deleteConfirm:"Are you sure you want to delete this preset?",deleted:"Preset deleted",setDefault:"Set as Default",isDefault:"Default"},visibility:{title:"Visibility Settings",threshold:"Minimum Visibility Threshold",saved:"Visibility settings saved"},pagination:{showing:"Showing",of:"of",products:"products",previous:"Previous",next:"Next"},selectProductsFirst:"Please select products first",selectedCount:"Selected {{count}} products",visibilityApplied:"Applied visibility rule to {{count}} products",visibilityRemoved:"Removed visibility rule from {{count}} products",loadFailed:"Failed to load products",importFailed:"Import failed",templateDownloaded:"Excel template downloaded",templateDownloadFailed:"Failed to download template",partAndNameRequired:"Part number and name are required",deleteFailed:"Failed to delete product"},ple={title:"User Management",subtitle:"Manage admin user accounts, roles and permissions",tabs:{users:"Users",roles:"Roles & Permissions"},searchPlaceholder:"Search by name, email...",allRoles:"All Roles",allStatuses:"All Statuses",addUser:"Add User",exportUsers:"Export Data",table:{user:"User",role:"Role",contact:"Contact",lastLogin:"Last Login",status:"Status",actions:"Actions",name:"Name",email:"Email",phone:"Phone"},status:{active:"Active",inactive:"Inactive",ACTIVE:"Active",SUSPENDED:"Suspended",PENDING:"Pending"},modal:{addTitle:"Add New User",editTitle:"Edit User",deleteConfirm:"Confirm Delete",deleteMessage:"Are you sure you want to delete this user?",resetPassword:"Reset Password",toggleStatus:"Change Status"},form:{fullName:"Full Name",username:"Username",email:"Email",phone:"Phone Number",role:"Role",password:"Password",newPassword:"New Password",confirmPassword:"Confirm Password",save:"Save",cancel:"Cancel"},validation:{nameRequired:"Name is required",usernameRequired:"Username is required",emailRequired:"Email is required",emailInvalid:"Email is invalid",passwordRequired:"Password is required",passwordMinLength:"Password must be at least 6 characters",roleRequired:"Role is required"},toast:{userCreated:"User created successfully",userUpdated:"User updated successfully",userDeleted:"User deleted successfully",passwordReset:"Password reset successfully",statusChanged:"User status changed",createError:"Failed to create user",updateError:"Failed to update user",deleteError:"Failed to delete user",loadError:"Failed to load users"},roles:{title:"Roles Management",addRole:"Add New Role",editRole:"Edit Role",deleteRole:"Delete Role",roleName:"Role Name",roleDescription:"Role Description",permissions:"Permissions",usersCount:"Users Count",isSystemRole:"System Role",noRoles:"No roles found",toast:{roleCreated:"Role created successfully",roleUpdated:"Role updated successfully",roleDeleted:"Role deleted successfully"},SUPER_ADMIN:"Super Admin",ADMIN:"Admin",MANAGER:"Manager",STAFF:"Staff",CUSTOMER_OWNER:"Account Owner",CUSTOMER_STAFF:"Customer Staff"},stats:{total:"Total Users",admins:"Admins",staff:"Staff",active:"Active"},noUsers:"No users",editUser:"Edit User",deleteUser:"Delete User",deleteConfirm:"Are you sure you want to delete this user?",userCreated:"User created",userUpdated:"User updated",userDeleted:"User deleted",resetPassword:"Reset Password",passwordReset:"Password reset"},gle={title:"Access Denied",message:"You do not have permission to view this page or perform this action",contactAdmin:"Please contact the system administrator",requestedPage:"Requested Page",goBack:"Go Back",goHome:"Dashboard",errorCode:"Error Code"},ble={searchPlaceholder:"Search by quote number or company...",allStatuses:"All Statuses",table:{requestNumber:"Request Number",businessCustomer:"Business / Customer",uploadDate:"Upload Date",itemsCount:"Items Count",priceType:"Price Type",status:"Status",actions:"Actions"},reviewDetails:"Review / Details",noRequests:"No requests found",panel:{reviewRequest:"Review Request",proposedTotal:"Proposed Total",approving:"Approving...",approveAndSend:"Approve and Send to Customer",selectAll:"Select All",changeSelectedStatus:"Change Selected Status",available:"Available (Approved)",unavailable:"Unavailable (Missing)",rejected:"Rejected",customerPartNumber:"Part Number (Customer)",customerPartName:"Part Name (Customer)",quantity:"Quantity",matchedProduct:"Matched Product",price:"Price",decision:"Decision",notes:"Notes",generalNotes:"General Notes for Customer",notesPlaceholder:"Additional notes that will be shown to customer...",itemStatus:{approved:"Available",missing:"Unavailable",rejected:"Rejected",pending:"Pending"}},status:{new:"New",underReview:"Under Review",partiallyApproved:"Partially Approved",approved:"Approved",quoted:"Quoted",processed:"Processed",rejected:"Rejected"},toast:{itemsUpdated:"Updated {{count}} items",approvedWithoutPriceWarning:"Some items are approved without price. Continue?",pricingSentSuccess:"Pricing approved and sent to customer",saveError:"Error saving changes",quoteSaved:"Quote request saved",quoteSaveFailed:"Failed to save quote request"}},vle={tabs:{all:"All",fromSearch:"From Search",fromQuote:"From Quote"},stats:{totalMissing:"Total Missing",newMissing:"New Missing",underReview:"Under Review",ordered:"Ordered",solved:"Solved",orderedImport:"Ordered / Import",addedToStock:"Added to Stock",fromQuote:"From Quote",fromSearch:"From Search"},searchPlaceholder:"Search by part number...",allStatuses:"All Statuses",noMatchingMissing:"No matching missing parts found",table:{partNumber:"Part Number / Search",partInfo:"Part Information",requestCount:"Request Count",requestFrequency:"Request Frequency",interestedCustomers:"Interested Customers",source:"Source",date:"Date",lastRequest:"Last Request",status:"Status",actions:"Actions"},source:{search:"Search",quote:"Quote"},actions:{details:"Details",linkToImport:"Link to Import",addToStock:"Add to Stock",saving:"Saving...",saveChanges:"Save Changes"},view:"View",noMatchingParts:"No matching results found",pagination:{page:"Page",of:"of"},export:{partNumber:"Part Number",itemName:"Item Name",source:"Source",requestCount:"Request Count",customerCount:"Customer Count",status:"Status",lastRequest:"Last Request",adminNotes:"Admin Notes"},panel:{title:"Missing Part Details",missingDetails:"Missing Details",partDetails:"Part Details",requestedItem:"Requested Item",suggestedName:"Suggested Name",brand:"Brand",searchQuery:"Original Search",partNumber:"Part Number",partName:"Part Name",requestCount:"Request Count",differentCustomers:"Different Customers",source:"Request Source",sourceQuote:"Source: Quote Request",firstRequest:"First Request",lastRequest:"Last Request",requestingCustomers:"Requesting Customers",updateStatus:"Update Status",followUp:"Follow Up",internalNotes:"Internal Notes",adminNotes:"Admin Notes",notesPlaceholder:"Write follow-up notes (e.g., Contacted supplier...)",saving:"Saving...",saveStatus:"Save Status"},status:{new:"New Missing",underReview:"Under Review",orderPlanned:"Scheduled for Import",ordered:"Ordered",addedToStock:"Added to Stock",ignored:"Ignored"},sourceLabels:{search:"Search",quote:"Quote"},toast:{statusUpdated:"Item status updated successfully",saveError:"Error saving changes",exportSuccess:"Report exported successfully",exportFailed:"Export failed",linkImportSoon:"Import linking will be enabled soon",redirectToAddProduct:"Redirecting to add product page..."}},yle={stats:{newRequests:"New Requests",pending:"Pending",inProgress:"In Progress",awaitingCustomer:"Awaiting Customer",completed:"Completed",delivered:"Delivered"},table:{requestNumber:"Request Number",customer:"Customer",service:"Service",requestDate:"Request Date",date:"Date",category:"Category",status:"Status",action:"Action",actions:"Actions"},serviceType:{fullService:"Full Service",processingOnly:"Processing Only",fullImport:"Full Import",goodsPreparation:"Goods Preparation"},actions:{manageRequest:"Manage Request",startReview:"Start Review",requestItemsFile:"Request Items File",cancelRequest:"Cancel Request"},viewDetails:"View Details",noRequests:"No import requests found",modal:{manageRequest:"Manage Import Request",currentStatus:"Current Status",timeline:"Events Log (Timeline)"},pricing:{preparePricing:"Prepare Price Offer",customerFile:"Customer File",download:"Download",waitingForFile:"Waiting for customer to upload items file...",totalOffer:"Total Offer (SAR)",sendToCustomer:"Send Offer to Customer"},details:{title:"Request Details",requestedBrands:"Requested Brands",serviceType:"Service Type",branchesCount:"Branches Count",estimatedValue:"Estimated Value",customerNotes:"Customer Notes"},statusControl:{title:"Update Status (Manual)",hint:"Use this option to progress through shipping stages (Factory, Sea, Port...)"},panel:{title:"Import Request Details",requestInfo:"Request Information",customer:"Customer",category:"Category",description:"Description",estimatedQuantity:"Estimated Quantity",timeline:"Timeline",updateStatus:"Update Status",pricingSection:"Pricing Section",totalAmount:"Total Amount",enterAmount:"Enter amount",note:"Note",notePlaceholder:"Note for customer...",sendPricing:"Send Price Offer"},status:{new:"New Request",underReview:"Under Review",waitingCustomerExcel:"Waiting Customer File",pricingInProgress:"Pricing in Progress",pricingSent:"Offer Sent",waitingCustomerApproval:"Waiting Approval",approvedByCustomer:"Customer Approved",inFactory:"In Factory",shipmentBooked:"Shipment Booked",onTheSea:"On the Sea",inPort:"Arrived at Port",customsCleared:"Customs Cleared",onTheWay:"On the Way",delivered:"Delivered",cancelled:"Cancelled"},toast:{statusUpdated:"Status updated successfully",updateFailed:"Update failed",enterValidAmount:"Please enter a valid amount",pricingSent:"Price offer sent to customer",sendFailed:"Failed to send"}},Nle={title:"Installment Purchase Requests",subtitle:"Submit and track installment purchase requests",adminTitle:"Installment Request Management",adminSubtitle:"Review and approve installment purchase requests",supplierTitle:"Supplier Installment Requests",supplierSubtitle:"View and submit offers on installment requests",newRequest:"New Request",myRequests:"My Requests",noRequests:"No installment requests",createFirst:"Create your first request",requestDetails:"Request Details",requestedValue:"Requested Value",duration:"Duration",frequency:"Frequency",downPayment:"Down Payment",requestedItems:"Requested Items",product:"Product",quantity:"Quantity",price:"Price",notes:"Notes",createdAt:"Created At",cancelRequest:"Cancel Request",confirmCancel:"Are you sure you want to cancel this request?",requestCancelled:"Request cancelled",months:"months",monthly:"Monthly",weekly:"Weekly",pendingOffers:"Offers Awaiting Your Decision",sinicarOffer:"SINI CAR Offer",supplierOffer:"Offer from",fullApproval:"Full Approval",partialApproval:"Partial Approval",approvedValue:"Approved Value",installments:"Installments",installmentAmount:"Installment Amount",startDate:"Start Date",acceptOffer:"Accept Offer",rejectOffer:"Reject Offer",offerAccepted:"Offer accepted successfully",offerRejected:"Offer rejected",activeContract:"Active Contract",totalPaid:"Total Paid",remaining:"Remaining",paidInstallments:"Paid Installments",overdueInstallments:"Overdue Installments",installmentNumber:"Installment #",dueDate:"Due Date",amount:"Amount",status:"Status",paid:"Paid",overdue:"Overdue",pending:"Pending",enterTotalValue:"Enter Total Value",selectProducts:"Select Products",totalValue:"Total Value Requested",selectProduct:"-- Select Product --",total:"Total",paymentFrequency:"Payment Frequency",minMax:"Minimum",max:"Maximum",unlimited:"Unlimited",minDownPayment:"Minimum",paymentPreview:"Payment Preview",afterDownPayment:"After Down Payment",estimatedInstallment:"Estimated Installment",acceptTerms:"I agree to the terms and conditions",submitRequest:"Submit Request",requestCreated:"Request submitted successfully",loadError:"Error loading data",actionError:"An error occurred",cancelError:"Error cancelling request",createError:"Error submitting request",minAmountError:"Value is below minimum allowed",maxAmountError:"Value exceeds maximum allowed",minDownPaymentError:"Down payment is below minimum",disabled:"Installment service is currently unavailable",disabledDesc:"The service will be available soon. Please try again later",notesPlaceholder:"Any additional notes...",totalRequests:"Total Requests",pendingRequests:"Pending Review",activeContracts:"Active Contracts",closedContracts:"Closed Contracts",overdueAmount:"Overdue Amount",noRequestsInTab:"No requests in this section",requestId:"Request ID",customer:"Customer",date:"Date",actions:"Actions",review:"Review",reviewRequest:"Review Installment Request",yourDecision:"Your Decision",approveFullAction:"Full Approval",approveFullDesc:"Approve the full amount",approvePartialAction:"Partial Approval",approvePartialDesc:"Approve part of the amount",rejectAction:"Reject",rejectDesc:"Reject the request",approvedAmount:"Approved Amount",forwardOnReject:"Forward request to suppliers after rejection",adminNotes:"Admin Notes",confirmDecision:"Confirm Decision",decisionRecorded:"Decision recorded",requestRejected:"Request rejected",forwarded:"Request forwarded to suppliers",customerNotes:"Customer Notes",generalSettings:"General Settings",enableSystem:"Enable Installment System",sinicarPriority:"SINI CAR Has Priority",allowPartialSinicar:"Allow Partial Approval by SINI CAR",allowPartialSuppliers:"Allow Partial Approval by Suppliers",forwardingSettings:"Forwarding Settings",autoForwardOnReject:"Auto-forward to suppliers on rejection",autoForwardOnPartial:"Auto-forward remainder on partial approval",onCustomerRejectsSinicar:"When customer rejects SINI CAR offer",forwardToSuppliers:"Forward to Suppliers",closeRequest:"Close Request",financialLimits:"Financial Limits",minAmount:"Minimum Amount",maxAmount:"Maximum Amount",requireDownPayment:"Require Down Payment",minDownPercent:"Minimum %",maxDownPercent:"Maximum %",durationSettings:"Duration Settings",minMonths:"Minimum (months)",maxMonths:"Maximum (months)",defaultFrequency:"Default Frequency",settingsSaved:"Settings saved",settingsError:"Error saving settings",noCreditProfiles:"No credit profiles",creditScore:"Credit Score",availableRequests:"Available Requests",submittedOffers:"Submitted Offers",pendingDecisions:"Pending Decisions",availableForOffer:"Available for Offer",noAvailableRequests:"No requests available",submitOffer:"Submit Offer",mySubmittedOffers:"My Submitted Offers",myOffer:"My Offer",perInstallment:"per installment",anonymousCustomer:"Customer",requestedDuration:"Requested Duration",fullOffer:"Full Offer",partialOffer:"Partial Offer",offerAmount:"Offer Amount",numberOfInstallments:"Number of Installments",offerSummary:"Offer Summary",offerSubmitted:"Offer submitted successfully",offerError:"Error submitting offer",invalidAmount:"Invalid amount"},wle={title:"Marketer Management",stats:{total:"Total Marketers",active:"Active",pending:"Pending",suspended:"Suspended"},searchPlaceholder:"Search by name, phone...",allStatuses:"All Statuses",table:{name:"Name",phone:"Phone",referralCode:"Referral Code",referrals:"Referrals",earnings:"Earnings",status:"Status",actions:"Actions"},status:{ACTIVE:"Active",PENDING:"Pending",SUSPENDED:"Suspended"},noMarketers:"No marketers",view:"View",activate:"Activate",suspend:"Suspend",delete:"Delete",addMarketer:"Add Marketer",marketerDetails:"Marketer Details",referralHistory:"Referral History",commissionHistory:"Commission History",payoutHistory:"Payout History",pendingPayout:"Pending Payout",totalEarnings:"Total Earnings",marketerUpdated:"Marketer updated",marketerCreated:"Marketer created"},Sle={title:"Advertising Management",stats:{total:"Total Ads",active:"Active",scheduled:"Scheduled",expired:"Expired"},searchPlaceholder:"Search ads...",allStatuses:"All Statuses",table:{title:"Title",type:"Type",placement:"Placement",startDate:"Start Date",endDate:"End Date",status:"Status",actions:"Actions"},status:{ACTIVE:"Active",SCHEDULED:"Scheduled",PAUSED:"Paused",EXPIRED:"Expired"},noAds:"No advertisements",addAd:"Add Ad",editAd:"Edit Ad",deleteAd:"Delete Ad",deleteConfirm:"Are you sure you want to delete this ad?",adCreated:"Ad created",adUpdated:"Ad updated",adDeleted:"Ad deleted",uploadImage:"Upload Image",adDetails:"Ad Details"},jle={title:"Installment Management",stats:{totalRequests:"Total Requests",pending:"Pending",approved:"Approved",rejected:"Rejected",active:"Active"},searchPlaceholder:"Search by name, request ID...",allStatuses:"All Statuses",table:{requestId:"Request ID",customer:"Customer",product:"Product",amount:"Amount",installments:"Installments",status:"Status",actions:"Actions"},status:{PENDING:"Pending",APPROVED:"Approved",REJECTED:"Rejected",ACTIVE:"Active",COMPLETED:"Completed",DEFAULTED:"Defaulted"},noRequests:"No installment requests",view:"View",approve:"Approve",reject:"Reject",requestDetails:"Request Details",customerInfo:"Customer Info",productInfo:"Product Info",paymentSchedule:"Payment Schedule",paymentHistory:"Payment History",monthlyPayment:"Monthly Payment",totalAmount:"Total Amount",remainingAmount:"Remaining Amount",dueDate:"Due Date",requestApproved:"Request approved",requestRejected:"Request rejected"},Ale={title:"Customer Portal Settings",description:"Configure the appearance, layout, and features of the customer portal",resetDefaults:"Reset Defaults",saveChanges:"Save Changes",confirmReset:"Are you sure you want to reset all settings to defaults?",unsavedChanges:"You have unsaved changes",savedSuccess:"Settings saved successfully",tabs:{design:"Design & Theme",layout:"Dashboard Layout",navigation:"Navigation Menu",features:"Features",content:"Content"},design:{themeMode:"Theme Mode",colors:"Color Scheme"},layout:{sections:"Dashboard Sections",reorder:"Drag to reorder"},navigation:{menu:"Navigation Menu Items"},features:{tools:"Tools & Features",ordering:"Ordering",marketing:"Marketing",guest:"Guest Mode"},banners:{hero:"Hero Banners"},announcements:{title:"Announcements"},cards:{info:"Info Cards"}},Ele={title:"AI Settings",description:"Manage AI providers and their features",globalEnable:"Enable AI Features",globalEnableDesc:"Enable or disable all AI features across the platform",unsavedChanges:"Unsaved changes",resetDefaults:"Reset to Defaults",saveChanges:"Save Changes",savedSuccess:"AI settings saved successfully",resetSuccess:"Settings reset to defaults",confirmReset:"Are you sure you want to reset all AI settings?",tabs:{providers:"AI Providers",features:"Features",limits:"Usage Limits",prompts:"System Prompts",safety:"Safety & Privacy"},providers:{title:"AI Providers",description:"Manage OpenAI, Gemini, and Anthropic connections",default:"Default",enabled:"Enabled",disabled:"Disabled",apiKey:"API Key",apiKeyPlaceholder:"Enter API key",apiKeyNote:"Leave empty to use Replit AI integration",model:"Model",maxTokens:"Max Tokens",rateLimit:"Rate Limits",perMinute:"Per minute",perDay:"Per day",chat:"Chat",imageGen:"Image Generation",vision:"Vision",audio:"Audio",setDefault:"Set as Default"},features:{customerTitle:"Customer Features",customerDesc:"AI features available to customers",adminTitle:"Admin Features",adminDesc:"AI features available to administrators",marketingTitle:"Marketing Features",enableAIAssistant:"AI Assistant",enableAIAssistantDesc:"Chat assistant for customer inquiries",enableAIProductSearch:"Smart Search",enableAIProductSearchDesc:"AI-enhanced product search",enableAIPartMatching:"Part Matching",enableAIPartMatchingDesc:"Intelligent part number matching",enableAIVinDecoding:"VIN Decoding",enableAIVinDecodingDesc:"Extract vehicle info from VIN",enableAIPriceAnalysis:"Price Analysis",enableAIPriceAnalysisDesc:"Price comparison and analysis",enableAITranslation:"Auto Translation",enableAITranslationDesc:"Automatic content translation",enableAIOrderAnalysis:"Order Analysis",enableAIOrderAnalysisDesc:"Intelligent order data analysis",enableAICustomerInsights:"Customer Insights",enableAICustomerInsightsDesc:"Customer behavior analysis",enableAIReports:"Smart Reports",enableAIReportsDesc:"Automatic report generation",enableAIFraudDetection:"Fraud Detection",enableAIFraudDetectionDesc:"Detect suspicious activities",enableAIInventoryPrediction:"Inventory Prediction",enableAIInventoryPredictionDesc:"Predict inventory needs",enableAIContentGeneration:"Content Generation",enableAIContentGenerationDesc:"Auto-generate marketing content",enableAICampaignOptimization:"Campaign Optimization",enableAICampaignOptimizationDesc:"Auto-optimize ad campaigns"},limits:{title:"Usage Limits",description:"Set usage limits by user role",dailyRequests:"Daily Requests",monthlyRequests:"Monthly Requests",maxTokens:"Max Tokens per Request",role:{customer:"Customer",admin:"Administrator",super_admin:"Super Admin"}},prompts:{title:"System Prompts",description:"Customize AI system prompts",customerAssistant:"Customer Assistant",customerAssistantDesc:"System prompt for chat assistant",productSearch:"Product Search",productSearchDesc:"System prompt for smart search",partMatching:"Part Matching",partMatchingDesc:"System prompt for part number matching"},safety:{title:"Safety & Privacy",description:"AI safety and privacy settings",contentModeration:"Content Moderation",contentModerationDesc:"Filter inappropriate content",blockedTopics:"Blocked Topics",blockedTopicsDesc:"Topics AI will not discuss",addTopic:"Add topic and press Enter",maxConversation:"Max Conversation Length",maxConversationDesc:"Maximum messages per conversation",trackUsage:"Track Usage",trackUsageDesc:"Log AI usage statistics",trackCosts:"Track Costs",trackCostsDesc:"Calculate API costs"}},Cle={portalTitle:"Supplier Portal",dashboard:"Dashboard",products:"Products",requests:"Quote Requests",settings:"Settings",notifications:"Notifications",totalProducts:"Total Products",activeProducts:"Active Products",pendingRequests:"Pending Requests",quotesSubmitted:"Quotes Submitted",quotesAccepted:"Quotes Accepted",totalRevenue:"Total Revenue",active:"Active",inactive:"Inactive",accepted:"Accepted",recentRequests:"Recent Requests",viewAll:"View All",noRequests:"No requests",quickActions:"Quick Actions",addProduct:"Add Product",importProducts:"Import Products",viewRequests:"View Requests",performance:"Performance",avgResponseTime:"Avg Response Time",rating:"Rating",searchProducts:"Search products...",searchRequests:"Search requests...",import:"Import",export:"Export",noProducts:"No products",addFirstProduct:"Add your first product",sku:"SKU",productName:"Product Name",brand:"Brand",price:"Price",stock:"Stock",minOrder:"Min Order",category:"Category",oemNumber:"OEM Number",editProduct:"Edit Product",add:"Add",allStatuses:"All Statuses",customer:"Customer",quantity:"Quantity",deadline:"Deadline",received:"Received",submitQuote:"Submit Quote",reject:"Reject",quotedAt:"Quoted Price",status:{new:"New",viewed:"Viewed",quoted:"Quoted",accepted:"Accepted",rejected:"Rejected"},urgency:{low:"Low",medium:"Medium",high:"High",urgent:"Urgent",normal:"Normal"},settingsTitle:"Supplier Settings",defaultPriceMarkup:"Default Price Markup",defaultDeliveryTime:"Default Delivery Time",deliveryDaysHint:"Number of days",notifyNewRequest:"Notify on new request",notifyQuoteAccepted:"Notify on quote accepted",notifyDeadline:"Notify on approaching deadline",submitQuoteTitle:"Submit Quote",requestDetails:"Request Details",part:"Part",yourPrice:"Your Price",availableStock:"Available Stock",quoteNotes:"Additional Notes",sendQuote:"Send Quote",importComplete:"Import Complete",importFailed:"Import Failed",totalRows:"Total Rows",inserted:"Inserted",updated:"Updated",skipped:"Skipped",errors:"Errors",row:"Row",dropExcelFile:"Drop Excel file here or select file",startImport:"Start Import",importing:"Importing...",productAdded:"Product added successfully",productUpdated:"Product updated successfully",productDeleted:"Product deleted",productAddError:"Error adding product",productUpdateError:"Error updating product",productDeleteError:"Error deleting product",confirmDeleteProduct:"Are you sure you want to delete this product?",quoteSent:"Quote sent successfully",quoteError:"Error sending quote",requestRejected:"Request rejected",rejectError:"Error rejecting request",rejectReason:"Rejection reason (optional)",settingsSaved:"Settings saved",settingsError:"Error saving settings",importSuccess:"Import successful",importError:"Error importing file",exportSuccess:"Products exported successfully",added:"added",thisMonthRevenue:"This Month Revenue",team:"Team",addEmployee:"Add Employee",editEmployee:"Edit Employee",employeeAdded:"Employee added successfully",employeeUpdated:"Employee updated successfully",noEmployees:"No team members yet",addFirstEmployee:"Add your first team member to get started"},Tle={title:"Tools Usage History",subtitle:"Track all your trader tools usage",filters:"Filters",toolType:"Tool Type",status:"Status",dateFrom:"From Date",dateTo:"To Date",totalUsage:"Total",noRecords:"No records",noRecordsDesc:"Start using trader tools to see your history here",detailsTitle:"Action Details",loadError:"Error loading history",col:{date:"Date",tool:"Tool",input:"Input",output:"Output",status:"Status",actions:"Actions"},processingTime:"Processing Time",inputFile:"Input File",outputFile:"Output File",errorMessage:"Error Message",deviceType:"Device",additionalInfo:"Additional Information",confidence:"Accuracy",suppliersCompared:"Suppliers Compared",pagesProcessed:"Pages Processed"},_le={title:"Trader Tools Management",subtitle:"Enable/disable tools and configure access permissions",settingsTab:"Settings",analyticsTab:"Analytics",usageLogTab:"Usage Log",filters:"Filters",search:"Search",searchPlaceholder:"Name, VIN, file...",toolType:"Tool Type",status:"Status",dateFrom:"From Date",dateTo:"To Date",clearFilters:"Clear",export:"Export",totalActions:"Total Actions",successful:"Successful",failed:"Failed",successRate:"Success Rate",noRecords:"No records",exportSuccess:"Data exported successfully",exportError:"Failed to export data",loadError:"Failed to load usage log",col:{date:"Date",customer:"Customer",tool:"Tool",input:"Input",output:"Output",status:"Status",actions:"Actions"},detailTitle:"Action Details",processingTime:"Processing Time",inputDetails:"Input",outputDetails:"Output",showing:"Showing"},kle={VIN:"VIN Extraction",PDF_EXCEL:"PDF to Excel",COMPARISON:"Price Comparison",ALTERNATIVES:"Alternatives Upload",SEARCH:"Product Search",EXCEL_QUOTE:"Excel Quote"},Ole={SUCCESS:"Success",FAILED:"Failed",PENDING:"Pending",PROCESSING:"Processing"},Ile={viewImage:"View Image",noImage:"No Image",loadError:"Failed to load image",magnifierHint:"Move mouse over image to zoom",uploadImage:"Upload Image",addToGallery:"Add to Gallery",removeImage:"Remove Image",setAsMain:"Set as Main",mainImage:"Main Image",gallery:"Gallery",imageOf:"Image {{current}} of {{total}}",settings:{title:"Product Images Settings",enabled:"Enable Product Images",enabledDesc:"Show product images in search results and details",supplierUpload:"Allow Supplier Upload",supplierUploadDesc:"Allow suppliers to upload images for their products",maxSize:"Max Image Size (MB)",maxSizeDesc:"Maximum file size for uploaded images"}},Rle={button:"Send Feedback",title:"Send Your Feedback",subtitle:"We value your opinion and strive to improve our services",typeLabel:"Feedback Type",subjectLabel:"Subject",subjectPlaceholder:"Enter feedback subject...",descriptionLabel:"Details",descriptionPlaceholder:"Describe your feedback in detail...",submitButton:"Submit Feedback",submitting:"Submitting...",successTitle:"Feedback Submitted Successfully",successMessage:"Thank you! We will review your feedback and work on improving our services",errorMessage:"Error submitting feedback",guest:"Guest",types:{BUG:"Bug Report",FEATURE:"Feature Request",IMPROVEMENT:"Improvement",COMPLAINT:"Complaint",OTHER:"Other"},categories:{bug:"Bug Report",suggestion:"Suggestion",complaint:"Complaint",question:"Question",other:"Other"},priorities:{low:"Low",medium:"Medium",high:"High",critical:"Critical"}},Ple={title:"Feedback Center",subtitle:"Manage customer feedback and analytics",allFeedback:"All Feedback",filters:"Filters",type:"Type",status:{NEW:"New",IN_PROGRESS:"In Progress",IN_REVIEW:"In Review",RESOLVED:"Resolved",CLOSED:"Closed",DISMISSED:"Dismissed"},priority:{LOW:"Low",MEDIUM:"Medium",HIGH:"High",CRITICAL:"Critical"},dateRange:"Date Range",search:"Search...",noFeedback:"No feedback found",loading:"Loading...",export:"Export",refresh:"Refresh",markAsRead:"Mark as Read",delete:"Delete",adminNotes:"Admin Notes",adminNotesPlaceholder:"Add internal notes...",saveNotes:"Save Notes",updateStatus:"Update Status",updatePriority:"Update Priority",customerInfo:"Customer Info",feedbackDetails:"Feedback Details",submittedAt:"Submitted At",lastUpdated:"Last Updated",actions:"Actions",stats:{total:"Total Feedback",new:"New",inProgress:"In Progress",resolved:"Resolved",closed:"Closed",byType:"By Type",byPriority:"By Priority"},senderType:{CUSTOMER:"Customer",SUPPLIER:"Supplier",MARKETER:"Marketer",EMPLOYEE:"Employee",ADMIN:"Admin",GUEST:"Guest"},exportSuccess:"Data exported successfully",exportError:"Failed to export data",updateSuccess:"Updated successfully",updateError:"Failed to update",deleteConfirm:"Are you sure you want to delete this feedback?",deleteSuccess:"Feedback deleted successfully",deleteError:"Failed to delete feedback"},Dle={title:"Message Center",subtitle:"Manage message templates and notifications",tabs:{templates:"Templates",logs:"Message Logs",settings:"Settings"},channels:{WHATSAPP:"WhatsApp",EMAIL:"Email",NOTIFICATION:"Notifications"},events:{QUOTE_CREATED:"Quote Created",QUOTE_APPROVED:"Quote Approved",ORDER_CREATED:"Order Created",ORDER_SHIPPED:"Order Shipped",PASSWORD_RESET:"Password Reset",ACCOUNT_ACTIVATED:"Account Activated",WELCOME_MESSAGE:"Welcome Message",PAYMENT_REMINDER:"Payment Reminder",SUPPLIER_APPLICATION_APPROVED:"Supplier Application Approved"},status:{PENDING:"Pending",SENT:"Sent",DELIVERED:"Delivered",FAILED:"Failed"},table:{event:"Event",template:"Template",status:"Status",actions:"Actions"},logs:{recipient:"Recipient",event:"Event",channel:"Channel",status:"Status",sentAt:"Sent At",empty:"No messages in log",unknown:"Unknown"},settings:{channels:"Enabled Channels",defaultLanguage:"Default Message Language"},form:{name:"Template Name",subject:"Email Subject",body:"Message Body",variables:"Available Variables",isActive:"Enable Template"},default:"Default",noTemplate:"No template",active:"Active",inactive:"Inactive",createTemplate:"Create Template",editTemplate:"Edit Template",preview:"Preview Message",sendTest:"Send Test",send:"Send",test:{phone:"Phone Number",email:"Email Address",userId:"User ID"},testSuccess:"Test message sent successfully",testFailed:"Failed to send message",confirmDelete:"Are you sure you want to delete this template?",searchLogs:"Search message logs..."},Mle={common:Die,login:Mie,loading:Lie,intro:Fie,marketing:Uie,guestMode:zie,register:Bie,nav:$ie,dashboard:qie,products:Hie,orders:Vie,cart:Gie,customers:Wie,users:Qie,roles:Kie,permissions:Jie,settings:Yie,accountRequests:Xie,statusLabels:Zie,reports:ele,notifications:tle,errors:sle,confirmations:ale,admin:rle,homepage:nle,sidebar:ile,customerDashboard:lle,adminDashboard:ole,adminCustomers:cle,adminSettings:dle,adminOrders:ule,adminAccounts:mle,adminAccountRequests:fle,adminQuotes:hle,adminProducts:xle,adminUsers:ple,accessDenied:gle,adminQuoteManager:ble,adminMissingParts:vle,adminImport:yle,installment:Nle,adminMarketers:wle,adminAdvertising:Sle,adminInstallments:jle,adminPortalSettings:Ale,aiSettings:Ele,supplier:Cle,traderHistory:Tle,traderToolsAdmin:_le,toolTypes:kle,toolStatus:Ole,productImages:Ile,feedback:Rle,feedbackAdmin:Ple,messaging:Dle},Lle={appName:" ",siniCar:" ",appSlogan:"   ",loading:"   ...",save:"",cancel:" ",confirm:" ",delete:"",edit:" ",add:"",search:"",filter:"",reset:"",back:"",next:"",previous:"",close:" ",submit:" ",yes:"",no:"",all:"",none:" ",export:"",import:"",refresh:" ",view:"",details:"",actions:"",status:"",date:"",time:"",total:"",price:"",quantity:"",name:"",email:"",phone:"",address:"",city:"",region:"",country:"",notes:"",description:"",active:"",inactive:"",enabled:"",disabled:"",success:"",error:"",warning:"",info:"",noData:"  ",noResults:"   ",selectOption:"  ",required:"",optional:"",language:"",welcome:" ",page:"",of:"",currency:"SAR",order:"",notSpecified:" ",sort:" ",download:"",upload:"",first:"",last:"",selectAll:" ",deselectAll:"  "},Fle={wholesaleLogin:"  ",b2bPortal:"  B2B ",ownerLogin:" ",staffLogin:" ",clientId:" ",phoneNumber:" ",password:"",activationCode:" ",rememberMe:"  ",forgotPassword:"  ?",enter:"",verifying:"   ...",secureConnection:"  ",securityNote:"  -             ",openNewAccount:"   ",invalidCredentials:" ",loginSuccess:" ",logoutSuccess:" ",enterAsGuest:"     ",guest:"",guestWelcome:"     !      ",title:"",subtitle:"       ",phone:" ",phonePlaceholder:"   ",passwordPlaceholder:"  ",loginButton:"",loggingIn:"    ...",noAccount:"  ?",registerHere:"  ",errors:{phoneRequired:"   ",passwordRequired:"  ",invalidCredentials:" ",accountSuspended:"  ",tooManyAttempts:"       "},success:" "},Ule={verifyingCredentials:"     ",connectingWarehouse:"      ",loadingCatalog:"     ",applyingDiscounts:"      ",syncingInventory:"-     ",optimizingLogistics:"     ",finalizingSetup:"     ",accessGranted:"   "},zle={mainServer:" ",connectingServer:"         ...",dataSync:" ",syncingData:"       ...",logistics:" ",connectingWarehouses:"        ..."},Ble={dismiss:" ",campaignOf:" {{current}}   {{total}}",next:"",understood:" "},$le={restrictedTitle:" B2B  ",restrictedSubtitle:"   ",restrictedMessage:"      :",targetAudience:{partsStores:"  ",insuranceCompanies:" ",rentalCompanies:"  ",salesReps:"   "},benefitsTitle:"  ",benefits:{prices:"  ",catalog:"  ",orders:"   - ",support:"  "},callToAction:"     ,        !",loginButton:"",requestAccountButton:"   ",browseOnly:"  ",blurredResultsNote:"       ",loginToAccess:"     ",searchDisabled:"     "},qle={title:"  ",openNewAccount:"  ",subtitle:"         ,  ,       ",businessInfo:"  ",businessName:"  ",businessNameAr:"   ()",businessNameEn:"   ()",commercialRegister:" ",taxNumber:" ",businessType:"  ",selectBusinessType:"  ",contactInfo:" ",ownerName:"   ",ownerPhone:"  ",ownerEmail:"  ()",addressInfo:" ",fullAddress:" ",nationalAddress:"  ()",nationalAddressPlaceholder:": RDJ2929",city:"",region:"",postalCode:" ",branchesCount:"  ",submitRequest:"   ",backToLogin:"   ",requestSuccess:"    !",requestPending:"   ",requestSuccessMessage:"                            ",backToHome:"   ",benefits:{exclusivePrices:"  ",instantAccess:"  ",taxInvoices:"  "},businessTypes:{sparePartsShop:"  ",maintenanceCenter:" ",insuranceCompany:" ",rentalCompany:" ",salesRep:" ",workshop:" ",store:" ",distributor:"",agency:"",other:""},salesRepFields:{fullName:" ",phone:" ",region:" /    ",email:" ()",clientsType:"  (, ...)",clientsCount:"  "},documents:{title:" ",requiredDocuments:" ",instructions:"   PDF              ",uploadNotice:"   PDF              ",crCertificate:"  ",vatCertificate:"VAT  ",nationalId:"    ",nationalAddressCert:"  ",clickToUpload:"      ",fileTypes:"PDF, JPEG, PNG, WebP ( 5MB)",uploadSuccess:"   ",invalidFileType:"    PDF   (JPEG, PNG, WebP)  ",fileTooLarge:"      5MB "},businessFields:{businessName:"  ",branchesCount:"  ",city:"",nationalAddress:"  ()",nationalAddressPlaceholder:": RDJ2929",commercialReg:" ",vatNumber:"VAT ",contactPerson:" ",phone:" ",emailOptional:" ()"},success:{title:"    !",message:"                            ",backToHome:"   "},validation:{phoneRequired:"   ",fullNameRequired:"   ",regionRequired:"  ",businessNameRequired:"    ",cityRequired:"  ",contactPersonRequired:"     ",commercialRegRequired:"   ",vatRequired:"VAT   ",nationalAddressRequired:"   ",documentRequired:" "},additionalNotes:" ",submitting:"   ...",submitError:"    "},Hle={home:"",dashboard:"",products:"",catalog:"",orders:"",myOrders:" ",cart:"",customers:"",users:"",roles:"",settings:"",profile:"",notifications:"",reports:"",analytics:"",help:"",support:"",about:"  ",contact:" ",logout:"",accountRequests:" ",statusLabels:" ",systemSettings:" "},Vle={title:"",welcome:" ",overview:"",statistics:"",recentOrders:"  ",recentActivity:" ",quickActions:" ",totalSales:" ",totalOrders:" ",totalCustomers:" ",totalProducts:" ",pendingOrders:" ",processingOrders:" ",completedOrders:" ",cancelledOrders:" ",revenue:"",salesChart:" ",topProducts:"  ",topCustomers:" ",lowStock:" ",newCustomers:" ",monthlyRevenue:" ",weeklyOrders:" ",dailySales:" ",customerDashboard:" ",adminDashboard:" "},Gle={title:"",catalog:" ",addProduct:" ",editProduct:"  ",deleteProduct:" ",productDetails:" ",productName:"  ",productNameAr:"   ()",productNameEn:"   ()",sku:"SKU",barcode:"",category:"",subcategory:"-",brand:"",manufacturer:"",price:"",wholesalePrice:" ",retailPrice:" ",costPrice:" ",stock:"",stockQuantity:" ",minStock:" ",maxStock:" ",unit:"",weight:"",dimensions:"",image:"",images:"",specifications:"",description:"",shortDescription:" ",longDescription:" ",tags:"",status:"",available:"",outOfStock:"  ",discontinued:"",featured:"",newArrival:" ",bestSeller:" ",onSale:" ",discount:"",addToCart:"  ",buyNow:" ",quantity:"",totalPrice:" ",searchProducts:" ...",filterByCategory:"    ",filterByBrand:"    ",filterByPrice:"    ",sortBy:"   ",priceAsc:":   ",priceDesc:":   ",nameAsc:": A-Z",nameDesc:": Z-A",newest:"",oldest:" ",noProducts:"   ",productAdded:"   ",productUpdated:"    ",productDeleted:"   "},Wle={title:"",myOrders:" ",allOrders:" ",newOrder:" ",createOrder:" ",orderDetails:" ",orderNumber:" ",orderDate:" ",orderStatus:" ",orderItems:" ",orderTotal:" ",subtotal:"-",tax:"",shipping:"",discount:"",grandTotal:" ",paymentMethod:" ",paymentStatus:" ",shippingAddress:" ",billingAddress:" ",trackOrder:"  ",cancelOrder:"  ",reorder:"   ",printInvoice:"  ",downloadInvoice:"  ",orderConfirmed:" ",orderShipped:"  ",orderDelivered:"  ",orderCancelled:"",orderPending:"",orderProcessing:"",orderCompleted:"",orderRefunded:"  ",noOrders:"   ",searchOrders:" ...",filterByStatus:"    ",filterByDate:"    ",orderCreated:"   ",orderUpdated:"    ",orderCancelledSuccess:"    "},Qle={title:" ",emptyCart:"   ",addItems:"    ",continueShopping:"  ",checkout:"",clearCart:"  ",updateCart:"  ",itemAdded:"    ",itemRemoved:"    ",cartUpdated:"   ",cartCleared:"   ",proceedToCheckout:"  ",estimatedTotal:" "},Kle={title:"",allCustomers:" ",addCustomer:" ",editCustomer:"  ",customerDetails:" ",customerName:"  ",clientId:" ",businessName:"  ",contactPerson:" ",phone:"",email:"",address:"",city:"",region:"",creditLimit:" ",currentBalance:" ",totalPurchases:" ",lastOrder:" ",status:"",activeCustomer:" ",inactiveCustomer:" ",blockedCustomer:"   ",verifiedCustomer:" ",pendingVerification:" ",searchCustomers:" ...",noCustomers:"   ",customerAdded:"   ",customerUpdated:"    ",customerDeleted:"   "},Jle={title:"",allUsers:" ",addUser:" ",editUser:"  ",deleteUser:" ",userDetails:" ",username:" ",fullName:" ",email:"",phone:"",role:"",permissions:"",status:"",activeUser:" ",inactiveUser:" ",lastLogin:" ",createdAt:" ",searchUsers:" ...",noUsers:"   ",userAdded:"   ",userUpdated:"    ",userDeleted:"   ",passwordReset:"    ",sendPasswordReset:"  "},Yle={title:"  ",allRoles:" ",addRole:" ",editRole:"  ",deleteRole:" ",roleDetails:" ",roleName:"  ",roleDescription:" ",permissions:"",assignedUsers:"   ",superAdmin:" ",admin:"",manager:"",salesManager:" ",salesAgent:" ",viewer:"",customer:"",staff:"",noRoles:"   ",roleAdded:"   ",roleUpdated:"    ",roleDeleted:"   "},Xle={title:"",viewDashboard:" ",viewProducts:" ",manageProducts:"  ",viewOrders:" ",manageOrders:"  ",viewCustomers:" ",manageCustomers:"  ",viewUsers:" ",manageUsers:"  ",viewRoles:" ",manageRoles:"  ",viewSettings:" ",manageSettings:"  ",viewReports:" ",exportData:"  ",importData:"  ",deleteData:" ",fullAccess:" "},Zle={title:"",general:"",appearance:"",language:"",selectLanguage:" ",notifications:"",security:"",privacy:"",account:"",profile:"",changePassword:" ",twoFactorAuth:"- ",sessions:"",apiKeys:"API ",webhooks:"",integrations:"",backup:"",restore:"",export:"",import:"",theme:"",darkMode:" ",lightMode:" ",autoMode:"",timezone:" ",dateFormat:" ",currency:"",settingsSaved:"  ",settingsReset:" "},eoe={title:" ",pending:"",approved:"",rejected:"",underReview:"",requestDate:" ",reviewDate:" ",reviewedBy:"",approve:" ",reject:" ",requestDetails:" ",noRequests:"   ",requestApproved:" ",requestRejected:" "},toe={title:" ",addLabel:" ",editLabel:"  ",deleteLabel:" ",labelName:"  ",labelNameAr:"   ()",labelNameEn:"   ()",labelColor:" ",labelType:" ",orderStatus:" ",customerStatus:" ",productStatus:" ",noLabels:"   ",labelAdded:"   ",labelUpdated:"    ",labelDeleted:"   "},soe={title:"",salesReport:" ",ordersReport:" ",customersReport:" ",productsReport:" ",inventoryReport:" ",financialReport:" ",generateReport:" ",downloadReport:"  ",printReport:"  ",dateRange:" ",from:"",to:"",today:"",yesterday:"",thisWeek:" ",lastWeek:" ",thisMonth:" ",lastMonth:" ",thisYear:" ",custom:""},aoe={title:"",allNotifications:" ",unread:"",read:"",markAsRead:"     ",markAllAsRead:"       ",clearAll:"  ",noNotifications:"  ",newOrder:" ",orderUpdate:" ",newCustomer:" ",lowStock:" ",paymentReceived:" ",systemUpdate:" "},roe={somethingWrong:"   ",tryAgain:"   ",pageNotFound:"  ",accessDenied:" ",sessionExpired:"   ",networkError:" ",serverError:" ",validationError:" ",requiredField:"   ",invalidEmail:"  ",invalidPhone:"  ",passwordMismatch:"   ",weakPassword:"   "},noe={deleteItem:"        ?",deleteItems:"       ?",cancelOrder:"         ?",logout:"      ?",clearCart:"       ?",discardChanges:"       ?",actionCannotBeUndone:"      "},ioe={panel:" ",systemSettings:" ",manageAll:" ",superAdmin:" ",salesManager:" ",salesAgent:" ",viewer:" "},loe={welcomeBack:"   , {{name}}",totalOrders:" ",pendingRequests:" ",approvedOrders:" ",quickActions:" ",fastShipping:" ",fastShippingDesc:"   24-48    ",qualityGuarantee:" ",qualityGuaranteeDesc:"       ",support:" ",supportDesc:"    24/7   ",needHelp:" ?",needHelpDesc:"           ",callUs:"  ",whatsapp:""},ooe={mainMenu:" ",management:"",supportSection:"",home:"",orders:" ",quotes:" ",import:"  ",traderTools:" ",history:" ",organization:" ",teamManagement:" ",support:"   / ",searchCredits:"  ",unlimitedSearch:" "},coe={heroTitle:"   ",heroSubtitle:" ,  ,                ",searchTip:"       ",searchPlaceholder:"     ...",searching:"  ...",noResults:"  ",pressSearch:"      :",partNotAvailable:"    ",noResultsFor:"     :",outOfStock:"  ",outOfStockMessage:"       ",available:"",priceNotAvailable:"  ",showPrice:"",addToCartTip:"       ()   ",whoWeServe:"    ?",partsStores:" ",partsStoresDesc:"   ,   ,           ",insuranceCompanies:" ",insuranceDesc:"            ",rentalCompanies:" ",rentalDesc:"             ",salesReps:" ",salesRepsDesc:"                 ",mainServices:"   ",quoteRequests:"  (Excel)",quoteRequestsDesc:"                ",importFromChina:"  ",importFromChinaDesc:"     /         ",wholesaleOrders:"  ",wholesaleOrdersDesc:"    ,  ,    PDF   ",staffBranches:"   ",staffBranchesDesc:"    ,    ,          ",howItWorks:"    ?",step1Title:"  ",step1Desc:"             ",step2Title:"  ",step2Desc:"                ",step3Title:"  ",step3Desc:"         Excel   ",step4Title:"  ",step4Desc:"               ",whySiniCar:"  ?",expertiseTitle:" ",expertiseDesc:"     ,     ",techTitle:" ",techDesc:"          ",globalTitle:" ",globalDesc:"3      / ",supportTitle:"B2B  ",supportDesc:"      ",wholesaleCart:"  ",emptyCart:"  ",useSearchToAdd:"       ",estimatedTotal:" ",submitOrder:"  ",fastShipping:" ",fastShippingDesc:"   24          ",techSupport:"  ",techSupportDesc:"      ",searchHistory:"   ",partNumber:" ",productName:"  ",viewDate:"  ",recordedPrice:"   ",noSearchHistory:"     ",sar:"SAR",enterValidPartNumber:"      ",unexpectedError:"       ",orderSubmitError:"    ",pageView:"  :",addToCart:"  ",priceModal:{productDetails:" ",wholesalePrice:" ",quantity:"",total:"",addToCart:"  ",close:" "},duplicateConfirm:{title:"   ",message:"         ?",confirm:",  ",cancel:" "},orderSuccess:{title:"  !",message:"          "},welcome:" ",dashboard:"",searchProducts:" ",search:"",recentOrders:"  ",viewAll:" ",noRecentOrders:"    ",recentQuotes:"   ",noRecentQuotes:"     ",quickActions:" ",newOrder:" ",newQuote:" ",myAccount:" ",support:"",stats:{totalOrders:" ",pendingOrders:" ",totalSpent:" ",searchPoints:" "},searchResults:" ",cart:"",checkout:"",total:"",currency:"SAR"},doe={mainSection:"",ordersCustomersSection:"  ",settingsSection:"",dashboard:"",activityLog:" ",customerOrders:" ",accountRequests:" ",customersCRM:" (CRM)",quoteRequests:" ",importRequests:" ",missingParts:" ",products:"",users:"",systemSettings:" ",marketingCenter:" ",pricingCenter:"  ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",customerPortalSettings:"  ",connected:" ",slowConnection:" ",disconnected:"",pageTitles:{dashboard:" ",ordersManager:"  ",activityLogs:" ",accountRequests:"   ",customers:"  (CRM)",quotes:"  ",imports:" ",missing:" ",settings:" ",users:" ",products:" ",marketing:" ",pricing:"  ",traderTools:"  ",supplierMarketplace:"  ",marketers:" ",installments:"  ",advertising:" ",customerPortal:"  ",teamSettings:"  "},stats:{totalRevenue:" ",todayRevenue:"  ",pendingOrders:" ",approvedOrders:" ",shippedOrders:"   ",cancelledOrders:" ",totalProducts:" ",outOfStock:" ",activeBusinesses:" ",pendingAccounts:" ",pendingQuotes:" "},kpi:{revenue:"",orders:"",inventory:"",customers:""},activity:{logins:"",ordersCreated:" ",quotesRequested:" ",searchesPerformed:""},charts:{dailyOrders:" ",dailyRevenue:" ",topCustomers:" ",topMissingParts:"   ",revenue:""},views:{dashboard:"",customers:"",products:"",settings:"",quotes:" ",missing:" ",importRequests:" ",accountRequests:" ",activityLogs:" ",ordersManager:" ",adminUsers:"",marketing:" ",pricing:"  ",traderTools:" ",supplierMarketplace:" ",marketers:"",installments:" ",advertising:"",teamSettings:"  ",customerPortal:" "},onlineUsers:{title:" ",subtitle:" 5   ",now:"",minutesAgo:"{{mins}}  ",online:"",noOnlineUsers:"      ",moreOnline:" {{count}}   ..."},activityLogs:{title:" ",activity:"",time:"",user:"",event:"",details:"",noActivities:"   "},generalManager:"",teamSettings:"  "},uoe={title:"  (CRM)",loading:"    ...",stats:{totalCustomers:" ",activeCustomers:" ",suspendedBlocked:"/"},searchPlaceholder:" , ,    ...",allStatuses:" ",table:{customer:"",city:"",priceLevel:" ",ordersCount:" ",totalPurchases:" ",status:"",actions:""},view:"",noMatchingCustomers:"    ",status:{active:"",suspended:"",blocked:"",pending:" ",inactive:""},panel:{title:" ",tabs:{overview:"",orders:"",activity:""},businessInfo:" ",companyName:"  ",city:"",phone:"",crNumber:" ",priceLevel:" ",customerType:" ",accountStatus:" ",searchBalance:" ",staffUsers:" ",accessValidity:" ",ordersHistory:" ",activityLog:" "},toast:{loadError:"    "},detail:{tabs:{overview:"",orders:"",quotes:"",staff:"",security:"  ",notes:""},accountManagement:" ",changeStatus:" ",statusActive:"",statusSuspended:"",statusBlocked:"",suspendUntil:"   ",saving:"   ...",saveChanges:" ",statusUpdated:"    ",errorOccurred:"  ",priceDisplayType:"  ",pricesVisible:"     -    ",pricesHidden:"    -     ",visibleNoPoints:"  ( )",hiddenWithPoints:"  (  )",visible:"",hidden:" ",priceDisplayChanged:"   ",searchWallet:" ",addBalance:" ",deductBalance:" ",totalBalance:" ",used:"  ",remaining:"",joinDate:"  ",lastLogin:" ",customerDocs:" ",commercialRegistration:" ",vatCertificate:"VAT ",nationalId:"  ",notAttached:" ",noDocument:"  ",enterPointsToAdd:"     :",pointsAddedSuccess:"{{points}}    ",currentBalance:" :",points:"",enterPointsToDeduct:"     :",cannotDeductMoreThan:"        ",pointsDeductedSuccess:"{{points}}    ",errorDeductingPoints:"   ",staffStatusUpdated:"    ",customerOrders:" ",noOrders:"  ",orderNumber:" #",date:"",amount:"",orderStatus:"",priceQuotes:"  ",noQuotes:"   ",quoteNumber:" #",items:"",staffMembers:" ",noStaff:"   ",staffName:" ",role:"",lastActive:" ",action:"",suspend:" ",activate:" ",securityAccessLogs:"   ",loginHistory:" ",device:"",ipAddress:"IP",location:"",adminNotes:" ",noNotes:"  ",addNote:"  ...",writeNote:"   ...",notePlaceholder:"   ...",addNoteBtn:" ",docs:{commercialReg:" ",taxNumber:" ",nationalAddress:" ",notAttached:" ",notAvailable:" "},staff:{staffMembers:" ",maxLimit:" ",owner:"",active:"",suspended:"",suspendBtn:" ",activateBtn:" "},orders:{customerOrders:" ",completed:"",ongoing:" ",loadingOrders:"    ...",noOrders:"      ",unspecified:"",products:"",item:"",total:"",date:"",currency:"SAR",showingOf:"{{total}}   {{shown}}     "},quotes:{pricingRequests:" ",approved:"",new:"",loadingQuotes:"     ...",noQuotes:"       ",unspecified:"",items:"",item:"",total:"",date:"",currency:"SAR",pendingPricing:"  ",showingOf:"{{total}}   {{shown}}      ",missing:"",reviewedBy:""},security:{securityIndicators:" ",failedLoginAttempts:"  ",suspiciousBehavior:"  (Flag)",yes:"",no:"",resetCounter:"   ",counterReset:"   ",passwordReset:" ",passwordResetDesc:"                    ",enterNewPassword:"    (   4 ):",adminNotFound:":    ",passwordResetError:"    ",passwordMinLength:"    4    ",resetPasswordBtn:"  ",recentLoginHistory:"   ",successfulLogin:" ",failedLogin:" ",passwordChanged:"  ",passwordResetAdmin:" (Admin)",noLogsAvailable:"   "},notes:{adminNotes:" ",noNotes:"   ",addNote:"   ...",placeholder:"   ...",saveNote:" "}}},moe={systemSettings:" ",generalSettings:" ",bannerManagement:" ",whySiniCar:"  ?",textManagement:" ",statusLabels:" ",apiIntegration:"API ",appearanceIdentity:"  ",siteSettings:"  ",saveChanges:" ",saving:"   ...",siteName:"/  ",supportPhone:" ",salesWhatsApp:" WhatsApp",supportEmail:" ",newsTicker:" ",enableTicker:"  ",tickerText:" ",tickerSpeed:" (1-10)",bgColor:"  (Hex)",textColor:"  (Hex)",productDisplaySettings:"    ",minVisibleQty:"     ",minVisibleQtyNote:"          (: 1)",stockThreshold:"  ( )",stockThresholdNote:"       ' '      (: 0)",settingsNote:"          ",maintenanceMode:" ",maintenanceModeDesc:"  ,     '   '     ",bannerAds:"  ",bannerAdsDesc:"        ",addNewBanner:"  ",newBannerData:"  ",mainTitle:" ",subtitle:"",buttonText:" ",colorScheme:"",imageUrl:" URL ()",saveAndPublish:"   ",uiTextManagement:"UI  ",uiTextManagementDesc:"          ",saveTexts:" ",erpIntegration:"ERP  ",erpIntegrationDesc:"Onyx ERP       ",connectionSettings:" ",erpUrl:"Cloud ERP URL",apiToken:"API ",syncFrequency:" ",realtime:"-",every15Min:" 15 ",hourly:" ",daily:"",environment:"",production:"Production (Live)",sandbox:"Sandbox (Test)",testConnection:"   ",connecting:"   ...",connectionSuccess:"   (200 OK)",connectionFailed:" :   ",sharedData:"API     ",sharedDataDesc:"          ",productsItems:"  ",productsItemsDesc:", , ",ordersData:"",ordersDataDesc:"   ",customersData:"",customersDataDesc:"   ",quotesData:" ",quotesDataDesc:"  ",inventoryData:"",inventoryDataDesc:" ",priceLists:" ",priceListsDesc:"   ",syncDirection:" ",pullOnly:" ERP   ",pullOnlyDesc:"     ",pushOnly:" ERP   ",pushOnlyDesc:"    ",bidirectional:"",bidirectionalDesc:"    ",webhooks:"Webhooks ( )",webhooksDesc:"        URLs ",addWebhook:"",events:"",webhookAdded:"Webhook   ",loadingFailed:"    ",settingsSaved:"   ",saveError:"   ",fillTitleAndDesc:"    ",bannerAdded:"  ",bannerDeleted:"  ",confirmDeleteBanner:"        ?",hide:"",show:"",darkGray:"  ()",royalBlue:" ",vibrantOrange:" ",darkGreen:" ",loading:"   ...",advancedSettings:" ",loggingLevel:" ",loggingLevelBasic:"",loggingLevelDetailed:"",loggingLevelDebug:" (  )",retryOnFail:"   ",retryAttempts:"",timeout:" ",seconds:"",featureManagement:'"  ?"  ',featureManagementDesc:"        ,      ",addNewFeature:"  ",fillAllFields:"   ",featureAdded:"   ",featureDeleted:"  ",title:"",description:"",icon:"",iconBox:"",iconChart:"",iconAnchor:"",iconHeadphones:"",iconTruck:"",iconShield:"",iconGlobe:"",iconStar:"",iconClock:"",iconAward:"",iconColor:" ",colorCyan:"",colorGreen:"",colorGold:"",colorPurple:"",colorRed:"",colorBlue:"",colorPink:"",colorOrange:"",appearanceCustomization:"  ",primaryColor:"  ",primaryColorDesc:"  ,        ",siteLogo:" ",uploadNotAvailable:"       ",clickToUploadLogo:"      ",livePreview:" ",livePreviewDesc:"       ",primaryButtonExample:"  ",statusLabelsManagement:"   ",statusLabelsDescription:"                      ,         ",addNewStatus:"  ",statusKey:" ()",statusLabel:"  ",newStatus:" ",backgroundColor:"",preview:"",add:"",statusUpdated:"    ",fillKeyAndName:"    ",keyExists:"     ",statusAdded:"    ",cannotDeleteSystem:"     ",cannotDeleteInUse:"   , {{count}}        ",statusDeleted:"   ",defaultStatusSet:"    ",checkingUsage:"     ...",confirmDelete:"     ?",yesDelete:", ",systemStatus:"",defaultStatus:"",setAsDefault:"     ",systemStatuses:" ",systemStatusesDesc:"      ,                 ",defaultStatusInfo:" ",defaultStatusInfoDesc:"                         ",statusCategories:{orderStatus:"  (    )",orderInternalStatus:"  ",accountRequestStatus:"  ",quoteRequestStatus:"  ",quoteItemStatus:"  ",missingStatus:"  ",importRequestStatus:"  ",customerStatus:" ",staffStatus:" "},guestMode:" ",guestModeSettings:"  ",guestModeSettingsDesc:"                  /          ",guestBrowsingEnabled:"   ",guestBrowsingEnabledDesc:"          ",visibleSections:"  (  )",visibleSectionsDesc:"          ",showBusinessTypes:'"    " ',showMainServices:"  ",showHowItWorks:'"    " ',showWhySiniCar:'"  " ',showCart:"  ",showMarketingCards:"  ",blurSettings:" ",blurIntensity:" ",blurLight:"",blurMedium:"",blurHeavy:"",showBlurOverlay:"    ",showBlurOverlayDesc:'   ""   ',searchSettings:"  ",allowSearch:"   ",allowSearchDesc:"       (  )",showSearchResults:"  ",showSearchResultsDesc:"       ",guestSettingsSaved:"     ",general:{title:" ",siteName:"  ",siteDescription:" ",contactEmail:" ",contactPhone:" ",currency:"",language:"",timezone:" ",save:"",saved:"  "},business:{title:" ",minOrderAmount:"  ",maxOrderAmount:"  ",deliveryFee:" ",taxRate:" "},notifications:{title:" ",emailNotifications:" ",smsNotifications:"SMS ",pushNotifications:" "},security:{title:" ",twoFactorAuth:"- ",sessionTimeout:"  ",maxLoginAttempts:"  "}},foe={title:" ",newOrders:" ",inProgress:" ",readyToShip:"    ",totalOrders:" ",searchOrder:"      ...",allStatuses:" ",allInternalStatuses:"  ",orderNumber:" ",customer:"",date:"",total:"",status:"",internalStatus:" ",actions:"",noOrders:"  ",orderDetails:" ",customerInfo:" ",orderItems:" ",statusHistory:" ",internalNotes:" ",updateStatus:"  ",updateInternalStatus:"   ",externalStatusUpdated:"     ",internalStatusUpdated:"     ",updateFailed:" ",statusLabels:{pending:"",approved:"",shipped:"  ",delivered:"  ",rejected:"",cancelled:""},internalStatusLabels:{new:"",sentToWarehouse:"   ",waitingPayment:"  ",paymentConfirmed:" ",salesInvoiceCreated:"   ",readyForShipment:"   ",completedInternal:"   ",cancelledInternal:"   "},details:"",name:"",userId:"",product:"",quantity:"",price:"",itemTotal:"",grandTotal:" ",changedStatusTo:"   ",noHistory:"   ",externalStatus:"  ()",externalStatusDesc:"          ",noStatusPermission:"      ",internalStatusTitle:" ",internalStatusDesc:"         ",notesPlaceholder:"      ...",saveNotes:" ",noInternalPermission:"        ",dangerZone:" ",cancelOrder:"     ",noPermission:"  ",stats:{pending:"",processing:"",shipped:"  ",delivered:"  ",cancelled:"  ",total:"",new:"",ready:"   "},searchPlaceholder:"     ...",table:{orderId:" ",customer:"",items:"",total:"",date:"",status:"",actions:""},view:"",approve:" ",ship:"",deliver:" ",cancel:" ",orderUpdated:"   ",shippingInfo:" ",paymentInfo:" ",noteAdded:"  "},hoe={title:"   ",newRequests:" ",underReview:"",approved:"",rejected:"",searchAccount:"     ...",allStatuses:" ",businessName:"  ",phone:"",requestDate:" ",status:"",actions:"",noRequests:"   ",requestDetails:" ",businessInfo:" ",contactInfo:" ",documents:"",decision:"",priceLevel:" ",customerType:" ",searchPoints:" ",initialPoints:" ",monthlyPoints:" ",portalAccess:" ",startDate:" ",endDate:" ",openEnded:" ",staffAccess:" ",canCreateStaff:"   ",maxStaffUsers:"  ",adminNotes:" ",saveDecision:" ",decisionSaved:"   ",saveError:"   ",statusLabels:{new:" ",underReview:"",approved:"",rejected:"",onHold:" "},documentTypes:{crCertificate:" ",vatCertificate:"VAT ",nationalId:"  ",authorizationLetter:" ",other:" "}},xoe={stats:{newRequests:" ",underReview:"",approved:"",rejected:""},status:{new:" ",underReview:"",approved:"",rejected:"",onHold:" "},docTypes:{crCertificate:" ",vatCertificate:"VAT ",nationalId:"  ",authLetter:" ",other:" "},categories:{spareParts:"  ",rental:" ",insurance:" ",agent:""},searchPlaceholder:" ,   ...",allStatuses:" ",table:{businessName:" /   ",activityType:" ",city:"",date:"",status:"",actions:""},approvedAccount:" ",view:"",noMatchingRequests:"   ",panel:{title:"  ",customerData:" ",businessName:"  ",activity:"",city:"",contactNumber:" ",crNumber:" ",vatNumber:"VAT ",customerNotes:" ",attachedDocuments:" ",adminDecision:"   "},form:{requestStatus:" ",statusNew:"",statusUnderReview:"",statusApproved:"",statusRejected:"",statusOnHold:" ",customerType:" ",typePartsShop:" ",typeRentalCompany:" ",typeInsuranceCompany:" ",typeSalesAgent:" ",typeFleetCustomer:" ",typeOther:"",priceLevel:" ",level1:"Level 1 (VIP -  )",level2:"Level 2 ()",level3:"Level 3 (/)",levelSpecial:"",accessValidity:" ",to:"",openEnded:"  (   )",searchPoints:"  ",initialBalance:" ",monthlyRenewal:" ",allowAddStaff:"   ",maxLimit:" ",adminNotes:"  ( )",notesPlaceholder:"      ...",saveDecision:" ",cancel:" "},toast:{saveSuccess:"   ",saveError:"   "}},poe={title:"  ",pendingQuotes:" ",completedQuotes:" ",searchQuote:"     ...",allStatuses:" ",quoteNumber:" ",customer:"",date:"",itemsCount:" ",status:"",actions:"",noQuotes:"   ",quoteDetails:" ",requestedItems:" ",response:"",sendResponse:" ",stats:{new:"",inProgress:" ",completed:"",approved:""},searchPlaceholder:" ,    ...",table:{quoteId:" ",customer:"",items:"",priceType:" ",date:"",status:"",actions:""},view:"",process:" ",complete:" ",approve:" ",quoteUpdated:"    ",pricedItems:"  ",missingItems:" "},goe={title:" ",subtitle:" ,     ",searchPlaceholder:" ...",addProduct:" ",importExcel:"Excel  ",exportExcel:"Excel  ",columnSettings:" ",visibilitySettings:" ",stats:{totalProducts:" ",inStock:" ",outOfStock:"  ",hidden:" "},table:{partNumber:" ",name:"  ",brand:"",quantity:"",price:"",visibility:"",actions:""},modal:{addTitle:"  ",editTitle:"  ",deleteConfirm:"  ",deleteMessage:"        ?",importTitle:"Excel   ",columnSettingsTitle:"Excel  "},form:{partNumber:" ",name:"  ",brand:"",quantity:"",price:"",costPrice:" ",description:"",isVisible:"   ",save:"",cancel:" "},import:{selectFile:"Excel  ",dragDrop:"     ",processing:"...",success:" ",imported:"  ",updated:"  ",skipped:" ",errors:""},validation:{partNumberRequired:"   ",nameRequired:"    ",priceInvalid:"  ",quantityInvalid:"  "},toast:{productCreated:"   ",productUpdated:"    ",productDeleted:"   ",importSuccess:"    ",createError:"   ",updateError:"    ",deleteError:"   ",importError:"    ",loadError:"    ",visibilityThresholdSaved:"    "},presets:{title:"  ",name:" ",isDefault:"",mappings:" ",internalField:" ",excelHeader:"Excel ",enabled:"",required:"",addPreset:"  ",editPreset:"  ",deletePreset:" ",savePreset:" ",toast:{presetCreated:"   ",presetUpdated:"    ",presetDeleted:"   ",presetSetDefault:"       "}},uploadExcel:"Excel  ",downloadTemplate:"  ",loading:"   ...",noProducts:"  ",noMatchingProducts:"     ",partNumber:" ",productName:"  ",quantity:"",price:"",category:"",actions:"",edit:" ",delete:"",deleteConfirm:"        ?",productDeleted:"  ",productSaved:"  ",productCreated:"  ",importModal:{title:"  ",selectFile:"Excel  ",importing:"   ...",importSuccess:" ",imported:" ",updated:"  ",skipped:" ",errors:""},productModal:{editTitle:"  ",addTitle:"  ",save:"",cancel:" "},columnPresets:{title:"Excel  ",presetName:"  ",enterPresetName:"     ",created:"   ",saved:"  ",deleteConfirm:"        ?",deleted:"  ",setDefault:"  ",isDefault:""},visibility:{title:" ",threshold:"  ",saved:"   "},pagination:{showing:"  ",of:" ",products:"",previous:"",next:""},selectProductsFirst:"   ",selectedCount:"{{count}}   ",visibilityApplied:"{{count}}       ",visibilityRemoved:"{{count}}      ",loadFailed:"    ",importFailed:" ",templateDownloaded:"Excel    ",templateDownloadFailed:"    ",partAndNameRequired:"     ",deleteFailed:"   "},boe={title:" ",subtitle:"  ,     ",tabs:{users:"",roles:"  "},searchPlaceholder:",   ...",allRoles:" ",allStatuses:" ",addUser:" ",exportUsers:"  ",table:{user:"",role:"",contact:"",lastLogin:" ",status:"",actions:"",name:"",email:"",phone:""},status:{active:"",inactive:"",ACTIVE:"",SUSPENDED:"",PENDING:""},modal:{addTitle:"  ",editTitle:"  ",deleteConfirm:"  ",deleteMessage:"        ?",resetPassword:"  ",toggleStatus:" "},form:{fullName:" ",username:" ",email:"",phone:" ",role:"",password:"",newPassword:" ",confirmPassword:"   ",save:"",cancel:" "},validation:{nameRequired:"  ",usernameRequired:"   ",emailRequired:"  ",emailInvalid:"  ",passwordRequired:"  ",passwordMinLength:"    6    ",roleRequired:"  "},toast:{userCreated:"   ",userUpdated:"    ",userDeleted:"   ",passwordReset:"    ",statusChanged:"   ",createError:"   ",updateError:"    ",deleteError:"   ",loadError:"    "},roles:{title:" ",addRole:"  ",editRole:"  ",deleteRole:" ",roleName:"  ",roleDescription:" ",permissions:"",usersCount:" ",isSystemRole:" ",noRoles:"   ",toast:{roleCreated:"   ",roleUpdated:"    ",roleDeleted:"   "},SUPER_ADMIN:" ",ADMIN:"",MANAGER:"",STAFF:"",CUSTOMER_OWNER:" ",CUSTOMER_STAFF:" "},stats:{total:" ",admins:"",staff:"",active:""},noUsers:"  ",editUser:"  ",deleteUser:" ",deleteConfirm:"        ?",userCreated:"  ",userUpdated:"   ",userDeleted:"  ",resetPassword:"  ",passwordReset:"   "},voe={title:" ",message:"            ",contactAdmin:"     ",requestedPage:" ",goBack:" ",goHome:"",errorCode:" "},yoe={searchPlaceholder:"     ...",allStatuses:" ",table:{requestNumber:" ",businessCustomer:" / ",uploadDate:" ",itemsCount:" ",priceType:" ",status:"",actions:""},reviewDetails:" / ",noRequests:"   ",panel:{reviewRequest:" ",proposedTotal:" ",approving:" ...",approveAndSend:"     ",selectAll:" ",changeSelectedStatus:"  ",available:" (Approved)",unavailable:" (Missing)",rejected:" (Rejected)",customerPartNumber:"  ()",customerPartName:"  ()",quantity:"",matchedProduct:" ",price:"",decision:"",notes:"",generalNotes:"    ",notesPlaceholder:"      ...",itemStatus:{approved:"",missing:"",rejected:"",pending:""}},status:{new:"",underReview:"",partiallyApproved:"   ",approved:"",quoted:"  ",processed:"  ",rejected:""},toast:{itemsUpdated:"{{count}}    ",approvedWithoutPriceWarning:"        ?",pricingSentSuccess:"       ",saveError:"   ",quoteSaved:"   ",quoteSaveFailed:"    "}},Noe={tabs:{all:"",fromSearch:" ",fromQuote:" "},stats:{totalMissing:" ",newMissing:" ",underReview:"",ordered:"  ",solved:"  ",orderedImport:" / ",addedToStock:"   ",fromQuote:" ",fromSearch:" "},searchPlaceholder:"   ...",allStatuses:" ",noMatchingMissing:"     ",table:{partNumber:"  / ",partInfo:" ",requestCount:" ",requestFrequency:" ",interestedCustomers:" ",source:"",date:"",lastRequest:" ",status:"",actions:""},source:{search:"",quote:""},actions:{details:"",linkToImport:"  ",addToStock:"  ",saving:"   ...",saveChanges:" "},view:"",noMatchingParts:"    ",pagination:{page:"",of:""},export:{partNumber:" ",itemName:" ",source:"",requestCount:" ",customerCount:" ",status:"",lastRequest:" ",adminNotes:" "},panel:{title:"  ",missingDetails:" ",partDetails:" ",requestedItem:" ",suggestedName:"  ",brand:"",searchQuery:" ",partNumber:" ",partName:" ",requestCount:" ",differentCustomers:" ",source:" ",sourceQuote:":  ",firstRequest:" ",lastRequest:" ",requestingCustomers:"   ",updateStatus:"  ",followUp:" ",internalNotes:" ",adminNotes:" ",notesPlaceholder:"-   (,    ...)",saving:"   ...",saveStatus:" "},status:{new:" ",underReview:"",orderPlanned:"   ",ordered:"  ",addedToStock:"   ",ignored:"  "},sourceLabels:{search:"",quote:""},toast:{statusUpdated:"     ",saveError:"   ",exportSuccess:"    ",exportFailed:" ",linkImportSoon:"    ",redirectToAddProduct:"       ..."}},woe={stats:{newRequests:" ",pending:"",inProgress:" ",awaitingCustomer:"  ",completed:"",delivered:""},table:{requestNumber:" ",customer:"",service:"",requestDate:" ",date:"",category:"",status:"",action:"",actions:""},serviceType:{fullService:" ",processingOnly:" ",fullImport:" ",goodsPreparation:" "},actions:{manageRequest:"  ",startReview:"  ",requestItemsFile:"   ",cancelRequest:"  "},viewDetails:" ",noRequests:"    ",modal:{manageRequest:"   ",currentStatus:" ",timeline:"  ()"},pricing:{preparePricing:"   ",customerFile:" ",download:"",waitingForFile:"      ...",totalOffer:"  (SAR)",sendToCustomer:"   "},details:{title:" ",requestedBrands:" ",serviceType:" ",branchesCount:"  ",estimatedValue:" ",customerNotes:" "},statusControl:{title:"   ()",hint:"            (, , ...)"},panel:{title:"  ",requestInfo:" ",customer:"",category:"",description:"",estimatedQuantity:" ",timeline:"",updateStatus:"  ",pricingSection:"  ",totalAmount:" ",enterAmount:"  ",note:"",notePlaceholder:"   ...",sendPricing:"  "},status:{new:" ",underReview:"",waitingCustomerExcel:"   ",pricingInProgress:"  ",pricingSent:"  ",waitingCustomerApproval:"  ",approvedByCustomer:"  ",inFactory:" ",shipmentBooked:" ",onTheSea:" ",inPort:"  ",customsCleared:" ",onTheWay:" ",delivered:"",cancelled:""},toast:{statusUpdated:"    ",updateFailed:" ",enterValidAmount:"     ",pricingSent:"     ",sendFailed:"  "}},Soe={title:" ",stats:{total:" ",active:"",pending:"",suspended:""},searchPlaceholder:",   ...",allStatuses:" ",table:{name:"",phone:"",referralCode:" ",referrals:"",earnings:"",status:"",actions:""},status:{ACTIVE:"",PENDING:"",SUSPENDED:""},noMarketers:"  ",view:"",activate:" ",suspend:" ",delete:"",addMarketer:" ",marketerDetails:" ",referralHistory:" ",commissionHistory:" ",payoutHistory:" ",pendingPayout:" ",totalEarnings:" ",marketerUpdated:"   ",marketerCreated:"  "},joe={title:" ",stats:{total:" ",active:"",scheduled:"",expired:""},searchPlaceholder:" ...",allStatuses:" ",table:{title:"",type:"",placement:"",startDate:" ",endDate:" ",status:"",actions:""},status:{ACTIVE:"",SCHEDULED:"",PAUSED:" ",EXPIRED:""},noAds:"  ",addAd:" ",editAd:"  ",deleteAd:" ",deleteConfirm:"        ?",adCreated:"  ",adUpdated:"   ",adDeleted:"  ",uploadImage:"  ",adDetails:" "},Aoe={title:" ",stats:{totalRequests:" ",pending:"",approved:"",rejected:"",active:""},searchPlaceholder:",    ...",allStatuses:" ",table:{requestId:" ",customer:"",product:"",amount:"",installments:"",status:"",actions:""},status:{PENDING:"",APPROVED:"",REJECTED:"",ACTIVE:"",COMPLETED:"",DEFAULTED:""},noRequests:"   ",view:"",approve:" ",reject:" ",requestDetails:" ",customerInfo:" ",productInfo:" ",paymentSchedule:" ",paymentHistory:" ",monthlyPayment:" ",totalAmount:" ",remainingAmount:" ",dueDate:" ",requestApproved:" ",requestRejected:" "},Eoe={title:"  ",description:"   ,     ",resetDefaults:"  ",saveChanges:" ",confirmReset:"           ?",unsavedChanges:"     ",savedSuccess:"   ",tabs:{design:"  ",layout:" ",navigation:" ",features:"",content:""},design:{themeMode:" ",colors:" "},layout:{sections:" ",reorder:"    "},navigation:{menu:"  "},features:{tools:"  ",ordering:"",marketing:"",guest:" "},banners:{hero:" "},announcements:{title:""},cards:{info:" "}},Coe={title:"  ",subtitle:"       ",filters:"",toolType:" ",status:"",dateFrom:" ",dateTo:" ",totalUsage:"",noRecords:"  ",noRecordsDesc:"           ",detailsTitle:" ",loadError:"    ",col:{date:"",tool:"",input:"",output:"",status:"",actions:""},processingTime:" ",inputFile:" ",outputFile:" ",errorMessage:" ",deviceType:"",additionalInfo:" ",confidence:"",suppliersCompared:"   ",pagesProcessed:"   "},Toe={title:"  ",subtitle:" /      ",settingsTab:"",analyticsTab:"",usageLogTab:" ",filters:"",search:"",searchPlaceholder:", VIN, ...",toolType:" ",status:"",dateFrom:" ",dateTo:" ",clearFilters:" ",export:"",totalActions:" ",successful:"",failed:"",successRate:" ",noRecords:"  ",exportSuccess:"    ",exportError:"    ",loadError:"     ",col:{date:"",customer:"",tool:"",input:"",output:"",status:"",actions:""},detailTitle:" ",processingTime:" ",inputDetails:"",outputDetails:"",showing:"  "},_oe={VIN:"VIN ",PDF_EXCEL:"PDF  Excel",COMPARISON:" ",ALTERNATIVES:" ",SEARCH:" ",EXCEL_QUOTE:"Excel "},koe={SUCCESS:"",FAILED:"",PENDING:"",PROCESSING:""},Ooe={viewImage:" ",noImage:"  ",loadError:"    ",magnifierHint:"        ",uploadImage:"  ",addToGallery:"  ",removeImage:" ",setAsMain:"     ",mainImage:" ",gallery:"",imageOf:" {{current}}   {{total}}",settings:{title:"  ",enabled:"   ",enabledDesc:"       ",supplierUpload:"   ",supplierUploadDesc:"           ",maxSize:"   (MB)",maxSizeDesc:"        "}},Ioe={button:" ",title:"  ",subtitle:"               ",typeLabel:" ",subjectLabel:"",subjectPlaceholder:"   ...",descriptionLabel:"",descriptionPlaceholder:"      ...",submitButton:" ",submitting:"  ...",successTitle:"   ",successMessage:"!            ",errorMessage:"   ",guest:"",types:{BUG:" ",FEATURE:" ",IMPROVEMENT:"",COMPLAINT:"",OTHER:""},categories:{bug:" ",suggestion:"",complaint:"",question:"",other:""},priorities:{low:"",medium:"",high:"",critical:""}},Roe={title:" ",subtitle:"     ",allFeedback:" ",filters:"",type:"",status:{NEW:"",IN_PROGRESS:" ",IN_REVIEW:"",RESOLVED:"  ",CLOSED:"",DISMISSED:""},priority:{LOW:"",MEDIUM:"",HIGH:"",CRITICAL:""},dateRange:" ",search:"...",noFeedback:"   ",loading:"   ...",export:"",refresh:"",markAsRead:"   ",delete:"",adminNotes:" ",adminNotesPlaceholder:"  ...",saveNotes:" ",updateStatus:"  ",updatePriority:"  ",customerInfo:" ",feedbackDetails:" ",submittedAt:"   ",lastUpdated:" ",actions:"",stats:{total:" ",new:"",inProgress:" ",resolved:"  ",closed:"",byType:"  ",byPriority:"  "},senderType:{CUSTOMER:"",SUPPLIER:"",MARKETER:"",EMPLOYEE:"",ADMIN:"",GUEST:""},exportSuccess:"    ",exportError:"    ",updateSuccess:"   ",updateError:"   ",deleteConfirm:"       ?",deleteSuccess:"   ",deleteError:"   "},Poe={common:Lle,login:Fle,loading:Ule,intro:zle,marketing:Ble,guestMode:$le,register:qle,nav:Hle,dashboard:Vle,products:Gle,orders:Wle,cart:Qle,customers:Kle,users:Jle,roles:Yle,permissions:Xle,settings:Zle,accountRequests:eoe,statusLabels:toe,reports:soe,notifications:aoe,errors:roe,confirmations:noe,admin:ioe,homepage:loe,sidebar:ooe,customerDashboard:coe,adminDashboard:doe,adminCustomers:uoe,adminSettings:moe,adminOrders:foe,adminAccounts:hoe,adminAccountRequests:xoe,adminQuotes:poe,adminProducts:goe,adminUsers:boe,accessDenied:voe,adminQuoteManager:yoe,adminMissingParts:Noe,adminImport:woe,adminMarketers:Soe,adminAdvertising:joe,adminInstallments:Aoe,adminPortalSettings:Eoe,traderHistory:Coe,traderToolsAdmin:Toe,toolTypes:_oe,toolStatus:koe,productImages:Ooe,feedback:Ioe,feedbackAdmin:Roe},Doe={appName:"",siniCar:"",appSlogan:"",loading:"...",save:"",cancel:"",confirm:"",delete:"",edit:"",add:"",search:"",filter:"",reset:"",back:"",next:"",previous:"",close:"",submit:"",yes:"",no:"",all:"",none:"",export:"",import:"",refresh:"",view:"",details:"",actions:"",status:"",date:"",time:"",total:"",price:"",quantity:"",name:"",email:"",phone:"",address:"",city:"",region:"",country:"",notes:"",description:"",active:"",inactive:"",enabled:"",disabled:"",success:"",error:"",warning:"",info:"",noData:"",noResults:"",selectOption:"",required:"",optional:"",language:"",welcome:"",page:"",of:"/",currency:"SAR",order:"",notSpecified:"",sort:"",download:"",upload:"",first:"",last:"",selectAll:"",deselectAll:""},Moe={wholesaleLogin:"",b2bPortal:" B2B ",ownerLogin:"",staffLogin:"",clientId:"ID",phoneNumber:"",password:"",activationCode:"",rememberMe:"",forgotPassword:"",enter:"",verifying:"...",secureConnection:"",securityNote:"",openNewAccount:"",invalidCredentials:"",loginSuccess:"",logoutSuccess:"",enterAsGuest:"",guest:"",guestWelcome:"",title:"",subtitle:"",phone:"",phonePlaceholder:"",passwordPlaceholder:"",loginButton:"",loggingIn:"...",noAccount:"",registerHere:"",errors:{phoneRequired:"",passwordRequired:"",invalidCredentials:"",accountSuspended:"",tooManyAttempts:""},success:""},Loe={verifyingCredentials:"",connectingWarehouse:"",loadingCatalog:"",applyingDiscounts:"",syncingInventory:"",optimizingLogistics:"",finalizingSetup:"",accessGranted:""},Foe={mainServer:"",connectingServer:"...",dataSync:"",syncingData:"...",logistics:"",connectingWarehouses:"..."},Uoe={dismiss:"",campaignOf:" {{current}}/{{total}}",next:"",understood:""},zoe={restrictedTitle:"B2B",restrictedSubtitle:"",restrictedMessage:"",targetAudience:{partsStores:"",insuranceCompanies:"",rentalCompanies:"",salesReps:""},benefitsTitle:"",benefits:{prices:"",catalog:"",orders:"",support:""},callToAction:"",loginButton:"",requestAccountButton:"",browseOnly:"",blurredResultsNote:"",loginToAccess:"",searchDisabled:""},Boe={title:"",openNewAccount:"",subtitle:"",businessInfo:"",businessName:"",businessNameAr:"",businessNameEn:"",commercialRegister:"",taxNumber:"",businessType:"",selectBusinessType:"",contactInfo:"",ownerName:"",ownerPhone:"",ownerEmail:"",addressInfo:"",fullAddress:"",nationalAddress:"",nationalAddressPlaceholder:"RDJ2929",city:"",region:"",postalCode:"",branchesCount:"",submitRequest:"",backToLogin:"",requestSuccess:"",requestPending:"",requestSuccessMessage:"",backToHome:"",benefits:{exclusivePrices:"",instantAccess:"",taxInvoices:""},businessTypes:{sparePartsShop:"",maintenanceCenter:"",insuranceCompany:"",rentalCompany:"",salesRep:"",workshop:"",store:"",distributor:"",agency:"",other:""},salesRepFields:{fullName:"",phone:"",region:"/",email:"",clientsType:"...",clientsCount:""},documents:{title:"",requiredDocuments:"",instructions:"PDF",uploadNotice:"PDF",crCertificate:"",vatCertificate:"",nationalId:"",nationalAddressCert:"",clickToUpload:"",fileTypes:"PDF, JPEG, PNG, WebP5MB",uploadSuccess:"",invalidFileType:"PDFJPEG, PNG, WebP",fileTooLarge:"5MB"},businessFields:{businessName:"",branchesCount:"",city:"",nationalAddress:"",nationalAddressPlaceholder:"RDJ2929",commercialReg:"",vatNumber:"",contactPerson:"",phone:"",emailOptional:""},success:{title:"",message:"",backToHome:""},validation:{phoneRequired:"",fullNameRequired:"",regionRequired:"",businessNameRequired:"",cityRequired:"",contactPersonRequired:"",commercialRegRequired:"",vatRequired:"",nationalAddressRequired:"",documentRequired:""},additionalNotes:"",submitting:"...",submitError:""},$oe={home:"",dashboard:"",products:"",catalog:"",orders:"",myOrders:"",cart:"",customers:"",users:"",roles:"",settings:"",profile:"",notifications:"",reports:"",analytics:"",help:"",support:"",about:"",contact:"",logout:"",accountRequests:"",statusLabels:"",systemSettings:""},qoe={title:"",welcome:"",overview:"",statistics:"",recentOrders:"",recentActivity:"",quickActions:"",totalSales:"",totalOrders:"",totalCustomers:"",totalProducts:"",pendingOrders:"",processingOrders:"",completedOrders:"",cancelledOrders:"",revenue:"",salesChart:"",topProducts:"",topCustomers:"",lowStock:"",newCustomers:"",monthlyRevenue:"",weeklyOrders:"",dailySales:"",customerDashboard:"",adminDashboard:""},Hoe={title:"",catalog:"",addProduct:"",editProduct:"",deleteProduct:"",productDetails:"",productName:"",productNameAr:"",productNameEn:"",sku:"SKU",barcode:"",category:"",subcategory:"",brand:"",manufacturer:"",price:"",wholesalePrice:"",retailPrice:"",costPrice:"",stock:"",stockQuantity:"",minStock:"",maxStock:"",unit:"",weight:"",dimensions:"",image:"",images:"",specifications:"",description:"",shortDescription:"",longDescription:"",tags:"",status:"",available:"",outOfStock:"",discontinued:"",featured:"",newArrival:"",bestSeller:"",onSale:"",discount:"",addToCart:"",buyNow:"",quantity:"",totalPrice:"",searchProducts:"...",filterByCategory:"",filterByBrand:"",filterByPrice:"",sortBy:"",priceAsc:"",priceDesc:"",nameAsc:"A-Z",nameDesc:"Z-A",newest:"",oldest:"",noProducts:"",productAdded:"",productUpdated:"",productDeleted:""},Voe={title:"",myOrders:"",allOrders:"",newOrder:"",createOrder:"",orderDetails:"",orderNumber:"",orderDate:"",orderStatus:"",orderItems:"",orderTotal:"",subtotal:"",tax:"",shipping:"",discount:"",grandTotal:"",paymentMethod:"",paymentStatus:"",shippingAddress:"",billingAddress:"",trackOrder:"",cancelOrder:"",reorder:"",printInvoice:"",downloadInvoice:"",orderConfirmed:"",orderShipped:"",orderDelivered:"",orderCancelled:"",orderPending:"",orderProcessing:"",orderCompleted:"",orderRefunded:"",noOrders:"",searchOrders:"...",filterByStatus:"",filterByDate:"",orderCreated:"",orderUpdated:"",orderCancelledSuccess:""},Goe={title:"",emptyCart:"",addItems:"",continueShopping:"",checkout:"",clearCart:"",updateCart:"",itemAdded:"",itemRemoved:"",cartUpdated:"",cartCleared:"",proceedToCheckout:"",estimatedTotal:""},Woe={title:"",allCustomers:"",addCustomer:"",editCustomer:"",customerDetails:"",customerName:"",clientId:"ID",businessName:"",contactPerson:"",phone:"",email:"",address:"",city:"",region:"",creditLimit:"",currentBalance:"",totalPurchases:"",lastOrder:"",status:"",activeCustomer:"",inactiveCustomer:"",blockedCustomer:"",verifiedCustomer:"",pendingVerification:"",searchCustomers:"...",noCustomers:"",customerAdded:"",customerUpdated:"",customerDeleted:""},Qoe={title:"",allUsers:"",addUser:"",editUser:"",deleteUser:"",userDetails:"",username:"",fullName:"",email:"",phone:"",role:"",permissions:"",status:"",activeUser:"",inactiveUser:"",lastLogin:"",createdAt:"",searchUsers:"...",noUsers:"",userAdded:"",userUpdated:"",userDeleted:"",passwordReset:"",sendPasswordReset:""},Koe={title:"",allRoles:"",addRole:"",editRole:"",deleteRole:"",roleDetails:"",roleName:"",roleDescription:"",permissions:"",assignedUsers:"",superAdmin:"",admin:"",manager:"",salesManager:"",salesAgent:"",viewer:"",customer:"",staff:"",noRoles:"",roleAdded:"",roleUpdated:"",roleDeleted:""},Joe={title:"",viewDashboard:"",viewProducts:"",manageProducts:"",viewOrders:"",manageOrders:"",viewCustomers:"",manageCustomers:"",viewUsers:"",manageUsers:"",viewRoles:"",manageRoles:"",viewSettings:"",manageSettings:"",viewReports:"",exportData:"",importData:"",deleteData:"",fullAccess:""},Yoe={title:"",general:"",appearance:"",language:"",selectLanguage:"",notifications:"",security:"",privacy:"",account:"",profile:"",changePassword:"",twoFactorAuth:"",sessions:"",apiKeys:"API",webhooks:"Webhooks",integrations:"",backup:"",restore:"",export:"",import:"",theme:"",darkMode:"",lightMode:"",autoMode:"",timezone:"",dateFormat:"",currency:"",settingsSaved:"",settingsReset:""},Xoe={title:"",pending:"",approved:"",rejected:"",underReview:"",requestDate:"",reviewDate:"",reviewedBy:"",approve:"",reject:"",requestDetails:"",noRequests:"",requestApproved:"",requestRejected:""},Zoe={title:"",addLabel:"",editLabel:"",deleteLabel:"",labelName:"",labelNameAr:"",labelNameEn:"",labelColor:"",labelType:"",orderStatus:"",customerStatus:"",productStatus:"",noLabels:"",labelAdded:"",labelUpdated:"",labelDeleted:""},ece={title:"",salesReport:"",ordersReport:"",customersReport:"",productsReport:"",inventoryReport:"",financialReport:"",generateReport:"",downloadReport:"",printReport:"",dateRange:"",from:"",to:"",today:"",yesterday:"",thisWeek:"",lastWeek:"",thisMonth:"",lastMonth:"",thisYear:"",custom:""},tce={title:"",allNotifications:"",unread:"",read:"",markAsRead:"",markAllAsRead:"",clearAll:"",noNotifications:"",newOrder:"",orderUpdate:"",newCustomer:"",lowStock:"",paymentReceived:"",systemUpdate:""},sce={somethingWrong:"",tryAgain:"",pageNotFound:"",accessDenied:"",sessionExpired:"",networkError:"",serverError:"",validationError:"",requiredField:"",invalidEmail:"",invalidPhone:"",passwordMismatch:"",weakPassword:""},ace={deleteItem:"",deleteItems:"",cancelOrder:"",logout:"",clearCart:"",discardChanges:"",actionCannotBeUndone:""},rce={panel:"",systemSettings:"",manageAll:"",superAdmin:"",salesManager:"",salesAgent:"",viewer:""},nce={welcomeBack:"{{name}}",totalOrders:"",pendingRequests:"",approvedOrders:"",quickActions:"",fastShipping:"",fastShippingDesc:"24-48",qualityGuarantee:"",qualityGuaranteeDesc:"",support:"",supportDesc:"24/7",needHelp:"",needHelpDesc:"",callUs:"",whatsapp:"WhatsApp"},ice={mainMenu:"",management:"",supportSection:"",home:"",orders:"",quotes:"",import:"",traderTools:"",history:"",organization:"",teamManagement:"",support:" / ",searchCredits:"",unlimitedSearch:""},lce={heroTitle:"",heroSubtitle:"",searchTip:"",searchPlaceholder:"...",searching:"...",noResults:"",pressSearch:"",partNotAvailable:"",noResultsFor:"",outOfStock:"",outOfStockMessage:"",available:"",priceNotAvailable:"",showPrice:"",addToCartTip:"",whoWeServe:"",partsStores:"",partsStoresDesc:"",insuranceCompanies:"",insuranceDesc:"",rentalCompanies:"",rentalDesc:"",salesReps:"",salesRepsDesc:"",mainServices:"",quoteRequests:"Excel",quoteRequestsDesc:"",importFromChina:"",importFromChinaDesc:"",wholesaleOrders:"",wholesaleOrdersDesc:"PDF",staffBranches:"",staffBranchesDesc:"",howItWorks:"",step1Title:"",step1Desc:"",step2Title:"",step2Desc:"",step3Title:"",step3Desc:"Excel",step4Title:"",step4Desc:"",whySiniCar:"",expertiseTitle:"",expertiseDesc:"",techTitle:"",techDesc:"",globalTitle:"",globalDesc:"3",supportTitle:"B2B",supportDesc:"",wholesaleCart:"",emptyCart:"",useSearchToAdd:"",estimatedTotal:"",submitOrder:"",fastShipping:"",fastShippingDesc:"24",techSupport:"",techSupportDesc:"",searchHistory:"",partNumber:"",productName:"",viewDate:"",recordedPrice:"",noSearchHistory:"",sar:"SAR",enterValidPartNumber:"",unexpectedError:"",orderSubmitError:"",pageView:"",addToCart:"",priceModal:{productDetails:"",wholesalePrice:"",quantity:"",total:"",addToCart:"",close:""},duplicateConfirm:{title:"",message:"",confirm:"",cancel:""},orderSuccess:{title:"",message:""},welcome:"",dashboard:"",searchProducts:"",search:"",recentOrders:"",viewAll:"",noRecentOrders:"",recentQuotes:"",noRecentQuotes:"",quickActions:"",newOrder:"",newQuote:"",myAccount:"",support:"",stats:{totalOrders:"",pendingOrders:"",totalSpent:"",searchPoints:""},searchResults:"",cart:"",checkout:"",total:"",currency:"SAR"},oce={mainSection:"",ordersCustomersSection:"",settingsSection:"",dashboard:"",activityLog:"",customerOrders:"",accountRequests:"",customersCRM:" (CRM)",quoteRequests:"",importRequests:"",missingParts:"",products:"",users:"",systemSettings:"",marketingCenter:"",pricingCenter:"",traderTools:"",supplierMarketplace:"",marketers:"",installments:"",advertising:"",customerPortalSettings:"",connected:"",slowConnection:"",disconnected:"",pageTitles:{dashboard:"",ordersManager:"",activityLogs:"",accountRequests:"",customers:" (CRM)",quotes:"",imports:"",missing:"",settings:"",users:"",products:"",marketing:"",pricing:"",traderTools:"",supplierMarketplace:"",marketers:"",installments:"",advertising:"",customerPortal:"",teamSettings:""},stats:{totalRevenue:"",todayRevenue:"",pendingOrders:"",approvedOrders:"",shippedOrders:"",cancelledOrders:"",totalProducts:"",outOfStock:"",activeBusinesses:"",pendingAccounts:"",pendingQuotes:""},kpi:{revenue:"",orders:"",inventory:"",customers:""},activity:{logins:"",ordersCreated:"",quotesRequested:"",searchesPerformed:""},charts:{dailyOrders:"",dailyRevenue:"",topCustomers:"",topMissingParts:"",revenue:""},views:{dashboard:"",customers:"",products:"",settings:"",quotes:"",missing:"",importRequests:"",accountRequests:"",activityLogs:"",ordersManager:"",adminUsers:"",marketing:"",pricing:"",traderTools:"",supplierMarketplace:"",marketers:"",installments:"",advertising:"",teamSettings:"",customerPortal:""},onlineUsers:{title:"",subtitle:"5",now:"",minutesAgo:"{{mins}}",online:"",noOnlineUsers:"",moreOnline:"{{count}}..."},activityLogs:{title:"",activity:"",time:"",user:"",event:"",details:"",noActivities:""},generalManager:"",teamSettings:""},cce={title:" (CRM)",loading:"...",stats:{totalCustomers:"",activeCustomers:"",suspendedBlocked:"/"},searchPlaceholder:"...",allStatuses:"",table:{customer:"",city:"",priceLevel:"",ordersCount:"",totalPurchases:"",status:"",actions:""},view:"",noMatchingCustomers:"",status:{active:"",suspended:"",blocked:"",pending:"",inactive:""},panel:{title:"",tabs:{overview:"",orders:"",activity:""},businessInfo:"",companyName:"",city:"",phone:"",crNumber:"",priceLevel:"",customerType:"",accountStatus:"",searchBalance:"",staffUsers:"",accessValidity:"",ordersHistory:"",activityLog:""},toast:{loadError:""},detail:{tabs:{overview:"",orders:"",quotes:"",staff:"",security:"",notes:""},accountManagement:"",changeStatus:"",statusActive:"",statusSuspended:"",statusBlocked:"",suspendUntil:"",saving:"...",saveChanges:"",statusUpdated:"",errorOccurred:"",priceDisplayType:"",pricesVisible:" - ",pricesHidden:" - ",visibleNoPoints:"",hiddenWithPoints:"",visible:"",hidden:"",priceDisplayChanged:"",searchWallet:"",addBalance:"",deductBalance:"",totalBalance:"",used:"",remaining:"",joinDate:"",lastLogin:"",customerDocs:"",commercialRegistration:"",vatCertificate:"",nationalId:"",notAttached:"",noDocument:"",enterPointsToAdd:"",pointsAddedSuccess:" {{points}} ",currentBalance:"",points:"",enterPointsToDeduct:"",cannotDeductMoreThan:"",pointsDeductedSuccess:" {{points}} ",errorDeductingPoints:"",staffStatusUpdated:"",customerOrders:"",noOrders:"",orderNumber:"",date:"",amount:"",orderStatus:"",priceQuotes:"",noQuotes:"",quoteNumber:"",items:"",staffMembers:"",noStaff:"",staffName:"",role:"",lastActive:"",action:"",suspend:"",activate:"",securityAccessLogs:"",loginHistory:"",device:"",ipAddress:"IP",location:"",adminNotes:"",noNotes:"",addNote:"...",writeNote:"...",notePlaceholder:"...",addNoteBtn:"",docs:{commercialReg:"",taxNumber:"",nationalAddress:"",notAttached:"",notAvailable:""},staff:{staffMembers:"",maxLimit:"",owner:"",active:"",suspended:"",suspendBtn:"",activateBtn:""},orders:{customerOrders:"",completed:"",ongoing:"",loadingOrders:"...",noOrders:"",unspecified:"",products:"",item:"",total:"",date:"",currency:"SAR",showingOf:" {{total}}  {{shown}} "},quotes:{pricingRequests:"",approved:"",new:"",loadingQuotes:"...",noQuotes:"",unspecified:"",items:"",item:"",total:"",date:"",currency:"SAR",pendingPricing:"",showingOf:" {{total}}  {{shown}} ",missing:"",reviewedBy:""},security:{securityIndicators:"",failedLoginAttempts:"",suspiciousBehavior:" ()",yes:"",no:"",resetCounter:"",counterReset:"",passwordReset:"",passwordResetDesc:"",enterNewPassword:"4",adminNotFound:"",passwordResetError:"",passwordMinLength:"4",resetPasswordBtn:"",recentLoginHistory:"",successfulLogin:"",failedLogin:"",passwordChanged:"",passwordResetAdmin:" ()",noLogsAvailable:""},notes:{adminNotes:"",noNotes:"",addNote:"...",placeholder:"...",saveNote:""}}},dce={systemSettings:"",generalSettings:"",bannerManagement:"",whySiniCar:"Sini Car",textManagement:"",statusLabels:"",apiIntegration:"API",appearanceIdentity:"",siteSettings:"",saveChanges:"",saving:"...",siteName:"/",supportPhone:"",salesWhatsApp:"WhatsApp",supportEmail:"",newsTicker:"",enableTicker:"",tickerText:"",tickerSpeed:" (1-10)",bgColor:" (Hex)",textColor:" (Hex)",productDisplaySettings:"",minVisibleQty:"",minVisibleQtyNote:"1",stockThreshold:"",stockThresholdNote:"0",settingsNote:"",maintenanceMode:"",maintenanceModeDesc:"",bannerAds:"",bannerAdsDesc:"",addNewBanner:"",newBannerData:"",mainTitle:"",subtitle:"",buttonText:"",colorScheme:"",imageUrl:"URL",saveAndPublish:"",uiTextManagement:"UI",uiTextManagementDesc:"",saveTexts:"",erpIntegration:"ERP",erpIntegrationDesc:"Onyx ERP",connectionSettings:"",erpUrl:"ERP URL",apiToken:"API",syncFrequency:"",realtime:"",every15Min:"15",hourly:"",daily:"",environment:"",production:" (Live)",sandbox:" (Test)",testConnection:"",connecting:"...",connectionSuccess:" (200 OK)",connectionFailed:"",sharedData:"API",sharedDataDesc:"",productsItems:"",productsItemsDesc:"",ordersData:"",ordersDataDesc:"",customersData:"",customersDataDesc:"",quotesData:"",quotesDataDesc:"",inventoryData:"",inventoryDataDesc:"",priceLists:"",priceListsDesc:"",syncDirection:"",pullOnly:"ERP",pullOnlyDesc:"",pushOnly:"ERP",pushOnlyDesc:"",bidirectional:"",bidirectionalDesc:"",webhooks:"Webhooks",webhooksDesc:"URL",addWebhook:"",events:"",webhookAdded:"Webhook",loadingFailed:"",settingsSaved:"",saveError:"",fillTitleAndDesc:"",bannerAdded:"",bannerDeleted:"",confirmDeleteBanner:"",hide:"",show:"",darkGray:"",royalBlue:"",vibrantOrange:"",darkGreen:"",loading:"...",advancedSettings:"",loggingLevel:"",loggingLevelBasic:"",loggingLevelDetailed:"",loggingLevelDebug:"",retryOnFail:"",retryAttempts:"",timeout:"",seconds:"",featureManagement:'"Sini Car"',featureManagementDesc:"",addNewFeature:"",fillAllFields:"",featureAdded:"",featureDeleted:"",title:"",description:"",icon:"",iconBox:"",iconChart:"",iconAnchor:"",iconHeadphones:"",iconTruck:"",iconShield:"",iconGlobe:"",iconStar:"",iconClock:"",iconAward:"",iconColor:"",colorCyan:"",colorGreen:"",colorGold:"",colorPurple:"",colorRed:"",colorBlue:"",colorPink:"",colorOrange:"",appearanceCustomization:"",primaryColor:"",primaryColorDesc:"",siteLogo:"",uploadNotAvailable:"",clickToUploadLogo:"",livePreview:"",livePreviewDesc:"",primaryButtonExample:"",statusLabelsManagement:"",statusLabelsDescription:"",addNewStatus:"",statusKey:"",statusLabel:"",newStatus:"",backgroundColor:"",preview:"",add:"",statusUpdated:"",fillKeyAndName:"",keyExists:"",statusAdded:"",cannotDeleteSystem:"",cannotDeleteInUse:"{{count}}",statusDeleted:"",defaultStatusSet:"",checkingUsage:"...",confirmDelete:"",yesDelete:"",systemStatus:"",defaultStatus:"",setAsDefault:"",systemStatuses:"",systemStatusesDesc:"",defaultStatusInfo:"",defaultStatusInfoDesc:"",statusCategories:{orderStatus:"",orderInternalStatus:"",accountRequestStatus:"",quoteRequestStatus:"",quoteItemStatus:"",missingStatus:"",importRequestStatus:"",customerStatus:"",staffStatus:""},guestMode:"",guestModeSettings:"",guestModeSettingsDesc:"/",guestBrowsingEnabled:"",guestBrowsingEnabledDesc:"",visibleSections:"",visibleSectionsDesc:"",showBusinessTypes:'""',showMainServices:"",showHowItWorks:'""',showWhySiniCar:'""',showCart:"",showMarketingCards:"",blurSettings:"",blurIntensity:"",blurLight:"",blurMedium:"",blurHeavy:"",showBlurOverlay:"",showBlurOverlayDesc:'""',searchSettings:"",allowSearch:"",allowSearchDesc:"",showSearchResults:"",showSearchResultsDesc:"",guestSettingsSaved:"",general:{title:"",siteName:"",siteDescription:"",contactEmail:"",contactPhone:"",currency:"",language:"",timezone:"",save:"",saved:""},business:{title:"",minOrderAmount:"",maxOrderAmount:"",deliveryFee:"",taxRate:""},notifications:{title:"",emailNotifications:"",smsNotifications:"",pushNotifications:""},security:{title:"",twoFactorAuth:"",sessionTimeout:"",maxLoginAttempts:""}},uce={title:"",newOrders:"",inProgress:"",readyToShip:"",totalOrders:"",searchOrder:"...",allStatuses:"",allInternalStatuses:"",orderNumber:"",customer:"",date:"",total:"",status:"",internalStatus:"",actions:"",noOrders:"",orderDetails:"",customerInfo:"",orderItems:"",statusHistory:"",internalNotes:"",updateStatus:"",updateInternalStatus:"",externalStatusUpdated:"",internalStatusUpdated:"",updateFailed:"",statusLabels:{pending:"",approved:"",shipped:"",delivered:"",rejected:"",cancelled:""},internalStatusLabels:{new:"",sentToWarehouse:"",waitingPayment:"",paymentConfirmed:"",salesInvoiceCreated:"",readyForShipment:"",completedInternal:"",cancelledInternal:""},details:"",name:"",userId:"ID",product:"",quantity:"",price:"",itemTotal:"",grandTotal:"",changedStatusTo:"",noHistory:"",externalStatus:"",externalStatusDesc:"",noStatusPermission:"",internalStatusTitle:"",internalStatusDesc:"",notesPlaceholder:"...",saveNotes:"",noInternalPermission:"",dangerZone:"",cancelOrder:"",noPermission:"",stats:{pending:"",processing:"",shipped:"",delivered:"",cancelled:"",total:"",new:"",ready:""},searchPlaceholder:"...",table:{orderId:"",customer:"",items:"",total:"",date:"",status:"",actions:""},view:"",approve:"",ship:"",deliver:"",cancel:"",orderUpdated:"",shippingInfo:"",paymentInfo:"",noteAdded:""},mce={title:"",newRequests:"",underReview:"",approved:"",rejected:"",searchAccount:"...",allStatuses:"",businessName:"",phone:"",requestDate:"",status:"",actions:"",noRequests:"",requestDetails:"",businessInfo:"",contactInfo:"",documents:"",decision:"",priceLevel:"",customerType:"",searchPoints:"",initialPoints:"",monthlyPoints:"",portalAccess:"",startDate:"",endDate:"",openEnded:"",staffAccess:"",canCreateStaff:"",maxStaffUsers:"",adminNotes:"",saveDecision:"",decisionSaved:"",saveError:"",statusLabels:{new:"",underReview:"",approved:"",rejected:"",onHold:""},documentTypes:{crCertificate:"",vatCertificate:"",nationalId:"",authorizationLetter:"",other:""}},fce={stats:{newRequests:"",underReview:"",approved:"",rejected:""},status:{new:"",underReview:"",approved:"",rejected:"",onHold:""},docTypes:{crCertificate:"",vatCertificate:"",nationalId:"",authLetter:"",other:""},categories:{spareParts:"",rental:"",insurance:"",agent:""},searchPlaceholder:"...",allStatuses:"",table:{businessName:"/",activityType:"",city:"",date:"",status:"",actions:""},approvedAccount:"",view:"",noMatchingRequests:"",panel:{title:"",customerData:"",businessName:"",activity:"",city:"",contactNumber:"",crNumber:"",vatNumber:"",customerNotes:"",attachedDocuments:"",adminDecision:""},form:{requestStatus:"",statusNew:"",statusUnderReview:"",statusApproved:"",statusRejected:"",statusOnHold:"",customerType:"",typePartsShop:"",typeRentalCompany:"",typeInsuranceCompany:"",typeSalesAgent:"",typeFleetCustomer:"",typeOther:"",priceLevel:"",level1:"Level 1 (VIP - )",level2:"Level 2 ()",level3:"Level 3 (/)",levelSpecial:"",accessValidity:"",to:"",openEnded:"",searchPoints:"",initialBalance:"",monthlyRenewal:"",allowAddStaff:"",maxLimit:"",adminNotes:"",notesPlaceholder:"...",saveDecision:"",cancel:""},toast:{saveSuccess:"",saveError:""}},hce={title:"",pendingQuotes:"",completedQuotes:"",searchQuote:"...",allStatuses:"",quoteNumber:"",customer:"",date:"",itemsCount:"",status:"",actions:"",noQuotes:"",quoteDetails:"",requestedItems:"",response:"",sendResponse:"",stats:{new:"",inProgress:"",completed:"",approved:""},searchPlaceholder:"ID...",table:{quoteId:"ID",customer:"",items:"",priceType:"",date:"",status:"",actions:""},view:"",process:"",complete:"",approve:"",quoteUpdated:"",pricedItems:"",missingItems:""},xce={title:"",subtitle:"",searchPlaceholder:"...",addProduct:"",importExcel:"Excel",exportExcel:"Excel",columnSettings:"",visibilitySettings:"",stats:{totalProducts:"",inStock:"",outOfStock:"",hidden:""},table:{partNumber:"",name:"",brand:"",quantity:"",price:"",visibility:"",actions:""},modal:{addTitle:"",editTitle:"",deleteConfirm:"",deleteMessage:"",importTitle:"Excel",columnSettingsTitle:"Excel"},form:{partNumber:"",name:"",brand:"",quantity:"",price:"",costPrice:"",description:"",isVisible:"",save:"",cancel:""},import:{selectFile:"Excel",dragDrop:"",processing:"...",success:"",imported:"",updated:"",skipped:"",errors:""},validation:{partNumberRequired:"",nameRequired:"",priceInvalid:"",quantityInvalid:""},toast:{productCreated:"",productUpdated:"",productDeleted:"",importSuccess:"",createError:"",updateError:"",deleteError:"",importError:"",loadError:"",visibilityThresholdSaved:""},presets:{title:"",name:"",isDefault:"",mappings:"",internalField:"",excelHeader:"Excel",enabled:"",required:"",addPreset:"",editPreset:"",deletePreset:"",savePreset:"",toast:{presetCreated:"",presetUpdated:"",presetDeleted:"",presetSetDefault:""}},uploadExcel:"Excel",downloadTemplate:"",loading:"...",noProducts:"",noMatchingProducts:"",partNumber:"",productName:"",quantity:"",price:"",category:"",actions:"",edit:"",delete:"",deleteConfirm:"",productDeleted:"",productSaved:"",productCreated:"",importModal:{title:"",selectFile:"Excel",importing:"...",importSuccess:"",imported:"",updated:"",skipped:"",errors:""},productModal:{editTitle:"",addTitle:"",save:"",cancel:""},columnPresets:{title:"Excel",presetName:"",enterPresetName:"",created:"",saved:"",deleteConfirm:"",deleted:"",setDefault:"",isDefault:""},visibility:{title:"",threshold:"",saved:""},pagination:{showing:"",of:"",products:"",previous:"",next:""},selectProductsFirst:"",selectedCount:" {{count}} ",visibilityApplied:" {{count}} ",visibilityRemoved:" {{count}} ",loadFailed:"",importFailed:"",templateDownloaded:"Excel",templateDownloadFailed:"",partAndNameRequired:"",deleteFailed:""},pce={title:"",subtitle:"",tabs:{users:"",roles:""},searchPlaceholder:"...",allRoles:"",allStatuses:"",addUser:"",exportUsers:"",table:{user:"",role:"",contact:"",lastLogin:"",status:"",actions:"",name:"",email:"",phone:""},status:{active:"",inactive:"",ACTIVE:"",SUSPENDED:"",PENDING:""},modal:{addTitle:"",editTitle:"",deleteConfirm:"",deleteMessage:"",resetPassword:"",toggleStatus:""},form:{fullName:"",username:"",email:"",phone:"",role:"",password:"",newPassword:"",confirmPassword:"",save:"",cancel:""},validation:{nameRequired:"",usernameRequired:"",emailRequired:"",emailInvalid:"",passwordRequired:"",passwordMinLength:"6",roleRequired:""},toast:{userCreated:"",userUpdated:"",userDeleted:"",passwordReset:"",statusChanged:"",createError:"",updateError:"",deleteError:"",loadError:""},roles:{title:"",addRole:"",editRole:"",deleteRole:"",roleName:"",roleDescription:"",permissions:"",usersCount:"",isSystemRole:"",noRoles:"",toast:{roleCreated:"",roleUpdated:"",roleDeleted:""},SUPER_ADMIN:"",ADMIN:"",MANAGER:"",STAFF:"",CUSTOMER_OWNER:"",CUSTOMER_STAFF:""},stats:{total:"",admins:"",staff:"",active:""},noUsers:"",editUser:"",deleteUser:"",deleteConfirm:"",userCreated:"",userUpdated:"",userDeleted:"",resetPassword:"",passwordReset:""},gce={title:"",message:"",contactAdmin:"",requestedPage:"",goBack:"",goHome:"",errorCode:""},bce={searchPlaceholder:"...",allStatuses:"",table:{requestNumber:"",businessCustomer:" / ",uploadDate:"",itemsCount:"",priceType:"",status:"",actions:""},reviewDetails:" / ",noRequests:"",panel:{reviewRequest:"",proposedTotal:"",approving:"...",approveAndSend:"",selectAll:"",changeSelectedStatus:"",available:" (Approved)",unavailable:" (Missing)",rejected:" (Rejected)",customerPartNumber:"",customerPartName:"",quantity:"",matchedProduct:"",price:"",decision:"",notes:"",generalNotes:"",notesPlaceholder:"...",itemStatus:{approved:"",missing:"",rejected:"",pending:""}},status:{new:"",underReview:"",partiallyApproved:"",approved:"",quoted:"",processed:"",rejected:""},toast:{itemsUpdated:" {{count}} ",approvedWithoutPriceWarning:"",pricingSentSuccess:"",saveError:"",quoteSaved:"",quoteSaveFailed:""}},vce={tabs:{all:"",fromSearch:"",fromQuote:""},stats:{totalMissing:"",newMissing:"",underReview:"",ordered:"",solved:"",orderedImport:" / ",addedToStock:"",fromQuote:"",fromSearch:""},searchPlaceholder:"...",allStatuses:"",noMatchingMissing:"",table:{partNumber:" / ",partInfo:"",requestCount:"",requestFrequency:"",interestedCustomers:"",source:"",date:"",lastRequest:"",status:"",actions:""},source:{search:"",quote:""},actions:{details:"",linkToImport:"",addToStock:"",saving:"...",saveChanges:""},view:"",noMatchingParts:"",pagination:{page:"",of:""},export:{partNumber:"",itemName:"",source:"",requestCount:"",customerCount:"",status:"",lastRequest:"",adminNotes:""},panel:{title:"",missingDetails:"",partDetails:"",requestedItem:"",suggestedName:"",brand:"",searchQuery:"",partNumber:"",partName:"",requestCount:"",differentCustomers:"",source:"",sourceQuote:"",firstRequest:"",lastRequest:"",requestingCustomers:"",updateStatus:"",followUp:"",internalNotes:"",adminNotes:"",notesPlaceholder:"...",saving:"...",saveStatus:""},status:{new:"",underReview:"",orderPlanned:"",ordered:"",addedToStock:"",ignored:""},sourceLabels:{search:"",quote:""},toast:{statusUpdated:"",saveError:"",exportSuccess:"",exportFailed:"",linkImportSoon:"",redirectToAddProduct:"..."}},yce={stats:{newRequests:"",pending:"",inProgress:"",awaitingCustomer:"",completed:"",delivered:""},table:{requestNumber:"",customer:"",service:"",requestDate:"",date:"",category:"",status:"",action:"",actions:""},serviceType:{fullService:"",processingOnly:"",fullImport:"",goodsPreparation:""},actions:{manageRequest:"",startReview:"",requestItemsFile:"",cancelRequest:""},viewDetails:"",noRequests:"",modal:{manageRequest:"",currentStatus:"",timeline:""},pricing:{preparePricing:"",customerFile:"",download:"",waitingForFile:"...",totalOffer:" (SAR)",sendToCustomer:""},details:{title:"",requestedBrands:"",serviceType:"",branchesCount:"",estimatedValue:"",customerNotes:""},statusControl:{title:"",hint:"..."},panel:{title:"",requestInfo:"",customer:"",category:"",description:"",estimatedQuantity:"",timeline:"",updateStatus:"",pricingSection:"",totalAmount:"",enterAmount:"",note:"",notePlaceholder:"...",sendPricing:""},status:{new:"",underReview:"",waitingCustomerExcel:"",pricingInProgress:"",pricingSent:"",waitingCustomerApproval:"",approvedByCustomer:"",inFactory:"",shipmentBooked:"",onTheSea:"",inPort:"",customsCleared:"",onTheWay:"",delivered:"",cancelled:""},toast:{statusUpdated:"",updateFailed:"",enterValidAmount:"",pricingSent:"",sendFailed:""}},Nce={title:"",stats:{total:"",active:"",pending:"",suspended:""},searchPlaceholder:"...",allStatuses:"",table:{name:"",phone:"",referralCode:"",referrals:"",earnings:"",status:"",actions:""},status:{ACTIVE:"",PENDING:"",SUSPENDED:""},noMarketers:"",view:"",activate:"",suspend:"",delete:"",addMarketer:"",marketerDetails:"",referralHistory:"",commissionHistory:"",payoutHistory:"",pendingPayout:"",totalEarnings:"",marketerUpdated:"",marketerCreated:""},wce={title:"",stats:{total:"",active:"",scheduled:"",expired:""},searchPlaceholder:"...",allStatuses:"",table:{title:"",type:"",placement:"",startDate:"",endDate:"",status:"",actions:""},status:{ACTIVE:"",SCHEDULED:"",PAUSED:"",EXPIRED:""},noAds:"",addAd:"",editAd:"",deleteAd:"",deleteConfirm:"",adCreated:"",adUpdated:"",adDeleted:"",uploadImage:"",adDetails:""},Sce={title:"",stats:{totalRequests:"",pending:"",approved:"",rejected:"",active:""},searchPlaceholder:"ID...",allStatuses:"",table:{requestId:"ID",customer:"",product:"",amount:"",installments:"",status:"",actions:""},status:{PENDING:"",APPROVED:"",REJECTED:"",ACTIVE:"",COMPLETED:"",DEFAULTED:""},noRequests:"",view:"",approve:"",reject:"",requestDetails:"",customerInfo:"",productInfo:"",paymentSchedule:"",paymentHistory:"",monthlyPayment:"",totalAmount:"",remainingAmount:"",dueDate:"",requestApproved:"",requestRejected:""},jce={title:"",description:"",resetDefaults:"",saveChanges:"",confirmReset:"",unsavedChanges:"",savedSuccess:"",tabs:{design:"",layout:"",navigation:"",features:"",content:""},design:{themeMode:"",colors:""},layout:{sections:"",reorder:""},navigation:{menu:""},features:{tools:"",ordering:"",marketing:"",guest:""},banners:{hero:""},announcements:{title:""},cards:{info:""}},Ace={title:"",subtitle:"",filters:"",toolType:"",status:"",dateFrom:"",dateTo:"",totalUsage:"",noRecords:"",noRecordsDesc:"",detailsTitle:"",loadError:"",col:{date:"",tool:"",input:"",output:"",status:"",actions:""},processingTime:"",inputFile:"",outputFile:"",errorMessage:"",deviceType:"",additionalInfo:"",confidence:"",suppliersCompared:"",pagesProcessed:""},Ece={title:"",subtitle:"/",settingsTab:"",analyticsTab:"",usageLogTab:"",filters:"",search:"",searchPlaceholder:"VIN...",toolType:"",status:"",dateFrom:"",dateTo:"",clearFilters:"",export:"",totalActions:"",successful:"",failed:"",successRate:"",noRecords:"",exportSuccess:"",exportError:"",loadError:"",col:{date:"",customer:"",tool:"",input:"",output:"",status:"",actions:""},detailTitle:"",processingTime:"",inputDetails:"",outputDetails:"",showing:""},Cce={VIN:"VIN",PDF_EXCEL:"PDFExcel",COMPARISON:"",ALTERNATIVES:"",SEARCH:"",EXCEL_QUOTE:"Excel"},Tce={SUCCESS:"",FAILED:"",PENDING:"",PROCESSING:""},_ce={viewImage:"",noImage:"",loadError:"",magnifierHint:"",uploadImage:"",addToGallery:"",removeImage:"",setAsMain:"",mainImage:"",gallery:"",imageOf:" {{current}} / {{total}}",settings:{title:"",enabled:"",enabledDesc:"",supplierUpload:"",supplierUploadDesc:"",maxSize:" (MB)",maxSizeDesc:""}},kce={button:"",title:"",subtitle:"",typeLabel:"",subjectLabel:"",subjectPlaceholder:"...",descriptionLabel:"",descriptionPlaceholder:"...",submitButton:"",submitting:"...",successTitle:"",successMessage:"",errorMessage:"",guest:"",types:{BUG:"",FEATURE:"",IMPROVEMENT:"",COMPLAINT:"",OTHER:""},categories:{bug:"",suggestion:"",complaint:"",question:"",other:""},priorities:{low:"",medium:"",high:"",critical:""}},Oce={title:"",subtitle:"",allFeedback:"",filters:"",type:"",status:{NEW:"",IN_PROGRESS:"",IN_REVIEW:"",RESOLVED:"",CLOSED:"",DISMISSED:""},priority:{LOW:"",MEDIUM:"",HIGH:"",CRITICAL:""},dateRange:"",search:"...",noFeedback:"",loading:"...",export:"",refresh:"",markAsRead:"",delete:"",adminNotes:"",adminNotesPlaceholder:"...",saveNotes:"",updateStatus:"",updatePriority:"",customerInfo:"",feedbackDetails:"",submittedAt:"",lastUpdated:"",actions:"",stats:{total:"",new:"",inProgress:"",resolved:"",closed:"",byType:"",byPriority:""},senderType:{CUSTOMER:"",SUPPLIER:"",MARKETER:"",EMPLOYEE:"",ADMIN:"",GUEST:""},exportSuccess:"",exportError:"",updateSuccess:"",updateError:"",deleteConfirm:"",deleteSuccess:"",deleteError:""},Ice={common:Doe,login:Moe,loading:Loe,intro:Foe,marketing:Uoe,guestMode:zoe,register:Boe,nav:$oe,dashboard:qoe,products:Hoe,orders:Voe,cart:Goe,customers:Woe,users:Qoe,roles:Koe,permissions:Joe,settings:Yoe,accountRequests:Xoe,statusLabels:Zoe,reports:ece,notifications:tce,errors:sce,confirmations:ace,admin:rce,homepage:nce,sidebar:ice,customerDashboard:lce,adminDashboard:oce,adminCustomers:cce,adminSettings:dce,adminOrders:uce,adminAccounts:mce,adminAccountRequests:fce,adminQuotes:hce,adminProducts:xce,adminUsers:pce,accessDenied:gce,adminQuoteManager:bce,adminMissingParts:vce,adminImport:yce,adminMarketers:Nce,adminAdvertising:wce,adminInstallments:Sce,adminPortalSettings:jce,traderHistory:Ace,traderToolsAdmin:Ece,toolTypes:Cce,toolStatus:Tce,productImages:_ce,feedback:kce,feedbackAdmin:Oce},Rce={ar:{translation:Pie},en:{translation:Mle},hi:{translation:Poe},zh:{translation:Ice}};Mr.use(jF).use(n9).init({resources:Rce,lng:localStorage.getItem("i18nextLng")||"ar",fallbackLng:"ar",supportedLngs:["ar","en","hi","zh"],debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"}});const yp=[{code:"ar",name:"",nativeName:"",flag:"",dir:"rtl"},{code:"en",name:"English",nativeName:"English",flag:"",dir:"ltr"},{code:"hi",name:"",nativeName:"",flag:"",dir:"ltr"},{code:"zh",name:"",nativeName:"",flag:"",dir:"ltr"}],Lo=e=>e==="ar"?"rtl":"ltr",AF=e=>{Mr.changeLanguage(e);const s=Lo(e);document.documentElement.dir=s,document.documentElement.lang=e,localStorage.setItem("i18nextLng",e)},EF=T.createContext(void 0),Pce=({children:e})=>{const{t:s,i18n:a}=Jt(),[r,n]=T.useState(a.language||"ar"),[i,l]=T.useState({}),o=x=>{n(x),AF(x)};T.useEffect(()=>{const x=v=>{n(v);const b=Lo(v);document.documentElement.dir=b,document.documentElement.lang=v};a.on("languageChanged",x);const g=Lo(a.language);return document.documentElement.dir=g,document.documentElement.lang=a.language,()=>{a.off("languageChanged",x)}},[a]),T.useEffect(()=>{(async()=>{try{const g=await xe.getSettings();g.uiTexts&&l(g.uiTexts)}catch{console.error("Failed to load UI texts")}})()},[]);const d=(x,g)=>{const v=s(x,g);return typeof v=="string"?v:x},u=(x,g)=>i[x]||g,h=Lo(r);return t.jsx(EF.Provider,{value:{language:r,setLanguage:o,t:d,tDynamic:u,dir:h,fontFamily:"Tajawal, system-ui, sans-serif"},children:e})},Bs=()=>{const e=T.useContext(EF);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},Dce=({className:e,variant:s="light"})=>{const{language:a,setLanguage:r}=Bs(),[n,i]=T.useState(!1);return t.jsxs("div",{className:`relative ${e}`,children:[t.jsxs("button",{onClick:()=>i(!n),className:`flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all duration-200 ${s==="dark"?"bg-white/10 border-white/20 text-white hover:bg-white/20 backdrop-blur-md":"bg-white border-gray-200 text-slate-700 hover:border-amber-500 shadow-sm hover:shadow-md"}`,"data-testid":"button-language-switcher",children:[t.jsx(ja,{size:14,className:s==="dark"?"text-amber-400":"text-amber-600"}),t.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:a}),t.jsx(kr,{size:12,className:`transition-transform duration-200 ${n?"rotate-180":""} opacity-70`})]}),n&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),t.jsx("div",{className:`absolute top-full mt-2 w-44 py-1 bg-white rounded-lg shadow-xl border border-gray-100 overflow-hidden z-50 animate-fade-in ${document.dir==="rtl"?"left-0":"right-0"}`,children:yp.map(l=>t.jsxs("button",{onClick:()=>{r(l.code),i(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-slate-50 transition-colors ${a===l.code?"bg-amber-50 font-bold text-amber-700":"text-slate-700"}`,"data-testid":`button-lang-${l.code}`,children:[t.jsx("span",{className:"text-lg",children:l.flag}),t.jsx("span",{className:"flex-1 text-start",children:l.nativeName}),a===l.code&&t.jsx(Zt,{size:16,className:"text-amber-600"})]},l.code))})]})]})},CF=T.createContext(void 0),Mce=({children:e})=>{const[s,a]=T.useState([]),r=T.useCallback(i=>{a(l=>l.filter(o=>o.id!==i))},[]),n=T.useCallback((i,l="success")=>{const o=Math.random().toString(36).substring(2,9);a(d=>[...d,{id:o,message:i,type:l}]),setTimeout(()=>{r(o)},3e3)},[r]);return t.jsx(CF.Provider,{value:{toasts:s,addToast:n,removeToast:r},children:e})},Dt=()=>{const e=T.useContext(CF);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},xh=({variant:e="light",size:s="md",showLabel:a=!0})=>{const{i18n:r,t:n}=Jt(),[i,l]=T.useState(!1),o=T.useRef(null),d=yp.find(x=>x.code===r.language)||yp[0];T.useEffect(()=>{const x=g=>{o.current&&!o.current.contains(g.target)&&l(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),T.useEffect(()=>{const x=Lo(r.language);document.documentElement.dir=x,document.documentElement.lang=r.language},[r.language]);const u=x=>{AF(x),l(!1)},h={sm:"px-2 py-1.5 text-xs gap-1.5",md:"px-3 py-2 text-sm gap-2",lg:"px-4 py-2.5 text-base gap-2.5"},f={dark:"bg-white/10 hover:bg-white/20 text-white border-white/20 backdrop-blur-md",light:"bg-white hover:bg-slate-50 text-slate-700 border-slate-200 shadow-sm hover:shadow-md",floating:"bg-[#0B1B3A] hover:bg-[#1a2e56] text-white border-[#C8A04F]/30 shadow-lg"};return t.jsxs("div",{className:"relative",ref:o,children:[t.jsxs("button",{onClick:()=>l(!i),className:`flex items-center rounded-xl border transition-all duration-200 font-medium ${h[s]} ${f[e]}`,"data-testid":"button-language-switcher",children:[t.jsx("span",{className:"text-lg leading-none",children:d.flag}),a&&t.jsx("span",{className:"font-bold",children:d.nativeName}),t.jsx(kr,{size:s==="sm"?12:14,className:`transition-transform opacity-60 ${i?"rotate-180":""}`})]}),i&&t.jsxs("div",{className:`absolute top-full mt-2 w-52 bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden z-[100] animate-in fade-in slide-in-from-top-2 duration-200 ${document.dir==="rtl"?"left-0":"right-0"}`,children:[t.jsx("div",{className:"p-2 bg-slate-50 border-b border-slate-100",children:t.jsx("p",{className:"text-xs font-bold text-slate-500 px-2",children:n("settings.selectLanguage")})}),t.jsx("div",{className:"p-1",children:yp.map(x=>t.jsxs("button",{onClick:()=>u(x.code),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-start transition-all duration-150 ${x.code===r.language?"bg-gradient-to-r from-amber-50 to-amber-100/50 text-amber-800":"hover:bg-slate-50 text-slate-700"}`,"data-testid":`button-language-${x.code}`,children:[t.jsx("span",{className:"text-2xl",children:x.flag}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`font-bold ${x.code===r.language?"text-amber-800":"text-slate-800"}`,children:x.nativeName}),t.jsx("p",{className:"text-xs text-slate-500",children:x.name})]}),x.code===r.language&&t.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-500 flex items-center justify-center",children:t.jsx(Zt,{size:14,className:"text-white"})})]},x.code))})]})]})},Lce=()=>t.jsx(xh,{variant:"light",size:"md"}),l5={CR_CERTIFICATE:{labelKey:"register.documents.crCertificate",required:!0,forCategory:["SPARE_PARTS_SHOP","INSURANCE_COMPANY","RENTAL_COMPANY","MAINTENANCE_CENTER"]},VAT_CERTIFICATE:{labelKey:"register.documents.vatCertificate",required:!0,forCategory:["SPARE_PARTS_SHOP","INSURANCE_COMPANY","RENTAL_COMPANY","MAINTENANCE_CENTER"]},NATIONAL_ID:{labelKey:"register.documents.nationalId",required:!0,forCategory:["SALES_REP"]},NATIONAL_ADDRESS:{labelKey:"register.documents.nationalAddressCert",required:!0,forCategory:["SPARE_PARTS_SHOP","INSURANCE_COMPANY","RENTAL_COMPANY","MAINTENANCE_CENTER"]}},Fce=["application/pdf","image/jpeg","image/png","image/webp"],Uce=5*1024*1024,zce=({onSuccess:e,onSwitchToLogin:s})=>{var k,z,_,q,L,Q,X,W,ee,V,P,Y,J,K,se,G,te;const[a,r]=T.useState(!1),[n,i]=T.useState(!1),[l,o]=T.useState("SPARE_PARTS_SHOP"),[d,u]=T.useState([]),h=T.useRef({}),[f,x]=T.useState(null),{addToast:g}=Dt(),{t:v,i18n:b}=Jt(),{dir:y}=Bs();b.language,T.useEffect(()=>{xe.getSettings().then(x)},[]);const[j,w]=T.useState({phone:"",notes:"",email:"",businessName:"",city:"",country:"",branchesCount:1,commercialRegNumber:"",vatNumber:"",nationalAddress:"",contactPerson:"",fullName:"",representativeRegion:"",representativeClientsType:"",approximateClientsCount:""}),A=Z=>{w({...j,[Z.target.name]:Z.target.value})},O=()=>Object.entries(l5).filter(([Z,ue])=>ue.forCategory.includes(l)).map(([Z,ue])=>({key:Z,label:v(ue.labelKey),...ue})),C=async(Z,ue)=>{if(!Fce.includes(ue.type)){g(v("register.documents.invalidFileType"),"error");return}if(ue.size>Uce){g(v("register.documents.fileTooLarge"),"error");return}const re=new FileReader;re.onload=()=>{const H={id:`doc_${Date.now()}`,name:ue.name,type:Z,fileType:ue.type,fileSize:ue.size,base64Data:re.result,uploadedAt:new Date().toISOString()};u(B=>[...B.filter(fe=>fe.type!==Z),H]);const pe=l5[Z];g(`${v((pe==null?void 0:pe.labelKey)||"common.document")} ${v("register.documents.uploadSuccess")}`,"success")},re.readAsDataURL(ue)},E=Z=>{u(ue=>ue.filter(re=>re.type!==Z))},S=Z=>Z<1024?Z+" B":Z<1024*1024?(Z/1024).toFixed(1)+" KB":(Z/(1024*1024)).toFixed(1)+" MB",D=()=>{if(!j.phone)return g(v("register.validation.phoneRequired"),"error"),!1;if(l==="SALES_REP"){if(!j.fullName)return g(v("register.validation.fullNameRequired"),"error"),!1;if(!j.representativeRegion)return g(v("register.validation.regionRequired"),"error"),!1}else{if(!j.businessName)return g(v("register.validation.businessNameRequired"),"error"),!1;if(!j.city)return g(v("register.validation.cityRequired"),"error"),!1;if(!j.contactPerson)return g(v("register.validation.contactPersonRequired"),"error"),!1;if(!j.commercialRegNumber)return g(v("register.validation.commercialRegRequired"),"error"),!1;if(!j.vatNumber)return g(v("register.validation.vatRequired"),"error"),!1;if(!j.nationalAddress)return g(v("register.validation.nationalAddressRequired"),"error"),!1}const Z=O().filter(ue=>ue.required);for(const ue of Z)if(!d.find(re=>re.type===ue.key))return g(`${ue.label} ${v("register.validation.documentRequired")}`,"error"),!1;return!0},M=async()=>{if(D()){r(!0);try{await xe.createAccountOpeningRequest({category:l,...j,phone:j.phone||"",documents:d}),i(!0),g(v("register.requestSuccess"),"success")}catch{g(v("register.submitError"),"error")}finally{r(!1)}}},U=({docKey:Z,label:ue,required:re})=>{const H=d.find(B=>B.type===Z),pe=H==null?void 0:H.fileType.startsWith("image/");return t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[ue," ",re&&t.jsx("span",{className:"text-red-500",children:"*"})]}),H?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-green-600",children:pe?t.jsx(tl,{size:20}):t.jsx($j,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:H.name}),t.jsx("p",{className:"text-xs text-slate-500",children:S(H.fileSize)})]}),t.jsx("button",{type:"button",onClick:()=>E(Z),className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center text-red-600 hover:bg-red-200 transition-colors","data-testid":`remove-doc-${Z}`,children:t.jsx(St,{size:16})})]}):t.jsxs("div",{className:"w-full p-6 border-2 border-dashed border-slate-300 rounded-xl bg-slate-50 hover:bg-slate-100 hover:border-brand-400 transition-all cursor-pointer text-center",onClick:()=>{var B;return(B=h.current[Z])==null?void 0:B.click()},"data-testid":`upload-${Z}`,children:[t.jsx(ga,{className:"mx-auto mb-2 text-slate-400",size:28}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:v("register.documents.clickToUpload")}),t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:v("register.documents.fileTypes")}),t.jsx("input",{type:"file",ref:B=>h.current[Z]=B,className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:B=>{var fe;const oe=(fe=B.target.files)==null?void 0:fe[0];oe&&C(Z,oe),B.target.value=""}})]})]})},I=Z=>t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[Z.label," ",Z.required&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{...Z,className:"w-full p-3 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-medium"})]});return t.jsxs("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4 relative",dir:y,children:[t.jsx("div",{className:`absolute top-4 z-50 ${y==="rtl"?"left-4":"right-4"}`,children:t.jsx(xh,{variant:"floating",size:"md"})}),t.jsx("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden",children:n?t.jsxs("div",{className:"text-center py-20 px-8 animate-fade-in",children:[t.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center text-green-600 mx-auto mb-8 shadow-sm animate-bounce",children:t.jsx(Ut,{size:48})}),t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:v("register.success.title")}),t.jsx("p",{className:"text-slate-500 text-lg mb-8 max-w-xl mx-auto leading-relaxed",children:v("register.success.message")}),t.jsx("div",{className:"flex justify-center gap-4",children:t.jsx("button",{onClick:s,className:"px-8 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-md",children:v("register.success.backToHome")})})]}):t.jsxs("div",{className:"flex flex-col md:flex-row",children:[t.jsxs("div",{className:"bg-slate-900 text-white p-8 md:w-1/3 flex flex-col justify-between relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("h2",{className:"text-2xl font-black mb-6",children:((k=f==null?void 0:f.authPageTexts)==null?void 0:k.registerTitle)||v("register.openNewAccount")}),t.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-6",children:((z=f==null?void 0:f.authPageTexts)==null?void 0:z.registerSubtitle)||v("register.subtitle")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-200",children:[t.jsx(Ut,{className:"text-brand-500",size:18}),t.jsx("span",{children:v("register.benefits.exclusivePrices")})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-200",children:[t.jsx(Ut,{className:"text-brand-500",size:18}),t.jsx("span",{children:v("register.benefits.instantAccess")})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-200",children:[t.jsx(Ut,{className:"text-brand-500",size:18}),t.jsx("span",{children:v("register.benefits.taxInvoices")})]})]})]}),t.jsx("div",{className:"relative z-10 mt-8 pt-8 border-t border-slate-800",children:t.jsxs("button",{onClick:s,className:"text-sm font-bold text-slate-400 hover:text-white flex items-center gap-2 transition-colors",children:[t.jsx(el,{size:16})," ",((_=f==null?void 0:f.authPageTexts)==null?void 0:_.registerLoginLinkText)||v("register.backToLogin")]})})]}),t.jsxs("div",{className:"p-8 md:p-10 md:w-2/3",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:[((q=f==null?void 0:f.authPageTexts)==null?void 0:q.registerBusinessTypeLabel)||v("register.selectBusinessType")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3",children:[t.jsxs("button",{onClick:()=>o("SPARE_PARTS_SHOP"),className:`p-3 rounded-xl border text-center transition-all ${l==="SPARE_PARTS_SHOP"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-spare-parts",children:[t.jsx(Xs,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.sparePartsShop")})]}),t.jsxs("button",{onClick:()=>o("MAINTENANCE_CENTER"),className:`p-3 rounded-xl border text-center transition-all ${l==="MAINTENANCE_CENTER"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-maintenance-center",children:[t.jsx(sc,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.maintenanceCenter")})]}),t.jsxs("button",{onClick:()=>o("INSURANCE_COMPANY"),className:`p-3 rounded-xl border text-center transition-all ${l==="INSURANCE_COMPANY"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-insurance",children:[t.jsx(Ds,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.insuranceCompany")})]}),t.jsxs("button",{onClick:()=>o("RENTAL_COMPANY"),className:`p-3 rounded-xl border text-center transition-all ${l==="RENTAL_COMPANY"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-rental",children:[t.jsx(Mi,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.rentalCompany")})]}),t.jsxs("button",{onClick:()=>o("SALES_REP"),className:`p-3 rounded-xl border text-center transition-all ${l==="SALES_REP"?"border-brand-600 bg-brand-50 text-brand-700 shadow-sm ring-1 ring-brand-200":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,"data-testid":"category-sales-rep",children:[t.jsx(Mu,{size:24,className:"mx-auto mb-1.5"}),t.jsx("span",{className:"text-xs font-bold block",children:v("register.businessTypes.salesRep")})]})]})]}),t.jsxs("form",{onSubmit:Z=>Z.preventDefault(),className:"space-y-6 animate-fade-in",children:[l==="SALES_REP"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.salesRepFields.fullName"),name:"fullName",value:j.fullName,onChange:A,required:!0}),t.jsx(I,{label:v("register.salesRepFields.phone"),name:"phone",value:j.phone,onChange:A,placeholder:"05xxxxxxxx",required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.salesRepFields.region"),name:"representativeRegion",value:j.representativeRegion,onChange:A,required:!0}),t.jsx(I,{label:v("register.salesRepFields.email"),name:"email",type:"email",value:j.email,onChange:A})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.salesRepFields.clientsType"),name:"representativeClientsType",value:j.representativeClientsType,onChange:A}),t.jsx(I,{label:v("register.salesRepFields.clientsCount"),name:"approximateClientsCount",value:j.approximateClientsCount,onChange:A})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:((L=f==null?void 0:f.authPageTexts)==null?void 0:L.registerBusinessNameLabel)||v("register.businessFields.businessName"),name:"businessName",value:j.businessName,onChange:A,placeholder:((Q=f==null?void 0:f.authPageTexts)==null?void 0:Q.registerBusinessNamePlaceholder)||"",required:!0}),t.jsx(I,{label:v("register.businessFields.branchesCount"),name:"branchesCount",type:"number",min:1,value:j.branchesCount,onChange:A,required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:((X=f==null?void 0:f.authPageTexts)==null?void 0:X.registerCityLabel)||v("register.businessFields.city"),name:"city",value:j.city,onChange:A,placeholder:((W=f==null?void 0:f.authPageTexts)==null?void 0:W.registerCityPlaceholder)||"",required:!0}),t.jsx(I,{label:v("register.businessFields.nationalAddress"),name:"nationalAddress",value:j.nationalAddress,onChange:A,placeholder:v("register.businessFields.nationalAddressPlaceholder"),required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:v("register.businessFields.commercialReg"),name:"commercialRegNumber",value:j.commercialRegNumber,onChange:A,required:!0}),t.jsx(I,{label:v("register.businessFields.vatNumber"),name:"vatNumber",value:j.vatNumber,onChange:A,required:!0})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx(I,{label:((ee=f==null?void 0:f.authPageTexts)==null?void 0:ee.registerOwnerNameLabel)||v("register.businessFields.contactPerson"),name:"contactPerson",value:j.contactPerson,onChange:A,placeholder:((V=f==null?void 0:f.authPageTexts)==null?void 0:V.registerOwnerNamePlaceholder)||"",required:!0}),t.jsx(I,{label:((P=f==null?void 0:f.authPageTexts)==null?void 0:P.registerPhoneLabel)||v("register.businessFields.phone"),name:"phone",value:j.phone,onChange:A,placeholder:((Y=f==null?void 0:f.authPageTexts)==null?void 0:Y.registerPhonePlaceholder)||"05xxxxxxxx",required:!0})]}),t.jsx(I,{label:((J=f==null?void 0:f.authPageTexts)==null?void 0:J.registerEmailLabel)||v("register.businessFields.emailOptional"),name:"email",type:"email",value:j.email,onChange:A,placeholder:((K=f==null?void 0:f.authPageTexts)==null?void 0:K.registerEmailPlaceholder)||""})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-6 mt-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Lt,{className:"text-brand-600",size:20}),t.jsx("h3",{className:"text-lg font-bold text-slate-800",children:v("register.documents.requiredDocuments")})]}),t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4 flex items-start gap-3",children:[t.jsx(ma,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:18}),t.jsx("p",{className:"text-sm text-amber-800",children:v("register.documents.uploadNotice")})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:O().map(Z=>t.jsx("div",{children:t.jsx(U,{docKey:Z.key,label:Z.label,required:Z.required})},Z.key))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:((se=f==null?void 0:f.authPageTexts)==null?void 0:se.registerNotesLabel)||v("register.additionalNotes")}),t.jsx("textarea",{name:"notes",className:"w-full p-3 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-medium",rows:3,value:j.notes,onChange:A,placeholder:((G=f==null?void 0:f.authPageTexts)==null?void 0:G.registerNotesPlaceholder)||""})]}),t.jsxs("button",{onClick:M,disabled:a,className:"w-full py-4 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-200 flex items-center justify-center gap-2 transition-all",children:[a?v("register.submitting"):((te=f==null?void 0:f.authPageTexts)==null?void 0:te.registerButtonText)||v("register.submitRequest")," ",t.jsx(xi,{size:18,className:"rtl:rotate-180"})]})]})]})]})})]})},Pm=[{id:"chery",label:" Chery",labelEn:"Chery"},{id:"geely",label:" Geely",labelEn:"Geely"},{id:"haval",label:" Haval",labelEn:"Haval"},{id:"mg",label:"  MG",labelEn:"MG"},{id:"jac",label:" JAC",labelEn:"JAC"},{id:"baic",label:" BAIC",labelEn:"BAIC"},{id:"changan",label:" Changan",labelEn:"Changan"},{id:"greatwall",label:"  Great Wall",labelEn:"Great Wall"},{id:"dongfeng",label:" Dongfeng",labelEn:"Dongfeng"},{id:"faw",label:" FAW",labelEn:"FAW"},{id:"saic",label:" SAIC",labelEn:"SAIC"},{id:"byd",label:"   BYD",labelEn:"BYD"},{id:"hongqi",label:" Hongqi",labelEn:"Hongqi"},{id:"gac",label:"   GAC",labelEn:"GAC"},{id:"wuling",label:" Wuling",labelEn:"Wuling"},{id:"foton",label:" Foton",labelEn:"Foton"},{id:"zotye",label:" Zotye",labelEn:"Zotye"},{id:"lifan",label:" Lifan",labelEn:"Lifan"},{id:"dfsk",label:"    DFSK",labelEn:"DFSK"},{id:"jetour",label:" Jetour",labelEn:"Jetour"},{id:"exeed",label:" Exeed",labelEn:"Exeed"},{id:"tank",label:" Tank",labelEn:"Tank"},{id:"ora",label:" Ora",labelEn:"Ora"},{id:"other",label:"",labelEn:"Other"}],TF=[{id:"riyadh",label:"",region:" "},{id:"jeddah",label:"",region:" "},{id:"mecca",label:" ",region:" "},{id:"medina",label:" ",region:" "},{id:"dammam",label:"",region:" "},{id:"khobar",label:"",region:" "},{id:"dhahran",label:"",region:" "},{id:"qatif",label:"",region:" "},{id:"ahsa",label:"",region:" "},{id:"jubail",label:"",region:" "},{id:"taif",label:"",region:" "},{id:"tabuk",label:"",region:" "},{id:"abha",label:"",region:" "},{id:"khamis",label:" ",region:" "},{id:"yanbu",label:"",region:" "},{id:"hail",label:"",region:" "},{id:"najran",label:"",region:" "},{id:"jazan",label:"",region:" "},{id:"baha",label:"",region:" "},{id:"buraidah",label:"",region:""},{id:"unaizah",label:"",region:""},{id:"arar",label:"",region:" "},{id:"sakaka",label:"",region:""},{id:"qunfudah",label:"",region:" "},{id:"hofuf",label:"",region:" "}],_F=[{id:"instagram",label:"",labelEn:"Instagram",icon:"instagram"},{id:"twitter",label:" (X)",labelEn:"Twitter (X)",icon:"twitter"},{id:"tiktok",label:" ",labelEn:"TikTok",icon:"video"},{id:"snapchat",label:" ",labelEn:"Snapchat",icon:"camera"},{id:"whatsapp",label:"",labelEn:"WhatsApp",icon:"message-circle"},{id:"youtube",label:"",labelEn:"YouTube",icon:"youtube"},{id:"facebook",label:"",labelEn:"Facebook",icon:"facebook"},{id:"field",label:" ",labelEn:"Field Marketing",icon:"map-pin"},{id:"referral",label:" ",labelEn:"Customer Referral",icon:"users"},{id:"other",label:"",labelEn:"Other",icon:"more-horizontal"}],Gj=[{id:"banner",label:" ",labelEn:"Banner Ad",description:"   "},{id:"popup",label:" ",labelEn:"Popup",description:"   "},{id:"notification",label:"",labelEn:"Notification",description:"   "}],Bce=[{days:7,label:" ",labelEn:"1 Week"},{days:14,label:"",labelEn:"2 Weeks"},{days:30,label:" ",labelEn:"1 Month"},{days:60,label:"",labelEn:"2 Months"},{days:90,label:" ",labelEn:"3 Months"},{days:180,label:" ",labelEn:"6 Months"},{days:365,label:" ",labelEn:"1 Year"}],Wj=[{code:"CN",label:"",labelEn:"China"},{code:"AE",label:"",labelEn:"UAE"},{code:"KW",label:"",labelEn:"Kuwait"},{code:"QA",label:"",labelEn:"Qatar"},{code:"BH",label:"",labelEn:"Bahrain"},{code:"OM",label:"",labelEn:"Oman"},{code:"TR",label:"",labelEn:"Turkey"},{code:"IN",label:"",labelEn:"India"},{code:"TH",label:"",labelEn:"Thailand"},{code:"JP",label:"",labelEn:"Japan"},{code:"KR",label:" ",labelEn:"South Korea"},{code:"MY",label:"",labelEn:"Malaysia"},{code:"OTHER",label:"",labelEn:"Other"}],kF=[{id:"factory",label:"",labelEn:"Factory",icon:"factory"},{id:"supplier",label:" / ",labelEn:"Supplier / Distributor",icon:"truck"},{id:"agent",label:"",labelEn:"Agent",icon:"briefcase"}],$ce={NEW:{label:" ",labelEn:"New",color:"bg-blue-100 text-blue-700 border-blue-200"},UNDER_REVIEW:{label:" ",labelEn:"Under Review",color:"bg-yellow-100 text-yellow-700 border-yellow-200"},APPROVED:{label:" ",labelEn:"Approved",color:"bg-green-100 text-green-700 border-green-200"},REJECTED:{label:"",labelEn:"Rejected",color:"bg-red-100 text-red-700 border-red-200"},NEEDS_MODIFICATION:{label:" ",labelEn:"Needs Modification",color:"bg-orange-100 text-orange-700 border-orange-200"}},Io={LOCAL_SUPPLIER:{label:" ",labelEn:"Local Supplier",icon:"building-2",color:"bg-emerald-600",description:"     "},INTERNATIONAL_SUPPLIER:{label:" ",labelEn:"International Supplier",icon:"globe",color:"bg-blue-600",description:"    ( )"},MARKETER:{label:"",labelEn:"Marketer",icon:"megaphone",color:"bg-purple-600",description:"    "},ADVERTISER:{label:"",labelEn:"Advertiser",icon:"sparkles",color:"bg-amber-600",description:"     "}},qce=({onBack:e,onCheckStatus:s})=>{const{t:a,i18n:r}=Jt(),{dir:n}=Bs(),{addToast:i}=Dt();r.language;const[l,o]=T.useState("LOCAL_SUPPLIER"),[d,u]=T.useState(!1),[h,f]=T.useState(!1),[x,g]=T.useState(!1),[v,b]=T.useState(!1),[y,j]=T.useState(!1),[w,A]=T.useState(""),[O,C]=T.useState(""),[E,S]=T.useState(null),[D,M]=T.useState({companyName:"",commercialRegNumber:"",vatNumber:"",nationalAddressNumber:"",phone:"",password:"",confirmPassword:"",city:"",carBrands:[],ownBrands:[],newOwnBrand:""}),[U,I]=T.useState({companyName:"",country:"",city:"",businessType:"",phone:"",password:"",confirmPassword:"",carBrands:[]}),[k,z]=T.useState({fullName:"",phone:"",password:"",confirmPassword:"",marketingChannels:[],otherChannel:""}),[_,q]=T.useState({companyName:"",phone:"",adType:"",duration:0,startDate:""}),L=(J,K)=>{K==="local"?D.carBrands.includes(J)||M({...D,carBrands:[...D.carBrands,J]}):U.carBrands.includes(J)||I({...U,carBrands:[...U.carBrands,J]})},Q=(J,K)=>{K==="local"?M({...D,carBrands:D.carBrands.filter(se=>se!==J)}):I({...U,carBrands:U.carBrands.filter(se=>se!==J)})},X=()=>{D.newOwnBrand.trim()&&!D.ownBrands.includes(D.newOwnBrand.trim())&&M({...D,ownBrands:[...D.ownBrands,D.newOwnBrand.trim()],newOwnBrand:""})},W=J=>{z(K=>({...K,marketingChannels:K.marketingChannels.includes(J)?K.marketingChannels.filter(se=>se!==J):[...K.marketingChannels,J]}))},ee=()=>{if(l==="LOCAL_SUPPLIER"){if(!D.companyName)return i("   ","error"),!1;if(!D.commercialRegNumber)return i("    ","error"),!1;if(!D.vatNumber)return i("   ","error"),!1;if(!D.nationalAddressNumber)return i("    ","error"),!1;if(!D.phone)return i("   ","error"),!1;if(!D.city)return i("  ","error"),!1;if(D.carBrands.length===0)return i("     ","error"),!1;if(!D.password||D.password.length<6)return i("     6   ","error"),!1;if(D.password!==D.confirmPassword)return i("   ","error"),!1}if(l==="INTERNATIONAL_SUPPLIER"){if(!U.companyName)return i("   ","error"),!1;if(!U.country)return i("  ","error"),!1;if(!U.city)return i("  ","error"),!1;if(!U.businessType)return i("   ","error"),!1;if(!U.phone)return i("   ","error"),!1;if(U.carBrands.length===0)return i("     ","error"),!1;if(!U.password||U.password.length<6)return i("     6   ","error"),!1;if(U.password!==U.confirmPassword)return i("   ","error"),!1}if(l==="MARKETER"){if(!k.fullName)return i("   ","error"),!1;if(!k.phone)return i("   ","error"),!1;if(k.marketingChannels.length===0)return i("      ","error"),!1;if(!k.password||k.password.length<6)return i("     6   ","error"),!1;if(k.password!==k.confirmPassword)return i("   ","error"),!1}if(l==="ADVERTISER"){if(!_.companyName)return i("   ","error"),!1;if(!_.phone)return i("   ","error"),!1;if(!_.adType)return i("   ","error"),!1;if(!_.duration)return i("   ","error"),!1;if(!_.startDate)return i("   ","error"),!1}return!0},V=async()=>{if(ee()){u(!0);try{const J={type:l,status:"NEW",createdAt:new Date().toISOString()};l==="LOCAL_SUPPLIER"?Object.assign(J,{companyName:D.companyName,commercialRegNumber:D.commercialRegNumber,vatNumber:D.vatNumber,nationalAddressNumber:D.nationalAddressNumber,phone:D.phone,password:D.password,city:D.city,carBrands:D.carBrands,ownBrands:D.ownBrands}):l==="INTERNATIONAL_SUPPLIER"?Object.assign(J,{companyName:U.companyName,country:U.country,city:U.city,businessType:U.businessType,phone:U.phone,password:U.password,carBrands:U.carBrands}):l==="MARKETER"?Object.assign(J,{fullName:k.fullName,phone:k.phone,password:k.password,marketingChannels:k.marketingChannels,otherChannel:k.otherChannel}):l==="ADVERTISER"&&Object.assign(J,{companyName:_.companyName,phone:_.phone,adType:_.adType,duration:_.duration,startDate:_.startDate}),await xe.createPartnerRequest(J),f(!0),i("   !   ","success")}catch{i("    ","error")}finally{u(!1)}}},P=async()=>{if(!w||!O){i("     ","error");return}u(!0);try{const J=await xe.checkPartnerRequestStatus(w,O);S(J)}catch{i("      ","error")}finally{u(!1)}},Y=[{id:"LOCAL_SUPPLIER",icon:Xs,...Io.LOCAL_SUPPLIER},{id:"INTERNATIONAL_SUPPLIER",icon:ja,...Io.INTERNATIONAL_SUPPLIER},{id:"MARKETER",icon:ya,...Io.MARKETER},{id:"ADVERTISER",icon:pi,...Io.ADVERTISER}];return h?t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4",dir:n,children:t.jsxs("div",{className:"max-w-lg w-full bg-white rounded-3xl shadow-xl border border-slate-100 p-10 text-center animate-fade-in",children:[t.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center text-green-600 mx-auto mb-8 shadow-sm animate-bounce",children:t.jsx(Ut,{size:48})}),t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:"   !"}),t.jsx("p",{className:"text-slate-500 text-lg mb-8 leading-relaxed",children:"             ."}),t.jsx("div",{className:"bg-slate-50 rounded-xl p-4 mb-6 border border-slate-200",children:t.jsx("p",{className:"text-sm text-slate-600",children:"         "})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:()=>j(!0),className:"flex-1 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-md",children:"  "}),t.jsx("button",{onClick:e,className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200",children:" "})]})]})}):y?t.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4",dir:n,children:t.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl border border-slate-100 p-8 animate-fade-in",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-2xl flex items-center justify-center text-brand-600 mx-auto mb-4",children:t.jsx(os,{size:32})}),t.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"  "}),t.jsx("p",{className:"text-slate-500 text-sm",children:"     "})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx(vn,{className:"absolute right-3 top-3.5 text-slate-400",size:18}),t.jsx("input",{type:"tel",value:w,onChange:J=>A(J.target.value),placeholder:"05xxxxxxxx",className:"w-full pr-10 pl-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx(wa,{className:"absolute right-3 top-3.5 text-slate-400",size:18}),t.jsx("input",{type:x?"text":"password",value:O,onChange:J=>C(J.target.value),placeholder:" ",className:"w-full pr-10 pl-12 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"}),t.jsx("button",{type:"button",onClick:()=>g(!x),className:"absolute left-3 top-3.5 text-slate-400 hover:text-slate-600",children:x?t.jsx(gr,{size:18}):t.jsx(fs,{size:18})})]})]}),E&&t.jsx("div",{className:`p-4 rounded-xl border ${E.status==="APPROVED"?"bg-green-50 border-green-200 text-green-700":E.status==="REJECTED"?"bg-red-50 border-red-200 text-red-700":E.status==="NEEDS_MODIFICATION"?"bg-orange-50 border-orange-200 text-orange-700":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:t.jsx("p",{className:"font-bold text-sm",children:E.message})}),t.jsx("button",{onClick:P,disabled:d,className:"w-full py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-md disabled:opacity-50",children:d?" ...":"  "}),t.jsx("button",{onClick:()=>{j(!1),S(null)},className:"w-full py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200",children:""})]})]})}):t.jsxs("div",{className:"min-h-screen bg-slate-50 py-12 px-4",dir:n,children:[t.jsx("div",{className:`fixed top-4 z-50 ${n==="rtl"?"left-4":"right-4"}`,children:t.jsx(xh,{variant:"floating",size:"md"})}),t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 text-slate-500 hover:text-slate-700 mb-6 font-medium",children:[t.jsx(el,{size:18,className:"rtl:rotate-180"}),"  "]}),t.jsx("h1",{className:"text-4xl font-black text-slate-800 mb-3",children:" "}),t.jsx("p",{className:"text-slate-500 text-lg",children:"    "})]}),t.jsx("div",{className:"text-center mb-8",children:t.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center gap-2 text-brand-600 hover:text-brand-700 font-bold text-sm underline",children:[t.jsx(os,{size:16}),"      "]})}),t.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:Y.map(J=>t.jsxs("button",{onClick:()=>o(J.id),className:`flex items-center gap-3 px-6 py-4 rounded-2xl border-2 transition-all ${l===J.id?`${J.color} text-white border-transparent shadow-lg scale-105`:"bg-white border-slate-200 text-slate-600 hover:border-slate-300 hover:shadow"}`,children:[t.jsx(J.icon,{size:24}),t.jsxs("div",{className:"text-start",children:[t.jsx("p",{className:"font-bold",children:J.label}),t.jsx("p",{className:`text-xs ${l===J.id?"text-white/80":"text-slate-400"}`,children:J.labelEn})]})]},J.id))}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-8 animate-fade-in",children:[l==="LOCAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.companyName,onChange:J=>M({...D,companyName:J.target.value}),placeholder:"   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.commercialRegNumber,onChange:J=>M({...D,commercialRegNumber:J.target.value}),placeholder:"1010xxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500"})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.vatNumber,onChange:J=>M({...D,vatNumber:J.target.value}),placeholder:"3xxxxxxxxxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.nationalAddressNumber,onChange:J=>M({...D,nationalAddressNumber:J.target.value}),placeholder:"AAAA1234",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:D.phone,onChange:J=>M({...D,phone:J.target.value}),placeholder:"05xxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:D.city,onChange:J=>M({...D,city:J.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[t.jsx("option",{value:"",children:" "}),TF.map(J=>t.jsxs("option",{value:J.id,children:[J.label," - ",J.region]},J.id))]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["    ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:D.carBrands.map(J=>{var K;return t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-brand-100 text-brand-700 rounded-full text-sm font-bold",children:[((K=Pm.find(se=>se.id===J))==null?void 0:K.label)||J,t.jsx("button",{onClick:()=>Q(J,"local"),className:"hover:text-red-600",children:t.jsx(St,{size:14})})]},J)})}),t.jsx("div",{className:"flex flex-wrap gap-2 p-4 bg-slate-50 rounded-xl border border-slate-200 max-h-48 overflow-y-auto",children:Pm.filter(J=>!D.carBrands.includes(J.id)).map(J=>t.jsx("button",{type:"button",onClick:()=>L(J.id,"local"),className:"px-3 py-1.5 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-600 hover:bg-slate-100 hover:border-slate-300 transition-colors",children:J.label},J.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"    ()"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:D.newOwnBrand,onChange:J=>M({...D,newOwnBrand:J.target.value}),placeholder:"  ",className:"flex-1 p-3 bg-slate-50 border border-slate-200 rounded-lg",onKeyPress:J=>J.key==="Enter"&&X()}),t.jsx("button",{type:"button",onClick:X,className:"px-4 py-3 bg-slate-800 text-white rounded-lg font-bold hover:bg-slate-700",children:t.jsx(Pt,{size:20})})]}),D.ownBrands.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:D.ownBrands.map(J=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-100 text-purple-700 rounded-full text-sm font-bold",children:[J,t.jsx("button",{onClick:()=>M({...D,ownBrands:D.ownBrands.filter(K=>K!==J)}),className:"hover:text-red-600",children:t.jsx(St,{size:14})})]},J))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:x?"text":"password",value:D.password,onChange:J=>M({...D,password:J.target.value}),placeholder:"6   ",className:"w-full p-3 pl-12 bg-slate-50 border border-slate-200 rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>g(!x),className:"absolute left-3 top-3.5 text-slate-400 hover:text-slate-600",children:x?t.jsx(gr,{size:18}):t.jsx(fs,{size:18})})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:v?"text":"password",value:D.confirmPassword,onChange:J=>M({...D,confirmPassword:J.target.value}),placeholder:"   ",className:"w-full p-3 pl-12 bg-slate-50 border border-slate-200 rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>b(!v),className:"absolute left-3 top-3.5 text-slate-400 hover:text-slate-600",children:v?t.jsx(gr,{size:18}):t.jsx(fs,{size:18})})]})]})]})]}),l==="INTERNATIONAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:U.companyName,onChange:J=>I({...U,companyName:J.target.value}),placeholder:"Company Name",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:U.country,onChange:J=>I({...U,country:J.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[t.jsx("option",{value:"",children:" "}),Wj.map(J=>t.jsx("option",{value:J.code,children:J.label},J.code))]})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:U.city,onChange:J=>I({...U,city:J.target.value}),placeholder:"City Name",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex gap-2",children:kF.map(J=>t.jsx("button",{type:"button",onClick:()=>I({...U,businessType:J.id}),className:`flex-1 py-3 px-4 rounded-lg border-2 text-center font-bold transition-all ${U.businessType===J.id?"border-brand-600 bg-brand-50 text-brand-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:J.label},J.id))})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  (WhatsApp) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:U.phone,onChange:J=>I({...U,phone:J.target.value}),placeholder:"+86 xxx xxxx xxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:U.carBrands.map(J=>{var K;return t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm font-bold",children:[((K=Pm.find(se=>se.id===J))==null?void 0:K.label)||J,t.jsx("button",{onClick:()=>Q(J,"intl"),className:"hover:text-red-600",children:t.jsx(St,{size:14})})]},J)})}),t.jsx("div",{className:"flex flex-wrap gap-2 p-4 bg-slate-50 rounded-xl border border-slate-200 max-h-48 overflow-y-auto",children:Pm.filter(J=>!U.carBrands.includes(J.id)).map(J=>t.jsx("button",{type:"button",onClick:()=>L(J.id,"intl"),className:"px-3 py-1.5 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-600 hover:bg-slate-100",children:J.label},J.id))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:x?"text":"password",value:U.password,onChange:J=>I({...U,password:J.target.value}),placeholder:"Password",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:v?"text":"password",value:U.confirmPassword,onChange:J=>I({...U,confirmPassword:J.target.value}),placeholder:"Confirm Password",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]})]}),l==="MARKETER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:k.fullName,onChange:J=>z({...k,fullName:J.target.value}),placeholder:" ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:k.phone,onChange:J=>z({...k,phone:J.target.value}),placeholder:"05xxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:_F.map(J=>t.jsxs("button",{type:"button",onClick:()=>W(J.id),className:`p-4 rounded-xl border-2 text-center transition-all ${k.marketingChannels.includes(J.id)?"border-purple-600 bg-purple-50 text-purple-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[t.jsx(Tu,{size:24,className:"mx-auto mb-2"}),t.jsx("span",{className:"text-sm font-bold block",children:J.label})]},J.id))})]}),k.marketingChannels.includes("other")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsx("input",{type:"text",value:k.otherChannel,onChange:J=>z({...k,otherChannel:J.target.value}),placeholder:"  ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:x?"text":"password",value:k.password,onChange:J=>z({...k,password:J.target.value}),placeholder:"6   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:v?"text":"password",value:k.confirmPassword,onChange:J=>z({...k,confirmPassword:J.target.value}),placeholder:"   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]})]}),l==="ADVERTISER"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  /  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:_.companyName,onChange:J=>q({..._,companyName:J.target.value}),placeholder:"   ",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:_.phone,onChange:J=>q({..._,phone:J.target.value}),placeholder:"05xxxxxxxx",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:Gj.map(J=>t.jsxs("button",{type:"button",onClick:()=>q({..._,adType:J.id}),className:`p-4 rounded-xl border-2 text-center transition-all ${_.adType===J.id?"border-amber-600 bg-amber-50 text-amber-700":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[t.jsx(pi,{size:28,className:"mx-auto mb-2"}),t.jsx("p",{className:"font-bold",children:J.label}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:J.description})]},J.id))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:_.duration,onChange:J=>q({..._,duration:parseInt(J.target.value)}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",children:[t.jsx("option",{value:0,children:" "}),Bce.map(J=>t.jsx("option",{value:J.days,children:J.label},J.days))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["   ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:_.startDate,onChange:J=>q({..._,startDate:J.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-lg",min:new Date().toISOString().split("T")[0]})]})]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:t.jsx("button",{onClick:V,disabled:d,className:"w-full py-4 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-200 flex items-center justify-center gap-2 disabled:opacity-50",children:d?t.jsx("span",{className:"animate-pulse",children:" ..."}):t.jsxs(t.Fragment,{children:[t.jsx(xi,{size:20,className:"rtl:rotate-180"})," "]})})})]})]})]})};var Hce=BM();function Vce(e=768){const[s,a]=T.useState(()=>typeof window<"u"?window.innerWidth<e:!1);return T.useEffect(()=>{if(typeof window>"u")return;const r=()=>{a(window.innerWidth<e)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[e]),s}const Xn=T.memo(({icon:e,label:s,active:a,onClick:r,badge:n,collapsed:i})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center ${i?"justify-center":"justify-between"} px-3 py-3.5 rounded-2xl mb-2 transition-all duration-300 group relative overflow-hidden ${a?"bg-gradient-to-l from-brand-600 to-brand-700 text-white font-bold shadow-lg shadow-brand-900/40 scale-[1.02]":"text-slate-300 hover:bg-white/10 hover:text-white font-medium hover:scale-[1.01]"}`,title:i?s:void 0,children:[a&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse opacity-50"}),t.jsxs("div",{className:`flex items-center relative z-10 ${i?"":"gap-3.5"}`,children:[t.jsx("span",{className:`shrink-0 transition-transform duration-300 ${a?"scale-110":"group-hover:scale-105"}`,children:e}),!i&&t.jsx("span",{className:"text-sm md:text-[15px] truncate tracking-wide",children:s})]}),n&&!i&&t.jsx("span",{className:"bg-gradient-to-r from-action-500 to-action-600 text-white text-[11px] font-bold px-2.5 py-1 rounded-full flex items-center justify-center min-w-[22px] shadow-md shadow-action-500/30 animate-bounce relative z-10",children:n===!0?"!":n}),n&&i&&t.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-gradient-to-r from-action-500 to-red-500 rounded-full animate-pulse shadow-lg shadow-action-500/50"}),i&&t.jsxs("div",{className:"absolute left-full ml-3 px-4 py-2.5 bg-slate-800/95 backdrop-blur-sm text-white text-sm font-bold rounded-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-2xl border border-slate-700/50",children:[s,n&&t.jsxs("span",{className:"mr-2 text-action-400 font-black",children:["(",n===!0?"!":n,")"]})]})]})),Gce=T.memo(({user:e,profile:s,view:a,onViewChange:r,onLogout:n,sidebarOpen:i,setSidebarOpen:l,t:o,tDynamic:d,remainingCredits:u,isRTL:h,isGuest:f,guestSettings:x,onGuestPageClick:g,collapsed:v,setCollapsed:b,hasPermission:y,isOwner:j})=>{const w=S=>j||e.role==="CUSTOMER"&&!e.parentId?!0:y?y(S):!1,A=h?"right-0":"left-0",O=h?i?"translate-x-0":"translate-x-full lg:translate-x-0":i?"translate-x-0":"-translate-x-full lg:translate-x-0",C=v?"w-20":"w-72",E=i?"pointer-events-auto":"pointer-events-none lg:pointer-events-auto";return t.jsxs("aside",{className:`fixed lg:static inset-y-0 ${A} ${C} bg-gradient-to-b from-slate-900 via-slate-900 to-brand-950 text-white transform transition-all duration-300 z-50 flex flex-col shadow-2xl lg:shadow-xl ${O} ${E}`,children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-brand-600/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-20 left-0 w-32 h-32 bg-action-500/10 rounded-full blur-3xl"})]}),t.jsx("div",{className:`relative p-4 ${v?"px-3":"p-5"} border-b border-white/10 flex items-center ${v?"justify-center":"justify-between"}`,children:v?t.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-brand-500/30 ring-2 ring-white/20",children:t.jsx(Hc,{size:24,strokeWidth:2.5})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-brand-500/30 ring-2 ring-white/20",children:t.jsx(Hc,{size:24,strokeWidth:2.5})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-display font-black text-xl tracking-wide text-white",children:o("siteName")}),t.jsx("p",{className:"text-[10px] text-slate-400 font-bold tracking-widest uppercase mt-0.5",children:"B2B Wholesale"})]})]}),t.jsx("button",{onClick:()=>l(!1),className:"lg:hidden text-slate-400 hover:text-white p-2.5 -m-2 rounded-xl hover:bg-white/10 transition-all duration-200","data-testid":"button-close-sidebar","aria-label":"Close sidebar",children:t.jsx(St,{size:22})})]})}),t.jsxs("button",{onClick:()=>b(!v),className:`hidden lg:flex absolute ${h?"-left-4":"-right-4"} top-20 w-8 h-8 bg-gradient-to-br from-brand-400 via-brand-500 to-brand-600 text-white rounded-full items-center justify-center transition-all duration-500 shadow-xl shadow-brand-500/50 z-50 ring-2 ring-white/30 hover:ring-white/50 hover:shadow-2xl hover:shadow-brand-400/60 hover:scale-110 active:scale-95 group`,"data-testid":"button-toggle-sidebar",title:v?o("sidebar.expand",""):o("sidebar.collapse",""),children:[t.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-white/0 via-white/30 to-white/0 animate-pulse opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx(ws,{size:18,className:`transition-transform duration-500 ease-in-out ${v?h?"rotate-180":"rotate-0":h?"rotate-0":"rotate-180"}`})]}),v?t.jsxs("div",{className:"p-3 flex flex-col items-center relative",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-brand-500/30 to-brand-600/20 flex items-center justify-center text-brand-300 border border-brand-400/30 mb-3 shadow-inner",children:t.jsx(bn,{size:20,strokeWidth:2})}),t.jsx("div",{className:"bg-gradient-to-r from-brand-600/20 to-brand-500/10 border border-brand-400/30 rounded-lg p-2 text-center w-full",children:t.jsx("p",{className:"text-lg font-black text-white tabular-nums",children:e.searchLimit===0?"":u})})]}):t.jsx("div",{className:"p-4 relative",children:t.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10 shadow-inner",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-brand-500/30 to-brand-600/20 flex items-center justify-center text-brand-300 border border-brand-400/30 shrink-0 shadow-inner",children:t.jsx(bn,{size:22,strokeWidth:2})}),t.jsxs("div",{className:"overflow-hidden flex-1",children:[t.jsx("p",{className:"font-bold text-[15px] truncate text-white",children:e.name}),t.jsx("p",{className:"text-[11px] text-slate-400 truncate font-mono mt-0.5 bg-slate-800/50 px-2 py-0.5 rounded-md w-fit",children:e.clientId})]})]}),s&&t.jsxs("div",{className:"text-xs text-slate-300 bg-slate-800/50 p-3 rounded-xl border border-white/5 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Xs,{size:14,className:"text-brand-400"}),t.jsx("p",{className:"truncate font-bold",children:s.companyName})]}),t.jsx("p",{className:"text-[10px] text-brand-400 mt-1 mr-5",children:s.city})]}),t.jsxs("div",{className:"bg-gradient-to-r from-brand-600/20 to-brand-500/10 border border-brand-400/30 rounded-xl p-3.5 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-pulse"}),t.jsx("p",{className:"text-[10px] text-brand-200 uppercase font-bold mb-1.5 tracking-wider relative z-10",children:o("sidebar.searchCredits")}),t.jsx("div",{className:"flex items-center justify-center gap-2 relative z-10",children:t.jsx("span",{className:"text-2xl font-black text-white tabular-nums",children:e.searchLimit===0?o("sidebar.unlimitedSearch"):u})})]})]})}),t.jsxs("nav",{className:`flex-1 overflow-y-auto ${v?"px-2":"px-4"} py-2 custom-scrollbar relative`,children:[!v&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:o("sidebar.mainMenu")}),t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),t.jsx(Xn,{icon:t.jsx(nE,{size:20}),label:d("sidebar.home",""),active:a==="HOME",onClick:()=>r("HOME"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(Xt,{size:20}),label:d("sidebar.orders"," "),active:a==="ORDERS",onClick:()=>f?g():r("ORDERS"),badge:e.hasUnreadOrders?!0:void 0,collapsed:v}),t.jsx(Xn,{icon:t.jsx(Ft,{size:20}),label:d("sidebar.quotes"," "),active:a==="QUOTE_REQUEST",onClick:()=>f?g():r("QUOTE_REQUEST"),badge:e.hasUnreadQuotes?!0:void 0,collapsed:v}),t.jsx(Xn,{icon:t.jsx(ja,{size:20}),label:d("sidebar.import","  "),active:a==="IMPORT_CHINA",onClick:()=>f?g():r("IMPORT_CHINA"),collapsed:v}),w("cust_use_trader_tools")&&t.jsx(Xn,{icon:t.jsx(sc,{size:20}),label:d("sidebar.traderTools"," "),active:a==="TRADER_TOOLS",onClick:()=>f?g():r("TRADER_TOOLS"),collapsed:v}),w("cust_use_trader_tools")&&t.jsx(Xn,{icon:t.jsx(os,{size:20}),label:d("sidebar.toolsHistory"," "),active:a==="TOOLS_HISTORY",onClick:()=>f?g():r("TOOLS_HISTORY"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(Xt,{size:20}),label:d("sidebar.productSearch"," "),active:a==="PRODUCT_SEARCH",onClick:()=>f?g():r("PRODUCT_SEARCH"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(Pr,{size:20}),label:d("sidebar.alternatives"," "),active:a==="ALTERNATIVES",onClick:()=>f?g():r("ALTERNATIVES"),collapsed:v}),t.jsx(Xn,{icon:t.jsx(xn,{size:20}),label:d("sidebar.history"," "),active:a==="HISTORY",onClick:()=>f?g():r("HISTORY"),collapsed:v}),!v&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mt-6 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:o("sidebar.management")}),t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),t.jsx(Xn,{icon:t.jsx(Xs,{size:20}),label:d("sidebar.organization"," "),active:a==="ORGANIZATION",onClick:()=>f?g():r("ORGANIZATION"),collapsed:v}),w("org_manage_team")&&t.jsx(Xn,{icon:t.jsx(Gt,{size:20}),label:d("sidebar.teamManagement"," "),active:a==="TEAM_MANAGEMENT",onClick:()=>f?g():r("TEAM_MANAGEMENT"),collapsed:v}),!v&&t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mt-6 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:o("sidebar.supportSection")}),t.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),t.jsx(Xn,{icon:t.jsx(yf,{size:20}),label:d("sidebar.support","  / "),active:a==="ABOUT",onClick:()=>f?g():r("ABOUT"),collapsed:v})]}),t.jsx("div",{className:`${v?"p-2":"p-4"} border-t border-white/10 relative`,children:t.jsxs("button",{onClick:n,className:`w-full flex items-center ${v?"justify-center":"gap-3"} px-4 py-3 rounded-xl text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all duration-300 group relative border border-transparent hover:border-red-500/30`,title:v?o("logout"):void 0,children:[t.jsx(iE,{size:20,className:"transition-transform duration-300 group-hover:scale-110"}),!v&&t.jsx("span",{className:"text-sm font-bold tracking-wide",children:o("logout")}),v&&t.jsx("div",{className:"absolute left-full ml-3 px-4 py-2.5 bg-slate-800/95 backdrop-blur-sm text-red-300 text-sm font-bold rounded-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-2xl border border-red-500/30",children:o("logout")})]})})]})});function Jo(e){if(!e)return"-";const s=new Date(e);if(isNaN(s.getTime()))return"-";const a=String(s.getDate()).padStart(2,"0"),r=String(s.getMonth()+1).padStart(2,"0"),n=s.getFullYear();return`${a}/${r}/${n}`}function Wce(e){if(!e)return"-";const s=new Date(e);if(isNaN(s.getTime()))return"-";let a=s.getHours();const r=String(s.getMinutes()).padStart(2,"0"),i=a>=12?"":"";return a=a%12,a===0&&(a=12),`${String(a).padStart(2,"0")}:${r} ${i}`}function hs(e){return e?`${Jo(e)} - ${Wce(e)}`:"-"}const cE=({user:e,customerType:s,onViewAll:a})=>{const[r,n]=T.useState([]),[i,l]=T.useState(!1),[o,d]=T.useState(0),u=T.useRef(null),{addToast:h}=Dt();T.useEffect(()=>{f();const A=setInterval(f,3e4),O=C=>{u.current&&!u.current.contains(C.target)&&l(!1)};return document.addEventListener("mousedown",O),()=>{clearInterval(A),document.removeEventListener("mousedown",O)}},[e.id,s]);const f=async()=>{try{const A=await xe.getNotificationsForUser(e.id),O=A.items,E=(await xe.getActiveCampaignsForUser(e.id,s)).filter(I=>I.displayType==="BELL"),S=JSON.parse(localStorage.getItem(`siniCar_bell_read_${e.id}`)||"[]"),D=E.map(I=>({id:`campaign-${I.id}`,userId:e.id,type:"MARKETING",title:I.title,message:I.message,createdAt:I.createdAt,isRead:S.includes(I.id),isCampaign:!0,campaignId:I.id,ctaUrl:I.ctaUrl,ctaLabel:I.ctaLabel})),M=[...O,...D];M.sort((I,k)=>new Date(k.createdAt).getTime()-new Date(I.createdAt).getTime()),n(M);const U=D.filter(I=>!I.isRead).length;d(A.unreadCount+U)}catch(A){console.error("Failed to load notifications",A)}},x=async()=>{if(l(!i),!i&&o>0)try{await xe.markNotificationsAsRead(e.id);const A=r.filter(O=>O.isCampaign&&!O.isRead&&O.campaignId).map(O=>O.campaignId);if(A.length>0){const O=JSON.parse(localStorage.getItem(`siniCar_bell_read_${e.id}`)||"[]"),C=[...new Set([...O,...A])];localStorage.setItem(`siniCar_bell_read_${e.id}`,JSON.stringify(C))}n(O=>O.map(C=>({...C,isRead:!0}))),d(0)}catch{console.error("Failed to mark read")}},g=async()=>{try{await xe.clearNotificationsForUser(e.id),n([]),d(0),h("   ","success")}catch(A){console.error("Failed to clear notifications",A),h("    ","error")}},v=async A=>{try{await xe.deleteNotification(e.id,A),n(O=>O.filter(C=>C.id!==A)),h("  ","success")}catch(O){console.error("Failed to delete notification",O)}},b=async(A,O)=>{try{await xe.dismissCampaignForUser(e.id,A),n(C=>C.filter(E=>E.id!==O)),h("  ","success")}catch(C){console.error("Failed to dismiss campaign",C)}},y=A=>{switch(A){case"ORDER_STATUS_CHANGED":return t.jsx(Xt,{size:16,className:"text-blue-500"});case"SEARCH_POINTS_ADDED":return t.jsx(Ft,{size:16,className:"text-green-500"});case"QUOTE_PROCESSED":return t.jsx(zn,{size:16,className:"text-purple-500"});case"SYSTEM":return t.jsx(Vc,{size:16,className:"text-amber-500"});case"ACCOUNT_UPDATE":return t.jsx(la,{size:16,className:"text-slate-500"});case"IMPORT_UPDATE":return t.jsx(Xt,{size:16,className:"text-orange-500"});case"GENERAL":return t.jsx(mi,{size:16,className:"text-blue-400"});case"MARKETING":return t.jsx(ya,{size:16,className:"text-pink-500"});default:return t.jsx(vr,{size:16,className:"text-slate-400"})}},j=A=>{switch(A){case"ORDER_STATUS_CHANGED":return"bg-blue-50 border-blue-100";case"SEARCH_POINTS_ADDED":return"bg-green-50 border-green-100";case"QUOTE_PROCESSED":return"bg-purple-50 border-purple-100";case"SYSTEM":return"bg-amber-50 border-amber-100";case"ACCOUNT_UPDATE":return"bg-slate-50 border-slate-200";case"IMPORT_UPDATE":return"bg-orange-50 border-orange-100";case"MARKETING":return"bg-pink-50 border-pink-100";default:return"bg-white border-slate-100"}},w=A=>{const O=new Date(A),E=new Date().getTime()-O.getTime(),S=Math.floor(E/6e4),D=Math.floor(S/60),M=Math.floor(D/24);return S<1?"":S<60?` ${S} `:D<24?` ${D} `:M<7?` ${M} `:hs(A).split("-")[1]};return t.jsxs("div",{className:"relative",ref:u,children:[t.jsxs("button",{onClick:x,className:"relative p-2 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl transition-all",title:"","data-testid":"button-notifications",children:[t.jsx(vr,{size:24}),o>0&&t.jsx("span",{className:"absolute top-0.5 right-0.5 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:o>9?"9+":o})]}),i&&t.jsxs("div",{className:"absolute left-0 mt-3 w-80 md:w-[400px] bg-white rounded-2xl shadow-2xl border border-slate-200 z-50 overflow-hidden animate-fade-in-up origin-top-left",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vr,{size:18,className:"text-brand-600"}),t.jsx("h3",{className:"font-bold text-slate-800 text-sm",children:" "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[r.length>0&&t.jsx("button",{onClick:g,className:"text-[10px] text-red-500 hover:text-red-600 font-bold px-2 py-1 rounded hover:bg-red-50 transition-colors","data-testid":"button-clear-all-notifications",children:" "}),t.jsx("span",{className:"bg-slate-100 text-slate-600 text-[10px] font-bold px-2 py-1 rounded-full",children:r.length})]})]}),t.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:r.length>0?t.jsx("div",{className:"divide-y divide-slate-50",children:r.map(A=>t.jsxs("div",{className:`p-4 hover:bg-slate-50 transition-colors flex gap-3 group ${A.isCampaign?"bg-gradient-to-l from-pink-50/50 to-transparent":A.isRead?"":"bg-blue-50/30"}`,"data-testid":`notification-item-${A.id}`,children:[t.jsx("div",{className:`mt-0.5 p-2 rounded-full border shadow-sm shrink-0 h-fit ${j(A.type)}`,children:y(A.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex justify-between items-start gap-2 mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"text-sm font-bold text-slate-800 leading-tight",children:A.title}),A.isCampaign&&t.jsx("span",{className:"text-[9px] bg-pink-100 text-pink-600 px-1.5 py-0.5 rounded font-bold",children:""})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[t.jsx("span",{className:"text-[10px] text-slate-400 font-medium whitespace-nowrap",children:w(A.createdAt)}),t.jsx("button",{onClick:O=>{O.stopPropagation(),A.isCampaign&&A.campaignId?b(A.campaignId,A.id):v(A.id)},className:"p-1 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all rounded hover:bg-red-50",title:"","data-testid":`button-delete-notification-${A.id}`,children:t.jsx(St,{size:12})})]})]}),t.jsx("p",{className:"text-xs text-slate-500 leading-relaxed line-clamp-2",children:A.message}),A.isCampaign&&A.ctaUrl&&A.ctaLabel&&t.jsx("a",{href:A.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-[11px] bg-pink-500 text-white px-3 py-1.5 rounded-lg font-bold hover:bg-pink-600 transition-colors","data-testid":`button-cta-${A.id}`,children:A.ctaLabel}),!A.isRead&&!A.isCampaign&&t.jsx("span",{className:"inline-block mt-1.5 text-[9px] bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded font-bold",children:""})]})]},A.id))}):t.jsxs("div",{className:"py-16 px-6 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(vr,{size:28,className:"text-slate-300"})}),t.jsx("p",{className:"text-sm font-bold text-slate-600 mb-1",children:"  "}),t.jsx("p",{className:"text-xs text-slate-400",children:"    "})]})}),t.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50",children:a?t.jsx("button",{onClick:()=>{l(!1),a()},className:"w-full text-center text-sm font-bold text-brand-600 hover:text-brand-700 transition-colors","data-testid":"button-view-all-notifications",children:"  "}):r.length>5&&t.jsxs("span",{className:"text-xs text-slate-500 text-center block",children:["  ",Math.min(r.length,20)," "]})})]})]})},Qce=T.memo(({startX:e,startY:s,endX:a,endY:r,onComplete:n})=>{const[i,l]=T.useState({x:e,y:s,scale:1,opacity:1});return T.useEffect(()=>{requestAnimationFrame(()=>{l({x:a,y:r,scale:.3,opacity:.5})});const o=setTimeout(n,800);return()=>clearTimeout(o)},[a,r,n]),t.jsx("div",{className:"fixed z-[9999] pointer-events-none",style:{left:i.x,top:i.y,transform:`translate(-50%, -50%) scale(${i.scale})`,opacity:i.opacity,transition:"all 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:t.jsx("div",{className:"w-10 h-10 bg-brand-600 rounded-full flex items-center justify-center shadow-lg shadow-brand-600/50",children:t.jsx($a,{size:18,className:"text-white"})})})}),Kce=T.memo(({cartCount:e,cartTotal:s,cart:a,onRemoveItem:r,onSubmitOrder:n,showDropdown:i,setShowDropdown:l,onCartIconMount:o,t:d,isRTL:u})=>{const h=T.useRef(null),f=T.useRef(null);return T.useEffect(()=>(o(h.current),()=>o(null)),[o]),T.useEffect(()=>{const x=g=>{f.current&&!f.current.contains(g.target)&&h.current&&!h.current.contains(g.target)&&l(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[l]),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{ref:h,onClick:()=>l(!i),className:`relative p-2.5 rounded-xl transition-all ${e>0?"bg-brand-600 text-white hover:bg-brand-700 shadow-md shadow-brand-600/30":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":"button-cart","aria-label":"Shopping Cart",children:[t.jsx($a,{size:20}),e>0&&t.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-sm animate-pulse",children:e})]}),i&&t.jsxs("div",{ref:f,className:`absolute top-full mt-2 w-80 bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden z-50 ${u?"left-0":"right-0"}`,children:[t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx($a,{size:18}),d("customerDashboard.cart"," "),t.jsx("span",{className:"bg-brand-600 text-white text-xs px-2 py-0.5 rounded-full",children:e})]})}),t.jsx("div",{className:"max-h-64 overflow-y-auto",children:a.length===0?t.jsxs("div",{className:"p-8 text-center text-slate-400",children:[t.jsx($a,{size:32,className:"mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:d("customerDashboard.emptyCart"," ")})]}):a.map(x=>t.jsx("div",{className:"p-3 border-b border-slate-100 hover:bg-slate-50 transition-colors",children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:x.name}),t.jsxs("p",{className:"text-xs text-slate-500",children:[x.quantity,"  ",x.price.toLocaleString()," ",d("customerDashboard.sar",".")]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-bold text-brand-600",children:(x.quantity*x.price).toLocaleString()}),t.jsx("button",{onClick:()=>r(x.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-remove-item-${x.id}`,children:t.jsx(Ct,{size:14})})]})]})},x.id))}),a.length>0&&t.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("span",{className:"text-sm text-slate-600",children:[d("customerDashboard.total",""),":"]}),t.jsxs("span",{className:"text-lg font-black text-slate-900",children:[s.toLocaleString()," ",d("customerDashboard.sar",".")]})]}),t.jsx("button",{onClick:n,className:"w-full py-3 bg-brand-600 hover:bg-brand-700 text-white font-bold rounded-xl transition-colors shadow-md shadow-brand-600/30","data-testid":"button-submit-order-dropdown",children:d("customerDashboard.confirmOrder"," ")})]})]})]})}),Jce=T.memo(({view:e,setSidebarOpen:s,user:a,profile:r,tDynamic:n,t:i,isRTL:l,cart:o,cartTotal:d,onRemoveItem:u,onSubmitOrder:h,showCartDropdown:f,setShowCartDropdown:x,onCartIconMount:g,onViewAllNotifications:v})=>t.jsxs("header",{className:"h-16 md:h-20 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-6 lg:px-8 flex-shrink-0 z-30 shadow-sm gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 min-w-0 flex-1",children:[t.jsx("button",{onClick:()=>s(!0),className:"lg:hidden text-slate-600 p-2 hover:bg-slate-100 rounded-lg shrink-0","data-testid":"button-open-sidebar","aria-label":"Open sidebar",children:t.jsx(xF,{size:22})}),t.jsxs("h2",{className:"text-base md:text-xl lg:text-2xl font-bold md:font-black text-slate-800 tracking-tight truncate",children:[e==="HOME"&&n("sidebar.home",""),e==="ORDERS"&&n("sidebar.orders"," "),e==="QUOTE_REQUEST"&&n("sidebar.quotes"," "),e==="IMPORT_CHINA"&&n("sidebar.import","  "),e==="TRADER_TOOLS"&&n("sidebar.traderTools"," "),e==="TOOLS_HISTORY"&&n("sidebar.toolsHistory"," "),e==="PRODUCT_SEARCH"&&n("sidebar.productSearch"," "),e==="ALTERNATIVES"&&n("sidebar.alternatives"," "),e==="ORGANIZATION"&&n("sidebar.organization"," "),e==="TEAM_MANAGEMENT"&&n("sidebar.teamManagement"," "),e==="HISTORY"&&n("sidebar.history"," "),e==="ABOUT"&&n("sidebar.support","  / "),e==="NOTIFICATIONS"&&n("sidebar.notifications","")]})]}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 shrink-0",children:[t.jsx(Dce,{}),(a==null?void 0:a.id)&&t.jsx(cE,{user:a,onViewAll:v}),t.jsx(Kce,{cartCount:o.length,cartTotal:d,cart:o,onRemoveItem:u,onSubmitOrder:h,showDropdown:f,setShowDropdown:x,onCartIconMount:g,t:i,isRTL:l})]})]}));T.memo(({icon:e,label:s,active:a,onClick:r,badge:n})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between px-4 py-3 rounded-xl mb-1.5 transition-all ${a?"bg-brand-800 text-white font-bold shadow-md":"text-brand-100 hover:bg-brand-800/50 hover:text-white font-medium"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e,t.jsx("span",{className:"text-sm md:text-[15px]",children:s})]}),n?t.jsx("span",{className:"bg-action-500 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center justify-center min-w-[20px]",children:n===!0?"!":n}):null]}));const o5=T.memo(({icon:e,title:s,desc:a})=>t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 shadow-sm flex items-start gap-4 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-3 bg-slate-50 text-slate-700 rounded-xl border border-slate-100 shrink-0",children:e}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm md:text-[15px] mb-1.5",children:s}),t.jsx("p",{className:"text-xs md:text-[13px] text-slate-500 leading-relaxed",children:a})]})]}));T.memo(({icon:e,title:s,desc:a,colorClass:r="bg-slate-50 text-brand-600",onClick:n})=>t.jsxs("div",{onClick:n,className:`bg-white p-5 sm:p-6 rounded-2xl border border-slate-200/80 shadow-sm flex flex-col gap-3 sm:gap-4 transition-all duration-300 group h-full ${n?"cursor-pointer hover:shadow-lg hover:border-brand-300 hover:-translate-y-1":"hover:shadow-md"}`,children:[t.jsx("div",{className:`w-11 h-11 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center shrink-0 transition-transform duration-300 group-hover:scale-110 ${r}`,children:e}),t.jsxs("div",{children:[t.jsx("h4",{className:`font-bold text-slate-800 text-base sm:text-lg mb-1.5 sm:mb-2 transition-colors ${n?"group-hover:text-brand-700":""}`,children:s}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed font-medium",children:a})]})]}));const Kx=T.memo(({icon:e,title:s,desc:a,colorClass:r,iconBgClass:n})=>t.jsxs("div",{className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 transition-all duration-300 hover:shadow-xl hover:border-brand-200 hover:-translate-y-1 overflow-hidden",children:[t.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${n} opacity-10 rounded-full -mr-8 -mt-8 transition-transform duration-500 group-hover:scale-150`}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:`w-14 h-14 sm:w-16 sm:h-16 rounded-2xl flex items-center justify-center mb-4 shadow-sm transition-all duration-300 group-hover:scale-105 ${r}`,children:e}),t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-2 group-hover:text-brand-700 transition-colors",children:s}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:a})]})]})),Yce=T.memo(()=>{const[e,s]=T.useState(null);if(T.useEffect(()=>{xe.getSettings().then(s)},[]),!e||!e.tickerEnabled)return null;const a=40-((e.tickerSpeed||5)-1)*3;return t.jsxs("div",{style:{backgroundColor:e.tickerBgColor||"#0f172a"},className:"w-full overflow-hidden py-3 relative z-50 shadow-sm border-b border-white/10",children:[t.jsx("style",{children:`
                @keyframes marquee {
                    0% { transform: translateX(100%); }
                    100% { transform: translateX(-100%); }
                }
                .ticker-content {
                    white-space: nowrap;
                    display: inline-block;
                    animation: marquee ${a}s linear infinite;
                    min-width: 100%;
                }
                .ticker-content:hover {
                    animation-play-state: paused;
                }
            `}),t.jsx("div",{className:"ticker-content px-4",children:t.jsx("span",{style:{color:e.tickerTextColor||"#f97316"},className:"font-bold text-sm md:text-base mx-4",children:e.tickerText})})]})}),Xce="modulepreload",Zce=function(e){return"/"+e},c5={},Tl=function(s,a,r){let n=Promise.resolve();if(a&&a.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),d=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=l(a.map(u=>{if(u=Zce(u),u in c5)return;c5[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":Xce,h||(x.as="script"),x.crossOrigin="",x.href=u,d&&x.setAttribute("nonce",d),document.head.appendChild(x),h)return new Promise((g,v)=>{x.addEventListener("load",g),x.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})},ls=({isOpen:e,onClose:s,title:a,children:r,maxWidth:n="max-w-lg",noPadding:i=!1})=>{const[l,o]=T.useState(!1),[d,u]=T.useState(!1);return T.useEffect(()=>{if(e){o(!0);const h=setTimeout(()=>u(!0),10);return()=>clearTimeout(h)}else{u(!1);const h=setTimeout(()=>o(!1),200);return()=>clearTimeout(h)}},[e]),l?t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[t.jsx("div",{className:`absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-200 ease-out ${d?"opacity-100":"opacity-0"}`,onClick:s}),t.jsxs("div",{className:`
          relative z-10 w-full ${n} bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]
          transform transition-all duration-200 ease-out
          ${d?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}
        `,onClick:h=>h.stopPropagation(),children:[t.jsx("button",{onClick:s,className:"absolute top-4 left-4 z-20 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500 hover:text-slate-700","data-testid":"button-modal-close",children:t.jsx(St,{size:18})}),a&&t.jsx("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-slate-100 flex-shrink-0",children:t.jsx("h3",{className:"text-xl font-bold text-slate-800",children:a})}),t.jsx("div",{className:`flex-1 overflow-y-auto ${i?"":"p-6"}`,children:r})]})]}):null},Jx=({status:e,type:s="ORDER"})=>{const a={[pt.PENDING]:"bg-amber-50 text-amber-700 border-amber-200",[pt.APPROVED]:"bg-blue-50 text-blue-700 border-blue-200",[pt.SHIPPED]:"bg-emerald-50 text-emerald-700 border-emerald-200",[pt.DELIVERED]:"bg-green-100 text-green-800 border-green-300",[pt.REJECTED]:"bg-red-50 text-red-700 border-red-200",[pt.CANCELLED]:"bg-gray-100 text-gray-500 border-gray-300",PENDING:"bg-yellow-50 text-yellow-700 border-yellow-200",NEW:"bg-blue-50 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-50 text-yellow-700 border-yellow-200",QUOTED:"bg-blue-50 text-blue-700 border-blue-200",PROCESSED:"bg-green-50 text-green-700 border-green-200",PARTIALLY_APPROVED:"bg-purple-100 text-purple-700 border-purple-200",MATCHED:"bg-green-50 text-green-700 border-green-200",NOT_FOUND:"bg-slate-50 text-slate-500 border-slate-200"},r={[pt.PENDING]:" ",[pt.APPROVED]:" ",[pt.SHIPPED]:" ",[pt.DELIVERED]:" ",[pt.REJECTED]:"",[pt.CANCELLED]:"",PENDING:" ",NEW:"",UNDER_REVIEW:" ",QUOTED:" ",PROCESSED:" ",PARTIALLY_APPROVED:" ",MATCHED:"  ",NOT_FOUND:" "};return t.jsxs("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold border flex items-center gap-1.5 w-fit ${a[e]||"bg-gray-50 text-gray-700 border-gray-200"}`,children:[e===pt.PENDING&&t.jsx(os,{size:14}),(e===pt.APPROVED||e===pt.DELIVERED||e==="PROCESSED"||e==="QUOTED"||e==="MATCHED"||e==="PARTIALLY_APPROVED")&&t.jsx(Ut,{size:14}),e===pt.SHIPPED&&t.jsx(Xt,{size:14}),(e===pt.REJECTED||e==="NOT_FOUND")&&t.jsx(Bp,{size:14}),e===pt.CANCELLED&&t.jsx(Zs,{size:14}),(e==="NEW"||e==="UNDER_REVIEW"||e==="PENDING")&&t.jsx(os,{size:14}),r[e]||e]})},ede=({orders:e,quoteRequests:s=[]})=>{var Q;const[a,r]=T.useState("ORDERS"),[n,i]=T.useState(e),[l,o]=T.useState(""),[d,u]=T.useState("ALL"),[h,f]=T.useState(1),x=20,[g,v]=T.useState(null),[b,y]=T.useState(null),[j,w]=T.useState(null),{addToast:A}=Dt();T.useEffect(()=>{i(e)},[e]),T.useEffect(()=>{f(1)},[l,d,a]);const O=T.useMemo(()=>{let X=[...n];if(l){const W=l.toLowerCase();X=X.filter(ee=>ee.id.toLowerCase().includes(W))}return d!=="ALL"&&(X=X.filter(W=>W.status===d)),X.sort((W,ee)=>new Date(ee.date).getTime()-new Date(W.date).getTime())},[n,l,d]),C=T.useMemo(()=>[...s].sort((X,W)=>new Date(W.date).getTime()-new Date(X.date).getTime()),[s]),E=T.useMemo(()=>{const X=(h-1)*x;return a==="ORDERS"?O.slice(X,X+x):C.slice(X,X+x)},[a,O,C,h]),S=T.useMemo(()=>{const X=a==="ORDERS"?O.length:C.length;return Math.ceil(X/x)},[a,O.length,C.length]),D=T.useMemo(()=>({total:n.length,pending:n.filter(X=>X.status===pt.PENDING).length,approved:n.filter(X=>X.status===pt.APPROVED||X.status===pt.SHIPPED).length}),[n]),M=X=>{X.status==="NEW"||X.status==="UNDER_REVIEW"?A("        ","info"):w(X)},U=async X=>{if(!(X.status===pt.PENDING||X.status===pt.APPROVED)){X.status===pt.SHIPPED||X.status===pt.DELIVERED?A("            .","error"):A("       .","error");return}if(window.confirm("            ."))try{await xe.cancelOrder(X.id,"CUSTOMER");const ee=n.map(V=>V.id===X.id?{...V,status:pt.CANCELLED,cancelledBy:"CUSTOMER",cancelledAt:new Date().toISOString()}:V);i(ee),b&&b.id===X.id&&y({...b,status:pt.CANCELLED,cancelledBy:"CUSTOMER",cancelledAt:new Date().toISOString()}),A("   ","success")}catch(ee){ee.message==="CANNOT_CANCEL_SENSITIVE_STATUS"?A("        .","error"):A(ee.message||"   ","error")}},I=async X=>{if(X.status!==pt.CANCELLED&&X.status!==pt.REJECTED){A("      .   .","error");return}if(window.confirm("         "))try{await xe.deleteOrder(X.id);const W=n.filter(ee=>ee.id!==X.id);i(W),(b==null?void 0:b.id)===X.id&&y(null),A("   ","success")}catch{A("   ","error")}},k=async(X,W)=>{X.stopPropagation();try{const{default:ee}=await Tl(async()=>{const{default:J}=await import("./jspdf.es.min-Dggpw9z3.js").then(K=>K.j);return{default:J}},[]),{default:V}=await Tl(async()=>{const{default:J}=await import("./jspdf.plugin.autotable-Ctn9oCMc.js");return{default:J}},[]),P=new ee;P.setFontSize(18),P.text(`Order Invoice #${W.id}`,14,20),P.setFontSize(10),P.text(`Date: ${Jo(W.date)}`,14,30),P.text(`Total Amount: ${W.totalAmount.toLocaleString()} SAR`,14,35),P.text(`Status: ${W.status}`,14,40);const Y=W.items.map(J=>[J.partNumber,J.name,J.quantity,J.price,(J.price*J.quantity).toFixed(2)]);V(P,{startY:45,head:[["Part No","Item Name","Qty","Unit Price","Total"]],body:Y,foot:[["","","","Grand Total",`${W.totalAmount.toLocaleString()} SAR`]]}),P.save(`order-${W.id}.pdf`),A("   ","success")}catch(ee){console.error(ee),A("    PDF","error")}},z=(X,W)=>{X.stopPropagation();const ee=window.open("","_blank","width=800,height=600");if(ee){const V=W.items.map(Y=>`
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${Y.partNumber}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd;">${Y.name}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: center;">${Y.quantity}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: center;">${Y.price}</td>
                <td style="padding: 8px; border-bottom: 1px solid #ddd; text-align: center;">${(Y.price*Y.quantity).toLocaleString()}</td>
            </tr>
        `).join(""),P=`
            <html dir="rtl" lang="ar">
            <head>
                <title>  #${W.id}</title>
                <style>
                    body { font-family: 'Arial', sans-serif; padding: 20px; }
                    .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 20px; }
                    .details { margin-bottom: 20px; }
                    table { w-full; width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
                    th { background-color: #f8f9fa; padding: 10px; border-bottom: 2px solid #ddd; text-align: right; }
                    .totals { margin-top: 20px; text-align: left; font-size: 16px; font-weight: bold; }
                    @media print {
                        button { display: none; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Sini Car Wholesale</h1>
                    <h2>   #${W.id}</h2>
                </div>
                <div class="details">
                    <p><strong>:</strong> ${hs(W.date)}</p>
                    <p><strong>:</strong> ${W.status}</p>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th> </th>
                            <th> </th>
                            <th style="text-align: center;"></th>
                            <th style="text-align: center;"> </th>
                            <th style="text-align: center;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        ${V}
                    </tbody>
                </table>
                <div class="totals">
                    <p> ( ): ${W.totalAmount.toLocaleString()} .</p>
                </div>
                <script>
                    window.onload = function() { window.print(); }
                <\/script>
            </body>
            </html>
        `;ee.document.write(P),ee.document.close()}},_=X=>{z({stopPropagation:()=>{}},X)},q=async X=>{const W=X.items.filter(ee=>ee.status==="REJECTED"||ee.status==="NOT_FOUND").map(ee=>({"Part Number":ee.partNumber,"Part Name":ee.partName,Quantity:ee.requestedQty,Reason:ee.notes||"N/A"}));if(W.length===0){A("      ","info");return}try{const{utils:ee,writeFile:V}=await Tl(async()=>{const{utils:J,writeFile:K}=await Promise.resolve().then(()=>Qm);return{utils:J,writeFile:K}},void 0),P=ee.json_to_sheet(W),Y=ee.book_new();ee.book_append_sheet(Y,P,"Rejected Items"),V(Y,`Quote_${X.id}_NotFound.xlsx`),A("   Excel  ","success")}catch{A("    ","error")}},L=()=>S<=1?null:t.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[t.jsx("button",{disabled:h===1,onClick:()=>f(X=>Math.max(1,X-1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[" ",h,"  ",S]}),t.jsx("button",{disabled:h===S,onClick:()=>f(X=>Math.min(S,X+1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ws,{size:18})})]});return t.jsxs("div",{className:"w-full animate-fade-in pb-20 space-y-8",children:[t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden min-h-[600px]",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex flex-col md:flex-row justify-between items-center gap-6 bg-slate-50/50",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[a==="ORDERS"?t.jsx(Lt,{className:"text-brand-600",size:28}):t.jsx(os,{className:"text-brand-600",size:28}),a==="ORDERS"?"  ":"  "]}),t.jsx("p",{className:"text-sm font-medium text-slate-500 mt-2",children:a==="ORDERS"?"     .":"      ."})]}),t.jsxs("div",{className:"bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm flex items-center",children:[t.jsxs("button",{onClick:()=>r("ORDERS"),className:`px-6 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${a==="ORDERS"?"bg-slate-800 text-white shadow-md":"text-slate-500 hover:text-slate-800 hover:bg-slate-50"}`,children:[t.jsx(Pr,{size:18}),"  "]}),t.jsxs("button",{onClick:()=>r("QUOTES"),className:`px-6 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${a==="QUOTES"?"bg-brand-600 text-white shadow-md":"text-slate-500 hover:text-brand-600 hover:bg-brand-50"}`,children:[t.jsx(Lt,{size:18}),"  "]})]})]}),t.jsxs("div",{className:"p-8",children:[a==="ORDERS"&&t.jsxs("div",{className:"space-y-8 animate-slide-up",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-5 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-4 bg-slate-100 text-slate-600 rounded-full",children:t.jsx(Pr,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:" "}),t.jsx("p",{className:"text-3xl font-black text-slate-800 mt-1",children:D.total})]})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-5 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-4 bg-amber-50 text-amber-600 rounded-full",children:t.jsx(os,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:" "}),t.jsx("p",{className:"text-3xl font-black text-slate-800 mt-1",children:D.pending})]})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-center gap-5 hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"p-4 bg-emerald-50 text-emerald-600 rounded-full",children:t.jsx(Ut,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider",children:" "}),t.jsx("p",{className:"text-3xl font-black text-slate-800 mt-1",children:D.approved})]})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("span",{className:"text-sm font-bold text-slate-500 ml-2 flex items-center gap-2",children:[t.jsx(tc,{size:16})," :"]}),["ALL",pt.PENDING,pt.APPROVED,pt.SHIPPED,pt.CANCELLED].map(X=>t.jsx("button",{onClick:()=>u(X),className:`px-5 py-2 rounded-full text-xs font-bold border transition-colors ${d===X?"bg-brand-600 text-white border-brand-600":"bg-white text-slate-500 border-slate-200 hover:border-brand-300 hover:text-brand-600"}`,children:X==="ALL"?"":X===pt.CANCELLED?"":X},X))]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-visible",children:t.jsxs("table",{className:"w-full text-sm text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:E.length>0?E.map((X,W)=>t.jsxs("tr",{className:`hover:bg-blue-50/50 transition-colors group ${W%2===0?"bg-white":"bg-slate-50/30"}`,onClick:()=>y(X),children:[t.jsx("td",{className:"p-5 font-mono font-bold text-brand-700 text-base",children:X.id}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:hs(X.date)}),t.jsxs("td",{className:"p-5 font-black text-slate-900",children:[X.totalAmount.toLocaleString()," ."]}),t.jsx("td",{className:"p-5",children:t.jsx(Jx,{status:X.status})}),t.jsxs("td",{className:"p-5 relative",onClick:ee=>ee.stopPropagation(),children:[t.jsxs("button",{className:"text-slate-400 hover:text-brand-600 p-2 rounded-full hover:bg-slate-100 transition-colors flex items-center gap-1 text-xs font-bold",onMouseEnter:()=>v(X.id),onMouseLeave:()=>v(null),onClick:()=>v(g===X.id?null:X.id),children:[t.jsx(fs,{size:18})," "]}),g===X.id&&t.jsxs("div",{className:"absolute z-50 top-full mt-2 -right-4 w-72 md:w-80 rounded-xl bg-white shadow-xl border border-slate-200 p-4 text-xs animate-fade-in pointer-events-none md:pointer-events-auto",children:[t.jsx("div",{className:"absolute top-0 right-8 -mt-2 w-4 h-4 bg-white border-t border-r border-slate-200 transform -rotate-45"}),t.jsxs("h4",{className:"font-bold text-slate-800 mb-2 border-b border-slate-100 pb-2",children:["  (",X.items.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:X.items.map((ee,V)=>t.jsxs("div",{className:"flex justify-between items-start gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"block font-bold text-slate-700 truncate",children:ee.name}),t.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:ee.partNumber})]}),t.jsxs("div",{className:"bg-slate-100 px-2 py-0.5 rounded text-[10px] font-bold",children:["x",ee.quantity]})]},V))})]})]}),t.jsx("td",{className:"p-5 text-center",onClick:ee=>ee.stopPropagation(),children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:ee=>z(ee,X),className:"p-2 text-slate-400 hover:text-slate-700 hover:bg-slate-200 rounded-lg transition-colors",title:"",children:t.jsx(Wc,{size:18})}),t.jsx("button",{onClick:ee=>k(ee,X),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" PDF",children:t.jsx(Lt,{size:18})}),X.status===pt.PENDING||X.status===pt.APPROVED||X.status===pt.SHIPPED||X.status===pt.DELIVERED?t.jsx("div",{className:"relative group/cancel",children:t.jsx("button",{onClick:()=>U(X),disabled:X.status===pt.SHIPPED||X.status===pt.DELIVERED,className:`p-2 rounded-lg transition-colors ${X.status===pt.PENDING||X.status===pt.APPROVED?"text-slate-400 hover:text-red-600 hover:bg-red-50":"text-slate-200 cursor-not-allowed"}`,title:X.status===pt.SHIPPED?"     ":" ",children:t.jsx(Zs,{size:18})})}):t.jsx("button",{onClick:()=>I(X),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"  ",children:t.jsx(Ct,{size:18})})]})})]},X.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-16 text-center text-slate-400 font-bold",children:"   "})})})]})}),t.jsx(L,{})]}),a==="QUOTES"&&t.jsxs("div",{className:"space-y-8 animate-slide-up",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-6 flex items-start gap-4",children:[t.jsx("div",{className:"bg-white p-3 rounded-full text-brand-600 shadow-sm shrink-0",children:t.jsx(Lt,{size:24})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-brand-900 text-base",children:"   "}),t.jsxs("p",{className:"text-sm font-medium text-brand-700 mt-2 leading-relaxed",children:["   Excel       .    ",t.jsx("span",{className:"font-bold mx-1 px-2 py-0.5 bg-green-100 text-green-700 rounded-md",children:" "}),"       ."]})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:E.length>0?E.map((X,W)=>t.jsxs("tr",{className:`hover:bg-blue-50/50 transition-colors cursor-pointer group ${W%2===0?"bg-white":"bg-slate-50/30"}`,onClick:()=>M(X),children:[t.jsx("td",{className:"p-5 font-mono font-bold text-brand-700 text-base",children:X.id}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:hs(X.date)}),t.jsx("td",{className:"p-5 font-bold text-slate-800",children:X.items.length}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:X.priceType==="OEM"?" ":X.priceType==="AFTERMARKET"?" ":""}),t.jsx("td",{className:"p-5",children:t.jsx(Jx,{status:X.status,type:"QUOTE"})}),t.jsx("td",{className:"p-5 text-center",children:X.status==="NEW"||X.status==="UNDER_REVIEW"?t.jsx("span",{className:"text-xs font-bold text-slate-400 italic",children:" "}):t.jsxs("button",{className:"text-brand-600 hover:text-brand-800 font-bold text-xs flex items-center justify-center gap-1.5 mx-auto px-3 py-1.5 bg-brand-50 rounded-lg hover:bg-brand-100 transition-colors",children:[t.jsx(cr,{size:14}),"  "]})})]},X.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-16 text-center text-slate-400 font-bold",children:"    "})})})]})}),t.jsx(L,{})]})]})]}),t.jsx(ls,{isOpen:!!b,onClose:()=>y(null),title:b?`  #${b.id}`:"",maxWidth:"max-w-2xl",children:b&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-5 rounded-2xl border border-slate-200",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:" "}),t.jsx("div",{children:t.jsx(Jx,{status:b.status})}),b.status===pt.CANCELLED&&b.cancelledBy&&t.jsxs("p",{className:"text-xs text-red-500 mt-1 font-bold",children:[": ",b.cancelledBy==="CUSTOMER"?"":""]})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:""}),t.jsxs("p",{className:"text-2xl font-black text-slate-900",children:[b.totalAmount.toLocaleString()," ."]})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2 text-lg",children:[t.jsx(Xt,{size:20,className:"text-brand-500"}),"  (",b.items.length,")"]}),t.jsx("div",{className:"border border-slate-200 rounded-2xl overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:b.items.map((X,W)=>t.jsxs("tr",{children:[t.jsxs("td",{className:"p-4",children:[t.jsx("p",{className:"font-bold text-slate-800 text-base",children:X.name}),t.jsx("p",{className:"font-mono text-xs text-slate-400 font-bold mt-0.5",children:X.partNumber})]}),t.jsx("td",{className:"p-4 text-center font-bold text-base",children:X.quantity}),t.jsx("td",{className:"p-4 text-center text-slate-600 font-medium",children:X.price}),t.jsx("td",{className:"p-4 text-center font-bold text-brand-600 text-base",children:(X.price*X.quantity).toLocaleString()})]},W))})]})})]}),t.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-slate-100",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>_(b),className:"px-5 py-2.5 bg-slate-800 text-white rounded-xl font-bold hover:bg-slate-900 flex items-center gap-2 text-sm shadow-md transition-all",children:[t.jsx(Wc,{size:18})," "]}),(b.status===pt.PENDING||b.status===pt.APPROVED)&&t.jsxs("button",{onClick:()=>{b&&U(b)},className:"px-5 py-2.5 bg-red-50 text-red-600 border border-red-100 rounded-xl font-bold hover:bg-red-100 flex items-center gap-2 text-sm transition-all",children:[t.jsx(Zs,{size:18}),"  "]}),(b.status===pt.CANCELLED||b.status===pt.REJECTED)&&t.jsxs("button",{onClick:()=>{b&&I(b)},className:"px-5 py-2.5 bg-slate-50 text-slate-600 border border-slate-200 rounded-xl font-bold hover:bg-slate-100 flex items-center gap-2 text-sm transition-all",children:[t.jsx(Ct,{size:18})," "]})]}),t.jsx("button",{onClick:()=>y(null),className:"px-6 py-2.5 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:""})]})]})}),t.jsx(ls,{isOpen:!!j,onClose:()=>w(null),title:j?`   #${j.id}`:"",maxWidth:"max-w-3xl",children:j&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 bg-slate-50 p-5 rounded-2xl border border-slate-200 text-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:Jo(j.date)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:j.priceType})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:j.items.length})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-1",children:"  "}),t.jsxs("p",{className:"font-black text-brand-600 text-lg",children:[((Q=j.totalQuotedAmount)==null?void 0:Q.toLocaleString())||0," ."]})]})]}),t.jsx("div",{className:"border border-slate-200 rounded-2xl overflow-hidden max-h-[400px] overflow-y-auto custom-scrollbar shadow-inner",children:t.jsxs("table",{className:"w-full text-sm text-right relative",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200 sticky top-0 z-10",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:" "}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""}),t.jsx("th",{className:"p-4 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:j.items.map((X,W)=>t.jsxs("tr",{className:X.status==="NOT_FOUND"||X.status==="REJECTED"?"bg-red-50/30":"bg-white",children:[t.jsx("td",{className:"p-4 font-mono text-slate-600 font-bold",children:X.partNumber}),t.jsxs("td",{className:"p-4",children:[t.jsx("span",{className:"font-bold text-slate-800 block text-base",children:X.matchedProductName||X.partName}),X.notes&&t.jsx("span",{className:"text-xs text-red-500 font-bold block mt-1 bg-red-50 px-2 py-0.5 rounded w-fit",children:X.notes})]}),t.jsx("td",{className:"p-4 text-center font-bold text-base",children:X.requestedQty}),t.jsx("td",{className:"p-4 text-center font-bold text-brand-600 text-base",children:X.matchedPrice?X.matchedPrice.toLocaleString():"-"}),t.jsx("td",{className:"p-4 text-center",children:t.jsx(Jx,{status:X.status||"PENDING"})})]},W))})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 pt-6 border-t border-slate-100",children:[t.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[t.jsxs("button",{onClick:()=>{const X=window.open("","_blank");X==null||X.document.write("<h1>         </h1>")},className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-brand-600 text-white px-5 py-3 rounded-xl font-bold hover:bg-brand-700 shadow-md transition-colors text-sm opacity-50 cursor-not-allowed",title:"       ",children:[t.jsx(cr,{size:18}),"    (PDF)"]}),j.items.some(X=>X.status==="NOT_FOUND"||X.status==="REJECTED")&&t.jsxs("button",{onClick:()=>q(j),className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 py-2.5 px-5 rounded-xl text-xs font-bold transition-colors",children:[t.jsx(cr,{size:16}),"    (Excel)"]})]}),t.jsx("button",{onClick:()=>w(null),className:"text-slate-500 font-bold hover:text-slate-800 transition-colors px-4",children:" "})]})]})})]})},tde=({user:e,onSuccess:s})=>{var X,W;const[a,r]=T.useState(null),[n,i]=T.useState(null),[l,o]=T.useState([]),[d,u]=T.useState(0),[h,f]=T.useState(!1),[x,g]=T.useState(!1),[v,b]=T.useState([]),[y,j]=T.useState(1),w=5,A=T.useRef(null),[O,C]=T.useState(null),E=T.useRef(null),{addToast:S}=Dt();T.useEffect(()=>{D()},[x]);const D=async()=>{const ee=await xe.getAllQuoteRequests();b(ee.filter(V=>V.userId===e.id).reverse())},M=T.useMemo(()=>{const ee=(y-1)*w;return v.slice(ee,ee+w)},[v,y]),U=Math.ceil(v.length/w),I=async()=>{try{const{utils:ee,writeFile:V}=await Tl(async()=>{const{utils:K,writeFile:se}=await Promise.resolve().then(()=>Qm);return{utils:K,writeFile:se}},void 0),P=ee.book_new(),Y=[["PartNumber","PartName","Quantity"],["CN-102030"," ",10],["MG-998877","   ",5],["GL-COOL-01"," ",1]],J=ee.aoa_to_sheet(Y);ee.book_append_sheet(P,J,"Template"),V(P,"SiniCar_Quote_Template.xlsx")}catch{S("    ","error")}},k=ee=>{if(!ee||ee.length<3)return!1;const V=ee.map(K=>String(K).toLowerCase()),P=V.some(K=>K.includes("number")||K.includes("num")||K.includes("part")||K.includes("")),Y=V.some(K=>K.includes("name")||K.includes("desc")||K.includes("")||K.includes("")),J=V.some(K=>K.includes("qty")||K.includes("quantity")||K.includes("count")||K.includes("")||K.includes(""));return P&&Y&&J},z=async ee=>{var P;const V=(P=ee.target.files)==null?void 0:P[0];if(V){if(!a){S("       ","error");return}i(V),f(!0),u(10);try{const{read:Y,utils:J}=await Tl(async()=>{const{read:ne,utils:de}=await Promise.resolve().then(()=>Qm);return{read:ne,utils:de}},void 0),K=await V.arrayBuffer(),se=Y(K),G=se.Sheets[se.SheetNames[0]],te=J.sheet_to_json(G,{header:1});if(te.length<2)throw new Error(" ");const Z=te[0];if(!k(Z))throw new Error("     :     ");u(40);const ue=[],re=Z.map(ne=>String(ne).toLowerCase()),H=re.findIndex(ne=>ne.includes("number")||ne.includes("num")||ne.includes("part")||ne.includes("")),pe=re.findIndex(ne=>ne.includes("name")||ne.includes("desc")||ne.includes("")||ne.includes("")),B=re.findIndex(ne=>ne.includes("qty")||ne.includes("quantity")||ne.includes("count")||ne.includes(""));for(let ne=1;ne<te.length;ne++){const de=te[ne];de&&de[H]&&ue.push({partNumber:String(de[H]).trim(),partName:String(de[pe]||"Unknown").trim(),requestedQty:Number(de[B])||1})}if(ue.length===0)throw new Error("     ");let oe=40;const fe=setInterval(()=>{oe+=5,u(oe),oe>=90&&clearInterval(fe)},50);await new Promise(ne=>setTimeout(ne,500)),clearInterval(fe),u(100),o(ue),await _(ue)}catch(Y){S(Y.message||"    ","error"),i(null),f(!1),u(0)}}},_=async ee=>{var V;try{const P=(V=(await xe.getAllUsers()).find(Y=>Y.user.id===e.id))==null?void 0:V.profile;await xe.createQuoteRequest({userId:e.id,userName:e.name,companyName:(P==null?void 0:P.companyName)||"Unknown",items:ee,priceType:a}),g(!0),S("    ","success")}catch{S("   ","error"),f(!1)}},q=()=>{i(null),o([]),f(!1),g(!1),u(0),r(null)},L=async ee=>{C(ee),setTimeout(async()=>{if(A.current)try{const{default:V}=await Tl(async()=>{const{default:te}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:te}},[]),{default:P}=await Tl(async()=>{const{default:te}=await import("./jspdf.es.min-Dggpw9z3.js").then(Z=>Z.j);return{default:te}},[]),Y=await V(A.current,{scale:2,useCORS:!0}),J=Y.toDataURL("image/png"),K=new P("p","mm","a4"),se=K.internal.pageSize.getWidth(),G=Y.height*se/Y.width;K.addImage(J,"PNG",0,0,se,G),K.save(`Quote_${ee.id}_Matched.pdf`),S("    ","success")}catch(V){console.error(V),S("     PDF","error")}finally{C(null)}},100)},Q=async ee=>{const V=ee.items.filter(P=>P.approvalStatus==="MISSING"||P.approvalStatus==="REJECTED"||P.status==="NOT_FOUND"||P.status==="REJECTED").map(P=>({"Part Number":P.partNumber,"Part Name":P.partName,Quantity:P.requestedQty,Reason:P.adminNote||P.notes||"   "}));if(V.length===0){S("    ","info");return}try{const{utils:P,writeFile:Y}=await Tl(async()=>{const{utils:se,writeFile:G}=await Promise.resolve().then(()=>Qm);return{utils:se,writeFile:G}},void 0),J=P.json_to_sheet(V),K=P.book_new();P.book_append_sheet(K,J,"Missing Items"),Y(K,`Quote_${ee.id}_Missing.xlsx`)}catch{S("    ","error")}};return t.jsxs("div",{className:"w-full animate-fade-in py-8 space-y-10",children:[x?t.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-green-100 p-16 text-center animate-fade-in relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-green-500"}),t.jsx("div",{className:"w-24 h-24 bg-green-50 rounded-full flex items-center justify-center text-green-500 mx-auto mb-8 shadow-sm border border-green-100 animate-bounce",children:t.jsx(Ut,{size:48})}),t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4",children:"   "}),t.jsx("p",{className:"text-slate-500 font-medium text-lg max-w-xl mx-auto mb-10",children:"         .    ."}),t.jsxs("button",{onClick:q,className:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-10 py-4 rounded-xl font-bold transition-colors flex items-center gap-3 mx-auto text-lg",children:[t.jsx(el,{size:20}),"   "]})]}):t.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 overflow-hidden relative",children:[t.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-10 text-white",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black mb-3",children:"   (Bulk Request)"}),t.jsx("p",{className:"text-slate-200 text-lg font-medium",children:"    Excel   ."})]}),t.jsxs("button",{onClick:I,className:"bg-white/10 hover:bg-white/20 text-white px-5 py-3 rounded-xl text-sm font-bold flex items-center gap-2 transition-all backdrop-blur-sm",children:[t.jsx(cr,{size:18}),"  Excel"]})]})}),t.jsxs("div",{className:"p-10",children:[t.jsxs("div",{className:"mb-10",children:[t.jsxs("label",{className:"block text-base font-bold text-slate-700 mb-6 flex items-center gap-3",children:[t.jsx("span",{className:"w-8 h-8 rounded-full bg-slate-900 text-white flex items-center justify-center text-sm font-bold",children:"1"}),"    :"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("button",{onClick:()=>r("OEM"),disabled:h,className:`p-8 rounded-2xl border-2 transition-all text-right group ${a==="OEM"?"border-brand-600 bg-brand-50 shadow-md ring-2 ring-brand-200":"border-slate-100 hover:border-slate-300 bg-white"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx(Ln,{className:`w-10 h-10 ${a==="OEM"?"text-brand-600":"text-slate-300"}`}),a==="OEM"&&t.jsx(Ut,{size:24,className:"text-brand-600"})]}),t.jsx("h3",{className:`font-bold text-xl mb-2 ${a==="OEM"?"text-brand-800":"text-slate-700"}`,children:"  (OEM)"}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"      ."})]}),t.jsxs("button",{onClick:()=>r("AFTERMARKET"),disabled:h,className:`p-8 rounded-2xl border-2 transition-all text-right group ${a==="AFTERMARKET"?"border-brand-600 bg-brand-50 shadow-md ring-2 ring-brand-200":"border-slate-100 hover:border-slate-300 bg-white"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx(bse,{className:`w-10 h-10 ${a==="AFTERMARKET"?"text-brand-600":"text-slate-300"}`}),a==="AFTERMARKET"&&t.jsx(Ut,{size:24,className:"text-brand-600"})]}),t.jsx("h3",{className:`font-bold text-xl mb-2 ${a==="AFTERMARKET"?"text-brand-800":"text-slate-700"}`,children:" "}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"     ."})]}),t.jsxs("button",{onClick:()=>r("BOTH"),disabled:h,className:`p-8 rounded-2xl border-2 transition-all text-right group ${a==="BOTH"?"border-brand-600 bg-brand-50 shadow-md ring-2 ring-brand-200":"border-slate-100 hover:border-slate-300 bg-white"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx(Pr,{className:`w-10 h-10 ${a==="BOTH"?"text-brand-600":"text-slate-300"}`}),a==="BOTH"&&t.jsx(Ut,{size:24,className:"text-brand-600"})]}),t.jsx("h3",{className:`font-bold text-xl mb-2 ${a==="BOTH"?"text-brand-800":"text-slate-700"}`,children:" ( )"}),t.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"       ."})]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block text-base font-bold text-slate-700 mb-6 flex items-center gap-3",children:[t.jsx("span",{className:"w-8 h-8 rounded-full bg-slate-900 text-white flex items-center justify-center text-sm font-bold",children:"2"}),"  :"]}),h?t.jsx("div",{className:"border-2 border-slate-100 rounded-3xl p-16 text-center bg-slate-50/50",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 mb-2",children:[t.jsx("span",{children:" ..."}),t.jsxs("span",{children:[d,"%"]})]}),t.jsx("div",{className:"h-4 bg-slate-200 rounded-full overflow-hidden mb-8",children:t.jsx("div",{className:"h-full bg-brand-600 rounded-full transition-all duration-300 ease-out",style:{width:`${d}%`}})}),t.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[t.jsx(as,{className:"animate-spin text-brand-600",size:40}),t.jsx("p",{className:"text-slate-700 font-bold text-lg",children:"   ..."})]})]})}):t.jsxs("div",{onClick:()=>{var ee;return a?(ee=E.current)==null?void 0:ee.click():S("    ","error")},className:`border-2 border-dashed rounded-3xl p-16 text-center transition-all group ${a?"border-slate-300 hover:border-brand-500 hover:bg-slate-50 cursor-pointer":"border-slate-200 bg-slate-50 opacity-50 cursor-not-allowed"}`,children:[t.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center text-brand-600 mx-auto mb-8 shadow-sm group-hover:scale-110 transition-transform border border-slate-100",children:t.jsx(ga,{size:40})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"   Excel    "}),t.jsx("p",{className:"text-base text-slate-500 font-medium",children:"    :     "}),t.jsx("p",{className:"text-sm text-slate-400 mt-6 font-mono font-bold",children:".xlsx, .xls  Max 5MB"}),t.jsx("input",{type:"file",ref:E,className:"hidden",accept:".xlsx, .xls",onChange:z,disabled:!a})]})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"font-bold text-2xl text-slate-800 flex items-center gap-3 px-2",children:[t.jsx(Lt,{size:24,className:"text-slate-400"}),"   "]}),M.map(ee=>t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm hover:shadow-md transition-shadow flex flex-col lg:flex-row items-center justify-between gap-6",children:[t.jsxs("div",{className:"flex items-center gap-5 flex-1 w-full",children:[t.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-xl font-bold ${ee.resultReady?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ee.items.length}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[t.jsx("span",{className:"font-mono font-bold text-slate-800 text-lg",children:ee.id}),ee.resultReady?t.jsx("span",{className:"bg-green-50 text-green-700 text-[11px] font-bold px-2.5 py-1 rounded-md border border-green-200",children:" "}):t.jsxs("span",{className:"bg-yellow-50 text-yellow-700 text-[11px] font-bold px-2.5 py-1 rounded-md border border-yellow-200 flex items-center gap-1",children:[t.jsx(os,{size:12}),"  "]})]}),t.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[hs(ee.date),"  ",ee.priceType==="OEM"?" ":ee.priceType==="AFTERMARKET"?" ":""]})]})]}),t.jsx("div",{className:"flex gap-8 w-full lg:w-auto justify-around lg:justify-start",children:ee.resultReady?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center px-4 lg:border-l border-slate-100",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:""}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:ee.approvedItemsCount??ee.items.filter(V=>V.approvalStatus==="APPROVED"||V.status==="MATCHED").length})]}),t.jsxs("div",{className:"text-center px-4 lg:border-l border-slate-100",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:" "}),t.jsx("p",{className:"text-2xl font-black text-slate-500",children:ee.missingItemsCount??ee.items.filter(V=>V.approvalStatus==="MISSING"||V.status==="NOT_FOUND").length})]})]}):t.jsx("div",{className:"text-center px-8 lg:border-l border-slate-100 text-slate-400 italic font-bold",children:" ..."})}),ee.resultReady&&t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto min-w-[200px]",children:[t.jsxs("button",{onClick:()=>L(ee),className:"flex-1 flex items-center justify-center gap-2 bg-brand-600 hover:bg-brand-700 text-white py-2.5 px-5 rounded-xl text-xs font-bold transition-colors shadow-sm",children:[t.jsx(Wc,{size:16}),"   "]}),(ee.missingItemsCount||0)>0&&t.jsxs("button",{onClick:()=>Q(ee),className:"flex-1 flex items-center justify-center gap-2 bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 py-2.5 px-5 rounded-xl text-xs font-bold transition-colors",children:[t.jsx(cr,{size:16}),"  (Excel)"]})]})]},ee.id)),U>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[t.jsx("button",{disabled:y===1,onClick:()=>j(ee=>Math.max(1,ee-1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[" ",y,"  ",U]}),t.jsx("button",{disabled:y===U,onClick:()=>j(ee=>Math.min(U,ee+1)),className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ws,{size:18})})]}),v.length===0&&t.jsx("div",{className:"text-center py-16 text-slate-400 bg-slate-50 rounded-3xl border border-dashed border-slate-200",children:t.jsx("p",{className:"text-lg font-bold opacity-50",children:"    "})})]}),O&&t.jsx("div",{className:"fixed top-0 left-0 -z-50 opacity-0 pointer-events-none",children:t.jsxs("div",{ref:A,className:"bg-white p-10 w-[210mm] min-h-[297mm] text-slate-900 font-sans",dir:"rtl",children:[t.jsxs("div",{className:"flex justify-between items-start border-b-2 border-slate-800 pb-6 mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"  / Quotation"}),t.jsxs("p",{className:"text-slate-500 font-bold",children:[" : ",t.jsx("span",{className:"font-mono text-slate-900",children:O.id})]}),t.jsxs("p",{className:"text-slate-500 font-bold",children:[": ",t.jsx("span",{className:"font-mono text-slate-900",children:Jo(O.processedDate||O.date)})]})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("h2",{className:"text-2xl font-black text-brand-700",children:"Sini Car Wholesale"}),t.jsx("p",{className:"text-sm text-slate-500",children:"   "}),t.jsx("p",{className:"text-sm text-slate-500 font-mono",children:"CR: 1010xxxxxx"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-8",children:[t.jsx("h3",{className:"font-bold text-lg mb-2 border-b border-slate-200 pb-1",children:" "}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("p",{children:[t.jsx("span",{className:"text-slate-500 font-bold ml-2",children:":"})," ",O.userName]}),t.jsxs("p",{children:[t.jsx("span",{className:"text-slate-500 font-bold ml-2",children:":"})," ",O.companyName]}),t.jsxs("p",{children:[t.jsx("span",{className:"text-slate-500 font-bold ml-2",children:" :"})," ",O.priceType]})]})]}),t.jsxs("table",{className:"w-full text-right text-sm border-collapse mb-8",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800 text-white",children:[t.jsx("th",{className:"p-3 border border-slate-800",children:"#"}),t.jsx("th",{className:"p-3 border border-slate-800",children:" "}),t.jsx("th",{className:"p-3 border border-slate-800",children:" "}),t.jsx("th",{className:"p-3 border border-slate-800 text-center",children:""}),t.jsx("th",{className:"p-3 border border-slate-800 text-center",children:" "}),t.jsx("th",{className:"p-3 border border-slate-800 text-center",children:""})]})}),t.jsx("tbody",{children:O.items.filter(ee=>ee.approvalStatus==="APPROVED"||ee.status==="MATCHED").map((ee,V)=>{var P;return t.jsxs("tr",{className:V%2===0?"bg-white":"bg-slate-50",children:[t.jsx("td",{className:"p-3 border border-slate-200 text-center",children:V+1}),t.jsx("td",{className:"p-3 border border-slate-200 font-mono font-bold",children:ee.partNumber}),t.jsx("td",{className:"p-3 border border-slate-200 font-bold",children:ee.matchedProductName||ee.partName}),t.jsx("td",{className:"p-3 border border-slate-200 text-center",children:ee.requestedQty}),t.jsx("td",{className:"p-3 border border-slate-200 text-center",children:(P=ee.matchedPrice)==null?void 0:P.toLocaleString()}),t.jsx("td",{className:"p-3 border border-slate-200 text-center font-bold",children:(ee.matchedPrice*ee.requestedQty).toLocaleString()})]},V)})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("div",{className:"w-64 bg-slate-100 p-4 rounded-lg border border-slate-200",children:[t.jsxs("div",{className:"flex justify-between mb-2",children:[t.jsx("span",{className:"font-bold text-slate-600",children:":"}),t.jsxs("span",{className:"font-bold font-mono",children:[(X=O.totalQuotedAmount)==null?void 0:X.toLocaleString()," SAR"]})]}),t.jsxs("div",{className:"flex justify-between border-t border-slate-300 pt-2",children:[t.jsx("span",{className:"font-black text-slate-900 text-lg",children:":"}),t.jsxs("span",{className:"font-black text-slate-900 text-lg font-mono",children:[(W=O.totalQuotedAmount)==null?void 0:W.toLocaleString()," SAR"]})]})]})}),t.jsxs("div",{className:"mt-12 text-center text-xs text-slate-400 border-t border-slate-200 pt-4",children:[t.jsx("p",{children:"    7   .     ."}),t.jsx("p",{children:"        ."})]})]})})]})},sde=()=>t.jsxs("div",{className:"max-w-5xl mx-auto animate-fade-in pb-10",children:[t.jsxs("div",{className:"bg-slate-900 rounded-3xl overflow-hidden shadow-2xl relative mb-10 text-white",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"}),t.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full bg-gradient-to-l from-primary-900/50 to-transparent"}),t.jsxs("div",{className:"relative z-10 p-12 md:p-20 text-center",children:[t.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-4",children:"SINI PRO"}),t.jsx("p",{className:"text-xl text-slate-300 font-light max-w-2xl mx-auto",children:"           ."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[t.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-soft border border-slate-100 hover:border-primary-200 transition-colors group",children:[t.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-2xl flex items-center justify-center text-primary-600 mb-6 group-hover:scale-110 transition-transform",children:t.jsx(hh,{size:28})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:""}),t.jsx("p",{className:"text-slate-600 leading-relaxed",children:"                            ."})]}),t.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-soft border border-slate-100 hover:border-secondary-200 transition-colors group",children:[t.jsx("div",{className:"w-12 h-12 bg-secondary-100 rounded-2xl flex items-center justify-center text-secondary-600 mb-6 group-hover:scale-110 transition-transform",children:t.jsx(Ln,{size:28})}),t.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-3",children:""}),t.jsx("p",{className:"text-slate-600 leading-relaxed",children:"                        ."})]})]}),t.jsx("div",{className:"bg-slate-50 rounded-3xl p-10 border border-slate-200 mb-12",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center divide-x divide-slate-200 divide-x-reverse",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-primary-600 mb-2",children:"20k+"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-slate-800 mb-2",children:"500+"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-secondary-500 mb-2",children:"12"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-4xl font-black text-slate-800 mb-2",children:"24/7"}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" "})]})]})}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-soft border border-slate-100 p-8 flex flex-col md:flex-row justify-between items-center gap-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-900 rounded-full flex items-center justify-center text-white shadow-lg",children:t.jsx(vn,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase",children:" "}),t.jsx("p",{className:"text-2xl font-black text-slate-900 font-mono",children:"9200 00000"})]})]}),t.jsx("div",{className:"h-12 w-px bg-slate-100 hidden md:block"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white border border-slate-200 rounded-full flex items-center justify-center text-green-600 shadow-sm",children:t.jsx(Tu,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase",children:" "}),t.jsx("p",{className:"text-2xl font-black text-slate-900 font-mono",children:"050 000 0000"})]})]}),t.jsx("div",{className:"h-12 w-px bg-slate-100 hidden md:block"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-white border border-slate-200 rounded-full flex items-center justify-center text-blue-600 shadow-sm",children:t.jsx(ja,{size:28})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-900",children:"   "})]})]})]})]}),ade=({user:e,mainProfileUserId:s})=>{const[a,r]=T.useState("PROFILE"),[n,i]=T.useState([]),[l,o]=T.useState([]),[d,u]=T.useState(!0),[h,f]=T.useState({companyName:"",crNumber:"",taxNumber:"",nationalAddress:"",city:"",region:"  ",phone:""}),[x,g]=T.useState(!1),[v,b]=T.useState(!1),[y,j]=T.useState(!1),[w,A]=T.useState(null),[O,C]=T.useState(!1),[E,S]=T.useState({}),[D,M]=T.useState({employeeRole:Tn.BUYER}),[U,I]=T.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[k,z]=T.useState(!1),[_,q]=T.useState(!1),{addToast:L}=Dt();T.useEffect(()=>{Q()},[s]);const Q=async()=>{var K;u(!0);try{const G=(K=(await xe.getAllUsers()).find(Z=>Z.user.id===s))==null?void 0:K.profile;G&&(i(G.branches||[]),f({companyName:G.companyName||"",crNumber:G.crNumber||"",taxNumber:G.taxNumber||"",nationalAddress:G.nationalAddress||"",city:G.city||"",region:G.region||"  ",phone:G.phone||""}));const te=await xe.getEmployees(s);o(te)}catch(se){console.error(se),L("    ","error")}finally{u(!1)}},X=async()=>{g(!0);try{await xe.updateCustomerProfile(s,h),L("    ","success")}catch(K){L(K.message||"  ","error")}finally{g(!1)}},W=async()=>{if(!E.name||!E.city||!E.phone){L("    (  )","error");return}C(!0);try{await xe.addBranch(s,E),L("   ","success"),b(!1),S({}),Q()}catch(K){L(K.message||" ","error")}finally{C(!1)}},ee=async K=>{if(confirm("      "))try{await xe.deleteBranch(s,K),L("  ","info"),Q()}catch{L(" ","error")}},V=async()=>{if(!D.name||!D.phone||!D.branchId){L("    ","error");return}C(!0);try{const K=await xe.addEmployee(s,D);L("   ","success"),j(!1),M({employeeRole:Tn.BUYER}),A(K.activationCode),Q()}catch(K){L(K.message||" ","error")}finally{C(!1)}},P=async K=>{try{await xe.toggleEmployeeStatus(K),L("   ","success"),Q()}catch{L(" ","error")}},Y=async K=>{if(confirm("      "))try{await xe.deleteEmployee(K),L("   ","info"),Q()}catch{L(" ","error")}},J=async()=>{if(!U.oldPassword){L("    ","error");return}if(!U.newPassword){L("    ","error");return}if(U.newPassword.length<4){L("      4   ","error");return}if(U.newPassword!==U.confirmPassword){L("      ","error");return}z(!0);try{const K=await xe.changePassword(e.id,U.oldPassword,U.newPassword);K.success?(L(K.message,"success"),I({oldPassword:"",newPassword:"",confirmPassword:""})):L(K.message,"error")}catch{L("     ","error")}finally{z(!1)}};return t.jsxs("div",{className:"w-full animate-fade-in pb-20",children:[t.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-sm border border-slate-200 mb-8 flex flex-col md:flex-row justify-between items-center gap-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[t.jsx(Xs,{className:"text-brand-600",size:32}),"   "]}),t.jsx("p",{className:"text-slate-500 font-medium mt-2",children:"      ."})]}),t.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-xl flex-wrap gap-1",children:[t.jsxs("button",{onClick:()=>r("PROFILE"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="PROFILE"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-profile",children:[t.jsx(Mu,{size:18}),"  "]}),t.jsxs("button",{onClick:()=>r("BRANCHES"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="BRANCHES"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-branches",children:[t.jsx(Xs,{size:18}),"  (",n.length,")"]}),t.jsxs("button",{onClick:()=>r("EMPLOYEES"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="EMPLOYEES"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-employees",children:[t.jsx(Gt,{size:18}),"  (",l.length,")"]}),t.jsxs("button",{onClick:()=>r("SECURITY"),className:`px-6 py-3 rounded-lg font-bold text-sm transition-all flex items-center gap-2 ${a==="SECURITY"?"bg-white text-brand-700 shadow":"text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-security",children:[t.jsx(wa,{size:18})," "]})]})]}),a==="PROFILE"&&t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden animate-slide-up",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(Mu,{size:22,className:"text-brand-600"})," "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"    "})]}),t.jsxs("button",{onClick:X,disabled:x,className:"bg-brand-600 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 transition-colors disabled:opacity-50 shadow-md","data-testid":"button-save-profile",children:[t.jsx(ds,{size:18})," ",x?" ...":" "]})]}),t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Xs,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all text-lg font-bold",value:h.companyName,onChange:K=>f({...h,companyName:K.target.value}),placeholder:"   ","data-testid":"input-business-name"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(fF,{size:16,className:"text-slate-400"}),"  "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-mono",value:h.crNumber,onChange:K=>f({...h,crNumber:K.target.value}),placeholder:"10 ","data-testid":"input-cr-number"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Wae,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-mono",value:h.taxNumber,onChange:K=>f({...h,taxNumber:K.target.value}),placeholder:"15 ","data-testid":"input-vat-number"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Go,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:h.nationalAddress,onChange:K=>f({...h,nationalAddress:K.target.value}),placeholder:"    ABCD1234","data-testid":"input-national-address"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(ja,{size:16,className:"text-slate-400"}),""]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:h.city,onChange:K=>f({...h,city:K.target.value}),placeholder:": ","data-testid":"input-city"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(ja,{size:16,className:"text-slate-400"}),""]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:h.region,onChange:K=>f({...h,region:K.target.value}),placeholder:":   ","data-testid":"input-region"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(vn,{size:16,className:"text-slate-400"})," "]}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all font-mono",value:h.phone,onChange:K=>f({...h,phone:K.target.value}),placeholder:"    ",dir:"ltr","data-testid":"input-phone"})]})]}),t.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-5 flex gap-3",children:[t.jsx(Ds,{size:20,className:"text-blue-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-blue-800",children:" "}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"       .       ."})]})]})]})]}),a==="BRANCHES"&&t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden animate-slide-up",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-xl text-slate-800",children:" "}),t.jsxs("button",{onClick:()=>b(!0),className:"bg-brand-600 text-white px-5 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 transition-colors",children:[t.jsx(Pt,{size:18}),"   "]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:" / "}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:n.length>0?n.map((K,se)=>t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsxs("td",{className:"p-5 font-bold text-slate-800 text-base",children:[K.name,se===0&&t.jsx("span",{className:"mr-2 text-xs bg-brand-100 text-brand-700 px-2 py-0.5 rounded-full border border-brand-200",children:""})]}),t.jsx("td",{className:"p-5 text-slate-700 font-medium",children:K.city}),t.jsx("td",{className:"p-5 text-slate-700 font-mono font-bold",dir:"ltr",children:K.phone}),t.jsx("td",{className:"p-5",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[250px]",children:K.address}),K.mapUrl&&t.jsxs("a",{href:K.mapUrl,target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-brand-600 flex items-center gap-1 hover:underline mt-1",children:[t.jsx(Go,{size:12}),"   "]})]})}),t.jsx("td",{className:"p-5 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors",children:t.jsx(vre,{size:18})}),se!==0&&t.jsx("button",{onClick:()=>ee(K.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(Ct,{size:18})})]})})]},K.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"p-16 text-center text-slate-400 font-bold",children:"   "})})})]})})]}),a==="EMPLOYEES"&&t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden animate-slide-up",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-xl text-slate-800",children:" "}),t.jsxs("button",{onClick:()=>j(!0),className:"bg-brand-600 text-white px-5 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 transition-colors",children:[t.jsx(Pt,{size:18}),"  "]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-right",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:" "}),t.jsx("th",{className:"p-5",children:"  ()"}),t.jsx("th",{className:"p-5",children:"  "}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5",children:""}),t.jsx("th",{className:"p-5 text-center",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:l.length>0?l.map(K=>{var se;return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"p-5 font-bold text-slate-800 text-base",children:K.name}),t.jsx("td",{className:"p-5 font-mono font-bold text-slate-700",children:K.phone}),t.jsx("td",{className:"p-5 text-slate-700 font-medium",children:((se=n.find(G=>G.id===K.branchId))==null?void 0:se.name)||t.jsx("span",{className:"text-red-400 italic",children:" "})}),t.jsx("td",{className:"p-5",children:K.employeeRole===Tn.MANAGER?t.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold bg-purple-100 text-purple-700 px-3 py-1 rounded-full w-fit border border-purple-200",children:[t.jsx(Ds,{size:14}),"  (Admin)"]}):t.jsxs("span",{className:"flex items-center gap-1.5 text-xs font-bold bg-blue-100 text-blue-700 px-3 py-1 rounded-full w-fit border border-blue-200",children:[t.jsx($a,{size:14}),"  (Buyer)"]})}),t.jsx("td",{className:"p-5",children:t.jsx("button",{onClick:()=>P(K.id),className:`px-3 py-1 rounded-full text-xs font-bold transition-all border ${K.isActive?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"}`,children:K.isActive?"":""})}),t.jsx("td",{className:"p-5 text-center",children:t.jsx("div",{className:"flex items-center justify-center gap-2",children:t.jsx("button",{onClick:()=>Y(K.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(Ct,{size:18})})})})]},K.id)}):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-16 text-center text-slate-400 font-bold",children:"   "})})})]})})]}),a==="SECURITY"&&t.jsxs("div",{className:"animate-slide-up space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(wa,{size:22,className:"text-brand-600"}),"  "]}),t.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"       "})]}),t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"max-w-md space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:_?"text":"password",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all pr-12",placeholder:"   ",value:U.oldPassword,onChange:K=>I({...U,oldPassword:K.target.value}),"data-testid":"input-old-password"}),t.jsx("button",{type:"button",onClick:()=>q(!_),className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:t.jsx(fs,{size:18})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsx("input",{type:_?"text":"password",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:"    (4   )",value:U.newPassword,onChange:K=>I({...U,newPassword:K.target.value}),"data-testid":"input-new-password"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"   "}),t.jsx("input",{type:_?"text":"password",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:"    ",value:U.confirmPassword,onChange:K=>I({...U,confirmPassword:K.target.value}),"data-testid":"input-confirm-password"})]}),t.jsx("button",{onClick:J,disabled:k,className:"bg-brand-600 text-white font-bold py-3.5 px-8 rounded-xl hover:bg-brand-700 disabled:opacity-50 transition-colors shadow-md flex items-center gap-2","data-testid":"button-change-password",children:k?t.jsx(t.Fragment,{children:" ..."}):t.jsxs(t.Fragment,{children:[t.jsx(Zt,{size:18}),"  "]})})]})})]}),t.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-8 border-b border-slate-100",children:t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(Ds,{size:22,className:"text-brand-600"})," "]})}),t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800 font-mono",children:e.clientId})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800",children:e.email||"-"})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800 font-mono",dir:"ltr",children:e.phone||"-"})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("p",{className:"text-lg font-bold text-slate-800",children:e.role==="CUSTOMER_OWNER"?" ":e.role==="CUSTOMER_STAFF"?"":e.role})]})]})})]})]}),t.jsx(ls,{isOpen:v,onClose:()=>b(!1),title:"  ",children:t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:":   ",value:E.name||"",onChange:K=>S({...E,name:K.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:""}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.city||"",onChange:K=>S({...E,city:K.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.phone||"",onChange:K=>S({...E,phone:K.target.value})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.address||"",onChange:K=>S({...E,address:K.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"   ()"}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:E.mapUrl||"",onChange:K=>S({...E,mapUrl:K.target.value})})]}),t.jsx("button",{onClick:W,disabled:O,className:"w-full bg-brand-600 text-white font-bold py-3.5 rounded-xl mt-4 hover:bg-brand-700 disabled:opacity-50 transition-colors shadow-md",children:O?" ...":" "})]})}),t.jsx(ls,{isOpen:y,onClose:()=>j(!1),title:"  ",children:t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:D.name||"",onChange:K=>M({...D,name:K.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  (  )"}),t.jsx("input",{type:"text",className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",placeholder:"05xxxxxxxx",value:D.phone||"",onChange:K=>M({...D,phone:K.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  "}),t.jsxs("select",{className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:D.branchId||"",onChange:K=>M({...D,branchId:K.target.value}),children:[t.jsx("option",{value:"",children:" ..."}),n.map(K=>t.jsxs("option",{value:K.id,children:[K.name," - ",K.city]},K.id))]})]}),t.jsxs("div",{className:"mt-2 bg-slate-50 p-5 rounded-xl border border-slate-200",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Ds,{size:18,className:"text-brand-600"}),"  "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("label",{className:`flex flex-col items-center justify-center p-5 rounded-xl border-2 cursor-pointer transition-all ${D.employeeRole===Tn.MANAGER?"border-purple-500 bg-purple-50 text-purple-900 shadow-md":"border-slate-200 bg-white hover:border-slate-300"}`,children:[t.jsx("input",{type:"radio",name:"role",className:"hidden",checked:D.employeeRole===Tn.MANAGER,onChange:()=>M({...D,employeeRole:Tn.MANAGER})}),t.jsx(Ds,{className:`mb-2 ${D.employeeRole===Tn.MANAGER?"text-purple-600":"text-slate-400"}`,size:24}),t.jsx("span",{className:"font-bold text-sm",children:" (Admin)"}),t.jsx("span",{className:"text-xs text-center opacity-70 mt-1 font-medium",children:"      ."})]}),t.jsxs("label",{className:`flex flex-col items-center justify-center p-5 rounded-xl border-2 cursor-pointer transition-all ${D.employeeRole===Tn.BUYER?"border-blue-500 bg-blue-50 text-blue-900 shadow-md":"border-slate-200 bg-white hover:border-slate-300"}`,children:[t.jsx("input",{type:"radio",name:"role",className:"hidden",checked:D.employeeRole===Tn.BUYER,onChange:()=>M({...D,employeeRole:Tn.BUYER})}),t.jsx($a,{className:`mb-2 ${D.employeeRole===Tn.BUYER?"text-blue-600":"text-slate-400"}`,size:24}),t.jsx("span",{className:"font-bold text-sm",children:" (Buyer)"}),t.jsx("span",{className:"text-xs text-center opacity-70 mt-1 font-medium",children:"     (  )."})]})]})]}),t.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200 text-amber-800 text-sm flex gap-2",children:[t.jsx(wa,{size:16,className:"shrink-0 mt-0.5"}),t.jsx("p",{children:"          ."})]}),t.jsx("button",{onClick:V,disabled:O,className:"w-full bg-brand-600 text-white font-bold py-3.5 rounded-xl mt-4 hover:bg-brand-700 disabled:opacity-50 transition-colors shadow-md",children:O?" ...":"   "})]})}),t.jsx(ls,{isOpen:!!w,onClose:()=>A(null),title:"   ",children:t.jsxs("div",{className:"text-center p-4",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mx-auto mb-4",children:t.jsx(Zt,{size:32})}),t.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"   "}),t.jsx("p",{className:"text-slate-500 mb-6",children:"         ."}),t.jsx("div",{className:"bg-slate-100 p-6 rounded-2xl border border-slate-200 mb-6",children:t.jsx("p",{className:"text-4xl font-mono font-black text-slate-800 tracking-widest",children:w})}),t.jsx("button",{onClick:()=>A(null),className:"w-full bg-slate-800 text-white font-bold py-3 rounded-xl hover:bg-slate-900",children:""})]})})]})},rde=["Changan","MG","Geely","Haval","Chery","GAC","BYD","Great Wall","Jetour","Hongqi","Jac","Omoda","Exeed","Wuling","Maxus"],d5={NEW:" ",UNDER_REVIEW:" ",WAITING_CUSTOMER_EXCEL:"   ",PRICING_IN_PROGRESS:"   ",PRICING_SENT:"   ",WAITING_CUSTOMER_APPROVAL:" ",APPROVED_BY_CUSTOMER:"  -  ",IN_FACTORY:"  / ",SHIPMENT_BOOKED:"  ",ON_THE_SEA:"  ",IN_PORT:" ",CUSTOMS_CLEARED:"  ",ON_THE_WAY:"  ",DELIVERED:" ",CANCELLED:""},nde=[{key:"NEW",label:" "},{key:"PRICING_SENT",label:""},{key:"APPROVED_BY_CUSTOMER",label:""},{key:"ON_THE_SEA",label:""},{key:"DELIVERED",label:""}],ide=({user:e,userProfile:s})=>{var U;const[a,r]=T.useState("LIST"),[n,i]=T.useState([]),[l,o]=T.useState(!0),[d,u]=T.useState(1),[h,f]=T.useState(!1),[x,g]=T.useState(!1),[v,b]=T.useState({businessName:(s==null?void 0:s.companyName)||e.name,branchesCount:((U=s==null?void 0:s.branches)==null?void 0:U.length)||1,targetCarBrands:[],hasImportedBefore:!1,serviceMode:"FULL_SERVICE",notes:""}),[y,j]=T.useState(""),{addToast:w}=Dt();T.useEffect(()=>{A()},[e.id]);const A=async()=>{o(!0);try{const k=(await xe.getImportRequests()).filter(z=>z.customerId===e.id);i(k.reverse()),k.length===0&&r("NEW")}catch(I){console.error(I)}finally{o(!1)}},O=I=>{const k=v.targetCarBrands||[];k.includes(I)?b({...v,targetCarBrands:k.filter(z=>z!==I)}):b({...v,targetCarBrands:[...k,I]})},C=()=>{var I;if(d===1){if(!v.businessName||!v.branchesCount){w("     ","error");return}if((((I=v.targetCarBrands)==null?void 0:I.length)||0)===0){w("     ","error");return}}if(d===2&&v.hasImportedBefore&&!v.previousImportDetails){w("      ","error");return}u(k=>k+1),window.scrollTo(0,0)},E=async()=>{var I;f(!0);try{await xe.createImportRequest({...v,customerId:e.id}),w("    ","success"),await A(),r("LIST"),u(1),b({businessName:(s==null?void 0:s.companyName)||e.name,branchesCount:((I=s==null?void 0:s.branches)==null?void 0:I.length)||1,targetCarBrands:[],hasImportedBefore:!1,serviceMode:"FULL_SERVICE",notes:""})}catch{w("   ","error")}finally{f(!1)}},S=async(I,k)=>{var _;const z=(_=I.target.files)==null?void 0:_[0];if(z){g(!0);try{await xe.uploadImportRequestExcel(k,z.name,e.name),w("   ","success"),A()}catch{w(" ","error")}finally{g(!1)}}},D=async I=>{if(confirm("          "))try{await xe.confirmImportRequestByCustomer(I,{customerName:e.name}),w("     ","success"),A()}catch{w(" ","error")}},M=({status:I})=>{const z=(_=>_==="NEW"||_==="UNDER_REVIEW"||_==="WAITING_CUSTOMER_EXCEL"?0:_.includes("PRICING")||_==="WAITING_CUSTOMER_APPROVAL"?1:_==="APPROVED_BY_CUSTOMER"||_==="IN_FACTORY"?2:_==="SHIPMENT_BOOKED"||_==="ON_THE_SEA"||_==="IN_PORT"||_==="CUSTOMS_CLEARED"||_==="ON_THE_WAY"?3:_==="DELIVERED"?4:0)(I);return t.jsx("div",{className:"w-full py-4",children:t.jsxs("div",{className:"flex items-center justify-between relative",children:[t.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-1 bg-slate-100 -z-10 rounded-full"}),nde.map((_,q)=>t.jsxs("div",{className:"flex flex-col items-center gap-2 bg-white px-2",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs border-2 transition-all ${q<=z?"bg-brand-600 text-white border-brand-600":"bg-white border-slate-300 text-slate-400"}`,children:q<z?t.jsx(Zt,{size:14}):q+1}),t.jsx("span",{className:`text-[10px] font-bold ${q<=z?"text-brand-700":"text-slate-400"}`,children:_.label})]},_.key))]})})};return a==="NEW"?t.jsxs("div",{className:"animate-fade-in pb-20",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:"  "}),n.length>0&&t.jsxs("button",{onClick:()=>r("LIST"),className:"text-slate-500 hover:text-slate-800 font-bold text-sm flex items-center gap-2",children:[t.jsx(el,{size:16}),"  "]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-cyan-900 to-slate-900 rounded-3xl overflow-hidden shadow-xl text-white relative mb-10",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cartographer.png')] opacity-10"}),t.jsx("div",{className:"absolute right-0 top-0 w-1/3 h-full bg-gradient-to-l from-brand-600/30 to-transparent"}),t.jsxs("div",{className:"relative z-10 p-8 md:p-12 flex flex-col md:flex-row items-center gap-8",children:[t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-brand-500/20 backdrop-blur-md px-4 py-1.5 rounded-full border border-brand-400/30 text-brand-200 text-xs font-bold uppercase tracking-wider mb-2",children:[t.jsx(ja,{size:14}),"   "]}),t.jsx("h1",{className:"text-3xl md:text-5xl font-black leading-tight",children:"   "}),t.jsx("p",{className:"text-slate-300 text-lg max-w-xl leading-relaxed",children:"                3     ."})]}),t.jsx("div",{className:"hidden md:block opacity-80",children:t.jsx(ure,{size:180,strokeWidth:.5,className:"text-white/20"})})]})]}),t.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-3xl shadow-sm border border-slate-200 p-8 md:p-10 min-h-[500px] flex flex-col",children:[d===1&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Xs,{className:"text-brand-600"}),"   "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  / "}),t.jsx("input",{type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold",value:v.businessName,onChange:I=>b({...v,businessName:I.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"number",min:1,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl font-bold",value:v.branchesCount,onChange:I=>b({...v,branchesCount:parseInt(I.target.value)||0})})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"  (   )"}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:rde.map(I=>{var k;return t.jsx("button",{onClick:()=>O(I),className:`px-4 py-2 rounded-lg text-sm font-bold border transition-all ${(k=v.targetCarBrands)!=null&&k.includes(I)?"bg-brand-600 text-white border-brand-600 shadow-md":"bg-white text-slate-600 border-slate-200 hover:bg-slate-50"}`,children:I},I)})})]})]}),d===2&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(xn,{className:"text-brand-600"}),"  "]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{className:"block text-lg font-bold text-slate-700 mb-4",children:"      "}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-md",children:[t.jsx("button",{onClick:()=>b({...v,hasImportedBefore:!0}),className:`p-6 rounded-2xl border-2 text-center transition-all ${v.hasImportedBefore?"border-brand-600 bg-brand-50 text-brand-800 shadow-md":"border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:t.jsx("span",{className:"font-bold text-lg",children:"  "})}),t.jsx("button",{onClick:()=>b({...v,hasImportedBefore:!1,previousImportDetails:""}),className:`p-6 rounded-2xl border-2 text-center transition-all ${v.hasImportedBefore?"border-slate-200 text-slate-500 hover:bg-slate-50":"border-brand-600 bg-brand-50 text-brand-800 shadow-md"}`,children:t.jsx("span",{className:"font-bold text-lg",children:"  "})})]})]}),v.hasImportedBefore&&t.jsxs("div",{className:"animate-slide-up",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"    "}),t.jsx("textarea",{rows:4,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl",placeholder:":     ...",value:v.previousImportDetails||"",onChange:I=>b({...v,previousImportDetails:I.target.value})})]})]}),d===3&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Pr,{className:"text-brand-600"}),"   "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[t.jsxs("button",{onClick:()=>b({...v,serviceMode:"FULL_SERVICE"}),className:`p-6 rounded-2xl border-2 text-right transition-all group ${v.serviceMode==="FULL_SERVICE"?"border-brand-600 bg-brand-50 shadow-md":"border-slate-200 hover:border-slate-300"}`,children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"  (Full Service)"}),t.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"           ."})]}),t.jsxs("button",{onClick:()=>b({...v,serviceMode:"GOODS_ONLY"}),className:`p-6 rounded-2xl border-2 text-right transition-all group ${v.serviceMode==="GOODS_ONLY"?"border-brand-600 bg-brand-50 shadow-md":"border-slate-200 hover:border-slate-300"}`,children:[t.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"  (EXW/FOB)"}),t.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:"           ."})]})]})]}),d===4&&t.jsxs("div",{className:"animate-fade-in flex-1",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Lt,{className:"text-brand-600"}),"  "]}),t.jsx("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 mb-8 space-y-4 text-sm",children:t.jsx("p",{className:"font-bold",children:"     ."})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("textarea",{rows:3,className:"w-full p-4 bg-white border border-slate-300 rounded-xl",placeholder:"    ...",value:v.notes||"",onChange:I=>b({...v,notes:I.target.value})})]})]}),t.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-slate-100",children:[d>1?t.jsxs("button",{onClick:()=>u(d-1),className:"text-slate-500 font-bold hover:text-slate-800 flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-slate-50",children:[t.jsx(el,{size:18})," "]}):t.jsx("div",{}),d<4?t.jsxs("button",{onClick:C,className:"bg-brand-600 text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-brand-700 shadow-lg shadow-brand-200 transition-all",children:[" ",t.jsx(vf,{size:18})]}):t.jsxs("button",{onClick:E,disabled:h,className:"bg-green-600 text-white px-8 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-green-700 shadow-lg shadow-green-200 transition-all",children:[h?" ...":"  "," ",t.jsx(Fn,{size:18})]})]})]})]}):t.jsxs("div",{className:"animate-fade-in pb-20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-2",children:" "}),t.jsx("p",{className:"text-slate-500 font-medium",children:"      ."})]}),t.jsxs("button",{onClick:()=>r("NEW"),className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 shadow-lg",children:[t.jsx(ja,{size:18}),"  "]})]}),l?t.jsx("div",{className:"text-center py-20",children:" ..."}):t.jsx("div",{className:"space-y-8",children:n.map(I=>t.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"p-6 md:p-8 border-b border-slate-100 flex flex-col md:flex-row justify-between gap-6 bg-slate-50/50",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsxs("span",{className:"font-mono text-lg font-bold text-brand-700",children:["#",I.id]}),t.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full border bg-white ${I.status==="CANCELLED"?"border-red-200 text-red-600":I.status==="DELIVERED"?"border-green-200 text-green-600":"border-blue-200 text-blue-600"}`,children:d5[I.status]||I.status})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",hs(I.createdAt)]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[I.status==="WAITING_CUSTOMER_EXCEL"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"file",id:`file-${I.id}`,className:"hidden",accept:".xlsx,.xls",onChange:k=>S(k,I.id)}),t.jsxs("label",{htmlFor:`file-${I.id}`,className:`cursor-pointer bg-brand-600 text-white px-6 py-3 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-brand-700 shadow-lg shadow-brand-200 ${x?"opacity-50 pointer-events-none":""}`,children:[t.jsx(ga,{size:18})," ",x?" ...":"   (Excel)"]})]}),(I.status==="PRICING_SENT"||I.status==="WAITING_CUSTOMER_APPROVAL")&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"bg-white border border-slate-200 text-slate-700 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-50",children:[t.jsx(cr,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>D(I.id),className:"bg-green-600 text-white px-6 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-green-700 shadow-lg shadow-green-200",children:[t.jsx(Fn,{size:18}),"  "]})]})]})]}),t.jsxs("div",{className:"p-6 md:p-8",children:[t.jsx(M,{status:I.status}),t.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-100 text-sm space-y-3",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[t.jsx(Lt,{size:16}),"  "]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:" "}),t.jsx("span",{className:"font-bold",children:I.serviceMode==="FULL_SERVICE"?" ":" "})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-slate-500",children:""}),t.jsx("span",{className:"font-bold",children:I.targetCarBrands.join(", ")})]}),I.pricingTotalAmount&&t.jsxs("div",{className:"flex justify-between border-t border-slate-200 pt-2 mt-2",children:[t.jsx("span",{className:"text-slate-500",children:" "}),t.jsxs("span",{className:"font-black text-brand-600 text-lg",children:[I.pricingTotalAmount," ."]})]})]}),t.jsxs("div",{className:"border-r-2 border-slate-100 pr-6 mr-2 relative",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(xn,{size:16}),"  "]}),t.jsx("div",{className:"space-y-6",children:(I.timeline||[]).slice().reverse().slice(0,3).map((k,z)=>t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute -right-[31px] top-1 w-3 h-3 rounded-full bg-slate-300 border-2 border-white"}),t.jsx("p",{className:"text-xs font-bold text-slate-800",children:d5[k.status]||k.status}),t.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:hs(k.changedAt)}),k.note&&t.jsx("p",{className:"text-xs text-slate-600 mt-1 bg-slate-50 p-2 rounded",children:k.note})]},z))})]})]})]})]},I.id))})]})};function lde(e){return e?e.toLowerCase().trim().replace(/[]/g,"").replace(//g,"").replace(//g,"").replace(/[\u064B-\u065F]/g,"").replace(/[]/g,"").replace(//g,"").replace(/[^\w\s\u0600-\u06FF]/g," "):""}function u5(e){return lde(e).split(/\s+/).filter(a=>a.length>=2)}function ode(e,s){const a=[];for(let r=0;r<=s.length;r++)a[r]=[r];for(let r=0;r<=e.length;r++)a[0][r]=r;for(let r=1;r<=s.length;r++)for(let n=1;n<=e.length;n++)s.charAt(r-1)===e.charAt(n-1)?a[r][n]=a[r-1][n-1]:a[r][n]=Math.min(a[r-1][n-1]+1,Math.min(a[r][n-1]+1,a[r-1][n]+1));return a[s.length][e.length]}function cde(e,s){const a=u5(e),r=u5(s);let n=0;for(const i of a){let l=0;for(const o of r){let d=0;if(i===o)d=3;else if(o.includes(i))d=2;else{const u=ode(i,o),h=Math.floor(i.length/3)+1;(u<=1||i.length>4&&u<=h)&&(d=1)}d>l&&(l=d)}n+=l}return n}function dde(e,s){if(!e.trim())return[];const a=/[0-9-]/.test(e);let r="",n="";return a&&(r=Yi(e),n=af(e)),s.map(l=>{let o=0;if(a&&r.length>2){const u=l.normalizedPart||Yi(l.partNumber),h=l.numericPartCore||af(l.partNumber);u===r?o+=15:h===n&&h.length>3?o+=10:h.includes(n)||n.includes(h)?n.length>4?o+=6:n.length>2&&(o+=3):u.includes(r)&&(o+=4)}const d=[l.name,l.brand,l.category||"",l.description||""].join(" ");return o+=cde(e,d),{product:l,score:o}}).filter(l=>l.score>=3).sort((l,o)=>o.score-l.score).map(l=>l.product)}const ude=()=>{const[e,s]=T.useState(!1),[a,r]=T.useState(!1);T.useEffect(()=>{localStorage.getItem("siniCar_hasSeenUsageIntro")||setTimeout(()=>s(!0),1500)},[]);const n=()=>{s(!1),a&&localStorage.setItem("siniCar_hasSeenUsageIntro","true")};return t.jsx(ls,{isOpen:e,onClose:n,title:"    ",maxWidth:"max-w-2xl",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-brand-50 p-4 rounded-xl border border-brand-100 flex items-start gap-3",children:[t.jsx(mi,{className:"text-brand-600 shrink-0 mt-1"}),t.jsx("p",{className:"text-brand-800 text-sm leading-relaxed font-medium",children:"     .           .       :"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 shrink-0",children:t.jsx(Ft,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:" "}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"        (: 218102K700)."})]})]}),t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-600 shrink-0",children:t.jsx($a,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:" "}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         ."})]})]}),t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 shrink-0",children:t.jsx(Lt,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:"  (Bulk)"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  Excel        ."})]})]}),t.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-slate-50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-600 shrink-0",children:t.jsx(ja,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:" "}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"         ."})]})]})]}),t.jsxs("div",{className:"border-t border-slate-100 pt-4 mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Gt,{size:16,className:"text-slate-400"}),t.jsx("span",{className:"text-xs text-slate-500",children:':         " ".'})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm text-slate-600",children:[t.jsx("input",{type:"checkbox",className:"rounded text-brand-600 focus:ring-brand-500",checked:a,onChange:i=>r(i.target.checked)}),"     "]}),t.jsxs("button",{onClick:n,className:"bg-brand-600 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-brand-700 flex items-center gap-2 shadow-md w-full sm:w-auto justify-center",children:["   ",t.jsx(Ut,{size:18})]})]})]})]})})},mde=e=>{switch(e){case"ACCOUNT_APPROVED":case"ACCOUNT_REJECTED":case"NEW_ACCOUNT_REQUEST":case"ACCOUNT_UPDATE":return bn;case"ORDER_STATUS_CHANGED":case"CUSTOMER_ORDER":return Xt;case"NEW_PURCHASE_REQUEST":case"NEW_QUOTE_REQUEST":case"NEW_IMPORT_REQUEST":case"QUOTE_PROCESSED":return Lt;case"SEARCH_POINTS_ADDED":return sb;case"ABANDONED_CART_ALERT":return $a;default:return vr}},fde=e=>{switch(e){case"ACCOUNT_APPROVED":return"bg-green-100 text-green-700 border-green-200";case"ACCOUNT_REJECTED":return"bg-red-100 text-red-700 border-red-200";case"ORDER_STATUS_CHANGED":return"bg-blue-100 text-blue-700 border-blue-200";case"NEW_PURCHASE_REQUEST":case"NEW_ACCOUNT_REQUEST":return"bg-amber-100 text-amber-700 border-amber-200";case"SEARCH_POINTS_ADDED":return"bg-purple-100 text-purple-700 border-purple-200";case"SYSTEM":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},hde=(e,s)=>{var r;return((r={ORDER_STATUS_CHANGED:{ar:" ",en:"Order Update"},SEARCH_POINTS_ADDED:{ar:" ",en:"Search Points"},QUOTE_PROCESSED:{ar:" ",en:"Quote"},GENERAL:{ar:"",en:"General"},ACCOUNT_UPDATE:{ar:" ",en:"Account Update"},IMPORT_UPDATE:{ar:" ",en:"Import Update"},SYSTEM:{ar:"",en:"System"},MARKETING:{ar:"",en:"Marketing"},ACCOUNT_APPROVED:{ar:" ",en:"Account Approved"},ACCOUNT_REJECTED:{ar:" ",en:"Account Rejected"},NEW_PURCHASE_REQUEST:{ar:" ",en:"Purchase Request"},NEW_MESSAGE:{ar:" ",en:"New Message"},NEW_CUSTOMER_REGISTERED:{ar:" ",en:"New Customer"},CUSTOMER_ORDER:{ar:" ",en:"Customer Order"},SUPPLIER_REQUEST_ASSIGNED:{ar:" ",en:"Supplier Request"},NEW_ACCOUNT_REQUEST:{ar:" ",en:"Account Request"},NEW_QUOTE_REQUEST:{ar:"  ",en:"Quote Request"},NEW_IMPORT_REQUEST:{ar:" ",en:"Import Request"},ABANDONED_CART_ALERT:{ar:" ",en:"Abandoned Cart"}}[e])==null?void 0:r[s?"ar":"en"])||e},xde=(e,s)=>{const a=new Date(e),n=new Date().getTime()-a.getTime(),i=Math.floor(n/6e4),l=Math.floor(i/60),o=Math.floor(l/24);if(s){if(i<1)return"";if(i<60)return` ${i} `;if(l<24)return` ${l} `;if(o<7)return` ${o} `}else{if(i<1)return"Just now";if(i<60)return`${i} min ago`;if(l<24)return`${l} hr ago`;if(o<7)return`${o} days ago`}return a.toLocaleDateString(s?"ar-SA":"en-US")},dE=({user:e,onBack:s})=>{const{t:a}=Jt(),{language:r}=Bs(),n=r==="ar",[i,l]=T.useState([]),[o,d]=T.useState(0),[u,h]=T.useState(0),[f,x]=T.useState(!1),[g,v]=T.useState("all"),[b,y]=T.useState("all"),[j,w]=T.useState(1),A=20,O=[{value:"all",types:[],ar:"",en:"All"},{value:"orders",types:["ORDER_STATUS_CHANGED","CUSTOMER_ORDER"],ar:"",en:"Orders"},{value:"account",types:["ACCOUNT_APPROVED","ACCOUNT_REJECTED","ACCOUNT_UPDATE","NEW_ACCOUNT_REQUEST","NEW_CUSTOMER_REGISTERED"],ar:"",en:"Account"},{value:"requests",types:["NEW_PURCHASE_REQUEST","NEW_QUOTE_REQUEST","NEW_IMPORT_REQUEST","SUPPLIER_REQUEST_ASSIGNED"],ar:" ",en:"Requests"},{value:"quotes",types:["QUOTE_PROCESSED","NEW_QUOTE_REQUEST"],ar:" ",en:"Quotes"},{value:"points",types:["SEARCH_POINTS_ADDED"],ar:"",en:"Points"},{value:"system",types:["SYSTEM","GENERAL","MARKETING","ABANDONED_CART_ALERT","NEW_MESSAGE","IMPORT_UPDATE"],ar:"",en:"System"}],C=k=>{const z=O.find(_=>_.value===k);return z&&z.types.length>0?z.types:void 0},E=T.useCallback(async()=>{if(e!=null&&e.id){x(!0);try{const k=C(b),z=await xe.getNotificationsForUser(e.id,{isRead:g==="unread"?!1:void 0,types:k,limit:A,page:j});l(z.items),d(z.unreadCount),h(z.total)}catch(k){console.error("Failed to fetch notifications:",k)}finally{x(!1)}}},[e==null?void 0:e.id,g,b,j]);T.useEffect(()=>{E()},[E]);const S=async k=>{try{await xe.markNotificationAsRead(e.id,k),l(z=>z.map(_=>_.id===k?{..._,isRead:!0,readAt:new Date().toISOString()}:_)),d(z=>Math.max(0,z-1))}catch(z){console.error("Failed to mark notification as read:",z)}},D=async()=>{x(!0);try{await xe.markAllNotificationsAsRead(e.id),l(k=>k.map(z=>({...z,isRead:!0,readAt:new Date().toISOString()}))),d(0)}catch(k){console.error("Failed to mark all as read:",k)}finally{x(!1)}},M=async k=>{try{await xe.deleteNotification(e.id,k),l(z=>z.filter(_=>_.id!==k)),h(z=>z-1)}catch(z){console.error("Failed to delete notification:",z)}},U=async()=>{x(!0);try{await xe.clearNotificationsForUser(e.id),l([]),d(0),h(0)}catch(k){console.error("Failed to clear notifications:",k)}finally{x(!1)}},I=Math.ceil(u/A);return t.jsxs("div",{className:`p-4 md:p-6 space-y-4 ${n?"rtl":"ltr"}`,dir:n?"rtl":"ltr",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-brand-100 rounded-xl",children:t.jsx(vr,{className:"h-6 w-6 text-brand-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-slate-800",children:n?"":"Notifications"}),t.jsx("p",{className:"text-sm text-slate-500",children:n?`${o}     ${u}`:`${o} unread of ${u} total`})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsxs("button",{onClick:E,disabled:f,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 transition-colors","data-testid":"button-refresh-notifications",children:[t.jsx(Qt,{className:`h-4 w-4 ${f?"animate-spin":""}`}),n?"":"Refresh"]}),o>0&&t.jsxs("button",{onClick:D,disabled:f,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 transition-colors","data-testid":"button-mark-all-read",children:[t.jsx(Xte,{className:"h-4 w-4"}),n?"  ":"Mark all read"]}),i.length>0&&t.jsxs("button",{onClick:U,disabled:f,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 disabled:opacity-50 transition-colors","data-testid":"button-clear-all",children:[t.jsx(Ct,{className:"h-4 w-4"}),n?" ":"Clear all"]})]})]}),t.jsxs("div",{className:"flex border-b border-slate-200",children:[t.jsxs("button",{onClick:()=>{v("all"),w(1)},className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${g==="all"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-all",children:[n?"":"All",t.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-slate-100 text-slate-600 rounded-full",children:u})]}),t.jsxs("button",{onClick:()=>{v("unread"),w(1)},className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${g==="unread"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,"data-testid":"tab-unread",children:[n?" ":"Unread",o>0&&t.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-red-500 text-white rounded-full",children:o})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-3",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:n?"  :":"Filter by type:"}),O.map(k=>t.jsx("button",{onClick:()=>{y(k.value),w(1)},className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${b===k.value?"bg-brand-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`filter-type-${k.value}`,children:n?k.ar:k.en},k.value))]}),t.jsx("div",{className:"mt-4",children:f?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Qt,{className:"h-8 w-8 mx-auto animate-spin text-slate-400"}),t.jsx("p",{className:"mt-2 text-slate-500",children:n?" ...":"Loading..."})]}):i.length===0?t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 py-12 text-center",children:[t.jsx(vr,{className:"h-12 w-12 mx-auto text-slate-300"}),t.jsx("h3",{className:"mt-4 text-lg font-medium text-slate-600",children:n?"  ":"No notifications"}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:n?"   ":"New notifications will appear here"})]}):t.jsxs("div",{className:"space-y-2",children:[i.map(k=>{const z=mde(k.type),_=fde(k.type);return t.jsx("div",{className:`bg-white rounded-xl border p-4 transition-all hover:shadow-md ${k.isRead?"border-slate-200":"border-brand-200 bg-brand-50/30"}`,"data-testid":`notification-card-${k.id}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${_}`,children:t.jsx(z,{className:"h-5 w-5"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:`font-medium text-slate-800 ${k.isRead?"":"font-semibold"}`,children:k.title}),t.jsx("span",{className:"px-2 py-0.5 text-xs bg-slate-100 text-slate-600 rounded border border-slate-200",children:hde(k.type,n)}),!k.isRead&&t.jsx("div",{className:"h-2 w-2 bg-brand-600 rounded-full"})]}),t.jsx("p",{className:"text-sm text-slate-600 mt-1",children:k.message}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(os,{className:"h-3 w-3"}),xde(k.createdAt,n)]}),k.relatedType&&k.relatedId&&t.jsx("div",{className:"flex items-center gap-1",children:t.jsxs("span",{className:"bg-slate-100 px-2 py-0.5 rounded",children:[k.relatedType,": ",k.relatedId]})})]})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[!k.isRead&&t.jsx("button",{onClick:()=>S(k.id),title:n?" ":"Mark as read",className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors","data-testid":`button-mark-read-${k.id}`,children:t.jsx(Zt,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>M(k.id),title:n?"":"Delete",className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-${k.id}`,children:t.jsx(Ct,{className:"h-4 w-4"})})]})]})},k.id)}),I>1&&t.jsxs("div",{className:"flex items-center justify-center gap-2 pt-4",children:[t.jsxs("button",{disabled:j===1,onClick:()=>w(k=>Math.max(1,k-1)),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-prev-page",children:[t.jsx(vs,{className:"h-4 w-4"}),n?"":"Previous"]}),t.jsx("span",{className:"text-sm text-slate-500 px-3",children:n?` ${j}  ${I}`:`Page ${j} of ${I}`}),t.jsxs("button",{disabled:j===I,onClick:()=>w(k=>Math.min(I,k+1)),className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-next-page",children:[n?"":"Next",t.jsx(ws,{className:"h-4 w-4"})]})]})]})})]})},Al=(e,s)=>{if(!e)return"";const a=s.split("-")[0];return e[a]||e.ar||e.en||""},pde=e=>({search:t.jsx(Ft,{className:"w-6 h-6"}),"file-text":t.jsx(Lt,{className:"w-6 h-6"}),package:t.jsx(Xt,{className:"w-6 h-6"}),truck:t.jsx(Dr,{className:"w-6 h-6"}),settings:t.jsx(la,{className:"w-6 h-6"}),"trending-up":t.jsx(gi,{className:"w-6 h-6"}),wrench:t.jsx(sc,{className:"w-6 h-6"}),"file-search":t.jsx(ab,{className:"w-6 h-6"}),globe:t.jsx(ja,{className:"w-6 h-6"}),shield:t.jsx(Ds,{className:"w-6 h-6"}),star:t.jsx(pn,{className:"w-6 h-6"}),"check-circle":t.jsx(Ut,{className:"w-6 h-6"}),zap:t.jsx(al,{className:"w-6 h-6"}),"message-square":t.jsx(Or,{className:"w-6 h-6"}),phone:t.jsx(vn,{className:"w-6 h-6"}),"help-circle":t.jsx(m0,{className:"w-6 h-6"}),car:t.jsx(Mi,{className:"w-6 h-6"}),"shopping-bag":t.jsx(Uu,{className:"w-6 h-6"}),users:t.jsx(Gt,{className:"w-6 h-6"}),"bar-chart":t.jsx(Rr,{className:"w-6 h-6"}),"clipboard-list":t.jsx(vp,{className:"w-6 h-6"}),"refresh-cw":t.jsx(Qt,{className:"w-6 h-6"})})[e]||t.jsx(Xt,{className:"w-6 h-6"}),gde=({user:e,profile:s,onNavigate:a,isRTL:r})=>{var U,I,k,z,_;const{t:n,i18n:i}=Jt(),l=i.language,[o,d]=T.useState(null),[u,h]=T.useState(null),[f,x]=T.useState(0),[g,v]=T.useState(!0),[b,y]=T.useState(!1),j=q=>{if(!(q!=null&&q.businessCustomerType))return"DEFAULT";switch(q.businessCustomerType){case"PARTS_SHOP":return"PARTS_SHOP";case"RENTAL_COMPANY":return"RENTAL";case"INSURANCE_COMPANY":return"INSURANCE";case"SALES_AGENT":return"MARKETER";case"FLEET_CUSTOMER":return"RENTAL";default:return"DEFAULT"}};T.useEffect(()=>{(async()=>{v(!0);try{const L=j(s),[Q,X]=await Promise.all([xe.getHomepageConfig(L),xe.getHomepageStats(e.id)]);d(Q),h(X)}catch(L){console.error("Error loading homepage data:",L)}finally{v(!1)}})()},[e.id,s]);const w=(o==null?void 0:o.bannersConfig.banners.filter(q=>q.isActive))||[],A=T.useCallback(()=>{w.length>1&&!b&&(y(!0),setTimeout(()=>{x(q=>(q+1)%w.length),y(!1)},300))},[w.length,b]),O=T.useCallback(()=>{w.length>1&&!b&&(y(!0),setTimeout(()=>{x(q=>(q-1+w.length)%w.length),y(!1)},300))},[w.length,b]);T.useEffect(()=>{if(!(o!=null&&o.bannersConfig.autoPlayInterval)||w.length<=1)return;const q=setInterval(()=>{A()},o.bannersConfig.autoPlayInterval);return()=>clearInterval(q)},[o==null?void 0:o.bannersConfig.autoPlayInterval,w.length,A]);const C=q=>{if(!q)return;if(q.startsWith("http://")||q.startsWith("https://")){window.open(q,"_blank","noopener,noreferrer");return}["HOME","PRODUCT_SEARCH","ORDERS","QUOTE_REQUEST","IMPORT_CHINA","TRADER_TOOLS","ALTERNATIVES","ORGANIZATION","TEAM_MANAGEMENT","ABOUT","NOTIFICATIONS","HISTORY"].includes(q)?a(q):a("PRODUCT_SEARCH")};if(g)return t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});if(!o)return t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-slate-500",children:n("common.error")})});const{layoutConfig:E,bannersConfig:S,shortcutsConfig:D}=o,M=(D==null?void 0:D.shortcuts)||[];return t.jsxs("div",{className:"flex flex-col gap-8 pb-8 animate-fade-in",children:[t.jsxs("section",{className:"relative w-full rounded-3xl overflow-hidden shadow-2xl animate-slide-up",style:{background:E.heroBackgroundGradient||"linear-gradient(135deg, #081a33 0%, #102b57 100%)"},children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[t.jsx("div",{className:"absolute -top-24 -right-24 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute -bottom-24 -left-24 w-96 h-96 bg-orange-500/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-blue-600/5 rounded-full blur-3xl"})]}),t.jsxs("div",{className:"relative z-10 px-6 py-12 md:px-12 md:py-16 lg:py-20",children:[t.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full mb-6 border border-white/20",children:[t.jsx(pi,{className:"w-4 h-4 text-yellow-400"}),t.jsx("span",{className:"text-white/90 text-sm font-medium",children:n("homepage.welcomeBack",{name:e.name})})]}),t.jsx("h1",{className:"text-3xl md:text-5xl lg:text-6xl font-extrabold text-white mb-4 leading-tight",children:Al(E.heroTitle,l)}),t.jsx("p",{className:"text-slate-200 text-lg md:text-xl font-medium max-w-2xl mx-auto mb-8",children:Al(E.heroSubtitle,l)}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[E.primaryCtaLink&&t.jsxs("button",{onClick:()=>C(E.primaryCtaLink),className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white text-lg px-8 py-4 rounded-xl shadow-lg shadow-blue-600/30 font-bold transition-all hover:scale-105 active:scale-95","data-testid":"button-primary-cta",children:[t.jsx(Ft,{className:"w-5 h-5"}),Al(E.primaryCtaLabel,l),r?t.jsx(vf,{className:"w-4 h-4"}):t.jsx(el,{className:"w-4 h-4"})]}),E.secondaryCtaLink&&t.jsxs("button",{onClick:()=>C(E.secondaryCtaLink),className:"inline-flex items-center gap-2 border-2 border-white/30 text-white hover:bg-white/10 text-lg px-8 py-4 rounded-xl backdrop-blur-sm font-bold transition-all hover:scale-105 active:scale-95","data-testid":"button-secondary-cta",children:[t.jsx(Lt,{className:"w-5 h-5"}),Al(E.secondaryCtaLabel,l)]})]})]}),u&&t.jsxs("div",{className:"flex justify-center gap-8 mt-12",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white",children:u.totalOrders}),t.jsx("div",{className:"text-slate-300 text-sm",children:n("homepage.totalOrders")})]}),t.jsx("div",{className:"w-px bg-white/20"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white",children:u.pendingRequests}),t.jsx("div",{className:"text-slate-300 text-sm",children:n("homepage.pendingRequests")})]}),t.jsx("div",{className:"w-px bg-white/20 hidden md:block"}),t.jsxs("div",{className:"text-center hidden md:block",children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-emerald-400",children:u.approvedOrders}),t.jsx("div",{className:"text-slate-300 text-sm",children:n("homepage.approvedOrders")})]})]})]})]}),w.length>0&&t.jsx("section",{className:"relative animate-slide-up",style:{animationDelay:"0.1s"},children:t.jsxs("div",{className:"relative h-48 md:h-64 rounded-2xl overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 rounded-2xl overflow-hidden transition-opacity duration-300 ${b?"opacity-0":"opacity-100"}`,style:{background:(U=w[f])==null?void 0:U.backgroundColor},children:t.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-8 md:px-16",children:[t.jsxs("div",{className:"max-w-lg",children:[t.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:Al((I=w[f])==null?void 0:I.title,l)}),t.jsx("p",{className:"text-white/80 text-sm md:text-base mb-4",children:Al((k=w[f])==null?void 0:k.subtitle,l)}),t.jsxs("button",{onClick:()=>{var q;return C(((q=w[f])==null?void 0:q.ctaLink)||"HOME")},className:`inline-flex items-center gap-2 px-6 py-2 rounded-lg font-semibold transition-all hover:scale-105 ${((z=w[f])==null?void 0:z.ctaVariant)==="outline"?"border-2 border-white/50 text-white hover:bg-white/10":"bg-white text-slate-900 hover:bg-white/90"}`,"data-testid":`button-banner-cta-${f}`,children:[Al((_=w[f])==null?void 0:_.ctaLabel,l),r?t.jsx(vf,{className:"w-4 h-4"}):t.jsx(el,{className:"w-4 h-4"})]})]}),t.jsx("div",{className:"hidden md:block",children:t.jsx("div",{className:"w-32 h-32 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm",children:t.jsx(Xt,{className:"w-16 h-16 text-white/80"})})})]})}),w.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:O,className:`absolute top-1/2 -translate-y-1/2 ${r?"right-4":"left-4"} w-10 h-10 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center transition-all`,"data-testid":"button-banner-prev",children:r?t.jsx(vs,{className:"w-5 h-5 text-white"}):t.jsx(ws,{className:"w-5 h-5 text-white"})}),t.jsx("button",{onClick:A,className:`absolute top-1/2 -translate-y-1/2 ${r?"left-4":"right-4"} w-10 h-10 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full flex items-center justify-center transition-all`,"data-testid":"button-banner-next",children:r?t.jsx(ws,{className:"w-5 h-5 text-white"}):t.jsx(vs,{className:"w-5 h-5 text-white"})})]}),w.length>1&&t.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:w.map((q,L)=>t.jsx("button",{onClick:()=>{b||(y(!0),setTimeout(()=>{x(L),y(!1)},300))},className:`w-2 h-2 rounded-full transition-all ${L===f?"bg-white w-6":"bg-white/50 hover:bg-white/70"}`,"data-testid":`button-banner-dot-${L}`},L))})]})}),M&&M.length>0&&t.jsxs("section",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:[t.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800 dark:text-white mb-6",children:n("homepage.quickActions")}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:M.map((q,L)=>t.jsxs("button",{onClick:()=>C(q.link),className:"group relative bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all hover:-translate-y-1",style:{animationDelay:`${.3+L*.05}s`},"data-testid":`button-shortcut-${q.id}`,children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 ${q.colorClass||"bg-blue-600"} text-white`,children:pde(q.icon)}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm md:text-base mb-1",children:Al(q.title,l)}),t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs md:text-sm line-clamp-2",children:Al(q.description,l)}),t.jsx(Ml,{className:"absolute top-4 right-4 w-4 h-4 text-slate-300 dark:text-slate-600 group-hover:text-blue-500 transition-colors"})]},q.id))})]}),t.jsx("section",{className:"animate-slide-up",style:{animationDelay:"0.3s"},children:t.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center mb-4",children:t.jsx(Dr,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.fastShipping")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:n("homepage.fastShippingDesc")})]}),t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 rounded-2xl p-6 border border-emerald-200 dark:border-emerald-800",children:[t.jsx("div",{className:"w-12 h-12 bg-emerald-600 rounded-xl flex items-center justify-center mb-4",children:t.jsx(Ut,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.qualityGuarantee")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:n("homepage.qualityGuaranteeDesc")})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-2xl p-6 border border-purple-200 dark:border-purple-800",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mb-4",children:t.jsx(yf,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.support")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:n("homepage.supportDesc")})]})]})}),t.jsx("section",{className:"animate-slide-up",style:{animationDelay:"0.4s"},children:t.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-2xl p-8 text-center",children:[t.jsx(m0,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:n("homepage.needHelp")}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6 max-w-md mx-auto",children:n("homepage.needHelpDesc")}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[t.jsxs("a",{href:"tel:+966123456789",className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors","data-testid":"link-call-support",children:[t.jsx(vn,{className:"w-5 h-5"}),n("homepage.callUs")]}),t.jsxs("a",{href:"https://wa.me/966123456789",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors","data-testid":"link-whatsapp",children:[t.jsx(Or,{className:"w-5 h-5"}),n("homepage.whatsapp")]})]})]})})]})},bde=T.memo(({userId:e,customerType:s})=>{const{t:a,isRTL:r}=Bs(),[n,i]=T.useState([]),[l,o]=T.useState(0),[d,u]=T.useState(new Set);T.useEffect(()=>{(async()=>{const w=(await xe.getActiveCampaignsForUser(e,s)).filter(A=>A.displayType==="BANNER").sort((A,O)=>O.priority-A.priority);i(w)})()},[e,s]);const h=async y=>{await xe.dismissCampaignForUser(e,y),u(j=>{const w=new Set([...j,y]),A=n.filter(O=>!w.has(O.id)).length;return A>0&&l>=A&&o(0),w})},f=n.filter(y=>!d.has(y.id));if(f.length===0)return null;const x=f.length>0?l%f.length:0,g=f[x];if(!g)return null;const v=()=>{o(y=>(y+1)%f.length)},b=()=>{o(y=>(y-1+f.length)%f.length)};return t.jsx("div",{className:"relative bg-gradient-to-r from-brand-600 via-brand-500 to-purple-600 text-white px-4 py-3 shadow-md","data-testid":"marketing-banner",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"shrink-0 w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:t.jsx(ya,{size:16,className:"text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-bold text-sm truncate","data-testid":"text-campaign-title",children:g.title}),t.jsx("p",{className:"text-xs text-white/80 truncate","data-testid":"text-campaign-message",children:g.message})]})]}),t.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[g.ctaUrl&&g.ctaLabel&&t.jsxs("a",{href:g.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-white text-brand-600 rounded-lg text-xs font-bold hover:bg-white/90 transition-colors flex items-center gap-1","data-testid":"link-campaign-cta",children:[g.ctaLabel,t.jsx(Ml,{size:12})]}),f.length>1&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:b,className:"p-1 hover:bg-white/20 rounded transition-colors","data-testid":"button-banner-prev",children:r?t.jsx(vs,{size:16}):t.jsx(ws,{size:16})}),t.jsxs("span",{className:"text-xs text-white/70 min-w-[2rem] text-center",children:[x+1,"/",f.length]}),t.jsx("button",{onClick:v,className:"p-1 hover:bg-white/20 rounded transition-colors","data-testid":"button-banner-next",children:r?t.jsx(ws,{size:16}):t.jsx(vs,{size:16})})]}),g.skippable&&t.jsx("button",{onClick:()=>h(g.id),className:"p-1.5 hover:bg-white/20 rounded-full transition-colors",title:a("marketing.dismiss",""),"data-testid":"button-dismiss-banner",children:t.jsx(St,{size:16})})]})]})})}),vde=T.memo(({userId:e,customerType:s,onClose:a})=>{const{t:r,isRTL:n}=Bs(),[i,l]=T.useState([]),[o,d]=T.useState(0),[u,h]=T.useState(!1);T.useEffect(()=>{(async()=>{const y=(await xe.getActiveCampaignsForUser(e,s)).filter(j=>j.displayType==="POPUP").sort((j,w)=>w.priority-j.priority);y.length>0&&(l(y),setTimeout(()=>h(!0),500))})()},[e,s]);const f=async()=>{const v=i[o];v&&await xe.dismissCampaignForUser(e,v.id),o<i.length-1?d(b=>b+1):(h(!1),setTimeout(()=>{a==null||a()},300))},x=()=>{h(!1),i.forEach(v=>{xe.dismissCampaignForUser(e,v.id)}),setTimeout(()=>{a==null||a()},300)};if(i.length===0||!u)return null;const g=i[o];return g?t.jsxs("div",{className:`fixed inset-0 z-[9999] flex items-center justify-center p-4 transition-all duration-300 ${u?"opacity-100":"opacity-0 pointer-events-none"}`,"data-testid":"marketing-popup",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:g.skippable?x:void 0}),t.jsxs("div",{className:`relative bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden transform transition-all duration-300 ${u?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,dir:n?"rtl":"ltr",children:[t.jsx("div",{className:"bg-gradient-to-r from-brand-600 via-brand-500 to-purple-600 p-6",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:t.jsx(ya,{size:24,className:"text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white","data-testid":"text-popup-title",children:g.title}),i.length>1&&t.jsx("p",{className:"text-xs text-white/70",children:r("marketing.campaignOf"," {{current}}  {{total}}").replace("{{current}}",String(o+1)).replace("{{total}}",String(i.length))})]})]}),g.skippable&&t.jsx("button",{onClick:x,className:"p-2 hover:bg-white/20 rounded-full transition-colors text-white/70 hover:text-white","data-testid":"button-close-popup",children:t.jsx(St,{size:20})})]})}),t.jsxs("div",{className:"p-6",children:[g.contentType==="IMAGE"&&g.mediaUrl&&t.jsx("div",{className:"mb-4 rounded-xl overflow-hidden",children:t.jsx("img",{src:g.mediaUrl,alt:g.title,className:"w-full h-48 object-cover"})}),g.contentType==="VIDEO"&&g.mediaUrl&&t.jsx("div",{className:"mb-4 rounded-xl overflow-hidden",children:t.jsx("video",{src:g.mediaUrl,controls:!0,className:"w-full"})}),g.contentType==="HTML"&&g.htmlContent&&t.jsx("div",{className:"mb-4 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:g.htmlContent}}),t.jsx("p",{className:"text-slate-600 text-sm leading-relaxed","data-testid":"text-popup-message",children:g.message})]}),t.jsxs("div",{className:"px-6 pb-6 flex items-center justify-between gap-3",children:[g.ctaUrl&&g.ctaLabel&&t.jsxs("a",{href:g.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-3 bg-gradient-to-r from-brand-600 to-brand-500 text-white rounded-xl font-bold text-center hover:shadow-lg hover:shadow-brand-500/30 transition-all flex items-center justify-center gap-2","data-testid":"link-popup-cta",children:[g.ctaLabel,t.jsx(Ml,{size:16})]}),t.jsx("button",{onClick:f,className:`px-4 py-3 rounded-xl font-medium transition-all ${g.ctaUrl?"bg-slate-100 text-slate-600 hover:bg-slate-200":"flex-1 bg-gradient-to-r from-brand-600 to-brand-500 text-white hover:shadow-lg"}`,"data-testid":"button-dismiss-popup",children:o<i.length-1?r("marketing.next",""):r("marketing.understood","")})]})]})]}):null});T.memo(({userId:e,customerType:s})=>{const{t:a,isRTL:r}=Bs(),[n,i]=T.useState([]),[l,o]=T.useState(new Set);T.useEffect(()=>{(async()=>{const x=(await xe.getActiveCampaignsForUser(e,s)).filter(g=>g.displayType==="DASHBOARD_CARD").sort((g,v)=>v.priority-g.priority);i(x)})()},[e,s]);const d=async h=>{await xe.dismissCampaignForUser(e,h),o(f=>new Set([...f,h]))},u=n.filter(h=>!l.has(h.id));return u.length===0?null:t.jsx("div",{className:"space-y-4","data-testid":"marketing-dashboard-cards",children:u.slice(0,3).map(h=>t.jsxs("div",{className:"bg-gradient-to-r from-brand-50 to-purple-50 border border-brand-200 rounded-2xl p-4 relative","data-testid":`card-campaign-${h.id}`,children:[h.skippable&&t.jsx("button",{onClick:()=>d(h.id),className:"absolute top-2 left-2 p-1 hover:bg-white/50 rounded-full transition-colors text-slate-400 hover:text-slate-600","data-testid":`button-dismiss-card-${h.id}`,children:t.jsx(St,{size:14})}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"shrink-0 w-10 h-10 bg-gradient-to-br from-brand-500 to-purple-500 rounded-xl flex items-center justify-center",children:t.jsx(ya,{size:18,className:"text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1 truncate",children:h.title}),t.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:h.message}),h.ctaUrl&&h.ctaLabel&&t.jsxs("a",{href:h.ctaUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 mt-2 text-xs font-bold text-brand-600 hover:text-brand-700",children:[h.ctaLabel,t.jsx(Ml,{size:10})]})]})]})]},h.id))})});function uE(e){if(!e)return null;const s=e.trim();if(!s)return null;const a=Yi(s);return a.length<2?null:a}function yde(e){const s=e.trim();if(!s)return{isValid:!1,normalized:null,error:"     ."};const a=uE(s);return a?{isValid:!0,normalized:a}:{isValid:!1,normalized:null,error:"     ."}}async function Nde(e,s=!0){const a=uE(e);if(!a)return{type:"NOT_FOUND",normalizedQuery:e};const r=af(a),n=await xe.searchProducts(""),i=xe.getStockThreshold(),l=xe.getMinVisibleQty();let o=null,d=0;for(const h of n){const f=h.qtyTotal??h.stock??0;if(s&&f<l)continue;const x=h.normalizedPart||Yi(h.partNumber),g=h.numericPartCore||af(h.partNumber);let v=0;if(x===a?v=100:g===r&&r.length>3?v=80:x.includes(a)||a.includes(x)?v=50:(g.includes(r)||r.includes(g))&&r.length>4&&(v=40),v>d&&(d=v,o=h),v===100)break}return!o||d<50?{type:"NOT_FOUND",normalizedQuery:a}:(o.qtyTotal??o.stock??0)<=i?{type:"FOUND_OUT_OF_STOCK",product:o,normalizedQuery:a}:{type:"FOUND_AVAILABLE",product:o,normalizedQuery:a}}function wde(e){const s=xe.getMinVisibleQty();return e.filter(a=>(a.qtyTotal??a.stock??0)>=s)}async function Sde(e,s,a="heroSearch"){const r=yde(e);if(!r.isValid)return{type:"NOT_FOUND",message:r.error||"     .",showPrice:!1};const n=await Nde(e);switch(n.type){case"NOT_FOUND":return await jde(n.normalizedQuery||e,s,a),{type:"NOT_FOUND",normalizedQuery:n.normalizedQuery,message:"   .",showPrice:!1};case"FOUND_OUT_OF_STOCK":return await Ade(n.product,s,a,n.normalizedQuery),{type:"FOUND_OUT_OF_STOCK",product:n.product,normalizedQuery:n.normalizedQuery,message:"     .",showPrice:!1};case"FOUND_AVAILABLE":return{type:"FOUND_AVAILABLE",product:n.product,normalizedQuery:n.normalizedQuery,message:"",showPrice:!0};default:return{type:"NOT_FOUND",message:"       .",showPrice:!1}}}async function jde(e,s,a){try{await xe.logMissingPartFromSearch({partNumber:e,normalizedPartNumber:uE(e)||e,customerId:s.customerId,customerName:s.customerName,carInfo:s.carInfo,branchId:s.branchId,availabilityStatus:"not_found",searchSource:a})}catch(r){console.error("Error logging missing part (not_found):",r)}}async function Ade(e,s,a,r){try{await xe.logMissingPartFromSearch({partNumber:e.partNumber,normalizedPartNumber:r||Yi(e.partNumber),productId:e.id,productName:e.name,brand:e.brand,customerId:s.customerId,customerName:s.customerName,carInfo:s.carInfo,branchId:s.branchId,availabilityStatus:"out_of_stock",searchSource:a})}catch(n){console.error("Error logging missing part (out_of_stock):",n)}}function Ede(e){return{customerId:(e==null?void 0:e.id)||null,customerName:e==null?void 0:e.name,branchId:e==null?void 0:e.branchId}}const Cde={VIN_EXTRACTOR:"VIN",PDF_TO_EXCEL:"PDF_EXCEL",PRICE_COMPARISON:"COMPARISON"},Yo={async checkToolAccess(e,s,a){var r,n,i;try{const l=await xe.getToolConfig(e);if(!l)return{hasAccess:!1,reason:"Tool configuration not found",reasonAr:"     "};if(!l.enabled)return{hasAccess:!1,reason:"This tool is currently disabled",reasonAr:"   ",toolConfig:l};if(l.maintenanceMode)return{hasAccess:!1,reason:l.maintenanceMessage||"Tool is under maintenance",reasonAr:l.maintenanceMessage||"  ",toolConfig:l,isInMaintenanceMode:!0};const o=await xe.getCustomerToolsOverride(s);if(o&&!o.useGlobalDefaults){if((r=o.forcedDisabledTools)!=null&&r.includes(e))return{hasAccess:!1,reason:"Tool access has been disabled for your account",reasonAr:"     ",toolConfig:l};if((n=o.forcedEnabledTools)!=null&&n.includes(e)){const x=await xe.getCustomerToolUsageToday(s,e),g=await xe.getCustomerToolUsageThisMonth(s,e),v=(i=o.customLimits)==null?void 0:i.find(j=>j.toolKey===e),b=(v==null?void 0:v.maxFilesPerDay)??l.maxFilesPerDay,y=(v==null?void 0:v.maxFilesPerMonth)??l.maxFilesPerMonth;return b&&x>=b?{hasAccess:!1,reason:`Daily usage limit reached (${b} uses per day)`,reasonAr:`    (${b}   )`,toolConfig:l,usageToday:x,usageThisMonth:g,dailyLimit:b,monthlyLimit:y}:y&&g>=y?{hasAccess:!1,reason:`Monthly usage limit reached (${y} uses per month)`,reasonAr:`    (${y}   )`,toolConfig:l,usageToday:x,usageThisMonth:g,dailyLimit:b,monthlyLimit:y}:{hasAccess:!0,toolConfig:l,usageToday:x,usageThisMonth:g,dailyLimit:b,monthlyLimit:y}}}if(l.blockedCustomerIds.includes(s))return{hasAccess:!1,reason:"Tool access has been blocked for your account",reasonAr:"     ",toolConfig:l};if(a&&l.allowedCustomerTypes.length>0&&!l.allowedCustomerTypes.includes(a))return{hasAccess:!1,reason:"This tool is not available for your account type",reasonAr:"     ",toolConfig:l};const d=await xe.getCustomerToolUsageToday(s,e),u=await xe.getCustomerToolUsageThisMonth(s,e),h=l.maxFilesPerDay,f=l.maxFilesPerMonth;return h&&d>=h?{hasAccess:!1,reason:`Daily usage limit reached (${h} uses per day)`,reasonAr:`    (${h}   )`,toolConfig:l,usageToday:d,usageThisMonth:u,dailyLimit:h,monthlyLimit:f}:f&&u>=f?{hasAccess:!1,reason:`Monthly usage limit reached (${f} uses per month)`,reasonAr:`    (${f}   )`,toolConfig:l,usageToday:d,usageThisMonth:u,dailyLimit:h,monthlyLimit:f}:{hasAccess:!0,toolConfig:l,usageToday:d,usageThisMonth:u,dailyLimit:h,monthlyLimit:f}}catch(l){return console.error("Error checking tool access:",l),{hasAccess:!1,reason:"Error checking tool access",reasonAr:"      "}}},async getAllToolsAccess(e,s){const a=["PDF_TO_EXCEL","VIN_EXTRACTOR","PRICE_COMPARISON"],r={};for(const n of a)r[n]=await this.checkToolAccess(n,e,s);return r},async getVisibleTools(e,s){const a=await xe.getToolConfigs(),r=await this.getAllToolsAccess(e,s);return a.filter(n=>{var o;if(!n.enabled||!n.showInDashboardShortcuts)return!1;const i=r[n.toolKey];return i?!i.hasAccess&&i.isInMaintenanceMode?!0:n.blockedCustomerIds.includes(e)?!1:((o=r[n.toolKey])==null?void 0:o.toolConfig)?!0:!(s&&n.allowedCustomerTypes.length>0&&!n.allowedCustomerTypes.includes(s)):!1}).sort((n,i)=>(n.sortOrder||0)-(i.sortOrder||0))},async recordToolUsage(e,s,a,r=1,n,i,l){const o=await xe.getToolConfig(e);o!=null&&o.logUsageForAnalytics&&await xe.addToolUsageRecord({customerId:s,toolKey:e,usedAt:new Date().toISOString(),filesProcessed:r,success:a,errorMessage:n,processingTimeMs:i,metadata:l});const d=Cde[e];d&&await xe.logTraderToolAction(s,d,l||{},a?{filesProcessed:r}:void 0,{status:a?"SUCCESS":"FAILED",errorMessage:n,processingTimeMs:i,metadata:l})},async getToolUsageStats(e,s,a="month"){const r=await xe.getToolUsageRecords(s,e),n=new Date;let i;switch(a){case"today":i=new Date(n.getFullYear(),n.getMonth(),n.getDate());break;case"week":i=new Date(n.getTime()-10080*60*1e3);break;case"month":i=new Date(n.getFullYear(),n.getMonth(),1);break;default:i=new Date(0)}const l=r.filter(b=>new Date(b.usedAt)>=i),o=l.length,d=l.filter(b=>b.success).length,u=l.filter(b=>!b.success).length,h=l.filter(b=>b.processingTimeMs!==void 0).map(b=>b.processingTimeMs),f=h.length>0?h.reduce((b,y)=>b+y,0)/h.length:0,x=new Set(l.map(b=>b.customerId)).size,g=new Map;l.forEach(b=>{const y=b.usedAt.split("T")[0];g.set(y,(g.get(y)||0)+1)});const v=Array.from(g.entries()).map(([b,y])=>({date:b,count:y})).sort((b,y)=>b.date.localeCompare(y.date));return{totalUsage:o,successfulUsage:d,failedUsage:u,avgProcessingTime:Math.round(f),uniqueCustomers:x,byDay:v}}},Tde=({user:e,profile:s,onClose:a})=>{const{t:r,dir:n}=Bs(),{addToast:i}=Dt(),l=n==="rtl",o=T.useRef(null),[d,u]=T.useState([]),[h,f]=T.useState([]),[x,g]=T.useState(!1),[v,b]=T.useState(!1),y=M=>{if(M.target.files){const U=Array.from(M.target.files),I=U.filter(k=>k.type==="application/pdf");I.length!==U.length&&i(r("pdfToExcel.onlyPdfAllowed","   PDF"),"info"),u(k=>[...k,...I])}},j=T.useCallback(M=>{M.preventDefault(),g(!0)},[]),w=T.useCallback(M=>{M.preventDefault(),g(!1)},[]),A=T.useCallback(M=>{M.preventDefault(),g(!1);const I=Array.from(M.dataTransfer.files).filter(k=>k.type==="application/pdf");I.length>0?u(k=>[...k,...I]):i(r("pdfToExcel.onlyPdfAllowed","   PDF"),"info")},[i,r]),O=M=>{u(U=>U.filter((I,k)=>k!==M))},C=async M=>{await new Promise(k=>setTimeout(k,1500+Math.random()*1e3));const U=10+Math.floor(Math.random()*20),I=[];I.push([r("pdfToExcel.demo.partNumber"," "),r("pdfToExcel.demo.partName"," "),r("pdfToExcel.demo.quantity",""),r("pdfToExcel.demo.price",""),r("pdfToExcel.demo.total","")]);for(let k=0;k<U;k++){const z=`PT-${String(1e3+k).padStart(5,"0")}`,_=Math.floor(Math.random()*50)+1,q=Math.floor(Math.random()*500)+50;I.push([z,`${r("pdfToExcel.demo.sparePart"," ")} ${k+1}`,_,q,_*q])}return I},E=async()=>{if(d.length===0)return;b(!0);const M=Date.now(),U=d.map((I,k)=>({id:`conv-${Date.now()}-${k}`,fileName:I.name,status:"pending",progress:0}));f(U);for(let I=0;I<U.length;I++){const k=U[I];f(z=>z.map(_=>_.id===k.id?{..._,status:"processing",progress:20}:_));try{f(W=>W.map(ee=>ee.id===k.id?{...ee,progress:50}:ee));const z=await C(d[I]);f(W=>W.map(ee=>ee.id===k.id?{...ee,progress:80}:ee));const _=Ea.book_new(),q=Ea.aoa_to_sheet(z);q["!cols"]=[{wch:15},{wch:25},{wch:10},{wch:12},{wch:15}],Ea.book_append_sheet(_,q,"Sheet1");const L=tb(_,{bookType:"xlsx",type:"array"}),Q=new Blob([L],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),X=URL.createObjectURL(Q);f(W=>W.map(ee=>{var V;return ee.id===k.id?{...ee,status:"completed",progress:100,downloadUrl:X,rows:z.length,columns:((V=z[0])==null?void 0:V.length)||0,data:z}:ee})),await Yo.recordToolUsage("PDF_TO_EXCEL",e.id,!0,1,void 0,Date.now()-M)}catch{f(_=>_.map(q=>q.id===k.id?{...q,status:"error",progress:0,error:r("pdfToExcel.conversionError","   ")}:q)),await Yo.recordToolUsage("PDF_TO_EXCEL",e.id,!1,0,"Conversion failed")}}b(!1),u([]),i(r("pdfToExcel.conversionComplete","   "),"success")},S=M=>{if(M.downloadUrl){const U=document.createElement("a");U.href=M.downloadUrl,U.download=M.fileName.replace(".pdf",".xlsx"),document.body.appendChild(U),U.click(),document.body.removeChild(U)}},D=()=>{h.forEach(M=>{M.downloadUrl&&URL.revokeObjectURL(M.downloadUrl)}),f([])};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(zn,{size:32})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:r("pdfToExcel.title"," PDF  Excel")}),t.jsx("p",{className:"text-green-100 mt-1",children:r("pdfToExcel.subtitle","  PDF   Excel  ")})]})]})}),t.jsxs("div",{onDragOver:j,onDragLeave:w,onDrop:A,className:`relative border-2 border-dashed rounded-2xl p-8 text-center transition-all ${x?"border-brand-500 bg-brand-50":"border-slate-300 hover:border-brand-400 hover:bg-slate-50"}`,children:[t.jsx("input",{ref:o,type:"file",accept:".pdf",multiple:!0,onChange:y,className:"hidden","data-testid":"input-pdf-upload"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-slate-100 rounded-full flex items-center justify-center",children:t.jsx(ga,{size:32,className:"text-slate-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-slate-700",children:r("pdfToExcel.dragDrop","  PDF ")}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r("pdfToExcel.orClick","   ")})]}),t.jsxs("button",{onClick:()=>{var M;return(M=o.current)==null?void 0:M.click()},className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 hover:bg-brand-700 text-white font-bold rounded-xl transition-colors","data-testid":"button-select-pdf",children:[t.jsx(Lt,{size:20}),r("pdfToExcel.selectFiles","  PDF")]})]})]}),d.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"font-bold text-slate-800",children:[r("pdfToExcel.selectedFiles"," ")," (",d.length,")"]}),t.jsx("button",{onClick:()=>u([]),className:"text-sm text-red-500 hover:text-red-600 font-medium","data-testid":"button-clear-files",children:r("pdfToExcel.clearAll"," ")})]}),t.jsx("div",{className:"space-y-2",children:d.map((M,U)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Lt,{size:20,className:"text-red-500"}),t.jsx("span",{className:"text-sm font-medium text-slate-700 truncate max-w-[200px]",children:M.name}),t.jsxs("span",{className:"text-xs text-slate-400",children:["(",(M.size/1024).toFixed(1)," KB)"]})]}),t.jsx("button",{onClick:()=>O(U),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-remove-file-${U}`,children:t.jsx(St,{size:16})})]},U))}),t.jsx("button",{onClick:E,disabled:v,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-convert-files",children:v?t.jsxs(t.Fragment,{children:[t.jsx(as,{size:20,className:"animate-spin"}),r("pdfToExcel.converting"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(oE,{size:20}),r("pdfToExcel.convertToExcel","  Excel")]})})]}),h.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:r("pdfToExcel.results"," ")}),t.jsx("button",{onClick:D,className:"text-sm text-slate-500 hover:text-slate-600 font-medium","data-testid":"button-clear-results",children:r("pdfToExcel.clearResults"," ")})]}),t.jsx("div",{className:"space-y-3",children:h.map(M=>t.jsx("div",{className:`p-4 rounded-xl border ${M.status==="completed"?"bg-green-50 border-green-200":M.status==="error"?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[M.status==="completed"?t.jsx(Ut,{size:20,className:"text-green-600"}):M.status==="error"?t.jsx(Gs,{size:20,className:"text-red-600"}):t.jsx(as,{size:20,className:"animate-spin text-brand-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-800",children:M.fileName}),M.status==="completed"&&t.jsxs("p",{className:"text-xs text-slate-500",children:[M.rows," ",r("pdfToExcel.rows",""),"  ",M.columns," ",r("pdfToExcel.columns","")]}),M.status==="error"&&t.jsx("p",{className:"text-xs text-red-500",children:M.error})]})]}),M.status==="processing"&&t.jsx("div",{className:"w-24 bg-slate-200 rounded-full h-2",children:t.jsx("div",{className:"bg-brand-600 h-2 rounded-full transition-all duration-300",style:{width:`${M.progress}%`}})}),M.status==="completed"&&t.jsxs("button",{onClick:()=>S(M),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-bold rounded-lg transition-colors","data-testid":`button-download-${M.id}`,children:[t.jsx(cr,{size:16}),r("pdfToExcel.download","")]})]})},M.id))})]}),t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[t.jsx("h3",{className:"font-bold text-slate-800 mb-3",children:r("pdfToExcel.howToUse"," ")}),t.jsxs("ol",{className:"text-sm text-slate-600 space-y-2 list-decimal list-inside",children:[t.jsx("li",{children:r("pdfToExcel.step1","  PDF     ")}),t.jsx("li",{children:r("pdfToExcel.step2",'   "  Excel"')}),t.jsx("li",{children:r("pdfToExcel.step3","   ")}),t.jsx("li",{children:r("pdfToExcel.step4","  Excel ")})]})]})]})},OF={JT:{manufacturer:"Toyota",country:"Japan"},JH:{manufacturer:"Honda",country:"Japan"},JN:{manufacturer:"Nissan",country:"Japan"},JM:{manufacturer:"Mazda/Mitsubishi",country:"Japan"},JS:{manufacturer:"Suzuki",country:"Japan"},WA:{manufacturer:"Audi",country:"Germany"},WB:{manufacturer:"BMW",country:"Germany"},WD:{manufacturer:"Mercedes-Benz",country:"Germany"},WV:{manufacturer:"Volkswagen",country:"Germany"},WP:{manufacturer:"Porsche",country:"Germany"},"1G":{manufacturer:"General Motors",country:"USA"},"1F":{manufacturer:"Ford",country:"USA"},"2H":{manufacturer:"Honda",country:"Canada"},"3V":{manufacturer:"Volkswagen",country:"Mexico"},KM:{manufacturer:"Hyundai",country:"Korea"},KN:{manufacturer:"Kia",country:"Korea"},SA:{manufacturer:"Land Rover",country:"UK"},SB:{manufacturer:"Bentley",country:"UK"},SJ:{manufacturer:"Jaguar",country:"UK"},ZA:{manufacturer:"Alfa Romeo",country:"Italy"},ZF:{manufacturer:"Ferrari",country:"Italy"},ZH:{manufacturer:"Maserati",country:"Italy"}},_de=()=>{const e=Object.keys(OF),s=e[Math.floor(Math.random()*e.length)],a="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let r=s;for(let n=0;n<15;n++)r+=a[Math.floor(Math.random()*a.length)];return r.substring(0,17)},m5=e=>{var l;const s=e.substring(0,2).toUpperCase(),a=OF[s],r={A:"2010",B:"2011",C:"2012",D:"2013",E:"2014",F:"2015",G:"2016",H:"2017",J:"2018",K:"2019",L:"2020",M:"2021",N:"2022",P:"2023",R:"2024",S:"2025"},n=((l=e[9])==null?void 0:l.toUpperCase())||"",i=r[n]||"20"+(Math.floor(Math.random()*5)+20);return{manufacturer:(a==null?void 0:a.manufacturer)||"Unknown",country:(a==null?void 0:a.country)||"Unknown",year:i,model:"Model "+e.substring(3,6)}},kde=({user:e,profile:s,onClose:a})=>{const{t:r,dir:n}=Bs(),{addToast:i}=Dt(),l=n==="rtl",o=T.useRef(null),[d,u]=T.useState([]),[h,f]=T.useState([]),[x,g]=T.useState(!1),[v,b]=T.useState(!1),[y,j]=T.useState(""),w=I=>{if(I.target.files){const k=Array.from(I.target.files),z=k.filter(_=>_.type.startsWith("image/"));z.length!==k.length&&i(r("vinExtractor.onlyImagesAllowed","   "),"info"),u(_=>[..._,...z])}},A=T.useCallback(I=>{I.preventDefault(),g(!0)},[]),O=T.useCallback(I=>{I.preventDefault(),g(!1)},[]),C=T.useCallback(I=>{I.preventDefault(),g(!1);const z=Array.from(I.dataTransfer.files).filter(_=>_.type.startsWith("image/"));z.length>0?u(_=>[..._,...z]):i(r("vinExtractor.onlyImagesAllowed","   "),"info")},[i,r]),E=I=>{u(k=>k.filter((z,_)=>_!==I))},S=async()=>{if(d.length===0)return;b(!0);const I=Date.now(),k=d.map((z,_)=>({id:`ext-${Date.now()}-${_}`,fileName:z.name,imageUrl:URL.createObjectURL(z),status:"pending"}));f(k);for(let z=0;z<k.length;z++){const _=k[z];f(q=>q.map(L=>L.id===_.id?{...L,status:"processing"}:L));try{if(await new Promise(L=>setTimeout(L,1500+Math.random()*1500)),Math.random()>.15){const L=_de(),Q=m5(L),X=85+Math.floor(Math.random()*15);f(W=>W.map(ee=>ee.id===_.id?{...ee,status:"completed",vin:L,confidence:X,vehicleInfo:Q}:ee)),await Yo.recordToolUsage("VIN_EXTRACTOR",e.id,!0,1,void 0,Date.now()-I,{vin:L,confidence:X})}else throw new Error("Could not extract VIN from image")}catch{f(L=>L.map(Q=>Q.id===_.id?{...Q,status:"error",error:r("vinExtractor.extractionError","       ")}:Q)),await Yo.recordToolUsage("VIN_EXTRACTOR",e.id,!1,0,"Extraction failed")}}b(!1),u([]),i(r("vinExtractor.processingComplete","  "),"success")},D=I=>{navigator.clipboard.writeText(I),i(r("vinExtractor.vinCopied","   "),"success")},M=()=>{if(y.length!==17){i(r("vinExtractor.invalidVinLength","     17 "),"error");return}const I=m5(y),k={id:`manual-${Date.now()}`,fileName:r("vinExtractor.manualEntry"," "),imageUrl:"",status:"completed",vin:y.toUpperCase(),confidence:100,vehicleInfo:I};f(z=>[k,...z]),j(""),i(r("vinExtractor.vinDecoded","    "),"success")},U=()=>{h.forEach(I=>{I.imageUrl&&URL.revokeObjectURL(I.imageUrl)}),f([])};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(Mi,{size:32})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:r("vinExtractor.title","   (VIN)")}),t.jsx("p",{className:"text-blue-100 mt-1",children:r("vinExtractor.subtitle","     ")})]})]})}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4",children:[t.jsx("h3",{className:"font-bold text-slate-800 mb-3",children:r("vinExtractor.manualInput","   ")}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"text",value:y,onChange:I=>j(I.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,17)),placeholder:r("vinExtractor.enterVin","   (17 )"),className:"flex-1 px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent font-mono tracking-wider","data-testid":"input-manual-vin"}),t.jsxs("button",{onClick:M,disabled:y.length!==17,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-lookup-vin",children:[t.jsx(Ft,{size:20}),r("vinExtractor.lookup","")]})]}),t.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[y.length,"/17 ",r("vinExtractor.characters","")]})]}),t.jsxs("div",{onDragOver:A,onDragLeave:O,onDrop:C,className:`relative border-2 border-dashed rounded-2xl p-8 text-center transition-all ${x?"border-brand-500 bg-brand-50":"border-slate-300 hover:border-brand-400 hover:bg-slate-50"}`,children:[t.jsx("input",{ref:o,type:"file",accept:"image/*",multiple:!0,onChange:w,className:"hidden","data-testid":"input-image-upload"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto bg-slate-100 rounded-full flex items-center justify-center",children:t.jsx(Qte,{size:32,className:"text-slate-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-slate-700",children:r("vinExtractor.dragDrop","     ")}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r("vinExtractor.supportedFormats","       VIN")})]}),t.jsxs("button",{onClick:()=>{var I;return(I=o.current)==null?void 0:I.click()},className:"inline-flex items-center gap-2 px-6 py-3 bg-brand-600 hover:bg-brand-700 text-white font-bold rounded-xl transition-colors","data-testid":"button-select-images",children:[t.jsx(tl,{size:20}),r("vinExtractor.selectImages"," ")]})]})]}),d.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"font-bold text-slate-800",children:[r("vinExtractor.selectedImages"," ")," (",d.length,")"]}),t.jsx("button",{onClick:()=>u([]),className:"text-sm text-red-500 hover:text-red-600 font-medium","data-testid":"button-clear-images",children:r("vinExtractor.clearAll"," ")})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:d.map((I,k)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:URL.createObjectURL(I),alt:I.name,className:"w-full h-24 object-cover rounded-xl"}),t.jsx("button",{onClick:()=>E(k),className:"absolute top-1 right-1 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`button-remove-image-${k}`,children:t.jsx(St,{size:12})}),t.jsx("p",{className:"text-xs text-slate-500 truncate mt-1",children:I.name})]},k))}),t.jsx("button",{onClick:S,disabled:v,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-extract-vin",children:v?t.jsxs(t.Fragment,{children:[t.jsx(as,{size:20,className:"animate-spin"}),r("vinExtractor.processing"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(Mi,{size:20}),r("vinExtractor.extractVin","  ")]})})]}),h.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:r("vinExtractor.results","")}),t.jsx("button",{onClick:U,className:"text-sm text-slate-500 hover:text-slate-600 font-medium","data-testid":"button-clear-vin-results",children:r("vinExtractor.clearResults"," ")})]}),t.jsx("div",{className:"space-y-4",children:h.map(I=>t.jsx("div",{className:`p-4 rounded-xl border ${I.status==="completed"?"bg-green-50 border-green-200":I.status==="error"?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[I.imageUrl&&t.jsx("img",{src:I.imageUrl,alt:I.fileName,className:"w-16 h-16 object-cover rounded-lg shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[I.status==="completed"?t.jsx(Ut,{size:18,className:"text-green-600"}):I.status==="error"?t.jsx(Gs,{size:18,className:"text-red-600"}):t.jsx(as,{size:18,className:"animate-spin text-brand-600"}),t.jsx("span",{className:"font-medium text-slate-700 truncate",children:I.fileName})]}),I.status==="completed"&&I.vin&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"text-lg font-mono font-bold text-slate-800 bg-white px-3 py-1 rounded-lg border",children:I.vin}),t.jsx("button",{onClick:()=>D(I.vin),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-brand-50 rounded-lg transition-colors","data-testid":`button-copy-vin-${I.id}`,children:t.jsx($p,{size:16})})]}),I.vehicleInfo&&t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.manufacturer"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-800 ms-2",children:I.vehicleInfo.manufacturer})]}),t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.year"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-800 ms-2",children:I.vehicleInfo.year})]}),t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.country"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-800 ms-2",children:I.vehicleInfo.country})]}),t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("span",{className:"text-slate-500",children:[r("vinExtractor.confidence",""),":"]}),t.jsxs("span",{className:"font-medium text-green-600 ms-2",children:[I.confidence,"%"]})]})]})]}),I.status==="error"&&t.jsx("p",{className:"text-sm text-red-600",children:I.error})]})]})},I.id))})]}),t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6",children:[t.jsx("h3",{className:"font-bold text-slate-800 mb-3",children:r("vinExtractor.tips","    ")}),t.jsxs("ul",{className:"text-sm text-slate-600 space-y-2 list-disc list-inside",children:[t.jsx("li",{children:r("vinExtractor.tip1","     ")}),t.jsx("li",{children:r("vinExtractor.tip2","       ")}),t.jsx("li",{children:r("vinExtractor.tip3"," VIN       ")}),t.jsx("li",{children:r("vinExtractor.tip4","    17  ")})]})]})]})},Ode=[{id:"sup1",name:"  ",rating:4.8},{id:"sup2",name:"  ",rating:4.5},{id:"sup3",name:" ",rating:4.2},{id:"sup4",name:" ",rating:4.6},{id:"sup5",name:" ",rating:4}],Ide=e=>{const s=[...Ode].sort(()=>Math.random()-.5),a=3+Math.floor(Math.random()*3);return s.slice(0,a).map((r,n)=>{const i=.7+Math.random()*.6,l=Math.round(e*i),d=Math.random()>.6?Math.round(l*(1+Math.random()*.3)):void 0,u=d?Math.round((d-l)/d*100):void 0;return{supplierId:r.id,supplierName:r.name,price:l,originalPrice:d,discount:u,inStock:Math.random()>.2,stockQuantity:Math.floor(Math.random()*50)+1,deliveryDays:Math.floor(Math.random()*5)+1,rating:r.rating}}).sort((r,n)=>r.price-n.price).map((r,n)=>({...r,isBestPrice:n===0,isFastest:r.deliveryDays===Math.min(...s.slice(0,a).map(()=>Math.floor(Math.random()*5)+1)),isRecommended:n===0&&r.rating>=4.5}))},Rde=({user:e,profile:s,onClose:a})=>{const{t:r,dir:n}=Bs(),{addToast:i}=Dt(),l=n==="rtl",[o,d]=T.useState(""),[u,h]=T.useState(!1),[f,x]=T.useState(null),[g,v]=T.useState([]),[b,y]=T.useState("price");T.useEffect(()=>{const C=localStorage.getItem(`price_comparison_history_${e.id}`);if(C)try{v(JSON.parse(C))}catch(E){console.error("Failed to parse search history:",E)}},[e.id]);const j=C=>{const S=[{partNumber:C.partNumber,partName:C.partName,searchedAt:C.searchedAt,lowestPrice:C.lowestPrice,suppliersCount:C.suppliers.length},...g.filter(D=>D.partNumber!==C.partNumber)].slice(0,10);v(S),localStorage.setItem(`price_comparison_history_${e.id}`,JSON.stringify(S))},w=async(C,E)=>{C==null||C.preventDefault();const S=E||o.trim();if(!S)return;h(!0);const D=Date.now();try{await new Promise(X=>setTimeout(X,1e3+Math.random()*1e3));const U=(await xe.searchProducts(S))[0];if(!U){i(r("priceComparison.noProductFound","      "),"info"),h(!1);return}const I=U.price||100+Math.random()*500,k=Ide(I),z=k.map(X=>X.price),_=Math.min(...z),q=Math.max(...z),L=Math.round(z.reduce((X,W)=>X+W,0)/z.length),Q={partNumber:U.partNumber,partName:U.name,suppliers:k,searchedAt:new Date().toISOString(),averagePrice:L,lowestPrice:_,highestPrice:q,priceDifference:q-_};x(Q),j(Q),await Yo.recordToolUsage("PRICE_COMPARISON",e.id,!0,1,void 0,Date.now()-D,{partNumber:U.partNumber,suppliersCount:k.length}),i(r("priceComparison.searchComplete","  "),"success")}catch(M){console.error("Search failed:",M),i(r("priceComparison.searchError","   "),"error"),await Yo.recordToolUsage("PRICE_COMPARISON",e.id,!1,0,"Search failed")}finally{h(!1)}},A=()=>{if(!f)return[];const C=[...f.suppliers];switch(b){case"price":return C.sort((E,S)=>E.price-S.price);case"rating":return C.sort((E,S)=>S.rating-E.rating);case"delivery":return C.sort((E,S)=>E.deliveryDays-S.deliveryDays);default:return C}},O=()=>{v([]),localStorage.removeItem(`price_comparison_history_${e.id}`),i(r("priceComparison.historyCleared","   "),"success")};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-violet-600 rounded-2xl p-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(Mo,{size:32})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:r("priceComparison.title"," ")}),t.jsx("p",{className:"text-purple-100 mt-1",children:r("priceComparison.subtitle","        ")})]})]})}),t.jsx("form",{onSubmit:w,className:"bg-white rounded-2xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Ft,{size:20,className:`absolute top-1/2 -translate-y-1/2 ${l?"right-4":"left-4"} text-slate-400`}),t.jsx("input",{type:"text",value:o,onChange:C=>d(C.target.value),placeholder:r("priceComparison.searchPlaceholder","   ..."),className:`w-full ${l?"pr-12 pl-4":"pl-12 pr-4"} py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent`,"data-testid":"input-part-search"})]}),t.jsx("button",{type:"submit",disabled:u||!o.trim(),className:"flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-slate-300 text-white font-bold rounded-xl transition-colors","data-testid":"button-compare-prices",children:u?t.jsxs(t.Fragment,{children:[t.jsx(as,{size:20,className:"animate-spin"}),r("priceComparison.searching"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(Mo,{size:20}),r("priceComparison.compare","")]})})]})}),f&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-slate-800",children:f.partName}),t.jsx("p",{className:"text-slate-500 font-mono",children:f.partNumber})]}),t.jsx("button",{onClick:()=>x(null),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-results",children:t.jsx(St,{size:20})})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[t.jsx(qre,{size:24,className:"text-green-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-green-600 font-medium",children:r("priceComparison.lowestPrice"," ")}),t.jsxs("p",{className:"text-xl font-bold text-green-700",children:[f.lowestPrice," ",r("common.sar",".")]})]}),t.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[t.jsx(gi,{size:24,className:"text-red-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-red-600 font-medium",children:r("priceComparison.highestPrice"," ")}),t.jsxs("p",{className:"text-xl font-bold text-red-700",children:[f.highestPrice," ",r("common.sar",".")]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[t.jsx(or,{size:24,className:"text-blue-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-blue-600 font-medium",children:r("priceComparison.avgPrice"," ")}),t.jsxs("p",{className:"text-xl font-bold text-blue-700",children:[f.averagePrice," ",r("common.sar",".")]})]}),t.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[t.jsx(Do,{size:24,className:"text-purple-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs text-purple-600 font-medium",children:r("priceComparison.savings"," ")}),t.jsxs("p",{className:"text-xl font-bold text-purple-700",children:[f.priceDifference," ",r("common.sar",".")]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-slate-600",children:[r("priceComparison.sortBy"," "),":"]}),t.jsx("div",{className:"flex gap-2",children:[{key:"price",label:r("priceComparison.sortPrice","")},{key:"rating",label:r("priceComparison.sortRating","")},{key:"delivery",label:r("priceComparison.sortDelivery","")}].map(C=>t.jsx("button",{onClick:()=>y(C.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b===C.key?"bg-purple-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`button-sort-${C.key}`,children:C.label},C.key))})]}),t.jsx("div",{className:"space-y-3",children:A().map((C,E)=>t.jsx("div",{className:`bg-white rounded-2xl border-2 p-4 transition-all ${C.isBestPrice?"border-green-400 bg-green-50/30":"border-slate-200 hover:border-slate-300"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg ${E===0?"bg-green-600 text-white":"bg-slate-100 text-slate-600"}`,children:E+1}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-bold text-slate-800",children:C.supplierName}),C.isRecommended&&t.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:r("priceComparison.recommended"," ")}),C.isBestPrice&&t.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs font-bold rounded-full",children:r("priceComparison.bestPrice"," ")})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-slate-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(pn,{size:14,className:"text-yellow-500 fill-yellow-500"}),C.rating]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(os,{size:14}),C.deliveryDays," ",r("priceComparison.days","")]}),t.jsxs("span",{className:`flex items-center gap-1 ${C.inStock?"text-green-600":"text-red-500"}`,children:[t.jsx(Xt,{size:14}),C.inStock?`${C.stockQuantity} ${r("priceComparison.inStock","")}`:r("priceComparison.outOfStock"," ")]})]})]})]}),t.jsxs("div",{className:`text-${l?"left":"right"}`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl font-bold text-slate-800",children:C.price}),t.jsx("span",{className:"text-slate-500",children:r("common.sar",".")})]}),C.originalPrice&&C.discount&&t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"line-through text-slate-400",children:C.originalPrice}),t.jsxs("span",{className:"text-green-600 font-bold",children:["-",C.discount,"%"]})]})]})]})},C.supplierId))})]}),g.length>0&&!f&&t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:r("priceComparison.recentSearches","  ")}),t.jsx("button",{onClick:O,className:"text-sm text-slate-500 hover:text-red-500 font-medium","data-testid":"button-clear-history",children:r("priceComparison.clearHistory"," ")})]}),t.jsx("div",{className:"space-y-2",children:g.map((C,E)=>t.jsxs("button",{onClick:()=>w(void 0,C.partNumber),className:"w-full flex items-center justify-between p-3 bg-slate-50 hover:bg-slate-100 rounded-xl transition-colors text-left","data-testid":`button-history-${E}`,children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-800",children:C.partName}),t.jsx("p",{className:"text-sm text-slate-500 font-mono",children:C.partNumber})]}),t.jsxs("div",{className:`text-${l?"left":"right"}`,children:[t.jsxs("p",{className:"font-bold text-green-600",children:[C.lowestPrice," ",r("common.sar",".")]}),t.jsxs("p",{className:"text-xs text-slate-400",children:[C.suppliersCount," ",r("priceComparison.suppliers","")]})]})]},E))})]}),!f&&g.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Mo,{size:64,className:"text-slate-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-slate-600",children:r("priceComparison.emptyState","     ")}),t.jsx("p",{className:"text-slate-500 mt-2",children:r("priceComparison.emptyStateDesc","      ")})]}),t.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6",children:[t.jsx("h3",{className:"font-bold text-purple-800 mb-3",children:r("priceComparison.tips","    ")}),t.jsxs("ul",{className:"text-sm text-purple-700 space-y-2 list-disc list-inside",children:[t.jsx("li",{children:r("priceComparison.tip1","      ")}),t.jsx("li",{children:r("priceComparison.tip2","        ")}),t.jsx("li",{children:r("priceComparison.tip3","     ")}),t.jsx("li",{children:r("priceComparison.tip4","       ")})]})]})]})},p1=({toolKey:e,icon:s,title:a,description:r,access:n,onSelect:i,isRTL:l})=>{const{t:o}=Bs(),d=n.hasAccess,u=n.isInMaintenanceMode,h=()=>u?t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-700",children:[t.jsx(Km,{size:12}),o("traderTools.maintenance"," ")]}):d?t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700",children:[t.jsx(Ut,{size:12}),o("traderTools.available","")]}):t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600",children:[t.jsx(wa,{size:12}),o("traderTools.noAccess"," ")]}),f=()=>{if(!d||n.usageToday===void 0&&n.usageThisMonth===void 0)return null;const x=n.dailyLimit?`${n.usageToday||0}/${n.dailyLimit}`:null,g=n.monthlyLimit?`${n.usageThisMonth||0}/${n.monthlyLimit}`:null;return!x&&!g?null:t.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mt-2",children:[x&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(os,{size:12}),o("traderTools.dailyUsage",""),": ",x]}),g&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Rr,{size:12}),o("traderTools.monthlyUsage",""),": ",g]})]})};return t.jsx("button",{onClick:i,disabled:!d,className:`group relative w-full text-${l?"right":"left"} p-6 rounded-2xl border-2 transition-all duration-200 ${d?"bg-white hover:bg-slate-50 border-slate-200 hover:border-brand-500 hover:shadow-lg cursor-pointer":u?"bg-amber-50/50 border-amber-200 cursor-not-allowed":"bg-slate-50 border-slate-200 cursor-not-allowed opacity-70"}`,"data-testid":`tool-card-${e.toLowerCase().replace("_","-")}`,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${d?"bg-gradient-to-br from-brand-500 to-brand-700 text-white shadow-lg shadow-brand-500/30":u?"bg-amber-200 text-amber-700":"bg-slate-200 text-slate-500"}`,children:s}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 truncate",children:a}),h()]}),t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:r}),f(),!d&&!u&&n.reason&&t.jsxs("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[t.jsx(Gs,{size:12}),l?n.reasonAr:n.reason]})]}),d&&t.jsx(vs,{size:20,className:`text-slate-400 group-hover:text-brand-600 transition-transform ${l?"rotate-180 group-hover:-translate-x-1":"group-hover:translate-x-1"}`})]})})},Pde=({user:e,profile:s})=>{const{t:a,dir:r}=Bs(),{addToast:n}=Dt(),i=r==="rtl",[l,o]=T.useState(!0),[d,u]=T.useState({}),[h,f]=T.useState("NONE");T.useEffect(()=>{(async()=>{o(!0);try{const b=await Yo.getAllToolsAccess(e.id,s==null?void 0:s.customerType);u(b)}catch(b){console.error("Failed to load tools access:",b),n(a("traderTools.loadError","    "),"error")}finally{o(!1)}})()},[e.id,s==null?void 0:s.customerType]);const x=v=>{const b=d[v];b!=null&&b.hasAccess?f(v):b!=null&&b.isInMaintenanceMode&&n(a("traderTools.maintenanceMessage","    "),"info")},g=()=>{f("NONE")};if(l)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(as,{size:48,className:"animate-spin text-brand-600 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600 font-medium",children:a("traderTools.loading","  ...")})]})});if(h!=="NONE"){const v={PDF_TO_EXCEL:Tde,VIN_EXTRACTOR:kde,PRICE_COMPARISON:Rde}[h];return t.jsxs("div",{className:"animate-fade-in",children:[t.jsxs("button",{onClick:g,className:"mb-6 flex items-center gap-2 text-slate-600 hover:text-brand-600 transition-colors font-medium","data-testid":"button-back-to-tools",children:[t.jsx(vs,{size:20,className:i?"":"rotate-180"}),a("traderTools.backToTools","  ")]}),t.jsx(v,{user:e,profile:s,onClose:g})]})}return t.jsxs("div",{className:"animate-fade-in space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-[#081a33] to-[#102b57] rounded-3xl p-8 text-white",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("div",{className:"p-3 bg-white/10 rounded-xl backdrop-blur-sm",children:t.jsx(sc,{size:32})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:a("traderTools.title"," ")}),t.jsx("p",{className:"text-slate-300 mt-1",children:a("traderTools.subtitle","    ")})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsx(zn,{size:24,className:"text-green-400 mb-2"}),t.jsx("p",{className:"text-sm text-slate-300",children:a("traderTools.pdfConversion"," PDF")})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsx(Mi,{size:24,className:"text-blue-400 mb-2"}),t.jsx("p",{className:"text-sm text-slate-300",children:a("traderTools.vinExtraction"," VIN")})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsx(Mo,{size:24,className:"text-purple-400 mb-2"}),t.jsx("p",{className:"text-sm text-slate-300",children:a("traderTools.priceComparison"," ")})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:a("traderTools.availableTools"," ")}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsx(p1,{toolKey:"PDF_TO_EXCEL",icon:t.jsx(zn,{size:24}),title:a("traderTools.pdfToExcel.title"," PDF  Excel"),description:a("traderTools.pdfToExcel.description","  PDF       Excel  "),access:d.PDF_TO_EXCEL||{hasAccess:!1},onSelect:()=>x("PDF_TO_EXCEL"),isRTL:i}),t.jsx(p1,{toolKey:"VIN_EXTRACTOR",icon:t.jsx(Mi,{size:24}),title:a("traderTools.vinExtractor.title","   (VIN)"),description:a("traderTools.vinExtractor.description","       "),access:d.VIN_EXTRACTOR||{hasAccess:!1},onSelect:()=>x("VIN_EXTRACTOR"),isRTL:i}),t.jsx(p1,{toolKey:"PRICE_COMPARISON",icon:t.jsx(Mo,{size:24}),title:a("traderTools.priceComparison.title"," "),description:a("traderTools.priceComparison.description","        "),access:d.PRICE_COMPARISON||{hasAccess:!1},onSelect:()=>x("PRICE_COMPARISON"),isRTL:i})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(mi,{size:24,className:"text-blue-600 shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:a("traderTools.tips.title"," ")}),t.jsxs("ul",{className:"text-sm text-blue-700 space-y-1.5 list-disc list-inside",children:[t.jsx("li",{children:a("traderTools.tips.tip1","         ")}),t.jsx("li",{children:a("traderTools.tips.tip2","      ")}),t.jsx("li",{children:a("traderTools.tips.tip3","     ")})]})]})]})})]})},IF={VIN:{ar:" VIN",en:"VIN Extraction",icon:t.jsx(Mi,{size:16})},PDF_EXCEL:{ar:" PDF  Excel",en:"PDF to Excel",icon:t.jsx(zn,{size:16})},COMPARISON:{ar:" ",en:"Price Comparison",icon:t.jsx(Mo,{size:16})},ALTERNATIVES:{ar:" ",en:"Alternatives Upload",icon:t.jsx(ga,{size:16})},SEARCH:{ar:" ",en:"Product Search",icon:t.jsx(Ft,{size:16})},EXCEL_QUOTE:{ar:"  Excel",en:"Excel Quote",icon:t.jsx(oE,{size:16})}},RF={SUCCESS:{ar:"",en:"Success",color:"bg-green-100 text-green-700 border-green-200",icon:t.jsx(Ut,{size:14})},FAILED:{ar:"",en:"Failed",color:"bg-red-100 text-red-700 border-red-200",icon:t.jsx(Zs,{size:14})},PENDING:{ar:" ",en:"Pending",color:"bg-amber-100 text-amber-700 border-amber-200",icon:t.jsx(os,{size:14})},PROCESSING:{ar:" ",en:"Processing",color:"bg-blue-100 text-blue-700 border-blue-200",icon:t.jsx(as,{size:14,className:"animate-spin"})}},f5=({status:e,isRTL:s})=>{const a=RF[e];return t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold border ${a.color}`,children:[a.icon,s?a.ar:a.en]})},h5=({toolType:e,isRTL:s})=>{const a=IF[e];return t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-brand-100 text-brand-700 border border-brand-200",children:[a.icon,s?a.ar:a.en]})},Dde=({user:e})=>{const{t:s,dir:a}=Bs(),{addToast:r}=Dt(),n=a==="rtl",[i,l]=T.useState(!0),[o,d]=T.useState([]),[u,h]=T.useState(0),[f,x]=T.useState("ALL"),[g,v]=T.useState("ALL"),[b,y]=T.useState(""),[j,w]=T.useState(""),[A,O]=T.useState(1),C=20,[E,S]=T.useState(null);T.useEffect(()=>{(async()=>{l(!0);try{await xe.initializeTraderToolsDemoData(e.id);const z={page:A,pageSize:C,toolType:f==="ALL"?void 0:f,status:g==="ALL"?void 0:g,dateFrom:b||void 0,dateTo:j||void 0},_=await xe.getTraderToolActionsCustomer(e.id,z);d(_.items),h(_.total)}catch(z){console.error("Failed to load tool history:",z),r(s("traderHistory.loadError","    "),"error")}finally{l(!1)}})()},[e.id,A,f,g,b,j]),T.useEffect(()=>{O(1)},[f,g,b,j]);const D=Math.ceil(u/C),M=k=>{const{toolType:z,metadata:_,inputData:q}=k;switch(z){case"VIN":return(_==null?void 0:_.vin)||(q==null?void 0:q.imageFile)||"-";case"PDF_EXCEL":return k.inputFileName||(q==null?void 0:q.fileName)||"-";case"COMPARISON":return(_==null?void 0:_.partNumber)||(_==null?void 0:_.partName)||(q==null?void 0:q.partNumber)||"-";case"SEARCH":return(_==null?void 0:_.searchQuery)||(q==null?void 0:q.query)||"-";case"EXCEL_QUOTE":return k.inputFileName||`${(_==null?void 0:_.itemsCount)||0} ${n?"":"items"}`;case"ALTERNATIVES":return k.inputFileName||"-";default:return"-"}},U=k=>{const{toolType:z,metadata:_,outputData:q}=k;switch(z){case"VIN":return _!=null&&_.manufacturer&&(_!=null&&_.year)?`${_.manufacturer} ${_.model||""} (${_.year})`:"-";case"PDF_EXCEL":return _!=null&&_.rowCount?`${_.rowCount} ${n?"":"rows"}, ${_.columnCount} ${n?"":"cols"}`:"-";case"COMPARISON":return _!=null&&_.suppliersCount?`${_.suppliersCount} ${n?"":"suppliers"} | ${_.lowestPrice} - ${_.highestPrice}`:"-";case"SEARCH":return(_==null?void 0:_.resultsCount)!==void 0?`${_.resultsCount} ${n?"":"results"}`:"-";case"EXCEL_QUOTE":return(_==null?void 0:_.quotedTotal)!==void 0?`${_.quotedTotal.toLocaleString()} ${n?".":"SAR"}`:"-";case"ALTERNATIVES":return q?JSON.stringify(q).substring(0,50):"-";default:return"-"}},I=()=>{x("ALL"),v("ALL"),y(""),w("")};return T.useMemo(()=>({total:o.length,success:o.filter(k=>k.status==="SUCCESS").length,failed:o.filter(k=>k.status==="FAILED").length}),[o]),t.jsxs("div",{className:"p-4 md:p-6 space-y-6",dir:a,children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(xn,{className:"text-brand-600",size:28}),s("traderHistory.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:s("traderHistory.subtitle","     ")})]}),t.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 px-4 py-2 flex items-center gap-3",children:[t.jsxs("span",{className:"text-slate-500 text-sm",children:[s("traderHistory.totalUsage",""),":"]}),t.jsx("span",{className:"font-bold text-lg text-brand-700","data-testid":"text-total-usage",children:u})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(tc,{size:18,className:"text-slate-500"}),t.jsx("span",{className:"font-semibold text-slate-700",children:s("traderHistory.filters","")})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.toolType"," ")}),t.jsxs("select",{value:f,onChange:k=>x(k.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-tool-type",children:[t.jsx("option",{value:"ALL",children:s("common.all","")}),Object.entries(IF).map(([k,z])=>t.jsx("option",{value:k,children:n?z.ar:z.en},k))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.status","")}),t.jsxs("select",{value:g,onChange:k=>v(k.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-status",children:[t.jsx("option",{value:"ALL",children:s("common.all","")}),Object.entries(RF).map(([k,z])=>t.jsx("option",{value:k,children:n?z.ar:z.en},k))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.dateFrom"," ")}),t.jsx("input",{type:"date",value:b,onChange:k=>y(k.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-from"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:s("traderHistory.dateTo"," ")}),t.jsx("input",{type:"date",value:j,onChange:k=>w(k.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-to"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:I,className:"px-4 py-2 text-sm text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors","data-testid":"button-clear-filters",children:s("common.clearFilters"," ")})})]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:i?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(as,{className:"animate-spin text-brand-600",size:40})}):o.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[t.jsx(xn,{size:60,className:"mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-semibold",children:s("traderHistory.noRecords","  ")}),t.jsx("p",{className:"text-sm",children:s("traderHistory.noRecordsDesc","     ")})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[800px]",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.date","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.tool","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.input","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.output","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.status","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-xs font-semibold text-slate-600 uppercase`,children:s("traderHistory.col.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:o.map(k=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>S(k),"data-testid":`row-action-${k.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm text-slate-700 font-medium",children:Jo(k.createdAt)}),t.jsx("div",{className:"text-xs text-slate-400",children:hs(k.createdAt).split(" ").slice(-1)[0]})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(h5,{toolType:k.toolType,isRTL:n})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-700 truncate max-w-[200px] block",children:M(k)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[200px] block",children:U(k)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(f5,{status:k.status,isRTL:n})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[k.outputFileUrl&&t.jsx("button",{onClick:z=>{z.stopPropagation()},className:"p-1.5 text-slate-400 hover:text-brand-600 transition-colors",title:s("common.download",""),"data-testid":`button-download-${k.id}`,children:t.jsx(cr,{size:16})}),t.jsx("button",{onClick:z=>{z.stopPropagation(),S(k)},className:"p-1.5 text-slate-400 hover:text-brand-600 transition-colors",title:s("common.details",""),"data-testid":`button-details-${k.id}`,children:t.jsx(Lt,{size:16})})]})})]},k.id))})]})}),D>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:[s("common.showing","")," ",(A-1)*C+1,"-",Math.min(A*C,u)," ",s("common.of","")," ",u]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>O(k=>Math.max(1,k-1)),disabled:A===1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-prev-page",children:n?t.jsx(vs,{size:18}):t.jsx(ws,{size:18})}),t.jsxs("span",{className:"text-sm text-slate-600 px-3",children:[A," / ",D]}),t.jsx("button",{onClick:()=>O(k=>Math.min(D,k+1)),disabled:A===D,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-next-page",children:n?t.jsx(ws,{size:18}):t.jsx(vs,{size:18})})]})]})]})}),E&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>S(null),children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[80vh] overflow-y-auto",onClick:k=>k.stopPropagation(),dir:a,children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:s("traderHistory.detailsTitle"," ")}),t.jsx("button",{onClick:()=>S(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-modal",children:t.jsx(Zs,{size:20,className:"text-slate-400"})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.tool","")}),t.jsx("div",{className:"mt-1",children:t.jsx(h5,{toolType:E.toolType,isRTL:n})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.status","")}),t.jsx("div",{className:"mt-1",children:t.jsx(f5,{status:E.status,isRTL:n})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.date","")}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:hs(E.createdAt)})]}),E.processingTimeMs&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.processingTime"," ")}),t.jsxs("p",{className:"text-sm text-slate-700",children:[(E.processingTimeMs/1e3).toFixed(2)," ",s("common.seconds","")]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.input","")}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:M(E)}),E.inputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(Lt,{size:12}),E.inputFileName]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.col.output","")}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:U(E)}),E.outputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(Lt,{size:12}),E.outputFileName]})]})]}),E.status==="FAILED"&&E.errorMessage&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-red-500 uppercase",children:s("traderHistory.errorMessage"," ")}),t.jsx("div",{className:"mt-1 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:E.errorMessage})})]}),E.metadata&&Object.keys(E.metadata).length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:s("traderHistory.additionalInfo"," ")}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg text-sm",children:[E.toolType==="VIN"&&E.metadata.confidence&&t.jsxs("p",{className:"text-slate-600",children:[s("traderHistory.confidence",""),": ",t.jsxs("span",{className:"font-medium",children:[E.metadata.confidence,"%"]})]}),E.toolType==="COMPARISON"&&E.metadata.suppliersCount&&t.jsxs("p",{className:"text-slate-600",children:[s("traderHistory.suppliersCompared"," "),": ",t.jsx("span",{className:"font-medium",children:E.metadata.suppliersCount})]}),E.toolType==="PDF_EXCEL"&&E.metadata.pageCount&&t.jsxs("p",{className:"text-slate-600",children:[s("traderHistory.pagesProcessed",""),": ",t.jsx("span",{className:"font-medium",children:E.metadata.pageCount})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 pt-2 border-t border-slate-100",children:[t.jsxs("span",{children:["ID: ",E.id]}),t.jsx("span",{children:""}),t.jsx("span",{children:E.deviceType})]})]})]})})]})},Mde=[{value:"BUG",labelKey:"feedback.categories.bug",icon:lF},{value:"SUGGESTION",labelKey:"feedback.categories.suggestion",icon:qp},{value:"COMPLAINT",labelKey:"feedback.categories.complaint",icon:ma},{value:"QUESTION",labelKey:"feedback.categories.question",icon:m0},{value:"OTHER",labelKey:"feedback.categories.other",icon:mF}],Lde=[{value:"LOW",labelKey:"feedback.priorities.low",color:"bg-slate-100 text-slate-700"},{value:"MEDIUM",labelKey:"feedback.priorities.medium",color:"bg-yellow-100 text-yellow-700"},{value:"HIGH",labelKey:"feedback.priorities.high",color:"bg-red-100 text-red-700"},{value:"CRITICAL",labelKey:"feedback.priorities.critical",color:"bg-purple-100 text-purple-700"}];function Fde({user:e}){const{t:s,i18n:a}=Jt(),r=a.language==="ar",[n,i]=T.useState(!1),[l,o]=T.useState(!1),[d,u]=T.useState(!1),[h,f]=T.useState(!0),[x,g]=T.useState("SUGGESTION"),[v,b]=T.useState("MEDIUM"),[y,j]=T.useState(""),[w,A]=T.useState(""),[O,C]=T.useState("");T.useEffect(()=>{xe.getFeedbackSettings().then(D=>{f(D.enabled),g(D.defaultCategory),b(D.defaultPriority)})},[]),T.useEffect(()=>{e&&C(e.phone||e.email||"")},[e]);const E=()=>{g("SUGGESTION"),b("MEDIUM"),j(""),A("")},S=async()=>{if(!(!y.trim()||!w.trim())){o(!0);try{const D={category:x,priority:v,subject:y.trim(),message:w.trim(),pageContext:window.location.pathname,senderContact:O||void 0};e?await xe.createFeedback(D,e.id,e.name,e.phone||e.email||"",e.role):await xe.createPublicFeedback({senderName:s("feedback.guest",""),senderContact:O,...D}),u(!0),E(),setTimeout(()=>{u(!1),i(!1)},2e3)}catch(D){console.error("Failed to submit feedback:",D)}finally{o(!1)}}};return h?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>i(!0),className:`fixed ${r?"left-4":"right-4"} bottom-20 z-50 flex items-center justify-center w-12 h-12 bg-primary text-white rounded-full shadow-lg hover:bg-primary/90 transition-all hover:scale-110`,title:s("feedback.button"," "),"data-testid":"button-feedback-open",children:t.jsx(KO,{className:"w-5 h-5"})}),n&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",dir:r?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("h2",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(KO,{className:"w-5 h-5 text-primary"}),s("feedback.title"," ")]}),t.jsx("button",{onClick:()=>i(!1),className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","data-testid":"button-feedback-close",children:t.jsx(St,{className:"w-5 h-5 text-slate-500"})})]}),d?t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center",children:t.jsx(Fn,{className:"w-8 h-8 text-green-600"})}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:s("feedback.success","   !")}),t.jsx("p",{className:"text-sm text-slate-500",children:s("feedback.successDesc","    ")})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e&&t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 text-sm",children:[t.jsxs("span",{className:"text-slate-500",children:[s("feedback.sendingAs"," "),":"]}),t.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200 mx-2",children:e.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:s("feedback.category"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Mde.map(D=>{const M=D.icon;return t.jsxs("button",{onClick:()=>g(D.value),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm transition-all ${x===D.value?"bg-primary text-white":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,"data-testid":`button-category-${D.value}`,children:[t.jsx(M,{className:"w-3.5 h-3.5"}),s(D.labelKey,D.value)]},D.value)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:s("feedback.priority","")}),t.jsx("div",{className:"flex gap-2",children:Lde.map(D=>t.jsx("button",{onClick:()=>b(D.value),className:`px-4 py-1.5 rounded-full text-sm transition-all ${v===D.value?D.color+" ring-2 ring-primary ring-offset-1":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300"}`,"data-testid":`button-priority-${D.value}`,children:s(D.labelKey,D.value)},D.value))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:[s("feedback.subject","")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:y,onChange:D=>j(D.target.value),placeholder:s("feedback.subjectPlaceholder","  "),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent","data-testid":"input-feedback-subject"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:[s("feedback.message","")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:w,onChange:D=>A(D.target.value),placeholder:s("feedback.messagePlaceholder","   ..."),rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent resize-none","data-testid":"input-feedback-message"})]}),!e&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:s("feedback.contact"," ")}),t.jsx("input",{type:"text",value:O,onChange:D=>C(D.target.value),placeholder:s("feedback.contactPlaceholder","    "),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent","data-testid":"input-feedback-contact"})]}),t.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsxs("span",{children:[s("feedback.pageContext"," "),":"]}),t.jsx("code",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:location})]})]}),t.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors","data-testid":"button-feedback-cancel",children:s("common.cancel","")}),t.jsxs("button",{onClick:S,disabled:l||!y.trim()||!w.trim(),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-feedback-submit",children:[l?t.jsx(as,{className:"w-4 h-4 animate-spin"}):t.jsx(xi,{className:"w-4 h-4"}),s("feedback.send","")]})]})]})]})})]}):null}const Ude=({user:e,onBack:s})=>{const{t:a}=Jt(),{addToast:r}=Dt(),n=T.useRef(null),[i,l]=T.useState(null),[o,d]=T.useState(!1),[u,h]=T.useState(null),[f,x]=T.useState(""),[g,v]=T.useState(!1),[b,y]=T.useState([]),[j,w]=T.useState(!1),A=5*1024*1024,O=async()=>{try{const M=Ea.book_new(),U=[["MAIN_PART","ALT_PART","DESCRIPTION","BRAND"],["CN-102030","CN-102030-ALT","  ","OEM"],["MG-998877","MG-998877-AF","  ","Aftermarket"],["GL-COOL-01","GL-COOL-02"," ","OEM"]],I=Ea.aoa_to_sheet(U);Ea.book_append_sheet(M,I,"Alternatives"),rd(M,"SiniCar_Alternatives_Template.xlsx"),r(a("alternatives.templateDownloaded","  "),"success")}catch{r(a("alternatives.templateError","    "),"error")}},C=M=>{var k;const U=(k=M.target.files)==null?void 0:k[0];if(!U)return;if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(U.type)&&!U.name.endsWith(".xlsx")&&!U.name.endsWith(".xls")&&!U.name.endsWith(".csv")){r(a("alternatives.invalidFileType","   .  Excel  CSV"),"error");return}if(U.size>A){r(a("alternatives.fileTooLarge","   .   5 "),"error");return}l(U),h(null)},E=async()=>{if(i){d(!0),h(null);try{const M=await i.arrayBuffer(),U=ad(M),I=U.Sheets[U.SheetNames[0]],k=Ea.sheet_to_json(I,{header:1});if(k.length<2){r(a("alternatives.emptyFile","      "),"error"),d(!1);return}const z=k[0].map(ee=>String(ee).toLowerCase().trim()),_=z.findIndex(ee=>ee.includes("main")||ee.includes("")||ee.includes("")),q=z.findIndex(ee=>ee.includes("alt")||ee.includes("")),L=z.findIndex(ee=>ee.includes("desc")||ee.includes("")),Q=z.findIndex(ee=>ee.includes("brand")||ee.includes("")||ee.includes(""));if(_===-1||q===-1){r(a("alternatives.missingColumns","      MAIN_PART  ALT_PART"),"error"),d(!1);return}const X=[];for(let ee=1;ee<k.length;ee++){const V=k[ee];!V||V.length===0||X.push({mainPart:String(V[_]||""),altPart:String(V[q]||""),description:L>=0?String(V[L]||""):void 0,brand:Q>=0?String(V[Q]||""):void 0})}if(X.length===0){r(a("alternatives.noDataRows","     "),"error"),d(!1);return}const W=await xe.uploadAlternatives(X,e.id,e.name);h(W),W.rowsInserted>0&&r(a("alternatives.uploadSuccess",`  ${W.rowsInserted}  `),"success"),W.rowsSkipped>0&&r(a("alternatives.someSkipped",`  ${W.rowsSkipped} `),"warning"),l(null),n.current&&(n.current.value="")}catch(M){console.error("Upload error:",M),r(a("alternatives.uploadError","    "),"error")}finally{d(!1)}}},S=async()=>{if(!f.trim()){r(a("alternatives.enterPartNumber","   "),"warning");return}v(!0),w(!0);try{const M=await xe.searchAlternatives(f.trim());y(M)}catch(M){console.error("Search error:",M),r(a("alternatives.searchError","   "),"error")}finally{v(!1)}},D=M=>{M.key==="Enter"&&S()};return t.jsxs("div",{className:"p-4 md:p-6 max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s&&t.jsx("button",{onClick:s,className:"p-2 rounded-lg hover-elevate","data-testid":"button-back",children:t.jsx(vf,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:a("alternatives.title"," ")}),t.jsx("p",{className:"text-muted-foreground text-sm",children:a("alternatives.subtitle","        ")})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(ga,{className:"w-5 h-5 text-primary"}),t.jsx("h2",{className:"text-lg font-semibold",children:a("alternatives.uploadTitle","  ")})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a("alternatives.uploadDescription","  Excel      ")}),t.jsxs("button",{onClick:O,className:"flex items-center gap-2 text-sm text-primary hover:underline","data-testid":"button-download-template",children:[t.jsx(cr,{className:"w-4 h-4"}),a("alternatives.downloadTemplate","  Excel")]}),t.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[t.jsx("input",{ref:n,type:"file",accept:".xlsx,.xls,.csv",onChange:C,className:"hidden",id:"alternatives-file-input","data-testid":"input-file-upload"}),t.jsxs("label",{htmlFor:"alternatives-file-input",className:"cursor-pointer flex flex-col items-center gap-2",children:[t.jsx(zn,{className:"w-10 h-10 text-muted-foreground"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:i?i.name:a("alternatives.selectFile","  Excel   ")})]})]}),i&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:E,disabled:o,className:"flex-1 bg-primary text-primary-foreground py-2 px-4 rounded-lg flex items-center justify-center gap-2 hover-elevate disabled:opacity-50","data-testid":"button-upload",children:o?t.jsxs(t.Fragment,{children:[t.jsx(as,{className:"w-4 h-4 animate-spin"}),a("alternatives.uploading"," ...")]}):t.jsxs(t.Fragment,{children:[t.jsx(ga,{className:"w-4 h-4"}),a("alternatives.uploadButton"," ")]})}),t.jsx("button",{onClick:()=>{l(null),n.current&&(n.current.value="")},className:"p-2 text-muted-foreground hover:text-destructive hover-elevate rounded-lg","data-testid":"button-clear-file",children:t.jsx(Ct,{className:"w-4 h-4"})})]}),u&&t.jsxs("div",{className:`p-4 rounded-lg ${u.rowsInserted>0?"bg-green-500/10 border border-green-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.rowsInserted>0?t.jsx(Ut,{className:"w-5 h-5 text-green-500"}):t.jsx(ma,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"font-medium",children:a("alternatives.uploadResult"," ")})]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[a("alternatives.rowsProcessed"," "),": ",u.rowsProcessed]}),t.jsxs("p",{children:[a("alternatives.rowsInserted"," "),": ",u.rowsInserted]}),t.jsxs("p",{children:[a("alternatives.rowsSkipped"," "),": ",u.rowsSkipped]})]}),u.errors&&u.errors.length>0&&t.jsx("div",{className:"mt-2 text-xs text-destructive",children:u.errors.slice(0,3).map((M,U)=>t.jsx("p",{children:M},U))})]})]}),t.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ft,{className:"w-5 h-5 text-primary"}),t.jsx("h2",{className:"text-lg font-semibold",children:a("alternatives.searchTitle","  ")})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a("alternatives.searchDescription","      ")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:f,onChange:M=>x(M.target.value),onKeyPress:D,placeholder:a("alternatives.searchPlaceholder"," ..."),className:"flex-1 px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50","data-testid":"input-search-part"}),t.jsxs("button",{onClick:S,disabled:g,className:"bg-primary text-primary-foreground py-2 px-4 rounded-lg flex items-center gap-2 hover-elevate disabled:opacity-50","data-testid":"button-search",children:[g?t.jsx(as,{className:"w-4 h-4 animate-spin"}):t.jsx(Ft,{className:"w-4 h-4"}),a("alternatives.searchButton","")]})]})]})]}),j&&t.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[t.jsx(Xt,{className:"w-5 h-5"}),a("alternatives.searchResults"," "),t.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",b.length," ",a("alternatives.results",""),")"]})]}),b.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm","data-testid":"table-results",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.mainPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.altPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.description","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.brand","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:a("alternatives.source","")})]})}),t.jsx("tbody",{children:b.map(M=>t.jsxs("tr",{className:"border-b border-border/50 hover:bg-muted/50","data-testid":`row-alternative-${M.id}`,children:[t.jsx("td",{className:"p-3 font-mono",children:M.mainPartNumber}),t.jsx("td",{className:"p-3 font-mono text-primary",children:M.altPartNumber}),t.jsx("td",{className:"p-3 text-muted-foreground",children:M.description||"-"}),t.jsx("td",{className:"p-3",children:M.brand||"-"}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs ${M.sourceType==="CUSTOMER_UPLOAD"?"bg-blue-500/10 text-blue-600":"bg-green-500/10 text-green-600"}`,children:M.sourceType==="CUSTOMER_UPLOAD"?a("alternatives.customerUpload",""):a("alternatives.system","")})})]},M.id))})]})}):t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Xt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:a("alternatives.noResults","    ")}),t.jsx("p",{className:"text-sm mt-1",children:a("alternatives.noResultsHint","      ")})]})]})]})},zde="sini_product_images",x5="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+PHJlY3QgZmlsbD0iI2YzZjRmNiIgd2lkdGg9IjEyMCIgaGVpZ2h0PSIxMjAiLz48cGF0aCBmaWxsPSIjOWNhM2FmIiBkPSJNNjAgMzBjLTIwIDAtMzUgMTUtMzUgMzVzMTUgMzUgMzUgMzUgMzUtMTUgMzUtMzUtMTUtMzUtMzUtMzV6bTAgNjBjLTE0IDAtMjUtMTEtMjUtMjVzMTEtMjUgMjUtMjUgMjUgMTEgMjUgMjUtMTEgMjUtMjUgMjV6Ii8+PHBhdGggZmlsbD0iIzljYTNhZiIgZD0iTTYwIDQ1Yy0xMCAwLTIwIDgtMjAgMjBzMTAgMjAgMjAgMjAgMjAtOCAyMC0yMC0xMC0yMC0yMC0yMHptMCAzMGMtNSAwLTEwLTQtMTAtMTBzNS0xMCAxMC0xMCAxMCA0IDEwIDEwLTUgMTAtMTAgMTB6Ii8+PC9zdmc+",Bde=e=>{if(!e)return null;try{const s=localStorage.getItem(zde);if(s){const r=JSON.parse(s).find(n=>{var i;return((i=n.partNumber)==null?void 0:i.toUpperCase())===e.toUpperCase()&&(n.status==="APPROVED"||n.status==="AUTO_MATCHED")&&n.isLinkedToProduct});if(r)return r.fileUrl||r.fullImage||r.thumbnailUrl||r.thumbnail||null}}catch(s){console.error("Error reading product images from localStorage:",s)}return null},$de=({mainImageUrl:e,imageGallery:s=[],productName:a,partNumber:r,size:n="md",showIcon:i=!0,className:l=""})=>{const{t:o,i18n:d}=Jt(),u=d.language==="ar",[h,f]=T.useState(!1),[x,g]=T.useState(0),[v,b]=T.useState({x:0,y:0}),[y,j]=T.useState(!1),[w,A]=T.useState(!1),[O,C]=T.useState(!1),[E,S]=T.useState(!1),D=T.useRef(null),M=T.useRef(null),I=[T.useMemo(()=>e||(r?Bde(r):null),[e,r]),...s||[]].filter(Boolean),k=I.length>0,z=I[x]||x5,_={sm:"w-7 h-7",md:"w-8 h-8",lg:"w-10 h-10"},q=T.useCallback(()=>{k&&(f(!0),g(0),A(!1),C(!1),setTimeout(()=>S(!0),10))},[k]),L=T.useCallback(()=>{S(!1),setTimeout(()=>{f(!1),j(!1)},200)},[]),Q=T.useCallback(()=>{g(P=>P===0?I.length-1:P-1),A(!1),C(!1)},[I.length]),X=T.useCallback(()=>{g(P=>P===I.length-1?0:P+1),A(!1),C(!1)},[I.length]),W=T.useCallback(P=>{if(!M.current||!D.current||!w)return;const Y=M.current.getBoundingClientRect(),J=(P.clientX-Y.left)/Y.width*100,K=(P.clientY-Y.top)/Y.height*100,se=Math.max(12,Math.min(88,J)),G=Math.max(12,Math.min(88,K));b({x:se,y:G}),j(!0)},[w]),ee=T.useCallback(()=>{j(!1)},[]),V=T.useCallback(P=>{h&&(P.key==="Escape"&&L(),P.key==="ArrowLeft"&&(u?X():Q()),P.key==="ArrowRight"&&(u?Q():X()))},[h,L,Q,X,u]);return T.useEffect(()=>(window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)),[V]),T.useEffect(()=>(h?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[h]),!i&&!k?null:t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:q,disabled:!k,className:`
          relative flex items-center justify-center rounded-lg transition-all overflow-hidden border border-slate-200 dark:border-slate-700
          ${k?"hover:border-brand-400 hover:shadow-sm":"bg-slate-100 text-slate-400 cursor-not-allowed"}
          ${_[n]}
          ${l}
        `,"aria-label":k?o("productImages.viewImage"," "):o("productImages.noImage","  "),title:k?o("productImages.viewImage"," "):o("productImages.noImage","  "),"data-testid":`button-view-image-${r||"product"}`,children:k?t.jsx("img",{src:z,alt:a,className:"w-full h-full object-cover",onError:P=>{var Y;P.target.style.display="none",(Y=P.target.parentElement)==null||Y.classList.add("bg-slate-100","text-slate-400")}}):t.jsx(gr,{className:"w-1/2 h-1/2"})}),h&&t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"product-image-viewer-title",children:[t.jsx("div",{className:`absolute inset-0 bg-slate-900/70 backdrop-blur-sm transition-opacity duration-200 ${E?"opacity-100":"opacity-0"}`,onClick:L}),t.jsxs("div",{className:`
              relative z-10 w-full max-w-4xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl overflow-hidden
              transform transition-all duration-200
              ${E?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}
            `,onClick:P=>P.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",children:[t.jsxs("div",{className:`flex items-center gap-3 ${u?"flex-row-reverse":""}`,children:[t.jsx("div",{className:"p-2 bg-brand-100 dark:bg-brand-900 rounded-lg",children:t.jsx(Xt,{className:"w-5 h-5 text-brand-600 dark:text-brand-400"})}),t.jsxs("div",{className:u?"text-right":"text-left",children:[t.jsx("h3",{id:"product-image-viewer-title",className:"font-semibold text-slate-900 dark:text-white truncate max-w-md",children:a}),r&&t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-mono",children:r})]})]}),t.jsxs("div",{className:`flex items-center gap-2 ${u?"flex-row-reverse":""}`,children:[I.length>1&&t.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 px-3 py-1 bg-slate-200 dark:bg-slate-700 rounded-full",children:[x+1," / ",I.length]}),t.jsx("button",{onClick:L,className:"p-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors","aria-label":o("productImages.closeViewer",""),"data-testid":"button-close-image-modal",children:t.jsx(St,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})})]})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{ref:M,className:"relative aspect-square max-h-[60vh] w-full flex items-center justify-center bg-slate-100 dark:bg-slate-800 cursor-crosshair overflow-hidden",onMouseMove:W,onMouseLeave:ee,role:"img","aria-label":`${a} ${o("productImages.image","")} ${x+1} / ${I.length}`,children:[!w&&!O&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-10 h-10 border-4 border-brand-500 border-t-transparent rounded-full animate-spin"})}),t.jsx("img",{ref:D,src:z,alt:a,className:`max-w-full max-h-full object-contain transition-opacity duration-300 ${w?"opacity-100":"opacity-0"}`,onLoad:()=>A(!0),onError:()=>{C(!0),A(!0)},draggable:!1}),y&&w&&!O&&t.jsx("div",{className:"absolute pointer-events-none w-36 h-36 border-4 border-white dark:border-slate-600 rounded-full overflow-hidden",style:{left:`calc(${v.x}% - 72px)`,top:`calc(${v.y}% - 72px)`,backgroundImage:`url(${z})`,backgroundPosition:`${v.x}% ${v.y}%`,backgroundSize:"300%",backgroundRepeat:"no-repeat",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},"aria-hidden":"true",children:t.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[t.jsx("div",{className:"w-px h-full bg-white/30 absolute"}),t.jsx("div",{className:"w-full h-px bg-white/30 absolute"})]})}),O&&t.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-slate-400",children:[t.jsx(tl,{className:"w-16 h-16"}),t.jsx("span",{children:o("productImages.loadError","  ")})]})]}),I.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:u?X:Q,className:`absolute top-1/2 -translate-y-1/2 ${u?"right-2":"left-2"} p-3 bg-white/90 dark:bg-slate-700/90 hover:bg-white dark:hover:bg-slate-600 rounded-full shadow-lg transition-colors`,"aria-label":o("productImages.prevImage"," "),"data-testid":"button-prev-image",children:t.jsx(ws,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})}),t.jsx("button",{onClick:u?Q:X,className:`absolute top-1/2 -translate-y-1/2 ${u?"left-2":"right-2"} p-3 bg-white/90 dark:bg-slate-700/90 hover:bg-white dark:hover:bg-slate-600 rounded-full shadow-lg transition-colors`,"aria-label":o("productImages.nextImage"," "),"data-testid":"button-next-image",children:t.jsx(vs,{className:"w-5 h-5 text-slate-700 dark:text-slate-200"})})]})]}),I.length>1&&t.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900",children:t.jsx("div",{className:`flex gap-2 overflow-x-auto pb-2 ${u?"flex-row-reverse":""}`,role:"tablist","aria-label":o("productImages.thumbnailList","  "),children:I.map((P,Y)=>t.jsx("button",{onClick:()=>{g(Y),A(!1),C(!1)},className:`
                        flex-shrink-0 w-14 h-14 rounded-lg overflow-hidden border-2 transition-colors
                        ${Y===x?"border-brand-500 ring-2 ring-brand-300":"border-slate-200 dark:border-slate-600 hover:border-brand-300"}
                      `,role:"tab","aria-selected":Y===x,"aria-label":`${o("productImages.thumbnail"," ")} ${Y+1}`,"data-testid":`button-thumbnail-${Y}`,children:t.jsx("img",{src:P,alt:`${a} - ${Y+1}`,className:"w-full h-full object-cover",onError:J=>{J.target.src=x5}})},Y))})}),t.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 bg-slate-100 dark:bg-slate-900",children:t.jsxs("div",{className:`flex items-center justify-center gap-2 text-xs text-slate-500 dark:text-slate-400 ${u?"flex-row-reverse":""}`,children:[t.jsx(NF,{className:"w-4 h-4"}),t.jsx("span",{children:o("productImages.magnifierHint","    ")})]})})]})]})]})},g1="siniCar_productSearch_requestDraft";function qde({user:e,profile:s,onBack:a}){const{t:r,i18n:n}=Jt(),i=n.language==="ar",[l,o]=T.useState(""),[d,u]=T.useState(""),[h,f]=T.useState(""),[x,g]=T.useState(""),[v,b]=T.useState([]),[y,j]=T.useState(!1),[w,A]=T.useState(1),[O,C]=T.useState(0),E=20,[S,D]=T.useState([]),[M,U]=T.useState(!1),[I,k]=T.useState(""),[z,_]=T.useState({open:!1,partNumber:"",productName:""}),[q,L]=T.useState([]),[Q,X]=T.useState(!1),[W,ee]=T.useState([]);T.useEffect(()=>{const H=localStorage.getItem(g1);if(H)try{const pe=JSON.parse(H);Array.isArray(pe)&&D(pe)}catch{}xe.searchProducts("").then(pe=>{const B=[...new Set(pe.map(oe=>oe.brand).filter(Boolean))];ee(B)})},[]),T.useEffect(()=>{localStorage.setItem(g1,JSON.stringify(S))},[S]);const V=async()=>{if(!(!l.trim()&&!d&&!h&&!x)){j(!0),A(1);try{const H=await xe.advancedSearchProducts({q:l,brand:d||void 0,make:h||void 0,year:x||void 0,page:1,pageSize:E});b(H.items),C(H.total)}catch(H){console.error("Search error:",H)}finally{j(!1)}}},P=async H=>{j(!0),A(H);try{const pe=await xe.advancedSearchProducts({q:l,brand:d||void 0,make:h||void 0,year:x||void 0,page:H,pageSize:E});b(pe.items),C(pe.total)}catch(pe){console.error("Page change error:",pe)}finally{j(!1)}},Y=H=>{H.key==="Enter"&&V()},J=T.useCallback(H=>{D(pe=>pe.find(oe=>oe.productId===H.id)?pe.map(oe=>oe.productId===H.id?{...oe,quantity:oe.quantity+1}:oe):[...pe,{productId:H.id,partNumber:H.partNumber,productName:H.name,quantity:1,priceAtRequest:H.priceWholesale||H.price}])},[]),K=(H,pe)=>{D(B=>B.map(oe=>{if(oe.productId===H){const fe=Math.max(1,oe.quantity+pe);return{...oe,quantity:fe}}return oe}))},se=H=>{D(pe=>pe.filter(B=>B.productId!==H))},G=async()=>{if(S.length!==0){U(!0),k("");try{const H=await xe.createPurchaseRequest(e.id,e.name,(s==null?void 0:s.companyName)||"",S);H.success&&(k(i?`   !  : ${H.requestId}`:`Request sent successfully! Request ID: ${H.requestId}`),D([]),localStorage.removeItem(g1))}catch(H){console.error("Send request error:",H)}finally{U(!1)}}},te=async(H,pe)=>{_({open:!0,partNumber:H,productName:pe}),X(!0),L([]);try{const B=await xe.searchAlternatives(H);L(B)}catch(B){console.error("Alternatives search error:",B)}finally{X(!1)}},Z=()=>{_({open:!1,partNumber:"",productName:""}),L([])},ue=Math.ceil(O/E),re=H=>{const pe=H.qtyTotal??H.stock??0;return pe>10?{text:i?"":"In Stock",color:"text-green-600"}:pe>0?{text:i?" ":"Limited",color:"text-yellow-600"}:{text:i?" ":"Out of Stock",color:"text-red-600"}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-6",dir:i?"rtl":"ltr",children:[t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:t.jsx(Ft,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:i?" ":"Product Search"}),t.jsx("p",{className:"text-sm text-gray-400",children:i?"     ":"Search products and add to purchase request"})]})]}),a&&t.jsxs("button",{onClick:a,className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg flex items-center gap-2 transition-colors","data-testid":"button-back",children:[i?t.jsx(vs,{size:18}):t.jsx(ws,{size:18}),i?"":"Back"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-4",children:t.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[t.jsx("div",{className:"flex-1 min-w-[200px]",children:t.jsx("input",{type:"text",value:l,onChange:H=>o(H.target.value),onKeyDown:Y,placeholder:i?"   ...":"Part number or name...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"input-search-query"})}),t.jsxs("select",{value:d,onChange:H=>u(H.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"select-brand-filter",children:[t.jsx("option",{value:"",className:"bg-slate-800",children:i?" ":"All Brands"}),W.map(H=>t.jsx("option",{value:H,className:"bg-slate-800",children:H},H))]}),t.jsx("input",{type:"text",value:h,onChange:H=>f(H.target.value),onKeyDown:Y,placeholder:i?" ":"Car Make",className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 w-32","data-testid":"input-make-filter"}),t.jsx("input",{type:"text",value:x,onChange:H=>g(H.target.value),onKeyDown:Y,placeholder:i?"":"Year",className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 w-24","data-testid":"input-year-filter"}),t.jsxs("button",{onClick:V,disabled:y,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl flex items-center gap-2 transition-all disabled:opacity-50","data-testid":"button-search",children:[y?t.jsx(as,{className:"w-5 h-5 animate-spin"}):t.jsx(Ft,{className:"w-5 h-5"}),i?"":"Search"]})]})}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:t.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[t.jsx(Xt,{className:"w-5 h-5"}),i?" ":"Search Results",O>0&&t.jsxs("span",{className:"text-sm text-gray-400",children:["(",O,")"]})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-white/5",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-400 uppercase w-12",children:r("productImages.mainImage","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?" ":"Part #"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Name"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Brand"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Car"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Stock"}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-400 uppercase",children:i?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-white/10",children:v.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-gray-400",children:y?t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(as,{className:"w-5 h-5 animate-spin"}),i?" ...":"Searching..."]}):i?"    ":"Start searching to find products"})}):v.map(H=>{const pe=re(H),B=S.some(oe=>oe.productId===H.id);return t.jsxs("tr",{className:"hover:bg-white/5 transition-colors","data-testid":`row-product-${H.id}`,children:[t.jsx("td",{className:"px-2 py-3 text-center",children:t.jsx($de,{mainImageUrl:H.mainImageUrl||H.image,imageGallery:H.imageGallery,productName:H.name,partNumber:H.partNumber,size:"sm"})}),t.jsx("td",{className:"px-4 py-3 text-sm text-white font-mono",children:H.partNumber}),t.jsx("td",{className:"px-4 py-3 text-sm text-white",children:H.name}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:H.brand||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:H.carName||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`text-sm ${pe.color}`,children:pe.text})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsxs("button",{onClick:()=>J(H),className:`px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors ${B?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 border border-blue-500/30"}`,"data-testid":`button-add-${H.id}`,children:[t.jsx(Pt,{size:14}),i?"":"Add"]}),t.jsxs("button",{onClick:()=>te(H.partNumber,H.name),className:"px-3 py-1.5 bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 rounded-lg text-xs font-medium flex items-center gap-1 transition-colors border border-purple-500/30","data-testid":`button-alternatives-${H.id}`,children:[t.jsx(Pr,{size:14}),i?"":"Alt"]})]})})]},H.id)})})]})}),ue>1&&t.jsxs("div",{className:"p-4 border-t border-white/10 flex items-center justify-between",children:[t.jsxs("button",{onClick:()=>P(w-1),disabled:w===1||y,className:"px-4 py-2 bg-white/10 hover:bg-white/20 disabled:opacity-50 text-white rounded-lg flex items-center gap-2 transition-colors","data-testid":"button-prev-page",children:[i?t.jsx(vs,{size:18}):t.jsx(ws,{size:18}),i?"":"Prev"]}),t.jsx("span",{className:"text-sm text-gray-400",children:i?` ${w}  ${ue}`:`Page ${w} of ${ue}`}),t.jsxs("button",{onClick:()=>P(w+1),disabled:w===ue||y,className:"px-4 py-2 bg-white/10 hover:bg-white/20 disabled:opacity-50 text-white rounded-lg flex items-center gap-2 transition-colors","data-testid":"button-next-page",children:[i?"":"Next",i?t.jsx(ws,{size:18}):t.jsx(vs,{size:18})]})]})]})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 sticky top-4",children:[t.jsx("div",{className:"p-4 border-b border-white/10",children:t.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[t.jsx($a,{className:"w-5 h-5"}),i?" ":"Purchase Request",S.length>0&&t.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:S.length})]})}),t.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:S.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx($a,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:i?"  ":"No items yet"}),t.jsx("p",{className:"text-sm mt-1",children:i?"    ":"Add products from search results"})]}):t.jsx("div",{className:"space-y-3",children:S.map(H=>t.jsxs("div",{className:"bg-white/5 rounded-xl p-3 border border-white/10","data-testid":`cart-item-${H.productId}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-white truncate",children:H.productName}),t.jsx("p",{className:"text-xs text-gray-400 font-mono",children:H.partNumber})]}),t.jsx("button",{onClick:()=>se(H.productId),className:"p-1 text-red-400 hover:bg-red-500/20 rounded transition-colors","data-testid":`button-remove-${H.productId}`,children:t.jsx(Ct,{size:16})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>K(H.productId,-1),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors","data-testid":`button-decrease-${H.productId}`,children:t.jsx(lE,{size:14,className:"text-white"})}),t.jsx("span",{className:"text-white font-medium w-8 text-center",children:H.quantity}),t.jsx("button",{onClick:()=>K(H.productId,1),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors","data-testid":`button-increase-${H.productId}`,children:t.jsx(Pt,{size:14,className:"text-white"})})]})]},H.productId))})}),S.length>0&&t.jsxs("div",{className:"p-4 border-t border-white/10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[t.jsx("span",{className:"text-gray-400",children:i?" :":"Total Items:"}),t.jsx("span",{className:"text-white font-medium",children:S.reduce((H,pe)=>H+pe.quantity,0)})]}),I&&t.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-xl text-green-400 text-sm","data-testid":"text-success-message",children:I}),t.jsxs("button",{onClick:G,disabled:M||S.length===0,className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 text-white rounded-xl flex items-center justify-center gap-2 font-medium transition-all","data-testid":"button-send-request",children:[M?t.jsx(as,{className:"w-5 h-5 animate-spin"}):t.jsx(xi,{className:"w-5 h-5"}),i?"  ":"Send Purchase Request"]})]})]})})]})]}),z.open&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-slate-800 rounded-2xl border border-white/20 w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[t.jsx(Pr,{className:"w-5 h-5"}),i?" ":"Available Alternatives"]}),t.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[z.productName," - ",z.partNumber]})]}),t.jsx("button",{onClick:Z,className:"p-2 hover:bg-white/10 rounded-lg transition-colors","data-testid":"button-close-alternatives",children:t.jsx(St,{className:"w-5 h-5 text-gray-400"})})]}),t.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:Q?t.jsxs("div",{className:"flex items-center justify-center py-12 text-gray-400",children:[t.jsx(as,{className:"w-6 h-6 animate-spin mr-2"}),i?"   ...":"Searching for alternatives..."]}):q.length===0?t.jsxs("div",{className:"text-center py-12 text-gray-400",children:[t.jsx(Pr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:i?"   ":"No alternatives found"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-white/5",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?" ":"Main Part"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?" ":"Alt Part"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Description"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-400 uppercase",children:i?"":"Brand"})]})}),t.jsx("tbody",{className:"divide-y divide-white/10",children:q.map(H=>t.jsxs("tr",{className:"hover:bg-white/5","data-testid":`row-alternative-${H.id}`,children:[t.jsx("td",{className:"px-4 py-2 text-sm text-white font-mono",children:H.mainPartNumber}),t.jsx("td",{className:"px-4 py-2 text-sm text-blue-400 font-mono",children:H.altPartNumber}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-300",children:H.description||"-"}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-300",children:H.brand||"-"})]},H.id))})]})})})]})})]})}const Ac={owner:{ar:"",en:"Owner",color:"bg-amber-500"},manager:{ar:"",en:"Manager",color:"bg-blue-500"},staff:{ar:"",en:"Staff",color:"bg-green-500"},readonly:{ar:" ",en:"Read Only",color:"bg-gray-500"}},kc={adv_view_campaigns:{ar:" ",en:"View Campaigns",category:"advertising"},adv_manage_campaigns:{ar:" ",en:"Manage Campaigns",category:"advertising"},adv_manage_slots:{ar:"  ",en:"Manage Ad Slots",category:"advertising"},adv_view_reports:{ar:" ",en:"View Reports",category:"advertising"},sup_view_forwarded_requests:{ar:"  ",en:"View Forwarded Requests",category:"supplier"},sup_submit_offers:{ar:" ",en:"Submit Offers",category:"supplier"},sup_view_team_activity:{ar:"  ",en:"View Team Activity",category:"supplier"},sup_manage_products:{ar:" ",en:"Manage Products",category:"supplier"},sup_view_analytics:{ar:" ",en:"View Analytics",category:"supplier"},cust_create_orders:{ar:" ",en:"Create Orders",category:"customer"},cust_view_orders:{ar:" ",en:"View Orders",category:"customer"},cust_create_installment_requests:{ar:"  ",en:"Create Installment Requests",category:"customer"},cust_manage_installment_requests:{ar:"  ",en:"Manage Installment Requests",category:"customer"},cust_use_trader_tools:{ar:"  ",en:"Use Trader Tools",category:"customer"},cust_view_team_activity:{ar:"  ",en:"View Team Activity",category:"customer"},cust_view_prices:{ar:" ",en:"View Prices",category:"customer"},cust_manage_cart:{ar:" ",en:"Manage Cart",category:"customer"},aff_view_links:{ar:" ",en:"View Links",category:"affiliate"},aff_manage_links:{ar:" ",en:"Manage Links",category:"affiliate"},aff_view_commissions:{ar:" ",en:"View Commissions",category:"affiliate"},aff_withdraw_commissions:{ar:" ",en:"Withdraw Commissions",category:"affiliate"},aff_view_analytics:{ar:" ",en:"View Analytics",category:"affiliate"},org_manage_team:{ar:" ",en:"Manage Team",category:"organization"},org_view_logs:{ar:" ",en:"View Logs",category:"organization"},org_view_settings:{ar:" ",en:"View Settings",category:"organization"},org_edit_profile:{ar:" ",en:"Edit Profile",category:"organization"}},Yx={customer:{ar:"",en:"Customer"},supplier:{ar:"",en:"Supplier"},advertising:{ar:"",en:"Advertising"},affiliate:{ar:"",en:"Affiliate"},organization:{ar:"",en:"Organization"}};function p5(e){switch(e){case"customer":return{ar:"",en:"Customer"};case"supplier":return{ar:"",en:"Supplier"};case"advertiser":return{ar:"",en:"Advertiser"};case"affiliate":return{ar:"",en:"Affiliate"};case"platform":return{ar:"",en:"Platform"};default:return{ar:e,en:e}}}function Hde(e){const s=["org_manage_team","org_view_logs","org_view_settings","org_edit_profile"];switch(e){case"customer":return[...s,"cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart"];case"supplier":return[...s,"sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics"];case"advertiser":return[...s,"adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports"];case"affiliate":return[...s,"aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics"];default:return s}}function Vde(e){const s={};return e.forEach(a=>{const r=kc[a],n=(r==null?void 0:r.category)||"other";s[n]||(s[n]=[]),s[n].push(a)}),s}function Gde({organizationType:e,entityId:s,entityName:a,currentUserId:r}){const{t:n,i18n:i}=Jt(),{addToast:l}=Dt(),o=i.language==="ar",[d,u]=T.useState(null),[h,f]=T.useState([]),[x,g]=T.useState([]),[v,b]=T.useState(null),[y,j]=T.useState(!0),[w,A]=T.useState(""),[O,C]=T.useState("all"),[E,S]=T.useState("members"),[D,M]=T.useState(!1),[U,I]=T.useState(!1),[k,z]=T.useState(!1),[_,q]=T.useState(null),[L,Q]=T.useState({email:"",name:"",role:"staff",permissions:[]}),[X,W]=T.useState({role:"staff",permissions:[],jobTitle:"",department:""}),ee=(d==null?void 0:d.ownerUserId)===r,V=h.find(oe=>oe.userId===r),P=ee||((V==null?void 0:V.permissions.includes("org_manage_team"))??!1),Y=T.useMemo(()=>Hde(e),[e]),J=T.useMemo(()=>Vde(Y),[Y]);T.useEffect(()=>{K()},[e,s]);async function K(){j(!0);try{let oe=await xe.getOrCreateOrganizationForEntity(e,s,a,r);if(u(oe),oe){const[fe,ne,de]=await Promise.all([xe.getOrganizationUsers(oe.id),xe.getTeamInvitations(oe.id),xe.getOrganizationStats(oe.id)]);f(fe),g(ne),b(de)}}catch(oe){console.error("Error loading team data:",oe),l("     ","error")}finally{j(!1)}}const se=T.useMemo(()=>h.filter(oe=>{var de,we;const fe=w===""||((de=oe.jobTitle)==null?void 0:de.toLowerCase().includes(w.toLowerCase()))||((we=oe.department)==null?void 0:we.toLowerCase().includes(w.toLowerCase())),ne=O==="all"||oe.role===O;return fe&&ne}),[h,w,O]);async function G(){if(!d||!L.email){l("   ","error");return}try{const oe=await xe.getOrganizationSettings(),fe=await xe.getOrganizationUsers(d.id),ne=d.type==="customer"?oe.maxCustomerEmployees:d.type==="supplier"?oe.maxSupplierEmployees:d.type==="advertiser"?oe.maxAdvertiserEmployees:oe.maxAffiliateEmployees;if(fe.length>=ne){l("     ","error");return}const de=await xe.createTeamInvitation(d.id,r,{email:L.email,name:L.name,role:L.role,permissions:L.permissions});g(we=>[...we,de]),M(!1),Q({email:"",name:"",role:"staff",permissions:[]}),l("   ","success"),await K()}catch(oe){console.error("Error inviting member:",oe),l("    ","error")}}async function te(){if(!(!d||!_))try{await xe.updateOrganizationUser(_.id,{role:X.role,permissions:X.permissions,jobTitle:X.jobTitle,department:X.department}),I(!1),q(null),l("   ","success"),await K()}catch(oe){console.error("Error updating member:",oe),l("    ","error")}}async function Z(){if(!(!d||!_))try{await xe.removeOrganizationUser(_.id),z(!1),q(null),l("   ","success"),await K()}catch(oe){console.error("Error removing member:",oe),l("    ","error")}}async function ue(oe){try{await xe.cancelTeamInvitation(oe),l("  ","success"),await K()}catch(fe){console.error("Error cancelling invitation:",fe),l("    ","error")}}async function re(oe){if(d)try{await xe.updateOrganizationUser(oe.id,{isActive:!oe.isActive}),l(oe.isActive?"  ":"  ","success"),await K()}catch{l(" ","error")}}function H(oe){q(oe),W({role:oe.role,permissions:[...oe.permissions],jobTitle:oe.jobTitle||"",department:oe.department||""}),I(!0)}function pe(oe){q(oe),z(!0)}function B(oe,fe){fe==="invite"?Q(ne=>({...ne,permissions:ne.permissions.includes(oe)?ne.permissions.filter(de=>de!==oe):[...ne.permissions,oe]})):W(ne=>({...ne,permissions:ne.permissions.includes(oe)?ne.permissions.filter(de=>de!==oe):[...ne.permissions,oe]}))}return y?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(Qt,{className:"w-8 h-8 animate-spin text-amber-500"})}):t.jsxs("div",{className:`space-y-6 ${o?"rtl":"ltr"}`,dir:o?"rtl":"ltr",children:[t.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 border border-slate-700",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-xl bg-amber-500/20 flex items-center justify-center",children:t.jsx(Xs,{className:"w-7 h-7 text-amber-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white","data-testid":"text-team-title",children:o?" ":"Team Management"}),t.jsxs("p",{className:"text-slate-400",children:[a," - ",o?p5(e).ar:p5(e).en]})]})]}),P&&t.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-slate-900 rounded-lg font-medium hover:bg-amber-400 transition-colors","data-testid":"button-invite-member",children:[t.jsx(sl,{className:"w-5 h-5"}),t.jsx("span",{children:o?" ":"Invite Member"})]})]}),v&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-white","data-testid":"text-total-members",children:v.totalMembers}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Total Members"})]}),t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-green-400","data-testid":"text-active-members",children:v.activeMembers}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Active Members"})]}),t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-amber-400","data-testid":"text-pending-invites",children:v.pendingInvitations}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Pending Invites"})]}),t.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-400","data-testid":"text-recent-activities",children:v.recentActivities}),t.jsx("div",{className:"text-sm text-slate-400",children:o?" ":"Recent Activities"})]})]})]}),t.jsxs("div",{className:"flex gap-2 border-b border-slate-700",children:[t.jsxs("button",{onClick:()=>S("members"),className:`px-4 py-3 font-medium transition-colors ${E==="members"?"text-amber-400 border-b-2 border-amber-400":"text-slate-400 hover:text-white"}`,"data-testid":"tab-members",children:[t.jsx(Gt,{className:"w-4 h-4 inline-block mr-2"}),o?"":"Members"," (",h.length,")"]}),t.jsxs("button",{onClick:()=>S("invitations"),className:`px-4 py-3 font-medium transition-colors ${E==="invitations"?"text-amber-400 border-b-2 border-amber-400":"text-slate-400 hover:text-white"}`,"data-testid":"tab-invitations",children:[t.jsx(Ll,{className:"w-4 h-4 inline-block mr-2"}),o?"":"Invitations"," (",x.filter(oe=>oe.status==="pending").length,")"]}),t.jsxs("button",{onClick:()=>S("activity"),className:`px-4 py-3 font-medium transition-colors ${E==="activity"?"text-amber-400 border-b-2 border-amber-400":"text-slate-400 hover:text-white"}`,"data-testid":"tab-activity",children:[t.jsx(Gr,{className:"w-4 h-4 inline-block mr-2"}),o?"":"Activity"]})]}),E==="members"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[t.jsx(Ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),t.jsx("input",{type:"text",value:w,onChange:oe=>A(oe.target.value),placeholder:o?"  ...":"Search members...",className:"w-full pl-10 pr-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"input-search-members"})]}),t.jsxs("select",{value:O,onChange:oe=>C(oe.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"select-role-filter",children:[t.jsx("option",{value:"all",children:o?" ":"All Roles"}),Object.entries(Ac).map(([oe,fe])=>t.jsx("option",{value:oe,children:o?fe.ar:fe.en},oe))]})]}),t.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:se.length===0?t.jsxs("div",{className:"p-8 text-center text-slate-400",children:[t.jsx(Gt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:o?"  ":"No members found"})]}):t.jsx("div",{className:"divide-y divide-slate-700",children:se.map(oe=>t.jsxs("div",{className:"p-4 hover:bg-slate-700/50 transition-colors","data-testid":`member-row-${oe.userId}`,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium",children:oe.userId.slice(0,2).toUpperCase()})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-white",children:oe.jobTitle||`User ${oe.userId}`}),(d==null?void 0:d.ownerUserId)===oe.userId&&t.jsx("span",{className:"px-2 py-0.5 text-xs bg-amber-500/20 text-amber-400 rounded",children:o?"":"Owner"}),!oe.isActive&&t.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded",children:o?"":"Inactive"})]}),t.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs text-white ${Ac[oe.role].color}`,children:o?Ac[oe.role].ar:Ac[oe.role].en}),oe.department&&t.jsxs("span",{children:[" ",oe.department]})]})]})]}),P&&oe.role!=="owner"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>re(oe),className:`p-2 rounded-lg transition-colors ${oe.isActive?"text-green-400 hover:bg-green-500/20":"text-red-400 hover:bg-red-500/20"}`,title:oe.isActive?"Deactivate":"Activate","data-testid":`button-toggle-status-${oe.userId}`,children:oe.isActive?t.jsx(f0,{className:"w-5 h-5"}):t.jsx(vu,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>H(oe),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded-lg transition-colors",title:"Edit","data-testid":`button-edit-member-${oe.userId}`,children:t.jsx(Pa,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>pe(oe),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors",title:"Remove","data-testid":`button-remove-member-${oe.userId}`,children:t.jsx(Ct,{className:"w-5 h-5"})})]})]}),oe.permissions.length>0&&oe.role!=="owner"&&t.jsxs("div",{className:"mt-3 flex flex-wrap gap-1",children:[oe.permissions.slice(0,5).map(fe=>{var ne,de;return t.jsx("span",{className:"px-2 py-0.5 text-xs bg-slate-600/50 text-slate-300 rounded",children:o?((ne=kc[fe])==null?void 0:ne.ar)||fe:((de=kc[fe])==null?void 0:de.en)||fe},fe)}),oe.permissions.length>5&&t.jsxs("span",{className:"px-2 py-0.5 text-xs bg-slate-600/50 text-slate-300 rounded",children:["+",oe.permissions.length-5]})]})]},oe.id))})})]}),E==="invitations"&&t.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden",children:x.length===0?t.jsxs("div",{className:"p-8 text-center text-slate-400",children:[t.jsx(Ll,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:o?"  ":"No invitations"})]}):t.jsx("div",{className:"divide-y divide-slate-700",children:x.map(oe=>t.jsxs("div",{className:"p-4 flex items-center justify-between","data-testid":`invitation-row-${oe.id}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center",children:t.jsx(Ll,{className:"w-5 h-5 text-slate-400"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-white",children:oe.email}),t.jsxs("div",{className:"text-sm text-slate-400 flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs text-white ${Ac[oe.role].color}`,children:o?Ac[oe.role].ar:Ac[oe.role].en}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${oe.status==="pending"?"bg-amber-500/20 text-amber-400":oe.status==="accepted"?"bg-green-500/20 text-green-400":oe.status==="expired"?"bg-red-500/20 text-red-400":"bg-slate-500/20 text-slate-400"}`,children:oe.status==="pending"?o?"":"Pending":oe.status==="accepted"?o?"":"Accepted":oe.status==="expired"?o?"":"Expired":o?"":"Cancelled"})]})]})]}),P&&oe.status==="pending"&&t.jsx("button",{onClick:()=>ue(oe.id),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors","data-testid":`button-cancel-invitation-${oe.id}`,children:t.jsx(St,{className:"w-5 h-5"})})]},oe.id))})}),E==="activity"&&t.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 p-8 text-center text-slate-400",children:[t.jsx(Gr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:o?"  ":"Activity log coming soon"})]}),t.jsx(ls,{isOpen:D,onClose:()=>M(!1),title:o?"  ":"Invite New Member",children:t.jsxs("div",{className:"space-y-4","data-testid":"modal-invite-member",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?" ":"Email Address"}),t.jsx("input",{type:"email",value:L.email,onChange:oe=>Q(fe=>({...fe,email:oe.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"email@example.com","data-testid":"input-invite-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?"":"Role"}),t.jsxs("select",{value:L.role,onChange:oe=>Q(fe=>({...fe,role:oe.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"select-invite-role",children:[t.jsx("option",{value:"manager",children:o?"":"Manager"}),t.jsx("option",{value:"staff",children:o?"":"Staff"}),t.jsx("option",{value:"readonly",children:o?" ":"Read Only"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:o?"":"Permissions"}),t.jsx("div",{className:"max-h-60 overflow-y-auto space-y-4 bg-slate-700/50 rounded-lg p-4",children:Object.entries(J).map(([oe,fe])=>{var ne,de;return t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-amber-400 mb-2",children:o?((ne=Yx[oe])==null?void 0:ne.ar)||oe:((de=Yx[oe])==null?void 0:de.en)||oe}),t.jsx("div",{className:"space-y-1",children:fe.map(we=>{var Ue,qe;return t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-600/50 p-2 rounded",children:[t.jsx("input",{type:"checkbox",checked:L.permissions.includes(we),onChange:()=>B(we,"invite"),className:"w-4 h-4 rounded border-slate-500 bg-slate-600 text-amber-500 focus:ring-amber-500","data-testid":`checkbox-invite-perm-${we}`}),t.jsx("span",{className:"text-sm text-slate-300",children:o?((Ue=kc[we])==null?void 0:Ue.ar)||we:((qe=kc[we])==null?void 0:qe.en)||we})]},we)})})]},oe)})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-slate-300 hover:text-white transition-colors","data-testid":"button-cancel-invite",children:o?"":"Cancel"}),t.jsxs("button",{onClick:G,className:"px-4 py-2 bg-amber-500 text-slate-900 rounded-lg font-medium hover:bg-amber-400 transition-colors","data-testid":"button-confirm-invite",children:[t.jsx(xi,{className:"w-4 h-4 inline-block mr-2"}),o?" ":"Send Invitation"]})]})]})}),t.jsx(ls,{isOpen:U,onClose:()=>I(!1),title:o?" ":"Edit Member",children:t.jsxs("div",{className:"space-y-4","data-testid":"modal-edit-member",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?" ":"Job Title"}),t.jsx("input",{type:"text",value:X.jobTitle,onChange:oe=>W(fe=>({...fe,jobTitle:oe.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"input-edit-job-title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?"":"Department"}),t.jsx("input",{type:"text",value:X.department,onChange:oe=>W(fe=>({...fe,department:oe.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"input-edit-department"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:o?"":"Role"}),t.jsxs("select",{value:X.role,onChange:oe=>W(fe=>({...fe,role:oe.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-amber-500","data-testid":"select-edit-role",children:[t.jsx("option",{value:"manager",children:o?"":"Manager"}),t.jsx("option",{value:"staff",children:o?"":"Staff"}),t.jsx("option",{value:"readonly",children:o?" ":"Read Only"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:o?"":"Permissions"}),t.jsx("div",{className:"max-h-60 overflow-y-auto space-y-4 bg-slate-700/50 rounded-lg p-4",children:Object.entries(J).map(([oe,fe])=>{var ne,de;return t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-amber-400 mb-2",children:o?((ne=Yx[oe])==null?void 0:ne.ar)||oe:((de=Yx[oe])==null?void 0:de.en)||oe}),t.jsx("div",{className:"space-y-1",children:fe.map(we=>{var Ue,qe;return t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-600/50 p-2 rounded",children:[t.jsx("input",{type:"checkbox",checked:X.permissions.includes(we),onChange:()=>B(we,"edit"),className:"w-4 h-4 rounded border-slate-500 bg-slate-600 text-amber-500 focus:ring-amber-500","data-testid":`checkbox-edit-perm-${we}`}),t.jsx("span",{className:"text-sm text-slate-300",children:o?((Ue=kc[we])==null?void 0:Ue.ar)||we:((qe=kc[we])==null?void 0:qe.en)||we})]},we)})})]},oe)})})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-slate-300 hover:text-white transition-colors","data-testid":"button-cancel-edit",children:o?"":"Cancel"}),t.jsxs("button",{onClick:te,className:"px-4 py-2 bg-amber-500 text-slate-900 rounded-lg font-medium hover:bg-amber-400 transition-colors","data-testid":"button-confirm-edit",children:[t.jsx(Zt,{className:"w-4 h-4 inline-block mr-2"}),o?" ":"Save Changes"]})]})]})}),t.jsx(ls,{isOpen:k,onClose:()=>z(!1),title:o?" ":"Remove Member",children:t.jsxs("div",{className:"space-y-4","data-testid":"modal-remove-member",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ma,{className:"w-8 h-8 text-red-400"})}),t.jsx("p",{className:"text-white",children:o?"        ":"Are you sure you want to remove this member from the team?"}),t.jsx("p",{className:"text-slate-400 text-sm mt-2",children:o?"       .":"They will lose access to all organization resources."})]}),t.jsxs("div",{className:"flex justify-center gap-3 pt-4",children:[t.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-slate-300 hover:text-white transition-colors","data-testid":"button-cancel-remove",children:o?"":"Cancel"}),t.jsxs("button",{onClick:Z,className:"px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-400 transition-colors","data-testid":"button-confirm-remove",children:[t.jsx(Ct,{className:"w-4 h-4 inline-block mr-2"}),o?" ":"Remove Member"]})]})]})})]})}const PF=T.createContext(void 0),Wde=({children:e})=>{const[s,a]=T.useState(null),[r,n]=T.useState(null),[i,l]=T.useState([]),[o,d]=T.useState(!1),[u,h]=T.useState(null),f=(s==null?void 0:s.ownerUserId)===u||(r==null?void 0:r.role)==="owner",x=f||((r==null?void 0:r.permissions.includes("org_manage_team"))??!1),g=T.useCallback(async(L,Q)=>{d(!0),h(L);try{let X=null;if(Q?X=(await xe.getOrganizations()).find(ee=>ee.type===Q&&ee.ownerUserId===L)||null:X=await xe.getOrganizationByOwnerUserId(L),X){a(X);const W=await xe.getOrganizationUser(X.id,L);n(W)}else a(null),n(null)}catch(X){console.error("Failed to load organization:",X)}finally{d(!1)}},[]),v=T.useCallback(async L=>{d(!0),h(L);try{const Q=await xe.getOrganizationsByUserId(L);if(l(Q),Q.length>0&&!s){a(Q[0]);const X=await xe.getOrganizationUser(Q[0].id,L);n(X)}}catch(Q){console.error("Failed to load organizations:",Q)}finally{d(!1)}},[s]),b=T.useCallback(async L=>{if(u){d(!0);try{const Q=await xe.getOrganizationById(L);if(Q){a(Q);const X=await xe.getOrganizationUser(L,u);n(X)}}catch(Q){console.error("Failed to switch organization:",Q)}finally{d(!1)}}},[u]),y=T.useCallback(async()=>{if(s!=null&&s.id)try{const L=await xe.getOrganizationById(s.id);if(L&&a(L),u){const Q=await xe.getOrganizationUser(s.id,u);n(Q)}}catch(L){console.error("Failed to refresh organization:",L)}},[s==null?void 0:s.id,u]),j=T.useCallback(L=>!s||!u?!1:s.ownerUserId===u||(r==null?void 0:r.role)==="owner"?!0:(r==null?void 0:r.permissions.includes(L))??!1,[s,r,u]),w=T.useCallback(()=>!s||!u?[]:s.ownerUserId===u||(r==null?void 0:r.role)==="owner"?xe.getPermissionsByOrganizationType(s.type):(r==null?void 0:r.permissions)??[],[s,r,u]),A=T.useCallback(async()=>s!=null&&s.id?await xe.getOrganizationUsers(s.id):[],[s==null?void 0:s.id]),O=T.useCallback(async L=>{if(!(s!=null&&s.id))return null;try{return await xe.createOrganizationUser(s.id,L)}catch(Q){return console.error("Failed to add team member:",Q),null}},[s==null?void 0:s.id]),C=T.useCallback(async(L,Q)=>{try{return await xe.updateOrganizationUser(L,Q)}catch(X){return console.error("Failed to update team member:",X),null}},[]),E=T.useCallback(async L=>{try{return await xe.deactivateOrganizationUser(L)!==null}catch(Q){return console.error("Failed to deactivate team member:",Q),!1}},[]),S=T.useCallback(async L=>{try{return await xe.reactivateOrganizationUser(L)!==null}catch(Q){return console.error("Failed to reactivate team member:",Q),!1}},[]),D=T.useCallback(async L=>{try{return await xe.removeOrganizationUser(L)}catch(Q){return console.error("Failed to remove team member:",Q),!1}},[]),M=T.useCallback(async()=>s!=null&&s.id?await xe.getTeamInvitations(s.id):[],[s==null?void 0:s.id]),U=T.useCallback(async L=>{if(!(s!=null&&s.id)||!u)return null;try{return await xe.createTeamInvitation(s.id,u,L)}catch(Q){return console.error("Failed to create invitation:",Q),null}},[s==null?void 0:s.id,u]),I=T.useCallback(async L=>{try{return await xe.cancelTeamInvitation(L)}catch(Q){return console.error("Failed to cancel invitation:",Q),!1}},[]),k=T.useCallback(async(L=100)=>s!=null&&s.id?await xe.getOrganizationActivityLogs(s.id,L):[],[s==null?void 0:s.id]),z=T.useCallback(async(L,Q,X)=>{if(!(!(s!=null&&s.id)||!u))try{await xe.logOrganizationActivity(s.id,u,L,Q,X)}catch(W){console.error("Failed to log activity:",W)}},[s==null?void 0:s.id,u]),_=T.useCallback(async()=>s!=null&&s.id?await xe.getOrganizationStats(s.id):null,[s==null?void 0:s.id]),q=T.useCallback(async()=>s!=null&&s.id?await xe.canAddTeamMember(s.id):{allowed:!1,reason:"   "},[s==null?void 0:s.id]);return t.jsx(PF.Provider,{value:{currentOrganization:s,currentOrgUser:r,organizations:i,isLoading:o,isOwner:f,canManageTeam:x,loadOrganization:g,loadOrganizations:v,switchOrganization:b,refreshCurrentOrganization:y,hasPermission:j,getPermissions:w,getTeamMembers:A,addTeamMember:O,updateTeamMember:C,deactivateTeamMember:E,reactivateTeamMember:S,removeTeamMember:D,getInvitations:M,createInvitation:U,cancelInvitation:I,getActivityLogs:k,logActivity:z,getStats:_,canAddMember:q},children:e})},Qde=()=>{const e=T.useContext(PF);if(!e)throw new Error("useOrganization must be used within an OrganizationProvider");return e},DF=T.createContext(void 0),Kde=({children:e})=>{const[s,a]=T.useState(null),[r,n]=T.useState(!0),[i,l]=T.useState(null),o=T.useCallback(async()=>{try{n(!0),l(null);const h=await xe.getCustomerPortalSettings();a(h)}catch(h){console.error("Failed to load customer portal settings:",h),l("Failed to load portal settings")}finally{n(!1)}},[]);T.useEffect(()=>{o()},[o]);const d=T.useCallback(h=>{const f=Mr.language||"en",g={ar:"ar",en:"en",hi:"hi",zh:"zh"}[f]||"en";return h[g]||h.en||""},[]),u=T.useCallback(async()=>{await o()},[o]);return t.jsx(DF.Provider,{value:{settings:s,loading:r,error:i,refreshSettings:u,getText:d},children:e})},Jde=()=>{const e=T.useContext(DF);if(e===void 0)throw new Error("useCustomerPortalSettings must be used within a CustomerPortalSettingsProvider");return e},Yde=(e,s)=>e?e.features[s]??!0:!0,Xde=e=>e?e.navigationMenu.filter(s=>s.enabled).sort((s,a)=>s.order-a.order).map(s=>s.id):["dashboard","trader_tools","marketplace","orders","favorites","account"],Zde=e=>e?e.dashboardSections.filter(s=>s.enabled).sort((s,a)=>s.order-a.order).map(s=>s.id):["welcome_banner","quick_stats","quick_actions","recent_orders","announcements"],eue=({user:e,profile:s,onLogout:a,onRefreshUser:r})=>{const{hasPermission:n,loadOrganization:i,currentOrganization:l,isOwner:o}=Qde(),{settings:d,getText:u,loading:h}=Jde();T.useCallback(Xe=>Yde(d,Xe),[d]),T.useMemo(()=>Zde(d),[d]),T.useMemo(()=>Xde(d),[d]);const[f,x]=T.useState("HOME"),[g,v]=T.useState([]),[b,y]=T.useState([]),[j,w]=T.useState([]),[A,O]=T.useState(null),[C,E]=T.useState([]),[S,D]=T.useState(""),[M,U]=T.useState(""),[I,k]=T.useState(!1),[z,_]=T.useState(new Set),[q,L]=T.useState(!1),[Q,X]=T.useState(null),[W,ee]=T.useState([]),[V,P]=T.useState(!1),Y=Vce(768),[J,K]=T.useState(()=>localStorage.getItem("sinicar_sidebar_collapsed")==="true"),se=T.useCallback(Xe=>{K(Xe),localStorage.setItem("sinicar_sidebar_collapsed",String(Xe))},[]),[G,te]=T.useState(null),[Z,ue]=T.useState(!1),[re,H]=T.useState(null),[pe,B]=T.useState(1),[oe,fe]=T.useState(!1),[ne,de]=T.useState([]),[we,Ue]=T.useState(null),[qe,Ce]=T.useState(!1),Le=T.useRef(null),[Se,_e]=T.useState(null),Ze=T.useCallback(Xe=>{Ue(Xe)},[]),[Mt,lt]=T.useState(!1),yt=e.isGuest===!0,[wt,ke]=T.useState(!e.isGuest),We=A==null?void 0:A.guestSettings,Ne=()=>{if(!yt)return"";switch((We==null?void 0:We.blurIntensity)||"medium"){case"light":return"blur-sm";case"medium":return"blur-md";case"heavy":return"blur-lg";default:return"blur-md"}},at=Xe=>yt?{businessTypes:We==null?void 0:We.showBusinessTypes,mainServices:We==null?void 0:We.showMainServices,howItWorks:We==null?void 0:We.showHowItWorks,whySiniCar:We==null?void 0:We.showWhySiniCar,cart:We==null?void 0:We.showCart,marketingCards:We==null?void 0:We.showMarketingCards}[Xe]!==!1:!0,dt=yt&&(We==null?void 0:We.showBlurOverlay)!==!1,{t:ie,tDynamic:rt,dir:it}=Bs(),{addToast:vt}=Dt();T.useEffect(()=>{(async()=>{const[ce,ve,he,ge]=await Promise.all([xe.getOrders(e.id),xe.getAllQuoteRequests(),xe.searchProducts(""),xe.getSettings()]);y(ce),w(ve.filter(ye=>ye.userId===e.id)),E(he),O(ge),ee(xe.getSearchHistoryForUser(e.id))})()},[e.id,f]),T.useEffect(()=>{const Xe=e.role==="CUSTOMER_STAFF"&&e.parentId?e.parentId:e.id;i(Xe,"customer")},[e.id,e.role,e.parentId,i]),T.useEffect(()=>{xe.recordActivity({userId:e.id,userName:e.name,role:e.role,eventType:"PAGE_VIEW",page:f,description:`${ie("customerDashboard.pageView")} ${f}`})},[f,e.id,e.name,e.role]),T.useEffect(()=>{xe.recordHeartbeat(e.id);const Xe=setInterval(()=>{xe.recordHeartbeat(e.id)},6e4);return()=>clearInterval(Xe)},[e.id]),T.useEffect(()=>{const Xe=setTimeout(()=>{U(S)},300);return()=>clearTimeout(Xe)},[S]),T.useEffect(()=>{if(!e.id||e.isGuest)return;const Xe=setTimeout(async()=>{if(g.length>0){const ce=g.reduce((ve,he)=>ve+he.price*he.quantity,0);await xe.saveAbandonedCart(e.id,g,ce)}else await xe.clearAbandonedCart(e.id)},2e3);return()=>clearTimeout(Xe)},[g,e.id,e.isGuest]);const Ie=T.useCallback(async Xe=>{if(x(Xe),Xe==="ORDERS"&&e.hasUnreadOrders)try{await xe.markOrdersAsReadForUser(e.id),r()}catch(ce){console.error("Failed to mark orders as read",ce)}if(Xe==="QUOTE_REQUEST"&&e.hasUnreadQuotes)try{await xe.markQuotesAsReadForUser(e.id),r()}catch(ce){console.error("Failed to mark quotes as read",ce)}},[e.hasUnreadOrders,e.hasUnreadQuotes,e.id,r]),[ct,gt]=T.useState(null),Ot=T.useMemo(()=>{if(M.trim().length<2)return[];const Xe=wde(C);return dde(M,Xe).slice(0,8)},[M,C]);T.useEffect(()=>{S.trim().length<2&&(X(null),gt(null))},[S]),T.useEffect(()=>{M.trim().length>=2?k(!0):k(!1)},[M]),T.useEffect(()=>{if(I&&Le.current&&!Y){const Xe=Le.current.getBoundingClientRect();_e({top:Xe.bottom+8,left:Xe.left,width:Xe.width})}},[I,Y]);const Ls=async Xe=>{if(Xe.preventDefault(),yt){lt(!0);return}const ce=S.trim();if(ce.length<2){vt(ie("customerDashboard.enterValidPartNumber"),"warning");return}L(!0),X(null);try{const ve=Ede(e),he=await Sde(ce,ve,"heroSearch");X(he),he.type==="NOT_FOUND"?vt(he.message,"info"):he.type==="FOUND_OUT_OF_STOCK"&&vt(he.message,"warning"),k(!0)}catch(ve){console.error("Search error:",ve),vt(ie("customerDashboard.unexpectedError"),"error")}finally{L(!1)}},La=async(Xe,ce)=>{if(Xe.stopPropagation(),yt){lt(!0);return}if(B(1),z.has(ce.id)||xe.hasRecentPriceView(e.id,ce.id)){_(ve=>new Set(ve).add(ce.id)),H(ce);return}fe(!0);try{await xe.incrementSearchUsage(e.id),await xe.logPriceView(e,ce),_(ve=>new Set(ve).add(ce.id)),H(ce),vt(ie("toast.creditDeducted","     "),"info"),r()}catch(ve){ve.message==="NO_POINTS_LEFT"?vt(ie("toast.noCreditsLeft","       .    ."),"error"):(console.error(ve),vt(ie("toast.priceRevealError","    "),"error"))}finally{fe(!1)}},Yr=T.useCallback((Xe,ce,ve)=>{if(!we)return;let he=window.innerWidth/2,ge=window.innerHeight/2;if(ve){const Me=ve.getBoundingClientRect();he=Me.left+Me.width/2,ge=Me.top+Me.height/2}const ye=Math.min(ce,5),je=[];for(let Me=0;Me<ye;Me++)je.push({id:`${Xe.id}-${Date.now()}-${Me}`,startX:he+(Math.random()-.5)*40,startY:ge+(Math.random()-.5)*40,productName:Xe.name});je.forEach((Me,Qe)=>{setTimeout(()=>{de(Fe=>[...Fe,Me]),setTimeout(()=>{de(Fe=>Fe.filter($e=>$e.id!==Me.id))},800)},Qe*100)})},[we]),Ae=(Xe,ce,ve)=>{if(yt){lt(!0);return}const he=g.find(ge=>ge.id===Xe.id);Yr(Xe,ce,ve),he?te({product:Xe,quantity:ce}):(v([...g,{...Xe,quantity:ce}]),vt(ie("toast.addedToCart","  "),"success"))},zt=()=>{re&&(Ae(re,pe),H(null))},es=()=>{if(!G)return;const{product:Xe,quantity:ce}=G;v(g.map(ve=>ve.id===Xe.id?{...ve,quantity:ve.quantity+ce}:ve)),vt(ie("toast.quantityUpdated","    "),"success"),te(null),H(null)},xs=Xe=>{v(g.filter(ce=>ce.id!==Xe))},Ts=async()=>{if(g.length!==0)try{const Xe=g.reduce((ce,ve)=>ce+ve.price*ve.quantity,0)*1.15;await xe.createOrder({userId:e.id,items:g,totalAmount:Xe,branchId:e.branchId}),await xe.convertAbandonedCart(e.id),v([]),ue(!0),setTimeout(()=>{ue(!1)},3e3),xe.getOrders(e.id).then(y)}catch{vt(ie("customerDashboard.orderSubmitError"),"error")}},Aa=e.searchLimit===0?"":(e.searchLimit||50)-(e.searchUsed||0),tr=g.reduce((Xe,ce)=>Xe+ce.price*ce.quantity,0),sr=T.useCallback(()=>{if(we){const Xe=we.getBoundingClientRect();return{x:Xe.left+Xe.width/2,y:Xe.top+Xe.height/2}}return{x:window.innerWidth-100,y:50}},[we]);return t.jsxs("div",{className:"flex h-screen bg-slate-100 font-sans overflow-hidden text-slate-800",dir:it,children:[ne.map(Xe=>{const ce=sr();return t.jsx(Qce,{startX:Xe.startX,startY:Xe.startY,endX:ce.x,endY:ce.y,onComplete:()=>de(ve=>ve.filter(he=>he.id!==Xe.id))},Xe.id)}),t.jsx(ude,{}),t.jsx(ls,{isOpen:Mt,onClose:()=>lt(!1),maxWidth:"max-w-lg",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 md:p-8 w-full mx-auto space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-brand-200",children:t.jsx(Xs,{size:40,className:"text-white"})}),t.jsx("h3",{className:"text-xl md:text-2xl font-black text-slate-800",children:ie("guestMode.restrictedTitle")}),t.jsx("p",{className:"text-brand-600 font-bold text-sm mt-1",children:ie("guestMode.restrictedSubtitle")})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-slate-600 font-bold text-sm mb-3 text-center",children:ie("guestMode.restrictedMessage")}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(Xt,{size:16,className:"text-blue-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:ie("guestMode.targetAudience.partsStores")})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(Ln,{size:16,className:"text-green-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:ie("guestMode.targetAudience.insuranceCompanies")})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:t.jsx(Mi,{size:16,className:"text-amber-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:ie("guestMode.targetAudience.rentalCompanies")})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white p-2.5 rounded-lg border border-slate-200",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx(Gt,{size:16,className:"text-purple-600"})}),t.jsx("span",{className:"text-xs font-bold text-slate-700",children:ie("guestMode.targetAudience.salesReps")})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-slate-800 font-bold text-sm text-center",children:ie("guestMode.benefitsTitle")}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-50 text-green-700 text-xs font-bold rounded-full border border-green-200",children:[t.jsx(Ut,{size:12})," ",ie("guestMode.benefits.prices")]}),t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 text-xs font-bold rounded-full border border-blue-200",children:[t.jsx(Ut,{size:12})," ",ie("guestMode.benefits.catalog")]}),t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-amber-50 text-amber-700 text-xs font-bold rounded-full border border-amber-200",children:[t.jsx(Ut,{size:12})," ",ie("guestMode.benefits.orders")]}),t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-purple-50 text-purple-700 text-xs font-bold rounded-full border border-purple-200",children:[t.jsx(Ut,{size:12})," ",ie("guestMode.benefits.support")]})]})]}),t.jsx("div",{className:"bg-gradient-to-r from-brand-50 to-blue-50 rounded-xl p-4 border border-brand-100 text-center",children:t.jsx("p",{className:"text-slate-700 font-bold text-sm leading-relaxed",children:ie("guestMode.callToAction")})}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{lt(!1),a()},className:"py-3 px-4 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-brand-200","data-testid":"button-guest-login",children:[t.jsx(bn,{size:18}),ie("guestMode.loginButton")]}),t.jsxs("button",{onClick:()=>{lt(!1),a()},className:"py-3 px-4 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-green-200","data-testid":"button-guest-request-account",children:[t.jsx(Lt,{size:18}),ie("guestMode.requestAccountButton")]})]}),t.jsx("button",{onClick:()=>lt(!1),className:"w-full py-2.5 px-6 bg-slate-100 text-slate-500 rounded-xl font-medium hover:bg-slate-200 transition-colors text-sm","data-testid":"button-guest-cancel",children:ie("guestMode.browseOnly")})]})]})}),t.jsx("div",{className:`fixed inset-0 bg-black/60 z-40 lg:hidden backdrop-blur-sm transition-opacity duration-300 ${V?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>P(!1),"aria-hidden":!V}),t.jsx(Gce,{user:e,profile:s,view:f,onViewChange:Ie,onLogout:a,sidebarOpen:V,setSidebarOpen:P,t:ie,tDynamic:rt,remainingCredits:Aa,isRTL:it==="rtl",isGuest:yt,guestSettings:A==null?void 0:A.guestSettings,onGuestPageClick:()=>lt(!0),collapsed:J,setCollapsed:se,hasPermission:n,isOwner:o}),t.jsxs("main",{className:"flex-1 flex flex-col h-screen overflow-hidden relative bg-slate-100",children:[t.jsx(Yce,{}),!yt&&t.jsx(bde,{userId:e.id,customerType:s==null?void 0:s.businessType}),t.jsx(Jce,{view:f,setSidebarOpen:P,user:e,profile:s,tDynamic:rt,t:ie,isRTL:it==="rtl",cart:g,cartTotal:tr,onRemoveItem:xs,onSubmitOrder:Ts,showCartDropdown:qe,setShowCartDropdown:Ce,onCartIconMount:Ze,onViewAllNotifications:()=>x("NOTIFICATIONS")}),t.jsx("div",{className:"flex-1 overflow-y-auto scroll-smooth",children:t.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8 h-full",children:[f==="HOME"&&t.jsx(gde,{user:e,profile:s,onNavigate:Xe=>Ie(Xe),isRTL:it==="rtl"}),f==="HOME_LEGACY"&&t.jsxs("div",{className:"animate-fade-in flex flex-col gap-8",children:[t.jsxs("div",{className:"relative w-full rounded-3xl bg-gradient-to-r from-[#081a33] to-[#102b57] px-4 py-6 sm:px-6 sm:py-8 md:px-10 md:py-12 text-center text-white shadow-xl isolate",children:[t.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden rounded-3xl",children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-20 -mt-20 w-[500px] h-[500px] bg-brand-600 rounded-full opacity-20 blur-3xl"}),t.jsx("div",{className:"absolute bottom-0 left-0 -ml-20 -mb-20 w-[400px] h-[400px] bg-blue-500 rounded-full opacity-10 blur-3xl"})]}),t.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6",children:[t.jsx("h1",{className:"text-3xl md:text-5xl font-extrabold leading-tight tracking-tight text-white font-display",children:ie("customerDashboard.heroTitle")}),t.jsx("p",{className:"text-slate-200 text-sm md:text-lg font-medium max-w-2xl mx-auto",children:ie("customerDashboard.heroSubtitle")}),t.jsxs("div",{className:"relative w-full max-w-2xl mx-auto mt-4 sm:mt-6 md:mt-10 z-[200]",children:[t.jsx("div",{className:"flex justify-center md:justify-end mb-3",children:t.jsxs("div",{className:"inline-flex items-center gap-1.5 rounded-full bg-emerald-500/10 px-3 md:px-4 py-1 text-[10px] md:text-xs font-bold text-emerald-300 border border-emerald-500/40 backdrop-blur-sm shadow-sm",children:[t.jsx(Ut,{size:10,className:"md:w-3 md:h-3"}),t.jsx("span",{className:"truncate max-w-[200px] md:max-w-none",children:ie("customerDashboard.searchTip")})]})}),yt&&(We==null?void 0:We.allowSearch)===!1?t.jsxs("button",{onClick:()=>lt(!0),className:"w-full h-12 md:h-16 px-4 md:px-6 bg-white/90 text-slate-500 rounded-full shadow-2xl shadow-slate-900/30 flex items-center justify-center gap-2 md:gap-3 cursor-pointer hover:bg-white transition-colors","data-testid":"button-guest-search-disabled",children:[t.jsx(wa,{size:18,className:"text-brand-600 shrink-0"}),t.jsx("span",{className:"font-bold text-sm md:text-base truncate",children:ie("guestMode.searchDisabled")})]}):t.jsxs("form",{onSubmit:Ls,className:"relative group w-full",children:[t.jsx("input",{ref:Le,type:"text",className:"w-full h-12 md:h-16 pr-14 md:pr-16 pl-4 md:pl-6 bg-white text-slate-900 rounded-full shadow-2xl shadow-slate-900/30 focus:ring-4 focus:ring-brand-500/30 border-0 text-sm md:text-lg font-bold placeholder:text-slate-400 transition-all outline-none",placeholder:ie("customerDashboard.searchPlaceholder"),value:S,onChange:Xe=>D(Xe.target.value),"data-testid":"input-hero-search"}),t.jsx("button",{type:"submit",className:"absolute right-1.5 md:right-2 top-1.5 md:top-2 bottom-1.5 md:bottom-2 w-10 md:w-14 h-9 md:h-12 bg-brand-600 hover:bg-brand-700 text-white rounded-full flex items-center justify-center transition-colors shadow-lg","data-testid":"button-hero-search",children:t.jsx(Ft,{size:18,className:"md:w-[22px] md:h-[22px]"})})]}),I&&typeof document<"u"&&Hce.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`fixed inset-0 transition-opacity ${Y?"bg-black/60":"bg-black/20"}`,style:{zIndex:99998},onClick:()=>{k(!1),X(null)},"data-testid":"search-backdrop"}),t.jsxs("div",{className:`fixed bg-white shadow-2xl text-right overflow-hidden flex flex-col animate-slide-up ${Y?"inset-x-0 bottom-0 rounded-t-3xl border-t-2 border-slate-200 max-h-[80vh]":"rounded-2xl border border-slate-200 max-h-96"}`,style:{zIndex:99999,...!Y&&Se?{top:Se.top,left:Se.left,width:Se.width}:{}},"data-testid":"search-results-container",children:[Y?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-200 bg-gradient-to-b from-slate-100 to-white",children:[t.jsx("button",{onClick:()=>{k(!1),X(null)},className:"p-2.5 bg-slate-200 rounded-full text-slate-600 hover:bg-slate-300 active:scale-95 transition-all","data-testid":"button-close-search",children:t.jsx(St,{size:20})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-base",children:ie("customerDashboard.searchResults"," ")}),t.jsx("div",{className:"w-8 h-8 bg-brand-100 rounded-full flex items-center justify-center",children:t.jsx(Ft,{size:16,className:"text-brand-600"})})]})]}),t.jsx("div",{className:"flex justify-center py-1 bg-white",children:t.jsx("div",{className:"w-10 h-1 bg-slate-300 rounded-full"})})]}):t.jsx("div",{className:"absolute top-2 left-2 z-20",children:t.jsx("button",{onClick:()=>{k(!1),X(null)},className:"p-1.5 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-500 hover:text-slate-700 transition-all","data-testid":"button-close-search-desktop",children:t.jsx(St,{size:16})})}),t.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:q?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(as,{size:32,className:"animate-spin text-brand-600 mx-auto mb-3"}),t.jsx("p",{className:"text-sm font-bold text-slate-600",children:ie("customerDashboard.searching")})]}):(Q==null?void 0:Q.type)==="FOUND_OUT_OF_STOCK"&&Q.product?t.jsxs("div",{className:"p-5",children:[t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4",children:t.jsxs("div",{className:"flex items-center gap-2 text-amber-700 mb-2",children:[t.jsx(Iae,{size:20}),t.jsx("span",{className:"font-bold",children:ie("customerDashboard.outOfStockMessage")})]})}),t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsx("div",{className:"p-3 bg-slate-200 rounded-xl text-slate-600",children:t.jsx(Hc,{size:24})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-bold text-slate-800 text-base",children:Q.product.name}),t.jsx("p",{className:"text-sm text-slate-500 font-mono mt-1",children:t.jsx("span",{className:"bg-white px-2 py-0.5 rounded border border-slate-200 font-bold",children:Q.product.partNumber})})]}),t.jsx("span",{className:"text-xs font-bold px-3 py-1.5 rounded-full bg-red-50 text-red-700 border border-red-200",children:ie("customerDashboard.outOfStock")})]})]}):(Q==null?void 0:Q.type)==="NOT_FOUND"?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-amber-50 text-amber-500 rounded-full mb-4",children:t.jsx(Gs,{size:32})}),t.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-2",children:ie("customerDashboard.partNotAvailable")}),t.jsxs("p",{className:"text-sm text-slate-600",children:[ie("customerDashboard.noResultsFor")," ",t.jsxs("span",{className:"font-bold text-slate-800 bg-slate-100 px-2 py-0.5 rounded",children:['"',S,'"']})]})]}):Ot.length>0?t.jsxs("div",{className:"relative",children:[yt&&(We==null?void 0:We.showSearchResults)!==!1&&dt&&t.jsx("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm rounded-xl",children:t.jsxs("div",{className:"text-center p-6",children:[t.jsx("div",{className:"w-16 h-16 bg-brand-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(wa,{size:28,className:"text-brand-600"})}),t.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:ie("guestMode.restrictedTitle")}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:ie("guestMode.blurredResultsNote")}),t.jsxs("button",{onClick:()=>lt(!0),className:"px-6 py-2.5 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors flex items-center gap-2 mx-auto","data-testid":"button-guest-overlay-login",children:[t.jsx(bn,{size:16}),ie("guestMode.loginButton")]})]})}),t.jsx("div",{className:`divide-y divide-slate-100 ${yt&&(We==null?void 0:We.showSearchResults)!==!1?`${Ne()} pointer-events-none select-none`:""}`,children:Ot.map(Xe=>{const ce=z.has(Xe.id)||xe.hasRecentPriceView(e.id,Xe.id),ve=Xe.qtyTotal??Xe.stock??0;xe.getMinVisibleQty();const he=ve<=0;return t.jsxs("div",{className:"w-full text-right p-3 md:p-4 hover:bg-brand-50 flex flex-col md:flex-row md:items-center md:justify-between group transition-colors cursor-default gap-2 md:gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 md:gap-4 flex-1 min-w-0",children:[t.jsx("div",{className:"p-2 md:p-2.5 bg-slate-100 rounded-xl text-slate-600 group-hover:bg-white group-hover:text-brand-600 border border-slate-200 shrink-0",children:t.jsx(Hc,{size:18,className:"md:w-5 md:h-5"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"font-bold text-slate-800 text-sm md:text-base group-hover:text-brand-700 truncate",children:Xe.name}),t.jsxs("p",{className:"text-xs md:text-sm text-slate-500 font-mono mt-0.5 flex flex-wrap items-center gap-1 md:gap-2",children:[t.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 font-bold",children:Xe.partNumber}),t.jsx("span",{className:"text-slate-400 hidden md:inline",children:"|"}),t.jsx("span",{className:"text-xs",children:Xe.brand})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-[10px] md:text-xs font-bold px-2.5 py-1 rounded-full border ${he?"bg-red-50 text-red-700 border-red-200":"bg-green-50 text-green-700 border-green-200"}`,children:ie(he?"customerDashboard.outOfStock":"customerDashboard.available")}),he?t.jsx("span",{className:"text-xs text-slate-400 font-bold",children:ie("customerDashboard.priceNotAvailable")}):ce?t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex flex-col items-end px-2",children:t.jsxs("span",{className:"text-sm font-black text-slate-900",children:[Xe.priceWholesale||Xe.price," ",ie("customerDashboard.sar")]})}),t.jsx("button",{onClick:ge=>La(ge,Xe),className:"bg-brand-600 text-white p-2 rounded-lg hover:bg-brand-700 shadow-sm",title:ie("customerDashboard.addToCart"),children:t.jsx(Uu,{size:16})})]}):t.jsxs("button",{onClick:ge=>La(ge,Xe),className:"text-xs font-bold bg-amber-50 text-amber-700 border border-amber-200 px-3 py-1.5 rounded-lg hover:bg-amber-100 transition-colors flex items-center gap-1",title:ie("customerDashboard.showPrice"),children:[t.jsx(fs,{size:14})," ",t.jsx("span",{className:"hidden sm:inline",children:ie("customerDashboard.showPrice")})]})]})]},Xe.id)})})]}):M.trim().length>=2?t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-slate-100 text-slate-400 rounded-full mb-4",children:t.jsx(Ft,{size:32})}),t.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-2",children:ie("customerDashboard.noResults")}),t.jsxs("p",{className:"text-sm text-slate-600",children:[ie("customerDashboard.pressSearch")," ",t.jsxs("span",{className:"font-bold text-slate-800 bg-slate-100 px-2 py-0.5 rounded",children:['"',S,'"']})]})]}):null}),(Ot.length>0||(Q==null?void 0:Q.type)==="FOUND_AVAILABLE")&&t.jsx("div",{className:"bg-slate-50 p-2.5 text-center text-xs font-bold text-slate-500 border-t border-slate-100 shrink-0",children:ie("customerDashboard.addToCartTip")})]})]}),document.body)]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8 items-start",children:[t.jsxs("div",{className:"xl:col-span-3 space-y-12",children:[at("businessTypes")&&t.jsxs("section",{className:"relative",children:[dt&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/70 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-section-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(wa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:ie("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:ie("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center shadow-lg shadow-brand-200",children:t.jsx(Gt,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800",children:ie("customerDashboard.whoWeServe")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium",children:ie("customerDashboard.whoWeServeSubtitle","    ")})]})]}),t.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 ${yt?`${Ne()} pointer-events-none select-none`:""}`,children:[t.jsx(Kx,{icon:t.jsx(Xs,{size:26}),title:ie("customerDashboard.partsStores"),desc:ie("customerDashboard.partsStoresDesc"),colorClass:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",iconBgClass:"bg-blue-500"}),t.jsx(Kx,{icon:t.jsx(Ln,{size:26}),title:ie("customerDashboard.insuranceCompanies"),desc:ie("customerDashboard.insuranceDesc"),colorClass:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white",iconBgClass:"bg-emerald-500"}),t.jsx(Kx,{icon:t.jsx(Mi,{size:26}),title:ie("customerDashboard.rentalCompanies"),desc:ie("customerDashboard.rentalDesc"),colorClass:"bg-gradient-to-br from-amber-500 to-orange-500 text-white",iconBgClass:"bg-amber-500"}),t.jsx(Kx,{icon:t.jsx(Mu,{size:26}),title:ie("customerDashboard.salesReps"),desc:ie("customerDashboard.salesRepsDesc"),colorClass:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",iconBgClass:"bg-purple-500"})]})]}),at("mainServices")&&t.jsxs("section",{className:"relative",children:[dt&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/70 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-services-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(wa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:ie("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:ie("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(Mu,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800",children:ie("customerDashboard.mainServices")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium",children:ie("customerDashboard.mainServicesSubtitle","   ")})]})]}),t.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5 ${yt?`${Ne()} pointer-events-none select-none`:""}`,children:[t.jsxs("div",{onClick:()=>yt?lt(!0):Ie("QUOTE_REQUEST"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-blue-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-quote-request",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-blue-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-blue-600 group-hover:text-white transition-colors duration-300",children:t.jsx(zn,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-blue-700 transition-colors",children:ie("customerDashboard.quoteRequests")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:ie("customerDashboard.quoteRequestsDesc")})]})]})]}),t.jsxs("div",{onClick:()=>yt?lt(!0):Ie("IMPORT_CHINA"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-emerald-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-import-china",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-emerald-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-emerald-600 group-hover:text-white transition-colors duration-300",children:t.jsx(ja,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-emerald-700 transition-colors",children:ie("customerDashboard.importFromChina")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:ie("customerDashboard.importFromChinaDesc")})]})]})]}),t.jsxs("div",{onClick:()=>yt?lt(!0):Ie("ORDERS"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-amber-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-orders",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-500 to-orange-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-amber-50 text-amber-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-amber-500 group-hover:text-white transition-colors duration-300",children:t.jsx(Xt,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-amber-700 transition-colors",children:ie("customerDashboard.wholesaleOrders")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:ie("customerDashboard.wholesaleOrdersDesc")})]})]})]}),t.jsxs("div",{onClick:()=>yt?lt(!0):Ie("ORGANIZATION"),className:"group relative bg-white rounded-2xl border border-slate-200/80 p-5 sm:p-6 cursor-pointer transition-all duration-300 hover:shadow-xl hover:border-purple-300 hover:-translate-y-1 overflow-hidden","data-testid":"card-organization",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-purple-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-purple-50 text-purple-600 rounded-xl flex items-center justify-center shrink-0 group-hover:bg-purple-600 group-hover:text-white transition-colors duration-300",children:t.jsx(Gt,{size:24,className:"sm:w-7 sm:h-7"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-base sm:text-lg mb-1.5 group-hover:text-purple-700 transition-colors",children:ie("customerDashboard.staffBranches")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 leading-relaxed",children:ie("customerDashboard.staffBranchesDesc")})]})]})]})]})]}),at("howItWorks")&&t.jsxs("section",{className:`bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-3xl p-6 sm:p-8 lg:p-10 shadow-xl relative overflow-hidden ${yt?"select-none":""}`,children:[t.jsxs("div",{className:"absolute inset-0 opacity-10",children:[t.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-500 rounded-full -mr-48 -mt-48 blur-3xl"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-blue-500 rounded-full -ml-36 -mb-36 blur-3xl"})]}),dt&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-howitworks-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(wa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:ie("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:ie("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"relative z-10 flex items-center gap-3 mb-8 sm:mb-10",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-brand-600 rounded-xl flex items-center justify-center shadow-lg shadow-brand-600/30",children:t.jsx(gi,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:ie("customerDashboard.howItWorks")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400 font-medium",children:ie("customerDashboard.howItWorksSubtitle","   ")})]})]}),t.jsxs("div",{className:`relative z-10 grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 ${yt?Ne():""}`,children:[t.jsx("div",{className:"hidden lg:block absolute top-16 left-[15%] right-[15%] h-0.5 bg-gradient-to-r from-brand-600/50 via-brand-500/50 to-brand-600/50"}),[{icon:t.jsx(Gt,{size:28}),step:1,title:ie("customerDashboard.step1Title"),desc:ie("customerDashboard.step1Desc"),color:"from-blue-500 to-blue-600"},{icon:t.jsx(Ln,{size:28}),step:2,title:ie("customerDashboard.step2Title"),desc:ie("customerDashboard.step2Desc"),color:"from-emerald-500 to-emerald-600"},{icon:t.jsx(Ft,{size:28}),step:3,title:ie("customerDashboard.step3Title"),desc:ie("customerDashboard.step3Desc"),color:"from-amber-500 to-orange-500"},{icon:t.jsx(Dr,{size:28}),step:4,title:ie("customerDashboard.step4Title"),desc:ie("customerDashboard.step4Desc"),color:"from-purple-500 to-purple-600"}].map((Xe,ce)=>t.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center group",children:[t.jsxs("div",{className:`w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br ${Xe.color} rounded-2xl flex items-center justify-center text-white mb-4 shadow-lg transform transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3`,children:[Xe.icon,t.jsx("span",{className:"absolute -top-2 -right-2 w-6 h-6 sm:w-7 sm:h-7 bg-white text-slate-800 rounded-full flex items-center justify-center text-xs sm:text-sm font-black shadow-md",children:Xe.step})]}),t.jsx("h4",{className:"font-bold text-white text-sm sm:text-base mb-1.5 sm:mb-2",children:Xe.title}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400 leading-relaxed",children:Xe.desc})]},ce))]})]}),at("whySiniCar")&&t.jsxs("section",{className:`relative ${yt?`${Ne()} select-none`:""}`,children:[dt&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/70 backdrop-blur-sm rounded-3xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-4 p-8 bg-white rounded-2xl shadow-2xl border border-brand-100 hover:shadow-3xl transition-all transform hover:scale-105","data-testid":"button-guest-whysinicar-cta",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-500 to-brand-700 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(wa,{size:28,className:"text-white"})}),t.jsx("span",{className:"font-bold text-slate-800 text-lg",children:ie("guestMode.restrictedTitle")}),t.jsx("span",{className:"text-sm text-slate-500",children:ie("guestMode.loginToAccess")})]})}),t.jsxs("div",{className:"flex items-center gap-3 mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-brand-500 to-brand-700 rounded-xl flex items-center justify-center shadow-lg shadow-brand-200",children:t.jsx(Ut,{className:"text-white",size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-800",children:(A==null?void 0:A.whySiniCarTitle)||ie("customerDashboard.whySiniCar")}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 font-medium",children:ie("customerDashboard.whySiniCarSubtitle","   ")})]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5",children:((A==null?void 0:A.whySiniCarFeatures)||[{id:"1",title:ie("customerDashboard.expertiseTitle"),description:ie("customerDashboard.expertiseDesc"),icon:"box",iconColor:"text-cyan-400",bgColor:"from-cyan-500 to-cyan-600"},{id:"2",title:ie("customerDashboard.techTitle"),description:ie("customerDashboard.techDesc"),icon:"chart",iconColor:"text-emerald-400",bgColor:"from-emerald-500 to-emerald-600"},{id:"3",title:ie("customerDashboard.globalTitle"),description:ie("customerDashboard.globalDesc"),icon:"anchor",iconColor:"text-amber-400",bgColor:"from-amber-500 to-orange-500"},{id:"4",title:ie("customerDashboard.supportTitle"),description:ie("customerDashboard.supportDesc"),icon:"headphones",iconColor:"text-purple-400",bgColor:"from-purple-500 to-purple-600"}]).map((Xe,ce)=>t.jsxs("div",{className:"group relative bg-gradient-to-br from-slate-800 to-slate-900 text-white p-5 sm:p-6 rounded-2xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",children:[t.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${Xe.bgColor||"from-brand-500 to-brand-600"} opacity-20 rounded-full -mr-16 -mt-16 transition-transform duration-500 group-hover:scale-150`}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:`w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br ${Xe.bgColor||"from-brand-500 to-brand-600"} rounded-xl flex items-center justify-center mb-4 shadow-lg transform transition-transform duration-300 group-hover:scale-110`,children:[Xe.icon==="box"&&t.jsx(Hc,{size:24,className:"text-white"}),Xe.icon==="chart"&&t.jsx(Rr,{size:24,className:"text-white"}),Xe.icon==="anchor"&&t.jsx(nF,{size:24,className:"text-white"}),Xe.icon==="headphones"&&t.jsx(yf,{size:24,className:"text-white"}),Xe.icon==="truck"&&t.jsx(Dr,{size:24,className:"text-white"}),Xe.icon==="shield"&&t.jsx(Ln,{size:24,className:"text-white"}),Xe.icon==="globe"&&t.jsx(ja,{size:24,className:"text-white"}),Xe.icon==="star"&&t.jsx(gi,{size:24,className:"text-white"}),Xe.icon==="clock"&&t.jsx(os,{size:24,className:"text-white"}),Xe.icon==="award"&&t.jsx(Zt,{size:24,className:"text-white"})]}),t.jsx("h4",{className:"font-bold text-base sm:text-lg mb-2 text-white",children:Xe.title}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-300 leading-relaxed",children:Xe.description})]})]},Xe.id))})]})]}),t.jsxs("div",{className:"xl:col-span-1 space-y-6 sticky top-6",children:[at("cart")&&t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col relative ${yt?`${Ne()} select-none`:""}`,children:[dt&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/60 backdrop-blur-[2px] rounded-2xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-2 p-4 bg-white/90 rounded-xl shadow-lg border border-brand-100 hover:shadow-xl transition-all","data-testid":"button-guest-cart-cta",children:[t.jsx("div",{className:"w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center",children:t.jsx(wa,{size:20,className:"text-brand-600"})}),t.jsx("span",{className:"font-bold text-slate-800 text-sm",children:ie("guestMode.restrictedTitle")})]})}),t.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-sm md:text-base flex items-center gap-2",children:[t.jsx($a,{className:"text-brand-600",size:20}),ie("customerDashboard.wholesaleCart")]}),t.jsx("span",{className:"bg-brand-600 text-white text-xs font-bold px-2.5 py-1 rounded-full",children:g.length})]}),t.jsx("div",{className:"max-h-[350px] overflow-y-auto p-3 space-y-3 custom-scrollbar min-h-[180px]",children:g.length>0?g.map(Xe=>t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-xl border border-slate-100 group hover:border-brand-200 transition-colors shadow-sm",children:[t.jsx("div",{className:"w-9 h-9 bg-slate-50 rounded-lg border border-slate-200 flex items-center justify-center text-slate-700 font-bold text-sm shrink-0",children:Xe.quantity}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 text-xs md:text-sm truncate",title:Xe.name,children:Xe.name}),t.jsx("p",{className:"text-[11px] text-slate-500 font-mono truncate font-semibold mt-0.5",children:Xe.partNumber})]}),t.jsx("button",{onClick:()=>xs(Xe.id),className:"text-slate-300 hover:text-red-500 p-1.5 rounded hover:bg-red-50 transition-colors",children:t.jsx(Ct,{size:16})})]},Xe.id)):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-10 text-slate-400",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-3",children:t.jsx($a,{size:32,className:"opacity-30"})}),t.jsx("p",{className:"text-sm font-bold text-slate-500",children:ie("customerDashboard.emptyCart")}),t.jsx("p",{className:"text-xs opacity-70 mt-1",children:ie("customerDashboard.useSearchToAdd")})]})}),g.length>0&&t.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 space-y-3",children:[t.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700",children:[t.jsx("span",{children:ie("customerDashboard.estimatedTotal")}),t.jsxs("span",{className:"font-black text-slate-900",children:[tr.toLocaleString()," ",ie("customerDashboard.sar")]})]}),t.jsxs("button",{onClick:Ts,className:"w-full py-3 bg-brand-600 text-white rounded-xl font-bold text-sm hover:bg-brand-700 shadow-md shadow-brand-200 transition-all flex justify-center items-center gap-2",children:[t.jsx(Ut,{size:18}),ie("customerDashboard.submitOrder")]})]})]}),at("marketingCards")&&t.jsxs("div",{className:`space-y-4 relative ${yt?`${Ne()} select-none`:""}`,children:[dt&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/60 backdrop-blur-[2px] rounded-2xl",children:t.jsxs("button",{onClick:()=>lt(!0),className:"flex flex-col items-center gap-2 p-4 bg-white/90 rounded-xl shadow-lg border border-brand-100 hover:shadow-xl transition-all","data-testid":"button-guest-marketing-cta",children:[t.jsx("div",{className:"w-12 h-12 bg-brand-100 rounded-full flex items-center justify-center",children:t.jsx(wa,{size:20,className:"text-brand-600"})}),t.jsx("span",{className:"font-bold text-slate-800 text-sm",children:ie("guestMode.restrictedTitle")})]})}),t.jsx(o5,{icon:t.jsx(Dr,{className:"text-blue-600",size:24}),title:ie("customerDashboard.fastShipping"),desc:ie("customerDashboard.fastShippingDesc")}),t.jsx(o5,{icon:t.jsx(yf,{className:"text-purple-600",size:24}),title:ie("customerDashboard.techSupport"),desc:ie("customerDashboard.techSupportDesc")})]})]})]})]}),f==="ORDERS"&&t.jsx(ede,{orders:b,quoteRequests:j}),f==="QUOTE_REQUEST"&&t.jsx(tde,{user:e,onSuccess:()=>{}}),f==="IMPORT_CHINA"&&t.jsx(ide,{user:e,userProfile:s}),f==="TRADER_TOOLS"&&t.jsx(Pde,{user:e,profile:s}),f==="TOOLS_HISTORY"&&t.jsx(Dde,{user:e}),f==="ALTERNATIVES"&&t.jsx(Ude,{user:e,onBack:()=>x("HOME")}),f==="PRODUCT_SEARCH"&&t.jsx(qde,{user:e,profile:s,onBack:()=>x("HOME")}),f==="ORGANIZATION"&&t.jsx(ade,{user:e,mainProfileUserId:e.role==="CUSTOMER_STAFF"?e.parentId:e.id}),f==="TEAM_MANAGEMENT"&&s&&t.jsx(Gde,{organizationType:"customer",entityId:e.role==="CUSTOMER_STAFF"&&e.parentId?e.parentId:e.id,entityName:s.businessName||"",currentUserId:e.id}),f==="ABOUT"&&t.jsx(sde,{}),f==="NOTIFICATIONS"&&t.jsx(dE,{user:e,onBack:()=>x("HOME")}),f==="HISTORY"&&t.jsxs("div",{className:"animate-fade-in",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(xn,{className:"text-brand-600"})," ",ie("customerDashboard.searchHistory")]}),t.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:W.length>0?t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-5",children:ie("customerDashboard.partNumber")}),t.jsx("th",{className:"p-5",children:ie("customerDashboard.productName")}),t.jsx("th",{className:"p-5",children:ie("customerDashboard.viewDate")}),t.jsx("th",{className:"p-5",children:ie("customerDashboard.recordedPrice")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:W.map(Xe=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-5 font-mono font-bold text-brand-600 text-base",children:Xe.partNumber}),t.jsx("td",{className:"p-5 font-bold text-slate-800",children:Xe.productName}),t.jsx("td",{className:"p-5 text-slate-600 font-medium",children:hs(Xe.viewedAt)}),t.jsxs("td",{className:"p-5 font-black text-slate-900",children:[Xe.priceSnapshot," ",ie("customerDashboard.sar")]})]},Xe.id))})]}):t.jsxs("div",{className:"p-16 text-center text-slate-400",children:[t.jsx(xn,{size:64,className:"mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"font-bold text-lg text-slate-500",children:ie("customerDashboard.noSearchHistory")})]})})]})]})})]}),t.jsx(ls,{isOpen:Z,onClose:()=>ue(!1),title:ie("customerDashboard.orderSuccess.title"),maxWidth:"max-w-md",children:t.jsxs("div",{className:"text-center p-6",children:[t.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600 shadow-sm animate-bounce",children:t.jsx(Ut,{size:40,strokeWidth:3})}),t.jsx("p",{className:"text-slate-600 font-medium text-lg leading-relaxed mb-6",children:ie("customerDashboard.orderSuccess.message")}),t.jsx("button",{onClick:()=>ue(!1),className:"w-full py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:ie("common.confirm")})]})}),re&&t.jsx(ls,{isOpen:!!re,onClose:()=>H(null),title:"",maxWidth:"max-w-sm",children:t.jsxs("div",{className:"relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-50 via-white to-amber-50 opacity-60"}),t.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 bg-brand-400/10 rounded-full blur-2xl -translate-x-1/2 -translate-y-1/2"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 bg-amber-400/10 rounded-full blur-2xl translate-x-1/3 translate-y-1/3"}),t.jsxs("div",{className:"relative text-center p-4",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-brand-100 to-brand-50 rounded-xl flex items-center justify-center text-brand-600 mx-auto mb-2 shadow-sm border border-brand-100/50 transform hover:scale-105 transition-transform",children:t.jsx(Xt,{size:24})}),t.jsx("h3",{className:"text-base font-bold text-slate-800 leading-tight line-clamp-2",children:re.name}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-1.5 mt-1.5",children:[t.jsx("span",{className:"text-[11px] text-slate-500 font-mono font-bold bg-slate-100/80 px-1.5 py-0.5 rounded",children:re.partNumber}),t.jsx("span",{className:"text-[11px] text-brand-700 font-bold uppercase px-1.5 py-0.5 rounded bg-brand-50 border border-brand-100/50",children:re.brand})]})]}),t.jsx("div",{className:"bg-gradient-to-br from-white to-slate-50/80 p-3 rounded-xl border border-slate-100 mb-3 shadow-sm backdrop-blur-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider mb-0.5",children:ie("customerDashboard.priceModal.wholesalePrice")}),t.jsxs("div",{className:"text-2xl font-black bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:[re.price," ",t.jsx("span",{className:"text-sm text-slate-500 font-bold",children:ie("customerDashboard.sar")})]})]}),re.stock>0?t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-emerald-50 border border-emerald-200/50",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),t.jsx("span",{className:"text-[10px] font-bold text-emerald-700",children:ie("customerDashboard.available")})]}):t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-red-50 border border-red-200/50",children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),t.jsx("span",{className:"text-[10px] font-bold text-red-700",children:ie("customerDashboard.outOfStock")})]})]})}),t.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[t.jsxs("span",{className:"text-xs text-slate-500 font-bold",children:[ie("customerDashboard.priceModal.quantity")||"",":"]}),t.jsxs("div",{className:"flex items-center border border-slate-200 rounded-lg h-9 bg-white shadow-sm overflow-hidden",children:[t.jsx("button",{onClick:()=>B(Math.max(1,pe-1)),"data-testid":"button-quantity-decrease",className:"w-9 h-full flex items-center justify-center text-slate-500 hover:text-brand-600 hover:bg-brand-50 border-l border-slate-100 transition-colors",children:t.jsx(lE,{size:14})}),t.jsx("div",{className:"w-10 flex items-center justify-center font-black text-sm text-slate-800","data-testid":"text-quantity-value",children:pe}),t.jsx("button",{onClick:()=>B(pe+1),"data-testid":"button-quantity-increase",className:"w-9 h-full flex items-center justify-center text-slate-500 hover:text-brand-600 hover:bg-brand-50 border-r border-slate-100 transition-colors",children:t.jsx(Pt,{size:14})})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>H(null),"data-testid":"button-modal-close",className:"flex-1 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-lg font-bold text-sm hover:bg-slate-50 transition-colors",children:ie("customerDashboard.priceModal.close")}),t.jsxs("button",{onClick:Xe=>{Xe.stopPropagation(),zt()},disabled:re.stock===0,"data-testid":"button-modal-add-to-cart",className:`flex-1 py-2.5 text-white rounded-lg font-bold text-sm flex items-center justify-center gap-1.5 transition-all transform hover:scale-[1.02] active:scale-[0.98] ${re.stock>0?"bg-gradient-to-r from-brand-600 to-brand-500 hover:from-brand-700 hover:to-brand-600 shadow-md shadow-brand-500/20":"bg-slate-300 cursor-not-allowed shadow-none"}`,children:[t.jsx($a,{size:15}),ie("customerDashboard.priceModal.addToCart")]})]})]})]})}),G&&t.jsx(ls,{isOpen:!!G,onClose:()=>te(null),title:ie("customerDashboard.duplicateConfirm.title"),maxWidth:"max-w-md",children:t.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[t.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center text-amber-600 mb-6 animate-bounce",children:t.jsx(Gs,{size:40})}),t.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-3",children:ie("customerDashboard.duplicateConfirm.title")}),t.jsxs("p",{className:"text-slate-600 mb-8 leading-relaxed font-medium",children:[ie("customerDashboard.duplicateConfirm.message"),t.jsx("span",{className:"font-black text-slate-900 mx-1 block my-2 bg-slate-100 p-2 rounded-lg border border-slate-200",children:G.product.name}),"(",t.jsx("span",{className:"font-bold text-brand-600 mx-1",children:G.quantity}),")"]}),t.jsxs("div",{className:"flex gap-4 w-full",children:[t.jsx("button",{onClick:()=>te(null),className:"flex-1 py-3.5 bg-white border border-slate-300 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:ie("customerDashboard.duplicateConfirm.cancel")}),t.jsx("button",{onClick:es,className:"flex-1 py-3.5 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-200 transition-colors",children:ie("customerDashboard.duplicateConfirm.confirm")})]})]})}),wt&&!yt&&t.jsx(vde,{userId:e.id,customerType:s==null?void 0:s.businessType,onClose:()=>ke(!1)}),!yt&&t.jsx(Fde,{user:{id:e.id,name:e.name,phone:e.phone,email:e.email,role:e.role}})]})},tue=e=>[{key:"orderStatus",label:e("adminSettings.statusCategories.orderStatus"),icon:t.jsx($a,{size:16})},{key:"orderInternalStatus",label:e("adminSettings.statusCategories.orderInternalStatus"),icon:t.jsx(yF,{size:16})},{key:"accountRequestStatus",label:e("adminSettings.statusCategories.accountRequestStatus"),icon:t.jsx(Gt,{size:16})},{key:"quoteRequestStatus",label:e("adminSettings.statusCategories.quoteRequestStatus"),icon:t.jsx(or,{size:16})},{key:"quoteItemStatus",label:e("adminSettings.statusCategories.quoteItemStatus"),icon:t.jsx(Lt,{size:16})},{key:"missingStatus",label:e("adminSettings.statusCategories.missingStatus"),icon:t.jsx(Xt,{size:16})},{key:"importRequestStatus",label:e("adminSettings.statusCategories.importRequestStatus"),icon:t.jsx(Dr,{size:16})},{key:"customerStatus",label:e("adminSettings.statusCategories.customerStatus"),icon:t.jsx(ja,{size:16})},{key:"staffStatus",label:e("adminSettings.statusCategories.staffStatus"),icon:t.jsx(Gt,{size:16})}],sue=({settings:e,onUpdate:s,onSave:a,saving:r})=>{const[n,i]=T.useState("orderStatus"),[l,o]=T.useState(null),[d,u]=T.useState(""),[h,f]=T.useState("#000000"),[x,g]=T.useState("#ffffff"),[v,b]=T.useState(!1),[y,j]=T.useState(""),[w,A]=T.useState(""),[O,C]=T.useState("#6b7280"),[E,S]=T.useState("#f3f4f6"),[D,M]=T.useState(null),[U,I]=T.useState(!1),{addToast:k}=Dt(),{t:z}=Bs(),_=tue(z),q=e.statusLabels;if(!q)return null;const L=q[n],Q=_.find(K=>K.key===n),X=Object.entries(L).sort((K,se)=>{const G=K[1].sortOrder||999,te=se[1].sortOrder||999;return G-te}),W=K=>{const se=L[K];se&&(o(K),u(se.label),f(se.color),g(se.bgColor))},ee=async()=>{if(!l||!d.trim())return;const K=L[l],se={...q,[n]:{...L,[l]:{...K,label:d.trim(),color:h,bgColor:x}}};s({...e,statusLabels:se}),await xe.updateStatusLabels(se),o(null),k(z("adminSettings.statusUpdated"),"success")},V=()=>{o(null)},P=async()=>{if(!y.trim()||!w.trim()){k(z("adminSettings.fillKeyAndName"),"error");return}const K=y.trim().toUpperCase().replace(/\s+/g,"_");if(L[K]){k(z("adminSettings.keyExists"),"error");return}const G=Object.values(L).reduce((Z,ue)=>Math.max(Z,ue.sortOrder||0),0),te={...q,[n]:{...L,[K]:{label:w.trim(),color:O,bgColor:E,isSystem:!1,sortOrder:G+1}}};s({...e,statusLabels:te}),await xe.updateStatusLabels(te),b(!1),j(""),A(""),C("#6b7280"),S("#f3f4f6"),k(z("adminSettings.statusAdded"),"success")},Y=async K=>{if(L[K].isSystem){k(z("adminSettings.cannotDeleteSystem"),"error");return}I(!0);const G=await xe.checkStatusUsage(n,K);if(I(!1),G>0){k(z("adminSettings.cannotDeleteInUse",{count:G}),"error"),M(null);return}const te={...L};delete te[K];const Z={...q,[n]:te};s({...e,statusLabels:Z}),await xe.updateStatusLabels(Z),M(null),k(z("adminSettings.statusDeleted"),"success")},J=async K=>{const se={...L};Object.keys(se).forEach(te=>{se[te]={...se[te],isDefault:te===K}});const G={...q,[n]:se};s({...e,statusLabels:G}),await xe.updateStatusLabels(G),k(z("adminSettings.defaultStatusSet"),"success")};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(vF,{className:"text-orange-500"})," ",z("adminSettings.statusLabelsManagement")]}),t.jsxs("button",{onClick:a,disabled:r,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2","data-testid":"button-save-status-labels",children:[t.jsx(ds,{size:18})," ",z(r?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsx("p",{className:"text-sm text-slate-500 bg-slate-50 p-4 rounded-xl",children:z("adminSettings.statusLabelsDescription")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(K=>t.jsxs("button",{onClick:()=>{i(K.key),b(!1),o(null)},className:`px-4 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${n===K.key?"bg-slate-900 text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`button-category-${K.key}`,children:[K.icon,K.label]},K.key))}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-visible",children:[t.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[Q==null?void 0:Q.icon," ",Q==null?void 0:Q.label]}),t.jsxs("button",{onClick:()=>b(!v),className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg text-sm font-bold hover:bg-brand-700 transition-colors","data-testid":"button-add-new-status",children:[t.jsx(Pt,{size:16})," ",z("adminSettings.addNewStatus")]})]}),v&&t.jsxs("div",{className:"bg-brand-50 p-6 border-b border-brand-200 animate-slide-up",children:[t.jsxs("h4",{className:"font-bold text-brand-800 mb-4 flex items-center gap-2",children:[t.jsx(Pt,{size:18})," ",z("adminSettings.addNewStatus")]}),t.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:z("adminSettings.statusKey")}),t.jsx("input",{type:"text",value:y,onChange:K=>j(K.target.value.toUpperCase().replace(/\s+/g,"_")),className:"w-full p-2 border border-slate-300 rounded-lg text-sm font-mono",placeholder:"NEW_STATUS","data-testid":"input-new-status-key"})]}),t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:z("adminSettings.statusLabel")}),t.jsx("input",{type:"text",value:w,onChange:K=>A(K.target.value),className:"w-full p-2 border border-slate-300 rounded-lg text-sm font-bold",placeholder:z("adminSettings.newStatus"),"data-testid":"input-new-status-label"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.textColor"),":"]}),t.jsx("input",{type:"color",value:O,onChange:K=>C(K.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-new-status-color"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.backgroundColor"),":"]}),t.jsx("input",{type:"color",value:E,onChange:K=>S(K.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-new-status-bgcolor"})]}),t.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:E,color:O},children:w||z("adminSettings.preview")}),t.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition-colors","data-testid":"button-confirm-add-status",children:z("adminSettings.add")}),t.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300 transition-colors","data-testid":"button-cancel-add-status",children:z("common.cancel")})]})]}),t.jsx("div",{className:"divide-y divide-slate-100",children:X.map(([K,se])=>t.jsx("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 transition-colors","data-testid":`row-status-${K}`,children:l===K?t.jsxs("div",{className:"flex-1 flex items-center gap-4 flex-wrap",children:[t.jsx("input",{type:"text",value:d,onChange:G=>u(G.target.value),className:"flex-1 min-w-[150px] p-2 border border-slate-300 rounded-lg text-sm font-bold",placeholder:z("adminSettings.statusLabel"),"data-testid":"input-edit-status-label"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.textColor"),":"]}),t.jsx("input",{type:"color",value:h,onChange:G=>f(G.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-edit-status-color"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-xs text-slate-500",children:[z("adminSettings.backgroundColor"),":"]}),t.jsx("input",{type:"color",value:x,onChange:G=>g(G.target.value),className:"w-8 h-8 rounded cursor-pointer border border-slate-200","data-testid":"input-edit-status-bgcolor"})]}),t.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:x,color:h},children:d||z("adminSettings.preview")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:ee,className:"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors","data-testid":"button-confirm-edit-status",children:t.jsx(Zt,{size:16})}),t.jsx("button",{onClick:V,className:"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors","data-testid":"button-cancel-edit-status",children:t.jsx(St,{size:16})})]})]}):D===K?t.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[t.jsx("span",{className:"text-red-600 font-bold text-sm",children:z(U?"adminSettings.checkingUsage":"adminSettings.confirmDelete")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Y(K),disabled:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-bold hover:bg-red-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-delete-status",children:z("adminSettings.yesDelete")}),t.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300 transition-colors","data-testid":"button-cancel-delete-status",children:z("common.cancel")})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded font-mono text-slate-500",children:K}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold",style:{backgroundColor:se.bgColor,color:se.color},children:se.label}),se.isSystem&&t.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-[10px] font-bold flex items-center gap-1",children:[t.jsx(Ln,{size:10})," ",z("adminSettings.systemStatus")]}),se.isDefault&&t.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded text-[10px] font-bold flex items-center gap-1",children:[t.jsx(pn,{size:10})," ",z("adminSettings.defaultStatus")]}),se.sortOrder&&t.jsxs("span",{className:"text-[10px] text-slate-400",children:["#",se.sortOrder]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[!se.isDefault&&t.jsx("button",{onClick:()=>J(K),className:"p-2 text-amber-500 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors",title:z("adminSettings.setAsDefault"),"data-testid":`button-set-default-${K}`,children:t.jsx(pn,{size:16})}),t.jsx("button",{onClick:()=>W(K),className:"p-2 text-slate-400 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",title:z("common.edit"),"data-testid":`button-edit-status-${K}`,children:t.jsx(Hp,{size:16})}),!se.isSystem&&t.jsx("button",{onClick:()=>M(K),className:"p-2 text-red-400 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:z("common.delete"),"data-testid":`button-delete-status-${K}`,children:t.jsx(Ct,{size:16})})]})]})},K))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-blue-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(Ln,{size:16})," ",z("adminSettings.systemStatuses")]}),z("adminSettings.systemStatusesDesc")]}),t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(pn,{size:16})," ",z("adminSettings.defaultStatusInfo")]}),z("adminSettings.defaultStatusInfoDesc")]})]})]})},aue=({settings:e,onUpdate:s,onSave:a,saving:r})=>{const[n,i]=T.useState(!1),[l,o]=T.useState(null),[d,u]=T.useState(!1),[h,f]=T.useState("initial"),[x,g]=T.useState(!1),{addToast:v}=Dt(),{t:b}=Bs(),y=async A=>{var C;const O=(C=A.target.files)==null?void 0:C[0];if(O)try{const E=await O.text(),S=JSON.parse(E),M=["products","orders","customers","settings"].filter(I=>!(I in S));if(M.length>0){v(`    .  : ${M.join(", ")}`,"error");return}if(!(Array.isArray(S.products)&&S.products.length>0||Array.isArray(S.orders)&&S.orders.length>0||Array.isArray(S.customers)&&S.customers.length>0)){v("         ","error");return}if(!S.exportDate){v("     -       ","error");return}o(O),i(!0),v("       ","success")}catch{v("     -     JSON ","error")}},j=async()=>{try{const A=await xe.exportAllData(),O=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),C=URL.createObjectURL(O),E=document.createElement("a");E.href=C,E.download=`sinicar_backup_${new Date().toISOString().split("T")[0]}.json`,E.click(),URL.revokeObjectURL(C),v("    ","success")}catch{v("     ","error")}},w=async()=>{if(!n){v("      ","error");return}g(!0);try{await xe.resetAllData(),v("    ","success"),u(!1),f("initial"),i(!1),o(null),window.location.reload()}catch{v("    ","error")}finally{g(!1)}};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsx("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Vo,{className:"text-brand-600"}),"  "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"    "})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(zj,{size:20,className:"text-green-500"}),"  "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("button",{onClick:j,className:"p-6 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-all text-right",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(cF,{size:24,className:"text-green-600"}),t.jsx("span",{className:"font-bold text-green-800",children:"  "})]}),t.jsx("p",{className:"text-sm text-green-600",children:"     JSON"})]}),t.jsxs("label",{className:"p-6 bg-blue-50 border border-blue-200 rounded-xl hover:bg-blue-100 transition-all cursor-pointer text-right block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(zj,{size:24,className:"text-blue-600"}),t.jsx("span",{className:"font-bold text-blue-800",children:"  "}),n&&t.jsx(Fn,{size:20,className:"text-green-500"})]}),t.jsx("p",{className:"text-sm text-blue-600",children:l?` : ${l.name}`:"    JSON"}),t.jsx("input",{type:"file",accept:".json",onChange:y,className:"hidden"})]})]})]}),t.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(Gs,{size:20,className:"text-red-500"}),"    ()"]}),t.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Nf,{size:24,className:"text-red-500 flex-shrink-0 mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-red-800",children:":      !"}),t.jsx("p",{className:"text-sm text-red-600 mt-1",children:"     :      ."}),t.jsx("p",{className:"text-sm text-red-700 font-bold mt-2",children:"       ."})]})]})}),d?t.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[h==="initial"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-slate-700 font-bold",children:"        "}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>f("confirm"),className:"flex-1 bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700",children:" "}),t.jsx("button",{onClick:()=>{u(!1),f("initial")},className:"flex-1 bg-slate-200 text-slate-700 py-3 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),h==="confirm"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-red-700 font-bold",children:"  :    !"}),t.jsx("p",{className:"text-sm text-slate-600",children:' "" :'}),t.jsx("input",{type:"text",className:"w-full p-3 border border-slate-300 rounded-lg text-center font-bold",placeholder:" ",onChange:A=>{A.target.value===""&&f("final")}}),t.jsx("button",{onClick:()=>{u(!1),f("initial")},className:"w-full bg-slate-200 text-slate-700 py-3 rounded-lg font-bold hover:bg-slate-300",children:""})]}),h==="final"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-red-100 border border-red-300 rounded-lg text-center",children:[t.jsx(Gs,{size:48,className:"text-red-600 mx-auto mb-2"}),t.jsx("p",{className:"text-red-800 font-bold",children:"  !"})]}),t.jsx("button",{onClick:w,disabled:x,className:"w-full bg-red-700 text-white py-4 rounded-lg font-bold hover:bg-red-800 disabled:opacity-50 flex items-center justify-center gap-2",children:x?t.jsxs(t.Fragment,{children:[t.jsx(Ko,{size:20,className:"animate-spin"})," ..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ct,{size:20}),"  "]})}),t.jsx("button",{onClick:()=>{u(!1),f("initial")},className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700",children:"  -  "})]})]}):t.jsxs("button",{onClick:()=>u(!0),disabled:!n,className:`w-full p-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${n?"bg-red-600 text-white hover:bg-red-700":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[t.jsx(Ct,{size:20}),n?"  ":"   "]})]})]})},rue=({t:e})=>{const[s,a]=T.useState([{id:"ORDER_CONFIRMED",name:" ",nameEn:"Order Confirmed",type:"success",icon:"CheckCircle2",channels:["toast","email"],enabled:!0,message:{ar:"   ",en:"Your order has been confirmed",hi:"     ",zh:""},style:{bgColor:"#10b981",textColor:"#ffffff",borderColor:"#059669"}},{id:"ORDER_SHIPPED",name:" ",nameEn:"Order Shipped",type:"info",icon:"Truck",channels:["toast","email","sms"],enabled:!0,message:{ar:"  ",en:"Your order has been shipped",hi:"     ",zh:""},style:{bgColor:"#3b82f6",textColor:"#ffffff",borderColor:"#2563eb"}},{id:"PAYMENT_SUCCESS",name:" ",nameEn:"Payment Success",type:"success",icon:"DollarSign",channels:["toast","email"],enabled:!0,message:{ar:"   ",en:"Payment received successfully",hi:"   ",zh:""},style:{bgColor:"#059669",textColor:"#ffffff",borderColor:"#047857"}},{id:"LOW_STOCK",name:" ",nameEn:"Low Stock Alert",type:"warning",icon:"AlertCircle",channels:["toast","modal"],enabled:!0,message:{ar:":   ",en:"Alert: Low stock for product",hi:":  ",zh:""},style:{bgColor:"#f59e0b",textColor:"#ffffff",borderColor:"#d97706"}},{id:"ACCOUNT_APPROVED",name:"  ",nameEn:"Account Approved",type:"success",icon:"UserCheck",channels:["toast","email","sms"],enabled:!0,message:{ar:"   ",en:"Your account has been approved",hi:"    ",zh:""},style:{bgColor:"#22c55e",textColor:"#ffffff",borderColor:"#16a34a"}},{id:"NEW_MESSAGE",name:" ",nameEn:"New Message",type:"info",icon:"MessageSquare",channels:["toast","banner"],enabled:!0,message:{ar:"  ",en:"You have a new message",hi:"     ",zh:""},style:{bgColor:"#6366f1",textColor:"#ffffff",borderColor:"#4f46e5"}},{id:"ERROR_GENERAL",name:" ",nameEn:"General Error",type:"error",icon:"XCircle",channels:["toast","modal"],enabled:!0,message:{ar:"     ",en:"An error occurred, please try again",hi:"  ,    ",zh:""},style:{bgColor:"#ef4444",textColor:"#ffffff",borderColor:"#dc2626"}}]),[r,n]=T.useState(null),[i,l]=T.useState(null),o=[{value:"success",label:e("adminSettings.notifSuccess",""),icon:t.jsx(Fn,{size:16,className:"text-green-500"})},{value:"error",label:e("adminSettings.notifError",""),icon:t.jsx(Zs,{size:16,className:"text-red-500"})},{value:"warning",label:e("adminSettings.notifWarning",""),icon:t.jsx(ma,{size:16,className:"text-amber-500"})},{value:"info",label:e("adminSettings.notifInfo",""),icon:t.jsx(mi,{size:16,className:"text-blue-500"})}],d=[{value:"toast",label:e("adminSettings.channelToast"," "),icon:t.jsx(Or,{size:14})},{value:"modal",label:e("adminSettings.channelModal"," "),icon:t.jsx(Gc,{size:14})},{value:"banner",label:e("adminSettings.channelBanner"," "),icon:t.jsx(ya,{size:14})},{value:"email",label:e("adminSettings.channelEmail"," "),icon:t.jsx(Ll,{size:14})},{value:"sms",label:e("adminSettings.channelSMS"," "),icon:t.jsx(xre,{size:14})}],u=(f,x)=>{a(g=>g.map(v=>v.id===f?{...v,...x}:v))},h=(f,x)=>{const g=s.find(b=>b.id===f);if(!g)return;const v=g.channels.includes(x)?g.channels.filter(b=>b!==x):[...g.channels,x];u(f,{channels:v})};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(vr,{className:"text-brand-600"})," ",e("adminSettings.notificationManagement"," ")]}),t.jsxs("button",{className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 flex items-center gap-2",children:[t.jsx(Pt,{size:18})," ",e("adminSettings.addNotification"," ")]})]}),t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-100",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(pi,{className:"text-blue-500 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-blue-800",children:e("adminSettings.notifSystemDesc","  ")}),t.jsx("p",{className:"text-sm text-blue-600",children:e("adminSettings.notifSystemDescDetail","     :    ")})]})]})}),t.jsx("div",{className:"space-y-4",children:s.map(f=>t.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${r===f.id?"border-brand-500 bg-brand-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:r===f.id?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-bold text-slate-800",children:e("adminSettings.editNotification"," ")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>l(f),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:t.jsx(fs,{size:16})}),t.jsx("button",{onClick:()=>n(null),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:t.jsx(Zt,{size:16})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifNameAr"," ")}),t.jsx("input",{type:"text",value:f.name,onChange:x=>u(f.id,{name:x.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifNameEn"," ")}),t.jsx("input",{type:"text",value:f.nameEn,onChange:x=>u(f.id,{nameEn:x.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifType"," ")}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(x=>t.jsxs("button",{onClick:()=>u(f.id,{type:x.value}),className:`flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${f.type===x.value?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[x.icon," ",x.label]},x.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifChannels"," ")}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:d.map(x=>t.jsxs("button",{onClick:()=>h(f.id,x.value),className:`flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${f.channels.includes(x.value)?"border-green-500 bg-green-50":"border-slate-200"}`,children:[x.icon," ",x.label]},x.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgAr"," ")}),t.jsx("input",{type:"text",value:f.message.ar,onChange:x=>u(f.id,{message:{...f.message,ar:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgEn"," ")}),t.jsx("input",{type:"text",value:f.message.en,dir:"ltr",onChange:x=>u(f.id,{message:{...f.message,en:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgHi"," ")}),t.jsx("input",{type:"text",value:f.message.hi,dir:"ltr",onChange:x=>u(f.id,{message:{...f.message,hi:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifMsgZh"," ")}),t.jsx("input",{type:"text",value:f.message.zh,dir:"ltr",onChange:x=>u(f.id,{message:{...f.message,zh:x.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifBgColor"," ")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:f.style.bgColor,onChange:x=>u(f.id,{style:{...f.style,bgColor:x.target.value}}),className:"w-12 h-12 rounded-lg cursor-pointer border border-slate-200"}),t.jsx("input",{type:"text",value:f.style.bgColor,onChange:x=>u(f.id,{style:{...f.style,bgColor:x.target.value}}),className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifTextColor"," ")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:f.style.textColor,onChange:x=>u(f.id,{style:{...f.style,textColor:x.target.value}}),className:"w-12 h-12 rounded-lg cursor-pointer border border-slate-200"}),t.jsx("input",{type:"text",value:f.style.textColor,onChange:x=>u(f.id,{style:{...f.style,textColor:x.target.value}}),className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:e("adminSettings.notifBorderColor"," ")}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"color",value:f.style.borderColor,onChange:x=>u(f.id,{style:{...f.style,borderColor:x.target.value}}),className:"w-12 h-12 rounded-lg cursor-pointer border border-slate-200"}),t.jsx("input",{type:"text",value:f.style.borderColor,onChange:x=>u(f.id,{style:{...f.style,borderColor:x.target.value}}),className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-mono",dir:"ltr"})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:e("adminSettings.notifPreview"," ")}),t.jsxs("div",{className:"p-4 rounded-xl flex items-center gap-3 shadow-lg",style:{backgroundColor:f.style.bgColor,color:f.style.textColor,borderLeft:`4px solid ${f.style.borderColor}`},children:[f.type==="success"&&t.jsx(Fn,{size:24}),f.type==="error"&&t.jsx(Zs,{size:24}),f.type==="warning"&&t.jsx(ma,{size:24}),f.type==="info"&&t.jsx(mi,{size:24}),t.jsx("span",{className:"font-bold",children:f.message.ar})]})]})]}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:f.style.bgColor,color:f.style.textColor},children:[f.type==="success"&&t.jsx(Fn,{size:20}),f.type==="error"&&t.jsx(Zs,{size:20}),f.type==="warning"&&t.jsx(ma,{size:20}),f.type==="info"&&t.jsx(mi,{size:20})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800",children:f.name}),t.jsx("p",{className:"text-sm text-slate-500",children:f.nameEn})]}),t.jsx("div",{className:"flex gap-1 flex-wrap",children:f.channels.map(x=>t.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded text-xs font-bold",children:x},x))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>u(f.id,{enabled:!f.enabled}),className:`p-2 rounded-lg transition-colors ${f.enabled?"bg-green-100 text-green-600":"bg-slate-100 text-slate-400"}`,children:f.enabled?t.jsx(rne,{size:16}):t.jsx(gr,{size:16})}),t.jsx("button",{onClick:()=>n(f.id),className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200",children:t.jsx(Hp,{size:16})}),t.jsx("button",{className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:t.jsx(Ct,{size:16})})]})]})},f.id))})]})},nue=({t:e})=>{const[s,a]=T.useState([{id:"INVOICE",name:"",nameEn:"Invoice",type:"invoice",isDefault:!0,pageSize:"A4",orientation:"portrait",margins:{top:20,right:20,bottom:20,left:20},header:{enabled:!0,height:80,showLogo:!0,logoPosition:"right",showCompanyInfo:!0},footer:{enabled:!0,height:40,showPageNumbers:!0,customText:"  "},columns:["productName","sku","quantity","unitPrice","total"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:16,body:12}},colors:{primary:"#1e3a5f",secondary:"#f59e0b",text:"#1f2937",border:"#e5e7eb"}},{id:"QUOTE",name:" ",nameEn:"Quotation",type:"quote",isDefault:!1,pageSize:"A4",orientation:"portrait",margins:{top:25,right:25,bottom:25,left:25},header:{enabled:!0,height:100,showLogo:!0,logoPosition:"center",showCompanyInfo:!0},footer:{enabled:!0,height:50,showPageNumbers:!0,customText:"    7 "},columns:["productName","sku","quantity","unitPrice","discount","total"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:18,body:11}},colors:{primary:"#059669",secondary:"#fbbf24",text:"#374151",border:"#d1d5db"}},{id:"PACKING_LIST",name:" ",nameEn:"Packing List",type:"packing",isDefault:!1,pageSize:"A4",orientation:"portrait",margins:{top:15,right:15,bottom:15,left:15},header:{enabled:!0,height:60,showLogo:!0,logoPosition:"left",showCompanyInfo:!1},footer:{enabled:!1,height:0,showPageNumbers:!1,customText:""},columns:["productName","sku","quantity","location","notes"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:14,body:10}},colors:{primary:"#7c3aed",secondary:"#a78bfa",text:"#4b5563",border:"#e5e7eb"}},{id:"DELIVERY_NOTE",name:" ",nameEn:"Delivery Note",type:"delivery",isDefault:!1,pageSize:"A4",orientation:"portrait",margins:{top:20,right:20,bottom:20,left:20},header:{enabled:!0,height:70,showLogo:!0,logoPosition:"right",showCompanyInfo:!0},footer:{enabled:!0,height:60,showPageNumbers:!1,customText:" : ____________"},columns:["productName","quantity","notes"],fonts:{heading:"Cairo",body:"Cairo",size:{heading:15,body:11}},colors:{primary:"#0891b2",secondary:"#06b6d4",text:"#1f2937",border:"#cbd5e1"}}]),[r,n]=T.useState(null),[i,l]=T.useState(null),o=[{value:"A4",label:"A4 (210  297 mm)"},{value:"A5",label:"A5 (148  210 mm)"},{value:"Letter",label:"Letter (8.5  11 in)"},{value:"Legal",label:"Legal (8.5  14 in)"}],d=[{value:"productName",label:e("adminSettings.colProductName"," ")},{value:"sku",label:e("adminSettings.colSku"," ")},{value:"quantity",label:e("adminSettings.colQuantity","")},{value:"unitPrice",label:e("adminSettings.colUnitPrice"," ")},{value:"discount",label:e("adminSettings.colDiscount","")},{value:"total",label:e("adminSettings.colTotal","")},{value:"location",label:e("adminSettings.colLocation","")},{value:"notes",label:e("adminSettings.colNotes","")}],u=(f,x)=>{a(g=>g.map(v=>v.id===f?{...v,...x}:v))},h=(f,x)=>{const g=s.find(b=>b.id===f);if(!g)return;const v=g.columns.includes(x)?g.columns.filter(b=>b!==x):[...g.columns,x];u(f,{columns:v})};return t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Wc,{className:"text-brand-600"})," ",e("adminSettings.printTemplateDesigner","  ")]}),t.jsxs("button",{className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 flex items-center gap-2",children:[t.jsx(Pt,{size:18})," ",e("adminSettings.addTemplate"," ")]})]}),t.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-xl border border-purple-100",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Gc,{className:"text-purple-500 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-purple-800",children:e("adminSettings.templateDesignerDesc","  ")}),t.jsx("p",{className:"text-sm text-purple-600",children:e("adminSettings.templateDesignerDescDetail","          ")})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(f=>t.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${r===f.id?"border-brand-500 bg-brand-50 md:col-span-2":"border-slate-200 bg-white hover:border-slate-300"}`,children:r===f.id?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"font-bold text-slate-800 text-lg",children:[e("adminSettings.editTemplate"," "),": ",f.name]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>l(f),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 flex items-center gap-2",children:[t.jsx(fs,{size:16})," ",e("adminSettings.preview","")]}),t.jsx("button",{onClick:()=>n(null),className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",children:t.jsx(Zt,{size:16})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h5",{className:"font-bold text-slate-700 flex items-center gap-2",children:[t.jsx(la,{size:16})," ",e("adminSettings.pageSettings"," ")]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:e("adminSettings.pageSize"," ")}),t.jsx("select",{value:f.pageSize,onChange:x=>u(f.id,{pageSize:x.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",children:o.map(x=>t.jsx("option",{value:x.value,children:x.label},x.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:e("adminSettings.orientation","")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>u(f.id,{orientation:"portrait"}),className:`flex-1 p-3 rounded-lg border-2 transition-all ${f.orientation==="portrait"?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[t.jsx("div",{className:"w-6 h-8 border-2 border-current mx-auto mb-1"}),t.jsx("span",{className:"text-xs",children:e("adminSettings.portrait","")})]}),t.jsxs("button",{onClick:()=>u(f.id,{orientation:"landscape"}),className:`flex-1 p-3 rounded-lg border-2 transition-all ${f.orientation==="landscape"?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[t.jsx("div",{className:"w-8 h-6 border-2 border-current mx-auto mb-1"}),t.jsx("span",{className:"text-xs",children:e("adminSettings.landscape","")})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:e("adminSettings.margins"," (mm)")}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.top","")}),t.jsx("input",{type:"number",value:f.margins.top,onChange:x=>u(f.id,{margins:{...f.margins,top:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.bottom","")}),t.jsx("input",{type:"number",value:f.margins.bottom,onChange:x=>u(f.id,{margins:{...f.margins,bottom:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.right","")}),t.jsx("input",{type:"number",value:f.margins.right,onChange:x=>u(f.id,{margins:{...f.margins,right:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.left","")}),t.jsx("input",{type:"number",value:f.margins.left,onChange:x=>u(f.id,{margins:{...f.margins,left:Number(x.target.value)}}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg"})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h5",{className:"font-bold text-slate-700 flex items-center gap-2",children:[t.jsx(Gc,{size:16})," ",e("adminSettings.headerFooter"," ")]}),t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-bold text-sm",children:e("adminSettings.header","")}),t.jsx("button",{onClick:()=>u(f.id,{header:{...f.header,enabled:!f.header.enabled}}),className:`p-2 rounded-lg ${f.header.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:f.header.enabled?t.jsx(Zt,{size:14}):t.jsx(St,{size:14})})]}),f.header.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:f.header.showLogo,onChange:x=>u(f.id,{header:{...f.header,showLogo:x.target.checked}}),className:"rounded"}),t.jsx("span",{className:"text-sm",children:e("adminSettings.showLogo"," ")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.logoPosition"," ")}),t.jsx("div",{className:"flex gap-1",children:["left","center","right"].map(x=>t.jsxs("button",{onClick:()=>u(f.id,{header:{...f.header,logoPosition:x}}),className:`flex-1 p-2 rounded border ${f.header.logoPosition===x?"border-brand-500 bg-brand-50":"border-slate-200"}`,children:[x==="left"&&t.jsx(Ure,{size:14,className:"mx-auto"}),x==="center"&&t.jsx(Dre,{size:14,className:"mx-auto"}),x==="right"&&t.jsx(Lre,{size:14,className:"mx-auto"})]},x))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:f.header.showCompanyInfo,onChange:x=>u(f.id,{header:{...f.header,showCompanyInfo:x.target.checked}}),className:"rounded"}),t.jsx("span",{className:"text-sm",children:e("adminSettings.showCompanyInfo"," ")})]})]})]}),t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-bold text-sm",children:e("adminSettings.footer","")}),t.jsx("button",{onClick:()=>u(f.id,{footer:{...f.footer,enabled:!f.footer.enabled}}),className:`p-2 rounded-lg ${f.footer.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:f.footer.enabled?t.jsx(Zt,{size:14}):t.jsx(St,{size:14})})]}),f.footer.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:f.footer.showPageNumbers,onChange:x=>u(f.id,{footer:{...f.footer,showPageNumbers:x.target.checked}}),className:"rounded"}),t.jsx("span",{className:"text-sm",children:e("adminSettings.showPageNumbers"," ")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.customText"," ")}),t.jsx("input",{type:"text",value:f.footer.customText,onChange:x=>u(f.id,{footer:{...f.footer,customText:x.target.value}}),className:"w-full p-2 bg-white border border-slate-200 rounded-lg"})]})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h5",{className:"font-bold text-slate-700 flex items-center gap-2",children:[t.jsx(Wo,{size:16})," ",e("adminSettings.colorsAndFonts"," ")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.primaryColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.primary,onChange:x=>u(f.id,{colors:{...f.colors,primary:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.primary,onChange:x=>u(f.id,{colors:{...f.colors,primary:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.secondaryColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.secondary,onChange:x=>u(f.id,{colors:{...f.colors,secondary:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.secondary,onChange:x=>u(f.id,{colors:{...f.colors,secondary:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.textColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.text,onChange:x=>u(f.id,{colors:{...f.colors,text:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.text,onChange:x=>u(f.id,{colors:{...f.colors,text:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.borderColor"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"color",value:f.colors.border,onChange:x=>u(f.id,{colors:{...f.colors,border:x.target.value}}),className:"w-8 h-8 rounded cursor-pointer"}),t.jsx("input",{type:"text",value:f.colors.border,onChange:x=>u(f.id,{colors:{...f.colors,border:x.target.value}}),className:"flex-1 p-1 text-xs bg-slate-50 border border-slate-200 rounded font-mono",dir:"ltr"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500",children:e("adminSettings.columns"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.map(x=>t.jsx("button",{onClick:()=>h(f.id,x.value),className:`px-2 py-1 text-xs rounded border transition-all ${f.columns.includes(x.value)?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 text-slate-600"}`,children:x.label},x.value))})]})]})]})]}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:f.colors.primary},children:t.jsx(Wc,{size:20,className:"text-white"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"font-bold text-slate-800",children:f.name}),f.isDefault&&t.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded text-xs font-bold",children:e("adminSettings.default","")})]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[f.nameEn,"  ",f.pageSize,"  ",f.orientation==="portrait"?e("adminSettings.portrait",""):e("adminSettings.landscape","")]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>n(f.id),className:"p-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200",children:t.jsx(la,{size:16})}),t.jsx("button",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",children:t.jsx($p,{size:16})}),!f.isDefault&&t.jsx("button",{className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:t.jsx(Ct,{size:16})})]})]})},f.id))}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 text-purple-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(Wc,{size:16})," ",e("adminSettings.printTip"," ")]}),e("adminSettings.printTipDesc","            ")]}),t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-green-800 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2",children:[t.jsx(al,{size:16})," ",e("adminSettings.pdfExport"," PDF")]}),e("adminSettings.pdfExportDesc","       PDF  ")]})]})]})},iue=()=>{var M,U,I,k,z,_,q,L,Q,X,W,ee,V,P,Y,J,K,se,G,te,Z,ue,re,H,pe,B,oe,fe,ne,de,we,Ue,qe,Ce,Le,Se,_e,Ze,Mt,lt,yt,wt,ke,We,Ne,at,dt,ie,rt,it,vt,Ie,ct,gt,Ot,Ls,La,Yr;const[e,s]=T.useState("GENERAL"),[a,r]=T.useState(null),[n,i]=T.useState([]),[l,o]=T.useState(!0),[d,u]=T.useState(!1),[h,f]=T.useState(!1),[x,g]=T.useState({title:"",subtitle:"",buttonText:" ",colorClass:"from-slate-700 to-slate-900",isActive:!0}),{addToast:v}=Dt(),{t:b}=Bs();T.useEffect(()=>{j()},[]);const y=[{id:"1",title:" ",description:"         .",icon:"box",iconColor:"text-cyan-400"},{id:"2",title:" ",description:"       .",icon:"chart",iconColor:"text-green-400"},{id:"3",title:" ",description:"     3   .",icon:"anchor",iconColor:"text-amber-400"},{id:"4",title:"  B2B",description:"        .",icon:"headphones",iconColor:"text-purple-400"}],j=async()=>{o(!0);try{const[Ae,zt]=await Promise.all([xe.getSettings(),xe.getBanners()]);(!Ae.whySiniCarFeatures||Ae.whySiniCarFeatures.length===0)&&(Ae.whySiniCarFeatures=y),r(Ae),i(zt)}catch{v("   ","error")}finally{o(!1)}},w=async()=>{if(a){u(!0);try{await xe.updateSettings(a),v("   ","success")}catch{v("   ","error")}finally{u(!1)}}},A=async()=>{const Ae=document.getElementById("test-conn-btn");Ae&&(Ae.innerText=" ..."),setTimeout(()=>{a!=null&&a.apiConfig.authToken?v("    (200 OK)","success"):v(" :   ","error"),Ae&&(Ae.innerText=" ")},1500)},O=async()=>{if(!x.title||!x.subtitle){v("   ","error");return}const Ae={id:`b-${Date.now()}`,title:x.title||"",subtitle:x.subtitle||"",buttonText:x.buttonText||"",colorClass:x.colorClass||"from-slate-700 to-slate-900",imageUrl:x.imageUrl,isActive:!0},zt=[...n,Ae];i(zt),await xe.updateBanners(zt),f(!1),g({title:"",subtitle:"",buttonText:" ",colorClass:"from-slate-700 to-slate-900",isActive:!0}),v("  ","success")},C=async Ae=>{if(confirm("      ")){const zt=n.filter(es=>es.id!==Ae);i(zt),await xe.updateBanners(zt),v("  ","info")}},E=async Ae=>{const zt=n.map(es=>es.id===Ae?{...es,isActive:!es.isActive}:es);i(zt),await xe.updateBanners(zt)},S=(Ae,zt)=>{a&&r({...a,uiTexts:{...a.uiTexts,[Ae]:zt}})};if(l||!a)return t.jsx("div",{className:"p-10 text-center",children:b("adminSettings.loading")});const D=({id:Ae,icon:zt,label:es})=>t.jsxs("button",{onClick:()=>s(Ae),className:`flex items-center gap-3 w-full p-4 rounded-xl transition-all mb-2 font-bold ${e===Ae?"bg-slate-900 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-transparent hover:border-slate-200"}`,"data-testid":`tab-${Ae.toLowerCase()}`,children:[zt,t.jsx("span",{children:es})]});return t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 animate-fade-in max-w-7xl mx-auto",children:[t.jsx("div",{className:"w-full lg:w-72 flex-shrink-0",children:t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 mb-6 sticky top-6",children:[t.jsx("h3",{className:"font-black text-xl text-slate-800 mb-6 px-2",children:b("adminSettings.systemSettings")}),t.jsxs("nav",{children:[t.jsx(D,{id:"GENERAL",icon:t.jsx(la,{size:20}),label:b("adminSettings.generalSettings")}),t.jsx(D,{id:"BANNERS",icon:t.jsx(tl,{size:20}),label:b("adminSettings.bannerManagement")}),t.jsx(D,{id:"FEATURES",icon:t.jsx(Zt,{size:20}),label:b("adminSettings.whySiniCar")}),t.jsx(D,{id:"GUEST_MODE",icon:t.jsx(vu,{size:20}),label:b("adminSettings.guestMode")}),t.jsx(D,{id:"NOTIFICATIONS",icon:t.jsx(vr,{size:20}),label:b("adminSettings.notifications"," ")}),t.jsx(D,{id:"PRINT_TEMPLATES",icon:t.jsx(Wc,{size:20}),label:b("adminSettings.printTemplates"," ")}),t.jsx(D,{id:"TEXTS",icon:t.jsx(t5,{size:20}),label:b("adminSettings.textManagement")}),t.jsx(D,{id:"AUTH_TEXTS",icon:t.jsx(Hp,{size:20}),label:"  "}),t.jsx(D,{id:"QUANTITY_MODAL",icon:t.jsx(YO,{size:20}),label:"  "}),t.jsx(D,{id:"DATA_MANAGEMENT",icon:t.jsx(Vo,{size:20}),label:" "}),t.jsx(D,{id:"STATUS_LABELS",icon:t.jsx(vF,{size:20}),label:b("adminSettings.statusLabels")}),t.jsx(D,{id:"API",icon:t.jsx(Vp,{size:20}),label:b("adminSettings.apiIntegration")}),t.jsx(D,{id:"APPEARANCE",icon:t.jsx(Wo,{size:20}),label:b("adminSettings.appearanceIdentity")})]})]})}),t.jsxs("div",{className:"flex-1",children:[e==="GENERAL"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(la,{className:"text-brand-600"})," ",b("adminSettings.siteSettings")]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.siteName")}),t.jsx("input",{type:"text",value:a.siteName,onChange:Ae=>r({...a,siteName:Ae.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.supportPhone")}),t.jsx("input",{type:"text",value:a.supportPhone,onChange:Ae=>r({...a,supportPhone:Ae.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.salesWhatsApp")}),t.jsx("input",{type:"text",value:a.supportWhatsapp||"",onChange:Ae=>r({...a,supportWhatsapp:Ae.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.supportEmail")}),t.jsx("input",{type:"email",value:a.supportEmail,onChange:Ae=>r({...a,supportEmail:Ae.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr"})]})]}),t.jsxs("div",{className:"mt-8 border-t border-slate-100 pt-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-lg",children:t.jsx(ya,{size:20})}),t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b("adminSettings.newsTicker")})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"font-bold text-slate-700",children:b("adminSettings.enableTicker")}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.tickerEnabled,onChange:Ae=>r({...a,tickerEnabled:Ae.target.checked}),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.tickerText")}),t.jsx("textarea",{rows:2,className:"w-full p-3 bg-white border border-slate-300 rounded-lg text-sm",value:a.tickerText,onChange:Ae=>r({...a,tickerText:Ae.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.tickerSpeed")}),t.jsx("input",{type:"number",min:1,max:10,className:"w-full p-3 bg-white border border-slate-300 rounded-lg",value:a.tickerSpeed,onChange:Ae=>r({...a,tickerSpeed:parseInt(Ae.target.value)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.bgColor")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"w-10 h-10 rounded border border-slate-300",style:{backgroundColor:a.tickerBgColor}}),t.jsx("input",{type:"text",className:"w-full p-3 bg-white border border-slate-300 rounded-lg font-mono text-sm",value:a.tickerBgColor,onChange:Ae=>r({...a,tickerBgColor:Ae.target.value})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.textColor")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"w-10 h-10 rounded border border-slate-300",style:{backgroundColor:a.tickerTextColor}}),t.jsx("input",{type:"text",className:"w-full p-3 bg-white border border-slate-300 rounded-lg font-mono text-sm",value:a.tickerTextColor,onChange:Ae=>r({...a,tickerTextColor:Ae.target.value})})]})]})]})]})]}),t.jsxs("div",{className:"mt-8 border-t border-slate-100 pt-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:t.jsx(fs,{size:20})}),t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b("adminSettings.productDisplaySettings")})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.minVisibleQty")}),t.jsx("input",{type:"number",min:0,className:"w-full p-3 bg-white border border-slate-300 rounded-lg",value:a.minVisibleQty??1,onChange:Ae=>r({...a,minVisibleQty:parseInt(Ae.target.value)||0})}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:b("adminSettings.minVisibleQtyNote")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.stockThreshold")}),t.jsx("input",{type:"number",min:0,className:"w-full p-3 bg-white border border-slate-300 rounded-lg",value:a.stockThreshold??0,onChange:Ae=>r({...a,stockThreshold:parseInt(Ae.target.value)||0})}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:b("adminSettings.stockThresholdNote")})]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-3 text-sm text-blue-700",children:[t.jsxs("strong",{children:[b("common.note"),":"]})," ",b("adminSettings.settingsNote")]})]})]}),t.jsxs("div",{className:"mt-8 border-t border-slate-100 pt-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:t.jsx(pi,{size:20})}),t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"  "})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-700",children:"  "}),t.jsx("p",{className:"text-xs text-slate-500",children:"        "})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:((M=a.orderStatusPointsConfig)==null?void 0:M.enabled)??!0,onChange:Ae=>{var zt;return r({...a,orderStatusPointsConfig:{...a.orderStatusPointsConfig,enabled:Ae.target.checked,pointsPerStatus:((zt=a.orderStatusPointsConfig)==null?void 0:zt.pointsPerStatus)??{}}})},className:"sr-only peer","data-testid":"toggle-auto-points"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{key:"DELIVERED",label:" ",color:"emerald"},{key:"APPROVED",label:" ",color:"blue"},{key:"SHIPPED",label:" ",color:"cyan"}].map(Ae=>{var zt,es;return t.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[t.jsx("span",{className:`inline-block w-2 h-2 rounded-full bg-${Ae.color}-500 mr-2`}),Ae.label]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",min:0,className:"w-full p-2 bg-slate-50 border border-slate-300 rounded-lg text-center font-bold",value:((es=(zt=a.orderStatusPointsConfig)==null?void 0:zt.pointsPerStatus)==null?void 0:es[Ae.key])??0,onChange:xs=>{var Aa,tr;const Ts=parseInt(xs.target.value)||0;r({...a,orderStatusPointsConfig:{enabled:((Aa=a.orderStatusPointsConfig)==null?void 0:Aa.enabled)??!0,pointsPerStatus:{...(tr=a.orderStatusPointsConfig)==null?void 0:tr.pointsPerStatus,[Ae.key]:Ts}}})},"data-testid":`input-points-${Ae.key.toLowerCase()}`}),t.jsx("span",{className:"text-slate-500 text-sm",children:""})]})]},Ae.key)})}),t.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-lg p-3 text-sm text-emerald-700",children:[t.jsx("strong",{children:":"}),"               "]})]})]}),t.jsx("div",{className:"bg-cyan-50 p-6 rounded-xl border border-cyan-100 mt-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-cyan-100 rounded-full text-cyan-600",children:t.jsx(Gt,{})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-cyan-900 text-lg",children:b("adminSettings.guestMode")}),t.jsx("p",{className:"text-cyan-700 text-sm",children:b("adminSettings.guestModeDesc")})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.guestModeEnabled??!1,onChange:Ae=>r({...a,guestModeEnabled:Ae.target.checked}),className:"sr-only peer","data-testid":"toggle-guest-mode"}),t.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] peer-checked:after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-cyan-600"})]})]})}),t.jsx("div",{className:"bg-red-50 p-6 rounded-xl border border-red-100 mt-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-red-100 rounded-full text-red-600",children:t.jsx(Nf,{})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-red-900 text-lg",children:b("adminSettings.maintenanceMode")}),t.jsx("p",{className:"text-red-700 text-sm",children:b("adminSettings.maintenanceModeDesc")})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.maintenanceMode,onChange:Ae=>r({...a,maintenanceMode:Ae.target.checked}),className:"sr-only peer"}),t.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] peer-checked:after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-red-600"})]})]})})]}),e==="BANNERS"&&t.jsxs("div",{className:"space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:b("adminSettings.bannerAds")}),t.jsx("p",{className:"text-slate-500 text-sm",children:b("adminSettings.bannerAdsDesc")})]}),t.jsxs("button",{onClick:()=>f(!0),className:"bg-slate-900 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-slate-800",children:[t.jsx(Pt,{size:16})," ",b("adminSettings.addNewBanner")]})]}),h&&t.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200 animate-fade-in",children:[t.jsx("h4",{className:"font-bold mb-4",children:b("adminSettings.newBannerData")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsx("input",{placeholder:b("adminSettings.mainTitle"),className:"p-3 rounded-lg border-slate-200",value:x.title,onChange:Ae=>g({...x,title:Ae.target.value})}),t.jsx("input",{placeholder:b("adminSettings.subtitle"),className:"p-3 rounded-lg border-slate-200",value:x.subtitle,onChange:Ae=>g({...x,subtitle:Ae.target.value})}),t.jsx("input",{placeholder:b("adminSettings.buttonText"),className:"p-3 rounded-lg border-slate-200",value:x.buttonText,onChange:Ae=>g({...x,buttonText:Ae.target.value})}),t.jsxs("select",{className:"p-3 rounded-lg border-slate-200",value:x.colorClass,onChange:Ae=>g({...x,colorClass:Ae.target.value}),children:[t.jsx("option",{value:"from-slate-700 to-slate-900",children:b("adminSettings.darkGray")}),t.jsx("option",{value:"from-primary-600 to-primary-900",children:b("adminSettings.royalBlue")}),t.jsx("option",{value:"from-secondary-500 to-secondary-700",children:b("adminSettings.vibrantOrange")}),t.jsx("option",{value:"from-green-600 to-green-800",children:b("adminSettings.darkGreen")})]}),t.jsx("input",{placeholder:b("adminSettings.imageUrl"),className:"p-3 rounded-lg border-slate-200 col-span-2",value:x.imageUrl,onChange:Ae=>g({...x,imageUrl:Ae.target.value})})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:O,className:"bg-green-600 text-white px-6 py-2 rounded-lg font-bold",children:b("adminSettings.saveAndPublish")}),t.jsx("button",{onClick:()=>f(!1),className:"bg-white border border-slate-300 text-slate-600 px-6 py-2 rounded-lg font-bold",children:b("common.cancel")})]})]}),t.jsx("div",{className:"grid gap-4",children:n.map(Ae=>t.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm flex flex-col md:flex-row items-center gap-6 ${Ae.isActive?"border-slate-200":"border-red-100 bg-red-50 opacity-70"}`,children:[t.jsx("div",{className:`w-full md:w-32 h-20 rounded-lg bg-gradient-to-r ${Ae.colorClass} flex items-center justify-center text-white shadow-inner flex-shrink-0`,children:Ae.imageUrl?t.jsx("img",{src:Ae.imageUrl,className:"w-full h-full object-cover rounded-lg",alt:""}):t.jsx(tl,{})}),t.jsxs("div",{className:"flex-1 text-center md:text-right",children:[t.jsx("h4",{className:"font-bold text-lg text-slate-800",children:Ae.title}),t.jsx("p",{className:"text-sm text-slate-500",children:Ae.subtitle})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>E(Ae.id),className:`p-2 rounded-lg transition-colors ${Ae.isActive?"text-green-600 hover:bg-green-50":"text-slate-400 hover:bg-slate-100"}`,title:Ae.isActive?b("adminSettings.hide"):b("adminSettings.show"),children:Ae.isActive?t.jsx(fs,{size:20}):t.jsx(gr,{size:20})}),t.jsx("button",{onClick:()=>C(Ae.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(Ct,{size:20})})]})]},Ae.id))})]}),e==="TEXTS"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(t5,{className:"text-brand-600"})," ",b("adminSettings.uiTextManagement")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.uiTextManagementDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveTexts")]})]}),t.jsx("div",{className:"space-y-4",children:a.uiTexts&&Object.entries(a.uiTexts).map(([Ae,zt])=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-brand-300 transition-colors",children:[t.jsx("div",{className:"text-sm font-mono text-slate-500 md:col-span-1 break-all",children:Ae}),t.jsx("div",{className:"md:col-span-2",children:t.jsx("input",{type:"text",className:"w-full p-3 bg-white border border-slate-300 rounded-lg text-slate-800 font-bold focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all",value:zt,onChange:es=>S(Ae,es.target.value)})})]},Ae))})]}),e==="API"&&t.jsxs("div",{className:"space-y-6 animate-slide-up",children:[t.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Vp,{className:"text-brand-600"})," ",b("adminSettings.erpIntegration")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.erpIntegrationDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveSettings")]})]})}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(qj,{size:20,className:"text-brand-600"}),b("adminSettings.connectionSettings")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.cloudErpUrl")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:t.jsx(pF,{size:16})}),t.jsx("input",{type:"url",dir:"ltr",placeholder:"https://api.your-erp.com/v1",value:a.apiConfig.baseUrl,onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,baseUrl:Ae.target.value}}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-sm","data-testid":"input-api-url"})]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.apiToken")}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400",children:t.jsx(Nf,{size:16})}),t.jsx("input",{type:"password",dir:"ltr",value:a.apiConfig.authToken,onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,authToken:Ae.target.value}}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-sm",placeholder:"sk_live_xxxxxxxxxxxxxxxx","data-testid":"input-api-token"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.syncFrequency")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.syncInterval,onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,syncInterval:Ae.target.value}}),"data-testid":"select-sync-interval",children:[t.jsx("option",{value:"REALTIME",children:b("adminSettings.realtime")}),t.jsx("option",{value:"15MIN",children:b("adminSettings.every15Min")}),t.jsx("option",{value:"HOURLY",children:b("adminSettings.hourly")}),t.jsx("option",{value:"DAILY",children:b("adminSettings.daily")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.environment")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.environment,onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,environment:Ae.target.value}}),"data-testid":"select-environment",children:[t.jsx("option",{value:"PRODUCTION",children:b("adminSettings.production")}),t.jsx("option",{value:"SANDBOX",children:b("adminSettings.sandbox")})]})]})]}),t.jsx("div",{className:"border-t border-slate-100 pt-4 mt-6",children:t.jsxs("button",{id:"test-conn-btn",onClick:A,className:"w-full py-4 border-2 border-dashed border-slate-300 rounded-xl text-slate-600 font-bold hover:bg-slate-50 hover:border-slate-400 transition-all flex justify-center items-center gap-2","data-testid":"button-test-connection",children:[t.jsx(fne,{size:20})," ",b("adminSettings.testConnection")]})})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(Vo,{size:20,className:"text-green-600"}),b("adminSettings.sharedData")]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:b("adminSettings.sharedDataDesc")}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"products",label:b("adminSettings.productsAndItems"),icon:Xt,desc:b("adminSettings.productsDesc")},{key:"orders",label:b("adminSettings.ordersLabel"),icon:$a,desc:b("adminSettings.ordersDesc")},{key:"customers",label:b("adminSettings.customersLabel"),icon:Gt,desc:b("adminSettings.customersDesc")},{key:"quotes",label:b("adminSettings.quotesLabel"),icon:Lt,desc:b("adminSettings.quotesDesc")},{key:"inventory",label:b("adminSettings.inventoryLabel"),icon:yF,desc:b("adminSettings.inventoryDesc")},{key:"prices",label:b("adminSettings.pricesLabel"),icon:or,desc:b("adminSettings.pricesDesc")}].map(Ae=>{var zt,es;return t.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-xl border-2 cursor-pointer transition-all ${(zt=a.apiConfig.sharedData)!=null&&zt.includes(Ae.key)?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300 bg-slate-50"}`,"data-testid":`checkbox-share-${Ae.key}`,children:[t.jsx("input",{type:"checkbox",checked:((es=a.apiConfig.sharedData)==null?void 0:es.includes(Ae.key))||!1,onChange:xs=>{const Ts=a.apiConfig.sharedData||[],Aa=xs.target.checked?[...Ts,Ae.key]:Ts.filter(tr=>tr!==Ae.key);r({...a,apiConfig:{...a.apiConfig,sharedData:Aa}})},className:"mt-1 w-4 h-4 text-brand-600 rounded"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ae.icon,{size:16,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-800",children:Ae.label})]}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Ae.desc})]})]},Ae.key)})})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(Qt,{size:20,className:"text-blue-600"}),b("adminSettings.syncDirection")]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{value:"PULL",label:b("adminSettings.pullOnly"),desc:b("adminSettings.pullOnlyDesc"),icon:cF},{value:"PUSH",label:b("adminSettings.pushOnly"),desc:b("adminSettings.pushOnlyDesc"),icon:zj},{value:"BIDIRECTIONAL",label:b("adminSettings.bidirectional"),desc:b("adminSettings.bidirectionalDesc"),icon:Cte}].map(Ae=>t.jsxs("label",{className:`flex flex-col items-center gap-3 p-6 rounded-xl border-2 cursor-pointer transition-all text-center ${a.apiConfig.syncDirection===Ae.value?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300 bg-slate-50"}`,"data-testid":`radio-sync-${Ae.value.toLowerCase()}`,children:[t.jsx("input",{type:"radio",name:"syncDirection",value:Ae.value,checked:a.apiConfig.syncDirection===Ae.value,onChange:zt=>r({...a,apiConfig:{...a.apiConfig,syncDirection:zt.target.value}}),className:"sr-only"}),t.jsx(Ae.icon,{size:32,className:a.apiConfig.syncDirection===Ae.value?"text-brand-600":"text-slate-400"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800 block",children:Ae.label}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Ae.desc})]})]},Ae.value))})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(une,{size:20,className:"text-purple-600"}),b("adminSettings.webhooks")]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:b("adminSettings.webhooksDesc")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"url",dir:"ltr",placeholder:"https://your-webhook-url.com/endpoint",className:"flex-1 p-3 bg-slate-50 border border-slate-200 rounded-xl font-mono text-sm",id:"webhook-url-input","data-testid":"input-webhook-url"}),t.jsxs("button",{onClick:()=>{const Ae=document.getElementById("webhook-url-input");if(Ae!=null&&Ae.value){const zt=a.apiConfig.webhooks||[];r({...a,apiConfig:{...a.apiConfig,webhooks:[...zt,{url:Ae.value,events:["order.created"],active:!0}]}}),Ae.value="",v("  Webhook ","success")}},className:"px-4 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 flex items-center gap-2","data-testid":"button-add-webhook",children:[t.jsx(Pt,{size:18})," ",b("common.add")]})]}),((U=a.apiConfig.webhooks)==null?void 0:U.length)>0&&t.jsx("div",{className:"space-y-2",children:a.apiConfig.webhooks.map((Ae,zt)=>{var es;return t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${Ae.active?"bg-green-500":"bg-slate-300"}`}),t.jsx("code",{className:"flex-1 text-sm font-mono text-slate-600 truncate",children:Ae.url}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded",children:[((es=Ae.events)==null?void 0:es.length)||0," ",b("adminSettings.events")]}),t.jsx("button",{onClick:()=>{const xs=[...a.apiConfig.webhooks||[]];xs.splice(zt,1),r({...a,apiConfig:{...a.apiConfig,webhooks:xs}})},className:"p-1 text-red-500 hover:bg-red-50 rounded","data-testid":`button-delete-webhook-${zt}`,children:t.jsx(Ct,{size:16})})]})]},zt)})})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2 mb-4",children:[t.jsx(Km,{size:20,className:"text-slate-600"}),b("adminSettings.advancedSettings")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.rateLimit")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.rateLimit||"100",onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,rateLimit:Ae.target.value}}),"data-testid":"select-rate-limit",children:[t.jsx("option",{value:"50",children:b("adminSettings.reqPerMin",{count:50})}),t.jsx("option",{value:"100",children:b("adminSettings.reqPerMin",{count:100})}),t.jsx("option",{value:"500",children:b("adminSettings.reqPerMin",{count:500})}),t.jsx("option",{value:"1000",children:b("adminSettings.reqPerMin",{count:1e3})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.timeout")}),t.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",value:a.apiConfig.timeout||"30",onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,timeout:Ae.target.value}}),"data-testid":"select-timeout",children:[t.jsx("option",{value:"10",children:b("adminSettings.seconds",{count:10})}),t.jsx("option",{value:"30",children:b("adminSettings.seconds",{count:30})}),t.jsx("option",{value:"60",children:b("adminSettings.seconds",{count:60})}),t.jsx("option",{value:"120",children:b("adminSettings.seconds",{count:120})})]})]}),t.jsx("div",{className:"col-span-2",children:t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 cursor-pointer hover:bg-slate-100 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:a.apiConfig.debugMode||!1,onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,debugMode:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-debug-mode"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:b("adminSettings.debugMode")}),t.jsx("p",{className:"text-xs text-slate-500",children:b("adminSettings.debugModeDesc")})]})]})}),t.jsx("div",{className:"col-span-2",children:t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 cursor-pointer hover:bg-slate-100 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:a.apiConfig.retryOnFail||!0,onChange:Ae=>r({...a,apiConfig:{...a.apiConfig,retryOnFail:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-retry-on-fail"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:b("adminSettings.retryOnFail")}),t.jsx("p",{className:"text-xs text-slate-500",children:b("adminSettings.retryOnFailDesc")})]})]})})]})]})]}),e==="FEATURES"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Zt,{className:"text-brand-600"})," ",b("adminSettings.whySiniCarSection")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.whySiniCarSectionDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.sectionTitle")}),t.jsx("input",{type:"text",value:a.whySiniCarTitle||b("adminSettings.whySiniCar"),onChange:Ae=>r({...a,whySiniCarTitle:Ae.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:b("adminSettings.whySiniCar"),"data-testid":"input-why-title"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-slate-800",children:b("adminSettings.featureCards")}),t.jsxs("button",{onClick:()=>{const Ae=a.whySiniCarFeatures||[];r({...a,whySiniCarFeatures:[...Ae,{id:`F-${Date.now()}`,title:b("adminSettings.newFeature"),description:b("adminSettings.featureDescPlaceholder"),icon:"star",iconColor:"text-amber-400"}]})},className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700","data-testid":"button-add-feature",children:[t.jsx(Pt,{size:18})," ",b("adminSettings.addCard")]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(a.whySiniCarFeatures||[{id:"1",title:" ",description:"         .",icon:"box",iconColor:"text-cyan-400"},{id:"2",title:" ",description:"       .",icon:"chart",iconColor:"text-green-400"},{id:"3",title:" ",description:"     3   .",icon:"anchor",iconColor:"text-amber-400"},{id:"4",title:"  B2B",description:"        .",icon:"headphones",iconColor:"text-purple-400"}]).map((Ae,zt)=>t.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("span",{className:"text-xs font-bold text-slate-400",children:[b("adminSettings.card")," ",zt+1]}),t.jsx("button",{onClick:()=>{const es=a.whySiniCarFeatures||[];r({...a,whySiniCarFeatures:es.filter(xs=>xs.id!==Ae.id)})},className:"p-1 text-red-500 hover:bg-red-50 rounded","data-testid":`button-delete-feature-${zt}`,children:t.jsx(Ct,{size:16})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.title")}),t.jsx("input",{type:"text",value:Ae.title,onChange:es=>{const xs=[...a.whySiniCarFeatures||[]],Ts=xs.findIndex(Aa=>Aa.id===Ae.id);Ts!==-1&&(xs[Ts]={...xs[Ts],title:es.target.value},r({...a,whySiniCarFeatures:xs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm","data-testid":`input-feature-title-${zt}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.description")}),t.jsx("textarea",{value:Ae.description,onChange:es=>{const xs=[...a.whySiniCarFeatures||[]],Ts=xs.findIndex(Aa=>Aa.id===Ae.id);Ts!==-1&&(xs[Ts]={...xs[Ts],description:es.target.value},r({...a,whySiniCarFeatures:xs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm resize-none",rows:2,"data-testid":`input-feature-desc-${zt}`})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.icon")}),t.jsxs("select",{value:Ae.icon,onChange:es=>{const xs=[...a.whySiniCarFeatures||[]],Ts=xs.findIndex(Aa=>Aa.id===Ae.id);Ts!==-1&&(xs[Ts]={...xs[Ts],icon:es.target.value},r({...a,whySiniCarFeatures:xs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm","data-testid":`select-feature-icon-${zt}`,children:[t.jsx("option",{value:"box",children:b("adminSettings.iconBox")}),t.jsx("option",{value:"chart",children:b("adminSettings.iconChart")}),t.jsx("option",{value:"anchor",children:b("adminSettings.iconAnchor")}),t.jsx("option",{value:"headphones",children:b("adminSettings.iconHeadphones")}),t.jsx("option",{value:"truck",children:b("adminSettings.iconTruck")}),t.jsx("option",{value:"shield",children:b("adminSettings.iconShield")}),t.jsx("option",{value:"globe",children:b("adminSettings.iconGlobe")}),t.jsx("option",{value:"star",children:b("adminSettings.iconStar")}),t.jsx("option",{value:"clock",children:b("adminSettings.iconClock")}),t.jsx("option",{value:"award",children:b("adminSettings.iconAward")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:b("adminSettings.iconColor")}),t.jsxs("select",{value:Ae.iconColor,onChange:es=>{const xs=[...a.whySiniCarFeatures||[]],Ts=xs.findIndex(Aa=>Aa.id===Ae.id);Ts!==-1&&(xs[Ts]={...xs[Ts],iconColor:es.target.value},r({...a,whySiniCarFeatures:xs}))},className:"w-full p-2 bg-white border border-slate-200 rounded-lg text-sm","data-testid":`select-feature-color-${zt}`,children:[t.jsx("option",{value:"text-cyan-400",children:b("adminSettings.colorCyan")}),t.jsx("option",{value:"text-green-400",children:b("adminSettings.colorGreen")}),t.jsx("option",{value:"text-amber-400",children:b("adminSettings.colorGold")}),t.jsx("option",{value:"text-purple-400",children:b("adminSettings.colorPurple")}),t.jsx("option",{value:"text-red-400",children:b("adminSettings.colorRed")}),t.jsx("option",{value:"text-blue-400",children:b("adminSettings.colorBlue")}),t.jsx("option",{value:"text-pink-400",children:b("adminSettings.colorPink")}),t.jsx("option",{value:"text-orange-400",children:b("adminSettings.colorOrange")})]})]})]}),t.jsxs("div",{className:"bg-slate-800 text-white p-4 rounded-xl mt-2",children:[t.jsxs("div",{className:`mb-2 ${Ae.iconColor}`,children:[Ae.icon==="box"&&t.jsx(Xt,{size:28}),Ae.icon==="chart"&&t.jsx(Gr,{size:28}),Ae.icon==="anchor"&&t.jsx(nF,{size:28}),Ae.icon==="headphones"&&t.jsx(yf,{size:28}),Ae.icon==="truck"&&t.jsx(Dr,{size:28}),Ae.icon==="shield"&&t.jsx(Ln,{size:28}),Ae.icon==="globe"&&t.jsx(ja,{size:28}),Ae.icon==="star"&&t.jsx(pn,{size:28}),Ae.icon==="clock"&&t.jsx(os,{size:28}),Ae.icon==="award"&&t.jsx(Uj,{size:28})]}),t.jsx("h4",{className:"font-bold text-sm",children:Ae.title}),t.jsx("p",{className:"text-xs text-slate-300 mt-1",children:Ae.description})]})]},Ae.id))})]})]}),e==="GUEST_MODE"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(vu,{className:"text-orange-500"})," ",b("adminSettings.guestModeSettings")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.guestModeSettingsDesc")})]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2","data-testid":"button-save-guest-settings",children:[t.jsx(ds,{size:18})," ",b(d?"adminSettings.saving":"adminSettings.saveChanges")]})]}),t.jsx("div",{className:"bg-orange-50 p-6 rounded-xl border border-orange-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-orange-100 text-orange-600 rounded-lg",children:t.jsx(vu,{size:20})}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:b("adminSettings.guestBrowsingEnabled")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.guestBrowsingEnabledDesc")})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.guestModeEnabled!==!1,onChange:Ae=>r({...a,guestModeEnabled:Ae.target.checked}),className:"sr-only peer","data-testid":"checkbox-guest-mode-enabled"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[t.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(fs,{size:18,className:"text-slate-600"})," ",b("adminSettings.visibleSections")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:b("adminSettings.visibleSectionsDesc")})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showBusinessTypes")}),t.jsx("input",{type:"checkbox",checked:((I=a.guestSettings)==null?void 0:I.showBusinessTypes)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showBusinessTypes:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-business-types"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showMainServices")}),t.jsx("input",{type:"checkbox",checked:((k=a.guestSettings)==null?void 0:k.showMainServices)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showMainServices:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-main-services"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showHowItWorks")}),t.jsx("input",{type:"checkbox",checked:((z=a.guestSettings)==null?void 0:z.showHowItWorks)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showHowItWorks:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-how-it-works"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showWhySiniCar")}),t.jsx("input",{type:"checkbox",checked:((_=a.guestSettings)==null?void 0:_.showWhySiniCar)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showWhySiniCar:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-why-sini-car"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showCart")}),t.jsx("input",{type:"checkbox",checked:((q=a.guestSettings)==null?void 0:q.showCart)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showCart:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-cart"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showMarketingCards")}),t.jsx("input",{type:"checkbox",checked:((L=a.guestSettings)==null?void 0:L.showMarketingCards)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showMarketingCards:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-marketing-cards"})]})]})]}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[t.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(gr,{size:18,className:"text-slate-600"})," ",b("adminSettings.blurSettings")]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:b("adminSettings.blurIntensity")}),t.jsxs("select",{value:((Q=a.guestSettings)==null?void 0:Q.blurIntensity)||"medium",onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},blurIntensity:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"select-blur-intensity",children:[t.jsx("option",{value:"light",children:b("adminSettings.blurLight")}),t.jsx("option",{value:"medium",children:b("adminSettings.blurMedium")}),t.jsx("option",{value:"heavy",children:b("adminSettings.blurHeavy")})]})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showBlurOverlay")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.showBlurOverlayDesc")})]}),t.jsx("input",{type:"checkbox",checked:((X=a.guestSettings)==null?void 0:X.showBlurOverlay)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showBlurOverlay:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-blur-overlay"})]})]})]}),t.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[t.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(la,{size:18,className:"text-slate-600"})," ",b("adminSettings.searchSettings")]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.allowSearch")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.allowSearchDesc")})]}),t.jsx("input",{type:"checkbox",checked:((W=a.guestSettings)==null?void 0:W.allowSearch)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},allowSearch:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-allow-search"})]}),t.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer transition-colors",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-slate-700",children:b("adminSettings.showSearchResults")}),t.jsx("p",{className:"text-sm text-slate-500",children:b("adminSettings.showSearchResultsDesc")})]}),t.jsx("input",{type:"checkbox",checked:((ee=a.guestSettings)==null?void 0:ee.showSearchResults)!==!1,onChange:Ae=>r({...a,guestSettings:{...a.guestSettings||{},showSearchResults:Ae.target.checked}}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"checkbox-show-search-results"})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white p-6 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(vu,{size:24}),t.jsx("h4",{className:"font-bold text-lg",children:b("adminSettings.guestMode")})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.visibleSections")}),t.jsxs("p",{className:"font-bold text-lg",children:[[((V=a.guestSettings)==null?void 0:V.showBusinessTypes)!==!1,((P=a.guestSettings)==null?void 0:P.showMainServices)!==!1,((Y=a.guestSettings)==null?void 0:Y.showHowItWorks)!==!1,((J=a.guestSettings)==null?void 0:J.showWhySiniCar)!==!1,((K=a.guestSettings)==null?void 0:K.showCart)!==!1,((se=a.guestSettings)==null?void 0:se.showMarketingCards)!==!1].filter(Boolean).length," / 6"]})]}),t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.blurIntensity")}),t.jsx("p",{className:"font-bold text-lg capitalize",children:((G=a.guestSettings)==null?void 0:G.blurIntensity)||"medium"})]}),t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.allowSearch")}),t.jsx("p",{className:"font-bold text-lg",children:((te=a.guestSettings)==null?void 0:te.allowSearch)!==!1?"":""})]}),t.jsxs("div",{className:"bg-white/20 p-3 rounded-lg",children:[t.jsx("p",{className:"opacity-75",children:b("adminSettings.showBlurOverlay")}),t.jsx("p",{className:"font-bold text-lg",children:((Z=a.guestSettings)==null?void 0:Z.showBlurOverlay)!==!1?"":""})]})]})]})]}),e==="APPEARANCE"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-8 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Wo,{className:"text-purple-500"})," ",b("adminSettings.appearanceCustomization")]}),t.jsx("button",{onClick:w,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50",children:b("adminSettings.saveChanges")})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-4",children:b("adminSettings.primaryColor")}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl shadow-md border-4 border-white ring-1 ring-slate-200",style:{backgroundColor:a.primaryColor}}),t.jsx("input",{type:"color",value:a.primaryColor,onChange:Ae=>r({...a,primaryColor:Ae.target.value}),className:"h-12 w-32 p-1 rounded-lg cursor-pointer"})]}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:b("adminSettings.primaryColorDesc")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-4",children:b("adminSettings.siteLogo")}),t.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-6 text-center hover:bg-slate-50 transition-colors",children:a.logoUrl?t.jsxs("div",{className:"relative w-fit mx-auto",children:[t.jsx("img",{src:a.logoUrl,alt:"Logo",className:"h-16 object-contain"}),t.jsx("button",{onClick:()=>r({...a,logoUrl:""}),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:t.jsx(St,{size:12})})]}):t.jsxs("div",{className:"text-slate-400 cursor-pointer",onClick:()=>v(b("adminSettings.uploadNotAvailable"),"info"),children:[t.jsx(ga,{className:"mx-auto mb-2"}),t.jsx("span",{className:"text-xs font-bold",children:b("adminSettings.clickToUploadLogo")})]})})]})]}),t.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold",children:b("adminSettings.livePreview")}),t.jsx("p",{className:"text-sm opacity-70",children:b("adminSettings.livePreviewDesc")})]}),t.jsx("button",{style:{backgroundColor:a.primaryColor},className:"px-6 py-3 rounded-lg font-bold shadow-lg",children:b("adminSettings.primaryButtonExample")})]})]}),e==="STATUS_LABELS"&&t.jsx(sue,{settings:a,onUpdate:Ae=>r(Ae),onSave:w,saving:d}),e==="NOTIFICATIONS"&&t.jsx(rue,{t:b}),e==="PRINT_TEMPLATES"&&t.jsx(nue,{t:b}),e==="AUTH_TEXTS"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Hp,{className:"text-brand-600"}),"    "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"         "})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>{r({...a,authPageTexts:void 0}),v("   ","success")},className:"bg-slate-100 text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-200 flex items-center gap-2",children:[t.jsx(Ko,{size:16}),"  "]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",d?" ...":" "]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 border-b pb-2",children:[t.jsx(wa,{size:18,className:"text-blue-500"}),"   "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:" ",value:((ue=a.authPageTexts)==null?void 0:ue.loginTitle)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginTitle:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:"  ",value:((re=a.authPageTexts)==null?void 0:re.loginSubtitle)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginSubtitle:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((H=a.authPageTexts)==null?void 0:H.loginClientIdLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginClientIdLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:"  ",value:((pe=a.authPageTexts)==null?void 0:pe.loginClientIdPlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginClientIdPlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((B=a.authPageTexts)==null?void 0:B.loginPasswordLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginPasswordLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:"  ",value:((oe=a.authPageTexts)==null?void 0:oe.loginPasswordPlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginPasswordPlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:"",value:((fe=a.authPageTexts)==null?void 0:fe.loginButtonText)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginButtonText:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:"  ",value:((ne=a.authPageTexts)==null?void 0:ne.loginForgotPasswordText)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginForgotPasswordText:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:"  ",value:((de=a.authPageTexts)==null?void 0:de.loginNoAccountText)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginNoAccountText:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:"  ",value:((we=a.authPageTexts)==null?void 0:we.loginRegisterLinkText)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,loginRegisterLinkText:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]})]})]}),t.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2 border-b pb-2",children:[t.jsx(Gt,{size:18,className:"text-green-500"}),"    "]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:"  ",value:((Ue=a.authPageTexts)==null?void 0:Ue.registerTitle)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerTitle:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"text",placeholder:"    ",value:((qe=a.authPageTexts)==null?void 0:qe.registerSubtitle)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerSubtitle:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ce=a.authPageTexts)==null?void 0:Ce.registerBusinessNameLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerBusinessNameLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:":    ",value:((Le=a.authPageTexts)==null?void 0:Le.registerBusinessNamePlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerBusinessNamePlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((Se=a.authPageTexts)==null?void 0:Se.registerOwnerNameLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerOwnerNameLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder  "}),t.jsx("input",{type:"text",placeholder:" ",value:((_e=a.authPageTexts)==null?void 0:_e.registerOwnerNamePlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerOwnerNamePlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ze=a.authPageTexts)==null?void 0:Ze.registerPhoneLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerPhoneLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:"05xxxxxxxx",value:((Mt=a.authPageTexts)==null?void 0:Mt.registerPhonePlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerPhonePlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:" ",value:((lt=a.authPageTexts)==null?void 0:lt.registerEmailLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerEmailLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:"example@email.com",value:((yt=a.authPageTexts)==null?void 0:yt.registerEmailPlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerEmailPlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:"",value:((wt=a.authPageTexts)==null?void 0:wt.registerCityLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerCityLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:" ",value:((ke=a.authPageTexts)==null?void 0:ke.registerCityPlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerCityPlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((We=a.authPageTexts)==null?void 0:We.registerBusinessTypeLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerBusinessTypeLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),t.jsx("input",{type:"text",placeholder:" ",value:((Ne=a.authPageTexts)==null?void 0:Ne.registerNotesLabel)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerNotesLabel:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"placeholder "}),t.jsx("input",{type:"text",placeholder:"    ...",value:((at=a.authPageTexts)==null?void 0:at.registerNotesPlaceholder)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerNotesPlaceholder:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((dt=a.authPageTexts)==null?void 0:dt.registerButtonText)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerButtonText:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:"  ",value:((ie=a.authPageTexts)==null?void 0:ie.registerHaveAccountText)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerHaveAccountText:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"   "}),t.jsx("input",{type:"text",placeholder:" ",value:((rt=a.authPageTexts)==null?void 0:rt.registerLoginLinkText)||"",onChange:Ae=>r({...a,authPageTexts:{...a.authPageTexts,registerLoginLinkText:Ae.target.value}}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl"})]})]})]})]}),e==="QUANTITY_MODAL"&&t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(YO,{className:"text-brand-600"}),"    "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"        "})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>{r({...a,quantityModalSettings:{mode:"hideSearch"}}),v("   ","success")},className:"bg-slate-100 text-slate-600 px-4 py-2 rounded-lg font-bold hover:bg-slate-200 flex items-center gap-2",children:[t.jsx(Ko,{size:16}),"  "]}),t.jsxs("button",{onClick:w,disabled:d,className:"bg-brand-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",d?" ...":" "]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[t.jsxs("h4",{className:"font-bold text-blue-800 mb-2 flex items-center gap-2",children:[t.jsx(mi,{size:18}),"    "]}),t.jsx("p",{className:"text-sm text-blue-700",children:"          .     :"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{onClick:()=>r({...a,quantityModalSettings:{...a.quantityModalSettings,mode:"hideSearch"}}),className:`p-6 rounded-xl border-2 cursor-pointer transition-all ${((it=a.quantityModalSettings)==null?void 0:it.mode)==="hideSearch"||!((vt=a.quantityModalSettings)!=null&&vt.mode)?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${((Ie=a.quantityModalSettings)==null?void 0:Ie.mode)==="hideSearch"||!((ct=a.quantityModalSettings)!=null&&ct.mode)?"border-brand-500 bg-brand-500":"border-slate-300"}`,children:(((gt=a.quantityModalSettings)==null?void 0:gt.mode)==="hideSearch"||!((Ot=a.quantityModalSettings)!=null&&Ot.mode))&&t.jsx(Zt,{size:12,className:"text-white"})}),t.jsx("h4",{className:"font-bold text-slate-800",children:"  "})]}),t.jsx("p",{className:"text-sm text-slate-600",children:"               "})]}),t.jsxs("div",{onClick:()=>r({...a,quantityModalSettings:{...a.quantityModalSettings,mode:"draggable"}}),className:`p-6 rounded-xl border-2 cursor-pointer transition-all ${((Ls=a.quantityModalSettings)==null?void 0:Ls.mode)==="draggable"?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${((La=a.quantityModalSettings)==null?void 0:La.mode)==="draggable"?"border-brand-500 bg-brand-500":"border-slate-300"}`,children:((Yr=a.quantityModalSettings)==null?void 0:Yr.mode)==="draggable"&&t.jsx(Zt,{size:12,className:"text-white"})}),t.jsx("h4",{className:"font-bold text-slate-800",children:"  "})]}),t.jsx("p",{className:"text-sm text-slate-600",children:"                 "})]})]})]})]}),e==="DATA_MANAGEMENT"&&t.jsx(aue,{settings:a,onUpdate:Ae=>r(Ae),onSave:w,saving:d})]})]})};function lue(e,s){if(e instanceof RegExp)return{keys:!1,pattern:e};var a,r,n,i,l=[],o="",d=e.split("/");for(d[0]||d.shift();n=d.shift();)a=n[0],a==="*"?(l.push(a),o+=n[1]==="?"?"(?:/(.*))?":"/(.*)"):a===":"?(r=n.indexOf("?",1),i=n.indexOf(".",1),l.push(n.substring(1,~r?r:~i?i:n.length)),o+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~r?"?":"")+"\\"+n.substring(i))):o+="/"+n;return{keys:l,pattern:new RegExp("^"+o+(s?"(?=$|/)":"/?$"),"i")}}const oue=Nq.useInsertionEffect,cue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",due=cue?T.useLayoutEffect:T.useEffect,uue=oue||due,MF=e=>{const s=T.useRef([e,(...a)=>s[0](...a)]).current;return uue(()=>{s[0]=e}),s[1]},mue="popstate",mE="pushState",fE="replaceState",fue="hashchange",g5=[mue,mE,fE,fue],hue=e=>{for(const s of g5)addEventListener(s,e);return()=>{for(const s of g5)removeEventListener(s,e)}},LF=(e,s)=>QM.useSyncExternalStore(hue,e,s),b5=()=>location.search,xue=({ssrSearch:e}={})=>LF(b5,e!=null?()=>e:b5),v5=()=>location.pathname,pue=({ssrPath:e}={})=>LF(v5,e!=null?()=>e:v5),gue=(e,{replace:s=!1,state:a=null}={})=>history[s?fE:mE](a,"",e),bue=(e={})=>[pue(e),gue],y5=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[y5]>"u"){for(const e of[mE,fE]){const s=history[e];history[e]=function(){const a=s.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),a}}Object.defineProperty(window,y5,{value:!0})}const vue=(e,s)=>s.toLowerCase().indexOf(e.toLowerCase())?"~"+s:s.slice(e.length)||"/",FF=(e="")=>e==="/"?"":e,yue=(e,s)=>e[0]==="~"?e.slice(1):FF(s)+e,Nue=(e="",s)=>vue(N5(FF(e)),N5(s)),N5=e=>{try{return decodeURI(e)}catch{return e}},wue={hook:bue,searchHook:xue,parser:lue,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},Sue=T.createContext(wue),jue=()=>T.useContext(Sue),Aue={};T.createContext(Aue);const Eue=e=>{const[s,a]=e.hook(e);return[Nue(e.base,s),MF((r,n)=>a(yue(r,e.base),n))]};T.forwardRef((e,s)=>{const a=jue(),[r,n]=Eue(a),{to:i="",href:l=i,onClick:o,asChild:d,children:u,className:h,replace:f,state:x,...g}=e,v=MF(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(o==null||o(y),y.defaultPrevented||(y.preventDefault(),n(l,e)))}),b=a.hrefs(l[0]==="~"?l.slice(1):a.base+l,a);return d&&T.isValidElement(u)?T.cloneElement(u,{onClick:v,href:b}):T.createElement("a",{...g,onClick:v,href:b,className:h!=null&&h.call?h(r===l):h,children:u,ref:s})});const Us=({resourceName:e,onGoBack:s,onGoHome:a})=>{const{t:r}=Jt();return t.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-8",children:t.jsxs("div",{className:"max-w-md w-full text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(ore,{className:"text-red-500",size:48})}),t.jsx("h1",{className:"text-2xl font-black text-slate-800 mb-3",children:r("accessDenied.title")}),t.jsxs("p",{className:"text-slate-600 mb-6 leading-relaxed",children:[r("accessDenied.message"),t.jsx("br",{}),r("accessDenied.contactAdmin")]}),e&&t.jsxs("div",{className:"bg-slate-100 rounded-xl p-4 mb-6",children:[t.jsxs("p",{className:"text-sm text-slate-500 mb-1",children:[r("accessDenied.requestedPage"),":"]}),t.jsx("p",{className:"font-bold text-slate-700",children:e})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s&&t.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-access-denied-back",children:[t.jsx(el,{size:18}),r("accessDenied.goBack")]}),a&&t.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 px-6 py-3 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-access-denied-home",children:[t.jsx(rE,{size:18}),r("accessDenied.goHome")]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-400",children:[t.jsx(m0,{size:16}),t.jsxs("span",{children:[r("accessDenied.errorCode"),": ACCESS_DENIED_403"]})]})})]})})},w5=e=>{let s;const a=new Set,r=(u,h)=>{const f=typeof u=="function"?u(s):u;if(!Object.is(f,s)){const x=s;s=h??(typeof f!="object"||f===null)?f:Object.assign({},s,f),a.forEach(g=>g(s,x))}},n=()=>s,o={setState:r,getState:n,getInitialState:()=>d,subscribe:u=>(a.add(u),()=>a.delete(u))},d=s=e(r,n,o);return o},Cue=(e=>e?w5(e):w5),Tue=e=>e;function _ue(e,s=Tue){const a=Oe.useSyncExternalStore(e.subscribe,Oe.useCallback(()=>s(e.getState()),[e,s]),Oe.useCallback(()=>s(e.getInitialState()),[e,s]));return Oe.useDebugValue(a),a}const kue=e=>{const s=Cue(e),a=r=>_ue(s,r);return Object.assign(a,s),a},Oue=(e=>kue);function UF(e,s){let a;try{a=e()}catch{return}return{getItem:n=>{var i;const l=d=>d===null?null:JSON.parse(d,void 0),o=(i=a.getItem(n))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(n,i)=>a.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>a.removeItem(n)}}const Qj=e=>s=>{try{const a=e(s);return a instanceof Promise?a:{then(r){return Qj(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return Qj(r)(a)}}}},Iue=(e,s)=>(a,r,n)=>{let i={storage:UF(()=>localStorage),partialize:b=>b,version:0,merge:(b,y)=>({...y,...b}),...s},l=!1;const o=new Set,d=new Set;let u=i.storage;if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...b)},r,n);const h=()=>{const b=i.partialize({...r()});return u.setItem(i.name,{state:b,version:i.version})},f=n.setState;n.setState=(b,y)=>(f(b,y),h());const x=e((...b)=>(a(...b),h()),r,n);n.getInitialState=()=>x;let g;const v=()=>{var b,y;if(!u)return;l=!1,o.forEach(w=>{var A;return w((A=r())!=null?A:x)});const j=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(b=r())!=null?b:x))||void 0;return Qj(u.getItem.bind(u))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const A=i.migrate(w.state,w.version);return A instanceof Promise?A.then(O=>[!0,O]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var A;const[O,C]=w;if(g=i.merge(C,(A=r())!=null?A:x),a(g,!0),O)return h()}).then(()=>{j==null||j(g,void 0),g=r(),l=!0,d.forEach(w=>w(g))}).catch(w=>{j==null||j(void 0,w)})};return n.persist={setOptions:b=>{i={...i,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>l,onHydrate:b=>(o.add(b),()=>{o.delete(b)}),onFinishHydration:b=>(d.add(b),()=>{d.delete(b)})},i.skipHydration||v(),g||x},Rue=Iue,S5={adminUser:null,role:null,effectivePermissions:[],loading:!0,initialized:!1},ni=Oue()(Rue((e,s)=>({...S5,setAdminUser:a=>{e({adminUser:a}),s().loadPermissions(a)},setRole:a=>e({role:a}),setLoading:a=>e({loading:a}),loadPermissions:async a=>{var r,n,i;if(!(a!=null&&a.id)){e({role:null,effectivePermissions:[],loading:!1,initialized:!0});return}e({loading:!0});try{if(a.extendedRole==="ADMIN"||a.extendedRole==="SUPER_ADMIN"||a.isSuperAdmin===!0||((r=a.roleId)==null?void 0:r.includes("admin"))||((n=a.roleId)==null?void 0:n.includes("super"))){const o=a.extendedRole==="SUPER_ADMIN"||a.isSuperAdmin===!0||((i=a.roleId)==null?void 0:i.includes("super")),d={id:a.roleId||(o?"role-super-admin":"role-admin"),code:o?"SUPER_ADMIN":"ADMIN",name:o?"SUPER_ADMIN":"ADMIN",nameAr:o?" ":"",description:o?"Super Administrator":"Administrator",isSystem:!0,isActive:!0,sortOrder:0,createdAt:new Date().toISOString(),permissions:[]};e({role:d,effectivePermissions:[],loading:!1,initialized:!0})}else e({role:null,effectivePermissions:[],loading:!1,initialized:!0})}catch(l){console.error("Failed to load permissions:",l),e({role:null,effectivePermissions:[],loading:!1,initialized:!0})}},refreshPermissions:async()=>{const{adminUser:a}=s();await s().loadPermissions(a)},reset:()=>{e(S5),localStorage.removeItem("sini-auth-store")},hasPermission:(a,r)=>{var u;const{adminUser:n,role:i,effectivePermissions:l}=s();if(!n||!n.isActive)return!1;if(i!=null&&i.isSystem&&(i.name===" "||i.name==="SUPER_ADMIN"))return!0;const o=`${a}:${r}`,d=l.find(h=>h.permissionKey===o||h.resource===a&&h.action===r);if(d)return d.effect==="ALLOW";if(i!=null&&i.permissions){const h=i.permissions.find(f=>f.resource===a);if(h)return((u=h.actions)==null?void 0:u.includes(r))||!1}return!1},canAccess:a=>s().hasPermission(a,"view"),can:a=>{const{adminUser:r,role:n,effectivePermissions:i}=s();if(!r||!r.isActive)return!1;if(n!=null&&n.isSystem&&(n.name===" "||n.name==="SUPER_ADMIN"))return!0;const l=i.find(o=>o.permissionKey===a||o.permissionKey.toUpperCase()===a.toUpperCase());return l?l.effect==="ALLOW":!!(n!=null&&n.permissions&&n.permissions.some(d=>{var u;return`${d.resource}:${((u=d.actions)==null?void 0:u[0])||""}`.toUpperCase()===a.toUpperCase()}))}}),{name:"sini-auth-store",storage:UF(()=>localStorage),partialize:e=>({adminUser:e.adminUser,role:e.role,effectivePermissions:e.effectivePermissions})})),Pue=e=>{const{role:s}=e;return s?s.isSystem&&(s.name===" "||s.name==="SUPER_ADMIN"):!1},Due=({children:e,initialAdminUser:s=null})=>{const a=ni(n=>n.setAdminUser),r=ni(n=>n.initialized);return T.useEffect(()=>{s&&!r&&a(s)},[s,a,r]),t.jsx(t.Fragment,{children:e})},h0=()=>{const e=ni(h=>h.adminUser),s=ni(h=>h.role),a=ni(h=>h.loading),r=ni(h=>h.effectivePermissions),n=ni(h=>h.hasPermission),i=ni(h=>h.canAccess),l=ni(h=>h.can),o=ni(h=>h.refreshPermissions),d=ni(h=>h.setAdminUser),u=ni(Pue);return{adminUser:e,role:s,loading:a,effectivePermissions:r,hasPermission:n,can:l,canAccess:i,isSuperAdmin:u,refreshPermissions:o,setAdminUser:d}},j5={[pt.PENDING]:"bg-yellow-100 text-yellow-800",[pt.APPROVED]:"bg-blue-100 text-blue-800",[pt.SHIPPED]:"bg-indigo-100 text-indigo-800",[pt.DELIVERED]:"bg-green-100 text-green-800",[pt.REJECTED]:"bg-red-100 text-red-800",[pt.CANCELLED]:"bg-gray-100 text-gray-800",NEW:"bg-slate-100 text-slate-600",SENT_TO_WAREHOUSE:"bg-orange-100 text-orange-700",WAITING_PAYMENT:"bg-amber-100 text-amber-700",PAYMENT_CONFIRMED:"bg-emerald-100 text-emerald-700",SALES_INVOICE_CREATED:"bg-cyan-100 text-cyan-700",READY_FOR_SHIPMENT:"bg-purple-100 text-purple-700",COMPLETED_INTERNAL:"bg-teal-100 text-teal-800",CANCELLED_INTERNAL:"bg-pink-100 text-pink-800"},Mue=({orders:e,users:s,onUpdate:a})=>{const{t:r}=Jt(),n={[pt.PENDING]:r("adminOrders.statusLabels.pending"),[pt.APPROVED]:r("adminOrders.statusLabels.approved"),[pt.SHIPPED]:r("adminOrders.statusLabels.shipped"),[pt.DELIVERED]:r("adminOrders.statusLabels.delivered"),[pt.REJECTED]:r("adminOrders.statusLabels.rejected"),[pt.CANCELLED]:r("adminOrders.statusLabels.cancelled")},i={NEW:r("adminOrders.internalStatusLabels.new"),SENT_TO_WAREHOUSE:r("adminOrders.internalStatusLabels.sentToWarehouse"),WAITING_PAYMENT:r("adminOrders.internalStatusLabels.waitingPayment"),PAYMENT_CONFIRMED:r("adminOrders.internalStatusLabels.paymentConfirmed"),SALES_INVOICE_CREATED:r("adminOrders.internalStatusLabels.salesInvoiceCreated"),READY_FOR_SHIPMENT:r("adminOrders.internalStatusLabels.readyForShipment"),COMPLETED_INTERNAL:r("adminOrders.internalStatusLabels.completedInternal"),CANCELLED_INTERNAL:r("adminOrders.internalStatusLabels.cancelledInternal")},{hasPermission:l}=h0(),o=l("orders","edit"),d=l("orders","approve"),[u,h]=T.useState(""),[f,x]=T.useState("ALL"),[g,v]=T.useState("ALL"),[b,y]=T.useState(1),j=20,[w,A]=T.useState(null),[O,C]=T.useState(""),[E,S]=T.useState(!1),{addToast:D}=Dt(),M=T.useMemo(()=>({total:e.length,new:e.filter(L=>!L.internalStatus||L.internalStatus==="NEW").length,processing:e.filter(L=>L.status===pt.APPROVED&&L.internalStatus!=="COMPLETED_INTERNAL").length,ready:e.filter(L=>L.internalStatus==="READY_FOR_SHIPMENT").length}),[e]),U=T.useMemo(()=>{let L=[...e];if(u){const Q=u.toLowerCase();L=L.filter(X=>{var W;return X.id.toLowerCase().includes(Q)||((W=X.createdByName)==null?void 0:W.toLowerCase().includes(Q))||X.totalAmount.toString().includes(Q)})}return f!=="ALL"&&(L=L.filter(Q=>Q.status===f)),g!=="ALL"&&(L=L.filter(Q=>(Q.internalStatus||"NEW")===g)),L.sort((Q,X)=>new Date(X.date).getTime()-new Date(Q.date).getTime())},[e,u,f,g]),I=T.useMemo(()=>{const L=(b-1)*j;return U.slice(L,L+j)},[U,b]),k=Math.ceil(U.length/j),z=async L=>{if(w){S(!0);try{await xe.adminUpdateOrderStatus(w.id,L,"Admin"),D(r("adminOrders.externalStatusUpdated"),"success"),a(),A(Q=>Q?{...Q,status:L}:null)}catch{D(r("adminOrders.updateFailed"),"error")}finally{S(!1)}}},_=async L=>{if(w){S(!0);try{await xe.updateOrderInternalStatus(w.id,L,"Admin",O),D(r("adminOrders.internalStatusUpdated"),"success"),a();const Q=(await xe.getAllOrders()).find(X=>X.id===w.id);Q&&A(Q)}catch{D(r("adminOrders.updateFailed"),"error")}finally{S(!1)}}},q=L=>{A(L),C(L.internalNotes||"")};return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.newOrders")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:M.new})]}),t.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:t.jsx(Lt,{size:20})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.inProgress")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:M.processing})]}),t.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 rounded-lg",children:t.jsx(os,{size:20})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.readyToShip")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:M.ready})]}),t.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg",children:t.jsx(Dr,{size:20})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase",children:r("adminOrders.totalOrders")}),t.jsx("p",{className:"text-2xl font-black text-slate-800 dark:text-white",children:M.total})]}),t.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg",children:t.jsx(Uu,{size:20})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col md:flex-row gap-4 items-center justify-between sticky top-20 z-10",children:[t.jsxs("div",{className:"relative w-full md:w-96",children:[t.jsx(Ft,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:r("adminOrders.searchOrder"),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#C8A04F] focus:border-[#C8A04F] transition-all text-slate-800 dark:text-white",value:u,onChange:L=>h(L.target.value),"data-testid":"input-order-search"})]}),t.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:[t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm font-bold text-slate-700 dark:text-white focus:outline-none",value:f,onChange:L=>x(L.target.value),"data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:r("adminOrders.allStatuses")}),Object.entries(n).map(([L,Q])=>t.jsx("option",{value:L,children:Q},L))]}),t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm font-bold text-slate-700 dark:text-white focus:outline-none",value:g,onChange:L=>v(L.target.value),"data-testid":"select-internal-status-filter",children:[t.jsx("option",{value:"ALL",children:r("adminOrders.allInternalStatuses")}),Object.entries(i).map(([L,Q])=>t.jsx("option",{value:L,children:Q},L))]})]})]}),t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:r("adminOrders.orderNumber")}),t.jsx("th",{className:"p-4",children:r("adminOrders.customer")}),t.jsx("th",{className:"p-4",children:r("adminOrders.date")}),t.jsx("th",{className:"p-4",children:r("adminOrders.total")}),t.jsx("th",{className:"p-4 text-center",children:r("adminOrders.status")}),t.jsx("th",{className:"p-4 text-center",children:r("adminOrders.internalStatus")}),t.jsx("th",{className:"p-4 text-center",children:r("adminOrders.actions")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[I.map(L=>t.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[t.jsx("td",{className:"p-4 font-mono font-bold text-[#C8A04F]",children:L.id}),t.jsx("td",{className:"p-4 font-bold text-slate-700 dark:text-slate-200",children:L.createdByName||L.userId}),t.jsx("td",{className:"p-4 text-slate-500 dark:text-slate-400 text-xs",dir:"ltr",children:hs(L.date)}),t.jsxs("td",{className:"p-4 font-black text-slate-800 dark:text-white",children:[L.totalAmount.toLocaleString()," ",r("common.currency")]}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${j5[L.status]}`,children:n[L.status]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${j5[L.internalStatus||"NEW"]}`,children:i[L.internalStatus||"NEW"]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>q(L),className:"text-[#0B1B3A] dark:text-[#C8A04F] hover:bg-slate-100 dark:hover:bg-slate-700 p-2 rounded-lg transition-colors flex items-center justify-center gap-1 mx-auto font-bold text-xs","data-testid":`button-view-order-${L.id}`,children:[t.jsx(fs,{size:16})," ",r("adminOrders.details")]})})]},L.id)),I.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-10 text-center text-slate-400",children:r("adminOrders.noOrders")})})]})]})}),k>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx("button",{disabled:b===1,onClick:()=>y(L=>L-1),className:"p-2 rounded-lg border bg-white dark:bg-slate-700 disabled:opacity-50 hover:bg-slate-50 dark:hover:bg-slate-600","data-testid":"button-prev-page",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:[r("common.page")," ",b," ",r("common.of")," ",k]}),t.jsx("button",{disabled:b===k,onClick:()=>y(L=>L+1),className:"p-2 rounded-lg border bg-white dark:bg-slate-700 disabled:opacity-50 hover:bg-slate-50 dark:hover:bg-slate-600","data-testid":"button-next-page",children:t.jsx(ws,{size:18})})]}),t.jsx(ls,{isOpen:!!w,onClose:()=>A(null),title:w?`${r("adminOrders.orderDetails")} #${w.id}`:"",maxWidth:"max-w-4xl",children:w&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[t.jsx(Lt,{size:16})," ",r("adminOrders.customerInfo")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase",children:r("adminOrders.name")}),t.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:w.createdByName||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase",children:r("adminOrders.userId")}),t.jsx("p",{className:"font-mono text-slate-700 dark:text-slate-300",children:w.userId})]})]})]}),t.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-xl overflow-hidden",children:[t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3",children:r("adminOrders.product")}),t.jsx("th",{className:"p-3 text-center",children:r("adminOrders.quantity")}),t.jsx("th",{className:"p-3 text-center",children:r("adminOrders.price")}),t.jsx("th",{className:"p-3 text-center",children:r("adminOrders.itemTotal")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-600",children:w.items.map((L,Q)=>t.jsxs("tr",{children:[t.jsxs("td",{className:"p-3",children:[t.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:L.name}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:L.partNumber})]}),t.jsx("td",{className:"p-3 text-center font-bold text-slate-700 dark:text-slate-200",children:L.quantity}),t.jsx("td",{className:"p-3 text-center text-slate-700 dark:text-slate-200",children:L.price}),t.jsx("td",{className:"p-3 text-center font-bold text-[#C8A04F]",children:(L.price*L.quantity).toLocaleString()})]},Q))})]}),t.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700 border-t border-slate-200 dark:border-slate-600 flex justify-between items-center",children:[t.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300",children:r("adminOrders.grandTotal")}),t.jsxs("span",{className:"font-black text-xl text-slate-900 dark:text-white",children:[w.totalAmount.toLocaleString()," ",r("common.currency")]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-600",children:[t.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(xn,{size:16})," ",r("adminOrders.statusHistory")]}),t.jsxs("div",{className:"space-y-4 relative before:absolute before:right-2 before:top-2 before:bottom-2 before:w-0.5 before:bg-slate-100 dark:before:bg-slate-700",children:[(w.internalStatusHistory||[]).slice().reverse().map((L,Q)=>t.jsxs("div",{className:"relative pr-6",children:[t.jsx("div",{className:"absolute right-0 top-1 w-4 h-4 bg-slate-200 dark:bg-slate-600 rounded-full border-2 border-white dark:border-slate-800"}),t.jsx("p",{className:"text-xs text-slate-400 font-mono mb-0.5",children:hs(L.changedAt)}),t.jsxs("p",{className:"text-sm font-bold text-slate-800 dark:text-white",children:[L.changedBy,": ",r("adminOrders.changedStatusTo")," ",t.jsx("span",{className:"text-[#C8A04F]",children:i[L.status]})]})]},Q)),(!w.internalStatusHistory||w.internalStatusHistory.length===0)&&t.jsx("p",{className:"text-center text-slate-400 text-sm",children:r("adminOrders.noHistory")})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-600 shadow-sm",children:[t.jsxs("h4",{className:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[t.jsx(fs,{size:18,className:"text-blue-500"})," ",r("adminOrders.externalStatus")]}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:r("adminOrders.externalStatusDesc")}),d?t.jsx("select",{className:"w-full p-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg font-bold text-slate-700 dark:text-white mb-3",value:w.status,onChange:L=>z(L.target.value),disabled:E,"data-testid":"select-external-status",children:Object.entries(n).map(([L,Q])=>t.jsx("option",{value:L,children:Q},L))}):t.jsxs("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 flex items-center gap-2",children:[t.jsx(wa,{size:16,className:"text-slate-400"}),t.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:r("adminOrders.noStatusPermission")})]})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-5 rounded-xl border border-slate-700 shadow-lg text-white",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] mb-3 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",r("adminOrders.internalStatusTitle")]}),t.jsx("p",{className:"text-xs text-slate-400 mb-3",children:r("adminOrders.internalStatusDesc")}),o?t.jsxs(t.Fragment,{children:[t.jsx("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg font-bold text-white mb-3 focus:ring-1 focus:ring-[#C8A04F]",value:w.internalStatus||"NEW",onChange:L=>_(L.target.value),disabled:E,"data-testid":"select-internal-status",children:Object.entries(i).map(([L,Q])=>t.jsx("option",{value:L,children:Q},L))}),t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2 mt-4",children:r("adminOrders.internalNotes")}),t.jsx("textarea",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-sm text-white focus:outline-none focus:border-[#C8A04F]",rows:3,placeholder:r("adminOrders.notesPlaceholder"),value:O,onChange:L=>C(L.target.value),"data-testid":"textarea-internal-notes"}),t.jsx("button",{onClick:()=>_(w.internalStatus||"NEW"),className:"w-full mt-3 bg-[#C8A04F] text-[#0B1B3A] py-2 rounded-lg font-bold text-sm hover:bg-[#b08d45] transition-colors",disabled:E,"data-testid":"button-save-notes",children:r("adminOrders.saveNotes")})]}):t.jsxs("div",{className:"p-3 bg-slate-700 rounded-lg border border-slate-600 flex items-center gap-2",children:[t.jsx(wa,{size:16,className:"text-slate-400"}),t.jsx("span",{className:"text-sm font-bold text-slate-400",children:r("adminOrders.noInternalPermission")})]})]}),t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-100 dark:border-red-800",children:[t.jsxs("h4",{className:"font-bold text-red-800 dark:text-red-400 mb-2 flex items-center gap-2",children:[t.jsx(ma,{size:16})," ",r("adminOrders.dangerZone")]}),t.jsx("button",{className:`w-full py-2 rounded-lg font-bold text-sm transition-colors ${d?"bg-white dark:bg-red-900/30 border border-red-200 dark:border-red-700 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/50":"bg-slate-100 dark:bg-slate-700 text-slate-400 cursor-not-allowed"}`,disabled:!d,"data-testid":"button-cancel-order",children:r(d?"adminOrders.cancelOrder":"adminOrders.noPermission")})]})]})]})})]})},Lue=e=>({CR_CERTIFICATE:e("adminAccountRequests.docTypes.crCertificate",{defaultValue:" "}),VAT_CERTIFICATE:e("adminAccountRequests.docTypes.vatCertificate",{defaultValue:"  "}),NATIONAL_ID:e("adminAccountRequests.docTypes.nationalId",{defaultValue:" "}),AUTHORIZATION_LETTER:e("adminAccountRequests.docTypes.authLetter",{defaultValue:" "}),OTHER:e("adminAccountRequests.docTypes.other",{defaultValue:" "})}),Fue=e=>({NEW:e("adminAccountRequests.status.new",{defaultValue:" "}),UNDER_REVIEW:e("adminAccountRequests.status.underReview",{defaultValue:" "}),APPROVED:e("adminAccountRequests.status.approved",{defaultValue:" "}),REJECTED:e("adminAccountRequests.status.rejected",{defaultValue:""}),ON_HOLD:e("adminAccountRequests.status.onHold",{defaultValue:""})}),Uue={NEW:"bg-blue-100 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-green-100 text-green-700 border-green-200",REJECTED:"bg-red-100 text-red-700 border-red-200",ON_HOLD:"bg-gray-100 text-gray-600 border-gray-200"},zue=({requests:e,onUpdate:s})=>{const[a,r]=T.useState(""),[n,i]=T.useState("ALL"),[l,o]=T.useState(null),[d,u]=T.useState({status:"UNDER_REVIEW",priceLevel:"LEVEL_3",customerType:"OTHER",searchPointsInitial:50,searchPointsMonthly:50,portalAccessStart:new Date().toISOString().split("T")[0],portalAccessEnd:"",canCreateStaff:!1,maxStaffUsers:3,adminNotes:"",openEnded:!0}),{addToast:h}=Dt(),{t:f}=Jt(),x=T.useMemo(()=>Fue(f),[f]),g=T.useMemo(()=>Lue(f),[f]),v=T.useMemo(()=>({new:e.filter(w=>w.status==="NEW").length,review:e.filter(w=>w.status==="UNDER_REVIEW").length,approved:e.filter(w=>w.status==="APPROVED").length,rejected:e.filter(w=>w.status==="REJECTED").length}),[e]),b=T.useMemo(()=>{let w=[...e];if(a){const A=a.toLowerCase();w=w.filter(O=>(O.businessName||O.fullName||"").toLowerCase().includes(A)||O.phone.includes(A))}return n!=="ALL"&&(w=w.filter(A=>A.status===n)),w.sort((A,O)=>new Date(O.createdAt).getTime()-new Date(A.createdAt).getTime())},[e,a,n]),y=w=>{o(w),u({status:w.status==="NEW"?"UNDER_REVIEW":w.status,priceLevel:w.assignedPriceLevel||"LEVEL_2",customerType:w.assignedCustomerType||"PARTS_SHOP",searchPointsInitial:w.searchPointsInitial||50,searchPointsMonthly:w.searchPointsMonthly||0,portalAccessStart:w.portalAccessStart||new Date().toISOString().split("T")[0],portalAccessEnd:w.portalAccessEnd||"",openEnded:!w.portalAccessEnd,canCreateStaff:w.canCreateStaff||!1,maxStaffUsers:w.maxStaffUsers||3,adminNotes:w.adminNotes||""})},j=async()=>{if(l)try{await xe.reviewAccountRequest(l.id,{status:d.status,adminNotes:d.adminNotes,assignedPriceLevel:d.priceLevel,assignedCustomerType:d.customerType,searchPointsInitial:d.searchPointsInitial,searchPointsMonthly:d.searchPointsMonthly,portalAccessStart:d.portalAccessStart,portalAccessEnd:d.openEnded?null:d.portalAccessEnd,canCreateStaff:d.canCreateStaff,maxStaffUsers:d.maxStaffUsers,reviewedBy:"Admin"}),h(f("adminAccountRequests.toast.saveSuccess","   "),"success"),s(),o(null)}catch{h(f("adminAccountRequests.toast.saveError","   "),"error")}};return t.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.newRequests"," ")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:v.new})]}),t.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-lg",children:t.jsx(sl,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.underReview"," ")}),t.jsx("p",{className:"text-2xl font-black text-yellow-600",children:v.review})]}),t.jsx("div",{className:"p-3 bg-yellow-50 text-yellow-600 rounded-lg",children:t.jsx(os,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.approved"," ")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:v.approved})]}),t.jsx("div",{className:"p-3 bg-green-50 text-green-600 rounded-lg",children:t.jsx(Ut,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:f("adminAccountRequests.stats.rejected","")}),t.jsx("p",{className:"text-2xl font-black text-red-600",children:v.rejected})]}),t.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg",children:t.jsx(Zs,{size:20})})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"relative w-full md:w-96",children:[t.jsx(Ft,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:f("adminAccountRequests.searchPlaceholder","   ..."),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-300 transition-all",value:a,onChange:w=>r(w.target.value)})]}),t.jsx("div",{className:"flex gap-2 w-full md:w-auto",children:t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none w-full md:w-auto",value:n,onChange:w=>i(w.target.value),children:[t.jsx("option",{value:"ALL",children:f("adminAccountRequests.allStatuses"," ")}),Object.entries(x).map(([w,A])=>t.jsx("option",{value:w,children:A},w))]})})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.businessName","  / ")}),t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.activityType"," ")}),t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.city","")}),t.jsx("th",{className:"p-4",children:f("adminAccountRequests.table.date","")}),t.jsx("th",{className:"p-4 text-center",children:f("adminAccountRequests.table.status","")}),t.jsx("th",{className:"p-4 text-center",children:f("adminAccountRequests.table.actions","")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[b.map(w=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsxs("td",{className:"p-4",children:[t.jsx("p",{className:"font-bold text-slate-800",children:w.businessName||w.fullName}),t.jsx("p",{className:"text-xs text-slate-500 font-mono mt-0.5",children:w.phone})]}),t.jsx("td",{className:"p-4 text-slate-600 font-medium",children:w.category==="SPARE_PARTS_SHOP"?f("adminAccountRequests.categories.spareParts","  "):w.category==="RENTAL_COMPANY"?f("adminAccountRequests.categories.rental"," "):w.category==="INSURANCE_COMPANY"?f("adminAccountRequests.categories.insurance"," "):f("adminAccountRequests.categories.agent","")}),t.jsx("td",{className:"p-4 text-slate-600",children:w.city||w.representativeRegion}),t.jsx("td",{className:"p-4 text-slate-500 text-xs",dir:"ltr",children:hs(w.createdAt)}),t.jsxs("td",{className:"p-4 text-center",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${Uue[w.status]}`,children:x[w.status]}),w.status==="APPROVED"&&t.jsx("div",{className:"text-[10px] text-green-600 font-bold mt-1",children:f("adminAccountRequests.approvedAccount"," ")})]}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>y(w),className:"text-slate-600 hover:text-brand-600 bg-slate-100 hover:bg-slate-200 p-2 rounded-lg transition-colors flex items-center justify-center gap-1 mx-auto font-bold text-xs",children:[t.jsx(fs,{size:16})," ",f("adminAccountRequests.view","")]})})]},w.id)),b.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-10 text-center text-slate-400",children:f("adminAccountRequests.noMatchingRequests","   ")})})]})]})}),l&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm transition-opacity",onClick:()=>o(null)}),t.jsxs("div",{className:"fixed inset-y-0 left-0 w-full md:w-[600px] bg-slate-50 z-50 shadow-2xl transform transition-transform duration-300 ease-in-out border-r border-slate-200 flex flex-col",children:[t.jsxs("div",{className:"p-6 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm z-10",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:f("adminAccountRequests.panel.title","  ")}),t.jsxs("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["REF: ",l.id]})]}),t.jsx("button",{onClick:()=>o(null),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 text-slate-600",children:t.jsx(St,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm space-y-4",children:[t.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 border-b border-slate-100 pb-2",children:[t.jsx(Lt,{size:18,className:"text-blue-600"})," ",f("adminAccountRequests.panel.customerData"," ")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.businessName"," ")}),t.jsx("span",{className:"font-bold text-slate-800 text-base",children:l.businessName||l.fullName})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.activity","")}),t.jsx("span",{className:"font-bold text-slate-800",children:l.category})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.city","")}),t.jsx("span",{className:"font-bold text-slate-800",children:l.city||l.representativeRegion})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.contactNumber"," ")}),t.jsx("span",{className:"font-mono font-bold text-slate-800",children:l.phone})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.crNumber"," ")}),t.jsx("span",{className:"font-mono text-slate-800",children:l.commercialRegNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase",children:f("adminAccountRequests.panel.vatNumber"," ")}),t.jsx("span",{className:"font-mono text-slate-800",children:l.vatNumber||"-"})]})]}),l.notes&&t.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100 text-sm text-slate-600",children:[t.jsxs("span",{className:"block text-xs font-bold text-slate-400 mb-1",children:[f("adminAccountRequests.panel.customerNotes"," "),":"]}),l.notes]})]}),l.documents&&l.documents.length>0&&t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm space-y-4",children:[t.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 border-b border-slate-100 pb-2",children:[t.jsx($j,{size:18,className:"text-purple-600"})," ",f("adminAccountRequests.panel.attachedDocuments"," ")," (",l.documents.length,")"]}),t.jsx("div",{className:"grid gap-3",children:l.documents.map(w=>{const A=w.fileType.startsWith("image/"),O=w.fileSize<1024*1024?(w.fileSize/1024).toFixed(1)+" KB":(w.fileSize/(1024*1024)).toFixed(1)+" MB";return t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200 hover:border-purple-300 transition-colors",children:[t.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${A?"bg-blue-100 text-blue-600":"bg-red-100 text-red-600"}`,children:A?t.jsx(tl,{size:20}):t.jsx($j,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:g[w.type]||w.type}),t.jsxs("p",{className:"text-xs text-slate-500",children:[w.name,"  ",O]})]}),w.base64Data&&t.jsx("a",{href:w.base64Data,target:"_blank",rel:"noopener noreferrer",download:w.name,className:"p-2 bg-purple-100 rounded-lg text-purple-600 hover:bg-purple-200 transition-colors","data-testid":`view-doc-${w.id}`,children:t.jsx(Ml,{size:16})})]},w.id)})})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-6 rounded-2xl border border-slate-700 shadow-lg text-white space-y-6",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] flex items-center gap-2 border-b border-slate-700 pb-2",children:[t.jsx(Ds,{size:18})," ",f("adminAccountRequests.panel.adminDecision","  ")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.requestStatus"," ")}),t.jsxs("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white font-bold focus:ring-1 focus:ring-[#C8A04F]",value:d.status,onChange:w=>u({...d,status:w.target.value}),children:[t.jsx("option",{value:"NEW",children:f("adminAccountRequests.form.statusNew","")}),t.jsx("option",{value:"UNDER_REVIEW",children:f("adminAccountRequests.form.statusUnderReview"," ")}),t.jsx("option",{value:"APPROVED",children:f("adminAccountRequests.form.statusApproved"," ()")}),t.jsx("option",{value:"REJECTED",children:f("adminAccountRequests.form.statusRejected","")}),t.jsx("option",{value:"ON_HOLD",children:f("adminAccountRequests.form.statusOnHold","")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.customerType"," ")}),t.jsxs("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",value:d.customerType,onChange:w=>u({...d,customerType:w.target.value}),children:[t.jsx("option",{value:"PARTS_SHOP",children:f("adminAccountRequests.form.typePartsShop","  ")}),t.jsx("option",{value:"RENTAL_COMPANY",children:f("adminAccountRequests.form.typeRentalCompany"," ")}),t.jsx("option",{value:"INSURANCE_COMPANY",children:f("adminAccountRequests.form.typeInsuranceCompany"," ")}),t.jsx("option",{value:"SALES_AGENT",children:f("adminAccountRequests.form.typeSalesAgent","")}),t.jsx("option",{value:"FLEET_CUSTOMER",children:f("adminAccountRequests.form.typeFleetCustomer"," ")}),t.jsx("option",{value:"OTHER",children:f("adminAccountRequests.form.typeOther","")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.priceLevel"," ")}),t.jsxs("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",value:d.priceLevel,onChange:w=>u({...d,priceLevel:w.target.value}),children:[t.jsx("option",{value:"LEVEL_1",children:f("adminAccountRequests.form.level1","Level 1 (VIP - Best Price)")}),t.jsx("option",{value:"LEVEL_2",children:f("adminAccountRequests.form.level2","Level 2 (Wholesale)")}),t.jsx("option",{value:"LEVEL_3",children:f("adminAccountRequests.form.level3","Level 3 (Retail/Small)")}),t.jsx("option",{value:"SPECIAL",children:f("adminAccountRequests.form.levelSpecial","Special")})]})]})]}),t.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-bold text-[#C8A04F] mb-2 flex items-center gap-2",children:[t.jsx(fh,{size:14})," ",f("adminAccountRequests.form.accessValidity"," ")]}),t.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[t.jsx("input",{type:"date",className:"bg-slate-900 border border-slate-600 rounded p-2 text-xs text-white w-full",value:d.portalAccessStart,onChange:w=>u({...d,portalAccessStart:w.target.value})}),t.jsx("span",{className:"text-slate-400 text-xs",children:f("adminAccountRequests.form.to","")}),t.jsx("input",{type:"date",disabled:d.openEnded,className:"bg-slate-900 border border-slate-600 rounded p-2 text-xs text-white w-full disabled:opacity-50",value:d.portalAccessEnd,onChange:w=>u({...d,portalAccessEnd:w.target.value})})]}),t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-300 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.openEnded,onChange:w=>u({...d,openEnded:w.target.checked}),className:"rounded bg-slate-700 border-slate-500"}),f("adminAccountRequests.form.openEnded","  (  )")]})]}),t.jsxs("div",{className:"pt-2 border-t border-slate-700",children:[t.jsx("label",{className:"block text-xs font-bold text-[#C8A04F] mb-2",children:f("adminAccountRequests.form.searchPoints","  ")}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-xs text-slate-400 block mb-1",children:f("adminAccountRequests.form.initialBalance"," ")}),t.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm text-white",value:d.searchPointsInitial,onChange:w=>u({...d,searchPointsInitial:parseInt(w.target.value)})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-xs text-slate-400 block mb-1",children:f("adminAccountRequests.form.monthlyRenewal"," ")}),t.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-sm text-white",value:d.searchPointsMonthly,onChange:w=>u({...d,searchPointsMonthly:parseInt(w.target.value)})})]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg border border-slate-600",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.canCreateStaff,onChange:w=>u({...d,canCreateStaff:w.target.checked}),className:"w-4 h-4 rounded bg-slate-700 border-slate-500 text-[#C8A04F] focus:ring-0"}),t.jsx("span",{className:"text-sm font-bold text-slate-200",children:f("adminAccountRequests.form.allowAddStaff","  ")})]}),d.canCreateStaff&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-slate-400",children:[f("adminAccountRequests.form.maxLimit"," "),":"]}),t.jsx("input",{type:"number",min:1,className:"w-16 bg-slate-900 border border-slate-600 rounded p-1 text-center text-sm text-white",value:d.maxStaffUsers,onChange:w=>u({...d,maxStaffUsers:parseInt(w.target.value)})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:f("adminAccountRequests.form.adminNotes","  ( )")}),t.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-sm text-white focus:border-[#C8A04F] focus:outline-none",placeholder:f("adminAccountRequests.form.notesPlaceholder","    ..."),value:d.adminNotes,onChange:w=>u({...d,adminNotes:w.target.value})})]})]})]}),t.jsxs("div",{className:"p-6 bg-white border-t border-slate-200 shadow-up z-10 flex gap-4",children:[t.jsxs("button",{onClick:j,className:"flex-1 bg-[#0B1B3A] text-white py-3 rounded-xl font-bold hover:bg-slate-900 transition-colors flex items-center justify-center gap-2 shadow-lg",children:[t.jsx(ds,{size:18})," ",f("adminAccountRequests.form.saveDecision"," ")]}),t.jsx("button",{onClick:()=>o(null),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:f("adminAccountRequests.form.cancel","")})]})]})]})]})},A5={LOCAL_SUPPLIER:Xs,INTERNATIONAL_SUPPLIER:ja,MARKETER:ya,ADVERTISER:pi},E5={NEW:"bg-blue-100 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-green-100 text-green-700 border-green-200",REJECTED:"bg-red-100 text-red-700 border-red-200",NEEDS_MODIFICATION:"bg-orange-100 text-orange-700 border-orange-200"},Bue=({onBack:e})=>{var W,ee,V,P,Y,J,K,se,G;const[s,a]=T.useState([]),[r,n]=T.useState(!0),[i,l]=T.useState(""),[o,d]=T.useState("ALL"),[u,h]=T.useState("ALL"),[f,x]=T.useState(null),[g,v]=T.useState(null),[b,y]=T.useState("UNDER_REVIEW"),[j,w]=T.useState(""),[A,O]=T.useState(""),[C,E]=T.useState(""),[S,D]=T.useState(100),{addToast:M}=Dt(),{t:U}=Jt();T.useEffect(()=>{I()},[o,u,i]);const I=async()=>{n(!0);try{const[te,Z]=await Promise.all([xe.getPartnerRequests({type:o!=="ALL"?o:void 0,status:u!=="ALL"?u:void 0,search:i||void 0}),xe.getPartnerRequestsStats()]);a(te.items),v(Z)}catch{M("    ","error")}finally{n(!1)}},k=te=>{x(te),y(te.status==="NEW"?"UNDER_REVIEW":te.status),w(te.adminNotes||""),O(te.rejectionReason||""),E(te.modificationNote||"")},z=async()=>{if(f)try{b==="APPROVED"?(await xe.approvePartnerRequest(f.id,{searchPoints:S}),M("     ","success")):(await xe.updatePartnerRequestStatus(f.id,b,j,A,C),M("   ","success")),x(null),I()}catch{M("   ","error")}},_=te=>{var Z;return((Z=Io[te])==null?void 0:Z.label)||te},q=te=>A5[te]||Xs,L=te=>{var Z;return((Z=$ce[te])==null?void 0:Z.label)||te},Q=te=>!te||te.length===0?t.jsx("span",{className:"text-slate-400",children:"-"}):t.jsxs("div",{className:"flex flex-wrap gap-1",children:[te.slice(0,3).map(Z=>{const ue=Pm.find(re=>re.id===Z);return t.jsx("span",{className:"px-2 py-0.5 bg-brand-100 text-brand-700 rounded-full text-xs font-bold",children:(ue==null?void 0:ue.label)||Z},Z)}),te.length>3&&t.jsxs("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full text-xs font-bold",children:["+",te.length-3]})]}),X=te=>!te||te.length===0?t.jsx("span",{className:"text-slate-400",children:"-"}):t.jsx("div",{className:"flex flex-wrap gap-1",children:te.map(Z=>{const ue=_F.find(re=>re.id===Z);return t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-bold",children:(ue==null?void 0:ue.label)||Z},Z)})});return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e&&t.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg",children:t.jsx(vf,{size:20})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-slate-500 text-sm",children:"    "})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-bold",children:[(g==null?void 0:g.total)||0," "]})})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Io).map(([te,Z])=>{var H;const ue=A5[te],re=((H=g==null?void 0:g.byType)==null?void 0:H[te])||0;return t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:`p-2 rounded-lg ${Z.color} text-white`,children:t.jsx(ue,{size:20})}),t.jsx("span",{className:"text-2xl font-black text-slate-800",children:re})]}),t.jsx("p",{className:"text-sm font-bold text-slate-600",children:Z.label})]},te)})}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[": ",((W=g==null?void 0:g.byStatus)==null?void 0:W.NEW)||0]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-yellow-700",children:[" : ",((ee=g==null?void 0:g.byStatus)==null?void 0:ee.UNDER_REVIEW)||0]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-green-700",children:[" : ",((V=g==null?void 0:g.byStatus)==null?void 0:V.APPROVED)||0]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),t.jsxs("span",{className:"text-sm font-bold text-red-700",children:[": ",((P=g==null?void 0:g.byStatus)==null?void 0:P.REJECTED)||0]})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"relative w-full md:w-80",children:[t.jsx(Ft,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:"   ...",className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-300",value:i,onChange:te=>l(te.target.value)})]}),t.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[t.jsxs("select",{value:o,onChange:te=>d(te.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"LOCAL_SUPPLIER",children:" "}),t.jsx("option",{value:"INTERNATIONAL_SUPPLIER",children:" "}),t.jsx("option",{value:"MARKETER",children:""}),t.jsx("option",{value:"ADVERTISER",children:""})]}),t.jsxs("select",{value:u,onChange:te=>h(te.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"NEW",children:" "}),t.jsx("option",{value:"UNDER_REVIEW",children:" "}),t.jsx("option",{value:"APPROVED",children:" "}),t.jsx("option",{value:"REJECTED",children:""}),t.jsx("option",{value:"NEEDS_MODIFICATION",children:" "})]})]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:r?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-brand-600 border-t-transparent rounded-full animate-spin mx-auto"}),t.jsx("p",{className:"text-slate-500 mt-3",children:" ..."})]}):s.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Gt,{size:48,className:"text-slate-300 mx-auto mb-3"}),t.jsx("p",{className:"text-slate-500",children:"    "})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-500 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(te=>{var ue,re,H;const Z=q(te.type);return t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`p-1.5 rounded-lg ${((ue=Io[te.type])==null?void 0:ue.color)||"bg-slate-500"} text-white`,children:t.jsx(Z,{size:16})}),t.jsx("span",{className:"text-sm font-bold text-slate-700",children:_(te.type)})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"font-bold text-slate-800",children:te.companyName||te.fullName||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 font-mono",dir:"ltr",children:te.phone})}),t.jsxs("td",{className:"px-4 py-3",children:[te.type==="LOCAL_SUPPLIER"&&Q(te.carBrands||[]),te.type==="INTERNATIONAL_SUPPLIER"&&t.jsx("span",{className:"text-sm text-slate-600",children:((re=Wj.find(pe=>pe.code===te.country))==null?void 0:re.label)||te.country}),te.type==="MARKETER"&&X(te.marketingChannels||[]),te.type==="ADVERTISER"&&t.jsxs("span",{className:"text-sm text-slate-600",children:[((H=Gj.find(pe=>pe.id===te.adType))==null?void 0:H.label)||te.adType," - ",te.duration," "]})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${E5[te.status]}`,children:L(te.status)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-500",children:hs(te.createdAt)})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>k(te),className:"p-2 text-brand-600 hover:bg-brand-50 rounded-lg transition-colors",children:t.jsx(fs,{size:18})})})]},te.id)})})]})})}),f&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-scale-in",children:[t.jsx("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-xl ${((Y=Io[f.type])==null?void 0:Y.color)||"bg-slate-500"} text-white`,children:Oe.createElement(q(f.type),{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:f.companyName||f.fullName}),t.jsx("p",{className:"text-sm text-slate-500",children:_(f.type)})]})]}),t.jsx("button",{onClick:()=>x(null),className:"p-2 hover:bg-slate-200 rounded-lg",children:t.jsx(St,{size:20})})]})}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh] space-y-6",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[t.jsx(vn,{size:14}),t.jsx("span",{children:" "})]}),t.jsx("p",{className:"font-bold text-slate-800",dir:"ltr",children:f.phone})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm mb-1",children:[t.jsx(fh,{size:14}),t.jsx("span",{children:" "})]}),t.jsx("p",{className:"font-bold text-slate-800",children:hs(f.createdAt)})]})]}),f.type==="LOCAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:"  "}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.commercialRegNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.vatNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.nationalAddressNumber||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:((J=TF.find(te=>te.id===f.city))==null?void 0:J.label)||f.city||"-"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),Q(f.carBrands||[])]}),f.ownBrands&&f.ownBrands.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:"  "}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:f.ownBrands.map((te,Z)=>t.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-bold",children:te},Z))})]})]}),f.type==="INTERNATIONAL_SUPPLIER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:"  "}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:((K=Wj.find(te=>te.code===f.country))==null?void 0:K.label)||f.country||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:f.city||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:((se=kF.find(te=>te.id===f.businessType))==null?void 0:se.label)||f.businessType||"-"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),Q(f.carBrands||[])]})]}),f.type==="MARKETER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:" "}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),X(f.marketingChannels||[])]}),f.otherChannel&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.otherChannel})]})]}),f.type==="ADVERTISER"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700 border-b pb-2",children:" "}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:((G=Gj.find(te=>te.id===f.adType))==null?void 0:G.label)||f.adType||"-"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:""}),t.jsxs("p",{className:"font-bold text-slate-800",children:[f.duration||0," "]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800",children:f.startDate||"-"})]})]})]}),t.jsxs("div",{className:"border-t pt-6 space-y-4",children:[t.jsx("h4",{className:"font-bold text-slate-700",children:" "}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-2 block",children:" "}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["UNDER_REVIEW","APPROVED","REJECTED","NEEDS_MODIFICATION"].map(te=>t.jsx("button",{onClick:()=>y(te),className:`px-4 py-2 rounded-lg border-2 font-bold text-sm transition-all ${b===te?E5[te]+" border-current":"border-slate-200 text-slate-600 hover:border-slate-300"}`,children:L(te)},te))})]}),b==="APPROVED"&&f.type==="LOCAL_SUPPLIER"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"  "}),t.jsx("input",{type:"number",value:S,onChange:te=>D(parseInt(te.target.value)||0),className:"w-40 p-2 border border-slate-200 rounded-lg"})]}),b==="REJECTED"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:" "}),t.jsx("textarea",{value:A,onChange:te=>O(te.target.value),className:"w-full p-3 border border-slate-200 rounded-lg h-20",placeholder:"   ..."})]}),b==="NEEDS_MODIFICATION"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:" "}),t.jsx("textarea",{value:C,onChange:te=>E(te.target.value),className:"w-full p-3 border border-slate-200 rounded-lg h-20",placeholder:"  ..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:" "}),t.jsx("textarea",{value:j,onChange:te=>w(te.target.value),className:"w-full p-3 border border-slate-200 rounded-lg h-20",placeholder:"  (  )..."})]})]})]}),t.jsxs("div",{className:"p-6 border-t border-slate-200 bg-slate-50 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>x(null),className:"px-6 py-2 bg-slate-100 text-slate-700 rounded-lg font-bold hover:bg-slate-200",children:""}),t.jsxs("button",{onClick:z,className:"px-6 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 flex items-center gap-2",children:[t.jsx(ds,{size:18})," "]})]})]})})]})},C5={NEW:"new",UNDER_REVIEW:"underReview",PARTIALLY_APPROVED:"partiallyApproved",APPROVED:"approved",QUOTED:"quoted",PROCESSED:"processed",REJECTED:"rejected"},$ue={NEW:"bg-blue-100 text-blue-700",UNDER_REVIEW:"bg-yellow-100 text-yellow-700",PARTIALLY_APPROVED:"bg-purple-100 text-purple-700",APPROVED:"bg-green-100 text-green-700",QUOTED:"bg-green-100 text-green-700",PROCESSED:"bg-green-100 text-green-700",REJECTED:"bg-red-100 text-red-700"},que=({quotes:e,onUpdate:s})=>{const{t:a}=Jt(),[r,n]=T.useState(""),[i,l]=T.useState("ALL"),[o,d]=T.useState(null),[u,h]=T.useState(!1),[f,x]=T.useState([]),[g,v]=T.useState(new Set),[b,y]=T.useState(""),{addToast:j}=Dt(),w=I=>{const k=C5[I];return k?a(`adminQuoteManager.status.${k}`):I},A=T.useMemo(()=>{let I=[...e];if(r){const k=r.toLowerCase();I=I.filter(z=>z.id.toLowerCase().includes(k)||z.companyName.toLowerCase().includes(k)||z.userName.toLowerCase().includes(k))}return i!=="ALL"&&(I=I.filter(k=>k.status===i)),I.sort((k,z)=>new Date(z.date).getTime()-new Date(k.date).getTime())},[e,r,i]),O=I=>{d(I),x(JSON.parse(JSON.stringify(I.items))),y(I.adminGeneralNote||""),v(new Set)},C=(I,k,z)=>{const _=[...f];_[I]={..._[I],[k]:z},x(_)},E=I=>{const k=new Set(g);k.has(I)?k.delete(I):k.add(I),v(k)},S=()=>{g.size===f.length?v(new Set):v(new Set(f.map((I,k)=>k)))},D=I=>{const k=[...f];g.forEach(z=>{k[z].approvalStatus=I,(I==="MISSING"||I==="REJECTED")&&(k[z].matchedPrice=void 0)}),x(k),j(a("adminQuoteManager.toast.itemsUpdated",{count:g.size}),"info")},M=async()=>{if(!(!o||f.some(k=>k.approvalStatus==="APPROVED"&&(!k.matchedPrice||k.matchedPrice<=0))&&!confirm(a("adminQuoteManager.toast.approvedWithoutPriceWarning")))){h(!0);try{const k={...o,items:f};await xe.updateQuoteRequest(k),await xe.finalizeQuoteRequest(o.id,"Admin",b),j(a("adminQuoteManager.toast.pricingSentSuccess"),"success"),s(),d(null)}catch{j(a("adminQuoteManager.toast.saveError"),"error")}finally{h(!1)}}};f.filter(I=>I.approvalStatus==="APPROVED").length,f.filter(I=>I.approvalStatus==="MISSING").length;const U=f.reduce((I,k)=>I+(k.matchedPrice||0)*k.requestedQty,0);return t.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 justify-between items-center",children:[t.jsxs("div",{className:"relative w-full md:w-96",children:[t.jsx(Ft,{className:"absolute right-3 top-3 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:a("adminQuoteManager.searchPlaceholder"),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-300 transition-all",value:r,onChange:I=>n(I.target.value)})]}),t.jsxs("select",{className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none w-full md:w-auto",value:i,onChange:I=>l(I.target.value),children:[t.jsx("option",{value:"ALL",children:a("adminQuoteManager.allStatuses")}),Object.keys(C5).map(I=>t.jsx("option",{value:I,children:w(I)},I))]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:a("adminQuoteManager.table.requestNumber")}),t.jsx("th",{className:"p-4",children:a("adminQuoteManager.table.businessCustomer")}),t.jsx("th",{className:"p-4",children:a("adminQuoteManager.table.uploadDate")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.itemsCount")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.priceType")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.status")}),t.jsx("th",{className:"p-4 text-center",children:a("adminQuoteManager.table.actions")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[A.map(I=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-4 font-mono font-bold text-[#C8A04F]",children:I.id}),t.jsxs("td",{className:"p-4",children:[t.jsx("p",{className:"font-bold text-slate-800",children:I.companyName}),t.jsx("p",{className:"text-xs text-slate-500",children:I.userName})]}),t.jsx("td",{className:"p-4 text-slate-500 text-xs",dir:"ltr",children:hs(I.date)}),t.jsx("td",{className:"p-4 text-center font-bold",children:I.items.length}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:"text-xs font-bold bg-slate-100 px-2 py-1 rounded",children:I.priceType})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${$ue[I.status]||"bg-gray-100 text-gray-600"}`,children:w(I.status)})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("button",{onClick:()=>O(I),className:"bg-white border border-slate-200 hover:bg-slate-50 text-slate-700 px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm transition-colors",children:a("adminQuoteManager.reviewDetails")})})]},I.id)),A.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-10 text-center text-slate-400",children:a("adminQuoteManager.noRequests")})})]})]})}),o&&t.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-slate-100",children:[t.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:t.jsx(St,{size:24})}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-black text-slate-800 flex items-center gap-2",children:[a("adminQuoteManager.panel.reviewRequest")," ",t.jsx("span",{className:"font-mono text-[#C8A04F] bg-[#0B1B3A] px-2 py-0.5 rounded text-base",children:o.id})]}),t.jsxs("p",{className:"text-xs text-slate-500 font-bold",children:[o.companyName,"  ",o.priceType]})]})]}),t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsxs("div",{className:"text-center px-4 border-l border-slate-200",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400",children:a("adminQuoteManager.panel.proposedTotal")}),t.jsxs("p",{className:"text-lg font-black text-slate-800",children:[U.toLocaleString()," ",a("common.currency")]})]}),t.jsxs("button",{onClick:M,disabled:u,className:"bg-green-600 text-white px-6 py-2.5 rounded-xl font-bold hover:bg-green-700 shadow-lg flex items-center gap-2 disabled:opacity-50",children:[t.jsx(ds,{size:18})," ",a(u?"adminQuoteManager.panel.approving":"adminQuoteManager.panel.approveAndSend")]})]})]}),t.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-6 py-3 flex gap-3 items-center overflow-x-auto shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 px-2 border-l border-slate-300 ml-2",children:[t.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300",checked:g.size===f.length&&f.length>0,onChange:S}),t.jsx("span",{className:"text-sm font-bold text-slate-600",children:a("adminQuoteManager.panel.selectAll")})]}),t.jsxs("span",{className:"text-xs font-bold text-slate-400 mx-2",children:[a("adminQuoteManager.panel.changeSelectedStatus")," (",g.size,"):"]}),t.jsx("button",{onClick:()=>D("APPROVED"),disabled:g.size===0,className:"px-3 py-1.5 bg-green-50 text-green-700 border border-green-200 rounded-lg text-xs font-bold hover:bg-green-100 disabled:opacity-50",children:a("adminQuoteManager.panel.available")}),t.jsx("button",{onClick:()=>D("MISSING"),disabled:g.size===0,className:"px-3 py-1.5 bg-yellow-50 text-yellow-700 border border-yellow-200 rounded-lg text-xs font-bold hover:bg-yellow-100 disabled:opacity-50",children:a("adminQuoteManager.panel.unavailable")}),t.jsx("button",{onClick:()=>D("REJECTED"),disabled:g.size===0,className:"px-3 py-1.5 bg-red-50 text-red-700 border border-red-200 rounded-lg text-xs font-bold hover:bg-red-100 disabled:opacity-50",children:a("adminQuoteManager.panel.rejected")})]}),t.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-slate-100 text-slate-600 font-bold border-b border-slate-200 sticky top-0 z-10 shadow-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 w-10"}),t.jsx("th",{className:"p-3",children:a("adminQuoteManager.panel.customerPartNumber")}),t.jsx("th",{className:"p-3",children:a("adminQuoteManager.panel.customerPartName")}),t.jsx("th",{className:"p-3 w-20 text-center",children:a("adminQuoteManager.panel.quantity")}),t.jsx("th",{className:"p-3 w-40",children:a("adminQuoteManager.panel.matchedProduct")}),t.jsx("th",{className:"p-3 w-32 text-center",children:a("adminQuoteManager.panel.price")}),t.jsx("th",{className:"p-3 w-40 text-center",children:a("adminQuoteManager.panel.decision")}),t.jsx("th",{className:"p-3",children:a("adminQuoteManager.panel.notes")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:f.map((I,k)=>{const z=g.has(k);return t.jsxs("tr",{className:`${z?"bg-blue-50":"hover:bg-slate-50"} transition-colors`,children:[t.jsx("td",{className:"p-3 text-center",children:t.jsx("input",{type:"checkbox",checked:z,onChange:()=>E(k),className:"rounded border-gray-300 text-brand-600 focus:ring-0"})}),t.jsx("td",{className:"p-3 font-mono font-bold text-slate-700",children:I.partNumber}),t.jsx("td",{className:"p-3 text-slate-600",children:I.partName}),t.jsx("td",{className:"p-3 text-center font-bold",children:I.requestedQty}),t.jsx("td",{className:"p-3",children:t.jsx("input",{type:"text",className:"w-full p-2 text-xs border border-slate-200 rounded bg-white",placeholder:" ...",value:I.matchedProductName||"",onChange:_=>C(k,"matchedProductName",_.target.value)})}),t.jsx("td",{className:"p-3",children:t.jsx("input",{type:"number",className:`w-full p-2 text-xs text-center border rounded font-bold ${I.approvalStatus==="APPROVED"&&!I.matchedPrice?"border-red-300 bg-red-50":"border-slate-200 bg-white"}`,placeholder:"0.00",value:I.matchedPrice||"",onChange:_=>C(k,"matchedPrice",parseFloat(_.target.value)),disabled:I.approvalStatus!=="APPROVED"})}),t.jsx("td",{className:"p-3 text-center",children:t.jsxs("select",{className:`w-full p-1.5 text-xs font-bold rounded border ${I.approvalStatus==="APPROVED"?"bg-green-100 text-green-700 border-green-200":I.approvalStatus==="MISSING"?"bg-yellow-100 text-yellow-700 border-yellow-200":I.approvalStatus==="REJECTED"?"bg-red-100 text-red-700 border-red-200":"bg-slate-100 text-slate-600 border-slate-200"}`,value:I.approvalStatus||"PENDING",onChange:_=>C(k,"approvalStatus",_.target.value),children:[t.jsx("option",{value:"PENDING",children:a("adminQuoteManager.panel.itemStatus.pending")}),t.jsx("option",{value:"APPROVED",children:a("adminQuoteManager.panel.itemStatus.approved")}),t.jsx("option",{value:"MISSING",children:a("adminQuoteManager.panel.itemStatus.missing")}),t.jsx("option",{value:"REJECTED",children:a("adminQuoteManager.panel.itemStatus.rejected")})]})}),t.jsx("td",{className:"p-3",children:t.jsx("input",{type:"text",className:"w-full p-2 text-xs border border-slate-200 rounded bg-white text-slate-500",placeholder:"...",value:I.adminNote||"",onChange:_=>C(k,"adminNote",_.target.value)})})]},k)})})]})}),t.jsxs("div",{className:"mt-6 max-w-2xl",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:a("adminQuoteManager.panel.generalNotes")}),t.jsx("textarea",{className:"w-full p-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500",rows:3,value:b,onChange:I=>y(I.target.value),placeholder:a("adminQuoteManager.panel.notesPlaceholder")})]})]})]})]})},b1={NEW:"new",UNDER_REVIEW:"underReview",ORDER_PLANNED:"orderPlanned",ORDERED:"ordered",ADDED_TO_STOCK:"addedToStock",IGNORED:"ignored"},Hue={NEW:"bg-blue-50 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-50 text-yellow-700 border-yellow-200",ORDER_PLANNED:"bg-purple-50 text-purple-700 border-purple-200",ORDERED:"bg-orange-50 text-orange-700 border-orange-200",ADDED_TO_STOCK:"bg-green-50 text-green-700 border-green-200",IGNORED:"bg-gray-50 text-gray-500 border-gray-200"},Vue=({missingRequests:e})=>{const{t:s}=Jt(),[a,r]=T.useState("ALL"),[n,i]=T.useState(""),[l,o]=T.useState("ALL"),[d,u]=T.useState(null),[h,f]=T.useState({status:"NEW",adminNotes:""}),[x,g]=T.useState(!1),[v,b]=T.useState(1),y=15,{addToast:j}=Dt(),w=U=>{const I=b1[U];return I?s(`adminMissingParts.status.${I}`):U},A=T.useMemo(()=>({total:e.length,new:e.filter(U=>U.status==="NEW"||!U.status).length,inReview:e.filter(U=>U.status==="UNDER_REVIEW").length,ordered:e.filter(U=>U.status==="ORDERED"||U.status==="ORDER_PLANNED").length,solved:e.filter(U=>U.status==="ADDED_TO_STOCK").length,fromQuote:e.filter(U=>U.source==="QUOTE").length,fromSearch:e.filter(U=>U.source==="SEARCH").length}),[e]),O=T.useMemo(()=>{let U=[...e];if(a!=="ALL"&&(U=U.filter(I=>(I.source||"SEARCH")===a)),n){const I=n.toLowerCase();U=U.filter(k=>k.query.toLowerCase().includes(I)||(k.partNumber||"").toLowerCase().includes(I)||(k.name||"").toLowerCase().includes(I))}return l!=="ALL"&&(U=U.filter(I=>(I.status||"NEW")===l)),U.sort((I,k)=>{const z=(k.totalRequestsCount||1)-(I.totalRequestsCount||1);return z!==0?z:new Date(k.createdAt).getTime()-new Date(I.createdAt).getTime()})},[e,a,n,l]),C=T.useMemo(()=>{const U=(v-1)*y;return O.slice(U,U+y)},[O,v]),E=Math.ceil(O.length/y),S=U=>{u(U),f({status:U.status||"NEW",adminNotes:U.adminNotes||""})},D=async()=>{if(d){g(!0);try{await xe.updateMissingProductStatus(d.id,h.status,h.adminNotes),j(s("adminMissingParts.toast.statusUpdated"),"success"),d.status=h.status,d.adminNotes=h.adminNotes,u(null)}catch{j(s("adminMissingParts.toast.saveError"),"error")}finally{g(!1)}}},M=async()=>{try{const{utils:U,writeFile:I}=await Tl(async()=>{const{utils:q,writeFile:L}=await Promise.resolve().then(()=>Qm);return{utils:q,writeFile:L}},void 0),k=O.map(q=>({[s("adminMissingParts.export.partNumber")]:q.normalizedPartNumber||q.query,[s("adminMissingParts.export.itemName")]:q.name||q.query,[s("adminMissingParts.export.source")]:q.source==="QUOTE"?s("adminMissingParts.source.quote"):s("adminMissingParts.source.search"),[s("adminMissingParts.export.requestCount")]:q.totalRequestsCount||1,[s("adminMissingParts.export.customerCount")]:q.uniqueCustomersCount||1,[s("adminMissingParts.export.status")]:w(q.status||"NEW"),[s("adminMissingParts.export.lastRequest")]:hs(q.lastRequestedAt||q.createdAt),[s("adminMissingParts.export.adminNotes")]:q.adminNotes||""})),z=U.json_to_sheet(k),_=U.book_new();U.book_append_sheet(_,z,"Missing Items"),I(_,"Missing_Parts_Report.xlsx"),j(s("adminMissingParts.toast.exportSuccess"),"success")}catch{j(s("adminMissingParts.toast.exportFailed"),"error")}};return t.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.totalMissing")}),t.jsx("p",{className:"text-2xl font-black text-slate-800",children:A.total})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.newMissing")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:A.new})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.underReview")}),t.jsx("p",{className:"text-2xl font-black text-yellow-600",children:A.inReview})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.orderedImport")}),t.jsx("p",{className:"text-2xl font-black text-purple-600",children:A.ordered})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.stats.addedToStock")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:A.solved})]})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col xl:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg w-full xl:w-auto overflow-x-auto",children:[t.jsx("button",{onClick:()=>r("ALL"),className:`px-5 py-2 rounded-md text-sm font-bold transition-all whitespace-nowrap ${a==="ALL"?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:s("adminMissingParts.tabs.all")}),t.jsxs("button",{onClick:()=>r("QUOTE"),className:`px-5 py-2 rounded-md text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2 ${a==="QUOTE"?"bg-white text-brand-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[t.jsx(Lt,{size:16})," ",s("adminMissingParts.tabs.fromQuote")," (",A.fromQuote,")"]}),t.jsxs("button",{onClick:()=>r("SEARCH"),className:`px-5 py-2 rounded-md text-sm font-bold transition-all whitespace-nowrap flex items-center gap-2 ${a==="SEARCH"?"bg-white text-brand-700 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[t.jsx(Ft,{size:16})," ",s("adminMissingParts.tabs.fromSearch")," (",A.fromSearch,")"]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full xl:w-auto",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Ft,{className:"absolute right-3 top-2.5 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:s("adminMissingParts.searchPlaceholder"),className:"w-full pr-10 pl-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-500/20 transition-all",value:n,onChange:U=>i(U.target.value)})]}),t.jsxs("select",{className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none",value:l,onChange:U=>o(U.target.value),children:[t.jsx("option",{value:"ALL",children:s("adminMissingParts.allStatuses")}),Object.keys(b1).map(U=>t.jsx("option",{value:U,children:w(U)},U))]}),t.jsxs("button",{onClick:M,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-700 flex items-center justify-center gap-2 transition-colors shadow-sm",children:[t.jsx(cr,{size:16})," Excel"]})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[400px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:s("adminMissingParts.table.partNumber")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.source")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.requestFrequency")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.interestedCustomers")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.status")}),t.jsx("th",{className:"p-4",children:s("adminMissingParts.table.lastRequest")}),t.jsx("th",{className:"p-4 text-center",children:s("adminMissingParts.table.actions")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[C.map(U=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-mono font-bold text-brand-700 text-base",children:U.normalizedPartNumber||U.query}),U.name&&U.name!==U.query&&t.jsx("span",{className:"text-xs text-slate-500 mt-0.5",children:U.name})]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded border ${U.source==="QUOTE"?"bg-purple-50 text-purple-700 border-purple-100":"bg-blue-50 text-blue-700 border-blue-100"}`,children:U.source==="QUOTE"?s("adminMissingParts.source.quote"):s("adminMissingParts.source.search")})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:"font-black text-slate-800 text-lg",children:U.totalRequestsCount||1})}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-1 text-slate-600 font-bold",children:[t.jsx(f0,{size:14})," ",U.uniqueCustomersCount||1]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold border ${Hue[U.status||"NEW"]}`,children:w(U.status||"NEW")})}),t.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",dir:"ltr",children:hs(U.lastRequestedAt||U.createdAt)}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>S(U),className:"text-slate-600 hover:text-brand-600 bg-slate-100 hover:bg-slate-200 p-2 rounded-lg transition-colors flex items-center justify-center gap-1 mx-auto font-bold text-xs",children:[t.jsx(fs,{size:16})," ",s("adminMissingParts.actions.details")]})})]},U.id)),C.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-16 text-center text-slate-400 font-bold",children:s("adminMissingParts.noMatchingMissing")})})]})]})}),E>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx("button",{disabled:v===1,onClick:()=>b(U=>U-1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[s("adminMissingParts.pagination.page")," ",v," ",s("adminMissingParts.pagination.of")," ",E]}),t.jsx("button",{disabled:v===E,onClick:()=>b(U=>U+1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(ws,{size:18})})]}),d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm transition-opacity",onClick:()=>u(null)}),t.jsxs("div",{className:"fixed inset-y-0 left-0 w-full md:w-[500px] bg-slate-50 z-50 shadow-2xl transform transition-transform duration-300 ease-in-out border-r border-slate-200 flex flex-col",children:[t.jsxs("div",{className:"p-6 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm z-10",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-800",children:s("adminMissingParts.panel.missingDetails")}),t.jsxs("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["ID: ",d.id]})]}),t.jsx("button",{onClick:()=>u(null),className:"p-2 bg-slate-100 rounded-full hover:bg-slate-200 text-slate-600",children:t.jsx(St,{size:20})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.panel.requestedItem")}),t.jsx("span",{className:"block text-2xl font-black text-brand-700 font-mono bg-slate-50 p-2 rounded-lg border border-slate-100 text-center",children:d.normalizedPartNumber||d.query})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.panel.suggestedName")}),t.jsx("span",{className:"font-bold text-slate-800",children:d.name||"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:s("adminMissingParts.panel.brand")}),t.jsx("span",{className:"font-bold text-slate-800",children:d.brand||"-"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-blue-600",children:d.totalRequestsCount||1}),t.jsx("p",{className:"text-xs font-bold text-blue-400 uppercase",children:s("adminMissingParts.panel.requestCount")})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-purple-600",children:d.uniqueCustomersCount||1}),t.jsx("p",{className:"text-xs font-bold text-purple-400 uppercase",children:s("adminMissingParts.panel.differentCustomers")})]})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-6 rounded-2xl border border-slate-700 shadow-lg text-white space-y-4",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] flex items-center gap-2 border-b border-slate-700 pb-2",children:[t.jsx(ma,{size:18})," ",s("adminMissingParts.panel.followUp")]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:s("adminMissingParts.panel.updateStatus")}),t.jsx("select",{className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-white font-bold focus:ring-1 focus:ring-[#C8A04F]",value:h.status,onChange:U=>f({...h,status:U.target.value}),children:Object.keys(b1).map(U=>t.jsx("option",{value:U,children:w(U)},U))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-400 mb-2",children:s("adminMissingParts.panel.internalNotes")}),t.jsx("textarea",{rows:3,className:"w-full p-3 bg-slate-800 border border-slate-600 rounded-lg text-sm text-white focus:border-[#C8A04F] focus:outline-none",placeholder:s("adminMissingParts.panel.notesPlaceholder"),value:h.adminNotes,onChange:U=>f({...h,adminNotes:U.target.value})})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsxs("button",{className:"flex-1 bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 rounded-lg border border-white/10 flex items-center justify-center gap-2",onClick:()=>j(s("adminMissingParts.toast.linkImportSoon"),"info"),children:[t.jsx(_ae,{size:14})," ",s("adminMissingParts.actions.linkToImport")]}),t.jsxs("button",{className:"flex-1 bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 rounded-lg border border-white/10 flex items-center justify-center gap-2",onClick:()=>j(s("adminMissingParts.toast.redirectToAddProduct"),"info"),children:[t.jsx(Cu,{size:14})," ",s("adminMissingParts.actions.addToStock")]})]})]}),d.source==="QUOTE"&&t.jsxs("div",{className:"bg-slate-100 p-4 rounded-xl border border-slate-200 text-xs text-slate-500",children:[t.jsx("p",{className:"font-bold mb-1",children:s("adminMissingParts.panel.sourceQuote")}),t.jsxs("p",{className:"font-mono",children:["Ref ID: ",d.quoteRequestId]})]})]}),t.jsxs("div",{className:"p-6 bg-white border-t border-slate-200 shadow-up z-10 flex gap-4",children:[t.jsxs("button",{onClick:D,disabled:x,className:"flex-1 bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 shadow-lg disabled:opacity-50",children:[t.jsx(ds,{size:18})," ",s(x?"adminMissingParts.actions.saving":"adminMissingParts.actions.saveChanges")]}),t.jsx("button",{onClick:()=>u(null),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:s("common.cancel")})]})]})]})]})},zF=({status:e,t:s})=>{const a={ACTIVE:"bg-green-100 text-green-700 border-green-200",SUSPENDED:"bg-yellow-100 text-yellow-700 border-yellow-200",BLOCKED:"bg-red-100 text-red-700 border-red-200",PENDING:"bg-blue-100 text-blue-700 border-blue-200",INACTIVE:"bg-gray-100 text-gray-500 border-gray-200"},r=n=>({ACTIVE:"adminCustomers.status.active",SUSPENDED:"adminCustomers.status.suspended",BLOCKED:"adminCustomers.status.blocked",PENDING:"adminCustomers.status.pending",INACTIVE:"adminCustomers.status.inactive"})[n]||n;return t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${a[e]||a.INACTIVE}`,children:s(r(e))})},Gue=()=>{const[e,s]=T.useState([]),[a,r]=T.useState(!0),[n,i]=T.useState(""),[l,o]=T.useState("ALL"),[d,u]=T.useState("ALL"),[h,f]=T.useState("ALL"),[x,g]=T.useState(!1),[v,b]=T.useState({key:"totalOrdersCount",direction:"desc"}),[y,j]=T.useState(null),[w,A]=T.useState(!1),[O,C]=T.useState(!1),[E,S]=T.useState({companyName:"",phone:"",email:"",city:"",region:"",customerType:"AUTO_PARTS_SHOP",crNumber:"",taxNumber:"",nationalAddress:"",contactPerson:"",priceLevel:"LEVEL_1",status:"ACTIVE",searchPointsTotal:0,branchesCount:1,internalNotes:""}),[D,M]=T.useState([]),[U,I]=T.useState([]),[k,z]=T.useState(""),[_,q]=T.useState(""),[L,Q]=T.useState(1),X=15,{addToast:W}=Dt(),{t:ee}=Jt(),[V,P]=T.useState(0);T.useEffect(()=>{Q(1)},[n,l,d,k,_,h]),T.useEffect(()=>{Y()},[n,l,d,k,_,h,L,v]),T.useEffect(()=>{J()},[]);const Y=async()=>{r(!0);try{const B={search:n||void 0,status:l!=="ALL"?l:void 0,customerType:d!=="ALL"?d:void 0,assignedMarketerId:k||void 0,assignedEmployeeId:_||void 0,activityLevel:h!=="ALL"?h:void 0,page:L,pageSize:X,sortBy:v.key,sortDirection:v.direction},oe=await xe.getAdminCustomers(B);s(oe.items),P(oe.total)}catch{W(ee("adminCustomers.errors.loadFailed"),"error")}finally{r(!1)}},J=async()=>{try{const[B,oe]=await Promise.all([xe.getMarketersForDropdown(),xe.getEmployeesForDropdown()]);M(B),I(oe)}catch(B){console.error("Error loading dropdown data:",B)}},[K,se]=T.useState({total:0,active:0,suspended:0});T.useEffect(()=>{(async()=>{try{const oe=await xe.getCustomerStats();se({total:oe.total,active:oe.active,suspended:oe.suspended+oe.blocked})}catch(oe){console.error("Error loading stats:",oe)}})()},[]),T.useMemo(()=>[...e].sort((B,oe)=>(oe.totalOrdersCount||0)-(B.totalOrdersCount||0)).slice(0,5),[e]);const G=T.useMemo(()=>{let B=0;return l!=="ALL"&&B++,d!=="ALL"&&B++,k&&B++,_&&B++,h!=="ALL"&&B++,B},[l,d,k,_,h]),te=()=>{i(""),o("ALL"),u("ALL"),z(""),q(""),f("ALL"),Q(1)},Z=()=>{S({companyName:"",phone:"",email:"",city:"",region:"",customerType:"AUTO_PARTS_SHOP",crNumber:"",taxNumber:"",nationalAddress:"",contactPerson:"",priceLevel:"LEVEL_1",status:"ACTIVE",searchPointsTotal:0,branchesCount:1,internalNotes:""})},ue=async()=>{if(!E.companyName.trim()){W(ee("adminCustomers.addCustomer.errors.companyNameRequired"),"error");return}if(!E.phone.trim()){W(ee("adminCustomers.addCustomer.errors.phoneRequired"),"error");return}if(!E.city.trim()){W(ee("adminCustomers.addCustomer.errors.cityRequired"),"error");return}C(!0);try{await xe.createCustomerFromAdmin(E),W(ee("adminCustomers.addCustomer.success"),"success"),A(!1),Z(),Y();const B=await xe.getCustomerStats();se({total:B.total,active:B.active,suspended:B.suspended+B.blocked})}catch{W(ee("adminCustomers.addCustomer.errors.failed"),"error")}finally{C(!1)}},re=Math.ceil(V/X),H=B=>{b(oe=>({key:B,direction:oe.key===B&&oe.direction==="desc"?"asc":"desc"}))},pe=B=>{j(B)};return t.jsxs("div",{className:"space-y-6 animate-fade-in relative min-h-screen",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:ee("adminCustomers.stats.totalCustomers")}),t.jsx("p",{className:"text-2xl font-black text-slate-800",children:K.total})]}),t.jsx("div",{className:"p-3 bg-slate-100 rounded-lg text-slate-600",children:t.jsx(Gt,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:ee("adminCustomers.stats.activeCustomers")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:K.active})]}),t.jsx("div",{className:"p-3 bg-green-50 rounded-lg text-green-600",children:t.jsx(f0,{size:20})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:ee("adminCustomers.stats.blockedSuspended")}),t.jsx("p",{className:"text-2xl font-black text-red-600",children:K.suspended})]}),t.jsx("div",{className:"p-3 bg-red-50 rounded-lg text-red-600",children:t.jsx(Nf,{size:20})})]}),t.jsxs("div",{onClick:()=>A(!0),className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white p-4 rounded-xl shadow-md border border-emerald-400 cursor-pointer hover:from-emerald-600 hover:to-emerald-700 transition-all flex flex-col justify-center items-center gap-2","data-testid":"button-add-customer",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-lg",children:t.jsx(sl,{size:24})}),t.jsx("p",{className:"text-sm font-bold",children:ee("adminCustomers.addCustomer.button")})]})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[t.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex gap-4 w-full xl:w-auto",children:[t.jsxs("div",{className:"relative flex-1 xl:w-80",children:[t.jsx(Ft,{className:"absolute right-3 top-2.5 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:ee("adminCustomers.filters.searchPlaceholder"),className:"w-full pr-10 pl-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-brand-500/20 transition-all",value:n,onChange:B=>i(B.target.value),"data-testid":"input-search-customers"})]}),t.jsxs("select",{className:"px-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:outline-none",value:l,onChange:B=>o(B.target.value),"data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:ee("adminCustomers.filters.allStatuses")}),t.jsx("option",{value:"ACTIVE",children:ee("adminCustomers.status.active")}),t.jsx("option",{value:"SUSPENDED",children:ee("adminCustomers.status.suspended")}),t.jsx("option",{value:"BLOCKED",children:ee("adminCustomers.status.blocked")}),t.jsx("option",{value:"PENDING",children:ee("adminCustomers.status.pending")})]}),t.jsxs("button",{onClick:()=>g(!x),className:`px-4 py-2 border rounded-lg text-sm font-bold flex items-center gap-2 transition-colors ${x?"bg-brand-600 text-white border-brand-600":"bg-slate-50 text-slate-700 border-slate-200 hover:bg-slate-100"}`,"data-testid":"button-toggle-advanced-filters",children:[t.jsx(tc,{size:16}),ee("adminCustomers.filters.advanced"),G>0&&t.jsx("span",{className:"bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-bold",children:G}),x?t.jsx(Wr,{size:14}):t.jsx(kr,{size:14})]})]}),t.jsxs("div",{className:"flex gap-2 w-full xl:w-auto overflow-x-auto",children:[t.jsx("button",{onClick:()=>b({key:"totalOrdersCount",direction:"desc"}),className:`px-3 py-1.5 border rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${v.key==="totalOrdersCount"?"bg-brand-50 border-brand-200 text-brand-700":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:ee("adminCustomers.filters.mostOrders")}),t.jsx("button",{onClick:()=>b({key:"totalSearchesCount",direction:"desc"}),className:`px-3 py-1.5 border rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${v.key==="totalSearchesCount"?"bg-brand-50 border-brand-200 text-brand-700":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:ee("adminCustomers.filters.mostSearches")}),t.jsx("button",{onClick:()=>b({key:"lastLoginAt",direction:"desc"}),className:`px-3 py-1.5 border rounded-lg text-xs font-bold whitespace-nowrap transition-colors ${v.key==="lastLoginAt"?"bg-brand-50 border-brand-200 text-brand-700":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:ee("adminCustomers.filters.lastActive")})]})]}),x&&t.jsxs("div",{className:"border-t border-slate-100 pt-4 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.customerType")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:d,onChange:B=>u(B.target.value),"data-testid":"select-customer-type-filter",children:[t.jsx("option",{value:"ALL",children:ee("adminCustomers.filters.allTypes")}),t.jsx("option",{value:"AUTO_PARTS_SHOP",children:"  "}),t.jsx("option",{value:"MAINTENANCE_CENTER",children:" "}),t.jsx("option",{value:"AUTO_SHOWROOM",children:" "}),t.jsx("option",{value:"CAR_RENTAL",children:" "}),t.jsx("option",{value:"GOVERNMENT",children:" "}),t.jsx("option",{value:"OTHER",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.activityLevel")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:h,onChange:B=>f(B.target.value),"data-testid":"select-activity-level-filter",children:[t.jsx("option",{value:"ALL",children:ee("adminCustomers.filters.allActivity")}),t.jsx("option",{value:"ACTIVE_TODAY",children:ee("adminCustomers.filters.activeToday")}),t.jsx("option",{value:"ACTIVE_WEEK",children:ee("adminCustomers.filters.activeWeek")}),t.jsx("option",{value:"INACTIVE_30",children:ee("adminCustomers.filters.inactive30")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.marketer")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:k,onChange:B=>z(B.target.value),"data-testid":"select-marketer-filter",children:[t.jsx("option",{value:"",children:ee("adminCustomers.filters.allMarketers")}),D.map(B=>t.jsx("option",{value:B.id,children:B.name},B.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:ee("adminCustomers.filters.employee")}),t.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none",value:_,onChange:B=>q(B.target.value),"data-testid":"select-employee-filter",children:[t.jsx("option",{value:"",children:ee("adminCustomers.filters.allEmployees")}),U.map(B=>t.jsx("option",{value:B.id,children:B.name},B.id))]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:te,className:"w-full px-4 py-2 bg-red-50 text-red-600 border border-red-200 rounded-lg text-sm font-bold hover:bg-red-100 transition-colors flex items-center justify-center gap-2","data-testid":"button-clear-filters",children:[t.jsx(St,{size:14}),ee("adminCustomers.filters.clearAll")]})})]}),t.jsx("div",{className:"mt-4 text-sm text-slate-500",children:ee("adminCustomers.filters.resultsCount",{count:V})})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm min-h-[500px]",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4 cursor-pointer",onClick:()=>H("companyName"),children:ee("adminCustomers.table.businessName")}),t.jsx("th",{className:"p-4 cursor-pointer hidden md:table-cell",onClick:()=>H("city"),children:ee("adminCustomers.table.city")}),t.jsx("th",{className:"p-4 cursor-pointer hidden lg:table-cell",onClick:()=>H("customerType"),children:ee("adminCustomers.table.activity")}),t.jsx("th",{className:"p-4 text-center cursor-pointer",onClick:()=>H("status"),children:ee("adminCustomers.table.status")}),t.jsx("th",{className:"p-4 text-center cursor-pointer",onClick:()=>H("totalOrdersCount"),children:ee("adminCustomers.table.orders")}),t.jsx("th",{className:"p-4 text-center cursor-pointer hidden md:table-cell",onClick:()=>H("totalSearchesCount"),children:ee("adminCustomers.table.searches")}),t.jsx("th",{className:"p-4 text-center cursor-pointer hidden lg:table-cell",onClick:()=>H("lastLoginAt"),children:ee("adminCustomers.table.lastLogin")}),t.jsx("th",{className:"p-4 text-center",children:ee("adminCustomers.table.action")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:a?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"p-10 text-center",children:ee("common.loading")})}):e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"p-10 text-center text-slate-400",children:ee("adminCustomers.table.noMatching")})}):e.map(B=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-bold text-slate-800 text-base",children:B.companyName}),B.riskyLoginFlag&&t.jsxs("span",{className:"text-[10px] text-red-500 font-bold flex items-center gap-1 mt-1",children:[t.jsx(Gs,{size:10})," ",ee("adminCustomers.table.suspiciousBehavior")]})]})}),t.jsx("td",{className:"p-4 text-slate-600 hidden md:table-cell",children:B.city}),t.jsx("td",{className:"p-4 text-slate-600 hidden lg:table-cell text-xs font-bold bg-slate-50 px-2 py-1 rounded w-fit h-fit",children:B.customerType||ee("common.notSpecified")}),t.jsx("td",{className:"p-4 text-center",children:t.jsx(zF,{status:B.status||"ACTIVE",t:ee})}),t.jsx("td",{className:"p-4 text-center font-bold text-brand-700",children:B.totalOrdersCount}),t.jsx("td",{className:"p-4 text-center hidden md:table-cell",children:B.totalSearchesCount}),t.jsx("td",{className:"p-4 text-center hidden lg:table-cell text-xs text-slate-500 font-mono",dir:"ltr",children:hs(B.lastLoginAt)}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("button",{onClick:()=>pe(B),className:"bg-slate-100 hover:bg-[#0B1B3A] hover:text-white text-slate-600 p-2 rounded-lg transition-colors text-xs font-bold flex items-center justify-center gap-1 mx-auto",children:[t.jsx(fs,{size:16})," ",t.jsx("span",{className:"hidden xl:inline",children:""})]})})]},B.userId))})]})}),re>1&&t.jsxs("div",{className:"flex justify-center items-center gap-4",children:[t.jsx("button",{disabled:L===1,onClick:()=>Q(B=>B-1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"text-sm font-bold text-slate-600",children:[" ",L,"  ",re]}),t.jsx("button",{disabled:L===re,onClick:()=>Q(B=>B+1),className:"p-2 rounded-lg border bg-white disabled:opacity-50 hover:bg-slate-50",children:t.jsx(ws,{size:18})})]}),y&&t.jsx(Kue,{customer:y,onClose:()=>j(null),onUpdate:()=>{Y(),j(null)}}),w&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-fade-in",children:[t.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 p-5 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:t.jsx(sl,{className:"text-white",size:24})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:ee("adminCustomers.addCustomer.title")}),t.jsx("p",{className:"text-emerald-100 text-sm",children:ee("adminCustomers.addCustomer.subtitle")})]})]}),t.jsx("button",{onClick:()=>{A(!1),Z()},className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-add-customer-modal",children:t.jsx(St,{className:"text-white",size:20})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Xs,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.companyName")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:E.companyName,onChange:B=>S({...E,companyName:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:ee("adminCustomers.addCustomer.placeholders.companyName"),"data-testid":"input-new-customer-company-name"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(vn,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.phone")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"tel",value:E.phone,onChange:B=>S({...E,phone:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"05xxxxxxxx",dir:"ltr","data-testid":"input-new-customer-phone"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Ll,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.email")]}),t.jsx("input",{type:"email",value:E.email,onChange:B=>S({...E,email:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"example@email.com",dir:"ltr","data-testid":"input-new-customer-email"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Go,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.city")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:E.city,onChange:B=>S({...E,city:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-city",children:[t.jsx("option",{value:"",children:ee("adminCustomers.addCustomer.placeholders.selectCity")}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(fae,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.region")]}),t.jsxs("select",{value:E.region,onChange:B=>S({...E,region:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-region",children:[t.jsx("option",{value:"",children:ee("adminCustomers.addCustomer.placeholders.selectRegion")}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "}),t.jsx("option",{value:" ",children:" "})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Mu,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.customerType")," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:E.customerType,onChange:B=>S({...E,customerType:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-type",children:[t.jsx("option",{value:"AUTO_PARTS_SHOP",children:ee("adminCustomers.addCustomer.types.autoPartsShop")}),t.jsx("option",{value:"MAINTENANCE_CENTER",children:ee("adminCustomers.addCustomer.types.maintenanceCenter")}),t.jsx("option",{value:"AUTO_SHOWROOM",children:ee("adminCustomers.addCustomer.types.autoShowroom")}),t.jsx("option",{value:"CAR_RENTAL",children:ee("adminCustomers.addCustomer.types.carRental")}),t.jsx("option",{value:"GOVERNMENT",children:ee("adminCustomers.addCustomer.types.government")}),t.jsx("option",{value:"OTHER",children:ee("adminCustomers.addCustomer.types.other")})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Do,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.priceLevel")]}),t.jsxs("select",{value:E.priceLevel,onChange:B=>S({...E,priceLevel:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all","data-testid":"select-new-customer-price-level",children:[t.jsx("option",{value:"LEVEL_1",children:ee("adminCustomers.addCustomer.priceLevels.level1")}),t.jsx("option",{value:"LEVEL_2",children:ee("adminCustomers.addCustomer.priceLevels.level2")}),t.jsx("option",{value:"LEVEL_3",children:ee("adminCustomers.addCustomer.priceLevels.level3")}),t.jsx("option",{value:"SPECIAL",children:ee("adminCustomers.addCustomer.priceLevels.special")})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(fF,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.crNumber")]}),t.jsx("input",{type:"text",value:E.crNumber,onChange:B=>S({...E,crNumber:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"1010xxxxxx",dir:"ltr","data-testid":"input-new-customer-cr-number"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Lt,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.taxNumber")]}),t.jsx("input",{type:"text",value:E.taxNumber,onChange:B=>S({...E,taxNumber:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"3xxxxxxxxxxxxxxx",dir:"ltr","data-testid":"input-new-customer-tax-number"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Go,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.nationalAddress")]}),t.jsx("input",{type:"text",value:E.nationalAddress,onChange:B=>S({...E,nationalAddress:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:ee("adminCustomers.addCustomer.placeholders.nationalAddress"),"data-testid":"input-new-customer-national-address"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(bn,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.contactPerson")]}),t.jsx("input",{type:"text",value:E.contactPerson,onChange:B=>S({...E,contactPerson:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:ee("adminCustomers.addCustomer.placeholders.contactPerson"),"data-testid":"input-new-customer-contact-person"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Ft,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.searchPoints")]}),t.jsx("input",{type:"number",value:E.searchPointsTotal,onChange:B=>S({...E,searchPointsTotal:parseInt(B.target.value)||0}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"0",min:"0",dir:"ltr","data-testid":"input-new-customer-search-points"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Xs,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.branchesCount")]}),t.jsx("input",{type:"number",value:E.branchesCount,onChange:B=>S({...E,branchesCount:parseInt(B.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all",placeholder:"1",min:"1",dir:"ltr","data-testid":"input-new-customer-branches-count"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:ee("adminCustomers.addCustomer.fields.status")}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>S({...E,status:"ACTIVE"}),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${E.status==="ACTIVE"?"bg-green-100 text-green-700 border-2 border-green-400":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,"data-testid":"button-status-active",children:[t.jsx(Ut,{size:16,className:"inline ml-2"}),ee("adminCustomers.status.active")]}),t.jsxs("button",{type:"button",onClick:()=>S({...E,status:"PENDING"}),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${E.status==="PENDING"?"bg-blue-100 text-blue-700 border-2 border-blue-400":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,"data-testid":"button-status-pending",children:[t.jsx(os,{size:16,className:"inline ml-2"}),ee("adminCustomers.status.pending")]}),t.jsxs("button",{type:"button",onClick:()=>S({...E,status:"SUSPENDED"}),className:`flex-1 py-3 rounded-xl font-bold text-sm transition-all ${E.status==="SUSPENDED"?"bg-yellow-100 text-yellow-700 border-2 border-yellow-400":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,"data-testid":"button-status-suspended",children:[t.jsx(Zs,{size:16,className:"inline ml-2"}),ee("adminCustomers.status.suspended")]})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[t.jsx(Hj,{size:14,className:"inline ml-1"}),ee("adminCustomers.addCustomer.fields.internalNotes")]}),t.jsx("textarea",{value:E.internalNotes,onChange:B=>S({...E,internalNotes:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all resize-none",placeholder:ee("adminCustomers.addCustomer.placeholders.internalNotes"),rows:3,"data-testid":"textarea-new-customer-notes"})]})]})}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-between items-center gap-4",children:[t.jsx("button",{onClick:()=>{A(!1),Z()},className:"px-6 py-3 bg-white border border-slate-300 text-slate-700 rounded-xl font-bold hover:bg-slate-100 transition-colors","data-testid":"button-cancel-add-customer",children:ee("common.cancel")}),t.jsx("button",{onClick:ue,disabled:O,className:"px-8 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2","data-testid":"button-submit-add-customer",children:O?t.jsxs(t.Fragment,{children:[t.jsx(Ko,{size:18,className:"animate-spin"}),ee("adminCustomers.addCustomer.saving")]}):t.jsxs(t.Fragment,{children:[t.jsx(ds,{size:18}),ee("adminCustomers.addCustomer.submit")]})})]})]})})]})},Wue=({status:e})=>{const s={PENDING:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-blue-100 text-blue-700 border-blue-200",SHIPPED:"bg-purple-100 text-purple-700 border-purple-200",DELIVERED:"bg-green-100 text-green-700 border-green-200",CANCELLED:"bg-red-100 text-red-700 border-red-200"},a={PENDING:" ",APPROVED:"",SHIPPED:" ",DELIVERED:" ",CANCELLED:""};return t.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold border ${s[e]||"bg-gray-100 text-gray-600 border-gray-200"}`,children:a[e]||e})},Que=({status:e})=>{const s={NEW:"bg-blue-100 text-blue-700 border-blue-200",UNDER_REVIEW:"bg-yellow-100 text-yellow-700 border-yellow-200",APPROVED:"bg-green-100 text-green-700 border-green-200",PARTIALLY_APPROVED:"bg-orange-100 text-orange-700 border-orange-200",REJECTED:"bg-red-100 text-red-700 border-red-200"},a={NEW:"",UNDER_REVIEW:" ",APPROVED:"",PARTIALLY_APPROVED:" ",REJECTED:""};return t.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold border ${s[e]||"bg-gray-100 text-gray-600 border-gray-200"}`,children:a[e]||e})},Kue=({customer:e,onClose:s,onUpdate:a})=>{var z,_,q;const[r,n]=T.useState("OVERVIEW"),{addToast:i}=Dt(),{t:l}=Jt(),[o,d]=T.useState(e.status||"ACTIVE"),[u,h]=T.useState(""),[f,x]=T.useState(!1),[g,v]=T.useState([]),[b,y]=T.useState([]),[j,w]=T.useState([]),[A,O]=T.useState([]),[C,E]=T.useState(!1),[S,D]=T.useState(!1);T.useEffect(()=>{(async()=>{const Q=await xe.getCustomerActivityLogs(e.userId);v(Q);const X=await xe.getEmployees(e.userId);y(X)})()},[e.userId]),T.useEffect(()=>{r==="ORDERS"&&j.length===0&&!C&&(E(!0),xe.getAllOrders().then(L=>{const Q=L.filter(X=>X.userId===e.userId||X.businessId===e.userId);w(Q.sort((X,W)=>new Date(W.date).getTime()-new Date(X.date).getTime())),E(!1)}))},[r,e.userId,j.length,C]),T.useEffect(()=>{r==="QUOTES"&&A.length===0&&!S&&(D(!0),xe.getAllQuoteRequests().then(L=>{const Q=L.filter(X=>X.userId===e.userId);O(Q.sort((X,W)=>new Date(W.date).getTime()-new Date(X.date).getTime())),D(!1)}))},[r,e.userId,A.length,S]);const M=async()=>{x(!0);try{await xe.updateCustomerStatus(e.userId,o,u),i("   ","success"),a()}catch{i(" ","error")}finally{x(!1)}},U=async()=>{const L=prompt("   :","50");L&&parseInt(L)>0&&(await xe.addCustomerSearchPoints(e.userId,parseInt(L)),i(`  ${L}  `,"success"),a())},I=async()=>{const L=e.searchPointsRemaining||0,Q=prompt(` : ${L} 

   :`,"10");if(Q&&parseInt(Q)>0){const X=parseInt(Q);if(X>L){i(`       (${L} )`,"error");return}await xe.deductCustomerSearchPoints(e.userId,X)?(i(`  ${Q}  `,"success"),a()):i("    ","error")}},k=async(L,Q)=>{const X=Q==="ACTIVE"?"SUSPENDED":"ACTIVE";await xe.updateStaffStatus(L,X),i("   ","success");const W=await xe.getEmployees(e.userId);y(W)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm transition-opacity",onClick:s}),t.jsxs("div",{className:"fixed inset-y-0 left-0 w-full md:w-[800px] bg-slate-50 z-50 shadow-2xl transform transition-transform duration-300 ease-in-out border-r border-slate-200 flex flex-col",children:[t.jsxs("div",{className:"bg-white border-b border-slate-200 flex flex-col shadow-sm z-10",children:[t.jsxs("div",{className:"p-6 flex justify-between items-start pb-4",children:[t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsx("div",{className:"w-16 h-16 bg-[#0B1B3A] rounded-xl flex items-center justify-center text-white text-2xl font-bold uppercase shadow-lg",children:e.companyName.substring(0,2)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:e.companyName}),t.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-slate-500",children:[t.jsx(Go,{size:14})," ",e.city,t.jsx("span",{className:"mx-1",children:""}),t.jsx(vn,{size:14})," ",e.phone]}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx(zF,{status:e.status||"ACTIVE",t:l}),t.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-xs font-bold border border-slate-200",children:e.priceLevel})]})]})]}),t.jsx("button",{onClick:s,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-600 transition-colors",children:t.jsx(St,{size:20})})]}),t.jsx("div",{className:"flex px-6 gap-6 overflow-x-auto",children:[{id:"OVERVIEW",label:l("adminCustomers.detail.tabs.overview"),icon:t.jsx(Gr,{size:16})},{id:"ORDERS",label:l("adminCustomers.detail.tabs.orders"),icon:t.jsx(Lt,{size:16})},{id:"QUOTES",label:l("adminCustomers.detail.tabs.quotes"),icon:t.jsx(zn,{size:16})},{id:"STAFF",label:`${l("adminCustomers.detail.tabs.staff")} (${b.length})`,icon:t.jsx(Gt,{size:16})},{id:"SECURITY",label:l("adminCustomers.detail.tabs.security"),icon:t.jsx(h1,{size:16})},{id:"NOTES",label:l("adminCustomers.detail.tabs.notes"),icon:t.jsx(Or,{size:16})}].map(L=>t.jsxs("button",{onClick:()=>n(L.id),className:`pb-3 text-sm font-bold flex items-center gap-2 border-b-2 transition-colors whitespace-nowrap ${r===L.id?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-800"}`,children:[L.icon," ",L.label]},L.id))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[r==="OVERVIEW"&&t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"bg-[#0B1B3A] p-6 rounded-2xl text-white shadow-lg",children:[t.jsxs("h3",{className:"font-bold text-[#C8A04F] mb-4 flex items-center gap-2",children:[t.jsx(Nf,{size:18})," ",l("adminCustomers.detail.accountManagement")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:l("adminCustomers.detail.changeStatus")}),t.jsxs("select",{className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm text-white focus:border-[#C8A04F]",value:o,onChange:L=>d(L.target.value),children:[t.jsx("option",{value:"ACTIVE",children:l("adminCustomers.detail.statusActive")}),t.jsx("option",{value:"SUSPENDED",children:l("adminCustomers.detail.statusSuspended")}),t.jsx("option",{value:"BLOCKED",children:l("adminCustomers.detail.statusBlocked")})]})]}),o==="SUSPENDED"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:l("adminCustomers.detail.suspendUntil")}),t.jsx("input",{type:"date",className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm text-white",value:u,onChange:L=>h(L.target.value)})]})]}),t.jsx("button",{onClick:M,disabled:f,className:"mt-4 w-full bg-[#C8A04F] text-[#0B1B3A] font-bold py-2 rounded-lg hover:bg-[#b08d45] transition-colors",children:l(f?"adminCustomers.detail.saving":"adminCustomers.detail.saveChanges")})]}),t.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-xl ${e.priceVisibility==="VISIBLE"?"bg-emerald-100":"bg-amber-100"}`,children:e.priceVisibility==="VISIBLE"?t.jsx(fs,{size:20,className:"text-emerald-600"}):t.jsx(gr,{size:20,className:"text-amber-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-slate-800",children:l("adminCustomers.detail.priceDisplayType")}),t.jsx("p",{className:"text-xs text-slate-500",children:e.priceVisibility==="VISIBLE"?l("adminCustomers.detail.pricesVisible"):l("adminCustomers.detail.pricesHidden")})]})]}),t.jsxs("select",{className:"bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 text-sm font-bold",value:e.priceVisibility||"HIDDEN",onChange:async L=>{const Q=L.target.value;await xe.updateCustomerPriceVisibility(e.userId,Q),i(`${l("adminCustomers.detail.priceDisplayChanged")} ${l(Q==="VISIBLE"?"adminCustomers.detail.visible":"adminCustomers.detail.hidden")}`,"success"),a()},"data-testid":"select-price-visibility",children:[t.jsx("option",{value:"VISIBLE",children:l("adminCustomers.detail.visibleNoPoints")}),t.jsx("option",{value:"HIDDEN",children:l("adminCustomers.detail.hiddenWithPoints")})]})]})}),e.priceVisibility!=="VISIBLE"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Ft,{size:18,className:"text-blue-500"})," ",l("adminCustomers.detail.searchWallet")]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:U,className:"text-xs bg-green-50 text-green-600 px-3 py-1.5 rounded-lg font-bold hover:bg-green-100 transition-colors flex items-center gap-1","data-testid":"button-add-points",children:[t.jsx(Pt,{size:14})," ",l("adminCustomers.detail.addBalance")]}),t.jsxs("button",{onClick:I,className:"text-xs bg-red-50 text-red-600 px-3 py-1.5 rounded-lg font-bold hover:bg-red-100 transition-colors flex items-center gap-1","data-testid":"button-deduct-points",children:[t.jsx(lE,{size:14})," ",l("adminCustomers.detail.deductBalance")]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:l("adminCustomers.detail.totalBalance")}),t.jsx("p",{className:"text-xl font-black text-slate-800",children:e.searchPointsTotal||0})]}),t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:l("adminCustomers.detail.used")}),t.jsx("p",{className:"text-xl font-black text-slate-800",children:(e.searchPointsTotal||0)-(e.searchPointsRemaining||0)})]}),t.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl shadow-sm",children:[t.jsx("p",{className:"text-xs text-blue-500 font-bold uppercase",children:l("adminCustomers.detail.remaining")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:e.searchPointsRemaining||0})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:l("adminCustomers.detail.joinDate")}),t.jsx("p",{className:"font-mono font-bold text-slate-700",children:"2023-01-15"})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:l("adminCustomers.detail.lastLogin")}),t.jsx("p",{className:"font-mono font-bold text-slate-700",dir:"ltr",children:hs(e.lastLoginAt)})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2 mb-4",children:[t.jsx(Lt,{size:18,className:"text-amber-500"})," ",l("adminCustomers.detail.customerDocs")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.crNumber?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:t.jsx(Lt,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:l("adminCustomers.detail.docs.commercialReg")}),t.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.crNumber})]}),(z=e.documents)!=null&&z.find(L=>L.type==="CR_CERTIFICATE")?t.jsx("button",{onClick:()=>{var Q;const L=(Q=e.documents)==null?void 0:Q.find(X=>X.type==="CR_CERTIFICATE");L!=null&&L.base64Data&&window.open(L.base64Data,"_blank")},className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100","data-testid":"view-cr-doc",children:t.jsx(Ml,{size:16})}):t.jsx("span",{className:"text-xs text-slate-400",children:l("adminCustomers.detail.docs.notAttached")})]}):t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 text-center",children:[t.jsx("p",{className:"text-sm text-slate-400",children:l("adminCustomers.detail.docs.commercialReg")}),t.jsx("p",{className:"text-xs text-slate-300",children:l("adminCustomers.detail.docs.notAvailable")})]}),e.taxNumber?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-green-600",children:t.jsx(Lt,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:l("adminCustomers.detail.docs.taxNumber")}),t.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.taxNumber})]}),(_=e.documents)!=null&&_.find(L=>L.type==="VAT_CERTIFICATE")?t.jsx("button",{onClick:()=>{var Q;const L=(Q=e.documents)==null?void 0:Q.find(X=>X.type==="VAT_CERTIFICATE");L!=null&&L.base64Data&&window.open(L.base64Data,"_blank")},className:"p-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100","data-testid":"view-vat-doc",children:t.jsx(Ml,{size:16})}):t.jsx("span",{className:"text-xs text-slate-400",children:l("adminCustomers.detail.docs.notAttached")})]}):t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 text-center",children:[t.jsx("p",{className:"text-sm text-slate-400",children:l("adminCustomers.detail.docs.taxNumber")}),t.jsx("p",{className:"text-xs text-slate-300",children:l("adminCustomers.detail.docs.notAvailable")})]}),e.nationalAddress?t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center text-amber-600",children:t.jsx(Go,{size:20})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:l("adminCustomers.detail.docs.nationalAddress")}),t.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.nationalAddress})]}),(q=e.documents)!=null&&q.find(L=>L.type==="NATIONAL_ADDRESS")?t.jsx("button",{onClick:()=>{var Q;const L=(Q=e.documents)==null?void 0:Q.find(X=>X.type==="NATIONAL_ADDRESS");L!=null&&L.base64Data&&window.open(L.base64Data,"_blank")},className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100","data-testid":"view-address-doc",children:t.jsx(Ml,{size:16})}):t.jsx("span",{className:"text-xs text-slate-400",children:l("adminCustomers.detail.docs.notAttached")})]}):t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 text-center",children:[t.jsx("p",{className:"text-sm text-slate-400",children:l("adminCustomers.detail.docs.nationalAddress")}),t.jsx("p",{className:"text-xs text-slate-300",children:l("adminCustomers.detail.docs.notAvailable")})]})]})]})]}),r==="STAFF"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("h3",{className:"font-bold text-slate-800",children:[l("adminCustomers.detail.staff.staffMembers")," (",b.length,")"]}),t.jsxs("p",{className:"text-xs text-slate-500",children:[l("adminCustomers.detail.staff.maxLimit"),": ",e.staffLimit]})]}),b.map(L=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 font-bold",children:L.name[0]}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:[L.name," ",L.role==="CUSTOMER_OWNER"&&t.jsx("span",{className:"bg-amber-100 text-amber-700 text-[10px] px-1.5 rounded ml-1",children:l("adminCustomers.detail.staff.owner")})]}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:L.phone||L.clientId})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${L.isActive?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:L.isActive?l("adminCustomers.detail.staff.active"):l("adminCustomers.detail.staff.suspended")}),t.jsx("button",{onClick:()=>k(L.id,L.status||"ACTIVE"),className:"text-xs border px-3 py-1.5 rounded hover:bg-slate-50",children:L.isActive?l("adminCustomers.detail.staff.suspendBtn"):l("adminCustomers.detail.staff.activateBtn")})]})]},L.id)),b.length===0&&t.jsx("p",{className:"text-center text-slate-400 py-8",children:l("adminCustomers.detail.noStaff")})]}),r==="SECURITY"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm mb-6",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(wa,{size:18})," ",l("adminCustomers.detail.security.securityIndicators")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"flex justify-between p-3 bg-slate-50 rounded-lg",children:[t.jsx("span",{children:l("adminCustomers.detail.security.failedLoginAttempts")}),t.jsx("span",{className:`font-bold ${e.failedLoginAttempts>3?"text-red-600":"text-slate-800"}`,children:e.failedLoginAttempts||0})]}),t.jsxs("div",{className:"flex justify-between p-3 bg-slate-50 rounded-lg",children:[t.jsx("span",{children:l("adminCustomers.detail.security.suspiciousBehavior")}),t.jsx("span",{className:`font-bold ${e.riskyLoginFlag?"text-red-600":"text-green-600"}`,children:e.riskyLoginFlag?l("adminCustomers.detail.security.yes"):l("adminCustomers.detail.security.no")})]})]}),t.jsx("button",{onClick:()=>xe.resetFailedLogin(e.userId).then(()=>{i(l("adminCustomers.detail.security.counterReset"),"success"),a()}),className:"mt-4 w-full border border-slate-300 text-slate-600 py-2 rounded-lg text-sm hover:bg-slate-50",children:l("adminCustomers.detail.security.resetCounter")})]}),t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm mb-6",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(h1,{size:18})," ",l("adminCustomers.detail.security.passwordReset")]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:l("adminCustomers.detail.security.passwordResetDesc")}),t.jsxs("button",{onClick:async()=>{const L=prompt(l("adminCustomers.detail.security.enterNewPassword"),"");if(L&&L.length>=4)try{const Q=JSON.parse(localStorage.getItem("sini_car_current_user")||"{}");if(!Q.id){i(l("adminCustomers.detail.security.adminNotFound"),"error");return}const X=await xe.adminResetPassword(Q.id,e.userId,L);X.success?i(X.message,"success"):i(X.message,"error")}catch{i(l("adminCustomers.detail.security.passwordResetError"),"error")}else L&&i(l("adminCustomers.detail.security.passwordMinLength"),"error")},className:"w-full bg-amber-500 text-white font-bold py-2 rounded-lg text-sm hover:bg-amber-600 flex items-center justify-center gap-2","data-testid":"button-admin-reset-password",children:[t.jsx(h1,{size:16}),l("adminCustomers.detail.security.resetPasswordBtn")]})]}),t.jsx("h3",{className:"font-bold text-slate-800 mb-2 text-sm",children:l("adminCustomers.detail.security.recentLoginHistory")}),t.jsxs("div",{className:"space-y-2",children:[g.filter(L=>L.eventType==="LOGIN"||L.eventType==="FAILED_LOGIN"||L.eventType==="PASSWORD_CHANGED"||L.eventType==="PASSWORD_RESET").slice(0,5).map(L=>t.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border border-slate-100 rounded-lg text-xs",children:[t.jsx("span",{className:`font-bold ${L.eventType==="LOGIN"?"text-green-600":L.eventType==="FAILED_LOGIN"?"text-red-600":L.eventType==="PASSWORD_CHANGED"?"text-blue-600":L.eventType==="PASSWORD_RESET"?"text-amber-600":"text-slate-600"}`,children:L.eventType==="LOGIN"?l("adminCustomers.detail.security.successfulLogin"):L.eventType==="FAILED_LOGIN"?l("adminCustomers.detail.security.failedLogin"):L.eventType==="PASSWORD_CHANGED"?l("adminCustomers.detail.security.passwordChanged"):L.eventType==="PASSWORD_RESET"?l("adminCustomers.detail.security.passwordResetAdmin"):L.eventType}),t.jsx("span",{className:"text-slate-500 font-mono",dir:"ltr",children:hs(L.createdAt)})]},L.id)),g.length===0&&t.jsx("p",{className:"text-center text-slate-400 text-xs",children:l("adminCustomers.detail.security.noLogsAvailable")})]})]}),r==="NOTES"&&t.jsx(Jue,{customerId:e.userId,customerName:e.companyName}),r==="ORDERS"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Xt,{size:18,className:"text-blue-500"})," ",l("adminCustomers.detail.orders.customerOrders")," (",j.length,")"]}),t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.orders.completed"),": ",j.filter(L=>L.status==="DELIVERED").length]}),t.jsxs("span",{className:"bg-yellow-50 text-yellow-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.orders.ongoing"),": ",j.filter(L=>["PENDING","APPROVED","SHIPPED"].includes(L.status)).length]})]})]}),C?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(Ko,{size:24,className:"mx-auto mb-3 animate-spin opacity-50"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.orders.loadingOrders")})]}):j.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(Xt,{size:40,className:"mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.orders.noOrders")})]}):t.jsxs("div",{className:"space-y-3",children:[j.slice(0,10).map(L=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600",children:t.jsx(Xt,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:["#",L.id]}),t.jsx("p",{className:"text-xs text-slate-500",children:L.createdByName||l("adminCustomers.detail.orders.unspecified")})]})]}),t.jsx(Wue,{status:L.status})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.orders.products")}),t.jsxs("p",{className:"font-bold text-slate-700",children:[L.items.length," ",l("adminCustomers.detail.orders.item")]})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.orders.total")}),t.jsxs("p",{className:"font-bold text-green-700",children:[L.totalAmount.toLocaleString()," ",l("adminCustomers.detail.orders.currency")]})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.orders.date")}),t.jsx("p",{className:"font-bold text-slate-700 font-mono",dir:"ltr",children:Jo(L.date)})]})]})]},L.id)),j.length>10&&t.jsx("p",{className:"text-center text-slate-400 text-xs py-2",children:l("adminCustomers.detail.orders.showingOf",{shown:10,total:j.length})})]})]}),r==="QUOTES"&&t.jsxs("div",{className:"animate-fade-in space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(vp,{size:18,className:"text-purple-500"})," ",l("adminCustomers.detail.quotes.pricingRequests")," (",A.length,")"]}),t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.quotes.approved"),": ",A.filter(L=>L.status==="APPROVED").length]}),t.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-lg font-bold",children:[l("adminCustomers.detail.quotes.new"),": ",A.filter(L=>L.status==="NEW").length]})]})]}),S?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(Ko,{size:24,className:"mx-auto mb-3 animate-spin opacity-50"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.quotes.loadingQuotes")})]}):A.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(vp,{size:40,className:"mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-sm",children:l("adminCustomers.detail.quotes.noQuotes")})]}):t.jsxs("div",{className:"space-y-3",children:[A.slice(0,10).map(L=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center text-purple-600",children:t.jsx(vp,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800 text-sm",children:["#",L.id]}),t.jsx("p",{className:"text-xs text-slate-500",children:L.priceType||l("adminCustomers.detail.quotes.unspecified")})]})]}),t.jsx(Que,{status:L.status})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.quotes.items")}),t.jsxs("p",{className:"font-bold text-slate-700",children:[L.items.length," ",l("adminCustomers.detail.quotes.item")]})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.quotes.total")}),t.jsx("p",{className:"font-bold text-green-700",children:L.totalQuotedAmount?`${L.totalQuotedAmount.toLocaleString()} ${l("adminCustomers.detail.quotes.currency")}`:l("adminCustomers.detail.quotes.pendingPricing")})]}),t.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg",children:[t.jsx("p",{className:"text-slate-400 mb-0.5",children:l("adminCustomers.detail.quotes.date")}),t.jsx("p",{className:"font-bold text-slate-700 font-mono",dir:"ltr",children:Jo(L.date)})]})]}),L.resultReady&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 flex justify-between items-center",children:[t.jsxs("div",{className:"flex gap-2 text-[10px]",children:[t.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded",children:[l("adminCustomers.detail.quotes.approved"),": ",L.approvedItemsCount||0]}),t.jsxs("span",{className:"bg-red-50 text-red-700 px-2 py-0.5 rounded",children:[l("adminCustomers.detail.quotes.missing"),": ",L.missingItemsCount||0]})]}),t.jsxs("span",{className:"text-[10px] text-slate-400",children:[l("adminCustomers.detail.quotes.reviewedBy"),": ",L.adminReviewedBy||l("adminCustomers.detail.quotes.unspecified")]})]})]},L.id)),A.length>10&&t.jsx("p",{className:"text-center text-slate-400 text-xs py-2",children:l("adminCustomers.detail.quotes.showingOf",{shown:10,total:A.length})})]})]})]})]})]})},Jue=({customerId:e,customerName:s})=>{const[a,r]=T.useState([]),[n,i]=T.useState(""),[l,o]=T.useState(!0),[d,u]=T.useState(!1),{addToast:h}=Dt(),{t:f}=Jt();T.useEffect(()=>{x()},[e]);const x=async()=>{o(!0);try{const v=await xe.getCustomerNotes(e,1,50);r(v.notes)}catch(v){console.error("Error loading notes:",v)}finally{o(!1)}},g=async()=>{if(!n.trim()){h(f("adminCustomers.detail.notes.emptyError"),"error");return}u(!0);try{await xe.addCustomerNote(e,n,"super-admin","System Admin"),h(f("adminCustomers.detail.notes.addedSuccess"),"success"),i(""),x()}catch{h(f("adminCustomers.detail.notes.addError"),"error")}finally{u(!1)}};return t.jsxs("div",{className:"animate-fade-in h-full flex flex-col space-y-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[t.jsx(Hj,{size:18,className:"text-amber-500"}),f("adminCustomers.detail.notes.addNew")]}),t.jsx("textarea",{className:"w-full p-3 bg-amber-50 border border-amber-200 rounded-lg text-slate-700 focus:outline-none focus:ring-2 focus:ring-amber-300 resize-none",placeholder:f("adminCustomers.detail.notes.placeholder"),rows:3,value:n,onChange:v=>i(v.target.value),"data-testid":"textarea-new-note"}),t.jsxs("button",{onClick:g,disabled:d||!n.trim(),className:"mt-3 w-full bg-amber-500 text-white font-bold py-2.5 rounded-lg hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2","data-testid":"button-add-note",children:[d?t.jsx(Ko,{size:16,className:"animate-spin"}):t.jsx(Pt,{size:16}),f(d?"adminCustomers.detail.notes.adding":"adminCustomers.detail.notes.addNote")]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[t.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Or,{size:18,className:"text-blue-500"}),f("adminCustomers.detail.notes.previousNotes")," (",a.length,")"]}),l?t.jsxs("div",{className:"text-center py-8 text-slate-400",children:[t.jsx(Ko,{size:24,className:"mx-auto mb-3 animate-spin opacity-50"}),t.jsx("p",{className:"text-sm",children:f("common.loading")})]}):a.length===0?t.jsxs("div",{className:"text-center py-8 text-slate-400 bg-slate-50 rounded-xl border border-slate-100",children:[t.jsx(Hj,{size:40,className:"mx-auto mb-3 opacity-20"}),t.jsx("p",{className:"text-sm",children:f("adminCustomers.detail.notes.noNotes")}),t.jsx("p",{className:"text-xs text-slate-300 mt-1",children:f("adminCustomers.detail.notes.addFirst")})]}):a.map(v=>t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow","data-testid":`note-item-${v.id}`,children:[t.jsx("div",{className:"flex justify-between items-start mb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-xs font-bold",children:v.createdByName.substring(0,2)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm text-slate-800",children:v.createdByName}),t.jsx("p",{className:"text-[10px] text-slate-400 font-mono",dir:"ltr",children:hs(v.createdAt)})]})]})}),t.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap leading-relaxed bg-slate-50 p-3 rounded-lg",children:v.text})]},v.id))]})]})},T5={NEW:"new",UNDER_REVIEW:"underReview",WAITING_CUSTOMER_EXCEL:"waitingCustomerExcel",PRICING_IN_PROGRESS:"pricingInProgress",PRICING_SENT:"pricingSent",WAITING_CUSTOMER_APPROVAL:"waitingCustomerApproval",APPROVED_BY_CUSTOMER:"approvedByCustomer",IN_FACTORY:"inFactory",SHIPMENT_BOOKED:"shipmentBooked",ON_THE_SEA:"onTheSea",IN_PORT:"inPort",CUSTOMS_CLEARED:"customsCleared",ON_THE_WAY:"onTheWay",DELIVERED:"delivered",CANCELLED:"cancelled"},_5={NEW:"bg-blue-100 text-blue-700",UNDER_REVIEW:"bg-yellow-100 text-yellow-700",APPROVED_BY_CUSTOMER:"bg-green-100 text-green-700",ON_THE_SEA:"bg-cyan-100 text-cyan-700",DELIVERED:"bg-emerald-100 text-emerald-700",CANCELLED:"bg-red-100 text-red-700",PRICING_SENT:"bg-purple-100 text-purple-700"},Yue=({requests:e,onUpdate:s})=>{const{t:a}=Jt(),[r,n]=T.useState(null),[i,l]=T.useState(!1),[o,d]=T.useState({totalAmount:0,note:""}),{addToast:u}=Dt(),h=v=>{const b=T5[v];return b?a(`adminImport.status.${b}`):v},f=T.useMemo(()=>[...e].sort((v,b)=>new Date(b.createdAt).getTime()-new Date(v.createdAt).getTime()),[e]),x=async(v,b)=>{if(r){l(!0);try{await xe.updateImportRequestStatus(r.id,v,{note:b||"",changedBy:"Admin",actorRole:"ADMIN"}),u(a("adminImport.toast.statusUpdated"),"success"),s(),n(null)}catch{u(a("adminImport.toast.updateFailed"),"error")}finally{l(!1)}}},g=async()=>{if(!r||o.totalAmount<=0){u(a("adminImport.toast.enterValidAmount"),"error");return}l(!0);try{await xe.completeImportRequestPricing(r.id,{totalAmount:o.totalAmount,pricingFileName:"Price_Offer.pdf",adminName:"Admin"}),u(a("adminImport.toast.pricingSent"),"success"),s(),n(null)}catch{u(a("adminImport.toast.sendFailed"),"error")}finally{l(!1)}};return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.newRequests")}),t.jsx("p",{className:"text-2xl font-black text-blue-600",children:e.filter(v=>v.status==="NEW").length})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.inProgress")}),t.jsx("p",{className:"text-2xl font-black text-yellow-600",children:e.filter(v=>["IN_FACTORY","SHIPMENT_BOOKED","ON_THE_SEA"].includes(v.status)).length})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.awaitingCustomer")}),t.jsx("p",{className:"text-2xl font-black text-purple-600",children:e.filter(v=>["WAITING_CUSTOMER_EXCEL","PRICING_SENT","WAITING_CUSTOMER_APPROVAL"].includes(v.status)).length})]}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:a("adminImport.stats.completed")}),t.jsx("p",{className:"text-2xl font-black text-green-600",children:e.filter(v=>v.status==="DELIVERED").length})]})]}),t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:t.jsxs("table",{className:"w-full text-right text-sm",children:[t.jsx("thead",{className:"bg-[#0B1B3A] text-white font-bold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-4",children:a("adminImport.table.requestNumber")}),t.jsx("th",{className:"p-4",children:a("adminImport.table.customer")}),t.jsx("th",{className:"p-4",children:a("adminImport.table.service")}),t.jsx("th",{className:"p-4",children:a("adminImport.table.requestDate")}),t.jsx("th",{className:"p-4 text-center",children:a("adminImport.table.status")}),t.jsx("th",{className:"p-4 text-center",children:a("adminImport.table.action")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100",children:[f.map(v=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[t.jsx("td",{className:"p-4 font-mono font-bold text-brand-700",children:v.id}),t.jsx("td",{className:"p-4 font-bold text-slate-800",children:v.businessName}),t.jsx("td",{className:"p-4 text-slate-600",children:v.serviceMode==="FULL_SERVICE"?a("adminImport.serviceType.fullService"):a("adminImport.serviceType.processingOnly")}),t.jsx("td",{className:"p-4 text-slate-500 text-xs",dir:"ltr",children:hs(v.createdAt)}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${_5[v.status]||"bg-gray-100 text-gray-600"}`,children:h(v.status)})}),t.jsx("td",{className:"p-4 text-center",children:t.jsx("button",{onClick:()=>n(v),className:"bg-slate-100 hover:bg-slate-200 text-slate-700 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",children:a("adminImport.actions.manageRequest")})})]},v.id)),f.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-10 text-center text-slate-400",children:a("adminImport.noRequests")})})]})]})}),t.jsx(ls,{isOpen:!!r,onClose:()=>n(null),title:`${a("adminImport.modal.manageRequest")} #${r==null?void 0:r.id}`,maxWidth:"max-w-5xl",children:r&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:`p-4 rounded-xl border flex items-center justify-between ${_5[r.status]||"bg-slate-50 border-slate-200"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-white/50 rounded-lg",children:t.jsx(os,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-bold uppercase opacity-70",children:a("adminImport.modal.currentStatus")}),t.jsx("p",{className:"text-lg font-black",children:h(r.status)})]})]}),r.status==="NEW"&&t.jsx("button",{onClick:()=>x("UNDER_REVIEW"),className:"bg-white text-slate-800 px-4 py-2 rounded-lg text-xs font-bold shadow-sm hover:bg-slate-50",children:a("adminImport.actions.startReview")}),r.status==="UNDER_REVIEW"&&t.jsx("button",{onClick:()=>x("WAITING_CUSTOMER_EXCEL"),className:"bg-white text-slate-800 px-4 py-2 rounded-lg text-xs font-bold shadow-sm hover:bg-slate-50",children:a("adminImport.actions.requestItemsFile")})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200",children:[t.jsxs("h4",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(ja,{size:18})," ",a("adminImport.modal.timeline")]}),t.jsx("div",{className:"space-y-6 relative before:absolute before:right-[19px] before:top-2 before:bottom-2 before:w-0.5 before:bg-slate-100",children:(r.timeline||[]).slice().reverse().map((v,b)=>t.jsxs("div",{className:"relative pr-10",children:[t.jsx("div",{className:`absolute right-3 top-1 w-4 h-4 rounded-full border-2 border-white shadow-sm ${v.actorRole==="ADMIN"?"bg-blue-500":"bg-green-500"}`}),t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:h(v.status)}),v.note&&t.jsx("p",{className:"text-xs text-slate-500 mt-1 bg-slate-50 p-2 rounded border border-slate-100 inline-block",children:v.note})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-[10px] text-slate-400 font-mono",children:hs(v.changedAt)}),t.jsx("p",{className:"text-[10px] font-bold text-slate-300 uppercase",children:v.changedBy})]})]})]},b))})]}),(r.status==="WAITING_CUSTOMER_EXCEL"||r.status==="PRICING_IN_PROGRESS")&&t.jsxs("div",{className:"bg-purple-50 p-6 rounded-2xl border border-purple-100",children:[t.jsxs("h4",{className:"font-bold text-purple-900 mb-4 flex items-center gap-2",children:[t.jsx(or,{size:18})," ",a("adminImport.pricing.preparePricing")]}),r.customerExcelFileName?t.jsxs("div",{className:"flex items-center gap-3 bg-white p-3 rounded-lg border border-purple-200 mb-4",children:[t.jsx(Lt,{className:"text-green-600"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[a("adminImport.pricing.customerFile"),": ",r.customerExcelFileName]}),t.jsx("p",{className:"text-xs text-slate-400",children:hs(r.customerExcelUploadedAt)})]}),t.jsx("button",{className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded font-bold",children:a("adminImport.pricing.download")})]}):t.jsx("p",{className:"text-sm text-purple-600 mb-4 italic",children:a("adminImport.pricing.waitingForFile")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-1",children:a("adminImport.pricing.totalOffer")}),t.jsx("input",{type:"number",className:"w-full p-2 rounded-lg border border-purple-200",value:o.totalAmount,onChange:v=>d({...o,totalAmount:parseFloat(v.target.value)})})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:g,disabled:i,className:"w-full bg-purple-600 text-white py-2 rounded-lg font-bold hover:bg-purple-700 disabled:opacity-50",children:a("adminImport.pricing.sendToCustomer")})})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 p-5 rounded-2xl border border-slate-200",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-4 border-b border-slate-200 pb-2",children:a("adminImport.details.title")}),t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.requestedBrands")}),t.jsx("span",{className:"font-bold text-slate-700",children:r.targetCarBrands.join(", ")})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.serviceType")}),t.jsx("span",{className:"font-bold text-brand-600",children:r.serviceMode==="FULL_SERVICE"?a("adminImport.serviceType.fullImport"):a("adminImport.serviceType.goodsPreparation")})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.branchesCount")}),t.jsx("span",{className:"font-bold text-slate-700",children:r.branchesCount})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400 text-xs block uppercase",children:a("adminImport.details.estimatedValue")}),t.jsx("span",{className:"font-bold text-slate-700",children:r.estimatedAnnualValue||"-"})]}),r.notes&&t.jsxs("div",{className:"bg-white p-3 rounded border border-slate-100 mt-2",children:[t.jsxs("span",{className:"text-xs text-slate-400 block mb-1",children:[a("adminImport.details.customerNotes"),":"]}),t.jsx("p",{className:"text-slate-600",children:r.notes})]})]})]}),t.jsxs("div",{className:"bg-[#0B1B3A] p-5 rounded-2xl text-white shadow-lg",children:[t.jsxs("h4",{className:"font-bold text-[#C8A04F] mb-4 flex items-center gap-2",children:[t.jsx(ds,{size:18})," ",a("adminImport.statusControl.title")]}),t.jsx("select",{className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-sm mb-4 text-white",value:r.status,onChange:v=>x(v.target.value),disabled:i,children:Object.keys(T5).map(v=>t.jsx("option",{value:v,children:h(v)},v))}),t.jsx("p",{className:"text-xs text-slate-400 mb-2",children:a("adminImport.statusControl.hint")})]}),t.jsx("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100",children:t.jsx("button",{onClick:()=>x("CANCELLED"),className:"w-full text-red-600 font-bold text-sm py-2 hover:bg-red-100 rounded transition-colors",children:a("adminImport.actions.cancelRequest")})})]})]})})]})},Xue=({activeTab:e,products:s,onFileSelect:a})=>e==="ITEMS_DATABASE"?t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white border border-indigo-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-xl",children:t.jsx(Vo,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsxs("p",{className:"text-sm text-slate-500",children:["     (",s.length," )"]})]})]}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(ga,{size:18}),"  ",t.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:a})]})})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-indigo-100",children:[t.jsx("p",{className:"text-2xl font-black text-indigo-600",children:s.length}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:" "})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-green-100",children:[t.jsx("p",{className:"text-2xl font-black text-green-600",children:s.filter(r=>(r.stock||0)>0).length}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:""})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-amber-100",children:[t.jsx("p",{className:"text-2xl font-black text-amber-600",children:s.filter(r=>(r.stock||0)===0).length}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:" "})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-100",children:[t.jsx("p",{className:"text-2xl font-black text-slate-600",children:new Set(s.map(r=>r.brand)).size}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:""})]})]}),t.jsx("p",{className:"text-xs text-indigo-600 bg-indigo-100 px-3 py-2 rounded-lg",children:"      .    Excel        ."})]}):e==="QUALITY_SETTINGS"?t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-white border border-amber-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-amber-100 text-amber-600 rounded-xl",children:t.jsx(Wo,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"      Excel"})]})]}),t.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-amber-600 hover:bg-amber-700 text-white rounded-xl font-bold text-sm transition-colors",children:[t.jsx(Pt,{size:18}),"  "]})]}),t.jsx("div",{className:"space-y-3",children:[{code:"ORI",name:"",color:"bg-green-500",priority:1},{code:"COM",name:"",color:"bg-blue-500",priority:2},{code:"CHN",name:"",color:"bg-amber-500",priority:3},{code:"AFT",name:"",color:"bg-slate-500",priority:4}].map(r=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-amber-100",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-4 h-4 rounded-full ${r.color}`}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-slate-800",children:r.name}),t.jsxs("span",{className:"text-xs text-slate-400 mr-2",children:["(",r.code,")"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-slate-400",children:[": ",r.priority]}),t.jsx("button",{className:"p-2 text-slate-400 hover:text-amber-600 rounded-lg hover:bg-amber-50",children:t.jsx(Pa,{size:16})})]})]},r.code))})]}):e==="UNMATCHED"?t.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white border border-red-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-xl",children:t.jsx(ma,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"      "})]})]}),t.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-dashed border-red-200",children:[t.jsx(ma,{size:48,className:"mx-auto text-red-200 mb-4"}),t.jsx("p",{className:"text-slate-500 font-bold",children:"     "}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"       "})]})]}):e==="LOCAL_SUPPLIER"?t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white border border-green-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-green-100 text-green-600 rounded-xl",children:t.jsx(Dr,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"     "})]})]}),t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(ga,{size:18}),"  Excel",t.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:a})]})]}),t.jsx("p",{className:"text-xs text-green-600 bg-green-100 px-3 py-2 rounded-lg",children:"    Excel  :        "})]}):e==="INTERNATIONAL_SUPPLIER"?t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white border border-purple-200 rounded-xl p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-purple-100 text-purple-600 rounded-xl",children:t.jsx(uF,{size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),t.jsx("p",{className:"text-sm text-slate-500",children:"      "})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("select",{className:"px-3 py-2 border border-purple-200 rounded-lg text-sm font-bold",children:[t.jsx("option",{value:"USD",children:"  "}),t.jsx("option",{value:"EUR",children:" "}),t.jsx("option",{value:"CNY",children:"  "}),t.jsx("option",{value:"AED",children:"  "})]}),t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(ga,{size:18}),"  Excel",t.jsx("input",{type:"file",accept:".xlsx,.xls",className:"hidden",onChange:a})]})]})]}),t.jsx("p",{className:"text-xs text-purple-600 bg-purple-100 px-3 py-2 rounded-lg",children:"         "})]}):null,Zue=({onRefresh:e})=>{var vt;const{t:s}=Jt(),{addToast:a}=Dt(),r=T.useRef(null),{hasPermission:n}=h0(),i=n("products","create"),l=n("products","edit"),o=n("products","delete"),[d,u]=T.useState([]),[h,f]=T.useState(!0),[x,g]=T.useState(""),[v,b]=T.useState(1),[y,j]=T.useState(!1),[w,A]=T.useState(!1),[O,C]=T.useState(null),[E,S]=T.useState(!1),[D,M]=T.useState(null),[U,I]=T.useState({}),[k,z]=T.useState(!1),[_,q]=T.useState([]),[L,Q]=T.useState(null),[X,W]=T.useState({name:"",mappings:[]}),[ee,V]=T.useState("list"),[P,Y]=T.useState(new Set),[J,K]=T.useState(!1),[se,G]=T.useState(1),[te,Z]=T.useState("ITEMS_DATABASE"),ue=20;T.useEffect(()=>{lt(),H(),re()},[]);const re=async()=>{const Ie=await xe.getSettings();G(Ie.minVisibleQty??1)},H=()=>{const Ie=xe.getExcelColumnPresets();q(Ie)},pe=()=>{const Ie=Mx.map(ct=>({internalField:ct.key,excelHeader:ct.label,isEnabled:ct.required,isRequired:ct.required,defaultValue:void 0}));W({name:"",mappings:Ie}),Q(null),V("create")},B=Ie=>{Q(Ie),W({name:Ie.name,mappings:[...Ie.mappings]}),V("edit")},oe=()=>{if(!X.name.trim()){a(s("adminProducts.columnPresets.enterPresetName","   "),"error");return}ee==="create"?(xe.createExcelColumnPreset({name:X.name,isDefault:_.length===0,mappings:X.mappings}),a(s("adminProducts.columnPresets.created","   "),"success")):L&&(xe.updateExcelColumnPreset(L.id,{name:X.name,mappings:X.mappings}),a(s("adminProducts.columnPresets.saved","  "),"success")),H(),V("list")},fe=Ie=>{confirm(s("adminProducts.columnPresets.deleteConfirm","      "))&&(xe.deleteExcelColumnPreset(Ie),a(s("adminProducts.columnPresets.deleted","  "),"info"),H())},ne=Ie=>{xe.setDefaultExcelColumnPreset(Ie),a(s("adminProducts.columnPresets.setDefault","   "),"success"),H()},de=(Ie,ct,gt)=>{const Ot=[...X.mappings];Ot[Ie]={...Ot[Ie],[ct]:gt},W({...X,mappings:Ot})},we=()=>{const Ie={internalField:`custom_${Date.now()}`,excelHeader:"",isEnabled:!0,isRequired:!1,defaultValue:void 0};W({...X,mappings:[...X.mappings,Ie]})},Ue=Ie=>{const ct=X.mappings.filter((gt,Ot)=>Ot!==Ie);W({...X,mappings:ct})},qe=Ie=>{Y(ct=>{const gt=new Set(ct);return gt.has(Ie)?gt.delete(Ie):gt.add(Ie),gt})},Ce=()=>{P.size===wt.length?Y(new Set):Y(new Set(wt.map(Ie=>Ie.id)))},Le=()=>{Y(new Set(yt.map(Ie=>Ie.id))),a(s("adminProducts.selectedCount",`  ${yt.length} `,{count:yt.length}),"info")},Se=()=>{Y(new Set)},_e=async()=>{if(P.size===0){a(s("adminProducts.selectProductsFirst","   "),"error");return}const Ie=await xe.bulkUpdateProductVisibility(Array.from(P),!0);a(s("adminProducts.visibilityApplied",`      ${Ie} `,{count:Ie}),"success"),lt(),Se()},Ze=async()=>{if(P.size===0){a(s("adminProducts.selectProductsFirst","   "),"error");return}const Ie=await xe.bulkUpdateProductVisibility(Array.from(P),!1);a(s("adminProducts.visibilityRemoved",`      ${Ie} `,{count:Ie}),"success"),lt(),Se()},Mt=async()=>{const Ie=await xe.getSettings();await xe.updateSettings({...Ie,minVisibleQty:se}),a(s("adminProducts.visibility.saved","     "),"success")},lt=async()=>{f(!0);try{const Ie=await xe.getProducts();u(Ie)}catch{a(s("adminProducts.loadFailed","   "),"error")}finally{f(!1)}},yt=T.useMemo(()=>{if(!x.trim())return d;const Ie=x.toLowerCase();return d.filter(ct=>ct.partNumber.toLowerCase().includes(Ie)||ct.name.toLowerCase().includes(Ie)||ct.brand&&ct.brand.toLowerCase().includes(Ie)||ct.carName&&ct.carName.toLowerCase().includes(Ie))},[d,x]),wt=T.useMemo(()=>{const Ie=(v-1)*ue;return yt.slice(Ie,Ie+ue)},[yt,v]),ke=Math.ceil(yt.length/ue),We=async Ie=>{var gt;const ct=(gt=Ie.target.files)==null?void 0:gt[0];if(ct){j(!0),C(null),A(!0);try{const Ot=xe.getDefaultExcelColumnPreset(),Ls=await xe.importProductsFromOnyxExcel(ct,Ot==null?void 0:Ot.id);C(Ls),a(s("adminProducts.importModal.importSuccess","  "),"success"),lt(),e==null||e()}catch(Ot){a(Ot.message||s("adminProducts.importFailed","  "),"error"),C({imported:0,updated:0,skipped:0,errors:[Ot.message]})}finally{j(!1),r.current&&(r.current.value="")}}},Ne=()=>{try{xe.generateOnyxExcelTemplate(),a(s("adminProducts.templateDownloaded","   Excel"),"success")}catch{a(s("adminProducts.templateDownloadFailed","   "),"error")}},at=Ie=>{M(Ie),I({...Ie}),S(!0)},dt=()=>{M(null),I({partNumber:"",name:"",price:0,stock:0}),S(!0)},ie=async()=>{if(!U.partNumber||!U.name){a(s("adminProducts.partAndNameRequired","   "),"error");return}try{D?(await xe.updateProduct(D.id,U),a(s("adminProducts.productSaved","  "),"success")):(await xe.addProduct(U),a(s("adminProducts.productCreated","  "),"success")),lt(),S(!1),e==null||e()}catch(Ie){a(Ie.message||s("common.error"," "),"error")}},rt=async Ie=>{if(confirm(s("adminProducts.deleteConfirm","      ")))try{await xe.deleteProduct(Ie),a(s("adminProducts.productDeleted","  "),"success"),lt(),e==null||e()}catch{a(s("adminProducts.deleteFailed","   "),"error")}},it=Ie=>Ie==null?"-":`${Ie.toLocaleString()} .`;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Xt,{className:"text-[#C8A04F]",size:24})," "]}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[d.length,"    "]})]})}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-6 pb-4 border-b border-slate-200",children:[t.jsxs("button",{onClick:()=>Z("ITEMS_DATABASE"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${te==="ITEMS_DATABASE"?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Vo,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>Z("OUR_PRODUCTS"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${te==="OUR_PRODUCTS"?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Xs,{size:16})," "]}),t.jsxs("button",{onClick:()=>Z("LOCAL_SUPPLIER"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${te==="LOCAL_SUPPLIER"?"bg-green-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Dr,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>Z("INTERNATIONAL_SUPPLIER"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${te==="INTERNATIONAL_SUPPLIER"?"bg-purple-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(uF,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>Z("QUALITY_SETTINGS"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${te==="QUALITY_SETTINGS"?"bg-amber-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(Wo,{size:16}),"  "]}),t.jsxs("button",{onClick:()=>Z("UNMATCHED"),className:`flex items-center gap-2 px-3 py-2 rounded-lg font-bold text-xs transition-all ${te==="UNMATCHED"?"bg-red-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[t.jsx(ma,{size:16}),"  "]})]}),t.jsx(Xue,{activeTab:te,products:d,onFileSelect:We}),t.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{onClick:()=>{z(!0),V("list")},className:"flex items-center gap-2 px-4 py-2.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-xl font-bold text-sm transition-colors","data-testid":"button-column-settings",children:[t.jsx(la,{size:18})," "]}),t.jsxs("button",{onClick:Ne,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold text-sm transition-colors",children:[t.jsx(cr,{size:18}),"  Excel"]}),i&&t.jsxs("div",{className:"relative group",children:[t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(ga,{size:18}),"  ",t.jsx("input",{ref:r,type:"file",accept:".xlsx,.xls",className:"hidden",onChange:We})]}),_.find(Ie=>Ie.isDefault)&&t.jsxs("div",{className:"absolute -bottom-6 right-0 text-xs text-slate-500 whitespace-nowrap",children:[": ",(vt=_.find(Ie=>Ie.isDefault))==null?void 0:vt.name]})]}),i?t.jsxs("button",{onClick:dt,className:"flex items-center gap-2 px-4 py-2.5 bg-[#0B1B3A] hover:bg-[#1a2e56] text-white rounded-xl font-bold text-sm transition-colors",children:[t.jsx(Pt,{size:18})," "]}):t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-400 rounded-xl font-bold text-sm cursor-not-allowed",children:[t.jsx(wa,{size:18}),"  "]})]})}),t.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-l from-purple-50 to-white border border-purple-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:t.jsx(Ds,{size:20})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-800",children:"   "}),t.jsx("p",{className:"text-xs text-slate-500",children:"       "})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-bold text-slate-700 whitespace-nowrap",children:" :"}),t.jsx("input",{type:"number",min:"0",value:se,onChange:Ie=>G(parseInt(Ie.target.value)||0),className:"w-20 px-3 py-2 border border-purple-200 rounded-lg text-center focus:ring-2 focus:ring-purple-500 focus:border-transparent","data-testid":"input-visibility-threshold"})]}),t.jsx("button",{onClick:Mt,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold text-sm transition-colors","data-testid":"button-save-threshold",children:""})]})]}),t.jsxs("p",{className:"text-xs text-purple-600 mt-2 bg-purple-100 px-3 py-1.5 rounded-lg inline-block",children:["     ",se,'    " "    ']})]}),P.size>0&&t.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-l from-blue-50 to-white border border-blue-200 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(x1,{className:"text-blue-600",size:20}),t.jsxs("span",{className:"font-bold text-slate-800",children:[P.size,"  "]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:_e,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold text-sm transition-colors","data-testid":"button-apply-visibility",children:[t.jsx(gr,{size:16}),"  "]}),t.jsxs("button",{onClick:Ze,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-bold text-sm transition-colors","data-testid":"button-remove-visibility",children:[t.jsx(fs,{size:16}),"  "]}),t.jsxs("button",{onClick:Le,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg font-bold text-sm transition-colors",children:["  (",yt.length,")"]}),t.jsx("button",{onClick:Se,className:"px-4 py-2 text-slate-500 hover:text-slate-700 rounded-lg font-bold text-sm transition-colors",children:t.jsx(St,{size:16})})]})]}),t.jsxs("div",{className:"relative mb-6",children:[t.jsx(Ft,{size:20,className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",placeholder:"      ...",value:x,onChange:Ie=>{g(Ie.target.value),b(1)},className:"w-full pr-12 pl-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent transition-all"})]}),h?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(Qt,{className:"animate-spin text-[#C8A04F]",size:32})}):yt.length===0?t.jsxs("div",{className:"text-center py-20",children:[t.jsx(Xt,{size:48,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-500 font-bold",children:"  "}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"     Excel"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50 text-slate-600",children:[t.jsx("th",{className:"px-3 py-3 text-center font-bold rounded-tr-xl w-12",children:t.jsx("button",{onClick:Ce,className:"p-1.5 hover:bg-slate-200 rounded transition-colors",title:" ",children:P.size===wt.length&&wt.length>0?t.jsx(x1,{className:"text-blue-600",size:18}):t.jsx(e5,{className:"text-slate-400",size:18})})}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:""}),t.jsx("th",{className:"px-4 py-3 text-center font-bold",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right font-bold",children:""}),t.jsx("th",{className:"px-4 py-3 text-center font-bold rounded-tl-xl",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:wt.map(Ie=>{const ct=Ie.qtyTotal??Ie.stock??0,gt=Ie.useVisibilityRuleForQty===!0,Ot=gt&&ct<se;return t.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors ${P.has(Ie.id)?"bg-blue-50/50":""}`,children:[t.jsx("td",{className:"px-3 py-3 text-center",children:t.jsx("button",{onClick:()=>qe(Ie.id),className:"p-1.5 hover:bg-slate-200 rounded transition-colors",children:P.has(Ie.id)?t.jsx(x1,{className:"text-blue-600",size:18}):t.jsx(e5,{className:"text-slate-300",size:18})})}),t.jsx("td",{className:"px-4 py-3 font-mono text-slate-700",children:Ie.partNumber}),t.jsx("td",{className:"px-4 py-3 font-bold text-slate-800",children:Ie.name}),t.jsx("td",{className:"px-4 py-3 text-emerald-600 font-bold",children:it(Ie.priceWholesale||Ie.price)}),t.jsx("td",{className:"px-4 py-3 text-slate-600",children:it(Ie.priceRetail)}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${ct>10?"bg-emerald-100 text-emerald-700":ct>0?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:ct}),Ot&&t.jsx("span",{className:"mr-1 text-purple-500",title:"  ",children:t.jsx(gr,{size:14,className:"inline"})})]}),t.jsx("td",{className:"px-4 py-3 text-center",children:gt?t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-bold rounded-lg",children:[t.jsx(Ds,{size:12}),""]}):t.jsx("span",{className:"text-slate-400 text-xs",children:"-"})}),t.jsx("td",{className:"px-4 py-3 text-slate-500",children:Ie.brand||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l?t.jsx("button",{onClick:()=>at(Ie),className:"p-2 text-slate-400 hover:text-[#C8A04F] hover:bg-amber-50 rounded-lg transition-colors",title:"",children:t.jsx(Pa,{size:16})}):t.jsx("span",{className:"p-2 text-slate-300 cursor-not-allowed",title:"  ",children:t.jsx(Pa,{size:16})}),o?t.jsx("button",{onClick:()=>rt(Ie.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"",children:t.jsx(Ct,{size:16})}):t.jsx("span",{className:"p-2 text-slate-300 cursor-not-allowed",title:"  ",children:t.jsx(Ct,{size:16})})]})})]},Ie.id)})})]})}),ke>1&&t.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-slate-100",children:[t.jsxs("p",{className:"text-sm text-slate-500",children:[" ",(v-1)*ue+1," - ",Math.min(v*ue,yt.length),"  ",yt.length]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>b(Ie=>Math.max(1,Ie-1)),disabled:v===1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"px-4 py-2 font-bold text-slate-700",children:[v," / ",ke]}),t.jsx("button",{onClick:()=>b(Ie=>Math.min(ke,Ie+1)),disabled:v===ke,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:t.jsx(ws,{size:18})})]})]})]})]}),w&&t.jsx(ls,{isOpen:w,onClose:()=>A(!1),title:" ",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:`p-3 rounded-xl ${y?"bg-blue-100":O!=null&&O.imported||O!=null&&O.updated?"bg-emerald-100":"bg-red-100"}`,children:y?t.jsx(Qt,{size:24,className:"animate-spin text-blue-600"}):O!=null&&O.imported||O!=null&&O.updated?t.jsx(Ut,{size:24,className:"text-emerald-600"}):t.jsx(Gs,{size:24,className:"text-red-600"})}),t.jsx("div",{children:t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:y?" ...":" "})})]}),y?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-slate-600",children:"  ..."})}):O&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-emerald-600",children:O.imported}),t.jsx("p",{className:"text-xs font-bold text-emerald-700",children:""})]}),t.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-blue-600",children:O.updated}),t.jsx("p",{className:"text-xs font-bold text-blue-700",children:""})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-center",children:[t.jsx("p",{className:"text-2xl font-black text-slate-600",children:O.skipped}),t.jsx("p",{className:"text-xs font-bold text-slate-700",children:" "})]})]}),O.errors.length>0&&t.jsxs("div",{className:"bg-red-50 rounded-xl p-4",children:[t.jsxs("p",{className:"font-bold text-red-700 mb-2 flex items-center gap-2",children:[t.jsx(Gs,{size:16})," (",O.errors.length,")"]}),t.jsx("ul",{className:"text-sm text-red-600 space-y-1 max-h-32 overflow-y-auto",children:O.errors.slice(0,10).map((Ie,ct)=>t.jsxs("li",{children:[" ",Ie]},ct))})]}),t.jsx("button",{onClick:()=>A(!1),className:"w-full py-3 bg-[#0B1B3A] hover:bg-[#1a2e56] text-white rounded-xl font-bold transition-colors",children:""})]})]})}),E&&t.jsx(ls,{isOpen:E,onClose:()=>S(!1),title:D?" ":"  ",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  *"}),t.jsx("input",{type:"text",value:U.partNumber||"",onChange:Ie=>I(ct=>({...ct,partNumber:Ie.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:": ABC-123"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),t.jsx("input",{type:"text",value:U.brand||"",onChange:Ie=>I(ct=>({...ct,brand:Ie.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:": Changan"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  *"}),t.jsx("input",{type:"text",value:U.name||"",onChange:Ie=>I(ct=>({...ct,name:Ie.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:" "})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"number",value:U.priceWholesale||U.price||"",onChange:Ie=>I(ct=>({...ct,priceWholesale:parseFloat(Ie.target.value)||0,price:parseFloat(Ie.target.value)||0})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"number",value:U.priceRetail||"",onChange:Ie=>I(ct=>({...ct,priceRetail:parseFloat(Ie.target.value)||null})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:"0"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:" "}),t.jsx("input",{type:"number",value:U.qtyTotal??U.stock??"",onChange:Ie=>I(ct=>({...ct,qtyTotal:parseInt(Ie.target.value)||0,stock:parseInt(Ie.target.value)||0})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),t.jsx("input",{type:"text",value:U.carName||"",onChange:Ie=>I(ct=>({...ct,carName:Ie.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",placeholder:" "})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:""}),t.jsx("textarea",{value:U.description||"",onChange:Ie=>I(ct=>({...ct,description:Ie.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent resize-none",rows:3,placeholder:" ..."})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{onClick:()=>S(!1),className:"flex-1 py-3 border border-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:""}),t.jsx("button",{onClick:ie,className:"flex-1 py-3 bg-[#0B1B3A] hover:bg-[#1a2e56] text-white rounded-xl font-bold transition-colors",children:D?" ":" "})]})]})}),k&&t.jsx(ls,{isOpen:k,onClose:()=>{z(!1),V("list")},maxWidth:"max-w-4xl",children:t.jsx("div",{className:"flex flex-col h-full",children:ee==="list"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100 flex-shrink-0",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:[t.jsx(la,{className:"text-blue-600",size:24}),"  "]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"    Excel "})]}),t.jsxs("button",{onClick:pe,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-sm transition-colors shadow-sm","data-testid":"button-add-preset",children:[t.jsx(Pt,{size:18}),"  "]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto py-4 min-h-[200px] max-h-[50vh]",children:_.length===0?t.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[t.jsx(zn,{size:56,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-600 font-bold text-lg",children:"   "}),t.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"      "}),t.jsxs("button",{onClick:pe,className:"mt-4 px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-sm transition-colors",children:[t.jsx(Pt,{size:16,className:"inline ml-2"}),"  "]})]}):t.jsx("div",{className:"space-y-3",children:_.map(Ie=>t.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border transition-all ${Ie.isDefault?"border-blue-300 bg-gradient-to-l from-blue-50 to-white shadow-sm":"border-slate-200 bg-white hover:border-slate-300 hover:shadow-sm"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[Ie.isDefault?t.jsx("span",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:t.jsx(pn,{size:20})}):t.jsx("span",{className:"p-2 bg-slate-100 text-slate-400 rounded-lg",children:t.jsx(zn,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800 text-base",children:Ie.name}),t.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[t.jsxs("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded",children:[Ie.mappings.filter(ct=>ct.isEnabled).length,"  "]}),Ie.mappings.filter(ct=>!Mx.find(gt=>gt.key===ct.internalField)).length>0&&t.jsxs("span",{className:"text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded",children:["+",Ie.mappings.filter(ct=>!Mx.find(gt=>gt.key===ct.internalField)).length,"  "]}),Ie.isDefault&&t.jsx("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded font-bold",children:""})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[!Ie.isDefault&&t.jsx("button",{onClick:()=>ne(Ie.id),className:"p-2.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:" ",children:t.jsx(wre,{size:18})}),t.jsx("button",{onClick:()=>B(Ie),className:"p-2.5 text-slate-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"","data-testid":`button-edit-preset-${Ie.id}`,children:t.jsx(Pa,{size:18})}),t.jsx("button",{onClick:()=>fe(Ie.id),className:"p-2.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"",children:t.jsx(Ct,{size:18})})]})]},Ie.id))})}),t.jsx("div",{className:"pt-4 border-t border-slate-100 flex-shrink-0",children:t.jsx("button",{onClick:()=>z(!1),className:"w-full py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-colors",children:""})})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"pb-4 border-b border-slate-100 flex-shrink-0",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h3",{className:"font-bold text-xl text-slate-800 flex items-center gap-2",children:ee==="create"?t.jsxs(t.Fragment,{children:[t.jsx(Pt,{className:"text-green-600",size:24}),"  "]}):t.jsxs(t.Fragment,{children:[t.jsx(Pa,{className:"text-amber-600",size:24}),": ",L==null?void 0:L.name]})})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  *"}),t.jsx("input",{type:"text",value:X.name,onChange:Ie=>W({...X,name:Ie.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base",placeholder:": Onyx Export Format","data-testid":"input-preset-name"})]})]}),t.jsx("div",{className:"py-3 border-b border-slate-200 flex-shrink-0 bg-slate-50 -mx-6 px-6 mt-4",children:t.jsxs("div",{className:"grid grid-cols-12 gap-3 text-xs font-bold text-slate-600",children:[t.jsx("div",{className:"col-span-1 text-center",children:""}),t.jsx("div",{className:"col-span-3",children:" "}),t.jsx("div",{className:"col-span-3",children:"   Excel"}),t.jsx("div",{className:"col-span-3",children:" "}),t.jsx("div",{className:"col-span-2 text-center",children:""})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto py-2 min-h-[200px] max-h-[40vh]",children:[t.jsx("div",{className:"space-y-2",children:X.mappings.map((Ie,ct)=>{const gt=Mx.find(Ls=>Ls.key===Ie.internalField),Ot=!gt;return t.jsxs("div",{className:`grid grid-cols-12 gap-3 items-center p-3 rounded-lg transition-colors ${Ot?"bg-green-50 border border-green-200":Ie.isRequired?"bg-blue-50 border border-blue-100":"hover:bg-slate-50 border border-transparent"}`,children:[t.jsx("div",{className:"col-span-1 text-center",children:t.jsx("input",{type:"checkbox",checked:Ie.isEnabled,onChange:Ls=>de(ct,"isEnabled",Ls.target.checked),disabled:Ie.isRequired,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 cursor-pointer disabled:cursor-not-allowed"})}),t.jsx("div",{className:"col-span-3",children:Ot?t.jsx("input",{type:"text",value:Ie.internalField,onChange:Ls=>de(ct,"internalField",Ls.target.value),className:"w-full px-3 py-2 border border-green-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white",placeholder:" "}):t.jsxs("span",{className:`text-sm flex items-center gap-1 ${Ie.isRequired?"font-bold text-slate-800":"text-slate-600"}`,children:[(gt==null?void 0:gt.label)||Ie.internalField,Ie.isRequired&&t.jsx("span",{className:"text-red-500 text-xs",children:"()"})]})}),t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",value:Ie.excelHeader,onChange:Ls=>de(ct,"excelHeader",Ls.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"   Excel"})}),t.jsx("div",{className:"col-span-3",children:t.jsx("input",{type:"text",value:Ie.defaultValue||"",onChange:Ls=>de(ct,"defaultValue",Ls.target.value||void 0),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"  ()"})}),t.jsxs("div",{className:"col-span-2 flex items-center justify-center gap-1",children:[Ot&&t.jsx("button",{onClick:()=>Ue(ct),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:" ","data-testid":`button-remove-column-${ct}`,children:t.jsx(Ct,{size:16})}),!Ot&&Ie.isRequired&&t.jsx("span",{className:"text-xs text-blue-500 bg-blue-100 px-2 py-1 rounded",children:""})]})]},`${Ie.internalField}-${ct}`)})}),t.jsxs("button",{onClick:we,className:"w-full mt-4 py-3 border-2 border-dashed border-green-300 text-green-600 rounded-xl font-bold hover:bg-green-50 hover:border-green-400 transition-colors flex items-center justify-center gap-2","data-testid":"button-add-column",children:[t.jsx(Pt,{size:20}),"   ()"]})]}),t.jsx("div",{className:"pt-4 border-t border-slate-100 flex-shrink-0",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>V("list"),className:"flex-1 py-3 border border-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:""}),t.jsxs("button",{onClick:oe,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold transition-colors flex items-center justify-center gap-2 shadow-sm","data-testid":"button-save-preset",children:[t.jsx(ds,{size:18})," "]})]})})]})})})]})},e0e=({onRefresh:e})=>{const{t:s}=Jt(),[a,r]=T.useState("users");return t.jsxs("div",{className:"p-6 lg:p-8",children:[t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(Gt,{className:"text-[#C8A04F]",size:28}),s("adminUsers.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:s("adminUsers.subtitle","     ")})]})}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"border-b border-slate-200",children:t.jsxs("div",{className:"flex",children:[t.jsxs("button",{onClick:()=>r("users"),className:`flex items-center gap-2 px-6 py-4 font-bold transition-colors ${a==="users"?"text-[#0B1B3A] border-b-2 border-[#C8A04F] bg-slate-50":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,"data-testid":"tab-users",children:[t.jsx(Gt,{size:20}),s("adminUsers.tabs.users","")]}),t.jsxs("button",{onClick:()=>r("roles"),className:`flex items-center gap-2 px-6 py-4 font-bold transition-colors ${a==="roles"?"text-[#0B1B3A] border-b-2 border-[#C8A04F] bg-slate-50":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,"data-testid":"tab-roles",children:[t.jsx(Ds,{size:20}),s("adminUsers.tabs.roles"," ")]})]})}),a==="users"?t.jsx(t0e,{onRefresh:e}):t.jsx(s0e,{onRefresh:e})]})]})},t0e=({onRefresh:e})=>{const{t:s}=Jt(),[a,r]=T.useState([]),[n,i]=T.useState([]),[l,o]=T.useState(!0),[d,u]=T.useState(""),{hasPermission:h}=h0(),f=h("users","create"),x=h("users","edit"),g=h("users","delete"),v=h("users","approve")||h("users","edit"),[b,y]=T.useState("ALL"),[j,w]=T.useState("ALL"),[A,O]=T.useState("ALL"),[C,E]=T.useState("ALL"),[S,D]=T.useState(null),[M,U]=T.useState(!1),[I,k]=T.useState(!1),[z,_]=T.useState(!1),[q,L]=T.useState(!1),[Q,X]=T.useState(!1),[W,ee]=T.useState(null),[V,P]=T.useState({fullName:"",username:"",phone:"",email:"",password:"",roleId:"",isActive:!0}),[Y,J]=T.useState(""),[K,se]=T.useState(""),[G,te]=T.useState(!1),{addToast:Z}=Dt();T.useEffect(()=>{ue()},[]);const ue=async()=>{o(!0);try{const[Ne,at]=await Promise.all([xe.getAdminUsers(),xe.getRoles()]);r(Ne),i(at),at.length>0&&!V.roleId&&P(dt=>({...dt,roleId:at[0].id}))}catch(Ne){console.error("Failed to load data",Ne),Z(s("adminUsers.toast.loadError","   "),"error")}finally{o(!1)}},re=Ne=>{const at=n.find(dt=>dt.id===Ne);return(at==null?void 0:at.name)||s("common.unassigned"," ")},H=a.filter(Ne=>{const at=Ne.fullName.toLowerCase().includes(d.toLowerCase())||Ne.username.toLowerCase().includes(d.toLowerCase())||Ne.phone.includes(d)||Ne.whatsapp&&Ne.whatsapp.includes(d)||Ne.clientCode&&Ne.clientCode.toLowerCase().includes(d.toLowerCase()),dt=b==="ALL"||Ne.roleId===b,ie=j==="ALL"||j==="ACTIVE"&&Ne.isActive||j==="INACTIVE"&&!Ne.isActive,rt=A==="ALL"||Ne.extendedRole===A,it=C==="ALL"||Ne.accountStatus===C;return at&&dt&&ie&&rt&&it}),pe=()=>{P({fullName:"",username:"",phone:"",email:"",password:"",roleId:n.length>0?n[0].id:"",isActive:!0}),se("")},B=()=>{pe(),U(!0)},oe=Ne=>{ee(Ne),P({fullName:Ne.fullName,username:Ne.username,phone:Ne.phone,email:Ne.email||"",password:"",roleId:Ne.roleId,isActive:Ne.isActive}),se(""),k(!0)},fe=Ne=>{ee(Ne),_(!0)},ne=Ne=>{ee(Ne),J(""),se(""),L(!0)},de=(Ne=!1)=>V.fullName.trim()?V.username.trim()?/^[a-zA-Z0-9_]+$/.test(V.username)?V.phone.trim()?V.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V.email)?(se("   "),!1):!Ne&&!V.password.trim()?(se("  "),!1):V.roleId?!0:(se(" "),!1):(se("  "),!1):(se("         "),!1):(se("  "),!1):(se("  "),!1),we=async()=>{if(de(!1)){te(!0);try{await xe.createAdminUser({fullName:V.fullName,username:V.username,phone:V.phone,email:V.email||void 0,password:V.password,roleId:V.roleId,isActive:V.isActive}),Z("   ","success"),U(!1),ue(),e==null||e()}catch(Ne){se(Ne.message||"   ")}finally{te(!1)}}},Ue=async()=>{if(!(!W||!de(!0))){te(!0);try{await xe.updateAdminUser(W.id,{fullName:V.fullName,phone:V.phone,email:V.email||void 0,roleId:V.roleId,isActive:V.isActive}),Z("    ","success"),k(!1),ue(),e==null||e()}catch(Ne){se(Ne.message||"   ")}finally{te(!1)}}},qe=async()=>{if(W){te(!0);try{await xe.toggleAdminUserStatus(W.id);const Ne=W.isActive?"":"";Z(` ${Ne}  `,"success"),X(!1),ee(null),ue(),e==null||e()}catch(Ne){Z(Ne.message||"    ","error")}finally{te(!1)}}},Ce=async()=>{if(W){if(!Y.trim()){se("   ");return}te(!0);try{await xe.resetAdminUserPassword(W.id,Y),Z("     ","success"),L(!1),ee(null),J("")}catch(Ne){se(Ne.message||"     ")}finally{te(!1)}}},Le=async()=>{if(W){te(!0);try{await xe.deleteAdminUser(W.id),Z("   ","success"),_(!1),ee(null),ue(),e==null||e()}catch(Ne){Z(Ne.message||"   ","error")}finally{te(!1)}}},Se=()=>{const Ne=[" "," "," "," ","","","  "],at=a.map(vt=>[vt.fullName,vt.username,vt.phone,vt.email||"-",re(vt.roleId),vt.isActive?"":"",vt.lastLoginAt?hs(vt.lastLoginAt):"-"]),dt=[Ne.join(","),...at.map(vt=>vt.join(","))].join(`
`),ie=new Blob(["\uFEFF"+dt],{type:"text/csv;charset=utf-8;"}),rt=URL.createObjectURL(ie),it=document.createElement("a");it.href=rt,it.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,it.click(),URL.revokeObjectURL(rt),Z("   ","success")},_e=Ne=>{const at=n.find(rt=>rt.id===Ne),dt=(at==null?void 0:at.name)||" ",ie={" ":"bg-purple-100 text-purple-800 border-purple-200"," ":"bg-blue-100 text-blue-800 border-blue-200"," ":"bg-emerald-100 text-emerald-800 border-emerald-200"," ":"bg-amber-100 text-amber-800 border-amber-200"," ":"bg-slate-100 text-slate-800 border-slate-200"};return t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${ie[dt]||"bg-slate-100 text-slate-800 border-slate-200"}`,children:dt})},Ze=Ne=>Ne?t.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800 border border-green-200 flex items-center gap-1",children:[t.jsx(Zt,{size:12})," "]}):t.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-bold bg-red-100 text-red-800 border border-red-200 flex items-center gap-1",children:[t.jsx(St,{size:12})," "]}),Mt=Ne=>{const at={ADMIN:{label:"",color:"bg-purple-100 text-purple-800 border-purple-200"},EMPLOYEE:{label:"",color:"bg-blue-100 text-blue-800 border-blue-200"},CUSTOMER:{label:"",color:"bg-emerald-100 text-emerald-800 border-emerald-200"},SUPPLIER_LOCAL:{label:" ",color:"bg-amber-100 text-amber-800 border-amber-200"},SUPPLIER_INTERNATIONAL:{label:" ",color:"bg-orange-100 text-orange-800 border-orange-200"},MARKETER:{label:"",color:"bg-pink-100 text-pink-800 border-pink-200"}};if(!Ne)return t.jsx("span",{className:"text-slate-400 text-xs",children:""});const dt=at[Ne]||{label:Ne,color:"bg-slate-100 text-slate-800 border-slate-200"};return t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${dt.color}`,children:dt.label})},lt=Ne=>{const at={PENDING:{label:" ",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:t.jsx(os,{size:12})},APPROVED:{label:"",color:"bg-green-100 text-green-800 border-green-200",icon:t.jsx(Ut,{size:12})},REJECTED:{label:"",color:"bg-red-100 text-red-800 border-red-200",icon:t.jsx(Zs,{size:12})},BLOCKED:{label:"",color:"bg-slate-100 text-slate-800 border-slate-200",icon:t.jsx(Bp,{size:12})}};if(!Ne)return t.jsx("span",{className:"text-slate-400 text-xs",children:""});const dt=at[Ne]||{label:Ne,color:"bg-slate-100 text-slate-800 border-slate-200",icon:null};return t.jsxs("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border flex items-center gap-1 ${dt.color}`,children:[dt.icon," ",dt.label]})},yt=Ne=>{const at=Ne??0,dt=at>=80?"bg-green-500":at>=50?"bg-yellow-500":"bg-red-500";return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-16 h-2 bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full ${dt}`,style:{width:`${at}%`}})}),t.jsxs("span",{className:"text-xs text-slate-600",children:[at,"%"]})]})},wt=async Ne=>{D(Ne);try{const at=await mockApi.approveAdminUser(Ne);at&&(r(dt=>dt.map(ie=>ie.id===Ne?at:ie)),Z("   ","success"))}catch(at){Z(at.message||"   ","error")}finally{D(null)}},ke=async Ne=>{D(Ne);try{const at=await mockApi.rejectAdminUser(Ne);at&&(r(dt=>dt.map(ie=>ie.id===Ne?at:ie)),Z("  ","success"))}catch(at){Z(at.message||"   ","error")}finally{D(null)}},We=async Ne=>{D(Ne);try{const at=await mockApi.blockAdminUser(Ne);at&&(r(dt=>dt.map(ie=>ie.id===Ne?at:ie)),Z("  ","success"))}catch(at){Z(at.message||"   ","error")}finally{D(null)}};return l?t.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-slate-500",children:"  ..."})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 flex-1",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:"      ...",value:d,onChange:Ne=>u(Ne.target.value),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent","data-testid":"input-search-users"})]}),t.jsxs("select",{value:b,onChange:Ne=>y(Ne.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-role-filter",children:[t.jsx("option",{value:"ALL",children:" "}),n.map(Ne=>t.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]}),t.jsxs("select",{value:j,onChange:Ne=>w(Ne.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"ACTIVE",children:""}),t.jsx("option",{value:"INACTIVE",children:""})]}),t.jsxs("select",{value:A,onChange:Ne=>O(Ne.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-extended-role-filter",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"ADMIN",children:""}),t.jsx("option",{value:"EMPLOYEE",children:""}),t.jsx("option",{value:"CUSTOMER",children:""}),t.jsx("option",{value:"SUPPLIER_LOCAL",children:" "}),t.jsx("option",{value:"SUPPLIER_INTERNATIONAL",children:" "}),t.jsx("option",{value:"MARKETER",children:""})]}),t.jsxs("select",{value:C,onChange:Ne=>E(Ne.target.value),className:"px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-account-status-filter",children:[t.jsx("option",{value:"ALL",children:" "}),t.jsx("option",{value:"PENDING",children:" "}),t.jsx("option",{value:"APPROVED",children:""}),t.jsx("option",{value:"REJECTED",children:""}),t.jsx("option",{value:"BLOCKED",children:""})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-export-users",children:[t.jsx(cr,{size:18}),""]}),f?t.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-add-user",children:[t.jsx(Pt,{size:18})," "]}):t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-400 rounded-xl font-bold cursor-not-allowed",children:[t.jsx(wa,{size:18}),"  "]})]})]}),a.length===0?t.jsxs("div",{className:"py-16 text-center text-slate-400",children:[t.jsx(Gt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:"    "}),t.jsx("p",{className:"text-sm mt-2",children:"   "})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-50 text-slate-600 text-sm",children:[t.jsx("th",{className:"text-right py-4 px-4 font-bold",children:" "}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:""}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:""}),t.jsx("th",{className:"text-right py-4 px-3 font-bold",children:" "}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:""}),t.jsx("th",{className:"text-center py-4 px-3 font-bold",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:H.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:9,className:"py-12 text-center text-slate-400",children:"    "})}):H.map(Ne=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-user-${Ne.id}`,children:[t.jsx("td",{className:"py-4 px-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-[#0B1B3A] flex items-center justify-center text-white font-bold",children:Ne.fullName.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:Ne.fullName}),t.jsx("p",{className:"text-xs text-slate-500",children:Ne.username}),Ne.email&&t.jsxs("p",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsx(Ll,{size:10})," ",Ne.email]})]})]})}),t.jsx("td",{className:"py-4 px-3",children:Ne.clientCode?t.jsx("span",{className:"font-mono text-sm bg-blue-50 text-blue-700 px-2 py-1 rounded",children:Ne.clientCode}):t.jsx("span",{className:"text-slate-400 text-xs",children:""})}),t.jsx("td",{className:"py-4 px-3",children:Ne.whatsapp?t.jsxs("span",{className:"flex items-center gap-1 text-slate-600 text-sm",children:[t.jsx(Tu,{size:14,className:"text-green-500"})," ",Ne.whatsapp]}):t.jsxs("span",{className:"flex items-center gap-1 text-slate-500 text-sm",children:[t.jsx(vn,{size:14,className:"text-slate-400"})," ",Ne.phone]})}),t.jsx("td",{className:"py-4 px-3",children:Mt(Ne.extendedRole)}),t.jsx("td",{className:"py-4 px-3 text-center",children:lt(Ne.accountStatus)}),t.jsx("td",{className:"py-4 px-3",children:yt(Ne.completionPercent)}),t.jsx("td",{className:"py-4 px-3",children:_e(Ne.roleId)}),t.jsx("td",{className:"py-4 px-3 text-center",children:Ze(Ne.isActive)}),t.jsx("td",{className:"py-4 px-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-1 flex-wrap",children:[v&&Ne.accountStatus==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>wt(Ne.id),disabled:S===Ne.id,className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:"","data-testid":`button-approve-user-${Ne.id}`,children:t.jsx(Ut,{size:16})}),t.jsx("button",{onClick:()=>ke(Ne.id),disabled:S===Ne.id,className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"","data-testid":`button-reject-user-${Ne.id}`,children:t.jsx(Zs,{size:16})})]}),v&&Ne.accountStatus!=="BLOCKED"&&Ne.accountStatus!=="PENDING"&&t.jsx("button",{onClick:()=>We(Ne.id),disabled:S===Ne.id,className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",title:"","data-testid":`button-block-user-${Ne.id}`,children:t.jsx(Bp,{size:16})}),x&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>oe(Ne),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"","data-testid":`button-edit-user-${Ne.id}`,children:t.jsx(Pa,{size:16})}),t.jsx("button",{onClick:()=>ne(Ne),className:"p-1.5 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"   ","data-testid":`button-reset-password-${Ne.id}`,children:t.jsx(Vc,{size:16})})]}),g&&t.jsx("button",{onClick:()=>fe(Ne),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"","data-testid":`button-delete-user-${Ne.id}`,children:t.jsx(Ct,{size:16})})]})})]},Ne.id))})]})}),t.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",t.jsx("span",{className:"font-bold text-slate-700",children:a.length}),H.length!==a.length&&t.jsxs("span",{className:"mr-2",children:["  : ",t.jsx("span",{className:"font-bold text-slate-700",children:H.length})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded",children:[": ",a.filter(Ne=>Ne.isActive).length]}),t.jsxs("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded",children:[": ",a.filter(Ne=>!Ne.isActive).length]})]})]}),M&&t.jsx(ls,{isOpen:M,onClose:()=>U(!1),children:t.jsxs("div",{className:"p-6 max-w-lg w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Pt,{className:"text-[#C8A04F]",size:24}),"  "]}),K&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Gs,{size:18})," ",K]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:V.fullName,onChange:Ne=>P({...V,fullName:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"  ","data-testid":"input-user-fullname"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"tel",value:V.phone,onChange:Ne=>P({...V,phone:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"05xxxxxxxx",dir:"ltr","data-testid":"input-user-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("input",{type:"email",value:V.email,onChange:Ne=>P({...V,email:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com",dir:"ltr","data-testid":"input-user-email"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:V.username,onChange:Ne=>P({...V,username:Ne.target.value.toLowerCase()}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 font-mono",placeholder:"username",dir:"ltr","data-testid":"input-user-username"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"password",value:V.password,onChange:Ne=>P({...V,password:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"  ",dir:"ltr","data-testid":"input-user-password"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("select",{value:V.roleId,onChange:Ne=>P({...V,roleId:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-user-role",children:n.map(Ne=>t.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:V.isActive?"active":"inactive",onChange:Ne=>P({...V,isActive:Ne.target.value==="active"}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-user-status",children:[t.jsx("option",{value:"active",children:""}),t.jsx("option",{value:"inactive",children:""})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>U(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-add",children:""}),t.jsx("button",{onClick:we,disabled:G,className:"flex-1 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors disabled:opacity-50","data-testid":"button-confirm-add",children:G?" ...":" "})]})]})}),I&&W&&t.jsx(ls,{isOpen:I,onClose:()=>k(!1),children:t.jsxs("div",{className:"p-6 max-w-lg w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Pa,{className:"text-[#C8A04F]",size:24}),"  "]}),K&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Gs,{size:18})," ",K]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:V.fullName,onChange:Ne=>P({...V,fullName:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"input-edit-user-fullname"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"tel",value:V.phone,onChange:Ne=>P({...V,phone:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",dir:"ltr","data-testid":"input-edit-user-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("input",{type:"email",value:V.email,onChange:Ne=>P({...V,email:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",dir:"ltr","data-testid":"input-edit-user-email"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("select",{value:V.roleId,onChange:Ne=>P({...V,roleId:Ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-edit-user-role",children:n.map(Ne=>t.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:V.isActive?"active":"inactive",onChange:Ne=>P({...V,isActive:Ne.target.value==="active"}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"select-edit-user-status",children:[t.jsx("option",{value:"active",children:""}),t.jsx("option",{value:"inactive",children:""})]})]})]}),t.jsx("div",{className:"pt-2",children:t.jsxs("button",{onClick:()=>{k(!1),ne(W)},className:"flex items-center gap-2 text-purple-600 hover:text-purple-800 font-bold text-sm","data-testid":"button-reset-password-in-edit",children:[t.jsx(Vc,{size:16}),"   "]})})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-edit",children:""}),t.jsx("button",{onClick:Ue,disabled:G,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-edit",children:G?" ...":" "})]})]})}),q&&W&&t.jsx(ls,{isOpen:q,onClose:()=>L(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Vc,{className:"text-purple-600",size:24}),"   "]}),t.jsxs("p",{className:"text-slate-600 mb-4",children:["    : ",t.jsx("span",{className:"font-bold",children:W.fullName})]}),K&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Gs,{size:18})," ",K]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"   *"}),t.jsx("input",{type:"password",value:Y,onChange:Ne=>J(Ne.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500",placeholder:"   ",dir:"ltr","data-testid":"input-new-password"})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-reset-password",children:""}),t.jsx("button",{onClick:Ce,disabled:G,className:"flex-1 px-4 py-2.5 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-reset-password",children:G?" ...":"  "})]})]})}),Q&&W&&t.jsx(ls,{isOpen:Q,onClose:()=>X(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full text-center",children:[t.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${W.isActive?"bg-amber-100":"bg-green-100"}`,children:W.isActive?t.jsx(vu,{className:"text-amber-600",size:32}):t.jsx(f0,{className:"text-green-600",size:32})}),t.jsx("h2",{className:"text-xl font-black text-slate-800 mb-2",children:W.isActive?" ":" "}),t.jsxs("p",{className:"text-slate-600 mb-6",children:["     ",t.jsx("br",{}),t.jsx("span",{className:"font-bold text-slate-800",children:W.fullName})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>X(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-toggle",children:""}),t.jsx("button",{onClick:qe,disabled:G,className:`flex-1 px-4 py-2.5 text-white rounded-xl font-bold transition-colors disabled:opacity-50 ${W.isActive?"bg-amber-600 hover:bg-amber-700":"bg-green-600 hover:bg-green-700"}`,"data-testid":"button-confirm-toggle",children:G?" ...":W.isActive?"":""})]})]})}),z&&W&&t.jsx(ls,{isOpen:z,onClose:()=>_(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ct,{className:"text-red-600",size:32})}),t.jsx("h2",{className:"text-xl font-black text-slate-800 mb-2",children:" "}),t.jsxs("p",{className:"text-slate-600 mb-6",children:["       ",t.jsx("br",{}),t.jsx("span",{className:"font-bold text-slate-800",children:W.fullName}),t.jsx("br",{}),t.jsx("span",{className:"text-sm text-red-600",children:"     "})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>_(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-delete",children:""}),t.jsx("button",{onClick:Le,disabled:G,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-delete",children:G?" ...":" "})]})]})})]})},s0e=({onRefresh:e})=>{const[s,a]=T.useState([]),[r,n]=T.useState({}),[i,l]=T.useState(!0),[o,d]=T.useState(null),[u,h]=T.useState(!1),[f,x]=T.useState(!1),[g,v]=T.useState(!1),[b,y]=T.useState(!1),[j,w]=T.useState({name:"",description:""}),[A,O]=T.useState([]),[C,E]=T.useState(""),[S,D]=T.useState(!1),{addToast:M}=Dt(),{hasPermission:U}=h0(),I=U("roles","create"),k=U("roles","edit"),z=U("roles","delete");T.useEffect(()=>{_()},[]);const _=async()=>{l(!0);try{const G=await xe.getRoles();a(G);const te={};for(const Z of G)te[Z.id]=await xe.getUserCountByRole(Z.id);n(te)}catch(G){console.error("Failed to load roles",G),M("   ","error")}finally{l(!1)}},q=()=>{w({name:"",description:""}),E("")},L=()=>{q(),h(!0)},Q=G=>{d(G),w({name:G.name,description:G.description||""}),E(""),x(!0)},X=G=>{d(G),O(JSON.parse(JSON.stringify(G.permissions))),y(!0)},W=G=>{d(G),v(!0)},ee=async()=>{if(!j.name.trim()){E("  ");return}D(!0);try{await xe.createRole({name:j.name,description:j.description||void 0,permissions:[],isSystem:!1}),M("   ","success"),h(!1),_(),e==null||e()}catch(G){E(G.message||"   ")}finally{D(!1)}},V=async()=>{if(o){if(!j.name.trim()){E("  ");return}D(!0);try{await xe.updateRole(o.id,{name:j.name,description:j.description||void 0}),M("   ","success"),x(!1),_(),e==null||e()}catch(G){E(G.message||"   ")}finally{D(!1)}}},P=async()=>{if(o){D(!0);try{await xe.updateRole(o.id,{permissions:A}),M("   ","success"),y(!1),_(),e==null||e()}catch(G){M(G.message||"   ","error")}finally{D(!1)}}},Y=async()=>{if(o){D(!0);try{await xe.deleteRole(o.id),M("   ","success"),v(!1),d(null),_(),e==null||e()}catch(G){M(G.message||"   ","error")}finally{D(!1)}}},J=(G,te)=>{O(Z=>{const ue=Z.find(re=>re.resource===G);if(ue)if(ue.actions.includes(te)){const re=ue.actions.filter(H=>H!==te);return re.length===0?Z.filter(H=>H.resource!==G):Z.map(H=>H.resource===G?{...H,actions:re}:H)}else return Z.map(re=>re.resource===G?{...re,actions:[...re.actions,te]}:re);else return[...Z,{resource:G,actions:[te]}]})},K=(G,te)=>{const Z=A.find(ue=>ue.resource===G);return(Z==null?void 0:Z.actions.includes(te))||!1},se=G=>{const te=I4[G],Z=A.find(re=>re.resource===G),ue=(Z==null?void 0:Z.actions.length)===te.length;O(re=>ue?re.filter(H=>H.resource!==G):[...re.filter(pe=>pe.resource!==G),{resource:G,actions:[...te]}])};return i?t.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-slate-500",children:"  ..."})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsx("p",{className:"text-slate-600",children:"     "}),I?t.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-add-role",children:[t.jsx(Pt,{size:18}),"  "]}):t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-400 rounded-xl font-bold cursor-not-allowed",children:[t.jsx(wa,{size:18}),"  "]})]}),s.length===0?t.jsxs("div",{className:"py-16 text-center text-slate-400",children:[t.jsx(Ds,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:"    "}),t.jsx("p",{className:"text-sm mt-2",children:"   "})]}):t.jsx("div",{className:"divide-y divide-slate-100",children:s.map(G=>t.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors","data-testid":`row-role-${G.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:G.name}),G.isSystem&&t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-bold rounded-full",children:" "}),t.jsxs("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-xs font-bold rounded-full",children:[r[G.id]||0," "]})]}),G.description&&t.jsx("p",{className:"text-sm text-slate-500",children:G.description}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[G.permissions.slice(0,5).map(te=>t.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded",children:Xy[te.resource]},te.resource)),G.permissions.length>5&&t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:["+",G.permissions.length-5," "]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[k?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>X(G),className:"flex items-center gap-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors font-bold text-sm","data-testid":`button-permissions-role-${G.id}`,children:[t.jsx(la,{size:16}),""]}),t.jsx("button",{onClick:()=>Q(G),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"","data-testid":`button-edit-role-${G.id}`,children:t.jsx(Pa,{size:18})})]}):t.jsx("span",{className:"p-2 text-slate-300",title:"  ",children:t.jsx(wa,{size:18})}),!G.isSystem&&z&&t.jsx("button",{onClick:()=>W(G),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"","data-testid":`button-delete-role-${G.id}`,children:t.jsx(Ct,{size:18})}),!G.isSystem&&!z&&t.jsx("span",{className:"p-2 text-slate-300",title:"  ",children:t.jsx(Ct,{size:18})})]})]})},G.id))}),t.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50",children:t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",t.jsx("span",{className:"font-bold text-slate-700",children:s.length}),t.jsxs("span",{className:"mr-2",children:["  : ",t.jsx("span",{className:"font-bold text-slate-700",children:s.filter(G=>G.isSystem).length})]})]})}),u&&t.jsx(ls,{isOpen:u,onClose:()=>h(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Pt,{className:"text-[#C8A04F]",size:24}),"  "]}),C&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Gs,{size:18})," ",C]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:j.name,onChange:G=>w({...j,name:G.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"   ","data-testid":"input-role-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("textarea",{value:j.description,onChange:G=>w({...j,description:G.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"   ",rows:3,"data-testid":"input-role-description"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-add-role",children:""}),t.jsx("button",{onClick:ee,disabled:S,className:"flex-1 px-4 py-2.5 bg-[#0B1B3A] text-white rounded-xl font-bold hover:bg-[#1a2e56] transition-colors disabled:opacity-50","data-testid":"button-confirm-add-role",children:S?" ...":" "})]})]})}),f&&o&&t.jsx(ls,{isOpen:f,onClose:()=>x(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Pa,{className:"text-[#C8A04F]",size:24})," "]}),C&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[t.jsx(Gs,{size:18})," ",C]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:j.name,onChange:G=>w({...j,name:G.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500","data-testid":"input-edit-role-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("textarea",{value:j.description,onChange:G=>w({...j,description:G.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 resize-none",rows:3,"data-testid":"input-edit-role-description"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-edit-role",children:""}),t.jsx("button",{onClick:V,disabled:S,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-edit-role",children:S?" ...":" "})]})]})}),b&&o&&t.jsx(ls,{isOpen:b,onClose:()=>y(!1),children:t.jsxs("div",{className:"p-6 max-w-4xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[t.jsx(Ds,{className:"text-[#C8A04F]",size:24}),": ",o.name]}),o.isSystem&&t.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm font-bold rounded-full",children:" "})]}),t.jsx("div",{className:"flex-1 overflow-auto border border-slate-200 rounded-xl",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-right py-3 px-4 font-bold text-slate-600 border-b",children:""}),["view","create","edit","delete","approve","reject","export"].map(G=>t.jsx("th",{className:"text-center py-3 px-2 font-bold text-slate-600 border-b text-xs",children:O4[G]},G)),t.jsx("th",{className:"text-center py-3 px-2 font-bold text-slate-600 border-b text-xs",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:Object.keys(Xy).map(G=>{const te=I4[G],Z=A.find(re=>re.resource===G),ue=(Z==null?void 0:Z.actions.length)===te.length;return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:ue,onChange:()=>se(G),className:"w-4 h-4 rounded border-slate-300","data-testid":`checkbox-all-${G}`}),t.jsx("span",{className:"font-medium text-slate-700",children:Xy[G]})]})}),["view","create","edit","delete","approve","reject","export"].map(re=>t.jsx("td",{className:"text-center py-3 px-2",children:te.includes(re)?t.jsx("input",{type:"checkbox",checked:K(G,re),onChange:()=>J(G,re),className:"w-4 h-4 rounded border-slate-300","data-testid":`checkbox-${G}-${re}`}):t.jsx("span",{className:"text-slate-300",children:"-"})},re)),t.jsx("td",{className:"text-center py-3 px-2",children:te.filter(re=>!["view","create","edit","delete","approve","reject","export"].includes(re)).length>0?t.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:te.filter(re=>!["view","create","edit","delete","approve","reject","export"].includes(re)).map(re=>t.jsxs("label",{className:"flex items-center gap-1 text-xs bg-slate-100 px-1.5 py-0.5 rounded cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:K(G,re),onChange:()=>J(G,re),className:"w-3 h-3 rounded border-slate-300"}),O4[re]]},re))}):t.jsx("span",{className:"text-slate-300",children:"-"})})]},G)})})]})}),t.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-permissions",children:""}),t.jsxs("button",{onClick:P,disabled:S,className:"flex-1 px-4 py-2.5 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2","data-testid":"button-save-permissions",children:[t.jsx(ds,{size:18}),S?" ...":" "]})]})]})}),g&&o&&t.jsx(ls,{isOpen:g,onClose:()=>v(!1),children:t.jsxs("div",{className:"p-6 max-w-md w-full text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ct,{className:"text-red-600",size:32})}),t.jsx("h2",{className:"text-xl font-black text-slate-800 mb-2",children:" "}),t.jsxs("p",{className:"text-slate-600 mb-6",children:["       ",t.jsx("br",{}),t.jsx("span",{className:"font-bold text-slate-800",children:o.name}),t.jsx("br",{}),t.jsx("span",{className:"text-sm text-red-600",children:"     "})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-cancel-delete-role",children:""}),t.jsx("button",{onClick:Y,disabled:S,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors disabled:opacity-50","data-testid":"button-confirm-delete-role",children:S?" ...":" "})]})]})})]})},k5={POPUP:" ",BANNER:" ",BELL:" ",DASHBOARD_CARD:"  "},a0e={TEXT:" ",IMAGE:"",VIDEO:"",HTML:" HTML"},v1={DRAFT:{label:"",color:"text-slate-600",bg:"bg-slate-100"},ACTIVE:{label:"",color:"text-green-600",bg:"bg-green-100"},PAUSED:{label:"",color:"text-amber-600",bg:"bg-amber-100"},EXPIRED:{label:"",color:"text-red-600",bg:"bg-red-100"}},O5={ALL:" ",SPARE_PARTS_SHOP:"  ",RENTAL_COMPANY:" ",MAINTENANCE_CENTER:" ",INSURANCE_COMPANY:" ",SALES_REP:" "},r0e=e=>{switch(e){case"POPUP":return t.jsx(Or,{size:16});case"BANNER":return t.jsx(Gc,{size:16});case"BELL":return t.jsx(vr,{size:16});case"DASHBOARD_CARD":return t.jsx(Lt,{size:16})}},n0e=({onClose:e})=>{const[s,a]=T.useState([]),[r,n]=T.useState(!0),[i,l]=T.useState(!1),[o,d]=T.useState(null),[u,h]=T.useState(null),{addToast:f}=Dt(),[x,g]=T.useState({title:"",message:"",displayType:"POPUP",skippable:!0,contentType:"TEXT",mediaUrl:"",htmlContent:"",ctaLabel:"",ctaUrl:"",audienceType:"ALL",status:"ACTIVE",priority:1,startsAt:"",expiresAt:""}),[v,b]=T.useState({});T.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const S=await xe.getAllCampaigns();a(S.sort((D,M)=>new Date(M.createdAt).getTime()-new Date(D.createdAt).getTime()))}catch{f("    ","error")}finally{n(!1)}},j=()=>{g({title:"",message:"",displayType:"POPUP",skippable:!0,contentType:"TEXT",mediaUrl:"",htmlContent:"",ctaLabel:"",ctaUrl:"",audienceType:"ALL",status:"ACTIVE",priority:1,startsAt:"",expiresAt:""}),b({}),d(null)},w=()=>{var D,M,U,I;const S={};if((D=x.title)!=null&&D.trim()?x.title.length>100&&(S.title="   (  100 )"):S.title="  ",(M=x.message)!=null&&M.trim()?x.message.length>500&&(S.message="   (  500 )"):S.message="  ",(x.contentType==="IMAGE"||x.contentType==="VIDEO")&&!((U=x.mediaUrl)!=null&&U.trim())&&(S.mediaUrl="      "),(I=x.ctaUrl)!=null&&I.trim())try{new URL(x.ctaUrl)}catch{S.ctaUrl="   "}if(x.startsAt&&x.expiresAt){const k=new Date(x.startsAt);new Date(x.expiresAt)<=k&&(S.expiresAt="       ")}return(x.priority<1||x.priority>100)&&(S.priority="     1  100"),b(S),Object.keys(S).length===0},A=async()=>{if(w())try{o?(await xe.updateCampaign(o.id,x),f("   ","success")):(await xe.createCampaign(x),f("   ","success")),l(!1),j(),y()}catch{f("    ","error")}},O=async(S,D)=>{try{await xe.updateCampaignStatus(S,D),f(` ${D==="ACTIVE"?"":D==="PAUSED"?"":""} `,"success"),y()}catch{f("     ","error")}},C=async S=>{try{await xe.deleteCampaign(S),f("   ","success"),h(null),y()}catch{f("    ","error")}},E=S=>{d(S),g({title:S.title,message:S.message,displayType:S.displayType,skippable:S.skippable,contentType:S.contentType,mediaUrl:S.mediaUrl||"",htmlContent:S.htmlContent||"",ctaLabel:S.ctaLabel||"",ctaUrl:S.ctaUrl||"",audienceType:S.audienceType,status:S.status,priority:S.priority,startsAt:S.startsAt||"",expiresAt:S.expiresAt||""}),l(!0)};return t.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-6 mb-6 text-white",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:t.jsx(ya,{size:28})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:" "}),t.jsx("p",{className:"text-purple-200 text-sm",children:"   "})]})]}),t.jsxs("button",{onClick:()=>{j(),l(!0)},className:"flex items-center gap-2 bg-white text-purple-600 px-5 py-2.5 rounded-xl font-bold hover:bg-purple-50 transition-colors","data-testid":"button-create-campaign",children:[t.jsx(Pt,{size:20})," "]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold",children:s.length}),t.jsx("div",{className:"text-purple-200 text-sm",children:" "})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-green-300",children:s.filter(S=>S.status==="ACTIVE").length}),t.jsx("div",{className:"text-purple-200 text-sm",children:" "})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-amber-300",children:s.filter(S=>S.status==="DRAFT").length}),t.jsx("div",{className:"text-purple-200 text-sm",children:""})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[t.jsx("div",{className:"text-3xl font-bold text-slate-300",children:s.filter(S=>S.status==="PAUSED"||S.status==="EXPIRED").length}),t.jsx("div",{className:"text-purple-200 text-sm",children:"/"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100",children:t.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "})}),r?t.jsxs("div",{className:"p-8 text-center text-slate-500",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-2"})," ..."]}):s.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(ya,{size:48,className:"text-slate-300 mx-auto mb-3"}),t.jsx("p",{className:"text-slate-500",children:"    "}),t.jsx("button",{onClick:()=>{j(),l(!0)},className:"mt-4 text-purple-600 font-bold hover:underline",children:"  "})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 text-right",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:" "}),t.jsx("th",{className:"px-4 py-3 text-sm font-bold text-slate-600",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(S=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-campaign-${S.id}`,children:[t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-slate-800",children:S.title}),t.jsx("div",{className:"text-sm text-slate-500 line-clamp-1",children:S.message})]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"p-1.5 bg-slate-100 rounded",children:r0e(S.displayType)}),t.jsx("span",{className:"text-sm text-slate-600",children:k5[S.displayType]})]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-600",children:[t.jsx(hh,{size:14}),O5[S.audienceType]]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${v1[S.status].bg} ${v1[S.status].color}`,children:[S.status==="ACTIVE"&&t.jsx(al,{size:12}),v1[S.status].label]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:"text-sm font-mono bg-slate-100 px-2 py-1 rounded",children:S.priority})}),t.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:hs(S.createdAt)}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-1",children:[S.status==="ACTIVE"?t.jsx("button",{onClick:()=>O(S.id,"PAUSED"),className:"p-2 text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"","data-testid":`button-pause-${S.id}`,children:t.jsx(gF,{size:18})}):S.status!=="EXPIRED"?t.jsx("button",{onClick:()=>O(S.id,"ACTIVE"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"","data-testid":`button-activate-${S.id}`,children:t.jsx(Lu,{size:18})}):null,t.jsx("button",{onClick:()=>E(S),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"","data-testid":`button-edit-${S.id}`,children:t.jsx(Pa,{size:18})}),t.jsx("button",{onClick:()=>h(S.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"","data-testid":`button-delete-${S.id}`,children:t.jsx(Ct,{size:18})})]})})]},S.id))})]})})]}),i&&t.jsx(ls,{isOpen:i,onClose:()=>{l(!1),j()},children:t.jsxs("div",{className:"p-6 max-h-[85vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(ya,{className:"text-purple-600"}),o?" ":"  "]}),t.jsx("button",{onClick:()=>{l(!1),j()},className:"p-2 hover:bg-slate-100 rounded-lg",children:t.jsx(St,{size:20})})]}),t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:x.title,onChange:S=>g({...x,title:S.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent ${v.title?"border-red-300":"border-slate-200"}`,placeholder:":   ","data-testid":"input-campaign-title"}),v.title&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.title})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:x.message,onChange:S=>g({...x,message:S.target.value}),rows:3,className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none ${v.message?"border-red-300":"border-slate-200"}`,placeholder:"    ...","data-testid":"input-campaign-message"}),v.message&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.message})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("select",{value:x.displayType,onChange:S=>g({...x,displayType:S.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-display-type",children:Object.entries(k5).map(([S,D])=>t.jsx("option",{value:S,children:D},S))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("select",{value:x.contentType,onChange:S=>g({...x,contentType:S.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-content-type",children:Object.entries(a0e).map(([S,D])=>t.jsx("option",{value:S,children:D},S))})]})]}),(x.contentType==="IMAGE"||x.contentType==="VIDEO")&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"url",value:x.mediaUrl,onChange:S=>g({...x,mediaUrl:S.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.mediaUrl?"border-red-300":"border-slate-200"}`,placeholder:"https://example.com/image.jpg","data-testid":"input-media-url"}),v.mediaUrl&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.mediaUrl}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:x.contentType==="IMAGE"?"   (jpg, png, gif)":"   (mp4, webm)"})]}),x.contentType==="HTML"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" HTML"}),t.jsx("textarea",{value:x.htmlContent,onChange:S=>g({...x,htmlContent:S.target.value}),rows:4,className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 font-mono text-sm resize-none",placeholder:"<div>...</div>","data-testid":"input-html-content"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl",children:[t.jsx("input",{type:"checkbox",id:"skippable",checked:x.skippable,onChange:S=>g({...x,skippable:S.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-purple-600 focus:ring-purple-500","data-testid":"checkbox-skippable"}),t.jsxs("label",{htmlFor:"skippable",className:"text-sm",children:[t.jsx("span",{className:"font-bold text-slate-700",children:"  "}),t.jsx("p",{className:"text-slate-500 text-xs",children:"   "})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"   ()"}),t.jsx("input",{type:"text",value:x.ctaLabel,onChange:S=>g({...x,ctaLabel:S.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500",placeholder:":  ","data-testid":"input-cta-label"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  ()"}),t.jsx("input",{type:"url",value:x.ctaUrl,onChange:S=>g({...x,ctaUrl:S.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.ctaUrl?"border-red-300":"border-slate-200"}`,placeholder:"https://...","data-testid":"input-cta-url"}),v.ctaUrl&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.ctaUrl})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:" "}),t.jsx("select",{value:x.audienceType,onChange:S=>g({...x,audienceType:S.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-audience",children:Object.entries(O5).map(([S,D])=>t.jsx("option",{value:S,children:D},S))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:""}),t.jsx("input",{type:"number",min:"1",max:"100",value:x.priority,onChange:S=>g({...x,priority:parseInt(S.target.value)||1}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.priority?"border-red-300":"border-slate-200"}`,"data-testid":"input-priority"}),v.priority&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.priority})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  ()"}),t.jsx("input",{type:"datetime-local",value:x.startsAt,onChange:S=>g({...x,startsAt:S.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"input-starts-at"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:"  ()"}),t.jsx("input",{type:"datetime-local",value:x.expiresAt,onChange:S=>g({...x,expiresAt:S.target.value}),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-purple-500 ${v.expiresAt?"border-red-300":"border-slate-200"}`,"data-testid":"input-expires-at"}),v.expiresAt&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.expiresAt})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:""}),t.jsxs("select",{value:x.status,onChange:S=>g({...x,status:S.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500","data-testid":"select-status",children:[t.jsx("option",{value:"DRAFT",children:""}),t.jsx("option",{value:"ACTIVE",children:""}),t.jsx("option",{value:"PAUSED",children:""})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[t.jsx("button",{onClick:()=>{l(!1),j()},className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl font-bold transition-colors",children:""}),t.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-5 py-2.5 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition-colors","data-testid":"button-save-campaign",children:[t.jsx(ds,{size:18}),o?" ":" "]})]})]})]})}),u&&t.jsx(ls,{isOpen:!!u,onClose:()=>h(null),children:t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ma,{size:32,className:"text-red-600"})}),t.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:" "}),t.jsx("p",{className:"text-slate-600 mb-6",children:"            ."}),t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx("button",{onClick:()=>h(null),className:"px-5 py-2.5 text-slate-600 hover:bg-slate-100 rounded-xl font-bold transition-colors",children:""}),t.jsxs("button",{onClick:()=>C(u),className:"flex items-center gap-2 px-5 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-colors","data-testid":"button-confirm-delete",children:[t.jsx(Ct,{size:18})," "]})]})]})})]})};let Np=null,wp=null,Sp=null,Kj=0;const i0e=3e4,ci=()=>{Np=null,wp=null,Sp=null,Kj=0},l0e=async()=>{const e=Date.now();if(Np&&wp&&Sp&&e-Kj<i0e)return{settings:Np,levels:wp,matrix:Sp};const[s,a,r]=await Promise.all([xe.getGlobalPricingSettings(),xe.getPriceLevels(),xe.getProductPriceMatrix()]);return Np=s,wp=a,Sp=r,Kj=e,{settings:s,levels:a,matrix:r}},o0e=(e,s)=>{const{roundingMode:a,roundingDecimals:r}=s,n=Math.pow(10,r);switch(a){case"ROUND":return Math.round(e*n)/n;case"CEIL":return Math.ceil(e*n)/n;case"FLOOR":return Math.floor(e*n)/n;case"NONE":default:return e}},Gp=(e,s,a)=>{const r=a.find(n=>n.productId===e&&n.priceLevelId===s);return r?r.price:null},hE=(e,s,a,r,n=new Set)=>{if(n.has(s.id))return null;if(n.add(s.id),s.isBaseLevel)return Gp(e,s.id,r);if(!s.baseLevelId||!s.adjustmentType||s.adjustmentValue===void 0)return null;const i=a.find(o=>o.id===s.baseLevelId);if(!i)return null;let l=Gp(e,i.id,r);return l===null&&(l=hE(e,i,a,r,n)),l===null?null:s.adjustmentType==="PERCENT"?l*(1+s.adjustmentValue/100):s.adjustmentType==="FIXED"?l+s.adjustmentValue:l},BF=(e,s,a,r)=>{const n=a.find(l=>l.id===s);if(!n||!n.isActive)return null;const i=Gp(e,s,r);return i!==null?i:hE(e,n,a,r)},c0e=(e,s,a,r)=>{if(e.productId&&e.productId!==s)return null;const n=new Date;if(e.validFrom&&new Date(e.validFrom)>n||e.validTo&&new Date(e.validTo)<n)return null;if(e.useFixedPrice&&e.fixedPrice!==void 0)return e.fixedPrice;if(e.usePercentOfLevel&&e.percentOfLevel!==void 0&&e.priceLevelIdForPercent){const i=BF(s,e.priceLevelIdForPercent,a,r);if(i!==null)return i*(e.percentOfLevel/100)}return null},d0e=async(e,s,a=1)=>{var n,i,l,o,d;const r={finalPrice:null,basePrice:null,sourcePrecedence:null,sourceLevelId:null,roundingApplied:!1,calculationSteps:[]};try{const{settings:u,levels:h,matrix:f}=await l0e();r.calculationSteps.push("   ");let x=null;s&&(x=await xe.getCustomerPricingProfile(s),x&&r.calculationSteps.push(`     : ${s}`));let g=null;x!=null&&x.defaultPriceLevelId?(g=x.defaultPriceLevelId,r.calculationSteps.push(`  : ${g}`)):u.defaultPriceLevelId&&(g=u.defaultPriceLevelId,r.calculationSteps.push(`  : ${g}`));const v=h.find(j=>j.id===g);v&&(r.sourceLevelName=v.name);let b=null;for(const j of u.pricePrecedenceOrder){if(b!==null)break;switch(j){case"CUSTOM_RULE":if(x!=null&&x.allowCustomRules&&((n=x.customRules)!=null&&n.length))for(const w of x.customRules){const A=c0e(w,e,h,f);if(A!==null){b=A,r.sourcePrecedence="CUSTOM_RULE",r.calculationSteps.push(`   - : ${A}`);break}}break;case"LEVEL_EXPLICIT":if(g){const w=Gp(e,g,f);w!==null&&(b=w,r.sourcePrecedence="LEVEL_EXPLICIT",r.sourceLevelId=g,r.calculationSteps.push(`    ${g}: ${w}`))}break;case"LEVEL_DERIVED":if(g){const w=h.find(A=>A.id===g);if(w&&!w.isBaseLevel){const A=hE(e,w,h,f);A!==null&&(b=A,r.sourcePrecedence="LEVEL_DERIVED",r.sourceLevelId=g,r.calculationSteps.push(`    ${w.baseLevelId}: ${A}`))}}break}}if(b===null&&u.allowFallbackToOtherLevels){const j=u.fallbackLevelId||((i=h.find(w=>w.isBaseLevel&&w.isActive))==null?void 0:i.id);j&&j!==g&&(b=BF(e,j,h,f),b!==null&&(r.sourceLevelId=j,r.calculationSteps.push(`   ${j}: ${b}`)))}if(b===null)return r.calculationSteps.push("    "),r;r.basePrice=b;let y=b;if(x){const j=x.extraMarkupPercent||0,w=x.extraDiscountPercent||0;!u.allowNegativeDiscounts&&w>j&&r.calculationSteps.push("    -   ");const A=u.allowNegativeDiscounts?w:Math.min(w,j),O=j-A;O!==0&&(y=y*(1+O/100),r.appliedMarkup=j,r.appliedDiscount=A,r.calculationSteps.push(`  ${j}%  ${A}%`)),x.priceFloor&&y<x.priceFloor&&(y=x.priceFloor,r.calculationSteps.push(`   : ${x.priceFloor}`)),x.priceCeiling&&y>x.priceCeiling&&(y=x.priceCeiling,r.calculationSteps.push(`   : ${x.priceCeiling}`))}if(u.minPriceFloor&&y<u.minPriceFloor&&(y=u.minPriceFloor,r.calculationSteps.push(`   : ${u.minPriceFloor}`)),u.maxPriceCeiling&&y>u.maxPriceCeiling&&(y=u.maxPriceCeiling,r.calculationSteps.push(`   : ${u.maxPriceCeiling}`)),u.enableVolumeDiscounts&&((l=u.volumeDiscountRules)!=null&&l.length)){for(const j of u.volumeDiscountRules)if(j.isActive&&!(a<j.minQty)&&!(j.maxQty&&a>j.maxQty)&&!(!j.appliesToAllProducts&&j.productIds&&!j.productIds.includes(e))){if(j.discountType==="PERCENT"){const w=y*(j.discountValue/100);y-=w,r.appliedVolumeDiscount=j.discountValue,r.calculationSteps.push(`  ${j.discountValue}%`)}else j.discountType==="FIXED"&&(y-=j.discountValue,r.appliedVolumeDiscount=j.discountValue,r.calculationSteps.push(`  : ${j.discountValue}`));break}}if(u.enableTimePromotions&&((o=u.timePromotions)!=null&&o.length)){const j=new Date;for(const w of u.timePromotions)if(w.isActive&&!(new Date(w.startsAt)>j||new Date(w.endsAt)<j)&&!(!w.appliesToAllProducts&&w.productIds&&!w.productIds.includes(e))&&!((d=w.priceLevelIds)!=null&&d.length&&r.sourceLevelId&&!w.priceLevelIds.includes(r.sourceLevelId))){w.discountType==="PERCENT"?(y-=y*(w.discountValue/100),r.appliedPromotion=w.name,r.calculationSteps.push(` ${w.name}:  ${w.discountValue}%`)):w.discountType==="FIXED"&&(y-=w.discountValue,r.appliedPromotion=w.name,r.calculationSteps.push(` ${w.name}:  ${w.discountValue}`));break}}if(u.roundingMode!=="NONE"){const j=o0e(y,u);j!==y&&(r.roundingApplied=!0,r.calculationSteps.push(`  ${y}  ${j}`)),y=j}y<0&&(y=0,r.calculationSteps.push("    ")),r.finalPrice=y,r.calculationSteps.push(` : ${y}`)}catch(u){console.error("Error calculating price:",u),r.errors=[`   : ${u}`]}return r},u0e=async(e,s,a)=>d0e(e,s,a),m0e=({onRefresh:e})=>{const{t:s,i18n:a}=Jt(),{addToast:r}=Dt(),n=a.dir()==="rtl",[i,l]=T.useState("LEVELS"),[o,d]=T.useState(!0),[u,h]=T.useState([]),[f,x]=T.useState([]),[g,v]=T.useState([]),[b,y]=T.useState(null),[j,w]=T.useState([]),[A,O]=T.useState([]),C=T.useCallback(async()=>{d(!0);try{const[D,M,U,I,k,z]=await Promise.all([xe.getPriceLevels(),xe.getProductPriceMatrix(),xe.getAllCustomerPricingProfiles(),xe.getGlobalPricingSettings(),xe.searchProducts(""),xe.getAllUsers()]);h(D),x(M),v(U),y(I),w(k),O(z)}catch(D){console.error("Error loading pricing data:",D),r("error","    ")}finally{d(!1)}},[r]);T.useEffect(()=>{C()},[C]);const E=()=>{ci(),C(),e==null||e()},S=[{id:"LEVELS",label:" ",icon:t.jsx(Pr,{size:18})},{id:"MATRIX",label:" ",icon:t.jsx(or,{size:18})},{id:"CUSTOMERS",label:" ",icon:t.jsx(Gt,{size:18})},{id:"SETTINGS",label:" ",icon:t.jsx(la,{size:18})}];return o?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#C8A04F] border-t-transparent"})}):t.jsxs("div",{className:"space-y-6",dir:n?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:" "}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"      "})]}),t.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-xl text-sm font-bold text-slate-700 transition-colors","data-testid":"button-refresh-pricing",children:[t.jsx(Qt,{size:16}),""]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(Xx,{label:" ",value:u.filter(D=>D.isActive).length,total:u.length,icon:t.jsx(Pr,{}),color:"blue"}),t.jsx(Xx,{label:" ",value:f.length,icon:t.jsx(or,{}),color:"green"}),t.jsx(Xx,{label:" ",value:g.length,icon:t.jsx(Gt,{}),color:"amber"}),t.jsx(Xx,{label:" ",value:g.reduce((D,M)=>{var U;return D+(((U=M.customRules)==null?void 0:U.length)||0)},0),icon:t.jsx(Vj,{}),color:"purple"})]}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsx("div",{className:"flex border-b border-slate-200",children:S.map(D=>t.jsxs("button",{onClick:()=>l(D.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-4 text-sm font-bold transition-colors ${i===D.id?"bg-[#0B1B3A] text-white":"bg-white text-slate-600 hover:bg-slate-50"}`,"data-testid":`tab-${D.id.toLowerCase()}`,children:[D.icon,D.label]},D.id))}),t.jsxs("div",{className:"p-6",children:[i==="LEVELS"&&t.jsx(f0e,{levels:u,onUpdate:C,addToast:r}),i==="MATRIX"&&t.jsx(h0e,{matrix:f,levels:u,products:j,onUpdate:C,addToast:r}),i==="CUSTOMERS"&&t.jsx(x0e,{profiles:g,levels:u,customers:A,products:j,onUpdate:C,addToast:r}),i==="SETTINGS"&&b&&t.jsx(p0e,{settings:b,levels:u,products:j,customers:A,onUpdate:C,addToast:r})]})]})]})},Xx=({label:e,value:s,total:a,icon:r,color:n})=>{const i={blue:"bg-blue-100 text-blue-600",green:"bg-emerald-100 text-emerald-600",amber:"bg-amber-100 text-amber-600",purple:"bg-purple-100 text-purple-600"};return t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:e}),t.jsxs("p",{className:"text-2xl font-black text-slate-800 mt-1",children:[s,a!==void 0&&t.jsxs("span",{className:"text-sm text-slate-400 font-normal",children:["/",a]})]})]}),t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${i[n]}`,children:r})]})})},f0e=({levels:e,onUpdate:s,addToast:a})=>{const[r,n]=T.useState(null),[i,l]=T.useState(!1),[o,d]=T.useState({code:"",name:"",description:"",isBaseLevel:!0,isActive:!0,sortOrder:e.length+1}),u=async()=>{if(!o.code||!o.name){a("error","  ");return}try{await xe.addPriceLevel(o),a("success","   "),l(!1),d({code:"",name:"",description:"",isBaseLevel:!0,isActive:!0,sortOrder:e.length+2}),ci(),s()}catch{a("error","   ")}},h=async()=>{if(r)try{await xe.updatePriceLevel(r.id,r),a("success","   "),n(null),ci(),s()}catch{a("error","   ")}},f=async v=>{if(confirm("      "))try{await xe.deletePriceLevel(v),a("success","   "),ci(),s()}catch{a("error","   ")}},x=async v=>{try{await xe.updatePriceLevel(v.id,{isActive:!v.isActive}),ci(),s()}catch{a("error","   ")}},g=e.filter(v=>v.isBaseLevel);return t.jsxs("div",{className:"space-y-6",children:[i?t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("input",{type:"text",value:o.code||"",onChange:v=>d({...o,code:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:": L2","data-testid":"input-level-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("input",{type:"text",value:o.name||"",onChange:v=>d({...o,name:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:":  ","data-testid":"input-level-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:o.description||"",onChange:v=>d({...o,description:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:" "})]})]}),t.jsx("div",{className:"mt-4 flex items-center gap-4",children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:o.isBaseLevel,onChange:v=>d({...o,isBaseLevel:v.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm text-slate-600",children:" "})]})}),!o.isBaseLevel&&t.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 bg-amber-50 p-4 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:o.baseLevelId||"",onChange:v=>d({...o,baseLevelId:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),g.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:o.adjustmentType||"",onChange:v=>d({...o,adjustmentType:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"PERCENT",children:"  %"}),t.jsx("option",{value:"FIXED",children:" "})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"number",value:o.adjustmentValue||"",onChange:v=>d({...o,adjustmentValue:parseFloat(v.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:": 10"})]})]}),t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsxs("button",{onClick:u,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700 flex items-center gap-2","data-testid":"button-save-level",children:[t.jsx(ds,{size:16})," "]}),t.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]}):t.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-xl text-sm font-bold hover:bg-[#1a2e56] transition-colors","data-testid":"button-add-level",children:[t.jsx(Pt,{size:16}),"   "]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-100",children:[t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-center px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-center px-4 py-3 text-sm font-bold text-slate-600",children:""})]})}),t.jsx("tbody",{children:e.sort((v,b)=>v.sortOrder-b.sortOrder).map((v,b)=>{var y;return t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-slate-400 text-sm",children:b+1})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 bg-slate-200 rounded text-sm font-mono",children:v.code})}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("span",{className:"font-bold text-slate-800",children:v.name}),v.description&&t.jsx("p",{className:"text-xs text-slate-500",children:v.description})]}),t.jsx("td",{className:"px-4 py-3",children:v.isBaseLevel?t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-bold",children:""}):t.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded text-xs font-bold",children:""})}),t.jsx("td",{className:"px-4 py-3",children:!v.isBaseLevel&&v.adjustmentType&&t.jsxs("span",{className:"text-sm text-slate-600",children:[v.adjustmentType==="PERCENT"?`${v.adjustmentValue}%`:`${v.adjustmentValue} .`," ",""," ",t.jsx("span",{className:"font-bold",children:((y=e.find(j=>j.id===v.baseLevelId))==null?void 0:y.name)||"-"})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("button",{onClick:()=>x(v),className:`px-3 py-1 rounded-full text-xs font-bold ${v.isActive?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:v.isActive?"":""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>n(v),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",title:"",children:t.jsx(Pa,{size:16})}),t.jsx("button",{onClick:()=>f(v.id),className:"p-2 hover:bg-red-100 rounded-lg text-red-600",title:"",children:t.jsx(Ct,{size:16})})]})})]},v.id)})})]})}),r&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-lg",children:[t.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:" "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:r.code,onChange:v=>n({...r,code:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:r.name,onChange:v=>n({...r,name:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:r.description||"",onChange:v=>n({...r,description:v.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),t.jsxs("div",{className:"flex gap-2 mt-6",children:[t.jsx("button",{onClick:h,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:" "}),t.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]})})]})},h0e=({matrix:e,levels:s,products:a,onUpdate:r,addToast:n})=>{const[i,l]=T.useState(""),[o,d]=T.useState(""),[u,h]=T.useState(!1),[f,x]=T.useState({productId:"",priceLevelId:"",price:0}),[g,v]=T.useState(null),b=T.useMemo(()=>e.filter(C=>{var M,U;const E=a.find(I=>I.id===C.productId),S=!i||((M=E==null?void 0:E.partNumber)==null?void 0:M.toLowerCase().includes(i.toLowerCase()))||((U=E==null?void 0:E.name)==null?void 0:U.toLowerCase().includes(i.toLowerCase())),D=!o||C.priceLevelId===o;return S&&D}),[e,a,i,o]),y=async()=>{if(!f.productId||!f.priceLevelId||!f.price){n("error","  ");return}try{await xe.addProductPriceEntry(f),n("success","   "),h(!1),x({productId:"",priceLevelId:"",price:0}),ci(),r()}catch{n("error","   ")}},j=async()=>{if(g)try{await xe.updateProductPriceEntry(g.id,g),n("success","   "),v(null),ci(),r()}catch{n("error","   ")}},w=async C=>{if(confirm("      "))try{await xe.deleteProductPriceEntry(C),n("success","   "),ci(),r()}catch{n("error","   ")}},A=()=>{const C=e.map(D=>{const M=a.find(I=>I.id===D.productId),U=s.find(I=>I.id===D.priceLevelId);return{" ":(M==null?void 0:M.partNumber)||""," ":(M==null?void 0:M.name)||"",:(U==null?void 0:U.name)||"",:D.price}}),E=Ea.json_to_sheet(C),S=Ea.book_new();Ea.book_append_sheet(S,E,"Price Matrix"),rd(S,"price_matrix.xlsx"),n("success","   ")},O=async C=>{var S;const E=(S=C.target.files)==null?void 0:S[0];if(E){try{const D=new FileReader;D.onload=async M=>{var L;const U=new Uint8Array((L=M.target)==null?void 0:L.result),I=ad(U,{type:"array"}),k=I.SheetNames[0],z=I.Sheets[k],_=Ea.sheet_to_json(z),q=[];for(const Q of _){const X=Q[" "]||Q.partNumber,W=Q.||Q.level,ee=parseFloat(Q.||Q.price),V=a.find(Y=>Y.partNumber===X),P=s.find(Y=>Y.name===W||Y.code===W);V&&P&&!isNaN(ee)&&q.push({productId:V.id,priceLevelId:P.id,price:ee})}if(q.length>0){const Q=await xe.bulkImportPriceMatrix(q);n("success",`  ${Q.imported}    ${Q.updated} `),Q.errors.length>0&&console.error("Import errors:",Q.errors),ci(),r()}else n("warning","      ")},D.readAsArrayBuffer(E)}catch{n("error","   ")}C.target.value=""}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[t.jsxs("div",{className:"flex gap-4 flex-1",children:[t.jsxs("div",{className:"relative flex-1 max-w-xs",children:[t.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",value:i,onChange:C=>l(C.target.value),placeholder:"    ...",className:"w-full pr-10 pl-4 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"input-search-matrix"})]}),t.jsxs("select",{value:o,onChange:C=>d(C.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),s.map(C=>t.jsx("option",{value:C.id,children:C.name},C.id))]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-price",children:[t.jsx(Pt,{size:16}),"  "]}),t.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(cr,{size:16})," "]}),t.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg text-sm font-bold hover:bg-amber-700 cursor-pointer",children:[t.jsx(ga,{size:16})," ",t.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:O,className:"hidden"})]})]})]}),u&&t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:f.productId||"",onChange:C=>x({...f,productId:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-product",children:[t.jsx("option",{value:"",children:" "}),a.slice(0,100).map(C=>t.jsxs("option",{value:C.id,children:[C.partNumber," - ",C.name]},C.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:f.priceLevelId||"",onChange:C=>x({...f,priceLevelId:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-level",children:[t.jsx("option",{value:"",children:" "}),s.filter(C=>C.isActive).map(C=>t.jsx("option",{value:C.id,children:C.name},C.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsx("input",{type:"number",value:f.price||"",onChange:C=>x({...f,price:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"0.00","data-testid":"input-price"})]})]}),t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsxs("button",{onClick:y,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700 flex items-center gap-2","data-testid":"button-save-price",children:[t.jsx(ds,{size:16})," "]}),t.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]}),t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-100",children:[t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-center px-4 py-3 text-sm font-bold text-slate-600",children:""})]})}),t.jsx("tbody",{children:b.slice(0,50).map(C=>{const E=a.find(D=>D.id===C.productId),S=s.find(D=>D.id===C.priceLevelId);return t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"font-mono text-sm",children:(E==null?void 0:E.partNumber)||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-700",children:(E==null?void 0:E.name)||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 bg-slate-200 rounded text-sm",children:(S==null?void 0:S.name)||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"font-bold text-emerald-600",children:[C.price.toFixed(2)," ."]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>v(C),className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:t.jsx(Pa,{size:16})}),t.jsx("button",{onClick:()=>w(C.id),className:"p-2 hover:bg-red-100 rounded-lg text-red-600",children:t.jsx(Ct,{size:16})})]})})]},C.id)})})]}),b.length>50&&t.jsxs("p",{className:"text-center text-sm text-slate-500 mt-4",children:[" 50  ",b.length," "]})]}),g&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:" "}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"number",value:g.price,onChange:C=>v({...g,price:parseFloat(C.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})}),t.jsxs("div",{className:"flex gap-2 mt-6",children:[t.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:" "}),t.jsx("button",{onClick:()=>v(null),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-300",children:""})]})]})})]})},x0e=({profiles:e,levels:s,customers:a,products:r,onUpdate:n,addToast:i})=>{var O,C;const[l,o]=T.useState(""),[d,u]=T.useState(null),[h,f]=T.useState(null),x=T.useMemo(()=>l?a.filter(E=>{var S,D,M;return((S=E.user.name)==null?void 0:S.toLowerCase().includes(l.toLowerCase()))||((D=E.user.clientId)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||((M=E.profile.companyName)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))}):a,[a,l]),g=E=>e.find(S=>S.customerId===E)||null,v=E=>{var D;u(E);const S=g(E);f(S||{customerId:E,defaultPriceLevelId:((D=s[0])==null?void 0:D.id)||"",allowCustomRules:!1,customRules:[]})},b=async()=>{if(h)try{await xe.upsertCustomerPricingProfile(h),i("success","    "),ci(),n()}catch{i("error","    ")}},y=async()=>{if(d&&confirm("        "))try{await xe.deleteCustomerPricingProfile(d),i("success","   "),u(null),f(null),ci(),n()}catch{i("error","    ")}},j=()=>{if(!h)return;const E={id:`CR${Date.now()}`,useFixedPrice:!1,usePercentOfLevel:!1};f({...h,customRules:[...h.customRules||[],E]})},w=(E,S)=>{h&&f({...h,customRules:(h.customRules||[]).map(D=>D.id===E?{...D,...S}:D)})},A=E=>{h&&f({...h,customRules:(h.customRules||[]).filter(S=>S.id!==E)})};return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-1 bg-slate-50 rounded-xl p-4 max-h-[600px] overflow-y-auto",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",value:l,onChange:E=>o(E.target.value),placeholder:"    ...",className:"w-full pr-10 pl-4 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"input-search-customers"})]})}),t.jsx("div",{className:"space-y-2",children:x.map(({user:E,profile:S})=>{const D=g(E.id)!==null;return t.jsx("button",{onClick:()=>v(E.id),className:`w-full text-right p-3 rounded-lg transition-colors ${d===E.id?"bg-[#0B1B3A] text-white":"bg-white hover:bg-slate-100"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm",children:S.companyName||E.name}),t.jsx("p",{className:`text-xs ${d===E.id?"text-slate-300":"text-slate-500"}`,children:E.clientId})]}),D&&t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${d===E.id?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:""})]})},E.id)})})]}),t.jsx("div",{className:"lg:col-span-2",children:h?t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-bold text-slate-800",children:"  "}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-profile",children:[t.jsx(ds,{size:16})," "]}),g(h.customerId)&&t.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-bold hover:bg-red-700",children:[t.jsx(Ct,{size:16})," "]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsx("select",{value:h.defaultPriceLevelId,onChange:E=>f({...h,defaultPriceLevelId:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-default-level",children:s.filter(E=>E.isActive).map(E=>t.jsx("option",{value:E.id,children:E.name},E.id))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  %"}),t.jsx("input",{type:"number",value:h.extraMarkupPercent||"",onChange:E=>f({...h,extraMarkupPercent:parseFloat(E.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  %"}),t.jsx("input",{type:"number",value:h.extraDiscountPercent||"",onChange:E=>f({...h,extraDiscountPercent:parseFloat(E.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"0"})]})]})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:h.allowCustomRules,onChange:E=>f({...h,allowCustomRules:E.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm font-bold text-slate-700",children:"  "})]}),h.allowCustomRules&&t.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-1 bg-slate-100 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-200",children:[t.jsx(Pt,{size:14}),"  "]})]}),h.allowCustomRules&&(((O=h.customRules)==null?void 0:O.length)||0)>0&&t.jsx("div",{className:"space-y-4",children:(C=h.customRules)==null?void 0:C.map(E=>t.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("span",{className:"text-sm font-bold text-slate-700",children:" "}),t.jsx("button",{onClick:()=>A(E.id),className:"p-1 hover:bg-red-100 rounded text-red-600",children:t.jsx(St,{size:16})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" ()"}),t.jsxs("select",{value:E.productId||"",onChange:S=>w(E.id,{productId:S.target.value||void 0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),r.slice(0,50).map(S=>t.jsx("option",{value:S.id,children:S.partNumber},S.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsxs("select",{value:E.useFixedPrice?"FIXED":E.usePercentOfLevel?"PERCENT":"",onChange:S=>{const D=S.target.value;w(E.id,{useFixedPrice:D==="FIXED",usePercentOfLevel:D==="PERCENT"})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"FIXED",children:" "}),t.jsx("option",{value:"PERCENT",children:"  "})]})]}),E.useFixedPrice&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsx("input",{type:"number",value:E.fixedPrice||"",onChange:S=>w(E.id,{fixedPrice:parseFloat(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),E.usePercentOfLevel&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" %"}),t.jsx("input",{type:"number",value:E.percentOfLevel||"",onChange:S=>w(E.id,{percentOfLevel:parseFloat(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:" "}),t.jsxs("select",{value:E.priceLevelIdForPercent||"",onChange:S=>w(E.id,{priceLevelIdForPercent:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" "}),s.filter(S=>S.isActive).map(S=>t.jsx("option",{value:S.id,children:S.name},S.id))]})]})]})]})]},E.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("textarea",{value:h.notes||"",onChange:E=>f({...h,notes:E.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",rows:3,placeholder:" ..."})]})]}):t.jsxs("div",{className:"bg-slate-50 rounded-xl p-8 text-center",children:[t.jsx(Gt,{size:48,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-500",children:"      "})]})})]})},p0e=({settings:e,levels:s,products:a,customers:r,onUpdate:n,addToast:i})=>{const[l,o]=T.useState(e),[d,u]=T.useState(""),[h,f]=T.useState(""),[x,g]=T.useState(null),[v,b]=T.useState(!1),y=async()=>{try{await xe.saveGlobalPricingSettings(l),i("success","   "),ci(),n()}catch{i("error","   ")}},j=async()=>{if(!d){i("error","  ");return}b(!0);try{const O=await u0e(d,h||null);g(O)}catch{i("error","  ")}finally{b(!1)}},w=(O,C)=>{const E=[...l.pricePrecedenceOrder],S=C==="up"?O-1:O+1;S<0||S>=E.length||([E[O],E[S]]=[E[S],E[O]],o({...l,pricePrecedenceOrder:E}))},A={CUSTOM_RULE:" ",LEVEL_EXPLICIT:" ",LEVEL_DERIVED:" "};return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-4",children:" "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:l.defaultPriceLevelId||"",onChange:O=>o({...l,defaultPriceLevelId:O.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-default-global-level",children:[t.jsx("option",{value:"",children:""}),s.filter(O=>O.isActive).map(O=>t.jsx("option",{value:O.id,children:O.name},O.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:""}),t.jsx("input",{type:"text",value:l.currency,onChange:O=>o({...l,currency:O.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:l.roundingMode,onChange:O=>o({...l,roundingMode:O.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"NONE",children:" "}),t.jsx("option",{value:"ROUND",children:" "}),t.jsx("option",{value:"CEIL",children:" "}),t.jsx("option",{value:"FLOOR",children:" "})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:"  "}),t.jsx("input",{type:"number",min:"0",max:"4",value:l.roundingDecimals,onChange:O=>o({...l,roundingDecimals:parseInt(O.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:l.allowNegativeDiscounts,onChange:O=>o({...l,allowNegativeDiscounts:O.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm text-slate-700",children:"  "})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:l.allowFallbackToOtherLevels,onChange:O=>o({...l,allowFallbackToOtherLevels:O.target.checked}),className:"rounded"}),t.jsx("span",{className:"text-sm text-slate-700",children:"   "})]})]}),l.allowFallbackToOtherLevels&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" "}),t.jsxs("select",{value:l.fallbackLevelId||"",onChange:O=>o({...l,fallbackLevelId:O.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:" (  )"}),s.filter(O=>O.isActive).map(O=>t.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[t.jsx("h5",{className:"font-bold text-slate-700 mb-3",children:" "}),t.jsx("div",{className:"space-y-2",children:l.pricePrecedenceOrder.map((O,C)=>t.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-3 rounded-lg",children:[t.jsx("span",{className:"w-6 h-6 flex items-center justify-center bg-[#0B1B3A] text-white rounded-full text-xs font-bold",children:C+1}),t.jsx("span",{className:"flex-1 text-sm font-bold text-slate-700",children:A[O]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>w(C,"up"),disabled:C===0,className:"p-1 hover:bg-slate-200 rounded disabled:opacity-30",children:t.jsx(Wr,{size:16})}),t.jsx("button",{onClick:()=>w(C,"down"),disabled:C===l.pricePrecedenceOrder.length-1,className:"p-1 hover:bg-slate-200 rounded disabled:opacity-30",children:t.jsx(kr,{size:16})})]})]},O))})]}),t.jsxs("button",{onClick:y,className:"mt-6 w-full flex items-center justify-center gap-2 px-4 py-3 bg-emerald-600 text-white rounded-xl text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-settings",children:[t.jsx(ds,{size:18}),"  "]})]})}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h4",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(GO,{size:20}),"  "]}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"       "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" *"}),t.jsxs("select",{value:d,onChange:O=>u(O.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-simulation-product",children:[t.jsx("option",{value:"",children:" "}),a.slice(0,100).map(O=>t.jsxs("option",{value:O.id,children:[O.partNumber," - ",O.name]},O.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-1",children:" ()"}),t.jsxs("select",{value:h,onChange:O=>f(O.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm","data-testid":"select-simulation-customer",children:[t.jsx("option",{value:"",children:" ( )"}),r.map(({user:O,profile:C})=>t.jsxs("option",{value:O.id,children:[C.companyName||O.name," (",O.clientId,")"]},O.id))]})]}),t.jsx("button",{onClick:j,disabled:v,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-[#0B1B3A] text-white rounded-xl text-sm font-bold hover:bg-[#1a2e56] disabled:opacity-50","data-testid":"button-simulate",children:v?t.jsxs(t.Fragment,{children:[t.jsx(Qt,{size:18,className:"animate-spin"}),"  ..."]}):t.jsxs(t.Fragment,{children:[t.jsx(GO,{size:18}),"  "]})})]}),x&&t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[t.jsx("h5",{className:"font-bold text-slate-700 mb-3",children:" "}),t.jsx("div",{className:`p-4 rounded-xl mb-4 ${x.finalPrice!==null?"bg-emerald-50 border border-emerald-200":"bg-red-50 border border-red-200"}`,children:x.finalPrice!==null?t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-slate-600",children:" "}),t.jsxs("p",{className:"text-3xl font-black text-emerald-600","data-testid":"text-final-price",children:[x.finalPrice.toFixed(2)," ."]}),x.sourceLevelName&&t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[": ",x.sourceLevelName]})]}):t.jsxs("div",{className:"text-center",children:[t.jsx(ma,{size:32,className:"mx-auto text-red-500 mb-2"}),t.jsx("p",{className:"text-red-600 font-bold",children:"    "})]})}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[t.jsxs("h6",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Lt,{size:16}),"  "]}),t.jsx("div",{className:"space-y-1",children:x.calculationSteps.map((O,C)=>t.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[t.jsx(el,{size:12,className:"mt-0.5 text-slate-400"}),t.jsx("span",{children:O})]},C))})]}),x.errors&&x.errors.length>0&&t.jsxs("div",{className:"mt-4 bg-red-50 rounded-xl p-4",children:[t.jsx("h6",{className:"text-sm font-bold text-red-700 mb-2",children:""}),x.errors.map((O,C)=>t.jsx("p",{className:"text-xs text-red-600",children:O},C))]})]})]})})]})},I5={PDF_TO_EXCEL:t.jsx(zn,{size:24}),VIN_EXTRACTOR:t.jsx(Mi,{size:24}),PRICE_COMPARISON:t.jsx(Mo,{size:24})},g0e=[{value:"PARTS_SHOP",labelAr:"  ",labelEn:"Parts Shop"},{value:"RENTAL_COMPANY",labelAr:" ",labelEn:"Rental Company"},{value:"INSURANCE_COMPANY",labelAr:" ",labelEn:"Insurance Company"},{value:"SALES_AGENT",labelAr:" ",labelEn:"Sales Agent"},{value:"FLEET_CUSTOMER",labelAr:" ",labelEn:"Fleet Customer"},{value:"MAINTENANCE_CENTER",labelAr:" ",labelEn:"Maintenance Center"},{value:"TRADING_COMPANY",labelAr:" ",labelEn:"Trading Company"}],Ec={VIN:{ar:" VIN",en:"VIN Extraction",icon:t.jsx(Mi,{size:16})},PDF_EXCEL:{ar:" PDF  Excel",en:"PDF to Excel",icon:t.jsx(zn,{size:16})},COMPARISON:{ar:" ",en:"Price Comparison",icon:t.jsx(Mo,{size:16})},ALTERNATIVES:{ar:" ",en:"Alternatives Upload",icon:t.jsx(ga,{size:16})},SEARCH:{ar:" ",en:"Product Search",icon:t.jsx(Ft,{size:16})},EXCEL_QUOTE:{ar:"  Excel",en:"Excel Quote",icon:t.jsx(oE,{size:16})}},Cc={SUCCESS:{ar:"",en:"Success",color:"bg-green-100 text-green-700"},FAILED:{ar:"",en:"Failed",color:"bg-red-100 text-red-700"},PENDING:{ar:" ",en:"Pending",color:"bg-amber-100 text-amber-700"},PROCESSING:{ar:" ",en:"Processing",color:"bg-blue-100 text-blue-700"}},b0e=()=>{var K,se,G,te,Z,ue;const[e,s]=T.useState("TOOLS"),[a,r]=T.useState([]),[n,i]=T.useState(null),[l,o]=T.useState(!0),[d,u]=T.useState(!1),[h,f]=T.useState({}),[x,g]=T.useState(!1),[v,b]=T.useState(null),[y,j]=T.useState({page:1,pageSize:20,sortBy:"createdAt",sortDirection:"desc"}),[w,A]=T.useState(""),[O,C]=T.useState(null),{addToast:E}=Dt(),{t:S,language:D}=Bs();T.useEffect(()=>{M()},[]);const M=async()=>{o(!0);try{const re=await xe.getToolConfigs();r(re);const H={};for(const pe of re)H[pe.toolKey]=await Yo.getToolUsageStats(pe.toolKey,void 0,"month");f(H)}catch{E("    ","error")}finally{o(!1)}},U=async()=>{g(!0);try{const re={...y,search:w||void 0},H=await xe.getTraderToolActionsAdmin(re);b(H)}catch{E(D==="ar"?"    ":"Failed to load usage log","error")}finally{g(!1)}};T.useEffect(()=>{e==="USAGE_LOG"&&U()},[e,y]);const I=async()=>{try{const re=await xe.exportTraderToolActions(y),H=["ID","Customer ID","Customer Name","Tool Type","Status","Device","Date","Has Input File","Has Output File"],pe=re.map(de=>[de.id,de.customerId,de.customerName,de.toolType,de.status,de.deviceType,de.createdAt,de.hasInputFile?"Yes":"No",de.hasOutputFile?"Yes":"No"]),B=[H.join(","),...pe.map(de=>de.join(","))].join(`
`),oe=new Blob([B],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(oe),ne=document.createElement("a");ne.href=fe,ne.download=`trader_tools_usage_${new Date().toISOString().split("T")[0]}.csv`,ne.click(),URL.revokeObjectURL(fe),E(D==="ar"?"   ":"Data exported successfully","success")}catch{E(D==="ar"?"   ":"Failed to export data","error")}},k=re=>{const{toolType:H,metadata:pe,inputData:B}=re;switch(H){case"VIN":return(pe==null?void 0:pe.vin)||(B==null?void 0:B.imageFile)||"-";case"PDF_EXCEL":return re.inputFileName||(B==null?void 0:B.fileName)||"-";case"COMPARISON":return(pe==null?void 0:pe.partNumber)||(pe==null?void 0:pe.partName)||"-";case"SEARCH":return(pe==null?void 0:pe.searchQuery)||(B==null?void 0:B.query)||"-";case"EXCEL_QUOTE":return re.inputFileName||`${(pe==null?void 0:pe.itemsCount)||0} items`;case"ALTERNATIVES":return re.inputFileName||"-";default:return"-"}},z=re=>{const{toolType:H,metadata:pe}=re;switch(H){case"VIN":return pe!=null&&pe.manufacturer?`${pe.manufacturer} ${pe.model||""} (${pe.year})`:"-";case"PDF_EXCEL":return pe!=null&&pe.rowCount?`${pe.rowCount} rows`:"-";case"COMPARISON":return pe!=null&&pe.suppliersCount?`${pe.suppliersCount} suppliers`:"-";case"SEARCH":return(pe==null?void 0:pe.resultsCount)!==void 0?`${pe.resultsCount} results`:"-";case"EXCEL_QUOTE":return(pe==null?void 0:pe.quotedTotal)!==void 0?`${pe.quotedTotal.toLocaleString()} SAR`:"-";default:return"-"}},_=v?Math.ceil(v.total/(y.pageSize||20)):0,q=async()=>{u(!0);try{await xe.saveToolConfigs(a),E(D==="ar"?"   ":"Settings saved successfully","success")}catch{E(D==="ar"?"   ":"Error saving settings","error")}finally{u(!1)}},L=re=>{r(H=>H.map(pe=>pe.toolKey===re?{...pe,enabled:!pe.enabled}:pe))},Q=re=>{r(H=>H.map(pe=>pe.toolKey===re?{...pe,maintenanceMode:!pe.maintenanceMode}:pe))},X=re=>{r(H=>H.map(pe=>pe.toolKey===re?{...pe,showInDashboardShortcuts:!pe.showInDashboardShortcuts}:pe))},W=re=>{r(H=>H.map(pe=>pe.toolKey===re?{...pe,logUsageForAnalytics:!pe.logUsageForAnalytics}:pe))},ee=(re,H,pe)=>{r(B=>B.map(oe=>oe.toolKey===re?{...oe,[H]:pe}:oe))},V=(re,H)=>{r(pe=>pe.map(B=>{if(B.toolKey!==re)return B;const oe=[...B.allowedCustomerTypes],fe=oe.indexOf(H);return fe===-1?oe.push(H):oe.splice(fe,1),{...B,allowedCustomerTypes:oe}}))},P=re=>D==="ar"?re.toolNameAr:re.toolNameEn,Y=re=>D==="ar"?re.descriptionAr:re.descriptionEn;if(l)return t.jsxs("div",{className:"p-10 text-center",children:[t.jsx(Qt,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ...":"Loading..."})]});const J=({id:re,icon:H,label:pe})=>t.jsxs("button",{onClick:()=>s(re),className:`flex items-center gap-3 px-6 py-3 rounded-xl transition-all font-bold ${e===re?"bg-brand-600 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,"data-testid":`tab-${re.toLowerCase()}`,children:[H,t.jsx("span",{children:pe})]});return t.jsxs("div",{className:"animate-fade-in max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(sc,{className:"text-brand-600"}),D==="ar"?"  ":"Trader Tools Management"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:D==="ar"?"/       ":"Enable/disable tools and configure access permissions per customer type"})]}),t.jsxs("div",{className:"flex gap-3 flex-wrap",children:[t.jsx(J,{id:"TOOLS",icon:t.jsx(la,{size:18}),label:D==="ar"?"":"Settings"}),t.jsx(J,{id:"ANALYTICS",icon:t.jsx(Rr,{size:18}),label:D==="ar"?"":"Analytics"}),t.jsx(J,{id:"USAGE_LOG",icon:t.jsx(Gr,{size:18}),label:D==="ar"?" ":"Usage Log"})]})]}),e==="TOOLS"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:q,disabled:d,className:"bg-brand-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2 transition-all","data-testid":"btn-save-tools",children:[t.jsx(ds,{size:18}),d?D==="ar"?" ...":"Saving...":D==="ar"?" ":"Save Settings"]})}),a.map(re=>t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border transition-all ${re.enabled?"border-slate-100":"border-slate-200 opacity-75"}`,children:[t.jsxs("div",{className:"p-6 flex items-center justify-between cursor-pointer hover:bg-slate-50 rounded-t-2xl transition-colors",onClick:()=>i(n===re.toolKey?null:re.toolKey),"data-testid":`tool-header-${re.toolKey}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${re.enabled?re.maintenanceMode?"bg-amber-50 text-amber-600":"bg-brand-50 text-brand-600":"bg-slate-100 text-slate-400"}`,children:I5[re.toolKey]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:P(re)}),t.jsx("p",{className:"text-sm text-slate-500",children:Y(re)})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[re.maintenanceMode&&t.jsxs("span",{className:"px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-bold flex items-center gap-1",children:[t.jsx(Gs,{size:12}),D==="ar"?"":"Maintenance"]}),t.jsx("button",{onClick:H=>{H.stopPropagation(),L(re.toolKey)},className:`p-2 rounded-lg transition-colors ${re.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,"data-testid":`toggle-tool-${re.toolKey}`,children:re.enabled?t.jsx(nd,{size:20}):t.jsx(Fu,{size:20})}),n===re.toolKey?t.jsx(Wr,{size:20}):t.jsx(kr,{size:20})]})]}),n===re.toolKey&&t.jsxs("div",{className:"border-t border-slate-100 p-6 space-y-6 animate-slide-up",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[re.showInDashboardShortcuts?t.jsx(fs,{size:18,className:"text-brand-600"}):t.jsx(gr,{size:18,className:"text-slate-400"}),t.jsx("span",{className:"font-medium",children:D==="ar"?"  ":"Show in Shortcuts"})]}),t.jsx("button",{onClick:()=>X(re.toolKey),className:`w-12 h-6 rounded-full transition-colors relative ${re.showInDashboardShortcuts?"bg-brand-600":"bg-slate-300"}`,"data-testid":`toggle-show-${re.toolKey}`,children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${re.showInDashboardShortcuts?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Gr,{size:18,className:re.logUsageForAnalytics?"text-brand-600":"text-slate-400"}),t.jsx("span",{className:"font-medium",children:D==="ar"?" ":"Log Usage"})]}),t.jsx("button",{onClick:()=>W(re.toolKey),className:`w-12 h-6 rounded-full transition-colors relative ${re.logUsageForAnalytics?"bg-brand-600":"bg-slate-300"}`,"data-testid":`toggle-log-${re.toolKey}`,children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${re.logUsageForAnalytics?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Gs,{size:18,className:re.maintenanceMode?"text-amber-600":"text-slate-400"}),t.jsx("span",{className:"font-medium",children:D==="ar"?" ":"Maintenance Mode"})]}),t.jsx("button",{onClick:()=>Q(re.toolKey),className:`w-12 h-6 rounded-full transition-colors relative ${re.maintenanceMode?"bg-amber-500":"bg-slate-300"}`,"data-testid":`toggle-maintenance-${re.toolKey}`,children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${re.maintenanceMode?"right-1":"left-1"}`})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[t.jsx(os,{size:14,className:"inline ml-1"}),D==="ar"?"  ()":"Daily Limit (files)"]}),t.jsx("input",{type:"number",value:re.maxFilesPerDay||"",onChange:H=>ee(re.toolKey,"maxFilesPerDay",parseInt(H.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:D==="ar"?" ":"No limit","data-testid":`input-daily-limit-${re.toolKey}`})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:[t.jsx(os,{size:14,className:"inline ml-1"}),D==="ar"?"  ()":"Monthly Limit (files)"]}),t.jsx("input",{type:"number",value:re.maxFilesPerMonth||"",onChange:H=>ee(re.toolKey,"maxFilesPerMonth",parseInt(H.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:D==="ar"?" ":"No limit","data-testid":`input-monthly-limit-${re.toolKey}`})]})]}),re.maintenanceMode&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:D==="ar"?" ":"Maintenance Message"}),t.jsx("input",{type:"text",value:re.maintenanceMessage||"",onChange:H=>ee(re.toolKey,"maintenanceMessage",H.target.value),className:"w-full p-3 bg-amber-50 border border-amber-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500",placeholder:D==="ar"?"   ...":"Tool is currently under maintenance...","data-testid":`input-maintenance-msg-${re.toolKey}`})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(Gt,{size:16}),D==="ar"?"   ":"Allowed Customer Types"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g0e.map(H=>{const pe=re.allowedCustomerTypes.includes(H.value);return t.jsxs("button",{onClick:()=>V(re.toolKey,H.value),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${pe?"bg-brand-100 text-brand-700 border-2 border-brand-300":"bg-slate-100 text-slate-500 border-2 border-transparent hover:border-slate-200"}`,"data-testid":`customer-type-${re.toolKey}-${H.value}`,children:[pe?t.jsx(Ut,{size:16}):t.jsx(Zs,{size:16}),D==="ar"?H.labelAr:H.labelEn]},H.value)})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:D==="ar"?"  ()":"Tool Name (Arabic)"}),t.jsx("input",{type:"text",value:re.toolNameAr,onChange:H=>ee(re.toolKey,"toolNameAr",H.target.value),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",dir:"rtl","data-testid":`input-name-ar-${re.toolKey}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:D==="ar"?"  ()":"Tool Name (English)"}),t.jsx("input",{type:"text",value:re.toolNameEn,onChange:H=>ee(re.toolKey,"toolNameEn",H.target.value),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500",dir:"ltr","data-testid":`input-name-en-${re.toolKey}`})]})]})]})]},re.toolKey))]}),e==="ANALYTICS"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(gi,{className:"text-brand-600"}),D==="ar"?"  ":"Monthly Usage Statistics"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(re=>{const H=h[re.toolKey];return H?t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-brand-100 text-brand-600 rounded-lg",children:I5[re.toolKey]}),t.jsx("h3",{className:"font-bold text-slate-800",children:P(re)})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ":"Total Usage"}),t.jsx("span",{className:"font-bold text-slate-800",children:H.totalUsage})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?"":"Successful"}),t.jsx("span",{className:"font-bold text-green-600",children:H.successfulUsage})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?"":"Failed"}),t.jsx("span",{className:"font-bold text-red-600",children:H.failedUsage})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ":"Unique Customers"}),t.jsx("span",{className:"font-bold text-slate-800",children:H.uniqueCustomers})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-500",children:D==="ar"?" ":"Avg Time"}),t.jsxs("span",{className:"font-bold text-slate-800",children:[H.avgProcessingTime,"ms"]})]})]}),H.byDay.length>0&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[t.jsx("div",{className:"text-xs text-slate-500 mb-2",children:D==="ar"?" 7 ":"Last 7 days"}),t.jsx("div",{className:"flex items-end gap-1 h-16",children:H.byDay.slice(-7).map((pe,B)=>{const oe=Math.max(...H.byDay.slice(-7).map(ne=>ne.count),1),fe=pe.count/oe*100;return t.jsx("div",{className:"flex-1 bg-brand-500 rounded-t",style:{height:`${Math.max(fe,4)}%`},title:`${pe.date}: ${pe.count}`},B)})})]})]},re.toolKey):null})})]}),t.jsx("div",{className:"text-center text-slate-500 text-sm",children:t.jsxs("button",{onClick:M,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors","data-testid":"btn-refresh-analytics",children:[t.jsx(Qt,{size:16}),D==="ar"?" ":"Refresh Data"]})})]}),e==="USAGE_LOG"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(tc,{size:18,className:"text-slate-500"}),t.jsx("span",{className:"font-semibold text-slate-700",children:D==="ar"?"":"Filters"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?"":"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:w,onChange:re=>A(re.target.value),onKeyDown:re=>re.key==="Enter"&&U(),placeholder:D==="ar"?" VIN ...":"Name, VIN, file...",className:"w-full pl-10 pr-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-search-log"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?" ":"Tool Type"}),t.jsxs("select",{value:y.toolType||"ALL",onChange:re=>j(H=>({...H,toolType:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-tool-type-log",children:[t.jsx("option",{value:"ALL",children:D==="ar"?"":"All"}),Object.entries(Ec).map(([re,H])=>t.jsx("option",{value:re,children:D==="ar"?H.ar:H.en},re))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?"":"Status"}),t.jsxs("select",{value:y.status||"ALL",onChange:re=>j(H=>({...H,status:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"select-status-log",children:[t.jsx("option",{value:"ALL",children:D==="ar"?"":"All"}),Object.entries(Cc).map(([re,H])=>t.jsx("option",{value:re,children:D==="ar"?H.ar:H.en},re))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?" ":"From Date"}),t.jsx("input",{type:"date",value:y.dateFrom||"",onChange:re=>j(H=>({...H,dateFrom:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-from-log"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 mb-1",children:D==="ar"?" ":"To Date"}),t.jsx("input",{type:"date",value:y.dateTo||"",onChange:re=>j(H=>({...H,dateTo:re.target.value,page:1})),className:"w-full px-3 py-2 rounded-lg border border-slate-200 text-sm","data-testid":"input-date-to-log"})]}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("button",{onClick:()=>{A(""),j({page:1,pageSize:20,sortBy:"createdAt",sortDirection:"desc"})},className:"px-4 py-2 text-sm text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors","data-testid":"button-clear-filters-log",children:D==="ar"?"":"Clear"}),t.jsxs("button",{onClick:I,className:"px-4 py-2 text-sm text-white bg-brand-600 rounded-lg hover:bg-brand-700 transition-colors flex items-center gap-2","data-testid":"button-export-log",children:[t.jsx(cr,{size:16}),D==="ar"?"":"Export"]})]})]})]}),(v==null?void 0:v.summary)&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?" ":"Total Actions"}),t.jsx("div",{className:"text-2xl font-bold text-slate-800","data-testid":"text-summary-total",children:v.summary.total})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?"":"Successful"}),t.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-summary-success",children:v.summary.byStatus.SUCCESS})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?"":"Failed"}),t.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"text-summary-failed",children:v.summary.byStatus.FAILED})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:[t.jsx("div",{className:"text-sm text-slate-500",children:D==="ar"?" ":"Success Rate"}),t.jsxs("div",{className:"text-2xl font-bold text-brand-600","data-testid":"text-summary-rate",children:[v.summary.successRate.toFixed(1),"%"]})]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:x?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(as,{className:"animate-spin text-brand-600",size:40})}):!v||v.items.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[t.jsx(Gr,{size:60,className:"mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-semibold",children:D==="ar"?"  ":"No records"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[900px]",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Date"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Customer"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Tool"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Input"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Output"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase",children:D==="ar"?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:v.items.map(re=>{var H,pe,B,oe,fe,ne;return t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>C(re),"data-testid":`row-log-${re.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm text-slate-700 font-medium",children:Jo(re.createdAt)}),t.jsx("div",{className:"text-xs text-slate-400",children:hs(re.createdAt).split(" ").slice(-1)[0]})]}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"text-sm font-medium text-slate-700",children:re.customerName||"-"}),t.jsx("div",{className:"text-xs text-slate-400",children:re.customerId})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-brand-100 text-brand-700",children:[(H=Ec[re.toolType])==null?void 0:H.icon,D==="ar"?(pe=Ec[re.toolType])==null?void 0:pe.ar:(B=Ec[re.toolType])==null?void 0:B.en]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[150px] block",children:k(re)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-600 truncate max-w-[150px] block",children:z(re)})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold ${(oe=Cc[re.status])==null?void 0:oe.color}`,children:[re.status==="SUCCESS"&&t.jsx(Ut,{size:12}),re.status==="FAILED"&&t.jsx(Zs,{size:12}),re.status==="PENDING"&&t.jsx(os,{size:12}),re.status==="PROCESSING"&&t.jsx(as,{size:12,className:"animate-spin"}),D==="ar"?(fe=Cc[re.status])==null?void 0:fe.ar:(ne=Cc[re.status])==null?void 0:ne.en]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:de=>{de.stopPropagation(),C(re)},className:"p-1.5 text-slate-400 hover:text-brand-600 transition-colors","data-testid":`button-view-${re.id}`,children:t.jsx(fs,{size:16})})})]},re.id)})})]})}),_>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:[D==="ar"?"":"Showing"," ",((y.page||1)-1)*(y.pageSize||20)+1,"-",Math.min((y.page||1)*(y.pageSize||20),v.total)," ",D==="ar"?"":"of"," ",v.total]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>j(re=>({...re,page:Math.max(1,(re.page||1)-1)})),disabled:(y.page||1)===1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-prev-page-log",children:t.jsx(ws,{size:18})}),t.jsxs("span",{className:"text-sm text-slate-600 px-3",children:[y.page||1," / ",_]}),t.jsx("button",{onClick:()=>j(re=>({...re,page:Math.min(_,(re.page||1)+1)})),disabled:(y.page||1)===_,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100","data-testid":"button-next-page-log",children:t.jsx(vs,{size:18})})]})]})]})})]}),O&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>C(null),children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[80vh] overflow-y-auto",onClick:re=>re.stopPropagation(),children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:D==="ar"?" ":"Action Details"}),t.jsx("button",{onClick:()=>C(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-detail",children:t.jsx(Zs,{size:20,className:"text-slate-400"})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Tool"}),t.jsx("div",{className:"mt-1",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold bg-brand-100 text-brand-700",children:[(K=Ec[O.toolType])==null?void 0:K.icon,D==="ar"?(se=Ec[O.toolType])==null?void 0:se.ar:(G=Ec[O.toolType])==null?void 0:G.en]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Status"}),t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold ${(te=Cc[O.status])==null?void 0:te.color}`,children:D==="ar"?(Z=Cc[O.status])==null?void 0:Z.ar:(ue=Cc[O.status])==null?void 0:ue.en})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Customer"}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:O.customerName||"-"}),t.jsx("p",{className:"text-xs text-slate-400",children:O.customerId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Date"}),t.jsx("p",{className:"text-sm text-slate-700 font-medium",children:hs(O.createdAt)})]}),O.processingTimeMs&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?" ":"Processing Time"}),t.jsxs("p",{className:"text-sm text-slate-700",children:[(O.processingTimeMs/1e3).toFixed(2),"s"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Input"}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:k(O)}),O.inputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(Lt,{size:12}),O.inputFileName]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-slate-500 uppercase",children:D==="ar"?"":"Output"}),t.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg",children:[t.jsx("p",{className:"text-sm text-slate-700",children:z(O)}),O.outputFileName&&t.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[t.jsx(Lt,{size:12}),O.outputFileName]})]})]}),O.status==="FAILED"&&O.errorMessage&&t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-red-500 uppercase",children:D==="ar"?" ":"Error"}),t.jsx("div",{className:"mt-1 p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:O.errorMessage})})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 pt-2 border-t border-slate-100",children:[t.jsxs("span",{children:["ID: ",O.id]}),t.jsx("span",{children:""}),t.jsx("span",{children:O.deviceType}),O.createdFromIp&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["IP: ",O.createdFromIp]})]})]})]})]})})]})},v0e=[{value:"SINI_FIRST_THEN_SUPPLIERS",labelAr:"   ",labelEn:"Sini First, Then Suppliers",descAr:"            ",descEn:"Search Sini inventory first, then supplier catalogs if not available"},{value:"SUPPLIERS_ONLY_WHEN_OUT_OF_STOCK",labelAr:"    ",labelEn:"Suppliers Only When Out of Stock",descAr:"           ",descEn:"Show supplier products only when item is out of stock at Sini"},{value:"RANDOM_SUPPLIER_WHEN_OUT_OF_STOCK",labelAr:"    ",labelEn:"Random Supplier When Out of Stock",descAr:"         ",descEn:"Pick a random supplier from available ones when product is not available"},{value:"LOWEST_PRICE_FIRST",labelAr:"  ",labelEn:"Lowest Price First",descAr:"          ",descEn:"Show product from supplier with lowest price regardless of stock"},{value:"HIGHEST_PRIORITY_FIRST",labelAr:"  ",labelEn:"Highest Priority First",descAr:"        ",descEn:"Show product from supplier with highest priority in ranking"}],y0e=()=>{const[e,s]=T.useState(null),[a,r]=T.useState([]),[n,i]=T.useState(!0),[l,o]=T.useState(!1),[d,u]=T.useState("GENERAL"),{addToast:h}=Dt(),{language:f}=Bs();T.useEffect(()=>{x()},[]);const x=async()=>{i(!0);try{const[C,E]=await Promise.all([xe.getSupplierMarketplaceSettings(),xe.getSupplierProfiles()]);s(C),r(E)}catch{h(f==="ar"?"   ":"Failed to load settings","error")}finally{i(!1)}},g=async()=>{if(e){o(!0);try{await xe.saveSupplierMarketplaceSettings(e),h(f==="ar"?"   ":"Settings saved successfully","success")}catch{h(f==="ar"?"   ":"Error saving settings","error")}finally{o(!1)}}},v=()=>{e&&s({...e,enabled:!e.enabled})},b=(C,E)=>{e&&s({...e,[C]:E})},y=()=>{if(!e)return;const C={supplierId:`SUP${Date.now()}`,supplierName:f==="ar"?" ":"New Supplier",priority:e.supplierPriorities.length+1,enabled:!0};s({...e,supplierPriorities:[...e.supplierPriorities,C]})},j=C=>{e&&s({...e,supplierPriorities:e.supplierPriorities.filter(E=>E.supplierId!==C)})},w=(C,E)=>{e&&s({...e,supplierPriorities:e.supplierPriorities.map(S=>S.supplierId===C?{...S,...E}:S)})},A=(C,E)=>{if(!e)return;const S=[...e.supplierPriorities],D=S.findIndex(U=>U.supplierId===C);if(D===-1)return;const M=E==="up"?D-1:D+1;M<0||M>=S.length||([S[D],S[M]]=[S[M],S[D]],S.forEach((U,I)=>U.priority=I+1),s({...e,supplierPriorities:S}))};if(n||!e)return t.jsxs("div",{className:"p-10 text-center",children:[t.jsx(Qt,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("span",{className:"text-slate-500",children:f==="ar"?" ...":"Loading..."})]});const O=({id:C,icon:E,label:S})=>t.jsxs("button",{onClick:()=>u(C),className:`flex items-center gap-3 px-5 py-3 rounded-xl transition-all font-bold ${d===C?"bg-brand-600 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,"data-testid":`section-${C.toLowerCase()}`,children:[E,t.jsx("span",{children:S})]});return t.jsxs("div",{className:"animate-fade-in max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(id,{className:"text-brand-600"}),f==="ar"?"  ":"Supplier Marketplace Settings"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:f==="ar"?"      ":"Manage external supplier catalog and product integration"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:v,className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold transition-all ${e.enabled?"bg-green-100 text-green-700 border-2 border-green-300":"bg-red-100 text-red-700 border-2 border-red-300"}`,"data-testid":"toggle-marketplace",children:[e.enabled?t.jsx(nd,{size:18}):t.jsx(Fu,{size:18}),e.enabled?f==="ar"?"":"Enabled":f==="ar"?"":"Disabled"]}),t.jsxs("button",{onClick:g,disabled:l,className:"bg-brand-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-brand-700 shadow-lg shadow-brand-100 disabled:opacity-50 flex items-center gap-2 transition-all","data-testid":"btn-save-settings",children:[t.jsx(ds,{size:18}),l?f==="ar"?" ...":"Saving...":f==="ar"?" ":"Save Settings"]})]})]}),!e.enabled&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(ma,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-amber-800",children:f==="ar"?"   ":"Supplier Marketplace is Currently Disabled"}),t.jsx("p",{className:"text-sm text-amber-700",children:f==="ar"?"      ":"Enable the marketplace to show supplier products to customers"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx(O,{id:"GENERAL",icon:t.jsx(la,{size:18}),label:f==="ar"?" ":"General Settings"}),t.jsx(O,{id:"PRIORITIES",icon:t.jsx(Ote,{size:18}),label:f==="ar"?" ":"Supplier Priorities"}),t.jsx(O,{id:"SUPPLIERS",icon:t.jsx(Xs,{size:18}),label:f==="ar"?"":"Suppliers"})]}),d==="GENERAL"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:f==="ar"?"  ":"Supplier Selection Mode"}),t.jsx("div",{className:"space-y-3",children:v0e.map(C=>t.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all ${e.selectionMode===C.value?"border-brand-500 bg-brand-50":"border-slate-200 hover:border-slate-300"}`,children:[t.jsx("input",{type:"radio",name:"selectionMode",value:C.value,checked:e.selectionMode===C.value,onChange:()=>b("selectionMode",C.value),className:"mt-1","data-testid":`radio-mode-${C.value}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:f==="ar"?C.labelAr:C.labelEn}),t.jsx("p",{className:"text-sm text-slate-500",children:f==="ar"?C.descAr:C.descEn})]})]},C.value))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(gr,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:f==="ar"?"  ":"Hide Supplier Identity"})]}),t.jsx("button",{onClick:()=>b("hideRealSupplierFromCustomer",!e.hideRealSupplierFromCustomer),className:`w-12 h-6 rounded-full transition-colors relative ${e.hideRealSupplierFromCustomer?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-hide-supplier",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.hideRealSupplierFromCustomer?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:f==="ar"?"     ":"Do not show real supplier name to customers"})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Xt,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:f==="ar"?"  ":"Show Stock Level"})]}),t.jsx("button",{onClick:()=>b("showSupplierStockLevel",!e.showSupplierStockLevel),className:`w-12 h-6 rounded-full transition-colors relative ${e.showSupplierStockLevel?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-show-stock",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.showSupplierStockLevel?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:f==="ar"?"     ":"Display available stock quantity from supplier"})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(pn,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:f==="ar"?" ":"Supplier Rating"})]}),t.jsx("button",{onClick:()=>b("enableSupplierRating",!e.enableSupplierRating),className:`w-12 h-6 rounded-full transition-colors relative ${e.enableSupplierRating?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-rating",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.enableSupplierRating?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:f==="ar"?"     ":"Allow rating suppliers based on performance"})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vr,{size:18,className:"text-slate-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:f==="ar"?"  ":"New Product Notification"})]}),t.jsx("button",{onClick:()=>b("notifyAdminOnNewSupplierItem",!e.notifyAdminOnNewSupplierItem),className:`w-12 h-6 rounded-full transition-colors relative ${e.notifyAdminOnNewSupplierItem?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-notify",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${e.notifyAdminOnNewSupplierItem?"right-1":"left-1"}`})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:f==="ar"?"       ":"Notify admin when new product is added by supplier"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Do,{size:14}),f==="ar"?"  ":"Default Markup %"]}),t.jsx("input",{type:"number",value:e.defaultMarkupPercent||"",onChange:C=>b("defaultMarkupPercent",parseFloat(C.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",placeholder:"15","data-testid":"input-markup"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(or,{size:14}),f==="ar"?"   %":"Min Profit Margin %"]}),t.jsx("input",{type:"number",value:e.minProfitMargin||"",onChange:C=>b("minProfitMargin",parseFloat(C.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",placeholder:"5","data-testid":"input-min-margin"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(os,{size:14}),f==="ar"?"   ()":"Max Lead Time (days)"]}),t.jsx("input",{type:"number",value:e.maxLeadTimeDays||"",onChange:C=>b("maxLeadTimeDays",parseInt(C.target.value)||void 0),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",placeholder:"14","data-testid":"input-lead-time"})]})]})]}),d==="PRIORITIES"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:f==="ar"?"  ":"Supplier Priority Order"}),t.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors","data-testid":"btn-add-priority",children:[t.jsx(Pt,{size:16}),f==="ar"?" ":"Add Supplier"]})]}),e.supplierPriorities.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500",children:[t.jsx(Xs,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:f==="ar"?"   ":"No suppliers added yet"})]}):t.jsx("div",{className:"space-y-3",children:e.supplierPriorities.sort((C,E)=>C.priority-E.priority).map((C,E)=>t.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all ${C.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50 opacity-60"}`,"data-testid":`priority-${C.supplierId}`,children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>A(C.supplierId,"up"),disabled:E===0,className:"p-1 hover:bg-slate-100 rounded disabled:opacity-30",children:t.jsx(Wr,{size:16})}),t.jsx("button",{onClick:()=>A(C.supplierId,"down"),disabled:E===e.supplierPriorities.length-1,className:"p-1 hover:bg-slate-100 rounded disabled:opacity-30",children:t.jsx(kr,{size:16})})]}),t.jsx("div",{className:"w-8 h-8 bg-brand-100 text-brand-600 rounded-lg flex items-center justify-center font-bold",children:C.priority}),t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"text",value:C.supplierName||"",onChange:S=>w(C.supplierId,{supplierName:S.target.value}),className:"w-full p-2 bg-slate-50 border border-slate-200 rounded-lg font-bold",placeholder:f==="ar"?" ":"Supplier Name"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>w(C.supplierId,{enabled:!C.enabled}),className:`p-2 rounded-lg transition-colors ${C.enabled?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:C.enabled?t.jsx(nd,{size:18}):t.jsx(Fu,{size:18})}),t.jsx("button",{onClick:()=>j(C.supplierId),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:t.jsx(Ct,{size:18})})]})]},C.supplierId))})]}),d==="SUPPLIERS"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:f==="ar"?" ":"Registered Suppliers"}),a.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500",children:[t.jsx(Xs,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:f==="ar"?"   ":"No registered suppliers"}),t.jsx("p",{className:"text-sm mt-2",children:f==="ar"?'    " "  ':'Suppliers with "Can Act as Supplier" permission will appear here'})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(C=>t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200","data-testid":`supplier-${C.supplierId}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-slate-800",children:C.companyName}),t.jsx("p",{className:"text-sm text-slate-500",children:C.contactName})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${C.status==="ACTIVE"?"bg-green-100 text-green-700":C.status==="PENDING"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:C.status})]}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("p",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx(Xt,{size:14}),C.totalItemsListed||0," ",f==="ar"?"":"items"]}),C.avgRating&&t.jsxs("p",{className:"flex items-center gap-2 text-slate-600",children:[t.jsx(pn,{size:14,className:"text-amber-500"}),C.avgRating.toFixed(1)]})]})]},C.supplierId))})]})]})},N0e=()=>{const[e,s]=T.useState("MARKETERS"),[a,r]=T.useState([]),[n,i]=T.useState([]),[l,o]=T.useState(null),[d,u]=T.useState(!0),[h,f]=T.useState(!1),[x,g]=T.useState(!1),[v,b]=T.useState(null),[y,j]=T.useState(""),[w,A]=T.useState(null),[O,C]=T.useState({name:"",phone:"",email:"",commissionType:"PERCENT",commissionValue:0,notes:""}),{addToast:E}=Dt(),{language:S}=Bs();T.useEffect(()=>{D()},[]);const D=async()=>{u(!0);try{const[W,ee,V]=await Promise.all([xe.getMarketers(),xe.getMarketerCommissions(),xe.getMarketerSettings()]);r(W),i(ee),o(V)}catch{E(S==="ar"?"   ":"Failed to load data","error")}finally{u(!1)}},M=async()=>{if(l){f(!0);try{await xe.saveMarketerSettings(l),E(S==="ar"?"   ":"Settings saved successfully","success")}catch{E(S==="ar"?"   ":"Error saving settings","error")}finally{f(!1)}}},U=async()=>{if(!O.name||!O.phone){E(S==="ar"?"    ":"Please enter name and phone","error");return}try{await xe.addMarketer({name:O.name,phone:O.phone,email:O.email,commissionType:O.commissionType,commissionValue:O.commissionValue||(l==null?void 0:l.defaultCommissionValue)||2,active:!0,notes:O.notes}),E(S==="ar"?"   ":"Marketer added successfully","success"),g(!1),C({name:"",phone:"",email:"",commissionType:"PERCENT",commissionValue:0,notes:""}),D()}catch{E(S==="ar"?"   ":"Error adding marketer","error")}},I=async W=>{const ee=a.find(V=>V.id===W);ee&&(await xe.updateMarketer(W,{active:!ee.active}),r(V=>V.map(P=>P.id===W?{...P,active:!P.active}:P)),E(ee.active?S==="ar"?"  ":"Marketer disabled":S==="ar"?"  ":"Marketer enabled","info"))},k=async W=>{confirm(S==="ar"?"      ":"Are you sure you want to delete this marketer?")&&(await xe.deleteMarketer(W),r(ee=>ee.filter(V=>V.id!==W)),E(S==="ar"?"  ":"Marketer deleted","info"))},z=W=>{navigator.clipboard.writeText(W),A(W),setTimeout(()=>A(null),2e3)},_=W=>{navigator.clipboard.writeText(W),E(S==="ar"?"  ":"Link copied","success")},q=async(W,ee)=>{await xe.updateMarketerCommissionStatus(W,ee,"admin"),i(V=>V.map(P=>P.id===W?{...P,status:ee,approvedAt:ee==="APPROVED"?new Date().toISOString():P.approvedAt}:P)),E(S==="ar"?`    ${ee==="APPROVED"?"":ee==="PAID"?"":ee}`:`Status updated to ${ee}`,"success")},L=a.filter(W=>W.name.toLowerCase().includes(y.toLowerCase())||W.phone.includes(y)||W.referralCode.toLowerCase().includes(y.toLowerCase()));if(d||!l)return t.jsxs("div",{className:"p-10 text-center",children:[t.jsx(Qt,{className:"animate-spin mx-auto mb-4",size:32}),t.jsx("span",{className:"text-slate-500",children:S==="ar"?" ...":"Loading..."})]});const Q=({id:W,icon:ee,label:V,count:P})=>t.jsxs("button",{onClick:()=>s(W),className:`flex items-center gap-3 px-5 py-3 rounded-xl transition-all font-bold relative ${e===W?"bg-brand-600 text-white shadow-lg":"bg-white text-slate-500 hover:bg-slate-50 border border-slate-200"}`,"data-testid":`tab-${W.toLowerCase()}`,children:[ee,t.jsx("span",{children:V}),P!==void 0&&P>0&&t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${e===W?"bg-white/20 text-white":"bg-brand-100 text-brand-600"}`,children:P})]}),X=W=>{const ee={PENDING:"bg-amber-100 text-amber-700",APPROVED:"bg-blue-100 text-blue-700",PAID:"bg-green-100 text-green-700",CANCELLED:"bg-red-100 text-red-700"},V={PENDING:S==="ar"?" ":"Pending",APPROVED:S==="ar"?"":"Approved",PAID:S==="ar"?"":"Paid",CANCELLED:S==="ar"?"":"Cancelled"};return t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${ee[W]}`,children:V[W]})};return t.jsxs("div",{className:"animate-fade-in max-w-6xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(Gt,{className:"text-brand-600"}),S==="ar"?" ":"Marketer Management"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:S==="ar"?"     ":"Manage affiliate marketing program and track referrals"})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("button",{onClick:()=>l&&o({...l,enabled:!l.enabled}),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold transition-all ${l.enabled?"bg-green-100 text-green-700 border-2 border-green-300":"bg-red-100 text-red-700 border-2 border-red-300"}`,"data-testid":"toggle-system",children:[l.enabled?t.jsx(nd,{size:18}):t.jsx(Fu,{size:18}),l.enabled?S==="ar"?"":"Enabled":S==="ar"?"":"Disabled"]})})]}),!l.enabled&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[t.jsx(ma,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-amber-800",children:S==="ar"?"   ":"Marketer System is Currently Disabled"}),t.jsx("p",{className:"text-sm text-amber-700",children:S==="ar"?"      ":"Enable the system to track referrals and calculate commissions"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx(Q,{id:"MARKETERS",icon:t.jsx(Gt,{size:18}),label:S==="ar"?"":"Marketers",count:a.length}),t.jsx(Q,{id:"COMMISSIONS",icon:t.jsx(or,{size:18}),label:S==="ar"?"":"Commissions",count:n.filter(W=>W.status==="PENDING").length}),t.jsx(Q,{id:"SETTINGS",icon:t.jsx(la,{size:18}),label:S==="ar"?"":"Settings"})]}),e==="MARKETERS"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[t.jsxs("div",{className:"relative flex-1 max-w-md",children:[t.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",value:y,onChange:W=>j(W.target.value),placeholder:S==="ar"?"     ...":"Search by name, phone or code...",className:"w-full pr-10 pl-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500",dir:"rtl","data-testid":"search-marketers"})]}),t.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-5 py-3 bg-brand-600 text-white rounded-xl font-bold hover:bg-brand-700 transition-colors","data-testid":"btn-add-marketer",children:[t.jsx(sl,{size:18}),S==="ar"?" ":"Add Marketer"]})]}),x&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-4",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(sl,{className:"text-brand-600"}),S==="ar"?"  ":"Add New Marketer"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:S==="ar"?" *":"Name *"}),t.jsx("input",{type:"text",value:O.name,onChange:W=>C({...O,name:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"input-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:S==="ar"?"  *":"Phone *"}),t.jsx("input",{type:"tel",value:O.phone,onChange:W=>C({...O,phone:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr","data-testid":"input-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:S==="ar"?" ":"Email"}),t.jsx("input",{type:"email",value:O.email,onChange:W=>C({...O,email:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",dir:"ltr","data-testid":"input-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:S==="ar"?" ":"Commission Type"}),t.jsxs("select",{value:O.commissionType,onChange:W=>C({...O,commissionType:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"select-commission-type",children:[t.jsx("option",{value:"PERCENT",children:S==="ar"?" ":"Percentage"}),t.jsx("option",{value:"FIXED",children:S==="ar"?" ":"Fixed Amount"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:S==="ar"?" ":"Commission Value"}),t.jsx("input",{type:"number",value:O.commissionValue||"",onChange:W=>C({...O,commissionValue:parseFloat(W.target.value)||0}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:`${l.defaultCommissionValue}${O.commissionType==="PERCENT"?"%":" SAR"}`,"data-testid":"input-commission-value"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:S==="ar"?"":"Notes"}),t.jsx("textarea",{value:O.notes,onChange:W=>C({...O,notes:W.target.value}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl resize-none",rows:2,"data-testid":"input-notes"})]})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:()=>g(!1),className:"px-5 py-2 bg-slate-100 text-slate-600 rounded-lg font-bold hover:bg-slate-200 transition-colors",children:S==="ar"?"":"Cancel"}),t.jsxs("button",{onClick:U,className:"px-5 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors flex items-center gap-2","data-testid":"btn-save-marketer",children:[t.jsx(Pt,{size:16}),S==="ar"?"":"Add"]})]})]}),L.length===0?t.jsxs("div",{className:"bg-white p-12 rounded-2xl shadow-sm border border-slate-100 text-center",children:[t.jsx(Gt,{size:48,className:"mx-auto mb-4 text-slate-300"}),t.jsx("p",{className:"text-slate-500",children:S==="ar"?"  ":"No marketers found"})]}):t.jsx("div",{className:"space-y-3",children:L.map(W=>t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm border transition-all ${W.active?"border-slate-100":"border-slate-200 opacity-75"}`,"data-testid":`marketer-${W.id}`,children:[t.jsxs("div",{className:"p-5 flex items-center justify-between cursor-pointer hover:bg-slate-50 rounded-t-2xl transition-colors",onClick:()=>b(v===W.id?null:W.id),children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg ${W.active?"bg-brand-100 text-brand-600":"bg-slate-100 text-slate-400"}`,children:W.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-slate-800",children:W.name}),t.jsx("p",{className:"text-sm text-slate-500",children:W.phone})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-left hidden md:block",children:[t.jsx("p",{className:"text-sm text-slate-500",children:S==="ar"?" ":"Referral Code"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"font-mono font-bold text-brand-600",children:W.referralCode}),t.jsx("button",{onClick:ee=>{ee.stopPropagation(),z(W.referralCode)},className:"p-1 hover:bg-slate-100 rounded",children:w===W.referralCode?t.jsx(Zt,{size:14,className:"text-green-600"}):t.jsx($p,{size:14})})]})]}),t.jsxs("div",{className:"text-left hidden md:block",children:[t.jsx("p",{className:"text-sm text-slate-500",children:S==="ar"?"":"Commission"}),t.jsxs("p",{className:"font-bold text-slate-800",children:[W.commissionValue,W.commissionType==="PERCENT"?"%":" SAR"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:ee=>{ee.stopPropagation(),I(W.id)},className:`p-2 rounded-lg transition-colors ${W.active?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:W.active?t.jsx(nd,{size:18}):t.jsx(Fu,{size:18})}),v===W.id?t.jsx(Wr,{size:20}):t.jsx(kr,{size:20})]})]})]}),v===W.id&&t.jsxs("div",{className:"border-t border-slate-100 p-5 space-y-4 animate-slide-up",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:S==="ar"?"":"Referrals"}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:W.totalReferrals||0})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-green-600 mb-1",children:S==="ar"?" ":"Total Earnings"}),t.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[(W.totalEarnings||0).toFixed(2)," SAR"]})]}),t.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-amber-600 mb-1",children:S==="ar"?" ":"Pending"}),t.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:[(W.pendingEarnings||0).toFixed(2)," SAR"]})]}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm text-blue-600 mb-1",children:S==="ar"?"":"Paid"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[(W.paidEarnings||0).toFixed(2)," SAR"]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:S==="ar"?" ":"Referral Link"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:W.referralUrl,readOnly:!0,className:"flex-1 p-2 bg-white border border-slate-200 rounded-lg font-mono text-sm",dir:"ltr"}),t.jsx("button",{onClick:()=>_(W.referralUrl),className:"p-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:t.jsx($p,{size:18})})]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsxs("button",{onClick:()=>k(W.id),className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg font-bold hover:bg-red-100 transition-colors",children:[t.jsx(Ct,{size:16}),S==="ar"?"":"Delete"]})})]})]},W.id))})]}),e==="COMMISSIONS"&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[t.jsx("div",{className:"p-5 border-b border-slate-100",children:t.jsx("h2",{className:"font-bold text-lg text-slate-800",children:S==="ar"?" ":"Commission History"})}),n.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(or,{size:48,className:"mx-auto mb-4 text-slate-300"}),t.jsx("p",{className:"text-slate-500",children:S==="ar"?"  ":"No commissions found"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:S==="ar"?"":"Marketer"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:S==="ar"?"":"Order"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:S==="ar"?" ":"Order Value"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:S==="ar"?"":"Commission"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:S==="ar"?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:S==="ar"?"":"Date"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-600",children:S==="ar"?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(W=>{const ee=a.find(V=>V.id===W.marketerId);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`commission-${W.id}`,children:[t.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:(ee==null?void 0:ee.name)||"-"}),t.jsx("td",{className:"px-4 py-3 text-slate-600",children:W.orderId}),t.jsxs("td",{className:"px-4 py-3 font-medium text-slate-800",children:[W.orderTotal.toFixed(2)," SAR"]}),t.jsxs("td",{className:"px-4 py-3 font-bold text-green-600",children:[W.commissionAmount.toFixed(2)," SAR"]}),t.jsx("td",{className:"px-4 py-3",children:X(W.status)}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:new Date(W.calculatedAt).toLocaleDateString("ar-SA")}),t.jsxs("td",{className:"px-4 py-3",children:[W.status==="PENDING"&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>q(W.id,"APPROVED"),className:"p-1.5 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",title:S==="ar"?"":"Approve",children:t.jsx(Zt,{size:14})}),t.jsx("button",{onClick:()=>q(W.id,"CANCELLED"),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:S==="ar"?"":"Cancel",children:t.jsx(St,{size:14})})]}),W.status==="APPROVED"&&t.jsxs("button",{onClick:()=>q(W.id,"PAID"),className:"flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 text-sm font-bold",children:[t.jsx(sb,{size:14}),S==="ar"?"":"Pay"]})]})]},W.id)})})]})})]}),e==="SETTINGS"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-4",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800",children:S==="ar"?"  ":"Marketing Program Settings"}),t.jsxs("button",{onClick:M,disabled:h,className:"flex items-center gap-2 px-5 py-2 bg-brand-600 text-white rounded-lg font-bold hover:bg-brand-700 transition-colors disabled:opacity-50","data-testid":"btn-save-settings",children:[t.jsx(ds,{size:16}),h?S==="ar"?" ...":"Saving...":S==="ar"?"":"Save"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(fh,{size:14}),S==="ar"?"  ()":"Attribution Window (days)"]}),t.jsx("input",{type:"number",value:l.attributionWindowDays,onChange:W=>o({...l,attributionWindowDays:parseInt(W.target.value)||90}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"input-attribution-days"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:S==="ar"?"      ":"Period during which referral is counted after registration"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(Do,{size:14}),S==="ar"?" ":"Default Commission"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:l.defaultCommissionType,onChange:W=>o({...l,defaultCommissionType:W.target.value}),className:"p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"select-default-type",children:[t.jsx("option",{value:"PERCENT",children:S==="ar"?"":"%"}),t.jsx("option",{value:"FIXED",children:S==="ar"?"":"Fixed"})]}),t.jsx("input",{type:"number",value:l.defaultCommissionValue,onChange:W=>o({...l,defaultCommissionValue:parseFloat(W.target.value)||0}),className:"flex-1 p-3 bg-slate-50 border border-slate-200 rounded-xl","data-testid":"input-default-value"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(ine,{size:14}),S==="ar"?"  ":"Min Payout Amount"]}),t.jsx("input",{type:"number",value:l.minPayoutAmount||"",onChange:W=>o({...l,minPayoutAmount:parseFloat(W.target.value)||void 0}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:"500 SAR","data-testid":"input-min-payout"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center gap-2",children:[t.jsx(os,{size:14}),S==="ar"?"  ()":"Payment Cycle (days)"]}),t.jsx("input",{type:"number",value:l.paymentCycleDays||"",onChange:W=>o({...l,paymentCycleDays:parseInt(W.target.value)||void 0}),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl",placeholder:"30","data-testid":"input-payment-cycle"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:S==="ar"?" ":"Auto-Approve Commissions"}),t.jsx("p",{className:"text-xs text-slate-500",children:S==="ar"?"  ":"Automatically approve commissions"})]}),t.jsx("button",{onClick:()=>o({...l,autoApproveCommissions:!l.autoApproveCommissions}),className:`w-12 h-6 rounded-full transition-colors relative ${l.autoApproveCommissions?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-auto-approve",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.autoApproveCommissions?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:S==="ar"?"  ":"Show Customer Names"}),t.jsx("p",{className:"text-xs text-slate-500",children:S==="ar"?"    ":"Allow marketer to see customer names"})]}),t.jsx("button",{onClick:()=>o({...l,marketerCanViewCustomerNames:!l.marketerCanViewCustomerNames}),className:`w-12 h-6 rounded-full transition-colors relative ${l.marketerCanViewCustomerNames?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-show-names",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.marketerCanViewCustomerNames?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:S==="ar"?"  ":"Show Order Totals"}),t.jsx("p",{className:"text-xs text-slate-500",children:S==="ar"?"    ":"Allow marketer to see order totals"})]}),t.jsx("button",{onClick:()=>o({...l,marketerCanViewOrderTotals:!l.marketerCanViewOrderTotals}),className:`w-12 h-6 rounded-full transition-colors relative ${l.marketerCanViewOrderTotals?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-show-totals",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.marketerCanViewOrderTotals?"right-1":"left-1"}`})})]}),t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700",children:S==="ar"?"  ":"Notify on Referral"}),t.jsx("p",{className:"text-xs text-slate-500",children:S==="ar"?"     ":"Notify marketer when new customer registers"})]}),t.jsx("button",{onClick:()=>o({...l,notifyMarketerOnReferral:!l.notifyMarketerOnReferral}),className:`w-12 h-6 rounded-full transition-colors relative ${l.notifyMarketerOnReferral?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-notify-referral",children:t.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${l.notifyMarketerOnReferral?"right-1":"left-1"}`})})]})]})]})]})},w0e={PENDING_SINICAR_REVIEW:{labelAr:" ",labelEn:"Pending Review",color:"bg-amber-100 text-amber-700",icon:t.jsx(os,{size:16})},WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR:{labelAr:"  ",labelEn:"Awaiting Customer Decision",color:"bg-blue-100 text-blue-700",icon:t.jsx(Gs,{size:16})},REJECTED_BY_SINICAR:{labelAr:"   ",labelEn:"Rejected by SINI CAR",color:"bg-red-100 text-red-700",icon:t.jsx(Zs,{size:16})},FORWARDED_TO_SUPPLIERS:{labelAr:" ",labelEn:"Forwarded to Suppliers",color:"bg-purple-100 text-purple-700",icon:t.jsx(Dr,{size:16})},WAITING_FOR_SUPPLIER_OFFERS:{labelAr:"  ",labelEn:"Waiting for Supplier Offers",color:"bg-indigo-100 text-indigo-700",icon:t.jsx(os,{size:16})},WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER:{labelAr:"     ",labelEn:"Awaiting Customer Decision on Supplier Offer",color:"bg-blue-100 text-blue-700",icon:t.jsx(Gs,{size:16})},ACTIVE_CONTRACT:{labelAr:" ",labelEn:"Active Contract",color:"bg-green-100 text-green-700",icon:t.jsx(Ut,{size:16})},CLOSED:{labelAr:"",labelEn:"Closed",color:"bg-slate-100 text-slate-600",icon:t.jsx(Bp,{size:16})},CANCELLED:{labelAr:"",labelEn:"Cancelled",color:"bg-slate-100 text-slate-600",icon:t.jsx(Zs,{size:16})}},S0e=[{key:"pending",labelAr:" ",labelEn:"New Requests",icon:t.jsx(os,{size:18})},{key:"customer-decisions",labelAr:" ",labelEn:"Customer Decisions",icon:t.jsx(Gt,{size:18})},{key:"forwarded",labelAr:" ",labelEn:"Forwarded",icon:t.jsx(Dr,{size:18})},{key:"active",labelAr:" ",labelEn:"Active Contracts",icon:t.jsx(Ut,{size:18})},{key:"settings",labelAr:"",labelEn:"Settings",icon:t.jsx(la,{size:18})},{key:"credit-profiles",labelAr:" ",labelEn:"Credit Profiles",icon:t.jsx(pn,{size:18})}],j0e=()=>{const[e,s]=T.useState(!0),[a,r]=T.useState("pending"),[n,i]=T.useState([]),[l,o]=T.useState([]),[d,u]=T.useState(null),[h,f]=T.useState([]),[x,g]=T.useState(null),[v,b]=T.useState(null),[y,j]=T.useState(!1),{addToast:w}=Dt(),{t:A,language:O}=Bs(),C=O==="ar";T.useEffect(()=>{E()},[]);const E=async()=>{s(!0);try{const[_,q,L,Q,X]=await Promise.all([xe.getInstallmentRequests(),xe.getInstallmentOffers(),xe.getInstallmentSettings(),xe.getCustomerCreditProfiles(),xe.getInstallmentStats()]);i(_),o(q),u(L),f(Q),g(X)}catch{w(A("installment.loadError","    "),"error")}finally{s(!1)}},S=_=>new Date(_).toLocaleDateString(C?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric"}),D=_=>new Intl.NumberFormat(C?"ar-SA":"en-US",{style:"currency",currency:"SAR",minimumFractionDigits:0}).format(_),M=()=>{switch(a){case"pending":return n.filter(_=>_.status==="PENDING_SINICAR_REVIEW");case"customer-decisions":return n.filter(_=>["WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR","WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER"].includes(_.status));case"forwarded":return n.filter(_=>["FORWARDED_TO_SUPPLIERS","WAITING_FOR_SUPPLIER_OFFERS"].includes(_.status));case"active":return n.filter(_=>_.status==="ACTIVE_CONTRACT");default:return[]}},U=n.filter(_=>_.status==="PENDING_SINICAR_REVIEW").length,I=n.filter(_=>["WAITING_FOR_CUSTOMER_DECISION_ON_PARTIAL_SINICAR","WAITING_FOR_CUSTOMER_DECISION_ON_SUPPLIER_OFFER"].includes(_.status)).length,k=n.filter(_=>["FORWARDED_TO_SUPPLIERS","WAITING_FOR_SUPPLIER_OFFERS"].includes(_.status)).length,z=n.filter(_=>_.status==="ACTIVE_CONTRACT").length;return e?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(Qt,{className:"animate-spin text-brand-600",size:48})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.jsx(sb,{className:"text-brand-600",size:28}),A("installment.adminTitle","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:A("installment.adminSubtitle","    ")})]}),t.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-refresh",children:[t.jsx(Qt,{size:18}),A("common.refresh","")]})]}),x&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-brand-100 rounded-lg",children:t.jsx(Lt,{className:"text-brand-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:A("installment.totalRequests"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:x.totalRequests})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:t.jsx(os,{className:"text-amber-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:A("installment.pendingRequests"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:x.pendingRequests})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(Ut,{className:"text-green-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:A("installment.activeContracts"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:x.activeContracts})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(or,{className:"text-blue-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:A("installment.approvedValue","  ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:D(x.totalApprovedValue)})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:t.jsx(gi,{className:"text-emerald-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:A("installment.totalPaid"," ")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:D(x.totalPaidAmount)})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(Gs,{className:"text-red-600",size:20})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-slate-500",children:A("installment.overdueAmount","")}),t.jsx("div",{className:"text-xl font-bold text-slate-800",children:D(x.totalOverdueAmount)})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"flex border-b border-slate-200 overflow-x-auto",children:S0e.map(_=>{let q=0;return _.key==="pending"?q=U:_.key==="customer-decisions"?q=I:_.key==="forwarded"?q=k:_.key==="active"?q=z:_.key==="credit-profiles"&&(q=h.length),t.jsxs("button",{onClick:()=>r(_.key),className:`flex items-center gap-2 px-4 py-3 font-medium whitespace-nowrap transition-colors ${a===_.key?"text-brand-600 border-b-2 border-brand-600 bg-brand-50":"text-slate-600 hover:text-brand-600 hover:bg-slate-50"}`,"data-testid":`tab-${_.key}`,children:[_.icon,C?_.labelAr:_.labelEn,q>0&&t.jsx("span",{className:"bg-brand-100 text-brand-700 px-2 py-0.5 rounded-full text-xs",children:q})]},_.key)})}),t.jsxs("div",{className:"p-4",children:[(a==="pending"||a==="customer-decisions"||a==="forwarded"||a==="active")&&t.jsx(A0e,{requests:M(),offers:l,settings:d,onSelectRequest:b,selectedRequest:v,onRefresh:E,t:A,isRTL:C,formatDate:S,formatCurrency:D,showActions:a==="pending"}),a==="settings"&&d&&t.jsx(C0e,{settings:d,onSave:async _=>{try{await xe.updateInstallmentSettings(_),await E(),w(A("installment.settingsSaved","  "),"success")}catch{w(A("installment.settingsError","    "),"error")}},t:A,isRTL:C}),a==="credit-profiles"&&t.jsx(T0e,{profiles:h,t:A,isRTL:C,formatCurrency:D})]})]}),v&&a==="pending"&&t.jsx(E0e,{request:v,settings:d,onClose:()=>b(null),onAction:async(_,q)=>{j(!0);try{_==="approve_full"||_==="approve_partial"?(await xe.recordSinicarDecision(v.id,{decisionType:_,offer:q==null?void 0:q.offer,adminNotes:q==null?void 0:q.notes}),w(A("installment.decisionRecorded","  "),"success")):_==="reject"?(await xe.recordSinicarDecision(v.id,{decisionType:"reject",adminNotes:q==null?void 0:q.notes,forwardToSuppliers:q==null?void 0:q.forwardToSuppliers,supplierIds:q==null?void 0:q.supplierIds}),w(A("installment.requestRejected","  "),"success")):_==="forward"&&(await xe.forwardRequestToSuppliers(v.id,(q==null?void 0:q.supplierIds)||[]),w(A("installment.forwarded","   "),"success")),await E(),b(null)}catch(L){w(L.message||A("installment.actionError"," "),"error")}finally{j(!1)}},processing:y,t:A,isRTL:C,formatCurrency:D})]})},A0e=({requests:e,offers:s,settings:a,onSelectRequest:r,selectedRequest:n,onRefresh:i,t:l,isRTL:o,formatDate:d,formatCurrency:u,showActions:h})=>e.length===0?t.jsxs("div",{className:"py-12 text-center text-slate-500",children:[t.jsx(Lt,{className:"mx-auto mb-4 text-slate-300",size:48}),t.jsx("p",{children:l("installment.noRequestsInTab","     ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.requestId"," ")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.customer","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.amount","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.duration","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.date","")}),t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.status","")}),h&&t.jsx("th",{className:`px-4 py-3 text-${o?"right":"left"} text-sm font-medium text-slate-600`,children:l("installment.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(f=>{const x=w0e[f.status];return s.filter(g=>g.requestId===f.id),t.jsxs("tr",{className:`hover:bg-slate-50 ${(n==null?void 0:n.id)===f.id?"bg-brand-50":""}`,children:[t.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:["#",f.id.slice(-8)]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:f.customerName||f.customerId}),t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:u(f.totalRequestedValue||0)}),t.jsxs("td",{className:"px-4 py-3 text-sm text-slate-600",children:[f.requestedDurationMonths," ",l("installment.months","")]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-500",children:d(f.createdAt)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium w-fit ${x==null?void 0:x.color}`,children:[x==null?void 0:x.icon,o?x==null?void 0:x.labelAr:x==null?void 0:x.labelEn]})}),h&&t.jsx("td",{className:"px-4 py-3",children:t.jsxs("button",{onClick:()=>r(f),className:"flex items-center gap-1 px-3 py-1.5 bg-brand-600 hover:bg-brand-700 text-white text-sm rounded-lg transition-colors","data-testid":`button-review-${f.id}`,children:[t.jsx(fs,{size:14}),l("installment.review","")]})})]},f.id)})})]})}),E0e=({request:e,settings:s,onClose:a,onAction:r,processing:n,t:i,isRTL:l,formatCurrency:o})=>{const[d,u]=T.useState(null),[h,f]=T.useState(""),[x,g]=T.useState(s.autoForwardToSuppliersOnSinicarReject),[v,b]=T.useState(e.totalRequestedValue||0);return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:i("installment.reviewRequest","  ")}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-modal",children:t.jsx(St,{size:20})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.customer","")}),t.jsx("div",{className:"font-medium text-slate-800",children:e.customerName||e.customerId})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.requestedValue"," ")}),t.jsx("div",{className:"font-bold text-slate-800",children:o(e.totalRequestedValue||0)})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.duration","")}),t.jsxs("div",{className:"font-medium text-slate-800",children:[e.requestedDurationMonths," ",i("installment.months","")]})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl",children:[t.jsx("div",{className:"text-sm text-slate-500 mb-1",children:i("installment.frequency","")}),t.jsx("div",{className:"font-medium text-slate-800",children:e.paymentFrequency==="monthly"?i("installment.monthly",""):i("installment.weekly","")})]})]}),e.items.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:i("installment.requestedItems"," ")}),t.jsx("div",{className:"bg-slate-50 rounded-xl p-4 space-y-2",children:e.items.map(y=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:y.productName||y.productId}),t.jsxs("span",{children:[y.quantityRequested,"  ",o(y.unitPriceRequested||0)]})]},y.id))})]}),e.notes&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:i("installment.customerNotes"," ")}),t.jsx("p",{className:"text-slate-600 bg-slate-50 p-4 rounded-xl",children:e.notes})]}),t.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[t.jsx("h3",{className:"font-semibold text-slate-800 mb-4",children:i("installment.yourDecision","")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[t.jsxs("button",{onClick:()=>u("approve_full"),className:`p-4 rounded-xl border-2 transition-colors ${d==="approve_full"?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-300"}`,"data-testid":"button-action-approve-full",children:[t.jsx(Ut,{className:`mx-auto mb-2 ${d==="approve_full"?"text-green-600":"text-slate-400"}`,size:32}),t.jsx("div",{className:"font-medium text-slate-800",children:i("installment.approveFullAction"," ")}),t.jsx("div",{className:"text-xs text-slate-500",children:i("installment.approveFullDesc","   ")})]}),s.allowPartialApprovalBySinicar&&t.jsxs("button",{onClick:()=>u("approve_partial"),className:`p-4 rounded-xl border-2 transition-colors ${d==="approve_partial"?"border-amber-500 bg-amber-50":"border-slate-200 hover:border-amber-300"}`,"data-testid":"button-action-approve-partial",children:[t.jsx(Gs,{className:`mx-auto mb-2 ${d==="approve_partial"?"text-amber-600":"text-slate-400"}`,size:32}),t.jsx("div",{className:"font-medium text-slate-800",children:i("installment.approvePartialAction"," ")}),t.jsx("div",{className:"text-xs text-slate-500",children:i("installment.approvePartialDesc","    ")})]}),t.jsxs("button",{onClick:()=>u("reject"),className:`p-4 rounded-xl border-2 transition-colors ${d==="reject"?"border-red-500 bg-red-50":"border-slate-200 hover:border-red-300"}`,"data-testid":"button-action-reject",children:[t.jsx(Zs,{className:`mx-auto mb-2 ${d==="reject"?"text-red-600":"text-slate-400"}`,size:32}),t.jsx("div",{className:"font-medium text-slate-800",children:i("installment.rejectAction","")}),t.jsx("div",{className:"text-xs text-slate-500",children:i("installment.rejectDesc"," ")})]})]}),d==="approve_partial"&&t.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-amber-800 mb-2",children:i("installment.approvedAmount","  ")}),t.jsx("input",{type:"number",min:1,max:e.totalRequestedValue,value:v,onChange:y=>b(parseFloat(y.target.value)||0),className:"w-full border border-amber-200 rounded-lg py-2 px-4 focus:ring-2 focus:ring-amber-500","data-testid":"input-partial-amount"})]}),d==="reject"&&t.jsx("div",{className:"bg-red-50 p-4 rounded-xl mb-4",children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:x,onChange:y=>g(y.target.checked),className:"w-4 h-4 text-brand-600 rounded","data-testid":"checkbox-forward-on-reject"}),t.jsx("span",{className:"text-sm font-medium text-red-800",children:i("installment.forwardOnReject","    ")})]})}),d&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:i("installment.adminNotes"," ")}),t.jsx("textarea",{value:h,onChange:y=>f(y.target.value),rows:3,className:"w-full border border-slate-200 rounded-lg py-3 px-4 focus:ring-2 focus:ring-brand-500",placeholder:i("installment.notesPlaceholder","  ..."),"data-testid":"textarea-admin-notes"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{onClick:a,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel-action",children:i("common.cancel","")}),d&&t.jsxs("button",{onClick:()=>r(d,{notes:h,forwardToSuppliers:d==="reject"?x:void 0,offer:d==="approve_partial"?{totalApprovedValue:v,itemsApproved:[]}:d==="approve_full"?{totalApprovedValue:e.totalRequestedValue,itemsApproved:[]}:void 0}),disabled:n,className:`flex items-center gap-2 px-6 py-2 rounded-lg transition-colors disabled:opacity-50 ${d==="approve_full"?"bg-green-600 hover:bg-green-700 text-white":d==="approve_partial"?"bg-amber-600 hover:bg-amber-700 text-white":"bg-red-600 hover:bg-red-700 text-white"}`,"data-testid":"button-confirm-action",children:[n?t.jsx(Qt,{className:"animate-spin",size:18}):t.jsx(Zt,{size:18}),i("installment.confirmDecision"," ")]})]})]})]})})},C0e=({settings:e,onSave:s,t:a,isRTL:r})=>{const[n,i]=T.useState({...e}),[l,o]=T.useState(!1),d=async()=>{o(!0);try{await s(n)}finally{o(!1)}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(la,{size:18,className:"text-brand-600"}),a("installment.generalSettings"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.enableSystem","  ")}),t.jsx("input",{type:"checkbox",checked:n.enabled,onChange:u=>i({...n,enabled:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-enabled"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.sinicarPriority","   ")}),t.jsx("input",{type:"checkbox",checked:n.sinicarHasFirstPriority,onChange:u=>i({...n,sinicarHasFirstPriority:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-sinicar-priority"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.allowPartialSinicar","     ")}),t.jsx("input",{type:"checkbox",checked:n.allowPartialApprovalBySinicar,onChange:u=>i({...n,allowPartialApprovalBySinicar:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-partial-sinicar"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.allowPartialSuppliers","    ")}),t.jsx("input",{type:"checkbox",checked:n.allowPartialApprovalBySuppliers,onChange:u=>i({...n,allowPartialApprovalBySuppliers:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-partial-suppliers"})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Mse,{size:18,className:"text-brand-600"}),a("installment.forwardingSettings"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.autoForwardOnReject","    ")}),t.jsx("input",{type:"checkbox",checked:n.autoForwardToSuppliersOnSinicarReject,onChange:u=>i({...n,autoForwardToSuppliersOnSinicarReject:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-auto-forward-reject"})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.autoForwardOnPartial","     ")}),t.jsx("input",{type:"checkbox",checked:n.autoForwardToSuppliersOnSinicarPartialRemainder,onChange:u=>i({...n,autoForwardToSuppliersOnSinicarPartialRemainder:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-auto-forward-partial"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-2",children:a("installment.onCustomerRejectsSinicar","     ")}),t.jsxs("select",{value:n.onCustomerRejectsSinicarPartial,onChange:u=>i({...n,onCustomerRejectsSinicarPartial:u.target.value}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"select-on-customer-rejects-sinicar",children:[t.jsx("option",{value:"forward_to_suppliers",children:a("installment.forwardToSuppliers"," ")}),t.jsx("option",{value:"close_request",children:a("installment.closeRequest"," ")})]})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(or,{size:18,className:"text-brand-600"}),a("installment.financialLimits"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.minAmount"," ")}),t.jsx("input",{type:"number",value:n.minRequestAmount,onChange:u=>i({...n,minRequestAmount:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-min-amount"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.maxAmount"," ")}),t.jsx("input",{type:"number",value:n.maxRequestAmount,onChange:u=>i({...n,maxRequestAmount:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-max-amount"})]})]}),t.jsxs("label",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-700",children:a("installment.requireDownPayment","  ")}),t.jsx("input",{type:"checkbox",checked:n.requireDownPayment,onChange:u=>i({...n,requireDownPayment:u.target.checked}),className:"w-5 h-5 text-brand-600 rounded","data-testid":"toggle-require-down-payment"})]}),n.requireDownPayment&&t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.minDownPercent","  %")}),t.jsx("input",{type:"number",min:0,max:100,value:n.minDownPaymentPercent,onChange:u=>i({...n,minDownPaymentPercent:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-min-down-percent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.maxDownPercent","  %")}),t.jsx("input",{type:"number",min:0,max:100,value:n.maxDownPaymentPercent,onChange:u=>i({...n,maxDownPaymentPercent:parseFloat(u.target.value)||0}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-max-down-percent"})]})]})]})]}),t.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(fh,{size:18,className:"text-brand-600"}),a("installment.durationSettings"," ")]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.minMonths","  ()")}),t.jsx("input",{type:"number",min:1,value:n.minDurationMonths,onChange:u=>i({...n,minDurationMonths:parseInt(u.target.value)||1}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-min-months"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.maxMonths","  ()")}),t.jsx("input",{type:"number",min:1,value:n.maxDurationMonths,onChange:u=>i({...n,maxDurationMonths:parseInt(u.target.value)||12}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"input-max-months"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:a("installment.defaultFrequency"," ")}),t.jsxs("select",{value:n.defaultPaymentFrequency,onChange:u=>i({...n,defaultPaymentFrequency:u.target.value}),className:"w-full border border-slate-200 rounded-lg py-2 px-4","data-testid":"select-default-frequency",children:[t.jsx("option",{value:"monthly",children:a("installment.monthly","")}),t.jsx("option",{value:"weekly",children:a("installment.weekly","")})]})]})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:d,disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors disabled:opacity-50","data-testid":"button-save-settings",children:[l?t.jsx(Qt,{className:"animate-spin",size:18}):t.jsx(ds,{size:18}),a("common.save"," ")]})})]})},T0e=({profiles:e,t:s,isRTL:a,formatCurrency:r})=>{const n={excellent:"bg-green-100 text-green-700",good:"bg-blue-100 text-blue-700",medium:"bg-amber-100 text-amber-700",low:"bg-orange-100 text-orange-700",blocked:"bg-red-100 text-red-700"},i={excellent:{ar:"",en:"Excellent"},good:{ar:"",en:"Good"},medium:{ar:"",en:"Medium"},low:{ar:"",en:"Low"},blocked:{ar:"",en:"Blocked"}};return e.length===0?t.jsxs("div",{className:"py-12 text-center text-slate-500",children:[t.jsx(Gt,{className:"mx-auto mb-4 text-slate-300",size:48}),t.jsx("p",{children:s("installment.noCreditProfiles","   ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.customer","")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.creditScore"," ")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.totalRequests"," ")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.activeContracts"," ")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.totalPaid","")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.remaining","")}),t.jsx("th",{className:`px-4 py-3 text-${a?"right":"left"} text-sm font-medium text-slate-600`,children:s("installment.overdue","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(l=>{var o,d;return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:l.customerName||l.customerId}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n[l.scoreLevel]||"bg-slate-100 text-slate-600"}`,children:a?(o=i[l.scoreLevel])==null?void 0:o.ar:(d=i[l.scoreLevel])==null?void 0:d.en})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:l.totalInstallmentRequests}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:l.totalActiveContracts}),t.jsx("td",{className:"px-4 py-3 text-sm text-green-600 font-medium",children:r(l.totalPaidAmount||0)}),t.jsx("td",{className:"px-4 py-3 text-sm text-amber-600 font-medium",children:r(l.totalRemainingAmount||0)}),t.jsx("td",{className:"px-4 py-3 text-sm text-red-600 font-medium",children:l.totalOverdueInstallments>0?l.totalOverdueInstallments:"-"})]},l.customerId)})})]})})},Jj=[{value:"supplier",labelAr:"",labelEn:"Supplier"},{value:"shipping",labelAr:" ",labelEn:"Shipping Company"},{value:"workshop",labelAr:"",labelEn:"Workshop"},{value:"other",labelAr:"",labelEn:"Other"}],Yj=[{value:"active",labelAr:"",labelEn:"Active",color:"bg-green-100 text-green-700"},{value:"pending_verification",labelAr:" ",labelEn:"Pending Verification",color:"bg-amber-100 text-amber-700"},{value:"suspended",labelAr:"",labelEn:"Suspended",color:"bg-red-100 text-red-700"},{value:"blacklisted",labelAr:"",labelEn:"Blacklisted",color:"bg-slate-100 text-slate-700"}],Xj=[{value:"banner_top",labelAr:" ",labelEn:"Top Banner"},{value:"banner_sidebar",labelAr:" ",labelEn:"Sidebar Banner"},{value:"card_in_tools",labelAr:"  ",labelEn:"Card in Tools"},{value:"card_in_products",labelAr:"  ",labelEn:"Card in Products"},{value:"popup",labelAr:" ",labelEn:"Popup"}],Zj=[{value:"draft",labelAr:"",labelEn:"Draft",color:"bg-slate-100 text-slate-700"},{value:"pending_approval",labelAr:" ",labelEn:"Pending Approval",color:"bg-amber-100 text-amber-700"},{value:"running",labelAr:"",labelEn:"Running",color:"bg-green-100 text-green-700"},{value:"paused",labelAr:"",labelEn:"Paused",color:"bg-blue-100 text-blue-700"},{value:"rejected",labelAr:"",labelEn:"Rejected",color:"bg-red-100 text-red-700"},{value:"ended",labelAr:"",labelEn:"Ended",color:"bg-slate-200 text-slate-600"}],_0e=[{value:"home",labelAr:" ",labelEn:"Home"},{value:"dashboard",labelAr:" ",labelEn:"Dashboard"},{value:"products",labelAr:"",labelEn:"Products"},{value:"tools",labelAr:"",labelEn:"Tools"},{value:"orders",labelAr:"",labelEn:"Orders"},{value:"quotes",labelAr:" ",labelEn:"Quotes"}],$F=[{value:"by_priority",labelAr:" ",labelEn:"By Priority"},{value:"rotate",labelAr:"",labelEn:"Rotate"},{value:"random",labelAr:"",labelEn:"Random"}],k0e=()=>{const[e,s]=T.useState("ADVERTISERS"),[a,r]=T.useState(!0),[n,i]=T.useState([]),[l,o]=T.useState([]),[d,u]=T.useState([]),[h,f]=T.useState({totalAdvertisers:0,activeAdvertisers:0,totalCampaigns:0,runningCampaigns:0,totalViews:0,totalClicks:0}),[x,g]=T.useState(!1),[v,b]=T.useState(!1),[y,j]=T.useState(!1),[w,A]=T.useState(null),[O,C]=T.useState(null),[E,S]=T.useState(null),[D,M]=T.useState(""),[U,I]=T.useState(""),[k,z]=T.useState(""),[_,q]=T.useState(""),[L,Q]=T.useState(""),[X,W]=T.useState(""),[ee,V]=T.useState(""),{addToast:P}=Dt(),{t:Y,language:J}=Bs(),K=J==="ar";T.useEffect(()=>{se()},[]);const se=async()=>{r(!0);try{const[H,pe,B,oe]=await Promise.all([xe.getAdvertisers(),xe.getAdCampaigns(),xe.getAdSlots(),xe.getAdvertisingStats()]);i(H),o(pe),u(B),f(oe)}catch{P(Y("advertising.loadError","    "),"error")}finally{r(!1)}},G=H=>new Date(H).toLocaleDateString(K?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric"}),te=n.filter(H=>{var pe,B;if(D){const oe=D.toLowerCase();if(!H.name.toLowerCase().includes(oe)&&!((pe=H.phone)!=null&&pe.toLowerCase().includes(oe))&&!((B=H.email)!=null&&B.toLowerCase().includes(oe)))return!1}return!(U&&H.status!==U||k&&H.companyType!==k)}),Z=l.filter(H=>!(_&&!H.name.toLowerCase().includes(_.toLowerCase())||L&&H.status!==L||X&&H.advertiserId!==X||ee&&H.type!==ee)),ue=H=>{const pe=n.find(B=>B.id===H);return(pe==null?void 0:pe.name)||Y("advertising.unknownAdvertiser","  ")},re=[{key:"ADVERTISERS",label:Y("advertising.advertisers",""),icon:t.jsx(Xs,{size:18})},{key:"CAMPAIGNS",label:Y("advertising.campaigns",""),icon:t.jsx(ya,{size:18})},{key:"SLOTS",label:Y("advertising.slots"," "),icon:t.jsx(tae,{size:18})},{key:"REPORTS",label:Y("advertising.reports",""),icon:t.jsx(Rr,{size:18})}];return a?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(Qt,{className:"animate-spin text-brand-600",size:48})}):t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[t.jsx(ya,{className:"text-brand-600",size:28}),Y("advertising.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:Y("advertising.subtitle","     ")})]}),t.jsxs("button",{onClick:se,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-refresh-advertising",children:[t.jsx(Qt,{size:18}),Y("common.refresh","")]})]}),t.jsx("div",{className:"flex gap-2 border-b border-slate-200 overflow-x-auto",children:re.map(H=>t.jsxs("button",{onClick:()=>s(H.key),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${e===H.key?"border-brand-600 text-brand-600 font-semibold":"border-transparent text-slate-500 hover:text-slate-700"}`,"data-testid":`tab-${H.key.toLowerCase()}`,children:[H.icon,H.label]},H.key))}),e==="ADVERTISERS"&&t.jsx(O0e,{advertisers:te,search:D,setSearch:M,statusFilter:U,setStatusFilter:I,typeFilter:k,setTypeFilter:z,onAdd:()=>{A(null),g(!0)},onEdit:H=>{A(H),g(!0)},onDelete:async H=>{confirm(Y("advertising.confirmDelete","    "))&&(await xe.deleteAdvertiser(H),se(),P(Y("advertising.deleted","  "),"success"))},t:Y,isRTL:K,formatDate:G}),e==="CAMPAIGNS"&&t.jsx(I0e,{campaigns:Z,advertisers:n,search:_,setSearch:q,statusFilter:L,setStatusFilter:Q,advertiserFilter:X,setAdvertiserFilter:W,typeFilter:ee,setTypeFilter:V,onAdd:()=>{C(null),b(!0)},onEdit:H=>{C(H),b(!0)},onDelete:async H=>{confirm(Y("advertising.confirmDelete","    "))&&(await xe.deleteAdCampaign(H),se(),P(Y("advertising.deleted","  "),"success"))},onStatusChange:async(H,pe)=>{await xe.updateAdCampaign(H,{status:pe}),se(),P(Y("advertising.statusUpdated","  "),"success")},getAdvertiserName:ue,t:Y,isRTL:K,formatDate:G}),e==="SLOTS"&&t.jsx(R0e,{slots:d,onEdit:H=>{S(H),j(!0)},onToggle:async(H,pe)=>{await xe.updateAdSlot(H,{isEnabled:pe}),se(),P(Y("advertising.slotUpdated","  "),"success")},t:Y,isRTL:K}),e==="REPORTS"&&t.jsx(P0e,{stats:h,t:Y,isRTL:K}),x&&t.jsx(D0e,{advertiser:w,onClose:()=>g(!1),onSave:async H=>{w?await xe.updateAdvertiser(w.id,H):await xe.createAdvertiser(H),g(!1),se(),P(Y("advertising.saved","  "),"success")},t:Y,isRTL:K}),v&&t.jsx(M0e,{campaign:O,advertisers:n,onClose:()=>b(!1),onSave:async H=>{O?await xe.updateAdCampaign(O.id,H):await xe.createAdCampaign(H),b(!1),se(),P(Y("advertising.saved","  "),"success")},t:Y,isRTL:K}),y&&E&&t.jsx(L0e,{slot:E,onClose:()=>j(!1),onSave:async H=>{await xe.updateAdSlot(E.id,H),j(!1),se(),P(Y("advertising.slotUpdated","  "),"success")},t:Y,isRTL:K})]})},O0e=({advertisers:e,search:s,setSearch:a,statusFilter:r,setStatusFilter:n,typeFilter:i,setTypeFilter:l,onAdd:o,onEdit:d,onDelete:u,t:h,isRTL:f,formatDate:x})=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{size:18,className:"absolute top-1/2 -translate-y-1/2 text-slate-400",style:{[f?"right":"left"]:"12px"}}),t.jsx("input",{type:"text",placeholder:h("advertising.searchAdvertiser","   ..."),value:s,onChange:g=>a(g.target.value),className:`border border-slate-200 rounded-lg py-2 ${f?"pr-10 pl-4":"pl-10 pr-4"} w-64 focus:ring-2 focus:ring-brand-500 focus:border-transparent`,"data-testid":"input-search-advertisers"})]}),t.jsxs("select",{value:r,onChange:g=>n(g.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-status-filter",children:[t.jsx("option",{value:"",children:h("advertising.allStatuses"," ")}),Yj.map(g=>t.jsx("option",{value:g.value,children:f?g.labelAr:g.labelEn},g.value))]}),t.jsxs("select",{value:i,onChange:g=>l(g.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-type-filter",children:[t.jsx("option",{value:"",children:h("advertising.allTypes"," ")}),Jj.map(g=>t.jsx("option",{value:g.value,children:f?g.labelAr:g.labelEn},g.value))]})]}),t.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 rounded-lg transition-colors","data-testid":"button-add-advertiser",children:[t.jsx(Pt,{size:18}),h("advertising.addAdvertiser"," ")]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.name","")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.companyType"," ")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.contact","")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.status","")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.createdAt"," ")}),t.jsx("th",{className:`px-4 py-3 text-${f?"right":"left"} text-sm font-semibold text-slate-600`,children:h("advertising.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-12 text-slate-500",children:h("advertising.noAdvertisers","  ")})}):e.map(g=>{const v=Yj.find(y=>y.value===g.status),b=Jj.find(y=>y.value===g.companyType);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`row-advertiser-${g.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"font-medium text-slate-800",children:g.name}),g.contactName&&t.jsx("div",{className:"text-sm text-slate-500",children:g.contactName})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:b?f?b.labelAr:b.labelEn:"-"}),t.jsxs("td",{className:"px-4 py-3 text-sm",children:[g.phone&&t.jsx("div",{children:g.phone}),g.email&&t.jsx("div",{className:"text-slate-500",children:g.email})]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v==null?void 0:v.color}`,children:v?f?v.labelAr:v.labelEn:g.status})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:x(g.createdAt)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>d(g),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":`button-edit-${g.id}`,children:t.jsx(Qo,{size:16})}),t.jsx("button",{onClick:()=>u(g.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-${g.id}`,children:t.jsx(Ct,{size:16})})]})})]},g.id)})})]})})]}),I0e=({campaigns:e,advertisers:s,search:a,setSearch:r,statusFilter:n,setStatusFilter:i,advertiserFilter:l,setAdvertiserFilter:o,typeFilter:d,setTypeFilter:u,onAdd:h,onEdit:f,onDelete:x,onStatusChange:g,getAdvertiserName:v,t:b,isRTL:y,formatDate:j})=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{size:18,className:"absolute top-1/2 -translate-y-1/2 text-slate-400",style:{[y?"right":"left"]:"12px"}}),t.jsx("input",{type:"text",placeholder:b("advertising.searchCampaign"," ..."),value:a,onChange:w=>r(w.target.value),className:`border border-slate-200 rounded-lg py-2 ${y?"pr-10 pl-4":"pl-10 pr-4"} w-48 focus:ring-2 focus:ring-brand-500`,"data-testid":"input-search-campaigns"})]}),t.jsxs("select",{value:l,onChange:w=>o(w.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-advertiser-filter",children:[t.jsx("option",{value:"",children:b("advertising.allAdvertisers"," ")}),s.map(w=>t.jsx("option",{value:w.id,children:w.name},w.id))]}),t.jsxs("select",{value:d,onChange:w=>u(w.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-campaign-type-filter",children:[t.jsx("option",{value:"",children:b("advertising.allCampaignTypes"," ")}),Xj.map(w=>t.jsx("option",{value:w.value,children:y?w.labelAr:w.labelEn},w.value))]}),t.jsxs("select",{value:n,onChange:w=>i(w.target.value),className:"border border-slate-200 rounded-lg px-3 py-2","data-testid":"select-campaign-status-filter",children:[t.jsx("option",{value:"",children:b("advertising.allStatuses"," ")}),Zj.map(w=>t.jsx("option",{value:w.value,children:y?w.labelAr:w.labelEn},w.value))]})]}),t.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 rounded-lg transition-colors","data-testid":"button-add-campaign",children:[t.jsx(Pt,{size:18}),b("advertising.addCampaign"," ")]})]}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.campaignName"," ")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.advertiser","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.type","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.dates","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.performance","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.status","")}),t.jsx("th",{className:`px-4 py-3 text-${y?"right":"left"} text-sm font-semibold text-slate-600`,children:b("advertising.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-12 text-slate-500",children:b("advertising.noCampaigns","  ")})}):e.map(w=>{const A=Zj.find(C=>C.value===w.status),O=Xj.find(C=>C.value===w.type);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`row-campaign-${w.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"font-medium text-slate-800",children:w.name}),t.jsxs("div",{className:"text-xs text-slate-500",children:[b("advertising.priority",""),": ",w.priority]})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:v(w.advertiserId)}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:O?y?O.labelAr:O.labelEn:w.type}),t.jsxs("td",{className:"px-4 py-3 text-sm",children:[t.jsx("div",{children:j(w.startDate)}),w.endDate&&t.jsx("div",{className:"text-slate-500",children:j(w.endDate)})]}),t.jsx("td",{className:"px-4 py-3 text-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(fs,{size:14,className:"text-slate-400"}),w.currentViews||0]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(hh,{size:14,className:"text-slate-400"}),w.currentClicks||0]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A==null?void 0:A.color}`,children:A?y?A.labelAr:A.labelEn:w.status})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[w.status==="running"&&t.jsx("button",{onClick:()=>g(w.id,"paused"),className:"p-2 text-amber-500 hover:bg-amber-50 rounded-lg transition-colors",title:b("advertising.pause"," "),"data-testid":`button-pause-${w.id}`,children:t.jsx(gF,{size:16})}),w.status==="paused"&&t.jsx("button",{onClick:()=>g(w.id,"running"),className:"p-2 text-green-500 hover:bg-green-50 rounded-lg transition-colors",title:b("advertising.resume",""),"data-testid":`button-resume-${w.id}`,children:t.jsx(Lu,{size:16})}),(w.status==="running"||w.status==="paused")&&t.jsx("button",{onClick:()=>g(w.id,"ended"),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:b("advertising.end",""),"data-testid":`button-end-${w.id}`,children:t.jsx(use,{size:16})}),t.jsx("button",{onClick:()=>f(w),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":`button-edit-campaign-${w.id}`,children:t.jsx(Qo,{size:16})}),t.jsx("button",{onClick:()=>x(w.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-campaign-${w.id}`,children:t.jsx(Ct,{size:16})})]})})]},w.id)})})]})})]}),R0e=({slots:e,onEdit:s,onToggle:a,t:r,isRTL:n})=>t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.slotName"," ")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.slotKey","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.enabled","")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.maxAds"," ")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.selectionMode"," ")}),t.jsx("th",{className:`px-4 py-3 text-${n?"right":"left"} text-sm font-semibold text-slate-600`,children:r("advertising.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(i=>{const l=$F.find(o=>o.value===i.selectionMode);return t.jsxs("tr",{className:"hover:bg-slate-50","data-testid":`row-slot-${i.id}`,children:[t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("div",{className:"font-medium text-slate-800",children:n?i.nameAr:i.nameEn}),i.descriptionAr&&t.jsx("div",{className:"text-sm text-slate-500",children:n?i.descriptionAr:i.descriptionEn})]}),t.jsx("td",{className:"px-4 py-3 font-mono text-sm text-slate-600",children:i.slotKey}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:()=>a(i.id,!i.isEnabled),className:`p-2 rounded-lg transition-colors ${i.isEnabled?"text-green-600 bg-green-50":"text-slate-400 bg-slate-100"}`,"data-testid":`button-toggle-slot-${i.id}`,children:i.isEnabled?t.jsx(nd,{size:18}):t.jsx(Fu,{size:18})})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:i.maxAds}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:l?n?l.labelAr:l.labelEn:i.selectionMode}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:()=>s(i),className:"p-2 text-slate-500 hover:text-brand-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":`button-edit-slot-${i.id}`,children:t.jsx(Qo,{size:16})})})]},i.id)})})]})})}),P0e=({stats:e,t:s,isRTL:a})=>{const r=e.totalViews>0?(e.totalClicks/e.totalViews*100).toFixed(2):"0.00";return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:t.jsx(Xs,{className:"text-blue-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalAdvertisers"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalAdvertisers})]})]}),t.jsxs("div",{className:"text-sm text-slate-600",children:[s("advertising.activeCount",""),": ",t.jsx("span",{className:"font-semibold text-green-600",children:e.activeAdvertisers})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:t.jsx(ya,{className:"text-purple-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalCampaigns"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalCampaigns})]})]}),t.jsxs("div",{className:"text-sm text-slate-600",children:[s("advertising.runningCount",""),": ",t.jsx("span",{className:"font-semibold text-green-600",children:e.runningCampaigns})]})]}),t.jsx("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-amber-100 rounded-xl",children:t.jsx(fs,{className:"text-amber-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalViews"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalViews.toLocaleString()})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:t.jsx(hh,{className:"text-green-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.totalClicks"," ")}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.totalClicks.toLocaleString()})]})]})}),t.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-3 bg-rose-100 rounded-xl",children:t.jsx(gi,{className:"text-rose-600",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm text-slate-500",children:s("advertising.ctr"," ")}),t.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[r,"%"]})]})]}),t.jsxs("div",{className:"text-sm text-slate-500",children:["CTR = ",s("advertising.ctrFormula"," / ")]})]})]})},D0e=({advertiser:e,onClose:s,onSave:a,t:r,isRTL:n})=>{const[i,l]=T.useState({name:(e==null?void 0:e.name)||"",contactName:(e==null?void 0:e.contactName)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",whatsapp:(e==null?void 0:e.whatsapp)||"",companyType:(e==null?void 0:e.companyType)||"other",source:(e==null?void 0:e.source)||"",status:(e==null?void 0:e.status)||"pending_verification",notes:(e==null?void 0:e.notes)||""}),o=d=>{d.preventDefault(),a(i)};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:e?r("advertising.editAdvertiser"," "):r("advertising.addAdvertiser"," ")}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-modal",children:t.jsx(St,{size:20})})]}),t.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[r("advertising.name","")," *"]}),t.jsx("input",{type:"text",value:i.name,onChange:d=>l({...i,name:d.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-advertiser-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.contactName","  ")}),t.jsx("input",{type:"text",value:i.contactName,onChange:d=>l({...i,contactName:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-contact-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.phone","")}),t.jsx("input",{type:"text",value:i.phone,onChange:d=>l({...i,phone:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-phone"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.email"," ")}),t.jsx("input",{type:"email",value:i.email,onChange:d=>l({...i,email:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.whatsapp","")}),t.jsx("input",{type:"text",value:i.whatsapp,onChange:d=>l({...i,whatsapp:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-whatsapp"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.companyType"," ")}),t.jsx("select",{value:i.companyType,onChange:d=>l({...i,companyType:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-company-type",children:Jj.map(d=>t.jsx("option",{value:d.value,children:n?d.labelAr:d.labelEn},d.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.source","")}),t.jsx("input",{type:"text",value:i.source,onChange:d=>l({...i,source:d.target.value}),placeholder:r("advertising.sourcePlaceholder",":  ..."),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-source"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.status","")}),t.jsx("select",{value:i.status,onChange:d=>l({...i,status:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-status",children:Yj.map(d=>t.jsx("option",{value:d.value,children:n?d.labelAr:d.labelEn},d.value))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.notes","")}),t.jsx("textarea",{value:i.notes,onChange:d=>l({...i,notes:d.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"textarea-notes"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel",children:r("common.cancel","")}),t.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"button-save-advertiser",children:[t.jsx(Zt,{size:18}),r("common.save","")]})]})]})]})})},M0e=({campaign:e,advertisers:s,onClose:a,onSave:r,t:n,isRTL:i})=>{var h;const[l,o]=T.useState({advertiserId:(e==null?void 0:e.advertiserId)||((h=s[0])==null?void 0:h.id)||"",name:(e==null?void 0:e.name)||"",type:(e==null?void 0:e.type)||"banner_top",targetPages:(e==null?void 0:e.targetPages)||[],priority:(e==null?void 0:e.priority)||1,startDate:(e==null?void 0:e.startDate)||new Date().toISOString().split("T")[0],endDate:(e==null?void 0:e.endDate)||"",budgetType:(e==null?void 0:e.budgetType)||"fixed",maxViews:(e==null?void 0:e.maxViews)||void 0,maxClicks:(e==null?void 0:e.maxClicks)||void 0,landingUrl:(e==null?void 0:e.landingUrl)||"",imageUrl:(e==null?void 0:e.imageUrl)||"",status:(e==null?void 0:e.status)||"draft"}),d=f=>{o(x=>({...x,targetPages:x.targetPages.includes(f)?x.targetPages.filter(g=>g!==f):[...x.targetPages,f]}))},u=f=>{f.preventDefault(),r(l)};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:e?n("advertising.editCampaign"," "):n("advertising.addCampaign"," ")}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-campaign-modal",children:t.jsx(St,{size:20})})]}),t.jsxs("form",{onSubmit:u,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[n("advertising.advertiser","")," *"]}),t.jsx("select",{value:l.advertiserId,onChange:f=>o({...l,advertiserId:f.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-campaign-advertiser",children:s.map(f=>t.jsx("option",{value:f.id,children:f.name},f.id))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[n("advertising.campaignName"," ")," *"]}),t.jsx("input",{type:"text",value:l.name,onChange:f=>o({...l,name:f.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-campaign-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.type","")}),t.jsx("select",{value:l.type,onChange:f=>o({...l,type:f.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-campaign-type",children:Xj.map(f=>t.jsx("option",{value:f.value,children:i?f.labelAr:f.labelEn},f.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.priority","")}),t.jsx("input",{type:"number",min:"1",max:"100",value:l.priority,onChange:f=>o({...l,priority:parseInt(f.target.value)||1}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-priority"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[n("advertising.startDate"," ")," *"]}),t.jsx("input",{type:"date",value:l.startDate,onChange:f=>o({...l,startDate:f.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-start-date"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.endDate"," ")}),t.jsx("input",{type:"date",value:l.endDate,onChange:f=>o({...l,endDate:f.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-end-date"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.maxViews","  ")}),t.jsx("input",{type:"number",min:"0",value:l.maxViews||"",onChange:f=>o({...l,maxViews:f.target.value?parseInt(f.target.value):void 0}),placeholder:n("advertising.unlimited"," "),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-max-views"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.maxClicks","  ")}),t.jsx("input",{type:"number",min:"0",value:l.maxClicks||"",onChange:f=>o({...l,maxClicks:f.target.value?parseInt(f.target.value):void 0}),placeholder:n("advertising.unlimited"," "),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-max-clicks"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.landingUrl"," ")}),t.jsx("input",{type:"url",value:l.landingUrl,onChange:f=>o({...l,landingUrl:f.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-landing-url"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.imageUrl"," ")}),t.jsx("input",{type:"url",value:l.imageUrl,onChange:f=>o({...l,imageUrl:f.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-image-url"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:n("advertising.targetPages"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:_0e.map(f=>t.jsx("button",{type:"button",onClick:()=>d(f.value),className:`px-3 py-1 rounded-full text-sm border transition-colors ${l.targetPages.includes(f.value)?"bg-brand-600 text-white border-brand-600":"bg-white text-slate-600 border-slate-200 hover:border-brand-500"}`,"data-testid":`button-target-${f.value}`,children:i?f.labelAr:f.labelEn},f.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:n("advertising.status","")}),t.jsx("select",{value:l.status,onChange:f=>o({...l,status:f.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-campaign-status",children:Zj.map(f=>t.jsx("option",{value:f.value,children:i?f.labelAr:f.labelEn},f.value))})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel-campaign",children:n("common.cancel","")}),t.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"button-save-campaign",children:[t.jsx(Zt,{size:18}),n("common.save","")]})]})]})]})})},L0e=({slot:e,onClose:s,onSave:a,t:r,isRTL:n})=>{const[i,l]=T.useState({nameAr:e.nameAr,nameEn:e.nameEn,descriptionAr:e.descriptionAr||"",descriptionEn:e.descriptionEn||"",isEnabled:e.isEnabled,maxAds:e.maxAds,selectionMode:e.selectionMode}),o=d=>{d.preventDefault(),a(i)};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsx("h2",{className:"text-xl font-bold text-slate-800",children:r("advertising.editSlot","  ")}),t.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-lg","data-testid":"button-close-slot-modal",children:t.jsx(St,{size:20})})]}),t.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.nameAr"," ")}),t.jsx("input",{type:"text",value:i.nameAr,onChange:d=>l({...i,nameAr:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-slot-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.nameEn"," ")}),t.jsx("input",{type:"text",value:i.nameEn,onChange:d=>l({...i,nameEn:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-slot-name-en"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.descriptionAr"," ")}),t.jsx("textarea",{value:i.descriptionAr,onChange:d=>l({...i,descriptionAr:d.target.value}),rows:2,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"textarea-desc-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.descriptionEn"," ")}),t.jsx("textarea",{value:i.descriptionEn,onChange:d=>l({...i,descriptionEn:d.target.value}),rows:2,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"textarea-desc-en"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm font-medium text-slate-700",children:r("advertising.enabled","")}),t.jsx("button",{type:"button",onClick:()=>l({...i,isEnabled:!i.isEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${i.isEnabled?"bg-brand-600":"bg-slate-300"}`,"data-testid":"toggle-slot-enabled",children:t.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${i.isEnabled?"translate-x-7":"translate-x-1"}`})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.maxAds","  ")}),t.jsx("input",{type:"number",min:"1",max:"10",value:i.maxAds,onChange:d=>l({...i,maxAds:parseInt(d.target.value)||1}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"input-slot-max-ads"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r("advertising.selectionMode"," ")}),t.jsx("select",{value:i.selectionMode,onChange:d=>l({...i,selectionMode:d.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500","data-testid":"select-selection-mode",children:$F.map(d=>t.jsx("option",{value:d.value,children:n?d.labelAr:d.labelEn},d.value))})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-cancel-slot",children:r("common.cancel","")}),t.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"button-save-slot",children:[t.jsx(Zt,{size:18}),r("common.save","")]})]})]})]})})},F0e=()=>{const{t:e}=Jt(),{addToast:s}=Dt(),[a,r]=T.useState(null),[n,i]=T.useState([]),[l,o]=T.useState(!0),[d,u]=T.useState(!1),[h,f]=T.useState({general:!0,limits:!1,permissions:!1,activity:!1}),[x,g]=T.useState(""),[v,b]=T.useState("all"),y=T.useCallback(async()=>{o(!0);try{const[q,L]=await Promise.all([xe.getOrganizationSettings(),xe.getOrganizations()]);r(q),i(L)}catch(q){console.error("Failed to load organization settings:",q),s("   ","error")}finally{o(!1)}},[s]);T.useEffect(()=>{y()},[y]);const j=async()=>{if(a){u(!0);try{await xe.updateOrganizationSettings(a),s("   ","success")}catch(q){console.error("Failed to save settings:",q),s("   ","error")}finally{u(!1)}}},w=q=>{f(L=>({...L,[q]:!L[q]}))},A=(q,L)=>{a&&r({...a,[q]:L})},O={adv_view_campaigns:"  ",adv_manage_campaigns:"  ",adv_manage_slots:"  ",adv_view_reports:"  ",sup_view_forwarded_requests:"  ",sup_submit_offers:" ",sup_view_team_activity:"  ",sup_manage_products:" ",sup_view_analytics:" ",cust_create_orders:" ",cust_view_orders:" ",cust_create_installment_requests:"  ",cust_manage_installment_requests:"  ",cust_use_trader_tools:"  ",cust_view_team_activity:"  ",cust_view_prices:" ",cust_manage_cart:" ",aff_view_links:"  ",aff_manage_links:"  ",aff_view_commissions:" ",aff_withdraw_commissions:" ",aff_view_analytics:" ",org_manage_team:" ",org_view_logs:"  ",org_view_settings:" ",org_edit_profile:"  "},C=(q,L,Q)=>t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-slate-300 text-sm",children:Q}),t.jsx("button",{type:"button",onClick:()=>L(!q),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${q?"bg-amber-500":"bg-slate-600"}`,"data-testid":`toggle-${Q.replace(/\s+/g,"-")}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${q?"translate-x-6":"translate-x-1"}`})})]}),E=(q,L,Q,X=1,W=100)=>t.jsxs("div",{className:"flex items-center justify-between py-2",children:[t.jsx("span",{className:"text-slate-300 text-sm",children:Q}),t.jsx("input",{type:"number",value:q,onChange:ee=>L(Math.max(X,Math.min(W,parseInt(ee.target.value)||X))),className:"w-20 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-slate-100 text-center text-sm",min:X,max:W,"data-testid":`input-${Q.replace(/\s+/g,"-")}`})]}),S=(q,L,Q)=>t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Q.map(X=>t.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-400 cursor-pointer hover:text-slate-300",children:[t.jsx("input",{type:"checkbox",checked:q.includes(X),onChange:W=>{W.target.checked?L([...q,X]):L(q.filter(ee=>ee!==X))},className:"rounded border-slate-600 bg-slate-700 text-amber-500"}),O[X]]},X))}),D=n.filter(q=>{const L=q.name.toLowerCase().includes(x.toLowerCase()),Q=v==="all"||q.type===v;return L&&Q}),M={customer:"",supplier:"",advertiser:"",affiliate:""},U={customer:t.jsx(Xs,{size:16}),supplier:t.jsx(id,{size:16}),advertiser:t.jsx(ya,{size:16}),affiliate:t.jsx(sl,{size:16})};if(l)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Qt,{className:"animate-spin text-amber-500",size:32})});if(!a)return t.jsxs("div",{className:"text-center text-red-500 py-8",children:[t.jsx(Gs,{size:48,className:"mx-auto mb-4"}),t.jsx("p",{children:"   "})]});const I=["cust_create_orders","cust_view_orders","cust_create_installment_requests","cust_manage_installment_requests","cust_use_trader_tools","cust_view_team_activity","cust_view_prices","cust_manage_cart","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"],k=["sup_view_forwarded_requests","sup_submit_offers","sup_view_team_activity","sup_manage_products","sup_view_analytics","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"],z=["adv_view_campaigns","adv_manage_campaigns","adv_manage_slots","adv_view_reports","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"],_=["aff_view_links","aff_manage_links","aff_view_commissions","aff_withdraw_commissions","aff_view_analytics","org_manage_team","org_view_logs","org_view_settings","org_edit_profile"];return t.jsx("div",{className:"p-6 bg-slate-900 min-h-screen",dir:"rtl",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Xs,{className:"text-amber-500",size:28}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"  "}),t.jsx("p",{className:"text-sm text-slate-400",children:"      "})]})]}),t.jsxs("button",{onClick:j,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg transition-colors disabled:opacity-50","data-testid":"button-save-org-settings",children:[d?t.jsx(Qt,{className:"animate-spin",size:18}):t.jsx(ds,{size:18})," "]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("general"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-general-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(la,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:" "})]}),h.general?t.jsx(Wr,{size:20,className:"text-slate-400"}):t.jsx(kr,{size:20,className:"text-slate-400"})]}),h.general&&t.jsxs("div",{className:"p-4 border-t border-slate-700 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:"   "}),C(a.enableTeamsForCustomers,q=>A("enableTeamsForCustomers",q)," "),C(a.enableTeamsForSuppliers,q=>A("enableTeamsForSuppliers",q)," "),C(a.enableTeamsForAdvertisers,q=>A("enableTeamsForAdvertisers",q)," "),C(a.enableTeamsForAffiliates,q=>A("enableTeamsForAffiliates",q)," ")]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:"  "}),C(a.allowCustomPermissionsForCustomers,q=>A("allowCustomPermissionsForCustomers",q),""),C(a.allowCustomPermissionsForSuppliers,q=>A("allowCustomPermissionsForSuppliers",q),""),C(a.allowCustomPermissionsForAdvertisers,q=>A("allowCustomPermissionsForAdvertisers",q),""),C(a.allowCustomPermissionsForAffiliates,q=>A("allowCustomPermissionsForAffiliates",q),"")]})]}),t.jsxs("div",{className:"border-t border-slate-600 pt-4 mt-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-300 mb-3",children:" "}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C(a.requireEmailVerification,q=>A("requireEmailVerification",q),"   "),E(a.invitationExpiryHours,q=>A("invitationExpiryHours",q),"   ()",1,168)]})]})]})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("limits"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-limits-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Gt,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:"  "})]}),h.limits?t.jsx(Wr,{size:20,className:"text-slate-400"}):t.jsx(kr,{size:20,className:"text-slate-400"})]}),h.limits&&t.jsx("div",{className:"p-4 border-t border-slate-700",children:t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[E(a.maxCustomerEmployees,q=>A("maxCustomerEmployees",q),"   ",1,50),E(a.maxSupplierEmployees,q=>A("maxSupplierEmployees",q),"   ",1,50)]}),t.jsxs("div",{className:"space-y-2",children:[E(a.maxAdvertiserEmployees,q=>A("maxAdvertiserEmployees",q),"   ",1,50),E(a.maxAffiliateEmployees,q=>A("maxAffiliateEmployees",q),"   ",1,50)]})]})})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("permissions"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-permissions-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ds,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:" "})]}),h.permissions?t.jsx(Wr,{size:20,className:"text-slate-400"}):t.jsx(kr,{size:20,className:"text-slate-400"})]}),h.permissions&&t.jsxs("div",{className:"p-4 border-t border-slate-700 space-y-6",children:[t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(Xs,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultCustomerManagerPermissions,q=>A("defaultCustomerManagerPermissions",q),I)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultCustomerStaffPermissions,q=>A("defaultCustomerStaffPermissions",q),I)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),S(a.defaultCustomerReadonlyPermissions,q=>A("defaultCustomerReadonlyPermissions",q),I)]})]})]}),t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(id,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultSupplierManagerPermissions,q=>A("defaultSupplierManagerPermissions",q),k)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultSupplierStaffPermissions,q=>A("defaultSupplierStaffPermissions",q),k)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),S(a.defaultSupplierReadonlyPermissions,q=>A("defaultSupplierReadonlyPermissions",q),k)]})]})]}),t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(ya,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultAdvertiserManagerPermissions,q=>A("defaultAdvertiserManagerPermissions",q),z)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultAdvertiserStaffPermissions,q=>A("defaultAdvertiserStaffPermissions",q),z)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),S(a.defaultAdvertiserReadonlyPermissions,q=>A("defaultAdvertiserReadonlyPermissions",q),z)]})]})]}),t.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-semibold text-amber-400 flex items-center gap-2 mb-3",children:[t.jsx(sl,{size:16}),"  "]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultAffiliateManagerPermissions,q=>A("defaultAffiliateManagerPermissions",q),_)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:":"}),S(a.defaultAffiliateStaffPermissions,q=>A("defaultAffiliateStaffPermissions",q),_)]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-slate-400 font-medium",children:" :"}),S(a.defaultAffiliateReadonlyPermissions,q=>A("defaultAffiliateReadonlyPermissions",q),_)]})]})]})]})]}),t.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>w("activity"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-750 transition-colors","data-testid":"section-activity-toggle",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Gr,{className:"text-amber-500",size:20}),t.jsx("span",{className:"font-semibold text-slate-100",children:" "})]}),h.activity?t.jsx(Wr,{size:20,className:"text-slate-400"}):t.jsx(kr,{size:20,className:"text-slate-400"})]}),h.activity&&t.jsxs("div",{className:"p-4 border-t border-slate-700 space-y-4",children:[C(a.trackTeamActivityPerOrganization,q=>A("trackTeamActivityPerOrganization",q),"    "),E(a.activityLogRetentionDays,q=>A("activityLogRetentionDays",q),"   ()",7,365)]})]})]}),t.jsxs("div",{className:"mt-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-100 flex items-center gap-2",children:[t.jsx(Xs,{size:20,className:"text-amber-500"}),"  (",n.length,")"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:x,onChange:q=>g(q.target.value),placeholder:"...",className:"pr-9 pl-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-slate-100 placeholder-slate-400 w-48","data-testid":"input-search-orgs"})]}),t.jsxs("select",{value:v,onChange:q=>b(q.target.value),className:"px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-sm text-slate-100","data-testid":"select-org-type",children:[t.jsx("option",{value:"all",children:""}),t.jsx("option",{value:"customer",children:""}),t.jsx("option",{value:"supplier",children:""}),t.jsx("option",{value:"advertiser",children:""}),t.jsx("option",{value:"affiliate",children:""})]})]})]}),D.length===0?t.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 text-center border border-slate-700",children:[t.jsx(mi,{size:48,className:"mx-auto mb-4 text-slate-500"}),t.jsx("p",{className:"text-slate-400",children:"    "})]}):t.jsx("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-750",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-400",children:" "})]})}),t.jsx("tbody",{className:"divide-y divide-slate-700",children:D.map(q=>t.jsxs("tr",{className:"hover:bg-slate-750/50 transition-colors",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-sm text-slate-100 font-medium",children:q.name})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-slate-700 rounded text-xs text-slate-300",children:[U[q.type],M[q.type]]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs ${q.isActive?"bg-emerald-900/50 text-emerald-400":"bg-red-900/50 text-red-400"}`,children:[q.isActive?t.jsx(Zt,{size:12}):t.jsx(St,{size:12}),q.isActive?"":""]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:new Date(q.createdAt).toLocaleDateString("ar-SA")})]},q.id))})]})})]})]})})},qF=[{code:"ar",label:"",flag:""},{code:"en",label:"English",flag:""},{code:"hi",label:"",flag:""},{code:"zh",label:"",flag:""}],y1={Home:t.jsx(rE,{size:18}),ShoppingBag:t.jsx(Uu,{size:18}),FileText:t.jsx(Lt,{size:18}),Globe:t.jsx(ja,{size:18}),Wrench:t.jsx(sc,{size:18}),Building2:t.jsx(Xs,{size:18}),Users:t.jsx(Gt,{size:18}),Clock:t.jsx(os,{size:18}),Info:t.jsx(mi,{size:18}),Shield:t.jsx(Ds,{size:18}),Truck:t.jsx(Dr,{size:18}),BadgeDollarSign:t.jsx(Pte,{size:18}),Megaphone:t.jsx(ya,{size:18})},U0e=["Home","ShoppingBag","FileText","Globe","Wrench","Building2","Users","Clock","Info","Shield","Truck","BadgeDollarSign","Megaphone"],R5=[{name:"Navy Blue",value:"#0B1B3A"},{name:"Gold",value:"#C8A04F"},{name:"Deep Blue",value:"#1e40af"},{name:"Emerald",value:"#059669"},{name:"Purple",value:"#7c3aed"},{name:"Red",value:"#dc2626"},{name:"Orange",value:"#ea580c"},{name:"Teal",value:"#0d9488"}],pm=T.memo(({active:e,icon:s,label:a,onClick:r,testId:n})=>t.jsxs("button",{onClick:r,"data-testid":n,className:`flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-all ${e?"bg-[#0B1B3A] text-white shadow-lg":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[s,t.jsx("span",{className:"text-sm",children:a})]})),un=T.memo(({title:e,children:s,icon:a})=>t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#0B1B3A] text-white flex items-center justify-center",children:a}),t.jsx("h3",{className:"font-bold text-slate-800",children:e})]}),t.jsx("div",{className:"p-6",children:s})]})),Ja=T.memo(({enabled:e,onChange:s,label:a,description:r,testId:n})=>t.jsxs("div",{className:"flex items-start justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-slate-700",children:a}),r&&t.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:r})]}),t.jsx("button",{onClick:()=>s(!e),"data-testid":n,className:`relative w-12 h-6 rounded-full transition-colors ${e?"bg-green-500":"bg-slate-300"}`,children:t.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${e?"translate-x-6":"translate-x-0.5"}`})})]})),uu=T.memo(({value:e,onChange:s,label:a,placeholder:r,testIdPrefix:n})=>{const[i,l]=T.useState(!1);return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium text-slate-700",children:a}),t.jsxs("button",{onClick:()=>l(!i),className:"text-xs text-[#C8A04F] hover:underline flex items-center gap-1","data-testid":`${n}-expand`,children:[t.jsx(hF,{size:14}),i?"Collapse":"Show All Languages"]})]}),i?t.jsx("div",{className:"space-y-2 p-3 bg-slate-50 rounded-xl",children:qF.map(o=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-8 text-center",children:o.flag}),t.jsx("input",{type:"text",value:e[o.code],onChange:d=>s({...e,[o.code]:d.target.value}),placeholder:`${o.label}: ${r||""}`,"data-testid":`${n}-${o.code}`,className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",dir:o.code==="ar"?"rtl":"ltr"})]},o.code))}):t.jsx("input",{type:"text",value:e.ar,onChange:o=>s({...e,ar:o.target.value}),placeholder:r,"data-testid":`${n}-ar`,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-[#C8A04F] focus:border-transparent",dir:"rtl"})]})}),z0e=T.memo(()=>{const{t:e}=Jt(),{addToast:s}=Dt(),[a,r]=T.useState(null),[n,i]=T.useState(!0),[l,o]=T.useState(!1),[d,u]=T.useState("design"),[h,f]=T.useState(!1);T.useEffect(()=>{x()},[]);const x=async()=>{i(!0);try{const I=await xe.getCustomerPortalSettings();r(I)}catch{s("error","Failed to load settings")}i(!1)},g=async()=>{if(a){o(!0);try{await xe.saveCustomerPortalSettings(a),s("success",e("adminPortalSettings.savedSuccess")||"Settings saved successfully"),f(!1)}catch{s("error","Failed to save settings")}o(!1)}},v=async()=>{if(confirm(e("adminPortalSettings.confirmReset")||"Are you sure you want to reset all settings to defaults?")){i(!0);try{const I=await xe.resetCustomerPortalSettings();r(I),s("success","Settings reset to defaults"),f(!1)}catch{s("error","Failed to reset settings")}i(!1)}},b=T.useCallback((I,k)=>{r(z=>z?{...z,[I]:k}:null),f(!0)},[]),y=T.useCallback((I,k)=>{r(z=>z?{...z,design:{...z.design,[I]:k}}:null),f(!0)},[]),j=T.useCallback((I,k)=>{r(z=>z?{...z,features:{...z.features,[I]:k}}:null),f(!0)},[]),w=T.useCallback((I,k)=>{r(z=>z?{...z,navigationMenu:z.navigationMenu.map(_=>_.id===I?{..._,...k}:_)}:null),f(!0)},[]),A=T.useCallback((I,k)=>{r(z=>z?{...z,dashboardSections:z.dashboardSections.map(_=>_.id===I?{..._,...k}:_)}:null),f(!0)},[]),O=T.useCallback((I,k)=>{r(z=>z?{...z,heroBanners:z.heroBanners.map(_=>_.id===I?{..._,...k}:_)}:null),f(!0)},[]),C=T.useCallback(()=>{const I={id:`banner-${Date.now()}`,enabled:!0,order:((a==null?void 0:a.heroBanners.length)||0)+1,title:{ar:" ",en:"New Title",hi:" ",zh:""},subtitle:{ar:" ",en:"New Description",hi:" ",zh:""},buttonText:{ar:" ",en:"Click Here",hi:"  ",zh:""},buttonUrl:"#",colorClass:"from-primary-700 to-primary-900"};r(k=>k?{...k,heroBanners:[...k.heroBanners,I]}:null),f(!0)},[a==null?void 0:a.heroBanners.length]),E=T.useCallback(I=>{r(k=>k?{...k,heroBanners:k.heroBanners.filter(z=>z.id!==I)}:null),f(!0)},[]),S=T.useCallback((I,k)=>{r(z=>z?{...z,infoCards:z.infoCards.map(_=>_.id===I?{..._,...k}:_)}:null),f(!0)},[]),D=T.useCallback(()=>{const I={id:`card-${Date.now()}`,enabled:!0,order:((a==null?void 0:a.infoCards.length)||0)+1,icon:"Shield",title:{ar:" ",en:"New Title",hi:" ",zh:""},description:{ar:" ",en:"New Description",hi:" ",zh:""},colorClass:"bg-slate-50 text-slate-600"};r(k=>k?{...k,infoCards:[...k.infoCards,I]}:null),f(!0)},[a==null?void 0:a.infoCards.length]),M=T.useCallback(I=>{r(k=>k?{...k,infoCards:k.infoCards.filter(z=>z.id!==I)}:null),f(!0)},[]),U=T.useCallback((I,k)=>{r(z=>z?{...z,announcements:z.announcements.map(_=>_.id===I?{..._,...k}:_)}:null),f(!0)},[]);return n?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx(as,{className:"w-8 h-8 animate-spin text-[#C8A04F]"})}):a?t.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto","data-testid":"admin-portal-settings",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(la,{className:"text-[#C8A04F]",size:28}),e("adminPortalSettings.title")||"Customer Portal Settings"]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("adminPortalSettings.description")||"Configure the appearance, layout, and features of the customer portal"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:v,"data-testid":"button-reset-settings",className:"px-4 py-2.5 border border-slate-300 text-slate-600 rounded-xl hover:bg-slate-50 transition-colors flex items-center gap-2",children:[t.jsx(Qt,{size:18}),e("adminPortalSettings.resetDefaults")||"Reset Defaults"]}),t.jsxs("button",{onClick:g,disabled:l||!h,"data-testid":"button-save-settings",className:`px-6 py-2.5 rounded-xl font-medium transition-all flex items-center gap-2 ${h?"bg-[#C8A04F] text-white hover:bg-[#b8903f] shadow-lg shadow-[#C8A04F]/30":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[l?t.jsx(as,{size:18,className:"animate-spin"}):t.jsx(ds,{size:18}),e("adminPortalSettings.saveChanges")||"Save Changes"]})]})]}),h&&t.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl px-4 py-3 flex items-center gap-3",children:[t.jsx(ma,{className:"text-amber-500",size:20}),t.jsx("span",{className:"text-amber-700 text-sm font-medium",children:e("adminPortalSettings.unsavedChanges")||"You have unsaved changes"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(pm,{active:d==="design",icon:t.jsx(Wo,{size:18}),label:e("adminPortalSettings.tabs.design")||"Design & Theme",onClick:()=>u("design"),testId:"tab-design"}),t.jsx(pm,{active:d==="layout",icon:t.jsx(Gc,{size:18}),label:e("adminPortalSettings.tabs.layout")||"Dashboard Layout",onClick:()=>u("layout"),testId:"tab-layout"}),t.jsx(pm,{active:d==="navigation",icon:t.jsx(XO,{size:18}),label:e("adminPortalSettings.tabs.navigation")||"Navigation Menu",onClick:()=>u("navigation"),testId:"tab-navigation"}),t.jsx(pm,{active:d==="features",icon:t.jsx(Jm,{size:18}),label:e("adminPortalSettings.tabs.features")||"Features",onClick:()=>u("features"),testId:"tab-features"}),t.jsx(pm,{active:d==="content",icon:t.jsx(Lt,{size:18}),label:e("adminPortalSettings.tabs.content")||"Content",onClick:()=>u("content"),testId:"tab-content"})]}),t.jsxs("div",{className:"space-y-6",children:[d==="design"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(un,{title:e("adminPortalSettings.design.themeMode")||"Theme Mode",icon:t.jsx(JO,{size:20}),children:t.jsx("div",{className:"flex gap-3",children:[{mode:"light",icon:t.jsx(Cre,{size:20}),label:"Light"},{mode:"dark",icon:t.jsx(JO,{size:20}),label:"Dark"},{mode:"system",icon:t.jsx(pF,{size:20}),label:"System"}].map(({mode:I,icon:k,label:z})=>t.jsxs("button",{onClick:()=>y("themeMode",I),"data-testid":`button-theme-${I}`,className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${a.design.themeMode===I?"border-[#C8A04F] bg-[#C8A04F]/10":"border-slate-200 hover:border-slate-300"}`,children:[k,t.jsx("span",{className:"text-sm font-medium",children:z})]},I))})}),t.jsx(un,{title:e("adminPortalSettings.design.colors")||"Color Scheme",icon:t.jsx(Wo,{size:20}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Primary Color"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"color",value:a.design.primaryColor,onChange:I=>y("primaryColor",I.target.value),"data-testid":"input-primary-color",className:"w-12 h-12 rounded-lg border border-slate-200 cursor-pointer"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:R5.slice(0,4).map(I=>t.jsx("button",{onClick:()=>y("primaryColor",I.value),className:"w-8 h-8 rounded-lg border-2 border-white shadow-md",style:{backgroundColor:I.value},title:I.name},I.value))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Accent Color"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"color",value:a.design.accentColor,onChange:I=>y("accentColor",I.target.value),"data-testid":"input-accent-color",className:"w-12 h-12 rounded-lg border border-slate-200 cursor-pointer"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:R5.slice(4).map(I=>t.jsx("button",{onClick:()=>y("accentColor",I.value),className:"w-8 h-8 rounded-lg border-2 border-white shadow-md",style:{backgroundColor:I.value},title:I.name},I.value))})]})]})]})}),t.jsx(un,{title:e("adminPortalSettings.design.appearance")||"Appearance",icon:t.jsx(Gc,{size:20}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Border Radius"}),t.jsx("div",{className:"flex gap-2",children:["none","small","medium","large"].map(I=>t.jsx("button",{onClick:()=>y("borderRadius",I),"data-testid":`button-radius-${I}`,className:`flex-1 py-2 px-3 rounded-lg border transition-all text-sm ${a.design.borderRadius===I?"border-[#C8A04F] bg-[#C8A04F]/10 text-[#C8A04F] font-medium":"border-slate-200 hover:border-slate-300"}`,children:I.charAt(0).toUpperCase()+I.slice(1)},I))})]}),t.jsx(Ja,{enabled:a.design.enableAnimations,onChange:I=>y("enableAnimations",I),label:"Enable Animations",description:"Show smooth transitions and hover effects",testId:"toggle-animations"})]})}),t.jsx(un,{title:e("adminPortalSettings.design.font")||"Font Family",icon:t.jsx(Lt,{size:20}),children:t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Cairo","Tajawal","Inter","Roboto"].map(I=>t.jsx("button",{onClick:()=>y("fontFamily",I),"data-testid":`button-font-${I}`,className:`py-3 px-4 rounded-xl border transition-all text-center ${a.design.fontFamily===I?"border-[#C8A04F] bg-[#C8A04F]/10":"border-slate-200 hover:border-slate-300"}`,style:{fontFamily:I},children:I},I))})})]}),d==="layout"&&t.jsxs(un,{title:e("adminPortalSettings.layout.sections")||"Dashboard Sections",icon:t.jsx(Gc,{size:20}),children:[t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Enable or disable sections on the customer dashboard. Drag to reorder."}),t.jsx("div",{className:"space-y-2",children:a.dashboardSections.sort((I,k)=>I.order-k.order).map((I,k)=>t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsx(QO,{className:"text-slate-400 cursor-move",size:20}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-slate-700",children:I.title.en}),t.jsx("p",{className:"text-xs text-slate-500",children:I.key})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{if(k>0){const z=[...a.dashboardSections],_=z[k-1],q=z[k];[_.order,q.order]=[q.order,_.order],b("dashboardSections",z)}},disabled:k===0,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(Wr,{size:18})}),t.jsx("button",{onClick:()=>{if(k<a.dashboardSections.length-1){const z=[...a.dashboardSections],_=z[k+1],q=z[k];[_.order,q.order]=[q.order,_.order],b("dashboardSections",z)}},disabled:k===a.dashboardSections.length-1,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(kr,{size:18})})]}),t.jsx("button",{onClick:()=>A(I.id,{enabled:!I.enabled}),"data-testid":`toggle-section-${I.key}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(fs,{size:18}):t.jsx(gr,{size:18})})]},I.id))})]}),d==="navigation"&&t.jsxs(un,{title:e("adminPortalSettings.navigation.menu")||"Navigation Menu Items",icon:t.jsx(XO,{size:20}),children:[t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure which menu items appear in the customer portal sidebar."}),t.jsx("div",{className:"space-y-3",children:a.navigationMenu.sort((I,k)=>I.order-k.order).map((I,k)=>t.jsxs("div",{className:`p-4 rounded-xl border ${I.enabled?"bg-white border-slate-200":"bg-slate-50 border-slate-100"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(QO,{className:"text-slate-400 cursor-move",size:20}),t.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#0B1B3A] text-white flex items-center justify-center",children:y1[I.icon]||t.jsx(rE,{size:18})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("input",{type:"text",value:I.label.en,onChange:z=>w(I.id,{label:{...I.label,en:z.target.value}}),className:"w-full font-medium text-slate-700 bg-transparent border-0 focus:ring-0 p-0","data-testid":`input-nav-label-${I.key}`}),t.jsx("p",{className:"text-xs text-slate-500",children:I.key})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>{if(k>0){const z=[...a.navigationMenu],_=z[k-1],q=z[k];[_.order,q.order]=[q.order,_.order],b("navigationMenu",z)}},disabled:k===0,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(Wr,{size:18})}),t.jsx("button",{onClick:()=>{if(k<a.navigationMenu.length-1){const z=[...a.navigationMenu],_=z[k+1],q=z[k];[_.order,q.order]=[q.order,_.order],b("navigationMenu",z)}},disabled:k===a.navigationMenu.length-1,className:"p-1.5 rounded-lg hover:bg-slate-200 disabled:opacity-30",children:t.jsx(kr,{size:18})}),t.jsx("button",{onClick:()=>w(I.id,{enabled:!I.enabled}),"data-testid":`toggle-nav-${I.key}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(fs,{size:18}):t.jsx(gr,{size:18})})]})]}),I.enabled&&t.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100 grid grid-cols-4 gap-2",children:qF.map(z=>t.jsx("input",{type:"text",value:I.label[z.code],onChange:_=>w(I.id,{label:{...I.label,[z.code]:_.target.value}}),placeholder:z.label,className:"px-3 py-1.5 text-sm border border-slate-200 rounded-lg",dir:z.code==="ar"?"rtl":"ltr","data-testid":`input-nav-${I.key}-${z.code}`},z.code))})]},I.id))})]}),d==="features"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(un,{title:e("adminPortalSettings.features.core")||"Core Features",icon:t.jsx(Jm,{size:20}),children:[t.jsx(Ja,{enabled:a.features.enableSearch,onChange:I=>j("enableSearch",I),label:"Search",description:"Allow customers to search for products",testId:"toggle-feature-search"}),t.jsx(Ja,{enabled:a.features.enableCart,onChange:I=>j("enableCart",I),label:"Shopping Cart",description:"Enable cart functionality",testId:"toggle-feature-cart"}),t.jsx(Ja,{enabled:a.features.enableOrders,onChange:I=>j("enableOrders",I),label:"Order History",description:"Show order history page",testId:"toggle-feature-orders"}),t.jsx(Ja,{enabled:a.features.enableQuoteRequests,onChange:I=>j("enableQuoteRequests",I),label:"Quote Requests",description:"Allow quote/pricing requests",testId:"toggle-feature-quotes"})]}),t.jsxs(un,{title:e("adminPortalSettings.features.tools")||"Trader Tools",icon:t.jsx(sc,{size:20}),children:[t.jsx(Ja,{enabled:a.features.enableImportFromChina,onChange:I=>j("enableImportFromChina",I),label:"Import from China",description:"Enable China import requests",testId:"toggle-feature-import"}),t.jsx(Ja,{enabled:a.features.enableVinDecoder,onChange:I=>j("enableVinDecoder",I),label:"VIN Decoder",description:"Extract parts from VIN number",testId:"toggle-feature-vin"}),t.jsx(Ja,{enabled:a.features.enablePdfToExcel,onChange:I=>j("enablePdfToExcel",I),label:"PDF to Excel",description:"Convert PDF price lists to Excel",testId:"toggle-feature-pdf"}),t.jsx(Ja,{enabled:a.features.enablePriceComparison,onChange:I=>j("enablePriceComparison",I),label:"Price Comparison",description:"Compare prices across suppliers",testId:"toggle-feature-compare"}),t.jsx(Ja,{enabled:a.features.enableSupplierMarketplace,onChange:I=>j("enableSupplierMarketplace",I),label:"Supplier Marketplace",description:"Access supplier marketplace",testId:"toggle-feature-marketplace"})]}),t.jsxs(un,{title:e("adminPortalSettings.features.b2b")||"B2B Features",icon:t.jsx(Xs,{size:20}),children:[t.jsx(Ja,{enabled:a.features.enableInstallments,onChange:I=>j("enableInstallments",I),label:"Installment Purchases",description:"Enable BNPL payment options",testId:"toggle-feature-installments"}),t.jsx(Ja,{enabled:a.features.enableOrganization,onChange:I=>j("enableOrganization",I),label:"Organization Management",description:"Manage business organization",testId:"toggle-feature-organization"}),t.jsx(Ja,{enabled:a.features.enableTeamManagement,onChange:I=>j("enableTeamManagement",I),label:"Team Management",description:"Manage team members",testId:"toggle-feature-team"})]}),t.jsxs(un,{title:e("adminPortalSettings.features.marketing")||"Marketing & Content",icon:t.jsx(ya,{size:20}),children:[t.jsx(Ja,{enabled:a.features.enableMarketingBanners,onChange:I=>j("enableMarketingBanners",I),label:"Marketing Banners",description:"Show promotional banners",testId:"toggle-feature-banners"}),t.jsx(Ja,{enabled:a.features.enableMarketingPopups,onChange:I=>j("enableMarketingPopups",I),label:"Marketing Popups",description:"Show promotional popups",testId:"toggle-feature-popups"}),t.jsx(Ja,{enabled:a.features.enableMarketingCards,onChange:I=>j("enableMarketingCards",I),label:"Marketing Cards",description:"Show dashboard marketing cards",testId:"toggle-feature-cards"}),t.jsx(Ja,{enabled:a.features.enableAnnouncementTicker,onChange:I=>j("enableAnnouncementTicker",I),label:"Announcement Ticker",description:"Show scrolling announcements",testId:"toggle-feature-ticker"})]}),t.jsxs(un,{title:e("adminPortalSettings.features.guest")||"Guest Mode",icon:t.jsx(Gt,{size:20}),children:[t.jsx(Ja,{enabled:a.features.enableGuestMode,onChange:I=>j("enableGuestMode",I),label:"Enable Guest Mode",description:"Allow browsing without login",testId:"toggle-feature-guest"}),t.jsx(Ja,{enabled:a.features.guestCanSearch,onChange:I=>j("guestCanSearch",I),label:"Guest Can Search",description:"Allow guests to search products",testId:"toggle-feature-guest-search"}),t.jsx(Ja,{enabled:a.features.guestCanViewPrices,onChange:I=>j("guestCanViewPrices",I),label:"Guest Can View Prices",description:"Show prices to guest users",testId:"toggle-feature-guest-prices"})]})]}),d==="content"&&t.jsxs("div",{className:"space-y-8",children:[t.jsxs(un,{title:e("adminPortalSettings.banners.hero")||"Hero Banners",icon:t.jsx(Lt,{size:20}),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Configure the rotating hero banners on the dashboard."}),t.jsxs("button",{onClick:C,"data-testid":"button-add-banner",className:"flex items-center gap-2 px-4 py-2 bg-[#C8A04F] text-white rounded-xl hover:bg-[#b8903f] transition-colors",children:[t.jsx(Pt,{size:18}),"Add Banner"]})]}),t.jsx("div",{className:"space-y-4",children:a.heroBanners.sort((I,k)=>I.order-k.order).map(I=>t.jsxs("div",{className:`p-4 rounded-xl border ${I.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${I.colorClass} flex items-center justify-center`,children:t.jsx(ya,{className:"text-white",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-700",children:I.title.en}),t.jsxs("p",{className:"text-xs text-slate-500",children:["Order: ",I.order]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>O(I.id,{enabled:!I.enabled}),"data-testid":`toggle-banner-${I.id}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(fs,{size:18}):t.jsx(gr,{size:18})}),t.jsx("button",{onClick:()=>E(I.id),"data-testid":`button-delete-banner-${I.id}`,className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:t.jsx(Ct,{size:18})})]})]}),I.enabled&&t.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-100",children:[t.jsx(uu,{value:I.title,onChange:k=>O(I.id,{title:k}),label:"Title",placeholder:"Banner title...",testIdPrefix:`banner-title-${I.id}`}),t.jsx(uu,{value:I.subtitle,onChange:k=>O(I.id,{subtitle:k}),label:"Subtitle",placeholder:"Banner subtitle...",testIdPrefix:`banner-subtitle-${I.id}`}),t.jsx(uu,{value:I.buttonText,onChange:k=>O(I.id,{buttonText:k}),label:"Button Text",placeholder:"Button text...",testIdPrefix:`banner-button-${I.id}`}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Button URL"}),t.jsx("input",{type:"text",value:I.buttonUrl,onChange:k=>O(I.id,{buttonUrl:k.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm","data-testid":`input-banner-url-${I.id}`})]})]})]},I.id))})]}),t.jsxs(un,{title:e("adminPortalSettings.announcements.title")||"Announcements",icon:t.jsx(vr,{size:20}),children:[t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Configure ticker, banner, and popup announcements."}),t.jsx("div",{className:"space-y-4",children:a.announcements.map(I=>t.jsxs("div",{className:"p-4 rounded-xl border border-slate-200 bg-white",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{backgroundColor:I.backgroundColor,color:I.textColor},children:t.jsx(vr,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium text-slate-700 capitalize",children:[I.type," Announcement"]}),t.jsx("p",{className:"text-xs text-slate-500 truncate max-w-xs",children:I.content.en})]})]}),t.jsx("button",{onClick:()=>U(I.id,{enabled:!I.enabled}),"data-testid":`toggle-announcement-${I.id}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(fs,{size:18}):t.jsx(gr,{size:18})})]}),I.enabled&&t.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-100",children:[t.jsx(uu,{value:I.content,onChange:k=>U(I.id,{content:k}),label:"Content",placeholder:"Announcement text...",testIdPrefix:`announcement-content-${I.id}`}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Background Color"}),t.jsx("input",{type:"color",value:I.backgroundColor,onChange:k=>U(I.id,{backgroundColor:k.target.value}),className:"w-full h-10 rounded-lg border border-slate-200 cursor-pointer","data-testid":`input-announcement-bg-${I.id}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Text Color"}),t.jsx("input",{type:"color",value:I.textColor,onChange:k=>U(I.id,{textColor:k.target.value}),className:"w-full h-10 rounded-lg border border-slate-200 cursor-pointer","data-testid":`input-announcement-text-${I.id}`})]})]})]})]},I.id))})]}),t.jsxs(un,{title:e("adminPortalSettings.cards.info")||"Info Cards",icon:t.jsx(sb,{size:20}),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("p",{className:"text-sm text-slate-500",children:"Configure the info/marketing cards displayed on the dashboard."}),t.jsxs("button",{onClick:D,"data-testid":"button-add-card",className:"flex items-center gap-2 px-4 py-2 bg-[#C8A04F] text-white rounded-xl hover:bg-[#b8903f] transition-colors",children:[t.jsx(Pt,{size:18}),"Add Card"]})]}),t.jsx("div",{className:"space-y-4",children:a.infoCards.sort((I,k)=>I.order-k.order).map(I=>t.jsxs("div",{className:`p-4 rounded-xl border ${I.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl ${I.colorClass} flex items-center justify-center`,children:y1[I.icon]||t.jsx(Ds,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-slate-700",children:I.title.en}),t.jsxs("p",{className:"text-xs text-slate-500",children:["Order: ",I.order]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>S(I.id,{enabled:!I.enabled}),"data-testid":`toggle-card-${I.id}`,className:`p-2 rounded-lg transition-colors ${I.enabled?"bg-green-100 text-green-600":"bg-slate-200 text-slate-400"}`,children:I.enabled?t.jsx(fs,{size:18}):t.jsx(gr,{size:18})}),t.jsx("button",{onClick:()=>M(I.id),"data-testid":`button-delete-card-${I.id}`,className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",children:t.jsx(Ct,{size:18})})]})]}),I.enabled&&t.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-100",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-700 mb-2 block",children:"Icon"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:U0e.map(k=>t.jsx("button",{onClick:()=>S(I.id,{icon:k}),className:`p-2 rounded-lg border transition-all ${I.icon===k?"border-[#C8A04F] bg-[#C8A04F]/10":"border-slate-200 hover:border-slate-300"}`,children:y1[k]},k))})]}),t.jsx(uu,{value:I.title,onChange:k=>S(I.id,{title:k}),label:"Title",placeholder:"Card title...",testIdPrefix:`card-title-${I.id}`}),t.jsx(uu,{value:I.description,onChange:k=>S(I.id,{description:k}),label:"Description",placeholder:"Card description...",testIdPrefix:`card-desc-${I.id}`})]})]},I.id))})]})]})]})]}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-slate-500",children:[t.jsx(ma,{size:48,className:"mb-4"}),t.jsx("p",{children:"Failed to load settings. Please try again."})]})}),mu=({checked:e,onChange:s,testId:a})=>t.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>s(!e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${e?"bg-blue-600":"bg-gray-200"}`,"data-testid":a,children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-gray-300 transition-transform ${e?"translate-x-5":"translate-x-0.5"}`})});function B0e(){const{t:e}=Jt(),{language:s,dir:a}=Bs(),{addToast:r}=Dt(),n=a==="rtl",[i,l]=T.useState(null),[o,d]=T.useState(!0),[u,h]=T.useState(!1),[f,x]=T.useState(!1),[g,v]=T.useState("providers"),[b,y]=T.useState({}),[j,w]=T.useState({});T.useEffect(()=>{A()},[]);const A=async()=>{try{d(!0);const _=await xe.getAISettings();l(_);const q={};_.providers.forEach(L=>{q[L.id]=L.enabled}),w(q)}catch{r(e("common.loadError","   "),"error")}finally{d(!1)}},O=async()=>{if(i)try{h(!0),await xe.saveAISettings(i),x(!1),r(e("aiSettings.savedSuccess","     "),"success")}catch{r(e("common.saveError","   "),"error")}finally{h(!1)}},C=async()=>{if(confirm(e("aiSettings.confirmReset","      ")))try{const _=await xe.resetAISettings();l(_),x(!1),r(e("aiSettings.resetSuccess","   "),"success")}catch{r(e("common.error"," "),"error")}},E=_=>{i&&(l({...i,..._}),x(!0))},S=(_,q)=>{if(!i)return;const L=i.providers.map(Q=>Q.id===_?{...Q,...q}:Q);E({providers:L})},D=_=>{if(!i)return;const q=i.providers.find(Q=>Q.id===_);if(!q)return;const L=i.providers.map(Q=>({...Q,isDefault:Q.id===_}));E({providers:L,defaultProvider:q.provider})},M=(_,q)=>{i&&E({features:{...i.features,[_]:q}})},U=(_,q)=>{if(!i)return;const L=i.usageLimits.map(Q=>Q.role===_?{...Q,...q}:Q);E({usageLimits:L})},I=_=>{switch(_){case"openai":return"";case"gemini":return"";case"anthropic":return"";default:return""}},k=_=>{switch(_){case"openai":return"bg-green-100 text-green-800";case"gemini":return"bg-blue-100 text-blue-800";case"anthropic":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};if(o)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",dir:n?"rtl":"ltr",children:t.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full"})});if(!i)return null;const z=[{id:"providers",label:e("aiSettings.tabs.providers"," "),icon:al},{id:"features",label:e("aiSettings.tabs.features",""),icon:pi},{id:"limits",label:e("aiSettings.tabs.limits"," "),icon:Rr},{id:"prompts",label:e("aiSettings.tabs.prompts",""),icon:Or},{id:"safety",label:e("aiSettings.tabs.safety",""),icon:Ds}];return t.jsxs("div",{className:"space-y-6",dir:n?"rtl":"ltr",children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2 text-slate-800",children:[t.jsx(Mn,{className:"w-7 h-7 text-blue-600"}),e("aiSettings.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.description","    ")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[f&&t.jsx("span",{className:"px-3 py-1 text-sm font-medium text-amber-700 bg-amber-50 border border-amber-200 rounded-lg",children:e("aiSettings.unsavedChanges","  ")}),t.jsxs("button",{onClick:C,disabled:u,className:"flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50","data-testid":"button-reset-ai",children:[t.jsx(bF,{className:"w-4 h-4"}),e("aiSettings.resetDefaults"," ")]}),t.jsxs("button",{onClick:O,disabled:u||!f,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-ai",children:[t.jsx(ds,{className:"w-4 h-4"}),u?e("common.saving"," ..."):e("aiSettings.saveChanges"," ")]})]})]}),t.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${i.enabled?"bg-green-100":"bg-gray-100"}`,children:t.jsx(Mn,{className:`w-5 h-5 ${i.enabled?"text-green-600":"text-gray-500"}`})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-base font-medium text-slate-800",children:e("aiSettings.globalEnable","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.globalEnableDesc","      ")})]})]}),t.jsx("button",{type:"button",role:"switch","aria-checked":i.enabled,onClick:()=>E({enabled:!i.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${i.enabled?"bg-blue-600":"bg-gray-200"}`,"data-testid":"switch-ai-global",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-gray-300 transition-transform ${i.enabled?"translate-x-5":"translate-x-0.5"}`})})]})}),t.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-2",children:z.map(_=>t.jsxs("button",{onClick:()=>v(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${g===_.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,"data-testid":`tab-ai-${_.id}`,children:[t.jsx(_.icon,{className:"w-4 h-4"}),_.label]},_.id))}),g==="providers"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(al,{className:"w-5 h-5"}),e("aiSettings.providers.title","  ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.providers.description","  OpenAI  Gemini  Anthropic")})]}),t.jsx("div",{className:"space-y-4",children:i.providers.map(_=>t.jsxs("div",{className:`border rounded-xl overflow-hidden ${_.enabled?"border-blue-200":"border-slate-200"}`,children:[t.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer ${_.enabled?"bg-blue-50":"bg-slate-50"}`,onClick:()=>w(q=>({...q,[_.id]:!q[_.id]})),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:I(_.provider)}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-semibold text-slate-800",children:_.displayName[s]||_.displayName.en}),_.isDefault&&t.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-full",children:e("aiSettings.providers.default","")}),t.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${k(_.provider)}`,children:_.model})]}),t.jsx("p",{className:"text-sm text-slate-500",children:_.enabled?e("aiSettings.providers.enabled",""):e("aiSettings.providers.disabled","")})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",role:"switch","aria-checked":_.enabled,onClick:q=>{q.stopPropagation(),S(_.id,{enabled:!_.enabled})},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${_.enabled?"bg-blue-600":"bg-gray-200"}`,"data-testid":`switch-provider-${_.id}`,children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-gray-300 transition-transform ${_.enabled?"translate-x-5":"translate-x-0.5"}`})}),j[_.id]?t.jsx(Wr,{className:"w-5 h-5 text-slate-500"}):t.jsx(kr,{className:"w-5 h-5 text-slate-500"})]})]}),j[_.id]&&t.jsxs("div",{className:"p-4 border-t border-slate-200 space-y-4 bg-white",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.apiKey"," API")}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:b[_.id]?"text":"password",value:_.apiKey||"",onChange:q=>S(_.id,{apiKey:q.target.value}),placeholder:e("aiSettings.providers.apiKeyPlaceholder","  API"),className:"w-full px-4 py-2 pe-10 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-apikey-${_.id}`}),t.jsx("button",{type:"button",onClick:()=>y(q=>({...q,[_.id]:!q[_.id]})),className:"absolute end-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:b[_.id]?t.jsx(gr,{className:"w-4 h-4"}):t.jsx(fs,{className:"w-4 h-4"})})]}),t.jsx("p",{className:"text-xs text-slate-500",children:e("aiSettings.providers.apiKeyNote","      Replit AI")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.model","")}),t.jsxs("select",{value:_.model,onChange:q=>S(_.id,{model:q.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`select-model-${_.id}`,children:[_.provider==="openai"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"gpt-4o",children:"GPT-4o"}),t.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini"}),t.jsx("option",{value:"gpt-4",children:"GPT-4"}),t.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"})]}),_.provider==="gemini"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"gemini-2.5-pro",children:"Gemini 2.5 Pro"}),t.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),t.jsx("option",{value:"gemini-pro",children:"Gemini Pro"})]}),_.provider==="anthropic"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"claude-opus-4-5",children:"Claude Opus 4.5"}),t.jsx("option",{value:"claude-sonnet-4-5",children:"Claude Sonnet 4.5"}),t.jsx("option",{value:"claude-haiku-4-5",children:"Claude Haiku 4.5"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.maxTokens","  ")}),t.jsx("input",{type:"number",value:_.maxTokens,onChange:q=>S(_.id,{maxTokens:parseInt(q.target.value)||4096}),min:256,max:32e3,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-tokens-${_.id}`})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.providers.rateLimit"," ")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:_.maxRequestsPerMinute,onChange:q=>S(_.id,{maxRequestsPerMinute:parseInt(q.target.value)||60}),placeholder:e("aiSettings.providers.perMinute"," "),className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),t.jsx("input",{type:"number",value:_.maxRequestsPerDay,onChange:q=>S(_.id,{maxRequestsPerDay:parseInt(q.target.value)||1e3}),placeholder:e("aiSettings.providers.perDay"," "),className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${_.supportsChat?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[_.supportsChat?t.jsx(Zt,{className:"w-3 h-3"}):t.jsx(St,{className:"w-3 h-3"}),e("aiSettings.providers.chat","")]}),t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${_.supportsImageGeneration?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[_.supportsImageGeneration?t.jsx(Zt,{className:"w-3 h-3"}):t.jsx(St,{className:"w-3 h-3"}),e("aiSettings.providers.imageGen"," ")]}),t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${_.supportsVision?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[_.supportsVision?t.jsx(Zt,{className:"w-3 h-3"}):t.jsx(St,{className:"w-3 h-3"}),e("aiSettings.providers.vision","")]}),t.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-full ${_.supportsAudio?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:[_.supportsAudio?t.jsx(Zt,{className:"w-3 h-3"}):t.jsx(St,{className:"w-3 h-3"}),e("aiSettings.providers.audio","")]})]}),!_.isDefault&&_.enabled&&t.jsx("button",{onClick:()=>D(_.id),className:"px-4 py-2 text-sm font-medium border border-blue-200 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors","data-testid":`button-default-${_.id}`,children:e("aiSettings.providers.setDefault"," ")})]})]},_.id))})]})}),g==="features"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Gt,{className:"w-5 h-5"}),e("aiSettings.features.customerTitle"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.features.customerDesc","    ")})]}),t.jsx("div",{className:"space-y-4",children:[{key:"enableAIAssistant",icon:Or,label:" ",desc:"     "},{key:"enableAIProductSearch",icon:Ft,label:" ",desc:"     "},{key:"enableAIPartMatching",icon:ab,label:" ",desc:"   "},{key:"enableAIVinDecoding",icon:Xt,label:"  VIN",desc:"     "},{key:"enableAIPriceAnalysis",icon:gi,label:" ",desc:"  "},{key:"enableAITranslation",icon:hF,label:" ",desc:"  "}].map(_=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_.icon,{className:"w-5 h-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e(`aiSettings.features.${_.key}`,_.label)}),t.jsx("p",{className:"text-sm text-slate-500",children:e(`aiSettings.features.${_.key}Desc`,_.desc)})]})]}),t.jsx(mu,{checked:i.features[_.key],onChange:q=>M(_.key,q),testId:`switch-feature-${_.key}`})]},_.key))})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(la,{className:"w-5 h-5"}),e("aiSettings.features.adminTitle"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.features.adminDesc","    ")})]}),t.jsx("div",{className:"space-y-4",children:[{key:"enableAIOrderAnalysis",icon:Rr,label:" ",desc:"   "},{key:"enableAICustomerInsights",icon:Gt,label:" ",desc:"  "},{key:"enableAIReports",icon:gi,label:" ",desc:"  "},{key:"enableAIFraudDetection",icon:Gs,label:" ",desc:"  "},{key:"enableAIInventoryPrediction",icon:Xt,label:" ",desc:"  "}].map(_=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_.icon,{className:"w-5 h-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e(`aiSettings.features.${_.key}`,_.label)}),t.jsx("p",{className:"text-sm text-slate-500",children:e(`aiSettings.features.${_.key}Desc`,_.desc)})]})]}),t.jsx(mu,{checked:i.features[_.key],onChange:q=>M(_.key,q),testId:`switch-feature-${_.key}`})]},_.key))})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(ya,{className:"w-5 h-5"}),e("aiSettings.features.marketingTitle"," ")]})}),t.jsx("div",{className:"space-y-4",children:[{key:"enableAIContentGeneration",icon:pi,label:" ",desc:"   "},{key:"enableAICampaignOptimization",icon:hh,label:" ",desc:"   "}].map(_=>t.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100 last:border-0",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_.icon,{className:"w-5 h-5 text-slate-400"}),t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e(`aiSettings.features.${_.key}`,_.label)}),t.jsx("p",{className:"text-sm text-slate-500",children:e(`aiSettings.features.${_.key}Desc`,_.desc)})]})]}),t.jsx(mu,{checked:i.features[_.key],onChange:q=>M(_.key,q),testId:`switch-feature-${_.key}`})]},_.key))})]})]}),g==="limits"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Rr,{className:"w-5 h-5"}),e("aiSettings.limits.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.limits.description","     ")})]}),t.jsx("div",{className:"space-y-6",children:i.usageLimits.map(_=>t.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-3 py-1 text-sm font-medium bg-slate-100 text-slate-700 rounded-full",children:_.role}),t.jsx("span",{className:"text-sm text-slate-500",children:e(`aiSettings.limits.role.${_.role}`,_.role)})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.limits.dailyRequests"," ")}),t.jsx("input",{type:"number",value:_.dailyRequests,onChange:q=>U(_.role,{dailyRequests:parseInt(q.target.value)||0}),min:0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-daily-${_.role}`})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.limits.monthlyRequests"," ")}),t.jsx("input",{type:"number",value:_.monthlyRequests,onChange:q=>U(_.role,{monthlyRequests:parseInt(q.target.value)||0}),min:0,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-monthly-${_.role}`})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:e("aiSettings.limits.maxTokens","  ")}),t.jsx("input",{type:"number",value:_.maxTokensPerRequest,onChange:q=>U(_.role,{maxTokensPerRequest:parseInt(q.target.value)||0}),min:256,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":`input-maxtokens-${_.role}`})]})]})]},_.role))})]}),g==="prompts"&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Or,{className:"w-5 h-5"}),e("aiSettings.prompts.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.prompts.description","    ")})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-base font-medium text-slate-800",children:e("aiSettings.prompts.customerAssistant","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.prompts.customerAssistantDesc","   ")}),t.jsx("textarea",{value:i.systemPrompts.customerAssistant[s]||i.systemPrompts.customerAssistant.en,onChange:_=>E({systemPrompts:{...i.systemPrompts,customerAssistant:{...i.systemPrompts.customerAssistant,[s]:_.target.value}}}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"textarea-prompt-assistant"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-base font-medium text-slate-800",children:e("aiSettings.prompts.productSearch","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.prompts.productSearchDesc","   ")}),t.jsx("textarea",{value:i.systemPrompts.productSearch[s]||i.systemPrompts.productSearch.en,onChange:_=>E({systemPrompts:{...i.systemPrompts,productSearch:{...i.systemPrompts.productSearch,[s]:_.target.value}}}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"textarea-prompt-search"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-base font-medium text-slate-800",children:e("aiSettings.prompts.partMatching"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.prompts.partMatchingDesc","    ")}),t.jsx("textarea",{value:i.systemPrompts.partMatching[s]||i.systemPrompts.partMatching.en,onChange:_=>E({systemPrompts:{...i.systemPrompts,partMatching:{...i.systemPrompts.partMatching,[s]:_.target.value}}}),rows:4,className:"w-full px-4 py-3 border border-slate-200 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"textarea-prompt-matching"})]})]})]}),g==="safety"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Ds,{className:"w-5 h-5"}),e("aiSettings.safety.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:e("aiSettings.safety.description","   ")})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e("aiSettings.safety.contentModeration"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.contentModerationDesc","   ")})]}),t.jsx(mu,{checked:i.enableContentModeration,onChange:_=>E({enableContentModeration:_}),testId:"switch-moderation"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block font-medium text-slate-800",children:e("aiSettings.safety.blockedTopics"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.blockedTopicsDesc","      ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:i.blockedTopics.map((_,q)=>t.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 text-sm font-medium bg-slate-100 text-slate-700 rounded-full",children:[_,t.jsx("button",{onClick:()=>E({blockedTopics:i.blockedTopics.filter((L,Q)=>Q!==q)}),className:"ms-1 text-slate-400 hover:text-red-500",children:t.jsx(St,{className:"w-3 h-3"})})]},q))}),t.jsx("input",{placeholder:e("aiSettings.safety.addTopic","   Enter"),onKeyDown:_=>{if(_.key==="Enter"){const q=_.target.value.trim();q&&!i.blockedTopics.includes(q)&&(E({blockedTopics:[...i.blockedTopics,q]}),_.target.value="")}},className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"input-blocked-topic"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block font-medium text-slate-800",children:e("aiSettings.safety.maxConversation","  ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.maxConversationDesc","     ")}),t.jsx("input",{type:"number",value:i.maxConversationLength,onChange:_=>E({maxConversationLength:parseInt(_.target.value)||50}),min:10,max:200,className:"w-full max-w-xs px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500","data-testid":"input-max-conversation"})]}),t.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e("aiSettings.safety.trackUsage"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.trackUsageDesc","   ")})]}),t.jsx(mu,{checked:i.trackUsage,onChange:_=>E({trackUsage:_}),testId:"switch-track-usage"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-medium text-slate-800",children:e("aiSettings.safety.trackCosts"," ")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("aiSettings.safety.trackCostsDesc","  API")})]}),t.jsx(mu,{checked:i.trackCosts,onChange:_=>E({trackCosts:_}),testId:"switch-track-costs"})]})]})]})]})})]})}const $0e=({onRefresh:e})=>{const{t:s}=Jt(),[a,r]=T.useState([]),[n,i]=T.useState(!0),[l,o]=T.useState(""),[d,u]=T.useState("ALL"),[h,f]=T.useState(null),[x,g]=T.useState(!1),{hasPermission:v}=h0(),b=v("orders","view")||v("customers","view"),y=async()=>{i(!0);try{const S=await xe.getAbandonedCarts();r(S)}catch(S){console.error("Failed to load abandoned carts:",S)}finally{i(!1)}};T.useEffect(()=>{y()},[]);const j=S=>{const D=new Date,M=new Date(S),U=D.getTime()-M.getTime(),I=Math.floor(U/(1e3*60)),k=Math.floor(I/60),z=Math.floor(k/24);return z>0?`${z} ${s("common.days","")}`:k>0?`${k} ${s("common.hours","")}`:`${I} ${s("common.minutes","")}`},w=S=>{const D={ADMIN:{label:"",color:"bg-purple-100 text-purple-700"},EMPLOYEE:{label:"",color:"bg-blue-100 text-blue-700"},CUSTOMER:{label:"",color:"bg-green-100 text-green-700"},SUPPLIER_LOCAL:{label:" ",color:"bg-orange-100 text-orange-700"},SUPPLIER_INTERNATIONAL:{label:" ",color:"bg-red-100 text-red-700"},MARKETER:{label:"",color:"bg-pink-100 text-pink-700"}};if(!S)return t.jsx("span",{className:"text-slate-400 text-xs",children:"-"});const M=D[S]||{label:S,color:"bg-slate-100 text-slate-700"};return t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${M.color}`,children:M.label})},A=T.useMemo(()=>a.filter(S=>{var U,I,k;const D=!l||((U=S.userName)==null?void 0:U.toLowerCase().includes(l.toLowerCase()))||((I=S.phone)==null?void 0:I.includes(l))||((k=S.whatsapp)==null?void 0:k.includes(l)),M=d==="ALL"||S.extendedRole===d;return D&&M}),[a,l,d]),O=T.useMemo(()=>A.reduce((S,D)=>S+D.totalAmount,0),[A]),C=S=>{f(S),g(!0)},E=S=>{if(!S)return;const D=S.replace(/[^0-9]/g,"");window.open(`https://wa.me/${D}`,"_blank")};return b?t.jsxs("div",{className:"p-6 lg:p-8",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx($a,{className:"text-[#C8A04F]",size:28}),s("adminAbandonedCarts.title"," ")]}),t.jsx("p",{className:"text-slate-500 mt-1",children:s("adminAbandonedCarts.subtitle","        (  15 )")})]}),t.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-700 font-medium transition-colors","data-testid":"button-refresh-carts",children:[t.jsx(Qt,{size:18,className:n?"animate-spin":""}),s("common.refresh","")]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:t.jsx($a,{className:"text-orange-600",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:s("adminAbandonedCarts.stats.count"," ")}),t.jsx("p",{className:"text-2xl font-black text-slate-800","data-testid":"text-abandoned-count",children:A.length})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(Xt,{className:"text-green-600",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:s("adminAbandonedCarts.stats.totalValue"," ")}),t.jsxs("p",{className:"text-2xl font-black text-slate-800","data-testid":"text-total-value",children:[O.toLocaleString()," ."]})]})]})}),t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(bn,{className:"text-blue-600",size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-500",children:s("adminAbandonedCarts.stats.avgItems"," ")}),t.jsx("p",{className:"text-2xl font-black text-slate-800","data-testid":"text-avg-items",children:A.length>0?Math.round(A.reduce((S,D)=>S+D.items.length,0)/A.length):0})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-200 flex flex-col md:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),t.jsx("input",{type:"text",placeholder:s("adminAbandonedCarts.searchPlaceholder","    ..."),value:l,onChange:S=>o(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C8A04F]/20 focus:border-[#C8A04F]","data-testid":"input-search-carts"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(tc,{size:18,className:"text-slate-400"}),t.jsxs("select",{value:d,onChange:S=>u(S.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C8A04F]/20 focus:border-[#C8A04F]","data-testid":"select-role-filter",children:[t.jsx("option",{value:"ALL",children:s("common.allRoles"," ")}),t.jsx("option",{value:"CUSTOMER",children:s("roles.customer","")}),t.jsx("option",{value:"SUPPLIER_LOCAL",children:s("roles.supplierLocal"," ")}),t.jsx("option",{value:"SUPPLIER_INTERNATIONAL",children:s("roles.supplierIntl"," ")}),t.jsx("option",{value:"MARKETER",children:s("roles.marketer","")})]})]})]}),n?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Qt,{className:"w-8 h-8 text-slate-400 mx-auto animate-spin mb-3"}),t.jsx("p",{className:"text-slate-500",children:s("common.loading"," ...")})]}):A.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx($a,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),t.jsx("h3",{className:"text-lg font-bold text-slate-600",children:s("adminAbandonedCarts.noResults","   ")}),t.jsx("p",{className:"text-slate-400 mt-1",children:s("adminAbandonedCarts.noResultsDesc","       ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.customer","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.role","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.items","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.value","")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.abandoned","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-600 uppercase",children:s("adminAbandonedCarts.table.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:A.map(S=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-cart-${S.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-slate-800","data-testid":`text-username-${S.id}`,children:S.userName||s("common.unknown"," ")}),S.phone&&t.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[t.jsx(vn,{size:12}),S.phone]})]})}),t.jsx("td",{className:"px-4 py-3",children:w(S.extendedRole)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"font-medium text-slate-700","data-testid":`text-items-${S.id}`,children:[S.items.length," ",s("common.products","")]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:"font-bold text-green-600","data-testid":`text-value-${S.id}`,children:[S.totalAmount.toLocaleString()," ."]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[t.jsx(os,{size:14}),t.jsx("span",{className:"text-sm font-medium","data-testid":`text-time-${S.id}`,children:j(S.lastUpdatedAt)})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("button",{onClick:()=>C(S),className:"p-2 text-slate-600 hover:text-[#C8A04F] hover:bg-[#C8A04F]/10 rounded-lg transition-colors",title:s("common.viewDetails"," "),"data-testid":`button-view-${S.id}`,children:t.jsx(fs,{size:18})}),S.whatsapp&&t.jsx("button",{onClick:()=>E(S.whatsapp),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:s("common.whatsapp",""),"data-testid":`button-whatsapp-${S.id}`,children:t.jsx(Tu,{size:18})})]})})]},S.id))})]})})]}),t.jsx(ls,{isOpen:x,onClose:()=>g(!1),maxWidth:"max-w-2xl",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[t.jsx($a,{className:"text-[#C8A04F]",size:24}),s("adminAbandonedCarts.details.title","  ")]}),t.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors","data-testid":"button-close-details",children:t.jsx(St,{size:20})})]}),h&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.customer","")}),t.jsx("span",{className:"font-bold text-slate-800",children:h.userName||"-"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.role","")}),w(h.extendedRole)]}),h.phone&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.phone","")}),t.jsx("span",{className:"font-medium text-slate-700",children:h.phone})]}),h.whatsapp&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.whatsapp","")}),t.jsxs("button",{onClick:()=>E(h.whatsapp),className:"text-green-600 font-medium hover:underline flex items-center gap-1",children:[t.jsx(Tu,{size:14}),h.whatsapp]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.abandonedSince"," ")}),t.jsx("span",{className:"font-medium text-orange-600",children:j(h.lastUpdatedAt)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-slate-500",children:s("adminAbandonedCarts.details.lastUpdate"," ")}),t.jsx("span",{className:"font-medium text-slate-700",children:hs(h.lastUpdatedAt)})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[t.jsx(Xt,{size:18}),s("adminAbandonedCarts.details.products","  ")," (",h.items.length,")"]}),t.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-right text-xs font-bold text-slate-600",children:s("common.product","")}),t.jsx("th",{className:"px-4 py-2 text-center text-xs font-bold text-slate-600",children:s("common.quantity","")}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-bold text-slate-600",children:s("common.price","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:h.items.map((S,D)=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-slate-800",children:S.name}),t.jsx("span",{className:"text-xs text-slate-500",children:S.partNumber})]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsx("span",{className:"font-medium",children:S.quantity})}),t.jsx("td",{className:"px-4 py-3 text-left",children:t.jsxs("span",{className:"font-bold text-green-600",children:[(S.price*S.quantity).toLocaleString()," ."]})})]},D))}),t.jsx("tfoot",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("td",{colSpan:2,className:"px-4 py-3 text-right font-bold text-slate-700",children:s("common.total","")}),t.jsxs("td",{className:"px-4 py-3 text-left font-black text-lg text-green-600",children:[h.totalAmount.toLocaleString()," ."]})]})})]})})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[h.whatsapp&&t.jsxs("button",{onClick:()=>E(h.whatsapp),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold transition-colors","data-testid":"button-contact-whatsapp",children:[t.jsx(Tu,{size:18}),s("adminAbandonedCarts.details.contactWhatsapp","  ")]}),t.jsx("button",{onClick:()=>g(!1),className:"px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-bold transition-colors","data-testid":"button-close",children:s("common.close","")})]})]})]})})]}):t.jsx("div",{className:"p-6 lg:p-8",children:t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[t.jsx($a,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),t.jsx("h3",{className:"text-lg font-bold text-red-700",children:s("common.accessDenied"," ")}),t.jsx("p",{className:"text-red-600 mt-2",children:s("adminAbandonedCarts.noPermission","     ")})]})})},q0e=({onRefresh:e})=>{const{t:s}=Jt(),{addToast:a}=Dt(),[r,n]=T.useState([]),[i,l]=T.useState(!0),[o,d]=T.useState(""),[u,h]=T.useState(1),[f,x]=T.useState(0),[g,v]=T.useState(null),b=20;T.useEffect(()=>{y()},[u]);const y=async()=>{l(!0);try{const E=await xe.getAllAlternatives(u,b);n(E.data),x(E.total)}catch(E){console.error("Error loading alternatives:",E),a(s("admin.alternatives.loadError","   "),"error")}finally{l(!1)}},j=async()=>{if(!o.trim()){y();return}l(!0);try{const E=await xe.searchAlternatives(o.trim());n(E),x(E.length),h(1)}catch(E){console.error("Search error:",E),a(s("admin.alternatives.searchError","  "),"error")}finally{l(!1)}},w=async E=>{if(confirm(s("admin.alternatives.confirmDelete","      "))){v(E);try{await xe.deleteAlternative(E),a(s("admin.alternatives.deleteSuccess","   "),"success"),y(),e==null||e()}catch(S){console.error("Delete error:",S),a(s("admin.alternatives.deleteError","   "),"error")}finally{v(null)}}},A=()=>{try{const E=r.map(M=>({" ":M.mainPartNumber," ":M.altPartNumber,:M.description||"",:M.brand||"",:M.sourceType==="CUSTOMER_UPLOAD"?"":""," ":M.sourceUserName||"-"," ":hs(M.createdAt)})),S=Ea.book_new(),D=Ea.json_to_sheet(E);Ea.book_append_sheet(S,D,"Alternatives"),rd(S,`alternatives_export_${new Date().toISOString().split("T")[0]}.xlsx`),a(s("admin.alternatives.exportSuccess","   "),"success")}catch(E){console.error("Export error:",E),a(s("admin.alternatives.exportError","   "),"error")}},O=Math.ceil(f/b),C=(o.trim(),r);return t.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground",children:s("admin.alternatives.title"," ")}),t.jsx("p",{className:"text-muted-foreground text-sm",children:s("admin.alternatives.subtitle","    ")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:A,disabled:r.length===0,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover-elevate disabled:opacity-50","data-testid":"button-export",children:[t.jsx(cr,{className:"w-4 h-4"}),s("admin.alternatives.export","")]}),t.jsxs("button",{onClick:()=>{d(""),h(1),y()},className:"flex items-center gap-2 px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover-elevate","data-testid":"button-refresh",children:[t.jsx(Qt,{className:"w-4 h-4"}),s("admin.alternatives.refresh","")]})]})]}),t.jsx("div",{className:"bg-card border border-border rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:t.jsx(Xt,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:s("admin.alternatives.totalCount"," ")}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-total-count",children:f})]})]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:o,onChange:E=>d(E.target.value),onKeyDown:E=>E.key==="Enter"&&j(),placeholder:s("admin.alternatives.searchPlaceholder","  ..."),className:"flex-1 px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50","data-testid":"input-search"}),t.jsxs("button",{onClick:j,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover-elevate flex items-center gap-2","data-testid":"button-search",children:[t.jsx(Ft,{className:"w-4 h-4"}),s("admin.alternatives.search","")]})]}),t.jsxs("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:[i?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(as,{className:"w-8 h-8 animate-spin text-primary"})}):C.length===0?t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(Xt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:s("admin.alternatives.noData","  ")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm","data-testid":"table-alternatives",children:[t.jsx("thead",{className:"bg-muted/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.mainPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.altPart"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.description","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.brand","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.source","")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.uploadedBy"," ")}),t.jsx("th",{className:"text-start p-3 font-medium text-muted-foreground",children:s("admin.alternatives.createdAt"," ")}),t.jsx("th",{className:"text-center p-3 font-medium text-muted-foreground",children:s("admin.alternatives.actions","")})]})}),t.jsx("tbody",{children:C.map(E=>t.jsxs("tr",{className:"border-t border-border/50 hover:bg-muted/30","data-testid":`row-alternative-${E.id}`,children:[t.jsx("td",{className:"p-3 font-mono",children:E.mainPartNumber}),t.jsx("td",{className:"p-3 font-mono text-primary",children:E.altPartNumber}),t.jsx("td",{className:"p-3 text-muted-foreground max-w-[200px] truncate",children:E.description||"-"}),t.jsx("td",{className:"p-3",children:E.brand||"-"}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs ${E.sourceType==="CUSTOMER_UPLOAD"?"bg-blue-500/10 text-blue-600":"bg-green-500/10 text-green-600"}`,children:E.sourceType==="CUSTOMER_UPLOAD"?"":""})}),t.jsx("td",{className:"p-3 text-muted-foreground",children:E.sourceUserName||"-"}),t.jsx("td",{className:"p-3 text-muted-foreground text-xs",children:hs(E.createdAt)}),t.jsx("td",{className:"p-3 text-center",children:t.jsx("button",{onClick:()=>w(E.id),disabled:g===E.id,className:"p-2 text-destructive hover:bg-destructive/10 rounded-lg disabled:opacity-50","data-testid":`button-delete-${E.id}`,children:g===E.id?t.jsx(as,{className:"w-4 h-4 animate-spin"}):t.jsx(Ct,{className:"w-4 h-4"})})})]},E.id))})]})}),O>1&&t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:[s("admin.alternatives.showing","")," ",(u-1)*b+1," - ",Math.min(u*b,f)," ",s("admin.alternatives.of","")," ",f]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>h(E=>Math.max(1,E-1)),disabled:u===1,className:"p-2 rounded-lg hover-elevate disabled:opacity-50","data-testid":"button-prev-page",children:t.jsx(vs,{className:"w-4 h-4"})}),t.jsxs("span",{className:"text-sm",children:[u," / ",O]}),t.jsx("button",{onClick:()=>h(E=>Math.min(O,E+1)),disabled:u===O,className:"p-2 rounded-lg hover-elevate disabled:opacity-50","data-testid":"button-next-page",children:t.jsx(ws,{className:"w-4 h-4"})})]})]})]})]})},P5=[{value:"LOGIN",labelAr:" ",labelEn:"Login"},{value:"LOGOUT",labelAr:" ",labelEn:"Logout"},{value:"FAILED_LOGIN",labelAr:"  ",labelEn:"Failed Login"},{value:"ORDER_CREATED",labelAr:" ",labelEn:"Order Created"},{value:"QUOTE_REQUEST",labelAr:" ",labelEn:"Quote Request"},{value:"IMPORT_REQUEST",labelAr:" ",labelEn:"Import Request"},{value:"ACCOUNT_REQUEST",labelAr:"  ",labelEn:"Account Request"},{value:"SEARCH_PERFORMED",labelAr:"",labelEn:"Search"},{value:"ORDER_STATUS_CHANGED",labelAr:"  ",labelEn:"Order Status Changed"},{value:"USER_SUSPENDED",labelAr:" ",labelEn:"User Suspended"},{value:"USER_APPROVED",labelAr:" ",labelEn:"User Approved"},{value:"PASSWORD_CHANGED",labelAr:"  ",labelEn:"Password Changed"},{value:"ALTERNATIVES_UPLOADED",labelAr:" ",labelEn:"Alternatives Uploaded"},{value:"SETTINGS_CHANGED",labelAr:" ",labelEn:"Settings Changed"},{value:"PURCHASE_REQUEST_CREATED",labelAr:" ",labelEn:"Purchase Request"}],D5=[{value:"CUSTOMER",labelAr:"",labelEn:"Customer",icon:bn},{value:"SUPPLIER",labelAr:"",labelEn:"Supplier",icon:id},{value:"MARKETER",labelAr:"",labelEn:"Marketer",icon:ya},{value:"EMPLOYEE",labelAr:"",labelEn:"Employee",icon:oF},{value:"ADMIN",labelAr:"",labelEn:"Admin",icon:Ds}],H0e=[{value:"ORDER",labelAr:"",labelEn:"Order"},{value:"REQUEST",labelAr:" ",labelEn:"Request"},{value:"CUSTOMER",labelAr:"",labelEn:"Customer"},{value:"SUPPLIER",labelAr:"",labelEn:"Supplier"},{value:"PRODUCT",labelAr:"",labelEn:"Product"},{value:"ALTERNATIVE",labelAr:"",labelEn:"Alternative"},{value:"SETTINGS",labelAr:"",labelEn:"Settings"},{value:"QUOTE",labelAr:"",labelEn:"Quote"},{value:"IMPORT",labelAr:"",labelEn:"Import"},{value:"USER",labelAr:"",labelEn:"User"}],V0e=({onBack:e})=>{const{t:s}=Jt(),{language:a}=Bs(),r=a==="ar",[n,i]=T.useState([]),[l,o]=T.useState(!1),[d,u]=T.useState(0),[h,f]=T.useState(1),[x]=T.useState(20),[g,v]=T.useState(!1),[b,y]=T.useState(""),[j,w]=T.useState(""),[A,O]=T.useState(""),[C,E]=T.useState(""),[S,D]=T.useState(""),[M,U]=T.useState(null),[I,k]=T.useState(!1),[z,_]=T.useState("logs"),[q,L]=T.useState(null),Q=async()=>{o(!0);try{const Z={page:h,pageSize:x};b&&(Z.actorType=b),j&&(Z.actionType=j),A&&(Z.entityType=A),C&&(Z.dateFrom=C),S&&(Z.dateTo=S);const ue=await xe.getActivityLogsFiltered(Z);i(ue.items),u(ue.total)}catch(Z){console.error("Error loading activity logs:",Z)}finally{o(!1)}},X=async()=>{k(!0);try{const Z=await xe.getOnlineUsersGrouped(5);U(Z)}catch(Z){console.error("Error loading online users:",Z)}finally{k(!1)}},W=async()=>{try{const Z=await xe.getActivityStats();L(Z)}catch(Z){console.error("Error loading stats:",Z)}};T.useEffect(()=>{Q(),W()},[h]);const ee=()=>{f(1),Q()},V=()=>{y(""),w(""),O(""),E(""),D(""),f(1),setTimeout(()=>Q(),0)},P=Math.ceil(d/x),Y=Z=>{if(!Z)return"-";const ue=D5.find(re=>re.value===Z);return ue?r?ue.labelAr:ue.labelEn:Z},J=Z=>{switch(Z){case"ADMIN":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"EMPLOYEE":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"MARKETER":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"SUPPLIER":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";default:return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}},K=Z=>{const ue=P5.find(re=>re.value===Z);return ue?r?ue.labelAr:ue.labelEn:Z},se=Z=>{const ue=new Date(Z);return new Intl.DateTimeFormat(r?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(ue)},G=()=>M?M.onlineCustomers.length+M.onlineSuppliers.length+M.onlineMarketers.length+M.onlineEmployees.length+M.onlineAdmins.length:0,te=(Z,ue,re)=>Z.length===0?null:t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(re,{size:18,className:"text-gray-500"}),t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:ue}),t.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded-full",children:Z.length})]}),t.jsx("div",{className:"space-y-2",children:Z.map(H=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg","data-testid":`online-user-${H.id}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 animate-pulse"}),t.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:H.name})]}),t.jsx("span",{className:"text-xs text-gray-500",children:se(H.lastActivityAt)})]},H.id))})]});return t.jsxs("div",{className:`p-4 md:p-6 space-y-6 ${r?"rtl":"ltr"}`,dir:r?"rtl":"ltr",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e&&t.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","data-testid":"button-back",children:r?t.jsx(vs,{size:20}):t.jsx(ws,{size:20})}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl md:text-2xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[t.jsx(Gr,{size:24,className:"text-blue-600"}),s("admin.activityLog.title",r?" ":"Activity Log")]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("admin.activityLog.subtitle",r?"   ":"Track user and system activities")})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${z==="logs"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:()=>_("logs"),"data-testid":"button-tab-logs",children:[t.jsx(Gr,{size:16}),s("admin.activityLog.logs",r?"":"Logs")]}),t.jsxs("button",{className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${z==="online"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,onClick:()=>{_("online"),M||X()},"data-testid":"button-tab-online",children:[t.jsx(Gt,{size:16}),s("admin.activityLog.online",r?"":"Online"),M&&t.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:G()})]})]})]}),q&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:q.totalLogs}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.totalLogs",r?" ":"Total Logs")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:q.todayLogs}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.today",r?"":"Today")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:q.logsByActorType.CUSTOMER||0}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.customers",r?"":"Customers")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:q.logsByActorType.SUPPLIER||0}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.suppliers",r?"":"Suppliers")})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:q.logsByActorType.MARKETER||0}),t.jsx("div",{className:"text-xs text-gray-500",children:s("admin.activityLog.marketers",r?"":"Marketers")})]})]}),z==="logs"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("button",{className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",onClick:()=>v(!g),"data-testid":"button-toggle-filters",children:[t.jsx(tc,{size:16}),s("admin.activityLog.filters",r?"":"Filters")]}),t.jsxs("select",{value:b,onChange:Z=>y(Z.target.value),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"select-actor-type",children:[t.jsx("option",{value:"",children:s("admin.activityLog.allActors",r?" ":"All Users")}),D5.map(Z=>t.jsx("option",{value:Z.value,children:r?Z.labelAr:Z.labelEn},Z.value))]}),t.jsxs("button",{className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700 transition-colors disabled:opacity-50",onClick:ee,disabled:l,"data-testid":"button-search",children:[t.jsx(Ft,{size:16}),s("common.search",r?"":"Search")]}),(b||j||A||C||S)&&t.jsxs("button",{className:"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 flex items-center gap-1",onClick:V,"data-testid":"button-clear-filters",children:[t.jsx(St,{size:16}),s("common.clear",r?"":"Clear")]})]}),g&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.actionType",r?" ":"Action Type")}),t.jsxs("select",{value:j,onChange:Z=>w(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"select-action-type",children:[t.jsx("option",{value:"",children:s("common.all",r?"":"All")}),P5.map(Z=>t.jsx("option",{value:Z.value,children:r?Z.labelAr:Z.labelEn},Z.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.entityType",r?" ":"Entity Type")}),t.jsxs("select",{value:A,onChange:Z=>O(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"select-entity-type",children:[t.jsx("option",{value:"",children:s("common.all",r?"":"All")}),H0e.map(Z=>t.jsx("option",{value:Z.value,children:r?Z.labelAr:Z.labelEn},Z.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.dateFrom",r?" ":"From Date")}),t.jsx("input",{type:"date",value:C,onChange:Z=>E(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"input-date-from"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:s("admin.activityLog.dateTo",r?" ":"To Date")}),t.jsx("input",{type:"date",value:S,onChange:Z=>D(Z.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none","data-testid":"input-date-to"})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("h2",{className:"font-semibold text-gray-800 dark:text-white flex items-center gap-2",children:[t.jsx(Gr,{size:18}),s("admin.activityLog.activityLogs",r?" ":"Activity Logs")]}),t.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-gray-600 dark:text-gray-400",children:[d," ",s("admin.activityLog.records",r?"":"logs")]})]}),l?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx(Qt,{className:"animate-spin text-blue-600",size:28})}):n.length===0?t.jsxs("div",{className:"text-center py-16 text-gray-500",children:[t.jsx(Gr,{size:48,className:"mx-auto mb-3 opacity-40"}),t.jsx("p",{children:s("admin.activityLog.noLogs",r?"  ":"No logs found")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.time",r?"":"Time")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.user",r?"":"User")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.type",r?"":"Type")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.action",r?"":"Action")}),t.jsx("th",{className:"text-start p-3 font-medium text-gray-600 dark:text-gray-400",children:s("admin.activityLog.description",r?"":"Description")})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:n.map(Z=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors","data-testid":`log-row-${Z.id}`,children:[t.jsx("td",{className:"p-3 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-1.5 text-gray-500",children:[t.jsx(os,{size:14}),t.jsx("span",{className:"text-xs",children:se(Z.createdAt)})]})}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:Z.userName||Z.userId})}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium ${J(Z.actorType)}`,children:Y(Z.actorType)})}),t.jsx("td",{className:"p-3",children:t.jsx("span",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-800 px-2.5 py-1 rounded text-gray-700 dark:text-gray-300",children:K(Z.eventType)})}),t.jsx("td",{className:"p-3 max-w-[300px]",children:t.jsx("span",{className:"text-gray-600 dark:text-gray-400 truncate block",title:Z.description,children:Z.description||"-"})})]},Z.id))})]})}),P>1&&t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsx("span",{className:"text-sm text-gray-500",children:r?` ${h}  ${P}`:`Page ${h} of ${P}`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:h===1,onClick:()=>f(Z=>Z-1),"data-testid":"button-prev-page",children:r?t.jsx(vs,{size:18}):t.jsx(ws,{size:18})}),t.jsx("button",{className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:h===P,onClick:()=>f(Z=>Z+1),"data-testid":"button-next-page",children:r?t.jsx(ws,{size:18}):t.jsx(vs,{size:18})})]})]})]})]}),z==="online"&&t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("h2",{className:"font-semibold text-gray-800 dark:text-white flex items-center gap-2",children:[t.jsx(Gt,{size:18}),s("admin.activityLog.onlineUsers",r?"  ":"Online Users Now")]}),t.jsxs("button",{className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-800 disabled:opacity-50 transition-colors",onClick:X,disabled:I,"data-testid":"button-refresh-online",children:[t.jsx(Qt,{size:14,className:I?"animate-spin":""}),s("common.refresh",r?"":"Refresh")]})]}),t.jsx("div",{className:"p-4",children:I?t.jsx("div",{className:"flex items-center justify-center py-16",children:t.jsx(Qt,{className:"animate-spin text-blue-600",size:28})}):M?G()===0?t.jsxs("div",{className:"text-center py-16 text-gray-500",children:[t.jsx(Gt,{size:48,className:"mx-auto mb-3 opacity-40"}),t.jsx("p",{children:s("admin.activityLog.noOnline",r?"   ":"No users online")})]}):t.jsxs("div",{className:"space-y-6",children:[te(M.onlineAdmins,s("admin.activityLog.admins",r?"":"Admins"),Ds),te(M.onlineEmployees,s("admin.activityLog.employees",r?"":"Employees"),oF),te(M.onlineSuppliers,s("admin.activityLog.suppliersOnline",r?"":"Suppliers"),id),te(M.onlineMarketers,s("admin.activityLog.marketersOnline",r?"":"Marketers"),ya),te(M.onlineCustomers,s("admin.activityLog.customersOnline",r?"":"Customers"),bn)]}):t.jsxs("div",{className:"text-center py-16 text-gray-500",children:[t.jsx(Gt,{size:48,className:"mx-auto mb-3 opacity-40"}),t.jsx("p",{children:s("admin.activityLog.clickRefresh",r?"   ":"Click refresh to load online users")})]})})]})]})},M5={NEW:{color:"text-purple-700",bgColor:"bg-purple-100",icon:ma},IN_REVIEW:{color:"text-yellow-700",bgColor:"bg-yellow-100",icon:fs},RESOLVED:{color:"text-green-700",bgColor:"bg-green-100",icon:Ut},DISMISSED:{color:"text-slate-500",bgColor:"bg-slate-100",icon:Zs}},L5={BUG:lF,SUGGESTION:qp,COMPLAINT:ma,QUESTION:m0,OTHER:mF},F5={CUSTOMER:{color:"bg-blue-100 text-blue-700"},SUPPLIER:{color:"bg-orange-100 text-orange-700"},MARKETER:{color:"bg-pink-100 text-pink-700"},EMPLOYEE:{color:"bg-indigo-100 text-indigo-700"},ADMIN:{color:"bg-red-100 text-red-700"},GUEST:{color:"bg-slate-100 text-slate-700"}},U5={LOW:{color:"bg-slate-100 text-slate-600"},MEDIUM:{color:"bg-yellow-100 text-yellow-700"},HIGH:{color:"bg-red-100 text-red-700"},CRITICAL:{color:"bg-purple-100 text-purple-700"}};function G0e(){const{t:e,i18n:s}=Jt(),a=s.language==="ar",r=G=>e(`feedbackAdmin.status.${G}`,G),n=G=>e(`feedback.categories.${G.toLowerCase()}`,G),i=G=>e(`feedbackAdmin.priority.${G}`,G),l=G=>e(`feedbackAdmin.senderType.${G}`,G),[o,d]=T.useState([]),[u,h]=T.useState(!0),[f,x]=T.useState(0),[g,v]=T.useState(1),b=20,[y,j]=T.useState({page:1,pageSize:20}),[w,A]=T.useState(!1),[O,C]=T.useState(""),[E,S]=T.useState(null),[D,M]=T.useState([]),[U,I]=T.useState(""),[k,z]=T.useState(""),[_,q]=T.useState(!1),[L,Q]=T.useState(null),X=T.useCallback(async()=>{h(!0);try{const G=await xe.getAdminFeedbackList({...y,search:O||void 0,page:g,pageSize:b});d(G.items),x(G.total)}catch(G){console.error("Failed to load feedback:",G)}finally{h(!1)}},[y,O,g,b]),W=T.useCallback(async()=>{try{const G=await xe.getFeedbackStats();Q({total:G.total,byStatus:G.byStatus,thisWeek:G.thisWeek})}catch(G){console.error("Failed to load stats:",G)}},[]);T.useEffect(()=>{X(),W()},[X,W]);const ee=async G=>{S(G),z(G.adminNotes||"");try{const te=await xe.getFeedbackReplies(G.id);M(te)}catch(te){console.error("Failed to load replies:",te)}},V=async G=>{if(E){q(!0);try{const te={status:G},Z=await xe.updateFeedback(E.id,te,"admin"," ");Z&&(S(Z),X(),W())}catch(te){console.error("Failed to update status:",te)}finally{q(!1)}}},P=async()=>{if(E){q(!0);try{const G={adminNotes:k},te=await xe.updateFeedback(E.id,G,"admin"," ");te&&S(te)}catch(G){console.error("Failed to save notes:",G)}finally{q(!1)}}},Y=async()=>{if(!(!E||!U.trim())){q(!0);try{const G=await xe.addFeedbackReply(E.id,U.trim(),"admin"," ");M([...D,G]),I("")}catch(G){console.error("Failed to add reply:",G)}finally{q(!1)}}},J=async()=>{try{const G=await xe.exportFeedbackToCsv(y),te=new Blob([G],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a");Z.href=URL.createObjectURL(te),Z.download=`feedback_export_${new Date().toISOString().split("T")[0]}.csv`,Z.click()}catch(G){console.error("Failed to export:",G)}},K=()=>{j({page:1,pageSize:20}),C(""),v(1)},se=Math.ceil(f/b);return t.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",dir:a?"rtl":"ltr",children:t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(Or,{className:"w-6 h-6 text-primary"}),e("feedbackCenter.title"," ")]}),t.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e("feedbackCenter.subtitle","   ")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>A(!w),className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-toggle-filters",children:[t.jsx(tc,{className:"w-4 h-4"}),e("common.filter","")]}),t.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-export-feedback",children:[t.jsx(cr,{className:"w-4 h-4"}),e("common.export","")]}),t.jsxs("button",{onClick:()=>{X(),W()},className:"flex items-center gap-2 px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary/90","data-testid":"button-refresh-feedback",children:[t.jsx(Qt,{className:"w-4 h-4"}),e("common.refresh","")]})]})]}),L&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[t.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:L.total}),t.jsx("div",{className:"text-sm text-slate-500",children:e("feedbackCenter.totalFeedback"," ")})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-700",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-700",children:L.byStatus.NEW}),t.jsx("div",{className:"text-sm text-purple-600",children:e("feedbackCenter.new","")})]}),t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-700",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:L.byStatus.IN_REVIEW}),t.jsx("div",{className:"text-sm text-yellow-600",children:e("feedbackCenter.inReview"," ")})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-700",children:[t.jsx("div",{className:"text-2xl font-bold text-green-700",children:L.byStatus.RESOLVED}),t.jsx("div",{className:"text-sm text-green-600",children:e("feedbackCenter.resolved"," ")})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-700",children:L.thisWeek}),t.jsx("div",{className:"text-sm text-blue-600",children:e("feedbackCenter.thisWeek"," ")})]})]}),w&&t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 mb-4 border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("common.search","")}),t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{className:"absolute top-1/2 transform -translate-y-1/2 start-3 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",value:O,onChange:G=>C(G.target.value),placeholder:e("feedbackCenter.searchPlaceholder","    ..."),className:"w-full ps-10 pe-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"input-search-feedback"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("common.status","")}),t.jsxs("select",{value:y.status||"",onChange:G=>j({...y,status:G.target.value||void 0}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"select-filter-status",children:[t.jsx("option",{value:"",children:e("common.all","")}),t.jsx("option",{value:"NEW",children:e("feedbackCenter.new","")}),t.jsx("option",{value:"IN_REVIEW",children:e("feedbackCenter.inReview"," ")}),t.jsx("option",{value:"RESOLVED",children:e("feedbackCenter.resolved"," ")}),t.jsx("option",{value:"DISMISSED",children:e("feedbackCenter.dismissed","")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("feedbackCenter.category","")}),t.jsxs("select",{value:y.category||"",onChange:G=>j({...y,category:G.target.value||void 0}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"select-filter-category",children:[t.jsx("option",{value:"",children:e("common.all","")}),t.jsx("option",{value:"BUG",children:n("BUG")}),t.jsx("option",{value:"SUGGESTION",children:n("SUGGESTION")}),t.jsx("option",{value:"COMPLAINT",children:n("COMPLAINT")}),t.jsx("option",{value:"QUESTION",children:n("QUESTION")}),t.jsx("option",{value:"OTHER",children:n("OTHER")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:e("feedbackCenter.senderType"," ")}),t.jsxs("select",{value:y.senderType||"",onChange:G=>j({...y,senderType:G.target.value||void 0}),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700","data-testid":"select-filter-sendertype",children:[t.jsx("option",{value:"",children:e("common.all","")}),t.jsx("option",{value:"CUSTOMER",children:l("CUSTOMER")}),t.jsx("option",{value:"SUPPLIER",children:l("SUPPLIER")}),t.jsx("option",{value:"MARKETER",children:l("MARKETER")}),t.jsx("option",{value:"EMPLOYEE",children:l("EMPLOYEE")}),t.jsx("option",{value:"GUEST",children:l("GUEST")})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:K,className:"flex items-center gap-1 px-3 py-2 text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-clear-filters",children:[t.jsx(St,{className:"w-4 h-4"}),e("common.reset","")]})})]})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:`flex-1 ${E?"hidden md:block md:w-1/2":"w-full"}`,children:t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:u?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Qt,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-2"}),t.jsx("p",{className:"text-slate-500",children:e("common.loading"," ...")})]}):o.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Or,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),t.jsx("p",{className:"text-slate-500",children:e("feedbackCenter.noFeedback","  ")})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.map(G=>{const te=M5[G.status],Z=L5[G.category],ue=F5[G.senderType],re=U5[G.priority];return t.jsx("div",{onClick:()=>ee(G),className:`p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors ${(E==null?void 0:E.id)===G.id?"bg-primary/5 border-s-4 border-primary":""}`,"data-testid":`feedback-item-${G.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Z,{className:"w-4 h-4 text-slate-500 flex-shrink-0"}),t.jsx("span",{className:"font-medium text-slate-800 dark:text-white truncate",children:G.subject})]}),t.jsx("p",{className:"text-sm text-slate-500 line-clamp-1 mb-2",children:G.message}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full ${ue.color}`,children:G.senderName}),t.jsx("span",{className:`px-2 py-0.5 rounded-full ${re.color}`,children:i(G.priority)}),t.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[t.jsx(os,{className:"w-3 h-3"}),new Date(G.createdAt).toLocaleDateString(s.language)]})]})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${te.bgColor} ${te.color}`,children:r(G.status)})]})},G.id)})}),se>1&&t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("span",{className:"text-sm text-slate-500",children:[e("common.page","")," ",g," ",e("common.of","")," ",se]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>v(G=>Math.max(1,G-1)),disabled:g===1,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50","data-testid":"button-prev-page",children:a?t.jsx(vs,{className:"w-4 h-4"}):t.jsx(ws,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>v(G=>Math.min(se,G+1)),disabled:g===se,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50","data-testid":"button-next-page",children:a?t.jsx(ws,{className:"w-4 h-4"}):t.jsx(vs,{className:"w-4 h-4"})})]})]})]})})}),E&&t.jsxs("div",{className:"fixed inset-0 md:static md:w-1/2 bg-white dark:bg-slate-800 md:rounded-lg md:border md:border-slate-200 dark:md:border-slate-700 z-50 md:z-auto overflow-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 flex items-center justify-between z-10",children:[t.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:e("feedbackCenter.details"," ")}),t.jsx("button",{onClick:()=>S(null),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700","data-testid":"button-close-details",children:t.jsx(St,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx(bn,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:E.senderName}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${F5[E.senderType].color}`,children:l(E.senderType)}),E.senderContact&&t.jsx(t.Fragment,{children:E.senderContact.includes("@")?t.jsxs("a",{href:`mailto:${E.senderContact}`,className:"flex items-center gap-1 text-primary hover:underline",children:[t.jsx(Ll,{className:"w-3 h-3"}),E.senderContact]}):t.jsxs("a",{href:`tel:${E.senderContact}`,className:"flex items-center gap-1 text-primary hover:underline",children:[t.jsx(vn,{className:"w-3 h-3"}),E.senderContact]})})]})]})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(()=>{const G=L5[E.category];return t.jsx(G,{className:"w-4 h-4 text-slate-500"})})(),t.jsx("span",{className:"font-semibold text-slate-800 dark:text-white",children:E.subject})]}),t.jsx("p",{className:"text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:E.message}),E.pageContext&&t.jsxs("div",{className:"mt-3 text-xs text-slate-400",children:[e("feedbackCenter.pageContext",""),": ",t.jsx("code",{className:"bg-slate-200 dark:bg-slate-600 px-1 rounded",children:E.pageContext})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("span",{className:`px-3 py-1 rounded-full text-sm ${U5[E.priority].color}`,children:[e("feedbackCenter.priority",""),": ",i(E.priority)]}),t.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:n(E.category)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("feedbackCenter.changeStatus"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["NEW","IN_REVIEW","RESOLVED","DISMISSED"].map(G=>{const te=M5[G],Z=te.icon;return t.jsxs("button",{onClick:()=>V(G),disabled:_||E.status===G,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm transition-all ${E.status===G?`${te.bgColor} ${te.color} ring-2 ring-offset-1`:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200"} disabled:opacity-50`,"data-testid":`button-status-${G}`,children:[t.jsx(Z,{className:"w-3.5 h-3.5"}),r(G)]},G)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("feedbackCenter.adminNotes"," ")}),t.jsx("textarea",{value:k,onChange:G=>z(G.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",placeholder:e("feedbackCenter.adminNotesPlaceholder","  ..."),"data-testid":"input-admin-notes"}),t.jsx("button",{onClick:P,disabled:_||k===(E.adminNotes||""),className:"mt-2 px-4 py-1.5 bg-primary text-white text-sm rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-save-notes",children:e("common.save","")})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[e("feedbackCenter.replies","")," (",D.length,")"]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[D.map(G=>t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm text-blue-800 dark:text-blue-300",children:G.senderName}),t.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:new Date(G.createdAt).toLocaleString("ar-SA")})]}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200",children:G.message})]},G.id)),D.length===0&&t.jsx("p",{className:"text-sm text-slate-400 text-center py-2",children:e("feedbackCenter.noReplies","   ")})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:U,onChange:G=>I(G.target.value),placeholder:e("feedbackCenter.replyPlaceholder"," ..."),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm","data-testid":"input-reply"}),t.jsx("button",{onClick:Y,disabled:_||!U.trim(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-send-reply",children:t.jsx(xi,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"text-xs text-slate-400 pt-2 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{children:[e("feedbackCenter.createdAt"," "),": ",new Date(E.createdAt).toLocaleString("ar-SA")]}),t.jsxs("div",{children:[e("feedbackCenter.updatedAt"," "),": ",new Date(E.updatedAt).toLocaleString("ar-SA")]})]})]})]})]})]})})}const N1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var gm={};function Wp(e,s=""){if(typeof import.meta<"u"&&N1){const a=`VITE_${e}`;if(N1[a]!==void 0)return N1[a]}if(typeof process<"u"&&gm){if(gm[e]!==void 0)return gm[e];const a=`VITE_${e}`;if(gm[a]!==void 0)return gm[a]}return s}function z5(){const e=Wp("NODE_ENV","development");return e==="production"?"production":e==="test"?"test":"development"}function W0e(){const e=Wp("API_MODE","mock"),s=Wp("API_BASE_URL","");return e==="rest"&&!s?(console.warn('[apiConfig] API_MODE is "rest" but API_BASE_URL is not set. Falling back to mock mode.'),"mock"):e==="rest"||e==="mock"?e:"mock"}const Fo={env:z5(),apiMode:W0e(),baseUrl:Wp("API_BASE_URL","https://api.sini-pro-erp.com/v1"),timeouts:{default:3e4},retry:{maxRetries:3,baseDelay:1e3,maxDelay:1e4},defaultHeaders:{"Content-Type":"application/json",Accept:"application/json","Accept-Language":"ar"},debug:z5()==="development"};function Q0e(e){return`${Fo.baseUrl}${e}`}function bm(e,s,a){if(Fo.debug){const r=new Date().toISOString();console.log(`[${r}] [${e}] ${s}`,a??"")}}function K0e(e,s,a,r){const n=new Date().toISOString();console.error(`[${n}] [${e}] ${s}`,{error:a,context:r,apiMode:Fo.apiMode,env:Fo.env})}const J0e="auth_token";function Y0e(){try{return localStorage.getItem(J0e)}catch{return null}}function X0e(e){const s=Object.entries(e).filter(([,a])=>a!==void 0).map(([a,r])=>`${encodeURIComponent(a)}=${encodeURIComponent(String(r))}`);return s.length>0?`?${s.join("&")}`:""}function B5(e){const{baseDelay:s,maxDelay:a}=Fo.retry,r=s*Math.pow(2,e);return Math.min(r,a)}function Z0e(e){return e===401?"UNAUTHORIZED":e===403?"FORBIDDEN":e===404?"NOT_FOUND":e===422||e===400?"VALIDATION_ERROR":e>=500?"SERVER_ERROR":"UNKNOWN"}function w1(e,s){return{NETWORK_ERROR:"   .     .",TIMEOUT:"  .    .",UNAUTHORIZED:"  .     .",FORBIDDEN:"      .",NOT_FOUND:"   .",VALIDATION_ERROR:s||"   .",SERVER_ERROR:"   .   .",UNKNOWN:s||"   ."}[e]}function eme(e){const s={};return e.headers.forEach((a,r)=>{s[r]=a}),s}function tme(e){return new Promise((s,a)=>{setTimeout(()=>{a(new Error("Request timeout"))},e)})}async function vm(e,s,a,r={}){const n=Date.now(),i=r.retries??Fo.retry.maxRetries,l=r.timeout??Fo.timeouts.default;let o=null,d=0;const u=r.params?X0e(r.params):"",h=Q0e(s)+u,f={...Fo.defaultHeaders,...r.headers};if(!r.skipAuth){const g=Y0e();g&&(f.Authorization=`Bearer ${g}`)}const x={method:e,headers:f,credentials:r.credentials??"same-origin",signal:r.signal};for(a&&e!=="GET"&&(x.body=JSON.stringify(a));d<=i;)try{bm("http",`${e} ${s}`,{attempt:d+1,body:a});const g=await Promise.race([fetch(h,x),tme(l)]),v=Date.now()-n,b=eme(g);let y=null;const j=g.headers.get("content-type");if(j!=null&&j.includes("application/json"))try{y=await g.json()}catch(w){bm("http","Failed to parse JSON response",w)}if(!g.ok){const w=Z0e(g.status),A=(y==null?void 0:y.message)||g.statusText;if(o={code:w,message:w1(w,A),status:g.status,details:y},g.status>=400&&g.status<500&&g.status!==429)break;if(d<i){const O=B5(d);bm("http",`Retry ${d+1}/${i} after ${O}ms`),await new Promise(C=>setTimeout(C,O)),d++;continue}break}return bm("http",`${e} ${s} completed`,{status:g.status,duration:v}),{data:y,error:null,status:g.status,success:!0,headers:b,meta:{url:h,method:e,duration:v,retries:d}}}catch(g){const v=Date.now()-n;if(g instanceof Error&&g.message==="Request timeout")o={code:"TIMEOUT",message:w1("TIMEOUT"),status:0,details:{timeout:l}};else{if(g instanceof DOMException&&g.name==="AbortError")return{data:null,error:"  ",status:0,success:!1,meta:{url:h,method:e,duration:v,retries:d}};o={code:"NETWORK_ERROR",message:w1("NETWORK_ERROR"),status:0,details:g}}if(K0e("http",`${e} ${s} failed`,g,{url:h,attempt:d+1,duration:v}),d<i){const b=B5(d);bm("http",`Retry ${d+1}/${i} after ${b}ms`),await new Promise(y=>setTimeout(y,b)),d++;continue}break}return{data:null,error:(o==null?void 0:o.message)||"   ",status:(o==null?void 0:o.status)??0,success:!1,meta:{url:h,method:e,duration:Date.now()-n,retries:d}}}const Hi={get(e,s){return vm("GET",e,void 0,s)},post(e,s,a){return vm("POST",e,s,a)},put(e,s,a){return vm("PUT",e,s,a)},patch(e,s,a){return vm("PATCH",e,s,a)},delete(e,s){return vm("DELETE",e,void 0,s)}},$5={WHATSAPP:vn,EMAIL:Ll,NOTIFICATION:vr},q5={WHATSAPP:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",border:"border-green-300 dark:border-green-700"},EMAIL:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",border:"border-blue-300 dark:border-blue-700"},NOTIFICATION:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",border:"border-purple-300 dark:border-purple-700"}},sme={PENDING:{bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-300"},SENT:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300"},DELIVERED:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300"},FAILED:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300"}},ame=["QUOTE_CREATED","QUOTE_APPROVED","ORDER_CREATED","ORDER_SHIPPED","PASSWORD_RESET","ACCOUNT_ACTIVATED","WELCOME_MESSAGE","PAYMENT_REMINDER","SUPPLIER_APPLICATION_APPROVED"],rme=["WHATSAPP","EMAIL","NOTIFICATION"];function nme(){const{t:e,i18n:s}=Jt(),a=s.language==="ar",r=s.language==="ar"?"ar":"en",[n,i]=T.useState("templates"),[l,o]=T.useState("WHATSAPP"),[d,u]=T.useState(null),[h,f]=T.useState(null),[x,g]=T.useState([]),[v,b]=T.useState([]),[y,j]=T.useState([]),[w,A]=T.useState(null),[O,C]=T.useState(!0),[E,S]=T.useState(!1),[D,M]=T.useState(!1),[U,I]=T.useState(!1),[k,z]=T.useState(!1),[_,q]=T.useState(""),[L,Q]=T.useState(null),[X,W]=T.useState(""),[ee,V]=T.useState(1),[P,Y]=T.useState(0),J=20,[K,se]=T.useState({name:"",subject:"",body:"",isActive:!0}),G=Se=>e(`messaging.events.${Se}`,Se),te=Se=>e(`messaging.channels.${Se}`,Se),Z=Se=>e(`messaging.status.${Se}`,Se),ue=T.useCallback(async()=>{C(!0);try{const Se=await Hi.get("/api/messaging/templates");Se.success&&Se.data&&g(Se.data)}catch(Se){console.error("Failed to load templates:",Se)}finally{C(!1)}},[]),re=T.useCallback(async Se=>{try{const _e=await Hi.get(`/api/messaging/variables/${Se}`);_e.success&&_e.data&&b(_e.data)}catch(_e){console.error("Failed to load variables:",_e),b([])}},[]),H=T.useCallback(async()=>{try{const Se=await Hi.get("/api/messaging/logs",{params:{page:ee,pageSize:J,search:X||void 0}});Se.success&&Se.data&&(j(Se.data.items),Y(Se.data.total))}catch(Se){console.error("Failed to load logs:",Se)}},[ee,X]),pe=T.useCallback(async()=>{try{const Se=await Hi.get("/api/messaging/settings");Se.success&&Se.data&&A(Se.data)}catch(Se){console.error("Failed to load settings:",Se)}},[]);T.useEffect(()=>{ue(),pe()},[ue,pe]),T.useEffect(()=>{n==="logs"&&H()},[n,H]),T.useEffect(()=>{d&&re(d)},[d,re]),x.filter(Se=>Se.channel===l&&Se.language===r);const B=Se=>x.find(_e=>_e.event===Se&&_e.channel===l&&_e.language===r),oe=Se=>{f(Se),u(Se.event),se({name:Se.name,subject:Se.subject||"",body:Se.body,isActive:Se.isActive}),M(!0)},fe=Se=>{u(Se),f(null),se({name:"",subject:"",body:"",isActive:!0}),M(!0)},ne=async()=>{if(d){S(!0);try{const Se={event:d,channel:l,language:r,name:K.name,subject:K.subject||null,body:K.body,isActive:K.isActive};let _e;h?_e=await Hi.patch(`/api/messaging/templates/${h.id}`,Se):_e=await Hi.post("/api/messaging/templates",Se),_e.success&&(await ue(),M(!1),f(null),u(null))}catch(Se){console.error("Failed to save template:",Se)}finally{S(!1)}}},de=async Se=>{if(confirm(e("messaging.confirmDelete","      ")))try{await Hi.delete(`/api/messaging/templates/${Se.id}`),await ue()}catch(_e){console.error("Failed to delete template:",_e)}},we=async Se=>{try{await Hi.patch(`/api/messaging/templates/${Se.id}`,{isActive:!Se.isActive}),await ue()}catch(_e){console.error("Failed to toggle template:",_e)}},Ue=async()=>{if(w){S(!0);try{await Hi.patch("/api/messaging/settings",w)}catch(Se){console.error("Failed to save settings:",Se)}finally{S(!1)}}},qe=async()=>{if(!(!h||!_)){S(!0),Q(null);try{const Se={};v.forEach(Ze=>{Se[Ze.code]=Ze.sampleValue});const _e=await Hi.post("/api/messaging/send",{event:h.event,channel:h.channel,recipientId:"test",recipientContact:_,data:Se,language:r});_e.success?Q({success:!0,message:e("messaging.testSuccess","    ")}):Q({success:!1,message:_e.error||e("messaging.testFailed","  ")})}catch{Q({success:!1,message:e("messaging.testFailed","  ")})}finally{S(!1)}}},Ce=Se=>{const _e=`{{${Se}}}`;se(Ze=>({...Ze,body:Ze.body+_e}))},Le=Math.ceil(P/J);return t.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(Or,{className:"w-6 h-6 text-primary"}),e("messaging.title"," ")]}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:e("messaging.subtitle","   ")})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("button",{onClick:ue,className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-refresh-templates",children:[t.jsx(Qt,{className:"w-4 h-4"}),e("common.refresh","")]})})]}),t.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-700 mb-6",children:[t.jsxs("button",{onClick:()=>i("templates"),className:`px-4 py-3 flex items-center gap-2 border-b-2 transition-colors ${n==="templates"?"border-primary text-primary font-medium":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,"data-testid":"tab-templates",children:[t.jsx(WO,{className:"w-4 h-4"}),e("messaging.tabs.templates","")]}),t.jsxs("button",{onClick:()=>i("logs"),className:`px-4 py-3 flex items-center gap-2 border-b-2 transition-colors ${n==="logs"?"border-primary text-primary font-medium":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,"data-testid":"tab-logs",children:[t.jsx(xn,{className:"w-4 h-4"}),e("messaging.tabs.logs"," ")]}),t.jsxs("button",{onClick:()=>i("settings"),className:`px-4 py-3 flex items-center gap-2 border-b-2 transition-colors ${n==="settings"?"border-primary text-primary font-medium":"border-transparent text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,"data-testid":"tab-settings",children:[t.jsx(la,{className:"w-4 h-4"}),e("messaging.tabs.settings","")]})]}),n==="templates"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:rme.map(Se=>{const _e=$5[Se],Ze=q5[Se];return t.jsxs("button",{onClick:()=>o(Se),className:`flex items-center gap-2 px-4 py-2 rounded-lg border whitespace-nowrap transition-all ${l===Se?`${Ze.bg} ${Ze.text} ${Ze.border} ring-2 ring-offset-2 ring-${Se==="WHATSAPP"?"green":Se==="EMAIL"?"blue":"purple"}-500/30`:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,"data-testid":`button-channel-${Se.toLowerCase()}`,children:[t.jsx(_e,{className:"w-4 h-4"}),te(Se)]},Se)})}),t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.event","")}),t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.template","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.status","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.table.actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:ame.map(Se=>{const _e=B(Se);return t.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50","data-testid":`row-event-${Se.toLowerCase()}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(al,{className:"w-4 h-4 text-amber-500"}),t.jsx("span",{className:"font-medium text-slate-800 dark:text-white",children:G(Se)})]})}),t.jsx("td",{className:"px-4 py-3",children:_e?t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:_e.name}),_e.isDefault&&t.jsx("span",{className:"ms-2 px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded",children:e("messaging.default","")})]}):t.jsx("span",{className:"text-slate-400 dark:text-slate-500 italic",children:e("messaging.noTemplate","  ")})}),t.jsx("td",{className:"px-4 py-3 text-center",children:_e?t.jsx("button",{onClick:()=>we(_e),className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${_e.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,"data-testid":`button-toggle-${Se.toLowerCase()}`,children:_e.isActive?t.jsxs(t.Fragment,{children:[t.jsx(Zt,{className:"w-3 h-3"})," ",e("messaging.active","")]}):t.jsxs(t.Fragment,{children:[t.jsx(St,{className:"w-3 h-3"})," ",e("messaging.inactive","")]})}):t.jsx("span",{className:"text-slate-400",children:""})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex items-center justify-center gap-1",children:_e?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>oe(_e),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:e("common.edit",""),"data-testid":`button-edit-${Se.toLowerCase()}`,children:t.jsx(Qo,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{f(_e),u(_e.event),I(!0)},className:"p-2 text-slate-500 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg",title:e("common.preview",""),"data-testid":`button-preview-${Se.toLowerCase()}`,children:t.jsx(fs,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{f(_e),u(_e.event),z(!0)},className:"p-2 text-slate-500 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg",title:e("messaging.sendTest"," "),"data-testid":`button-test-${Se.toLowerCase()}`,children:t.jsx(bu,{className:"w-4 h-4"})}),!_e.isDefault&&t.jsx("button",{onClick:()=>de(_e),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:e("common.delete",""),"data-testid":`button-delete-${Se.toLowerCase()}`,children:t.jsx(Ct,{className:"w-4 h-4"})})]}):t.jsxs("button",{onClick:()=>fe(Se),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-primary text-white rounded-lg hover:bg-primary/90","data-testid":`button-create-${Se.toLowerCase()}`,children:[t.jsx(Pt,{className:"w-4 h-4"}),e("messaging.createTemplate"," ")]})})})]},Se)})})]})})})]}),n==="logs"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Ft,{className:"absolute start-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",value:X,onChange:Se=>W(Se.target.value),placeholder:e("messaging.searchLogs","   ..."),className:"w-full ps-10 pe-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-white placeholder-slate-400","data-testid":"input-search-logs"})]}),t.jsx("button",{onClick:H,className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700","data-testid":"button-refresh-logs",children:t.jsx(Qt,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.recipient","")}),t.jsx("th",{className:"px-4 py-3 text-start text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.event","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.channel","")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.status","")}),t.jsx("th",{className:"px-4 py-3 text-end text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:e("messaging.logs.sentAt"," ")})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:[y.map(Se=>{const _e=$5[Se.channel],Ze=q5[Se.channel],Mt=sme[Se.status];return t.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50","data-testid":`row-log-${Se.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-slate-800 dark:text-white",children:Se.recipientName||e("messaging.logs.unknown"," ")}),t.jsx("div",{className:"text-sm text-slate-500",children:Se.recipientContact})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:G(Se.event)})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${Ze.bg} ${Ze.text}`,children:[t.jsx(_e,{className:"w-3 h-3"}),te(Se.channel)]})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs ${Mt.bg} ${Mt.text}`,children:[Se.status==="FAILED"&&t.jsx(Gs,{className:"w-3 h-3"}),Se.status==="DELIVERED"&&t.jsx(Zt,{className:"w-3 h-3"}),Se.status==="PENDING"&&t.jsx(os,{className:"w-3 h-3"}),Se.status==="SENT"&&t.jsx(xi,{className:"w-3 h-3"}),Z(Se.status)]})}),t.jsx("td",{className:"px-4 py-3 text-end text-sm text-slate-500",children:Se.sentAt?new Date(Se.sentAt).toLocaleString(a?"ar-SA":"en-US"):""})]},Se.id)}),y.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:e("messaging.logs.empty","    ")})})]})]})}),Le>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"text-sm text-slate-500",children:[e("common.showing","")," ",(ee-1)*J+1," - ",Math.min(ee*J,P)," ",e("common.of","")," ",P]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>V(Se=>Math.max(1,Se-1)),disabled:ee===1,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-700 disabled:opacity-50","data-testid":"button-prev-page",children:a?t.jsx(vs,{className:"w-4 h-4"}):t.jsx(ws,{className:"w-4 h-4"})}),t.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[ee," / ",Le]}),t.jsx("button",{onClick:()=>V(Se=>Math.min(Le,Se+1)),disabled:ee===Le,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-700 disabled:opacity-50","data-testid":"button-next-page",children:a?t.jsx(ws,{className:"w-4 h-4"}):t.jsx(vs,{className:"w-4 h-4"})})]})]})]})]}),n==="settings"&&w&&t.jsx("div",{className:"max-w-2xl",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-4",children:e("messaging.settings.channels"," ")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:w.enableWhatsApp,onChange:Se=>A({...w,enableWhatsApp:Se.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-green-600 focus:ring-green-500","data-testid":"checkbox-whatsapp"}),t.jsx(vn,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e("messaging.channels.WHATSAPP","")})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:w.enableEmail,onChange:Se=>A({...w,enableEmail:Se.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500","data-testid":"checkbox-email"}),t.jsx(Ll,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e("messaging.channels.EMAIL"," ")})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:w.enableNotifications,onChange:Se=>A({...w,enableNotifications:Se.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-purple-600 focus:ring-purple-500","data-testid":"checkbox-notifications"}),t.jsx(vr,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:e("messaging.channels.NOTIFICATION","")})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("messaging.settings.defaultLanguage","  ")}),t.jsxs("select",{value:w.defaultLanguage,onChange:Se=>A({...w,defaultLanguage:Se.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-white","data-testid":"select-default-language",children:[t.jsx("option",{value:"ar",children:""}),t.jsx("option",{value:"en",children:"English"})]})]}),t.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:t.jsxs("button",{onClick:Ue,disabled:E,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-save-settings",children:[t.jsx(ds,{className:"w-4 h-4"}),E?e("common.saving"," ..."):e("common.save","")]})})]})})]}),D&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:h?e("messaging.editTemplate"," "):e("messaging.createTemplate","  ")}),t.jsx("button",{onClick:()=>M(!1),className:"p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-editor",children:t.jsx(St,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e("messaging.form.name"," ")}),t.jsx("input",{type:"text",value:K.name,onChange:Se=>se({...K,name:Se.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white","data-testid":"input-template-name"})]}),l==="EMAIL"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e("messaging.form.subject"," ")}),t.jsx("input",{type:"text",value:K.subject,onChange:Se=>se({...K,subject:Se.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white","data-testid":"input-template-subject"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:e("messaging.form.body"," ")}),t.jsx("textarea",{value:K.body,onChange:Se=>se({...K,body:Se.target.value}),rows:8,className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white font-mono text-sm",dir:"auto","data-testid":"textarea-template-body"})]}),v.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:e("messaging.form.variables"," ")}),t.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(Se=>t.jsxs("button",{onClick:()=>Ce(Se.code),className:"inline-flex items-center gap-1 px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 text-sm",title:`${a?Se.nameAr:Se.name}: ${Se.sampleValue}`,"data-testid":`button-variable-${Se.code}`,children:[t.jsx(WO,{className:"w-3 h-3"}),`{{${Se.code}}}`,Se.isRequired&&t.jsx("span",{className:"text-red-500",children:"*"})]},Se.code))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"isActive",checked:K.isActive,onChange:Se=>se({...K,isActive:Se.target.checked}),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary","data-testid":"checkbox-template-active"}),t.jsx("label",{htmlFor:"isActive",className:"text-sm text-slate-700 dark:text-slate-300",children:e("messaging.form.isActive"," ")})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-cancel-edit",children:e("common.cancel","")}),t.jsxs("button",{onClick:ne,disabled:E||!K.name||!K.body,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-save-template",children:[t.jsx(ds,{className:"w-4 h-4"}),E?e("common.saving"," ..."):e("common.save","")]})]})]})}),U&&h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(fs,{className:"w-5 h-5"}),e("messaging.preview"," ")]}),t.jsx("button",{onClick:()=>I(!1),className:"p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-preview",children:t.jsx(St,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l==="EMAIL"&&h.subject&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:e("messaging.preview.subject","")}),t.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-900 rounded-lg text-slate-800 dark:text-white",children:h.subject})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:e("messaging.preview.body"," ")}),t.jsx("div",{className:`p-4 rounded-lg whitespace-pre-wrap ${l==="WHATSAPP"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":l==="EMAIL"?"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700":"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800"}`,children:l==="EMAIL"?t.jsx("div",{className:"text-slate-800 dark:text-white",dangerouslySetInnerHTML:{__html:h.body}}):t.jsx("p",{className:"text-slate-800 dark:text-white",dir:"auto",children:h.body})})]})]}),t.jsx("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:t.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-preview-action",children:e("common.close","")})})]})}),k&&h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white flex items-center gap-2",children:[t.jsx(bu,{className:"w-5 h-5"}),e("messaging.sendTest","  ")]}),t.jsx("button",{onClick:()=>{z(!1),Q(null),q("")},className:"p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-close-test",children:t.jsx(St,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:l==="WHATSAPP"?e("messaging.test.phone"," "):l==="EMAIL"?e("messaging.test.email"," "):e("messaging.test.userId"," ")}),t.jsx("input",{type:l==="EMAIL"?"email":"text",value:_,onChange:Se=>q(Se.target.value),placeholder:l==="WHATSAPP"?"+966501234567":l==="EMAIL"?"test@example.com":"user-123",className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-900 text-slate-800 dark:text-white",dir:"ltr","data-testid":"input-test-recipient"})]}),L&&t.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${L.success?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:[L.success?t.jsx(Zt,{className:"w-5 h-5"}):t.jsx(Gs,{className:"w-5 h-5"}),L.message]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:()=>{z(!1),Q(null),q("")},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg","data-testid":"button-cancel-test",children:e("common.cancel","")}),t.jsxs("button",{onClick:qe,disabled:E||!_,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50","data-testid":"button-send-test",children:[t.jsx(xi,{className:"w-4 h-4"}),E?e("common.sending"," ..."):e("messaging.send","")]})]})]})})]})}const So=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ime=[{id:"1",code:"SAR",name:" ",nameAr:" ",nameEn:"Saudi Riyal",symbol:".",isBase:!0,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"USD",name:" ",nameAr:" ",nameEn:"US Dollar",symbol:"$",isBase:!1,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"CNY",name:" ",nameAr:" ",nameEn:"Chinese Yuan",symbol:"",isBase:!1,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"AED",name:" ",nameAr:" ",nameEn:"UAE Dirham",symbol:".",isBase:!1,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()}],lme=[{id:"1",currencyId:"2",rateToBase:3.75,syncPercent:2.5,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},{id:"2",currencyId:"3",rateToBase:.52,syncPercent:3,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},{id:"3",currencyId:"4",rateToBase:1.02,syncPercent:1.5,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()}],ome=[{id:"1",name:"  ",nameAr:"  ",nameEn:"China Direct",description:"    ",defaultMarginPercent:25,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",name:" ",nameAr:" ",nameEn:"Dubai Partners",description:"    ",defaultMarginPercent:18,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",name:" ",nameAr:" ",nameEn:"Saudi Local",description:"  ",defaultMarginPercent:12,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()}],cme=[{id:"1",code:"OEM",label:" ",labelAr:" ",labelEn:"Original Equipment",description:"    ",defaultMarginAdjust:5,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"OES",label:" ",labelAr:" ",labelEn:"OES Quality",description:"     ",defaultMarginAdjust:3,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"AFT",label:" ",labelAr:" ",labelEn:"Aftermarket Premium",description:"  ",defaultMarginAdjust:0,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"CPY",label:"",labelAr:"",labelEn:"Commercial Copy",description:"  ",defaultMarginAdjust:-3,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()},{id:"5",code:"REB",label:"",labelAr:"",labelEn:"Rebuilt/Refurbished",description:"   ",defaultMarginAdjust:-5,isActive:!0,sortOrder:5,createdAt:new Date().toISOString()}],dme=[{id:"1",code:"TOY",name:" ",nameAr:" ",nameEn:"Toyota Genuine",country:"Japan",isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"HYU",name:"/ ",nameAr:"/ ",nameEn:"Hyundai/Kia Genuine",country:"Korea",isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"GMB",name:"GMB",nameAr:"  ",nameEn:"GMB Japan",country:"Japan",isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"KOY",name:"KOYO",nameAr:"",nameEn:"KOYO Bearings",country:"Japan",isActive:!0,sortOrder:4,createdAt:new Date().toISOString()},{id:"5",code:"AIS",name:"AISIN",nameAr:"",nameEn:"AISIN Japan",country:"Japan",isActive:!0,sortOrder:5,createdAt:new Date().toISOString()}],ume=[{id:"1",code:"SEA",name:" ",nameAr:" ",nameEn:"Sea Freight",baseRate:500,perKgRate:2.5,minCharge:500,deliveryDays:35,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"AIR",name:" ",nameAr:" ",nameEn:"Air Freight",baseRate:150,perKgRate:18,minCharge:200,deliveryDays:7,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"EXP",name:" ",nameAr:" ",nameEn:"Express Courier",baseRate:100,perKgRate:45,minCharge:150,deliveryDays:3,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"LND",name:" ",nameAr:" ",nameEn:"Land Freight",baseRate:300,perKgRate:1.5,minCharge:400,deliveryDays:14,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()}],mme=[{id:"1",code:"GCC",name:" ",nameAr:" ",countries:["SA","AE","KW","BH","OM","QA"],extraRatePerKg:0,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"MENA",name:"   ",nameAr:"   ",countries:["EG","JO","LB","IQ","MA","TN"],extraRatePerKg:3,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"ASIA",name:"",nameAr:"",countries:["CN","JP","KR","TH","MY","ID"],extraRatePerKg:5,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"EUR",name:"",nameAr:"",countries:["DE","FR","IT","ES","GB","NL"],extraRatePerKg:8,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()}],fme=[{id:"1",code:"SUPER_ADMIN",name:" ",nameAr:" ",nameEn:"Super Admin",isSystem:!0,isActive:!0,sortOrder:1,createdAt:new Date().toISOString()},{id:"2",code:"ADMIN",name:"",nameAr:"",nameEn:"Admin",isSystem:!0,isActive:!0,sortOrder:2,createdAt:new Date().toISOString()},{id:"3",code:"MANAGER",name:"",nameAr:"",nameEn:"Manager",isSystem:!1,isActive:!0,sortOrder:3,createdAt:new Date().toISOString()},{id:"4",code:"SUPPLIER",name:"",nameAr:"",nameEn:"Supplier",isSystem:!0,isActive:!0,sortOrder:4,createdAt:new Date().toISOString()},{id:"5",code:"TRADER",name:"",nameAr:"",nameEn:"Trader",isSystem:!0,isActive:!0,sortOrder:5,createdAt:new Date().toISOString()},{id:"6",code:"CUSTOMER",name:"",nameAr:"",nameEn:"Customer",isSystem:!0,isActive:!0,sortOrder:6,createdAt:new Date().toISOString()},{id:"7",code:"GUEST",name:"",nameAr:"",nameEn:"Guest",isSystem:!0,isActive:!0,sortOrder:7,createdAt:new Date().toISOString()}],us={currencies:"sinicar_currencies",exchangeRates:"sinicar_exchange_rates",supplierGroups:"sinicar_supplier_groups",qualityCodes:"sinicar_quality_codes",brandCodes:"sinicar_brand_codes",shippingMethods:"sinicar_shipping_methods",shippingZones:"sinicar_shipping_zones",roles:"sinicar_roles"};function jo(e,s){try{const a=localStorage.getItem(e);return a?JSON.parse(a):s}catch{return s}}function qs(e,s){localStorage.setItem(e,JSON.stringify(s))}const hme=()=>{const{t:e,i18n:s}=Jt(),{addToast:a}=Dt();s.dir();const[r,n]=T.useState("CURRENCIES"),[i,l]=T.useState(!1),[o,d]=T.useState([]),[u,h]=T.useState([]),[f,x]=T.useState([]),[g,v]=T.useState([]),[b,y]=T.useState([]),[j,w]=T.useState([]),[A,O]=T.useState([]),[C,E]=T.useState([]),[S,D]=T.useState(null),[M,U]=T.useState(!1);T.useEffect(()=>{I()},[]);const I=()=>{l(!0),d(jo(us.currencies,ime)),h(jo(us.exchangeRates,lme)),x(jo(us.supplierGroups,ome)),v(jo(us.qualityCodes,cme)),y(jo(us.brandCodes,dme)),w(jo(us.shippingMethods,ume)),O(jo(us.shippingZones,mme)),E(jo(us.roles,fme)),l(!1)},k=()=>{qs(us.currencies,o),qs(us.exchangeRates,u),qs(us.supplierGroups,f),qs(us.qualityCodes,g),qs(us.brandCodes,b),qs(us.shippingMethods,j),qs(us.shippingZones,A),qs(us.roles,C),a("    ","success")},z=({id:P,icon:Y,label:J})=>t.jsxs("button",{onClick:()=>{n(P),U(!1),D(null)},className:`flex items-center gap-2 px-4 py-3 rounded-xl transition-all font-bold text-sm ${r===P?"bg-[#0B1B3A] text-[#C8A04F] shadow-lg":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-200"}`,"data-testid":`tab-${P.toLowerCase()}`,children:[Y,t.jsx("span",{children:J})]}),_=()=>{const[P,Y]=T.useState({code:"",name:"",nameAr:"",nameEn:"",symbol:"",isBase:!1,isActive:!0}),[J,K]=T.useState({currencyId:"",rateToBase:1,syncPercent:0}),se=()=>{if(!P.code||!P.name||!P.symbol){a("    ","error");return}const re={id:So(),code:P.code.toUpperCase(),name:P.name,nameAr:P.nameAr,nameEn:P.nameEn,symbol:P.symbol,isBase:P.isBase||!1,isActive:!0,sortOrder:o.length+1,createdAt:new Date().toISOString()},H=[...o,re];d(H),qs(us.currencies,H),Y({code:"",name:"",nameAr:"",nameEn:"",symbol:"",isBase:!1,isActive:!0}),U(!1),a("   ","success")},G=()=>{if(!J.currencyId||!J.rateToBase){a("     ","error");return}const re={id:So(),currencyId:J.currencyId,rateToBase:Number(J.rateToBase),syncPercent:Number(J.syncPercent)||0,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},H=[...u,re];h(H),qs(us.exchangeRates,H),K({currencyId:"",rateToBase:1,syncPercent:0}),a("    ","success")},te=re=>{const H=o.filter(B=>B.id!==re);d(H),qs(us.currencies,H);const pe=u.filter(B=>B.currencyId!==re);h(pe),qs(us.exchangeRates,pe),a("  ","success")},Z=(re,H,pe)=>{const B=u.map(oe=>oe.id===re?{...oe,[H]:pe,updatedAt:new Date().toISOString()}:oe);h(B),qs(us.exchangeRates,B)},ue=re=>{const H=o.find(pe=>pe.id===re);return H?`${H.code} - ${H.name}`:re};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(or,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>U(!M),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-currency",children:[t.jsx(Pt,{size:16}),"  "]})]}),M&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsx("input",{placeholder:"  (USD)",value:P.code,onChange:re=>Y({...P,code:re.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:3,"data-testid":"input-currency-code"}),t.jsx("input",{placeholder:" ",value:P.nameAr,onChange:re=>Y({...P,nameAr:re.target.value,name:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-currency-name-ar"}),t.jsx("input",{placeholder:"Name in English",value:P.nameEn,onChange:re=>Y({...P,nameEn:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-currency-name-en"}),t.jsx("input",{placeholder:" ($)",value:P.symbol,onChange:re=>Y({...P,symbol:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5,"data-testid":"input-currency-symbol"}),t.jsxs("label",{className:"flex items-center gap-2 p-3",children:[t.jsx("input",{type:"checkbox",checked:P.isBase,onChange:re=>Y({...P,isBase:re.target.checked}),className:"w-4 h-4","data-testid":"checkbox-currency-base"}),t.jsx("span",{className:"text-sm",children:" "})]}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-currency",children:[t.jsx(Zt,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:o.map(re=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-[#0B1B3A] rounded-xl flex items-center justify-center text-[#C8A04F] font-bold",children:re.symbol}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[re.code," - ",re.name]}),t.jsx("p",{className:"text-sm text-slate-500",children:re.nameEn})]}),re.isBase&&t.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full",children:" "})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:re.isActive,onChange:H=>{const pe=o.map(B=>B.id===re.id?{...B,isActive:H.target.checked}:B);d(pe),qs(us.currencies,pe)},className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]}),!re.isBase&&t.jsx("button",{onClick:()=>te(re.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg","data-testid":`button-delete-currency-${re.id}`,children:t.jsx(Ct,{size:16})})]})]},re.id))})]}),t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Qt,{size:20,className:"text-[#C8A04F]"}),"  (  )"]})}),t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("select",{value:J.currencyId,onChange:re=>K({...J,currencyId:re.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"select-rate-currency",children:[t.jsx("option",{value:"",children:" "}),o.filter(re=>!re.isBase).map(re=>t.jsxs("option",{value:re.id,children:[re.code," - ",re.name]},re.id))]}),t.jsx("input",{type:"number",placeholder:" ",value:J.rateToBase,onChange:re=>K({...J,rateToBase:parseFloat(re.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.01","data-testid":"input-rate-value"}),t.jsx("input",{type:"number",placeholder:"  %",value:J.syncPercent,onChange:re=>K({...J,syncPercent:parseFloat(re.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.1","data-testid":"input-rate-sync"}),t.jsxs("button",{onClick:G,className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-rate",children:[t.jsx(Pt,{size:16}),"  "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:u.map(re=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center",children:t.jsx(or,{size:18,className:"text-slate-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:ue(re.currencyId)}),t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",new Date(re.createdAt).toLocaleDateString("ar-SA")]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:re.rateToBase,onChange:H=>Z(re.id,"rateToBase",parseFloat(H.target.value)||0),className:"w-24 p-2 text-center rounded-lg border border-slate-200 font-bold",step:"0.01"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" "})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:re.syncPercent,onChange:H=>Z(re.id,"syncPercent",parseFloat(H.target.value)||0),className:"w-20 p-2 text-center rounded-lg border border-slate-200",step:"0.1"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  %"})]}),t.jsx("button",{onClick:()=>{const H=u.filter(pe=>pe.id!==re.id);h(H),qs(us.exchangeRates,H)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:t.jsx(Ct,{size:16})})]})]},re.id))})]})]})},q=()=>{const[P,Y]=T.useState({name:"",nameAr:"",nameEn:"",description:"",defaultMarginPercent:15}),J=()=>{if(!P.name){a("   ","error");return}const G={id:So(),name:P.name,nameAr:P.nameAr,nameEn:P.nameEn,description:P.description,defaultMarginPercent:Number(P.defaultMarginPercent)||15,isActive:!0,sortOrder:f.length+1,createdAt:new Date().toISOString()},te=[...f,G];x(te),qs(us.supplierGroups,te),Y({name:"",nameAr:"",nameEn:"",description:"",defaultMarginPercent:15}),U(!1),a("    ","success")},K=(G,te,Z)=>{const ue=f.map(re=>re.id===G?{...re,[te]:Z,updatedAt:new Date().toISOString()}:re);x(ue),qs(us.supplierGroups,ue)},se=G=>{const te=f.filter(Z=>Z.id!==G);x(te),qs(us.supplierGroups,te),a("  ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Xs,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>U(!M),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-supplier-group",children:[t.jsx(Pt,{size:16}),"  "]})]}),M&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("input",{placeholder:"  ",value:P.nameAr,onChange:G=>Y({...P,nameAr:G.target.value,name:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-group-name-ar"}),t.jsx("input",{placeholder:"Group Name in English",value:P.nameEn,onChange:G=>Y({...P,nameEn:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-group-name-en"}),t.jsx("input",{placeholder:"",value:P.description,onChange:G=>Y({...P,description:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-group-description"}),t.jsx("input",{type:"number",placeholder:"  %",value:P.defaultMarginPercent,onChange:G=>Y({...P,defaultMarginPercent:parseFloat(G.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-group-margin"}),t.jsxs("button",{onClick:J,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-group",children:[t.jsx(Zt,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:f.map(G=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-[#0B1B3A] to-[#1a2e56] rounded-xl flex items-center justify-center text-white font-bold",children:[G.defaultMarginPercent,"%"]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:G.name}),t.jsx("p",{className:"text-sm text-slate-500",children:G.nameEn}),G.description&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:G.description})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:G.defaultMarginPercent,onChange:te=>K(G.id,"defaultMarginPercent",parseFloat(te.target.value)||0),className:"w-20 p-2 text-center rounded-lg border border-slate-200 font-bold"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  %"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:G.isActive,onChange:te=>K(G.id,"isActive",te.target.checked),className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]}),t.jsx("button",{onClick:()=>se(G.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg","data-testid":`button-delete-group-${G.id}`,children:t.jsx(Ct,{size:16})})]})]},G.id))})]})})},L=()=>{const[P,Y]=T.useState({code:"",label:"",labelAr:"",labelEn:"",description:"",defaultMarginAdjust:0}),J=()=>{if(!P.code||!P.label){a("   ","error");return}const G={id:So(),code:P.code.toUpperCase(),label:P.label,labelAr:P.labelAr,labelEn:P.labelEn,description:P.description,defaultMarginAdjust:Number(P.defaultMarginAdjust)||0,isActive:!0,sortOrder:g.length+1,createdAt:new Date().toISOString()},te=[...g,G];v(te),qs(us.qualityCodes,te),Y({code:"",label:"",labelAr:"",labelEn:"",description:"",defaultMarginAdjust:0}),U(!1),a("    ","success")},K=(G,te,Z)=>{const ue=g.map(re=>re.id===G?{...re,[te]:Z,updatedAt:new Date().toISOString()}:re);v(ue),qs(us.qualityCodes,ue)},se=G=>{const te=g.filter(Z=>Z.id!==G);v(te),qs(us.qualityCodes,te),a("   ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Uj,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>U(!M),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-quality-code",children:[t.jsx(Pt,{size:16}),"  "]})]}),M&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsx("input",{placeholder:" (OEM)",value:P.code,onChange:G=>Y({...P,code:G.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5,"data-testid":"input-quality-code"}),t.jsx("input",{placeholder:" ",value:P.labelAr,onChange:G=>Y({...P,labelAr:G.target.value,label:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-quality-label-ar"}),t.jsx("input",{placeholder:"Label in English",value:P.labelEn,onChange:G=>Y({...P,labelEn:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-quality-label-en"}),t.jsx("input",{placeholder:"",value:P.description,onChange:G=>Y({...P,description:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-quality-description"}),t.jsx("input",{type:"number",placeholder:"  %",value:P.defaultMarginAdjust,onChange:G=>Y({...P,defaultMarginAdjust:parseFloat(G.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-quality-margin"}),t.jsxs("button",{onClick:J,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-quality-code",children:[t.jsx(Zt,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:g.map(G=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-bold text-white ${G.defaultMarginAdjust>0?"bg-emerald-500":G.defaultMarginAdjust<0?"bg-orange-500":"bg-slate-500"}`,children:G.code}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:G.label}),t.jsx("p",{className:"text-sm text-slate-500",children:G.labelEn}),G.description&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:G.description})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"number",value:G.defaultMarginAdjust,onChange:te=>K(G.id,"defaultMarginAdjust",parseFloat(te.target.value)||0),className:"w-20 p-2 text-center rounded-lg border border-slate-200 font-bold"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  %"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:G.isActive,onChange:te=>K(G.id,"isActive",te.target.checked),className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]}),t.jsx("button",{onClick:()=>se(G.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg","data-testid":`button-delete-quality-${G.id}`,children:t.jsx(Ct,{size:16})})]})]},G.id))})]})})},Q=()=>{const[P,Y]=T.useState({code:"",name:"",nameAr:"",nameEn:"",country:""}),J=()=>{if(!P.code||!P.name){a("   ","error");return}const se={id:So(),code:P.code.toUpperCase(),name:P.name,nameAr:P.nameAr,nameEn:P.nameEn,country:P.country,isActive:!0,sortOrder:b.length+1,createdAt:new Date().toISOString()},G=[...b,se];y(G),qs(us.brandCodes,G),Y({code:"",name:"",nameAr:"",nameEn:"",country:""}),U(!1),a("    ","success")},K=se=>{const G=b.filter(te=>te.id!==se);y(G),qs(us.brandCodes,G),a("   ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Vj,{size:20,className:"text-[#C8A04F]"}),"  "]}),t.jsxs("button",{onClick:()=>U(!M),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-brand",children:[t.jsx(Pt,{size:16}),"  "]})]}),M&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("input",{placeholder:" (TOY)",value:P.code,onChange:se=>Y({...P,code:se.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5,"data-testid":"input-brand-code"}),t.jsx("input",{placeholder:" ",value:P.nameAr,onChange:se=>Y({...P,nameAr:se.target.value,name:se.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-brand-name-ar"}),t.jsx("input",{placeholder:"Name in English",value:P.nameEn,onChange:se=>Y({...P,nameEn:se.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr","data-testid":"input-brand-name-en"}),t.jsx("input",{placeholder:" ",value:P.country,onChange:se=>Y({...P,country:se.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm","data-testid":"input-brand-country"}),t.jsxs("button",{onClick:J,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700","data-testid":"button-save-brand",children:[t.jsx(Zt,{size:16})," "]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4",children:b.map(se=>t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-[#C8A04F] transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"px-3 py-1 bg-[#0B1B3A] text-[#C8A04F] font-bold rounded-lg text-sm",children:se.code}),t.jsx("button",{onClick:()=>K(se.id),className:"p-1 text-red-500 hover:bg-red-50 rounded","data-testid":`button-delete-brand-${se.id}`,children:t.jsx(Ct,{size:14})})]}),t.jsx("p",{className:"font-bold text-slate-800",children:se.name}),t.jsx("p",{className:"text-sm text-slate-500",children:se.nameEn}),se.country&&t.jsxs("p",{className:"text-xs text-slate-400 mt-2 flex items-center gap-1",children:[t.jsx(ja,{size:12})," ",se.country]})]},se.id))})]})})},X=()=>{const[P,Y]=T.useState({currencyId:"",rateToBase:0,syncPercent:2.5}),[J,K]=T.useState(!1),se=()=>{if(!P.currencyId){a("  ","error");return}const te={id:So(),currencyId:P.currencyId,rateToBase:Number(P.rateToBase)||0,syncPercent:Number(P.syncPercent)||2.5,effectiveFrom:new Date().toISOString(),isActive:!0,createdAt:new Date().toISOString()},Z=[...u,te];h(Z),qs(us.exchangeRates,Z),Y({currencyId:"",rateToBase:0,syncPercent:2.5}),K(!1),a("    ","success")},G=te=>{const Z=o.find(ue=>ue.id===te);return Z?`${Z.code} - ${Z.name}`:te};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Do,{size:20,className:"text-[#C8A04F]"}),"     (SAR)"]}),t.jsxs("button",{onClick:()=>K(!J),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-exchange-rate",children:[t.jsx(Pt,{size:16}),"   "]})]}),J&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("select",{value:P.currencyId,onChange:te=>Y({...P,currencyId:te.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",children:[t.jsx("option",{value:"",children:" "}),o.filter(te=>!te.isBase).map(te=>t.jsxs("option",{value:te.id,children:[te.code," - ",te.name]},te.id))]}),t.jsx("input",{type:"number",placeholder:" ",value:P.rateToBase,onChange:te=>Y({...P,rateToBase:parseFloat(te.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.01"}),t.jsx("input",{type:"number",placeholder:"  %",value:P.syncPercent,onChange:te=>Y({...P,syncPercent:parseFloat(te.target.value)||2.5}),className:"p-3 rounded-lg border border-slate-300 text-sm",step:"0.1"}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(Zt,{size:16})," "]})]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:u.map(te=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-xl flex items-center justify-center text-white",children:t.jsx(Do,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:G(te.currencyId)}),t.jsxs("p",{className:"text-sm text-slate-500",children:[" : ",new Date(te.createdAt).toLocaleDateString("ar-SA")]})]})]}),t.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"font-bold text-2xl text-[#0B1B3A]",children:te.rateToBase}),t.jsx("p",{className:"text-xs text-slate-500",children:"/"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-600",children:[te.syncPercent,"%"]}),t.jsx("p",{className:"text-xs text-slate-500",children:""})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${te.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:te.isActive?"":" "}),t.jsx("button",{onClick:()=>{const Z=u.filter(ue=>ue.id!==te.id);h(Z),qs(us.exchangeRates,Z)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:t.jsx(Ct,{size:16})})]})]},te.id))})]})})},W=()=>{const[P,Y]=T.useState({code:"",name:"",nameAr:"",nameEn:"",baseRate:0,perKgRate:0,minCharge:0,deliveryDays:7}),[J,K]=T.useState(!1),se=()=>{if(!P.code||!P.name){a("   ","error");return}const G={id:So(),code:P.code.toUpperCase(),name:P.name,nameAr:P.nameAr,nameEn:P.nameEn,baseRate:Number(P.baseRate)||0,perKgRate:Number(P.perKgRate)||0,minCharge:Number(P.minCharge)||0,deliveryDays:Number(P.deliveryDays)||7,isActive:!0,sortOrder:j.length+1,createdAt:new Date().toISOString()},te=[...j,G];w(te),qs(us.shippingMethods,te),Y({code:"",name:"",nameAr:"",nameEn:"",baseRate:0,perKgRate:0,minCharge:0,deliveryDays:7}),K(!1),a("    ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Dr,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>K(!J),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-shipping-method",children:[t.jsx(Pt,{size:16}),"  "]})]}),J&&t.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[t.jsx("input",{placeholder:" (SEA)",value:P.code,onChange:G=>Y({...P,code:G.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5}),t.jsx("input",{placeholder:" ",value:P.nameAr,onChange:G=>Y({...P,nameAr:G.target.value,name:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{placeholder:"Name in English",value:P.nameEn,onChange:G=>Y({...P,nameEn:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr"}),t.jsx("input",{type:"number",placeholder:" ",value:P.deliveryDays,onChange:G=>Y({...P,deliveryDays:parseInt(G.target.value)||7}),className:"p-3 rounded-lg border border-slate-300 text-sm"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("input",{type:"number",placeholder:"  ()",value:P.baseRate,onChange:G=>Y({...P,baseRate:parseFloat(G.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{type:"number",placeholder:"  ()",value:P.perKgRate,onChange:G=>Y({...P,perKgRate:parseFloat(G.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{type:"number",placeholder:"  ()",value:P.minCharge,onChange:G=>Y({...P,minCharge:parseFloat(G.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(Zt,{size:16})," "]})]})]}),t.jsx("div",{className:"divide-y divide-slate-100",children:j.map(G=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl flex items-center justify-center text-white",children:t.jsx(Dr,{size:20})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[G.code," - ",G.name]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[G.nameEn," | ",G.deliveryDays," "]})]})]}),t.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[G.baseRate," ."]}),t.jsx("p",{className:"text-xs text-slate-500",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[G.perKgRate," ."]}),t.jsx("p",{className:"text-xs text-slate-500",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"font-bold text-slate-800",children:[G.minCharge," ."]}),t.jsx("p",{className:"text-xs text-slate-500",children:" "})]}),t.jsx("button",{onClick:()=>{const te=j.filter(Z=>Z.id!==G.id);w(te),qs(us.shippingMethods,te)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:t.jsx(Ct,{size:16})})]})]},G.id))})]})})},ee=()=>{const[P,Y]=T.useState({code:"",name:"",nameAr:"",countries:[],extraRatePerKg:0}),[J,K]=T.useState(!1),se=()=>{if(!P.code||!P.name){a("   ","error");return}const G={id:So(),code:P.code.toUpperCase(),name:P.name,nameAr:P.nameAr,countries:P.countries||[],extraRatePerKg:Number(P.extraRatePerKg)||0,isActive:!0,sortOrder:A.length+1,createdAt:new Date().toISOString()},te=[...A,G];O(te),qs(us.shippingZones,te),Y({code:"",name:"",nameAr:"",countries:[],extraRatePerKg:0}),K(!1),a("    ","success")};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Go,{size:20,className:"text-[#C8A04F]"})," "]}),t.jsxs("button",{onClick:()=>K(!J),className:"flex items-center gap-2 px-4 py-2 bg-[#0B1B3A] text-white rounded-lg text-sm font-bold hover:bg-[#1a2e56]","data-testid":"button-add-shipping-zone",children:[t.jsx(Pt,{size:16}),"  "]})]}),J&&t.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("input",{placeholder:" (GCC)",value:P.code,onChange:G=>Y({...P,code:G.target.value.toUpperCase()}),className:"p-3 rounded-lg border border-slate-300 text-sm",maxLength:5}),t.jsx("input",{placeholder:" ",value:P.nameAr,onChange:G=>Y({...P,nameAr:G.target.value,name:G.target.value}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsx("input",{placeholder:" (SA,AE,KW)",value:(P.countries||[]).join(","),onChange:G=>Y({...P,countries:G.target.value.split(",").map(te=>te.trim().toUpperCase())}),className:"p-3 rounded-lg border border-slate-300 text-sm",dir:"ltr"}),t.jsx("input",{type:"number",placeholder:" /",value:P.extraRatePerKg,onChange:G=>Y({...P,extraRatePerKg:parseFloat(G.target.value)||0}),className:"p-3 rounded-lg border border-slate-300 text-sm"}),t.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:[t.jsx(Zt,{size:16})," "]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:A.map(G=>t.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 font-bold rounded-lg text-sm",children:G.code}),t.jsx("button",{onClick:()=>{const te=A.filter(Z=>Z.id!==G.id);O(te),qs(us.shippingZones,te)},className:"p-1 text-red-500 hover:bg-red-50 rounded",children:t.jsx(Ct,{size:14})})]}),t.jsx("p",{className:"font-bold text-slate-800",children:G.name}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[" : ",G.extraRatePerKg," ./"]}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:G.countries.map(te=>t.jsx("span",{className:"px-2 py-0.5 bg-slate-200 text-slate-600 text-xs rounded",children:te},te))})]},G.id))})]})})},V=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(Ds,{size:20,className:"text-[#C8A04F]"})," "]})}),t.jsx("div",{className:"divide-y divide-slate-100",children:C.map(P=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-white ${P.code==="SUPER_ADMIN"?"bg-purple-600":P.code==="ADMIN"?"bg-blue-600":P.code==="MANAGER"?"bg-emerald-600":P.code==="SUPPLIER"?"bg-orange-600":P.code==="TRADER"?"bg-amber-600":P.code==="CUSTOMER"?"bg-slate-600":"bg-gray-400"}`,children:t.jsx(Ds,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:P.name}),t.jsx("p",{className:"text-sm text-slate-500",children:P.nameEn}),P.description&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:P.description})]}),P.isSystem&&t.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded-full",children:""})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 text-xs font-mono rounded",children:P.code}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:P.isActive,onChange:Y=>{const J=C.map(K=>K.id===P.id?{...K,isActive:Y.target.checked}:K);E(J),qs(us.roles,J)},className:"w-4 h-4",disabled:P.isSystem}),t.jsx("span",{className:"text-sm text-slate-600",children:""})]})]})]},P.id))})]}),t.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(ma,{className:"text-amber-600 mt-0.5",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-amber-800",children:""}),t.jsx("p",{className:"text-sm text-amber-700",children:"      .         ."})]})]})})]});return i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Qt,{className:"animate-spin text-[#C8A04F]",size:32})}):t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(ja,{className:"text-[#C8A04F]",size:28}),"  "]}),t.jsx("p",{className:"text-slate-500 mt-1",children:"    "})]}),t.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 shadow-lg","data-testid":"button-save-all",children:[t.jsx(ds,{size:18}),"   "]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(z,{id:"CURRENCIES",icon:t.jsx(or,{size:18}),label:""}),t.jsx(z,{id:"EXCHANGE_RATES",icon:t.jsx(Do,{size:18}),label:" "}),t.jsx(z,{id:"SUPPLIER_GROUPS",icon:t.jsx(Xs,{size:18}),label:" "}),t.jsx(z,{id:"QUALITY_CODES",icon:t.jsx(Uj,{size:18}),label:" "}),t.jsx(z,{id:"BRAND_CODES",icon:t.jsx(Vj,{size:18}),label:" "}),t.jsx(z,{id:"SHIPPING_METHODS",icon:t.jsx(Dr,{size:18}),label:" "}),t.jsx(z,{id:"SHIPPING_ZONES",icon:t.jsx(Go,{size:18}),label:" "}),t.jsx(z,{id:"ROLES",icon:t.jsx(Ds,{size:18}),label:""})]}),r==="CURRENCIES"&&t.jsx(_,{}),r==="EXCHANGE_RATES"&&t.jsx(X,{}),r==="SUPPLIER_GROUPS"&&t.jsx(q,{}),r==="QUALITY_CODES"&&t.jsx(L,{}),r==="BRAND_CODES"&&t.jsx(Q,{}),r==="SHIPPING_METHODS"&&t.jsx(W,{}),r==="SHIPPING_ZONES"&&t.jsx(ee,{}),r==="ROLES"&&t.jsx(V,{})]})},H5={ar:{permissionCenter:" ",roles:"",permissions:"",permissionGroups:" ",customerVisibility:"  ",search:"...",addNew:" ",edit:"",delete:"",save:"",cancel:"",name:"",code:"",description:"",module:"",category:"",status:"",active:"",inactive:" ",system:"",custom:"",allow:"",deny:"",show:"",hide:"",restricted:"",assignPermissions:" ",selectedPermissions:" ",noResults:"  ",confirmDelete:"    ",cannotDeleteSystem:"    ",saving:" ...",loading:" ...",featureCode:" ",visibility:"",profileRequirement:"   ",reason:"",user:"",customer:"",allPermissions:" ",filterByModule:"  ",filterByCategory:"  ",nameAr:" ",managePermissions:"    ",usersCount:"",permissionsCount:"",permissionMatrix:" ",saveMatrix:" ",matrixUpdated:"   ",selectAll:" ",unselectAll:" ",features:"",featureFlags:" ",ownerType:" ",ownerId:" ",customerLabel:"",supplierLabel:"",selectOwner:" ",loadFeatures:" ",enabled:"",disabled:"",noFeaturesLoaded:"      ",saveFeatures:" ",featuresSaved:"   ",globalDefault:" "},en:{permissionCenter:"Permission Center",roles:"Roles",permissions:"Permissions",permissionGroups:"Permission Groups",customerVisibility:"Customer Feature Visibility",search:"Search...",addNew:"Add New",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",name:"Name",code:"Code",description:"Description",module:"Module",category:"Category",status:"Status",active:"Active",inactive:"Inactive",system:"System",custom:"Custom",allow:"Allow",deny:"Deny",show:"Show",hide:"Hide",restricted:"Restricted",assignPermissions:"Assign Permissions",selectedPermissions:"Selected Permissions",noResults:"No results found",confirmDelete:"Are you sure you want to delete?",cannotDeleteSystem:"Cannot delete system items",saving:"Saving...",loading:"Loading...",featureCode:"Feature Code",visibility:"Visibility",profileRequirement:"Profile Completion Required",reason:"Reason",user:"User",customer:"Customer",allPermissions:"All Permissions",filterByModule:"Filter by Module",filterByCategory:"Filter by Category",nameAr:"Arabic Name",managePermissions:"Manage roles, permissions, and permission groups",usersCount:"Users",permissionsCount:"Permissions",permissionMatrix:"Permission Matrix",saveMatrix:"Save Changes",matrixUpdated:"Matrix updated successfully",selectAll:"Select All",unselectAll:"Unselect All",features:"Features",featureFlags:"Feature Management",ownerType:"Owner Type",ownerId:"Owner ID",customerLabel:"Customer",supplierLabel:"Supplier",selectOwner:"Select Owner",loadFeatures:"Load Features",enabled:"Enabled",disabled:"Disabled",noFeaturesLoaded:"Select owner type and ID, then click Load",saveFeatures:"Save Features",featuresSaved:"Features saved successfully",globalDefault:"Global Default"},hi:{permissionCenter:" ",roles:"",permissions:"",permissionGroups:" ",customerVisibility:"  ",search:"...",addNew:" ",edit:" ",delete:"",save:"",cancel:" ",name:"",code:"",description:"",module:"",category:"",status:"",active:"",inactive:"",system:"",custom:"",allow:" ",deny:" ",show:"",hide:"",restricted:"",assignPermissions:"  ",selectedPermissions:" ",noResults:"  ",confirmDelete:"    ?",cannotDeleteSystem:"    ",saving:"  ...",loading:"   ...",featureCode:" ",visibility:"",profileRequirement:"  ",reason:"",user:"",customer:"",allPermissions:" ",filterByModule:"  ",filterByCategory:"  ",nameAr:" ",managePermissions:",     ",usersCount:"",permissionsCount:""},zh:{permissionCenter:"",roles:"",permissions:"",permissionGroups:"",customerVisibility:"",search:"...",addNew:"",edit:"",delete:"",save:"",cancel:"",name:"",code:"",description:"",module:"",category:"",status:"",active:"",inactive:"",system:"",custom:"",allow:"",deny:"",show:"",hide:"",restricted:"",assignPermissions:"",selectedPermissions:"",noResults:"",confirmDelete:"",cannotDeleteSystem:"",saving:"...",loading:"...",featureCode:"",visibility:"",profileRequirement:"",reason:"",user:"",customer:"",allPermissions:"",filterByModule:"",filterByCategory:"",nameAr:"",managePermissions:"",usersCount:"",permissionsCount:""}};function xme(){var Fi;const{i18n:e}=Jt(),{addToast:s}=Dt(),a=s,r=((Fi=e.language)==null?void 0:Fi.substring(0,2))||"ar",n=H5[r]||H5.ar,i=r==="ar",[l,o]=T.useState("roles"),[d,u]=T.useState(""),[h,f]=T.useState("all"),[x,g]=T.useState("all"),[v,b]=T.useState(!1),[y,j]=T.useState([]),[w,A]=T.useState([]),[O,C]=T.useState([]),[E,S]=T.useState([]),[D,M]=T.useState([]),[U,I]=T.useState({}),[k,z]=T.useState(!1),[_,q]=T.useState(null),[L,Q]=T.useState(null),[X,W]=T.useState(null),[ee,V]=T.useState(null),[P,Y]=T.useState(!1),[J,K]=T.useState(!1),[se,G]=T.useState(!1),[te,Z]=T.useState(!1),[ue,re]=T.useState(!1),[H,pe]=T.useState([]),[B,oe]=T.useState(!1),[fe,ne]=T.useState(!1),[de,we]=T.useState(!1),[Ue,qe]=T.useState(!1),[Ce,Le]=T.useState([]),[Se,_e]=T.useState(!1),[Ze,Mt]=T.useState({page:1,limit:20,total:0,totalPages:0}),[lt,yt]=T.useState(""),[wt,ke]=T.useState(""),[We,Ne]=T.useState(null),[at,dt]=T.useState(!1),[ie,rt]=T.useState([]),[it,vt]=T.useState(!1),[Ie,ct]=T.useState("CUSTOMER"),[gt,Ot]=T.useState(""),[Ls,La]=T.useState([]),[Yr,Ae]=T.useState(!1),[zt,es]=T.useState(!1),[xs,Ts]=T.useState(!1),Aa=T.useMemo(()=>{const be=new Set(w.map(De=>De.category).filter(Boolean));return Array.from(be)},[w]),tr=async()=>{var De;let be=localStorage.getItem("backend_token");if(be)return be;try{const Tt=await fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:"user-1",password:"1",loginType:"owner"})});if(Tt.ok){const ks=await Tt.json();if(ks.success&&((De=ks.data)!=null&&De.accessToken))return localStorage.setItem("backend_token",ks.data.accessToken),ks.data.accessToken}}catch(kt){console.error("Backend auth failed:",kt)}return null},sr=async()=>{b(!0);try{const be=await tr(),De={"Content-Type":"application/json"};be&&(De.Authorization=`Bearer ${be}`);const kt=await fetch("/api/v1/permission-center/roles-permissions",{headers:De});if(kt.ok){const Tt=await kt.json();if(Tt.success&&Tt.data){j(Tt.data.roles||[]),A(Tt.data.permissions||[]),I(Tt.data.matrix||{});const ks=[...new Set((Tt.data.permissions||[]).map(Fa=>Fa.module))];S(ks.map(Fa=>({moduleKey:Fa,moduleName:Fa,moduleNameAr:Fa})))}}else console.warn("Failed to fetch matrix, using empty data"),j([]),A([]),I({}),S([]);C([]),M([])}catch(be){console.error("Error fetching permission data:",be),a(i?"   ":"Error loading data","error")}finally{b(!1)}};T.useEffect(()=>{sr()},[]);const Xe=T.useMemo(()=>{if(!d)return y;const be=d.toLowerCase();return y.filter(De=>{var kt;return De.name.toLowerCase().includes(be)||De.code.toLowerCase().includes(be)||((kt=De.nameAr)==null?void 0:kt.includes(be))})},[y,d]),ce=T.useMemo(()=>{let be=w;if(d){const De=d.toLowerCase();be=be.filter(kt=>{var Tt;return kt.name.toLowerCase().includes(De)||kt.code.toLowerCase().includes(De)||((Tt=kt.nameAr)==null?void 0:Tt.includes(De))})}return h!=="all"&&(be=be.filter(De=>De.module===h)),x!=="all"&&(be=be.filter(De=>De.category===x)),be},[w,d,h,x]),ve=T.useMemo(()=>{if(!d)return O;const be=d.toLowerCase();return O.filter(De=>{var kt;return De.name.toLowerCase().includes(be)||De.code.toLowerCase().includes(be)||((kt=De.nameAr)==null?void 0:kt.includes(be))})},[O,d]),he=async()=>{if(_){oe(!0);try{const be=_.id?"PUT":"POST",De=_.id?`/api/v1/permissions/roles/${_.id}`:"/api/v1/permissions/roles";(await fetch(De,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok?(a(i?"  ":"Saved successfully","success"),Y(!1),q(null),sr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{oe(!1)}}},ge=async be=>{if(be.isSystem){a(n.cannotDeleteSystem,"error");return}if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/roles/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),sr())}catch{a(i?"  ":"Error deleting","error")}},ye=async()=>{if(L){ne(!0);try{const be=L.id?"PUT":"POST",De=L.id?`/api/v1/permissions/groups/${L.id}`:"/api/v1/permissions/groups";(await fetch(De,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).ok?(a(i?"  ":"Saved successfully","success"),K(!1),Q(null),sr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{ne(!1)}}},je=async be=>{if(be.isSystemDefault){a(n.cannotDeleteSystem,"error");return}if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/groups/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),sr())}catch{a(i?"  ":"Error deleting","error")}},Me=be=>{var De;Q(be),pe(((De=be.permissions)==null?void 0:De.map(kt=>kt.permission.id))||[]),re(!0)},Qe=be=>{pe(De=>De.includes(be)?De.filter(kt=>kt!==be):[...De,be])},Fe=async()=>{if(L!=null&&L.id)try{(await fetch(`/api/v1/permissions/groups/${L.id}/permissions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissionIds:H})})).ok&&(a(i?"  ":"Permissions assigned","success"),re(!1),sr())}catch{a(i?"  ":"Error assigning","error")}},$e=async()=>{if(X){we(!0);try{const be=X.id?"PUT":"POST",De=X.id?`/api/v1/permissions/permissions/${X.id}`:"/api/v1/permissions/permissions";(await fetch(De,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})).ok?(a(i?"  ":"Saved successfully","success"),G(!1),W(null),sr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{we(!1)}}},He=async be=>{if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/permissions/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),sr())}catch{a(i?"  ":"Error deleting","error")}},nt=async()=>{if(ee){qe(!0);try{const be=ee.id?"PUT":"POST",De=ee.id?`/api/v1/permissions/customer-visibility/${ee.id}`:"/api/v1/permissions/customer-visibility";(await fetch(De,{method:be,headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)})).ok?(a(i?"  ":"Saved successfully","success"),Z(!1),V(null),sr()):a(i?"  ":"Error saving","error")}catch{a(i?"  ":"Error saving","error")}finally{qe(!1)}}},ut=async be=>{if(confirm(n.confirmDelete))try{(await fetch(`/api/v1/permissions/customer-visibility/${be.id}`,{method:"DELETE"})).ok&&(a(i?" ":"Deleted","success"),sr())}catch{a(i?"  ":"Error deleting","error")}},bt=(be,De)=>{I(kt=>{const Tt=kt[be]||[];return Tt.includes(De)?{...kt,[be]:Tt.filter(ks=>ks!==De)}:{...kt,[be]:[...Tt,De]}})},ot=async be=>{z(!0);try{const De=localStorage.getItem("token"),kt={"Content-Type":"application/json"};De&&(kt.Authorization=`Bearer ${De}`);const Tt=await fetch(`/api/v1/permission-center/roles/${be}/permissions`,{method:"PUT",headers:kt,body:JSON.stringify({permissionIds:U[be]||[]})});if(Tt.ok)a(n.matrixUpdated||"   ","success");else{const ks=await Tt.json();a(ks.error||(i?"  ":"Error saving"),"error")}}catch{a(i?"  ":"Error saving","error")}finally{z(!1)}},xt=async(be=1)=>{_e(!0);try{const De=await tr(),kt={"Content-Type":"application/json"};De&&(kt.Authorization=`Bearer ${De}`);const Tt=new URLSearchParams({page:be.toString(),limit:Ze.limit.toString(),...lt&&{search:lt},...wt&&{role:wt}}),ks=await fetch(`/api/v1/permission-center/users?${Tt}`,{headers:kt});if(ks.ok){const Fa=await ks.json();Fa.success&&(Le(Fa.data.users),Mt(Fa.data.pagination))}}catch(De){console.error("Error fetching users:",De)}finally{_e(!1)}},At=async be=>{try{const De=await tr(),kt={"Content-Type":"application/json"};De&&(kt.Authorization=`Bearer ${De}`);const Tt=await fetch(`/api/v1/permission-center/users/${be}`,{headers:kt});if(Tt.ok){const ks=await Tt.json();if(ks.success){Ne(ks.data);const Fa=w.map(Xr=>{const j0=ks.data.overrides.find(Pb=>Pb.permissionCode===Xr.code);return{permissionCode:Xr.code,effect:j0?j0.effect:"INHERIT"}});rt(Fa),dt(!0)}}}catch(De){console.error("Error fetching user details:",De)}},ta=async()=>{if(We){vt(!0);try{const be=await tr(),De={"Content-Type":"application/json"};be&&(De.Authorization=`Bearer ${be}`);const kt=ie.filter(ks=>ks.effect!=="INHERIT").map(ks=>({permissionCode:ks.permissionCode,effect:ks.effect})),Tt=await fetch(`/api/v1/permission-center/users/${We.user.id}/overrides`,{method:"PUT",headers:De,body:JSON.stringify({overrides:kt})});if(Tt.ok)a(i?"   ":"Overrides saved successfully","success"),await At(We.user.id);else{const ks=await Tt.json();a(ks.error||(i?"  ":"Error saving"),"error")}}catch{a(i?"  ":"Error saving","error")}finally{vt(!1)}}},$s=(be,De)=>{rt(kt=>kt.map(Tt=>Tt.permissionCode===be?{...Tt,effect:De}:Tt))};T.useEffect(()=>{l==="users"&&xt()},[l,lt,wt]);const _s=be=>`flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${l===be?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,Nr="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4";return t.jsxs("div",{className:`min-h-screen p-6 space-y-6 ${i?"rtl":"ltr"}`,dir:i?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-xl",children:t.jsx(Ds,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.permissionCenter}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:n.managePermissions})]})]}),t.jsxs("button",{onClick:sr,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-refresh",children:[t.jsx(Qt,{className:`h-4 w-4 ${v?"animate-spin":""}`}),t.jsx("span",{className:"hidden sm:inline",children:v?n.loading:"Refresh"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("button",{className:_s("roles"),onClick:()=>o("roles"),"data-testid":"tab-roles",children:[t.jsx(Ds,{className:"h-4 w-4"}),n.roles]}),t.jsxs("button",{className:_s("permissions"),onClick:()=>o("permissions"),"data-testid":"tab-permissions",children:[t.jsx(Vc,{className:"h-4 w-4"}),n.permissions]}),t.jsxs("button",{className:_s("groups"),onClick:()=>o("groups"),"data-testid":"tab-groups",children:[t.jsx(Pr,{className:"h-4 w-4"}),n.permissionGroups]}),t.jsxs("button",{className:_s("visibility"),onClick:()=>o("visibility"),"data-testid":"tab-visibility",children:[t.jsx(fs,{className:"h-4 w-4"}),n.customerVisibility]}),t.jsxs("button",{className:_s("matrix"),onClick:()=>o("matrix"),"data-testid":"tab-matrix",children:[t.jsx(la,{className:"h-4 w-4"}),n.permissionMatrix||" "]}),t.jsxs("button",{className:_s("users"),onClick:()=>o("users"),"data-testid":"tab-users",children:[t.jsx(f0,{className:"h-4 w-4"}),i?" ":"Users & Overrides"]}),t.jsxs("button",{className:_s("features"),onClick:()=>o("features"),"data-testid":"tab-features",children:[t.jsx(Jm,{className:"h-4 w-4"}),n.features]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[t.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:n.search,value:d,onChange:be=>u(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent","data-testid":"input-search"})]}),l==="permissions"&&t.jsxs(t.Fragment,{children:[t.jsxs("select",{value:h,onChange:be=>f(be.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-module-filter",children:[t.jsx("option",{value:"all",children:n.allPermissions}),E.map(be=>t.jsx("option",{value:be.moduleKey,children:i?be.moduleNameAr:be.moduleName},be.moduleKey))]}),t.jsxs("select",{value:x,onChange:be=>g(be.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-category-filter",children:[t.jsx("option",{value:"all",children:n.allPermissions}),Aa.map(be=>t.jsx("option",{value:be,children:be},be))]})]}),(l==="roles"||l==="groups"||l==="permissions"||l==="visibility")&&t.jsxs("button",{onClick:()=>{l==="roles"?(q({code:"",name:"",isSystem:!1,isActive:!0,sortOrder:0}),Y(!0)):l==="groups"?(Q({code:"",name:"",isSystemDefault:!1,isActive:!0,permissions:[]}),K(!0)):l==="permissions"?(W({code:"",name:"",module:"",isActive:!0}),G(!0)):l==="visibility"&&(V({customerId:"",featureCode:"",visibility:"SHOW"}),Z(!0))},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors","data-testid":"button-add-new",children:[t.jsx(Pt,{className:"h-4 w-4"}),n.addNew]})]}),v?t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx(Qt,{className:"h-8 w-8 animate-spin text-blue-600"}),t.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:n.loading})]}):t.jsxs(t.Fragment,{children:[l==="roles"&&t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[Xe.map(be=>t.jsxs("div",{className:Nr,"data-testid":`card-role-${be.id}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ds,{className:"h-5 w-5 text-blue-600"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:i&&be.nameAr||be.name})]}),t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isSystem?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:be.isSystem?n.system:n.custom})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono mb-2",children:be.code}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:be.description||"-"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?n.active:n.inactive}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{q(be),Y(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-role-${be.id}`,children:t.jsx(Pa,{className:"h-4 w-4"})}),!be.isSystem&&t.jsx("button",{onClick:()=>ge(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-role-${be.id}`,children:t.jsx(Ct,{className:"h-4 w-4"})})]})]})]},be.id)),Xe.length===0&&t.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:n.noResults})]}),l==="permissions"&&t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.code}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.name}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.module}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.category}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.status}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ce.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-permission-${be.id}`,children:[t.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:be.code}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:i&&be.nameAr||be.name}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:be.module})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",children:be.category||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?n.active:n.inactive})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{W(be),G(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-permission-${be.id}`,children:t.jsx(Pa,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>He(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-permission-${be.id}`,children:t.jsx(Ct,{className:"h-4 w-4"})})]})})]},be.id))})]}),ce.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults})]}),l==="groups"&&t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[ve.map(be=>{var De,kt;return t.jsxs("div",{className:Nr,"data-testid":`card-group-${be.id}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pr,{className:"h-5 w-5 text-purple-600"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:i&&be.nameAr||be.name})]}),be.isSystemDefault&&t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",children:n.system})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono mb-2",children:be.code}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:be.description||"-"}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-4",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Vc,{className:"h-3 w-3"}),((De=be.permissions)==null?void 0:De.length)||0," ",n.permissionsCount]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gt,{className:"h-3 w-3"}),((kt=be._count)==null?void 0:kt.users)||0," ",n.usersCount]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?n.active:n.inactive}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>Me(be),className:"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/50 rounded-lg transition-colors",title:n.assignPermissions,"data-testid":`button-assign-permissions-${be.id}`,children:t.jsx(Vc,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>{Q(be),K(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-group-${be.id}`,children:t.jsx(Pa,{className:"h-4 w-4"})}),!be.isSystemDefault&&t.jsx("button",{onClick:()=>je(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-group-${be.id}`,children:t.jsx(Ct,{className:"h-4 w-4"})})]})]})]},be.id)}),ve.length===0&&t.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:n.noResults})]}),l==="visibility"&&t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.customer}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.featureCode}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.visibility}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.profileRequirement}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:n.reason}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:D.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-visibility-${be.id}`,children:[t.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:be.customerId}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:be.featureCode}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.visibility==="SHOW"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":be.visibility==="HIDE"?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300"}`,children:be.visibility==="SHOW"?n.show:be.visibility==="HIDE"?n.hide:n.restricted})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:be.conditionProfilePercent?`${be.conditionProfilePercent}%`:"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:be.reason||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{V(be),Z(!0)},className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/50 rounded-lg transition-colors","data-testid":`button-edit-visibility-${be.id}`,children:t.jsx(Pa,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ut(be),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors","data-testid":`button-delete-visibility-${be.id}`,children:t.jsx(Ct,{className:"h-4 w-4"})})]})})]},be.id))})]}),D.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults})]}),l==="matrix"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-collapse min-w-[800px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300 sticky left-0 bg-gray-50 dark:bg-gray-700 z-10",children:n.permissions}),y.map(be=>t.jsx("th",{className:"px-3 py-3 text-center text-sm font-medium text-gray-700 dark:text-gray-300 min-w-[120px]",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("span",{children:i&&be.nameAr||be.name}),be.isSystem&&t.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300 rounded",children:n.system})]})},be.id))]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-matrix-${be.id}`,children:[t.jsx("td",{className:"px-4 py-2 text-sm sticky left-0 bg-white dark:bg-gray-800 z-10",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i&&be.nameAr||be.name}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:be.code})]})}),y.map(De=>{const kt=(U[De.id]||[]).includes(be.id),Tt=De.code==="SUPER_ADMIN";return t.jsx("td",{className:"px-3 py-2 text-center",children:t.jsx("button",{onClick:()=>!Tt&&bt(De.id,be.id),disabled:Tt,className:`p-2 rounded-lg transition-colors ${Tt?"opacity-50 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-600"}`,"data-testid":`toggle-${De.id}-${be.id}`,children:kt?t.jsx(Zt,{className:"h-5 w-5 text-green-600"}):t.jsx(St,{className:"h-5 w-5 text-gray-300 dark:text-gray-600"})})},De.id)})]},be.id))})]})}),t.jsx("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:y.filter(be=>be.code!=="SUPER_ADMIN").map(be=>t.jsxs("button",{onClick:()=>ot(be.id),disabled:k,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-wait transition-colors","data-testid":`button-save-role-${be.id}`,children:[t.jsx(ds,{className:"h-4 w-4"}),k?n.saving:`${n.save} - ${i&&be.nameAr||be.name}`]},be.id))}),w.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults})]}),l==="users"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[t.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[t.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:i?"  ...":"Search users...",value:lt,onChange:be=>yt(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500","data-testid":"input-users-search"})]}),t.jsxs("select",{value:wt,onChange:be=>ke(be.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-users-role-filter",children:[t.jsx("option",{value:"",children:i?" ":"All Roles"}),y.map(be=>t.jsx("option",{value:be.code,children:i&&be.nameAr||be.name},be.code))]})]}),Se?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx(Qt,{className:"h-6 w-6 animate-spin text-blue-600"}),t.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:n.loading})]}):t.jsxs("div",{className:Nr,children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?"":"User"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?" ":"Primary Role"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:i?"":"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:Ce.map(be=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50","data-testid":`row-user-${be.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:be.name}),t.jsx("span",{className:"text-xs text-gray-500",children:be.email||be.clientId})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:be.primaryRole})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${be.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:be.isActive?i?"":"Active":i?" ":"Inactive"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("button",{onClick:()=>At(be.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors","data-testid":`button-edit-overrides-${be.id}`,children:[t.jsx(la,{className:"h-4 w-4"}),i?" ":"Manage Overrides"]})})]},be.id))})]})}),Ce.length===0&&t.jsx("div",{className:"text-center py-12 text-gray-500",children:n.noResults}),Ze.totalPages>1&&t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700 mt-4",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:i?` ${Ze.page}  ${Ze.totalPages}`:`Page ${Ze.page} of ${Ze.totalPages}`}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>xt(Ze.page-1),disabled:Ze.page<=1,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700","data-testid":"button-prev-page",children:i?"":"Prev"}),t.jsx("button",{onClick:()=>xt(Ze.page+1),disabled:Ze.page>=Ze.totalPages,className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700","data-testid":"button-next-page",children:i?"":"Next"})]})]})]})]}),l==="features"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:Nr,children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(Jm,{className:"h-5 w-5 text-blue-600"}),n.featureFlags]}),t.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-6",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.ownerType}),t.jsxs("select",{value:Ie,onChange:be=>{ct(be.target.value),Ts(!1),La([])},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-feature-owner-type",children:[t.jsx("option",{value:"CUSTOMER",children:n.customerLabel}),t.jsx("option",{value:"SUPPLIER",children:n.supplierLabel})]})]}),t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.ownerId}),t.jsx("input",{type:"text",value:gt,onChange:be=>{Ot(be.target.value),Ts(!1)},placeholder:i?"  ...":"Enter owner ID...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-feature-owner-id"})]}),t.jsxs("button",{onClick:async()=>{if(!gt.trim()){a(i?"   ":"Please enter owner ID","error");return}Ae(!0);try{const be=await tr(),De={"Content-Type":"application/json"};be&&(De.Authorization=`Bearer ${be}`);const Tt=await(await fetch(`/api/v1/permission-center/features/access?ownerType=${Ie}&ownerId=${gt}`,{headers:De})).json();Tt.success?(La(Tt.data.features||[]),Ts(!0)):a(Tt.error||"Failed to load features","error")}catch(be){console.error("Error loading features:",be),a(i?"  ":"Failed to load features","error")}Ae(!1)},disabled:Yr||!gt.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2","data-testid":"button-load-features",children:[Yr&&t.jsx(Qt,{className:"h-4 w-4 animate-spin"}),n.loadFeatures]})]}),xs?t.jsxs("div",{className:"space-y-3",children:[Ls.map(be=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg","data-testid":`feature-row-${be.featureCode}`,children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:i&&be.featureNameAr||be.featureName}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:be.description}),t.jsx("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:be.featureCode})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${be.globalEnabled?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-gray-100 text-gray-600 dark:bg-gray-600 dark:text-gray-300"}`,children:[n.globalDefault,": ",be.globalEnabled?n.enabled:n.disabled]}),t.jsx("button",{onClick:()=>{La(De=>De.map(kt=>kt.featureCode===be.featureCode?{...kt,isEnabled:!kt.isEnabled}:kt))},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${be.isEnabled?"bg-green-600":"bg-gray-300 dark:bg-gray-600"}`,"data-testid":`toggle-feature-${be.featureCode}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${be.isEnabled?i?"translate-x-1":"translate-x-6":i?"translate-x-6":"translate-x-1"}`})})]})]},be.featureCode)),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsxs("button",{onClick:async()=>{es(!0);try{const be=await tr(),De={"Content-Type":"application/json"};be&&(De.Authorization=`Bearer ${be}`);const Tt=await(await fetch("/api/v1/permission-center/features/access",{method:"PUT",headers:De,body:JSON.stringify({ownerType:Ie,ownerId:gt,features:Ls.map(ks=>({featureCode:ks.featureCode,isEnabled:ks.isEnabled}))})})).json();Tt.success?a(n.featuresSaved,"success"):a(Tt.error||"Failed to save features","error")}catch(be){console.error("Error saving features:",be),a(i?"  ":"Failed to save features","error")}es(!1)},disabled:zt,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center gap-2","data-testid":"button-save-features",children:[zt?t.jsx(Qt,{className:"h-4 w-4 animate-spin"}):t.jsx(ds,{className:"h-4 w-4"}),n.saveFeatures]})})]}):t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx(Jm,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),t.jsx("p",{children:n.noFeaturesLoaded})]})]})})]}),at&&We&&t.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>dt(!1)}),t.jsxs("div",{className:`absolute ${i?"left-0":"right-0"} top-0 h-full w-full max-w-2xl bg-white dark:bg-gray-800 shadow-xl overflow-hidden flex flex-col`,children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:i?" ":"Permission Overrides"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[We.user.name," (",We.user.clientId,")"]})]}),t.jsx("button",{onClick:()=>dt(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","data-testid":"button-close-drawer",children:t.jsx(St,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:i?" ":"Assigned Roles"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:We.roles.map(be=>t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-sm",children:be},be))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:i?" ":"Permission Overrides"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:i?' ""    ""   ""   ':'Select "Allow" to grant, "Deny" to block, or "Inherit" to use role permissions'}),t.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:ie.map(be=>{const De=w.find(Tt=>Tt.code===be.permissionCode);if(!De)return null;const kt=We.rolePermissions.some(Tt=>Tt.code===De.code);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg","data-testid":`override-row-${De.code}`,children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i&&De.nameAr||De.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx("span",{className:"text-xs text-gray-500",children:De.code}),kt&&t.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 rounded",children:i?" ":"From Role"})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>$s(De.code,"ALLOW"),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${be.effect==="ALLOW"?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/50"}`,"data-testid":`btn-allow-${De.code}`,children:n.allow}),t.jsx("button",{onClick:()=>$s(De.code,"DENY"),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${be.effect==="DENY"?"bg-red-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-900/50"}`,"data-testid":`btn-deny-${De.code}`,children:n.deny}),t.jsx("button",{onClick:()=>$s(De.code,"INHERIT"),className:`px-3 py-1.5 text-xs rounded-lg transition-colors ${be.effect==="INHERIT"?"bg-gray-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`,"data-testid":`btn-inherit-${De.code}`,children:i?"":"Inherit"})]})]},De.code)})})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-lg p-4",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:i?" ":"Effective Permissions"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[We.effectivePermissions.map(be=>t.jsx("span",{className:"px-2 py-1 text-xs bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-600",children:be.code},be.code)),We.effectivePermissions.length===0&&t.jsx("span",{className:"text-sm text-gray-500",children:i?"   ":"No effective permissions"})]})]})]}),t.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>dt(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-overrides",children:n.cancel}),t.jsx("button",{onClick:ta,disabled:it,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors","data-testid":"button-save-overrides",children:it?n.saving:n.save})]})})]})]}),t.jsxs(ls,{isOpen:P,onClose:()=>{Y(!1),q(null)},title:_!=null&&_.id?`${n.edit} ${n.roles}`:`${n.addNew} ${n.roles}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.code}),t.jsx("input",{type:"text",value:(_==null?void 0:_.code)||"",onChange:be=>q(De=>De?{...De,code:be.target.value}:null),disabled:!!(_!=null&&_.id),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:opacity-50","data-testid":"input-role-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.name}),t.jsx("input",{type:"text",value:(_==null?void 0:_.name)||"",onChange:be=>q(De=>De?{...De,name:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-role-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.nameAr}),t.jsx("input",{type:"text",value:(_==null?void 0:_.nameAr)||"",onChange:be=>q(De=>De?{...De,nameAr:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-role-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.description}),t.jsx("input",{type:"text",value:(_==null?void 0:_.description)||"",onChange:be=>q(De=>De?{...De,description:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-role-description"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"role-active",checked:(_==null?void 0:_.isActive)??!0,onChange:be=>q(De=>De?{...De,isActive:be.target.checked}:null),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":"checkbox-role-active"}),t.jsx("label",{htmlFor:"role-active",className:"text-sm text-gray-700 dark:text-gray-300",children:n.active})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{Y(!1),q(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-role",children:n.cancel}),t.jsx("button",{onClick:he,disabled:B,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-role",children:B?n.saving:n.save})]})]}),t.jsxs(ls,{isOpen:J,onClose:()=>{K(!1),Q(null)},title:L!=null&&L.id?`${n.edit} ${n.permissionGroups}`:`${n.addNew} ${n.permissionGroups}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.code}),t.jsx("input",{type:"text",value:(L==null?void 0:L.code)||"",onChange:be=>Q(De=>De?{...De,code:be.target.value}:null),disabled:!!(L!=null&&L.id),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:opacity-50","data-testid":"input-group-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.name}),t.jsx("input",{type:"text",value:(L==null?void 0:L.name)||"",onChange:be=>Q(De=>De?{...De,name:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-group-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.nameAr}),t.jsx("input",{type:"text",value:(L==null?void 0:L.nameAr)||"",onChange:be=>Q(De=>De?{...De,nameAr:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-group-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.description}),t.jsx("input",{type:"text",value:(L==null?void 0:L.description)||"",onChange:be=>Q(De=>De?{...De,description:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-group-description"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{K(!1),Q(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-group",children:n.cancel}),t.jsx("button",{onClick:ye,disabled:fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-group",children:fe?n.saving:n.save})]})]}),t.jsxs(ls,{isOpen:ue,onClose:()=>{re(!1),Q(null)},title:`${n.assignPermissions} - ${i&&(L==null?void 0:L.nameAr)||(L==null?void 0:L.name)}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:n.search,value:d,onChange:be=>u(be.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:ce.map(be=>t.jsxs("div",{className:"flex items-center gap-3 p-3 border-b last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>Qe(be.id),children:[t.jsx("input",{type:"checkbox",checked:H.includes(be.id),onChange:()=>Qe(be.id),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i&&be.nameAr||be.name}),t.jsx("p",{className:"text-xs text-gray-500 font-mono",children:be.code})]}),t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",children:be.module})]},be.id))}),t.jsxs("p",{className:"text-sm text-gray-500",children:[n.selectedPermissions,": ",H.length]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{re(!1),Q(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:n.cancel}),t.jsx("button",{onClick:Fe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n.save})]})]}),t.jsxs(ls,{isOpen:se,onClose:()=>{G(!1),W(null)},title:X!=null&&X.id?`${n.edit} ${n.permissions}`:`${n.addNew} ${n.permissions}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.code}),t.jsx("input",{type:"text",value:(X==null?void 0:X.code)||"",onChange:be=>W(De=>De?{...De,code:be.target.value}:null),disabled:!!(X!=null&&X.id),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white disabled:opacity-50","data-testid":"input-permission-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.name}),t.jsx("input",{type:"text",value:(X==null?void 0:X.name)||"",onChange:be=>W(De=>De?{...De,name:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-permission-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.nameAr}),t.jsx("input",{type:"text",value:(X==null?void 0:X.nameAr)||"",onChange:be=>W(De=>De?{...De,nameAr:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-permission-name-ar"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.module}),t.jsxs("select",{value:(X==null?void 0:X.module)||"",onChange:be=>W(De=>De?{...De,module:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-permission-module",children:[t.jsx("option",{value:"",children:i?" ":"Select Module"}),E.map(be=>t.jsx("option",{value:be.moduleKey,children:i?be.moduleNameAr:be.moduleName},be.moduleKey))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.category}),t.jsx("input",{type:"text",value:(X==null?void 0:X.category)||"",onChange:be=>W(De=>De?{...De,category:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-permission-category"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"permission-active",checked:(X==null?void 0:X.isActive)??!0,onChange:be=>W(De=>De?{...De,isActive:be.target.checked}:null),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500","data-testid":"checkbox-permission-active"}),t.jsx("label",{htmlFor:"permission-active",className:"text-sm text-gray-700 dark:text-gray-300",children:n.active})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{G(!1),W(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-permission",children:n.cancel}),t.jsx("button",{onClick:$e,disabled:de,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-permission",children:de?n.saving:n.save})]})]}),t.jsxs(ls,{isOpen:te,onClose:()=>{Z(!1),V(null)},title:ee!=null&&ee.id?`${n.edit} ${n.customerVisibility}`:`${n.addNew} ${n.customerVisibility}`,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.customer," ID"]}),t.jsx("input",{type:"text",value:(ee==null?void 0:ee.customerId)||"",onChange:be=>V(De=>De?{...De,customerId:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-customer-id"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.featureCode}),t.jsx("input",{type:"text",value:(ee==null?void 0:ee.featureCode)||"",onChange:be=>V(De=>De?{...De,featureCode:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-feature-code"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.visibility}),t.jsxs("select",{value:(ee==null?void 0:ee.visibility)||"SHOW",onChange:be=>V(De=>De?{...De,visibility:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-visibility-type",children:[t.jsx("option",{value:"SHOW",children:n.show}),t.jsx("option",{value:"HIDE",children:n.hide}),t.jsx("option",{value:"RESTRICTED",children:n.restricted})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[n.profileRequirement," (%)"]}),t.jsx("input",{type:"number",min:"0",max:"100",value:(ee==null?void 0:ee.conditionProfilePercent)||"",onChange:be=>V(De=>De?{...De,conditionProfilePercent:be.target.value?parseInt(be.target.value):void 0}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-profile-percent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n.reason}),t.jsx("input",{type:"text",value:(ee==null?void 0:ee.reason)||"",onChange:be=>V(De=>De?{...De,reason:be.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-visibility-reason"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{onClick:()=>{Z(!1),V(null)},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","data-testid":"button-cancel-visibility",children:n.cancel}),t.jsx("button",{onClick:nt,disabled:Ue,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50","data-testid":"button-save-visibility",children:Ue?n.saving:n.save})]})]})]})}const Zx="/api/v1",ep=()=>{const e=localStorage.getItem("siniCar_auth_token");return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}},pme=()=>{const{language:e}=Bs(),{addToast:s}=Dt(),a=e==="ar",[r,n]=T.useState([]),[i,l]=T.useState(null),[o,d]=T.useState(null),[u,h]=T.useState(null),[f,x]=T.useState(!0),[g,v]=T.useState(!1),[b,y]=T.useState(!1),[j,w]=T.useState(!1),[A,O]=T.useState({dateFrom:"",dateTo:"",status:"",category:"",customerId:"",productId:"",page:"1"}),[C,E]=T.useState(1);T.useEffect(()=>{S()},[]);const S=async()=>{x(!0);try{const V=await fetch(`${Zx}/reports/definitions`,{headers:ep()});if(!V.ok)throw new Error("Failed to load reports");const P=await V.json();P.success&&n(P.data)}catch{s(a?"   ":"Failed to load reports","error")}finally{x(!1)}},D=async()=>{if(i){v(!0),d(null),h(null);try{const V=await fetch(`${Zx}/reports/${i.code}/run`,{method:"POST",headers:ep(),body:JSON.stringify({filters:A})});if(!V.ok){const Y=await V.json();throw new Error(Y.error||"Failed to run report")}const P=await V.json();P.success&&(d(P.data),s(a?"   ":"Report executed successfully","success"))}catch(V){s(V.message||(a?"   ":"Failed to run report"),"error")}finally{v(!1)}}},M=async V=>{if(i){y(!0);try{const P=await fetch(`${Zx}/reports/${i.code}/analyze`,{method:"POST",headers:ep(),body:JSON.stringify({filters:A,mode:V})});if(!P.ok){const J=await P.json();throw new Error(J.error||"Failed to analyze report")}const Y=await P.json();Y.success&&(h(Y.data),s(Y.data.cached?a?"     ":"Analysis retrieved from cache":a?"  ":"Analysis completed","success"))}catch(P){s(P.message||(a?"   ":"Failed to analyze report"),"error")}finally{y(!1)}}},U=V=>a?V.nameAr||V.name:V.nameEn||V.name,I=V=>a?V.descriptionAr||V.description:V.descriptionEn||V.description,k=V=>{var Y;return((Y={SALES:{ar:"",en:"Sales"},OPERATIONS:{ar:"",en:"Operations"},FINANCE:{ar:"",en:"Finance"},ANALYTICS:{ar:"",en:"Analytics"},AUDIT:{ar:"",en:"Audit"},GENERAL:{ar:"",en:"General"}}[V])==null?void 0:Y[a?"ar":"en"])||V},z=V=>({SALES:"bg-green-100 text-green-800",OPERATIONS:"bg-blue-100 text-blue-800",FINANCE:"bg-purple-100 text-purple-800",ANALYTICS:"bg-orange-100 text-orange-800",AUDIT:"bg-red-100 text-red-800",GENERAL:"bg-gray-100 text-gray-800"})[V]||"bg-gray-100 text-gray-800",_=V=>t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(V).map(([P,Y])=>t.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[t.jsx("div",{className:"text-sm text-gray-500 mb-1",children:P.replace(/([A-Z])/g," $1").trim()}),t.jsx("div",{className:"text-xl font-bold text-gray-900",children:typeof Y=="number"?Y.toLocaleString():String(Y)})]},P))}),q=V=>{if(V.length===0)return null;const P=Object.keys(V[0]);return t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:P.map(Y=>t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:Y.replace(/([A-Z])/g," $1").trim()},Y))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.slice(0,10).map((Y,J)=>t.jsx("tr",{className:"hover:bg-gray-50",children:P.map(K=>t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:typeof Y[K]=="number"?Y[K].toLocaleString():String(Y[K]??"-")},K))},J))})]}),V.length>10&&t.jsx("div",{className:"text-center py-2 text-sm text-gray-500",children:a?`  ${V.length-10} ...`:`And ${V.length-10} more rows...`})]})},L=V=>({NEW:"bg-blue-100 text-blue-800",PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",COMPLETED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",CANCELLED:"bg-gray-100 text-gray-800"})[V]||"bg-gray-100 text-gray-800",Q=V=>{var Y;return((Y={NEW:{ar:"",en:"New"},PENDING:{ar:"",en:"Pending"},APPROVED:{ar:" ",en:"Approved"},COMPLETED:{ar:"",en:"Completed"},REJECTED:{ar:"",en:"Rejected"},CANCELLED:{ar:"",en:"Cancelled"}}[V])==null?void 0:Y[a?"ar":"en"])||V},X=async V=>{if(i){E(V),v(!0);try{const P=await fetch(`${Zx}/reports/${i.code}/run`,{method:"POST",headers:ep(),body:JSON.stringify({filters:{...A,page:String(V)}})});if(!P.ok){const J=await P.json();throw new Error(J.error||"Failed to run report")}const Y=await P.json();Y.success&&d(Y.data)}catch(P){s(P.message||(a?"   ":"Failed to load page"),"error")}finally{v(!1)}}},W=V=>{const{summary:P,byStatus:Y,byCustomer:J,rows:K,pagination:se}=V,G=Math.max(...Y.map(te=>te.count),1);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4","data-testid":"quotes-overview-summary",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Lt,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-sm text-blue-700",children:a?" ":"Total Quotes"})]}),t.jsx("div",{className:"text-2xl font-bold text-blue-900","data-testid":"text-total-quotes",children:P.totalQuotes.toLocaleString()})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Fn,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-green-700",children:a?" ":"Approved"})]}),t.jsx("div",{className:"text-2xl font-bold text-green-900","data-testid":"text-total-approved",children:P.totalApproved.toLocaleString()})]}),t.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Zs,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"text-sm text-red-700",children:a?"":"Rejected"})]}),t.jsx("div",{className:"text-2xl font-bold text-red-900","data-testid":"text-total-rejected",children:P.totalRejected.toLocaleString()})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(ma,{className:"w-5 h-5 text-yellow-600"}),t.jsx("span",{className:"text-sm text-yellow-700",children:a?"":"Pending"})]}),t.jsx("div",{className:"text-2xl font-bold text-yellow-900","data-testid":"text-total-pending",children:P.totalPending.toLocaleString()})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(or,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-sm text-purple-700",children:a?" ":"Approved Amount"})]}),t.jsxs("div",{className:"text-2xl font-bold text-purple-900","data-testid":"text-total-amount",children:[P.totalAmountApproved.toLocaleString()," ",t.jsx("span",{className:"text-sm font-normal",children:"SAR"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(gi,{size:16}),a?" ":"Status Distribution"]}),t.jsx("div",{className:"space-y-3","data-testid":"quotes-by-status",children:Y.map((te,Z)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-xs px-2 py-1 rounded-full min-w-[80px] text-center ${L(te.status)}`,children:Q(te.status)}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4 overflow-hidden",children:t.jsx("div",{className:"bg-blue-600 h-full rounded-full transition-all",style:{width:`${te.count/G*100}%`}})}),t.jsx("span",{className:"text-sm font-medium text-gray-700 min-w-[40px] text-right",children:te.count})]},Z))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(Gt,{size:16}),a?" ":"Top Customers"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"quotes-by-customer",children:J.length>0?J.map((te,Z)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.customerName}),t.jsxs("div",{className:"text-xs text-gray-500",children:[te.count," ",a?"":"quotes"]})]}),t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[te.totalAmount.toLocaleString()," SAR"]})]},Z)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:a?" ":"Quote List"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200","data-testid":"quotes-rows-table",children:[t.jsx("thead",{className:"bg-white",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Number"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Customer"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Amount"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.length>0?K.map((te,Z)=>t.jsxs("tr",{className:"hover:bg-gray-50","data-testid":`quote-row-${Z}`,children:[t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-blue-600",children:["#",te.number]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:te.customerName}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${L(te.status)}`,children:Q(te.status)})}),t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:[te.amount.toLocaleString()," SAR"]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(te.createdAt).toLocaleDateString(a?"ar-SA":"en-US")})]},te.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:a?"  ":"No quotes found"})})})]})}),se&&se.totalPages>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[t.jsx("div",{className:"text-sm text-gray-500",children:a?` ${se.page}  ${se.totalPages} (${se.totalCount} )`:`Page ${se.page} of ${se.totalPages} (${se.totalCount} quotes)`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>X(se.page-1),disabled:se.page<=1||g,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-prev-page",children:a?t.jsx(vs,{size:16}):t.jsx(ws,{size:16})}),t.jsx("span",{className:"px-3 py-1 text-sm font-medium text-gray-700",children:se.page}),t.jsx("button",{onClick:()=>X(se.page+1),disabled:se.page>=se.totalPages||g,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-next-page",children:a?t.jsx(ws,{size:16}):t.jsx(vs,{size:16})})]})]})]})]})},ee=V=>{const{totals:P,byCustomer:Y,byProduct:J,byDay:K,rows:se,pagination:G}=V,te=Math.max(...K.map(Z=>Z.totalAmount),1);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-testid":"sales-summary-totals",children:[t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(or,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-green-700",children:a?" ":"Total Sales"})]}),t.jsxs("div",{className:"text-2xl font-bold text-green-900","data-testid":"text-total-sales",children:[P.totalSalesAmount.toLocaleString()," ",t.jsx("span",{className:"text-sm font-normal",children:"SAR"})]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Lt,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{className:"text-sm text-blue-700",children:a?" ":"Total Invoices"})]}),t.jsx("div",{className:"text-2xl font-bold text-blue-900","data-testid":"text-total-invoices",children:P.totalInvoices.toLocaleString()})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(gi,{className:"w-5 h-5 text-purple-600"}),t.jsx("span",{className:"text-sm text-purple-700",children:a?"  ":"Avg Invoice Value"})]}),t.jsxs("div",{className:"text-2xl font-bold text-purple-900","data-testid":"text-avg-invoice",children:[P.avgInvoiceValue.toLocaleString()," ",t.jsx("span",{className:"text-sm font-normal",children:"SAR"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(fh,{size:16}),a?" ":"Daily Sales"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"sales-by-day",children:K.length>0?K.slice(-14).map((Z,ue)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xs text-gray-600 min-w-[80px]",children:new Date(Z.date).toLocaleDateString(a?"ar-SA":"en-US",{month:"short",day:"numeric"})}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4 overflow-hidden",children:t.jsx("div",{className:"bg-green-500 h-full rounded-full transition-all",style:{width:`${Z.totalAmount/te*100}%`}})}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 min-w-[80px] text-right",children:[Z.totalAmount.toLocaleString()," SAR"]})]},ue)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(Gt,{size:16}),a?" ":"Top Customers"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"sales-by-customer",children:Y.length>0?Y.map((Z,ue)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.customerName}),t.jsxs("div",{className:"text-xs text-gray-500",children:[Z.count," ",a?"":"orders"]})]}),t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[Z.totalAmount.toLocaleString()," SAR"]})]},ue)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[t.jsx(Xt,{size:16}),a?" ":"Top Products"]}),t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto","data-testid":"sales-by-product",children:J.length>0?J.map((Z,ue)=>t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.productName}),t.jsxs("div",{className:"text-xs text-gray-500",children:[Z.qty," ",a?"":"units"]})]}),t.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[Z.totalAmount.toLocaleString()," SAR"]})]},ue)):t.jsx("div",{className:"text-center text-gray-500 py-4",children:a?"  ":"No data"})})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:a?" ":"Orders List"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200","data-testid":"sales-rows-table",children:[t.jsx("thead",{className:"bg-white",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Number"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Customer"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Amount"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:a?"":"Date"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.length>0?se.map((Z,ue)=>t.jsxs("tr",{className:"hover:bg-gray-50","data-testid":`sales-row-${ue}`,children:[t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-blue-600",children:["#",Z.number]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:Z.customerName}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Z.status==="COMPLETED"?"bg-green-100 text-green-800":Z.status==="PENDING"?"bg-yellow-100 text-yellow-800":Z.status==="CANCELLED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:Z.status})}),t.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:[Z.amount.toLocaleString()," SAR"]}),t.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(Z.createdAt).toLocaleDateString(a?"ar-SA":"en-US")})]},Z.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:a?"  ":"No orders found"})})})]})}),G&&G.totalPages>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[t.jsx("div",{className:"text-sm text-gray-500",children:a?` ${G.page}  ${G.totalPages} (${G.totalCount} )`:`Page ${G.page} of ${G.totalPages} (${G.totalCount} orders)`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>X(G.page-1),disabled:G.page<=1||g,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-prev-page",children:a?t.jsx(vs,{size:16}):t.jsx(ws,{size:16})}),t.jsx("span",{className:"px-3 py-1 text-sm font-medium text-gray-700",children:G.page}),t.jsx("button",{onClick:()=>X(G.page+1),disabled:G.page>=G.totalPages||g,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 hover:bg-gray-100 transition","data-testid":"button-next-page",children:a?t.jsx(ws,{size:16}):t.jsx(vs,{size:16})})]})]})]})]})};return f?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(as,{className:"w-8 h-8 animate-spin text-blue-600"})}):t.jsxs("div",{className:"p-6 space-y-6",dir:a?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Rr,{className:"w-8 h-8 text-blue-600"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900","data-testid":"text-reports-title",children:a?" ":"Reports Center"}),t.jsx("p",{className:"text-sm text-gray-500",children:a?"    ":"Run and analyze reports with AI"})]})]}),t.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition","data-testid":"button-refresh-reports",children:[t.jsx(Qt,{size:18}),a?"":"Refresh"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx("div",{className:"lg:col-span-1 space-y-4",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(Lt,{size:20}),a?" ":"Available Reports"]}),t.jsxs("div",{className:"space-y-2",children:[r.map(V=>t.jsx("button",{onClick:()=>{l(V),d(null),h(null)},className:`w-full text-right p-3 rounded-lg border transition ${(i==null?void 0:i.id)===V.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,"data-testid":`button-select-report-${V.code}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:U(V)}),I(V)&&t.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:I(V)})]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full shrink-0 ${z(V.category)}`,children:k(V.category)})]})},V.id)),r.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Lt,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:a?"   ":"No reports available"})]})]})]})}),t.jsx("div",{className:"lg:col-span-2 space-y-4",children:i?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:U(i)}),t.jsxs("button",{onClick:()=>w(!j),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg","data-testid":"button-toggle-filters",children:[t.jsx(tc,{size:16}),a?"":"Filters",j?t.jsx(Wr,{size:16}):t.jsx(kr,{size:16})]})]}),j&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"From Date"}),t.jsx("input",{type:"date",value:A.dateFrom||"",onChange:V=>O({...A,dateFrom:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-date-from"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"To Date"}),t.jsx("input",{type:"date",value:A.dateTo||"",onChange:V=>O({...A,dateTo:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-date-to"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?"":"Status"}),t.jsxs("select",{value:A.status||"",onChange:V=>O({...A,status:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"select-status",children:[t.jsx("option",{value:"",children:a?"":"All"}),(i==null?void 0:i.code)==="QUOTES_OVERVIEW"?t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"NEW",children:a?"":"New"}),t.jsx("option",{value:"PENDING",children:a?"":"Pending"}),t.jsx("option",{value:"APPROVED",children:a?" ":"Approved"}),t.jsx("option",{value:"REJECTED",children:a?"":"Rejected"}),t.jsx("option",{value:"COMPLETED",children:a?"":"Completed"}),t.jsx("option",{value:"CANCELLED",children:a?"":"Cancelled"})]}):t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"ACTIVE",children:a?"":"Active"}),t.jsx("option",{value:"PENDING",children:a?"":"Pending"}),t.jsx("option",{value:"COMPLETED",children:a?"":"Completed"})]})]})]}),(i==null?void 0:i.code)==="QUOTES_OVERVIEW"||(i==null?void 0:i.code)==="SALES_SUMMARY"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"Customer ID"}),t.jsx("input",{type:"text",value:A.customerId||"",onChange:V=>O({...A,customerId:V.target.value}),placeholder:a?"":"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-customer-id"})]}),(i==null?void 0:i.code)==="SALES_SUMMARY"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?" ":"Product ID"}),t.jsx("input",{type:"text",value:A.productId||"",onChange:V=>O({...A,productId:V.target.value}),placeholder:a?"":"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-product-id"})]})]}):t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a?"":"Category"}),t.jsx("input",{type:"text",value:A.category||"",onChange:V=>O({...A,category:V.target.value}),placeholder:a?" ":"Enter category",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm","data-testid":"input-category"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{onClick:D,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition","data-testid":"button-run-report",children:[g?t.jsx(as,{size:18,className:"animate-spin"}):t.jsx(Lu,{size:18}),a?" ":"Run Report"]}),o&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>M("SUMMARY"),disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition","data-testid":"button-ai-summary",children:[b?t.jsx(as,{size:18,className:"animate-spin"}):t.jsx(pi,{size:18}),a?" AI":"AI Summary"]}),t.jsxs("button",{onClick:()=>M("INSIGHTS"),disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 transition","data-testid":"button-ai-insights",children:[b?t.jsx(as,{size:18,className:"animate-spin"}):t.jsx(qp,{size:18}),a?" AI":"AI Insights"]})]})]})]}),u&&t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl border border-purple-200 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.mode==="SUMMARY"?t.jsx(pi,{className:"w-5 h-5 text-purple-600"}):t.jsx(qp,{className:"w-5 h-5 text-orange-600"}),t.jsx("h3",{className:"font-semibold text-gray-900",children:u.mode==="SUMMARY"?a?"  ":"AI Summary":a?"  ":"AI Insights"}),u.cached&&t.jsx("span",{className:"text-xs px-2 py-1 bg-gray-200 text-gray-600 rounded-full",children:a?"  ":"Cached"})]}),t.jsx("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap","data-testid":"text-ai-analysis",children:u.aiText})]}),o&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.jsx(Fn,{className:"w-5 h-5 text-green-600"}),a?" ":"Report Results"]}),o.metadata&&t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(os,{size:14}),new Date(o.metadata.generatedAt).toLocaleString(a?"ar-SA":"en-US")]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(mi,{size:14}),o.metadata.rowCount," ",a?"":"rows"]})]})]}),(i==null?void 0:i.code)==="QUOTES_OVERVIEW"&&o.data?W(o.data):(i==null?void 0:i.code)==="SALES_SUMMARY"&&o.data?ee(o.data):t.jsxs(t.Fragment,{children:[o.summary&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:a?"":"Summary"}),_(o.summary)]}),o.breakdown&&o.breakdown.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:a?"":"Breakdown"}),q(o.breakdown)]})]})]})})]}):t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[t.jsx(Rr,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),t.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:a?"  ":"Select a report to begin"}),t.jsx("p",{className:"text-sm text-gray-400",children:a?"     ":"Choose a report from the list to run and analyze"})]})})]})]})},Ao=[{value:"general",labelAr:"",labelEn:"General"},{value:"products",labelAr:"",labelEn:"Products"},{value:"orders",labelAr:"",labelEn:"Orders"},{value:"pricing",labelAr:"",labelEn:"Pricing"},{value:"shipping",labelAr:"",labelEn:"Shipping"},{value:"returns",labelAr:"",labelEn:"Returns"},{value:"support",labelAr:"",labelEn:"Support"},{value:"account",labelAr:"",labelEn:"Account"},{value:"technical",labelAr:"",labelEn:"Technical"}];function gme(){const{t:e}=Jt(),{language:s,dir:a}=Bs(),{addToast:r}=Dt(),n=a==="rtl",[i,l]=T.useState("knowledge"),[o,d]=T.useState(!0),[u,h]=T.useState(!1),[f,x]=T.useState([]),[g,v]=T.useState(!1),[b,y]=T.useState(null),[j,w]=T.useState(""),[A,O]=T.useState("all"),[C,E]=T.useState([]),[S,D]=T.useState(!1),[M,U]=T.useState(null),[I,k]=T.useState([]),[z,_]=T.useState(!1),[q,L]=T.useState(null),[Q,X]=T.useState([]),[W,ee]=T.useState(""),[V,P]=T.useState(""),[Y,J]=T.useState(!1),[K,se]=T.useState(!1),[G,te]=T.useState({totalQueries:0,successRate:0,avgResponseTime:0,topCategories:[],recentActivity:[]}),[Z,ue]=T.useState({question:"",answer:"",category:"general",tags:"",priority:5,enabled:!0}),[re,H]=T.useState({title:"",category:"general",messages:[],rating:5,enabled:!0}),[pe,B]=T.useState({name:"",nameAr:"",description:"",content:"",contentAr:"",type:"system",enabled:!0,order:1}),[oe,fe]=T.useState({role:"user",content:""});T.useEffect(()=>{ne()},[]);const ne=async()=>{d(!0);try{const ie=localStorage.getItem("ai_knowledge_base"),rt=localStorage.getItem("ai_training_conversations"),it=localStorage.getItem("ai_system_prompts"),vt=localStorage.getItem("ai_test_cases");if(ie)x(JSON.parse(ie));else{const Ie=[{id:"kb-1",question:"    ",answer:"    :        ( )  .    .",category:"general",tags:["","payment",""],priority:10,enabled:!0,usageCount:45,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-2",question:"   ",answer:'      ""  .          .',category:"orders",tags:["","",""],priority:9,enabled:!0,usageCount:78,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-3",question:"   ",answer:"    7          .       .",category:"returns",tags:["","",""],priority:8,enabled:!0,usageCount:32,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-4",question:"    ",answer:"        .        .   .",category:"products",tags:["","","",""],priority:10,enabled:!0,usageCount:120,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"kb-5",question:"   ",answer:`    :
- : 1-2  
-   : 2-3  
-  : 3-5  
      24 .`,category:"shipping",tags:["","",""],priority:9,enabled:!0,usageCount:89,lastUsed:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];x(Ie),localStorage.setItem("ai_knowledge_base",JSON.stringify(Ie))}if(rt)E(JSON.parse(rt));else{const Ie=[{id:"conv-1",title:"    ",messages:[{role:"user",content:"         2020"},{role:"assistant",content:" !  .        2020.     "},{role:"user",content:" "},{role:"assistant",content:"!      2020     90915-YZZD4  45 .    "}],category:"products",rating:5,enabled:!0,createdAt:new Date().toISOString()},{id:"conv-2",title:"   ",messages:[{role:"user",content:"    ORD-1234"},{role:"assistant",content:"!     ...   ORD-1234        .  : SM123456789.      ."},{role:"user",content:""},{role:"assistant",content:"!       .  !"}],category:"orders",rating:5,enabled:!0,createdAt:new Date().toISOString()}];E(Ie),localStorage.setItem("ai_training_conversations",JSON.stringify(Ie))}if(it)k(JSON.parse(it));else{const Ie=[{id:"prompt-1",name:"Main System Prompt",nameAr:" ",description:"The main system prompt that defines the AI personality and behavior",content:"You are a helpful AI assistant for SINI CAR B2B auto parts platform. You help customers find parts, track orders, and answer questions about products and services. Be professional, friendly, and knowledgeable.",contentAr:"     SINI CAR    B2B.           .      .",type:"system",enabled:!0,order:1},{id:"prompt-2",name:"Personality Prompt",nameAr:" ",description:"Defines the AI personality traits",content:`Personality traits:
- Professional but friendly
- Patient and understanding
- Knowledgeable about auto parts
- Helpful and proactive
- Bilingual (Arabic/English)`,contentAr:` :
-   
-  
-   
-  
-   (/)`,type:"persona",enabled:!0,order:2},{id:"prompt-3",name:"Context Prompt",nameAr:" ",description:"Provides business context to the AI",content:`Business context:
- B2B auto parts platform
- Serves mechanics and parts shops
- Offers original and aftermarket parts
- Saudi Arabia market focus
- Competitive pricing`,contentAr:` :
-  B2B   
-    
-    
-  
-  `,type:"context",enabled:!0,order:3},{id:"prompt-4",name:"Safety Instructions",nameAr:" ",description:"Safety and restriction instructions",content:`Safety rules:
- Never share customer personal data
- Do not discuss competitors negatively
- Refer complex issues to human support
- Do not make unauthorized promises
- Stay on topic (auto parts)`,contentAr:` :
-     
-     
-     
-      
-    ( )`,type:"instruction",enabled:!0,order:4}];k(Ie),localStorage.setItem("ai_system_prompts",JSON.stringify(Ie))}if(vt)X(JSON.parse(vt));else{const Ie=[{id:"test-1",input:"   ",expectedOutput:"            ",category:"products",passed:void 0,lastTested:void 0},{id:"test-2",input:"     ",expectedOutput:"     (7 )    ",category:"returns",passed:void 0,lastTested:void 0},{id:"test-3",input:"",expectedOutput:"      ",category:"general",passed:void 0,lastTested:void 0}];X(Ie),localStorage.setItem("ai_test_cases",JSON.stringify(Ie))}te({totalQueries:1247,successRate:94.5,avgResponseTime:1.2,topCategories:[{category:"products",count:456},{category:"orders",count:312},{category:"shipping",count:189},{category:"returns",count:145},{category:"support",count:98}],recentActivity:[{date:"2024-12-01",queries:89,success:85},{date:"2024-12-02",queries:112,success:106},{date:"2024-12-03",queries:98,success:92},{date:"2024-12-04",queries:134,success:128},{date:"2024-12-05",queries:145,success:137},{date:"2024-12-06",queries:167,success:158},{date:"2024-12-07",queries:178,success:169}]})}catch{r(e("common.loadError","   "),"error")}finally{d(!1)}},de=()=>{if(!Z.question.trim()||!Z.answer.trim()){r(n?"  ":"Question and answer are required","error");return}const ie={id:(b==null?void 0:b.id)||`kb-${Date.now()}`,question:Z.question,answer:Z.answer,category:Z.category,tags:Z.tags.split(",").map(it=>it.trim()).filter(it=>it),priority:Z.priority,enabled:Z.enabled,usageCount:(b==null?void 0:b.usageCount)||0,lastUsed:(b==null?void 0:b.lastUsed)||null,createdAt:(b==null?void 0:b.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString()};let rt;b?rt=f.map(it=>it.id===b.id?ie:it):rt=[...f,ie],x(rt),localStorage.setItem("ai_knowledge_base",JSON.stringify(rt)),Ue(),r(n?"   ":"Knowledge saved successfully","success")},we=ie=>{if(!confirm(n?"    ":"Are you sure you want to delete?"))return;const rt=f.filter(it=>it.id!==ie);x(rt),localStorage.setItem("ai_knowledge_base",JSON.stringify(rt)),r(n?"  ":"Deleted successfully","success")},Ue=()=>{ue({question:"",answer:"",category:"general",tags:"",priority:5,enabled:!0}),y(null),v(!1)},qe=ie=>{y(ie),ue({question:ie.question,answer:ie.answer,category:ie.category,tags:ie.tags.join(", "),priority:ie.priority,enabled:ie.enabled}),v(!0)},Ce=()=>{if(!re.title.trim()||re.messages.length===0){r(n?"  ":"Title and messages are required","error");return}const ie={id:(M==null?void 0:M.id)||`conv-${Date.now()}`,title:re.title,messages:re.messages,category:re.category,rating:re.rating,enabled:re.enabled,createdAt:(M==null?void 0:M.createdAt)||new Date().toISOString()};let rt;M?rt=C.map(it=>it.id===M.id?ie:it):rt=[...C,ie],E(rt),localStorage.setItem("ai_training_conversations",JSON.stringify(rt)),Se(),r(n?"   ":"Conversation saved successfully","success")},Le=ie=>{if(!confirm(n?"    ":"Are you sure you want to delete?"))return;const rt=C.filter(it=>it.id!==ie);E(rt),localStorage.setItem("ai_training_conversations",JSON.stringify(rt)),r(n?"  ":"Deleted successfully","success")},Se=()=>{H({title:"",category:"general",messages:[],rating:5,enabled:!0}),U(null),D(!1),fe({role:"user",content:""})},_e=()=>{oe.content.trim()&&(H(ie=>({...ie,messages:[...ie.messages,{...oe}]})),fe({role:oe.role==="user"?"assistant":"user",content:""}))},Ze=ie=>{H(rt=>({...rt,messages:rt.messages.filter((it,vt)=>vt!==ie)}))},Mt=()=>{if(!pe.name.trim()||!pe.content.trim()){r(n?"  ":"Name and content are required","error");return}const ie={id:(q==null?void 0:q.id)||`prompt-${Date.now()}`,name:pe.name,nameAr:pe.nameAr,description:pe.description,content:pe.content,contentAr:pe.contentAr,type:pe.type,enabled:pe.enabled,order:pe.order};let rt;q?rt=I.map(it=>it.id===q.id?ie:it):rt=[...I,ie],k(rt),localStorage.setItem("ai_system_prompts",JSON.stringify(rt)),yt(),r(n?"   ":"Prompt saved successfully","success")},lt=ie=>{if(!confirm(n?"    ":"Are you sure you want to delete?"))return;const rt=I.filter(it=>it.id!==ie);k(rt),localStorage.setItem("ai_system_prompts",JSON.stringify(rt)),r(n?"  ":"Deleted successfully","success")},yt=()=>{B({name:"",nameAr:"",description:"",content:"",contentAr:"",type:"system",enabled:!0,order:I.length+1}),L(null),_(!1)},wt=async()=>{if(!W.trim()){r(n?"  ":"Enter test input","error");return}J(!0);try{await new Promise(rt=>setTimeout(rt,1500));const ie=f.find(rt=>rt.enabled&&(W.includes(rt.question.substring(0,10))||rt.tags.some(it=>W.includes(it))));P(ie?ie.answer:n?"!      SINI CAR.    ":"Hello! I am your AI assistant at SINI CAR platform. How can I help you today?")}catch{r(n?"   ":"Failed to run test","error")}finally{J(!1)}},ke=async()=>{J(!0);try{const ie=await Promise.all(Q.map(async rt=>{await new Promise(gt=>setTimeout(gt,500));const it=rt.expectedOutput.toLowerCase().split(" "),vt=n?"   ":"This is a test response",Ie=Math.random()>.3,ct=Ie?Math.floor(Math.random()*20)+80:Math.floor(Math.random()*40)+30;return{...rt,actualOutput:vt,passed:Ie,score:ct,lastTested:new Date().toISOString()}}));X(ie),localStorage.setItem("ai_test_cases",JSON.stringify(ie)),r(n?"   ":"All tests completed","success")}catch{r(n?"   ":"Failed to run tests","error")}finally{J(!1)}},We=()=>{const ie={knowledge:f,conversations:C,prompts:I,testCases:Q,exportedAt:new Date().toISOString()},rt=new Blob([JSON.stringify(ie,null,2)],{type:"application/json"}),it=URL.createObjectURL(rt),vt=document.createElement("a");vt.href=it,vt.download=`ai-training-data-${new Date().toISOString().split("T")[0]}.json`,vt.click(),URL.revokeObjectURL(it),r(n?"   ":"Data exported successfully","success")},Ne=ie=>{var vt;const rt=(vt=ie.target.files)==null?void 0:vt[0];if(!rt)return;const it=new FileReader;it.onload=Ie=>{var ct;try{const gt=JSON.parse((ct=Ie.target)==null?void 0:ct.result);gt.knowledge&&(x(gt.knowledge),localStorage.setItem("ai_knowledge_base",JSON.stringify(gt.knowledge))),gt.conversations&&(E(gt.conversations),localStorage.setItem("ai_training_conversations",JSON.stringify(gt.conversations))),gt.prompts&&(k(gt.prompts),localStorage.setItem("ai_system_prompts",JSON.stringify(gt.prompts))),gt.testCases&&(X(gt.testCases),localStorage.setItem("ai_test_cases",JSON.stringify(gt.testCases))),r(n?"   ":"Data imported successfully","success")}catch{r(n?"   ":"Failed to import data","error")}},it.readAsText(rt),ie.target.value=""},at=T.useMemo(()=>f.filter(ie=>{const rt=!j||ie.question.toLowerCase().includes(j.toLowerCase())||ie.answer.toLowerCase().includes(j.toLowerCase())||ie.tags.some(vt=>vt.toLowerCase().includes(j.toLowerCase())),it=A==="all"||ie.category===A;return rt&&it}),[f,j,A]),dt=[{id:"knowledge",icon:Qx,label:n?" ":"Knowledge Base"},{id:"conversations",icon:Or,label:n?" ":"Training Conversations"},{id:"prompts",icon:Km,label:n?"":"System Prompts"},{id:"testing",icon:bu,label:n?" ":"Testing & Evaluation"},{id:"analytics",icon:Rr,label:n?"":"Analytics"}];return o?t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Qt,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-600",children:n?" ...":"Loading..."})]})}):t.jsxs("div",{className:"p-6 space-y-6",dir:a,children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-indigo-600 to-blue-600 rounded-2xl p-6 text-white shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:t.jsx(iF,{className:"w-8 h-8"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold","data-testid":"text-page-title",children:n?"   ":"AI Training Management"}),t.jsx("p",{className:"text-purple-100 text-sm",children:n?"     ":"Train and customize AI according to your needs"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("label",{className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl cursor-pointer transition-colors flex items-center gap-2",children:[t.jsx(ga,{size:18}),t.jsx("span",{children:n?"":"Import"}),t.jsx("input",{type:"file",accept:".json",onChange:Ne,className:"hidden","data-testid":"input-import-data"})]}),t.jsxs("button",{onClick:We,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-colors flex items-center gap-2","data-testid":"button-export-data",children:[t.jsx(cr,{size:18}),t.jsx("span",{children:n?"":"Export"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(Qx,{size:16}),t.jsx("span",{children:n?" ":"Knowledge Base"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-knowledge-count",children:f.length})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(Or,{size:16}),t.jsx("span",{children:n?"":"Conversations"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-conversations-count",children:C.length})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(Km,{size:16}),t.jsx("span",{children:n?"":"Prompts"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-prompts-count",children:I.length})]}),t.jsxs("div",{className:"bg-white/10 rounded-xl p-4 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-purple-200 text-sm mb-1",children:[t.jsx(bu,{size:16}),t.jsx("span",{children:n?"":"Test Cases"})]}),t.jsx("p",{className:"text-2xl font-bold","data-testid":"text-tests-count",children:Q.length})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm",children:[t.jsx("div",{className:"flex overflow-x-auto border-b border-slate-200",children:dt.map(ie=>t.jsxs("button",{onClick:()=>l(ie.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium whitespace-nowrap transition-colors ${i===ie.id?"text-purple-600 border-b-2 border-purple-600 bg-purple-50/50":"text-slate-600 hover:text-purple-600 hover:bg-slate-50"}`,"data-testid":`tab-${ie.id}`,children:[t.jsx(ie.icon,{size:18}),ie.label]},ie.id))}),t.jsxs("div",{className:"p-6",children:[i==="knowledge"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[t.jsxs("div",{className:"flex gap-3 flex-1 min-w-[300px]",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Ft,{className:"absolute top-1/2 -translate-y-1/2 text-slate-400 start-3",size:18}),t.jsx("input",{type:"text",value:j,onChange:ie=>w(ie.target.value),placeholder:n?"   ...":"Search knowledge base...",className:"w-full ps-10 pe-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 transition-all","data-testid":"input-search-knowledge"})]}),t.jsxs("select",{value:A,onChange:ie=>O(ie.target.value),className:"px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-category-filter",children:[t.jsx("option",{value:"all",children:n?" ":"All Categories"}),Ao.map(ie=>t.jsx("option",{value:ie.value,children:n?ie.labelAr:ie.labelEn},ie.value))]})]}),t.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 font-medium","data-testid":"button-add-knowledge",children:[t.jsx(Pt,{size:18}),n?" ":"Add Knowledge"]})]}),t.jsx("div",{className:"space-y-4",children:at.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-500",children:[t.jsx(Qx,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t.jsx("p",{children:n?"  ":"No results found"})]}):at.map(ie=>{var rt;return t.jsx("div",{className:`border rounded-xl p-5 transition-all ${ie.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50 opacity-60"}`,"data-testid":`knowledge-entry-${ie.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ie.category==="products"?"bg-blue-100 text-blue-700":ie.category==="orders"?"bg-green-100 text-green-700":ie.category==="shipping"?"bg-orange-100 text-orange-700":ie.category==="returns"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:(rt=Ao.find(it=>it.value===ie.category))==null?void 0:rt[n?"labelAr":"labelEn"]}),t.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsx(pn,{size:12,className:"text-yellow-500"}),ie.priority]}),t.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[t.jsx(Rr,{size:12}),ie.usageCount," ",n?"":"uses"]})]}),t.jsx("h3",{className:"font-semibold text-slate-800 mb-2",children:ie.question}),t.jsx("p",{className:"text-sm text-slate-600 whitespace-pre-line",children:ie.answer}),ie.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1.5 mt-3",children:ie.tags.map((it,vt)=>t.jsxs("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-600 rounded-full text-xs",children:["#",it]},vt))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>qe(ie),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-knowledge-${ie.id}`,children:t.jsx(Pa,{size:18})}),t.jsx("button",{onClick:()=>we(ie.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-knowledge-${ie.id}`,children:t.jsx(Ct,{size:18})})]})]})},ie.id)})})]}),i==="conversations"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-slate-600",children:n?"         ":"Add example conversations to train the AI on desired response style"}),t.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 font-medium","data-testid":"button-add-conversation",children:[t.jsx(Pt,{size:18}),n?" ":"Add Conversation"]})]}),t.jsx("div",{className:"grid gap-4",children:C.map(ie=>{var rt;return t.jsxs("div",{className:"border border-slate-200 rounded-xl p-5 bg-white","data-testid":`conversation-${ie.id}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h3",{className:"font-semibold text-slate-800",children:ie.title}),t.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full text-xs",children:(rt=Ao.find(it=>it.value===ie.category))==null?void 0:rt[n?"labelAr":"labelEn"]}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5}).map((it,vt)=>t.jsx(pn,{size:14,className:vt<ie.rating?"text-yellow-400 fill-yellow-400":"text-slate-200"},vt))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{U(ie),H({title:ie.title,category:ie.category,messages:ie.messages,rating:ie.rating,enabled:ie.enabled}),D(!0)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-conversation-${ie.id}`,children:t.jsx(Pa,{size:18})}),t.jsx("button",{onClick:()=>Le(ie.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-conversation-${ie.id}`,children:t.jsx(Ct,{size:18})})]})]}),t.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:ie.messages.map((it,vt)=>t.jsxs("div",{className:`flex gap-3 ${it.role==="assistant"?"justify-start":"justify-end"}`,children:[it.role==="assistant"&&t.jsx("div",{className:"p-2 bg-purple-100 rounded-full h-fit",children:t.jsx(Mn,{size:16,className:"text-purple-600"})}),t.jsx("div",{className:`max-w-[70%] px-4 py-2.5 rounded-2xl text-sm ${it.role==="assistant"?"bg-slate-100 text-slate-800 rounded-tl-sm":"bg-purple-600 text-white rounded-tr-sm"}`,children:it.content}),it.role==="user"&&t.jsx("div",{className:"p-2 bg-slate-200 rounded-full h-fit",children:t.jsx(bn,{size:16,className:"text-slate-600"})})]},vt))})]},ie.id)})})]}),i==="prompts"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-slate-600",children:n?"        ":"Manage core prompts that define AI behavior and personality"}),t.jsxs("button",{onClick:()=>_(!0),className:"px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 font-medium","data-testid":"button-add-prompt",children:[t.jsx(Pt,{size:18}),n?" ":"Add Prompt"]})]}),t.jsx("div",{className:"space-y-4",children:I.sort((ie,rt)=>ie.order-rt.order).map(ie=>t.jsx("div",{className:`border rounded-xl p-5 transition-all ${ie.enabled?"border-slate-200 bg-white":"border-slate-100 bg-slate-50 opacity-60"}`,"data-testid":`prompt-${ie.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ie.type==="system"?"bg-blue-100 text-blue-700":ie.type==="persona"?"bg-purple-100 text-purple-700":ie.type==="context"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:ie.type==="system"?n?"":"System":ie.type==="persona"?n?"":"Persona":ie.type==="context"?n?"":"Context":n?"":"Instruction"}),t.jsxs("span",{className:"text-xs text-slate-400",children:["#",ie.order]}),!ie.enabled&&t.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 rounded-full text-xs",children:n?"":"Disabled"})]}),t.jsx("h3",{className:"font-semibold text-slate-800 mb-1",children:n&&ie.nameAr||ie.name}),t.jsx("p",{className:"text-sm text-slate-500 mb-3",children:ie.description}),t.jsx("pre",{className:"text-sm text-slate-600 bg-slate-50 p-3 rounded-lg whitespace-pre-wrap font-sans max-h-40 overflow-y-auto",children:n&&ie.contentAr||ie.content})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{L(ie),B({name:ie.name,nameAr:ie.nameAr,description:ie.description,content:ie.content,contentAr:ie.contentAr,type:ie.type,enabled:ie.enabled,order:ie.order}),_(!0)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-prompt-${ie.id}`,children:t.jsx(Pa,{size:18})}),t.jsx("button",{onClick:()=>lt(ie.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-prompt-${ie.id}`,children:t.jsx(Ct,{size:18})})]})]})},ie.id))})]}),i==="testing"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-purple-50 rounded-xl p-6 border border-slate-200",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(one,{size:20,className:"text-purple-600"}),n?" ":"Live Testing"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:n?" ":"Test Message"}),t.jsx("textarea",{value:W,onChange:ie=>ee(ie.target.value),placeholder:n?"    ...":"Type a message to test the AI...",className:"w-full p-4 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:3,"data-testid":"textarea-test-input"})]}),t.jsx("button",{onClick:wt,disabled:Y||!W.trim(),className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 font-medium","data-testid":"button-run-test",children:Y?t.jsxs(t.Fragment,{children:[t.jsx(Qt,{size:18,className:"animate-spin"}),n?" ...":"Testing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Lu,{size:18}),n?" ":"Run Test"]})}),V&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:n?"  ":"AI Response"}),t.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:t.jsx(Mn,{size:18,className:"text-purple-600"})}),t.jsx("p",{className:"text-slate-700 flex-1","data-testid":"text-test-output",children:V})]})})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[t.jsx(bu,{size:20,className:"text-purple-600"}),n?" ":"Test Cases"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:ke,disabled:Y||Q.length===0,className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 text-sm font-medium","data-testid":"button-run-all-tests",children:[Y?t.jsx(Qt,{size:16,className:"animate-spin"}):t.jsx(Lu,{size:16}),n?" ":"Run All"]}),t.jsxs("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 text-sm font-medium","data-testid":"button-add-test-case",children:[t.jsx(Pt,{size:16}),n?" ":"Add Test"]})]})]}),t.jsx("div",{className:"space-y-3",children:Q.map(ie=>{var rt;return t.jsx("div",{className:`border rounded-xl p-4 ${ie.passed===void 0?"border-slate-200 bg-white":ie.passed?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,"data-testid":`test-case-${ie.id}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ie.passed===void 0?t.jsx(m0,{size:18,className:"text-slate-400"}):ie.passed?t.jsx(Ut,{size:18,className:"text-green-600"}):t.jsx(Zs,{size:18,className:"text-red-600"}),t.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full text-xs",children:(rt=Ao.find(it=>it.value===ie.category))==null?void 0:rt[n?"labelAr":"labelEn"]}),ie.score!==void 0&&t.jsxs("span",{className:`text-xs font-medium ${ie.score>=80?"text-green-600":ie.score>=50?"text-yellow-600":"text-red-600"}`,children:[ie.score,"%"]})]}),t.jsxs("p",{className:"text-sm font-medium text-slate-800 mb-1",children:[n?":":"Input:"," ",ie.input]}),t.jsxs("p",{className:"text-sm text-slate-600 mb-1",children:[n?":":"Expected:"," ",ie.expectedOutput]}),ie.actualOutput&&t.jsxs("p",{className:"text-sm text-slate-500",children:[n?":":"Actual:"," ",ie.actualOutput]})]}),t.jsx("button",{onClick:()=>{const it=Q.filter(vt=>vt.id!==ie.id);X(it),localStorage.setItem("ai_test_cases",JSON.stringify(it))},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors","data-testid":`button-delete-test-${ie.id}`,children:t.jsx(Ct,{size:18})})]})},ie.id)})})]})]}),i==="analytics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:t.jsx(Or,{size:20,className:"text-white"})}),t.jsx("span",{className:"text-blue-700 font-medium",children:n?" ":"Total Queries"})]}),t.jsx("p",{className:"text-3xl font-bold text-blue-800","data-testid":"text-total-queries",children:G.totalQueries.toLocaleString()})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:t.jsx(Ut,{size:20,className:"text-white"})}),t.jsx("span",{className:"text-green-700 font-medium",children:n?" ":"Success Rate"})]}),t.jsxs("p",{className:"text-3xl font-bold text-green-800","data-testid":"text-success-rate",children:[G.successRate,"%"]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:t.jsx(os,{size:20,className:"text-white"})}),t.jsx("span",{className:"text-purple-700 font-medium",children:n?"  ":"Avg Response Time"})]}),t.jsxs("p",{className:"text-3xl font-bold text-purple-800","data-testid":"text-avg-response-time",children:[G.avgResponseTime,"s"]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Pr,{size:20,className:"text-purple-600"}),n?"  ":"Top Categories"]}),t.jsx("div",{className:"space-y-3",children:G.topCategories.map((ie,rt)=>{var it;return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-sm font-medium",children:rt+1}),t.jsx("span",{className:"flex-1 text-slate-700",children:((it=Ao.find(vt=>vt.value===ie.category))==null?void 0:it[n?"labelAr":"labelEn"])||ie.category}),t.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2 overflow-hidden",children:t.jsx("div",{className:"h-full bg-purple-600 rounded-full",style:{width:`${ie.count/G.topCategories[0].count*100}%`}})}),t.jsx("span",{className:"text-sm font-medium text-slate-600 w-16 text-end",children:ie.count})]},ie.category)})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[t.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Rr,{size:20,className:"text-purple-600"}),n?"  (7 )":"Recent Activity (7 days)"]}),t.jsx("div",{className:"flex items-end gap-2 h-40",children:G.recentActivity.map((ie,rt)=>t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[t.jsxs("div",{className:"w-full flex flex-col gap-0.5",children:[t.jsx("div",{className:"w-full bg-purple-600 rounded-t",style:{height:`${ie.success/200*100}px`},title:`${n?"":"Success"}: ${ie.success}`}),t.jsx("div",{className:"w-full bg-red-400 rounded-b",style:{height:`${(ie.queries-ie.success)/200*100}px`},title:`${n?"":"Failed"}: ${ie.queries-ie.success}`})]}),t.jsx("span",{className:"text-xs text-slate-500",children:ie.date.split("-")[2]})]},ie.date))}),t.jsxs("div",{className:"flex items-center gap-4 mt-4 justify-center text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded"}),t.jsx("span",{className:"text-slate-600",children:n?"":"Success"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-red-400 rounded"}),t.jsx("span",{className:"text-slate-600",children:n?"":"Failed"})]})]})]})]})]})]}),g&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Qx,{size:24}),b?n?" ":"Edit Knowledge":n?"  ":"Add New Knowledge"]}),t.jsx("button",{onClick:Ue,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-knowledge-modal",children:t.jsx(St,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Question"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:Z.question,onChange:ie=>ue({...Z,question:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?"  ...":"Enter the question...","data-testid":"input-knowledge-question"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Answer"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:Z.answer,onChange:ie=>ue({...Z,answer:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:4,placeholder:n?"  ...":"Enter the answer...","data-testid":"textarea-knowledge-answer"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Category"}),t.jsx("select",{value:Z.category,onChange:ie=>ue({...Z,category:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-knowledge-category",children:Ao.map(ie=>t.jsx("option",{value:ie.value,children:n?ie.labelAr:ie.labelEn},ie.value))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Priority"," (1-10)"]}),t.jsx("input",{type:"number",min:"1",max:"10",value:Z.priority,onChange:ie=>ue({...Z,priority:parseInt(ie.target.value)||5}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-knowledge-priority"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Tags"," (",n?" ":"comma separated",")"]}),t.jsx("input",{type:"text",value:Z.tags,onChange:ie=>ue({...Z,tags:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?", , ":"payment, cards, transfer","data-testid":"input-knowledge-tags"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:()=>ue({...Z,enabled:!Z.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Z.enabled?"bg-purple-600":"bg-slate-200"}`,"data-testid":"toggle-knowledge-enabled",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-slate-300 transition-transform ${Z.enabled?"translate-x-5":"translate-x-0.5"}`})}),t.jsx("span",{className:"text-sm text-slate-700",children:n?"":"Enabled"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:Ue,className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-knowledge",children:n?"":"Cancel"}),t.jsxs("button",{onClick:de,className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-knowledge",children:[t.jsx(ds,{size:18}),n?"":"Save"]})]})]})}),S&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Or,{size:24}),M?n?" ":"Edit Conversation":n?"  ":"Add New Conversation"]}),t.jsx("button",{onClick:Se,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-conversation-modal",children:t.jsx(St,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ":"Conversation Title"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:re.title,onChange:ie=>H({...re,title:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?":   ":"Example: Product inquiry","data-testid":"input-conversation-title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Category"}),t.jsx("select",{value:re.category,onChange:ie=>H({...re,category:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-conversation-category",children:Ao.map(ie=>t.jsx("option",{value:ie.value,children:n?ie.labelAr:ie.labelEn},ie.value))})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Conversation"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50 space-y-3 max-h-60 overflow-y-auto",children:re.messages.length===0?t.jsx("p",{className:"text-center text-slate-400 py-4",children:n?"  .   .":"No messages. Add a message below."}):re.messages.map((ie,rt)=>t.jsxs("div",{className:`flex gap-2 items-start ${ie.role==="assistant"?"":"flex-row-reverse"}`,children:[t.jsx("div",{className:`p-1.5 rounded-full ${ie.role==="assistant"?"bg-purple-100":"bg-slate-200"}`,children:ie.role==="assistant"?t.jsx(Mn,{size:14,className:"text-purple-600"}):t.jsx(bn,{size:14,className:"text-slate-600"})}),t.jsx("div",{className:`flex-1 px-3 py-2 rounded-xl text-sm ${ie.role==="assistant"?"bg-white border border-slate-200":"bg-purple-600 text-white"}`,children:ie.content}),t.jsx("button",{onClick:()=>Ze(rt),className:"p-1 text-slate-400 hover:text-red-600",children:t.jsx(St,{size:14})})]},rt))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:oe.role,onChange:ie=>fe({...oe,role:ie.target.value}),className:"px-3 py-2 border border-slate-200 rounded-xl text-sm","data-testid":"select-message-role",children:[t.jsx("option",{value:"user",children:n?"":"User"}),t.jsx("option",{value:"assistant",children:n?"":"Assistant"})]}),t.jsx("input",{type:"text",value:oe.content,onChange:ie=>fe({...oe,content:ie.target.value}),onKeyDown:ie=>ie.key==="Enter"&&_e(),className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",placeholder:n?" ...":"Type message...","data-testid":"input-new-message"}),t.jsx("button",{onClick:_e,className:"px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700","data-testid":"button-add-message",children:t.jsx(Pt,{size:18})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Rating"}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(ie=>t.jsx("button",{type:"button",onClick:()=>H({...re,rating:ie}),className:"p-1","data-testid":`button-rating-${ie}`,children:t.jsx(pn,{size:24,className:ie<=re.rating?"text-yellow-400 fill-yellow-400":"text-slate-200"})},ie))})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:()=>H({...re,enabled:!re.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${re.enabled?"bg-purple-600":"bg-slate-200"}`,"data-testid":"toggle-conversation-enabled",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-slate-300 transition-transform ${re.enabled?"translate-x-5":"translate-x-0.5"}`})}),t.jsx("span",{className:"text-sm text-slate-700",children:n?"":"Enabled"})]})})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:Se,className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-conversation",children:n?"":"Cancel"}),t.jsxs("button",{onClick:Ce,className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-conversation",children:[t.jsx(ds,{size:18}),n?"":"Save"]})]})]})}),z&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(Km,{size:24}),q?n?" ":"Edit Prompt":n?"  ":"Add New Prompt"]}),t.jsx("button",{onClick:yt,className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-prompt-modal",children:t.jsx(St,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ()":"Name (English)"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:pe.name,onChange:ie=>B({...pe,name:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-prompt-name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?" ()":"Name (Arabic)"}),t.jsx("input",{type:"text",value:pe.nameAr,onChange:ie=>B({...pe,nameAr:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500",dir:"rtl","data-testid":"input-prompt-name-ar"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Description"}),t.jsx("input",{type:"text",value:pe.description,onChange:ie=>B({...pe,description:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-prompt-description"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Type"}),t.jsxs("select",{value:pe.type,onChange:ie=>B({...pe,type:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-prompt-type",children:[t.jsx("option",{value:"system",children:n?"":"System"}),t.jsx("option",{value:"persona",children:n?"":"Persona"}),t.jsx("option",{value:"context",children:n?"":"Context"}),t.jsx("option",{value:"instruction",children:n?"":"Instruction"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Order"}),t.jsx("input",{type:"number",min:"1",value:pe.order,onChange:ie=>B({...pe,order:parseInt(ie.target.value)||1}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"input-prompt-order"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ()":"Content (English)"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:pe.content,onChange:ie=>B({...pe,content:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none font-mono text-sm",rows:5,"data-testid":"textarea-prompt-content"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?" ()":"Content (Arabic)"}),t.jsx("textarea",{value:pe.contentAr,onChange:ie=>B({...pe,contentAr:ie.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none font-mono text-sm",rows:5,dir:"rtl","data-testid":"textarea-prompt-content-ar"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{type:"button",onClick:()=>B({...pe,enabled:!pe.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${pe.enabled?"bg-purple-600":"bg-slate-200"}`,"data-testid":"toggle-prompt-enabled",children:t.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white border border-slate-300 transition-transform ${pe.enabled?"translate-x-5":"translate-x-0.5"}`})}),t.jsx("span",{className:"text-sm text-slate-700",children:n?"":"Enabled"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:yt,className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-prompt",children:n?"":"Cancel"}),t.jsxs("button",{onClick:Mt,className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-prompt",children:[t.jsx(ds,{size:18}),n?"":"Save"]})]})]})}),K&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-5 flex justify-between items-center",children:[t.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[t.jsx(bu,{size:24}),n?"  ":"Add Test Case"]}),t.jsx("button",{onClick:()=>se(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-test-modal",children:t.jsx(St,{className:"text-white",size:20})})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:n?"":"Category"}),t.jsx("select",{id:"test-category",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500","data-testid":"select-test-category",children:Ao.map(ie=>t.jsx("option",{value:ie.value,children:n?ie.labelAr:ie.labelEn},ie.value))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?"":"Input"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{id:"test-input",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:3,placeholder:n?"  ":"What will the user say?","data-testid":"textarea-test-case-input"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1.5",children:[n?" ":"Expected Output"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{id:"test-expected",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500 resize-none",rows:3,placeholder:n?"       ":"What should the AI respond with?","data-testid":"textarea-test-case-expected"})]})]}),t.jsxs("div",{className:"bg-slate-50 p-5 border-t border-slate-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>se(!1),className:"px-6 py-2.5 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-100 font-medium","data-testid":"button-cancel-test",children:n?"":"Cancel"}),t.jsxs("button",{onClick:()=>{var ct,gt,Ot;const ie=(ct=document.getElementById("test-input"))==null?void 0:ct.value,rt=(gt=document.getElementById("test-expected"))==null?void 0:gt.value,it=(Ot=document.getElementById("test-category"))==null?void 0:Ot.value;if(!ie||!rt){r(n?"   ":"Input and expected output are required","error");return}const vt={id:`test-${Date.now()}`,input:ie,expectedOutput:rt,category:it},Ie=[...Q,vt];X(Ie),localStorage.setItem("ai_test_cases",JSON.stringify(Ie)),se(!1),r(n?"   ":"Test case added","success")},className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 font-medium flex items-center gap-2","data-testid":"button-save-test",children:[t.jsx(ds,{size:18}),n?"":"Save"]})]})]})})]})}const bme=[{ar:"    ",en:"Create a new page for special offers"},{ar:"      ",en:"Add a new user named Ahmed with admin role"},{ar:"    ",en:"Translate the customers page to English"},{ar:"     ",en:"Change the main site color to green"},{ar:"   ",en:"Add a new permission for reports"},{ar:"     ",en:"Create a new customer named Al-Fahd Company"}],V5="ai_command_backups",G5="ai_command_history",S1="ai_dynamic_pages";function vme(){const{t:e}=Jt(),{showToast:s}=Dt(),{language:a}=Bs(),r=a==="ar",[n,i]=T.useState(""),[l,o]=T.useState(!1),[d,u]=T.useState(!1),[h,f]=T.useState(null),[x,g]=T.useState(!1),[v,b]=T.useState([]),[y,j]=T.useState([]),[w,A]=T.useState([]),[O,C]=T.useState("command"),[E,S]=T.useState(null),[D,M]=T.useState(!1),U=T.useRef(null);T.useEffect(()=>{I()},[]);const I=()=>{try{const se=localStorage.getItem(G5);se&&b(JSON.parse(se));const G=localStorage.getItem(V5);G&&j(JSON.parse(G));const te=localStorage.getItem(S1);te&&A(JSON.parse(te))}catch(se){console.error("Error loading data:",se)}},k=se=>{b(se),localStorage.setItem(G5,JSON.stringify(se))},z=se=>{j(se),localStorage.setItem(V5,JSON.stringify(se))},_=se=>{A(se),localStorage.setItem(S1,JSON.stringify(se))},q=(se,G,te)=>{const Z={users:localStorage.getItem("portal_users"),customers:localStorage.getItem("portal_customers"),settings:localStorage.getItem("portal_settings"),permissions:localStorage.getItem("portal_permissions"),roles:localStorage.getItem("portal_roles"),dynamicPages:localStorage.getItem(S1),translations_ar:localStorage.getItem("translations_ar"),translations_en:localStorage.getItem("translations_en")},ue=JSON.stringify(Z),re={id:`backup_${Date.now()}`,timestamp:new Date().toISOString(),description:G,descriptionAr:te,commandId:se,dataSnapshot:ue,size:new Blob([ue]).size},H=[re,...y].slice(0,50);return z(H),re},L=async se=>{const G=y.find(te=>te.id===se);if(!G){s(r?"   ":"Backup not found","error");return}try{const te=JSON.parse(G.dataSnapshot);Object.entries(te).forEach(([ue,re])=>{re&&localStorage.setItem(ue,re)}),I(),s(r?"    ":"Backup restored successfully","success");const Z=v.find(ue=>ue.backupId===se);if(Z){const ue=v.map(re=>re.id===Z.id?{...re,status:"rolled_back"}:re);k(ue)}}catch{s(r?"    ":"Failed to restore backup","error")}},Q=async se=>{u(!0);try{const fe=await fetch("/api/v1/ai/parse-command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:se,language:a})});if(fe.ok){const ne=await fe.json();return u(!1),ne.parsedCommand}}catch{console.log("AI parsing not available, using local parser")}await new Promise(fe=>setTimeout(fe,500));const G=se.toLowerCase(),te=se;let Z="unknown",ue="",re="",H={},pe=.5,B="",oe="";if(G.includes("create page")||G.includes("new page")||te.includes(" ")||te.includes(" ")){Z="create_page",ue="create",re="page",pe=.85;const fe=se.match(/(?:for|||)\s+(.+?)(?:\s|$)/i);H.title=fe?fe[1].trim():se.replace(/ |create page|new page|/gi,"").trim(),B=`Create a new page: "${H.title}"`,oe=`  : "${H.title}"`}else if(G.includes("add user")||G.includes("new user")||te.includes(" ")||te.includes(" ")){Z="add_user",ue="create",re="user",pe=.8;const fe=se.match(/(?:named||)\s+(\S+)/i);H.name=fe?fe[1]:"";const ne=se.match(/(?:role||)\s+(\S+)/i);H.role=ne?ne[1]:"staff",B=`Add new user: "${H.name}" with role "${H.role}"`,oe=`  : "${H.name}"  "${H.role}"`}else if(G.includes("translate")||te.includes("")){Z="translate",ue="translate",pe=.85;const fe=se.match(/(?:page|)\s+(\S+)/i);re=fe?fe[1]:"current";const ne=se.match(/(?:to|)\s+(english||arabic|)/i);H.targetLanguage=ne?ne[1].toLowerCase().includes("english")||ne[1].includes("")?"en":"ar":a==="ar"?"en":"ar",B=`Translate ${re} page to ${H.targetLanguage==="en"?"English":"Arabic"}`,oe=`  ${re}  ${H.targetLanguage==="en"?"":""}`}else if(G.includes("add customer")||G.includes("new customer")||te.includes(" ")||te.includes(" ")||te.includes(" ")){Z="add_customer",ue="create",re="customer",pe=.8;const fe=se.match(/(?:named||)\s+(.+?)(?:\s|$)/i);H.businessName=fe?fe[1].trim():se.replace(/ | |add customer|new customer|/gi,"").trim(),B=`Add new customer: "${H.businessName}"`,oe=`  : "${H.businessName}"`}else if(G.includes("change color")||G.includes("edit color")||te.includes(" ")||te.includes(" ")){Z="edit_settings",ue="edit",re="settings",pe=.75;const fe=se.match(/(?:to|)\s+(green||blue||red||orange||purple|)/i),ne={green:"#10b981",:"#10b981",blue:"#3b82f6",:"#3b82f6",red:"#ef4444",:"#ef4444",orange:"#f97316",:"#f97316",purple:"#8b5cf6",:"#8b5cf6"};H.primaryColor=fe?ne[fe[1].toLowerCase()]||fe[1]:"#3b82f6",B=`Change primary color to ${H.primaryColor}`,oe=`    ${H.primaryColor}`}else if(G.includes("add permission")||G.includes("new permission")||te.includes(" ")||te.includes(" ")){Z="add_permission",ue="create",re="permission",pe=.75;const fe=se.match(/(?:for||)\s+(.+?)(?:\s|$)/i);H.resource=fe?fe[1].trim():"",B=`Add new permission for: "${H.resource}"`,oe=`   : "${H.resource}"`}else B="Unknown command - please try rephrasing",oe="   -   ";return u(!1),{type:Z,action:ue,target:re,params:H,confidence:pe,description:B,descriptionAr:oe}},X=async()=>{if(!n.trim())return;const se=await Q(n);f(se),g(!0)},W=async()=>{var ue,re,H;if(!h)return;o(!0);const se={id:`cmd_${Date.now()}`,command:n,parsedCommand:h,status:"executing",timestamp:new Date().toISOString()},G=q(se.id,`Before: ${h.description}`,`: ${h.descriptionAr}`);se.backupId=G.id;const te=[se,...v];k(te);try{let pe="",B="";switch(h.type){case"create_page":const oe={id:`page_${Date.now()}`,title:h.params.title||"New Page",titleAr:h.params.title||" ",slug:(h.params.title||"new-page").toLowerCase().replace(/\s+/g,"-"),content:`<h1>${h.params.title||"New Page"}</h1>
<p>Page content goes here...</p>`,contentAr:`<h1>${h.params.title||" "}</h1>
<p>  ...</p>`,layout:"default",isPublished:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"AI Command Center"};_([...w,oe]),pe=`Page "${oe.title}" created successfully with slug "/${oe.slug}"`,B=`   "${oe.titleAr}"   "/${oe.slug}"`;break;case"add_user":const fe=JSON.parse(localStorage.getItem("portal_users")||"[]"),ne={id:`user_${Date.now()}`,username:((ue=h.params.name)==null?void 0:ue.toLowerCase().replace(/\s+/g,"_"))||`user_${Date.now()}`,name:h.params.name||"New User",email:`${(re=h.params.name)==null?void 0:re.toLowerCase().replace(/\s+/g,".")}@example.com`,role:((H=h.params.role)==null?void 0:H.toUpperCase())||"STAFF",status:"ACTIVE",createdAt:new Date().toISOString()};fe.push(ne),localStorage.setItem("portal_users",JSON.stringify(fe)),pe=`User "${ne.name}" created with role "${ne.role}"`,B=`   "${ne.name}"  "${ne.role}"`;break;case"add_customer":const de=JSON.parse(localStorage.getItem("portal_customers")||"[]"),we={id:`cust_${Date.now()}`,businessName:h.params.businessName||" ",phone:"0500000000",email:"customer@example.com",city:"",customerType:"RETAIL",status:"ACTIVE",createdAt:new Date().toISOString()};de.push(we),localStorage.setItem("portal_customers",JSON.stringify(de)),pe=`Customer "${we.businessName}" created successfully`,B=`   "${we.businessName}" `;break;case"translate":pe=`Translation request queued for ${h.target} page to ${h.params.targetLanguage}`,B=`     ${h.target}   `;break;case"edit_settings":const Ue=JSON.parse(localStorage.getItem("portal_settings")||"{}");h.params.primaryColor&&(Ue.primaryColor=h.params.primaryColor,localStorage.setItem("portal_settings",JSON.stringify(Ue)),pe=`Primary color changed to ${h.params.primaryColor}`,B=`     ${h.params.primaryColor}`);break;case"add_permission":const qe=JSON.parse(localStorage.getItem("portal_permissions")||"[]"),Ce={id:`perm_${Date.now()}`,resource:h.params.resource||"new_resource",actions:["view","create","edit","delete"],createdAt:new Date().toISOString()};qe.push(Ce),localStorage.setItem("portal_permissions",JSON.stringify(qe)),pe=`Permission for "${Ce.resource}" created with actions: ${Ce.actions.join(", ")}`,B=`    "${Ce.resource}"  : ${Ce.actions.join(" ")}`;break;default:throw new Error("Unknown command type")}se.status="success",se.result=pe,se.resultAr=B,se.executedAt=new Date().toISOString(),s(r?B:pe,"success")}catch(pe){se.status="failed",se.error=pe.message||"Execution failed",s(r?"   ":"Command execution failed","error")}const Z=v.map(pe=>pe.id===se.id?se:pe);Z.find(pe=>pe.id===se.id)||Z.unshift(se),k(Z),o(!1),g(!1),f(null),i("")},ee=()=>{g(!1),f(null)},V=se=>{switch(se){case"success":return t.jsx(Ut,{className:"w-4 h-4 text-green-500"});case"failed":return t.jsx(Zs,{className:"w-4 h-4 text-red-500"});case"rolled_back":return t.jsx(s5,{className:"w-4 h-4 text-amber-500"});case"executing":return t.jsx(as,{className:"w-4 h-4 text-blue-500 animate-spin"});default:return t.jsx(os,{className:"w-4 h-4 text-gray-400"})}},P=se=>{switch(se){case"create_page":return t.jsx(Lt,{className:"w-4 h-4"});case"add_user":case"edit_user":return t.jsx(Gt,{className:"w-4 h-4"});case"add_permission":case"edit_permission":return t.jsx(Ds,{className:"w-4 h-4"});case"add_customer":case"edit_customer":return t.jsx(sl,{className:"w-4 h-4"});case"translate":return t.jsx(ja,{className:"w-4 h-4"});case"edit_settings":return t.jsx(la,{className:"w-4 h-4"});default:return t.jsx(wf,{className:"w-4 h-4"})}},Y=se=>{if(se===0)return"0 Bytes";const G=1024,te=["Bytes","KB","MB"],Z=Math.floor(Math.log(se)/Math.log(G));return parseFloat((se/Math.pow(G,Z)).toFixed(2))+" "+te[Z]},J=se=>{const G=new Date(se);return new Intl.DateTimeFormat(r?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(G)},K=[{id:"command",label:r?" ":"Command Center",icon:wf},{id:"history",label:r?" ":"History",icon:xn},{id:"backups",label:r?" ":"Backups",icon:Cu},{id:"pages",label:r?" ":"Dynamic Pages",icon:Pr}];return t.jsxs("div",{className:`space-y-6 ${r?"text-right":"text-left"}`,dir:r?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl shadow-lg",children:t.jsx(Mn,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-foreground","data-testid":"text-page-title",children:r?"   ":"AI Command Center"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:r?"        ":"Execute commands in Arabic or English with automatic backup"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 dark:bg-green-900/30 rounded-full",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs text-green-700 dark:text-green-400 font-medium",children:r?" ":"System Ready"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(xn,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"text-2xl font-bold",children:v.length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Total Commands"})]}),t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Ut,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"text-2xl font-bold",children:v.filter(se=>se.status==="success").length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Successful"})]}),t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Cu,{className:"w-5 h-5 text-purple-500"}),t.jsx("span",{className:"text-2xl font-bold",children:y.length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Backups"})]}),t.jsxs("div",{className:"bg-card border rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Pr,{className:"w-5 h-5 text-amber-500"}),t.jsx("span",{className:"text-2xl font-bold",children:w.length})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?" ":"Dynamic Pages"})]})]}),t.jsx("div",{className:"flex gap-2 border-b",children:K.map(se=>t.jsxs("button",{onClick:()=>C(se.id),className:`flex items-center gap-2 px-4 py-2.5 text-sm font-medium transition-colors border-b-2 -mb-px ${O===se.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,"data-testid":`tab-${se.id}`,children:[t.jsx(se.icon,{className:"w-4 h-4"}),se.label]},se.id))}),O==="command"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-card border rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(pi,{className:"w-5 h-5 text-violet-500"}),t.jsx("h2",{className:"font-semibold",children:r?" ":"Enter Command"}),t.jsxs("button",{onClick:()=>M(!D),className:"text-xs text-primary hover:underline flex items-center gap-1 mr-auto",children:[t.jsx(mi,{className:"w-3 h-3"}),r?"":"Examples"]})]}),D&&t.jsxs("div",{className:"mb-4 p-4 bg-muted/50 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:r?"  :":"Command Examples:"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:bme.map((se,G)=>t.jsxs("button",{onClick:()=>i(r?se.ar:se.en),className:"text-sm text-left p-2 rounded hover:bg-muted transition-colors",children:[t.jsx("span",{className:"text-primary",children:""})," ",r?se.ar:se.en]},G))})]}),t.jsx("div",{className:"relative",children:t.jsx("textarea",{ref:U,value:n,onChange:se=>i(se.target.value),onKeyDown:se=>{se.key==="Enter"&&!se.shiftKey&&(se.preventDefault(),X())},placeholder:r?"  ... (:    )":"Type your command here... (e.g., Create a new page for offers)",className:"w-full min-h-[100px] p-4 bg-background border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary/50","data-testid":"textarea-command-input"})}),t.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[t.jsxs("button",{onClick:X,disabled:!n.trim()||d||l,className:"flex items-center gap-2 px-6 py-2.5 bg-primary text-primary-foreground rounded-lg font-medium hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-parse-command",children:[d?t.jsx(as,{className:"w-4 h-4 animate-spin"}):t.jsx(al,{className:"w-4 h-4"}),r?" ":"Parse Command"]}),n&&t.jsx("button",{onClick:()=>i(""),className:"px-4 py-2.5 text-muted-foreground hover:text-foreground transition-colors",children:r?"":"Clear"})]})]}),x&&h&&t.jsxs("div",{className:"bg-card border-2 border-primary/50 rounded-xl p-6 animate-in fade-in slide-in-from-top-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(fs,{className:"w-5 h-5 text-primary"}),t.jsx("h3",{className:"font-semibold",children:r?" ":"Command Preview"})]}),t.jsx("button",{onClick:ee,className:"text-muted-foreground hover:text-foreground",children:t.jsx(St,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[P(h.type),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:r?h.descriptionAr:h.description}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[r?" :":"Command Type:"," ",h.type.replace("_"," ")]})]}),t.jsxs("div",{className:`px-2 py-1 rounded text-xs font-medium ${h.confidence>=.8?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":h.confidence>=.6?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:[Math.round(h.confidence*100),"% ",r?"":"confidence"]})]}),Object.keys(h.params).length>0&&t.jsxs("div",{className:"p-3 bg-muted/30 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:r?":":"Parameters:"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(h.params).map(([se,G])=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("span",{className:"text-muted-foreground",children:[se,":"]})," ",t.jsx("span",{className:"font-medium",children:String(G)})]},se))})]}),t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[t.jsx(Gs,{className:"w-5 h-5 text-amber-500 shrink-0"}),t.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:r?"        ":"A backup will be automatically created before executing this command"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:W,disabled:l||h.type==="unknown",className:"flex items-center gap-2 px-6 py-2.5 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-execute-command",children:[l?t.jsx(as,{className:"w-4 h-4 animate-spin"}):t.jsx(Lu,{className:"w-4 h-4"}),r?" ":"Execute Command"]}),t.jsx("button",{onClick:ee,className:"px-6 py-2.5 border rounded-lg font-medium hover:bg-muted transition-colors",children:r?"":"Cancel"})]})]})]})]}),O==="history"&&t.jsxs("div",{className:"bg-card border rounded-xl",children:[t.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold",children:r?" ":"Command History"}),v.length>0&&t.jsx("button",{onClick:()=>{confirm(r?"    ":"Clear command history?")&&k([])},className:"text-sm text-red-500 hover:text-red-600",children:r?" ":"Clear History"})]}),v.length===0?t.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[t.jsx(xn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:r?"   ":"No command history yet"})]}):t.jsx("div",{className:"divide-y",children:v.map(se=>t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>S(E===se.id?null:se.id),children:[V(se.status),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium truncate",children:se.command}),t.jsx("p",{className:"text-sm text-muted-foreground",children:J(se.timestamp)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[P(se.parsedCommand.type),E===se.id?t.jsx(Wr,{className:"w-4 h-4 text-muted-foreground"}):t.jsx(kr,{className:"w-4 h-4 text-muted-foreground"})]})]}),E===se.id&&t.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:r?":":"Type:"})," ",se.parsedCommand.type]}),se.result&&t.jsx("div",{className:"text-sm p-2 bg-green-50 dark:bg-green-900/20 rounded",children:t.jsx("span",{className:"text-green-700 dark:text-green-400",children:r?se.resultAr:se.result})}),se.error&&t.jsx("div",{className:"text-sm p-2 bg-red-50 dark:bg-red-900/20 rounded",children:t.jsx("span",{className:"text-red-700 dark:text-red-400",children:se.error})}),se.backupId&&se.status==="success"&&t.jsxs("button",{onClick:()=>L(se.backupId),className:"flex items-center gap-2 text-sm text-amber-600 hover:text-amber-700",children:[t.jsx(s5,{className:"w-4 h-4"}),r?"   ":"Rollback this command"]})]})]},se.id))})]}),O==="backups"&&t.jsxs("div",{className:"bg-card border rounded-xl",children:[t.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold",children:r?" ":"Backups"}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:[y.length," / 50 ",r?"":"backups"]})]}),y.length===0?t.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[t.jsx(Cu,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:r?"   ":"No backups yet"})]}):t.jsx("div",{className:"divide-y",children:y.map(se=>t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx(qse,{className:"w-5 h-5 text-purple-500 shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium truncate",children:r?se.descriptionAr:se.description}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[t.jsx("span",{children:J(se.timestamp)}),t.jsx("span",{children:""}),t.jsx("span",{children:Y(se.size)})]})]}),t.jsxs("button",{onClick:()=>{confirm(r?"    ":"Restore this backup?")&&L(se.id)},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded-lg hover:bg-amber-200 dark:hover:bg-amber-900/50 transition-colors",children:[t.jsx(bF,{className:"w-4 h-4"}),r?"":"Restore"]})]},se.id))})]}),O==="pages"&&t.jsxs("div",{className:"bg-card border rounded-xl",children:[t.jsx("div",{className:"p-4 border-b flex items-center justify-between",children:t.jsx("h3",{className:"font-semibold",children:r?" ":"Dynamic Pages"})}),w.length===0?t.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[t.jsx(Pr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:r?"   ":"No dynamic pages yet"}),t.jsx("p",{className:"text-sm mt-1",children:r?"    ":"Use commands to create new pages"})]}):t.jsx("div",{className:"divide-y",children:w.map(se=>t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx(Lt,{className:"w-5 h-5 text-blue-500 shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium",children:r?se.titleAr:se.title}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[t.jsxs("span",{children:["/",se.slug]}),t.jsx("span",{children:""}),t.jsx("span",{children:J(se.createdAt)})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[se.isPublished?t.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[t.jsx(iae,{className:"w-3 h-3"}),r?"":"Published"]}):t.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded",children:[t.jsx(wa,{className:"w-3 h-3"}),r?"":"Draft"]}),t.jsx("button",{onClick:()=>{const G=w.map(te=>te.id===se.id?{...te,isPublished:!te.isPublished}:te);_(G)},className:"p-1.5 text-muted-foreground hover:text-foreground transition-colors",children:t.jsx(Qo,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{confirm(r?"    ":"Delete this page?")&&_(w.filter(G=>G.id!==se.id))},className:"p-1.5 text-red-500 hover:text-red-600 transition-colors",children:t.jsx(Ct,{className:"w-4 h-4"})})]})]},se.id))})]})]})}function tp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var j1={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var W5;function yme(){return W5||(W5=1,(function(e,s){(function(a){e.exports=a()})(function(){return(function a(r,n,i){function l(u,h){if(!n[u]){if(!r[u]){var f=typeof tp=="function"&&tp;if(!h&&f)return f(u,!0);if(o)return o(u,!0);var x=new Error("Cannot find module '"+u+"'");throw x.code="MODULE_NOT_FOUND",x}var g=n[u]={exports:{}};r[u][0].call(g.exports,function(v){var b=r[u][1][v];return l(b||v)},g,g.exports,a,r,n,i)}return n[u].exports}for(var o=typeof tp=="function"&&tp,d=0;d<i.length;d++)l(i[d]);return l})({1:[function(a,r,n){var i=a("./utils"),l=a("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(d){for(var u,h,f,x,g,v,b,y=[],j=0,w=d.length,A=w,O=i.getTypeOf(d)!=="string";j<d.length;)A=w-j,f=O?(u=d[j++],h=j<w?d[j++]:0,j<w?d[j++]:0):(u=d.charCodeAt(j++),h=j<w?d.charCodeAt(j++):0,j<w?d.charCodeAt(j++):0),x=u>>2,g=(3&u)<<4|h>>4,v=1<A?(15&h)<<2|f>>6:64,b=2<A?63&f:64,y.push(o.charAt(x)+o.charAt(g)+o.charAt(v)+o.charAt(b));return y.join("")},n.decode=function(d){var u,h,f,x,g,v,b=0,y=0,j="data:";if(d.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");var w,A=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===o.charAt(64)&&A--,d.charAt(d.length-2)===o.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=l.uint8array?new Uint8Array(0|A):new Array(0|A);b<d.length;)u=o.indexOf(d.charAt(b++))<<2|(x=o.indexOf(d.charAt(b++)))>>4,h=(15&x)<<4|(g=o.indexOf(d.charAt(b++)))>>2,f=(3&g)<<6|(v=o.indexOf(d.charAt(b++))),w[y++]=u,g!==64&&(w[y++]=h),v!==64&&(w[y++]=f);return w}},{"./support":30,"./utils":32}],2:[function(a,r,n){var i=a("./external"),l=a("./stream/DataWorker"),o=a("./stream/Crc32Probe"),d=a("./stream/DataLengthProbe");function u(h,f,x,g,v){this.compressedSize=h,this.uncompressedSize=f,this.crc32=x,this.compression=g,this.compressedContent=v}u.prototype={getContentWorker:function(){var h=new l(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),f=this;return h.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new l(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,f,x){return h.pipe(new o).pipe(new d("uncompressedSize")).pipe(f.compressWorker(x)).pipe(new d("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,r,n){var i=a("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,r,n){var i=a("./utils"),l=(function(){for(var o,d=[],u=0;u<256;u++){o=u;for(var h=0;h<8;h++)o=1&o?3988292384^o>>>1:o>>>1;d[u]=o}return d})();r.exports=function(o,d){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?(function(u,h,f,x){var g=l,v=x+f;u^=-1;for(var b=x;b<v;b++)u=u>>>8^g[255&(u^h[b])];return-1^u})(0|d,o,o.length,0):(function(u,h,f,x){var g=l,v=x+f;u^=-1;for(var b=x;b<v;b++)u=u>>>8^g[255&(u^h.charCodeAt(b))];return-1^u})(0|d,o,o.length,0):0}},{"./utils":32}],5:[function(a,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(a,r,n){var i=null;i=typeof Promise<"u"?Promise:a("lie"),r.exports={Promise:i}},{lie:37}],7:[function(a,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=a("pako"),o=a("./utils"),d=a("./stream/GenericWorker"),u=i?"uint8array":"array";function h(f,x){d.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=x,this.meta={}}n.magic="\b\0",o.inherits(h,d),h.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,f.data),!1)},h.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(x){f.push({data:x,meta:f.meta})}},n.compressWorker=function(f){return new h("Deflate",f)},n.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,r,n){function i(g,v){var b,y="";for(b=0;b<v;b++)y+=String.fromCharCode(255&g),g>>>=8;return y}function l(g,v,b,y,j,w){var A,O,C=g.file,E=g.compression,S=w!==u.utf8encode,D=o.transformTo("string",w(C.name)),M=o.transformTo("string",u.utf8encode(C.name)),U=C.comment,I=o.transformTo("string",w(U)),k=o.transformTo("string",u.utf8encode(U)),z=M.length!==C.name.length,_=k.length!==U.length,q="",L="",Q="",X=C.dir,W=C.date,ee={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(ee.crc32=g.crc32,ee.compressedSize=g.compressedSize,ee.uncompressedSize=g.uncompressedSize);var V=0;v&&(V|=8),S||!z&&!_||(V|=2048);var P=0,Y=0;X&&(P|=16),j==="UNIX"?(Y=798,P|=(function(K,se){var G=K;return K||(G=se?16893:33204),(65535&G)<<16})(C.unixPermissions,X)):(Y=20,P|=(function(K){return 63&(K||0)})(C.dosPermissions)),A=W.getUTCHours(),A<<=6,A|=W.getUTCMinutes(),A<<=5,A|=W.getUTCSeconds()/2,O=W.getUTCFullYear()-1980,O<<=4,O|=W.getUTCMonth()+1,O<<=5,O|=W.getUTCDate(),z&&(L=i(1,1)+i(h(D),4)+M,q+="up"+i(L.length,2)+L),_&&(Q=i(1,1)+i(h(I),4)+k,q+="uc"+i(Q.length,2)+Q);var J="";return J+=`
\0`,J+=i(V,2),J+=E.magic,J+=i(A,2),J+=i(O,2),J+=i(ee.crc32,4),J+=i(ee.compressedSize,4),J+=i(ee.uncompressedSize,4),J+=i(D.length,2),J+=i(q.length,2),{fileRecord:f.LOCAL_FILE_HEADER+J+D+q,dirRecord:f.CENTRAL_FILE_HEADER+i(Y,2)+J+i(I.length,2)+"\0\0\0\0"+i(P,4)+i(y,4)+D+q+I}}var o=a("../utils"),d=a("../stream/GenericWorker"),u=a("../utf8"),h=a("../crc32"),f=a("../signature");function x(g,v,b,y){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=y,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(x,d),x.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,d.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-y-1))/b:100}}))},x.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=l(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=l(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:(function(y){return f.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,y=(function(j,w,A,O,C){var E=o.transformTo("string",C(O));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(j,2)+i(j,2)+i(w,4)+i(A,4)+i(E.length,2)+E})(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},x.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(g){var v=this._sources;if(!d.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},x.prototype.lock=function(){d.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,r,n){var i=a("../compressions"),l=a("./ZipFileWorker");n.generateWorker=function(o,d,u){var h=new l(d.streamFiles,u,d.platform,d.encodeFileName),f=0;try{o.forEach(function(x,g){f++;var v=(function(w,A){var O=w||A,C=i[O];if(!C)throw new Error(O+" is not a valid compression method !");return C})(g.options.compression,d.compression),b=g.options.compressionOptions||d.compressionOptions||{},y=g.dir,j=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:x,dir:y,date:j,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(x){h.error(x)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,r,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new i;for(var o in this)typeof this[o]!="function"&&(l[o]=this[o]);return l}}(i.prototype=a("./object")).loadAsync=a("./load"),i.support=a("./support"),i.defaults=a("./defaults"),i.version="3.10.1",i.loadAsync=function(l,o){return new i().loadAsync(l,o)},i.external=a("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,r,n){var i=a("./utils"),l=a("./external"),o=a("./utf8"),d=a("./zipEntries"),u=a("./stream/Crc32Probe"),h=a("./nodejsUtils");function f(x){return new l.Promise(function(g,v){var b=x.decompressed.getContentWorker().pipe(new u);b.on("error",function(y){v(y)}).on("end",function(){b.streamInfo.crc32!==x.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(x,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),h.isNode&&h.isStream(x)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",x,!0,g.optimizedBinaryString,g.base64).then(function(b){var y=new d(g);return y.load(b),y}).then(function(b){var y=[l.Promise.resolve(b)],j=b.files;if(g.checkCRC32)for(var w=0;w<j.length;w++)y.push(f(j[w]));return l.Promise.all(y)}).then(function(b){for(var y=b.shift(),j=y.files,w=0;w<j.length;w++){var A=j[w],O=A.fileNameStr,C=i.resolve(A.fileNameStr);v.file(C,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:g.createFolders}),A.dir||(v.file(C).unsafeOriginalName=O)}return y.zipComment.length&&(v.comment=y.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,r,n){var i=a("../utils"),l=a("../stream/GenericWorker");function o(d,u){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,l),o.prototype._bindStream=function(d){var u=this;(this._stream=d).pause(),d.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,r,n){var i=a("readable-stream").Readable;function l(o,d,u){i.call(this,d),this._helper=o;var h=this;o.on("data",function(f,x){h.push(f)||h._helper.pause(),u&&u(x)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}a("../utils").inherits(l,i),l.prototype._read=function(){this._helper.resume()},r.exports=l},{"../utils":32,"readable-stream":16}],14:[function(a,r,n){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,l);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,l)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var l=new Buffer(i);return l.fill(0),l},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(a,r,n){function i(C,E,S){var D,M=o.getTypeOf(E),U=o.extend(S||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(C=j(C)),U.createFolders&&(D=y(C))&&w.call(this,D,!0);var I=M==="string"&&U.binary===!1&&U.base64===!1;S&&S.binary!==void 0||(U.binary=!I),(E instanceof f&&E.uncompressedSize===0||U.dir||!E||E.length===0)&&(U.base64=!1,U.binary=!0,E="",U.compression="STORE",M="string");var k=null;k=E instanceof f||E instanceof d?E:v.isNode&&v.isStream(E)?new b(C,E):o.prepareContent(C,E,U.binary,U.optimizedBinaryString,U.base64);var z=new x(C,k,U);this.files[C]=z}var l=a("./utf8"),o=a("./utils"),d=a("./stream/GenericWorker"),u=a("./stream/StreamHelper"),h=a("./defaults"),f=a("./compressedObject"),x=a("./zipObject"),g=a("./generate"),v=a("./nodejsUtils"),b=a("./nodejs/NodejsStreamInputAdapter"),y=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var E=C.lastIndexOf("/");return 0<E?C.substring(0,E):""},j=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,E){return E=E!==void 0?E:h.createFolders,C=j(C),this.files[C]||i.call(this,C,null,{dir:!0,createFolders:E}),this.files[C]};function A(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var E,S,D;for(E in this.files)D=this.files[E],(S=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&C(S,D)},filter:function(C){var E=[];return this.forEach(function(S,D){C(S,D)&&E.push(D)}),E},file:function(C,E,S){if(arguments.length!==1)return C=this.root+C,i.call(this,C,E,S),this;if(A(C)){var D=C;return this.filter(function(U,I){return!I.dir&&D.test(U)})}var M=this.files[this.root+C];return M&&!M.dir?M:null},folder:function(C){if(!C)return this;if(A(C))return this.filter(function(M,U){return U.dir&&C.test(M)});var E=this.root+C,S=w.call(this,E),D=this.clone();return D.root=S.name,D},remove:function(C){C=this.root+C;var E=this.files[C];if(E||(C.slice(-1)!=="/"&&(C+="/"),E=this.files[C]),E&&!E.dir)delete this.files[C];else for(var S=this.filter(function(M,U){return U.name.slice(0,C.length)===C}),D=0;D<S.length;D++)delete this.files[S[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var E,S={};try{if((S=o.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");o.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var D=S.comment||this.comment||"";E=g.generateWorker(this,S,D)}catch(M){(E=new d("error")).error(M)}return new u(E,S.type||"string",S.mimeType)},generateAsync:function(C,E){return this.generateInternalStream(C).accumulate(E)},generateNodeStream:function(C,E){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(E)}};r.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,r,n){r.exports=a("stream")},{stream:void 0}],17:[function(a,r,n){var i=a("./DataReader");function l(o){i.call(this,o);for(var d=0;d<this.data.length;d++)o[d]=255&o[d]}a("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data[this.zero+o]},l.prototype.lastIndexOfSignature=function(o){for(var d=o.charCodeAt(0),u=o.charCodeAt(1),h=o.charCodeAt(2),f=o.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===d&&this.data[x+1]===u&&this.data[x+2]===h&&this.data[x+3]===f)return x-this.zero;return-1},l.prototype.readAndCheckSignature=function(o){var d=o.charCodeAt(0),u=o.charCodeAt(1),h=o.charCodeAt(2),f=o.charCodeAt(3),x=this.readData(4);return d===x[0]&&u===x[1]&&h===x[2]&&f===x[3]},l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./DataReader":18}],18:[function(a,r,n){var i=a("../utils");function l(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var d,u=0;for(this.checkOffset(o),d=this.index+o-1;d>=this.index;d--)u=(u<<8)+this.byteAt(d);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=l},{"../utils":32}],19:[function(a,r,n){var i=a("./Uint8ArrayReader");function l(o){i.call(this,o)}a("../utils").inherits(l,i),l.prototype.readData=function(o){this.checkOffset(o);var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,r,n){var i=a("./DataReader");function l(o){i.call(this,o)}a("../utils").inherits(l,i),l.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},l.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},l.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},l.prototype.readData=function(o){this.checkOffset(o);var d=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./DataReader":18}],21:[function(a,r,n){var i=a("./ArrayReader");function l(o){i.call(this,o)}a("../utils").inherits(l,i),l.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,d},r.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(a,r,n){var i=a("../utils"),l=a("../support"),o=a("./ArrayReader"),d=a("./StringReader"),u=a("./NodeBufferReader"),h=a("./Uint8ArrayReader");r.exports=function(f){var x=i.getTypeOf(f);return i.checkSupport(x),x!=="string"||l.uint8array?x==="nodebuffer"?new u(f):l.uint8array?new h(i.transformTo("uint8array",f)):new o(i.transformTo("array",f)):new d(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,r,n){var i=a("./GenericWorker"),l=a("../utils");function o(d){i.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(o,i),o.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(a,r,n){var i=a("./GenericWorker"),l=a("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(o,i),o.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,r,n){var i=a("../utils"),l=a("./GenericWorker");function o(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}i.inherits(o,l),o.prototype.processChunk=function(d){if(d){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+d.data.length}l.prototype.processChunk.call(this,d)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(a,r,n){var i=a("../utils"),l=a("./GenericWorker");function o(d){l.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=i.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}i.inherits(o,l),o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,u);break;case"uint8array":d=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":d=this.data.slice(this.index,u)}return this.index=u,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(a,r,n){function i(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,o){return this._listeners[l].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,o){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,o)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var o=this;return l.on("data",function(d){o.processChunk(d)}),l.on("end",function(){o.end()}),l.on("error",function(d){o.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,o){return this.extraStreamInfo[l]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},r.exports=i},{}],29:[function(a,r,n){var i=a("../utils"),l=a("./ConvertWorker"),o=a("./GenericWorker"),d=a("../base64"),u=a("../support"),h=a("../external"),f=null;if(u.nodestream)try{f=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(v,b){return new h.Promise(function(y,j){var w=[],A=v._internalType,O=v._outputType,C=v._mimeType;v.on("data",function(E,S){w.push(E),b&&b(S)}).on("error",function(E){w=[],j(E)}).on("end",function(){try{var E=(function(S,D,M){switch(S){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),M);case"base64":return d.encode(D);default:return i.transformTo(S,D)}})(O,(function(S,D){var M,U=0,I=null,k=0;for(M=0;M<D.length;M++)k+=D[M].length;switch(S){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(I=new Uint8Array(k),M=0;M<D.length;M++)I.set(D[M],U),U+=D[M].length;return I;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+S+"'")}})(A,w),C);y(E)}catch(S){j(S)}w=[]}).resume()})}function g(v,b,y){var j=b;switch(b){case"blob":case"arraybuffer":j="uint8array";break;case"base64":j="string"}try{this._internalType=j,this._outputType=b,this._mimeType=y,i.checkSupport(j),this._worker=v.pipe(new l(j)),v.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}g.prototype={accumulate:function(v){return x(this,v)},on:function(v,b){var y=this;return v==="data"?this._worker.on(v,function(j){b.call(y,j.data,j.meta)}):this._worker.on(v,function(){i.delay(b,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(i),n.blob=l.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!a("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(a,r,n){for(var i=a("./utils"),l=a("./support"),o=a("./nodejsUtils"),d=a("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function f(){d.call(this,"utf-8 decode"),this.leftOver=null}function x(){d.call(this,"utf-8 encode")}n.utf8encode=function(g){return l.nodebuffer?o.newBufferFrom(g,"utf-8"):(function(v){var b,y,j,w,A,O=v.length,C=0;for(w=0;w<O;w++)(64512&(y=v.charCodeAt(w)))==55296&&w+1<O&&(64512&(j=v.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(j-56320),w++),C+=y<128?1:y<2048?2:y<65536?3:4;for(b=l.uint8array?new Uint8Array(C):new Array(C),w=A=0;A<C;w++)(64512&(y=v.charCodeAt(w)))==55296&&w+1<O&&(64512&(j=v.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(j-56320),w++),y<128?b[A++]=y:(y<2048?b[A++]=192|y>>>6:(y<65536?b[A++]=224|y>>>12:(b[A++]=240|y>>>18,b[A++]=128|y>>>12&63),b[A++]=128|y>>>6&63),b[A++]=128|63&y);return b})(g)},n.utf8decode=function(g){return l.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):(function(v){var b,y,j,w,A=v.length,O=new Array(2*A);for(b=y=0;b<A;)if((j=v[b++])<128)O[y++]=j;else if(4<(w=u[j]))O[y++]=65533,b+=w-1;else{for(j&=w===2?31:w===3?15:7;1<w&&b<A;)j=j<<6|63&v[b++],w--;1<w?O[y++]=65533:j<65536?O[y++]=j:(j-=65536,O[y++]=55296|j>>10&1023,O[y++]=56320|1023&j)}return O.length!==y&&(O.subarray?O=O.subarray(0,y):O.length=y),i.applyFromCharCode(O)})(g=i.transformTo(l.uint8array?"uint8array":"array",g))},i.inherits(f,d),f.prototype.processChunk=function(g){var v=i.transformTo(l.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var y=(function(w,A){var O;for((A=A||w.length)>w.length&&(A=w.length),O=A-1;0<=O&&(192&w[O])==128;)O--;return O<0||O===0?A:O+u[w[O]]>A?O:A})(v),j=v;y!==v.length&&(l.uint8array?(j=v.subarray(0,y),this.leftOver=v.subarray(y,v.length)):(j=v.slice(0,y),this.leftOver=v.slice(y,v.length))),this.push({data:n.utf8decode(j),meta:g.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=f,i.inherits(x,d),x.prototype.processChunk=function(g){this.push({data:n.utf8encode(g.data),meta:g.meta})},n.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,r,n){var i=a("./support"),l=a("./base64"),o=a("./nodejsUtils"),d=a("./external");function u(b){return b}function h(b,y){for(var j=0;j<b.length;++j)y[j]=255&b.charCodeAt(j);return y}a("setimmediate"),n.newBlob=function(b,y){n.checkSupport("blob");try{return new Blob([b],{type:y})}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return j.append(b),j.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(b,y,j){var w=[],A=0,O=b.length;if(O<=j)return String.fromCharCode.apply(null,b);for(;A<O;)y==="array"||y==="nodebuffer"?w.push(String.fromCharCode.apply(null,b.slice(A,Math.min(A+j,O)))):w.push(String.fromCharCode.apply(null,b.subarray(A,Math.min(A+j,O)))),A+=j;return w.join("")},stringifyByChar:function(b){for(var y="",j=0;j<b.length;j++)y+=String.fromCharCode(b[j]);return y},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function x(b){var y=65536,j=n.getTypeOf(b),w=!0;if(j==="uint8array"?w=f.applyCanBeUsed.uint8array:j==="nodebuffer"&&(w=f.applyCanBeUsed.nodebuffer),w)for(;1<y;)try{return f.stringifyByChunk(b,j,y)}catch{y=Math.floor(y/2)}return f.stringifyByChar(b)}function g(b,y){for(var j=0;j<b.length;j++)y[j]=b[j];return y}n.applyFromCharCode=x;var v={};v.string={string:u,array:function(b){return h(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return h(b,new Uint8Array(b.length))},nodebuffer:function(b){return h(b,o.allocBuffer(b.length))}},v.array={string:x,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return x(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:x,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:x,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},n.transformTo=function(b,y){if(y=y||"",!b)return y;n.checkSupport(b);var j=n.getTypeOf(y);return v[j][b](y)},n.resolve=function(b){for(var y=b.split("/"),j=[],w=0;w<y.length;w++){var A=y[w];A==="."||A===""&&w!==0&&w!==y.length-1||(A===".."?j.pop():j.push(A))}return j.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var y,j,w="";for(j=0;j<(b||"").length;j++)w+="\\x"+((y=b.charCodeAt(j))<16?"0":"")+y.toString(16).toUpperCase();return w},n.delay=function(b,y,j){setImmediate(function(){b.apply(j||null,y||[])})},n.inherits=function(b,y){function j(){}j.prototype=y.prototype,b.prototype=new j},n.extend=function(){var b,y,j={};for(b=0;b<arguments.length;b++)for(y in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],y)&&j[y]===void 0&&(j[y]=arguments[b][y]);return j},n.prepareContent=function(b,y,j,w,A){return d.Promise.resolve(y).then(function(O){return i.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new d.Promise(function(C,E){var S=new FileReader;S.onload=function(D){C(D.target.result)},S.onerror=function(D){E(D.target.error)},S.readAsArrayBuffer(O)}):O}).then(function(O){var C=n.getTypeOf(O);return C?(C==="arraybuffer"?O=n.transformTo("uint8array",O):C==="string"&&(A?O=l.decode(O):j&&w!==!0&&(O=(function(E){return h(E,i.uint8array?new Uint8Array(E.length):new Array(E.length))})(O))),O):d.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,r,n){var i=a("./reader/readerFor"),l=a("./utils"),o=a("./signature"),d=a("./zipEntry"),u=a("./support");function h(f){this.files=[],this.loadOptions=f}h.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(x)+", expected "+l.pretty(f)+")")}},isSignature:function(f,x){var g=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===x;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),x=u.uint8array?"uint8array":"array",g=l.transformTo(x,f);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,x,g,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),x=this.reader.readInt(4),g=this.reader.readData(x),this.zip64ExtensibleData[f]={id:f,length:x,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,x;for(f=0;f<this.files.length;f++)x=this.files[f],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var x=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=x-g;if(0<v)this.isSignature(x,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,r,n){var i=a("./reader/readerFor"),l=a("./utils"),o=a("./compressedObject"),d=a("./crc32"),u=a("./utf8"),h=a("./compressions"),f=a("./support");function x(g,v){this.options=g,this.loadOptions=v}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=(function(y){for(var j in h)if(Object.prototype.hasOwnProperty.call(h,j)&&h[j].magic===y)return h[j];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,y,j=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<j;)v=g.readInt(2),b=g.readInt(2),y=g.readData(b),this.extraFields[v]={id:v,length:b,value:y};g.setIndex(j)},handleUTF8:function(){var g=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=l.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var j=l.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(j)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||d(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||d(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null}},r.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,r,n){function i(v,b,y){this.name=v,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=b,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var l=a("./stream/StreamHelper"),o=a("./stream/DataWorker"),d=a("./utf8"),u=a("./compressedObject"),h=a("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,y="string";try{if(!v)throw new Error("No output type specified.");var j=(y=v.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),b=this._decompressWorker();var w=!this._dataBinary;w&&!j&&(b=b.pipe(new d.Utf8EncodeWorker)),!w&&j&&(b=b.pipe(new d.Utf8DecodeWorker))}catch(A){(b=new h("error")).error(A)}return new l(b,y,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new d.Utf8EncodeWorker)),u.createWorkerFrom(y,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<f.length;g++)i.prototype[f[g]]=x;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,r,n){(function(i){var l,o,d=i.MutationObserver||i.WebKitMutationObserver;if(d){var u=0,h=new d(v),f=i.document.createTextNode("");h.observe(f,{characterData:!0}),l=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)l="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var x=new i.MessageChannel;x.port1.onmessage=v,l=function(){x.port2.postMessage(0)}}var g=[];function v(){var b,y;o=!0;for(var j=g.length;j;){for(y=g,g=[],b=-1;++b<j;)y[b]();j=g.length}o=!1}r.exports=function(b){g.push(b)!==1||o||l()}}).call(this,typeof _o<"u"?_o:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,r,n){var i=a("immediate");function l(){}var o={},d=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function f(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,j!==l&&b(this,j)}function x(j,w,A){this.promise=j,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function g(j,w,A){i(function(){var O;try{O=w(A)}catch(C){return o.reject(j,C)}O===j?o.reject(j,new TypeError("Cannot resolve promise with itself")):o.resolve(j,O)})}function v(j){var w=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof w=="function")return function(){w.apply(j,arguments)}}function b(j,w){var A=!1;function O(S){A||(A=!0,o.reject(j,S))}function C(S){A||(A=!0,o.resolve(j,S))}var E=y(function(){w(C,O)});E.status==="error"&&O(E.value)}function y(j,w){var A={};try{A.value=j(w),A.status="success"}catch(O){A.status="error",A.value=O}return A}(r.exports=f).prototype.finally=function(j){if(typeof j!="function")return this;var w=this.constructor;return this.then(function(A){return w.resolve(j()).then(function(){return A})},function(A){return w.resolve(j()).then(function(){throw A})})},f.prototype.catch=function(j){return this.then(null,j)},f.prototype.then=function(j,w){if(typeof j!="function"&&this.state===u||typeof w!="function"&&this.state===d)return this;var A=new this.constructor(l);return this.state!==h?g(A,this.state===u?j:w,this.outcome):this.queue.push(new x(A,j,w)),A},x.prototype.callFulfilled=function(j){o.resolve(this.promise,j)},x.prototype.otherCallFulfilled=function(j){g(this.promise,this.onFulfilled,j)},x.prototype.callRejected=function(j){o.reject(this.promise,j)},x.prototype.otherCallRejected=function(j){g(this.promise,this.onRejected,j)},o.resolve=function(j,w){var A=y(v,w);if(A.status==="error")return o.reject(j,A.value);var O=A.value;if(O)b(j,O);else{j.state=u,j.outcome=w;for(var C=-1,E=j.queue.length;++C<E;)j.queue[C].callFulfilled(w)}return j},o.reject=function(j,w){j.state=d,j.outcome=w;for(var A=-1,O=j.queue.length;++A<O;)j.queue[A].callRejected(w);return j},f.resolve=function(j){return j instanceof this?j:o.resolve(new this(l),j)},f.reject=function(j){var w=new this(l);return o.reject(w,j)},f.all=function(j){var w=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=j.length,O=!1;if(!A)return this.resolve([]);for(var C=new Array(A),E=0,S=-1,D=new this(l);++S<A;)M(j[S],S);return D;function M(U,I){w.resolve(U).then(function(k){C[I]=k,++E!==A||O||(O=!0,o.resolve(D,C))},function(k){O||(O=!0,o.reject(D,k))})}},f.race=function(j){var w=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=j.length,O=!1;if(!A)return this.resolve([]);for(var C=-1,E=new this(l);++C<A;)S=j[C],w.resolve(S).then(function(D){O||(O=!0,o.resolve(E,D))},function(D){O||(O=!0,o.reject(E,D))});var S;return E}},{immediate:36}],38:[function(a,r,n){var i={};(0,a("./lib/utils/common").assign)(i,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,r,n){var i=a("./zlib/deflate"),l=a("./utils/common"),o=a("./utils/strings"),d=a("./zlib/messages"),u=a("./zlib/zstream"),h=Object.prototype.toString,f=0,x=-1,g=0,v=8;function b(j){if(!(this instanceof b))return new b(j);this.options=l.assign({level:x,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},j||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var A=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(A!==f)throw new Error(d[A]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var O;if(O=typeof w.dictionary=="string"?o.string2buf(w.dictionary):h.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(A=i.deflateSetDictionary(this.strm,O))!==f)throw new Error(d[A]);this._dict_set=!0}}function y(j,w){var A=new b(w);if(A.push(j,!0),A.err)throw A.msg||d[A.err];return A.result}b.prototype.push=function(j,w){var A,O,C=this.strm,E=this.options.chunkSize;if(this.ended)return!1;O=w===~~w?w:w===!0?4:0,typeof j=="string"?C.input=o.string2buf(j):h.call(j)==="[object ArrayBuffer]"?C.input=new Uint8Array(j):C.input=j,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new l.Buf8(E),C.next_out=0,C.avail_out=E),(A=i.deflate(C,O))!==1&&A!==f)return this.onEnd(A),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(l.shrinkBuf(C.output,C.next_out))):this.onData(l.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&A!==1);return O===4?(A=i.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===f):O!==2||(this.onEnd(f),!(C.avail_out=0))},b.prototype.onData=function(j){this.chunks.push(j)},b.prototype.onEnd=function(j){j===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},n.Deflate=b,n.deflate=y,n.deflateRaw=function(j,w){return(w=w||{}).raw=!0,y(j,w)},n.gzip=function(j,w){return(w=w||{}).gzip=!0,y(j,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,r,n){var i=a("./zlib/inflate"),l=a("./utils/common"),o=a("./utils/strings"),d=a("./zlib/constants"),u=a("./zlib/messages"),h=a("./zlib/zstream"),f=a("./zlib/gzheader"),x=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},b||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||b&&b.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var j=i.inflateInit2(this.strm,y.windowBits);if(j!==d.Z_OK)throw new Error(u[j]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function v(b,y){var j=new g(y);if(j.push(b,!0),j.err)throw j.msg||u[j.err];return j.result}g.prototype.push=function(b,y){var j,w,A,O,C,E,S=this.strm,D=this.options.chunkSize,M=this.options.dictionary,U=!1;if(this.ended)return!1;w=y===~~y?y:y===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof b=="string"?S.input=o.binstring2buf(b):x.call(b)==="[object ArrayBuffer]"?S.input=new Uint8Array(b):S.input=b,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new l.Buf8(D),S.next_out=0,S.avail_out=D),(j=i.inflate(S,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&M&&(E=typeof M=="string"?o.string2buf(M):x.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,j=i.inflateSetDictionary(this.strm,E)),j===d.Z_BUF_ERROR&&U===!0&&(j=d.Z_OK,U=!1),j!==d.Z_STREAM_END&&j!==d.Z_OK)return this.onEnd(j),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&j!==d.Z_STREAM_END&&(S.avail_in!==0||w!==d.Z_FINISH&&w!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=o.utf8border(S.output,S.next_out),O=S.next_out-A,C=o.buf2string(S.output,A),S.next_out=O,S.avail_out=D-O,O&&l.arraySet(S.output,S.output,A,O,0),this.onData(C)):this.onData(l.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(U=!0)}while((0<S.avail_in||S.avail_out===0)&&j!==d.Z_STREAM_END);return j===d.Z_STREAM_END&&(w=d.Z_FINISH),w===d.Z_FINISH?(j=i.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===d.Z_OK):w!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(S.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=g,n.inflate=v,n.inflateRaw=function(b,y){return(y=y||{}).raw=!0,v(b,y)},n.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,r,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(d){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])}}return d},n.shrinkBuf=function(d,u){return d.length===u?d:d.subarray?d.subarray(0,u):(d.length=u,d)};var l={arraySet:function(d,u,h,f,x){if(u.subarray&&d.subarray)d.set(u.subarray(h,h+f),x);else for(var g=0;g<f;g++)d[x+g]=u[h+g]},flattenChunks:function(d){var u,h,f,x,g,v;for(u=f=0,h=d.length;u<h;u++)f+=d[u].length;for(v=new Uint8Array(f),u=x=0,h=d.length;u<h;u++)g=d[u],v.set(g,x),x+=g.length;return v}},o={arraySet:function(d,u,h,f,x){for(var g=0;g<f;g++)d[x+g]=u[h+g]},flattenChunks:function(d){return[].concat.apply([],d)}};n.setTyped=function(d){d?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,l)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(a,r,n){var i=a("./common"),l=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var d=new i.Buf8(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(f,x){if(x<65537&&(f.subarray&&o||!f.subarray&&l))return String.fromCharCode.apply(null,i.shrinkBuf(f,x));for(var g="",v=0;v<x;v++)g+=String.fromCharCode(f[v]);return g}d[254]=d[254]=1,n.string2buf=function(f){var x,g,v,b,y,j=f.length,w=0;for(b=0;b<j;b++)(64512&(g=f.charCodeAt(b)))==55296&&b+1<j&&(64512&(v=f.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),w+=g<128?1:g<2048?2:g<65536?3:4;for(x=new i.Buf8(w),b=y=0;y<w;b++)(64512&(g=f.charCodeAt(b)))==55296&&b+1<j&&(64512&(v=f.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?x[y++]=g:(g<2048?x[y++]=192|g>>>6:(g<65536?x[y++]=224|g>>>12:(x[y++]=240|g>>>18,x[y++]=128|g>>>12&63),x[y++]=128|g>>>6&63),x[y++]=128|63&g);return x},n.buf2binstring=function(f){return h(f,f.length)},n.binstring2buf=function(f){for(var x=new i.Buf8(f.length),g=0,v=x.length;g<v;g++)x[g]=f.charCodeAt(g);return x},n.buf2string=function(f,x){var g,v,b,y,j=x||f.length,w=new Array(2*j);for(g=v=0;g<j;)if((b=f[g++])<128)w[v++]=b;else if(4<(y=d[b]))w[v++]=65533,g+=y-1;else{for(b&=y===2?31:y===3?15:7;1<y&&g<j;)b=b<<6|63&f[g++],y--;1<y?w[v++]=65533:b<65536?w[v++]=b:(b-=65536,w[v++]=55296|b>>10&1023,w[v++]=56320|1023&b)}return h(w,v)},n.utf8border=function(f,x){var g;for((x=x||f.length)>f.length&&(x=f.length),g=x-1;0<=g&&(192&f[g])==128;)g--;return g<0||g===0?x:g+d[f[g]]>x?g:x}},{"./common":41}],43:[function(a,r,n){r.exports=function(i,l,o,d){for(var u=65535&i|0,h=i>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;h=h+(u=u+l[d++]|0)|0,--f;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(a,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,r,n){var i=(function(){for(var l,o=[],d=0;d<256;d++){l=d;for(var u=0;u<8;u++)l=1&l?3988292384^l>>>1:l>>>1;o[d]=l}return o})();r.exports=function(l,o,d,u){var h=i,f=u+d;l^=-1;for(var x=u;x<f;x++)l=l>>>8^h[255&(l^o[x])];return-1^l}},{}],46:[function(a,r,n){var i,l=a("../utils/common"),o=a("./trees"),d=a("./adler32"),u=a("./crc32"),h=a("./messages"),f=0,x=4,g=0,v=-2,b=-1,y=4,j=2,w=8,A=9,O=286,C=30,E=19,S=2*O+1,D=15,M=3,U=258,I=U+M+1,k=42,z=113,_=1,q=2,L=3,Q=4;function X(B,oe){return B.msg=h[oe],oe}function W(B){return(B<<1)-(4<B?9:0)}function ee(B){for(var oe=B.length;0<=--oe;)B[oe]=0}function V(B){var oe=B.state,fe=oe.pending;fe>B.avail_out&&(fe=B.avail_out),fe!==0&&(l.arraySet(B.output,oe.pending_buf,oe.pending_out,fe,B.next_out),B.next_out+=fe,oe.pending_out+=fe,B.total_out+=fe,B.avail_out-=fe,oe.pending-=fe,oe.pending===0&&(oe.pending_out=0))}function P(B,oe){o._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,oe),B.block_start=B.strstart,V(B.strm)}function Y(B,oe){B.pending_buf[B.pending++]=oe}function J(B,oe){B.pending_buf[B.pending++]=oe>>>8&255,B.pending_buf[B.pending++]=255&oe}function K(B,oe){var fe,ne,de=B.max_chain_length,we=B.strstart,Ue=B.prev_length,qe=B.nice_match,Ce=B.strstart>B.w_size-I?B.strstart-(B.w_size-I):0,Le=B.window,Se=B.w_mask,_e=B.prev,Ze=B.strstart+U,Mt=Le[we+Ue-1],lt=Le[we+Ue];B.prev_length>=B.good_match&&(de>>=2),qe>B.lookahead&&(qe=B.lookahead);do if(Le[(fe=oe)+Ue]===lt&&Le[fe+Ue-1]===Mt&&Le[fe]===Le[we]&&Le[++fe]===Le[we+1]){we+=2,fe++;do;while(Le[++we]===Le[++fe]&&Le[++we]===Le[++fe]&&Le[++we]===Le[++fe]&&Le[++we]===Le[++fe]&&Le[++we]===Le[++fe]&&Le[++we]===Le[++fe]&&Le[++we]===Le[++fe]&&Le[++we]===Le[++fe]&&we<Ze);if(ne=U-(Ze-we),we=Ze-U,Ue<ne){if(B.match_start=oe,qe<=(Ue=ne))break;Mt=Le[we+Ue-1],lt=Le[we+Ue]}}while((oe=_e[oe&Se])>Ce&&--de!=0);return Ue<=B.lookahead?Ue:B.lookahead}function se(B){var oe,fe,ne,de,we,Ue,qe,Ce,Le,Se,_e=B.w_size;do{if(de=B.window_size-B.lookahead-B.strstart,B.strstart>=_e+(_e-I)){for(l.arraySet(B.window,B.window,_e,_e,0),B.match_start-=_e,B.strstart-=_e,B.block_start-=_e,oe=fe=B.hash_size;ne=B.head[--oe],B.head[oe]=_e<=ne?ne-_e:0,--fe;);for(oe=fe=_e;ne=B.prev[--oe],B.prev[oe]=_e<=ne?ne-_e:0,--fe;);de+=_e}if(B.strm.avail_in===0)break;if(Ue=B.strm,qe=B.window,Ce=B.strstart+B.lookahead,Le=de,Se=void 0,Se=Ue.avail_in,Le<Se&&(Se=Le),fe=Se===0?0:(Ue.avail_in-=Se,l.arraySet(qe,Ue.input,Ue.next_in,Se,Ce),Ue.state.wrap===1?Ue.adler=d(Ue.adler,qe,Se,Ce):Ue.state.wrap===2&&(Ue.adler=u(Ue.adler,qe,Se,Ce)),Ue.next_in+=Se,Ue.total_in+=Se,Se),B.lookahead+=fe,B.lookahead+B.insert>=M)for(we=B.strstart-B.insert,B.ins_h=B.window[we],B.ins_h=(B.ins_h<<B.hash_shift^B.window[we+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[we+M-1])&B.hash_mask,B.prev[we&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=we,we++,B.insert--,!(B.lookahead+B.insert<M)););}while(B.lookahead<I&&B.strm.avail_in!==0)}function G(B,oe){for(var fe,ne;;){if(B.lookahead<I){if(se(B),B.lookahead<I&&oe===f)return _;if(B.lookahead===0)break}if(fe=0,B.lookahead>=M&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,fe=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),fe!==0&&B.strstart-fe<=B.w_size-I&&(B.match_length=K(B,fe)),B.match_length>=M)if(ne=o._tr_tally(B,B.strstart-B.match_start,B.match_length-M),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=M){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,fe=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else ne=o._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(ne&&(P(B,!1),B.strm.avail_out===0))return _}return B.insert=B.strstart<M-1?B.strstart:M-1,oe===x?(P(B,!0),B.strm.avail_out===0?L:Q):B.last_lit&&(P(B,!1),B.strm.avail_out===0)?_:q}function te(B,oe){for(var fe,ne,de;;){if(B.lookahead<I){if(se(B),B.lookahead<I&&oe===f)return _;if(B.lookahead===0)break}if(fe=0,B.lookahead>=M&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,fe=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=M-1,fe!==0&&B.prev_length<B.max_lazy_match&&B.strstart-fe<=B.w_size-I&&(B.match_length=K(B,fe),B.match_length<=5&&(B.strategy===1||B.match_length===M&&4096<B.strstart-B.match_start)&&(B.match_length=M-1)),B.prev_length>=M&&B.match_length<=B.prev_length){for(de=B.strstart+B.lookahead-M,ne=o._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-M),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=de&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,fe=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=M-1,B.strstart++,ne&&(P(B,!1),B.strm.avail_out===0))return _}else if(B.match_available){if((ne=o._tr_tally(B,0,B.window[B.strstart-1]))&&P(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return _}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(ne=o._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<M-1?B.strstart:M-1,oe===x?(P(B,!0),B.strm.avail_out===0?L:Q):B.last_lit&&(P(B,!1),B.strm.avail_out===0)?_:q}function Z(B,oe,fe,ne,de){this.good_length=B,this.max_lazy=oe,this.nice_length=fe,this.max_chain=ne,this.func=de}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*S),this.dyn_dtree=new l.Buf16(2*(2*C+1)),this.bl_tree=new l.Buf16(2*(2*E+1)),ee(this.dyn_ltree),ee(this.dyn_dtree),ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(D+1),this.heap=new l.Buf16(2*O+1),ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*O+1),ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function re(B){var oe;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=j,(oe=B.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?k:z,B.adler=oe.wrap===2?0:1,oe.last_flush=f,o._tr_init(oe),g):X(B,v)}function H(B){var oe=re(B);return oe===g&&(function(fe){fe.window_size=2*fe.w_size,ee(fe.head),fe.max_lazy_match=i[fe.level].max_lazy,fe.good_match=i[fe.level].good_length,fe.nice_match=i[fe.level].nice_length,fe.max_chain_length=i[fe.level].max_chain,fe.strstart=0,fe.block_start=0,fe.lookahead=0,fe.insert=0,fe.match_length=fe.prev_length=M-1,fe.match_available=0,fe.ins_h=0})(B.state),oe}function pe(B,oe,fe,ne,de,we){if(!B)return v;var Ue=1;if(oe===b&&(oe=6),ne<0?(Ue=0,ne=-ne):15<ne&&(Ue=2,ne-=16),de<1||A<de||fe!==w||ne<8||15<ne||oe<0||9<oe||we<0||y<we)return X(B,v);ne===8&&(ne=9);var qe=new ue;return(B.state=qe).strm=B,qe.wrap=Ue,qe.gzhead=null,qe.w_bits=ne,qe.w_size=1<<qe.w_bits,qe.w_mask=qe.w_size-1,qe.hash_bits=de+7,qe.hash_size=1<<qe.hash_bits,qe.hash_mask=qe.hash_size-1,qe.hash_shift=~~((qe.hash_bits+M-1)/M),qe.window=new l.Buf8(2*qe.w_size),qe.head=new l.Buf16(qe.hash_size),qe.prev=new l.Buf16(qe.w_size),qe.lit_bufsize=1<<de+6,qe.pending_buf_size=4*qe.lit_bufsize,qe.pending_buf=new l.Buf8(qe.pending_buf_size),qe.d_buf=1*qe.lit_bufsize,qe.l_buf=3*qe.lit_bufsize,qe.level=oe,qe.strategy=we,qe.method=fe,H(B)}i=[new Z(0,0,0,0,function(B,oe){var fe=65535;for(fe>B.pending_buf_size-5&&(fe=B.pending_buf_size-5);;){if(B.lookahead<=1){if(se(B),B.lookahead===0&&oe===f)return _;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var ne=B.block_start+fe;if((B.strstart===0||B.strstart>=ne)&&(B.lookahead=B.strstart-ne,B.strstart=ne,P(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-I&&(P(B,!1),B.strm.avail_out===0))return _}return B.insert=0,oe===x?(P(B,!0),B.strm.avail_out===0?L:Q):(B.strstart>B.block_start&&(P(B,!1),B.strm.avail_out),_)}),new Z(4,4,8,4,G),new Z(4,5,16,8,G),new Z(4,6,32,32,G),new Z(4,4,16,16,te),new Z(8,16,32,32,te),new Z(8,16,128,128,te),new Z(8,32,128,256,te),new Z(32,128,258,1024,te),new Z(32,258,258,4096,te)],n.deflateInit=function(B,oe){return pe(B,oe,w,15,8,0)},n.deflateInit2=pe,n.deflateReset=H,n.deflateResetKeep=re,n.deflateSetHeader=function(B,oe){return B&&B.state?B.state.wrap!==2?v:(B.state.gzhead=oe,g):v},n.deflate=function(B,oe){var fe,ne,de,we;if(!B||!B.state||5<oe||oe<0)return B?X(B,v):v;if(ne=B.state,!B.output||!B.input&&B.avail_in!==0||ne.status===666&&oe!==x)return X(B,B.avail_out===0?-5:v);if(ne.strm=B,fe=ne.last_flush,ne.last_flush=oe,ne.status===k)if(ne.wrap===2)B.adler=0,Y(ne,31),Y(ne,139),Y(ne,8),ne.gzhead?(Y(ne,(ne.gzhead.text?1:0)+(ne.gzhead.hcrc?2:0)+(ne.gzhead.extra?4:0)+(ne.gzhead.name?8:0)+(ne.gzhead.comment?16:0)),Y(ne,255&ne.gzhead.time),Y(ne,ne.gzhead.time>>8&255),Y(ne,ne.gzhead.time>>16&255),Y(ne,ne.gzhead.time>>24&255),Y(ne,ne.level===9?2:2<=ne.strategy||ne.level<2?4:0),Y(ne,255&ne.gzhead.os),ne.gzhead.extra&&ne.gzhead.extra.length&&(Y(ne,255&ne.gzhead.extra.length),Y(ne,ne.gzhead.extra.length>>8&255)),ne.gzhead.hcrc&&(B.adler=u(B.adler,ne.pending_buf,ne.pending,0)),ne.gzindex=0,ne.status=69):(Y(ne,0),Y(ne,0),Y(ne,0),Y(ne,0),Y(ne,0),Y(ne,ne.level===9?2:2<=ne.strategy||ne.level<2?4:0),Y(ne,3),ne.status=z);else{var Ue=w+(ne.w_bits-8<<4)<<8;Ue|=(2<=ne.strategy||ne.level<2?0:ne.level<6?1:ne.level===6?2:3)<<6,ne.strstart!==0&&(Ue|=32),Ue+=31-Ue%31,ne.status=z,J(ne,Ue),ne.strstart!==0&&(J(ne,B.adler>>>16),J(ne,65535&B.adler)),B.adler=1}if(ne.status===69)if(ne.gzhead.extra){for(de=ne.pending;ne.gzindex<(65535&ne.gzhead.extra.length)&&(ne.pending!==ne.pending_buf_size||(ne.gzhead.hcrc&&ne.pending>de&&(B.adler=u(B.adler,ne.pending_buf,ne.pending-de,de)),V(B),de=ne.pending,ne.pending!==ne.pending_buf_size));)Y(ne,255&ne.gzhead.extra[ne.gzindex]),ne.gzindex++;ne.gzhead.hcrc&&ne.pending>de&&(B.adler=u(B.adler,ne.pending_buf,ne.pending-de,de)),ne.gzindex===ne.gzhead.extra.length&&(ne.gzindex=0,ne.status=73)}else ne.status=73;if(ne.status===73)if(ne.gzhead.name){de=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>de&&(B.adler=u(B.adler,ne.pending_buf,ne.pending-de,de)),V(B),de=ne.pending,ne.pending===ne.pending_buf_size)){we=1;break}we=ne.gzindex<ne.gzhead.name.length?255&ne.gzhead.name.charCodeAt(ne.gzindex++):0,Y(ne,we)}while(we!==0);ne.gzhead.hcrc&&ne.pending>de&&(B.adler=u(B.adler,ne.pending_buf,ne.pending-de,de)),we===0&&(ne.gzindex=0,ne.status=91)}else ne.status=91;if(ne.status===91)if(ne.gzhead.comment){de=ne.pending;do{if(ne.pending===ne.pending_buf_size&&(ne.gzhead.hcrc&&ne.pending>de&&(B.adler=u(B.adler,ne.pending_buf,ne.pending-de,de)),V(B),de=ne.pending,ne.pending===ne.pending_buf_size)){we=1;break}we=ne.gzindex<ne.gzhead.comment.length?255&ne.gzhead.comment.charCodeAt(ne.gzindex++):0,Y(ne,we)}while(we!==0);ne.gzhead.hcrc&&ne.pending>de&&(B.adler=u(B.adler,ne.pending_buf,ne.pending-de,de)),we===0&&(ne.status=103)}else ne.status=103;if(ne.status===103&&(ne.gzhead.hcrc?(ne.pending+2>ne.pending_buf_size&&V(B),ne.pending+2<=ne.pending_buf_size&&(Y(ne,255&B.adler),Y(ne,B.adler>>8&255),B.adler=0,ne.status=z)):ne.status=z),ne.pending!==0){if(V(B),B.avail_out===0)return ne.last_flush=-1,g}else if(B.avail_in===0&&W(oe)<=W(fe)&&oe!==x)return X(B,-5);if(ne.status===666&&B.avail_in!==0)return X(B,-5);if(B.avail_in!==0||ne.lookahead!==0||oe!==f&&ne.status!==666){var qe=ne.strategy===2?(function(Ce,Le){for(var Se;;){if(Ce.lookahead===0&&(se(Ce),Ce.lookahead===0)){if(Le===f)return _;break}if(Ce.match_length=0,Se=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++,Se&&(P(Ce,!1),Ce.strm.avail_out===0))return _}return Ce.insert=0,Le===x?(P(Ce,!0),Ce.strm.avail_out===0?L:Q):Ce.last_lit&&(P(Ce,!1),Ce.strm.avail_out===0)?_:q})(ne,oe):ne.strategy===3?(function(Ce,Le){for(var Se,_e,Ze,Mt,lt=Ce.window;;){if(Ce.lookahead<=U){if(se(Ce),Ce.lookahead<=U&&Le===f)return _;if(Ce.lookahead===0)break}if(Ce.match_length=0,Ce.lookahead>=M&&0<Ce.strstart&&(_e=lt[Ze=Ce.strstart-1])===lt[++Ze]&&_e===lt[++Ze]&&_e===lt[++Ze]){Mt=Ce.strstart+U;do;while(_e===lt[++Ze]&&_e===lt[++Ze]&&_e===lt[++Ze]&&_e===lt[++Ze]&&_e===lt[++Ze]&&_e===lt[++Ze]&&_e===lt[++Ze]&&_e===lt[++Ze]&&Ze<Mt);Ce.match_length=U-(Mt-Ze),Ce.match_length>Ce.lookahead&&(Ce.match_length=Ce.lookahead)}if(Ce.match_length>=M?(Se=o._tr_tally(Ce,1,Ce.match_length-M),Ce.lookahead-=Ce.match_length,Ce.strstart+=Ce.match_length,Ce.match_length=0):(Se=o._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++),Se&&(P(Ce,!1),Ce.strm.avail_out===0))return _}return Ce.insert=0,Le===x?(P(Ce,!0),Ce.strm.avail_out===0?L:Q):Ce.last_lit&&(P(Ce,!1),Ce.strm.avail_out===0)?_:q})(ne,oe):i[ne.level].func(ne,oe);if(qe!==L&&qe!==Q||(ne.status=666),qe===_||qe===L)return B.avail_out===0&&(ne.last_flush=-1),g;if(qe===q&&(oe===1?o._tr_align(ne):oe!==5&&(o._tr_stored_block(ne,0,0,!1),oe===3&&(ee(ne.head),ne.lookahead===0&&(ne.strstart=0,ne.block_start=0,ne.insert=0))),V(B),B.avail_out===0))return ne.last_flush=-1,g}return oe!==x?g:ne.wrap<=0?1:(ne.wrap===2?(Y(ne,255&B.adler),Y(ne,B.adler>>8&255),Y(ne,B.adler>>16&255),Y(ne,B.adler>>24&255),Y(ne,255&B.total_in),Y(ne,B.total_in>>8&255),Y(ne,B.total_in>>16&255),Y(ne,B.total_in>>24&255)):(J(ne,B.adler>>>16),J(ne,65535&B.adler)),V(B),0<ne.wrap&&(ne.wrap=-ne.wrap),ne.pending!==0?g:1)},n.deflateEnd=function(B){var oe;return B&&B.state?(oe=B.state.status)!==k&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==z&&oe!==666?X(B,v):(B.state=null,oe===z?X(B,-3):g):v},n.deflateSetDictionary=function(B,oe){var fe,ne,de,we,Ue,qe,Ce,Le,Se=oe.length;if(!B||!B.state||(we=(fe=B.state).wrap)===2||we===1&&fe.status!==k||fe.lookahead)return v;for(we===1&&(B.adler=d(B.adler,oe,Se,0)),fe.wrap=0,Se>=fe.w_size&&(we===0&&(ee(fe.head),fe.strstart=0,fe.block_start=0,fe.insert=0),Le=new l.Buf8(fe.w_size),l.arraySet(Le,oe,Se-fe.w_size,fe.w_size,0),oe=Le,Se=fe.w_size),Ue=B.avail_in,qe=B.next_in,Ce=B.input,B.avail_in=Se,B.next_in=0,B.input=oe,se(fe);fe.lookahead>=M;){for(ne=fe.strstart,de=fe.lookahead-(M-1);fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[ne+M-1])&fe.hash_mask,fe.prev[ne&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=ne,ne++,--de;);fe.strstart=ne,fe.lookahead=M-1,se(fe)}return fe.strstart+=fe.lookahead,fe.block_start=fe.strstart,fe.insert=fe.lookahead,fe.lookahead=0,fe.match_length=fe.prev_length=M-1,fe.match_available=0,B.next_in=qe,B.input=Ce,B.avail_in=Ue,fe.wrap=we,g},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,r,n){r.exports=function(i,l){var o,d,u,h,f,x,g,v,b,y,j,w,A,O,C,E,S,D,M,U,I,k,z,_,q;o=i.state,d=i.next_in,_=i.input,u=d+(i.avail_in-5),h=i.next_out,q=i.output,f=h-(l-i.avail_out),x=h+(i.avail_out-257),g=o.dmax,v=o.wsize,b=o.whave,y=o.wnext,j=o.window,w=o.hold,A=o.bits,O=o.lencode,C=o.distcode,E=(1<<o.lenbits)-1,S=(1<<o.distbits)-1;e:do{A<15&&(w+=_[d++]<<A,A+=8,w+=_[d++]<<A,A+=8),D=O[w&E];t:for(;;){if(w>>>=M=D>>>24,A-=M,(M=D>>>16&255)===0)q[h++]=65535&D;else{if(!(16&M)){if((64&M)==0){D=O[(65535&D)+(w&(1<<M)-1)];continue t}if(32&M){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}U=65535&D,(M&=15)&&(A<M&&(w+=_[d++]<<A,A+=8),U+=w&(1<<M)-1,w>>>=M,A-=M),A<15&&(w+=_[d++]<<A,A+=8,w+=_[d++]<<A,A+=8),D=C[w&S];s:for(;;){if(w>>>=M=D>>>24,A-=M,!(16&(M=D>>>16&255))){if((64&M)==0){D=C[(65535&D)+(w&(1<<M)-1)];continue s}i.msg="invalid distance code",o.mode=30;break e}if(I=65535&D,A<(M&=15)&&(w+=_[d++]<<A,(A+=8)<M&&(w+=_[d++]<<A,A+=8)),g<(I+=w&(1<<M)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=M,A-=M,(M=h-f)<I){if(b<(M=I-M)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(z=j,(k=0)===y){if(k+=v-M,M<U){for(U-=M;q[h++]=j[k++],--M;);k=h-I,z=q}}else if(y<M){if(k+=v+y-M,(M-=y)<U){for(U-=M;q[h++]=j[k++],--M;);if(k=0,y<U){for(U-=M=y;q[h++]=j[k++],--M;);k=h-I,z=q}}}else if(k+=y-M,M<U){for(U-=M;q[h++]=j[k++],--M;);k=h-I,z=q}for(;2<U;)q[h++]=z[k++],q[h++]=z[k++],q[h++]=z[k++],U-=3;U&&(q[h++]=z[k++],1<U&&(q[h++]=z[k++]))}else{for(k=h-I;q[h++]=q[k++],q[h++]=q[k++],q[h++]=q[k++],2<(U-=3););U&&(q[h++]=q[k++],1<U&&(q[h++]=q[k++]))}break}}break}}while(d<u&&h<x);d-=U=A>>3,w&=(1<<(A-=U<<3))-1,i.next_in=d,i.next_out=h,i.avail_in=d<u?u-d+5:5-(d-u),i.avail_out=h<x?x-h+257:257-(h-x),o.hold=w,o.bits=A}},{}],49:[function(a,r,n){var i=a("../utils/common"),l=a("./adler32"),o=a("./crc32"),d=a("./inffast"),u=a("./inftrees"),h=1,f=2,x=0,g=-2,v=1,b=852,y=592;function j(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(k){var z;return k&&k.state?(z=k.state,k.total_in=k.total_out=z.total=0,k.msg="",z.wrap&&(k.adler=1&z.wrap),z.mode=v,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new i.Buf32(b),z.distcode=z.distdyn=new i.Buf32(y),z.sane=1,z.back=-1,x):g}function O(k){var z;return k&&k.state?((z=k.state).wsize=0,z.whave=0,z.wnext=0,A(k)):g}function C(k,z){var _,q;return k&&k.state?(q=k.state,z<0?(_=0,z=-z):(_=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?g:(q.window!==null&&q.wbits!==z&&(q.window=null),q.wrap=_,q.wbits=z,O(k))):g}function E(k,z){var _,q;return k?(q=new w,(k.state=q).window=null,(_=C(k,z))!==x&&(k.state=null),_):g}var S,D,M=!0;function U(k){if(M){var z;for(S=new i.Buf32(512),D=new i.Buf32(32),z=0;z<144;)k.lens[z++]=8;for(;z<256;)k.lens[z++]=9;for(;z<280;)k.lens[z++]=7;for(;z<288;)k.lens[z++]=8;for(u(h,k.lens,0,288,S,0,k.work,{bits:9}),z=0;z<32;)k.lens[z++]=5;u(f,k.lens,0,32,D,0,k.work,{bits:5}),M=!1}k.lencode=S,k.lenbits=9,k.distcode=D,k.distbits=5}function I(k,z,_,q){var L,Q=k.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new i.Buf8(Q.wsize)),q>=Q.wsize?(i.arraySet(Q.window,z,_-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(q<(L=Q.wsize-Q.wnext)&&(L=q),i.arraySet(Q.window,z,_-q,L,Q.wnext),(q-=L)?(i.arraySet(Q.window,z,_-q,q,0),Q.wnext=q,Q.whave=Q.wsize):(Q.wnext+=L,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=L))),0}n.inflateReset=O,n.inflateReset2=C,n.inflateResetKeep=A,n.inflateInit=function(k){return E(k,15)},n.inflateInit2=E,n.inflate=function(k,z){var _,q,L,Q,X,W,ee,V,P,Y,J,K,se,G,te,Z,ue,re,H,pe,B,oe,fe,ne,de=0,we=new i.Buf8(4),Ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return g;(_=k.state).mode===12&&(_.mode=13),X=k.next_out,L=k.output,ee=k.avail_out,Q=k.next_in,q=k.input,W=k.avail_in,V=_.hold,P=_.bits,Y=W,J=ee,oe=x;e:for(;;)switch(_.mode){case v:if(_.wrap===0){_.mode=13;break}for(;P<16;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(2&_.wrap&&V===35615){we[_.check=0]=255&V,we[1]=V>>>8&255,_.check=o(_.check,we,2,0),P=V=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&V)<<8)+(V>>8))%31){k.msg="incorrect header check",_.mode=30;break}if((15&V)!=8){k.msg="unknown compression method",_.mode=30;break}if(P-=4,B=8+(15&(V>>>=4)),_.wbits===0)_.wbits=B;else if(B>_.wbits){k.msg="invalid window size",_.mode=30;break}_.dmax=1<<B,k.adler=_.check=1,_.mode=512&V?10:12,P=V=0;break;case 2:for(;P<16;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(_.flags=V,(255&_.flags)!=8){k.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){k.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=V>>8&1),512&_.flags&&(we[0]=255&V,we[1]=V>>>8&255,_.check=o(_.check,we,2,0)),P=V=0,_.mode=3;case 3:for(;P<32;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}_.head&&(_.head.time=V),512&_.flags&&(we[0]=255&V,we[1]=V>>>8&255,we[2]=V>>>16&255,we[3]=V>>>24&255,_.check=o(_.check,we,4,0)),P=V=0,_.mode=4;case 4:for(;P<16;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}_.head&&(_.head.xflags=255&V,_.head.os=V>>8),512&_.flags&&(we[0]=255&V,we[1]=V>>>8&255,_.check=o(_.check,we,2,0)),P=V=0,_.mode=5;case 5:if(1024&_.flags){for(;P<16;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}_.length=V,_.head&&(_.head.extra_len=V),512&_.flags&&(we[0]=255&V,we[1]=V>>>8&255,_.check=o(_.check,we,2,0)),P=V=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(W<(K=_.length)&&(K=W),K&&(_.head&&(B=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),i.arraySet(_.head.extra,q,Q,K,B)),512&_.flags&&(_.check=o(_.check,q,K,Q)),W-=K,Q+=K,_.length-=K),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(W===0)break e;for(K=0;B=q[Q+K++],_.head&&B&&_.length<65536&&(_.head.name+=String.fromCharCode(B)),B&&K<W;);if(512&_.flags&&(_.check=o(_.check,q,K,Q)),W-=K,Q+=K,B)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(W===0)break e;for(K=0;B=q[Q+K++],_.head&&B&&_.length<65536&&(_.head.comment+=String.fromCharCode(B)),B&&K<W;);if(512&_.flags&&(_.check=o(_.check,q,K,Q)),W-=K,Q+=K,B)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;P<16;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(V!==(65535&_.check)){k.msg="header crc mismatch",_.mode=30;break}P=V=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),k.adler=_.check=0,_.mode=12;break;case 10:for(;P<32;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}k.adler=_.check=j(V),P=V=0,_.mode=11;case 11:if(_.havedict===0)return k.next_out=X,k.avail_out=ee,k.next_in=Q,k.avail_in=W,_.hold=V,_.bits=P,2;k.adler=_.check=1,_.mode=12;case 12:if(z===5||z===6)break e;case 13:if(_.last){V>>>=7&P,P-=7&P,_.mode=27;break}for(;P<3;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}switch(_.last=1&V,P-=1,3&(V>>>=1)){case 0:_.mode=14;break;case 1:if(U(_),_.mode=20,z!==6)break;V>>>=2,P-=2;break e;case 2:_.mode=17;break;case 3:k.msg="invalid block type",_.mode=30}V>>>=2,P-=2;break;case 14:for(V>>>=7&P,P-=7&P;P<32;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if((65535&V)!=(V>>>16^65535)){k.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&V,P=V=0,_.mode=15,z===6)break e;case 15:_.mode=16;case 16:if(K=_.length){if(W<K&&(K=W),ee<K&&(K=ee),K===0)break e;i.arraySet(L,q,Q,K,X),W-=K,Q+=K,ee-=K,X+=K,_.length-=K;break}_.mode=12;break;case 17:for(;P<14;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(_.nlen=257+(31&V),V>>>=5,P-=5,_.ndist=1+(31&V),V>>>=5,P-=5,_.ncode=4+(15&V),V>>>=4,P-=4,286<_.nlen||30<_.ndist){k.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;P<3;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}_.lens[Ue[_.have++]]=7&V,V>>>=3,P-=3}for(;_.have<19;)_.lens[Ue[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,fe={bits:_.lenbits},oe=u(0,_.lens,0,19,_.lencode,0,_.work,fe),_.lenbits=fe.bits,oe){k.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;Z=(de=_.lencode[V&(1<<_.lenbits)-1])>>>16&255,ue=65535&de,!((te=de>>>24)<=P);){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(ue<16)V>>>=te,P-=te,_.lens[_.have++]=ue;else{if(ue===16){for(ne=te+2;P<ne;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(V>>>=te,P-=te,_.have===0){k.msg="invalid bit length repeat",_.mode=30;break}B=_.lens[_.have-1],K=3+(3&V),V>>>=2,P-=2}else if(ue===17){for(ne=te+3;P<ne;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}P-=te,B=0,K=3+(7&(V>>>=te)),V>>>=3,P-=3}else{for(ne=te+7;P<ne;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}P-=te,B=0,K=11+(127&(V>>>=te)),V>>>=7,P-=7}if(_.have+K>_.nlen+_.ndist){k.msg="invalid bit length repeat",_.mode=30;break}for(;K--;)_.lens[_.have++]=B}}if(_.mode===30)break;if(_.lens[256]===0){k.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,fe={bits:_.lenbits},oe=u(h,_.lens,0,_.nlen,_.lencode,0,_.work,fe),_.lenbits=fe.bits,oe){k.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,fe={bits:_.distbits},oe=u(f,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,fe),_.distbits=fe.bits,oe){k.msg="invalid distances set",_.mode=30;break}if(_.mode=20,z===6)break e;case 20:_.mode=21;case 21:if(6<=W&&258<=ee){k.next_out=X,k.avail_out=ee,k.next_in=Q,k.avail_in=W,_.hold=V,_.bits=P,d(k,J),X=k.next_out,L=k.output,ee=k.avail_out,Q=k.next_in,q=k.input,W=k.avail_in,V=_.hold,P=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;Z=(de=_.lencode[V&(1<<_.lenbits)-1])>>>16&255,ue=65535&de,!((te=de>>>24)<=P);){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(Z&&(240&Z)==0){for(re=te,H=Z,pe=ue;Z=(de=_.lencode[pe+((V&(1<<re+H)-1)>>re)])>>>16&255,ue=65535&de,!(re+(te=de>>>24)<=P);){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}V>>>=re,P-=re,_.back+=re}if(V>>>=te,P-=te,_.back+=te,_.length=ue,Z===0){_.mode=26;break}if(32&Z){_.back=-1,_.mode=12;break}if(64&Z){k.msg="invalid literal/length code",_.mode=30;break}_.extra=15&Z,_.mode=22;case 22:if(_.extra){for(ne=_.extra;P<ne;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}_.length+=V&(1<<_.extra)-1,V>>>=_.extra,P-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;Z=(de=_.distcode[V&(1<<_.distbits)-1])>>>16&255,ue=65535&de,!((te=de>>>24)<=P);){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if((240&Z)==0){for(re=te,H=Z,pe=ue;Z=(de=_.distcode[pe+((V&(1<<re+H)-1)>>re)])>>>16&255,ue=65535&de,!(re+(te=de>>>24)<=P);){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}V>>>=re,P-=re,_.back+=re}if(V>>>=te,P-=te,_.back+=te,64&Z){k.msg="invalid distance code",_.mode=30;break}_.offset=ue,_.extra=15&Z,_.mode=24;case 24:if(_.extra){for(ne=_.extra;P<ne;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}_.offset+=V&(1<<_.extra)-1,V>>>=_.extra,P-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){k.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(ee===0)break e;if(K=J-ee,_.offset>K){if((K=_.offset-K)>_.whave&&_.sane){k.msg="invalid distance too far back",_.mode=30;break}se=K>_.wnext?(K-=_.wnext,_.wsize-K):_.wnext-K,K>_.length&&(K=_.length),G=_.window}else G=L,se=X-_.offset,K=_.length;for(ee<K&&(K=ee),ee-=K,_.length-=K;L[X++]=G[se++],--K;);_.length===0&&(_.mode=21);break;case 26:if(ee===0)break e;L[X++]=_.length,ee--,_.mode=21;break;case 27:if(_.wrap){for(;P<32;){if(W===0)break e;W--,V|=q[Q++]<<P,P+=8}if(J-=ee,k.total_out+=J,_.total+=J,J&&(k.adler=_.check=_.flags?o(_.check,L,J,X-J):l(_.check,L,J,X-J)),J=ee,(_.flags?V:j(V))!==_.check){k.msg="incorrect data check",_.mode=30;break}P=V=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;P<32;){if(W===0)break e;W--,V+=q[Q++]<<P,P+=8}if(V!==(4294967295&_.total)){k.msg="incorrect length check",_.mode=30;break}P=V=0}_.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;case 32:default:return g}return k.next_out=X,k.avail_out=ee,k.next_in=Q,k.avail_in=W,_.hold=V,_.bits=P,(_.wsize||J!==k.avail_out&&_.mode<30&&(_.mode<27||z!==4))&&I(k,k.output,k.next_out,J-k.avail_out)?(_.mode=31,-4):(Y-=k.avail_in,J-=k.avail_out,k.total_in+=Y,k.total_out+=J,_.total+=J,_.wrap&&J&&(k.adler=_.check=_.flags?o(_.check,L,J,k.next_out-J):l(_.check,L,J,k.next_out-J)),k.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(Y==0&&J===0||z===4)&&oe===x&&(oe=-5),oe)},n.inflateEnd=function(k){if(!k||!k.state)return g;var z=k.state;return z.window&&(z.window=null),k.state=null,x},n.inflateGetHeader=function(k,z){var _;return k&&k.state?(2&(_=k.state).wrap)==0?g:((_.head=z).done=!1,x):g},n.inflateSetDictionary=function(k,z){var _,q=z.length;return k&&k.state?(_=k.state).wrap!==0&&_.mode!==11?g:_.mode===11&&l(1,z,q,0)!==_.check?-3:I(k,z,q,q)?(_.mode=31,-4):(_.havedict=1,x):g},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,r,n){var i=a("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,f,x,g,v,b,y,j){var w,A,O,C,E,S,D,M,U,I=j.bits,k=0,z=0,_=0,q=0,L=0,Q=0,X=0,W=0,ee=0,V=0,P=null,Y=0,J=new i.Buf16(16),K=new i.Buf16(16),se=null,G=0;for(k=0;k<=15;k++)J[k]=0;for(z=0;z<g;z++)J[f[x+z]]++;for(L=I,q=15;1<=q&&J[q]===0;q--);if(q<L&&(L=q),q===0)return v[b++]=20971520,v[b++]=20971520,j.bits=1,0;for(_=1;_<q&&J[_]===0;_++);for(L<_&&(L=_),k=W=1;k<=15;k++)if(W<<=1,(W-=J[k])<0)return-1;if(0<W&&(h===0||q!==1))return-1;for(K[1]=0,k=1;k<15;k++)K[k+1]=K[k]+J[k];for(z=0;z<g;z++)f[x+z]!==0&&(y[K[f[x+z]]++]=z);if(S=h===0?(P=se=y,19):h===1?(P=l,Y-=257,se=o,G-=257,256):(P=d,se=u,-1),k=_,E=b,X=z=V=0,O=-1,C=(ee=1<<(Q=L))-1,h===1&&852<ee||h===2&&592<ee)return 1;for(;;){for(D=k-X,U=y[z]<S?(M=0,y[z]):y[z]>S?(M=se[G+y[z]],P[Y+y[z]]):(M=96,0),w=1<<k-X,_=A=1<<Q;v[E+(V>>X)+(A-=w)]=D<<24|M<<16|U|0,A!==0;);for(w=1<<k-1;V&w;)w>>=1;if(w!==0?(V&=w-1,V+=w):V=0,z++,--J[k]==0){if(k===q)break;k=f[x+y[z]]}if(L<k&&(V&C)!==O){for(X===0&&(X=L),E+=_,W=1<<(Q=k-X);Q+X<q&&!((W-=J[Q+X])<=0);)Q++,W<<=1;if(ee+=1<<Q,h===1&&852<ee||h===2&&592<ee)return 1;v[O=V&C]=L<<24|Q<<16|E-b|0}}return V!==0&&(v[E+V]=k-X<<24|64<<16|0),j.bits=L,0}},{"../utils/common":41}],51:[function(a,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,r,n){var i=a("../utils/common"),l=0,o=1;function d(de){for(var we=de.length;0<=--we;)de[we]=0}var u=0,h=29,f=256,x=f+1+h,g=30,v=19,b=2*x+1,y=15,j=16,w=7,A=256,O=16,C=17,E=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(x+2));d(I);var k=new Array(2*g);d(k);var z=new Array(512);d(z);var _=new Array(256);d(_);var q=new Array(h);d(q);var L,Q,X,W=new Array(g);function ee(de,we,Ue,qe,Ce){this.static_tree=de,this.extra_bits=we,this.extra_base=Ue,this.elems=qe,this.max_length=Ce,this.has_stree=de&&de.length}function V(de,we){this.dyn_tree=de,this.max_code=0,this.stat_desc=we}function P(de){return de<256?z[de]:z[256+(de>>>7)]}function Y(de,we){de.pending_buf[de.pending++]=255&we,de.pending_buf[de.pending++]=we>>>8&255}function J(de,we,Ue){de.bi_valid>j-Ue?(de.bi_buf|=we<<de.bi_valid&65535,Y(de,de.bi_buf),de.bi_buf=we>>j-de.bi_valid,de.bi_valid+=Ue-j):(de.bi_buf|=we<<de.bi_valid&65535,de.bi_valid+=Ue)}function K(de,we,Ue){J(de,Ue[2*we],Ue[2*we+1])}function se(de,we){for(var Ue=0;Ue|=1&de,de>>>=1,Ue<<=1,0<--we;);return Ue>>>1}function G(de,we,Ue){var qe,Ce,Le=new Array(y+1),Se=0;for(qe=1;qe<=y;qe++)Le[qe]=Se=Se+Ue[qe-1]<<1;for(Ce=0;Ce<=we;Ce++){var _e=de[2*Ce+1];_e!==0&&(de[2*Ce]=se(Le[_e]++,_e))}}function te(de){var we;for(we=0;we<x;we++)de.dyn_ltree[2*we]=0;for(we=0;we<g;we++)de.dyn_dtree[2*we]=0;for(we=0;we<v;we++)de.bl_tree[2*we]=0;de.dyn_ltree[2*A]=1,de.opt_len=de.static_len=0,de.last_lit=de.matches=0}function Z(de){8<de.bi_valid?Y(de,de.bi_buf):0<de.bi_valid&&(de.pending_buf[de.pending++]=de.bi_buf),de.bi_buf=0,de.bi_valid=0}function ue(de,we,Ue,qe){var Ce=2*we,Le=2*Ue;return de[Ce]<de[Le]||de[Ce]===de[Le]&&qe[we]<=qe[Ue]}function re(de,we,Ue){for(var qe=de.heap[Ue],Ce=Ue<<1;Ce<=de.heap_len&&(Ce<de.heap_len&&ue(we,de.heap[Ce+1],de.heap[Ce],de.depth)&&Ce++,!ue(we,qe,de.heap[Ce],de.depth));)de.heap[Ue]=de.heap[Ce],Ue=Ce,Ce<<=1;de.heap[Ue]=qe}function H(de,we,Ue){var qe,Ce,Le,Se,_e=0;if(de.last_lit!==0)for(;qe=de.pending_buf[de.d_buf+2*_e]<<8|de.pending_buf[de.d_buf+2*_e+1],Ce=de.pending_buf[de.l_buf+_e],_e++,qe===0?K(de,Ce,we):(K(de,(Le=_[Ce])+f+1,we),(Se=S[Le])!==0&&J(de,Ce-=q[Le],Se),K(de,Le=P(--qe),Ue),(Se=D[Le])!==0&&J(de,qe-=W[Le],Se)),_e<de.last_lit;);K(de,A,we)}function pe(de,we){var Ue,qe,Ce,Le=we.dyn_tree,Se=we.stat_desc.static_tree,_e=we.stat_desc.has_stree,Ze=we.stat_desc.elems,Mt=-1;for(de.heap_len=0,de.heap_max=b,Ue=0;Ue<Ze;Ue++)Le[2*Ue]!==0?(de.heap[++de.heap_len]=Mt=Ue,de.depth[Ue]=0):Le[2*Ue+1]=0;for(;de.heap_len<2;)Le[2*(Ce=de.heap[++de.heap_len]=Mt<2?++Mt:0)]=1,de.depth[Ce]=0,de.opt_len--,_e&&(de.static_len-=Se[2*Ce+1]);for(we.max_code=Mt,Ue=de.heap_len>>1;1<=Ue;Ue--)re(de,Le,Ue);for(Ce=Ze;Ue=de.heap[1],de.heap[1]=de.heap[de.heap_len--],re(de,Le,1),qe=de.heap[1],de.heap[--de.heap_max]=Ue,de.heap[--de.heap_max]=qe,Le[2*Ce]=Le[2*Ue]+Le[2*qe],de.depth[Ce]=(de.depth[Ue]>=de.depth[qe]?de.depth[Ue]:de.depth[qe])+1,Le[2*Ue+1]=Le[2*qe+1]=Ce,de.heap[1]=Ce++,re(de,Le,1),2<=de.heap_len;);de.heap[--de.heap_max]=de.heap[1],(function(lt,yt){var wt,ke,We,Ne,at,dt,ie=yt.dyn_tree,rt=yt.max_code,it=yt.stat_desc.static_tree,vt=yt.stat_desc.has_stree,Ie=yt.stat_desc.extra_bits,ct=yt.stat_desc.extra_base,gt=yt.stat_desc.max_length,Ot=0;for(Ne=0;Ne<=y;Ne++)lt.bl_count[Ne]=0;for(ie[2*lt.heap[lt.heap_max]+1]=0,wt=lt.heap_max+1;wt<b;wt++)gt<(Ne=ie[2*ie[2*(ke=lt.heap[wt])+1]+1]+1)&&(Ne=gt,Ot++),ie[2*ke+1]=Ne,rt<ke||(lt.bl_count[Ne]++,at=0,ct<=ke&&(at=Ie[ke-ct]),dt=ie[2*ke],lt.opt_len+=dt*(Ne+at),vt&&(lt.static_len+=dt*(it[2*ke+1]+at)));if(Ot!==0){do{for(Ne=gt-1;lt.bl_count[Ne]===0;)Ne--;lt.bl_count[Ne]--,lt.bl_count[Ne+1]+=2,lt.bl_count[gt]--,Ot-=2}while(0<Ot);for(Ne=gt;Ne!==0;Ne--)for(ke=lt.bl_count[Ne];ke!==0;)rt<(We=lt.heap[--wt])||(ie[2*We+1]!==Ne&&(lt.opt_len+=(Ne-ie[2*We+1])*ie[2*We],ie[2*We+1]=Ne),ke--)}})(de,we),G(Le,Mt,de.bl_count)}function B(de,we,Ue){var qe,Ce,Le=-1,Se=we[1],_e=0,Ze=7,Mt=4;for(Se===0&&(Ze=138,Mt=3),we[2*(Ue+1)+1]=65535,qe=0;qe<=Ue;qe++)Ce=Se,Se=we[2*(qe+1)+1],++_e<Ze&&Ce===Se||(_e<Mt?de.bl_tree[2*Ce]+=_e:Ce!==0?(Ce!==Le&&de.bl_tree[2*Ce]++,de.bl_tree[2*O]++):_e<=10?de.bl_tree[2*C]++:de.bl_tree[2*E]++,Le=Ce,Mt=(_e=0)===Se?(Ze=138,3):Ce===Se?(Ze=6,3):(Ze=7,4))}function oe(de,we,Ue){var qe,Ce,Le=-1,Se=we[1],_e=0,Ze=7,Mt=4;for(Se===0&&(Ze=138,Mt=3),qe=0;qe<=Ue;qe++)if(Ce=Se,Se=we[2*(qe+1)+1],!(++_e<Ze&&Ce===Se)){if(_e<Mt)for(;K(de,Ce,de.bl_tree),--_e!=0;);else Ce!==0?(Ce!==Le&&(K(de,Ce,de.bl_tree),_e--),K(de,O,de.bl_tree),J(de,_e-3,2)):_e<=10?(K(de,C,de.bl_tree),J(de,_e-3,3)):(K(de,E,de.bl_tree),J(de,_e-11,7));Le=Ce,Mt=(_e=0)===Se?(Ze=138,3):Ce===Se?(Ze=6,3):(Ze=7,4)}}d(W);var fe=!1;function ne(de,we,Ue,qe){J(de,(u<<1)+(qe?1:0),3),(function(Ce,Le,Se,_e){Z(Ce),Y(Ce,Se),Y(Ce,~Se),i.arraySet(Ce.pending_buf,Ce.window,Le,Se,Ce.pending),Ce.pending+=Se})(de,we,Ue)}n._tr_init=function(de){fe||((function(){var we,Ue,qe,Ce,Le,Se=new Array(y+1);for(Ce=qe=0;Ce<h-1;Ce++)for(q[Ce]=qe,we=0;we<1<<S[Ce];we++)_[qe++]=Ce;for(_[qe-1]=Ce,Ce=Le=0;Ce<16;Ce++)for(W[Ce]=Le,we=0;we<1<<D[Ce];we++)z[Le++]=Ce;for(Le>>=7;Ce<g;Ce++)for(W[Ce]=Le<<7,we=0;we<1<<D[Ce]-7;we++)z[256+Le++]=Ce;for(Ue=0;Ue<=y;Ue++)Se[Ue]=0;for(we=0;we<=143;)I[2*we+1]=8,we++,Se[8]++;for(;we<=255;)I[2*we+1]=9,we++,Se[9]++;for(;we<=279;)I[2*we+1]=7,we++,Se[7]++;for(;we<=287;)I[2*we+1]=8,we++,Se[8]++;for(G(I,x+1,Se),we=0;we<g;we++)k[2*we+1]=5,k[2*we]=se(we,5);L=new ee(I,S,f+1,x,y),Q=new ee(k,D,0,g,y),X=new ee(new Array(0),M,0,v,w)})(),fe=!0),de.l_desc=new V(de.dyn_ltree,L),de.d_desc=new V(de.dyn_dtree,Q),de.bl_desc=new V(de.bl_tree,X),de.bi_buf=0,de.bi_valid=0,te(de)},n._tr_stored_block=ne,n._tr_flush_block=function(de,we,Ue,qe){var Ce,Le,Se=0;0<de.level?(de.strm.data_type===2&&(de.strm.data_type=(function(_e){var Ze,Mt=4093624447;for(Ze=0;Ze<=31;Ze++,Mt>>>=1)if(1&Mt&&_e.dyn_ltree[2*Ze]!==0)return l;if(_e.dyn_ltree[18]!==0||_e.dyn_ltree[20]!==0||_e.dyn_ltree[26]!==0)return o;for(Ze=32;Ze<f;Ze++)if(_e.dyn_ltree[2*Ze]!==0)return o;return l})(de)),pe(de,de.l_desc),pe(de,de.d_desc),Se=(function(_e){var Ze;for(B(_e,_e.dyn_ltree,_e.l_desc.max_code),B(_e,_e.dyn_dtree,_e.d_desc.max_code),pe(_e,_e.bl_desc),Ze=v-1;3<=Ze&&_e.bl_tree[2*U[Ze]+1]===0;Ze--);return _e.opt_len+=3*(Ze+1)+5+5+4,Ze})(de),Ce=de.opt_len+3+7>>>3,(Le=de.static_len+3+7>>>3)<=Ce&&(Ce=Le)):Ce=Le=Ue+5,Ue+4<=Ce&&we!==-1?ne(de,we,Ue,qe):de.strategy===4||Le===Ce?(J(de,2+(qe?1:0),3),H(de,I,k)):(J(de,4+(qe?1:0),3),(function(_e,Ze,Mt,lt){var yt;for(J(_e,Ze-257,5),J(_e,Mt-1,5),J(_e,lt-4,4),yt=0;yt<lt;yt++)J(_e,_e.bl_tree[2*U[yt]+1],3);oe(_e,_e.dyn_ltree,Ze-1),oe(_e,_e.dyn_dtree,Mt-1)})(de,de.l_desc.max_code+1,de.d_desc.max_code+1,Se+1),H(de,de.dyn_ltree,de.dyn_dtree)),te(de),qe&&Z(de)},n._tr_tally=function(de,we,Ue){return de.pending_buf[de.d_buf+2*de.last_lit]=we>>>8&255,de.pending_buf[de.d_buf+2*de.last_lit+1]=255&we,de.pending_buf[de.l_buf+de.last_lit]=255&Ue,de.last_lit++,we===0?de.dyn_ltree[2*Ue]++:(de.matches++,we--,de.dyn_ltree[2*(_[Ue]+f+1)]++,de.dyn_dtree[2*P(we)]++),de.last_lit===de.lit_bufsize-1},n._tr_align=function(de){J(de,2,3),K(de,A,I),(function(we){we.bi_valid===16?(Y(we,we.bi_buf),we.bi_buf=0,we.bi_valid=0):8<=we.bi_valid&&(we.pending_buf[we.pending++]=255&we.bi_buf,we.bi_buf>>=8,we.bi_valid-=8)})(de)}},{"../utils/common":41}],53:[function(a,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,r,n){(function(i){(function(l,o){if(!l.setImmediate){var d,u,h,f,x=1,g={},v=!1,b=l.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(l);y=y&&y.setTimeout?y:l,d={}.toString.call(l.process)==="[object process]"?function(O){process.nextTick(function(){w(O)})}:(function(){if(l.postMessage&&!l.importScripts){var O=!0,C=l.onmessage;return l.onmessage=function(){O=!1},l.postMessage("","*"),l.onmessage=C,O}})()?(f="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",A,!1):l.attachEvent("onmessage",A),function(O){l.postMessage(f+O,"*")}):l.MessageChannel?((h=new MessageChannel).port1.onmessage=function(O){w(O.data)},function(O){h.port2.postMessage(O)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(O){var C=b.createElement("script");C.onreadystatechange=function(){w(O),C.onreadystatechange=null,u.removeChild(C),C=null},u.appendChild(C)}):function(O){setTimeout(w,0,O)},y.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var C=new Array(arguments.length-1),E=0;E<C.length;E++)C[E]=arguments[E+1];var S={callback:O,args:C};return g[x]=S,d(x),x++},y.clearImmediate=j}function j(O){delete g[O]}function w(O){if(v)setTimeout(w,0,O);else{var C=g[O];if(C){v=!0;try{(function(E){var S=E.callback,D=E.args;switch(D.length){case 0:S();break;case 1:S(D[0]);break;case 2:S(D[0],D[1]);break;case 3:S(D[0],D[1],D[2]);break;default:S.apply(o,D)}})(C)}finally{j(O),v=!1}}}}function A(O){O.source===l&&typeof O.data=="string"&&O.data.indexOf(f)===0&&w(+O.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof _o<"u"?_o:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(j1)),j1.exports}var Nme=yme();const HF=ea(Nme),wme=["image/jpeg","image/jpg","image/png","image/webp","image/gif","image/bmp","image/tiff"],Q5=[".jpg",".jpeg",".png",".webp",".gif",".bmp",".tiff",".tif"],Sme=5,jme=Sme*1024*1024,K5={enabled:!0,type:"BOTH",text:"SINI CAR",logoUrl:"",position:"CENTER",opacity:.3,fontSize:"MEDIUM",textColor:"#ffffff",rotation:-30,margin:20},J5={PENDING:{ar:" ",en:"Pending Approval",color:"amber"},APPROVED:{ar:" ",en:"Approved",color:"green"},REJECTED:{ar:"",en:"Rejected",color:"red"},AUTO_MATCHED:{ar:" ",en:"Auto Matched",color:"blue"}},Ame={CENTER:{ar:"",en:"Center"},TOP_LEFT:{ar:" ",en:"Top Left"},TOP_RIGHT:{ar:" ",en:"Top Right"},BOTTOM_LEFT:{ar:" ",en:"Bottom Left"},BOTTOM_RIGHT:{ar:" ",en:"Bottom Right"},TILE:{ar:"",en:"Tile"}},VF={SMALL:{ar:"",en:"Small",px:16},MEDIUM:{ar:"",en:"Medium",px:24},LARGE:{ar:"",en:"Large",px:36}},GF=async(e,s=jme,a=.8)=>new Promise((r,n)=>{const i=new FileReader;i.onload=l=>{var d;const o=new Image;o.onload=()=>{const u=document.createElement("canvas");let{width:h,height:f}=o;const x=2e3;if(h>x||f>x){const y=Math.min(x/h,x/f);h=Math.round(h*y),f=Math.round(f*y)}u.width=h,u.height=f;const g=u.getContext("2d");if(!g){n(new Error("Could not get canvas context"));return}g.drawImage(o,0,0,h,f);let v=a;const b=()=>{u.toBlob(y=>{if(!y){n(new Error("Could not compress image"));return}if(y.size>s&&v>.1)v-=.1,b();else{const j=u.toDataURL("image/jpeg",v);r({blob:y,dataUrl:j,width:h,height:f})}},"image/jpeg",v)};b()},o.onerror=()=>n(new Error("Could not load image")),o.src=(d=l.target)==null?void 0:d.result},i.onerror=()=>n(new Error("Could not read file")),i.readAsDataURL(e)}),WF=async(e,s=150)=>new Promise((a,r)=>{const n=new Image;n.onload=()=>{const i=document.createElement("canvas");let{width:l,height:o}=n;const d=Math.min(s/l,s/o);l=Math.round(l*d),o=Math.round(o*d),i.width=l,i.height=o;const u=i.getContext("2d");if(!u){r(new Error("Could not get canvas context"));return}u.drawImage(n,0,0,l,o),a(i.toDataURL("image/jpeg",.7))},n.onerror=()=>r(new Error("Could not create thumbnail")),n.src=e}),jp=e=>{const a=e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9\-_]/g,"").trim().toUpperCase();return!a||a.length<3?null:a},Y5=e=>wme.includes(e.type),Eme=e=>{if(e===0)return"0 Bytes";const s=1024,a=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,r)).toFixed(2))+" "+a[r]},QF=()=>`img-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Cme=(e,s=400,a=300)=>{const r=document.createElement("canvas");r.width=s,r.height=a;const n=r.getContext("2d");if(!n)return r;n.fillStyle="#f0f0f0",n.fillRect(0,0,s,a),n.strokeStyle="#e0e0e0",n.lineWidth=1;for(let d=0;d<s;d+=20)n.beginPath(),n.moveTo(d,0),n.lineTo(d,a),n.stroke();for(let d=0;d<a;d+=20)n.beginPath(),n.moveTo(0,d),n.lineTo(s,d),n.stroke();if(!e.enabled)return r;n.globalAlpha=e.opacity;const i=VF[e.fontSize].px;n.font=`bold ${i}px Arial`,n.fillStyle=e.textColor;const l=n.measureText(e.text).width,o=i;if(e.position==="TILE"){n.save(),n.rotate(e.rotation*Math.PI/180);for(let d=-a;d<a*2;d+=o*3)for(let u=-s;u<s*2;u+=l*1.5)n.fillText(e.text,u,d);n.restore()}else n.save(),n.translate(s/2,a/2),n.rotate(e.rotation*Math.PI/180),n.shadowColor="rgba(0,0,0,0.5)",n.shadowBlur=4,n.fillText(e.text,-l/2,o/2),n.restore();return r},ym=50,Tme=()=>{const{t:e}=Jt(),{addToast:s}=Dt(),a=T.useRef(null),r=T.useRef(null),n=T.useRef(null),[i,l]=T.useState("IMAGES"),[o,d]=T.useState([]),[u,h]=T.useState(null),[f,x]=T.useState(K5),[g,v]=T.useState([]),[b,y]=T.useState(!0),[j,w]=T.useState(!1),[A,O]=T.useState(""),[C,E]=T.useState(""),[S,D]=T.useState("ALL"),[M,U]=T.useState(null),[I,k]=T.useState(1),[z,_]=T.useState(null),[q,L]=T.useState(""),[Q,X]=T.useState(null),[W,ee]=T.useState(""),V=T.useMemo(()=>new Set(o.filter(ke=>ke.partNumber&&ke.isLinkedToProduct).map(ke=>ke.partNumber.toUpperCase())),[o]);T.useEffect(()=>{P()},[]);const P=async()=>{y(!0);try{const ke=localStorage.getItem("sini_product_images"),We=localStorage.getItem("sini_watermark_settings"),Ne=await xe.searchProducts("");d(ke?JSON.parse(ke):[]),x(We?JSON.parse(We):K5),v(Ne),Y(ke?JSON.parse(ke):[],Ne)}catch(ke){console.error("Failed to load data:",ke),s("    ","error")}finally{y(!1)}},Y=(ke,We)=>{const Ne=ke.filter(ie=>ie.status==="APPROVED"||ie.status==="AUTO_MATCHED"),at=new Set(Ne.filter(ie=>ie.isLinkedToProduct).map(ie=>ie.partNumber)),dt={totalProducts:We.length,productsWithImages:at.size,productsWithoutImages:We.length-at.size,coveragePercent:We.length>0?Math.round(at.size/We.length*100):0,pendingApproval:ke.filter(ie=>ie.status==="PENDING").length,totalImages:ke.length,imagesByUploader:{admin:ke.filter(ie=>ie.uploaderType==="ADMIN").length,supplierLocal:ke.filter(ie=>ie.uploaderType==="SUPPLIER_LOCAL").length,supplierInternational:ke.filter(ie=>ie.uploaderType==="SUPPLIER_INTERNATIONAL").length,marketer:ke.filter(ie=>ie.uploaderType==="MARKETER").length},unmatchedImages:ke.filter(ie=>!ie.isLinkedToProduct).length};h(dt)},J=ke=>{localStorage.setItem("sini_product_images",JSON.stringify(ke)),d(ke),Y(ke,g)},K=ke=>{localStorage.setItem("sini_watermark_settings",JSON.stringify(ke)),x(ke),s("    ","success")},se=ke=>V.has(ke.toUpperCase()),G=async(ke,We)=>{try{const{dataUrl:Ne,width:at,height:dt,blob:ie}=await GF(ke),rt=await WF(Ne),it=(We==null?void 0:We.trim().toUpperCase())||jp(ke.name)||"",vt=g.find(ct=>{var gt;return((gt=ct.partNumber)==null?void 0:gt.toUpperCase())===it}),Ie=se(it);return{id:QF(),partNumber:it,fileName:ke.name,fileUrl:Ne,thumbnailUrl:rt,originalSize:ke.size,compressedSize:ie.size,width:at,height:dt,status:"AUTO_MATCHED",uploadedBy:"admin",uploaderType:"ADMIN",uploaderName:" ",isAutoMatched:!We,isLinkedToProduct:!!vt,createdAt:new Date().toISOString(),approvedAt:new Date().toISOString(),approvedBy:"admin",adminNotes:Ie?"  -    ":void 0}}catch(Ne){return console.error(`Failed to process ${ke.name}:`,Ne),null}},te=async ke=>{var ie;const We=(ie=ke.target.files)==null?void 0:ie[0];if(!We)return;if(!Y5(We)){s("   ","error");return}const Ne=q.trim().toUpperCase(),at=se(Ne);w(!0);const dt=await G(We,q);dt&&(J([dt,...o]),s(at?`   (    ${Ne})`:dt.isLinkedToProduct?"    ":"   (  )","success")),L(""),a.current&&(a.current.value=""),w(!1)},Z=async ke=>{const We=ke.target.files;if(!We||We.length===0)return;const Ne=Array.from(We).filter(it=>Y5(it));if(Ne.length===0){s("    ","error");return}w(!0),_({current:0,total:Ne.length,phase:"  ..."});const at=[];let dt=0,ie=0,rt=0;for(let it=0;it<Ne.length;it++){const vt=Ne[it];_({current:it+1,total:Ne.length,phase:`: ${vt.name}`});const Ie=jp(vt.name)||"";se(Ie)&&rt++;const ct=await G(vt);ct&&(ct.isLinkedToProduct?dt++:ie++,at.push(ct))}J([...at,...o]),s(`  ${at.length}  (${dt}  ${ie} ${rt>0?` ${rt} `:""})`,"success"),_(null),w(!1),r.current&&(r.current.value="")},ue=async ke=>{var Ne;const We=(Ne=ke.target.files)==null?void 0:Ne[0];if(We){if(!We.name.toLowerCase().endsWith(".zip")){s("   ZIP","error");return}w(!0),_({current:0,total:100,phase:"  ..."});try{const at=await HF.loadAsync(We),dt=[],ie=Object.entries(at.files);let rt=0;for(const[gt,Ot]of ie){if(Ot.dir)continue;const Ls=gt.toLowerCase().split(".").pop();if(["jpg","jpeg","png","webp","gif","bmp"].includes(Ls||"")){const La=await Ot.async("blob"),Yr=gt.split("/").pop()||gt;dt.push({name:Yr,data:La})}rt++,_({current:Math.round(rt/ie.length*30),total:100,phase:` : ${rt}/${ie.length}`})}if(dt.length===0){s("     ","error"),_(null),w(!1);return}const it=[];let vt=0,Ie=0,ct=0;for(let gt=0;gt<dt.length;gt++){const{name:Ot,data:Ls}=dt[gt];_({current:30+Math.round(gt/dt.length*70),total:100,phase:`: ${gt+1}/${dt.length} - ${Ot}`});const La=new File([Ls],Ot,{type:Ls.type||"image/jpeg"}),Yr=jp(Ot)||"";se(Yr)&&ct++;const Ae=await G(La);Ae&&(Ae.isLinkedToProduct?vt++:Ie++,it.push(Ae))}J([...it,...o]),s(`  ${it.length}   ZIP (${vt}  ${Ie} ${ct>0?` ${ct} `:""})`,"success")}catch(at){console.error("ZIP processing failed:",at),s("    ","error")}finally{_(null),w(!1),n.current&&(n.current.value="")}}},re=ke=>{const We=o.map(Ne=>Ne.id===ke?{...Ne,status:"APPROVED",approvedAt:new Date().toISOString(),approvedBy:"admin"}:Ne);J(We),s("   ","success")},H=ke=>{const We=o.map(Ne=>Ne.id===ke?{...Ne,status:"REJECTED"}:Ne);J(We),s("  ","info")},pe=ke=>{if(!confirm("      "))return;const We=o.map(Ne=>Ne.id===ke?{...Ne,status:"REJECTED",adminNotes:" - "}:Ne);J(We),s("   ","success")},B=ke=>{confirm("         !")&&(J(o.filter(We=>We.id!==ke)),s("   ","success"))},oe=ke=>{X(ke),ee(ke.partNumber)},fe=()=>{if(!Q)return;const ke=W.trim().toUpperCase(),We=g.find(dt=>{var ie;return((ie=dt.partNumber)==null?void 0:ie.toUpperCase())===ke}),Ne=ke&&se(ke)&&ke!==Q.partNumber.toUpperCase(),at=o.map(dt=>dt.id===Q.id?{...dt,partNumber:ke,isLinkedToProduct:!!We,isAutoMatched:!1,adminNotes:Ne?`   -      ${ke}`:dt.adminNotes}:dt);J(at),s(We?`    ${ke}`:ke?"    (   )":"   ","success"),X(null)},ne=()=>{Q&&ee("")},de=T.useMemo(()=>o.filter(ke=>{const We=A===""||ke.partNumber.toLowerCase().includes(A.toLowerCase())||ke.fileName.toLowerCase().includes(A.toLowerCase())||ke.uploaderName.toLowerCase().includes(A.toLowerCase()),Ne=S==="ALL"||ke.status===S;return We&&Ne}),[o,A,S]),we=Math.ceil(de.length/ym),Ue=T.useMemo(()=>{const ke=(I-1)*ym;return de.slice(ke,ke+ym)},[de,I]);T.useEffect(()=>{k(1)},[A,S]);const qe=T.useMemo(()=>{if(!C.trim())return[];const ke=C.toLowerCase();return g.filter(We=>{var Ne,at;return((Ne=We.partNumber)==null?void 0:Ne.toLowerCase().includes(ke))||((at=We.name)==null?void 0:at.toLowerCase().includes(ke))}).slice(0,50)},[g,C]),Ce=T.useRef(null);T.useEffect(()=>{if(i==="WATERMARK"&&Ce.current){const ke=Cme(f,400,300),We=Ce.current.getContext("2d");We&&(Ce.current.width=400,Ce.current.height=300,We.drawImage(ke,0,0))}},[f,i]);const Le=()=>t.jsx("div",{className:"flex gap-2 border-b border-slate-200 mb-6",children:[{id:"PRODUCTS",icon:t.jsx(Xt,{size:18}),label:"",count:g.length},{id:"IMAGES",icon:t.jsx(tl,{size:18}),label:"",count:o.length},{id:"UPLOAD",icon:t.jsx(ga,{size:18}),label:" "},{id:"WATERMARK",icon:t.jsx(la,{size:18}),label:" "},{id:"REPORTS",icon:t.jsx(Rr,{size:18}),label:""}].map(ke=>t.jsxs("button",{onClick:()=>l(ke.id),className:`flex items-center gap-2 px-4 py-3 font-bold border-b-2 transition-colors ${i===ke.id?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[ke.icon," ",ke.label,ke.count!==void 0&&t.jsx("span",{className:"bg-slate-200 text-slate-700 px-2 py-0.5 rounded-full text-xs",children:ke.count})]},ke.id))}),Se=()=>t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(Cu,{size:20,className:"text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-purple-600",children:(u==null?void 0:u.totalImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(qj,{size:20,className:"text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-green-600",children:(u==null?void 0:u.productsWithImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:t.jsx(Rm,{size:20,className:"text-amber-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" ( )"}),t.jsx("p",{className:"text-xl font-black text-amber-600",children:(u==null?void 0:u.unmatchedImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-cyan-100 rounded-lg",children:t.jsx(Rr,{size:20,className:"text-cyan-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:""}),t.jsxs("p",{className:"text-xl font-black text-cyan-600",children:[(u==null?void 0:u.coveragePercent)||0,"%"]})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(Gs,{size:20,className:"text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-red-600",children:(u==null?void 0:u.productsWithoutImages)||0})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:t.jsx(as,{size:20,className:"text-orange-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500",children:" "}),t.jsx("p",{className:"text-xl font-black text-orange-600",children:(u==null?void 0:u.pendingApproval)||0})]})]})})]}),_e=()=>we<=1?null:t.jsxs("div",{className:"flex items-center justify-between mt-6 px-4 py-3 bg-slate-50 rounded-lg",children:[t.jsxs("div",{className:"text-sm text-slate-600",children:[" ",(I-1)*ym+1," - ",Math.min(I*ym,de.length),"  ",de.length," "]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>k(ke=>Math.max(1,ke-1)),disabled:I===1,className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(vs,{size:18})}),t.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,we)},(ke,We)=>{let Ne;return we<=5||I<=3?Ne=We+1:I>=we-2?Ne=we-4+We:Ne=I-2+We,t.jsx("button",{onClick:()=>k(Ne),className:`w-8 h-8 rounded-lg text-sm font-bold ${I===Ne?"bg-blue-600 text-white":"hover:bg-slate-100 text-slate-600"}`,children:Ne},Ne)}),we>5&&I<we-2&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"px-1",children:"..."}),t.jsx("button",{onClick:()=>k(we),className:"w-8 h-8 rounded-lg text-sm font-bold hover:bg-slate-100 text-slate-600",children:we})]})]}),t.jsx("button",{onClick:()=>k(ke=>Math.min(we,ke+1)),disabled:I===we,className:"p-2 rounded-lg border border-slate-200 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ws,{size:18})})]})]}),Ze=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Ft,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",placeholder:"     ...",value:A,onChange:ke=>O(ke.target.value),className:"w-full pr-10 pl-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("select",{value:S,onChange:ke=>D(ke.target.value),className:"px-4 py-2 border border-slate-200 rounded-lg",children:[t.jsxs("option",{value:"ALL",children:["  (",o.length,")"]}),Object.entries(J5).map(([ke,We])=>t.jsx("option",{value:ke,children:We.ar},ke))]}),t.jsxs("button",{onClick:P,className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg flex items-center gap-2",children:[t.jsx(Qt,{size:18})," "]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-3",children:[Ue.map(ke=>t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow group",children:[t.jsxs("div",{className:"relative aspect-square bg-slate-100",children:[t.jsx("img",{src:ke.thumbnailUrl||ke.fileUrl,alt:ke.partNumber,className:"w-full h-full object-cover",loading:"lazy"}),t.jsx("div",{className:`absolute top-1 left-1 px-1.5 py-0.5 rounded text-[9px] font-bold text-white ${ke.status==="APPROVED"||ke.status==="AUTO_MATCHED"?"bg-green-500":ke.status==="PENDING"?"bg-amber-500":"bg-red-500"}`,children:J5[ke.status].ar}),ke.isLinkedToProduct?t.jsx("div",{className:"absolute top-1 right-1 p-1 bg-blue-500 rounded-full",title:" ",children:t.jsx(qj,{size:10,className:"text-white"})}):t.jsx("div",{className:"absolute top-1 right-1 p-1 bg-amber-500 rounded-full",title:" -  ",children:t.jsx(Cu,{size:10,className:"text-white"})}),t.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-1.5",children:[t.jsx("button",{onClick:()=>U(ke.fileUrl),className:"p-1.5 bg-white rounded-full hover:bg-slate-100",title:"",children:t.jsx(NF,{size:14,className:"text-slate-700"})}),t.jsx("button",{onClick:()=>oe(ke),className:"p-1.5 bg-blue-500 rounded-full hover:bg-blue-600",title:"",children:t.jsx(Qo,{size:14,className:"text-white"})}),ke.status==="PENDING"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>re(ke.id),className:"p-1.5 bg-green-500 rounded-full hover:bg-green-600",title:"",children:t.jsx(Zt,{size:14,className:"text-white"})}),t.jsx("button",{onClick:()=>H(ke.id),className:"p-1.5 bg-red-500 rounded-full hover:bg-red-600",title:"",children:t.jsx(St,{size:14,className:"text-white"})})]}),t.jsx("button",{onClick:()=>pe(ke.id),className:"p-1.5 bg-slate-700 rounded-full hover:bg-slate-800",title:"",children:t.jsx(Ct,{size:14,className:"text-white"})})]})]}),t.jsxs("div",{className:"p-2",children:[t.jsx("p",{className:"font-bold text-xs text-slate-800 truncate",children:ke.partNumber||" "}),t.jsx("p",{className:"text-[10px] text-slate-500 truncate",children:ke.fileName})]})]},ke.id)),Ue.length===0&&t.jsxs("div",{className:"col-span-full py-16 text-center text-slate-400",children:[t.jsx(Rm,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"   "})]})]}),_e()]}),Mt=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl border-2 border-blue-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-blue-800 mb-4 flex items-center gap-2",children:[t.jsx(Bj,{size:24,className:"text-blue-600"}),"    (ZIP)",t.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:" "})]}),t.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"    !           ."}),t.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-xl p-8 text-center hover:border-blue-500 transition-colors cursor-pointer bg-white/50",onClick:()=>{var ke;return(ke=n.current)==null?void 0:ke.click()},children:[z?t.jsxs("div",{className:"space-y-3",children:[t.jsx(as,{size:40,className:"mx-auto text-blue-600 animate-spin"}),t.jsx("p",{className:"text-lg font-bold text-blue-800",children:z.phase}),t.jsx("div",{className:"w-64 mx-auto bg-blue-200 rounded-full h-3",children:t.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${z.current}%`}})}),t.jsxs("p",{className:"text-sm text-blue-600",children:[z.current,"%"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Bj,{size:48,className:"mx-auto text-blue-400 mb-3"}),t.jsx("p",{className:"text-lg font-bold text-blue-800 mb-2",children:"  ZIP    "}),t.jsx("p",{className:"text-sm text-blue-600",children:"  10,000+ "})]}),t.jsx("input",{ref:n,type:"file",accept:".zip",onChange:ue,className:"hidden",disabled:j})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(ga,{size:20,className:"text-green-600"}),"   "]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{type:"text",placeholder:" ",value:q,onChange:ke=>L(ke.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-lg"}),q&&se(q)&&t.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:t.jsx(ma,{size:18,className:"text-amber-500",title:"    "})})]}),t.jsxs("label",{className:"px-6 py-3 bg-green-600 text-white rounded-lg font-bold cursor-pointer hover:bg-green-700 flex items-center gap-2",children:[t.jsx(ga,{size:18}),"  ",t.jsx("input",{ref:a,type:"file",accept:Q5.join(","),onChange:te,className:"hidden",disabled:j})]})]}),q&&se(q)&&t.jsxs("p",{className:"mt-2 text-sm text-amber-600 flex items-center gap-1",children:[t.jsx(ma,{size:14}),"     ",q," -    "]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(Rm,{size:20,className:"text-purple-600"}),"   "]}),t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-purple-500 transition-colors cursor-pointer",onClick:()=>{var ke;return(ke=r.current)==null?void 0:ke.click()},children:[t.jsx(ga,{size:40,className:"mx-auto text-slate-400 mb-3"}),t.jsx("p",{className:"text-lg font-bold text-slate-700 mb-2",children:"    "}),t.jsx("p",{className:"text-sm text-slate-500",children:"       "}),t.jsx("input",{ref:r,type:"file",accept:Q5.join(","),multiple:!0,onChange:Z,className:"hidden",disabled:j})]})]})]}),lt=()=>t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 space-y-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[t.jsx(la,{size:20,className:"text-purple-600"}),"   "]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:f.enabled,onChange:ke=>x({...f,enabled:ke.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600"}),t.jsx("span",{className:"font-bold text-slate-700",children:"  "})]}),f.enabled&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsx("input",{type:"text",value:f.text,onChange:ke=>x({...f,text:ke.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:""}),t.jsx("select",{value:f.position,onChange:ke=>x({...f,position:ke.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg",children:Object.entries(Ame).map(([ke,We])=>t.jsx("option",{value:ke,children:We.ar},ke))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:[": ",Math.round(f.opacity*100),"%"]}),t.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.1",value:f.opacity,onChange:ke=>x({...f,opacity:parseFloat(ke.target.value)}),className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsx("div",{className:"flex gap-2",children:Object.entries(VF).map(([ke,We])=>t.jsx("button",{onClick:()=>x({...f,fontSize:ke}),className:`px-4 py-2 rounded-lg font-bold ${f.fontSize===ke?"bg-blue-600 text-white":"bg-slate-100 text-slate-700"}`,children:We.ar},ke))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsx("input",{type:"color",value:f.textColor,onChange:ke=>x({...f,textColor:ke.target.value}),className:"w-full h-10 rounded-lg border border-slate-200 cursor-pointer"})]})]}),t.jsxs("button",{onClick:()=>K(f),className:"w-full py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 flex items-center justify-center gap-2",children:[t.jsx(Zt,{size:18})," "]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsxs("h3",{className:"font-bold text-lg text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(fs,{size:20,className:"text-cyan-600"})," "]}),t.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:t.jsx("canvas",{ref:Ce,className:"w-full"})})]})]}),yt=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsxs("div",{className:"relative w-40 h-40",children:[t.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[t.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#e2e8f0",strokeWidth:"8"}),t.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#22c55e",strokeWidth:"8",strokeDasharray:`${((u==null?void 0:u.coveragePercent)||0)*2.51} 251.2`,strokeLinecap:"round"})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("span",{className:"text-3xl font-black text-slate-800",children:[(u==null?void 0:u.coveragePercent)||0,"%"]})})]}),t.jsxs("div",{className:"space-y-4 flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[t.jsx("span",{className:"text-green-700 font-bold",children:" "}),t.jsx("span",{className:"text-2xl font-black text-green-600",children:(u==null?void 0:u.productsWithImages)||0})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[t.jsx("span",{className:"text-red-700 font-bold",children:"  "}),t.jsx("span",{className:"text-2xl font-black text-red-600",children:(u==null?void 0:u.productsWithoutImages)||0})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[t.jsx("span",{className:"text-amber-700 font-bold",children:"  "}),t.jsx("span",{className:"text-2xl font-black text-amber-600",children:(u==null?void 0:u.unmatchedImages)||0})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:"  "}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"p-4 bg-blue-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-blue-600",children:(u==null?void 0:u.imagesByUploader.admin)||0}),t.jsx("p",{className:"text-sm font-bold text-blue-700",children:""})]}),t.jsxs("div",{className:"p-4 bg-green-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-green-600",children:(u==null?void 0:u.imagesByUploader.supplierLocal)||0}),t.jsx("p",{className:"text-sm font-bold text-green-700",children:" "})]}),t.jsxs("div",{className:"p-4 bg-purple-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-purple-600",children:(u==null?void 0:u.imagesByUploader.supplierInternational)||0}),t.jsx("p",{className:"text-sm font-bold text-purple-700",children:" "})]}),t.jsxs("div",{className:"p-4 bg-amber-50 rounded-xl text-center",children:[t.jsx("p",{className:"text-3xl font-black text-amber-600",children:(u==null?void 0:u.imagesByUploader.marketer)||0}),t.jsx("p",{className:"text-sm font-bold text-amber-700",children:""})]})]})]})]}),wt=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-xl p-4 border border-slate-200",children:t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Ft,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),t.jsx("input",{type:"text",value:C,onChange:ke=>E(ke.target.value),placeholder:"    ...",className:"w-full pr-10 pl-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-lg"})]})})}),C.trim()?qe.length>0?t.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:" "}),t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:""}),t.jsx("th",{className:"text-right p-4 font-bold text-slate-600",children:" "}),t.jsx("th",{className:"p-4"})]})}),t.jsx("tbody",{children:qe.map(ke=>{var Ne;const We=V.has((Ne=ke.partNumber)==null?void 0:Ne.toUpperCase());return t.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"font-mono font-bold text-slate-800",children:ke.partNumber})}),t.jsx("td",{className:"p-4 text-slate-600",children:ke.name}),t.jsx("td",{className:"p-4 text-slate-500",children:ke.brand||"-"}),t.jsx("td",{className:"p-4",children:We?t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-emerald-50 text-emerald-700 rounded-full text-sm font-bold",children:[t.jsx(Ut,{size:14}),"  "]}):t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-amber-50 text-amber-700 rounded-full text-sm font-bold",children:[t.jsx(Gs,{size:14}),"  "]})}),t.jsx("td",{className:"p-4",children:t.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg font-bold text-sm cursor-pointer transition-colors",children:[t.jsx(ga,{size:16}),We?" ":" ",t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async at=>{var ie;const dt=(ie=at.target.files)==null?void 0:ie[0];if(dt){const rt=await G(dt,ke.partNumber);rt&&(J([...o,{...rt,isLinkedToProduct:!0}]),s(`    ${ke.partNumber}`,"success"),E(""))}}})]})})]},ke.id)})})]})}):t.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[t.jsx(Ft,{size:48,className:"mx-auto text-slate-300 mb-4"}),t.jsx("p",{className:"text-slate-500 font-bold",children:"     "}),t.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"    "})]}):t.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-xl border border-dashed border-blue-200",children:[t.jsx(Xt,{size:48,className:"mx-auto text-blue-300 mb-4"}),t.jsx("p",{className:"text-blue-600 font-bold",children:"     "}),t.jsxs("p",{className:"text-sm text-blue-400 mt-1",children:[" : ",g.length," "]})]})]});return b?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(as,{size:48,className:"animate-spin text-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[t.jsx(Rm,{size:28,className:"text-blue-600"}),"  ",t.jsxs("span",{className:"bg-blue-100 text-blue-700 text-sm px-3 py-1 rounded-full",children:[o.length," "]})]})}),Se(),t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[Le(),i==="PRODUCTS"&&wt(),i==="IMAGES"&&Ze(),i==="UPLOAD"&&Mt(),i==="WATERMARK"&&lt(),i==="REPORTS"&&yt()]}),M&&t.jsx(ls,{onClose:()=>U(null),title:" ",children:t.jsx("div",{className:"p-4",children:t.jsx("img",{src:M,alt:"Preview",className:"max-w-full max-h-[70vh] mx-auto rounded-lg"})})}),Q&&t.jsx(ls,{onClose:()=>X(null),title:"  ",children:t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx("img",{src:Q.thumbnailUrl||Q.fileUrl,alt:Q.partNumber,className:"w-24 h-24 object-cover rounded-lg border"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-slate-500",children:" "}),t.jsx("p",{className:"font-bold text-slate-800 truncate",children:Q.fileName}),t.jsx("p",{className:"text-sm text-slate-500 mt-2",children:""}),t.jsx("p",{className:"font-bold text-slate-800",children:Eme(Q.compressedSize)})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-600 mb-2",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:W,onChange:ke=>ee(ke.target.value),placeholder:"      ",className:"w-full px-4 py-3 border border-slate-200 rounded-lg"}),W&&se(W)&&W.toUpperCase()!==Q.partNumber.toUpperCase()&&t.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:t.jsx(ma,{size:18,className:"text-amber-500"})})]}),W&&se(W)&&W.toUpperCase()!==Q.partNumber.toUpperCase()&&t.jsxs("p",{className:"mt-1 text-sm text-amber-600 flex items-center gap-1",children:[t.jsx(ma,{size:14}),"     "]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsxs("button",{onClick:fe,className:"flex-1 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 flex items-center justify-center gap-2",children:[t.jsx(Zt,{size:18})," "]}),t.jsxs("button",{onClick:ne,className:"px-4 py-3 border border-slate-200 rounded-lg font-bold hover:bg-slate-50 flex items-center gap-2",children:[t.jsx(Jre,{size:18}),"  "]}),t.jsxs("button",{onClick:()=>{B(Q.id),X(null)},className:"px-4 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 flex items-center gap-2",children:[t.jsx(Ct,{size:18}),"  "]})]})]})})]})},KF=T.createContext(null);function _me({children:e}){const[s,a]=T.useState({orders:0,accounts:0,quotes:0,imports:0,missing:0}),r=T.useCallback(()=>{const u=xe.getNewItemCounts();a(u)},[]),n=T.useCallback(()=>{xe.markOrdersAsSeen(),a(u=>({...u,orders:0}))},[]),i=T.useCallback(()=>{xe.markAccountRequestsAsSeen(),a(u=>({...u,accounts:0}))},[]),l=T.useCallback(()=>{xe.markQuoteRequestsAsSeen(),a(u=>({...u,quotes:0}))},[]),o=T.useCallback(()=>{xe.markImportRequestsAsSeen(),a(u=>({...u,imports:0}))},[]),d=T.useCallback(()=>{xe.markMissingRequestsAsSeen(),a(u=>({...u,missing:0}))},[]);return T.useEffect(()=>{r();const u=setInterval(r,3e4);return()=>clearInterval(u)},[r]),t.jsx(KF.Provider,{value:{badges:s,refreshBadges:r,markOrdersAsSeen:n,markAccountsAsSeen:i,markQuotesAsSeen:l,markImportsAsSeen:o,markMissingAsSeen:d},children:e})}function kme(){const e=T.useContext(KF);if(!e)throw new Error("useAdminBadges must be used within an AdminBadgesProvider");return e}function JF(e){var s,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(s=0;s<n;s++)e[s]&&(a=JF(e[s]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Es(){for(var e,s,a=0,r="",n=arguments.length;a<n;a++)(e=arguments[a])&&(s=JF(e))&&(r&&(r+=" "),r+=s);return r}var A1,X5;function yn(){if(X5)return A1;X5=1;var e=Array.isArray;return A1=e,A1}var E1,Z5;function YF(){if(Z5)return E1;Z5=1;var e=typeof _o=="object"&&_o&&_o.Object===Object&&_o;return E1=e,E1}var C1,eI;function ll(){if(eI)return C1;eI=1;var e=YF(),s=typeof self=="object"&&self&&self.Object===Object&&self,a=e||s||Function("return this")();return C1=a,C1}var T1,tI;function ph(){if(tI)return T1;tI=1;var e=ll(),s=e.Symbol;return T1=s,T1}var _1,sI;function Ome(){if(sI)return _1;sI=1;var e=ph(),s=Object.prototype,a=s.hasOwnProperty,r=s.toString,n=e?e.toStringTag:void 0;function i(l){var o=a.call(l,n),d=l[n];try{l[n]=void 0;var u=!0}catch{}var h=r.call(l);return u&&(o?l[n]=d:delete l[n]),h}return _1=i,_1}var k1,aI;function Ime(){if(aI)return k1;aI=1;var e=Object.prototype,s=e.toString;function a(r){return s.call(r)}return k1=a,k1}var O1,rI;function Kl(){if(rI)return O1;rI=1;var e=ph(),s=Ome(),a=Ime(),r="[object Null]",n="[object Undefined]",i=e?e.toStringTag:void 0;function l(o){return o==null?o===void 0?n:r:i&&i in Object(o)?s(o):a(o)}return O1=l,O1}var I1,nI;function Jl(){if(nI)return I1;nI=1;function e(s){return s!=null&&typeof s=="object"}return I1=e,I1}var R1,iI;function x0(){if(iI)return R1;iI=1;var e=Kl(),s=Jl(),a="[object Symbol]";function r(n){return typeof n=="symbol"||s(n)&&e(n)==a}return R1=r,R1}var P1,lI;function xE(){if(lI)return P1;lI=1;var e=yn(),s=x0(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function n(i,l){if(e(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||s(i)?!0:r.test(i)||!a.test(i)||l!=null&&i in Object(l)}return P1=n,P1}var D1,oI;function ac(){if(oI)return D1;oI=1;function e(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}return D1=e,D1}var M1,cI;function pE(){if(cI)return M1;cI=1;var e=Kl(),s=ac(),a="[object AsyncFunction]",r="[object Function]",n="[object GeneratorFunction]",i="[object Proxy]";function l(o){if(!s(o))return!1;var d=e(o);return d==r||d==n||d==a||d==i}return M1=l,M1}var L1,dI;function Rme(){if(dI)return L1;dI=1;var e=ll(),s=e["__core-js_shared__"];return L1=s,L1}var F1,uI;function Pme(){if(uI)return F1;uI=1;var e=Rme(),s=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function a(r){return!!s&&s in r}return F1=a,F1}var U1,mI;function XF(){if(mI)return U1;mI=1;var e=Function.prototype,s=e.toString;function a(r){if(r!=null){try{return s.call(r)}catch{}try{return r+""}catch{}}return""}return U1=a,U1}var z1,fI;function Dme(){if(fI)return z1;fI=1;var e=pE(),s=Pme(),a=ac(),r=XF(),n=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,d=l.toString,u=o.hasOwnProperty,h=RegExp("^"+d.call(u).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(x){if(!a(x)||s(x))return!1;var g=e(x)?h:i;return g.test(r(x))}return z1=f,z1}var B1,hI;function Mme(){if(hI)return B1;hI=1;function e(s,a){return s==null?void 0:s[a]}return B1=e,B1}var $1,xI;function bd(){if(xI)return $1;xI=1;var e=Dme(),s=Mme();function a(r,n){var i=s(r,n);return e(i)?i:void 0}return $1=a,$1}var q1,pI;function rb(){if(pI)return q1;pI=1;var e=bd(),s=e(Object,"create");return q1=s,q1}var H1,gI;function Lme(){if(gI)return H1;gI=1;var e=rb();function s(){this.__data__=e?e(null):{},this.size=0}return H1=s,H1}var V1,bI;function Fme(){if(bI)return V1;bI=1;function e(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}return V1=e,V1}var G1,vI;function Ume(){if(vI)return G1;vI=1;var e=rb(),s="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function n(i){var l=this.__data__;if(e){var o=l[i];return o===s?void 0:o}return r.call(l,i)?l[i]:void 0}return G1=n,G1}var W1,yI;function zme(){if(yI)return W1;yI=1;var e=rb(),s=Object.prototype,a=s.hasOwnProperty;function r(n){var i=this.__data__;return e?i[n]!==void 0:a.call(i,n)}return W1=r,W1}var Q1,NI;function Bme(){if(NI)return Q1;NI=1;var e=rb(),s="__lodash_hash_undefined__";function a(r,n){var i=this.__data__;return this.size+=this.has(r)?0:1,i[r]=e&&n===void 0?s:n,this}return Q1=a,Q1}var K1,wI;function $me(){if(wI)return K1;wI=1;var e=Lme(),s=Fme(),a=Ume(),r=zme(),n=Bme();function i(l){var o=-1,d=l==null?0:l.length;for(this.clear();++o<d;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=r,i.prototype.set=n,K1=i,K1}var J1,SI;function qme(){if(SI)return J1;SI=1;function e(){this.__data__=[],this.size=0}return J1=e,J1}var Y1,jI;function gE(){if(jI)return Y1;jI=1;function e(s,a){return s===a||s!==s&&a!==a}return Y1=e,Y1}var X1,AI;function nb(){if(AI)return X1;AI=1;var e=gE();function s(a,r){for(var n=a.length;n--;)if(e(a[n][0],r))return n;return-1}return X1=s,X1}var Z1,EI;function Hme(){if(EI)return Z1;EI=1;var e=nb(),s=Array.prototype,a=s.splice;function r(n){var i=this.__data__,l=e(i,n);if(l<0)return!1;var o=i.length-1;return l==o?i.pop():a.call(i,l,1),--this.size,!0}return Z1=r,Z1}var eN,CI;function Vme(){if(CI)return eN;CI=1;var e=nb();function s(a){var r=this.__data__,n=e(r,a);return n<0?void 0:r[n][1]}return eN=s,eN}var tN,TI;function Gme(){if(TI)return tN;TI=1;var e=nb();function s(a){return e(this.__data__,a)>-1}return tN=s,tN}var sN,_I;function Wme(){if(_I)return sN;_I=1;var e=nb();function s(a,r){var n=this.__data__,i=e(n,a);return i<0?(++this.size,n.push([a,r])):n[i][1]=r,this}return sN=s,sN}var aN,kI;function ib(){if(kI)return aN;kI=1;var e=qme(),s=Hme(),a=Vme(),r=Gme(),n=Wme();function i(l){var o=-1,d=l==null?0:l.length;for(this.clear();++o<d;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=r,i.prototype.set=n,aN=i,aN}var rN,OI;function bE(){if(OI)return rN;OI=1;var e=bd(),s=ll(),a=e(s,"Map");return rN=a,rN}var nN,II;function Qme(){if(II)return nN;II=1;var e=$me(),s=ib(),a=bE();function r(){this.size=0,this.__data__={hash:new e,map:new(a||s),string:new e}}return nN=r,nN}var iN,RI;function Kme(){if(RI)return iN;RI=1;function e(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}return iN=e,iN}var lN,PI;function lb(){if(PI)return lN;PI=1;var e=Kme();function s(a,r){var n=a.__data__;return e(r)?n[typeof r=="string"?"string":"hash"]:n.map}return lN=s,lN}var oN,DI;function Jme(){if(DI)return oN;DI=1;var e=lb();function s(a){var r=e(this,a).delete(a);return this.size-=r?1:0,r}return oN=s,oN}var cN,MI;function Yme(){if(MI)return cN;MI=1;var e=lb();function s(a){return e(this,a).get(a)}return cN=s,cN}var dN,LI;function Xme(){if(LI)return dN;LI=1;var e=lb();function s(a){return e(this,a).has(a)}return dN=s,dN}var uN,FI;function Zme(){if(FI)return uN;FI=1;var e=lb();function s(a,r){var n=e(this,a),i=n.size;return n.set(a,r),this.size+=n.size==i?0:1,this}return uN=s,uN}var mN,UI;function vE(){if(UI)return mN;UI=1;var e=Qme(),s=Jme(),a=Yme(),r=Xme(),n=Zme();function i(l){var o=-1,d=l==null?0:l.length;for(this.clear();++o<d;){var u=l[o];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=r,i.prototype.set=n,mN=i,mN}var fN,zI;function ZF(){if(zI)return fN;zI=1;var e=vE(),s="Expected a function";function a(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new TypeError(s);var i=function(){var l=arguments,o=n?n.apply(this,l):l[0],d=i.cache;if(d.has(o))return d.get(o);var u=r.apply(this,l);return i.cache=d.set(o,u)||d,u};return i.cache=new(a.Cache||e),i}return a.Cache=e,fN=a,fN}var hN,BI;function efe(){if(BI)return hN;BI=1;var e=ZF(),s=500;function a(r){var n=e(r,function(l){return i.size===s&&i.clear(),l}),i=n.cache;return n}return hN=a,hN}var xN,$I;function tfe(){if($I)return xN;$I=1;var e=efe(),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=e(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(s,function(l,o,d,u){i.push(d?u.replace(a,"$1"):o||l)}),i});return xN=r,xN}var pN,qI;function yE(){if(qI)return pN;qI=1;function e(s,a){for(var r=-1,n=s==null?0:s.length,i=Array(n);++r<n;)i[r]=a(s[r],r,s);return i}return pN=e,pN}var gN,HI;function sfe(){if(HI)return gN;HI=1;var e=ph(),s=yE(),a=yn(),r=x0(),n=e?e.prototype:void 0,i=n?n.toString:void 0;function l(o){if(typeof o=="string")return o;if(a(o))return s(o,l)+"";if(r(o))return i?i.call(o):"";var d=o+"";return d=="0"&&1/o==-1/0?"-0":d}return gN=l,gN}var bN,VI;function e7(){if(VI)return bN;VI=1;var e=sfe();function s(a){return a==null?"":e(a)}return bN=s,bN}var vN,GI;function t7(){if(GI)return vN;GI=1;var e=yn(),s=xE(),a=tfe(),r=e7();function n(i,l){return e(i)?i:s(i,l)?[i]:a(r(i))}return vN=n,vN}var yN,WI;function ob(){if(WI)return yN;WI=1;var e=x0();function s(a){if(typeof a=="string"||e(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return yN=s,yN}var NN,QI;function NE(){if(QI)return NN;QI=1;var e=t7(),s=ob();function a(r,n){n=e(n,r);for(var i=0,l=n.length;r!=null&&i<l;)r=r[s(n[i++])];return i&&i==l?r:void 0}return NN=a,NN}var wN,KI;function s7(){if(KI)return wN;KI=1;var e=NE();function s(a,r,n){var i=a==null?void 0:e(a,r);return i===void 0?n:i}return wN=s,wN}var afe=s7();const fi=ea(afe);var SN,JI;function rfe(){if(JI)return SN;JI=1;function e(s){return s==null}return SN=e,SN}var nfe=rfe();const Ss=ea(nfe);var jN,YI;function ife(){if(YI)return jN;YI=1;var e=Kl(),s=yn(),a=Jl(),r="[object String]";function n(i){return typeof i=="string"||!s(i)&&a(i)&&e(i)==r}return jN=n,jN}var lfe=ife();const ld=ea(lfe);var ofe=pE();const is=ea(ofe);var cfe=ac();const p0=ea(cfe);var AN={exports:{}},Hs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XI;function dfe(){if(XI)return Hs;XI=1;var e=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function b(y){if(typeof y=="object"&&y!==null){var j=y.$$typeof;switch(j){case e:switch(y=y.type,y){case a:case n:case r:case u:case h:return y;default:switch(y=y&&y.$$typeof,y){case o:case l:case d:case x:case f:case i:return y;default:return j}}case s:return j}}}return Hs.ContextConsumer=l,Hs.ContextProvider=i,Hs.Element=e,Hs.ForwardRef=d,Hs.Fragment=a,Hs.Lazy=x,Hs.Memo=f,Hs.Portal=s,Hs.Profiler=n,Hs.StrictMode=r,Hs.Suspense=u,Hs.SuspenseList=h,Hs.isAsyncMode=function(){return!1},Hs.isConcurrentMode=function(){return!1},Hs.isContextConsumer=function(y){return b(y)===l},Hs.isContextProvider=function(y){return b(y)===i},Hs.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Hs.isForwardRef=function(y){return b(y)===d},Hs.isFragment=function(y){return b(y)===a},Hs.isLazy=function(y){return b(y)===x},Hs.isMemo=function(y){return b(y)===f},Hs.isPortal=function(y){return b(y)===s},Hs.isProfiler=function(y){return b(y)===n},Hs.isStrictMode=function(y){return b(y)===r},Hs.isSuspense=function(y){return b(y)===u},Hs.isSuspenseList=function(y){return b(y)===h},Hs.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===a||y===n||y===r||y===u||y===h||y===g||typeof y=="object"&&y!==null&&(y.$$typeof===x||y.$$typeof===f||y.$$typeof===i||y.$$typeof===l||y.$$typeof===d||y.$$typeof===v||y.getModuleId!==void 0)},Hs.typeOf=b,Hs}var ZI;function ufe(){return ZI||(ZI=1,AN.exports=dfe()),AN.exports}var mfe=ufe(),EN,eR;function a7(){if(eR)return EN;eR=1;var e=Kl(),s=Jl(),a="[object Number]";function r(n){return typeof n=="number"||s(n)&&e(n)==a}return EN=r,EN}var CN,tR;function ffe(){if(tR)return CN;tR=1;var e=a7();function s(a){return e(a)&&a!=+a}return CN=s,CN}var hfe=ffe();const g0=ea(hfe);var xfe=a7();const pfe=ea(xfe);var Ii=function(s){return s===0?0:s>0?1:-1},Dc=function(s){return ld(s)&&s.indexOf("%")===s.length-1},mt=function(s){return pfe(s)&&!g0(s)},gfe=function(s){return Ss(s)},lr=function(s){return mt(s)||ld(s)},bfe=0,gh=function(s){var a=++bfe;return"".concat(s||"").concat(a)},od=function(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mt(s)&&!ld(s))return r;var i;if(Dc(s)){var l=s.indexOf("%");i=a*parseFloat(s.slice(0,l))/100}else i=+s;return g0(i)&&(i=r),n&&i>a&&(i=a),i},To=function(s){if(!s)return null;var a=Object.keys(s);return a&&a.length?s[a[0]]:null},vfe=function(s){if(!Array.isArray(s))return!1;for(var a=s.length,r={},n=0;n<a;n++)if(!r[s[n]])r[s[n]]=!0;else return!0;return!1},oi=function(s,a){return mt(s)&&mt(a)?function(r){return s+r*(a-s)}:function(){return a}};function Qp(e,s,a){return!e||!e.length?null:e.find(function(r){return r&&(typeof s=="function"?s(r):fi(r,s))===a})}var yfe=function(s,a){return mt(s)&&mt(a)?s-a:ld(s)&&ld(a)?s.localeCompare(a):s instanceof Date&&a instanceof Date?s.getTime()-a.getTime():String(s).localeCompare(String(a))};function _u(e,s){for(var a in e)if({}.hasOwnProperty.call(e,a)&&(!{}.hasOwnProperty.call(s,a)||e[a]!==s[a]))return!1;for(var r in s)if({}.hasOwnProperty.call(s,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function e2(e){"@babel/helpers - typeof";return e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e2(e)}var Nfe=["viewBox","children"],wfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sR=["points","pathLength"],TN={svg:Nfe,polygon:sR,polyline:sR},wE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Kp=function(s,a){if(!s||typeof s=="function"||typeof s=="boolean")return null;var r=s;if(T.isValidElement(s)&&(r=s.props),!p0(r))return null;var n={};return Object.keys(r).forEach(function(i){wE.includes(i)&&(n[i]=a||function(l){return r[i](r,l)})}),n},Sfe=function(s,a,r){return function(n){return s(a,r,n),null}},Jp=function(s,a,r){if(!p0(s)||e2(s)!=="object")return null;var n=null;return Object.keys(s).forEach(function(i){var l=s[i];wE.includes(i)&&typeof l=="function"&&(n||(n={}),n[i]=Sfe(l,a,r))}),n},jfe=["children"],Afe=["children"];function aR(e,s){if(e==null)return{};var a=Efe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Efe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function t2(e){"@babel/helpers - typeof";return t2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t2(e)}var rR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fl=function(s){return typeof s=="string"?s:s?s.displayName||s.name||"Component":""},nR=null,_N=null,SE=function e(s){if(s===nR&&Array.isArray(_N))return _N;var a=[];return T.Children.forEach(s,function(r){Ss(r)||(mfe.isFragment(r)?a=a.concat(e(r.props.children)):a.push(r))}),_N=a,nR=s,a};function Di(e,s){var a=[],r=[];return Array.isArray(s)?r=s.map(function(n){return Fl(n)}):r=[Fl(s)],SE(e).forEach(function(n){var i=fi(n,"type.displayName")||fi(n,"type.name");r.indexOf(i)!==-1&&a.push(n)}),a}function kn(e,s){var a=Di(e,s);return a&&a[0]}var iR=function(s){if(!s||!s.props)return!1;var a=s.props,r=a.width,n=a.height;return!(!mt(r)||r<=0||!mt(n)||n<=0)},Cfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Tfe=function(s){return s&&s.type&&ld(s.type)&&Cfe.indexOf(s.type)>=0},_fe=function(s){return s&&t2(s)==="object"&&"clipDot"in s},kfe=function(s,a,r,n){var i,l=(i=TN==null?void 0:TN[n])!==null&&i!==void 0?i:[];return a.startsWith("data-")||!is(s)&&(n&&l.includes(a)||wfe.includes(a))||r&&wE.includes(a)},bs=function(s,a,r){if(!s||typeof s=="function"||typeof s=="boolean")return null;var n=s;if(T.isValidElement(s)&&(n=s.props),!p0(n))return null;var i={};return Object.keys(n).forEach(function(l){var o;kfe((o=n)===null||o===void 0?void 0:o[l],l,a,r)&&(i[l]=n[l])}),i},s2=function e(s,a){if(s===a)return!0;var r=T.Children.count(s);if(r!==T.Children.count(a))return!1;if(r===0)return!0;if(r===1)return lR(Array.isArray(s)?s[0]:s,Array.isArray(a)?a[0]:a);for(var n=0;n<r;n++){var i=s[n],l=a[n];if(Array.isArray(i)||Array.isArray(l)){if(!e(i,l))return!1}else if(!lR(i,l))return!1}return!0},lR=function(s,a){if(Ss(s)&&Ss(a))return!0;if(!Ss(s)&&!Ss(a)){var r=s.props||{},n=r.children,i=aR(r,jfe),l=a.props||{},o=l.children,d=aR(l,Afe);return n&&o?_u(i,d)&&s2(n,o):!n&&!o?_u(i,d):!1}return!1},oR=function(s,a){var r=[],n={};return SE(s).forEach(function(i,l){if(Tfe(i))r.push(i);else if(i){var o=Fl(i.type),d=a[o]||{},u=d.handler,h=d.once;if(u&&(!h||!n[o])){var f=u(i,o,l);r.push(f),n[o]=!0}}}),r},Ofe=function(s){var a=s&&s.type;return a&&rR[a]?rR[a]:null},Ife=function(s,a){return SE(a).indexOf(s)},Rfe=["children","width","height","viewBox","className","style","title","desc"];function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},a2.apply(this,arguments)}function Pfe(e,s){if(e==null)return{};var a=Dfe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dfe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function r2(e){var s=e.children,a=e.width,r=e.height,n=e.viewBox,i=e.className,l=e.style,o=e.title,d=e.desc,u=Pfe(e,Rfe),h=n||{width:a,height:r,x:0,y:0},f=Es("recharts-surface",i);return Oe.createElement("svg",a2({},bs(u,!0,"svg"),{className:f,width:a,height:r,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),Oe.createElement("title",null,o),Oe.createElement("desc",null,d),s)}var Mfe=["children","className"];function n2(){return n2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n2.apply(this,arguments)}function Lfe(e,s){if(e==null)return{};var a=Ffe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ffe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var Ca=Oe.forwardRef(function(e,s){var a=e.children,r=e.className,n=Lfe(e,Mfe),i=Es("recharts-layer",r);return Oe.createElement("g",n2({className:i},bs(n,!0),{ref:s}),a)}),Ul=function(s,a){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]},kN,cR;function Ufe(){if(cR)return kN;cR=1;function e(s,a,r){var n=-1,i=s.length;a<0&&(a=-a>i?0:i+a),r=r>i?i:r,r<0&&(r+=i),i=a>r?0:r-a>>>0,a>>>=0;for(var l=Array(i);++n<i;)l[n]=s[n+a];return l}return kN=e,kN}var ON,dR;function zfe(){if(dR)return ON;dR=1;var e=Ufe();function s(a,r,n){var i=a.length;return n=n===void 0?i:n,!r&&n>=i?a:e(a,r,n)}return ON=s,ON}var IN,uR;function r7(){if(uR)return IN;uR=1;var e="\\ud800-\\udfff",s="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",n=s+a+r,i="\\ufe0e\\ufe0f",l="\\u200d",o=RegExp("["+l+e+n+i+"]");function d(u){return o.test(u)}return IN=d,IN}var RN,mR;function Bfe(){if(mR)return RN;mR=1;function e(s){return s.split("")}return RN=e,RN}var PN,fR;function $fe(){if(fR)return PN;fR=1;var e="\\ud800-\\udfff",s="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",n=s+a+r,i="\\ufe0e\\ufe0f",l="["+e+"]",o="["+n+"]",d="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+d+")",h="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",v=u+"?",b="["+i+"]?",y="(?:"+g+"(?:"+[h,f,x].join("|")+")"+b+v+")*",j=b+v+y,w="(?:"+[h+o+"?",o,f,x,l].join("|")+")",A=RegExp(d+"(?="+d+")|"+w+j,"g");function O(C){return C.match(A)||[]}return PN=O,PN}var DN,hR;function qfe(){if(hR)return DN;hR=1;var e=Bfe(),s=r7(),a=$fe();function r(n){return s(n)?a(n):e(n)}return DN=r,DN}var MN,xR;function Hfe(){if(xR)return MN;xR=1;var e=zfe(),s=r7(),a=qfe(),r=e7();function n(i){return function(l){l=r(l);var o=s(l)?a(l):void 0,d=o?o[0]:l.charAt(0),u=o?e(o,1).join(""):l.slice(1);return d[i]()+u}}return MN=n,MN}var LN,pR;function Vfe(){if(pR)return LN;pR=1;var e=Hfe(),s=e("toUpperCase");return LN=s,LN}var Gfe=Vfe();const cb=ea(Gfe);function ua(e){return function(){return e}}const n7=Math.cos,Yp=Math.sin,Li=Math.sqrt,Xp=Math.PI,db=2*Xp,i2=Math.PI,l2=2*i2,Oc=1e-6,Wfe=l2-Oc;function i7(e){this._+=e[0];for(let s=1,a=e.length;s<a;++s)this._+=arguments[s]+e[s]}function Qfe(e){let s=Math.floor(e);if(!(s>=0))throw new Error(`invalid digits: ${e}`);if(s>15)return i7;const a=10**s;return function(r){this._+=r[0];for(let n=1,i=r.length;n<i;++n)this._+=Math.round(arguments[n]*a)/a+r[n]}}class Kfe{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?i7:Qfe(s)}moveTo(s,a){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,a){this._append`L${this._x1=+s},${this._y1=+a}`}quadraticCurveTo(s,a,r,n){this._append`Q${+s},${+a},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(s,a,r,n,i,l){this._append`C${+s},${+a},${+r},${+n},${this._x1=+i},${this._y1=+l}`}arcTo(s,a,r,n,i){if(s=+s,a=+a,r=+r,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,d=r-s,u=n-a,h=l-s,f=o-a,x=h*h+f*f;if(this._x1===null)this._append`M${this._x1=s},${this._y1=a}`;else if(x>Oc)if(!(Math.abs(f*d-u*h)>Oc)||!i)this._append`L${this._x1=s},${this._y1=a}`;else{let g=r-l,v=n-o,b=d*d+u*u,y=g*g+v*v,j=Math.sqrt(b),w=Math.sqrt(x),A=i*Math.tan((i2-Math.acos((b+x-y)/(2*j*w)))/2),O=A/w,C=A/j;Math.abs(O-1)>Oc&&this._append`L${s+O*h},${a+O*f}`,this._append`A${i},${i},0,0,${+(f*g>h*v)},${this._x1=s+C*d},${this._y1=a+C*u}`}}arc(s,a,r,n,i,l){if(s=+s,a=+a,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(n),d=r*Math.sin(n),u=s+o,h=a+d,f=1^l,x=l?n-i:i-n;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Oc||Math.abs(this._y1-h)>Oc)&&this._append`L${u},${h}`,r&&(x<0&&(x=x%l2+l2),x>Wfe?this._append`A${r},${r},0,1,${f},${s-o},${a-d}A${r},${r},0,1,${f},${this._x1=u},${this._y1=h}`:x>Oc&&this._append`A${r},${r},0,${+(x>=i2)},${f},${this._x1=s+r*Math.cos(i)},${this._y1=a+r*Math.sin(i)}`)}rect(s,a,r,n){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function jE(e){let s=3;return e.digits=function(a){if(!arguments.length)return s;if(a==null)s=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);s=r}return e},()=>new Kfe(s)}function AE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function l7(e){this._context=e}l7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;default:this._context.lineTo(e,s);break}}};function ub(e){return new l7(e)}function o7(e){return e[0]}function c7(e){return e[1]}function d7(e,s){var a=ua(!0),r=null,n=ub,i=null,l=jE(o);e=typeof e=="function"?e:e===void 0?o7:ua(e),s=typeof s=="function"?s:s===void 0?c7:ua(s);function o(d){var u,h=(d=AE(d)).length,f,x=!1,g;for(r==null&&(i=n(g=l())),u=0;u<=h;++u)!(u<h&&a(f=d[u],u,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+e(f,u,d),+s(f,u,d));if(g)return i=null,g+""||null}return o.x=function(d){return arguments.length?(e=typeof d=="function"?d:ua(+d),o):e},o.y=function(d){return arguments.length?(s=typeof d=="function"?d:ua(+d),o):s},o.defined=function(d){return arguments.length?(a=typeof d=="function"?d:ua(!!d),o):a},o.curve=function(d){return arguments.length?(n=d,r!=null&&(i=n(r)),o):n},o.context=function(d){return arguments.length?(d==null?r=i=null:i=n(r=d),o):r},o}function sp(e,s,a){var r=null,n=ua(!0),i=null,l=ub,o=null,d=jE(u);e=typeof e=="function"?e:e===void 0?o7:ua(+e),s=typeof s=="function"?s:ua(s===void 0?0:+s),a=typeof a=="function"?a:a===void 0?c7:ua(+a);function u(f){var x,g,v,b=(f=AE(f)).length,y,j=!1,w,A=new Array(b),O=new Array(b);for(i==null&&(o=l(w=d())),x=0;x<=b;++x){if(!(x<b&&n(y=f[x],x,f))===j)if(j=!j)g=x,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=x-1;v>=g;--v)o.point(A[v],O[v]);o.lineEnd(),o.areaEnd()}j&&(A[x]=+e(y,x,f),O[x]=+s(y,x,f),o.point(r?+r(y,x,f):A[x],a?+a(y,x,f):O[x]))}if(w)return o=null,w+""||null}function h(){return d7().defined(n).curve(l).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ua(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ua(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ua(+f),u):r},u.y=function(f){return arguments.length?(s=typeof f=="function"?f:ua(+f),a=null,u):s},u.y0=function(f){return arguments.length?(s=typeof f=="function"?f:ua(+f),u):s},u.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:ua(+f),u):a},u.lineX0=u.lineY0=function(){return h().x(e).y(s)},u.lineY1=function(){return h().x(e).y(a)},u.lineX1=function(){return h().x(r).y(s)},u.defined=function(f){return arguments.length?(n=typeof f=="function"?f:ua(!!f),u):n},u.curve=function(f){return arguments.length?(l=f,i!=null&&(o=l(i)),u):l},u.context=function(f){return arguments.length?(f==null?i=o=null:o=l(i=f),u):i},u}class u7{constructor(s,a){this._context=s,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,a){switch(s=+s,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,a):this._context.moveTo(s,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,a,s,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,s,this._y0,s,a);break}}this._x0=s,this._y0=a}}function Jfe(e){return new u7(e,!0)}function Yfe(e){return new u7(e,!1)}const EE={draw(e,s){const a=Li(s/Xp);e.moveTo(a,0),e.arc(0,0,a,0,db)}},Xfe={draw(e,s){const a=Li(s/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},m7=Li(1/3),Zfe=m7*2,ehe={draw(e,s){const a=Li(s/Zfe),r=a*m7;e.moveTo(0,-a),e.lineTo(r,0),e.lineTo(0,a),e.lineTo(-r,0),e.closePath()}},the={draw(e,s){const a=Li(s),r=-a/2;e.rect(r,r,a,a)}},she=.8908130915292852,f7=Yp(Xp/10)/Yp(7*Xp/10),ahe=Yp(db/10)*f7,rhe=-n7(db/10)*f7,nhe={draw(e,s){const a=Li(s*she),r=ahe*a,n=rhe*a;e.moveTo(0,-a),e.lineTo(r,n);for(let i=1;i<5;++i){const l=db*i/5,o=n7(l),d=Yp(l);e.lineTo(d*a,-o*a),e.lineTo(o*r-d*n,d*r+o*n)}e.closePath()}},FN=Li(3),ihe={draw(e,s){const a=-Li(s/(FN*3));e.moveTo(0,a*2),e.lineTo(-FN*a,-a),e.lineTo(FN*a,-a),e.closePath()}},Zn=-.5,ei=Li(3)/2,o2=1/Li(12),lhe=(o2/2+1)*3,ohe={draw(e,s){const a=Li(s/lhe),r=a/2,n=a*o2,i=r,l=a*o2+a,o=-i,d=l;e.moveTo(r,n),e.lineTo(i,l),e.lineTo(o,d),e.lineTo(Zn*r-ei*n,ei*r+Zn*n),e.lineTo(Zn*i-ei*l,ei*i+Zn*l),e.lineTo(Zn*o-ei*d,ei*o+Zn*d),e.lineTo(Zn*r+ei*n,Zn*n-ei*r),e.lineTo(Zn*i+ei*l,Zn*l-ei*i),e.lineTo(Zn*o+ei*d,Zn*d-ei*o),e.closePath()}};function che(e,s){let a=null,r=jE(n);e=typeof e=="function"?e:ua(e||EE),s=typeof s=="function"?s:ua(s===void 0?64:+s);function n(){let i;if(a||(a=i=r()),e.apply(this,arguments).draw(a,+s.apply(this,arguments)),i)return a=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:ua(i),n):e},n.size=function(i){return arguments.length?(s=typeof i=="function"?i:ua(+i),n):s},n.context=function(i){return arguments.length?(a=i??null,n):a},n}function Zp(){}function eg(e,s,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+s)/6,(e._y0+4*e._y1+a)/6)}function h7(e){this._context=e}h7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:eg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:eg(this,e,s);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s}};function dhe(e){return new h7(e)}function x7(e){this._context=e}x7.prototype={areaStart:Zp,areaEnd:Zp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._x2=e,this._y2=s;break;case 1:this._point=2,this._x3=e,this._y3=s;break;case 2:this._point=3,this._x4=e,this._y4=s,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+s)/6);break;default:eg(this,e,s);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s}};function uhe(e){return new x7(e)}function p7(e){this._context=e}p7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:eg(this,e,s);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s}};function mhe(e){return new p7(e)}function g7(e){this._context=e}g7.prototype={areaStart:Zp,areaEnd:Zp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,s){e=+e,s=+s,this._point?this._context.lineTo(e,s):(this._point=1,this._context.moveTo(e,s))}};function fhe(e){return new g7(e)}function gR(e){return e<0?-1:1}function bR(e,s,a){var r=e._x1-e._x0,n=s-e._x1,i=(e._y1-e._y0)/(r||n<0&&-0),l=(a-e._y1)/(n||r<0&&-0),o=(i*n+l*r)/(r+n);return(gR(i)+gR(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function vR(e,s){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-s)/2:s}function UN(e,s,a){var r=e._x0,n=e._y0,i=e._x1,l=e._y1,o=(i-r)/3;e._context.bezierCurveTo(r+o,n+o*s,i-o,l-o*a,i,l)}function tg(e){this._context=e}tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:UN(this,this._t0,vR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){var a=NaN;if(e=+e,s=+s,!(e===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;break;case 2:this._point=3,UN(this,vR(this,a=bR(this,e,s)),a);break;default:UN(this,this._t0,a=bR(this,e,s));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s,this._t0=a}}};function b7(e){this._context=new v7(e)}(b7.prototype=Object.create(tg.prototype)).point=function(e,s){tg.prototype.point.call(this,s,e)};function v7(e){this._context=e}v7.prototype={moveTo:function(e,s){this._context.moveTo(s,e)},closePath:function(){this._context.closePath()},lineTo:function(e,s){this._context.lineTo(s,e)},bezierCurveTo:function(e,s,a,r,n,i){this._context.bezierCurveTo(s,e,r,a,i,n)}};function hhe(e){return new tg(e)}function xhe(e){return new b7(e)}function y7(e){this._context=e}y7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,s=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],s[0]):this._context.moveTo(e[0],s[0]),a===2)this._context.lineTo(e[1],s[1]);else for(var r=yR(e),n=yR(s),i=0,l=1;l<a;++i,++l)this._context.bezierCurveTo(r[0][i],n[0][i],r[1][i],n[1][i],e[l],s[l]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,s){this._x.push(+e),this._y.push(+s)}};function yR(e){var s,a=e.length-1,r,n=new Array(a),i=new Array(a),l=new Array(a);for(n[0]=0,i[0]=2,l[0]=e[0]+2*e[1],s=1;s<a-1;++s)n[s]=1,i[s]=4,l[s]=4*e[s]+2*e[s+1];for(n[a-1]=2,i[a-1]=7,l[a-1]=8*e[a-1]+e[a],s=1;s<a;++s)r=n[s]/i[s-1],i[s]-=r,l[s]-=r*l[s-1];for(n[a-1]=l[a-1]/i[a-1],s=a-2;s>=0;--s)n[s]=(l[s]-n[s+1])/i[s];for(i[a-1]=(e[a]+n[a-1])/2,s=0;s<a-1;++s)i[s]=2*e[s+1]-n[s+1];return[n,i]}function phe(e){return new y7(e)}function mb(e,s){this._context=e,this._t=s}mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(e,s);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,s)}break}}this._x=e,this._y=s}};function ghe(e){return new mb(e,.5)}function bhe(e){return new mb(e,0)}function vhe(e){return new mb(e,1)}function zu(e,s){if((l=e.length)>1)for(var a=1,r,n,i=e[s[0]],l,o=i.length;a<l;++a)for(n=i,i=e[s[a]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function c2(e){for(var s=e.length,a=new Array(s);--s>=0;)a[s]=s;return a}function yhe(e,s){return e[s]}function Nhe(e){const s=[];return s.key=e,s}function whe(){var e=ua([]),s=c2,a=zu,r=yhe;function n(i){var l=Array.from(e.apply(this,arguments),Nhe),o,d=l.length,u=-1,h;for(const f of i)for(o=0,++u;o<d;++o)(l[o][u]=[0,+r(f,l[o].key,u,i)]).data=f;for(o=0,h=AE(s(l));o<d;++o)l[h[o]].index=o;return a(l,h),l}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ua(Array.from(i)),n):e},n.value=function(i){return arguments.length?(r=typeof i=="function"?i:ua(+i),n):r},n.order=function(i){return arguments.length?(s=i==null?c2:typeof i=="function"?i:ua(Array.from(i)),n):s},n.offset=function(i){return arguments.length?(a=i??zu,n):a},n}function She(e,s){if((r=e.length)>0){for(var a,r,n=0,i=e[0].length,l;n<i;++n){for(l=a=0;a<r;++a)l+=e[a][n][1]||0;if(l)for(a=0;a<r;++a)e[a][n][1]/=l}zu(e,s)}}function jhe(e,s){if((n=e.length)>0){for(var a=0,r=e[s[0]],n,i=r.length;a<i;++a){for(var l=0,o=0;l<n;++l)o+=e[l][a][1]||0;r[a][1]+=r[a][0]=-o/2}zu(e,s)}}function Ahe(e,s){if(!(!((l=e.length)>0)||!((i=(n=e[s[0]]).length)>0))){for(var a=0,r=1,n,i,l;r<i;++r){for(var o=0,d=0,u=0;o<l;++o){for(var h=e[s[o]],f=h[r][1]||0,x=h[r-1][1]||0,g=(f-x)/2,v=0;v<o;++v){var b=e[s[v]],y=b[r][1]||0,j=b[r-1][1]||0;g+=y-j}d+=f,u+=g*f}n[r-1][1]+=n[r-1][0]=a,d&&(a-=u/d)}n[r-1][1]+=n[r-1][0]=a,zu(e,s)}}function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Sf(e)}var Ehe=["type","size","sizeType"];function d2(){return d2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d2.apply(this,arguments)}function NR(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function wR(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?NR(Object(a),!0).forEach(function(r){Che(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NR(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Che(e,s,a){return s=The(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function The(e){var s=_he(e,"string");return Sf(s)=="symbol"?s:s+""}function _he(e,s){if(Sf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function khe(e,s){if(e==null)return{};var a=Ohe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ohe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var N7={symbolCircle:EE,symbolCross:Xfe,symbolDiamond:ehe,symbolSquare:the,symbolStar:nhe,symbolTriangle:ihe,symbolWye:ohe},Ihe=Math.PI/180,Rhe=function(s){var a="symbol".concat(cb(s));return N7[a]||EE},Phe=function(s,a,r){if(a==="area")return s;switch(r){case"cross":return 5*s*s/9;case"diamond":return .5*s*s/Math.sqrt(3);case"square":return s*s;case"star":{var n=18*Ihe;return 1.25*s*s*(Math.tan(n)-Math.tan(n*2)*Math.pow(Math.tan(n),2))}case"triangle":return Math.sqrt(3)*s*s/4;case"wye":return(21-10*Math.sqrt(3))*s*s/8;default:return Math.PI*s*s/4}},Dhe=function(s,a){N7["symbol".concat(cb(s))]=a},CE=function(s){var a=s.type,r=a===void 0?"circle":a,n=s.size,i=n===void 0?64:n,l=s.sizeType,o=l===void 0?"area":l,d=khe(s,Ehe),u=wR(wR({},d),{},{type:r,size:i,sizeType:o}),h=function(){var y=Rhe(r),j=che().type(y).size(Phe(i,o,r));return j()},f=u.className,x=u.cx,g=u.cy,v=bs(u,!0);return x===+x&&g===+g&&i===+i?Oe.createElement("path",d2({},v,{className:Es("recharts-symbols",f),transform:"translate(".concat(x,", ").concat(g,")"),d:h()})):null};CE.registerSymbol=Dhe;function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Bu(e)}function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u2.apply(this,arguments)}function SR(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Mhe(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?SR(Object(a),!0).forEach(function(r){jf(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SR(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Lhe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function Fhe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S7(r.key),r)}}function Uhe(e,s,a){return s&&Fhe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function zhe(e,s,a){return s=sg(s),Bhe(e,w7()?Reflect.construct(s,a||[],sg(e).constructor):s.apply(e,a))}function Bhe(e,s){if(s&&(Bu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $he(e)}function $he(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w7=function(){return!!e})()}function sg(e){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},sg(e)}function qhe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&m2(e,s)}function m2(e,s){return m2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},m2(e,s)}function jf(e,s,a){return s=S7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function S7(e){var s=Hhe(e,"string");return Bu(s)=="symbol"?s:s+""}function Hhe(e,s){if(Bu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ti=32,TE=(function(e){function s(){return Lhe(this,s),zhe(this,s,arguments)}return qhe(s,e),Uhe(s,[{key:"renderIcon",value:function(r){var n=this.props.inactiveColor,i=ti/2,l=ti/6,o=ti/3,d=r.inactive?n:r.color;if(r.type==="plainline")return Oe.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:ti,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return Oe.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(ti,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return Oe.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(ti/8,"h").concat(ti,"v").concat(ti*3/4,"h").concat(-ti,"z"),className:"recharts-legend-icon"});if(Oe.isValidElement(r.legendIcon)){var u=Mhe({},r);return delete u.legendIcon,Oe.cloneElement(r.legendIcon,u)}return Oe.createElement(CE,{fill:d,cx:i,cy:i,size:ti,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,n=this.props,i=n.payload,l=n.iconSize,o=n.layout,d=n.formatter,u=n.inactiveColor,h={x:0,y:0,width:ti,height:ti},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,v){var b=g.formatter||d,y=Es(jf(jf({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",g.inactive));if(g.type==="none")return null;var j=is(g.value)?null:g.value;Ul(!is(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=g.inactive?u:g.color;return Oe.createElement("li",u2({className:y,style:f,key:"legend-item-".concat(v)},Jp(r.props,g,v)),Oe.createElement(r2,{width:l,height:l,viewBox:h,style:x},r.renderIcon(g)),Oe.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},b?b(j,g,v):j))})}},{key:"render",value:function(){var r=this.props,n=r.payload,i=r.layout,l=r.align;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return Oe.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(T.PureComponent);jf(TE,"displayName","Legend");jf(TE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var zN,jR;function Vhe(){if(jR)return zN;jR=1;var e=ib();function s(){this.__data__=new e,this.size=0}return zN=s,zN}var BN,AR;function Ghe(){if(AR)return BN;AR=1;function e(s){var a=this.__data__,r=a.delete(s);return this.size=a.size,r}return BN=e,BN}var $N,ER;function Whe(){if(ER)return $N;ER=1;function e(s){return this.__data__.get(s)}return $N=e,$N}var qN,CR;function Qhe(){if(CR)return qN;CR=1;function e(s){return this.__data__.has(s)}return qN=e,qN}var HN,TR;function Khe(){if(TR)return HN;TR=1;var e=ib(),s=bE(),a=vE(),r=200;function n(i,l){var o=this.__data__;if(o instanceof e){var d=o.__data__;if(!s||d.length<r-1)return d.push([i,l]),this.size=++o.size,this;o=this.__data__=new a(d)}return o.set(i,l),this.size=o.size,this}return HN=n,HN}var VN,_R;function j7(){if(_R)return VN;_R=1;var e=ib(),s=Vhe(),a=Ghe(),r=Whe(),n=Qhe(),i=Khe();function l(o){var d=this.__data__=new e(o);this.size=d.size}return l.prototype.clear=s,l.prototype.delete=a,l.prototype.get=r,l.prototype.has=n,l.prototype.set=i,VN=l,VN}var GN,kR;function Jhe(){if(kR)return GN;kR=1;var e="__lodash_hash_undefined__";function s(a){return this.__data__.set(a,e),this}return GN=s,GN}var WN,OR;function Yhe(){if(OR)return WN;OR=1;function e(s){return this.__data__.has(s)}return WN=e,WN}var QN,IR;function A7(){if(IR)return QN;IR=1;var e=vE(),s=Jhe(),a=Yhe();function r(n){var i=-1,l=n==null?0:n.length;for(this.__data__=new e;++i<l;)this.add(n[i])}return r.prototype.add=r.prototype.push=s,r.prototype.has=a,QN=r,QN}var KN,RR;function E7(){if(RR)return KN;RR=1;function e(s,a){for(var r=-1,n=s==null?0:s.length;++r<n;)if(a(s[r],r,s))return!0;return!1}return KN=e,KN}var JN,PR;function C7(){if(PR)return JN;PR=1;function e(s,a){return s.has(a)}return JN=e,JN}var YN,DR;function T7(){if(DR)return YN;DR=1;var e=A7(),s=E7(),a=C7(),r=1,n=2;function i(l,o,d,u,h,f){var x=d&r,g=l.length,v=o.length;if(g!=v&&!(x&&v>g))return!1;var b=f.get(l),y=f.get(o);if(b&&y)return b==o&&y==l;var j=-1,w=!0,A=d&n?new e:void 0;for(f.set(l,o),f.set(o,l);++j<g;){var O=l[j],C=o[j];if(u)var E=x?u(C,O,j,o,l,f):u(O,C,j,l,o,f);if(E!==void 0){if(E)continue;w=!1;break}if(A){if(!s(o,function(S,D){if(!a(A,D)&&(O===S||h(O,S,d,u,f)))return A.push(D)})){w=!1;break}}else if(!(O===C||h(O,C,d,u,f))){w=!1;break}}return f.delete(l),f.delete(o),w}return YN=i,YN}var XN,MR;function Xhe(){if(MR)return XN;MR=1;var e=ll(),s=e.Uint8Array;return XN=s,XN}var ZN,LR;function Zhe(){if(LR)return ZN;LR=1;function e(s){var a=-1,r=Array(s.size);return s.forEach(function(n,i){r[++a]=[i,n]}),r}return ZN=e,ZN}var ew,FR;function _E(){if(FR)return ew;FR=1;function e(s){var a=-1,r=Array(s.size);return s.forEach(function(n){r[++a]=n}),r}return ew=e,ew}var tw,UR;function exe(){if(UR)return tw;UR=1;var e=ph(),s=Xhe(),a=gE(),r=T7(),n=Zhe(),i=_E(),l=1,o=2,d="[object Boolean]",u="[object Date]",h="[object Error]",f="[object Map]",x="[object Number]",g="[object RegExp]",v="[object Set]",b="[object String]",y="[object Symbol]",j="[object ArrayBuffer]",w="[object DataView]",A=e?e.prototype:void 0,O=A?A.valueOf:void 0;function C(E,S,D,M,U,I,k){switch(D){case w:if(E.byteLength!=S.byteLength||E.byteOffset!=S.byteOffset)return!1;E=E.buffer,S=S.buffer;case j:return!(E.byteLength!=S.byteLength||!I(new s(E),new s(S)));case d:case u:case x:return a(+E,+S);case h:return E.name==S.name&&E.message==S.message;case g:case b:return E==S+"";case f:var z=n;case v:var _=M&l;if(z||(z=i),E.size!=S.size&&!_)return!1;var q=k.get(E);if(q)return q==S;M|=o,k.set(E,S);var L=r(z(E),z(S),M,U,I,k);return k.delete(E),L;case y:if(O)return O.call(E)==O.call(S)}return!1}return tw=C,tw}var sw,zR;function _7(){if(zR)return sw;zR=1;function e(s,a){for(var r=-1,n=a.length,i=s.length;++r<n;)s[i+r]=a[r];return s}return sw=e,sw}var aw,BR;function txe(){if(BR)return aw;BR=1;var e=_7(),s=yn();function a(r,n,i){var l=n(r);return s(r)?l:e(l,i(r))}return aw=a,aw}var rw,$R;function sxe(){if($R)return rw;$R=1;function e(s,a){for(var r=-1,n=s==null?0:s.length,i=0,l=[];++r<n;){var o=s[r];a(o,r,s)&&(l[i++]=o)}return l}return rw=e,rw}var nw,qR;function axe(){if(qR)return nw;qR=1;function e(){return[]}return nw=e,nw}var iw,HR;function rxe(){if(HR)return iw;HR=1;var e=sxe(),s=axe(),a=Object.prototype,r=a.propertyIsEnumerable,n=Object.getOwnPropertySymbols,i=n?function(l){return l==null?[]:(l=Object(l),e(n(l),function(o){return r.call(l,o)}))}:s;return iw=i,iw}var lw,VR;function nxe(){if(VR)return lw;VR=1;function e(s,a){for(var r=-1,n=Array(s);++r<s;)n[r]=a(r);return n}return lw=e,lw}var ow,GR;function ixe(){if(GR)return ow;GR=1;var e=Kl(),s=Jl(),a="[object Arguments]";function r(n){return s(n)&&e(n)==a}return ow=r,ow}var cw,WR;function kE(){if(WR)return cw;WR=1;var e=ixe(),s=Jl(),a=Object.prototype,r=a.hasOwnProperty,n=a.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(l){return s(l)&&r.call(l,"callee")&&!n.call(l,"callee")};return cw=i,cw}var Dm={exports:{}},dw,QR;function lxe(){if(QR)return dw;QR=1;function e(){return!1}return dw=e,dw}Dm.exports;var KR;function k7(){return KR||(KR=1,(function(e,s){var a=ll(),r=lxe(),n=s&&!s.nodeType&&s,i=n&&!0&&e&&!e.nodeType&&e,l=i&&i.exports===n,o=l?a.Buffer:void 0,d=o?o.isBuffer:void 0,u=d||r;e.exports=u})(Dm,Dm.exports)),Dm.exports}var uw,JR;function OE(){if(JR)return uw;JR=1;var e=9007199254740991,s=/^(?:0|[1-9]\d*)$/;function a(r,n){var i=typeof r;return n=n??e,!!n&&(i=="number"||i!="symbol"&&s.test(r))&&r>-1&&r%1==0&&r<n}return uw=a,uw}var mw,YR;function IE(){if(YR)return mw;YR=1;var e=9007199254740991;function s(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=e}return mw=s,mw}var fw,XR;function oxe(){if(XR)return fw;XR=1;var e=Kl(),s=IE(),a=Jl(),r="[object Arguments]",n="[object Array]",i="[object Boolean]",l="[object Date]",o="[object Error]",d="[object Function]",u="[object Map]",h="[object Number]",f="[object Object]",x="[object RegExp]",g="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",j="[object DataView]",w="[object Float32Array]",A="[object Float64Array]",O="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",D="[object Uint8ClampedArray]",M="[object Uint16Array]",U="[object Uint32Array]",I={};I[w]=I[A]=I[O]=I[C]=I[E]=I[S]=I[D]=I[M]=I[U]=!0,I[r]=I[n]=I[y]=I[i]=I[j]=I[l]=I[o]=I[d]=I[u]=I[h]=I[f]=I[x]=I[g]=I[v]=I[b]=!1;function k(z){return a(z)&&s(z.length)&&!!I[e(z)]}return fw=k,fw}var hw,ZR;function O7(){if(ZR)return hw;ZR=1;function e(s){return function(a){return s(a)}}return hw=e,hw}var Mm={exports:{}};Mm.exports;var e3;function cxe(){return e3||(e3=1,(function(e,s){var a=YF(),r=s&&!s.nodeType&&s,n=r&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===r,l=i&&a.process,o=(function(){try{var d=n&&n.require&&n.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}})();e.exports=o})(Mm,Mm.exports)),Mm.exports}var xw,t3;function I7(){if(t3)return xw;t3=1;var e=oxe(),s=O7(),a=cxe(),r=a&&a.isTypedArray,n=r?s(r):e;return xw=n,xw}var pw,s3;function dxe(){if(s3)return pw;s3=1;var e=nxe(),s=kE(),a=yn(),r=k7(),n=OE(),i=I7(),l=Object.prototype,o=l.hasOwnProperty;function d(u,h){var f=a(u),x=!f&&s(u),g=!f&&!x&&r(u),v=!f&&!x&&!g&&i(u),b=f||x||g||v,y=b?e(u.length,String):[],j=y.length;for(var w in u)(h||o.call(u,w))&&!(b&&(w=="length"||g&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||n(w,j)))&&y.push(w);return y}return pw=d,pw}var gw,a3;function uxe(){if(a3)return gw;a3=1;var e=Object.prototype;function s(a){var r=a&&a.constructor,n=typeof r=="function"&&r.prototype||e;return a===n}return gw=s,gw}var bw,r3;function R7(){if(r3)return bw;r3=1;function e(s,a){return function(r){return s(a(r))}}return bw=e,bw}var vw,n3;function mxe(){if(n3)return vw;n3=1;var e=R7(),s=e(Object.keys,Object);return vw=s,vw}var yw,i3;function fxe(){if(i3)return yw;i3=1;var e=uxe(),s=mxe(),a=Object.prototype,r=a.hasOwnProperty;function n(i){if(!e(i))return s(i);var l=[];for(var o in Object(i))r.call(i,o)&&o!="constructor"&&l.push(o);return l}return yw=n,yw}var Nw,l3;function bh(){if(l3)return Nw;l3=1;var e=pE(),s=IE();function a(r){return r!=null&&s(r.length)&&!e(r)}return Nw=a,Nw}var ww,o3;function fb(){if(o3)return ww;o3=1;var e=dxe(),s=fxe(),a=bh();function r(n){return a(n)?e(n):s(n)}return ww=r,ww}var Sw,c3;function hxe(){if(c3)return Sw;c3=1;var e=txe(),s=rxe(),a=fb();function r(n){return e(n,a,s)}return Sw=r,Sw}var jw,d3;function xxe(){if(d3)return jw;d3=1;var e=hxe(),s=1,a=Object.prototype,r=a.hasOwnProperty;function n(i,l,o,d,u,h){var f=o&s,x=e(i),g=x.length,v=e(l),b=v.length;if(g!=b&&!f)return!1;for(var y=g;y--;){var j=x[y];if(!(f?j in l:r.call(l,j)))return!1}var w=h.get(i),A=h.get(l);if(w&&A)return w==l&&A==i;var O=!0;h.set(i,l),h.set(l,i);for(var C=f;++y<g;){j=x[y];var E=i[j],S=l[j];if(d)var D=f?d(S,E,j,l,i,h):d(E,S,j,i,l,h);if(!(D===void 0?E===S||u(E,S,o,d,h):D)){O=!1;break}C||(C=j=="constructor")}if(O&&!C){var M=i.constructor,U=l.constructor;M!=U&&"constructor"in i&&"constructor"in l&&!(typeof M=="function"&&M instanceof M&&typeof U=="function"&&U instanceof U)&&(O=!1)}return h.delete(i),h.delete(l),O}return jw=n,jw}var Aw,u3;function pxe(){if(u3)return Aw;u3=1;var e=bd(),s=ll(),a=e(s,"DataView");return Aw=a,Aw}var Ew,m3;function gxe(){if(m3)return Ew;m3=1;var e=bd(),s=ll(),a=e(s,"Promise");return Ew=a,Ew}var Cw,f3;function P7(){if(f3)return Cw;f3=1;var e=bd(),s=ll(),a=e(s,"Set");return Cw=a,Cw}var Tw,h3;function bxe(){if(h3)return Tw;h3=1;var e=bd(),s=ll(),a=e(s,"WeakMap");return Tw=a,Tw}var _w,x3;function vxe(){if(x3)return _w;x3=1;var e=pxe(),s=bE(),a=gxe(),r=P7(),n=bxe(),i=Kl(),l=XF(),o="[object Map]",d="[object Object]",u="[object Promise]",h="[object Set]",f="[object WeakMap]",x="[object DataView]",g=l(e),v=l(s),b=l(a),y=l(r),j=l(n),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=x||s&&w(new s)!=o||a&&w(a.resolve())!=u||r&&w(new r)!=h||n&&w(new n)!=f)&&(w=function(A){var O=i(A),C=O==d?A.constructor:void 0,E=C?l(C):"";if(E)switch(E){case g:return x;case v:return o;case b:return u;case y:return h;case j:return f}return O}),_w=w,_w}var kw,p3;function yxe(){if(p3)return kw;p3=1;var e=j7(),s=T7(),a=exe(),r=xxe(),n=vxe(),i=yn(),l=k7(),o=I7(),d=1,u="[object Arguments]",h="[object Array]",f="[object Object]",x=Object.prototype,g=x.hasOwnProperty;function v(b,y,j,w,A,O){var C=i(b),E=i(y),S=C?h:n(b),D=E?h:n(y);S=S==u?f:S,D=D==u?f:D;var M=S==f,U=D==f,I=S==D;if(I&&l(b)){if(!l(y))return!1;C=!0,M=!1}if(I&&!M)return O||(O=new e),C||o(b)?s(b,y,j,w,A,O):a(b,y,S,j,w,A,O);if(!(j&d)){var k=M&&g.call(b,"__wrapped__"),z=U&&g.call(y,"__wrapped__");if(k||z){var _=k?b.value():b,q=z?y.value():y;return O||(O=new e),A(_,q,j,w,O)}}return I?(O||(O=new e),r(b,y,j,w,A,O)):!1}return kw=v,kw}var Ow,g3;function RE(){if(g3)return Ow;g3=1;var e=yxe(),s=Jl();function a(r,n,i,l,o){return r===n?!0:r==null||n==null||!s(r)&&!s(n)?r!==r&&n!==n:e(r,n,i,l,a,o)}return Ow=a,Ow}var Iw,b3;function Nxe(){if(b3)return Iw;b3=1;var e=j7(),s=RE(),a=1,r=2;function n(i,l,o,d){var u=o.length,h=u,f=!d;if(i==null)return!h;for(i=Object(i);u--;){var x=o[u];if(f&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++u<h;){x=o[u];var g=x[0],v=i[g],b=x[1];if(f&&x[2]){if(v===void 0&&!(g in i))return!1}else{var y=new e;if(d)var j=d(v,b,g,i,l,y);if(!(j===void 0?s(b,v,a|r,d,y):j))return!1}}return!0}return Iw=n,Iw}var Rw,v3;function D7(){if(v3)return Rw;v3=1;var e=ac();function s(a){return a===a&&!e(a)}return Rw=s,Rw}var Pw,y3;function wxe(){if(y3)return Pw;y3=1;var e=D7(),s=fb();function a(r){for(var n=s(r),i=n.length;i--;){var l=n[i],o=r[l];n[i]=[l,o,e(o)]}return n}return Pw=a,Pw}var Dw,N3;function M7(){if(N3)return Dw;N3=1;function e(s,a){return function(r){return r==null?!1:r[s]===a&&(a!==void 0||s in Object(r))}}return Dw=e,Dw}var Mw,w3;function Sxe(){if(w3)return Mw;w3=1;var e=Nxe(),s=wxe(),a=M7();function r(n){var i=s(n);return i.length==1&&i[0][2]?a(i[0][0],i[0][1]):function(l){return l===n||e(l,n,i)}}return Mw=r,Mw}var Lw,S3;function jxe(){if(S3)return Lw;S3=1;function e(s,a){return s!=null&&a in Object(s)}return Lw=e,Lw}var Fw,j3;function Axe(){if(j3)return Fw;j3=1;var e=t7(),s=kE(),a=yn(),r=OE(),n=IE(),i=ob();function l(o,d,u){d=e(d,o);for(var h=-1,f=d.length,x=!1;++h<f;){var g=i(d[h]);if(!(x=o!=null&&u(o,g)))break;o=o[g]}return x||++h!=f?x:(f=o==null?0:o.length,!!f&&n(f)&&r(g,f)&&(a(o)||s(o)))}return Fw=l,Fw}var Uw,A3;function Exe(){if(A3)return Uw;A3=1;var e=jxe(),s=Axe();function a(r,n){return r!=null&&s(r,n,e)}return Uw=a,Uw}var zw,E3;function Cxe(){if(E3)return zw;E3=1;var e=RE(),s=s7(),a=Exe(),r=xE(),n=D7(),i=M7(),l=ob(),o=1,d=2;function u(h,f){return r(h)&&n(f)?i(l(h),f):function(x){var g=s(x,h);return g===void 0&&g===f?a(x,h):e(f,g,o|d)}}return zw=u,zw}var Bw,C3;function b0(){if(C3)return Bw;C3=1;function e(s){return s}return Bw=e,Bw}var $w,T3;function Txe(){if(T3)return $w;T3=1;function e(s){return function(a){return a==null?void 0:a[s]}}return $w=e,$w}var qw,_3;function _xe(){if(_3)return qw;_3=1;var e=NE();function s(a){return function(r){return e(r,a)}}return qw=s,qw}var Hw,k3;function kxe(){if(k3)return Hw;k3=1;var e=Txe(),s=_xe(),a=xE(),r=ob();function n(i){return a(i)?e(r(i)):s(i)}return Hw=n,Hw}var Vw,O3;function rc(){if(O3)return Vw;O3=1;var e=Sxe(),s=Cxe(),a=b0(),r=yn(),n=kxe();function i(l){return typeof l=="function"?l:l==null?a:typeof l=="object"?r(l)?s(l[0],l[1]):e(l):n(l)}return Vw=i,Vw}var Gw,I3;function L7(){if(I3)return Gw;I3=1;function e(s,a,r,n){for(var i=s.length,l=r+(n?1:-1);n?l--:++l<i;)if(a(s[l],l,s))return l;return-1}return Gw=e,Gw}var Ww,R3;function Oxe(){if(R3)return Ww;R3=1;function e(s){return s!==s}return Ww=e,Ww}var Qw,P3;function Ixe(){if(P3)return Qw;P3=1;function e(s,a,r){for(var n=r-1,i=s.length;++n<i;)if(s[n]===a)return n;return-1}return Qw=e,Qw}var Kw,D3;function Rxe(){if(D3)return Kw;D3=1;var e=L7(),s=Oxe(),a=Ixe();function r(n,i,l){return i===i?a(n,i,l):e(n,s,l)}return Kw=r,Kw}var Jw,M3;function Pxe(){if(M3)return Jw;M3=1;var e=Rxe();function s(a,r){var n=a==null?0:a.length;return!!n&&e(a,r,0)>-1}return Jw=s,Jw}var Yw,L3;function Dxe(){if(L3)return Yw;L3=1;function e(s,a,r){for(var n=-1,i=s==null?0:s.length;++n<i;)if(r(a,s[n]))return!0;return!1}return Yw=e,Yw}var Xw,F3;function Mxe(){if(F3)return Xw;F3=1;function e(){}return Xw=e,Xw}var Zw,U3;function Lxe(){if(U3)return Zw;U3=1;var e=P7(),s=Mxe(),a=_E(),r=1/0,n=e&&1/a(new e([,-0]))[1]==r?function(i){return new e(i)}:s;return Zw=n,Zw}var eS,z3;function Fxe(){if(z3)return eS;z3=1;var e=A7(),s=Pxe(),a=Dxe(),r=C7(),n=Lxe(),i=_E(),l=200;function o(d,u,h){var f=-1,x=s,g=d.length,v=!0,b=[],y=b;if(h)v=!1,x=a;else if(g>=l){var j=u?null:n(d);if(j)return i(j);v=!1,x=r,y=new e}else y=u?[]:b;e:for(;++f<g;){var w=d[f],A=u?u(w):w;if(w=h||w!==0?w:0,v&&A===A){for(var O=y.length;O--;)if(y[O]===A)continue e;u&&y.push(A),b.push(w)}else x(y,A,h)||(y!==b&&y.push(A),b.push(w))}return b}return eS=o,eS}var tS,B3;function Uxe(){if(B3)return tS;B3=1;var e=rc(),s=Fxe();function a(r,n){return r&&r.length?s(r,e(n,2)):[]}return tS=a,tS}var zxe=Uxe();const $3=ea(zxe);function F7(e,s,a){return s===!0?$3(e,a):is(s)?$3(e,s):e}function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$u(e)}var Bxe=["ref"];function q3(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function El(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?q3(Object(a),!0).forEach(function(r){hb(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q3(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function $xe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function H3(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z7(r.key),r)}}function qxe(e,s,a){return s&&H3(e.prototype,s),a&&H3(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hxe(e,s,a){return s=ag(s),Vxe(e,U7()?Reflect.construct(s,a||[],ag(e).constructor):s.apply(e,a))}function Vxe(e,s){if(s&&($u(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gxe(e)}function Gxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U7=function(){return!!e})()}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ag(e)}function Wxe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&f2(e,s)}function f2(e,s){return f2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},f2(e,s)}function hb(e,s,a){return s=z7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function z7(e){var s=Qxe(e,"string");return $u(s)=="symbol"?s:s+""}function Qxe(e,s){if($u(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if($u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Kxe(e,s){if(e==null)return{};var a=Jxe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jxe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function Yxe(e){return e.value}function Xxe(e,s){if(Oe.isValidElement(e))return Oe.cloneElement(e,s);if(typeof e=="function")return Oe.createElement(e,s);s.ref;var a=Kxe(s,Bxe);return Oe.createElement(TE,a)}var V3=1,ku=(function(e){function s(){var a;$xe(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=Hxe(this,s,[].concat(n)),hb(a,"lastBoundingBox",{width:-1,height:-1}),a}return Wxe(s,e),qxe(s,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,n=this.getBBox();n?(Math.abs(n.width-this.lastBoundingBox.width)>V3||Math.abs(n.height-this.lastBoundingBox.height)>V3)&&(this.lastBoundingBox.width=n.width,this.lastBoundingBox.height=n.height,r&&r(n)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?El({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var n=this.props,i=n.layout,l=n.align,o=n.verticalAlign,d=n.margin,u=n.chartWidth,h=n.chartHeight,f,x;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(l==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();f={left:((u||0)-g.width)/2}}else f=l==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();x={top:((h||0)-v.height)/2}}else x=o==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return El(El({},f),x)}},{key:"render",value:function(){var r=this,n=this.props,i=n.content,l=n.width,o=n.height,d=n.wrapperStyle,u=n.payloadUniqBy,h=n.payload,f=El(El({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(d)),d);return Oe.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(g){r.wrapperNode=g}},Xxe(i,El(El({},this.props),{},{payload:F7(h,u,Yxe)})))}}],[{key:"getWithHeight",value:function(r,n){var i=El(El({},this.defaultProps),r.props),l=i.layout;return l==="vertical"&&mt(r.props.height)?{height:r.props.height}:l==="horizontal"?{width:r.props.width||n}:null}}])})(T.PureComponent);hb(ku,"displayName","Legend");hb(ku,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var sS,G3;function Zxe(){if(G3)return sS;G3=1;var e=ph(),s=kE(),a=yn(),r=e?e.isConcatSpreadable:void 0;function n(i){return a(i)||s(i)||!!(r&&i&&i[r])}return sS=n,sS}var aS,W3;function B7(){if(W3)return aS;W3=1;var e=_7(),s=Zxe();function a(r,n,i,l,o){var d=-1,u=r.length;for(i||(i=s),o||(o=[]);++d<u;){var h=r[d];n>0&&i(h)?n>1?a(h,n-1,i,l,o):e(o,h):l||(o[o.length]=h)}return o}return aS=a,aS}var rS,Q3;function epe(){if(Q3)return rS;Q3=1;function e(s){return function(a,r,n){for(var i=-1,l=Object(a),o=n(a),d=o.length;d--;){var u=o[s?d:++i];if(r(l[u],u,l)===!1)break}return a}}return rS=e,rS}var nS,K3;function tpe(){if(K3)return nS;K3=1;var e=epe(),s=e();return nS=s,nS}var iS,J3;function $7(){if(J3)return iS;J3=1;var e=tpe(),s=fb();function a(r,n){return r&&e(r,n,s)}return iS=a,iS}var lS,Y3;function spe(){if(Y3)return lS;Y3=1;var e=bh();function s(a,r){return function(n,i){if(n==null)return n;if(!e(n))return a(n,i);for(var l=n.length,o=r?l:-1,d=Object(n);(r?o--:++o<l)&&i(d[o],o,d)!==!1;);return n}}return lS=s,lS}var oS,X3;function PE(){if(X3)return oS;X3=1;var e=$7(),s=spe(),a=s(e);return oS=a,oS}var cS,Z3;function q7(){if(Z3)return cS;Z3=1;var e=PE(),s=bh();function a(r,n){var i=-1,l=s(r)?Array(r.length):[];return e(r,function(o,d,u){l[++i]=n(o,d,u)}),l}return cS=a,cS}var dS,eP;function ape(){if(eP)return dS;eP=1;function e(s,a){var r=s.length;for(s.sort(a);r--;)s[r]=s[r].value;return s}return dS=e,dS}var uS,tP;function rpe(){if(tP)return uS;tP=1;var e=x0();function s(a,r){if(a!==r){var n=a!==void 0,i=a===null,l=a===a,o=e(a),d=r!==void 0,u=r===null,h=r===r,f=e(r);if(!u&&!f&&!o&&a>r||o&&d&&h&&!u&&!f||i&&d&&h||!n&&h||!l)return 1;if(!i&&!o&&!f&&a<r||f&&n&&l&&!i&&!o||u&&n&&l||!d&&l||!h)return-1}return 0}return uS=s,uS}var mS,sP;function npe(){if(sP)return mS;sP=1;var e=rpe();function s(a,r,n){for(var i=-1,l=a.criteria,o=r.criteria,d=l.length,u=n.length;++i<d;){var h=e(l[i],o[i]);if(h){if(i>=u)return h;var f=n[i];return h*(f=="desc"?-1:1)}}return a.index-r.index}return mS=s,mS}var fS,aP;function ipe(){if(aP)return fS;aP=1;var e=yE(),s=NE(),a=rc(),r=q7(),n=ape(),i=O7(),l=npe(),o=b0(),d=yn();function u(h,f,x){f.length?f=e(f,function(b){return d(b)?function(y){return s(y,b.length===1?b[0]:b)}:b}):f=[o];var g=-1;f=e(f,i(a));var v=r(h,function(b,y,j){var w=e(f,function(A){return A(b)});return{criteria:w,index:++g,value:b}});return n(v,function(b,y){return l(b,y,x)})}return fS=u,fS}var hS,rP;function lpe(){if(rP)return hS;rP=1;function e(s,a,r){switch(r.length){case 0:return s.call(a);case 1:return s.call(a,r[0]);case 2:return s.call(a,r[0],r[1]);case 3:return s.call(a,r[0],r[1],r[2])}return s.apply(a,r)}return hS=e,hS}var xS,nP;function ope(){if(nP)return xS;nP=1;var e=lpe(),s=Math.max;function a(r,n,i){return n=s(n===void 0?r.length-1:n,0),function(){for(var l=arguments,o=-1,d=s(l.length-n,0),u=Array(d);++o<d;)u[o]=l[n+o];o=-1;for(var h=Array(n+1);++o<n;)h[o]=l[o];return h[n]=i(u),e(r,this,h)}}return xS=a,xS}var pS,iP;function cpe(){if(iP)return pS;iP=1;function e(s){return function(){return s}}return pS=e,pS}var gS,lP;function H7(){if(lP)return gS;lP=1;var e=bd(),s=(function(){try{var a=e(Object,"defineProperty");return a({},"",{}),a}catch{}})();return gS=s,gS}var bS,oP;function dpe(){if(oP)return bS;oP=1;var e=cpe(),s=H7(),a=b0(),r=s?function(n,i){return s(n,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:a;return bS=r,bS}var vS,cP;function upe(){if(cP)return vS;cP=1;var e=800,s=16,a=Date.now;function r(n){var i=0,l=0;return function(){var o=a(),d=s-(o-l);if(l=o,d>0){if(++i>=e)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}return vS=r,vS}var yS,dP;function mpe(){if(dP)return yS;dP=1;var e=dpe(),s=upe(),a=s(e);return yS=a,yS}var NS,uP;function fpe(){if(uP)return NS;uP=1;var e=b0(),s=ope(),a=mpe();function r(n,i){return a(s(n,i,e),n+"")}return NS=r,NS}var wS,mP;function xb(){if(mP)return wS;mP=1;var e=gE(),s=bh(),a=OE(),r=ac();function n(i,l,o){if(!r(o))return!1;var d=typeof l;return(d=="number"?s(o)&&a(l,o.length):d=="string"&&l in o)?e(o[l],i):!1}return wS=n,wS}var SS,fP;function hpe(){if(fP)return SS;fP=1;var e=B7(),s=ipe(),a=fpe(),r=xb(),n=a(function(i,l){if(i==null)return[];var o=l.length;return o>1&&r(i,l[0],l[1])?l=[]:o>2&&r(l[0],l[1],l[2])&&(l=[l[0]]),s(i,e(l,1),[])});return SS=n,SS}var xpe=hpe();const DE=ea(xpe);function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Af(e)}function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},h2.apply(this,arguments)}function ppe(e,s){return ype(e)||vpe(e,s)||bpe(e,s)||gpe()}function gpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bpe(e,s){if(e){if(typeof e=="string")return hP(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return hP(e,s)}}function hP(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function vpe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function ype(e){if(Array.isArray(e))return e}function xP(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function jS(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?xP(Object(a),!0).forEach(function(r){Npe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xP(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Npe(e,s,a){return s=wpe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function wpe(e){var s=Spe(e,"string");return Af(s)=="symbol"?s:s+""}function Spe(e,s){if(Af(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function jpe(e){return Array.isArray(e)&&lr(e[0])&&lr(e[1])?e.join(" ~ "):e}var Ape=function(s){var a=s.separator,r=a===void 0?" : ":a,n=s.contentStyle,i=n===void 0?{}:n,l=s.itemStyle,o=l===void 0?{}:l,d=s.labelStyle,u=d===void 0?{}:d,h=s.payload,f=s.formatter,x=s.itemSorter,g=s.wrapperClassName,v=s.labelClassName,b=s.label,y=s.labelFormatter,j=s.accessibilityLayer,w=j===void 0?!1:j,A=function(){if(h&&h.length){var k={padding:0,margin:0},z=(x?DE(h,x):h).map(function(_,q){if(_.type==="none")return null;var L=jS({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},o),Q=_.formatter||f||jpe,X=_.value,W=_.name,ee=X,V=W;if(Q&&ee!=null&&V!=null){var P=Q(X,W,_,q,h);if(Array.isArray(P)){var Y=ppe(P,2);ee=Y[0],V=Y[1]}else ee=P}return Oe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:L},lr(V)?Oe.createElement("span",{className:"recharts-tooltip-item-name"},V):null,lr(V)?Oe.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Oe.createElement("span",{className:"recharts-tooltip-item-value"},ee),Oe.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return Oe.createElement("ul",{className:"recharts-tooltip-item-list",style:k},z)}return null},O=jS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=jS({margin:0},u),E=!Ss(b),S=E?b:"",D=Es("recharts-default-tooltip",g),M=Es("recharts-tooltip-label",v);E&&y&&h!==void 0&&h!==null&&(S=y(b,h));var U=w?{role:"status","aria-live":"assertive"}:{};return Oe.createElement("div",h2({className:D,style:O},U),Oe.createElement("p",{className:M,style:C},Oe.isValidElement(S)?S:"".concat(S)),A())};function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ef(e)}function ap(e,s,a){return s=Epe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Epe(e){var s=Cpe(e,"string");return Ef(s)=="symbol"?s:s+""}function Cpe(e,s){if(Ef(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var Nm="recharts-tooltip-wrapper",Tpe={visibility:"hidden"};function _pe(e){var s=e.coordinate,a=e.translateX,r=e.translateY;return Es(Nm,ap(ap(ap(ap({},"".concat(Nm,"-right"),mt(a)&&s&&mt(s.x)&&a>=s.x),"".concat(Nm,"-left"),mt(a)&&s&&mt(s.x)&&a<s.x),"".concat(Nm,"-bottom"),mt(r)&&s&&mt(s.y)&&r>=s.y),"".concat(Nm,"-top"),mt(r)&&s&&mt(s.y)&&r<s.y))}function pP(e){var s=e.allowEscapeViewBox,a=e.coordinate,r=e.key,n=e.offsetTopLeft,i=e.position,l=e.reverseDirection,o=e.tooltipDimension,d=e.viewBox,u=e.viewBoxDimension;if(i&&mt(i[r]))return i[r];var h=a[r]-o-n,f=a[r]+n;if(s[r])return l[r]?h:f;if(l[r]){var x=h,g=d[r];return x<g?Math.max(f,d[r]):Math.max(h,d[r])}var v=f+o,b=d[r]+u;return v>b?Math.max(h,d[r]):Math.max(f,d[r])}function kpe(e){var s=e.translateX,a=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(s,"px, ").concat(a,"px, 0)"):"translate(".concat(s,"px, ").concat(a,"px)")}}function Ope(e){var s=e.allowEscapeViewBox,a=e.coordinate,r=e.offsetTopLeft,n=e.position,i=e.reverseDirection,l=e.tooltipBox,o=e.useTranslate3d,d=e.viewBox,u,h,f;return l.height>0&&l.width>0&&a?(h=pP({allowEscapeViewBox:s,coordinate:a,key:"x",offsetTopLeft:r,position:n,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),f=pP({allowEscapeViewBox:s,coordinate:a,key:"y",offsetTopLeft:r,position:n,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),u=kpe({translateX:h,translateY:f,useTranslate3d:o})):u=Tpe,{cssProperties:u,cssClasses:_pe({translateX:h,translateY:f,coordinate:a})}}function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},qu(e)}function gP(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function bP(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?gP(Object(a),!0).forEach(function(r){p2(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gP(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ipe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function Rpe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G7(r.key),r)}}function Ppe(e,s,a){return s&&Rpe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dpe(e,s,a){return s=rg(s),Mpe(e,V7()?Reflect.construct(s,a||[],rg(e).constructor):s.apply(e,a))}function Mpe(e,s){if(s&&(qu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lpe(e)}function Lpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V7=function(){return!!e})()}function rg(e){return rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},rg(e)}function Fpe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&x2(e,s)}function x2(e,s){return x2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},x2(e,s)}function p2(e,s,a){return s=G7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function G7(e){var s=Upe(e,"string");return qu(s)=="symbol"?s:s+""}function Upe(e,s){if(qu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vP=1,zpe=(function(e){function s(){var a;Ipe(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=Dpe(this,s,[].concat(n)),p2(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),p2(a,"handleKeyDown",function(l){if(l.key==="Escape"){var o,d,u,h;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(d=a.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&o!==void 0?o:0,y:(u=(h=a.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),a}return Fpe(s,e),Ppe(s,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>vP||Math.abs(r.height-this.state.lastBoundingBox.height)>vP)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,n;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,o=n.animationDuration,d=n.animationEasing,u=n.children,h=n.coordinate,f=n.hasPayload,x=n.isAnimationActive,g=n.offset,v=n.position,b=n.reverseDirection,y=n.useTranslate3d,j=n.viewBox,w=n.wrapperStyle,A=Ope({allowEscapeViewBox:l,coordinate:h,offsetTopLeft:g,position:v,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:j}),O=A.cssClasses,C=A.cssProperties,E=bP(bP({transition:x&&i?"transform ".concat(o,"ms ").concat(d):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return Oe.createElement("div",{tabIndex:-1,className:O,style:E,ref:function(D){r.wrapperNode=D}},u)}}])})(T.PureComponent),Bpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},v0={isSsr:Bpe()};function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Hu(e)}function yP(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function NP(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?yP(Object(a),!0).forEach(function(r){ME(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yP(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function $pe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function qpe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q7(r.key),r)}}function Hpe(e,s,a){return s&&qpe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vpe(e,s,a){return s=ng(s),Gpe(e,W7()?Reflect.construct(s,a||[],ng(e).constructor):s.apply(e,a))}function Gpe(e,s){if(s&&(Hu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wpe(e)}function Wpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W7=function(){return!!e})()}function ng(e){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ng(e)}function Qpe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&g2(e,s)}function g2(e,s){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},g2(e,s)}function ME(e,s,a){return s=Q7(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Q7(e){var s=Kpe(e,"string");return Hu(s)=="symbol"?s:s+""}function Kpe(e,s){if(Hu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Jpe(e){return e.dataKey}function Ype(e,s){return Oe.isValidElement(e)?Oe.cloneElement(e,s):typeof e=="function"?Oe.createElement(e,s):Oe.createElement(Ape,s)}var Ci=(function(e){function s(){return $pe(this,s),Vpe(this,s,arguments)}return Qpe(s,e),Hpe(s,[{key:"render",value:function(){var r=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,o=n.animationDuration,d=n.animationEasing,u=n.content,h=n.coordinate,f=n.filterNull,x=n.isAnimationActive,g=n.offset,v=n.payload,b=n.payloadUniqBy,y=n.position,j=n.reverseDirection,w=n.useTranslate3d,A=n.viewBox,O=n.wrapperStyle,C=v??[];f&&C.length&&(C=F7(v.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),b,Jpe));var E=C.length>0;return Oe.createElement(zpe,{allowEscapeViewBox:l,animationDuration:o,animationEasing:d,isAnimationActive:x,active:i,coordinate:h,hasPayload:E,offset:g,position:y,reverseDirection:j,useTranslate3d:w,viewBox:A,wrapperStyle:O},Ype(u,NP(NP({},this.props),{},{payload:C})))}}])})(T.PureComponent);ME(Ci,"displayName","Tooltip");ME(Ci,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!v0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var AS,wP;function Xpe(){if(wP)return AS;wP=1;var e=ll(),s=function(){return e.Date.now()};return AS=s,AS}var ES,SP;function Zpe(){if(SP)return ES;SP=1;var e=/\s/;function s(a){for(var r=a.length;r--&&e.test(a.charAt(r)););return r}return ES=s,ES}var CS,jP;function ege(){if(jP)return CS;jP=1;var e=Zpe(),s=/^\s+/;function a(r){return r&&r.slice(0,e(r)+1).replace(s,"")}return CS=a,CS}var TS,AP;function K7(){if(AP)return TS;AP=1;var e=ege(),s=ac(),a=x0(),r=NaN,n=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function d(u){if(typeof u=="number")return u;if(a(u))return r;if(s(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=s(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=i.test(u);return f||l.test(u)?o(u.slice(2),f?2:8):n.test(u)?r:+u}return TS=d,TS}var _S,EP;function tge(){if(EP)return _S;EP=1;var e=ac(),s=Xpe(),a=K7(),r="Expected a function",n=Math.max,i=Math.min;function l(o,d,u){var h,f,x,g,v,b,y=0,j=!1,w=!1,A=!0;if(typeof o!="function")throw new TypeError(r);d=a(d)||0,e(u)&&(j=!!u.leading,w="maxWait"in u,x=w?n(a(u.maxWait)||0,d):x,A="trailing"in u?!!u.trailing:A);function O(z){var _=h,q=f;return h=f=void 0,y=z,g=o.apply(q,_),g}function C(z){return y=z,v=setTimeout(D,d),j?O(z):g}function E(z){var _=z-b,q=z-y,L=d-_;return w?i(L,x-q):L}function S(z){var _=z-b,q=z-y;return b===void 0||_>=d||_<0||w&&q>=x}function D(){var z=s();if(S(z))return M(z);v=setTimeout(D,E(z))}function M(z){return v=void 0,A&&h?O(z):(h=f=void 0,g)}function U(){v!==void 0&&clearTimeout(v),y=0,h=b=f=v=void 0}function I(){return v===void 0?g:M(s())}function k(){var z=s(),_=S(z);if(h=arguments,f=this,b=z,_){if(v===void 0)return C(b);if(w)return clearTimeout(v),v=setTimeout(D,d),O(b)}return v===void 0&&(v=setTimeout(D,d)),g}return k.cancel=U,k.flush=I,k}return _S=l,_S}var kS,CP;function sge(){if(CP)return kS;CP=1;var e=tge(),s=ac(),a="Expected a function";function r(n,i,l){var o=!0,d=!0;if(typeof n!="function")throw new TypeError(a);return s(l)&&(o="leading"in l?!!l.leading:o,d="trailing"in l?!!l.trailing:d),e(n,i,{leading:o,maxWait:i,trailing:d})}return kS=r,kS}var age=sge();const J7=ea(age);function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cf(e)}function TP(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function rp(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?TP(Object(a),!0).forEach(function(r){rge(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TP(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function rge(e,s,a){return s=nge(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function nge(e){var s=ige(e,"string");return Cf(s)=="symbol"?s:s+""}function ige(e,s){if(Cf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function lge(e,s){return uge(e)||dge(e,s)||cge(e,s)||oge()}function oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cge(e,s){if(e){if(typeof e=="string")return _P(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _P(e,s)}}function _P(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function dge(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function uge(e){if(Array.isArray(e))return e}var kP=T.forwardRef(function(e,s){var a=e.aspect,r=e.initialDimension,n=r===void 0?{width:-1,height:-1}:r,i=e.width,l=i===void 0?"100%":i,o=e.height,d=o===void 0?"100%":o,u=e.minWidth,h=u===void 0?0:u,f=e.minHeight,x=e.maxHeight,g=e.children,v=e.debounce,b=v===void 0?0:v,y=e.id,j=e.className,w=e.onResize,A=e.style,O=A===void 0?{}:A,C=T.useRef(null),E=T.useRef();E.current=w,T.useImperativeHandle(s,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var S=T.useState({containerWidth:n.width,containerHeight:n.height}),D=lge(S,2),M=D[0],U=D[1],I=T.useCallback(function(z,_){U(function(q){var L=Math.round(z),Q=Math.round(_);return q.containerWidth===L&&q.containerHeight===Q?q:{containerWidth:L,containerHeight:Q}})},[]);T.useEffect(function(){var z=function(W){var ee,V=W[0].contentRect,P=V.width,Y=V.height;I(P,Y),(ee=E.current)===null||ee===void 0||ee.call(E,P,Y)};b>0&&(z=J7(z,b,{trailing:!0,leading:!1}));var _=new ResizeObserver(z),q=C.current.getBoundingClientRect(),L=q.width,Q=q.height;return I(L,Q),_.observe(C.current),function(){_.disconnect()}},[I,b]);var k=T.useMemo(function(){var z=M.containerWidth,_=M.containerHeight;if(z<0||_<0)return null;Ul(Dc(l)||Dc(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,d),Ul(!a||a>0,"The aspect(%s) must be greater than zero.",a);var q=Dc(l)?z:l,L=Dc(d)?_:d;a&&a>0&&(q?L=q/a:L&&(q=L*a),x&&L>x&&(L=x)),Ul(q>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,L,l,d,h,f,a);var Q=!Array.isArray(g)&&Fl(g.type).endsWith("Chart");return Oe.Children.map(g,function(X){return Oe.isValidElement(X)?T.cloneElement(X,rp({width:q,height:L},Q?{style:rp({height:"100%",width:"100%",maxHeight:L,maxWidth:q},X.props.style)}:{})):X})},[a,g,d,x,f,h,M,l]);return Oe.createElement("div",{id:y?"".concat(y):void 0,className:Es("recharts-responsive-container",j),style:rp(rp({},O),{},{width:l,height:d,minWidth:h,minHeight:f,maxHeight:x}),ref:C},k)}),Y7=function(s){return null};Y7.displayName="Cell";function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tf(e)}function OP(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function b2(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?OP(Object(a),!0).forEach(function(r){mge(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OP(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function mge(e,s,a){return s=fge(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function fge(e){var s=hge(e,"string");return Tf(s)=="symbol"?s:s+""}function hge(e,s){if(Tf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var fu={widthCache:{},cacheCount:0},xge=2e3,pge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IP="recharts_measurement_span";function gge(e){var s=b2({},e);return Object.keys(s).forEach(function(a){s[a]||delete s[a]}),s}var Ym=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s==null||v0.isSsr)return{width:0,height:0};var r=gge(a),n=JSON.stringify({text:s,copyStyle:r});if(fu.widthCache[n])return fu.widthCache[n];try{var i=document.getElementById(IP);i||(i=document.createElement("span"),i.setAttribute("id",IP),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=b2(b2({},pge),r);Object.assign(i.style,l),i.textContent="".concat(s);var o=i.getBoundingClientRect(),d={width:o.width,height:o.height};return fu.widthCache[n]=d,++fu.cacheCount>xge&&(fu.cacheCount=0,fu.widthCache={}),d}catch{return{width:0,height:0}}},bge=function(s){return{top:s.top+window.scrollY-document.documentElement.clientTop,left:s.left+window.scrollX-document.documentElement.clientLeft}};function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_f(e)}function ig(e,s){return wge(e)||Nge(e,s)||yge(e,s)||vge()}function vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yge(e,s){if(e){if(typeof e=="string")return RP(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return RP(e,s)}}function RP(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Nge(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function wge(e){if(Array.isArray(e))return e}function Sge(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function PP(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Age(r.key),r)}}function jge(e,s,a){return s&&PP(e.prototype,s),a&&PP(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Age(e){var s=Ege(e,"string");return _f(s)=="symbol"?s:s+""}function Ege(e,s){if(_f(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var DP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Cge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,X7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_ge=Object.keys(X7),yu="NaN";function kge(e,s){return e*X7[s]}var np=(function(){function e(s,a){Sge(this,e),this.num=s,this.unit=a,this.num=s,this.unit=a,Number.isNaN(s)&&(this.unit=""),a!==""&&!Cge.test(a)&&(this.num=NaN,this.unit=""),_ge.includes(a)&&(this.num=kge(s,a),this.unit="px")}return jge(e,[{key:"add",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new e(NaN,""):new e(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new e(NaN,""):new e(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,n=(r=Tge.exec(a))!==null&&r!==void 0?r:[],i=ig(n,3),l=i[1],o=i[2];return new e(parseFloat(l),o??"")}}])})();function Z7(e){if(e.includes(yu))return yu;for(var s=e;s.includes("*")||s.includes("/");){var a,r=(a=DP.exec(s))!==null&&a!==void 0?a:[],n=ig(r,4),i=n[1],l=n[2],o=n[3],d=np.parse(i??""),u=np.parse(o??""),h=l==="*"?d.multiply(u):d.divide(u);if(h.isNaN())return yu;s=s.replace(DP,h.toString())}for(;s.includes("+")||/.-\d+(?:\.\d+)?/.test(s);){var f,x=(f=MP.exec(s))!==null&&f!==void 0?f:[],g=ig(x,4),v=g[1],b=g[2],y=g[3],j=np.parse(v??""),w=np.parse(y??""),A=b==="+"?j.add(w):j.subtract(w);if(A.isNaN())return yu;s=s.replace(MP,A.toString())}return s}var LP=/\(([^()]*)\)/;function Oge(e){for(var s=e;s.includes("(");){var a=LP.exec(s),r=ig(a,2),n=r[1];s=s.replace(LP,Z7(n))}return s}function Ige(e){var s=e.replace(/\s+/g,"");return s=Oge(s),s=Z7(s),s}function Rge(e){try{return Ige(e)}catch{return yu}}function OS(e){var s=Rge(e.slice(5,-1));return s===yu?"":s}var Pge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Dge=["dx","dy","angle","className","breakAll"];function v2(){return v2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},v2.apply(this,arguments)}function FP(e,s){if(e==null)return{};var a=Mge(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mge(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function UP(e,s){return zge(e)||Uge(e,s)||Fge(e,s)||Lge()}function Lge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fge(e,s){if(e){if(typeof e=="string")return zP(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zP(e,s)}}function zP(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Uge(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function zge(e){if(Array.isArray(e))return e}var eU=/[ \f\n\r\t\v\u2028\u2029]+/,tU=function(s){var a=s.children,r=s.breakAll,n=s.style;try{var i=[];Ss(a)||(r?i=a.toString().split(""):i=a.toString().split(eU));var l=i.map(function(d){return{word:d,width:Ym(d,n).width}}),o=r?0:Ym("",n).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},Bge=function(s,a,r,n,i){var l=s.maxLines,o=s.children,d=s.style,u=s.breakAll,h=mt(l),f=o,x=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce(function(L,Q){var X=Q.word,W=Q.width,ee=L[L.length-1];if(ee&&(n==null||i||ee.width+W+r<Number(n)))ee.words.push(X),ee.width+=W+r;else{var V={words:[X],width:W};L.push(V)}return L},[])},g=x(a),v=function(q){return q.reduce(function(L,Q){return L.width>Q.width?L:Q})};if(!h)return g;for(var b="",y=function(q){var L=f.slice(0,q),Q=tU({breakAll:u,style:d,children:L+b}).wordsWithComputedWidth,X=x(Q),W=X.length>l||v(X).width>Number(n);return[W,X]},j=0,w=f.length-1,A=0,O;j<=w&&A<=f.length-1;){var C=Math.floor((j+w)/2),E=C-1,S=y(E),D=UP(S,2),M=D[0],U=D[1],I=y(C),k=UP(I,1),z=k[0];if(!M&&!z&&(j=C+1),M&&z&&(w=C-1),!M&&z){O=U;break}A++}return O||g},BP=function(s){var a=Ss(s)?[]:s.toString().split(eU);return[{words:a}]},$ge=function(s){var a=s.width,r=s.scaleToFit,n=s.children,i=s.style,l=s.breakAll,o=s.maxLines;if((a||r)&&!v0.isSsr){var d,u,h=tU({breakAll:l,children:n,style:i});if(h){var f=h.wordsWithComputedWidth,x=h.spaceWidth;d=f,u=x}else return BP(n);return Bge({breakAll:l,children:n,maxLines:o,style:i},d,u,a,r)}return BP(n)},$P="#808080",lg=function(s){var a=s.x,r=a===void 0?0:a,n=s.y,i=n===void 0?0:n,l=s.lineHeight,o=l===void 0?"1em":l,d=s.capHeight,u=d===void 0?"0.71em":d,h=s.scaleToFit,f=h===void 0?!1:h,x=s.textAnchor,g=x===void 0?"start":x,v=s.verticalAnchor,b=v===void 0?"end":v,y=s.fill,j=y===void 0?$P:y,w=FP(s,Pge),A=T.useMemo(function(){return $ge({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),O=w.dx,C=w.dy,E=w.angle,S=w.className,D=w.breakAll,M=FP(w,Dge);if(!lr(r)||!lr(i))return null;var U=r+(mt(O)?O:0),I=i+(mt(C)?C:0),k;switch(b){case"start":k=OS("calc(".concat(u,")"));break;case"middle":k=OS("calc(".concat((A.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:k=OS("calc(".concat(A.length-1," * -").concat(o,")"));break}var z=[];if(f){var _=A[0].width,q=w.width;z.push("scale(".concat((mt(q)?q/_:1)/_,")"))}return E&&z.push("rotate(".concat(E,", ").concat(U,", ").concat(I,")")),z.length&&(M.transform=z.join(" ")),Oe.createElement("text",v2({},bs(M,!0),{x:U,y:I,className:Es("recharts-text",S),textAnchor:g,fill:j.includes("url")?$P:j}),A.map(function(L,Q){var X=L.words.join(D?"":" ");return Oe.createElement("tspan",{x:U,dy:Q===0?k:o,key:"".concat(X,"-").concat(Q)},X)}))};function Uo(e,s){return e==null||s==null?NaN:e<s?-1:e>s?1:e>=s?0:NaN}function qge(e,s){return e==null||s==null?NaN:s<e?-1:s>e?1:s>=e?0:NaN}function LE(e){let s,a,r;e.length!==2?(s=Uo,a=(o,d)=>Uo(e(o),d),r=(o,d)=>e(o)-d):(s=e===Uo||e===qge?e:Hge,a=e,r=e);function n(o,d,u=0,h=o.length){if(u<h){if(s(d,d)!==0)return h;do{const f=u+h>>>1;a(o[f],d)<0?u=f+1:h=f}while(u<h)}return u}function i(o,d,u=0,h=o.length){if(u<h){if(s(d,d)!==0)return h;do{const f=u+h>>>1;a(o[f],d)<=0?u=f+1:h=f}while(u<h)}return u}function l(o,d,u=0,h=o.length){const f=n(o,d,u,h-1);return f>u&&r(o[f-1],d)>-r(o[f],d)?f-1:f}return{left:n,center:l,right:i}}function Hge(){return 0}function sU(e){return e===null?NaN:+e}function*Vge(e,s){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const Gge=LE(Uo),vh=Gge.right;LE(sU).center;class qP extends Map{constructor(s,a=Kge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),s!=null)for(const[r,n]of s)this.set(r,n)}get(s){return super.get(HP(this,s))}has(s){return super.has(HP(this,s))}set(s,a){return super.set(Wge(this,s),a)}delete(s){return super.delete(Qge(this,s))}}function HP({_intern:e,_key:s},a){const r=s(a);return e.has(r)?e.get(r):a}function Wge({_intern:e,_key:s},a){const r=s(a);return e.has(r)?e.get(r):(e.set(r,a),a)}function Qge({_intern:e,_key:s},a){const r=s(a);return e.has(r)&&(a=e.get(r),e.delete(r)),a}function Kge(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Jge(e=Uo){if(e===Uo)return aU;if(typeof e!="function")throw new TypeError("compare is not a function");return(s,a)=>{const r=e(s,a);return r||r===0?r:(e(a,a)===0)-(e(s,s)===0)}}function aU(e,s){return(e==null||!(e>=e))-(s==null||!(s>=s))||(e<s?-1:e>s?1:0)}const Yge=Math.sqrt(50),Xge=Math.sqrt(10),Zge=Math.sqrt(2);function og(e,s,a){const r=(s-e)/Math.max(0,a),n=Math.floor(Math.log10(r)),i=r/Math.pow(10,n),l=i>=Yge?10:i>=Xge?5:i>=Zge?2:1;let o,d,u;return n<0?(u=Math.pow(10,-n)/l,o=Math.round(e*u),d=Math.round(s*u),o/u<e&&++o,d/u>s&&--d,u=-u):(u=Math.pow(10,n)*l,o=Math.round(e/u),d=Math.round(s/u),o*u<e&&++o,d*u>s&&--d),d<o&&.5<=a&&a<2?og(e,s,a*2):[o,d,u]}function y2(e,s,a){if(s=+s,e=+e,a=+a,!(a>0))return[];if(e===s)return[e];const r=s<e,[n,i,l]=r?og(s,e,a):og(e,s,a);if(!(i>=n))return[];const o=i-n+1,d=new Array(o);if(r)if(l<0)for(let u=0;u<o;++u)d[u]=(i-u)/-l;else for(let u=0;u<o;++u)d[u]=(i-u)*l;else if(l<0)for(let u=0;u<o;++u)d[u]=(n+u)/-l;else for(let u=0;u<o;++u)d[u]=(n+u)*l;return d}function N2(e,s,a){return s=+s,e=+e,a=+a,og(e,s,a)[2]}function w2(e,s,a){s=+s,e=+e,a=+a;const r=s<e,n=r?N2(s,e,a):N2(e,s,a);return(r?-1:1)*(n<0?1/-n:n)}function VP(e,s){let a;for(const r of e)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function GP(e,s){let a;for(const r of e)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function rU(e,s,a=0,r=1/0,n){if(s=Math.floor(s),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(e.length-1,r)),!(a<=s&&s<=r))return e;for(n=n===void 0?aU:Jge(n);r>a;){if(r-a>600){const d=r-a+1,u=s-a+1,h=Math.log(d),f=.5*Math.exp(2*h/3),x=.5*Math.sqrt(h*f*(d-f)/d)*(u-d/2<0?-1:1),g=Math.max(a,Math.floor(s-u*f/d+x)),v=Math.min(r,Math.floor(s+(d-u)*f/d+x));rU(e,s,g,v,n)}const i=e[s];let l=a,o=r;for(wm(e,a,s),n(e[r],i)>0&&wm(e,a,r);l<o;){for(wm(e,l,o),++l,--o;n(e[l],i)<0;)++l;for(;n(e[o],i)>0;)--o}n(e[a],i)===0?wm(e,a,o):(++o,wm(e,o,r)),o<=s&&(a=o+1),s<=o&&(r=o-1)}return e}function wm(e,s,a){const r=e[s];e[s]=e[a],e[a]=r}function ebe(e,s,a){if(e=Float64Array.from(Vge(e)),!(!(r=e.length)||isNaN(s=+s))){if(s<=0||r<2)return GP(e);if(s>=1)return VP(e);var r,n=(r-1)*s,i=Math.floor(n),l=VP(rU(e,i).subarray(0,i+1)),o=GP(e.subarray(i+1));return l+(o-l)*(n-i)}}function tbe(e,s,a=sU){if(!(!(r=e.length)||isNaN(s=+s))){if(s<=0||r<2)return+a(e[0],0,e);if(s>=1)return+a(e[r-1],r-1,e);var r,n=(r-1)*s,i=Math.floor(n),l=+a(e[i],i,e),o=+a(e[i+1],i+1,e);return l+(o-l)*(n-i)}}function sbe(e,s,a){e=+e,s=+s,a=(n=arguments.length)<2?(s=e,e=0,1):n<3?1:+a;for(var r=-1,n=Math.max(0,Math.ceil((s-e)/a))|0,i=new Array(n);++r<n;)i[r]=e+r*a;return i}function yi(e,s){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(s).domain(e);break}return this}function Yl(e,s){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const S2=Symbol("implicit");function FE(){var e=new qP,s=[],a=[],r=S2;function n(i){let l=e.get(i);if(l===void 0){if(r!==S2)return r;e.set(i,l=s.push(i)-1)}return a[l%a.length]}return n.domain=function(i){if(!arguments.length)return s.slice();s=[],e=new qP;for(const l of i)e.has(l)||e.set(l,s.push(l)-1);return n},n.range=function(i){return arguments.length?(a=Array.from(i),n):a.slice()},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return FE(s,a).unknown(r)},yi.apply(n,arguments),n}function kf(){var e=FE().unknown(void 0),s=e.domain,a=e.range,r=0,n=1,i,l,o=!1,d=0,u=0,h=.5;delete e.unknown;function f(){var x=s().length,g=n<r,v=g?n:r,b=g?r:n;i=(b-v)/Math.max(1,x-d+u*2),o&&(i=Math.floor(i)),v+=(b-v-i*(x-d))*h,l=i*(1-d),o&&(v=Math.round(v),l=Math.round(l));var y=sbe(x).map(function(j){return v+i*j});return a(g?y.reverse():y)}return e.domain=function(x){return arguments.length?(s(x),f()):s()},e.range=function(x){return arguments.length?([r,n]=x,r=+r,n=+n,f()):[r,n]},e.rangeRound=function(x){return[r,n]=x,r=+r,n=+n,o=!0,f()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(x){return arguments.length?(o=!!x,f()):o},e.padding=function(x){return arguments.length?(d=Math.min(1,u=+x),f()):d},e.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),f()):d},e.paddingOuter=function(x){return arguments.length?(u=+x,f()):u},e.align=function(x){return arguments.length?(h=Math.max(0,Math.min(1,x)),f()):h},e.copy=function(){return kf(s(),[r,n]).round(o).paddingInner(d).paddingOuter(u).align(h)},yi.apply(f(),arguments)}function nU(e){var s=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return nU(s())},e}function Xm(){return nU(kf.apply(null,arguments).paddingInner(1))}function UE(e,s,a){e.prototype=s.prototype=a,a.constructor=e}function iU(e,s){var a=Object.create(e.prototype);for(var r in s)a[r]=s[r];return a}function yh(){}var Of=.7,cg=1/Of,Ou="\\s*([+-]?\\d+)\\s*",If="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",abe=/^#([0-9a-f]{3,8})$/,rbe=new RegExp(`^rgb\\(${Ou},${Ou},${Ou}\\)$`),nbe=new RegExp(`^rgb\\(${Xi},${Xi},${Xi}\\)$`),ibe=new RegExp(`^rgba\\(${Ou},${Ou},${Ou},${If}\\)$`),lbe=new RegExp(`^rgba\\(${Xi},${Xi},${Xi},${If}\\)$`),obe=new RegExp(`^hsl\\(${If},${Xi},${Xi}\\)$`),cbe=new RegExp(`^hsla\\(${If},${Xi},${Xi},${If}\\)$`),WP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UE(yh,Rf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:QP,formatHex:QP,formatHex8:dbe,formatHsl:ube,formatRgb:KP,toString:KP});function QP(){return this.rgb().formatHex()}function dbe(){return this.rgb().formatHex8()}function ube(){return lU(this).formatHsl()}function KP(){return this.rgb().formatRgb()}function Rf(e){var s,a;return e=(e+"").trim().toLowerCase(),(s=abe.exec(e))?(a=s[1].length,s=parseInt(s[1],16),a===6?JP(s):a===3?new fn(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):a===8?ip(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):a===4?ip(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=rbe.exec(e))?new fn(s[1],s[2],s[3],1):(s=nbe.exec(e))?new fn(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=ibe.exec(e))?ip(s[1],s[2],s[3],s[4]):(s=lbe.exec(e))?ip(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=obe.exec(e))?ZP(s[1],s[2]/100,s[3]/100,1):(s=cbe.exec(e))?ZP(s[1],s[2]/100,s[3]/100,s[4]):WP.hasOwnProperty(e)?JP(WP[e]):e==="transparent"?new fn(NaN,NaN,NaN,0):null}function JP(e){return new fn(e>>16&255,e>>8&255,e&255,1)}function ip(e,s,a,r){return r<=0&&(e=s=a=NaN),new fn(e,s,a,r)}function mbe(e){return e instanceof yh||(e=Rf(e)),e?(e=e.rgb(),new fn(e.r,e.g,e.b,e.opacity)):new fn}function j2(e,s,a,r){return arguments.length===1?mbe(e):new fn(e,s,a,r??1)}function fn(e,s,a,r){this.r=+e,this.g=+s,this.b=+a,this.opacity=+r}UE(fn,j2,iU(yh,{brighter(e){return e=e==null?cg:Math.pow(cg,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Of:Math.pow(Of,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fn(Qc(this.r),Qc(this.g),Qc(this.b),dg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YP,formatHex:YP,formatHex8:fbe,formatRgb:XP,toString:XP}));function YP(){return`#${Mc(this.r)}${Mc(this.g)}${Mc(this.b)}`}function fbe(){return`#${Mc(this.r)}${Mc(this.g)}${Mc(this.b)}${Mc((isNaN(this.opacity)?1:this.opacity)*255)}`}function XP(){const e=dg(this.opacity);return`${e===1?"rgb(":"rgba("}${Qc(this.r)}, ${Qc(this.g)}, ${Qc(this.b)}${e===1?")":`, ${e})`}`}function dg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mc(e){return e=Qc(e),(e<16?"0":"")+e.toString(16)}function ZP(e,s,a,r){return r<=0?e=s=a=NaN:a<=0||a>=1?e=s=NaN:s<=0&&(e=NaN),new _i(e,s,a,r)}function lU(e){if(e instanceof _i)return new _i(e.h,e.s,e.l,e.opacity);if(e instanceof yh||(e=Rf(e)),!e)return new _i;if(e instanceof _i)return e;e=e.rgb();var s=e.r/255,a=e.g/255,r=e.b/255,n=Math.min(s,a,r),i=Math.max(s,a,r),l=NaN,o=i-n,d=(i+n)/2;return o?(s===i?l=(a-r)/o+(a<r)*6:a===i?l=(r-s)/o+2:l=(s-a)/o+4,o/=d<.5?i+n:2-i-n,l*=60):o=d>0&&d<1?0:l,new _i(l,o,d,e.opacity)}function hbe(e,s,a,r){return arguments.length===1?lU(e):new _i(e,s,a,r??1)}function _i(e,s,a,r){this.h=+e,this.s=+s,this.l=+a,this.opacity=+r}UE(_i,hbe,iU(yh,{brighter(e){return e=e==null?cg:Math.pow(cg,e),new _i(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Of:Math.pow(Of,e),new _i(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,s=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*s,n=2*a-r;return new fn(IS(e>=240?e-240:e+120,n,r),IS(e,n,r),IS(e<120?e+240:e-120,n,r),this.opacity)},clamp(){return new _i(eD(this.h),lp(this.s),lp(this.l),dg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dg(this.opacity);return`${e===1?"hsl(":"hsla("}${eD(this.h)}, ${lp(this.s)*100}%, ${lp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function eD(e){return e=(e||0)%360,e<0?e+360:e}function lp(e){return Math.max(0,Math.min(1,e||0))}function IS(e,s,a){return(e<60?s+(a-s)*e/60:e<180?a:e<240?s+(a-s)*(240-e)/60:s)*255}const zE=e=>()=>e;function xbe(e,s){return function(a){return e+a*s}}function pbe(e,s,a){return e=Math.pow(e,a),s=Math.pow(s,a)-e,a=1/a,function(r){return Math.pow(e+r*s,a)}}function gbe(e){return(e=+e)==1?oU:function(s,a){return a-s?pbe(s,a,e):zE(isNaN(s)?a:s)}}function oU(e,s){var a=s-e;return a?xbe(e,a):zE(isNaN(e)?s:e)}const tD=(function e(s){var a=gbe(s);function r(n,i){var l=a((n=j2(n)).r,(i=j2(i)).r),o=a(n.g,i.g),d=a(n.b,i.b),u=oU(n.opacity,i.opacity);return function(h){return n.r=l(h),n.g=o(h),n.b=d(h),n.opacity=u(h),n+""}}return r.gamma=e,r})(1);function bbe(e,s){s||(s=[]);var a=e?Math.min(s.length,e.length):0,r=s.slice(),n;return function(i){for(n=0;n<a;++n)r[n]=e[n]*(1-i)+s[n]*i;return r}}function vbe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ybe(e,s){var a=s?s.length:0,r=e?Math.min(a,e.length):0,n=new Array(r),i=new Array(a),l;for(l=0;l<r;++l)n[l]=y0(e[l],s[l]);for(;l<a;++l)i[l]=s[l];return function(o){for(l=0;l<r;++l)i[l]=n[l](o);return i}}function Nbe(e,s){var a=new Date;return e=+e,s=+s,function(r){return a.setTime(e*(1-r)+s*r),a}}function ug(e,s){return e=+e,s=+s,function(a){return e*(1-a)+s*a}}function wbe(e,s){var a={},r={},n;(e===null||typeof e!="object")&&(e={}),(s===null||typeof s!="object")&&(s={});for(n in s)n in e?a[n]=y0(e[n],s[n]):r[n]=s[n];return function(i){for(n in a)r[n]=a[n](i);return r}}var A2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,RS=new RegExp(A2.source,"g");function Sbe(e){return function(){return e}}function jbe(e){return function(s){return e(s)+""}}function Abe(e,s){var a=A2.lastIndex=RS.lastIndex=0,r,n,i,l=-1,o=[],d=[];for(e=e+"",s=s+"";(r=A2.exec(e))&&(n=RS.exec(s));)(i=n.index)>a&&(i=s.slice(a,i),o[l]?o[l]+=i:o[++l]=i),(r=r[0])===(n=n[0])?o[l]?o[l]+=n:o[++l]=n:(o[++l]=null,d.push({i:l,x:ug(r,n)})),a=RS.lastIndex;return a<s.length&&(i=s.slice(a),o[l]?o[l]+=i:o[++l]=i),o.length<2?d[0]?jbe(d[0].x):Sbe(s):(s=d.length,function(u){for(var h=0,f;h<s;++h)o[(f=d[h]).i]=f.x(u);return o.join("")})}function y0(e,s){var a=typeof s,r;return s==null||a==="boolean"?zE(s):(a==="number"?ug:a==="string"?(r=Rf(s))?(s=r,tD):Abe:s instanceof Rf?tD:s instanceof Date?Nbe:vbe(s)?bbe:Array.isArray(s)?ybe:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?wbe:ug)(e,s)}function BE(e,s){return e=+e,s=+s,function(a){return Math.round(e*(1-a)+s*a)}}function Ebe(e,s){s===void 0&&(s=e,e=y0);for(var a=0,r=s.length-1,n=s[0],i=new Array(r<0?0:r);a<r;)i[a]=e(n,n=s[++a]);return function(l){var o=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return i[o](l-o)}}function Cbe(e){return function(){return e}}function mg(e){return+e}var sD=[0,1];function sn(e){return e}function E2(e,s){return(s-=e=+e)?function(a){return(a-e)/s}:Cbe(isNaN(s)?NaN:.5)}function Tbe(e,s){var a;return e>s&&(a=e,e=s,s=a),function(r){return Math.max(e,Math.min(s,r))}}function _be(e,s,a){var r=e[0],n=e[1],i=s[0],l=s[1];return n<r?(r=E2(n,r),i=a(l,i)):(r=E2(r,n),i=a(i,l)),function(o){return i(r(o))}}function kbe(e,s,a){var r=Math.min(e.length,s.length)-1,n=new Array(r),i=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),s=s.slice().reverse());++l<r;)n[l]=E2(e[l],e[l+1]),i[l]=a(s[l],s[l+1]);return function(o){var d=vh(e,o,1,r)-1;return i[d](n[d](o))}}function Nh(e,s){return s.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pb(){var e=sD,s=sD,a=y0,r,n,i,l=sn,o,d,u;function h(){var x=Math.min(e.length,s.length);return l!==sn&&(l=Tbe(e[0],e[x-1])),o=x>2?kbe:_be,d=u=null,f}function f(x){return x==null||isNaN(x=+x)?i:(d||(d=o(e.map(r),s,a)))(r(l(x)))}return f.invert=function(x){return l(n((u||(u=o(s,e.map(r),ug)))(x)))},f.domain=function(x){return arguments.length?(e=Array.from(x,mg),h()):e.slice()},f.range=function(x){return arguments.length?(s=Array.from(x),h()):s.slice()},f.rangeRound=function(x){return s=Array.from(x),a=BE,h()},f.clamp=function(x){return arguments.length?(l=x?!0:sn,h()):l!==sn},f.interpolate=function(x){return arguments.length?(a=x,h()):a},f.unknown=function(x){return arguments.length?(i=x,f):i},function(x,g){return r=x,n=g,h()}}function $E(){return pb()(sn,sn)}function Obe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fg(e,s){if((a=(e=s?e.toExponential(s-1):e.toExponential()).indexOf("e"))<0)return null;var a,r=e.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+e.slice(a+1)]}function Vu(e){return e=fg(Math.abs(e)),e?e[1]:NaN}function Ibe(e,s){return function(a,r){for(var n=a.length,i=[],l=0,o=e[0],d=0;n>0&&o>0&&(d+o+1>r&&(o=Math.max(1,r-d)),i.push(a.substring(n-=o,n+o)),!((d+=o+1)>r));)o=e[l=(l+1)%e.length];return i.reverse().join(s)}}function Rbe(e){return function(s){return s.replace(/[0-9]/g,function(a){return e[+a]})}}var Pbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pf(e){if(!(s=Pbe.exec(e)))throw new Error("invalid format: "+e);var s;return new qE({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}Pf.prototype=qE.prototype;function qE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dbe(e){e:for(var s=e.length,a=1,r=-1,n;a<s;++a)switch(e[a]){case".":r=n=a;break;case"0":r===0&&(r=a),n=a;break;default:if(!+e[a])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(n+1):e}var cU;function Mbe(e,s){var a=fg(e,s);if(!a)return e+"";var r=a[0],n=a[1],i=n-(cU=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,l=r.length;return i===l?r:i>l?r+new Array(i-l+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+fg(e,Math.max(0,s+i-1))[0]}function aD(e,s){var a=fg(e,s);if(!a)return e+"";var r=a[0],n=a[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const rD={"%":(e,s)=>(e*100).toFixed(s),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Obe,e:(e,s)=>e.toExponential(s),f:(e,s)=>e.toFixed(s),g:(e,s)=>e.toPrecision(s),o:e=>Math.round(e).toString(8),p:(e,s)=>aD(e*100,s),r:aD,s:Mbe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nD(e){return e}var iD=Array.prototype.map,lD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Lbe(e){var s=e.grouping===void 0||e.thousands===void 0?nD:Ibe(iD.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?nD:Rbe(iD.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Pf(f);var x=f.fill,g=f.align,v=f.sign,b=f.symbol,y=f.zero,j=f.width,w=f.comma,A=f.precision,O=f.trim,C=f.type;C==="n"?(w=!0,C="g"):rD[C]||(A===void 0&&(A=12),O=!0,C="g"),(y||x==="0"&&g==="=")&&(y=!0,x="0",g="=");var E=b==="$"?a:b==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",S=b==="$"?r:/[%p]/.test(C)?l:"",D=rD[C],M=/[defgprs%]/.test(C);A=A===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function U(I){var k=E,z=S,_,q,L;if(C==="c")z=D(I)+z,I="";else{I=+I;var Q=I<0||1/I<0;if(I=isNaN(I)?d:D(Math.abs(I),A),O&&(I=Dbe(I)),Q&&+I==0&&v!=="+"&&(Q=!1),k=(Q?v==="("?v:o:v==="-"||v==="("?"":v)+k,z=(C==="s"?lD[8+cU/3]:"")+z+(Q&&v==="("?")":""),M){for(_=-1,q=I.length;++_<q;)if(L=I.charCodeAt(_),48>L||L>57){z=(L===46?n+I.slice(_+1):I.slice(_))+z,I=I.slice(0,_);break}}}w&&!y&&(I=s(I,1/0));var X=k.length+I.length+z.length,W=X<j?new Array(j-X+1).join(x):"";switch(w&&y&&(I=s(W+I,W.length?j-z.length:1/0),W=""),g){case"<":I=k+I+z+W;break;case"=":I=k+W+I+z;break;case"^":I=W.slice(0,X=W.length>>1)+k+I+z+W.slice(X);break;default:I=W+k+I+z;break}return i(I)}return U.toString=function(){return f+""},U}function h(f,x){var g=u((f=Pf(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Vu(x)/3)))*3,b=Math.pow(10,-v),y=lD[8+v/3];return function(j){return g(b*j)+y}}return{format:u,formatPrefix:h}}var op,HE,dU;Fbe({thousands:",",grouping:[3],currency:["$",""]});function Fbe(e){return op=Lbe(e),HE=op.format,dU=op.formatPrefix,op}function Ube(e){return Math.max(0,-Vu(Math.abs(e)))}function zbe(e,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vu(s)/3)))*3-Vu(Math.abs(e)))}function Bbe(e,s){return e=Math.abs(e),s=Math.abs(s)-e,Math.max(0,Vu(s)-Vu(e))+1}function uU(e,s,a,r){var n=w2(e,s,a),i;switch(r=Pf(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(s));return r.precision==null&&!isNaN(i=zbe(n,l))&&(r.precision=i),dU(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Bbe(n,Math.max(Math.abs(e),Math.abs(s))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Ube(n))&&(r.precision=i-(r.type==="%")*2);break}}return HE(r)}function nc(e){var s=e.domain;return e.ticks=function(a){var r=s();return y2(r[0],r[r.length-1],a??10)},e.tickFormat=function(a,r){var n=s();return uU(n[0],n[n.length-1],a??10,r)},e.nice=function(a){a==null&&(a=10);var r=s(),n=0,i=r.length-1,l=r[n],o=r[i],d,u,h=10;for(o<l&&(u=l,l=o,o=u,u=n,n=i,i=u);h-- >0;){if(u=N2(l,o,a),u===d)return r[n]=l,r[i]=o,s(r);if(u>0)l=Math.floor(l/u)*u,o=Math.ceil(o/u)*u;else if(u<0)l=Math.ceil(l*u)/u,o=Math.floor(o*u)/u;else break;d=u}return e},e}function hg(){var e=$E();return e.copy=function(){return Nh(e,hg())},yi.apply(e,arguments),nc(e)}function mU(e){var s;function a(r){return r==null||isNaN(r=+r)?s:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(e=Array.from(r,mg),a):e.slice()},a.unknown=function(r){return arguments.length?(s=r,a):s},a.copy=function(){return mU(e).unknown(s)},e=arguments.length?Array.from(e,mg):[0,1],nc(a)}function fU(e,s){e=e.slice();var a=0,r=e.length-1,n=e[a],i=e[r],l;return i<n&&(l=a,a=r,r=l,l=n,n=i,i=l),e[a]=s.floor(n),e[r]=s.ceil(i),e}function oD(e){return Math.log(e)}function cD(e){return Math.exp(e)}function $be(e){return-Math.log(-e)}function qbe(e){return-Math.exp(-e)}function Hbe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vbe(e){return e===10?Hbe:e===Math.E?Math.exp:s=>Math.pow(e,s)}function Gbe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),s=>Math.log(s)/e)}function dD(e){return(s,a)=>-e(-s,a)}function VE(e){const s=e(oD,cD),a=s.domain;let r=10,n,i;function l(){return n=Gbe(r),i=Vbe(r),a()[0]<0?(n=dD(n),i=dD(i),e($be,qbe)):e(oD,cD),s}return s.base=function(o){return arguments.length?(r=+o,l()):r},s.domain=function(o){return arguments.length?(a(o),l()):a()},s.ticks=o=>{const d=a();let u=d[0],h=d[d.length-1];const f=h<u;f&&([u,h]=[h,u]);let x=n(u),g=n(h),v,b;const y=o==null?10:+o;let j=[];if(!(r%1)&&g-x<y){if(x=Math.floor(x),g=Math.ceil(g),u>0){for(;x<=g;++x)for(v=1;v<r;++v)if(b=x<0?v/i(-x):v*i(x),!(b<u)){if(b>h)break;j.push(b)}}else for(;x<=g;++x)for(v=r-1;v>=1;--v)if(b=x>0?v/i(-x):v*i(x),!(b<u)){if(b>h)break;j.push(b)}j.length*2<y&&(j=y2(u,h,y))}else j=y2(x,g,Math.min(g-x,y)).map(i);return f?j.reverse():j},s.tickFormat=(o,d)=>{if(o==null&&(o=10),d==null&&(d=r===10?"s":","),typeof d!="function"&&(!(r%1)&&(d=Pf(d)).precision==null&&(d.trim=!0),d=HE(d)),o===1/0)return d;const u=Math.max(1,r*o/s.ticks().length);return h=>{let f=h/i(Math.round(n(h)));return f*r<r-.5&&(f*=r),f<=u?d(h):""}},s.nice=()=>a(fU(a(),{floor:o=>i(Math.floor(n(o))),ceil:o=>i(Math.ceil(n(o)))})),s}function hU(){const e=VE(pb()).domain([1,10]);return e.copy=()=>Nh(e,hU()).base(e.base()),yi.apply(e,arguments),e}function uD(e){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/e))}}function mD(e){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*e}}function GE(e){var s=1,a=e(uD(s),mD(s));return a.constant=function(r){return arguments.length?e(uD(s=+r),mD(s)):s},nc(a)}function xU(){var e=GE(pb());return e.copy=function(){return Nh(e,xU()).constant(e.constant())},yi.apply(e,arguments)}function fD(e){return function(s){return s<0?-Math.pow(-s,e):Math.pow(s,e)}}function Wbe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Qbe(e){return e<0?-e*e:e*e}function WE(e){var s=e(sn,sn),a=1;function r(){return a===1?e(sn,sn):a===.5?e(Wbe,Qbe):e(fD(a),fD(1/a))}return s.exponent=function(n){return arguments.length?(a=+n,r()):a},nc(s)}function QE(){var e=WE(pb());return e.copy=function(){return Nh(e,QE()).exponent(e.exponent())},yi.apply(e,arguments),e}function Kbe(){return QE.apply(null,arguments).exponent(.5)}function hD(e){return Math.sign(e)*e*e}function Jbe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function pU(){var e=$E(),s=[0,1],a=!1,r;function n(i){var l=Jbe(e(i));return isNaN(l)?r:a?Math.round(l):l}return n.invert=function(i){return e.invert(hD(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((s=Array.from(i,mg)).map(hD)),n):s.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(a=!!i,n):a},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return pU(e.domain(),s).round(a).clamp(e.clamp()).unknown(r)},yi.apply(n,arguments),nc(n)}function gU(){var e=[],s=[],a=[],r;function n(){var l=0,o=Math.max(1,s.length);for(a=new Array(o-1);++l<o;)a[l-1]=tbe(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?r:s[vh(a,l)]}return i.invertExtent=function(l){var o=s.indexOf(l);return o<0?[NaN,NaN]:[o>0?a[o-1]:e[0],o<a.length?a[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Uo),n()},i.range=function(l){return arguments.length?(s=Array.from(l),n()):s.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.quantiles=function(){return a.slice()},i.copy=function(){return gU().domain(e).range(s).unknown(r)},yi.apply(i,arguments)}function bU(){var e=0,s=1,a=1,r=[.5],n=[0,1],i;function l(d){return d!=null&&d<=d?n[vh(r,d,0,a)]:i}function o(){var d=-1;for(r=new Array(a);++d<a;)r[d]=((d+1)*s-(d-a)*e)/(a+1);return l}return l.domain=function(d){return arguments.length?([e,s]=d,e=+e,s=+s,o()):[e,s]},l.range=function(d){return arguments.length?(a=(n=Array.from(d)).length-1,o()):n.slice()},l.invertExtent=function(d){var u=n.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=a?[r[a-1],s]:[r[u-1],r[u]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return r.slice()},l.copy=function(){return bU().domain([e,s]).range(n).unknown(i)},yi.apply(nc(l),arguments)}function vU(){var e=[.5],s=[0,1],a,r=1;function n(i){return i!=null&&i<=i?s[vh(e,i,0,r)]:a}return n.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,s.length-1),n):e.slice()},n.range=function(i){return arguments.length?(s=Array.from(i),r=Math.min(e.length,s.length-1),n):s.slice()},n.invertExtent=function(i){var l=s.indexOf(i);return[e[l-1],e[l]]},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return vU().domain(e).range(s).unknown(a)},yi.apply(n,arguments)}const PS=new Date,DS=new Date;function ur(e,s,a,r){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),s(i,1),e(i),i),n.round=i=>{const l=n(i),o=n.ceil(i);return i-l<o-i?l:o},n.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),n.range=(i,l,o)=>{const d=[];if(i=n.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return d;let u;do d.push(u=new Date(+i)),s(i,o),e(i);while(u<i&&i<l);return d},n.filter=i=>ur(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;s(l,-1),!i(l););else for(;--o>=0;)for(;s(l,1),!i(l););}),a&&(n.count=(i,l)=>(PS.setTime(+i),DS.setTime(+l),e(PS),e(DS),Math.floor(a(PS,DS))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(r?l=>r(l)%i===0:l=>n.count(0,l)%i===0):n)),n}const xg=ur(()=>{},(e,s)=>{e.setTime(+e+s)},(e,s)=>s-e);xg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ur(s=>{s.setTime(Math.floor(s/e)*e)},(s,a)=>{s.setTime(+s+a*e)},(s,a)=>(a-s)/e):xg);xg.range;const kl=1e3,di=kl*60,Ol=di*60,$l=Ol*24,KE=$l*7,xD=$l*30,MS=$l*365,Lc=ur(e=>{e.setTime(e-e.getMilliseconds())},(e,s)=>{e.setTime(+e+s*kl)},(e,s)=>(s-e)/kl,e=>e.getUTCSeconds());Lc.range;const JE=ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kl)},(e,s)=>{e.setTime(+e+s*di)},(e,s)=>(s-e)/di,e=>e.getMinutes());JE.range;const YE=ur(e=>{e.setUTCSeconds(0,0)},(e,s)=>{e.setTime(+e+s*di)},(e,s)=>(s-e)/di,e=>e.getUTCMinutes());YE.range;const XE=ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kl-e.getMinutes()*di)},(e,s)=>{e.setTime(+e+s*Ol)},(e,s)=>(s-e)/Ol,e=>e.getHours());XE.range;const ZE=ur(e=>{e.setUTCMinutes(0,0,0)},(e,s)=>{e.setTime(+e+s*Ol)},(e,s)=>(s-e)/Ol,e=>e.getUTCHours());ZE.range;const wh=ur(e=>e.setHours(0,0,0,0),(e,s)=>e.setDate(e.getDate()+s),(e,s)=>(s-e-(s.getTimezoneOffset()-e.getTimezoneOffset())*di)/$l,e=>e.getDate()-1);wh.range;const gb=ur(e=>{e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCDate(e.getUTCDate()+s)},(e,s)=>(s-e)/$l,e=>e.getUTCDate()-1);gb.range;const yU=ur(e=>{e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCDate(e.getUTCDate()+s)},(e,s)=>(s-e)/$l,e=>Math.floor(e/$l));yU.range;function vd(e){return ur(s=>{s.setDate(s.getDate()-(s.getDay()+7-e)%7),s.setHours(0,0,0,0)},(s,a)=>{s.setDate(s.getDate()+a*7)},(s,a)=>(a-s-(a.getTimezoneOffset()-s.getTimezoneOffset())*di)/KE)}const bb=vd(0),pg=vd(1),Ybe=vd(2),Xbe=vd(3),Gu=vd(4),Zbe=vd(5),eve=vd(6);bb.range;pg.range;Ybe.range;Xbe.range;Gu.range;Zbe.range;eve.range;function yd(e){return ur(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-e)%7),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCDate(s.getUTCDate()+a*7)},(s,a)=>(a-s)/KE)}const vb=yd(0),gg=yd(1),tve=yd(2),sve=yd(3),Wu=yd(4),ave=yd(5),rve=yd(6);vb.range;gg.range;tve.range;sve.range;Wu.range;ave.range;rve.range;const eC=ur(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,s)=>{e.setMonth(e.getMonth()+s)},(e,s)=>s.getMonth()-e.getMonth()+(s.getFullYear()-e.getFullYear())*12,e=>e.getMonth());eC.range;const tC=ur(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCMonth(e.getUTCMonth()+s)},(e,s)=>s.getUTCMonth()-e.getUTCMonth()+(s.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());tC.range;const ql=ur(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,s)=>{e.setFullYear(e.getFullYear()+s)},(e,s)=>s.getFullYear()-e.getFullYear(),e=>e.getFullYear());ql.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ur(s=>{s.setFullYear(Math.floor(s.getFullYear()/e)*e),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,a)=>{s.setFullYear(s.getFullYear()+a*e)});ql.range;const Hl=ur(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCFullYear(e.getUTCFullYear()+s)},(e,s)=>s.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ur(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/e)*e),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCFullYear(s.getUTCFullYear()+a*e)});Hl.range;function NU(e,s,a,r,n,i){const l=[[Lc,1,kl],[Lc,5,5*kl],[Lc,15,15*kl],[Lc,30,30*kl],[i,1,di],[i,5,5*di],[i,15,15*di],[i,30,30*di],[n,1,Ol],[n,3,3*Ol],[n,6,6*Ol],[n,12,12*Ol],[r,1,$l],[r,2,2*$l],[a,1,KE],[s,1,xD],[s,3,3*xD],[e,1,MS]];function o(u,h,f){const x=h<u;x&&([u,h]=[h,u]);const g=f&&typeof f.range=="function"?f:d(u,h,f),v=g?g.range(u,+h+1):[];return x?v.reverse():v}function d(u,h,f){const x=Math.abs(h-u)/f,g=LE(([,,y])=>y).right(l,x);if(g===l.length)return e.every(w2(u/MS,h/MS,f));if(g===0)return xg.every(Math.max(w2(u,h,f),1));const[v,b]=l[x/l[g-1][2]<l[g][2]/x?g-1:g];return v.every(b)}return[o,d]}const[nve,ive]=NU(Hl,tC,vb,yU,ZE,YE),[lve,ove]=NU(ql,eC,bb,wh,XE,JE);function LS(e){if(0<=e.y&&e.y<100){var s=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return s.setFullYear(e.y),s}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function FS(e){if(0<=e.y&&e.y<100){var s=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return s.setUTCFullYear(e.y),s}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sm(e,s,a){return{y:e,m:s,d:a,H:0,M:0,S:0,L:0}}function cve(e){var s=e.dateTime,a=e.date,r=e.time,n=e.periods,i=e.days,l=e.shortDays,o=e.months,d=e.shortMonths,u=jm(n),h=Am(n),f=jm(i),x=Am(i),g=jm(l),v=Am(l),b=jm(o),y=Am(o),j=jm(d),w=Am(d),A={a:Q,A:X,b:W,B:ee,c:null,d:ND,e:ND,f:Ive,g:$ve,G:Hve,H:_ve,I:kve,j:Ove,L:wU,m:Rve,M:Pve,p:V,q:P,Q:jD,s:AD,S:Dve,u:Mve,U:Lve,V:Fve,w:Uve,W:zve,x:null,X:null,y:Bve,Y:qve,Z:Vve,"%":SD},O={a:Y,A:J,b:K,B:se,c:null,d:wD,e:wD,f:Kve,g:nye,G:lye,H:Gve,I:Wve,j:Qve,L:jU,m:Jve,M:Yve,p:G,q:te,Q:jD,s:AD,S:Xve,u:Zve,U:eye,V:tye,w:sye,W:aye,x:null,X:null,y:rye,Y:iye,Z:oye,"%":SD},C={a:U,A:I,b:k,B:z,c:_,d:vD,e:vD,f:Ave,g:bD,G:gD,H:yD,I:yD,j:Nve,L:jve,m:yve,M:wve,p:M,q:vve,Q:Cve,s:Tve,S:Sve,u:hve,U:xve,V:pve,w:fve,W:gve,x:q,X:L,y:bD,Y:gD,Z:bve,"%":Eve};A.x=E(a,A),A.X=E(r,A),A.c=E(s,A),O.x=E(a,O),O.X=E(r,O),O.c=E(s,O);function E(Z,ue){return function(re){var H=[],pe=-1,B=0,oe=Z.length,fe,ne,de;for(re instanceof Date||(re=new Date(+re));++pe<oe;)Z.charCodeAt(pe)===37&&(H.push(Z.slice(B,pe)),(ne=pD[fe=Z.charAt(++pe)])!=null?fe=Z.charAt(++pe):ne=fe==="e"?" ":"0",(de=ue[fe])&&(fe=de(re,ne)),H.push(fe),B=pe+1);return H.push(Z.slice(B,pe)),H.join("")}}function S(Z,ue){return function(re){var H=Sm(1900,void 0,1),pe=D(H,Z,re+="",0),B,oe;if(pe!=re.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(ue&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(B=FS(Sm(H.y,0,1)),oe=B.getUTCDay(),B=oe>4||oe===0?gg.ceil(B):gg(B),B=gb.offset(B,(H.V-1)*7),H.y=B.getUTCFullYear(),H.m=B.getUTCMonth(),H.d=B.getUTCDate()+(H.w+6)%7):(B=LS(Sm(H.y,0,1)),oe=B.getDay(),B=oe>4||oe===0?pg.ceil(B):pg(B),B=wh.offset(B,(H.V-1)*7),H.y=B.getFullYear(),H.m=B.getMonth(),H.d=B.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),oe="Z"in H?FS(Sm(H.y,0,1)).getUTCDay():LS(Sm(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(oe+5)%7:H.w+H.U*7-(oe+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,FS(H)):LS(H)}}function D(Z,ue,re,H){for(var pe=0,B=ue.length,oe=re.length,fe,ne;pe<B;){if(H>=oe)return-1;if(fe=ue.charCodeAt(pe++),fe===37){if(fe=ue.charAt(pe++),ne=C[fe in pD?ue.charAt(pe++):fe],!ne||(H=ne(Z,re,H))<0)return-1}else if(fe!=re.charCodeAt(H++))return-1}return H}function M(Z,ue,re){var H=u.exec(ue.slice(re));return H?(Z.p=h.get(H[0].toLowerCase()),re+H[0].length):-1}function U(Z,ue,re){var H=g.exec(ue.slice(re));return H?(Z.w=v.get(H[0].toLowerCase()),re+H[0].length):-1}function I(Z,ue,re){var H=f.exec(ue.slice(re));return H?(Z.w=x.get(H[0].toLowerCase()),re+H[0].length):-1}function k(Z,ue,re){var H=j.exec(ue.slice(re));return H?(Z.m=w.get(H[0].toLowerCase()),re+H[0].length):-1}function z(Z,ue,re){var H=b.exec(ue.slice(re));return H?(Z.m=y.get(H[0].toLowerCase()),re+H[0].length):-1}function _(Z,ue,re){return D(Z,s,ue,re)}function q(Z,ue,re){return D(Z,a,ue,re)}function L(Z,ue,re){return D(Z,r,ue,re)}function Q(Z){return l[Z.getDay()]}function X(Z){return i[Z.getDay()]}function W(Z){return d[Z.getMonth()]}function ee(Z){return o[Z.getMonth()]}function V(Z){return n[+(Z.getHours()>=12)]}function P(Z){return 1+~~(Z.getMonth()/3)}function Y(Z){return l[Z.getUTCDay()]}function J(Z){return i[Z.getUTCDay()]}function K(Z){return d[Z.getUTCMonth()]}function se(Z){return o[Z.getUTCMonth()]}function G(Z){return n[+(Z.getUTCHours()>=12)]}function te(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var ue=E(Z+="",A);return ue.toString=function(){return Z},ue},parse:function(Z){var ue=S(Z+="",!1);return ue.toString=function(){return Z},ue},utcFormat:function(Z){var ue=E(Z+="",O);return ue.toString=function(){return Z},ue},utcParse:function(Z){var ue=S(Z+="",!0);return ue.toString=function(){return Z},ue}}}var pD={"-":"",_:" ",0:"0"},yr=/^\s*\d+/,dve=/^%/,uve=/[\\^$*+?|[\]().{}]/g;function Ms(e,s,a){var r=e<0?"-":"",n=(r?-e:e)+"",i=n.length;return r+(i<a?new Array(a-i+1).join(s)+n:n)}function mve(e){return e.replace(uve,"\\$&")}function jm(e){return new RegExp("^(?:"+e.map(mve).join("|")+")","i")}function Am(e){return new Map(e.map((s,a)=>[s.toLowerCase(),a]))}function fve(e,s,a){var r=yr.exec(s.slice(a,a+1));return r?(e.w=+r[0],a+r[0].length):-1}function hve(e,s,a){var r=yr.exec(s.slice(a,a+1));return r?(e.u=+r[0],a+r[0].length):-1}function xve(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.U=+r[0],a+r[0].length):-1}function pve(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.V=+r[0],a+r[0].length):-1}function gve(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.W=+r[0],a+r[0].length):-1}function gD(e,s,a){var r=yr.exec(s.slice(a,a+4));return r?(e.y=+r[0],a+r[0].length):-1}function bD(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function bve(e,s,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(a,a+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function vve(e,s,a){var r=yr.exec(s.slice(a,a+1));return r?(e.q=r[0]*3-3,a+r[0].length):-1}function yve(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.m=r[0]-1,a+r[0].length):-1}function vD(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.d=+r[0],a+r[0].length):-1}function Nve(e,s,a){var r=yr.exec(s.slice(a,a+3));return r?(e.m=0,e.d=+r[0],a+r[0].length):-1}function yD(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.H=+r[0],a+r[0].length):-1}function wve(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.M=+r[0],a+r[0].length):-1}function Sve(e,s,a){var r=yr.exec(s.slice(a,a+2));return r?(e.S=+r[0],a+r[0].length):-1}function jve(e,s,a){var r=yr.exec(s.slice(a,a+3));return r?(e.L=+r[0],a+r[0].length):-1}function Ave(e,s,a){var r=yr.exec(s.slice(a,a+6));return r?(e.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function Eve(e,s,a){var r=dve.exec(s.slice(a,a+1));return r?a+r[0].length:-1}function Cve(e,s,a){var r=yr.exec(s.slice(a));return r?(e.Q=+r[0],a+r[0].length):-1}function Tve(e,s,a){var r=yr.exec(s.slice(a));return r?(e.s=+r[0],a+r[0].length):-1}function ND(e,s){return Ms(e.getDate(),s,2)}function _ve(e,s){return Ms(e.getHours(),s,2)}function kve(e,s){return Ms(e.getHours()%12||12,s,2)}function Ove(e,s){return Ms(1+wh.count(ql(e),e),s,3)}function wU(e,s){return Ms(e.getMilliseconds(),s,3)}function Ive(e,s){return wU(e,s)+"000"}function Rve(e,s){return Ms(e.getMonth()+1,s,2)}function Pve(e,s){return Ms(e.getMinutes(),s,2)}function Dve(e,s){return Ms(e.getSeconds(),s,2)}function Mve(e){var s=e.getDay();return s===0?7:s}function Lve(e,s){return Ms(bb.count(ql(e)-1,e),s,2)}function SU(e){var s=e.getDay();return s>=4||s===0?Gu(e):Gu.ceil(e)}function Fve(e,s){return e=SU(e),Ms(Gu.count(ql(e),e)+(ql(e).getDay()===4),s,2)}function Uve(e){return e.getDay()}function zve(e,s){return Ms(pg.count(ql(e)-1,e),s,2)}function Bve(e,s){return Ms(e.getFullYear()%100,s,2)}function $ve(e,s){return e=SU(e),Ms(e.getFullYear()%100,s,2)}function qve(e,s){return Ms(e.getFullYear()%1e4,s,4)}function Hve(e,s){var a=e.getDay();return e=a>=4||a===0?Gu(e):Gu.ceil(e),Ms(e.getFullYear()%1e4,s,4)}function Vve(e){var s=e.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+Ms(s/60|0,"0",2)+Ms(s%60,"0",2)}function wD(e,s){return Ms(e.getUTCDate(),s,2)}function Gve(e,s){return Ms(e.getUTCHours(),s,2)}function Wve(e,s){return Ms(e.getUTCHours()%12||12,s,2)}function Qve(e,s){return Ms(1+gb.count(Hl(e),e),s,3)}function jU(e,s){return Ms(e.getUTCMilliseconds(),s,3)}function Kve(e,s){return jU(e,s)+"000"}function Jve(e,s){return Ms(e.getUTCMonth()+1,s,2)}function Yve(e,s){return Ms(e.getUTCMinutes(),s,2)}function Xve(e,s){return Ms(e.getUTCSeconds(),s,2)}function Zve(e){var s=e.getUTCDay();return s===0?7:s}function eye(e,s){return Ms(vb.count(Hl(e)-1,e),s,2)}function AU(e){var s=e.getUTCDay();return s>=4||s===0?Wu(e):Wu.ceil(e)}function tye(e,s){return e=AU(e),Ms(Wu.count(Hl(e),e)+(Hl(e).getUTCDay()===4),s,2)}function sye(e){return e.getUTCDay()}function aye(e,s){return Ms(gg.count(Hl(e)-1,e),s,2)}function rye(e,s){return Ms(e.getUTCFullYear()%100,s,2)}function nye(e,s){return e=AU(e),Ms(e.getUTCFullYear()%100,s,2)}function iye(e,s){return Ms(e.getUTCFullYear()%1e4,s,4)}function lye(e,s){var a=e.getUTCDay();return e=a>=4||a===0?Wu(e):Wu.ceil(e),Ms(e.getUTCFullYear()%1e4,s,4)}function oye(){return"+0000"}function SD(){return"%"}function jD(e){return+e}function AD(e){return Math.floor(+e/1e3)}var hu,EU,CU;cye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cye(e){return hu=cve(e),EU=hu.format,hu.parse,CU=hu.utcFormat,hu.utcParse,hu}function dye(e){return new Date(e)}function uye(e){return e instanceof Date?+e:+new Date(+e)}function sC(e,s,a,r,n,i,l,o,d,u){var h=$E(),f=h.invert,x=h.domain,g=u(".%L"),v=u(":%S"),b=u("%I:%M"),y=u("%I %p"),j=u("%a %d"),w=u("%b %d"),A=u("%B"),O=u("%Y");function C(E){return(d(E)<E?g:o(E)<E?v:l(E)<E?b:i(E)<E?y:r(E)<E?n(E)<E?j:w:a(E)<E?A:O)(E)}return h.invert=function(E){return new Date(f(E))},h.domain=function(E){return arguments.length?x(Array.from(E,uye)):x().map(dye)},h.ticks=function(E){var S=x();return e(S[0],S[S.length-1],E??10)},h.tickFormat=function(E,S){return S==null?C:u(S)},h.nice=function(E){var S=x();return(!E||typeof E.range!="function")&&(E=s(S[0],S[S.length-1],E??10)),E?x(fU(S,E)):h},h.copy=function(){return Nh(h,sC(e,s,a,r,n,i,l,o,d,u))},h}function mye(){return yi.apply(sC(lve,ove,ql,eC,bb,wh,XE,JE,Lc,EU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fye(){return yi.apply(sC(nve,ive,Hl,tC,vb,gb,ZE,YE,Lc,CU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yb(){var e=0,s=1,a,r,n,i,l=sn,o=!1,d;function u(f){return f==null||isNaN(f=+f)?d:l(n===0?.5:(f=(i(f)-a)*n,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,s]=f,a=i(e=+e),r=i(s=+s),n=a===r?0:1/(r-a),u):[e,s]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(l=f,u):l};function h(f){return function(x){var g,v;return arguments.length?([g,v]=x,l=f(g,v),u):[l(0),l(1)]}}return u.range=h(y0),u.rangeRound=h(BE),u.unknown=function(f){return arguments.length?(d=f,u):d},function(f){return i=f,a=f(e),r=f(s),n=a===r?0:1/(r-a),u}}function ic(e,s){return s.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function TU(){var e=nc(yb()(sn));return e.copy=function(){return ic(e,TU())},Yl.apply(e,arguments)}function _U(){var e=VE(yb()).domain([1,10]);return e.copy=function(){return ic(e,_U()).base(e.base())},Yl.apply(e,arguments)}function kU(){var e=GE(yb());return e.copy=function(){return ic(e,kU()).constant(e.constant())},Yl.apply(e,arguments)}function aC(){var e=WE(yb());return e.copy=function(){return ic(e,aC()).exponent(e.exponent())},Yl.apply(e,arguments)}function hye(){return aC.apply(null,arguments).exponent(.5)}function OU(){var e=[],s=sn;function a(r){if(r!=null&&!isNaN(r=+r))return s((vh(e,r,1)-1)/(e.length-1))}return a.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let n of r)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(Uo),a},a.interpolator=function(r){return arguments.length?(s=r,a):s},a.range=function(){return e.map((r,n)=>s(n/(e.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(n,i)=>ebe(e,i/r))},a.copy=function(){return OU(s).domain(e)},Yl.apply(a,arguments)}function Nb(){var e=0,s=.5,a=1,r=1,n,i,l,o,d,u=sn,h,f=!1,x;function g(b){return isNaN(b=+b)?x:(b=.5+((b=+h(b))-i)*(r*b<r*i?o:d),u(f?Math.max(0,Math.min(1,b)):b))}g.domain=function(b){return arguments.length?([e,s,a]=b,n=h(e=+e),i=h(s=+s),l=h(a=+a),o=n===i?0:.5/(i-n),d=i===l?0:.5/(l-i),r=i<n?-1:1,g):[e,s,a]},g.clamp=function(b){return arguments.length?(f=!!b,g):f},g.interpolator=function(b){return arguments.length?(u=b,g):u};function v(b){return function(y){var j,w,A;return arguments.length?([j,w,A]=y,u=Ebe(b,[j,w,A]),g):[u(0),u(.5),u(1)]}}return g.range=v(y0),g.rangeRound=v(BE),g.unknown=function(b){return arguments.length?(x=b,g):x},function(b){return h=b,n=b(e),i=b(s),l=b(a),o=n===i?0:.5/(i-n),d=i===l?0:.5/(l-i),r=i<n?-1:1,g}}function IU(){var e=nc(Nb()(sn));return e.copy=function(){return ic(e,IU())},Yl.apply(e,arguments)}function RU(){var e=VE(Nb()).domain([.1,1,10]);return e.copy=function(){return ic(e,RU()).base(e.base())},Yl.apply(e,arguments)}function PU(){var e=GE(Nb());return e.copy=function(){return ic(e,PU()).constant(e.constant())},Yl.apply(e,arguments)}function rC(){var e=WE(Nb());return e.copy=function(){return ic(e,rC()).exponent(e.exponent())},Yl.apply(e,arguments)}function xye(){return rC.apply(null,arguments).exponent(.5)}const ED=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kf,scaleDiverging:IU,scaleDivergingLog:RU,scaleDivergingPow:rC,scaleDivergingSqrt:xye,scaleDivergingSymlog:PU,scaleIdentity:mU,scaleImplicit:S2,scaleLinear:hg,scaleLog:hU,scaleOrdinal:FE,scalePoint:Xm,scalePow:QE,scaleQuantile:gU,scaleQuantize:bU,scaleRadial:pU,scaleSequential:TU,scaleSequentialLog:_U,scaleSequentialPow:aC,scaleSequentialQuantile:OU,scaleSequentialSqrt:hye,scaleSequentialSymlog:kU,scaleSqrt:Kbe,scaleSymlog:xU,scaleThreshold:vU,scaleTime:mye,scaleUtc:fye,tickFormat:uU},Symbol.toStringTag,{value:"Module"}));var US,CD;function DU(){if(CD)return US;CD=1;var e=x0();function s(a,r,n){for(var i=-1,l=a.length;++i<l;){var o=a[i],d=r(o);if(d!=null&&(u===void 0?d===d&&!e(d):n(d,u)))var u=d,h=o}return h}return US=s,US}var zS,TD;function pye(){if(TD)return zS;TD=1;function e(s,a){return s>a}return zS=e,zS}var BS,_D;function gye(){if(_D)return BS;_D=1;var e=DU(),s=pye(),a=b0();function r(n){return n&&n.length?e(n,a,s):void 0}return BS=r,BS}var bye=gye();const Ro=ea(bye);var $S,kD;function vye(){if(kD)return $S;kD=1;function e(s,a){return s<a}return $S=e,$S}var qS,OD;function yye(){if(OD)return qS;OD=1;var e=DU(),s=vye(),a=b0();function r(n){return n&&n.length?e(n,a,s):void 0}return qS=r,qS}var Nye=yye();const wb=ea(Nye);var HS,ID;function wye(){if(ID)return HS;ID=1;var e=yE(),s=rc(),a=q7(),r=yn();function n(i,l){var o=r(i)?e:a;return o(i,s(l,3))}return HS=n,HS}var VS,RD;function Sye(){if(RD)return VS;RD=1;var e=B7(),s=wye();function a(r,n){return e(s(r,n),1)}return VS=a,VS}var jye=Sye();const Aye=ea(jye);var GS,PD;function Eye(){if(PD)return GS;PD=1;var e=RE();function s(a,r){return e(a,r)}return GS=s,GS}var Cye=Eye();const Df=ea(Cye);var N0=1e9,Tye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},iC,Sa=!0,bi="[DecimalError] ",Kc=bi+"Invalid argument: ",nC=bi+"Exponent out of range: ",w0=Math.floor,Ic=Math.pow,_ye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Dn,xr=1e7,xa=7,MU=9007199254740991,bg=w0(MU/xa),jt={};jt.absoluteValue=jt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};jt.comparedTo=jt.cmp=function(e){var s,a,r,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,n=e.d.length,s=0,a=r<n?r:n;s<a;++s)if(i.d[s]!==e.d[s])return i.d[s]>e.d[s]^i.s<0?1:-1;return r===n?0:r>n^i.s<0?1:-1};jt.decimalPlaces=jt.dp=function(){var e=this,s=e.d.length-1,a=(s-e.e)*xa;if(s=e.d[s],s)for(;s%10==0;s/=10)a--;return a<0?0:a};jt.dividedBy=jt.div=function(e){return zl(this,new this.constructor(e))};jt.dividedToIntegerBy=jt.idiv=function(e){var s=this,a=s.constructor;return da(zl(s,new a(e),0,1),a.precision)};jt.equals=jt.eq=function(e){return!this.cmp(e)};jt.exponent=function(){return er(this)};jt.greaterThan=jt.gt=function(e){return this.cmp(e)>0};jt.greaterThanOrEqualTo=jt.gte=function(e){return this.cmp(e)>=0};jt.isInteger=jt.isint=function(){return this.e>this.d.length-2};jt.isNegative=jt.isneg=function(){return this.s<0};jt.isPositive=jt.ispos=function(){return this.s>0};jt.isZero=function(){return this.s===0};jt.lessThan=jt.lt=function(e){return this.cmp(e)<0};jt.lessThanOrEqualTo=jt.lte=function(e){return this.cmp(e)<1};jt.logarithm=jt.log=function(e){var s,a=this,r=a.constructor,n=r.precision,i=n+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Dn))throw Error(bi+"NaN");if(a.s<1)throw Error(bi+(a.s?"NaN":"-Infinity"));return a.eq(Dn)?new r(0):(Sa=!1,s=zl(Mf(a,i),Mf(e,i),i),Sa=!0,da(s,n))};jt.minus=jt.sub=function(e){var s=this;return e=new s.constructor(e),s.s==e.s?UU(s,e):LU(s,(e.s=-e.s,e))};jt.modulo=jt.mod=function(e){var s,a=this,r=a.constructor,n=r.precision;if(e=new r(e),!e.s)throw Error(bi+"NaN");return a.s?(Sa=!1,s=zl(a,e,0,1).times(e),Sa=!0,a.minus(s)):da(new r(a),n)};jt.naturalExponential=jt.exp=function(){return FU(this)};jt.naturalLogarithm=jt.ln=function(){return Mf(this)};jt.negated=jt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};jt.plus=jt.add=function(e){var s=this;return e=new s.constructor(e),s.s==e.s?LU(s,e):UU(s,(e.s=-e.s,e))};jt.precision=jt.sd=function(e){var s,a,r,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Kc+e);if(s=er(n)+1,r=n.d.length-1,a=r*xa+1,r=n.d[r],r){for(;r%10==0;r/=10)a--;for(r=n.d[0];r>=10;r/=10)a++}return e&&s>a?s:a};jt.squareRoot=jt.sqrt=function(){var e,s,a,r,n,i,l,o=this,d=o.constructor;if(o.s<1){if(!o.s)return new d(0);throw Error(bi+"NaN")}for(e=er(o),Sa=!1,n=Math.sqrt(+o),n==0||n==1/0?(s=Ki(o.d),(s.length+e)%2==0&&(s+="0"),n=Math.sqrt(s),e=w0((e+1)/2)-(e<0||e%2),n==1/0?s="5e"+e:(s=n.toExponential(),s=s.slice(0,s.indexOf("e")+1)+e),r=new d(s)):r=new d(n.toString()),a=d.precision,n=l=a+3;;)if(i=r,r=i.plus(zl(o,i,l+2)).times(.5),Ki(i.d).slice(0,l)===(s=Ki(r.d)).slice(0,l)){if(s=s.slice(l-3,l+1),n==l&&s=="4999"){if(da(i,a+1,0),i.times(i).eq(o)){r=i;break}}else if(s!="9999")break;l+=4}return Sa=!0,da(r,a)};jt.times=jt.mul=function(e){var s,a,r,n,i,l,o,d,u,h=this,f=h.constructor,x=h.d,g=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,a=h.e+e.e,d=x.length,u=g.length,d<u&&(i=x,x=g,g=i,l=d,d=u,u=l),i=[],l=d+u,r=l;r--;)i.push(0);for(r=u;--r>=0;){for(s=0,n=d+r;n>r;)o=i[n]+g[r]*x[n-r-1]+s,i[n--]=o%xr|0,s=o/xr|0;i[n]=(i[n]+s)%xr|0}for(;!i[--l];)i.pop();return s?++a:i.shift(),e.d=i,e.e=a,Sa?da(e,f.precision):e};jt.toDecimalPlaces=jt.todp=function(e,s){var a=this,r=a.constructor;return a=new r(a),e===void 0?a:(rl(e,0,N0),s===void 0?s=r.rounding:rl(s,0,8),da(a,e+er(a)+1,s))};jt.toExponential=function(e,s){var a,r=this,n=r.constructor;return e===void 0?a=cd(r,!0):(rl(e,0,N0),s===void 0?s=n.rounding:rl(s,0,8),r=da(new n(r),e+1,s),a=cd(r,!0,e+1)),a};jt.toFixed=function(e,s){var a,r,n=this,i=n.constructor;return e===void 0?cd(n):(rl(e,0,N0),s===void 0?s=i.rounding:rl(s,0,8),r=da(new i(n),e+er(n)+1,s),a=cd(r.abs(),!1,e+er(r)+1),n.isneg()&&!n.isZero()?"-"+a:a)};jt.toInteger=jt.toint=function(){var e=this,s=e.constructor;return da(new s(e),er(e)+1,s.rounding)};jt.toNumber=function(){return+this};jt.toPower=jt.pow=function(e){var s,a,r,n,i,l,o=this,d=o.constructor,u=12,h=+(e=new d(e));if(!e.s)return new d(Dn);if(o=new d(o),!o.s){if(e.s<1)throw Error(bi+"Infinity");return o}if(o.eq(Dn))return o;if(r=d.precision,e.eq(Dn))return da(o,r);if(s=e.e,a=e.d.length-1,l=s>=a,i=o.s,l){if((a=h<0?-h:h)<=MU){for(n=new d(Dn),s=Math.ceil(r/xa+4),Sa=!1;a%2&&(n=n.times(o),MD(n.d,s)),a=w0(a/2),a!==0;)o=o.times(o),MD(o.d,s);return Sa=!0,e.s<0?new d(Dn).div(n):da(n,r)}}else if(i<0)throw Error(bi+"NaN");return i=i<0&&e.d[Math.max(s,a)]&1?-1:1,o.s=1,Sa=!1,n=e.times(Mf(o,r+u)),Sa=!0,n=FU(n),n.s=i,n};jt.toPrecision=function(e,s){var a,r,n=this,i=n.constructor;return e===void 0?(a=er(n),r=cd(n,a<=i.toExpNeg||a>=i.toExpPos)):(rl(e,1,N0),s===void 0?s=i.rounding:rl(s,0,8),n=da(new i(n),e,s),a=er(n),r=cd(n,e<=a||a<=i.toExpNeg,e)),r};jt.toSignificantDigits=jt.tosd=function(e,s){var a=this,r=a.constructor;return e===void 0?(e=r.precision,s=r.rounding):(rl(e,1,N0),s===void 0?s=r.rounding:rl(s,0,8)),da(new r(a),e,s)};jt.toString=jt.valueOf=jt.val=jt.toJSON=jt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,s=er(e),a=e.constructor;return cd(e,s<=a.toExpNeg||s>=a.toExpPos)};function LU(e,s){var a,r,n,i,l,o,d,u,h=e.constructor,f=h.precision;if(!e.s||!s.s)return s.s||(s=new h(e)),Sa?da(s,f):s;if(d=e.d,u=s.d,l=e.e,n=s.e,d=d.slice(),i=l-n,i){for(i<0?(r=d,i=-i,o=u.length):(r=u,n=l,o=d.length),l=Math.ceil(f/xa),o=l>o?l+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=d.length,i=u.length,o-i<0&&(i=o,r=u,u=d,d=r),a=0;i;)a=(d[--i]=d[i]+u[i]+a)/xr|0,d[i]%=xr;for(a&&(d.unshift(a),++n),o=d.length;d[--o]==0;)d.pop();return s.d=d,s.e=n,Sa?da(s,f):s}function rl(e,s,a){if(e!==~~e||e<s||e>a)throw Error(Kc+e)}function Ki(e){var s,a,r,n=e.length-1,i="",l=e[0];if(n>0){for(i+=l,s=1;s<n;s++)r=e[s]+"",a=xa-r.length,a&&(i+=Co(a)),i+=r;l=e[s],r=l+"",a=xa-r.length,a&&(i+=Co(a))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var zl=(function(){function e(r,n){var i,l=0,o=r.length;for(r=r.slice();o--;)i=r[o]*n+l,r[o]=i%xr|0,l=i/xr|0;return l&&r.unshift(l),r}function s(r,n,i,l){var o,d;if(i!=l)d=i>l?1:-1;else for(o=d=0;o<i;o++)if(r[o]!=n[o]){d=r[o]>n[o]?1:-1;break}return d}function a(r,n,i){for(var l=0;i--;)r[i]-=l,l=r[i]<n[i]?1:0,r[i]=l*xr+r[i]-n[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,n,i,l){var o,d,u,h,f,x,g,v,b,y,j,w,A,O,C,E,S,D,M=r.constructor,U=r.s==n.s?1:-1,I=r.d,k=n.d;if(!r.s)return new M(r);if(!n.s)throw Error(bi+"Division by zero");for(d=r.e-n.e,S=k.length,C=I.length,g=new M(U),v=g.d=[],u=0;k[u]==(I[u]||0);)++u;if(k[u]>(I[u]||0)&&--d,i==null?w=i=M.precision:l?w=i+(er(r)-er(n))+1:w=i,w<0)return new M(0);if(w=w/xa+2|0,u=0,S==1)for(h=0,k=k[0],w++;(u<C||h)&&w--;u++)A=h*xr+(I[u]||0),v[u]=A/k|0,h=A%k|0;else{for(h=xr/(k[0]+1)|0,h>1&&(k=e(k,h),I=e(I,h),S=k.length,C=I.length),O=S,b=I.slice(0,S),y=b.length;y<S;)b[y++]=0;D=k.slice(),D.unshift(0),E=k[0],k[1]>=xr/2&&++E;do h=0,o=s(k,b,S,y),o<0?(j=b[0],S!=y&&(j=j*xr+(b[1]||0)),h=j/E|0,h>1?(h>=xr&&(h=xr-1),f=e(k,h),x=f.length,y=b.length,o=s(f,b,x,y),o==1&&(h--,a(f,S<x?D:k,x))):(h==0&&(o=h=1),f=k.slice()),x=f.length,x<y&&f.unshift(0),a(b,f,y),o==-1&&(y=b.length,o=s(k,b,S,y),o<1&&(h++,a(b,S<y?D:k,y))),y=b.length):o===0&&(h++,b=[0]),v[u++]=h,o&&b[0]?b[y++]=I[O]||0:(b=[I[O]],y=1);while((O++<C||b[0]!==void 0)&&w--)}return v[0]||v.shift(),g.e=d,da(g,l?i+er(g)+1:i)}})();function FU(e,s){var a,r,n,i,l,o,d=0,u=0,h=e.constructor,f=h.precision;if(er(e)>16)throw Error(nC+er(e));if(!e.s)return new h(Dn);for(Sa=!1,o=f,l=new h(.03125);e.abs().gte(.1);)e=e.times(l),u+=5;for(r=Math.log(Ic(2,u))/Math.LN10*2+5|0,o+=r,a=n=i=new h(Dn),h.precision=o;;){if(n=da(n.times(e),o),a=a.times(++d),l=i.plus(zl(n,a,o)),Ki(l.d).slice(0,o)===Ki(i.d).slice(0,o)){for(;u--;)i=da(i.times(i),o);return h.precision=f,s==null?(Sa=!0,da(i,f)):i}i=l}}function er(e){for(var s=e.e*xa,a=e.d[0];a>=10;a/=10)s++;return s}function WS(e,s,a){if(s>e.LN10.sd())throw Sa=!0,a&&(e.precision=a),Error(bi+"LN10 precision limit exceeded");return da(new e(e.LN10),s)}function Co(e){for(var s="";e--;)s+="0";return s}function Mf(e,s){var a,r,n,i,l,o,d,u,h,f=1,x=10,g=e,v=g.d,b=g.constructor,y=b.precision;if(g.s<1)throw Error(bi+(g.s?"NaN":"-Infinity"));if(g.eq(Dn))return new b(0);if(s==null?(Sa=!1,u=y):u=s,g.eq(10))return s==null&&(Sa=!0),WS(b,u);if(u+=x,b.precision=u,a=Ki(v),r=a.charAt(0),i=er(g),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)g=g.times(e),a=Ki(g.d),r=a.charAt(0),f++;i=er(g),r>1?(g=new b("0."+a),i++):g=new b(r+"."+a.slice(1))}else return d=WS(b,u+2,y).times(i+""),g=Mf(new b(r+"."+a.slice(1)),u-x).plus(d),b.precision=y,s==null?(Sa=!0,da(g,y)):g;for(o=l=g=zl(g.minus(Dn),g.plus(Dn),u),h=da(g.times(g),u),n=3;;){if(l=da(l.times(h),u),d=o.plus(zl(l,new b(n),u)),Ki(d.d).slice(0,u)===Ki(o.d).slice(0,u))return o=o.times(2),i!==0&&(o=o.plus(WS(b,u+2,y).times(i+""))),o=zl(o,new b(f),u),b.precision=y,s==null?(Sa=!0,da(o,y)):o;o=d,n+=2}}function DD(e,s){var a,r,n;for((a=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(a<0&&(a=r),a+=+s.slice(r+1),s=s.substring(0,r)):a<0&&(a=s.length),r=0;s.charCodeAt(r)===48;)++r;for(n=s.length;s.charCodeAt(n-1)===48;)--n;if(s=s.slice(r,n),s){if(n-=r,a=a-r-1,e.e=w0(a/xa),e.d=[],r=(a+1)%xa,a<0&&(r+=xa),r<n){for(r&&e.d.push(+s.slice(0,r)),n-=xa;r<n;)e.d.push(+s.slice(r,r+=xa));s=s.slice(r),r=xa-s.length}else r-=n;for(;r--;)s+="0";if(e.d.push(+s),Sa&&(e.e>bg||e.e<-bg))throw Error(nC+a)}else e.s=0,e.e=0,e.d=[0];return e}function da(e,s,a){var r,n,i,l,o,d,u,h,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if(r=s-l,r<0)r+=xa,n=s,u=f[h=0];else{if(h=Math.ceil((r+1)/xa),i=f.length,h>=i)return e;for(u=i=f[h],l=1;i>=10;i/=10)l++;r%=xa,n=r-xa+l}if(a!==void 0&&(i=Ic(10,l-n-1),o=u/i%10|0,d=s<0||f[h+1]!==void 0||u%i,d=a<4?(o||d)&&(a==0||a==(e.s<0?3:2)):o>5||o==5&&(a==4||d||a==6&&(r>0?n>0?u/Ic(10,l-n):0:f[h-1])%10&1||a==(e.s<0?8:7))),s<1||!f[0])return d?(i=er(e),f.length=1,s=s-i-1,f[0]=Ic(10,(xa-s%xa)%xa),e.e=w0(-s/xa)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=h,i=1,h--):(f.length=h+1,i=Ic(10,xa-r),f[h]=n>0?(u/Ic(10,l-n)%Ic(10,n)|0)*i:0),d)for(;;)if(h==0){(f[0]+=i)==xr&&(f[0]=1,++e.e);break}else{if(f[h]+=i,f[h]!=xr)break;f[h--]=0,i=1}for(r=f.length;f[--r]===0;)f.pop();if(Sa&&(e.e>bg||e.e<-bg))throw Error(nC+er(e));return e}function UU(e,s){var a,r,n,i,l,o,d,u,h,f,x=e.constructor,g=x.precision;if(!e.s||!s.s)return s.s?s.s=-s.s:s=new x(e),Sa?da(s,g):s;if(d=e.d,f=s.d,r=s.e,u=e.e,d=d.slice(),l=u-r,l){for(h=l<0,h?(a=d,l=-l,o=f.length):(a=f,r=u,o=d.length),n=Math.max(Math.ceil(g/xa),o)+2,l>n&&(l=n,a.length=1),a.reverse(),n=l;n--;)a.push(0);a.reverse()}else{for(n=d.length,o=f.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(d[n]!=f[n]){h=d[n]<f[n];break}l=0}for(h&&(a=d,d=f,f=a,s.s=-s.s),o=d.length,n=f.length-o;n>0;--n)d[o++]=0;for(n=f.length;n>l;){if(d[--n]<f[n]){for(i=n;i&&d[--i]===0;)d[i]=xr-1;--d[i],d[n]+=xr}d[n]-=f[n]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--r;return d[0]?(s.d=d,s.e=r,Sa?da(s,g):s):new x(0)}function cd(e,s,a){var r,n=er(e),i=Ki(e.d),l=i.length;return s?(a&&(r=a-l)>0?i=i.charAt(0)+"."+i.slice(1)+Co(r):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+Co(-n-1)+i,a&&(r=a-l)>0&&(i+=Co(r))):n>=l?(i+=Co(n+1-l),a&&(r=a-n-1)>0&&(i=i+"."+Co(r))):((r=n+1)<l&&(i=i.slice(0,r)+"."+i.slice(r)),a&&(r=a-l)>0&&(n+1===l&&(i+="."),i+=Co(r))),e.s<0?"-"+i:i}function MD(e,s){if(e.length>s)return e.length=s,!0}function zU(e){var s,a,r;function n(i){var l=this;if(!(l instanceof n))return new n(i);if(l.constructor=n,i instanceof n){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Kc+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return DD(l,i.toString())}else if(typeof i!="string")throw Error(Kc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,_ye.test(i))DD(l,i);else throw Error(Kc+i)}if(n.prototype=jt,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=zU,n.config=n.set=kye,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<r.length;)e.hasOwnProperty(a=r[s++])||(e[a]=this[a]);return n.config(e),n}function kye(e){if(!e||typeof e!="object")throw Error(bi+"Object expected");var s,a,r,n=["precision",1,N0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(s=0;s<n.length;s+=3)if((r=e[a=n[s]])!==void 0)if(w0(r)===r&&r>=n[s+1]&&r<=n[s+2])this[a]=r;else throw Error(Kc+a+": "+r);if((r=e[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(Kc+a+": "+r);return this}var iC=zU(Tye);Dn=new iC(1);const na=iC;function Oye(e){return Dye(e)||Pye(e)||Rye(e)||Iye()}function Iye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rye(e,s){if(e){if(typeof e=="string")return C2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return C2(e,s)}}function Pye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Dye(e){if(Array.isArray(e))return C2(e)}function C2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}var Mye=function(s){return s},BU={},$U=function(s){return s===BU},LD=function(s){return function a(){return arguments.length===0||arguments.length===1&&$U(arguments.length<=0?void 0:arguments[0])?a:s.apply(void 0,arguments)}},Lye=function e(s,a){return s===1?a:LD(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var l=n.filter(function(o){return o!==BU}).length;return l>=s?a.apply(void 0,n):e(s-l,LD(function(){for(var o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];var h=n.map(function(f){return $U(f)?d.shift():f});return a.apply(void 0,Oye(h).concat(d))}))})},Sb=function(s){return Lye(s.length,s)},T2=function(s,a){for(var r=[],n=s;n<a;++n)r[n-s]=n;return r},Fye=Sb(function(e,s){return Array.isArray(s)?s.map(e):Object.keys(s).map(function(a){return s[a]}).map(e)}),Uye=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];if(!a.length)return Mye;var n=a.reverse(),i=n[0],l=n.slice(1);return function(){return l.reduce(function(o,d){return d(o)},i.apply(void 0,arguments))}},_2=function(s){return Array.isArray(s)?s.reverse():s.split("").reverse.join("")},qU=function(s){var a=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return a&&i.every(function(o,d){return o===a[d]})||(a=i,r=s.apply(void 0,i)),r}};function zye(e){var s;return e===0?s=1:s=Math.floor(new na(e).abs().log(10).toNumber())+1,s}function Bye(e,s,a){for(var r=new na(e),n=0,i=[];r.lt(s)&&n<1e5;)i.push(r.toNumber()),r=r.add(a),n++;return i}var $ye=Sb(function(e,s,a){var r=+e,n=+s;return r+a*(n-r)}),qye=Sb(function(e,s,a){var r=s-+e;return r=r||1/0,(a-e)/r}),Hye=Sb(function(e,s,a){var r=s-+e;return r=r||1/0,Math.max(0,Math.min(1,(a-e)/r))});const jb={rangeStep:Bye,getDigitCount:zye,interpolateNumber:$ye,uninterpolateNumber:qye,uninterpolateTruncation:Hye};function k2(e){return Wye(e)||Gye(e)||HU(e)||Vye()}function Vye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Wye(e){if(Array.isArray(e))return O2(e)}function Lf(e,s){return Jye(e)||Kye(e,s)||HU(e,s)||Qye()}function Qye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HU(e,s){if(e){if(typeof e=="string")return O2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O2(e,s)}}function O2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Kye(e,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var a=[],r=!0,n=!1,i=void 0;try{for(var l=e[Symbol.iterator](),o;!(r=(o=l.next()).done)&&(a.push(o.value),!(s&&a.length===s));r=!0);}catch(d){n=!0,i=d}finally{try{!r&&l.return!=null&&l.return()}finally{if(n)throw i}}return a}}function Jye(e){if(Array.isArray(e))return e}function VU(e){var s=Lf(e,2),a=s[0],r=s[1],n=a,i=r;return a>r&&(n=r,i=a),[n,i]}function GU(e,s,a){if(e.lte(0))return new na(0);var r=jb.getDigitCount(e.toNumber()),n=new na(10).pow(r),i=e.div(n),l=r!==1?.05:.1,o=new na(Math.ceil(i.div(l).toNumber())).add(a).mul(l),d=o.mul(n);return s?d:new na(Math.ceil(d))}function Yye(e,s,a){var r=1,n=new na(e);if(!n.isint()&&a){var i=Math.abs(e);i<1?(r=new na(10).pow(jb.getDigitCount(e)-1),n=new na(Math.floor(n.div(r).toNumber())).mul(r)):i>1&&(n=new na(Math.floor(e)))}else e===0?n=new na(Math.floor((s-1)/2)):a||(n=new na(Math.floor(e)));var l=Math.floor((s-1)/2),o=Uye(Fye(function(d){return n.add(new na(d-l).mul(r)).toNumber()}),T2);return o(0,s)}function WU(e,s,a,r){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-e)/(a-1)))return{step:new na(0),tickMin:new na(0),tickMax:new na(0)};var i=GU(new na(s).sub(e).div(a-1),r,n),l;e<=0&&s>=0?l=new na(0):(l=new na(e).add(s).div(2),l=l.sub(new na(l).mod(i)));var o=Math.ceil(l.sub(e).div(i).toNumber()),d=Math.ceil(new na(s).sub(l).div(i).toNumber()),u=o+d+1;return u>a?WU(e,s,a,r,n+1):(u<a&&(d=s>0?d+(a-u):d,o=s>0?o:o+(a-u)),{step:i,tickMin:l.sub(new na(o).mul(i)),tickMax:l.add(new na(d).mul(i))})}function Xye(e){var s=Lf(e,2),a=s[0],r=s[1],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(n,2),o=VU([a,r]),d=Lf(o,2),u=d[0],h=d[1];if(u===-1/0||h===1/0){var f=h===1/0?[u].concat(k2(T2(0,n-1).map(function(){return 1/0}))):[].concat(k2(T2(0,n-1).map(function(){return-1/0})),[h]);return a>r?_2(f):f}if(u===h)return Yye(u,n,i);var x=WU(u,h,l,i),g=x.step,v=x.tickMin,b=x.tickMax,y=jb.rangeStep(v,b.add(new na(.1).mul(g)),g);return a>r?_2(y):y}function Zye(e,s){var a=Lf(e,2),r=a[0],n=a[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=VU([r,n]),o=Lf(l,2),d=o[0],u=o[1];if(d===-1/0||u===1/0)return[r,n];if(d===u)return[d];var h=Math.max(s,2),f=GU(new na(u).sub(d).div(h-1),i,0),x=[].concat(k2(jb.rangeStep(new na(d),new na(u).sub(new na(.99).mul(f)),f)),[u]);return r>n?_2(x):x}var e1e=qU(Xye),t1e=qU(Zye),s1e="Invariant failed";function dd(e,s){throw new Error(s1e)}var a1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qu(e)}function vg(){return vg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},vg.apply(this,arguments)}function r1e(e,s){return o1e(e)||l1e(e,s)||i1e(e,s)||n1e()}function n1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i1e(e,s){if(e){if(typeof e=="string")return FD(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return FD(e,s)}}function FD(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function l1e(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function o1e(e){if(Array.isArray(e))return e}function c1e(e,s){if(e==null)return{};var a=d1e(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function d1e(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function u1e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function m1e(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JU(r.key),r)}}function f1e(e,s,a){return s&&m1e(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function h1e(e,s,a){return s=yg(s),x1e(e,QU()?Reflect.construct(s,a||[],yg(e).constructor):s.apply(e,a))}function x1e(e,s){if(s&&(Qu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p1e(e)}function p1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QU=function(){return!!e})()}function yg(e){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},yg(e)}function g1e(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&I2(e,s)}function I2(e,s){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},I2(e,s)}function KU(e,s,a){return s=JU(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function JU(e){var s=b1e(e,"string");return Qu(s)=="symbol"?s:s+""}function b1e(e,s){if(Qu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ab=(function(e){function s(){return u1e(this,s),h1e(this,s,arguments)}return g1e(s,e),f1e(s,[{key:"render",value:function(){var r=this.props,n=r.offset,i=r.layout,l=r.width,o=r.dataKey,d=r.data,u=r.dataPointFormatter,h=r.xAxis,f=r.yAxis,x=c1e(r,a1e),g=bs(x,!1);this.props.direction==="x"&&h.type!=="number"&&dd();var v=d.map(function(b){var y=u(b,o),j=y.x,w=y.y,A=y.value,O=y.errorVal;if(!O)return null;var C=[],E,S;if(Array.isArray(O)){var D=r1e(O,2);E=D[0],S=D[1]}else E=S=O;if(i==="vertical"){var M=h.scale,U=w+n,I=U+l,k=U-l,z=M(A-E),_=M(A+S);C.push({x1:_,y1:I,x2:_,y2:k}),C.push({x1:z,y1:U,x2:_,y2:U}),C.push({x1:z,y1:I,x2:z,y2:k})}else if(i==="horizontal"){var q=f.scale,L=j+n,Q=L-l,X=L+l,W=q(A-E),ee=q(A+S);C.push({x1:Q,y1:ee,x2:X,y2:ee}),C.push({x1:L,y1:W,x2:L,y2:ee}),C.push({x1:Q,y1:W,x2:X,y2:W})}return Oe.createElement(Ca,vg({className:"recharts-errorBar",key:"bar-".concat(C.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},g),C.map(function(V){return Oe.createElement("line",vg({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return Oe.createElement(Ca,{className:"recharts-errorBars"},v)}}])})(Oe.Component);KU(Ab,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});KU(Ab,"displayName","ErrorBar");function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ff(e)}function UD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Tc(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?UD(Object(a),!0).forEach(function(r){v1e(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function v1e(e,s,a){return s=y1e(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function y1e(e){var s=N1e(e,"string");return Ff(s)=="symbol"?s:s+""}function N1e(e,s){if(Ff(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var YU=function(s){var a=s.children,r=s.formattedGraphicalItems,n=s.legendWidth,i=s.legendContent,l=kn(a,ku);if(!l)return null;var o=ku.defaultProps,d=o!==void 0?Tc(Tc({},o),l.props):{},u;return l.props&&l.props.payload?u=l.props&&l.props.payload:i==="children"?u=(r||[]).reduce(function(h,f){var x=f.item,g=f.props,v=g.sectors||g.data||[];return h.concat(v.map(function(b){return{type:l.props.iconType||x.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(r||[]).map(function(h){var f=h.item,x=f.type.defaultProps,g=x!==void 0?Tc(Tc({},x),f.props):{},v=g.dataKey,b=g.name,y=g.legendType,j=g.hide;return{inactive:j,dataKey:v,type:d.iconType||y||"square",color:lC(f),value:b||v,payload:g}}),Tc(Tc(Tc({},d),ku.getWithHeight(l,n)),{},{payload:u,item:l})};function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Uf(e)}function zD(e){return A1e(e)||j1e(e)||S1e(e)||w1e()}function w1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S1e(e,s){if(e){if(typeof e=="string")return R2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R2(e,s)}}function j1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A1e(e){if(Array.isArray(e))return R2(e)}function R2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function BD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ra(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?BD(Object(a),!0).forEach(function(r){Iu(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Iu(e,s,a){return s=E1e(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function E1e(e){var s=C1e(e,"string");return Uf(s)=="symbol"?s:s+""}function C1e(e,s){if(Uf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Bn(e,s,a){return Ss(e)||Ss(s)?a:lr(s)?fi(e,s,a):is(s)?s(e):a}function Zm(e,s,a,r){var n=Aye(e,function(o){return Bn(o,s)});if(a==="number"){var i=n.filter(function(o){return mt(o)||parseFloat(o)});return i.length?[wb(i),Ro(i)]:[1/0,-1/0]}var l=r?n.filter(function(o){return!Ss(o)}):n;return l.map(function(o){return lr(o)||o instanceof Date?o:""})}var T1e=function(s){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,u=0;u<o;u++){var h=u>0?n[u-1].coordinate:n[o-1].coordinate,f=n[u].coordinate,x=u>=o-1?n[0].coordinate:n[u+1].coordinate,g=void 0;if(Ii(f-h)!==Ii(x-f)){var v=[];if(Ii(x-f)===Ii(d[1]-d[0])){g=x;var b=f+d[1]-d[0];v[0]=Math.min(b,(b+h)/2),v[1]=Math.max(b,(b+h)/2)}else{g=h;var y=x+d[1]-d[0];v[0]=Math.min(f,(y+f)/2),v[1]=Math.max(f,(y+f)/2)}var j=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(s>j[0]&&s<=j[1]||s>=v[0]&&s<=v[1]){l=n[u].index;break}}else{var w=Math.min(h,x),A=Math.max(h,x);if(s>(w+f)/2&&s<=(A+f)/2){l=n[u].index;break}}}else for(var O=0;O<o;O++)if(O===0&&s<=(r[O].coordinate+r[O+1].coordinate)/2||O>0&&O<o-1&&s>(r[O].coordinate+r[O-1].coordinate)/2&&s<=(r[O].coordinate+r[O+1].coordinate)/2||O===o-1&&s>(r[O].coordinate+r[O-1].coordinate)/2){l=r[O].index;break}return l},lC=function(s){var a,r=s,n=r.type.displayName,i=(a=s.type)!==null&&a!==void 0&&a.defaultProps?Ra(Ra({},s.type.defaultProps),s.props):s.props,l=i.stroke,o=i.fill,d;switch(n){case"Line":d=l;break;case"Area":case"Radar":d=l&&l!=="none"?l:o;break;default:d=o;break}return d},_1e=function(s){var a=s.barSize,r=s.totalSize,n=s.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var l={},o=Object.keys(i),d=0,u=o.length;d<u;d++)for(var h=i[o[d]].stackGroups,f=Object.keys(h),x=0,g=f.length;x<g;x++){var v=h[f[x]],b=v.items,y=v.cateAxisId,j=b.filter(function(S){return Fl(S.type).indexOf("Bar")>=0});if(j&&j.length){var w=j[0].type.defaultProps,A=w!==void 0?Ra(Ra({},w),j[0].props):j[0].props,O=A.barSize,C=A[y];l[C]||(l[C]=[]);var E=Ss(O)?a:O;l[C].push({item:j[0],stackList:j.slice(1),barSize:Ss(E)?void 0:od(E,r,0)})}}return l},k1e=function(s){var a=s.barGap,r=s.barCategoryGap,n=s.bandSize,i=s.sizeList,l=i===void 0?[]:i,o=s.maxBarSize,d=l.length;if(d<1)return null;var u=od(a,n,0,!0),h,f=[];if(l[0].barSize===+l[0].barSize){var x=!1,g=n/d,v=l.reduce(function(O,C){return O+C.barSize||0},0);v+=(d-1)*u,v>=n&&(v-=(d-1)*u,u=0),v>=n&&g>0&&(x=!0,g*=.9,v=d*g);var b=(n-v)/2>>0,y={offset:b-u,size:0};h=l.reduce(function(O,C){var E={item:C.item,position:{offset:y.offset+y.size+u,size:x?g:C.barSize}},S=[].concat(zD(O),[E]);return y=S[S.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(D){S.push({item:D,position:y})}),S},f)}else{var j=od(r,n,0,!0);n-2*j-(d-1)*u<=0&&(u=0);var w=(n-2*j-(d-1)*u)/d;w>1&&(w>>=0);var A=o===+o?Math.min(w,o):w;h=l.reduce(function(O,C,E){var S=[].concat(zD(O),[{item:C.item,position:{offset:j+(w+u)*E+(w-A)/2,size:A}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(D){S.push({item:D,position:S[S.length-1].position})}),S},f)}return h},O1e=function(s,a,r,n){var i=r.children,l=r.width,o=r.margin,d=l-(o.left||0)-(o.right||0),u=YU({children:i,legendWidth:d});if(u){var h=n||{},f=h.width,x=h.height,g=u.align,v=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&v==="middle")&&g!=="center"&&mt(s[g]))return Ra(Ra({},s),{},Iu({},g,s[g]+(f||0)));if((b==="horizontal"||b==="vertical"&&g==="center")&&v!=="middle"&&mt(s[v]))return Ra(Ra({},s),{},Iu({},v,s[v]+(x||0)))}return s},I1e=function(s,a,r){return Ss(a)?!0:s==="horizontal"?a==="yAxis":s==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},XU=function(s,a,r,n,i){var l=a.props.children,o=Di(l,Ab).filter(function(u){return I1e(n,i,u.props.direction)});if(o&&o.length){var d=o.map(function(u){return u.props.dataKey});return s.reduce(function(u,h){var f=Bn(h,r);if(Ss(f))return u;var x=Array.isArray(f)?[wb(f),Ro(f)]:[f,f],g=d.reduce(function(v,b){var y=Bn(h,b,0),j=x[0]-Math.abs(Array.isArray(y)?y[0]:y),w=x[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(j,v[0]),Math.max(w,v[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},R1e=function(s,a,r,n,i){var l=a.map(function(o){return XU(s,o,r,i,n)}).filter(function(o){return!Ss(o)});return l&&l.length?l.reduce(function(o,d){return[Math.min(o[0],d[0]),Math.max(o[1],d[1])]},[1/0,-1/0]):null},ZU=function(s,a,r,n,i){var l=a.map(function(d){var u=d.props.dataKey;return r==="number"&&u&&XU(s,d,u,n)||Zm(s,u,r,i)});if(r==="number")return l.reduce(function(d,u){return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);var o={};return l.reduce(function(d,u){for(var h=0,f=u.length;h<f;h++)o[u[h]]||(o[u[h]]=!0,d.push(u[h]));return d},[])},ez=function(s,a){return s==="horizontal"&&a==="xAxis"||s==="vertical"&&a==="yAxis"||s==="centric"&&a==="angleAxis"||s==="radial"&&a==="radiusAxis"},tz=function(s,a,r,n){if(n)return s.map(function(d){return d.coordinate});var i,l,o=s.map(function(d){return d.coordinate===a&&(i=!0),d.coordinate===r&&(l=!0),d.coordinate});return i||o.push(a),l||o.push(r),o},Il=function(s,a,r){if(!s)return null;var n=s.scale,i=s.duplicateDomain,l=s.type,o=s.range,d=s.realScaleType==="scaleBand"?n.bandwidth()/2:2,u=(a||r)&&l==="category"&&n.bandwidth?n.bandwidth()/d:0;if(u=s.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Ii(o[0]-o[1])*2*u:u,a&&(s.ticks||s.niceTicks)){var h=(s.ticks||s.niceTicks).map(function(f){var x=i?i.indexOf(f):f;return{coordinate:n(x)+u,value:f,offset:u}});return h.filter(function(f){return!g0(f.coordinate)})}return s.isCategorical&&s.categoricalDomain?s.categoricalDomain.map(function(f,x){return{coordinate:n(f)+u,value:f,index:x,offset:u}}):n.ticks&&!r?n.ticks(s.tickCount).map(function(f){return{coordinate:n(f)+u,value:f,offset:u}}):n.domain().map(function(f,x){return{coordinate:n(f)+u,value:i?i[f]:f,index:x,offset:u}})},QS=new WeakMap,cp=function(s,a){if(typeof a!="function")return s;QS.has(s)||QS.set(s,new WeakMap);var r=QS.get(s);if(r.has(a))return r.get(a);var n=function(){s.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,n),n},P1e=function(s,a,r){var n=s.scale,i=s.type,l=s.layout,o=s.axisType;if(n==="auto")return l==="radial"&&o==="radiusAxis"?{scale:kf(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:hg(),realScaleType:"linear"}:i==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:Xm(),realScaleType:"point"}:i==="category"?{scale:kf(),realScaleType:"band"}:{scale:hg(),realScaleType:"linear"};if(ld(n)){var d="scale".concat(cb(n));return{scale:(ED[d]||Xm)(),realScaleType:ED[d]?d:"point"}}return is(n)?{scale:n}:{scale:Xm(),realScaleType:"point"}},$D=1e-4,D1e=function(s){var a=s.domain();if(!(!a||a.length<=2)){var r=a.length,n=s.range(),i=Math.min(n[0],n[1])-$D,l=Math.max(n[0],n[1])+$D,o=s(a[0]),d=s(a[r-1]);(o<i||o>l||d<i||d>l)&&s.domain([a[0],a[r-1]])}},M1e=function(s,a){if(!s)return null;for(var r=0,n=s.length;r<n;r++)if(s[r].item===a)return s[r].position;return null},L1e=function(s,a){if(!a||a.length!==2||!mt(a[0])||!mt(a[1]))return s;var r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),i=[s[0],s[1]];return(!mt(s[0])||s[0]<r)&&(i[0]=r),(!mt(s[1])||s[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},F1e=function(s){var a=s.length;if(!(a<=0))for(var r=0,n=s[0].length;r<n;++r)for(var i=0,l=0,o=0;o<a;++o){var d=g0(s[o][r][1])?s[o][r][0]:s[o][r][1];d>=0?(s[o][r][0]=i,s[o][r][1]=i+d,i=s[o][r][1]):(s[o][r][0]=l,s[o][r][1]=l+d,l=s[o][r][1])}},U1e=function(s){var a=s.length;if(!(a<=0))for(var r=0,n=s[0].length;r<n;++r)for(var i=0,l=0;l<a;++l){var o=g0(s[l][r][1])?s[l][r][0]:s[l][r][1];o>=0?(s[l][r][0]=i,s[l][r][1]=i+o,i=s[l][r][1]):(s[l][r][0]=0,s[l][r][1]=0)}},z1e={sign:F1e,expand:She,none:zu,silhouette:jhe,wiggle:Ahe,positive:U1e},B1e=function(s,a,r){var n=a.map(function(o){return o.props.dataKey}),i=z1e[r],l=whe().keys(n).value(function(o,d){return+Bn(o,d,0)}).order(c2).offset(i);return l(s)},$1e=function(s,a,r,n,i,l){if(!s)return null;var o=l?a.reverse():a,d={},u=o.reduce(function(f,x){var g,v=(g=x.type)!==null&&g!==void 0&&g.defaultProps?Ra(Ra({},x.type.defaultProps),x.props):x.props,b=v.stackId,y=v.hide;if(y)return f;var j=v[r],w=f[j]||{hasStack:!1,stackGroups:{}};if(lr(b)){var A=w.stackGroups[b]||{numericAxisId:r,cateAxisId:n,items:[]};A.items.push(x),w.hasStack=!0,w.stackGroups[b]=A}else w.stackGroups[gh("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[x]};return Ra(Ra({},f),{},Iu({},j,w))},d),h={};return Object.keys(u).reduce(function(f,x){var g=u[x];if(g.hasStack){var v={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(b,y){var j=g.stackGroups[y];return Ra(Ra({},b),{},Iu({},y,{numericAxisId:r,cateAxisId:n,items:j.items,stackedData:B1e(s,j.items,i)}))},v)}return Ra(Ra({},f),{},Iu({},x,g))},h)},q1e=function(s,a){var r=a.realScaleType,n=a.type,i=a.tickCount,l=a.originalDomain,o=a.allowDecimals,d=r||a.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&n==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var u=s.domain();if(!u.length)return null;var h=e1e(u,i,o);return s.domain([wb(h),Ro(h)]),{niceTicks:h}}if(i&&n==="number"){var f=s.domain(),x=t1e(f,i,o);return{niceTicks:x}}return null};function qD(e){var s=e.axis,a=e.ticks,r=e.bandSize,n=e.entry,i=e.index,l=e.dataKey;if(s.type==="category"){if(!s.allowDuplicatedCategory&&s.dataKey&&!Ss(n[s.dataKey])){var o=Qp(a,"value",n[s.dataKey]);if(o)return o.coordinate+r/2}return a[i]?a[i].coordinate+r/2:null}var d=Bn(n,Ss(l)?s.dataKey:l);return Ss(d)?null:s.scale(d)}var HD=function(s){var a=s.axis,r=s.ticks,n=s.offset,i=s.bandSize,l=s.entry,o=s.index;if(a.type==="category")return r[o]?r[o].coordinate+n:null;var d=Bn(l,a.dataKey,a.domain[o]);return Ss(d)?null:a.scale(d)-i/2+n},H1e=function(s){var a=s.numericAxis,r=a.scale.domain();if(a.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},V1e=function(s,a){var r,n=(r=s.type)!==null&&r!==void 0&&r.defaultProps?Ra(Ra({},s.type.defaultProps),s.props):s.props,i=n.stackId;if(lr(i)){var l=a[i];if(l){var o=l.items.indexOf(s);return o>=0?l.stackedData[o]:null}}return null},G1e=function(s){return s.reduce(function(a,r){return[wb(r.concat([a[0]]).filter(mt)),Ro(r.concat([a[1]]).filter(mt))]},[1/0,-1/0])},sz=function(s,a,r){return Object.keys(s).reduce(function(n,i){var l=s[i],o=l.stackedData,d=o.reduce(function(u,h){var f=G1e(h.slice(a,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]).map(function(n){return n===1/0||n===-1/0?0:n})},VD=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GD=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,P2=function(s,a,r){if(is(s))return s(a,r);if(!Array.isArray(s))return a;var n=[];if(mt(s[0]))n[0]=r?s[0]:Math.min(s[0],a[0]);else if(VD.test(s[0])){var i=+VD.exec(s[0])[1];n[0]=a[0]-i}else is(s[0])?n[0]=s[0](a[0]):n[0]=a[0];if(mt(s[1]))n[1]=r?s[1]:Math.max(s[1],a[1]);else if(GD.test(s[1])){var l=+GD.exec(s[1])[1];n[1]=a[1]+l}else is(s[1])?n[1]=s[1](a[1]):n[1]=a[1];return n},Ng=function(s,a,r){if(s&&s.scale&&s.scale.bandwidth){var n=s.scale.bandwidth();if(!r||n>0)return n}if(s&&a&&a.length>=2){for(var i=DE(a,function(f){return f.coordinate}),l=1/0,o=1,d=i.length;o<d;o++){var u=i[o],h=i[o-1];l=Math.min((u.coordinate||0)-(h.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0},WD=function(s,a,r){return!s||!s.length||Df(s,fi(r,"type.defaultProps.domain"))?a:s},az=function(s,a){var r=s.type.defaultProps?Ra(Ra({},s.type.defaultProps),s.props):s.props,n=r.dataKey,i=r.name,l=r.unit,o=r.formatter,d=r.tooltipType,u=r.chartType,h=r.hide;return Ra(Ra({},bs(s,!1)),{},{dataKey:n,unit:l,formatter:o,name:i||n,color:lC(s),value:Bn(a,n),type:d,payload:a,chartType:u,hide:h})};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},zf(e)}function QD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function KD(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?QD(Object(a),!0).forEach(function(r){W1e(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function W1e(e,s,a){return s=Q1e(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Q1e(e){var s=K1e(e,"string");return zf(s)=="symbol"?s:s+""}function K1e(e,s){if(zf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var wg=Math.PI/180,J1e=function(s){return s*180/Math.PI},Ir=function(s,a,r,n){return{x:s+Math.cos(-wg*n)*r,y:a+Math.sin(-wg*n)*r}},Y1e=function(s,a){var r=s.x,n=s.y,i=a.x,l=a.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(n-l,2))},X1e=function(s,a){var r=s.x,n=s.y,i=a.cx,l=a.cy,o=Y1e({x:r,y:n},{x:i,y:l});if(o<=0)return{radius:o};var d=(r-i)/o,u=Math.acos(d);return n>l&&(u=2*Math.PI-u),{radius:o,angle:J1e(u),angleInRadian:u}},Z1e=function(s){var a=s.startAngle,r=s.endAngle,n=Math.floor(a/360),i=Math.floor(r/360),l=Math.min(n,i);return{startAngle:a-l*360,endAngle:r-l*360}},eNe=function(s,a){var r=a.startAngle,n=a.endAngle,i=Math.floor(r/360),l=Math.floor(n/360),o=Math.min(i,l);return s+o*360},JD=function(s,a){var r=s.x,n=s.y,i=X1e({x:r,y:n},a),l=i.radius,o=i.angle,d=a.innerRadius,u=a.outerRadius;if(l<d||l>u)return!1;if(l===0)return!0;var h=Z1e(a),f=h.startAngle,x=h.endAngle,g=o,v;if(f<=x){for(;g>x;)g-=360;for(;g<f;)g+=360;v=g>=f&&g<=x}else{for(;g>f;)g-=360;for(;g<x;)g+=360;v=g>=x&&g<=f}return v?KD(KD({},a),{},{radius:l,angle:eNe(g,a)}):null};function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Bf(e)}var tNe=["offset"];function sNe(e){return iNe(e)||nNe(e)||rNe(e)||aNe()}function aNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rNe(e,s){if(e){if(typeof e=="string")return D2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D2(e,s)}}function nNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iNe(e){if(Array.isArray(e))return D2(e)}function D2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function lNe(e,s){if(e==null)return{};var a=oNe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oNe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function YD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function nr(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?YD(Object(a),!0).forEach(function(r){cNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):YD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function cNe(e,s,a){return s=dNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function dNe(e){var s=uNe(e,"string");return Bf(s)=="symbol"?s:s+""}function uNe(e,s){if(Bf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},$f.apply(this,arguments)}var mNe=function(s){var a=s.value,r=s.formatter,n=Ss(s.children)?a:s.children;return is(r)?r(n):n},fNe=function(s,a){var r=Ii(a-s),n=Math.min(Math.abs(a-s),360);return r*n},hNe=function(s,a,r){var n=s.position,i=s.viewBox,l=s.offset,o=s.className,d=i,u=d.cx,h=d.cy,f=d.innerRadius,x=d.outerRadius,g=d.startAngle,v=d.endAngle,b=d.clockWise,y=(f+x)/2,j=fNe(g,v),w=j>=0?1:-1,A,O;n==="insideStart"?(A=g+w*l,O=b):n==="insideEnd"?(A=v-w*l,O=!b):n==="end"&&(A=v+w*l,O=b),O=j<=0?O:!O;var C=Ir(u,h,y,A),E=Ir(u,h,y,A+(O?1:-1)*359),S="M".concat(C.x,",").concat(C.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(O?0:1,`,
    `).concat(E.x,",").concat(E.y),D=Ss(s.id)?gh("recharts-radial-line-"):s.id;return Oe.createElement("text",$f({},r,{dominantBaseline:"central",className:Es("recharts-radial-bar-label",o)}),Oe.createElement("defs",null,Oe.createElement("path",{id:D,d:S})),Oe.createElement("textPath",{xlinkHref:"#".concat(D)},a))},xNe=function(s){var a=s.viewBox,r=s.offset,n=s.position,i=a,l=i.cx,o=i.cy,d=i.innerRadius,u=i.outerRadius,h=i.startAngle,f=i.endAngle,x=(h+f)/2;if(n==="outside"){var g=Ir(l,o,u+r,x),v=g.x,b=g.y;return{x:v,y:b,textAnchor:v>=l?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(d+u)/2,j=Ir(l,o,y,x),w=j.x,A=j.y;return{x:w,y:A,textAnchor:"middle",verticalAnchor:"middle"}},pNe=function(s){var a=s.viewBox,r=s.parentViewBox,n=s.offset,i=s.position,l=a,o=l.x,d=l.y,u=l.width,h=l.height,f=h>=0?1:-1,x=f*n,g=f>0?"end":"start",v=f>0?"start":"end",b=u>=0?1:-1,y=b*n,j=b>0?"end":"start",w=b>0?"start":"end";if(i==="top"){var A={x:o+u/2,y:d-f*n,textAnchor:"middle",verticalAnchor:g};return nr(nr({},A),r?{height:Math.max(d-r.y,0),width:u}:{})}if(i==="bottom"){var O={x:o+u/2,y:d+h+x,textAnchor:"middle",verticalAnchor:v};return nr(nr({},O),r?{height:Math.max(r.y+r.height-(d+h),0),width:u}:{})}if(i==="left"){var C={x:o-y,y:d+h/2,textAnchor:j,verticalAnchor:"middle"};return nr(nr({},C),r?{width:Math.max(C.x-r.x,0),height:h}:{})}if(i==="right"){var E={x:o+u+y,y:d+h/2,textAnchor:w,verticalAnchor:"middle"};return nr(nr({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:h}:{})}var S=r?{width:u,height:h}:{};return i==="insideLeft"?nr({x:o+y,y:d+h/2,textAnchor:w,verticalAnchor:"middle"},S):i==="insideRight"?nr({x:o+u-y,y:d+h/2,textAnchor:j,verticalAnchor:"middle"},S):i==="insideTop"?nr({x:o+u/2,y:d+x,textAnchor:"middle",verticalAnchor:v},S):i==="insideBottom"?nr({x:o+u/2,y:d+h-x,textAnchor:"middle",verticalAnchor:g},S):i==="insideTopLeft"?nr({x:o+y,y:d+x,textAnchor:w,verticalAnchor:v},S):i==="insideTopRight"?nr({x:o+u-y,y:d+x,textAnchor:j,verticalAnchor:v},S):i==="insideBottomLeft"?nr({x:o+y,y:d+h-x,textAnchor:w,verticalAnchor:g},S):i==="insideBottomRight"?nr({x:o+u-y,y:d+h-x,textAnchor:j,verticalAnchor:g},S):p0(i)&&(mt(i.x)||Dc(i.x))&&(mt(i.y)||Dc(i.y))?nr({x:o+od(i.x,u),y:d+od(i.y,h),textAnchor:"end",verticalAnchor:"end"},S):nr({x:o+u/2,y:d+h/2,textAnchor:"middle",verticalAnchor:"middle"},S)},gNe=function(s){return"cx"in s&&mt(s.cx)};function qr(e){var s=e.offset,a=s===void 0?5:s,r=lNe(e,tNe),n=nr({offset:a},r),i=n.viewBox,l=n.position,o=n.value,d=n.children,u=n.content,h=n.className,f=h===void 0?"":h,x=n.textBreakAll;if(!i||Ss(o)&&Ss(d)&&!T.isValidElement(u)&&!is(u))return null;if(T.isValidElement(u))return T.cloneElement(u,n);var g;if(is(u)){if(g=T.createElement(u,n),T.isValidElement(g))return g}else g=mNe(n);var v=gNe(i),b=bs(n,!0);if(v&&(l==="insideStart"||l==="insideEnd"||l==="end"))return hNe(n,g,b);var y=v?xNe(n):pNe(n);return Oe.createElement(lg,$f({className:Es("recharts-label",f)},b,y,{breakAll:x}),g)}qr.displayName="Label";var rz=function(s){var a=s.cx,r=s.cy,n=s.angle,i=s.startAngle,l=s.endAngle,o=s.r,d=s.radius,u=s.innerRadius,h=s.outerRadius,f=s.x,x=s.y,g=s.top,v=s.left,b=s.width,y=s.height,j=s.clockWise,w=s.labelViewBox;if(w)return w;if(mt(b)&&mt(y)){if(mt(f)&&mt(x))return{x:f,y:x,width:b,height:y};if(mt(g)&&mt(v))return{x:g,y:v,width:b,height:y}}return mt(f)&&mt(x)?{x:f,y:x,width:0,height:0}:mt(a)&&mt(r)?{cx:a,cy:r,startAngle:i||n||0,endAngle:l||n||0,innerRadius:u||0,outerRadius:h||d||o||0,clockWise:j}:s.viewBox?s.viewBox:{}},bNe=function(s,a){return s?s===!0?Oe.createElement(qr,{key:"label-implicit",viewBox:a}):lr(s)?Oe.createElement(qr,{key:"label-implicit",viewBox:a,value:s}):T.isValidElement(s)?s.type===qr?T.cloneElement(s,{key:"label-implicit",viewBox:a}):Oe.createElement(qr,{key:"label-implicit",content:s,viewBox:a}):is(s)?Oe.createElement(qr,{key:"label-implicit",content:s,viewBox:a}):p0(s)?Oe.createElement(qr,$f({viewBox:a},s,{key:"label-implicit"})):null:null},vNe=function(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!s||!s.children&&r&&!s.label)return null;var n=s.children,i=rz(s),l=Di(n,qr).map(function(d,u){return T.cloneElement(d,{viewBox:a||i,key:"label-".concat(u)})});if(!r)return l;var o=bNe(s.label,a||i);return[o].concat(sNe(l))};qr.parseViewBox=rz;qr.renderCallByParent=vNe;var KS,XD;function yNe(){if(XD)return KS;XD=1;function e(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}return KS=e,KS}var NNe=yNe();const wNe=ea(NNe);function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},qf(e)}var SNe=["valueAccessor"],jNe=["data","dataKey","clockWise","id","textBreakAll"];function ANe(e){return _Ne(e)||TNe(e)||CNe(e)||ENe()}function ENe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CNe(e,s){if(e){if(typeof e=="string")return M2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return M2(e,s)}}function TNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Ne(e){if(Array.isArray(e))return M2(e)}function M2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Sg.apply(this,arguments)}function ZD(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function e6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ZD(Object(a),!0).forEach(function(r){kNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZD(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function kNe(e,s,a){return s=ONe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function ONe(e){var s=INe(e,"string");return qf(s)=="symbol"?s:s+""}function INe(e,s){if(qf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function t6(e,s){if(e==null)return{};var a=RNe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RNe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var PNe=function(s){return Array.isArray(s.value)?wNe(s.value):s.value};function zo(e){var s=e.valueAccessor,a=s===void 0?PNe:s,r=t6(e,SNe),n=r.data,i=r.dataKey,l=r.clockWise,o=r.id,d=r.textBreakAll,u=t6(r,jNe);return!n||!n.length?null:Oe.createElement(Ca,{className:"recharts-label-list"},n.map(function(h,f){var x=Ss(i)?a(h,f):Bn(h&&h.payload,i),g=Ss(o)?{}:{id:"".concat(o,"-").concat(f)};return Oe.createElement(qr,Sg({},bs(h,!0),u,g,{parentViewBox:h.parentViewBox,value:x,textBreakAll:d,viewBox:qr.parseViewBox(Ss(l)?h:e6(e6({},h),{},{clockWise:l})),key:"label-".concat(f),index:f}))}))}zo.displayName="LabelList";function DNe(e,s){return e?e===!0?Oe.createElement(zo,{key:"labelList-implicit",data:s}):Oe.isValidElement(e)||is(e)?Oe.createElement(zo,{key:"labelList-implicit",data:s,content:e}):p0(e)?Oe.createElement(zo,Sg({data:s},e,{key:"labelList-implicit"})):null:null}function MNe(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&a&&!e.label)return null;var r=e.children,n=Di(r,zo).map(function(l,o){return T.cloneElement(l,{data:s,key:"labelList-".concat(o)})});if(!a)return n;var i=DNe(e.label,s);return[i].concat(ANe(n))}zo.renderCallByParent=MNe;function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Hf(e)}function L2(){return L2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},L2.apply(this,arguments)}function s6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function a6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?s6(Object(a),!0).forEach(function(r){LNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function LNe(e,s,a){return s=FNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function FNe(e){var s=UNe(e,"string");return Hf(s)=="symbol"?s:s+""}function UNe(e,s){if(Hf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var zNe=function(s,a){var r=Ii(a-s),n=Math.min(Math.abs(a-s),359.999);return r*n},dp=function(s){var a=s.cx,r=s.cy,n=s.radius,i=s.angle,l=s.sign,o=s.isExternal,d=s.cornerRadius,u=s.cornerIsExternal,h=d*(o?1:-1)+n,f=Math.asin(d/h)/wg,x=u?i:i+l*f,g=Ir(a,r,h,x),v=Ir(a,r,n,x),b=u?i-l*f:i,y=Ir(a,r,h*Math.cos(f*wg),b);return{center:g,circleTangency:v,lineTangency:y,theta:f}},nz=function(s){var a=s.cx,r=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.startAngle,o=s.endAngle,d=zNe(l,o),u=l+d,h=Ir(a,r,i,l),f=Ir(a,r,i,u),x="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(l>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var g=Ir(a,r,n,l),v=Ir(a,r,n,u);x+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(l<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else x+="L ".concat(a,",").concat(r," Z");return x},BNe=function(s){var a=s.cx,r=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.cornerRadius,o=s.forceCornerRadius,d=s.cornerIsExternal,u=s.startAngle,h=s.endAngle,f=Ii(h-u),x=dp({cx:a,cy:r,radius:i,angle:u,sign:f,cornerRadius:l,cornerIsExternal:d}),g=x.circleTangency,v=x.lineTangency,b=x.theta,y=dp({cx:a,cy:r,radius:i,angle:h,sign:-f,cornerRadius:l,cornerIsExternal:d}),j=y.circleTangency,w=y.lineTangency,A=y.theta,O=d?Math.abs(u-h):Math.abs(u-h)-b-A;if(O<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):nz({cx:a,cy:r,innerRadius:n,outerRadius:i,startAngle:u,endAngle:h});var C="M ".concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(O>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var E=dp({cx:a,cy:r,radius:n,angle:u,sign:f,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),S=E.circleTangency,D=E.lineTangency,M=E.theta,U=dp({cx:a,cy:r,radius:n,angle:h,sign:-f,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),I=U.circleTangency,k=U.lineTangency,z=U.theta,_=d?Math.abs(u-h):Math.abs(u-h)-M-z;if(_<0&&l===0)return"".concat(C,"L").concat(a,",").concat(r,"Z");C+="L".concat(k.x,",").concat(k.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(_>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,"Z")}else C+="L".concat(a,",").concat(r,"Z");return C},$Ne={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},iz=function(s){var a=a6(a6({},$Ne),s),r=a.cx,n=a.cy,i=a.innerRadius,l=a.outerRadius,o=a.cornerRadius,d=a.forceCornerRadius,u=a.cornerIsExternal,h=a.startAngle,f=a.endAngle,x=a.className;if(l<i||h===f)return null;var g=Es("recharts-sector",x),v=l-i,b=od(o,v,0,!0),y;return b>0&&Math.abs(h-f)<360?y=BNe({cx:r,cy:n,innerRadius:i,outerRadius:l,cornerRadius:Math.min(b,v/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:h,endAngle:f}):y=nz({cx:r,cy:n,innerRadius:i,outerRadius:l,startAngle:h,endAngle:f}),Oe.createElement("path",L2({},bs(a,!0),{className:g,d:y,role:"img"}))};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Vf(e)}function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F2.apply(this,arguments)}function r6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function n6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?r6(Object(a),!0).forEach(function(r){qNe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function qNe(e,s,a){return s=HNe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function HNe(e){var s=VNe(e,"string");return Vf(s)=="symbol"?s:s+""}function VNe(e,s){if(Vf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var i6={curveBasisClosed:uhe,curveBasisOpen:mhe,curveBasis:dhe,curveBumpX:Jfe,curveBumpY:Yfe,curveLinearClosed:fhe,curveLinear:ub,curveMonotoneX:hhe,curveMonotoneY:xhe,curveNatural:phe,curveStep:ghe,curveStepAfter:vhe,curveStepBefore:bhe},up=function(s){return s.x===+s.x&&s.y===+s.y},Em=function(s){return s.x},Cm=function(s){return s.y},GNe=function(s,a){if(is(s))return s;var r="curve".concat(cb(s));return(r==="curveMonotone"||r==="curveBump")&&a?i6["".concat(r).concat(a==="vertical"?"Y":"X")]:i6[r]||ub},WNe=function(s){var a=s.type,r=a===void 0?"linear":a,n=s.points,i=n===void 0?[]:n,l=s.baseLine,o=s.layout,d=s.connectNulls,u=d===void 0?!1:d,h=GNe(r,o),f=u?i.filter(function(b){return up(b)}):i,x;if(Array.isArray(l)){var g=u?l.filter(function(b){return up(b)}):l,v=f.map(function(b,y){return n6(n6({},b),{},{base:g[y]})});return o==="vertical"?x=sp().y(Cm).x1(Em).x0(function(b){return b.base.x}):x=sp().x(Em).y1(Cm).y0(function(b){return b.base.y}),x.defined(up).curve(h),x(v)}return o==="vertical"&&mt(l)?x=sp().y(Cm).x1(Em).x0(l):mt(l)?x=sp().x(Em).y1(Cm).y0(l):x=d7().x(Em).y(Cm),x.defined(up).curve(h),x(f)},ef=function(s){var a=s.className,r=s.points,n=s.path,i=s.pathRef;if((!r||!r.length)&&!n)return null;var l=r&&r.length?WNe(s):n;return T.createElement("path",F2({},bs(s,!1),Kp(s),{className:Es("recharts-curve",a),d:l,ref:i}))},JS={exports:{}},YS,l6;function QNe(){if(l6)return YS;l6=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return YS=e,YS}var XS,o6;function KNe(){if(o6)return XS;o6=1;var e=QNe();function s(){}function a(){}return a.resetWarningCache=s,XS=function(){function r(l,o,d,u,h,f){if(f!==e){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}r.isRequired=r;function n(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:a,resetWarningCache:s};return i.PropTypes=i,i},XS}var c6;function JNe(){return c6||(c6=1,JS.exports=KNe()()),JS.exports}var YNe=JNe();const Vs=ea(YNe);var XNe=Object.getOwnPropertyNames,ZNe=Object.getOwnPropertySymbols,ewe=Object.prototype.hasOwnProperty;function d6(e,s){return function(r,n,i){return e(r,n,i)&&s(r,n,i)}}function mp(e){return function(a,r,n){if(!a||!r||typeof a!="object"||typeof r!="object")return e(a,r,n);var i=n.cache,l=i.get(a),o=i.get(r);if(l&&o)return l===r&&o===a;i.set(a,r),i.set(r,a);var d=e(a,r,n);return i.delete(a),i.delete(r),d}}function twe(e){return e!=null?e[Symbol.toStringTag]:void 0}function u6(e){return XNe(e).concat(ZNe(e))}var swe=Object.hasOwn||(function(e,s){return ewe.call(e,s)});function Nd(e,s){return e===s||!e&&!s&&e!==e&&s!==s}var awe="__v",rwe="__o",nwe="_owner",m6=Object.getOwnPropertyDescriptor,f6=Object.keys;function iwe(e,s,a){var r=e.length;if(s.length!==r)return!1;for(;r-- >0;)if(!a.equals(e[r],s[r],r,r,e,s,a))return!1;return!0}function lwe(e,s){return Nd(e.getTime(),s.getTime())}function owe(e,s){return e.name===s.name&&e.message===s.message&&e.cause===s.cause&&e.stack===s.stack}function cwe(e,s){return e===s}function h6(e,s,a){var r=e.size;if(r!==s.size)return!1;if(!r)return!0;for(var n=new Array(r),i=e.entries(),l,o,d=0;(l=i.next())&&!l.done;){for(var u=s.entries(),h=!1,f=0;(o=u.next())&&!o.done;){if(n[f]){f++;continue}var x=l.value,g=o.value;if(a.equals(x[0],g[0],d,f,e,s,a)&&a.equals(x[1],g[1],x[0],g[0],e,s,a)){h=n[f]=!0;break}f++}if(!h)return!1;d++}return!0}var dwe=Nd;function uwe(e,s,a){var r=f6(e),n=r.length;if(f6(s).length!==n)return!1;for(;n-- >0;)if(!lz(e,s,a,r[n]))return!1;return!0}function Tm(e,s,a){var r=u6(e),n=r.length;if(u6(s).length!==n)return!1;for(var i,l,o;n-- >0;)if(i=r[n],!lz(e,s,a,i)||(l=m6(e,i),o=m6(s,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function mwe(e,s){return Nd(e.valueOf(),s.valueOf())}function fwe(e,s){return e.source===s.source&&e.flags===s.flags}function x6(e,s,a){var r=e.size;if(r!==s.size)return!1;if(!r)return!0;for(var n=new Array(r),i=e.values(),l,o;(l=i.next())&&!l.done;){for(var d=s.values(),u=!1,h=0;(o=d.next())&&!o.done;){if(!n[h]&&a.equals(l.value,o.value,l.value,o.value,e,s,a)){u=n[h]=!0;break}h++}if(!u)return!1}return!0}function hwe(e,s){var a=e.length;if(s.length!==a)return!1;for(;a-- >0;)if(e[a]!==s[a])return!1;return!0}function xwe(e,s){return e.hostname===s.hostname&&e.pathname===s.pathname&&e.protocol===s.protocol&&e.port===s.port&&e.hash===s.hash&&e.username===s.username&&e.password===s.password}function lz(e,s,a,r){return(r===nwe||r===rwe||r===awe)&&(e.$$typeof||s.$$typeof)?!0:swe(s,r)&&a.equals(e[r],s[r],r,r,e,s,a)}var pwe="[object Arguments]",gwe="[object Boolean]",bwe="[object Date]",vwe="[object Error]",ywe="[object Map]",Nwe="[object Number]",wwe="[object Object]",Swe="[object RegExp]",jwe="[object Set]",Awe="[object String]",Ewe="[object URL]",Cwe=Array.isArray,p6=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,g6=Object.assign,Twe=Object.prototype.toString.call.bind(Object.prototype.toString);function _we(e){var s=e.areArraysEqual,a=e.areDatesEqual,r=e.areErrorsEqual,n=e.areFunctionsEqual,i=e.areMapsEqual,l=e.areNumbersEqual,o=e.areObjectsEqual,d=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,h=e.areSetsEqual,f=e.areTypedArraysEqual,x=e.areUrlsEqual,g=e.unknownTagComparators;return function(b,y,j){if(b===y)return!0;if(b==null||y==null)return!1;var w=typeof b;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?l(b,y,j):w==="function"?n(b,y,j):!1;var A=b.constructor;if(A!==y.constructor)return!1;if(A===Object)return o(b,y,j);if(Cwe(b))return s(b,y,j);if(p6!=null&&p6(b))return f(b,y,j);if(A===Date)return a(b,y,j);if(A===RegExp)return u(b,y,j);if(A===Map)return i(b,y,j);if(A===Set)return h(b,y,j);var O=Twe(b);if(O===bwe)return a(b,y,j);if(O===Swe)return u(b,y,j);if(O===ywe)return i(b,y,j);if(O===jwe)return h(b,y,j);if(O===wwe)return typeof b.then!="function"&&typeof y.then!="function"&&o(b,y,j);if(O===Ewe)return x(b,y,j);if(O===vwe)return r(b,y,j);if(O===pwe)return o(b,y,j);if(O===gwe||O===Nwe||O===Awe)return d(b,y,j);if(g){var C=g[O];if(!C){var E=twe(b);E&&(C=g[E])}if(C)return C(b,y,j)}return!1}}function kwe(e){var s=e.circular,a=e.createCustomConfig,r=e.strict,n={areArraysEqual:r?Tm:iwe,areDatesEqual:lwe,areErrorsEqual:owe,areFunctionsEqual:cwe,areMapsEqual:r?d6(h6,Tm):h6,areNumbersEqual:dwe,areObjectsEqual:r?Tm:uwe,arePrimitiveWrappersEqual:mwe,areRegExpsEqual:fwe,areSetsEqual:r?d6(x6,Tm):x6,areTypedArraysEqual:r?Tm:hwe,areUrlsEqual:xwe,unknownTagComparators:void 0};if(a&&(n=g6({},n,a(n))),s){var i=mp(n.areArraysEqual),l=mp(n.areMapsEqual),o=mp(n.areObjectsEqual),d=mp(n.areSetsEqual);n=g6({},n,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:d})}return n}function Owe(e){return function(s,a,r,n,i,l,o){return e(s,a,o)}}function Iwe(e){var s=e.circular,a=e.comparator,r=e.createState,n=e.equals,i=e.strict;if(r)return function(d,u){var h=r(),f=h.cache,x=f===void 0?s?new WeakMap:void 0:f,g=h.meta;return a(d,u,{cache:x,equals:n,meta:g,strict:i})};if(s)return function(d,u){return a(d,u,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};var l={cache:void 0,equals:n,meta:void 0,strict:i};return function(d,u){return a(d,u,l)}}var Rwe=lc();lc({strict:!0});lc({circular:!0});lc({circular:!0,strict:!0});lc({createInternalComparator:function(){return Nd}});lc({strict:!0,createInternalComparator:function(){return Nd}});lc({circular:!0,createInternalComparator:function(){return Nd}});lc({circular:!0,createInternalComparator:function(){return Nd},strict:!0});function lc(e){e===void 0&&(e={});var s=e.circular,a=s===void 0?!1:s,r=e.createInternalComparator,n=e.createState,i=e.strict,l=i===void 0?!1:i,o=kwe(e),d=_we(o),u=r?r(d):Owe(d);return Iwe({circular:a,comparator:d,createState:n,equals:u,strict:l})}function Pwe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function b6(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function n(i){a<0&&(a=i),i-a>s?(e(i),a=-1):Pwe(n)};requestAnimationFrame(r)}function U2(e){"@babel/helpers - typeof";return U2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},U2(e)}function Dwe(e){return Uwe(e)||Fwe(e)||Lwe(e)||Mwe()}function Mwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lwe(e,s){if(e){if(typeof e=="string")return v6(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v6(e,s)}}function v6(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function Fwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uwe(e){if(Array.isArray(e))return e}function zwe(){var e={},s=function(){return null},a=!1,r=function n(i){if(!a){if(Array.isArray(i)){if(!i.length)return;var l=i,o=Dwe(l),d=o[0],u=o.slice(1);if(typeof d=="number"){b6(n.bind(null,u),d);return}n(d),b6(n.bind(null,u));return}U2(i)==="object"&&(e=i,s(e)),typeof i=="function"&&i()}};return{stop:function(){a=!0},start:function(i){a=!1,r(i)},subscribe:function(i){return s=i,function(){s=function(){return null}}}}}function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gf(e)}function y6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function N6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?y6(Object(a),!0).forEach(function(r){oz(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function oz(e,s,a){return s=Bwe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Bwe(e){var s=$we(e,"string");return Gf(s)==="symbol"?s:String(s)}function $we(e,s){if(Gf(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Gf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var qwe=function(s,a){return[Object.keys(s),Object.keys(a)].reduce(function(r,n){return r.filter(function(i){return n.includes(i)})})},Hwe=function(s){return s},Vwe=function(s){return s.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},tf=function(s,a){return Object.keys(a).reduce(function(r,n){return N6(N6({},r),{},oz({},n,s(n,a[n])))},{})},w6=function(s,a,r){return s.map(function(n){return"".concat(Vwe(n)," ").concat(a,"ms ").concat(r)}).join(",")};function Gwe(e,s){return Kwe(e)||Qwe(e,s)||cz(e,s)||Wwe()}function Wwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qwe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function Kwe(e){if(Array.isArray(e))return e}function Jwe(e){return Zwe(e)||Xwe(e)||cz(e)||Ywe()}function Ywe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cz(e,s){if(e){if(typeof e=="string")return z2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return z2(e,s)}}function Xwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zwe(e){if(Array.isArray(e))return z2(e)}function z2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}var jg=1e-4,dz=function(s,a){return[0,3*s,3*a-6*s,3*s-3*a+1]},uz=function(s,a){return s.map(function(r,n){return r*Math.pow(a,n)}).reduce(function(r,n){return r+n})},S6=function(s,a){return function(r){var n=dz(s,a);return uz(n,r)}},eSe=function(s,a){return function(r){var n=dz(s,a),i=[].concat(Jwe(n.map(function(l,o){return l*o}).slice(1)),[0]);return uz(i,r)}},j6=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];var n=a[0],i=a[1],l=a[2],o=a[3];if(a.length===1)switch(a[0]){case"linear":n=0,i=0,l=1,o=1;break;case"ease":n=.25,i=.1,l=.25,o=1;break;case"ease-in":n=.42,i=0,l=1,o=1;break;case"ease-out":n=.42,i=0,l=.58,o=1;break;case"ease-in-out":n=0,i=0,l=.58,o=1;break;default:{var d=a[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var u=d[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),h=Gwe(u,4);n=h[0],i=h[1],l=h[2],o=h[3]}}}var f=S6(n,l),x=S6(i,o),g=eSe(n,l),v=function(j){return j>1?1:j<0?0:j},b=function(j){for(var w=j>1?1:j,A=w,O=0;O<8;++O){var C=f(A)-w,E=g(A);if(Math.abs(C-w)<jg||E<jg)return x(A);A=v(A-C/E)}return x(A)};return b.isStepper=!1,b},tSe=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=s.stiff,r=a===void 0?100:a,n=s.damping,i=n===void 0?8:n,l=s.dt,o=l===void 0?17:l,d=function(h,f,x){var g=-(h-f)*r,v=x*i,b=x+(g-v)*o/1e3,y=x*o/1e3+h;return Math.abs(y-f)<jg&&Math.abs(b)<jg?[f,0]:[y,b]};return d.isStepper=!0,d.dt=o,d},sSe=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];var n=a[0];if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return j6(n);case"spring":return tSe();default:if(n.split("(")[0]==="cubic-bezier")return j6(n)}return typeof n=="function"?n:null};function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wf(e)}function A6(e){return nSe(e)||rSe(e)||mz(e)||aSe()}function aSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nSe(e){if(Array.isArray(e))return $2(e)}function E6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Cr(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?E6(Object(a),!0).forEach(function(r){B2(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function B2(e,s,a){return s=iSe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function iSe(e){var s=lSe(e,"string");return Wf(s)==="symbol"?s:String(s)}function lSe(e,s){if(Wf(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Wf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function oSe(e,s){return uSe(e)||dSe(e,s)||mz(e,s)||cSe()}function cSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mz(e,s){if(e){if(typeof e=="string")return $2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $2(e,s)}}function $2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function dSe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function uSe(e){if(Array.isArray(e))return e}var Ag=function(s,a,r){return s+(a-s)*r},q2=function(s){var a=s.from,r=s.to;return a!==r},mSe=function e(s,a,r){var n=tf(function(i,l){if(q2(l)){var o=s(l.from,l.to,l.velocity),d=oSe(o,2),u=d[0],h=d[1];return Cr(Cr({},l),{},{from:u,velocity:h})}return l},a);return r<1?tf(function(i,l){return q2(l)?Cr(Cr({},l),{},{velocity:Ag(l.velocity,n[i].velocity,r),from:Ag(l.from,n[i].from,r)}):l},a):e(s,n,r-1)};const fSe=(function(e,s,a,r,n){var i=qwe(e,s),l=i.reduce(function(y,j){return Cr(Cr({},y),{},B2({},j,[e[j],s[j]]))},{}),o=i.reduce(function(y,j){return Cr(Cr({},y),{},B2({},j,{from:e[j],velocity:0,to:s[j]}))},{}),d=-1,u,h,f=function(){return null},x=function(){return tf(function(j,w){return w.from},o)},g=function(){return!Object.values(o).filter(q2).length},v=function(j){u||(u=j);var w=j-u,A=w/a.dt;o=mSe(a,o,A),n(Cr(Cr(Cr({},e),s),x())),u=j,g()||(d=requestAnimationFrame(f))},b=function(j){h||(h=j);var w=(j-h)/r,A=tf(function(C,E){return Ag.apply(void 0,A6(E).concat([a(w)]))},l);if(n(Cr(Cr(Cr({},e),s),A)),w<1)d=requestAnimationFrame(f);else{var O=tf(function(C,E){return Ag.apply(void 0,A6(E).concat([a(1)]))},l);n(Cr(Cr(Cr({},e),s),O))}};return f=a.isStepper?v:b,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(d)}}});function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ku(e)}var hSe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function xSe(e,s){if(e==null)return{};var a=pSe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pSe(e,s){if(e==null)return{};var a={},r=Object.keys(e),n,i;for(i=0;i<r.length;i++)n=r[i],!(s.indexOf(n)>=0)&&(a[n]=e[n]);return a}function ZS(e){return ySe(e)||vSe(e)||bSe(e)||gSe()}function gSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bSe(e,s){if(e){if(typeof e=="string")return H2(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H2(e,s)}}function vSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ySe(e){if(Array.isArray(e))return H2(e)}function H2(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function C6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ei(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?C6(Object(a),!0).forEach(function(r){Lm(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Lm(e,s,a){return s=fz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function NSe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function wSe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fz(r.key),r)}}function SSe(e,s,a){return s&&wSe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function fz(e){var s=jSe(e,"string");return Ku(s)==="symbol"?s:String(s)}function jSe(e,s){if(Ku(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Ku(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function ASe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&V2(e,s)}function V2(e,s){return V2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},V2(e,s)}function ESe(e){var s=CSe();return function(){var r=Eg(e),n;if(s){var i=Eg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return G2(this,n)}}function G2(e,s){if(s&&(Ku(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W2(e)}function W2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CSe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Eg(e){return Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Eg(e)}var Vl=(function(e){ASe(a,e);var s=ESe(a);function a(r,n){var i;NSe(this,a),i=s.call(this,r,n);var l=i.props,o=l.isActive,d=l.attributeName,u=l.from,h=l.to,f=l.steps,x=l.children,g=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(W2(i)),i.changeStyle=i.changeStyle.bind(W2(i)),!o||g<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:h}),G2(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof x=="function")return i.state={style:u},G2(i);i.state={style:d?Lm({},d,u):u}}else i.state={style:{}};return i}return SSe(a,[{key:"componentDidMount",value:function(){var n=this.props,i=n.isActive,l=n.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(n){var i=this.props,l=i.isActive,o=i.canBegin,d=i.attributeName,u=i.shouldReAnimate,h=i.to,f=i.from,x=this.state.style;if(o){if(!l){var g={style:d?Lm({},d,h):h};this.state&&x&&(d&&x[d]!==h||!d&&x!==h)&&this.setState(g);return}if(!(Rwe(n.to,h)&&n.canBegin&&n.isActive)){var v=!n.canBegin||!n.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=v||u?f:n.to;if(this.state&&x){var y={style:d?Lm({},d,b):b};(d&&x[d]!==b||!d&&x!==b)&&this.setState(y)}this.runAnimation(Ei(Ei({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var n=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),n&&n()}},{key:"handleStyleChange",value:function(n){this.changeStyle(n)}},{key:"changeStyle",value:function(n){this.mounted&&this.setState({style:n})}},{key:"runJSAnimation",value:function(n){var i=this,l=n.from,o=n.to,d=n.duration,u=n.easing,h=n.begin,f=n.onAnimationEnd,x=n.onAnimationStart,g=fSe(l,o,sSe(u),d,this.changeStyle),v=function(){i.stopJSAnimation=g()};this.manager.start([x,h,v,d,f])}},{key:"runStepAnimation",value:function(n){var i=this,l=n.steps,o=n.begin,d=n.onAnimationStart,u=l[0],h=u.style,f=u.duration,x=f===void 0?0:f,g=function(b,y,j){if(j===0)return b;var w=y.duration,A=y.easing,O=A===void 0?"ease":A,C=y.style,E=y.properties,S=y.onAnimationEnd,D=j>0?l[j-1]:y,M=E||Object.keys(C);if(typeof O=="function"||O==="spring")return[].concat(ZS(b),[i.runJSAnimation.bind(i,{from:D.style,to:C,duration:w,easing:O}),w]);var U=w6(M,w,O),I=Ei(Ei(Ei({},D.style),C),{},{transition:U});return[].concat(ZS(b),[I,w,S]).filter(Hwe)};return this.manager.start([d].concat(ZS(l.reduce(g,[h,Math.max(x,o)])),[n.onAnimationEnd]))}},{key:"runAnimation",value:function(n){this.manager||(this.manager=zwe());var i=n.begin,l=n.duration,o=n.attributeName,d=n.to,u=n.easing,h=n.onAnimationStart,f=n.onAnimationEnd,x=n.steps,g=n.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(n);return}if(x.length>1){this.runStepAnimation(n);return}var b=o?Lm({},o,d):d,y=w6(Object.keys(b),l,u);v.start([h,i,Ei(Ei({},b),{},{transition:y}),l,f])}},{key:"render",value:function(){var n=this.props,i=n.children;n.begin;var l=n.duration;n.attributeName,n.easing;var o=n.isActive;n.steps,n.from,n.to,n.canBegin,n.onAnimationEnd,n.shouldReAnimate,n.onAnimationReStart;var d=xSe(n,hSe),u=T.Children.count(i),h=this.state.style;if(typeof i=="function")return i(h);if(!o||u===0||l<=0)return i;var f=function(g){var v=g.props,b=v.style,y=b===void 0?{}:b,j=v.className,w=T.cloneElement(g,Ei(Ei({},d),{},{style:Ei(Ei({},y),h),className:j}));return w};return u===1?f(T.Children.only(i)):Oe.createElement("div",null,T.Children.map(i,function(x){return f(x)}))}}]),a})(T.PureComponent);Vl.displayName="Animate";Vl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Vl.propTypes={from:Vs.oneOfType([Vs.object,Vs.string]),to:Vs.oneOfType([Vs.object,Vs.string]),attributeName:Vs.string,duration:Vs.number,begin:Vs.number,easing:Vs.oneOfType([Vs.string,Vs.func]),steps:Vs.arrayOf(Vs.shape({duration:Vs.number.isRequired,style:Vs.object.isRequired,easing:Vs.oneOfType([Vs.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Vs.func]),properties:Vs.arrayOf("string"),onAnimationEnd:Vs.func})),children:Vs.oneOfType([Vs.node,Vs.func]),isActive:Vs.bool,canBegin:Vs.bool,onAnimationEnd:Vs.func,shouldReAnimate:Vs.bool,onAnimationStart:Vs.func,onAnimationReStart:Vs.func};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qf(e)}function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Cg.apply(this,arguments)}function TSe(e,s){return ISe(e)||OSe(e,s)||kSe(e,s)||_Se()}function _Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kSe(e,s){if(e){if(typeof e=="string")return T6(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return T6(e,s)}}function T6(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function OSe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function ISe(e){if(Array.isArray(e))return e}function _6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function k6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?_6(Object(a),!0).forEach(function(r){RSe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function RSe(e,s,a){return s=PSe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function PSe(e){var s=DSe(e,"string");return Qf(s)=="symbol"?s:s+""}function DSe(e,s){if(Qf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var O6=function(s,a,r,n,i){var l=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,d=r>=0?1:-1,u=n>=0&&r>=0||n<0&&r<0?1:0,h;if(l>0&&i instanceof Array){for(var f=[0,0,0,0],x=0,g=4;x<g;x++)f[x]=i[x]>l?l:i[x];h="M".concat(s,",").concat(a+o*f[0]),f[0]>0&&(h+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(s+d*f[0],",").concat(a)),h+="L ".concat(s+r-d*f[1],",").concat(a),f[1]>0&&(h+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(s+r,",").concat(a+o*f[1])),h+="L ".concat(s+r,",").concat(a+n-o*f[2]),f[2]>0&&(h+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(s+r-d*f[2],",").concat(a+n)),h+="L ".concat(s+d*f[3],",").concat(a+n),f[3]>0&&(h+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(s,",").concat(a+n-o*f[3])),h+="Z"}else if(l>0&&i===+i&&i>0){var v=Math.min(l,i);h="M ".concat(s,",").concat(a+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s+d*v,",").concat(a,`
            L `).concat(s+r-d*v,",").concat(a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s+r,",").concat(a+o*v,`
            L `).concat(s+r,",").concat(a+n-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s+r-d*v,",").concat(a+n,`
            L `).concat(s+d*v,",").concat(a+n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(s,",").concat(a+n-o*v," Z")}else h="M ".concat(s,",").concat(a," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return h},MSe=function(s,a){if(!s||!a)return!1;var r=s.x,n=s.y,i=a.x,l=a.y,o=a.width,d=a.height;if(Math.abs(o)>0&&Math.abs(d)>0){var u=Math.min(i,i+o),h=Math.max(i,i+o),f=Math.min(l,l+d),x=Math.max(l,l+d);return r>=u&&r<=h&&n>=f&&n<=x}return!1},LSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oC=function(s){var a=k6(k6({},LSe),s),r=T.useRef(),n=T.useState(-1),i=TSe(n,2),l=i[0],o=i[1];T.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var O=r.current.getTotalLength();O&&o(O)}catch{}},[]);var d=a.x,u=a.y,h=a.width,f=a.height,x=a.radius,g=a.className,v=a.animationEasing,b=a.animationDuration,y=a.animationBegin,j=a.isAnimationActive,w=a.isUpdateAnimationActive;if(d!==+d||u!==+u||h!==+h||f!==+f||h===0||f===0)return null;var A=Es("recharts-rectangle",g);return w?Oe.createElement(Vl,{canBegin:l>0,from:{width:h,height:f,x:d,y:u},to:{width:h,height:f,x:d,y:u},duration:b,animationEasing:v,isActive:w},function(O){var C=O.width,E=O.height,S=O.x,D=O.y;return Oe.createElement(Vl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,isActive:j,easing:v},Oe.createElement("path",Cg({},bs(a,!0),{className:A,d:O6(S,D,C,E,x),ref:r})))}):Oe.createElement("path",Cg({},bs(a,!0),{className:A,d:O6(d,u,h,f,x)}))};function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q2.apply(this,arguments)}var cC=function(s){var a=s.cx,r=s.cy,n=s.r,i=s.className,l=Es("recharts-dot",i);return a===+a&&r===+r&&n===+n?T.createElement("circle",Q2({},bs(s,!1),Kp(s),{className:l,cx:a,cy:r,r:n})):null};function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Kf(e)}var FSe=["x","y","top","left","width","height","className"];function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},K2.apply(this,arguments)}function I6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function USe(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?I6(Object(a),!0).forEach(function(r){zSe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function zSe(e,s,a){return s=BSe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function BSe(e){var s=$Se(e,"string");return Kf(s)=="symbol"?s:s+""}function $Se(e,s){if(Kf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function qSe(e,s){if(e==null)return{};var a=HSe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HSe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var VSe=function(s,a,r,n,i,l){return"M".concat(s,",").concat(i,"v").concat(n,"M").concat(l,",").concat(a,"h").concat(r)},GSe=function(s){var a=s.x,r=a===void 0?0:a,n=s.y,i=n===void 0?0:n,l=s.top,o=l===void 0?0:l,d=s.left,u=d===void 0?0:d,h=s.width,f=h===void 0?0:h,x=s.height,g=x===void 0?0:x,v=s.className,b=qSe(s,FSe),y=USe({x:r,y:i,top:o,left:u,width:f,height:g},b);return!mt(r)||!mt(i)||!mt(f)||!mt(g)||!mt(o)||!mt(u)?null:Oe.createElement("path",K2({},bs(y,!0),{className:Es("recharts-cross",v),d:VSe(r,i,f,g,o,u)}))},ej,R6;function WSe(){if(R6)return ej;R6=1;var e=R7(),s=e(Object.getPrototypeOf,Object);return ej=s,ej}var tj,P6;function QSe(){if(P6)return tj;P6=1;var e=Kl(),s=WSe(),a=Jl(),r="[object Object]",n=Function.prototype,i=Object.prototype,l=n.toString,o=i.hasOwnProperty,d=l.call(Object);function u(h){if(!a(h)||e(h)!=r)return!1;var f=s(h);if(f===null)return!0;var x=o.call(f,"constructor")&&f.constructor;return typeof x=="function"&&x instanceof x&&l.call(x)==d}return tj=u,tj}var KSe=QSe();const JSe=ea(KSe);var sj,D6;function YSe(){if(D6)return sj;D6=1;var e=Kl(),s=Jl(),a="[object Boolean]";function r(n){return n===!0||n===!1||s(n)&&e(n)==a}return sj=r,sj}var XSe=YSe();const ZSe=ea(XSe);function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Jf(e)}function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Tg.apply(this,arguments)}function eje(e,s){return rje(e)||aje(e,s)||sje(e,s)||tje()}function tje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sje(e,s){if(e){if(typeof e=="string")return M6(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return M6(e,s)}}function M6(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function aje(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function rje(e){if(Array.isArray(e))return e}function L6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function F6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?L6(Object(a),!0).forEach(function(r){nje(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function nje(e,s,a){return s=ije(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function ije(e){var s=lje(e,"string");return Jf(s)=="symbol"?s:s+""}function lje(e,s){if(Jf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var U6=function(s,a,r,n,i){var l=r-n,o;return o="M ".concat(s,",").concat(a),o+="L ".concat(s+r,",").concat(a),o+="L ".concat(s+r-l/2,",").concat(a+i),o+="L ".concat(s+r-l/2-n,",").concat(a+i),o+="L ".concat(s,",").concat(a," Z"),o},oje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cje=function(s){var a=F6(F6({},oje),s),r=T.useRef(),n=T.useState(-1),i=eje(n,2),l=i[0],o=i[1];T.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var d=a.x,u=a.y,h=a.upperWidth,f=a.lowerWidth,x=a.height,g=a.className,v=a.animationEasing,b=a.animationDuration,y=a.animationBegin,j=a.isUpdateAnimationActive;if(d!==+d||u!==+u||h!==+h||f!==+f||x!==+x||h===0&&f===0||x===0)return null;var w=Es("recharts-trapezoid",g);return j?Oe.createElement(Vl,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:u},to:{upperWidth:h,lowerWidth:f,height:x,x:d,y:u},duration:b,animationEasing:v,isActive:j},function(A){var O=A.upperWidth,C=A.lowerWidth,E=A.height,S=A.x,D=A.y;return Oe.createElement(Vl,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:b,easing:v},Oe.createElement("path",Tg({},bs(a,!0),{className:w,d:U6(S,D,O,C,E),ref:r})))}):Oe.createElement("g",null,Oe.createElement("path",Tg({},bs(a,!0),{className:w,d:U6(d,u,h,f,x)})))},dje=["option","shapeType","propTransformer","activeClassName","isActive"];function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Yf(e)}function uje(e,s){if(e==null)return{};var a=mje(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mje(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function z6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function _g(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?z6(Object(a),!0).forEach(function(r){fje(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function fje(e,s,a){return s=hje(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function hje(e){var s=xje(e,"string");return Yf(s)=="symbol"?s:s+""}function xje(e,s){if(Yf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function pje(e,s){return _g(_g({},s),e)}function gje(e,s){return e==="symbols"}function B6(e){var s=e.shapeType,a=e.elementProps;switch(s){case"rectangle":return Oe.createElement(oC,a);case"trapezoid":return Oe.createElement(cje,a);case"sector":return Oe.createElement(iz,a);case"symbols":if(gje(s))return Oe.createElement(CE,a);break;default:return null}}function bje(e){return T.isValidElement(e)?e.props:e}function vje(e){var s=e.option,a=e.shapeType,r=e.propTransformer,n=r===void 0?pje:r,i=e.activeClassName,l=i===void 0?"recharts-active-shape":i,o=e.isActive,d=uje(e,dje),u;if(T.isValidElement(s))u=T.cloneElement(s,_g(_g({},d),bje(s)));else if(is(s))u=s(d);else if(JSe(s)&&!ZSe(s)){var h=n(s,d);u=Oe.createElement(B6,{shapeType:a,elementProps:h})}else{var f=d;u=Oe.createElement(B6,{shapeType:a,elementProps:f})}return o?Oe.createElement(Ca,{className:l},u):u}function Eb(e,s){return s!=null&&"trapezoids"in e.props}function Cb(e,s){return s!=null&&"sectors"in e.props}function Xf(e,s){return s!=null&&"points"in e.props}function yje(e,s){var a,r,n=e.x===(s==null||(a=s.labelViewBox)===null||a===void 0?void 0:a.x)||e.x===s.x,i=e.y===(s==null||(r=s.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===s.y;return n&&i}function Nje(e,s){var a=e.endAngle===s.endAngle,r=e.startAngle===s.startAngle;return a&&r}function wje(e,s){var a=e.x===s.x,r=e.y===s.y,n=e.z===s.z;return a&&r&&n}function Sje(e,s){var a;return Eb(e,s)?a=yje:Cb(e,s)?a=Nje:Xf(e,s)&&(a=wje),a}function jje(e,s){var a;return Eb(e,s)?a="trapezoids":Cb(e,s)?a="sectors":Xf(e,s)&&(a="points"),a}function Aje(e,s){if(Eb(e,s)){var a;return(a=s.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(Cb(e,s)){var r;return(r=s.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Xf(e,s)?s.payload:{}}function Eje(e){var s=e.activeTooltipItem,a=e.graphicalItem,r=e.itemData,n=jje(a,s),i=Aje(a,s),l=r.filter(function(d,u){var h=Df(i,d),f=a.props[n].filter(function(v){var b=Sje(a,s);return b(v,s)}),x=a.props[n].indexOf(f[f.length-1]),g=u===x;return h&&g}),o=r.indexOf(l[l.length-1]);return o}var aj,$6;function Cje(){if($6)return aj;$6=1;var e=Math.ceil,s=Math.max;function a(r,n,i,l){for(var o=-1,d=s(e((n-r)/(i||1)),0),u=Array(d);d--;)u[l?d:++o]=r,r+=i;return u}return aj=a,aj}var rj,q6;function hz(){if(q6)return rj;q6=1;var e=K7(),s=1/0,a=17976931348623157e292;function r(n){if(!n)return n===0?n:0;if(n=e(n),n===s||n===-s){var i=n<0?-1:1;return i*a}return n===n?n:0}return rj=r,rj}var nj,H6;function Tje(){if(H6)return nj;H6=1;var e=Cje(),s=xb(),a=hz();function r(n){return function(i,l,o){return o&&typeof o!="number"&&s(i,l,o)&&(l=o=void 0),i=a(i),l===void 0?(l=i,i=0):l=a(l),o=o===void 0?i<l?1:-1:a(o),e(i,l,o,n)}}return nj=r,nj}var ij,V6;function _je(){if(V6)return ij;V6=1;var e=Tje(),s=e();return ij=s,ij}var kje=_je();const kg=ea(kje);function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Zf(e)}function G6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function W6(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?G6(Object(a),!0).forEach(function(r){xz(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function xz(e,s,a){return s=Oje(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Oje(e){var s=Ije(e,"string");return Zf(s)=="symbol"?s:s+""}function Ije(e,s){if(Zf(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var Rje=["Webkit","Moz","O","ms"],Pje=function(s,a){var r=s.replace(/(\w)/,function(i){return i.toUpperCase()}),n=Rje.reduce(function(i,l){return W6(W6({},i),{},xz({},l+r,a))},{});return n[s]=a,n};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ju(e)}function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Og.apply(this,arguments)}function Q6(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function lj(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Q6(Object(a),!0).forEach(function(r){_n(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q6(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Dje(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function K6(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gz(r.key),r)}}function Mje(e,s,a){return s&&K6(e.prototype,s),a&&K6(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lje(e,s,a){return s=Ig(s),Fje(e,pz()?Reflect.construct(s,a||[],Ig(e).constructor):s.apply(e,a))}function Fje(e,s){if(s&&(Ju(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uje(e)}function Uje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pz=function(){return!!e})()}function Ig(e){return Ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ig(e)}function zje(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&J2(e,s)}function J2(e,s){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},J2(e,s)}function _n(e,s,a){return s=gz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function gz(e){var s=Bje(e,"string");return Ju(s)=="symbol"?s:s+""}function Bje(e,s){if(Ju(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $je=function(s){var a=s.data,r=s.startIndex,n=s.endIndex,i=s.x,l=s.width,o=s.travellerWidth;if(!a||!a.length)return{};var d=a.length,u=Xm().domain(kg(0,d)).range([i,i+l-o]),h=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(n),scale:u,scaleValues:h}},J6=function(s){return s.changedTouches&&!!s.changedTouches.length},Yu=(function(e){function s(a){var r;return Dje(this,s),r=Lje(this,s,[a]),_n(r,"handleDrag",function(n){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(n):r.state.isSlideMoving&&r.handleSlideDrag(n)}),_n(r,"handleTouchMove",function(n){n.changedTouches!=null&&n.changedTouches.length>0&&r.handleDrag(n.changedTouches[0])}),_n(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var n=r.props,i=n.endIndex,l=n.onDragEnd,o=n.startIndex;l==null||l({endIndex:i,startIndex:o})}),r.detachDragEndListener()}),_n(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),_n(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),_n(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),_n(r,"handleSlideDragStart",function(n){var i=J6(n)?n.changedTouches[0]:n;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return zje(s,e),Mje(s,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var n=r.startX,i=r.endX,l=this.state.scaleValues,o=this.props,d=o.gap,u=o.data,h=u.length-1,f=Math.min(n,i),x=Math.max(n,i),g=s.getIndexInRange(l,f),v=s.getIndexInRange(l,x);return{startIndex:g-g%d,endIndex:v===h?h:v-v%d}}},{key:"getTextOfTick",value:function(r){var n=this.props,i=n.data,l=n.tickFormatter,o=n.dataKey,d=Bn(i[r],o,r);return is(l)?l(d,r):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var n=this.state,i=n.slideMoveStartX,l=n.startX,o=n.endX,d=this.props,u=d.x,h=d.width,f=d.travellerWidth,x=d.startIndex,g=d.endIndex,v=d.onChange,b=r.pageX-i;b>0?b=Math.min(b,u+h-f-o,u+h-f-l):b<0&&(b=Math.max(b,u-l,u-o));var y=this.getIndex({startX:l+b,endX:o+b});(y.startIndex!==x||y.endIndex!==g)&&v&&v(y),this.setState({startX:l+b,endX:o+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,n){var i=J6(n)?n.changedTouches[0]:n;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var n=this.state,i=n.brushMoveStartX,l=n.movingTravellerId,o=n.endX,d=n.startX,u=this.state[l],h=this.props,f=h.x,x=h.width,g=h.travellerWidth,v=h.onChange,b=h.gap,y=h.data,j={startX:this.state.startX,endX:this.state.endX},w=r.pageX-i;w>0?w=Math.min(w,f+x-g-u):w<0&&(w=Math.max(w,f-u)),j[l]=u+w;var A=this.getIndex(j),O=A.startIndex,C=A.endIndex,E=function(){var D=y.length-1;return l==="startX"&&(o>d?O%b===0:C%b===0)||o<d&&C===D||l==="endX"&&(o>d?C%b===0:O%b===0)||o>d&&C===D};this.setState(_n(_n({},l,u+w),"brushMoveStartX",r.pageX),function(){v&&E()&&v(A)})}},{key:"handleTravellerMoveKeyboard",value:function(r,n){var i=this,l=this.state,o=l.scaleValues,d=l.startX,u=l.endX,h=this.state[n],f=o.indexOf(h);if(f!==-1){var x=f+r;if(!(x===-1||x>=o.length)){var g=o[x];n==="startX"&&g>=u||n==="endX"&&g<=d||this.setState(_n({},n,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,o=r.height,d=r.fill,u=r.stroke;return Oe.createElement("rect",{stroke:u,fill:d,x:n,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,o=r.height,d=r.data,u=r.children,h=r.padding,f=T.Children.only(u);return f?Oe.cloneElement(f,{x:n,y:i,width:l,height:o,margin:h,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(r,n){var i,l,o=this,d=this.props,u=d.y,h=d.travellerWidth,f=d.height,x=d.traveller,g=d.ariaLabel,v=d.data,b=d.startIndex,y=d.endIndex,j=Math.max(r,this.props.x),w=lj(lj({},bs(this.props,!1)),{},{x:j,y:u,width:h,height:f}),A=g||"Min value: ".concat((i=v[b])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=v[y])===null||l===void 0?void 0:l.name);return Oe.createElement(Ca,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),o.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},s.renderTraveller(x,w))}},{key:"renderSlide",value:function(r,n){var i=this.props,l=i.y,o=i.height,d=i.stroke,u=i.travellerWidth,h=Math.min(r,n)+u,f=Math.max(Math.abs(n-r)-u,0);return Oe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:h,y:l,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,n=r.startIndex,i=r.endIndex,l=r.y,o=r.height,d=r.travellerWidth,u=r.stroke,h=this.state,f=h.startX,x=h.endX,g=5,v={pointerEvents:"none",fill:u};return Oe.createElement(Ca,{className:"recharts-brush-texts"},Oe.createElement(lg,Og({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,x)-g,y:l+o/2},v),this.getTextOfTick(n)),Oe.createElement(lg,Og({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,x)+d+g,y:l+o/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,n=r.data,i=r.className,l=r.children,o=r.x,d=r.y,u=r.width,h=r.height,f=r.alwaysShowText,x=this.state,g=x.startX,v=x.endX,b=x.isTextActive,y=x.isSlideMoving,j=x.isTravellerMoving,w=x.isTravellerFocused;if(!n||!n.length||!mt(o)||!mt(d)||!mt(u)||!mt(h)||u<=0||h<=0)return null;var A=Es("recharts-brush",i),O=Oe.Children.count(l)===1,C=Pje("userSelect","none");return Oe.createElement(Ca,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),O&&this.renderPanorama(),this.renderSlide(g,v),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(v,"endX"),(b||y||j||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var n=r.x,i=r.y,l=r.width,o=r.height,d=r.stroke,u=Math.floor(i+o/2)-1;return Oe.createElement(Oe.Fragment,null,Oe.createElement("rect",{x:n,y:i,width:l,height:o,fill:d,stroke:"none"}),Oe.createElement("line",{x1:n+1,y1:u,x2:n+l-1,y2:u,fill:"none",stroke:"#fff"}),Oe.createElement("line",{x1:n+1,y1:u+2,x2:n+l-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,n){var i;return Oe.isValidElement(r)?i=Oe.cloneElement(r,n):is(r)?i=r(n):i=s.renderDefaultTraveller(n),i}},{key:"getDerivedStateFromProps",value:function(r,n){var i=r.data,l=r.width,o=r.x,d=r.travellerWidth,u=r.updateId,h=r.startIndex,f=r.endIndex;if(i!==n.prevData||u!==n.prevUpdateId)return lj({prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:o,prevWidth:l},i&&i.length?$je({data:i,width:l,x:o,travellerWidth:d,startIndex:h,endIndex:f}):{scale:null,scaleValues:null});if(n.scale&&(l!==n.prevWidth||o!==n.prevX||d!==n.prevTravellerWidth)){n.scale.range([o,o+l-d]);var x=n.scale.domain().map(function(g){return n.scale(g)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:u,prevX:o,prevWidth:l,startX:n.scale(r.startIndex),endX:n.scale(r.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(r,n){for(var i=r.length,l=0,o=i-1;o-l>1;){var d=Math.floor((l+o)/2);r[d]>n?o=d:l=d}return n>=r[o]?o:l}}])})(T.PureComponent);_n(Yu,"displayName","Brush");_n(Yu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var oj,Y6;function qje(){if(Y6)return oj;Y6=1;var e=PE();function s(a,r){var n;return e(a,function(i,l,o){return n=r(i,l,o),!n}),!!n}return oj=s,oj}var cj,X6;function Hje(){if(X6)return cj;X6=1;var e=E7(),s=rc(),a=qje(),r=yn(),n=xb();function i(l,o,d){var u=r(l)?e:a;return d&&n(l,o,d)&&(o=void 0),u(l,s(o,3))}return cj=i,cj}var Vje=Hje();const Gje=ea(Vje);var Zi=function(s,a){var r=s.alwaysShow,n=s.ifOverflow;return r&&(n="extendDomain"),n===a},dj,Z6;function Wje(){if(Z6)return dj;Z6=1;var e=H7();function s(a,r,n){r=="__proto__"&&e?e(a,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):a[r]=n}return dj=s,dj}var uj,eM;function Qje(){if(eM)return uj;eM=1;var e=Wje(),s=$7(),a=rc();function r(n,i){var l={};return i=a(i,3),s(n,function(o,d,u){e(l,d,i(o,d,u))}),l}return uj=r,uj}var Kje=Qje();const Jje=ea(Kje);var mj,tM;function Yje(){if(tM)return mj;tM=1;function e(s,a){for(var r=-1,n=s==null?0:s.length;++r<n;)if(!a(s[r],r,s))return!1;return!0}return mj=e,mj}var fj,sM;function Xje(){if(sM)return fj;sM=1;var e=PE();function s(a,r){var n=!0;return e(a,function(i,l,o){return n=!!r(i,l,o),n}),n}return fj=s,fj}var hj,aM;function Zje(){if(aM)return hj;aM=1;var e=Yje(),s=Xje(),a=rc(),r=yn(),n=xb();function i(l,o,d){var u=r(l)?e:s;return d&&n(l,o,d)&&(o=void 0),u(l,a(o,3))}return hj=i,hj}var e2e=Zje();const bz=ea(e2e);var t2e=["x","y"];function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},eh(e)}function Y2(){return Y2=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Y2.apply(this,arguments)}function rM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function _m(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?rM(Object(a),!0).forEach(function(r){s2e(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function s2e(e,s,a){return s=a2e(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function a2e(e){var s=r2e(e,"string");return eh(s)=="symbol"?s:s+""}function r2e(e,s){if(eh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function n2e(e,s){if(e==null)return{};var a=i2e(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function i2e(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function l2e(e,s){var a=e.x,r=e.y,n=n2e(e,t2e),i="".concat(a),l=parseInt(i,10),o="".concat(r),d=parseInt(o,10),u="".concat(s.height||n.height),h=parseInt(u,10),f="".concat(s.width||n.width),x=parseInt(f,10);return _m(_m(_m(_m(_m({},s),n),l?{x:l}:{}),d?{y:d}:{}),{},{height:h,width:x,name:s.name,radius:s.radius})}function nM(e){return Oe.createElement(vje,Y2({shapeType:"rectangle",propTransformer:l2e,activeClassName:"recharts-active-bar"},e))}var o2e=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,n){if(typeof s=="number")return s;var i=mt(r)||gfe(r);return i?s(r,n):(i||dd(),a)}},c2e=["value","background"],vz;function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xu(e)}function d2e(e,s){if(e==null)return{};var a=u2e(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function u2e(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function Rg(){return Rg=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Rg.apply(this,arguments)}function iM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Za(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?iM(Object(a),!0).forEach(function(r){Po(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function m2e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function lM(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nz(r.key),r)}}function f2e(e,s,a){return s&&lM(e.prototype,s),a&&lM(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function h2e(e,s,a){return s=Pg(s),x2e(e,yz()?Reflect.construct(s,a||[],Pg(e).constructor):s.apply(e,a))}function x2e(e,s){if(s&&(Xu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p2e(e)}function p2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yz=function(){return!!e})()}function Pg(e){return Pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Pg(e)}function g2e(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&X2(e,s)}function X2(e,s){return X2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},X2(e,s)}function Po(e,s,a){return s=Nz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Nz(e){var s=b2e(e,"string");return Xu(s)=="symbol"?s:s+""}function b2e(e,s){if(Xu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wd=(function(e){function s(){var a;m2e(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=h2e(this,s,[].concat(n)),Po(a,"state",{isAnimationFinished:!1}),Po(a,"id",gh("recharts-bar-")),Po(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),l&&l()}),Po(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),l&&l()}),a}return g2e(s,e),f2e(s,[{key:"renderRectanglesStatically",value:function(r){var n=this,i=this.props,l=i.shape,o=i.dataKey,d=i.activeIndex,u=i.activeBar,h=bs(this.props,!1);return r&&r.map(function(f,x){var g=x===d,v=g?u:l,b=Za(Za(Za({},h),f),{},{isActive:g,option:v,index:x,dataKey:o,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return Oe.createElement(Ca,Rg({className:"recharts-bar-rectangle"},Jp(n.props,f,x),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(x)}),Oe.createElement(nM,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,n=this.props,i=n.data,l=n.layout,o=n.isAnimationActive,d=n.animationBegin,u=n.animationDuration,h=n.animationEasing,f=n.animationId,x=this.state.prevData;return Oe.createElement(Vl,{begin:d,duration:u,isActive:o,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var v=g.t,b=i.map(function(y,j){var w=x&&x[j];if(w){var A=oi(w.x,y.x),O=oi(w.y,y.y),C=oi(w.width,y.width),E=oi(w.height,y.height);return Za(Za({},y),{},{x:A(v),y:O(v),width:C(v),height:E(v)})}if(l==="horizontal"){var S=oi(0,y.height),D=S(v);return Za(Za({},y),{},{y:y.y+y.height-D,height:D})}var M=oi(0,y.width),U=M(v);return Za(Za({},y),{},{width:U})});return Oe.createElement(Ca,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,n=r.data,i=r.isAnimationActive,l=this.state.prevData;return i&&n&&n.length&&(!l||!Df(l,n))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(n)}},{key:"renderBackground",value:function(){var r=this,n=this.props,i=n.data,l=n.dataKey,o=n.activeIndex,d=bs(this.props.background,!1);return i.map(function(u,h){u.value;var f=u.background,x=d2e(u,c2e);if(!f)return null;var g=Za(Za(Za(Za(Za({},x),{},{fill:"#eee"},f),d),Jp(r.props,u,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:l,index:h,className:"recharts-bar-background-rectangle"});return Oe.createElement(nM,Rg({key:"background-bar-".concat(h),option:r.props.background,isActive:h===o},g))})}},{key:"renderErrorBar",value:function(r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,d=i.yAxis,u=i.layout,h=i.children,f=Di(h,Ab);if(!f)return null;var x=u==="vertical"?l[0].height/2:l[0].width/2,g=function(y,j){var w=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:w,errorVal:Bn(y,j)}},v={clipPath:r?"url(#clipPath-".concat(n,")"):null};return Oe.createElement(Ca,v,f.map(function(b){return Oe.cloneElement(b,{key:"error-bar-".concat(n,"-").concat(b.props.dataKey),data:l,xAxis:o,yAxis:d,layout:u,offset:x,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,n=r.hide,i=r.data,l=r.className,o=r.xAxis,d=r.yAxis,u=r.left,h=r.top,f=r.width,x=r.height,g=r.isAnimationActive,v=r.background,b=r.id;if(n||!i||!i.length)return null;var y=this.state.isAnimationFinished,j=Es("recharts-bar",l),w=o&&o.allowDataOverflow,A=d&&d.allowDataOverflow,O=w||A,C=Ss(b)?this.id:b;return Oe.createElement(Ca,{className:j},w||A?Oe.createElement("defs",null,Oe.createElement("clipPath",{id:"clipPath-".concat(C)},Oe.createElement("rect",{x:w?u:u-f/2,y:A?h:h-x/2,width:w?f:f*2,height:A?x:x*2}))):null,Oe.createElement(Ca,{className:"recharts-bar-rectangles",clipPath:O?"url(#clipPath-".concat(C,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(O,C),(!g||y)&&zo.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:n.curData}:r.data!==n.curData?{curData:r.data}:null}}])})(T.PureComponent);vz=wd;Po(wd,"displayName","Bar");Po(wd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!v0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Po(wd,"getComposedData",function(e){var s=e.props,a=e.item,r=e.barPosition,n=e.bandSize,i=e.xAxis,l=e.yAxis,o=e.xAxisTicks,d=e.yAxisTicks,u=e.stackedData,h=e.dataStartIndex,f=e.displayedData,x=e.offset,g=M1e(r,a);if(!g)return null;var v=s.layout,b=a.type.defaultProps,y=b!==void 0?Za(Za({},b),a.props):a.props,j=y.dataKey,w=y.children,A=y.minPointSize,O=v==="horizontal"?l:i,C=u?O.scale.domain():null,E=H1e({numericAxis:O}),S=Di(w,Y7),D=f.map(function(M,U){var I,k,z,_,q,L;u?I=L1e(u[h+U],C):(I=Bn(M,j),Array.isArray(I)||(I=[E,I]));var Q=o2e(A,vz.defaultProps.minPointSize)(I[1],U);if(v==="horizontal"){var X,W=[l.scale(I[0]),l.scale(I[1])],ee=W[0],V=W[1];k=HD({axis:i,ticks:o,bandSize:n,offset:g.offset,entry:M,index:U}),z=(X=V??ee)!==null&&X!==void 0?X:void 0,_=g.size;var P=ee-V;if(q=Number.isNaN(P)?0:P,L={x:k,y:l.y,width:_,height:l.height},Math.abs(Q)>0&&Math.abs(q)<Math.abs(Q)){var Y=Ii(q||Q)*(Math.abs(Q)-Math.abs(q));z-=Y,q+=Y}}else{var J=[i.scale(I[0]),i.scale(I[1])],K=J[0],se=J[1];if(k=K,z=HD({axis:l,ticks:d,bandSize:n,offset:g.offset,entry:M,index:U}),_=se-K,q=g.size,L={x:i.x,y:z,width:i.width,height:q},Math.abs(Q)>0&&Math.abs(_)<Math.abs(Q)){var G=Ii(_||Q)*(Math.abs(Q)-Math.abs(_));_+=G}}return Za(Za(Za({},M),{},{x:k,y:z,width:_,height:q,value:u?I:I[1],payload:M,background:L},S&&S[U]&&S[U].props),{},{tooltipPayload:[az(a,M)],tooltipPosition:{x:k+_/2,y:z+q/2}})});return Za({data:D,layout:v},x)});function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},th(e)}function v2e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function oM(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wz(r.key),r)}}function y2e(e,s,a){return s&&oM(e.prototype,s),a&&oM(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function cM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ti(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?cM(Object(a),!0).forEach(function(r){Tb(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Tb(e,s,a){return s=wz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function wz(e){var s=N2e(e,"string");return th(s)=="symbol"?s:s+""}function N2e(e,s){if(th(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var Sz=function(s,a,r,n,i){var l=s.width,o=s.height,d=s.layout,u=s.children,h=Object.keys(a),f={left:r.left,leftMirror:r.left,right:l-r.right,rightMirror:l-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},x=!!kn(u,wd);return h.reduce(function(g,v){var b=a[v],y=b.orientation,j=b.domain,w=b.padding,A=w===void 0?{}:w,O=b.mirror,C=b.reversed,E="".concat(y).concat(O?"Mirror":""),S,D,M,U,I;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var k=j[1]-j[0],z=1/0,_=b.categoricalDomain.sort(yfe);if(_.forEach(function(J,K){K>0&&(z=Math.min((J||0)-(_[K-1]||0),z))}),Number.isFinite(z)){var q=z/k,L=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(S=q*L/2),b.padding==="no-gap"){var Q=od(s.barCategoryGap,q*L),X=q*L/2;S=X-Q-(X-Q)/L*Q}}}n==="xAxis"?D=[r.left+(A.left||0)+(S||0),r.left+r.width-(A.right||0)-(S||0)]:n==="yAxis"?D=d==="horizontal"?[r.top+r.height-(A.bottom||0),r.top+(A.top||0)]:[r.top+(A.top||0)+(S||0),r.top+r.height-(A.bottom||0)-(S||0)]:D=b.range,C&&(D=[D[1],D[0]]);var W=P1e(b,i,x),ee=W.scale,V=W.realScaleType;ee.domain(j).range(D),D1e(ee);var P=q1e(ee,Ti(Ti({},b),{},{realScaleType:V}));n==="xAxis"?(I=y==="top"&&!O||y==="bottom"&&O,M=r.left,U=f[E]-I*b.height):n==="yAxis"&&(I=y==="left"&&!O||y==="right"&&O,M=f[E]-I*b.width,U=r.top);var Y=Ti(Ti(Ti({},b),P),{},{realScaleType:V,x:M,y:U,scale:ee,width:n==="xAxis"?r.width:b.width,height:n==="yAxis"?r.height:b.height});return Y.bandSize=Ng(Y,P),!b.hide&&n==="xAxis"?f[E]+=(I?-1:1)*Y.height:b.hide||(f[E]+=(I?-1:1)*Y.width),Ti(Ti({},g),{},Tb({},v,Y))},{})},jz=function(s,a){var r=s.x,n=s.y,i=a.x,l=a.y;return{x:Math.min(r,i),y:Math.min(n,l),width:Math.abs(i-r),height:Math.abs(l-n)}},w2e=function(s){var a=s.x1,r=s.y1,n=s.x2,i=s.y2;return jz({x:a,y:r},{x:n,y:i})},Az=(function(){function e(s){v2e(this,e),this.scale=s}return y2e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.bandAware,i=r.position;if(a!==void 0){if(i)switch(i){case"start":return this.scale(a);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(a)+o}default:return this.scale(a)}if(n){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+d}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?a>=n&&a<=i:a>=i&&a<=n}}],[{key:"create",value:function(a){return new e(a)}}])})();Tb(Az,"EPS",1e-4);var dC=function(s){var a=Object.keys(s).reduce(function(r,n){return Ti(Ti({},r),{},Tb({},n,Az.create(s[n])))},{});return Ti(Ti({},a),{},{apply:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return Jje(n,function(d,u){return a[u].apply(d,{bandAware:l,position:o})})},isInRange:function(n){return bz(n,function(i,l){return a[l].isInRange(i)})}})};function S2e(e){return(e%180+180)%180}var j2e=function(s){var a=s.width,r=s.height,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=S2e(n),l=i*Math.PI/180,o=Math.atan(r/a),d=l>o&&l<Math.PI-o?r/Math.sin(l):a/Math.cos(l);return Math.abs(d)},xj,dM;function A2e(){if(dM)return xj;dM=1;var e=rc(),s=bh(),a=fb();function r(n){return function(i,l,o){var d=Object(i);if(!s(i)){var u=e(l,3);i=a(i),l=function(f){return u(d[f],f,d)}}var h=n(i,l,o);return h>-1?d[u?i[h]:h]:void 0}}return xj=r,xj}var pj,uM;function E2e(){if(uM)return pj;uM=1;var e=hz();function s(a){var r=e(a),n=r%1;return r===r?n?r-n:r:0}return pj=s,pj}var gj,mM;function C2e(){if(mM)return gj;mM=1;var e=L7(),s=rc(),a=E2e(),r=Math.max;function n(i,l,o){var d=i==null?0:i.length;if(!d)return-1;var u=o==null?0:a(o);return u<0&&(u=r(d+u,0)),e(i,s(l,3),u)}return gj=n,gj}var bj,fM;function T2e(){if(fM)return bj;fM=1;var e=A2e(),s=C2e(),a=e(s);return bj=a,bj}var _2e=T2e();const k2e=ea(_2e);var O2e=ZF();const I2e=ea(O2e);var R2e=I2e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),uC=T.createContext(void 0),mC=T.createContext(void 0),Ez=T.createContext(void 0),Cz=T.createContext({}),Tz=T.createContext(void 0),_z=T.createContext(0),kz=T.createContext(0),hM=function(s){var a=s.state,r=a.xAxisMap,n=a.yAxisMap,i=a.offset,l=s.clipPathId,o=s.children,d=s.width,u=s.height,h=R2e(i);return Oe.createElement(uC.Provider,{value:r},Oe.createElement(mC.Provider,{value:n},Oe.createElement(Cz.Provider,{value:i},Oe.createElement(Ez.Provider,{value:h},Oe.createElement(Tz.Provider,{value:l},Oe.createElement(_z.Provider,{value:u},Oe.createElement(kz.Provider,{value:d},o)))))))},P2e=function(){return T.useContext(Tz)},Oz=function(s){var a=T.useContext(uC);a==null&&dd();var r=a[s];return r==null&&dd(),r},D2e=function(){var s=T.useContext(uC);return To(s)},M2e=function(){var s=T.useContext(mC),a=k2e(s,function(r){return bz(r.domain,Number.isFinite)});return a||To(s)},Iz=function(s){var a=T.useContext(mC);a==null&&dd();var r=a[s];return r==null&&dd(),r},L2e=function(){var s=T.useContext(Ez);return s},F2e=function(){return T.useContext(Cz)},fC=function(){return T.useContext(kz)},hC=function(){return T.useContext(_z)};function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Zu(e)}function U2e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function z2e(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pz(r.key),r)}}function B2e(e,s,a){return s&&z2e(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function $2e(e,s,a){return s=Dg(s),q2e(e,Rz()?Reflect.construct(s,a||[],Dg(e).constructor):s.apply(e,a))}function q2e(e,s){if(s&&(Zu(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H2e(e)}function H2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rz=function(){return!!e})()}function Dg(e){return Dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Dg(e)}function V2e(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&Z2(e,s)}function Z2(e,s){return Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Z2(e,s)}function xM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function pM(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?xM(Object(a),!0).forEach(function(r){xC(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function xC(e,s,a){return s=Pz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Pz(e){var s=G2e(e,"string");return Zu(s)=="symbol"?s:s+""}function G2e(e,s){if(Zu(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(Zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function W2e(e,s){return Y2e(e)||J2e(e,s)||K2e(e,s)||Q2e()}function Q2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K2e(e,s){if(e){if(typeof e=="string")return gM(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return gM(e,s)}}function gM(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function J2e(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function Y2e(e){if(Array.isArray(e))return e}function eA(){return eA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},eA.apply(this,arguments)}var X2e=function(s,a){var r;return Oe.isValidElement(s)?r=Oe.cloneElement(s,a):is(s)?r=s(a):r=Oe.createElement("line",eA({},a,{className:"recharts-reference-line-line"})),r},Z2e=function(s,a,r,n,i,l,o,d,u){var h=i.x,f=i.y,x=i.width,g=i.height;if(r){var v=u.y,b=s.y.apply(v,{position:l});if(Zi(u,"discard")&&!s.y.isInRange(b))return null;var y=[{x:h+x,y:b},{x:h,y:b}];return d==="left"?y.reverse():y}if(a){var j=u.x,w=s.x.apply(j,{position:l});if(Zi(u,"discard")&&!s.x.isInRange(w))return null;var A=[{x:w,y:f+g},{x:w,y:f}];return o==="top"?A.reverse():A}if(n){var O=u.segment,C=O.map(function(E){return s.apply(E,{position:l})});return Zi(u,"discard")&&Gje(C,function(E){return!s.isInRange(E)})?null:C}return null};function eAe(e){var s=e.x,a=e.y,r=e.segment,n=e.xAxisId,i=e.yAxisId,l=e.shape,o=e.className,d=e.alwaysShow,u=P2e(),h=Oz(n),f=Iz(i),x=L2e();if(!u||!x)return null;Ul(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=dC({x:h.scale,y:f.scale}),v=lr(s),b=lr(a),y=r&&r.length===2,j=Z2e(g,v,b,y,x,e.position,h.orientation,f.orientation,e);if(!j)return null;var w=W2e(j,2),A=w[0],O=A.x,C=A.y,E=w[1],S=E.x,D=E.y,M=Zi(e,"hidden")?"url(#".concat(u,")"):void 0,U=pM(pM({clipPath:M},bs(e,!0)),{},{x1:O,y1:C,x2:S,y2:D});return Oe.createElement(Ca,{className:Es("recharts-reference-line",o)},X2e(l,U),qr.renderCallByParent(e,w2e({x1:O,y1:C,x2:S,y2:D})))}var pC=(function(e){function s(){return U2e(this,s),$2e(this,s,arguments)}return V2e(s,e),B2e(s,[{key:"render",value:function(){return Oe.createElement(eAe,this.props)}}])})(Oe.Component);xC(pC,"displayName","ReferenceLine");xC(pC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tA(){return tA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},tA.apply(this,arguments)}function e0(e){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e0(e)}function bM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function vM(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?bM(Object(a),!0).forEach(function(r){_b(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function tAe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function sAe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mz(r.key),r)}}function aAe(e,s,a){return s&&sAe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function rAe(e,s,a){return s=Mg(s),nAe(e,Dz()?Reflect.construct(s,a||[],Mg(e).constructor):s.apply(e,a))}function nAe(e,s){if(s&&(e0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iAe(e)}function iAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dz=function(){return!!e})()}function Mg(e){return Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Mg(e)}function lAe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&sA(e,s)}function sA(e,s){return sA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},sA(e,s)}function _b(e,s,a){return s=Mz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Mz(e){var s=oAe(e,"string");return e0(s)=="symbol"?s:s+""}function oAe(e,s){if(e0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(e0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cAe=function(s){var a=s.x,r=s.y,n=s.xAxis,i=s.yAxis,l=dC({x:n.scale,y:i.scale}),o=l.apply({x:a,y:r},{bandAware:!0});return Zi(s,"discard")&&!l.isInRange(o)?null:o},kb=(function(e){function s(){return tAe(this,s),rAe(this,s,arguments)}return lAe(s,e),aAe(s,[{key:"render",value:function(){var r=this.props,n=r.x,i=r.y,l=r.r,o=r.alwaysShow,d=r.clipPathId,u=lr(n),h=lr(i);if(Ul(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var f=cAe(this.props);if(!f)return null;var x=f.x,g=f.y,v=this.props,b=v.shape,y=v.className,j=Zi(this.props,"hidden")?"url(#".concat(d,")"):void 0,w=vM(vM({clipPath:j},bs(this.props,!0)),{},{cx:x,cy:g});return Oe.createElement(Ca,{className:Es("recharts-reference-dot",y)},s.renderDot(b,w),qr.renderCallByParent(this.props,{x:x-l,y:g-l,width:2*l,height:2*l}))}}])})(Oe.Component);_b(kb,"displayName","ReferenceDot");_b(kb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_b(kb,"renderDot",function(e,s){var a;return Oe.isValidElement(e)?a=Oe.cloneElement(e,s):is(e)?a=e(s):a=Oe.createElement(cC,tA({},s,{cx:s.cx,cy:s.cy,className:"recharts-reference-dot-dot"})),a});function aA(){return aA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},aA.apply(this,arguments)}function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t0(e)}function yM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function NM(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?yM(Object(a),!0).forEach(function(r){Ob(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function dAe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function uAe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fz(r.key),r)}}function mAe(e,s,a){return s&&uAe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function fAe(e,s,a){return s=Lg(s),hAe(e,Lz()?Reflect.construct(s,a||[],Lg(e).constructor):s.apply(e,a))}function hAe(e,s){if(s&&(t0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xAe(e)}function xAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lz=function(){return!!e})()}function Lg(e){return Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Lg(e)}function pAe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&rA(e,s)}function rA(e,s){return rA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},rA(e,s)}function Ob(e,s,a){return s=Fz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Fz(e){var s=gAe(e,"string");return t0(s)=="symbol"?s:s+""}function gAe(e,s){if(t0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(t0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bAe=function(s,a,r,n,i){var l=i.x1,o=i.x2,d=i.y1,u=i.y2,h=i.xAxis,f=i.yAxis;if(!h||!f)return null;var x=dC({x:h.scale,y:f.scale}),g={x:s?x.x.apply(l,{position:"start"}):x.x.rangeMin,y:r?x.y.apply(d,{position:"start"}):x.y.rangeMin},v={x:a?x.x.apply(o,{position:"end"}):x.x.rangeMax,y:n?x.y.apply(u,{position:"end"}):x.y.rangeMax};return Zi(i,"discard")&&(!x.isInRange(g)||!x.isInRange(v))?null:jz(g,v)},Ib=(function(e){function s(){return dAe(this,s),fAe(this,s,arguments)}return pAe(s,e),mAe(s,[{key:"render",value:function(){var r=this.props,n=r.x1,i=r.x2,l=r.y1,o=r.y2,d=r.className,u=r.alwaysShow,h=r.clipPathId;Ul(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=lr(n),x=lr(i),g=lr(l),v=lr(o),b=this.props.shape;if(!f&&!x&&!g&&!v&&!b)return null;var y=bAe(f,x,g,v,this.props);if(!y&&!b)return null;var j=Zi(this.props,"hidden")?"url(#".concat(h,")"):void 0;return Oe.createElement(Ca,{className:Es("recharts-reference-area",d)},s.renderRect(b,NM(NM({clipPath:j},bs(this.props,!0)),y)),qr.renderCallByParent(this.props,y))}}])})(Oe.Component);Ob(Ib,"displayName","ReferenceArea");Ob(Ib,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ob(Ib,"renderRect",function(e,s){var a;return Oe.isValidElement(e)?a=Oe.cloneElement(e,s):is(e)?a=e(s):a=Oe.createElement(oC,aA({},s,{className:"recharts-reference-area-rect"})),a});function Uz(e,s,a){if(s<1)return[];if(s===1&&a===void 0)return e;for(var r=[],n=0;n<e.length;n+=s)r.push(e[n]);return r}function vAe(e,s,a){var r={width:e.width+s.width,height:e.height+s.height};return j2e(r,a)}function yAe(e,s,a){var r=a==="width",n=e.x,i=e.y,l=e.width,o=e.height;return s===1?{start:r?n:i,end:r?n+l:i+o}:{start:r?n+l:i+o,end:r?n:i}}function Fg(e,s,a,r,n){if(e*s<e*r||e*s>e*n)return!1;var i=a();return e*(s-e*i/2-r)>=0&&e*(s+e*i/2-n)<=0}function NAe(e,s){return Uz(e,s+1)}function wAe(e,s,a,r,n){for(var i=(r||[]).slice(),l=s.start,o=s.end,d=0,u=1,h=l,f=function(){var v=r==null?void 0:r[d];if(v===void 0)return{v:Uz(r,u)};var b=d,y,j=function(){return y===void 0&&(y=a(v,b)),y},w=v.coordinate,A=d===0||Fg(e,w,j,h,o);A||(d=0,h=l,u+=1),A&&(h=w+e*(j()/2+n),d+=u)},x;u<=i.length;)if(x=f(),x)return x.v;return[]}function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sh(e)}function wM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ur(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?wM(Object(a),!0).forEach(function(r){SAe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function SAe(e,s,a){return s=jAe(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function jAe(e){var s=AAe(e,"string");return sh(s)=="symbol"?s:s+""}function AAe(e,s){if(sh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function EAe(e,s,a,r,n){for(var i=(r||[]).slice(),l=i.length,o=s.start,d=s.end,u=function(x){var g=i[x],v,b=function(){return v===void 0&&(v=a(g,x)),v};if(x===l-1){var y=e*(g.coordinate+e*b()/2-d);i[x]=g=Ur(Ur({},g),{},{tickCoord:y>0?g.coordinate-y*e:g.coordinate})}else i[x]=g=Ur(Ur({},g),{},{tickCoord:g.coordinate});var j=Fg(e,g.tickCoord,b,o,d);j&&(d=g.tickCoord-e*(b()/2+n),i[x]=Ur(Ur({},g),{},{isShow:!0}))},h=l-1;h>=0;h--)u(h);return i}function CAe(e,s,a,r,n,i){var l=(r||[]).slice(),o=l.length,d=s.start,u=s.end;if(i){var h=r[o-1],f=a(h,o-1),x=e*(h.coordinate+e*f/2-u);l[o-1]=h=Ur(Ur({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate});var g=Fg(e,h.tickCoord,function(){return f},d,u);g&&(u=h.tickCoord-e*(f/2+n),l[o-1]=Ur(Ur({},h),{},{isShow:!0}))}for(var v=i?o-1:o,b=function(w){var A=l[w],O,C=function(){return O===void 0&&(O=a(A,w)),O};if(w===0){var E=e*(A.coordinate-e*C()/2-d);l[w]=A=Ur(Ur({},A),{},{tickCoord:E<0?A.coordinate-E*e:A.coordinate})}else l[w]=A=Ur(Ur({},A),{},{tickCoord:A.coordinate});var S=Fg(e,A.tickCoord,C,d,u);S&&(d=A.tickCoord+e*(C()/2+n),l[w]=Ur(Ur({},A),{},{isShow:!0}))},y=0;y<v;y++)b(y);return l}function gC(e,s,a){var r=e.tick,n=e.ticks,i=e.viewBox,l=e.minTickGap,o=e.orientation,d=e.interval,u=e.tickFormatter,h=e.unit,f=e.angle;if(!n||!n.length||!r)return[];if(mt(d)||v0.isSsr)return NAe(n,typeof d=="number"&&mt(d)?d:0);var x=[],g=o==="top"||o==="bottom"?"width":"height",v=h&&g==="width"?Ym(h,{fontSize:s,letterSpacing:a}):{width:0,height:0},b=function(A,O){var C=is(u)?u(A.value,O):A.value;return g==="width"?vAe(Ym(C,{fontSize:s,letterSpacing:a}),v,f):Ym(C,{fontSize:s,letterSpacing:a})[g]},y=n.length>=2?Ii(n[1].coordinate-n[0].coordinate):1,j=yAe(i,y,g);return d==="equidistantPreserveStart"?wAe(y,j,b,n,l):(d==="preserveStart"||d==="preserveStartEnd"?x=CAe(y,j,b,n,l,d==="preserveStartEnd"):x=EAe(y,j,b,n,l),x.filter(function(w){return w.isShow}))}var TAe=["viewBox"],_Ae=["viewBox"],kAe=["ticks"];function s0(e){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},s0(e)}function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Nu.apply(this,arguments)}function SM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function rr(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?SM(Object(a),!0).forEach(function(r){bC(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function vj(e,s){if(e==null)return{};var a=OAe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OAe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function IAe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function jM(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bz(r.key),r)}}function RAe(e,s,a){return s&&jM(e.prototype,s),a&&jM(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function PAe(e,s,a){return s=Ug(s),DAe(e,zz()?Reflect.construct(s,a||[],Ug(e).constructor):s.apply(e,a))}function DAe(e,s){if(s&&(s0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MAe(e)}function MAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zz=function(){return!!e})()}function Ug(e){return Ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ug(e)}function LAe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&nA(e,s)}function nA(e,s){return nA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},nA(e,s)}function bC(e,s,a){return s=Bz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Bz(e){var s=FAe(e,"string");return s0(s)=="symbol"?s:s+""}function FAe(e,s){if(s0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(s0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var S0=(function(e){function s(a){var r;return IAe(this,s),r=PAe(this,s,[a]),r.state={fontSize:"",letterSpacing:""},r}return LAe(s,e),RAe(s,[{key:"shouldComponentUpdate",value:function(r,n){var i=r.viewBox,l=vj(r,TAe),o=this.props,d=o.viewBox,u=vj(o,_Ae);return!_u(i,d)||!_u(l,u)||!_u(n,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var n=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var n=this.props,i=n.x,l=n.y,o=n.width,d=n.height,u=n.orientation,h=n.tickSize,f=n.mirror,x=n.tickMargin,g,v,b,y,j,w,A=f?-1:1,O=r.tickSize||h,C=mt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":g=v=r.coordinate,y=l+ +!f*d,b=y-A*O,w=b-A*x,j=C;break;case"left":b=y=r.coordinate,v=i+ +!f*o,g=v-A*O,j=g-A*x,w=C;break;case"right":b=y=r.coordinate,v=i+ +f*o,g=v+A*O,j=g+A*x,w=C;break;default:g=v=r.coordinate,y=l+ +f*d,b=y+A*O,w=b+A*x,j=C;break}return{line:{x1:g,y1:b,x2:v,y2:y},tick:{x:j,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,n=r.orientation,i=r.mirror,l;switch(n){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,n=r.orientation,i=r.mirror,l="end";switch(n){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,o=r.height,d=r.orientation,u=r.mirror,h=r.axisLine,f=rr(rr(rr({},bs(this.props,!1)),bs(h,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!u||d==="bottom"&&u);f=rr(rr({},f),{},{x1:n,y1:i+x*o,x2:n+l,y2:i+x*o})}else{var g=+(d==="left"&&!u||d==="right"&&u);f=rr(rr({},f),{},{x1:n+g*l,y1:i,x2:n+g*l,y2:i+o})}return Oe.createElement("line",Nu({},f,{className:Es("recharts-cartesian-axis-line",fi(h,"className"))}))}},{key:"renderTicks",value:function(r,n,i){var l=this,o=this.props,d=o.tickLine,u=o.stroke,h=o.tick,f=o.tickFormatter,x=o.unit,g=gC(rr(rr({},this.props),{},{ticks:r}),n,i),v=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),y=bs(this.props,!1),j=bs(h,!1),w=rr(rr({},y),{},{fill:"none"},bs(d,!1)),A=g.map(function(O,C){var E=l.getTickLineCoord(O),S=E.line,D=E.tick,M=rr(rr(rr(rr({textAnchor:v,verticalAnchor:b},y),{},{stroke:"none",fill:u},j),D),{},{index:C,payload:O,visibleTicksCount:g.length,tickFormatter:f});return Oe.createElement(Ca,Nu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(O.value,"-").concat(O.coordinate,"-").concat(O.tickCoord)},Jp(l.props,O,C)),d&&Oe.createElement("line",Nu({},w,S,{className:Es("recharts-cartesian-axis-tick-line",fi(d,"className"))})),h&&s.renderTickItem(h,M,"".concat(is(f)?f(O.value,C):O.value).concat(x||"")))});return Oe.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var r=this,n=this.props,i=n.axisLine,l=n.width,o=n.height,d=n.ticksGenerator,u=n.className,h=n.hide;if(h)return null;var f=this.props,x=f.ticks,g=vj(f,kAe),v=x;return is(d)&&(v=x&&x.length>0?d(this.props):d(g)),l<=0||o<=0||!v||!v.length?null:Oe.createElement(Ca,{className:Es("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),qr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,n,i){var l,o=Es(n.className,"recharts-cartesian-axis-tick-value");return Oe.isValidElement(r)?l=Oe.cloneElement(r,rr(rr({},n),{},{className:o})):is(r)?l=r(rr(rr({},n),{},{className:o})):l=Oe.createElement(lg,Nu({},n,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])})(T.Component);bC(S0,"displayName","CartesianAxis");bC(S0,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var UAe=["x1","y1","x2","y2","key"],zAe=["offset"];function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ud(e)}function AM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Hr(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?AM(Object(a),!0).forEach(function(r){BAe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):AM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function BAe(e,s,a){return s=$Ae(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function $Ae(e){var s=qAe(e,"string");return ud(s)=="symbol"?s:s+""}function qAe(e,s){if(ud(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Fc.apply(this,arguments)}function EM(e,s){if(e==null)return{};var a=HAe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function HAe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}var VAe=function(s){var a=s.fill;if(!a||a==="none")return null;var r=s.fillOpacity,n=s.x,i=s.y,l=s.width,o=s.height,d=s.ry;return Oe.createElement("rect",{x:n,y:i,ry:d,width:l,height:o,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function $z(e,s){var a;if(Oe.isValidElement(e))a=Oe.cloneElement(e,s);else if(is(e))a=e(s);else{var r=s.x1,n=s.y1,i=s.x2,l=s.y2,o=s.key,d=EM(s,UAe),u=bs(d,!1);u.offset;var h=EM(u,zAe);a=Oe.createElement("line",Fc({},h,{x1:r,y1:n,x2:i,y2:l,fill:"none",key:o}))}return a}function GAe(e){var s=e.x,a=e.width,r=e.horizontal,n=r===void 0?!0:r,i=e.horizontalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(o,d){var u=Hr(Hr({},e),{},{x1:s,y1:o,x2:s+a,y2:o,key:"line-".concat(d),index:d});return $z(n,u)});return Oe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function WAe(e){var s=e.y,a=e.height,r=e.vertical,n=r===void 0?!0:r,i=e.verticalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(o,d){var u=Hr(Hr({},e),{},{x1:o,y1:s,x2:o,y2:s+a,key:"line-".concat(d),index:d});return $z(n,u)});return Oe.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function QAe(e){var s=e.horizontalFill,a=e.fillOpacity,r=e.x,n=e.y,i=e.width,l=e.height,o=e.horizontalPoints,d=e.horizontal,u=d===void 0?!0:d;if(!u||!s||!s.length)return null;var h=o.map(function(x){return Math.round(x+n-n)}).sort(function(x,g){return x-g});n!==h[0]&&h.unshift(0);var f=h.map(function(x,g){var v=!h[g+1],b=v?n+l-x:h[g+1]-x;if(b<=0)return null;var y=g%s.length;return Oe.createElement("rect",{key:"react-".concat(g),y:x,x:r,height:b,width:i,stroke:"none",fill:s[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Oe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function KAe(e){var s=e.vertical,a=s===void 0?!0:s,r=e.verticalFill,n=e.fillOpacity,i=e.x,l=e.y,o=e.width,d=e.height,u=e.verticalPoints;if(!a||!r||!r.length)return null;var h=u.map(function(x){return Math.round(x+i-i)}).sort(function(x,g){return x-g});i!==h[0]&&h.unshift(0);var f=h.map(function(x,g){var v=!h[g+1],b=v?i+o-x:h[g+1]-x;if(b<=0)return null;var y=g%r.length;return Oe.createElement("rect",{key:"react-".concat(g),x,y:l,width:b,height:d,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Oe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var JAe=function(s,a){var r=s.xAxis,n=s.width,i=s.height,l=s.offset;return tz(gC(Hr(Hr(Hr({},S0.defaultProps),r),{},{ticks:Il(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.left,l.left+l.width,a)},YAe=function(s,a){var r=s.yAxis,n=s.width,i=s.height,l=s.offset;return tz(gC(Hr(Hr(Hr({},S0.defaultProps),r),{},{ticks:Il(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.top,l.top+l.height,a)},xu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function qz(e){var s,a,r,n,i,l,o=fC(),d=hC(),u=F2e(),h=Hr(Hr({},e),{},{stroke:(s=e.stroke)!==null&&s!==void 0?s:xu.stroke,fill:(a=e.fill)!==null&&a!==void 0?a:xu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:xu.horizontal,horizontalFill:(n=e.horizontalFill)!==null&&n!==void 0?n:xu.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:xu.vertical,verticalFill:(l=e.verticalFill)!==null&&l!==void 0?l:xu.verticalFill,x:mt(e.x)?e.x:u.left,y:mt(e.y)?e.y:u.top,width:mt(e.width)?e.width:u.width,height:mt(e.height)?e.height:u.height}),f=h.x,x=h.y,g=h.width,v=h.height,b=h.syncWithTicks,y=h.horizontalValues,j=h.verticalValues,w=D2e(),A=M2e();if(!mt(g)||g<=0||!mt(v)||v<=0||!mt(f)||f!==+f||!mt(x)||x!==+x)return null;var O=h.verticalCoordinatesGenerator||JAe,C=h.horizontalCoordinatesGenerator||YAe,E=h.horizontalPoints,S=h.verticalPoints;if((!E||!E.length)&&is(C)){var D=y&&y.length,M=C({yAxis:A?Hr(Hr({},A),{},{ticks:D?y:A.ticks}):void 0,width:o,height:d,offset:u},D?!0:b);Ul(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ud(M),"]")),Array.isArray(M)&&(E=M)}if((!S||!S.length)&&is(O)){var U=j&&j.length,I=O({xAxis:w?Hr(Hr({},w),{},{ticks:U?j:w.ticks}):void 0,width:o,height:d,offset:u},U?!0:b);Ul(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ud(I),"]")),Array.isArray(I)&&(S=I)}return Oe.createElement("g",{className:"recharts-cartesian-grid"},Oe.createElement(VAe,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),Oe.createElement(GAe,Fc({},h,{offset:u,horizontalPoints:E,xAxis:w,yAxis:A})),Oe.createElement(WAe,Fc({},h,{offset:u,verticalPoints:S,xAxis:w,yAxis:A})),Oe.createElement(QAe,Fc({},h,{horizontalPoints:E})),Oe.createElement(KAe,Fc({},h,{verticalPoints:S})))}qz.displayName="CartesianGrid";var XAe=["layout","type","stroke","connectNulls","isRange","ref"],ZAe=["key"],Hz;function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a0(e)}function Vz(e,s){if(e==null)return{};var a=eEe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eEe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function Uc(){return Uc=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Uc.apply(this,arguments)}function CM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Eo(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?CM(Object(a),!0).forEach(function(r){Ji(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function tEe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function TM(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wz(r.key),r)}}function sEe(e,s,a){return s&&TM(e.prototype,s),a&&TM(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function aEe(e,s,a){return s=zg(s),rEe(e,Gz()?Reflect.construct(s,a||[],zg(e).constructor):s.apply(e,a))}function rEe(e,s){if(s&&(a0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nEe(e)}function nEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gz=function(){return!!e})()}function zg(e){return zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zg(e)}function iEe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&iA(e,s)}function iA(e,s){return iA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},iA(e,s)}function Ji(e,s,a){return s=Wz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Wz(e){var s=lEe(e,"string");return a0(s)=="symbol"?s:s+""}function lEe(e,s){if(a0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(a0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oc=(function(e){function s(){var a;tEe(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=aEe(this,s,[].concat(n)),Ji(a,"state",{isAnimationFinished:!0}),Ji(a,"id",gh("recharts-area-")),Ji(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),is(l)&&l()}),Ji(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),is(l)&&l()}),a}return iEe(s,e),sEe(s,[{key:"renderDots",value:function(r,n,i){var l=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(l&&!o)return null;var d=this.props,u=d.dot,h=d.points,f=d.dataKey,x=bs(this.props,!1),g=bs(u,!0),v=h.map(function(y,j){var w=Eo(Eo(Eo({key:"dot-".concat(j),r:3},x),g),{},{index:j,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:h});return s.renderDotItem(u,w)}),b={clipPath:r?"url(#clipPath-".concat(n?"":"dots-").concat(i,")"):null};return Oe.createElement(Ca,Uc({className:"recharts-area-dots"},b),v)}},{key:"renderHorizontalRect",value:function(r){var n=this.props,i=n.baseLine,l=n.points,o=n.strokeWidth,d=l[0].x,u=l[l.length-1].x,h=r*Math.abs(d-u),f=Ro(l.map(function(x){return x.y||0}));return mt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Ro(i.map(function(x){return x.y||0})),f)),mt(f)?Oe.createElement("rect",{x:d<u?d:d-h,y:0,width:h,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var n=this.props,i=n.baseLine,l=n.points,o=n.strokeWidth,d=l[0].y,u=l[l.length-1].y,h=r*Math.abs(d-u),f=Ro(l.map(function(x){return x.x||0}));return mt(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(Ro(i.map(function(x){return x.x||0})),f)),mt(f)?Oe.createElement("rect",{x:0,y:d<u?d:d-h,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(r){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,n,i,l){var o=this.props,d=o.layout,u=o.type,h=o.stroke,f=o.connectNulls,x=o.isRange;o.ref;var g=Vz(o,XAe);return Oe.createElement(Ca,{clipPath:i?"url(#clipPath-".concat(l,")"):null},Oe.createElement(ef,Uc({},bs(g,!0),{points:r,connectNulls:f,type:u,baseLine:n,layout:d,stroke:"none",className:"recharts-area-area"})),h!=="none"&&Oe.createElement(ef,Uc({},bs(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:f,fill:"none",points:r})),h!=="none"&&x&&Oe.createElement(ef,Uc({},bs(this.props,!1),{className:"recharts-area-curve",layout:d,type:u,connectNulls:f,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(r,n){var i=this,l=this.props,o=l.points,d=l.baseLine,u=l.isAnimationActive,h=l.animationBegin,f=l.animationDuration,x=l.animationEasing,g=l.animationId,v=this.state,b=v.prevPoints,y=v.prevBaseLine;return Oe.createElement(Vl,{begin:h,duration:f,isActive:u,easing:x,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var w=j.t;if(b){var A=b.length/o.length,O=o.map(function(D,M){var U=Math.floor(M*A);if(b[U]){var I=b[U],k=oi(I.x,D.x),z=oi(I.y,D.y);return Eo(Eo({},D),{},{x:k(w),y:z(w)})}return D}),C;if(mt(d)&&typeof d=="number"){var E=oi(y,d);C=E(w)}else if(Ss(d)||g0(d)){var S=oi(y,0);C=S(w)}else C=d.map(function(D,M){var U=Math.floor(M*A);if(y[U]){var I=y[U],k=oi(I.x,D.x),z=oi(I.y,D.y);return Eo(Eo({},D),{},{x:k(w),y:z(w)})}return D});return i.renderAreaStatically(O,C,r,n)}return Oe.createElement(Ca,null,Oe.createElement("defs",null,Oe.createElement("clipPath",{id:"animationClipPath-".concat(n)},i.renderClipRect(w))),Oe.createElement(Ca,{clipPath:"url(#animationClipPath-".concat(n,")")},i.renderAreaStatically(o,d,r,n)))})}},{key:"renderArea",value:function(r,n){var i=this.props,l=i.points,o=i.baseLine,d=i.isAnimationActive,u=this.state,h=u.prevPoints,f=u.prevBaseLine,x=u.totalLength;return d&&l&&l.length&&(!h&&x>0||!Df(h,l)||!Df(f,o))?this.renderAreaWithAnimation(r,n):this.renderAreaStatically(l,o,r,n)}},{key:"render",value:function(){var r,n=this.props,i=n.hide,l=n.dot,o=n.points,d=n.className,u=n.top,h=n.left,f=n.xAxis,x=n.yAxis,g=n.width,v=n.height,b=n.isAnimationActive,y=n.id;if(i||!o||!o.length)return null;var j=this.state.isAnimationFinished,w=o.length===1,A=Es("recharts-area",d),O=f&&f.allowDataOverflow,C=x&&x.allowDataOverflow,E=O||C,S=Ss(y)?this.id:y,D=(r=bs(l,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},M=D.r,U=M===void 0?3:M,I=D.strokeWidth,k=I===void 0?2:I,z=_fe(l)?l:{},_=z.clipDot,q=_===void 0?!0:_,L=U*2+k;return Oe.createElement(Ca,{className:A},O||C?Oe.createElement("defs",null,Oe.createElement("clipPath",{id:"clipPath-".concat(S)},Oe.createElement("rect",{x:O?h:h-g/2,y:C?u:u-v/2,width:O?g:g*2,height:C?v:v*2})),!q&&Oe.createElement("clipPath",{id:"clipPath-dots-".concat(S)},Oe.createElement("rect",{x:h-L/2,y:u-L/2,width:g+L,height:v+L}))):null,w?null:this.renderArea(E,S),(l||w)&&this.renderDots(E,q,S),(!b||j)&&zo.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:r.points!==n.curPoints||r.baseLine!==n.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(T.PureComponent);Hz=oc;Ji(oc,"displayName","Area");Ji(oc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!v0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Ji(oc,"getBaseValue",function(e,s,a,r){var n=e.layout,i=e.baseValue,l=s.props.baseValue,o=l??i;if(mt(o)&&typeof o=="number")return o;var d=n==="horizontal"?r:a,u=d.scale.domain();if(d.type==="number"){var h=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||h<0?h:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});Ji(oc,"getComposedData",function(e){var s=e.props,a=e.item,r=e.xAxis,n=e.yAxis,i=e.xAxisTicks,l=e.yAxisTicks,o=e.bandSize,d=e.dataKey,u=e.stackedData,h=e.dataStartIndex,f=e.displayedData,x=e.offset,g=s.layout,v=u&&u.length,b=Hz.getBaseValue(s,a,r,n),y=g==="horizontal",j=!1,w=f.map(function(O,C){var E;v?E=u[h+C]:(E=Bn(O,d),Array.isArray(E)?j=!0:E=[b,E]);var S=E[1]==null||v&&Bn(O,d)==null;return y?{x:qD({axis:r,ticks:i,bandSize:o,entry:O,index:C}),y:S?null:n.scale(E[1]),value:E,payload:O}:{x:S?null:r.scale(E[1]),y:qD({axis:n,ticks:l,bandSize:o,entry:O,index:C}),value:E,payload:O}}),A;return v||j?A=w.map(function(O){var C=Array.isArray(O.value)?O.value[0]:null;return y?{x:O.x,y:C!=null&&O.y!=null?n.scale(C):null}:{x:C!=null?r.scale(C):null,y:O.y}}):A=y?n.scale(b):r.scale(b),Eo({points:w,baseLine:A,layout:g,isRange:j},x)});Ji(oc,"renderDotItem",function(e,s){var a;if(Oe.isValidElement(e))a=Oe.cloneElement(e,s);else if(is(e))a=e(s);else{var r=Es("recharts-area-dot",typeof e!="boolean"?e.className:""),n=s.key,i=Vz(s,ZAe);a=Oe.createElement(cC,Uc({},i,{key:n,className:r}))}return a});function r0(e){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},r0(e)}function oEe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function cEe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jz(r.key),r)}}function dEe(e,s,a){return s&&cEe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function uEe(e,s,a){return s=Bg(s),mEe(e,Qz()?Reflect.construct(s,a||[],Bg(e).constructor):s.apply(e,a))}function mEe(e,s){if(s&&(r0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fEe(e)}function fEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qz=function(){return!!e})()}function Bg(e){return Bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Bg(e)}function hEe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&lA(e,s)}function lA(e,s){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},lA(e,s)}function Kz(e,s,a){return s=Jz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Jz(e){var s=xEe(e,"string");return r0(s)=="symbol"?s:s+""}function xEe(e,s){if(r0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(r0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function oA(){return oA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},oA.apply(this,arguments)}function pEe(e){var s=e.xAxisId,a=fC(),r=hC(),n=Oz(s);return n==null?null:T.createElement(S0,oA({},n,{className:Es("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(l){return Il(l,!0)}}))}var Sh=(function(e){function s(){return oEe(this,s),uEe(this,s,arguments)}return hEe(s,e),dEe(s,[{key:"render",value:function(){return T.createElement(pEe,this.props)}}])})(T.Component);Kz(Sh,"displayName","XAxis");Kz(Sh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},n0(e)}function gEe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function bEe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zz(r.key),r)}}function vEe(e,s,a){return s&&bEe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function yEe(e,s,a){return s=$g(s),NEe(e,Yz()?Reflect.construct(s,a||[],$g(e).constructor):s.apply(e,a))}function NEe(e,s){if(s&&(n0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wEe(e)}function wEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yz=function(){return!!e})()}function $g(e){return $g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},$g(e)}function SEe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&cA(e,s)}function cA(e,s){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},cA(e,s)}function Xz(e,s,a){return s=Zz(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function Zz(e){var s=jEe(e,"string");return n0(s)=="symbol"?s:s+""}function jEe(e,s){if(n0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(n0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function dA(){return dA=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},dA.apply(this,arguments)}var AEe=function(s){var a=s.yAxisId,r=fC(),n=hC(),i=Iz(a);return i==null?null:T.createElement(S0,dA({},i,{className:Es("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Il(o,!0)}}))},jh=(function(e){function s(){return gEe(this,s),yEe(this,s,arguments)}return SEe(s,e),vEe(s,[{key:"render",value:function(){return T.createElement(AEe,this.props)}}])})(T.Component);Xz(jh,"displayName","YAxis");Xz(jh,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _M(e){return _Ee(e)||TEe(e)||CEe(e)||EEe()}function EEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CEe(e,s){if(e){if(typeof e=="string")return uA(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return uA(e,s)}}function TEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Ee(e){if(Array.isArray(e))return uA(e)}function uA(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}var mA=function(s,a,r,n,i){var l=Di(s,pC),o=Di(s,kb),d=[].concat(_M(l),_M(o)),u=Di(s,Ib),h="".concat(n,"Id"),f=n[0],x=a;if(d.length&&(x=d.reduce(function(b,y){if(y.props[h]===r&&Zi(y.props,"extendDomain")&&mt(y.props[f])){var j=y.props[f];return[Math.min(b[0],j),Math.max(b[1],j)]}return b},x)),u.length){var g="".concat(f,"1"),v="".concat(f,"2");x=u.reduce(function(b,y){if(y.props[h]===r&&Zi(y.props,"extendDomain")&&mt(y.props[g])&&mt(y.props[v])){var j=y.props[g],w=y.props[v];return[Math.min(b[0],j,w),Math.max(b[1],j,w)]}return b},x)}return i&&i.length&&(x=i.reduce(function(b,y){return mt(y)?[Math.min(b[0],y),Math.max(b[1],y)]:b},x)),x},yj={exports:{}},kM;function kEe(){return kM||(kM=1,(function(e){var s=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function n(d,u,h){this.fn=d,this.context=u,this.once=h||!1}function i(d,u,h,f,x){if(typeof h!="function")throw new TypeError("The listener must be a function");var g=new n(h,f||d,x),v=a?a+u:u;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],g]:d._events[v].push(g):(d._events[v]=g,d._eventsCount++),d}function l(d,u){--d._eventsCount===0?d._events=new r:delete d._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)s.call(h,f)&&u.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=a?a+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var x=0,g=f.length,v=new Array(g);x<g;x++)v[x]=f[x].fn;return v},o.prototype.listenerCount=function(u){var h=a?a+u:u,f=this._events[h];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,h,f,x,g,v){var b=a?a+u:u;if(!this._events[b])return!1;var y=this._events[b],j=arguments.length,w,A;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),j){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,f),!0;case 4:return y.fn.call(y.context,h,f,x),!0;case 5:return y.fn.call(y.context,h,f,x,g),!0;case 6:return y.fn.call(y.context,h,f,x,g,v),!0}for(A=1,w=new Array(j-1);A<j;A++)w[A-1]=arguments[A];y.fn.apply(y.context,w)}else{var O=y.length,C;for(A=0;A<O;A++)switch(y[A].once&&this.removeListener(u,y[A].fn,void 0,!0),j){case 1:y[A].fn.call(y[A].context);break;case 2:y[A].fn.call(y[A].context,h);break;case 3:y[A].fn.call(y[A].context,h,f);break;case 4:y[A].fn.call(y[A].context,h,f,x);break;default:if(!w)for(C=1,w=new Array(j-1);C<j;C++)w[C-1]=arguments[C];y[A].fn.apply(y[A].context,w)}}return!0},o.prototype.on=function(u,h,f){return i(this,u,h,f,!1)},o.prototype.once=function(u,h,f){return i(this,u,h,f,!0)},o.prototype.removeListener=function(u,h,f,x){var g=a?a+u:u;if(!this._events[g])return this;if(!h)return l(this,g),this;var v=this._events[g];if(v.fn)v.fn===h&&(!x||v.once)&&(!f||v.context===f)&&l(this,g);else{for(var b=0,y=[],j=v.length;b<j;b++)(v[b].fn!==h||x&&!v[b].once||f&&v[b].context!==f)&&y.push(v[b]);y.length?this._events[g]=y.length===1?y[0]:y:l(this,g)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=a?a+u:u,this._events[h]&&l(this,h)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=a,o.EventEmitter=o,e.exports=o})(yj)),yj.exports}var OEe=kEe();const IEe=ea(OEe);var Nj=new IEe,wj="recharts.syncMouseEvents";function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ah(e)}function REe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function PEe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eB(r.key),r)}}function DEe(e,s,a){return s&&PEe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sj(e,s,a){return s=eB(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function eB(e){var s=MEe(e,"string");return ah(s)=="symbol"?s:s+""}function MEe(e,s){if(ah(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var LEe=(function(){function e(){REe(this,e),Sj(this,"activeIndex",0),Sj(this,"coordinateList",[]),Sj(this,"layout","horizontal")}return DEe(e,[{key:"setDetails",value:function(a){var r,n=a.coordinateList,i=n===void 0?null:n,l=a.container,o=l===void 0?null:l,d=a.layout,u=d===void 0?null:d,h=a.offset,f=h===void 0?null:h,x=a.mouseHandlerCallback,g=x===void 0?null:x;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var n=this.container.getBoundingClientRect(),i=n.x,l=n.y,o=n.height,d=this.coordinateList[this.activeIndex].coordinate,u=((a=window)===null||a===void 0?void 0:a.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=i+d+u,x=l+this.offset.top+o/2+h;this.mouseHandlerCallback({pageX:f,pageY:x})}}}])})();function FEe(e,s,a){if(a==="number"&&s===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],n=e==null?void 0:e[1];if(r&&n&&mt(r)&&mt(n))return!0}return!1}function UEe(e,s,a,r){var n=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?s.x-n:a.left+.5,y:e==="horizontal"?a.top+.5:s.y-n,width:e==="horizontal"?r:a.width-1,height:e==="horizontal"?a.height-1:r}}function tB(e){var s=e.cx,a=e.cy,r=e.radius,n=e.startAngle,i=e.endAngle,l=Ir(s,a,r,n),o=Ir(s,a,r,i);return{points:[l,o],cx:s,cy:a,radius:r,startAngle:n,endAngle:i}}function zEe(e,s,a){var r,n,i,l;if(e==="horizontal")r=s.x,i=r,n=a.top,l=a.top+a.height;else if(e==="vertical")n=s.y,l=n,r=a.left,i=a.left+a.width;else if(s.cx!=null&&s.cy!=null)if(e==="centric"){var o=s.cx,d=s.cy,u=s.innerRadius,h=s.outerRadius,f=s.angle,x=Ir(o,d,u,f),g=Ir(o,d,h,f);r=x.x,n=x.y,i=g.x,l=g.y}else return tB(s);return[{x:r,y:n},{x:i,y:l}]}function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rh(e)}function OM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function fp(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?OM(Object(a),!0).forEach(function(r){BEe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function BEe(e,s,a){return s=$Ee(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function $Ee(e){var s=qEe(e,"string");return rh(s)=="symbol"?s:s+""}function qEe(e,s){if(rh(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function HEe(e){var s,a,r=e.element,n=e.tooltipEventType,i=e.isActive,l=e.activeCoordinate,o=e.activePayload,d=e.offset,u=e.activeTooltipIndex,h=e.tooltipAxisBandSize,f=e.layout,x=e.chartName,g=(s=r.props.cursor)!==null&&s!==void 0?s:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!g||!i||!l||x!=="ScatterChart"&&n!=="axis")return null;var v,b=ef;if(x==="ScatterChart")v=l,b=GSe;else if(x==="BarChart")v=UEe(f,l,d,h),b=oC;else if(f==="radial"){var y=tB(l),j=y.cx,w=y.cy,A=y.radius,O=y.startAngle,C=y.endAngle;v={cx:j,cy:w,startAngle:O,endAngle:C,innerRadius:A,outerRadius:A},b=iz}else v={points:zEe(f,l,d)},b=ef;var E=fp(fp(fp(fp({stroke:"#ccc",pointerEvents:"none"},d),v),bs(g,!1)),{},{payload:o,payloadIndex:u,className:Es("recharts-tooltip-cursor",g.className)});return T.isValidElement(g)?T.cloneElement(g,E):T.createElement(b,E)}var VEe=["item"],GEe=["children","className","width","height","style","compact","title","desc"];function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},i0(e)}function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},wu.apply(this,arguments)}function IM(e,s){return KEe(e)||QEe(e,s)||aB(e,s)||WEe()}function WEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QEe(e,s){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r,n,i,l,o=[],d=!0,u=!1;try{if(i=(a=a.call(e)).next,s!==0)for(;!(d=(r=i.call(a)).done)&&(o.push(r.value),o.length!==s);d=!0);}catch(h){u=!0,n=h}finally{try{if(!d&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(u)throw n}}return o}}function KEe(e){if(Array.isArray(e))return e}function RM(e,s){if(e==null)return{};var a=JEe(e,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JEe(e,s){if(e==null)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(s.indexOf(r)>=0)continue;a[r]=e[r]}return a}function YEe(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function XEe(e,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rB(r.key),r)}}function ZEe(e,s,a){return s&&XEe(e.prototype,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function eCe(e,s,a){return s=qg(s),tCe(e,sB()?Reflect.construct(s,a||[],qg(e).constructor):s.apply(e,a))}function tCe(e,s){if(s&&(i0(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sCe(e)}function sCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sB=function(){return!!e})()}function qg(e){return qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qg(e)}function aCe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s&&fA(e,s)}function fA(e,s){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},fA(e,s)}function l0(e){return iCe(e)||nCe(e)||aB(e)||rCe()}function rCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aB(e,s){if(e){if(typeof e=="string")return hA(e,s);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return hA(e,s)}}function nCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iCe(e){if(Array.isArray(e))return hA(e)}function hA(e,s){(s==null||s>e.length)&&(s=e.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=e[a];return r}function PM(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ye(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?PM(Object(a),!0).forEach(function(r){qt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PM(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function qt(e,s,a){return s=rB(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function rB(e){var s=lCe(e,"string");return i0(s)=="symbol"?s:s+""}function lCe(e,s){if(i0(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,s);if(i0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}var oCe={xAxis:["bottom","top"],yAxis:["left","right"]},cCe={width:"100%",height:"100%"},nB={x:0,y:0};function hp(e){return e}var dCe=function(s,a){return a==="horizontal"?s.x:a==="vertical"?s.y:a==="centric"?s.angle:s.radius},uCe=function(s,a,r,n){var i=a.find(function(h){return h&&h.index===r});if(i){if(s==="horizontal")return{x:i.coordinate,y:n.y};if(s==="vertical")return{x:n.x,y:i.coordinate};if(s==="centric"){var l=i.coordinate,o=n.radius;return Ye(Ye(Ye({},n),Ir(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}var d=i.coordinate,u=n.angle;return Ye(Ye(Ye({},n),Ir(n.cx,n.cy,d,u)),{},{angle:u,radius:d})}return nB},Rb=function(s,a){var r=a.graphicalItems,n=a.dataStartIndex,i=a.dataEndIndex,l=(r??[]).reduce(function(o,d){var u=d.props.data;return u&&u.length?[].concat(l0(o),l0(u)):o},[]);return l.length>0?l:s&&s.length&&mt(n)&&mt(i)?s.slice(n,i+1):[]};function iB(e){return e==="number"?[0,"auto"]:void 0}var xA=function(s,a,r,n){var i=s.graphicalItems,l=s.tooltipAxis,o=Rb(a,s);return r<0||!i||!i.length||r>=o.length?null:i.reduce(function(d,u){var h,f=(h=u.props.data)!==null&&h!==void 0?h:a;f&&s.dataStartIndex+s.dataEndIndex!==0&&s.dataEndIndex-s.dataStartIndex>=r&&(f=f.slice(s.dataStartIndex,s.dataEndIndex+1));var x;if(l.dataKey&&!l.allowDuplicatedCategory){var g=f===void 0?o:f;x=Qp(g,l.dataKey,n)}else x=f&&f[r]||o[r];return x?[].concat(l0(d),[az(u,x)]):d},[])},DM=function(s,a,r,n){var i=n||{x:s.chartX,y:s.chartY},l=dCe(i,r),o=s.orderedTooltipTicks,d=s.tooltipAxis,u=s.tooltipTicks,h=T1e(l,o,u,d);if(h>=0&&u){var f=u[h]&&u[h].value,x=xA(s,a,h,f),g=uCe(r,o,h,i);return{activeTooltipIndex:h,activeLabel:f,activePayload:x,activeCoordinate:g}}return null},mCe=function(s,a){var r=a.axes,n=a.graphicalItems,i=a.axisType,l=a.axisIdKey,o=a.stackGroups,d=a.dataStartIndex,u=a.dataEndIndex,h=s.layout,f=s.children,x=s.stackOffset,g=ez(h,i);return r.reduce(function(v,b){var y,j=b.type.defaultProps!==void 0?Ye(Ye({},b.type.defaultProps),b.props):b.props,w=j.type,A=j.dataKey,O=j.allowDataOverflow,C=j.allowDuplicatedCategory,E=j.scale,S=j.ticks,D=j.includeHidden,M=j[l];if(v[M])return v;var U=Rb(s.data,{graphicalItems:n.filter(function(P){var Y,J=l in P.props?P.props[l]:(Y=P.type.defaultProps)===null||Y===void 0?void 0:Y[l];return J===M}),dataStartIndex:d,dataEndIndex:u}),I=U.length,k,z,_;FEe(j.domain,O,w)&&(k=P2(j.domain,null,O),g&&(w==="number"||E!=="auto")&&(_=Zm(U,A,"category")));var q=iB(w);if(!k||k.length===0){var L,Q=(L=j.domain)!==null&&L!==void 0?L:q;if(A){if(k=Zm(U,A,w),w==="category"&&g){var X=vfe(k);C&&X?(z=k,k=kg(0,I)):C||(k=WD(Q,k,b).reduce(function(P,Y){return P.indexOf(Y)>=0?P:[].concat(l0(P),[Y])},[]))}else if(w==="category")C?k=k.filter(function(P){return P!==""&&!Ss(P)}):k=WD(Q,k,b).reduce(function(P,Y){return P.indexOf(Y)>=0||Y===""||Ss(Y)?P:[].concat(l0(P),[Y])},[]);else if(w==="number"){var W=R1e(U,n.filter(function(P){var Y,J,K=l in P.props?P.props[l]:(Y=P.type.defaultProps)===null||Y===void 0?void 0:Y[l],se="hide"in P.props?P.props.hide:(J=P.type.defaultProps)===null||J===void 0?void 0:J.hide;return K===M&&(D||!se)}),A,i,h);W&&(k=W)}g&&(w==="number"||E!=="auto")&&(_=Zm(U,A,"category"))}else g?k=kg(0,I):o&&o[M]&&o[M].hasStack&&w==="number"?k=x==="expand"?[0,1]:sz(o[M].stackGroups,d,u):k=ZU(U,n.filter(function(P){var Y=l in P.props?P.props[l]:P.type.defaultProps[l],J="hide"in P.props?P.props.hide:P.type.defaultProps.hide;return Y===M&&(D||!J)}),w,h,!0);if(w==="number")k=mA(f,k,M,i,S),Q&&(k=P2(Q,k,O));else if(w==="category"&&Q){var ee=Q,V=k.every(function(P){return ee.indexOf(P)>=0});V&&(k=ee)}}return Ye(Ye({},v),{},qt({},M,Ye(Ye({},j),{},{axisType:i,domain:k,categoricalDomain:_,duplicateDomain:z,originalDomain:(y=j.domain)!==null&&y!==void 0?y:q,isCategorical:g,layout:h})))},{})},fCe=function(s,a){var r=a.graphicalItems,n=a.Axis,i=a.axisType,l=a.axisIdKey,o=a.stackGroups,d=a.dataStartIndex,u=a.dataEndIndex,h=s.layout,f=s.children,x=Rb(s.data,{graphicalItems:r,dataStartIndex:d,dataEndIndex:u}),g=x.length,v=ez(h,i),b=-1;return r.reduce(function(y,j){var w=j.type.defaultProps!==void 0?Ye(Ye({},j.type.defaultProps),j.props):j.props,A=w[l],O=iB("number");if(!y[A]){b++;var C;return v?C=kg(0,g):o&&o[A]&&o[A].hasStack?(C=sz(o[A].stackGroups,d,u),C=mA(f,C,A,i)):(C=P2(O,ZU(x,r.filter(function(E){var S,D,M=l in E.props?E.props[l]:(S=E.type.defaultProps)===null||S===void 0?void 0:S[l],U="hide"in E.props?E.props.hide:(D=E.type.defaultProps)===null||D===void 0?void 0:D.hide;return M===A&&!U}),"number",h),n.defaultProps.allowDataOverflow),C=mA(f,C,A,i)),Ye(Ye({},y),{},qt({},A,Ye(Ye({axisType:i},n.defaultProps),{},{hide:!0,orientation:fi(oCe,"".concat(i,".").concat(b%2),null),domain:C,originalDomain:O,isCategorical:v,layout:h})))}return y},{})},hCe=function(s,a){var r=a.axisType,n=r===void 0?"xAxis":r,i=a.AxisComp,l=a.graphicalItems,o=a.stackGroups,d=a.dataStartIndex,u=a.dataEndIndex,h=s.children,f="".concat(n,"Id"),x=Di(h,i),g={};return x&&x.length?g=mCe(s,{axes:x,graphicalItems:l,axisType:n,axisIdKey:f,stackGroups:o,dataStartIndex:d,dataEndIndex:u}):l&&l.length&&(g=fCe(s,{Axis:i,graphicalItems:l,axisType:n,axisIdKey:f,stackGroups:o,dataStartIndex:d,dataEndIndex:u})),g},xCe=function(s){var a=To(s),r=Il(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:DE(r,function(n){return n.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Ng(a,r)}},MM=function(s){var a=s.children,r=s.defaultShowTooltip,n=kn(a,Yu),i=0,l=0;return s.data&&s.data.length!==0&&(l=s.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(i=n.props.startIndex),n.props.endIndex>=0&&(l=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!r}},pCe=function(s){return!s||!s.length?!1:s.some(function(a){var r=Fl(a&&a.type);return r&&r.indexOf("Bar")>=0})},LM=function(s){return s==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:s==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:s==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},gCe=function(s,a){var r=s.props,n=s.graphicalItems,i=s.xAxisMap,l=i===void 0?{}:i,o=s.yAxisMap,d=o===void 0?{}:o,u=r.width,h=r.height,f=r.children,x=r.margin||{},g=kn(f,Yu),v=kn(f,ku),b=Object.keys(d).reduce(function(C,E){var S=d[E],D=S.orientation;return!S.mirror&&!S.hide?Ye(Ye({},C),{},qt({},D,C[D]+S.width)):C},{left:x.left||0,right:x.right||0}),y=Object.keys(l).reduce(function(C,E){var S=l[E],D=S.orientation;return!S.mirror&&!S.hide?Ye(Ye({},C),{},qt({},D,fi(C,"".concat(D))+S.height)):C},{top:x.top||0,bottom:x.bottom||0}),j=Ye(Ye({},y),b),w=j.bottom;g&&(j.bottom+=g.props.height||Yu.defaultProps.height),v&&a&&(j=O1e(j,n,r,a));var A=u-j.left-j.right,O=h-j.top-j.bottom;return Ye(Ye({brushBottom:w},j),{},{width:Math.max(A,0),height:Math.max(O,0)})},bCe=function(s,a){if(a==="xAxis")return s[a].width;if(a==="yAxis")return s[a].height},lB=function(s){var a=s.chartName,r=s.GraphicalChild,n=s.defaultTooltipEventType,i=n===void 0?"axis":n,l=s.validateTooltipEventTypes,o=l===void 0?["axis"]:l,d=s.axisComponents,u=s.legendContent,h=s.formatAxisMap,f=s.defaultProps,x=function(j,w){var A=w.graphicalItems,O=w.stackGroups,C=w.offset,E=w.updateId,S=w.dataStartIndex,D=w.dataEndIndex,M=j.barSize,U=j.layout,I=j.barGap,k=j.barCategoryGap,z=j.maxBarSize,_=LM(U),q=_.numericAxisName,L=_.cateAxisName,Q=pCe(A),X=[];return A.forEach(function(W,ee){var V=Rb(j.data,{graphicalItems:[W],dataStartIndex:S,dataEndIndex:D}),P=W.type.defaultProps!==void 0?Ye(Ye({},W.type.defaultProps),W.props):W.props,Y=P.dataKey,J=P.maxBarSize,K=P["".concat(q,"Id")],se=P["".concat(L,"Id")],G={},te=d.reduce(function(qe,Ce){var Le=w["".concat(Ce.axisType,"Map")],Se=P["".concat(Ce.axisType,"Id")];Le&&Le[Se]||Ce.axisType==="zAxis"||dd();var _e=Le[Se];return Ye(Ye({},qe),{},qt(qt({},Ce.axisType,_e),"".concat(Ce.axisType,"Ticks"),Il(_e)))},G),Z=te[L],ue=te["".concat(L,"Ticks")],re=O&&O[K]&&O[K].hasStack&&V1e(W,O[K].stackGroups),H=Fl(W.type).indexOf("Bar")>=0,pe=Ng(Z,ue),B=[],oe=Q&&_1e({barSize:M,stackGroups:O,totalSize:bCe(te,L)});if(H){var fe,ne,de=Ss(J)?z:J,we=(fe=(ne=Ng(Z,ue,!0))!==null&&ne!==void 0?ne:de)!==null&&fe!==void 0?fe:0;B=k1e({barGap:I,barCategoryGap:k,bandSize:we!==pe?we:pe,sizeList:oe[se],maxBarSize:de}),we!==pe&&(B=B.map(function(qe){return Ye(Ye({},qe),{},{position:Ye(Ye({},qe.position),{},{offset:qe.position.offset-we/2})})}))}var Ue=W&&W.type&&W.type.getComposedData;Ue&&X.push({props:Ye(Ye({},Ue(Ye(Ye({},te),{},{displayedData:V,props:j,dataKey:Y,item:W,bandSize:pe,barPosition:B,offset:C,stackedData:re,layout:U,dataStartIndex:S,dataEndIndex:D}))),{},qt(qt(qt({key:W.key||"item-".concat(ee)},q,te[q]),L,te[L]),"animationId",E)),childIndex:Ife(W,j.children),item:W})}),X},g=function(j,w){var A=j.props,O=j.dataStartIndex,C=j.dataEndIndex,E=j.updateId;if(!iR({props:A}))return null;var S=A.children,D=A.layout,M=A.stackOffset,U=A.data,I=A.reverseStackOrder,k=LM(D),z=k.numericAxisName,_=k.cateAxisName,q=Di(S,r),L=$1e(U,q,"".concat(z,"Id"),"".concat(_,"Id"),M,I),Q=d.reduce(function(P,Y){var J="".concat(Y.axisType,"Map");return Ye(Ye({},P),{},qt({},J,hCe(A,Ye(Ye({},Y),{},{graphicalItems:q,stackGroups:Y.axisType===z&&L,dataStartIndex:O,dataEndIndex:C}))))},{}),X=gCe(Ye(Ye({},Q),{},{props:A,graphicalItems:q}),w==null?void 0:w.legendBBox);Object.keys(Q).forEach(function(P){Q[P]=h(A,Q[P],X,P.replace("Map",""),a)});var W=Q["".concat(_,"Map")],ee=xCe(W),V=x(A,Ye(Ye({},Q),{},{dataStartIndex:O,dataEndIndex:C,updateId:E,graphicalItems:q,stackGroups:L,offset:X}));return Ye(Ye({formattedGraphicalItems:V,graphicalItems:q,offset:X,stackGroups:L},ee),Q)},v=(function(y){function j(w){var A,O,C;return YEe(this,j),C=eCe(this,j,[w]),qt(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),qt(C,"accessibilityManager",new LEe),qt(C,"handleLegendBBoxUpdate",function(E){if(E){var S=C.state,D=S.dataStartIndex,M=S.dataEndIndex,U=S.updateId;C.setState(Ye({legendBBox:E},g({props:C.props,dataStartIndex:D,dataEndIndex:M,updateId:U},Ye(Ye({},C.state),{},{legendBBox:E}))))}}),qt(C,"handleReceiveSyncEvent",function(E,S,D){if(C.props.syncId===E){if(D===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(S)}}),qt(C,"handleBrushChange",function(E){var S=E.startIndex,D=E.endIndex;if(S!==C.state.dataStartIndex||D!==C.state.dataEndIndex){var M=C.state.updateId;C.setState(function(){return Ye({dataStartIndex:S,dataEndIndex:D},g({props:C.props,dataStartIndex:S,dataEndIndex:D,updateId:M},C.state))}),C.triggerSyncEvent({dataStartIndex:S,dataEndIndex:D})}}),qt(C,"handleMouseEnter",function(E){var S=C.getMouseInfo(E);if(S){var D=Ye(Ye({},S),{},{isTooltipActive:!0});C.setState(D),C.triggerSyncEvent(D);var M=C.props.onMouseEnter;is(M)&&M(D,E)}}),qt(C,"triggeredAfterMouseMove",function(E){var S=C.getMouseInfo(E),D=S?Ye(Ye({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(D),C.triggerSyncEvent(D);var M=C.props.onMouseMove;is(M)&&M(D,E)}),qt(C,"handleItemMouseEnter",function(E){C.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),qt(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),qt(C,"handleMouseMove",function(E){E.persist(),C.throttleTriggeredAfterMouseMove(E)}),qt(C,"handleMouseLeave",function(E){C.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};C.setState(S),C.triggerSyncEvent(S);var D=C.props.onMouseLeave;is(D)&&D(S,E)}),qt(C,"handleOuterEvent",function(E){var S=Ofe(E),D=fi(C.props,"".concat(S));if(S&&is(D)){var M,U;/.*touch.*/i.test(S)?U=C.getMouseInfo(E.changedTouches[0]):U=C.getMouseInfo(E),D((M=U)!==null&&M!==void 0?M:{},E)}}),qt(C,"handleClick",function(E){var S=C.getMouseInfo(E);if(S){var D=Ye(Ye({},S),{},{isTooltipActive:!0});C.setState(D),C.triggerSyncEvent(D);var M=C.props.onClick;is(M)&&M(D,E)}}),qt(C,"handleMouseDown",function(E){var S=C.props.onMouseDown;if(is(S)){var D=C.getMouseInfo(E);S(D,E)}}),qt(C,"handleMouseUp",function(E){var S=C.props.onMouseUp;if(is(S)){var D=C.getMouseInfo(E);S(D,E)}}),qt(C,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),qt(C,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&C.handleMouseDown(E.changedTouches[0])}),qt(C,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&C.handleMouseUp(E.changedTouches[0])}),qt(C,"handleDoubleClick",function(E){var S=C.props.onDoubleClick;if(is(S)){var D=C.getMouseInfo(E);S(D,E)}}),qt(C,"handleContextMenu",function(E){var S=C.props.onContextMenu;if(is(S)){var D=C.getMouseInfo(E);S(D,E)}}),qt(C,"triggerSyncEvent",function(E){C.props.syncId!==void 0&&Nj.emit(wj,C.props.syncId,E,C.eventEmitterSymbol)}),qt(C,"applySyncEvent",function(E){var S=C.props,D=S.layout,M=S.syncMethod,U=C.state.updateId,I=E.dataStartIndex,k=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)C.setState(Ye({dataStartIndex:I,dataEndIndex:k},g({props:C.props,dataStartIndex:I,dataEndIndex:k,updateId:U},C.state)));else if(E.activeTooltipIndex!==void 0){var z=E.chartX,_=E.chartY,q=E.activeTooltipIndex,L=C.state,Q=L.offset,X=L.tooltipTicks;if(!Q)return;if(typeof M=="function")q=M(X,E);else if(M==="value"){q=-1;for(var W=0;W<X.length;W++)if(X[W].value===E.activeLabel){q=W;break}}var ee=Ye(Ye({},Q),{},{x:Q.left,y:Q.top}),V=Math.min(z,ee.x+ee.width),P=Math.min(_,ee.y+ee.height),Y=X[q]&&X[q].value,J=xA(C.state,C.props.data,q),K=X[q]?{x:D==="horizontal"?X[q].coordinate:V,y:D==="horizontal"?P:X[q].coordinate}:nB;C.setState(Ye(Ye({},E),{},{activeLabel:Y,activeCoordinate:K,activePayload:J,activeTooltipIndex:q}))}else C.setState(E)}),qt(C,"renderCursor",function(E){var S,D=C.state,M=D.isTooltipActive,U=D.activeCoordinate,I=D.activePayload,k=D.offset,z=D.activeTooltipIndex,_=D.tooltipAxisBandSize,q=C.getTooltipEventType(),L=(S=E.props.active)!==null&&S!==void 0?S:M,Q=C.props.layout,X=E.key||"_recharts-cursor";return Oe.createElement(HEe,{key:X,activeCoordinate:U,activePayload:I,activeTooltipIndex:z,chartName:a,element:E,isActive:L,layout:Q,offset:k,tooltipAxisBandSize:_,tooltipEventType:q})}),qt(C,"renderPolarAxis",function(E,S,D){var M=fi(E,"type.axisType"),U=fi(C.state,"".concat(M,"Map")),I=E.type.defaultProps,k=I!==void 0?Ye(Ye({},I),E.props):E.props,z=U&&U[k["".concat(M,"Id")]];return T.cloneElement(E,Ye(Ye({},z),{},{className:Es(M,z.className),key:E.key||"".concat(S,"-").concat(D),ticks:Il(z,!0)}))}),qt(C,"renderPolarGrid",function(E){var S=E.props,D=S.radialLines,M=S.polarAngles,U=S.polarRadius,I=C.state,k=I.radiusAxisMap,z=I.angleAxisMap,_=To(k),q=To(z),L=q.cx,Q=q.cy,X=q.innerRadius,W=q.outerRadius;return T.cloneElement(E,{polarAngles:Array.isArray(M)?M:Il(q,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(U)?U:Il(_,!0).map(function(ee){return ee.coordinate}),cx:L,cy:Q,innerRadius:X,outerRadius:W,key:E.key||"polar-grid",radialLines:D})}),qt(C,"renderLegend",function(){var E=C.state.formattedGraphicalItems,S=C.props,D=S.children,M=S.width,U=S.height,I=C.props.margin||{},k=M-(I.left||0)-(I.right||0),z=YU({children:D,formattedGraphicalItems:E,legendWidth:k,legendContent:u});if(!z)return null;var _=z.item,q=RM(z,VEe);return T.cloneElement(_,Ye(Ye({},q),{},{chartWidth:M,chartHeight:U,margin:I,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),qt(C,"renderTooltip",function(){var E,S=C.props,D=S.children,M=S.accessibilityLayer,U=kn(D,Ci);if(!U)return null;var I=C.state,k=I.isTooltipActive,z=I.activeCoordinate,_=I.activePayload,q=I.activeLabel,L=I.offset,Q=(E=U.props.active)!==null&&E!==void 0?E:k;return T.cloneElement(U,{viewBox:Ye(Ye({},L),{},{x:L.left,y:L.top}),active:Q,label:q,payload:Q?_:[],coordinate:z,accessibilityLayer:M})}),qt(C,"renderBrush",function(E){var S=C.props,D=S.margin,M=S.data,U=C.state,I=U.offset,k=U.dataStartIndex,z=U.dataEndIndex,_=U.updateId;return T.cloneElement(E,{key:E.key||"_recharts-brush",onChange:cp(C.handleBrushChange,E.props.onChange),data:M,x:mt(E.props.x)?E.props.x:I.left,y:mt(E.props.y)?E.props.y:I.top+I.height+I.brushBottom-(D.bottom||0),width:mt(E.props.width)?E.props.width:I.width,startIndex:k,endIndex:z,updateId:"brush-".concat(_)})}),qt(C,"renderReferenceElement",function(E,S,D){if(!E)return null;var M=C,U=M.clipPathId,I=C.state,k=I.xAxisMap,z=I.yAxisMap,_=I.offset,q=E.type.defaultProps||{},L=E.props,Q=L.xAxisId,X=Q===void 0?q.xAxisId:Q,W=L.yAxisId,ee=W===void 0?q.yAxisId:W;return T.cloneElement(E,{key:E.key||"".concat(S,"-").concat(D),xAxis:k[X],yAxis:z[ee],viewBox:{x:_.left,y:_.top,width:_.width,height:_.height},clipPathId:U})}),qt(C,"renderActivePoints",function(E){var S=E.item,D=E.activePoint,M=E.basePoint,U=E.childIndex,I=E.isRange,k=[],z=S.props.key,_=S.item.type.defaultProps!==void 0?Ye(Ye({},S.item.type.defaultProps),S.item.props):S.item.props,q=_.activeDot,L=_.dataKey,Q=Ye(Ye({index:U,dataKey:L,cx:D.x,cy:D.y,r:4,fill:lC(S.item),strokeWidth:2,stroke:"#fff",payload:D.payload,value:D.value},bs(q,!1)),Kp(q));return k.push(j.renderActiveDot(q,Q,"".concat(z,"-activePoint-").concat(U))),M?k.push(j.renderActiveDot(q,Ye(Ye({},Q),{},{cx:M.x,cy:M.y}),"".concat(z,"-basePoint-").concat(U))):I&&k.push(null),k}),qt(C,"renderGraphicChild",function(E,S,D){var M=C.filterFormatItem(E,S,D);if(!M)return null;var U=C.getTooltipEventType(),I=C.state,k=I.isTooltipActive,z=I.tooltipAxis,_=I.activeTooltipIndex,q=I.activeLabel,L=C.props.children,Q=kn(L,Ci),X=M.props,W=X.points,ee=X.isRange,V=X.baseLine,P=M.item.type.defaultProps!==void 0?Ye(Ye({},M.item.type.defaultProps),M.item.props):M.item.props,Y=P.activeDot,J=P.hide,K=P.activeBar,se=P.activeShape,G=!!(!J&&k&&Q&&(Y||K||se)),te={};U!=="axis"&&Q&&Q.props.trigger==="click"?te={onClick:cp(C.handleItemMouseEnter,E.props.onClick)}:U!=="axis"&&(te={onMouseLeave:cp(C.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:cp(C.handleItemMouseEnter,E.props.onMouseEnter)});var Z=T.cloneElement(E,Ye(Ye({},M.props),te));function ue(Ce){return typeof z.dataKey=="function"?z.dataKey(Ce.payload):null}if(G)if(_>=0){var re,H;if(z.dataKey&&!z.allowDuplicatedCategory){var pe=typeof z.dataKey=="function"?ue:"payload.".concat(z.dataKey.toString());re=Qp(W,pe,q),H=ee&&V&&Qp(V,pe,q)}else re=W==null?void 0:W[_],H=ee&&V&&V[_];if(se||K){var B=E.props.activeIndex!==void 0?E.props.activeIndex:_;return[T.cloneElement(E,Ye(Ye(Ye({},M.props),te),{},{activeIndex:B})),null,null]}if(!Ss(re))return[Z].concat(l0(C.renderActivePoints({item:M,activePoint:re,basePoint:H,childIndex:_,isRange:ee})))}else{var oe,fe=(oe=C.getItemByXY(C.state.activeCoordinate))!==null&&oe!==void 0?oe:{graphicalItem:Z},ne=fe.graphicalItem,de=ne.item,we=de===void 0?E:de,Ue=ne.childIndex,qe=Ye(Ye(Ye({},M.props),te),{},{activeIndex:Ue});return[T.cloneElement(we,qe),null,null]}return ee?[Z,null,null]:[Z,null]}),qt(C,"renderCustomized",function(E,S,D){return T.cloneElement(E,Ye(Ye({key:"recharts-customized-".concat(D)},C.props),C.state))}),qt(C,"renderMap",{CartesianGrid:{handler:hp,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:hp},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:hp},YAxis:{handler:hp},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((A=w.id)!==null&&A!==void 0?A:gh("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=J7(C.triggeredAfterMouseMove,(O=w.throttleDelay)!==null&&O!==void 0?O:1e3/60),C.state={},C}return aCe(j,y),ZEe(j,[{key:"componentDidMount",value:function(){var A,O;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var A=this.props,O=A.children,C=A.data,E=A.height,S=A.layout,D=kn(O,Ci);if(D){var M=D.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,I=xA(this.state,C,M,U),k=this.state.tooltipTicks[M].coordinate,z=(this.state.offset.top+E)/2,_=S==="horizontal",q=_?{x:k,y:z}:{y:k,x:z},L=this.state.formattedGraphicalItems.find(function(X){var W=X.item;return W.type.name==="Scatter"});L&&(q=Ye(Ye({},q),L.props.points[M].tooltipPosition),I=L.props.points[M].tooltipPayload);var Q={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:U,activePayload:I,activeCoordinate:q};this.setState(Q),this.renderCursor(D),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(A,O){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==O.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==A.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==A.margin){var C,E;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(A){s2([kn(A.children,Ci)],[kn(this.props.children,Ci)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var A=kn(this.props.children,Ci);if(A&&typeof A.props.shared=="boolean"){var O=A.props.shared?"axis":"item";return o.indexOf(O)>=0?O:i}return i}},{key:"getMouseInfo",value:function(A){if(!this.container)return null;var O=this.container,C=O.getBoundingClientRect(),E=bge(C),S={chartX:Math.round(A.pageX-E.left),chartY:Math.round(A.pageY-E.top)},D=C.width/O.offsetWidth||1,M=this.inRange(S.chartX,S.chartY,D);if(!M)return null;var U=this.state,I=U.xAxisMap,k=U.yAxisMap,z=this.getTooltipEventType(),_=DM(this.state,this.props.data,this.props.layout,M);if(z!=="axis"&&I&&k){var q=To(I).scale,L=To(k).scale,Q=q&&q.invert?q.invert(S.chartX):null,X=L&&L.invert?L.invert(S.chartY):null;return Ye(Ye({},S),{},{xValue:Q,yValue:X},_)}return _?Ye(Ye({},S),_):null}},{key:"inRange",value:function(A,O){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,S=A/C,D=O/C;if(E==="horizontal"||E==="vertical"){var M=this.state.offset,U=S>=M.left&&S<=M.left+M.width&&D>=M.top&&D<=M.top+M.height;return U?{x:S,y:D}:null}var I=this.state,k=I.angleAxisMap,z=I.radiusAxisMap;if(k&&z){var _=To(k);return JD({x:S,y:D},_)}return null}},{key:"parseEventsOfWrapper",value:function(){var A=this.props.children,O=this.getTooltipEventType(),C=kn(A,Ci),E={};C&&O==="axis"&&(C.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Kp(this.props,this.handleOuterEvent);return Ye(Ye({},S),E)}},{key:"addListener",value:function(){Nj.on(wj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Nj.removeListener(wj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(A,O,C){for(var E=this.state.formattedGraphicalItems,S=0,D=E.length;S<D;S++){var M=E[S];if(M.item===A||M.props.key===A.key||O===Fl(M.item.type)&&C===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var A=this.clipPathId,O=this.state.offset,C=O.left,E=O.top,S=O.height,D=O.width;return Oe.createElement("defs",null,Oe.createElement("clipPath",{id:A},Oe.createElement("rect",{x:C,y:E,height:S,width:D})))}},{key:"getXScales",value:function(){var A=this.state.xAxisMap;return A?Object.entries(A).reduce(function(O,C){var E=IM(C,2),S=E[0],D=E[1];return Ye(Ye({},O),{},qt({},S,D.scale))},{}):null}},{key:"getYScales",value:function(){var A=this.state.yAxisMap;return A?Object.entries(A).reduce(function(O,C){var E=IM(C,2),S=E[0],D=E[1];return Ye(Ye({},O),{},qt({},S,D.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(A){var O;return(O=this.state.xAxisMap)===null||O===void 0||(O=O[A])===null||O===void 0?void 0:O.scale}},{key:"getYScaleByAxisId",value:function(A){var O;return(O=this.state.yAxisMap)===null||O===void 0||(O=O[A])===null||O===void 0?void 0:O.scale}},{key:"getItemByXY",value:function(A){var O=this.state,C=O.formattedGraphicalItems,E=O.activeItem;if(C&&C.length)for(var S=0,D=C.length;S<D;S++){var M=C[S],U=M.props,I=M.item,k=I.type.defaultProps!==void 0?Ye(Ye({},I.type.defaultProps),I.props):I.props,z=Fl(I.type);if(z==="Bar"){var _=(U.data||[]).find(function(X){return MSe(A,X)});if(_)return{graphicalItem:M,payload:_}}else if(z==="RadialBar"){var q=(U.data||[]).find(function(X){return JD(A,X)});if(q)return{graphicalItem:M,payload:q}}else if(Eb(M,E)||Cb(M,E)||Xf(M,E)){var L=Eje({graphicalItem:M,activeTooltipItem:E,itemData:k.data}),Q=k.activeIndex===void 0?L:k.activeIndex;return{graphicalItem:Ye(Ye({},M),{},{childIndex:Q}),payload:Xf(M,E)?k.data[L]:M.props.data[L]}}}return null}},{key:"render",value:function(){var A=this;if(!iR(this))return null;var O=this.props,C=O.children,E=O.className,S=O.width,D=O.height,M=O.style,U=O.compact,I=O.title,k=O.desc,z=RM(O,GEe),_=bs(z,!1);if(U)return Oe.createElement(hM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Oe.createElement(r2,wu({},_,{width:S,height:D,title:I,desc:k}),this.renderClipPath(),oR(C,this.renderMap)));if(this.props.accessibilityLayer){var q,L;_.tabIndex=(q=this.props.tabIndex)!==null&&q!==void 0?q:0,_.role=(L=this.props.role)!==null&&L!==void 0?L:"application",_.onKeyDown=function(X){A.accessibilityManager.keyboardEvent(X)},_.onFocus=function(){A.accessibilityManager.focus()}}var Q=this.parseEventsOfWrapper();return Oe.createElement(hM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Oe.createElement("div",wu({className:Es("recharts-wrapper",E),style:Ye({position:"relative",cursor:"default",width:S,height:D},M)},Q,{ref:function(W){A.container=W}}),Oe.createElement(r2,wu({},_,{width:S,height:D,title:I,desc:k,style:cCe}),this.renderClipPath(),oR(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(T.Component);qt(v,"displayName",a),qt(v,"defaultProps",Ye({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),qt(v,"getDerivedStateFromProps",function(y,j){var w=y.dataKey,A=y.data,O=y.children,C=y.width,E=y.height,S=y.layout,D=y.stackOffset,M=y.margin,U=j.dataStartIndex,I=j.dataEndIndex;if(j.updateId===void 0){var k=MM(y);return Ye(Ye(Ye({},k),{},{updateId:0},g(Ye(Ye({props:y},k),{},{updateId:0}),j)),{},{prevDataKey:w,prevData:A,prevWidth:C,prevHeight:E,prevLayout:S,prevStackOffset:D,prevMargin:M,prevChildren:O})}if(w!==j.prevDataKey||A!==j.prevData||C!==j.prevWidth||E!==j.prevHeight||S!==j.prevLayout||D!==j.prevStackOffset||!_u(M,j.prevMargin)){var z=MM(y),_={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},q=Ye(Ye({},DM(j,A,S)),{},{updateId:j.updateId+1}),L=Ye(Ye(Ye({},z),_),q);return Ye(Ye(Ye({},L),g(Ye({props:y},L),j)),{},{prevDataKey:w,prevData:A,prevWidth:C,prevHeight:E,prevLayout:S,prevStackOffset:D,prevMargin:M,prevChildren:O})}if(!s2(O,j.prevChildren)){var Q,X,W,ee,V=kn(O,Yu),P=V&&(Q=(X=V.props)===null||X===void 0?void 0:X.startIndex)!==null&&Q!==void 0?Q:U,Y=V&&(W=(ee=V.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&W!==void 0?W:I,J=P!==U||Y!==I,K=!Ss(A),se=K&&!J?j.updateId:j.updateId+1;return Ye(Ye({updateId:se},g(Ye(Ye({props:y},j),{},{updateId:se,dataStartIndex:P,dataEndIndex:Y}),j)),{},{prevChildren:O,dataStartIndex:P,dataEndIndex:Y})}return null}),qt(v,"renderActiveDot",function(y,j,w){var A;return T.isValidElement(y)?A=T.cloneElement(y,j):is(y)?A=y(j):A=Oe.createElement(cC,j),Oe.createElement(Ca,{className:"recharts-active-dot",key:w},A)});var b=T.forwardRef(function(j,w){return Oe.createElement(v,wu({},j,{ref:w}))});return b.displayName=v.displayName,b},vCe=lB({chartName:"BarChart",GraphicalChild:wd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Sh},{axisType:"yAxis",AxisComp:jh}],formatAxisMap:Sz}),yCe=lB({chartName:"AreaChart",GraphicalChild:oc,axisComponents:[{axisType:"xAxis",AxisComp:Sh},{axisType:"yAxis",AxisComp:jh}],formatAxisMap:Sz});const zs={DASHBOARD:"adminDashboard.views.dashboard",CUSTOMERS:"adminDashboard.views.customers",PRODUCTS:"adminDashboard.views.products",SETTINGS:"adminDashboard.views.settings",QUOTES:"adminDashboard.views.quotes",MISSING:"adminDashboard.views.missing",IMPORT_REQUESTS:"adminDashboard.views.importRequests",ACCOUNT_REQUESTS:"adminDashboard.views.accountRequests",PARTNER_REQUESTS:"adminDashboard.views.partnerRequests",ACTIVITY_LOGS:"adminDashboard.views.activityLogs",FEEDBACK_CENTER:"adminDashboard.views.feedbackCenter",MESSAGING_CENTER:"adminDashboard.views.messagingCenter",ORDERS_MANAGER:"adminDashboard.views.ordersManager",ABANDONED_CARTS:"adminDashboard.views.abandonedCarts",ADMIN_USERS:"adminDashboard.views.adminUsers",MARKETING:"adminDashboard.views.marketing",PRICING:"adminDashboard.views.pricing",TRADER_TOOLS:"adminDashboard.views.traderTools",SUPPLIER_MARKETPLACE:"adminDashboard.views.supplierMarketplace",MARKETERS:"adminDashboard.views.marketers",INSTALLMENTS:"adminDashboard.views.installments",ADVERTISING:"adminDashboard.views.advertising",TEAM_SETTINGS:"adminDashboard.views.teamSettings",CUSTOMER_PORTAL:"adminDashboard.views.customerPortal",AI_SETTINGS:"adminDashboard.views.aiSettings",AI_TRAINING:"adminDashboard.views.aiTraining",AI_COMMAND_CENTER:"adminDashboard.views.aiCommandCenter",ALTERNATIVES:"adminDashboard.views.alternatives",PRODUCT_IMAGES:"adminDashboard.views.productImages",NOTIFICATIONS:"adminDashboard.views.notifications",INTERNATIONAL_PRICING:"adminDashboard.views.internationalPricing",PERMISSION_CENTER:"adminDashboard.views.permissionCenter",REPORTS_CENTER:"adminDashboard.views.reportsCenter"},xp={navy:"#0B1B3A",gold:"#C8A04F"},NCe=({onLogout:e})=>{const{t:s,i18n:a}=Jt(),[r,n]=T.useState("DASHBOARD"),i=a.dir()==="rtl",{badges:l,markOrdersAsSeen:o,markAccountsAsSeen:d,markQuotesAsSeen:u,markImportsAsSeen:h,markMissingAsSeen:f}=kme(),{canAccess:x,adminUser:g,role:v}=h0(),[b,y]=T.useState([]),[j,w]=T.useState([]),[A,O]=T.useState([]),[C,E]=T.useState([]),[S,D]=T.useState([]),[M,U]=T.useState([]),[I,k]=T.useState([]),[z,_]=T.useState([]),[q,L]=T.useState([]),[Q,X]=T.useState("CONNECTED"),[W,ee]=T.useState(0),[V,P]=T.useState(!1),[Y,J]=T.useState(1),{addToast:K}=Dt();T.useEffect(()=>{se();const B=setInterval(G,3e4);return()=>clearInterval(B)},[]);const se=async()=>{try{const[B,oe,fe,ne,de,we,Ue,qe,Ce]=await Promise.all([xe.getAllOrders(),new Promise(Le=>Le(JSON.parse(localStorage.getItem("b2b_users_sini_v2")||"[]"))),xe.searchProducts(""),xe.getAllQuoteRequests(),xe.getImportRequests(),xe.getAccountOpeningRequests(),xe.getActivityLogs(),xe.getMissingProductRequests(),xe.getAllNotifications()]);y(B),w(oe),O(fe),E(ne),D(de),U(we),k(Ue),_(qe),L(Ce),G()}catch(B){console.error("Failed to load admin data",B),X("DISCONNECTED")}},G=async()=>{P(!0);try{const B=await xe.checkHealth();ee(B.latency),B.latency>500?X("SLOW"):X("CONNECTED")}catch{X("DISCONNECTED")}finally{P(!1)}},te=T.useMemo(()=>{const B=b.filter(_e=>_e.status!==pt.CANCELLED&&_e.status!==pt.REJECTED).reduce((_e,Ze)=>_e+Ze.totalAmount,0),oe=b.filter(_e=>new Date(_e.date).toDateString()===new Date().toDateString()).filter(_e=>_e.status!==pt.CANCELLED&&_e.status!==pt.REJECTED).reduce((_e,Ze)=>_e+Ze.totalAmount,0),fe=b.filter(_e=>_e.status===pt.PENDING).length,ne=b.filter(_e=>_e.status===pt.APPROVED).length,de=b.filter(_e=>_e.status===pt.SHIPPED).length,we=b.filter(_e=>_e.status===pt.CANCELLED).length,Ue=A.filter(_e=>_e.stock<=0).length,qe=A.filter(_e=>_e.price===0).length,Ce=j.filter(_e=>_e.role==="CUSTOMER_OWNER"&&_e.isActive).length,Le=M.filter(_e=>_e.status==="NEW").length,Se=C.filter(_e=>_e.status==="NEW"||_e.status==="UNDER_REVIEW").length;return{totalRevenue:B,todayRevenue:oe,pendingOrders:fe,approvedOrders:ne,shippedOrders:de,cancelledOrders:we,totalOrders:b.length,totalProducts:A.length,outOfStock:Ue,needsPriceUpdate:qe,activeBusinesses:Ce,pendingAccounts:Le,totalUsers:j.length,pendingQuotes:Se}},[b,A,j,M,C]),Z=T.useMemo(()=>({dailyStats:[...Array(30)].map((fe,ne)=>{const de=new Date;return de.setDate(de.getDate()-(29-ne)),de.toISOString().split("T")[0]}).map(fe=>{const ne=b.filter(de=>de.date.startsWith(fe));return{date:fe.slice(5),orders:ne.length,revenue:ne.filter(de=>de.status!==pt.CANCELLED).reduce((de,we)=>de+we.totalAmount,0)}})}),[b]),ue=T.useMemo(()=>{const B={};z.filter(de=>de.source==="SEARCH").forEach(de=>{const we=de.query.trim().toLowerCase();B[we]=(B[we]||0)+1});const oe=Object.entries(B).sort((de,we)=>we[1]-de[1]).slice(0,5),fe={};b.forEach(de=>{de.status!==pt.CANCELLED&&(fe[de.createdByName||de.userId]=(fe[de.createdByName||de.userId]||0)+de.totalAmount)});const ne=Object.entries(fe).sort((de,we)=>we[1]-de[1]).slice(0,5);return{topMissing:oe,topCustomers:ne}},[z,b]),re=T.useMemo(()=>{const B=new Date().toISOString().split("T")[0],oe=I.filter(fe=>fe.createdAt.startsWith(B));return{logins:oe.filter(fe=>fe.eventType==="LOGIN").length,orders:oe.filter(fe=>fe.eventType==="ORDER_CREATED").length,quotes:oe.filter(fe=>fe.eventType==="QUOTE_REQUEST").length,searches:oe.filter(fe=>fe.eventType==="SEARCH_PERFORMED").length}},[I]),H=()=>t.jsxs("div",{className:`flex items-center gap-3 px-4 py-2 rounded-full border text-sm font-bold shadow-sm backdrop-blur-md transition-all ${Q==="CONNECTED"?"bg-emerald-50/90 border-emerald-200 text-emerald-700":Q==="SLOW"?"bg-amber-50/90 border-amber-200 text-amber-700":"bg-red-50/90 border-red-200 text-red-700"}`,children:[t.jsx("div",{className:`w-2.5 h-2.5 rounded-full animate-pulse ${Q==="CONNECTED"?"bg-emerald-500":Q==="SLOW"?"bg-amber-500":"bg-red-500"}`}),t.jsx("span",{className:"hidden md:inline",children:s(Q==="CONNECTED"?"adminDashboard.connected":Q==="SLOW"?"adminDashboard.slowConnection":"adminDashboard.disconnected")}),t.jsxs("span",{className:"font-mono text-xs opacity-70",children:["(",W,"ms)"]}),t.jsx("button",{onClick:G,disabled:V,className:"p-1 hover:bg-black/5 rounded-full transition-colors",children:t.jsx(Qt,{size:14,className:V?"animate-spin":""})})]}),pe=({title:B,value:oe,subValue:fe,icon:ne,colorClass:de,delay:we})=>t.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-md transition-all duration-300 group animate-slide-up",style:{animationDelay:we},children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:B}),t.jsx("h3",{className:"text-2xl font-black text-slate-800 group-hover:text-brand-600 transition-colors",children:oe})]}),t.jsx("div",{className:`p-3 rounded-xl ${de} bg-opacity-10 group-hover:scale-110 transition-transform`,children:Oe.cloneElement(ne,{size:20,className:de.replace("bg-","text-")})})]}),fe&&t.jsx("div",{className:"pt-3 border-t border-slate-50",children:t.jsx("p",{className:"text-xs font-bold text-slate-400",children:fe})})]});return t.jsxs("div",{className:"flex h-screen bg-slate-50 font-sans text-slate-900 overflow-hidden",dir:i?"rtl":"ltr",children:[t.jsxs("aside",{className:"w-72 bg-[#0B1B3A] text-white flex flex-col shadow-2xl z-20 flex-shrink-0",children:[t.jsxs("div",{className:"p-6 border-b border-slate-700/50 bg-[#08142b]",children:[t.jsxs("h1",{className:"text-xl font-black uppercase tracking-wider text-[#C8A04F] font-display flex items-center gap-2",children:[t.jsx(Ln,{size:24})," SINI ADMIN"]}),t.jsx("p",{className:"text-[10px] text-slate-400 mt-1 font-bold tracking-widest uppercase",children:"Wholesale Control Center"})]}),t.jsxs("nav",{className:"flex-1 p-4 space-y-1.5 overflow-y-auto custom-scrollbar",children:[t.jsx("p",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:s("adminDashboard.mainSection")}),x("dashboard")&&t.jsx(Rs,{icon:t.jsx(nE,{size:20}),label:s("adminDashboard.dashboard"),active:r==="DASHBOARD",onClick:()=>n("DASHBOARD")}),x("activity_log")&&t.jsx(Rs,{icon:t.jsx(Gr,{size:20}),label:s("adminDashboard.activityLog"),active:r==="ACTIVITY_LOGS",onClick:()=>n("ACTIVITY_LOGS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(ya,{size:20}),label:s("adminDashboard.feedbackCenter"," "),active:r==="FEEDBACK_CENTER",onClick:()=>n("FEEDBACK_CENTER")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(vr,{size:20}),label:s("adminDashboard.messagingCenter"," "),active:r==="MESSAGING_CENTER",onClick:()=>n("MESSAGING_CENTER")}),t.jsx("p",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mt-4",children:s("adminDashboard.ordersCustomersSection")}),x("orders")&&t.jsx(Rs,{icon:t.jsx(Uu,{size:20}),label:s("adminDashboard.customerOrders"),active:r==="ORDERS_MANAGER",onClick:()=>{n("ORDERS_MANAGER"),o()},badge:l.orders}),x("orders")&&t.jsx(Rs,{icon:t.jsx($a,{size:20}),label:s("adminDashboard.abandonedCarts"," "),active:r==="ABANDONED_CARTS",onClick:()=>n("ABANDONED_CARTS")}),x("account_requests")&&t.jsx(Rs,{icon:t.jsx(sl,{size:20}),label:s("adminDashboard.accountRequests"),active:r==="ACCOUNT_REQUESTS",onClick:()=>{n("ACCOUNT_REQUESTS"),d()},badge:l.accounts}),x("account_requests")&&t.jsx(Rs,{icon:t.jsx(id,{size:20}),label:s("adminDashboard.partnerRequests"," "),active:r==="PARTNER_REQUESTS",onClick:()=>n("PARTNER_REQUESTS")}),x("customers")&&t.jsx(Rs,{icon:t.jsx(Gt,{size:20}),label:s("adminDashboard.customersCRM"),active:r==="CUSTOMERS",onClick:()=>n("CUSTOMERS")}),x("quotes")&&t.jsx(Rs,{icon:t.jsx(Lt,{size:20}),label:s("adminDashboard.quoteRequests"),active:r==="QUOTES",onClick:()=>{n("QUOTES"),u()},badge:l.quotes}),x("imports")&&t.jsx(Rs,{icon:t.jsx(ja,{size:20}),label:s("adminDashboard.importRequests"),active:r==="IMPORT_REQUESTS",onClick:()=>{n("IMPORT_REQUESTS"),h()},badge:l.imports}),x("missing")&&t.jsx(Rs,{icon:t.jsx(ZO,{size:20}),label:s("adminDashboard.missingParts"),active:r==="MISSING",onClick:()=>{n("MISSING"),f()},badge:l.missing}),t.jsx("p",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mt-4",children:s("adminDashboard.settingsSection")}),x("products")&&t.jsx(Rs,{icon:t.jsx(Vo,{size:20}),label:s("adminDashboard.products"),active:r==="PRODUCTS",onClick:()=>n("PRODUCTS")}),x("products")&&t.jsx(Rs,{icon:t.jsx(Pr,{size:20}),label:s("adminDashboard.alternatives"," "),active:r==="ALTERNATIVES",onClick:()=>n("ALTERNATIVES")}),x("products")&&t.jsx(Rs,{icon:t.jsx(Rm,{size:20}),label:s("adminDashboard.productImages"," "),active:r==="PRODUCT_IMAGES",onClick:()=>n("PRODUCT_IMAGES")}),x("users")&&t.jsx(Rs,{icon:t.jsx(Gt,{size:20}),label:s("adminDashboard.users"),active:r==="ADMIN_USERS",onClick:()=>n("ADMIN_USERS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(la,{size:20}),label:s("adminDashboard.systemSettings"),active:r==="SETTINGS",onClick:()=>n("SETTINGS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(ya,{size:20}),label:s("adminDashboard.marketingCenter"),active:r==="MARKETING",onClick:()=>n("MARKETING")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(or,{size:20}),label:s("adminDashboard.pricingCenter"),active:r==="PRICING",onClick:()=>n("PRICING")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(sc,{size:20}),label:s("adminDashboard.traderTools"),active:r==="TRADER_TOOLS",onClick:()=>n("TRADER_TOOLS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(id,{size:20}),label:s("adminDashboard.supplierMarketplace"),active:r==="SUPPLIER_MARKETPLACE",onClick:()=>n("SUPPLIER_MARKETPLACE")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(f0,{size:20}),label:s("adminDashboard.marketers"),active:r==="MARKETERS",onClick:()=>n("MARKETERS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(or,{size:20}),label:s("adminDashboard.installments"),active:r==="INSTALLMENTS",onClick:()=>n("INSTALLMENTS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(ya,{size:20}),label:s("adminDashboard.advertising"),active:r==="ADVERTISING",onClick:()=>n("ADVERTISING")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(Gt,{size:20}),label:s("adminDashboard.teamSettings"),active:r==="TEAM_SETTINGS",onClick:()=>n("TEAM_SETTINGS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(Wo,{size:20}),label:s("adminDashboard.customerPortalSettings"),active:r==="CUSTOMER_PORTAL",onClick:()=>n("CUSTOMER_PORTAL")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(Mn,{size:20}),label:s("adminDashboard.aiSettings"),active:r==="AI_SETTINGS",onClick:()=>n("AI_SETTINGS")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(iF,{size:20}),label:s("adminDashboard.aiTraining","  "),active:r==="AI_TRAINING",onClick:()=>n("AI_TRAINING")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(wf,{size:20}),label:s("adminDashboard.aiCommandCenter","  AI"),active:r==="AI_COMMAND_CENTER",onClick:()=>n("AI_COMMAND_CENTER")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(ja,{size:20}),label:s("adminDashboard.internationalPricing"," "),active:r==="INTERNATIONAL_PRICING",onClick:()=>n("INTERNATIONAL_PRICING")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(Ds,{size:20}),label:s("adminDashboard.permissionCenter"," "),active:r==="PERMISSION_CENTER",onClick:()=>n("PERMISSION_CENTER")}),x("settings_general")&&t.jsx(Rs,{icon:t.jsx(Rr,{size:20}),label:s("adminDashboard.reportsCenter"," "),active:r==="REPORTS_CENTER",onClick:()=>n("REPORTS_CENTER")})]}),t.jsx("div",{className:"p-4 border-t border-slate-700/50 bg-[#08142b]",children:t.jsxs("button",{onClick:e,className:"flex items-center gap-3 text-red-400 hover:text-white text-sm font-bold w-full px-4 py-3 hover:bg-slate-800 rounded-xl transition-colors",children:[t.jsx(iE,{size:18})," ",s("nav.logout")]})})]}),t.jsxs("main",{className:"flex-1 overflow-y-auto bg-slate-50 relative scroll-smooth",children:[t.jsxs("header",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-slate-200 px-8 py-4 flex justify-between items-center shadow-sm",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-800 tracking-tight",children:[r==="DASHBOARD"&&s("adminDashboard.pageTitles.dashboard"),r==="ORDERS_MANAGER"&&s("adminDashboard.pageTitles.ordersManager"),r==="ABANDONED_CARTS"&&s("adminDashboard.pageTitles.abandonedCarts"," "),r==="ACTIVITY_LOGS"&&s("adminDashboard.pageTitles.activityLogs"),r==="FEEDBACK_CENTER"&&s("adminDashboard.pageTitles.feedbackCenter"," "),r==="MESSAGING_CENTER"&&s("adminDashboard.pageTitles.messagingCenter"," "),r==="ACCOUNT_REQUESTS"&&s("adminDashboard.pageTitles.accountRequests"),r==="CUSTOMERS"&&s("adminDashboard.pageTitles.customers"),r==="QUOTES"&&s("adminDashboard.pageTitles.quotes"),r==="IMPORT_REQUESTS"&&s("adminDashboard.pageTitles.imports"),r==="MISSING"&&s("adminDashboard.pageTitles.missing"),r==="SETTINGS"&&s("adminDashboard.pageTitles.settings"),r==="ADMIN_USERS"&&s("adminDashboard.pageTitles.users"),r==="MARKETING"&&s("adminDashboard.pageTitles.marketing"),r==="PRICING"&&s("adminDashboard.pageTitles.pricing"),r==="TRADER_TOOLS"&&s("adminDashboard.pageTitles.traderTools"),r==="SUPPLIER_MARKETPLACE"&&s("adminDashboard.pageTitles.supplierMarketplace"),r==="MARKETERS"&&s("adminDashboard.pageTitles.marketers"),r==="INSTALLMENTS"&&s("adminDashboard.pageTitles.installments"),r==="ADVERTISING"&&s("adminDashboard.pageTitles.advertising"),r==="TEAM_SETTINGS"&&s("adminDashboard.pageTitles.teamSettings"),r==="CUSTOMER_PORTAL"&&s("adminDashboard.pageTitles.customerPortal"),r==="AI_SETTINGS"&&s("adminDashboard.pageTitles.aiSettings"),r==="NOTIFICATIONS"&&s("adminDashboard.pageTitles.notifications",""),r==="INTERNATIONAL_PRICING"&&s("adminDashboard.pageTitles.internationalPricing","  "),r==="PERMISSION_CENTER"&&s("adminDashboard.pageTitles.permissionCenter"," "),r==="REPORTS_CENTER"&&s("adminDashboard.pageTitles.reportsCenter"," "),["PRODUCTS"].includes(r)&&s("adminDashboard.pageTitles.products")]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Lce,{}),t.jsx(H,{}),g&&t.jsx(cE,{user:{id:g.id,username:g.username,email:g.email,phone:"",role:"ADMIN",status:g.isActive?"ACTIVE":"PENDING",createdAt:g.createdAt,hasProfile:!0},onViewAll:()=>n("NOTIFICATIONS")}),t.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"text-left hidden md:block",children:[t.jsx("p",{className:"text-sm font-bold text-slate-800",children:(g==null?void 0:g.fullName)||s("adminDashboard.generalManager")}),t.jsx("p",{className:"text-left text-[10px] text-slate-500 font-mono",children:(v==null?void 0:v.name)||"Super Admin"})]}),t.jsx("div",{className:"w-10 h-10 bg-[#0B1B3A] rounded-full flex items-center justify-center text-[#C8A04F] shadow-md border-2 border-[#C8A04F]",children:t.jsx(Ln,{size:20})})]})]})]}),t.jsxs("div",{className:"p-8 max-w-[1600px] mx-auto space-y-8",children:[r==="DASHBOARD"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(pe,{title:s("adminDashboard.stats.todayRevenue"),value:`${te.todayRevenue.toLocaleString()} ${s("customerDashboard.sar")}`,subValue:`${s("adminDashboard.stats.totalRevenue")}: ${te.totalRevenue.toLocaleString()} ${s("customerDashboard.sar")}`,icon:t.jsx(Rr,{}),colorClass:"text-emerald-600 bg-emerald-100",delay:"0ms"}),t.jsx(pe,{title:s("adminDashboard.stats.pendingOrders"),value:te.pendingOrders,subValue:`${te.approvedOrders} ${s("adminDashboard.stats.approvedOrders")} | ${te.shippedOrders} ${s("adminDashboard.stats.shippedOrders")}`,icon:t.jsx(Uu,{}),colorClass:"text-blue-600 bg-blue-100",delay:"50ms"}),t.jsx(pe,{title:s("adminDashboard.stats.activeBusinesses"),value:te.activeBusinesses,subValue:`${te.pendingAccounts} ${s("adminDashboard.stats.pendingAccounts")}`,icon:t.jsx(Gt,{}),colorClass:"text-[#C8A04F] bg-amber-100",delay:"100ms"}),t.jsx(pe,{title:s("adminDashboard.stats.pendingQuotes"),value:te.pendingQuotes,subValue:s("common.noData"),icon:t.jsx(Lt,{}),colorClass:"text-slate-600 bg-slate-200",delay:"150ms"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm h-[400px] flex flex-col",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(gi,{size:20,className:"text-[#C8A04F]"})," ",s("adminDashboard.charts.dailyRevenue")," (30)"]})}),t.jsx("div",{className:"flex-1 w-full min-h-0",children:t.jsx(kP,{width:"100%",height:"100%",children:t.jsxs(yCe,{data:Z.dailyStats,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"colorRev",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:xp.navy,stopOpacity:.2}),t.jsx("stop",{offset:"95%",stopColor:xp.navy,stopOpacity:0})]})}),t.jsx(qz,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),t.jsx(Sh,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),t.jsx(jh,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),t.jsx(Ci,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},formatter:B=>[`${B.toLocaleString()} ${s("customerDashboard.sar")}`,s("adminDashboard.charts.revenue")]}),t.jsx(oc,{type:"monotone",dataKey:"revenue",stroke:xp.navy,strokeWidth:3,fillOpacity:1,fill:"url(#colorRev)"})]})})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-[#0B1B3A] text-white p-6 rounded-2xl shadow-lg relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#C8A04F] rounded-full blur-[60px] opacity-20"}),t.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2 relative z-10",children:[t.jsx(al,{size:20,className:"text-[#C8A04F]"})," ",s("dashboard.quickActions")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 relative z-10",children:[t.jsx(pp,{label:s("products.addProduct"),icon:t.jsx(Pt,{size:16}),onClick:()=>n("PRODUCTS")}),t.jsx(pp,{label:s("common.refresh"),icon:t.jsx(Qt,{size:16}),onClick:()=>n("PRODUCTS")}),t.jsx(pp,{label:s("adminDashboard.stats.pendingOrders"),icon:t.jsx(os,{size:16}),onClick:()=>n("QUOTES")}),t.jsx(pp,{label:s("common.export"),icon:t.jsx(cr,{size:16}),onClick:()=>K(s("common.loading"),"success")})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm h-[200px] flex flex-col",children:[t.jsx("h3",{className:"font-bold text-slate-800 text-sm mb-4",children:s("adminDashboard.charts.dailyOrders")}),t.jsx("div",{className:"flex-1 w-full min-h-0",children:t.jsx(kP,{width:"100%",height:"100%",children:t.jsxs(vCe,{data:Z.dailyStats,children:[t.jsx(wd,{dataKey:"orders",fill:xp.gold,radius:[4,4,0,0]}),t.jsx(Ci,{cursor:{fill:"transparent"},contentStyle:{borderRadius:"8px"}})]})})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(ZO,{size:20,className:"text-red-500"})," ",s("adminDashboard.charts.topMissingParts")]}),t.jsx("div",{className:"space-y-4",children:ue.topMissing.length>0?ue.topMissing.map(([B,oe],fe)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-white border border-slate-200 flex items-center justify-center text-xs font-bold text-slate-500",children:fe+1}),t.jsx("span",{className:"font-bold text-slate-700",children:B})]}),t.jsxs("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded-md",children:[oe," ",s("common.search")]})]},fe)):t.jsx("p",{className:"text-center text-slate-400 py-8",children:s("common.noData")})}),t.jsxs("button",{onClick:()=>n("MISSING"),className:"w-full mt-4 text-center text-sm font-bold text-brand-600 hover:text-brand-700 py-2",children:[s("common.view")," ",s("adminDashboard.missingParts")]})]}),t.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(Gr,{size:20,className:"text-blue-500"})," ",s("adminDashboard.activityLog")]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(gp,{label:s("adminDashboard.activity.logins"),value:re.logins,color:"blue"}),t.jsx(gp,{label:s("adminDashboard.activity.ordersCreated"),value:re.orders,color:"emerald"}),t.jsx(gp,{label:s("adminDashboard.activity.quotesRequested"),value:re.quotes,color:"amber"}),t.jsx(gp,{label:s("adminDashboard.activity.searchesPerformed"),value:re.searches,color:"slate"})]}),t.jsxs("button",{onClick:()=>n("ACTIVITY_LOGS"),className:"w-full mt-6 bg-slate-50 text-slate-600 font-bold py-3 rounded-xl hover:bg-slate-100 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Ml,{size:16})," ",s("common.view")," ",s("adminDashboard.activityLog")]})]}),t.jsxs("div",{className:"lg:col-span-1 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center gap-2",children:[t.jsx(vr,{size:20,className:"text-slate-400"})," ",s("nav.notifications")]}),t.jsxs("div",{className:"space-y-4",children:[q.slice(0,5).map(B=>t.jsxs("div",{className:"flex gap-3 items-start border-b border-slate-50 pb-3 last:border-0 last:pb-0",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-500 mt-2 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-slate-800 line-clamp-1",children:B.title}),t.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:B.message}),t.jsx("span",{className:"text-[10px] text-slate-400 mt-1 block",children:hs(B.createdAt)})]})]},B.id)),q.length===0&&t.jsx("p",{className:"text-center text-slate-400 py-8",children:s("notifications.noNotifications")})]})]})]})]}),r==="SETTINGS"&&(x("settings_general")?t.jsx(iue,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="ADMIN_USERS"&&(x("users")?t.jsx(e0e,{onRefresh:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="MARKETING"&&(x("settings_general")?t.jsx(n0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="PRICING"&&(x("settings_general")?t.jsx(m0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="TRADER_TOOLS"&&(x("settings_general")?t.jsx(b0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="SUPPLIER_MARKETPLACE"&&(x("settings_general")?t.jsx(y0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="MARKETERS"&&(x("settings_general")?t.jsx(N0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="INSTALLMENTS"&&(x("settings_general")?t.jsx(j0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="ADVERTISING"&&(x("settings_general")?t.jsx(k0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="TEAM_SETTINGS"&&(x("settings_general")?t.jsx(F0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="CUSTOMER_PORTAL"&&(x("settings_general")?t.jsx(z0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="AI_SETTINGS"&&(x("settings_general")?t.jsx(B0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="AI_TRAINING"&&(x("settings_general")?t.jsx(gme,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="AI_COMMAND_CENTER"&&(x("settings_general")?t.jsx(vme,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="INTERNATIONAL_PRICING"&&(x("settings_general")?t.jsx(hme,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="PERMISSION_CENTER"&&(x("settings_general")?t.jsx(xme,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="REPORTS_CENTER"&&(x("settings_general")?t.jsx(pme,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="ORDERS_MANAGER"&&(x("orders")?t.jsx(Mue,{orders:b,users:j,onUpdate:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="ABANDONED_CARTS"&&(x("orders")?t.jsx($0e,{onRefresh:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="ACCOUNT_REQUESTS"&&(x("account_requests")?t.jsx(zue,{requests:M,onUpdate:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="PARTNER_REQUESTS"&&(x("account_requests")?t.jsx(Bue,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="CUSTOMERS"&&(x("customers")?t.jsx(Gue,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="QUOTES"&&(x("quotes")?t.jsx(que,{quotes:C,onUpdate:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="MISSING"&&(x("missing")?t.jsx(Vue,{missingRequests:z}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="IMPORT_REQUESTS"&&(x("imports")?t.jsx(Yue,{requests:S,onUpdate:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="ACTIVITY_LOGS"&&(x("activity_log")?t.jsx(V0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="FEEDBACK_CENTER"&&(x("settings_general")?t.jsx(G0e,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="MESSAGING_CENTER"&&(x("settings_general")?t.jsx(nme,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="PRODUCTS"&&(x("products")?t.jsx(Zue,{onRefresh:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="ALTERNATIVES"&&(x("products")?t.jsx(q0e,{onRefresh:se}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="PRODUCT_IMAGES"&&(x("products")?t.jsx(Tme,{}):t.jsx(Us,{resourceName:s(zs[r]),onGoHome:()=>n("DASHBOARD")})),r==="NOTIFICATIONS"&&g&&t.jsx(dE,{user:{id:g.id,username:g.username,email:g.email,phone:"",role:"ADMIN",status:g.isActive?"ACTIVE":"PENDING",createdAt:g.createdAt,hasProfile:!0},onBack:()=>n("DASHBOARD")})]})]})]})},Rs=({icon:e,label:s,active:a,onClick:r,badge:n})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all mb-1 ${a?"bg-[#C8A04F] text-[#0B1B3A] font-black shadow-md":"text-slate-300 hover:bg-slate-800 hover:text-white font-medium"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[e,t.jsx("span",{className:"text-sm",children:s})]}),n>0&&t.jsx("span",{className:"bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:n})]}),pp=({label:e,icon:s,onClick:a})=>t.jsxs("button",{onClick:a,className:"flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-xl font-bold text-xs transition-all border border-white/5 backdrop-blur-sm",children:[s," ",e]}),gp=({label:e,value:s,color:a})=>{const r={blue:"bg-blue-50 text-blue-700",emerald:"bg-emerald-50 text-emerald-700",amber:"bg-amber-50 text-amber-700",slate:"bg-slate-100 text-slate-700"};return t.jsxs("div",{className:`p-4 rounded-xl ${r[a]} text-center`,children:[t.jsx("p",{className:"text-2xl font-black mb-1",children:s}),t.jsx("p",{className:"text-xs font-bold opacity-70",children:e})]})},wCe=e=>{const[s,a]=T.useState(null);return T.useEffect(()=>{(async()=>{try{const n=await xe.getAdminUsers();if(n.length>0){const i=n.find(l=>l.isActive);a(i||n[0])}}catch(n){console.error("Failed to load admin user:",n)}})()},[]),t.jsx(Due,{initialAdminUser:s,children:t.jsx(_me,{children:t.jsx(NCe,{...e})})})},_c=T.memo(({icon:e,label:s,active:a,onClick:r,badge:n,collapsed:i,testId:l})=>t.jsxs("button",{onClick:r,className:`w-full flex items-center ${i?"justify-center":"justify-between"} px-3 py-3.5 rounded-2xl mb-2 transition-all duration-300 group relative overflow-hidden ${a?"bg-gradient-to-l from-emerald-600 to-emerald-700 text-white font-bold shadow-lg shadow-emerald-900/40 scale-[1.02]":"text-slate-300 hover:bg-white/10 hover:text-white font-medium hover:scale-[1.01]"}`,title:i?s:void 0,"data-testid":l,children:[a&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse opacity-50"}),t.jsxs("div",{className:`flex items-center relative z-10 ${i?"":"gap-3.5"}`,children:[t.jsx("span",{className:`shrink-0 transition-transform duration-300 ${a?"scale-110":"group-hover:scale-105"}`,children:e}),!i&&t.jsx("span",{className:"text-sm md:text-[15px] truncate tracking-wide",children:s})]}),n&&!i&&t.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-[11px] font-bold px-2.5 py-1 rounded-full flex items-center justify-center min-w-[22px] shadow-md animate-bounce relative z-10",children:n}),n&&i&&t.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-gradient-to-r from-orange-500 to-red-500 rounded-full animate-pulse shadow-lg"}),i&&t.jsxs("div",{className:"absolute left-full ml-3 px-4 py-2.5 bg-slate-800/95 backdrop-blur-sm text-white text-sm font-bold rounded-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50 shadow-2xl border border-slate-700/50",children:[s,n&&t.jsxs("span",{className:"mr-2 text-orange-400 font-black",children:["(",n,")"]})]})]})),bp=T.memo(({icon:e,label:s,value:a,color:r,subValue:n})=>t.jsxs("div",{className:`bg-gradient-to-br ${r} rounded-2xl p-5 shadow-lg`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:e}),t.jsx("span",{className:"text-3xl font-black text-white",children:a})]}),t.jsx("p",{className:"text-white/80 text-sm font-medium",children:s}),n&&t.jsx("p",{className:"text-white/60 text-xs mt-1",children:n})]})),SCe=({user:e,onLogout:s})=>{const{t:a,i18n:r}=Jt(),n=Lo(r.language),{addToast:i}=Dt(),l=n==="rtl",[o,d]=T.useState("DASHBOARD"),[u,h]=T.useState(!1),[f,x]=T.useState(!1),[g,v]=T.useState(!0),[b,y]=T.useState(null),[j,w]=T.useState([]),[A,O]=T.useState(0),[C,E]=T.useState([]),[S,D]=T.useState(0),[M,U]=T.useState(null),[I,k]=T.useState({page:1,pageSize:20}),[z,_]=T.useState({page:1,pageSize:20}),[q,L]=T.useState(!1),[Q,X]=T.useState(null),[W,ee]=T.useState(!1),[V,P]=T.useState(null),[Y,J]=T.useState(!1),[K,se]=T.useState(null),G=T.useCallback(async()=>{const Le=await xe.getSupplierDashboard(e.id);y(Le)},[e.id]),te=T.useCallback(async()=>{const Le=await xe.getSupplierProducts(e.id,I);w(Le.items),O(Le.total)},[e.id,I]),Z=T.useCallback(async()=>{const Le=await xe.getSupplierRequests(e.id,z);E(Le.items),D(Le.total)},[e.id,z]),ue=T.useCallback(async()=>{const Le=await xe.getSupplierSettings(e.id);U(Le)},[e.id]);T.useEffect(()=>{(async()=>{v(!0),await Promise.all([G(),te(),Z(),ue()]),v(!1)})()},[G,te,Z,ue]),T.useEffect(()=>{te()},[I,te]),T.useEffect(()=>{Z()},[z,Z]);const re=async Le=>{try{await xe.addSupplierProduct(e.id,Le),i(a("supplier.productAdded"),"success"),L(!1),te(),G()}catch{i(a("supplier.productAddError"),"error")}},H=async(Le,Se)=>{try{await xe.updateSupplierProduct(e.id,Le,Se),i(a("supplier.productUpdated"),"success"),L(!1),X(null),te()}catch{i(a("supplier.productUpdateError"),"error")}},pe=async Le=>{if(confirm(a("supplier.confirmDeleteProduct")))try{await xe.deleteSupplierProduct(e.id,Le),i(a("supplier.productDeleted"),"success"),te(),G()}catch{i(a("supplier.productDeleteError"),"error")}},B=async Le=>{try{await xe.submitSupplierQuote(e.id,Le),i(a("supplier.quoteSent"),"success"),ee(!1),P(null),Z(),G()}catch{i(a("supplier.quoteError"),"error")}},oe=async Le=>{const Se=prompt(a("supplier.rejectReason"));if(Se!==null)try{await xe.rejectSupplierRequest(e.id,Le,Se),i(a("supplier.requestRejected"),"success"),Z(),G()}catch{i(a("supplier.rejectError"),"error")}},fe=async Le=>{try{const Se=await Le.arrayBuffer(),_e=await xe.importSupplierProductsFromExcel(e.id,Se);se(_e),_e.success?(i(`${a("supplier.importSuccess")}: ${_e.insertedCount} ${a("supplier.added")}, ${_e.updatedCount} ${a("supplier.updated")}`,"success"),te(),G()):i(a("supplier.importFailed"),"error")}catch{i(a("supplier.importError"),"error")}},ne=()=>{const Le=j.map(Ze=>({sku:Ze.sku,oemNumber:Ze.oemNumber,name:Ze.name,category:Ze.category,brand:Ze.brand,model:Ze.model||"",yearFrom:Ze.yearFrom||"",yearTo:Ze.yearTo||"",purchasePrice:Ze.purchasePrice,stock:Ze.stock,minOrderQty:Ze.minOrderQty,deliveryTime:Ze.deliveryTime})),Se=Ea.json_to_sheet(Le),_e=Ea.book_new();Ea.book_append_sheet(_e,Se,"Products"),rd(_e,`supplier_products_${Date.now()}.xlsx`),i(a("supplier.exportSuccess"),"success")},de=async Le=>{try{const Se=await xe.updateSupplierSettings(e.id,Le);U(Se),i(a("supplier.settingsSaved"),"success")}catch{i(a("supplier.settingsError"),"error")}},we=l?"right-0":"left-0",Ue=l?u?"translate-x-0":"translate-x-full lg:translate-x-0":u?"translate-x-0":"-translate-x-full lg:translate-x-0",qe=f?"w-20":"w-72",Ce=C.filter(Le=>Le.status==="NEW"||Le.status==="VIEWED").length;return g?t.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(as,{className:"w-12 h-12 text-emerald-500 animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-white text-lg font-bold",children:a("loading.pleaseWait")})]})}):t.jsxs("div",{className:`flex h-screen bg-slate-100 ${n==="rtl"?"rtl":"ltr"}`,dir:n,children:[u&&t.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 lg:hidden",onClick:()=>h(!1)}),t.jsxs("aside",{className:`fixed lg:static inset-y-0 ${we} ${qe} bg-gradient-to-b from-slate-900 via-slate-900 to-emerald-950 text-white transform transition-all duration-300 z-50 flex flex-col shadow-2xl lg:shadow-xl ${Ue}`,children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-emerald-600/10 rounded-full blur-3xl"}),t.jsx("div",{className:"absolute bottom-20 left-0 w-32 h-32 bg-teal-500/10 rounded-full blur-3xl"})]}),t.jsxs("div",{className:`relative p-4 ${f?"px-3":"p-5"} border-b border-white/10 flex items-center ${f?"justify-center":"justify-between"}`,children:[f?t.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:l?t.jsx(ws,{size:18}):t.jsx(vs,{size:18})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-xl flex items-center justify-center text-white shadow-lg shadow-emerald-500/30 ring-2 ring-white/20",children:t.jsx(Xt,{size:22})}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-black text-lg tracking-tight",children:a("supplier.portalTitle")}),t.jsx("p",{className:"text-xs text-slate-400",children:e.name})]})]}),t.jsx("button",{onClick:()=>x(!0),className:"p-2 hover:bg-white/10 rounded-lg transition-colors lg:block hidden",children:l?t.jsx(vs,{size:18}):t.jsx(ws,{size:18})})]}),t.jsx("button",{onClick:()=>h(!1),className:"lg:hidden p-2 hover:bg-white/10 rounded-lg",children:t.jsx(St,{size:20})})]}),t.jsxs("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:[t.jsx(_c,{icon:t.jsx(nE,{size:20}),label:a("supplier.dashboard"),active:o==="DASHBOARD",onClick:()=>d("DASHBOARD"),collapsed:f,testId:"nav-dashboard"}),t.jsx(_c,{icon:t.jsx(Xt,{size:20}),label:a("supplier.products"),active:o==="PRODUCTS",onClick:()=>d("PRODUCTS"),testId:"nav-products",collapsed:f}),t.jsx(_c,{icon:t.jsx(Lt,{size:20}),label:a("supplier.requests"),active:o==="REQUESTS",onClick:()=>d("REQUESTS"),badge:Ce>0?Ce:void 0,collapsed:f,testId:"nav-requests"}),t.jsx(_c,{icon:t.jsx(vr,{size:20}),label:a("supplier.notifications"),active:o==="NOTIFICATIONS",onClick:()=>d("NOTIFICATIONS"),collapsed:f,testId:"nav-notifications"}),t.jsx(_c,{icon:t.jsx(Gt,{size:20}),label:a("supplier.team"),active:o==="TEAM",onClick:()=>d("TEAM"),collapsed:f,testId:"nav-team"}),t.jsx(_c,{icon:t.jsx(la,{size:20}),label:a("supplier.settings"),active:o==="SETTINGS",onClick:()=>d("SETTINGS"),collapsed:f,testId:"nav-settings"}),t.jsx(_c,{icon:t.jsx(tl,{size:20}),label:a("supplier.images"," "),active:o==="IMAGES",onClick:()=>d("IMAGES"),collapsed:f,testId:"nav-images"})]}),t.jsx("div",{className:`p-3 border-t border-white/10 ${f?"flex justify-center":""}`,children:t.jsxs("button",{onClick:s,className:`${f?"p-3":"w-full px-4 py-3"} flex items-center ${f?"justify-center":"gap-3"} rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-all`,title:a("logout"),"data-testid":"button-logout",children:[t.jsx(iE,{size:18}),!f&&t.jsx("span",{className:"font-bold text-sm",children:a("logout")})]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsxs("header",{className:"h-16 md:h-20 bg-white border-b border-slate-200 flex items-center justify-between px-4 md:px-6 lg:px-8 flex-shrink-0 z-30 shadow-sm gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 min-w-0 flex-1",children:[t.jsx("button",{onClick:()=>h(!0),className:"lg:hidden text-slate-600 p-2 hover:bg-slate-100 rounded-lg shrink-0","data-testid":"button-open-sidebar",children:t.jsx(xF,{size:22})}),t.jsxs("h2",{className:"text-base md:text-xl lg:text-2xl font-bold md:font-black text-slate-800 tracking-tight truncate",children:[o==="DASHBOARD"&&a("supplier.dashboard"),o==="PRODUCTS"&&a("supplier.products"),o==="REQUESTS"&&a("supplier.requests"),o==="SETTINGS"&&a("supplier.settings"),o==="NOTIFICATIONS"&&a("supplier.notifications"),o==="TEAM"&&a("supplier.team"),o==="IMAGES"&&a("supplier.images"," ")]})]}),t.jsxs("div",{className:"flex items-center gap-2 md:gap-4 shrink-0",children:[t.jsxs("div",{className:"hidden lg:flex items-center gap-2 bg-slate-100 px-3 py-2 rounded-xl text-xs md:text-sm font-bold text-slate-700",children:[t.jsx(os,{size:16}),t.jsx("span",{children:hs(new Date().toISOString())})]}),t.jsx(cE,{user:e,onViewAll:()=>d("NOTIFICATIONS")}),t.jsx(xh,{})]})]}),t.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8",children:[o==="DASHBOARD"&&b&&t.jsx(jCe,{stats:b,t:a,onNavigate:d,recentRequests:C.slice(0,5)}),o==="PRODUCTS"&&t.jsx(ACe,{products:j,total:A,filters:I,onFiltersChange:k,onAdd:()=>{X(null),L(!0)},onEdit:Le=>{X(Le),L(!0)},onDelete:pe,onImport:()=>J(!0),onExport:ne,t:a}),o==="REQUESTS"&&t.jsx(ECe,{requests:C,total:S,filters:z,onFiltersChange:_,onQuote:Le=>{P(Le),ee(!0)},onReject:oe,t:a}),o==="SETTINGS"&&M&&t.jsx(CCe,{settings:M,onSave:de,t:a}),o==="NOTIFICATIONS"&&t.jsx(dE,{user:e}),o==="TEAM"&&t.jsx(OCe,{supplierId:e.id,t:a,currentUser:e}),o==="IMAGES"&&t.jsx(ICe,{supplierId:e.id,t:a})]})]}),q&&t.jsx(TCe,{product:Q,onSave:Q?Le=>H(Q.id,Le):re,onClose:()=>{L(!1),X(null)},t:a}),W&&V&&t.jsx(_Ce,{request:V,onSubmit:B,onClose:()=>{ee(!1),P(null)},t:a}),Y&&t.jsx(kCe,{onImport:fe,onClose:()=>{J(!1),se(null)},result:K,t:a})]})},jCe=T.memo(({stats:e,t:s,onNavigate:a,recentRequests:r})=>t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx(bp,{icon:t.jsx(Xt,{size:24,className:"text-white"}),label:s("supplier.totalProducts"),value:e.totalProducts,color:"from-emerald-500 to-emerald-600",subValue:`${e.activeProducts} ${s("supplier.active")}`}),t.jsx(bp,{icon:t.jsx(Lt,{size:24,className:"text-white"}),label:s("supplier.pendingRequests"),value:e.pendingRequests,color:"from-orange-500 to-orange-600"}),t.jsx(bp,{icon:t.jsx(Ut,{size:24,className:"text-white"}),label:s("supplier.quotesSubmitted"),value:e.quotesSubmitted,color:"from-blue-500 to-blue-600",subValue:`${e.quotesAccepted} ${s("supplier.accepted")}`}),t.jsx(bp,{icon:t.jsx(or,{size:24,className:"text-white"}),label:s("supplier.totalRevenue"),value:`${e.totalRevenue.toLocaleString()} ${s("currency")}`,color:"from-purple-500 to-purple-600"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800",children:s("supplier.recentRequests")}),t.jsx("button",{onClick:()=>a("REQUESTS"),className:"text-emerald-600 text-sm font-bold hover:underline","data-testid":"link-view-all-requests",children:s("supplier.viewAll")})]}),r.length===0?t.jsxs("div",{className:"text-center py-10 text-slate-400",children:[t.jsx(Lt,{size:40,className:"mx-auto mb-3 opacity-50"}),t.jsx("p",{children:s("supplier.noRequests")})]}):t.jsx("div",{className:"space-y-3",children:r.map(n=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>a("REQUESTS"),"data-testid":`request-item-${n.id}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${n.status==="NEW"?"bg-orange-500":n.status==="QUOTED"?"bg-blue-500":n.status==="ACCEPTED"?"bg-green-500":"bg-slate-400"}`}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-800",children:n.partName||n.partNumber}),t.jsx("p",{className:"text-xs text-slate-500",children:n.customerName})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-slate-500",children:hs(n.createdAt)}),t.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-bold ${n.status==="NEW"?"bg-orange-100 text-orange-700":n.status==="QUOTED"?"bg-blue-100 text-blue-700":n.status==="ACCEPTED"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700"}`,children:s(`supplier.status.${n.status.toLowerCase()}`)})]})]},n.id))})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-4",children:s("supplier.quickActions")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>a("PRODUCTS"),className:"w-full flex items-center gap-3 px-4 py-3 bg-emerald-50 text-emerald-700 rounded-xl font-bold hover:bg-emerald-100 transition-colors","data-testid":"button-add-product-quick",children:[t.jsx(Pt,{size:20}),s("supplier.addProduct")]}),t.jsxs("button",{onClick:()=>a("PRODUCTS"),className:"w-full flex items-center gap-3 px-4 py-3 bg-blue-50 text-blue-700 rounded-xl font-bold hover:bg-blue-100 transition-colors","data-testid":"button-import-products-quick",children:[t.jsx(ga,{size:20}),s("supplier.importProducts")]}),t.jsxs("button",{onClick:()=>a("REQUESTS"),className:"w-full flex items-center gap-3 px-4 py-3 bg-orange-50 text-orange-700 rounded-xl font-bold hover:bg-orange-100 transition-colors","data-testid":"button-view-requests-quick",children:[t.jsx(Lt,{size:20}),s("supplier.viewRequests")]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100",children:[t.jsx("h4",{className:"font-bold text-slate-700 mb-3",children:s("supplier.performance")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-600",children:s("supplier.avgResponseTime")}),t.jsxs("span",{className:"font-bold text-slate-800",children:[e.averageResponseTime,"h"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-slate-600",children:s("supplier.rating")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(pn,{size:16,className:"text-yellow-500 fill-yellow-500"}),t.jsx("span",{className:"font-bold text-slate-800",children:e.supplierRating.toFixed(1)})]})]})]})]})]})]})]})),ACe=T.memo(({products:e,total:s,filters:a,onFiltersChange:r,onAdd:n,onEdit:i,onDelete:l,onImport:o,onExport:d,t:u})=>{const[h,f]=T.useState(a.search||""),x=()=>{r({...a,search:h,page:1})},g=Math.ceil(s/(a.pageSize||20));return t.jsxs("div",{className:"space-y-4 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Ft,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:h,onChange:v=>f(v.target.value),onKeyDown:v=>v.key==="Enter"&&x(),placeholder:u("supplier.searchProducts"),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none","data-testid":"input-search-products"})]}),t.jsx("button",{onClick:x,className:"px-4 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-search-products",children:u("search")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-50 text-blue-700 rounded-xl font-bold hover:bg-blue-100 transition-colors","data-testid":"button-import-products",children:[t.jsx(ga,{size:18}),u("supplier.import")]}),t.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors","data-testid":"button-export-products",children:[t.jsx(cr,{size:18}),u("supplier.export")]}),t.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-add-product",children:[t.jsx(Pt,{size:18}),u("supplier.addProduct")]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.length===0?t.jsxs("div",{className:"text-center py-16 text-slate-400",children:[t.jsx(Xt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:u("supplier.noProducts")}),t.jsx("p",{className:"text-sm",children:u("supplier.addFirstProduct")})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.sku")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.productName")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.brand")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.price")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.stock")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600 uppercase",children:u("supplier.status")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-600 uppercase",children:u("actions")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(v=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`product-row-${v.id}`,children:[t.jsx("td",{className:"px-4 py-3 text-sm font-mono text-slate-600",children:v.sku}),t.jsxs("td",{className:"px-4 py-3",children:[t.jsx("p",{className:"font-bold text-slate-800",children:v.name}),t.jsx("p",{className:"text-xs text-slate-500",children:v.oemNumber})]}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:v.brand}),t.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-emerald-600",children:[v.purchasePrice.toLocaleString()," ",u("currency")]}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${v.stock>10?"bg-green-100 text-green-700":v.stock>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:v.stock})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${v.isActive?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:v.isActive?u("supplier.active"):u("supplier.inactive")})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx("button",{onClick:()=>i(v),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:u("edit"),"data-testid":`button-edit-product-${v.id}`,children:t.jsx(Pa,{size:16})}),t.jsx("button",{onClick:()=>l(v.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:u("delete"),"data-testid":`button-delete-product-${v.id}`,children:t.jsx(Ct,{size:16})})]})})]},v.id))})]})}),g>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("p",{className:"text-sm text-slate-600",children:[u("showing")," ",((a.page||1)-1)*(a.pageSize||20)+1," - ",Math.min((a.page||1)*(a.pageSize||20),s)," ",u("of")," ",s]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)-1}),disabled:(a.page||1)<=1,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-prev-page",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"px-3 py-1 bg-white rounded-lg border text-sm font-bold",children:[a.page||1," / ",g]}),t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)+1}),disabled:(a.page||1)>=g,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-next-page",children:t.jsx(ws,{size:18})})]})]})]})]})}),ECe=T.memo(({requests:e,total:s,filters:a,onFiltersChange:r,onQuote:n,onReject:i,t:l})=>{const[o,d]=T.useState(a.search||""),[u,h]=T.useState(a.status||"ALL"),f=()=>{r({...a,search:o,status:u,page:1})},x=Math.ceil(s/(a.pageSize||20));return t.jsxs("div",{className:"space-y-4 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[t.jsx("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Ft,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:o,onChange:g=>d(g.target.value),onKeyDown:g=>g.key==="Enter"&&f(),placeholder:l("supplier.searchRequests"),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none","data-testid":"input-search-requests"})]})}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("select",{value:u,onChange:g=>{h(g.target.value),r({...a,status:g.target.value,page:1})},className:"px-4 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-700 focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"select-status-filter",children:[t.jsx("option",{value:"ALL",children:l("supplier.allStatuses")}),t.jsx("option",{value:"NEW",children:l("supplier.status.new")}),t.jsx("option",{value:"VIEWED",children:l("supplier.status.viewed")}),t.jsx("option",{value:"QUOTED",children:l("supplier.status.quoted")}),t.jsx("option",{value:"ACCEPTED",children:l("supplier.status.accepted")}),t.jsx("option",{value:"REJECTED",children:l("supplier.status.rejected")})]})})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.length===0?t.jsxs("div",{className:"text-center py-16 text-slate-400",children:[t.jsx(Lt,{size:48,className:"mx-auto mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-bold",children:l("supplier.noRequests")})]}):t.jsx("div",{className:"divide-y divide-slate-100",children:e.map(g=>{var v,b;return t.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors","data-testid":`request-row-${g.id}`,children:t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${g.status==="NEW"?"bg-orange-500":g.status==="QUOTED"?"bg-blue-500":g.status==="ACCEPTED"?"bg-green-500":"bg-slate-400"}`}),t.jsx("h4",{className:"font-bold text-slate-800",children:g.partName||g.partNumber}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${g.urgency==="URGENT"?"bg-red-100 text-red-700":g.urgency==="HIGH"?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-600"}`,children:l(`supplier.urgency.${((v=g.urgency)==null?void 0:v.toLowerCase())||"normal"}`)})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-slate-600",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.customer"),": "]}),t.jsx("span",{className:"font-medium",children:g.customerName})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.quantity"),": "]}),t.jsx("span",{className:"font-medium",children:g.quantity})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.deadline"),": "]}),t.jsx("span",{className:"font-medium",children:g.deadline?hs(g.deadline):"-"})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-400",children:[l("supplier.received"),": "]}),t.jsx("span",{className:"font-medium",children:hs(g.createdAt)})]})]}),g.notes&&t.jsx("p",{className:"mt-2 text-sm text-slate-500 bg-slate-50 p-2 rounded",children:g.notes})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[(g.status==="NEW"||g.status==="VIEWED")&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>n(g),className:"flex items-center gap-1 px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":`button-quote-${g.id}`,children:[t.jsx(xi,{size:16}),l("supplier.submitQuote")]}),t.jsxs("button",{onClick:()=>i(g.id),className:"flex items-center gap-1 px-4 py-2 bg-red-50 text-red-600 rounded-xl font-bold hover:bg-red-100 transition-colors","data-testid":`button-reject-${g.id}`,children:[t.jsx(Zs,{size:16}),l("supplier.reject")]})]}),g.status==="QUOTED"&&t.jsxs("span",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-xl font-bold",children:[l("supplier.quotedAt"),": ",(b=g.quotedPrice)==null?void 0:b.toLocaleString()," ",l("currency")]}),g.status==="ACCEPTED"&&t.jsxs("span",{className:"flex items-center gap-1 px-4 py-2 bg-green-100 text-green-700 rounded-xl font-bold",children:[t.jsx(Ut,{size:16}),l("supplier.status.accepted")]})]})]})},g.id)})}),x>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[t.jsxs("p",{className:"text-sm text-slate-600",children:[l("showing")," ",((a.page||1)-1)*(a.pageSize||20)+1," - ",Math.min((a.page||1)*(a.pageSize||20),s)," ",l("of")," ",s]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)-1}),disabled:(a.page||1)<=1,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(vs,{size:18})}),t.jsxs("span",{className:"px-3 py-1 bg-white rounded-lg border text-sm font-bold",children:[a.page||1," / ",x]}),t.jsx("button",{onClick:()=>r({...a,page:(a.page||1)+1}),disabled:(a.page||1)>=x,className:"p-2 rounded-lg hover:bg-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ws,{size:18})})]})]})]})]})}),CCe=T.memo(({settings:e,onSave:s,t:a})=>{const[r,n]=T.useState(e),i=l=>{l.preventDefault(),s(r)};return t.jsx("div",{className:"max-w-2xl mx-auto animate-fade-in",children:t.jsxs("form",{onSubmit:i,className:"bg-white rounded-2xl shadow-lg p-6 space-y-6",children:[t.jsx("h3",{className:"font-bold text-lg text-slate-800 border-b pb-4",children:a("supplier.settingsTitle")}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:a("supplier.defaultPriceMarkup")}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:r.defaultPriceMarkup||0,onChange:l=>n({...r,defaultPriceMarkup:parseFloat(l.target.value)}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-default-markup"}),t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"%"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:a("supplier.defaultDeliveryTime")}),t.jsx("input",{type:"number",value:r.defaultDeliveryTime||3,onChange:l=>n({...r,defaultDeliveryTime:parseInt(l.target.value)}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-default-delivery"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a("supplier.deliveryDaysHint")})]})]}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsx("h4",{className:"font-bold text-slate-700 mb-4",children:a("supplier.notifications")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:r.notifyOnNewRequest,onChange:l=>n({...r,notifyOnNewRequest:l.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"checkbox-notify-new-request"}),t.jsx("span",{className:"text-slate-700",children:a("supplier.notifyNewRequest")})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:r.notifyOnQuoteAccepted,onChange:l=>n({...r,notifyOnQuoteAccepted:l.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"checkbox-notify-quote-accepted"}),t.jsx("span",{className:"text-slate-700",children:a("supplier.notifyQuoteAccepted")})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:r.notifyOnDeadlineApproaching,onChange:l=>n({...r,notifyOnDeadlineApproaching:l.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"checkbox-notify-deadline"}),t.jsx("span",{className:"text-slate-700",children:a("supplier.notifyDeadline")})]})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx("button",{type:"submit",className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-save-settings",children:a("save")})})]})})}),TCe=T.memo(({product:e,onSave:s,onClose:a,t:r})=>{const[n,i]=T.useState({sku:(e==null?void 0:e.sku)||"",oemNumber:(e==null?void 0:e.oemNumber)||"",name:(e==null?void 0:e.name)||"",category:(e==null?void 0:e.category)||"",brand:(e==null?void 0:e.brand)||"",model:(e==null?void 0:e.model)||"",yearFrom:e==null?void 0:e.yearFrom,yearTo:e==null?void 0:e.yearTo,purchasePrice:(e==null?void 0:e.purchasePrice)||0,minOrderQty:(e==null?void 0:e.minOrderQty)||1,stock:(e==null?void 0:e.stock)||0,deliveryTime:(e==null?void 0:e.deliveryTime)||3}),l=o=>{o.preventDefault(),s(n)};return t.jsx(ls,{isOpen:!0,onClose:a,title:r(e?"supplier.editProduct":"supplier.addProduct"),children:t.jsxs("form",{onSubmit:l,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.sku")," *"]}),t.jsx("input",{type:"text",value:n.sku,onChange:o=>i({...n,sku:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,"data-testid":"input-product-sku"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.oemNumber")}),t.jsx("input",{type:"text",value:n.oemNumber,onChange:o=>i({...n,oemNumber:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-product-oem"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.productName")," *"]}),t.jsx("input",{type:"text",value:n.name,onChange:o=>i({...n,name:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,"data-testid":"input-product-name"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.category")}),t.jsx("input",{type:"text",value:n.category,onChange:o=>i({...n,category:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-product-category"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.brand")}),t.jsx("input",{type:"text",value:n.brand,onChange:o=>i({...n,brand:o.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none","data-testid":"input-product-brand"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.price")," *"]}),t.jsx("input",{type:"number",value:n.purchasePrice,onChange:o=>i({...n,purchasePrice:parseFloat(o.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,min:"0",step:"0.01","data-testid":"input-product-price"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.stock")}),t.jsx("input",{type:"number",value:n.stock,onChange:o=>i({...n,stock:parseInt(o.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",min:"0","data-testid":"input-product-stock"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.minOrder")}),t.jsx("input",{type:"number",value:n.minOrderQty,onChange:o=>i({...n,minOrderQty:parseInt(o.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",min:"1","data-testid":"input-product-min-order"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-cancel-product",children:r("cancel")}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-save-product",children:r(e?"save":"supplier.add")})]})]})})}),_Ce=T.memo(({request:e,onSubmit:s,onClose:a,t:r})=>{const[n,i]=T.useState(0),[l,o]=T.useState(e.quantity),[d,u]=T.useState(""),h=f=>{f.preventDefault(),s({requestId:e.id,quotedPrice:n,stockAvailable:l,notes:d})};return t.jsx(ls,{isOpen:!0,onClose:a,title:r("supplier.submitQuoteTitle"),children:t.jsxs("form",{onSubmit:h,className:"space-y-4",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:r("supplier.requestDetails")}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.part"),": "]}),t.jsx("span",{className:"font-medium",children:e.partName||e.partNumber})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.quantity"),": "]}),t.jsx("span",{className:"font-medium",children:e.quantity})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.customer"),": "]}),t.jsx("span",{className:"font-medium",children:e.customerName})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-slate-500",children:[r("supplier.deadline"),": "]}),t.jsx("span",{className:"font-medium",children:e.deadline?hs(e.deadline):"-"})]})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:[r("supplier.yourPrice")," *"]}),t.jsx("input",{type:"number",value:n,onChange:f=>i(parseFloat(f.target.value)),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",required:!0,min:"0",step:"0.01","data-testid":"input-quote-price"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.availableStock")}),t.jsx("input",{type:"number",value:l,onChange:f=>o(parseInt(f.target.value)),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none",min:"0","data-testid":"input-quote-stock"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:r("supplier.quoteNotes")}),t.jsx("textarea",{value:d,onChange:f=>u(f.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none resize-none",rows:3,"data-testid":"input-quote-notes"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-cancel-quote",children:r("cancel")}),t.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-submit-quote",children:[t.jsx(xi,{size:16}),r("supplier.sendQuote")]})]})]})})}),kCe=T.memo(({onImport:e,onClose:s,result:a,t:r})=>{const[n,i]=T.useState(null),[l,o]=T.useState(!1),d=async()=>{n&&(o(!0),await e(n),o(!1))};return t.jsx(ls,{isOpen:!0,onClose:s,title:r("supplier.importProducts"),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-emerald-500 transition-colors",children:[t.jsx(ga,{size:40,className:"mx-auto mb-3 text-slate-400"}),t.jsx("p",{className:"text-slate-600 mb-2",children:r("supplier.dropExcelFile")}),t.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:u=>{var h;return i(((h=u.target.files)==null?void 0:h[0])||null)},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-bold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100","data-testid":"input-import-file"})]}),n&&t.jsxs("div",{className:"flex items-center gap-2 bg-emerald-50 p-3 rounded-lg",children:[t.jsx(zn,{size:20,className:"text-emerald-600"}),t.jsx("span",{className:"text-sm font-medium text-emerald-800",children:n.name})]}),a&&t.jsxs("div",{className:`p-4 rounded-lg ${a.success?"bg-green-50":"bg-red-50"}`,children:[t.jsx("h4",{className:`font-bold mb-2 ${a.success?"text-green-800":"text-red-800"}`,children:a.success?r("supplier.importComplete"):r("supplier.importFailed")}),a.success&&t.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[t.jsxs("p",{children:[r("supplier.totalRows"),": ",a.totalRows]}),t.jsxs("p",{children:[r("supplier.inserted"),": ",a.insertedCount]}),t.jsxs("p",{children:[r("supplier.updated"),": ",a.updatedCount]}),a.skippedCount>0&&t.jsxs("p",{children:[r("supplier.skipped"),": ",a.skippedCount]})]}),a.errors.length>0&&t.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[t.jsxs("p",{className:"font-bold",children:[r("supplier.errors"),":"]}),t.jsx("ul",{className:"list-disc list-inside max-h-32 overflow-y-auto",children:a.errors.slice(0,10).map((u,h)=>t.jsxs("li",{children:[r("supplier.row")," ",u.row,": ",u.message]},h))})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-close-import",children:r(a?"close":"cancel")}),!a&&t.jsxs("button",{onClick:d,disabled:!n||l,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-start-import",children:[l?t.jsx(as,{size:16,className:"animate-spin"}):t.jsx(ga,{size:16}),r(l?"supplier.importing":"supplier.startImport")]})]})]})})}),OCe=T.memo(({supplierId:e,t:s,currentUser:a})=>{const[r,n]=T.useState([]),[i,l]=T.useState(!0),[o,d]=T.useState(!1),[u,h]=T.useState(null),[f,x]=T.useState(!1),[g,v]=T.useState(""),[b,y]=T.useState([]),[j,w]=T.useState(""),[A,O]=T.useState(!1),[C,E]=T.useState(!1),{addToast:S}=Dt(),{i18n:D}=Jt(),M=Lo(D.language)==="rtl",U=async()=>{var W;if(!(a!=null&&a.isSupplier)&&(a==null?void 0:a.role)!=="SUPPLIER")return console.error("Current user is not a supplier"),null;const L=`backend_token_${(a==null?void 0:a.id)||"default"}`;let Q=localStorage.getItem(L);if(Q)return Q;const X=a==null?void 0:a.clientId;if(!X)return console.error("No clientId found for current user"),null;try{const ee=X.replace("user-",""),P=await(await fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:X,password:ee,loginType:"owner"})})).json();if(P.success&&((W=P.data)!=null&&W.accessToken))return localStorage.setItem(L,P.data.accessToken),P.data.accessToken}catch(ee){console.error("Failed to get backend token:",ee)}return null};T.useEffect(()=>{I(),k()},[e,a==null?void 0:a.id]);const I=async()=>{l(!0);try{const L=await U();if(!L){n([]),O(!1),E(!0),l(!1);return}const Q={"Content-Type":"application/json"};Q.Authorization=`Bearer ${L}`;const W=await(await fetch("/api/v1/suppliers/me/sub-users?page=1&limit=50",{headers:Q})).json();W.success&&W.data?(n(W.data),O(!0)):(n([]),O(!1)),E(!0)}catch(L){console.error("Error loading employees:",L),n([]),E(!0)}finally{l(!1)}},k=async()=>{try{const L=await U(),Q={"Content-Type":"application/json"};L&&(Q.Authorization=`Bearer ${L}`);const W=await(await fetch("/api/v1/suppliers/me/sub-users/roles",{headers:Q})).json();W.success&&W.data?y(W.data):y([{code:"SUPPLIER_OWNER",name:"Supplier Owner",nameAr:" "},{code:"SUPPLIER_MANAGER",name:"Supplier Manager",nameAr:" "},{code:"SUPPLIER_STAFF",name:"Supplier Staff",nameAr:" "}])}catch(L){console.error("Error loading roles:",L),y([{code:"SUPPLIER_OWNER",name:"Supplier Owner",nameAr:" "},{code:"SUPPLIER_MANAGER",name:"Supplier Manager",nameAr:" "},{code:"SUPPLIER_STAFF",name:"Supplier Staff",nameAr:" "}])}},z=async()=>{if(u){x(!0);try{const L=await U(),Q={"Content-Type":"application/json"};if(L&&(Q.Authorization=`Bearer ${L}`),u.id){const W=await(await fetch(`/api/v1/suppliers/me/sub-users/${u.id}`,{method:"PUT",headers:Q,body:JSON.stringify({roleCode:u.roleCode,isActive:u.isActive,jobTitle:u.jobTitle})})).json();W.success?(S(M?"   ":"Member updated successfully","success"),d(!1),h(null),I()):S(W.error||s("error"),"error")}else{const W=await(await fetch("/api/v1/suppliers/me/sub-users",{method:"POST",headers:Q,body:JSON.stringify({name:u.name,email:u.email,phone:u.phone,roleCode:u.roleCode,jobTitle:u.jobTitle,password:j||void 0})})).json();W.success?(S(M?"   ":"Member added successfully","success"),d(!1),h(null),w(""),I()):S(W.error||s("error"),"error")}}catch(L){console.error("Error saving employee:",L),S(s("error"),"error")}finally{x(!1)}}},_=async L=>{try{const Q=await U(),X={"Content-Type":"application/json"};Q&&(X.Authorization=`Bearer ${Q}`);const ee=await(await fetch(`/api/v1/suppliers/me/sub-users/${L.id}`,{method:"PUT",headers:X,body:JSON.stringify({isActive:!L.isActive})})).json();ee.success?(S(L.isActive?M?"  ":"Member deactivated":M?"  ":"Member activated","success"),I()):S(ee.error||s("error"),"error")}catch{S(s("error"),"error")}},q=r.filter(L=>L.name.toLowerCase().includes(g.toLowerCase())||L.email&&L.email.toLowerCase().includes(g.toLowerCase()));return t.jsxs("div",{className:"space-y-6 animate-fade-in",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[t.jsxs("div",{className:"relative flex-1 w-full sm:max-w-md",children:[t.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:s("search"),value:g,onChange:L=>v(L.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-xl bg-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-search-employees"})]}),A&&t.jsxs("button",{onClick:()=>{h({name:"",email:"",phone:"",roleCode:"SUPPLIER_STAFF",isActive:!0,isOwner:!1}),w(""),d(!0)},className:"flex items-center gap-2 px-4 py-2.5 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors","data-testid":"button-add-employee",children:[t.jsx(Pt,{size:18}),s("supplier.addEmployee")]})]}),i?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(as,{className:"h-8 w-8 animate-spin text-emerald-600"})}):q.length===0?t.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl border border-slate-200",children:[t.jsx(Gt,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold text-slate-600 mb-2",children:s("supplier.noEmployees")}),t.jsx("p",{className:"text-slate-500",children:s("supplier.addFirstEmployee")})]}):t.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("name")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("email")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("phone")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("role")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-slate-700",children:s("status")}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-bold text-slate-700"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:q.map(L=>t.jsxs("tr",{className:"hover:bg-slate-50 transition-colors","data-testid":`row-employee-${L.id}`,children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-bold",children:L.name.charAt(0).toUpperCase()}),t.jsx("span",{className:"font-medium text-slate-900",children:L.name})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:L.email}),t.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:L.phone||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700 font-medium inline-block w-fit",children:M?L.roleNameAr||L.roleName||L.roleCode:L.roleName||L.roleCode}),L.isOwner&&t.jsx("span",{className:"px-2 py-0.5 mt-1 text-[10px] rounded-full bg-yellow-100 text-yellow-700 font-bold inline-block w-fit",children:M?"":"Owner"})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${L.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:L.isActive?s("active"):s("inactive")})}),t.jsx("td",{className:"px-4 py-3",children:A&&t.jsxs("div",{className:"flex items-center justify-end gap-1",children:[t.jsx("button",{onClick:()=>{h(L),d(!0)},className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","data-testid":`button-edit-employee-${L.id}`,children:t.jsx(Pa,{className:"h-4 w-4"})}),!L.isOwner&&t.jsx("button",{onClick:()=>_(L),className:`p-2 rounded-lg transition-colors ${L.isActive?"text-slate-500 hover:text-red-600 hover:bg-red-50":"text-slate-500 hover:text-green-600 hover:bg-green-50"}`,"data-testid":`button-toggle-employee-${L.id}`,title:L.isActive?M?"":"Deactivate":M?"":"Activate",children:L.isActive?t.jsx(Zs,{className:"h-4 w-4"}):t.jsx(Ut,{className:"h-4 w-4"})})]})})]},L.id))})]})})}),o&&u&&t.jsxs(ls,{isOpen:!0,onClose:()=>{d(!1),h(null)},title:u.id?s("supplier.editEmployee"):s("supplier.addEmployee"),children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s("name")," *"]}),t.jsx("input",{type:"text",value:u.name,onChange:L=>h({...u,name:L.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-name"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s("email")," *"]}),t.jsx("input",{type:"email",value:u.email,onChange:L=>h({...u,email:L.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-email"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:s("phone")}),t.jsx("input",{type:"tel",value:u.phone||"",onChange:L=>h({...u,phone:L.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-phone"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s("role")," *"]}),t.jsxs("select",{value:u.roleCode||"",onChange:L=>h({...u,roleCode:L.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"select-employee-role",children:[t.jsx("option",{value:"",children:M?" ":"Select Role"}),b.map(L=>t.jsx("option",{value:L.code,children:M&&L.nameAr||L.name},L.code))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:M?" ":"Job Title"}),t.jsx("input",{type:"text",value:u.jobTitle||"",onChange:L=>h({...u,jobTitle:L.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-job-title"})]}),!u.id&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:M?" ":"Password"}),t.jsx("input",{type:"password",value:j,onChange:L=>w(L.target.value),placeholder:M?" -   ":"Optional - auto-generated if empty",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500","data-testid":"input-employee-password"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"employee-active",checked:u.isActive??!0,onChange:L=>h({...u,isActive:L.target.checked}),className:"h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500","data-testid":"checkbox-employee-active"}),t.jsx("label",{htmlFor:"employee-active",className:"text-sm text-slate-700",children:s("active")})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",children:[t.jsx("button",{onClick:()=>{d(!1),h(null),w("")},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg font-bold hover:bg-slate-50 transition-colors","data-testid":"button-cancel-employee",children:s("cancel")}),t.jsxs("button",{onClick:z,disabled:f||!u.name||!u.roleCode,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 transition-colors disabled:opacity-50","data-testid":"button-save-employee",children:[f&&t.jsx(as,{size:16,className:"animate-spin"}),s(f?"saving":"save")]})]})]})]})}),ICe=T.memo(({supplierId:e,t:s})=>{const[a,r]=T.useState([]),[n,i]=T.useState([]),[l,o]=T.useState(!0),[d,u]=T.useState(""),[h,f]=T.useState(!1),[x,g]=T.useState(null),[v,b]=T.useState("ALL"),{addToast:y}=Dt();useRef(null);const j=useRef(null),w="sini_product_images";T.useEffect(()=>{(async()=>{o(!0);try{const U=await xe.getSupplierProducts(e,{});r(U.items||[]);const I=localStorage.getItem(w),k=I?JSON.parse(I):[];i(k)}catch(U){console.error("Failed to load data",U)}finally{o(!1)}})()},[e]);const A=M=>{localStorage.setItem(w,JSON.stringify(M)),i(M)},O=async(M,U)=>{try{const{dataUrl:I,width:k,height:z,blob:_}=await GF(M),q=await WF(I),L=(U==null?void 0:U.trim().toUpperCase())||jp(M.name)||"",Q=a.find(X=>{var W;return((W=X.oemNumber||X.sku)==null?void 0:W.toUpperCase())===L});return{id:QF(),partNumber:L,fileName:M.name,fileUrl:I,thumbnailUrl:q,originalSize:M.size,compressedSize:_.size,width:k,height:z,status:"PENDING",uploadedBy:e,uploaderType:"SUPPLIER_LOCAL",uploaderName:"Supplier",isAutoMatched:!U,isLinkedToProduct:!!Q,createdAt:new Date().toISOString(),adminNotes:void 0}}catch(I){return console.error(`Failed to process ${M.name}:`,I),null}},C=async(M,U)=>{f(!0);try{const I=await O(U,M);I&&(A([I,...n]),y(s("supplier.imageUploaded","     "),"success"))}catch{y(s("supplier.imageUploadError","   "),"error")}finally{f(!1)}},E=async M=>{var I;const U=(I=M.target.files)==null?void 0:I[0];if(U){if(!U.name.toLowerCase().endsWith(".zip")){y("   ZIP","error");return}f(!0),g({current:0,total:100,phase:"  ..."});try{const k=await HF.loadAsync(U),z=[],_=Object.entries(k.files);let q=0;for(const[X,W]of _){if(W.dir)continue;const ee=X.toLowerCase().split(".").pop();if(["jpg","jpeg","png","webp","gif","bmp"].includes(ee||"")){const V=await W.async("blob"),P=X.split("/").pop()||X;z.push({name:P,data:V})}q++,q%10===0&&g({current:Math.round(q/_.length*20),total:100,phase:"  ..."})}if(z.length===0){y("       ","error"),f(!1),g(null);return}const L=[];let Q=0;for(const X of z){g({current:20+Math.round(Q/z.length*80),total:100,phase:`: ${X.name}`});const W=new File([X.data],X.name,{type:X.data.type}),ee=await O(W);ee&&L.push(ee),Q++}A([...L,...n]),y(`  ${L.length}    ZIP   `,"success")}catch(k){console.error("ZIP Error:",k),y("    ZIP","error")}finally{f(!1),g(null),j.current&&(j.current.value="")}}},S=a.filter(M=>{var U,I,k;return!d||((U=M.sku)==null?void 0:U.toLowerCase().includes(d.toLowerCase()))||((I=M.oemNumber)==null?void 0:I.toLowerCase().includes(d.toLowerCase()))||((k=M.name)==null?void 0:k.toLowerCase().includes(d.toLowerCase()))}),D=M=>M?n.filter(U=>{var I;return((I=U.partNumber)==null?void 0:I.toUpperCase())===M.toUpperCase()}):[];return l?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(as,{className:"w-10 h-10 text-emerald-600 animate-spin"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:[t.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[t.jsx(ga,{size:20,className:"text-emerald-600"}),s("supplier.uploadActions"," ")]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{onClick:()=>{var M;return!h&&((M=j.current)==null?void 0:M.click())},className:`border-2 border-dashed border-slate-300 rounded-xl p-6 flex flex-col items-center justify-center text-center cursor-pointer transition-colors ${h?"opacity-50 cursor-not-allowed":"hover:border-emerald-500 hover:bg-emerald-50"}`,children:[t.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-3",children:t.jsx(Bj,{size:24,className:"text-purple-600"})}),t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:s("supplier.uploadZip","   (ZIP)")}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:s("supplier.zipHint","        ")}),t.jsx("input",{ref:j,type:"file",accept:".zip",className:"hidden",onChange:E,disabled:h}),t.jsx("button",{disabled:h,className:"px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-bold",children:s("supplier.selectFile"," ")})]}),t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-6 flex flex-col items-center justify-center text-center bg-slate-50",children:[t.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-full flex items-center justify-center mb-3",children:t.jsx(tl,{size:24,className:"text-slate-500"})}),t.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:s("supplier.bulkManage"," ")}),t.jsx("p",{className:"text-sm text-slate-500 mb-4",children:s("supplier.bulkHint","        ")})]})]}),h&&x&&t.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-bold text-slate-700",children:x.phase}),t.jsxs("span",{className:"text-sm font-mono text-slate-500",children:[Math.round(x.current),"%"]})]}),t.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300",style:{width:`${x.current}%`}})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.totalProducts"," ")}),t.jsx("p",{className:"text-2xl font-black text-slate-800",children:a.length})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.imagesPending"," ")}),t.jsx("p",{className:"text-2xl font-black text-amber-500",children:n.filter(M=>M.status==="PENDING"&&M.uploadedBy===e).length})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.imagesApproved"," ")}),t.jsx("p",{className:"text-2xl font-black text-emerald-500",children:n.filter(M=>M.status==="APPROVED"&&M.uploadedBy===e).length})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500 mb-1",children:s("supplier.imagesRejected"," ")}),t.jsx("p",{className:"text-2xl font-black text-red-500",children:n.filter(M=>M.status==="REJECTED"&&M.uploadedBy===e).length})]})]}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-200",children:t.jsxs("div",{className:"relative",children:[t.jsx(Ft,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),t.jsx("input",{type:"text",value:d,onChange:M=>u(M.target.value),placeholder:s("supplier.searchProducts","  ..."),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none"})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:t.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[t.jsx(tl,{size:18}),s("supplier.productImages"," ")]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600",children:s("supplier.productInfo"," ")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-slate-600",children:s("supplier.currentImages"," ")}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-slate-600",children:s("actions","")})]})}),t.jsx("tbody",{className:"divide-y divide-slate-100",children:S.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:3,className:"px-4 py-12 text-center text-slate-400",children:[t.jsx(Xt,{size:40,className:"mx-auto mb-3 opacity-50"}),t.jsx("p",{children:s("supplier.noProducts","  ")})]})}):S.slice(0,20).map(M=>{const U=M.oemNumber||M.sku,I=D(U);return t.jsxs("tr",{className:"hover:bg-slate-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-mono font-bold text-slate-800",children:M.oemNumber}),t.jsx("span",{className:"text-xs text-slate-500",children:M.sku}),t.jsx("span",{className:"text-sm text-slate-600",children:M.name})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:I.length>0?I.map(k=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:k.thumbnailUrl||k.fileUrl,alt:"product",className:`w-12 h-12 object-cover rounded-lg border-2 ${k.status==="APPROVED"?"border-emerald-500":k.status==="REJECTED"?"border-red-500":"border-amber-500"}`}),t.jsx("div",{className:`absolute -top-2 -right-2 w-4 h-4 rounded-full flex items-center justify-center text-[10px] text-white ${k.status==="APPROVED"?"bg-emerald-500":k.status==="REJECTED"?"bg-red-500":"bg-amber-500"}`,children:k.status==="APPROVED"?t.jsx(Ut,{size:10}):k.status==="REJECTED"?t.jsx(Zs,{size:10}):t.jsx(os,{size:10})})]},k.id)):t.jsx("span",{className:"text-xs text-slate-400 italic",children:s("supplier.noImages","  ")})})}),t.jsx("td",{className:"px-4 py-3 text-center",children:t.jsxs("label",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-lg text-xs font-bold cursor-pointer hover:bg-emerald-100 transition-colors",children:[t.jsx(Pt,{size:14}),s("supplier.addImage"," "),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:k=>{var _;const z=(_=k.target.files)==null?void 0:_[0];z&&U&&C(U,z)}})]})})]},M.id)})})]})}),S.length>20&&t.jsx("div",{className:"p-3 border-t border-slate-100 text-center text-sm text-slate-500",children:s("supplier.showingFirst20","   20  ")})]})]})}),RCe=({toast:e,onDismiss:s})=>{const{dir:a}=Bs(),r={success:t.jsx(Ut,{className:"w-5 h-5 text-green-600"}),error:t.jsx(Zs,{className:"w-5 h-5 text-red-600"}),info:t.jsx(mi,{className:"w-5 h-5 text-blue-600"})},n={success:"border-green-500 bg-white shadow-green-100",error:"border-red-500 bg-white shadow-red-100",info:"border-blue-500 bg-white shadow-blue-100"};return t.jsxs("div",{className:`
        pointer-events-auto 
        flex items-center gap-3 w-auto min-w-[320px] max-w-md
        rounded-lg border-l-4 rtl:border-l-0 rtl:border-r-4 shadow-xl ring-1 ring-black ring-opacity-5 
        px-5 py-4 transform transition-all duration-500 ease-out animate-slide-up
        hover:scale-105 cursor-pointer
        ${n[e.type]}
      `,onClick:()=>s(e.id),role:"alert",children:[t.jsx("div",{className:"flex-shrink-0 animate-pulse",children:r[e.type]}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-sm font-bold text-gray-800 leading-snug",children:e.message})}),t.jsx("div",{className:"flex flex-shrink-0 ml-1 rtl:mr-1",children:t.jsxs("button",{className:"inline-flex rounded-md p-1 text-gray-400 hover:text-gray-600 focus:outline-none transition-colors",onClick:i=>{i.stopPropagation(),s(e.id)},children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx(St,{className:"h-4 w-4"})]})})]})},PCe=()=>{const{toasts:e,removeToast:s}=Dt();return e.length===0?null:t.jsx("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col gap-3 items-center pointer-events-none w-full px-4",children:e.map(a=>t.jsx(RCe,{toast:a,onDismiss:s},a.id))})};function DCe({userId:e="guest",userName:s}){const{t:a}=Jt(),{language:r,dir:n}=Bs(),{addToast:i}=Dt(),l=n==="rtl",[o,d]=T.useState(!1),[u,h]=T.useState(!1),[f,x]=T.useState([]),[g,v]=T.useState(""),[b,y]=T.useState(!1),[j,w]=T.useState(null),A=T.useRef(null),O=T.useRef(null),C=()=>{var z;(z=A.current)==null||z.scrollIntoView({behavior:"smooth"})};T.useEffect(()=>{C()},[f]),T.useEffect(()=>{o&&!u&&O.current&&O.current.focus()},[o,u]);const E=()=>{d(!0),h(!1)},S=()=>{d(!1)},D=()=>{h(!u)},M=()=>{x([]),w(null)},U=async()=>{if(!g.trim()||b)return;const z={id:`msg-${Date.now()}`,role:"user",content:g.trim(),timestamp:new Date().toISOString()};x(_=>[..._,z]),v(""),y(!0);try{const _=r==="ar"?`     SINI CAR    B2B.
  :
-    
-   
-  
-  
${s?` : ${s}`:""}
  .`:`You are a friendly AI assistant for SINI CAR B2B auto parts platform.
Help customers with:
- Finding auto parts
- Order and shipping information
- Price comparisons
- General inquiries
${s?`Customer name: ${s}`:""}
Be concise and helpful.`,q=await xe.sendAIMessage({message:g.trim(),conversationHistory:f,systemPrompt:_,userId:e,language:r}),L={id:`msg-${Date.now()}`,role:"assistant",content:q.content,timestamp:new Date().toISOString()};if(x(Q=>[...Q,L]),!j){const Q=`conv-${Date.now()}`;w(Q);const X={id:Q,userId:e,title:g.trim().substring(0,50),messages:[...f,z,L],provider:"openai",model:"gpt-4o-mini",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),totalTokensUsed:q.tokensUsed||0};await xe.saveAIConversation(X)}}catch(_){console.error("AI Error:",_),i(a("ai.errorMessage","    "),"error");const q={id:`msg-${Date.now()}`,role:"assistant",content:r==="ar"?"  .    .":"Sorry, an error occurred. Please try again.",timestamp:new Date().toISOString()};x(L=>[...L,q])}finally{y(!1)}},I=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),U())},k=[{label:r==="ar"?"  ":"Find a part",query:r==="ar"?"    ":"I want to find an auto part"},{label:r==="ar"?" ":"Order status",query:r==="ar"?"  ":"What is my order status?"},{label:r==="ar"?" ":"Compare prices",query:r==="ar"?"   ":"Help me compare prices"}];return o?t.jsxs("div",{className:`fixed bottom-6 ${l?"left-6":"right-6"} z-50 w-80 sm:w-96 bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden transition-all duration-300 ${u?"h-14":"h-[500px]"}`,"data-testid":"ai-assistant-container",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Mn,{className:"w-5 h-5"}),t.jsx("span",{className:"font-semibold text-sm",children:a("ai.assistantName"," SINI ")})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:M,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",title:a("ai.clearChat"," "),"data-testid":"button-clear-chat",children:t.jsx(Ct,{className:"w-4 h-4"})}),t.jsx("button",{onClick:D,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-minimize-chat",children:u?t.jsx(xae,{className:"w-4 h-4"}):t.jsx(wae,{className:"w-4 h-4"})}),t.jsx("button",{onClick:S,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors","data-testid":"button-close-chat",children:t.jsx(St,{className:"w-4 h-4"})})]})]}),!u&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 h-[380px] bg-slate-50",children:[f.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Mn,{className:"w-12 h-12 mx-auto text-blue-500 mb-3"}),t.jsx("p",{className:"text-slate-600 text-sm mb-4",children:a("ai.welcomeMessage","!    ")}),t.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:k.map((z,_)=>t.jsx("button",{onClick:()=>{v(z.query),setTimeout(()=>U(),100)},className:"px-3 py-1.5 text-xs bg-white border border-slate-200 rounded-full hover:bg-blue-50 hover:border-blue-300 transition-colors","data-testid":`button-quick-action-${_}`,children:z.label},_))})]}):f.map(z=>t.jsx("div",{className:`flex ${z.role==="user"?"justify-end":"justify-start"}`,children:t.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${z.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white border border-slate-200 text-slate-800 rounded-bl-md"}`,children:t.jsxs("div",{className:"flex items-start gap-2",children:[z.role==="assistant"&&t.jsx(Mn,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),t.jsx("p",{className:"text-sm whitespace-pre-wrap",children:z.content}),z.role==="user"&&t.jsx(bn,{className:"w-4 h-4 text-blue-200 mt-0.5 flex-shrink-0"})]})})},z.id)),b&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl rounded-bl-md px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Mn,{className:"w-4 h-4 text-blue-500"}),t.jsx(as,{className:"w-4 h-4 animate-spin text-blue-500"}),t.jsx("span",{className:"text-sm text-slate-500",children:a("ai.thinking"," ...")})]})})}),t.jsx("div",{ref:A})]}),t.jsx("div",{className:"p-3 border-t border-slate-200 bg-white",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{ref:O,type:"text",value:g,onChange:z=>v(z.target.value),onKeyDown:I,placeholder:a("ai.inputPlaceholder"," ..."),className:"flex-1 px-4 py-2 border border-slate-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:b,"data-testid":"input-ai-message"}),t.jsx("button",{onClick:U,disabled:!g.trim()||b,className:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","data-testid":"button-send-message",children:t.jsx(xi,{className:`w-4 h-4 ${l?"rotate-180":""}`})})]})})]})]}):t.jsxs("button",{onClick:E,className:`fixed bottom-6 ${l?"left-6":"right-6"} z-50 w-14 h-14 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group`,"data-testid":"button-open-ai-assistant",children:[t.jsx(Or,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),t.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]})}const oB=T.createContext(void 0),FM="sini_car_programming_mode";function MCe({children:e}){const[s,a]=T.useState(()=>localStorage.getItem(FM)==="true"),[r,n]=T.useState("dashboard"),[i,l]=T.useState(!1),[o,d]=T.useState("command"),[u,h]=T.useState(!1);T.useEffect(()=>{localStorage.setItem(FM,String(s))},[s]);const f=()=>{a(w=>(w&&l(!1),!w))},x=()=>a(!0),g=()=>{l(!1),a(!1)},v=(w,A)=>{d(w||"command"),h(A||!1),l(!0)},b=()=>l(!1),y=()=>l(w=>!w),j=()=>h(!1);return t.jsx(oB.Provider,{value:{isProgrammingMode:s,toggleProgrammingMode:f,enableProgrammingMode:x,disableProgrammingMode:g,currentPage:r,setCurrentPage:n,isCommandCenterOpen:i,openCommandCenter:v,closeCommandCenter:b,toggleCommandCenter:y,initialTab:o,shouldAutoRunDiagnostics:u,clearAutoRunDiagnostics:j},children:e})}function cB(){const e=T.useContext(oB);if(!e)throw new Error("useProgrammingMode must be used within ProgrammingModeProvider");return e}function LCe({onOpenCommandCenter:e}){const{t:s}=Jt(),{language:a}=Bs(),r=a==="ar",{isProgrammingMode:n,toggleProgrammingMode:i,currentPage:l,isCommandCenterOpen:o,openCommandCenter:d}=cB(),[u,h]=T.useState(!1),[f,x]=T.useState(!1),[g,v]=T.useState(!0);if(T.useEffect(()=>{const y=setTimeout(()=>v(!1),5e3);return()=>clearTimeout(y)},[]),!n)return t.jsx("div",{className:`fixed bottom-6 z-[9999] ${r?"left-6":"right-6"}`,children:t.jsxs("button",{onClick:i,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),className:"group relative w-12 h-12 bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-full shadow-lg hover:shadow-cyan-500/20 transition-all duration-300 hover:scale-105 flex items-center justify-center","data-testid":"button-enable-programming-mode",children:[t.jsx(dF,{className:"w-5 h-5 text-slate-400 group-hover:text-cyan-400 transition-colors"}),f&&t.jsxs("div",{className:`absolute bottom-full mb-2 px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-lg text-xs text-white whitespace-nowrap ${r?"right-0":"left-0"}`,children:[r?"  ":"Enable Programming Mode",t.jsx("div",{className:`absolute top-full ${r?"right-4":"left-4"} w-2 h-2 bg-slate-800 border-r border-b border-slate-700 transform rotate-45 -translate-y-1`})]})]})});const b=[{id:"command",icon:wf,label:r?" ":"Command Center",color:"from-cyan-500 to-blue-600",action:()=>{d("command"),h(!1)}},{id:"scan",icon:Ds,label:r?" ":"Scan System",color:"from-green-500 to-emerald-600",action:()=>{d("diagnostics",!0),h(!1)}},{id:"files",icon:ab,label:r?" ":"Explore Files",color:"from-purple-500 to-violet-600",action:()=>{d("files"),h(!1)}},{id:"settings",icon:la,label:r?" AI":"AI Settings",color:"from-amber-500 to-orange-600",action:()=>{d("history"),h(!1)}}];return t.jsxs("div",{className:`fixed bottom-6 z-[9999] ${r?"left-6":"right-6"}`,children:[u&&t.jsxs("div",{className:"absolute bottom-16 flex flex-col gap-3 animate-fade-in",children:[b.map((y,j)=>t.jsxs("button",{onClick:y.action,className:`group relative flex items-center gap-3 px-4 py-2.5 bg-gradient-to-r ${y.color} rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105`,style:{animationDelay:`${j*50}ms`},"data-testid":`button-quick-action-${y.id}`,children:[t.jsx(y.icon,{className:"w-5 h-5 text-white"}),t.jsx("span",{className:"text-sm font-medium text-white whitespace-nowrap",children:y.label})]},y.id)),t.jsxs("button",{onClick:()=>{i(),h(!1)},className:"group flex items-center gap-3 px-4 py-2.5 bg-gradient-to-r from-red-500 to-rose-600 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105","data-testid":"button-disable-programming-mode",children:[t.jsx(nd,{className:"w-5 h-5 text-white"}),t.jsx("span",{className:"text-sm font-medium text-white whitespace-nowrap",children:r?"  ":"Exit Programming Mode"})]})]}),t.jsxs("div",{className:"relative",children:[g&&t.jsx("div",{className:"absolute inset-0 bg-cyan-500 rounded-full animate-ping opacity-30"}),t.jsxs("button",{onClick:()=>h(!u),className:`relative w-14 h-14 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-full shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all duration-300 hover:scale-105 flex items-center justify-center group ${u?"rotate-180":""}`,"data-testid":"button-floating-ai-main",children:[u?t.jsx(Wr,{className:"w-6 h-6 text-white transition-transform"}):t.jsx(Mn,{className:"w-6 h-6 text-white group-hover:animate-bounce"}),t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:t.jsx(al,{className:"w-2.5 h-2.5 text-white"})})]})]}),t.jsxs("div",{className:`absolute ${r?"right-16":"left-16"} bottom-2 px-3 py-1.5 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/30 rounded-lg`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs font-medium text-cyan-400 whitespace-nowrap",children:r?"  ":"Programming Mode Active"})]}),t.jsx("div",{className:"text-[10px] text-slate-400 mt-0.5",children:r?`: ${l}`:`Page: ${l}`})]})]})}const FCe=[{name:"Authentication",nameAr:" ",description:"Handles user login, logout, session management, and password reset",descriptionAr:"          ",files:["src/App.tsx","src/components/Register.tsx","backend/src/modules/auth/"],mainEntry:"src/App.tsx"},{name:"Customer Dashboard",nameAr:"  ",description:"Main customer portal with product search, cart, orders, and organization management",descriptionAr:"       ",files:["src/components/Dashboard.tsx","src/components/ProductSearchPage.tsx","src/components/OrdersPage.tsx"],mainEntry:"src/components/Dashboard.tsx"},{name:"Admin Dashboard",nameAr:"  ",description:"Administrative control panel with customer management, orders, products, and settings",descriptionAr:"       ",files:["src/components/AdminDashboard.tsx","src/components/AdminCustomersPage.tsx","src/components/AdminOrdersManager.tsx"],mainEntry:"src/components/AdminDashboard.tsx"},{name:"Supplier Portal",nameAr:" ",description:"Portal for suppliers to manage products, quotes, and catalog",descriptionAr:"      ",files:["src/components/SupplierPortal.tsx","src/components/SupplierInstallmentPage.tsx"],mainEntry:"src/components/SupplierPortal.tsx"},{name:"Trader Tools",nameAr:" ",description:"Advanced tools including VIN extractor, price comparison, and PDF to Excel converter",descriptionAr:"    VIN    PDF  Excel",files:["src/components/TraderToolsHub.tsx","src/components/VinExtractorTool.tsx","src/components/PriceComparisonTool.tsx","src/components/PdfToExcelTool.tsx"],mainEntry:"src/components/TraderToolsHub.tsx"},{name:"Installment System",nameAr:" ",description:"Wholesale installment purchase system with credit profiles and payment schedules",descriptionAr:"        ",files:["src/components/AdminInstallmentsPage.tsx","src/components/CustomerInstallmentPage.tsx","src/components/SupplierInstallmentPage.tsx"],mainEntry:"src/components/AdminInstallmentsPage.tsx"},{name:"Marketing & Ads",nameAr:" ",description:"Marketing campaigns, ads management, and promotional content",descriptionAr:"     ",files:["src/components/AdminMarketingCenter.tsx","src/components/AdminAdvertisingPage.tsx","src/components/MarketingDisplay.tsx"],mainEntry:"src/components/AdminMarketingCenter.tsx"},{name:"AI System",nameAr:"  ",description:"AI assistant, command center, and AI training settings",descriptionAr:" AI     AI",files:["src/components/AIAssistant.tsx","src/components/AdminAICommandCenter.tsx","src/components/AdminAISettings.tsx","src/components/AdminAITrainingPage.tsx"],mainEntry:"src/components/AdminAICommandCenter.tsx"},{name:"Messaging",nameAr:" ",description:"Messaging center with WhatsApp, email, and notification templates",descriptionAr:"       ",files:["src/components/AdminMessagingCenter.tsx","backend/src/modules/messaging/"],mainEntry:"src/components/AdminMessagingCenter.tsx"},{name:"Permissions",nameAr:" ",description:"Role-based access control and permission management",descriptionAr:"       ",files:["src/components/AdminPermissionCenter.tsx","src/services/PermissionContext.tsx"],mainEntry:"src/components/AdminPermissionCenter.tsx"}],UCe=[{id:"api_connectivity",name:"API Connectivity",nameAr:" API",check:"Verify backend API is responding"},{id:"database_status",name:"Database Status",nameAr:"  ",check:"Check database connection and integrity"},{id:"localstorage_usage",name:"LocalStorage Usage",nameAr:"  ",check:"Monitor localStorage capacity"},{id:"translation_completeness",name:"Translation Coverage",nameAr:" ",check:"Check for missing translations"},{id:"component_errors",name:"Component Errors",nameAr:" ",check:"Detect React component errors"},{id:"security_audit",name:"Security Audit",nameAr:" ",check:"Check for security vulnerabilities"}],UM="ai_programming_command_history";function zCe(){const{t:e}=Jt(),{language:s}=Bs(),{showToast:a}=Dt(),{isCommandCenterOpen:r,closeCommandCenter:n,currentPage:i,initialTab:l,shouldAutoRunDiagnostics:o,clearAutoRunDiagnostics:d}=cB(),u=s==="ar",[h,f]=T.useState("command");T.useEffect(()=>{r&&f(l)},[r,l]);const[x,g]=T.useState(""),[v,b]=T.useState(!1),[y,j]=T.useState(null),[w,A]=T.useState([]),[O,C]=T.useState([]),[E,S]=T.useState(!1),[D,M]=T.useState(!1),[U,I]=T.useState(""),[k,z]=T.useState(null),_=T.useRef(null);T.useEffect(()=>{const G=localStorage.getItem(UM);if(G)try{A(JSON.parse(G))}catch{console.error("Failed to load command history")}},[]),T.useEffect(()=>{w.length>0&&localStorage.setItem(UM,JSON.stringify(w.slice(0,50)))},[w]);const q=G=>{A(te=>[G,...te].slice(0,50))},L=async G=>{await new Promise(fe=>setTimeout(fe,800));const te=G.toLowerCase();let Z="unknown",ue=" ",re="Analyzing command...",H="  ...",pe=[],B=.5,oe="low";if(te.includes("create page")||te.includes("add page")||G.includes(" ")||G.includes(" ")){Z="Create Page",ue=" ";const fe=G.replace(/ |create page|add page| /gi,"").trim()||"New Page";re=`Create a new page: "${fe}"`,H=`  : "${fe}"`,pe=[{type:"create",target:"Dynamic Page",details:`Page "${fe}" will be created`,detailsAr:`   "${fe}"`}],B=.9,oe="low"}else te.includes("add user")||G.includes(" ")?(Z="Add User",ue=" ",re="Add a new user to the system",H="   ",pe=[{type:"create",target:"User",details:"New user will be created",detailsAr:"   "}],B=.85,oe="medium"):te.includes("change color")||G.includes(" ")||G.includes(" ")?(Z="Change Theme",ue=" ",re="Modify site color scheme",H="  ",pe=[{type:"update",target:"Settings",details:"Theme colors will be updated",detailsAr:"   "}],B=.8,oe="low"):te.includes("scan")||te.includes("check")||G.includes("")||G.includes("")?(Z="System Scan",ue=" ",re="Perform system diagnostics",H="   ",pe=[{type:"update",target:"Diagnostics",details:"System will be scanned for issues",detailsAr:"     "}],B=.95,oe="low"):te.includes("delete")||te.includes("remove")||G.includes("")||G.includes("")?(Z="Delete",ue="",re="Delete item from system",H="   ",pe=[{type:"delete",target:"Item",details:"Item will be permanently deleted",detailsAr:"   "}],B=.7,oe="high"):(re=`Execute: "${G}"`,H=`: "${G}"`,pe=[{type:"update",target:"System",details:"Custom command will be processed",detailsAr:"   "}]);return{id:`preview_${Date.now()}`,command:G,action:Z,actionAr:ue,description:re,descriptionAr:H,changes:pe,confidence:B,estimatedTime:"< 5s",risk:oe}},Q=async()=>{if(x.trim()){b(!0);try{const G=await L(x);j(G),f("preview")}catch{a(u?"   ":"Failed to parse command","error")}b(!1)}},X=async()=>{if(!y)return;b(!0);const G={id:`cmd_${Date.now()}`,command:y.command,status:"executed",result:`Successfully executed: ${y.action}`,resultAr:`  : ${y.actionAr}`,timestamp:new Date().toISOString(),executedAt:new Date().toISOString()};await new Promise(te=>setTimeout(te,1e3)),q(G),a(u?"   !":"Command executed successfully!","success"),j(null),g(""),f("command"),b(!1)},W=()=>{if(!y)return;const G={id:`cmd_${Date.now()}`,command:y.command,status:"rejected",timestamp:new Date().toISOString()};q(G),a(u?"  ":"Command rejected","info"),j(null),f("command")},ee=()=>{y&&(I(y.command),M(!0))},V=async()=>{M(!1),g(U),b(!0);const G=await L(U);j(G),b(!1)},P=async()=>{S(!0),f("diagnostics");const G=UCe.map(te=>({id:te.id,name:te.name,nameAr:te.nameAr,status:"checking"}));C(G);for(let te=0;te<G.length;te++){await new Promise(re=>setTimeout(re,500));const Z=["passing","passing","passing","warning","passing","passing"],ue=[{en:"All endpoints responding",ar:"  "},{en:"Connected and healthy",ar:" "},{en:`Using ${Math.round(Math.random()*50+20)}% of quota`,ar:` ${Math.round(Math.random()*50+20)}%  `},{en:"3 keys missing translations",ar:"3   "},{en:"No errors detected",ar:"  "},{en:"No vulnerabilities found",ar:"  "}];C(re=>re.map((H,pe)=>{var B,oe;return pe===te?{...H,status:Z[te]||"passing",message:((B=ue[te])==null?void 0:B.en)||"OK",messageAr:((oe=ue[te])==null?void 0:oe.ar)||""}:H}))}S(!1),a(u?"  ":"System scan complete","success")};T.useEffect(()=>{r&&o&&h==="diagnostics"&&(d(),P())},[r,o,h]);const Y=G=>{switch(G){case"high":return"text-red-500 bg-red-500/10 border-red-500/30";case"medium":return"text-amber-500 bg-amber-500/10 border-amber-500/30";default:return"text-green-500 bg-green-500/10 border-green-500/30"}},J=G=>{switch(G){case"passing":return t.jsx(Ut,{className:"w-4 h-4 text-green-500"});case"warning":return t.jsx(Gs,{className:"w-4 h-4 text-amber-500"});case"error":return t.jsx(Zs,{className:"w-4 h-4 text-red-500"});case"checking":return t.jsx(as,{className:"w-4 h-4 text-cyan-500 animate-spin"});default:return t.jsx(os,{className:"w-4 h-4 text-slate-400"})}};if(!r)return null;const K=[{id:"command",icon:wf,label:u?" ":"New Command"},{id:"preview",icon:fs,label:u?"":"Preview",disabled:!y},{id:"history",icon:xn,label:u?"":"History"},{id:"diagnostics",icon:Ds,label:u?"":"Diagnostics"},{id:"files",icon:ab,label:u?"":"Files"}],se=[{ar:"   ",en:"Create a page for special offers"},{ar:"    ",en:"Add a new user named Ahmed"},{ar:"  ",en:"Scan system for errors"},{ar:"    ",en:"Change site color to blue"}];return t.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:t.jsxs("div",{className:"w-full max-w-4xl max-h-[90vh] bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 border border-cyan-500/30 rounded-2xl shadow-2xl shadow-cyan-500/10 overflow-hidden flex flex-col",dir:u?"rtl":"ltr",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700 bg-slate-900/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:t.jsx(Mn,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white",children:u?"  AI ":"AI Programming Command Center"}),t.jsx("p",{className:"text-xs text-slate-400",children:u?` : ${i}`:`Current page: ${i}`})]})]}),t.jsx("button",{onClick:n,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors","data-testid":"button-close-command-center",children:t.jsx(St,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"flex border-b border-slate-700 bg-slate-800/50 overflow-x-auto",children:K.map(G=>t.jsxs("button",{onClick:()=>!G.disabled&&f(G.id),disabled:G.disabled,className:`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${h===G.id?"text-cyan-400 border-b-2 border-cyan-400 bg-slate-800":G.disabled?"text-slate-600 cursor-not-allowed":"text-slate-400 hover:text-white hover:bg-slate-700/50"}`,"data-testid":`tab-${G.id}`,children:[t.jsx(G.icon,{className:"w-4 h-4"}),G.label]},G.id))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[h==="command"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-sm font-medium text-slate-300",children:u?"  :":"Enter your command:"}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:_,value:x,onChange:G=>g(G.target.value),onKeyDown:G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),Q())},placeholder:u?":    ...":"Example: Create a page for special offers...",className:"w-full h-32 p-4 bg-slate-800/50 border border-slate-600 rounded-xl text-white placeholder-slate-500 resize-none focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","data-testid":"input-command"}),t.jsx("button",{onClick:Q,disabled:!x.trim()||v,className:"absolute bottom-3 left-3 p-2 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-lg text-white hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity","data-testid":"button-submit-command",children:v?t.jsx(as,{className:"w-5 h-5 animate-spin"}):t.jsx(xi,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-medium text-slate-400",children:u?"  :":"Command Examples:"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:se.map((G,te)=>t.jsxs("button",{onClick:()=>g(u?G.ar:G.en),className:"p-3 text-start bg-slate-800/50 border border-slate-700 rounded-lg text-sm text-slate-300 hover:bg-slate-700/50 hover:border-cyan-500/30 transition-colors","data-testid":`button-example-${te}`,children:[t.jsx(pi,{className:"w-4 h-4 text-cyan-400 inline mr-2"}),u?G.ar:G.en]},te))})]}),t.jsxs("button",{onClick:P,className:"w-full p-4 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-xl text-green-400 hover:bg-green-500/30 transition-colors flex items-center justify-center gap-3","data-testid":"button-run-diagnostics",children:[t.jsx(Ds,{className:"w-5 h-5"}),u?"   ":"Scan System for Errors & Vulnerabilities"]})]}),h==="preview"&&y&&t.jsx("div",{className:"space-y-6",children:D?t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"text-sm font-medium text-slate-300",children:u?" :":"Edit Command:"}),t.jsx("textarea",{value:U,onChange:G=>I(G.target.value),className:"w-full h-24 p-4 bg-slate-800/50 border border-cyan-500 rounded-xl text-white resize-none focus:outline-none","data-testid":"input-edit-command"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:V,className:"flex-1 p-3 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors","data-testid":"button-save-edit",children:u?"  ":"Save & Re-analyze"}),t.jsx("button",{onClick:()=>M(!1),className:"px-4 py-3 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors","data-testid":"button-cancel-edit",children:u?"":"Cancel"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-white",children:u?y.actionAr:y.action}),t.jsx("p",{className:"text-sm text-slate-400",children:u?y.descriptionAr:y.description})]}),t.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${Y(y.risk)}`,children:y.risk==="high"?u?" ":"High Risk":y.risk==="medium"?u?" ":"Medium Risk":u?" ":"Low Risk"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(al,{className:"w-4 h-4 text-cyan-400"}),u?":":"Confidence:"," ",Math.round(y.confidence*100),"%"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(os,{className:"w-4 h-4 text-cyan-400"}),u?" :":"Est. Time:"," ",y.estimatedTime]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300",children:u?" :":"Expected Changes:"}),y.changes.map((G,te)=>t.jsxs("div",{className:"p-3 bg-slate-800/30 border border-slate-700 rounded-lg flex items-start gap-3",children:[t.jsx("div",{className:`p-1.5 rounded ${G.type==="create"?"bg-green-500/20 text-green-400":G.type==="update"?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400"}`,children:G.type==="create"?t.jsx(Xt,{className:"w-4 h-4"}):G.type==="update"?t.jsx(Qo,{className:"w-4 h-4"}):t.jsx(Ct,{className:"w-4 h-4"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-white",children:G.target}),t.jsx("p",{className:"text-xs text-slate-400",children:u?G.detailsAr:G.details})]})]},te))]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-4",children:[t.jsx("button",{onClick:X,disabled:v,className:"p-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-medium hover:opacity-90 disabled:opacity-50 transition-opacity flex items-center justify-center gap-2","data-testid":"button-approve",children:v?t.jsx(as,{className:"w-5 h-5 animate-spin"}):t.jsxs(t.Fragment,{children:[t.jsx(Ut,{className:"w-5 h-5"}),u?"":"Approve"]})}),t.jsxs("button",{onClick:ee,className:"p-4 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2","data-testid":"button-edit",children:[t.jsx(Qo,{className:"w-5 h-5"}),u?"":"Edit"]}),t.jsxs("button",{onClick:W,className:"p-4 bg-gradient-to-r from-red-500 to-rose-600 text-white rounded-xl font-medium hover:opacity-90 transition-opacity flex items-center justify-center gap-2","data-testid":"button-reject",children:[t.jsx(Zs,{className:"w-5 h-5"}),u?"":"Reject"]})]})]})}),h==="history"&&t.jsx("div",{className:"space-y-4",children:w.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-400",children:[t.jsx(xn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:u?"    ":"No command history yet"})]}):w.map(G=>t.jsx("div",{className:"p-4 bg-slate-800/50 border border-slate-700 rounded-xl",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-white font-medium",children:G.command}),G.result&&t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:u?G.resultAr:G.result})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[G.status==="executed"&&t.jsx(Ut,{className:"w-4 h-4 text-green-500"}),G.status==="rejected"&&t.jsx(Zs,{className:"w-4 h-4 text-red-500"}),G.status==="failed"&&t.jsx(Gs,{className:"w-4 h-4 text-amber-500"}),t.jsx("span",{className:"text-xs text-slate-500",children:new Date(G.timestamp).toLocaleString(u?"ar-SA":"en-US")})]})]})},G.id))}),h==="diagnostics"&&t.jsx("div",{className:"space-y-4",children:!E&&O.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ds,{className:"w-12 h-12 mx-auto mb-3 text-slate-400 opacity-50"}),t.jsx("p",{className:"text-slate-400 mb-4",children:u?"   ":"Click to start system scan"}),t.jsx("button",{onClick:P,className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl font-medium hover:opacity-90 transition-opacity","data-testid":"button-start-scan",children:u?" ":"Start Scan"})]}):t.jsxs(t.Fragment,{children:[O.map(G=>t.jsxs("div",{className:"p-4 bg-slate-800/50 border border-slate-700 rounded-xl flex items-center gap-4",children:[J(G.status),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-white",children:u?G.nameAr:G.name}),G.message&&t.jsx("p",{className:"text-xs text-slate-400",children:u?G.messageAr:G.message})]})]},G.id)),!E&&t.jsxs("button",{onClick:P,className:"w-full p-3 border border-slate-600 text-slate-400 rounded-xl hover:bg-slate-700/50 transition-colors flex items-center justify-center gap-2","data-testid":"button-rescan",children:[t.jsx(Qt,{className:"w-4 h-4"}),u?" ":"Rescan"]})]})}),h==="files"&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-slate-400 mb-4",children:u?"      :":"Explore project files and understand each file's purpose:"}),FCe.map(G=>t.jsxs("div",{className:"border border-slate-700 rounded-xl overflow-hidden",children:[t.jsxs("button",{onClick:()=>z(k===G.name?null:G.name),className:"w-full p-4 bg-slate-800/50 flex items-center justify-between hover:bg-slate-700/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(dF,{className:"w-5 h-5 text-cyan-400"}),t.jsxs("div",{className:"text-start",children:[t.jsx("p",{className:"text-sm font-medium text-white",children:u?G.nameAr:G.name}),t.jsxs("p",{className:"text-xs text-slate-400",children:[G.files.length," ",u?"":"files"]})]})]}),k===G.name?t.jsx(Wr,{className:"w-4 h-4 text-slate-400"}):t.jsx(kr,{className:"w-4 h-4 text-slate-400"})]}),k===G.name&&t.jsxs("div",{className:"p-4 bg-slate-900/50 border-t border-slate-700 space-y-2",children:[t.jsx("p",{className:"text-xs text-slate-400 mb-3",children:u?G.descriptionAr:G.description}),G.files.map(te=>t.jsx("div",{className:"p-2 bg-slate-800/30 rounded-lg text-xs font-mono text-slate-300",children:te},te))]})]},G.name))]})]})]})})}const zM=e=>[{icon:t.jsx(wa,{size:32}),titleKey:"loading.verifyingCredentials"},{icon:t.jsx(Vp,{size:32}),titleKey:"loading.connectingWarehouse"},{icon:t.jsx(Xt,{size:32}),titleKey:"loading.loadingCatalog"},{icon:t.jsx(Do,{size:32}),titleKey:"loading.applyingDiscounts"},{icon:t.jsx(Vo,{size:32}),titleKey:"loading.syncingInventory"},{icon:t.jsx(Dr,{size:32}),titleKey:"loading.optimizingLogistics"},{icon:t.jsx(Gr,{size:32}),titleKey:"loading.finalizingSetup"},{icon:t.jsx(Fn,{size:32}),titleKey:"loading.accessGranted"}];function BCe(){var ee,V,P,Y,J,K,se,G,te;const[e,s]=T.useState(null),[a,r]=T.useState(null),[n,i]=T.useState("LOGIN"),[l,o]=T.useState(!0),[d,u]=T.useState("OWNER"),[h,f]=T.useState(!0),[x,g]=T.useState(0),[v,b]=T.useState(!1),[y,j]=T.useState(0),[w,A]=T.useState(0),[O,C]=T.useState(""),[E,S]=T.useState(""),[D,M]=T.useState(!1),[U,I]=T.useState(null),{t:k}=Jt(),{i18n:z}=Jt(),_=Lo(z.language),{addToast:q}=Dt();T.useEffect(()=>{xe.getSettings().then(I)},[]),T.useEffect(()=>{(async()=>{const ue=await xe.getCurrentSession();if(ue)try{const H=ue.role==="CUSTOMER_STAFF"?"STAFF":"OWNER",pe=H==="STAFF"?ue.phone:ue.clientId,B=H==="STAFF"?ue.activationCode:ue.password||"1",oe=await xe.login(pe,B,H);s(oe.user),r(oe.profile),f(!1),o(!1);return}catch(H){console.error("Session restore failed",H),xe.logout()}const re=localStorage.getItem("sini_car_persistent_session");if(re)try{const H=JSON.parse(re);if(H.expiresAt&&H.expiresAt>Date.now()&&H.sessionToken&&H.userId){if(xe.validateSessionToken(H.userId,H.sessionToken)){const pe=await xe.getUserById(H.userId);if(pe&&pe.isActive){let B=null;if(pe.role!=="SUPER_ADMIN"){const oe=await xe.getAllUsers(),fe=pe.parentId||pe.id,ne=oe.find(de=>de.user.id===fe);B=(ne==null?void 0:ne.profile)||null}localStorage.setItem("sini_car_current_user",JSON.stringify(pe)),s(pe),r(B),f(!1),o(!1);return}}localStorage.removeItem("sini_car_persistent_session")}else localStorage.removeItem("sini_car_persistent_session")}catch(H){console.error("Persistent session restore failed",H),localStorage.removeItem("sini_car_persistent_session")}o(!1)})()},[]);const L=async()=>{const Z=await xe.getCurrentSession();Z&&s(Z)};T.useEffect(()=>{!e&&!l&&!v&&(setTimeout(()=>g(1),300),setTimeout(()=>g(2),1e3),setTimeout(()=>g(3),1700),setTimeout(()=>f(!1),2500))},[l,e,v]);const Q=async Z=>{Z.preventDefault();try{const ue=await xe.login(O,E,d);b(!0),j(0),A(0);const re=4e3,H=zM(k),pe=re/H.length;let B=0;const oe=setInterval(()=>{B++,B<H.length&&j(B)},pe),fe=setInterval(()=>{A(ne=>Math.min(ne+1,100))},re/100);setTimeout(()=>{if(clearInterval(oe),clearInterval(fe),D){const ne=`${ue.user.id}_${Date.now()}_${Math.random().toString(36).substring(2,15)}`,de={sessionToken:ne,userId:ue.user.id,loginType:d,createdAt:Date.now(),expiresAt:Date.now()+720*60*60*1e3};localStorage.setItem("sini_car_persistent_session",JSON.stringify(de)),xe.storeSessionToken(ue.user.id,ne)}b(!1),s(ue.user),r(ue.profile),q(`${k("welcome")} ${ue.user.name}`,"success")},re)}catch(ue){q(ue.message,"error")}},X=async()=>{await xe.logout(),localStorage.removeItem("sini_car_persistent_session"),s(null),r(null),i("LOGIN"),C(""),S(""),M(!1),f(!1),b(!1),q(k("logout"),"info")},W=()=>{const Z={id:"guest_"+Date.now(),clientId:"GUEST",name:k("login.guest"),email:"",phone:"",role:"CUSTOMER_OWNER",isActive:!0,password:"",isGuest:!0};s(Z),r(null),q(k("login.guestWelcome"),"info")};if(l&&!h)return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#050A14]",children:t.jsx("div",{className:"flex flex-col items-center gap-4",children:t.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})})});if(e)return e.role==="SUPER_ADMIN"?t.jsx(wCe,{onLogout:X}):e.isSupplier||e.extendedRole==="SUPPLIER_LOCAL"||e.extendedRole==="SUPPLIER_INTERNATIONAL"?t.jsx(SCe,{user:e,onLogout:X}):t.jsx(Kde,{children:t.jsx(eue,{user:e,profile:a,onLogout:X,onRefreshUser:L})});if(n==="REGISTER")return t.jsx(zce,{onSuccess:()=>i("LOGIN"),onSwitchToLogin:()=>i("LOGIN")});if(n==="PARTNER_REGISTER")return t.jsx(qce,{onBack:()=>i("LOGIN")});if(v){const ue=zM()[y];return t.jsxs("div",{className:"fixed inset-0 bg-[#050A14] text-white flex flex-col items-center justify-center font-sans overflow-hidden z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-slate-900 via-[#050A14] to-[#050A14]"}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(6,182,212,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(6,182,212,0.05)_1px,transparent_1px)] bg-[size:30px_30px] opacity-20"}),t.jsxs("div",{className:"relative z-10 w-full max-w-lg px-8 text-center",children:[t.jsxs("div",{className:"mb-12 relative h-32 flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-cyan-500/10 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"relative z-10 w-24 h-24 bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-cyan-500/30 flex items-center justify-center text-cyan-400 shadow-[0_0_30px_rgba(6,182,212,0.15)] transform transition-all duration-500 hover:scale-105",children:ue.icon}),t.jsx("div",{className:"absolute inset-0 animate-spin-slow",children:t.jsx("div",{className:"absolute top-0 left-1/2 w-2 h-2 bg-cyan-500 rounded-full shadow-[0_0_10px_#06b6d4]"})})]}),t.jsx("div",{className:"space-y-3 mb-12 min-h-[100px]",children:t.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight animate-fade-in key={loginStepIndex}",children:k(ue.titleKey)})}),t.jsx("div",{className:"relative w-full h-1.5 bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-cyan-600 via-cyan-400 to-cyan-300 transition-all duration-300 ease-out shadow-[0_0_10px_#22d3ee]",style:{width:`${w}%`}})}),t.jsxs("div",{className:"flex justify-between mt-2 text-xs font-mono text-slate-500",children:[t.jsx("span",{children:k("loading.systemInitialization")}),t.jsxs("span",{children:[Math.round(w),"%"]})]})]})]})}return h?t.jsxs("div",{className:"fixed inset-0 bg-[#050A14] text-white flex flex-col items-center justify-center font-sans overflow-hidden z-50",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-slate-900 via-[#050A14] to-[#050A14]"}),t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,232,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(0,232,255,0.03)_1px,transparent_1px)] bg-[size:50px_50px]"}),t.jsxs("div",{className:"relative z-10 w-full max-w-md px-6",children:[t.jsx("div",{className:"flex justify-center mb-12",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 bg-cyan-500 blur-2xl opacity-20 rounded-full animate-pulse"}),t.jsx(Hc,{size:64,className:"text-cyan-400 relative z-10",strokeWidth:1})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:`flex items-center gap-4 transition-all duration-700 ${x>=1?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border ${x>1?"border-green-500 text-green-500":"border-cyan-500/30 text-cyan-400 animate-pulse"}`,children:x>1?t.jsx(Fn,{size:16}):t.jsx(Vp,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-slate-200",children:k("intro.mainServer")}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:k("intro.connectingServer")})]})]}),t.jsxs("div",{className:`flex items-center gap-4 transition-all duration-700 delay-100 ${x>=2?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border ${x>2?"border-green-500 text-green-500":"border-cyan-500/30 text-cyan-400 animate-pulse"}`,children:x>2?t.jsx(Fn,{size:16}):t.jsx(Vo,{size:16})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-slate-200",children:k("intro.dataSync")}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:k("intro.syncingData")})]})]}),t.jsxs("div",{className:`flex items-center gap-4 transition-all duration-700 delay-200 ${x>=3?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border ${x>=3?"border-cyan-400 text-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.5)]":"border-slate-700 text-slate-600"}`,children:t.jsx(ja,{size:16,className:x>=3?"animate-spin-slow":""})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-bold text-slate-200",children:k("intro.logistics")}),t.jsx("p",{className:"text-xs text-slate-500 font-mono",children:k("intro.connectingWarehouses")})]})]})]}),t.jsx("div",{className:"mt-12 h-1 w-full bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-cyan-500 shadow-[0_0_10px_#06b6d4] transition-all duration-[4000ms] ease-out",style:{width:x>0?"100%":"0%"}})})]})]}):t.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#050A14] relative overflow-hidden font-sans",dir:_,children:[t.jsx("div",{className:`absolute top-4 z-50 ${_==="rtl"?"left-4":"right-4"}`,children:t.jsx(xh,{variant:"floating",size:"md"})}),t.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[t.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(0,232,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(0,232,255,0.03)_1px,transparent_1px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)]"}),t.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-cyan-900/20 rounded-full blur-[120px]"}),t.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-900/20 rounded-full blur-[120px]"}),t.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-cyan-400 rounded-full blur-[2px] animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1 h-1 bg-white rounded-full blur-[1px] animate-ping"})]}),t.jsxs("div",{className:"relative z-10 w-full max-w-lg px-4 animate-fade-in-up",children:[t.jsxs("div",{className:"group relative",children:[t.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000"}),t.jsxs("div",{className:"relative bg-[#0B1221]/90 backdrop-blur-xl border border-white/10 rounded-2xl p-8 md:p-12 shadow-2xl",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 mb-6 shadow-inner relative group-hover:scale-105 transition-transform duration-500",children:[t.jsx("div",{className:"absolute inset-0 bg-cyan-500/10 rounded-2xl animate-pulse"}),t.jsx(Hc,{size:40,className:"text-cyan-400 relative z-10",strokeWidth:1.5})]}),t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2 tracking-tight","data-testid":"text-login-title",children:((ee=U==null?void 0:U.authPageTexts)==null?void 0:ee.loginTitle)||k("login.wholesaleLogin")}),t.jsx("h2",{className:"text-lg text-cyan-400 font-bold mb-3",children:k("common.siniCar")}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-cyan-500/80 text-sm font-mono tracking-wider",children:[t.jsx(Gr,{size:14}),t.jsx("span",{children:((V=U==null?void 0:U.authPageTexts)==null?void 0:V.loginSubtitle)||k("login.b2bPortal")})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 p-1 bg-slate-900/60 rounded-lg mb-8 border border-slate-700",children:[t.jsx("button",{onClick:()=>{u("OWNER"),C(""),S("")},className:`py-2 rounded-md text-sm font-bold transition-all ${d==="OWNER"?"bg-cyan-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,"data-testid":"button-login-owner",children:k("login.ownerLogin")}),t.jsx("button",{onClick:()=>{u("STAFF"),C(""),S("")},className:`py-2 rounded-md text-sm font-bold transition-all ${d==="STAFF"?"bg-cyan-600 text-white shadow-lg":"text-slate-400 hover:text-white"}`,"data-testid":"button-login-staff",children:k("login.staffLogin")})]}),t.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[d==="OWNER"?((P=U==null?void 0:U.authPageTexts)==null?void 0:P.loginClientIdLabel)||k("login.clientId"):k("login.phoneNumber"),t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-500 shadow-[0_0_5px_#06b6d4]"})]}),t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none text-slate-500 group-focus-within/input:text-cyan-400 transition-colors",children:d==="OWNER"?t.jsx(bn,{size:20}):t.jsx(vn,{size:20})}),t.jsx("input",{type:d==="OWNER"?"text":"tel",required:!0,className:"block w-full pr-12 pl-4 py-4 bg-slate-900/50 border border-slate-700 text-white placeholder-slate-600 rounded-lg focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all font-mono",placeholder:d==="OWNER"?((Y=U==null?void 0:U.authPageTexts)==null?void 0:Y.loginClientIdPlaceholder)||"C-100200":"05xxxxxxxx",value:O,onChange:Z=>C(Z.target.value),"data-testid":"input-identifier"}),t.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:d==="OWNER"?((J=U==null?void 0:U.authPageTexts)==null?void 0:J.loginPasswordLabel)||k("login.password"):k("login.activationCode")}),t.jsxs("div",{className:"relative group/input",children:[t.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none text-slate-500 group-focus-within/input:text-cyan-400 transition-colors",children:d==="OWNER"?t.jsx(wa,{size:20}):t.jsx(Ln,{size:20})}),t.jsx("input",{type:d==="OWNER"?"password":"text",required:!0,className:"block w-full pr-12 pl-4 py-4 bg-slate-900/50 border border-slate-700 text-white placeholder-slate-600 rounded-lg focus:outline-none focus:border-cyan-500/50 focus:ring-1 focus:ring-cyan-500/50 transition-all",placeholder:d==="OWNER"?((K=U==null?void 0:U.authPageTexts)==null?void 0:K.loginPasswordPlaceholder)||"":"123456",value:E,onChange:Z=>S(Z.target.value),"data-testid":"input-password"}),t.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-slate-600 group-focus-within/input:border-cyan-500 transition-colors"})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[t.jsxs("div",{className:"relative flex items-center justify-center w-5 h-5 border border-slate-600 rounded bg-slate-900/50 group-hover:border-cyan-500 transition-colors",children:[t.jsx("input",{type:"checkbox",className:"peer appearance-none w-full h-full cursor-pointer",checked:D,onChange:Z=>M(Z.target.checked),"data-testid":"checkbox-remember-me"}),t.jsx(Fn,{size:12,className:"text-cyan-400 opacity-0 peer-checked:opacity-100 absolute"})]}),t.jsx("span",{className:"text-sm text-slate-400 group-hover:text-cyan-400 transition-colors",children:k("login.rememberMe")})]}),d==="OWNER"&&t.jsx("a",{href:"#",className:"text-sm font-bold text-slate-500 hover:text-white transition-colors","data-testid":"link-forgot-password",children:((se=U==null?void 0:U.authPageTexts)==null?void 0:se.loginForgotPasswordText)||k("login.forgotPassword")})]}),t.jsxs("button",{type:"submit",disabled:l,className:"w-full py-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold tracking-wide rounded-lg shadow-[0_0_20px_rgba(6,182,212,0.3)] hover:shadow-[0_0_30px_rgba(6,182,212,0.5)] transition-all flex items-center justify-center gap-3 group/btn relative overflow-hidden","data-testid":"button-login",children:[l?t.jsx("span",{className:"animate-pulse",children:k("login.verifying")}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"relative z-10",children:((G=U==null?void 0:U.authPageTexts)==null?void 0:G.loginButtonText)||k("login.enter")}),t.jsx(el,{className:"w-5 h-5 rtl:rotate-180 relative z-10 group-hover/btn:translate-x-1 rtl:group-hover/btn:-translate-x-1 transition-transform"})]}),t.jsx("div",{className:"absolute top-0 -left-full w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 group-hover/btn:animate-shine"})]})]}),t.jsxs("div",{className:"mt-10 pt-6 border-t border-white/5 flex flex-col items-center gap-3 text-center",children:[t.jsxs("div",{className:"flex items-center gap-2 text-emerald-500/80 bg-emerald-500/5 px-3 py-1 rounded-full border border-emerald-500/10",children:[t.jsx(Ln,{size:14}),t.jsx("span",{className:"text-[10px] font-bold tracking-wider",children:k("login.secureConnection")})]}),t.jsx("p",{className:"text-xs text-slate-500",children:k("login.securityNote")}),d==="OWNER"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>i("REGISTER"),className:"mt-4 text-cyan-500 text-sm font-bold hover:text-cyan-400 hover:underline transition-all","data-testid":"button-open-account-request",children:((te=U==null?void 0:U.authPageTexts)==null?void 0:te.loginRegisterLinkText)||k("login.openNewAccount")}),t.jsxs("button",{onClick:()=>i("PARTNER_REGISTER"),className:"mt-3 flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600/20 to-teal-600/20 border border-emerald-500/30 text-emerald-400 rounded-lg font-bold hover:bg-emerald-600/30 hover:border-emerald-400/50 hover:text-emerald-300 transition-all group","data-testid":"button-partner-register",children:[t.jsx(Bse,{size:18,className:"group-hover:scale-110 transition-transform"}),t.jsx("span",{children:" "})]})]}),(U==null?void 0:U.guestModeEnabled)&&t.jsxs("button",{onClick:W,className:"mt-4 flex items-center justify-center gap-2 px-6 py-3 bg-slate-800/50 border border-slate-600 text-slate-300 rounded-lg font-bold hover:bg-slate-700/50 hover:border-cyan-500/50 hover:text-white transition-all group","data-testid":"button-guest-login",children:[t.jsx(ja,{size:18,className:"group-hover:text-cyan-400 transition-colors"}),t.jsx("span",{children:k("login.enterAsGuest")})]}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-white/5",children:[t.jsx("p",{className:"text-[10px] text-slate-500 text-center mb-3",children:k("login.quickLoginForTesting")}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{C("admin"),S("admin"),u("OWNER")},className:"px-2 py-2 bg-red-600/20 border border-red-500/30 text-red-400 text-xs rounded hover:bg-red-600/40 transition-all","data-testid":"quick-login-admin",children:" "}),t.jsx("button",{type:"button",onClick:()=>{C("1"),S("1"),u("OWNER")},className:"px-2 py-2 bg-yellow-600/20 border border-yellow-500/30 text-yellow-400 text-xs rounded hover:bg-yellow-600/40 transition-all","data-testid":"quick-login-manager",children:""}),t.jsx("button",{type:"button",onClick:()=>{C("user-5"),S("5"),u("OWNER")},className:"px-2 py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs rounded hover:bg-green-600/40 transition-all","data-testid":"quick-login-supplier",children:""}),t.jsx("button",{type:"button",onClick:()=>{C("0500056988"),S("381960"),u("STAFF")},className:"px-2 py-2 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs rounded hover:bg-blue-600/40 transition-all","data-testid":"quick-login-staff",children:""}),t.jsx("button",{type:"button",onClick:()=>{C("MKT-001"),S("marketer123"),u("OWNER")},className:"px-2 py-2 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs rounded hover:bg-purple-600/40 transition-all","data-testid":"quick-login-marketer",children:""}),t.jsx("button",{type:"button",onClick:()=>{C("ADV-001"),S("advertiser123"),u("OWNER")},className:"px-2 py-2 bg-pink-600/20 border border-pink-500/30 text-pink-400 text-xs rounded hover:bg-pink-600/40 transition-all","data-testid":"quick-login-advertiser",children:""})]})]})]})]})]}),t.jsx("div",{className:"text-center mt-6 text-slate-600 text-xs font-mono",children:" 2025 SINI CAR WHOLESALE SYSTEMS. V2.5.0"})]})]})}function $Ce(){return t.jsx(Pce,{children:t.jsx(Mce,{children:t.jsx(Wde,{children:t.jsxs(MCe,{children:[t.jsx(PCe,{}),t.jsx(BCe,{}),t.jsx(DCe,{}),t.jsx(LCe,{}),t.jsx(zCe,{})]})})})})}const dB=document.getElementById("root");if(!dB)throw new Error("Could not find root element to mount to");const qCe=Tq.createRoot(dB);qCe.render(t.jsx(Oe.StrictMode,{children:t.jsx($Ce,{})}));export{Tl as _,_o as c,ea as g};
