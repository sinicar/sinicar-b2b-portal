import { MessageChannel, MessageEvent, MessageStatus } from '@prisma/client';
export declare function getTemplateFromCache(event: MessageEvent, channel: MessageChannel, language?: string): Promise<any | null>;
export declare function refreshTemplateCache(): Promise<void>;
export declare function renderTemplate(template: string, variables: Record<string, any>): string;
export interface SendMessageContext {
    recipientId?: string;
    recipientType?: string;
    recipientName?: string;
    recipientPhone?: string;
    recipientEmail?: string;
    language?: string;
    variables: Record<string, any>;
    metadata?: Record<string, any>;
}
export interface SendMessageResult {
    success: boolean;
    logId?: string;
    error?: string;
}
export declare function sendEventMessage(event: MessageEvent, channel: MessageChannel, context: SendMessageContext): Promise<SendMessageResult>;
export declare function getAllTemplates(): Promise<{
    id: string;
    name: string;
    isActive: boolean;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    sortOrder: number;
    createdBy: string | null;
    nameEn: string | null;
    nameAr: string | null;
    language: string;
    updatedBy: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    subjectAr: string | null;
    subjectEn: string | null;
    bodyAr: string | null;
    bodyEn: string | null;
    variables: string | null;
    isDefault: boolean;
}[]>;
export declare function getTemplatesByEvent(event: MessageEvent): Promise<{
    id: string;
    name: string;
    isActive: boolean;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    sortOrder: number;
    createdBy: string | null;
    nameEn: string | null;
    nameAr: string | null;
    language: string;
    updatedBy: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    subjectAr: string | null;
    subjectEn: string | null;
    bodyAr: string | null;
    bodyEn: string | null;
    variables: string | null;
    isDefault: boolean;
}[]>;
export declare function getTemplateById(id: string): Promise<{
    id: string;
    name: string;
    isActive: boolean;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    sortOrder: number;
    createdBy: string | null;
    nameEn: string | null;
    nameAr: string | null;
    language: string;
    updatedBy: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    subjectAr: string | null;
    subjectEn: string | null;
    bodyAr: string | null;
    bodyEn: string | null;
    variables: string | null;
    isDefault: boolean;
} | null>;
export declare function createTemplate(data: {
    event: MessageEvent;
    channel: MessageChannel;
    language: string;
    name: string;
    nameAr?: string;
    nameEn?: string;
    subject?: string;
    subjectAr?: string;
    subjectEn?: string;
    body: string;
    bodyAr?: string;
    bodyEn?: string;
    variables?: string;
    description?: string;
    isDefault?: boolean;
    isActive?: boolean;
    createdBy?: string;
}): Promise<{
    id: string;
    name: string;
    isActive: boolean;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    sortOrder: number;
    createdBy: string | null;
    nameEn: string | null;
    nameAr: string | null;
    language: string;
    updatedBy: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    subjectAr: string | null;
    subjectEn: string | null;
    bodyAr: string | null;
    bodyEn: string | null;
    variables: string | null;
    isDefault: boolean;
}>;
export declare function updateTemplate(id: string, data: {
    name?: string;
    nameAr?: string;
    nameEn?: string;
    subject?: string;
    subjectAr?: string;
    subjectEn?: string;
    body?: string;
    bodyAr?: string;
    bodyEn?: string;
    variables?: string;
    description?: string;
    isDefault?: boolean;
    isActive?: boolean;
    updatedBy?: string;
}): Promise<{
    id: string;
    name: string;
    isActive: boolean;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    sortOrder: number;
    createdBy: string | null;
    nameEn: string | null;
    nameAr: string | null;
    language: string;
    updatedBy: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    subjectAr: string | null;
    subjectEn: string | null;
    bodyAr: string | null;
    bodyEn: string | null;
    variables: string | null;
    isDefault: boolean;
}>;
export declare function deleteTemplate(id: string): Promise<{
    id: string;
    name: string;
    isActive: boolean;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    sortOrder: number;
    createdBy: string | null;
    nameEn: string | null;
    nameAr: string | null;
    language: string;
    updatedBy: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    subjectAr: string | null;
    subjectEn: string | null;
    bodyAr: string | null;
    bodyEn: string | null;
    variables: string | null;
    isDefault: boolean;
}>;
export declare function toggleTemplateActive(id: string, isActive: boolean, updatedBy?: string): Promise<{
    id: string;
    name: string;
    isActive: boolean;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    sortOrder: number;
    createdBy: string | null;
    nameEn: string | null;
    nameAr: string | null;
    language: string;
    updatedBy: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    subjectAr: string | null;
    subjectEn: string | null;
    bodyAr: string | null;
    bodyEn: string | null;
    variables: string | null;
    isDefault: boolean;
}>;
export declare function getMessageLogs(filters?: {
    event?: MessageEvent;
    channel?: MessageChannel;
    status?: MessageStatus;
    recipientId?: string;
    startDate?: Date;
    endDate?: Date;
    limit?: number;
    offset?: number;
}): Promise<{
    logs: ({
        template: {
            name: string;
            nameAr: string | null;
        } | null;
    } & {
        id: string;
        status: import(".prisma/client").$Enums.MessageStatus;
        createdAt: Date;
        updatedAt: Date;
        metadata: string | null;
        language: string;
        externalId: string | null;
        body: string;
        event: import(".prisma/client").$Enums.MessageEvent;
        channel: import(".prisma/client").$Enums.MessageChannel;
        subject: string | null;
        variables: string | null;
        recipientId: string | null;
        recipientType: string | null;
        recipientName: string | null;
        recipientPhone: string | null;
        recipientEmail: string | null;
        sentAt: Date | null;
        deliveredAt: Date | null;
        readAt: Date | null;
        errorMessage: string | null;
        errorCode: string | null;
        retryCount: number;
        templateId: string | null;
    })[];
    total: number;
}>;
export declare function getMessageLogById(id: string): Promise<({
    template: {
        id: string;
        name: string;
        isActive: boolean;
        createdAt: Date;
        updatedAt: Date;
        description: string | null;
        sortOrder: number;
        createdBy: string | null;
        nameEn: string | null;
        nameAr: string | null;
        language: string;
        updatedBy: string | null;
        body: string;
        event: import(".prisma/client").$Enums.MessageEvent;
        channel: import(".prisma/client").$Enums.MessageChannel;
        subject: string | null;
        subjectAr: string | null;
        subjectEn: string | null;
        bodyAr: string | null;
        bodyEn: string | null;
        variables: string | null;
        isDefault: boolean;
    } | null;
} & {
    id: string;
    status: import(".prisma/client").$Enums.MessageStatus;
    createdAt: Date;
    updatedAt: Date;
    metadata: string | null;
    language: string;
    externalId: string | null;
    body: string;
    event: import(".prisma/client").$Enums.MessageEvent;
    channel: import(".prisma/client").$Enums.MessageChannel;
    subject: string | null;
    variables: string | null;
    recipientId: string | null;
    recipientType: string | null;
    recipientName: string | null;
    recipientPhone: string | null;
    recipientEmail: string | null;
    sentAt: Date | null;
    deliveredAt: Date | null;
    readAt: Date | null;
    errorMessage: string | null;
    errorCode: string | null;
    retryCount: number;
    templateId: string | null;
}) | null>;
export declare function getTemplateVariables(event?: MessageEvent): Promise<{
    id: string;
    name: string;
    createdAt: Date;
    updatedAt: Date;
    description: string | null;
    code: string;
    sortOrder: number;
    nameEn: string | null;
    nameAr: string | null;
    event: import(".prisma/client").$Enums.MessageEvent;
    sampleValue: string | null;
    isRequired: boolean;
}[]>;
export declare function getMessageSettings(): Promise<{
    id: string;
    createdAt: Date;
    updatedAt: Date;
    key: string;
    defaultLanguage: string;
    enableWhatsApp: boolean;
    enableEmail: boolean;
    enableNotifications: boolean;
    whatsappApiUrl: string | null;
    whatsappApiKey: string | null;
    whatsappPhoneNumberId: string | null;
    emailProvider: string;
    emailFromAddress: string | null;
    emailFromName: string | null;
    smtpHost: string | null;
    smtpPort: number | null;
    smtpUser: string | null;
    smtpPassword: string | null;
    retryAttempts: number;
    retryDelayMinutes: number;
    logRetentionDays: number;
}>;
export declare function updateMessageSettings(data: {
    defaultLanguage?: string;
    enableWhatsApp?: boolean;
    enableEmail?: boolean;
    enableNotifications?: boolean;
    whatsappApiUrl?: string;
    whatsappApiKey?: string;
    whatsappPhoneNumberId?: string;
    emailProvider?: string;
    emailFromAddress?: string;
    emailFromName?: string;
    smtpHost?: string;
    smtpPort?: number;
    smtpUser?: string;
    smtpPassword?: string;
    retryAttempts?: number;
    retryDelayMinutes?: number;
    logRetentionDays?: number;
}): Promise<{
    id: string;
    createdAt: Date;
    updatedAt: Date;
    key: string;
    defaultLanguage: string;
    enableWhatsApp: boolean;
    enableEmail: boolean;
    enableNotifications: boolean;
    whatsappApiUrl: string | null;
    whatsappApiKey: string | null;
    whatsappPhoneNumberId: string | null;
    emailProvider: string;
    emailFromAddress: string | null;
    emailFromName: string | null;
    smtpHost: string | null;
    smtpPort: number | null;
    smtpUser: string | null;
    smtpPassword: string | null;
    retryAttempts: number;
    retryDelayMinutes: number;
    logRetentionDays: number;
}>;
export declare function getEventsSummary(): Promise<{
    event: "QUOTE_CREATED" | "QUOTE_APPROVED" | "QUOTE_REJECTED" | "QUOTE_EXPIRED" | "ORDER_CREATED" | "ORDER_CONFIRMED" | "ORDER_PROCESSING" | "ORDER_SHIPPED" | "ORDER_DELIVERED" | "ORDER_CANCELLED" | "PAYMENT_RECEIVED" | "PAYMENT_OVERDUE" | "PAYMENT_REMINDER" | "SHIPMENT_CREATED" | "SHIPMENT_DISPATCHED" | "SHIPMENT_IN_TRANSIT" | "SHIPMENT_DELIVERED" | "ACCOUNT_CREATED" | "ACCOUNT_ACTIVATED" | "ACCOUNT_SUSPENDED" | "ACCOUNT_REACTIVATED" | "PASSWORD_RESET" | "PASSWORD_CHANGED" | "WELCOME_MESSAGE" | "INSTALLMENT_REQUEST_CREATED" | "INSTALLMENT_REQUEST_APPROVED" | "INSTALLMENT_REQUEST_REJECTED" | "INSTALLMENT_PAYMENT_DUE" | "SUPPLIER_APPLICATION_RECEIVED" | "SUPPLIER_APPLICATION_APPROVED" | "SUPPLIER_APPLICATION_REJECTED" | "CATALOG_UPLOAD_RECEIVED" | "CATALOG_UPLOAD_APPROVED" | "CATALOG_UPLOAD_REJECTED" | "LOW_STOCK_ALERT" | "PRICE_CHANGE_NOTIFICATION" | "NEW_FEATURE_ANNOUNCEMENT" | "MAINTENANCE_NOTICE" | "CUSTOM_NOTIFICATION";
    channels: {
        whatsapp: {
            total: number;
            active: number;
            languages: string[];
        };
        email: {
            total: number;
            active: number;
            languages: string[];
        };
        notification: {
            total: number;
            active: number;
            languages: string[];
        };
    };
    totalTemplates: number;
    activeTemplates: number;
}[]>;
export declare function sendTestMessage(templateId: string, testRecipient: {
    phone?: string;
    email?: string;
    userId?: string;
}, testVariables: Record<string, any>): Promise<SendMessageResult>;
export declare function getLogStats(days?: number): Promise<{
    byChannelStatus: (import(".prisma/client").Prisma.PickEnumerable<import(".prisma/client").Prisma.MessageLogGroupByOutputType, ("status" | "channel")[]> & {
        _count: number;
    })[];
    dailyStats: unknown;
}>;
//# sourceMappingURL=messaging.service.d.ts.map